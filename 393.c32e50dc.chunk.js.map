{"version":3,"file":"393.c32e50dc.chunk.js","mappings":";+GAGA,MAAMA,GAAa,EACbC,GAAe,EAGfC,EAAiB,EACjBC,EAAY,EAIZC,EAAkB,EAClBC,EAAQ,EAGRC,EAAmB,EAEnBC,EAAa,KACbC,EAAY,KAEZC,EAAc,KASdC,EAAgC,EAChCC,EAAmC,EACnCC,EAAoC,EACpCC,EAAuB,GACvBC,EAAsB,GACtBC,EAAa,GAEbC,EAAmC,oBAAnBC,eAChBC,EAAOC,SACPC,EAAY,KAGlB,SAASC,EAAcC,EAAQC,GAC7B,MAAMC,EAAM,IAAIC,YAAYH,GACtBI,EAAM,IAAIC,YAAYL,GAC5B,IAAIM,EAASJ,EAAKD,EAAMtB,IAAiB,KAAO,EAC5C4B,EAASN,IAAQ,EACrB,GAAIK,GAAUR,EAAW,OAAOU,OAAOC,aAAaC,MAAMF,OAAQJ,EAAIO,SAASJ,EAAQA,EAASD,IAChG,MAAMM,EAAQ,GACd,EAAG,CACD,MAAMC,EAAOT,EAAIG,EAAST,EAAY,GAChCgB,EAAOD,GAAQ,OAAUA,EAAO,MAASf,EAAY,EAAIA,EAC/Dc,EAAMG,KAAKP,OAAOC,aAAaC,MAAMF,OAAQJ,EAAIO,SAASJ,EAAQA,GAAUO,KAC5ER,GAAUQ,CACZ,OAASR,EAASR,GAClB,OAAOc,EAAMI,KAAK,IAAMR,OAAOC,aAAaC,MAAMF,OAAQJ,EAAIO,SAASJ,EAAQA,EAASD,GAC1F,CAGA,SAASW,EAAeC,GACtB,MAAMC,EAAa,CAAC,EAEpB,SAASC,EAAUC,EAAQpB,GACzB,OAAKoB,EACEtB,EAAcsB,EAAOrB,OAAQC,GADhB,eAEtB,CAGA,MAAMqB,EAAOJ,EAAQI,IAAMJ,EAAQI,KAAO,CAAC,EAY3C,OAXAA,EAAIC,MAAQD,EAAIC,OAAS,SAAeC,EAAMC,EAAMC,EAAMC,GACxD,MAAMN,EAASF,EAAWE,QAAUC,EAAID,OACxC,MAAMO,MAAM,UAAYR,EAAUC,EAAQG,GAAQ,OAASJ,EAAUC,EAAQI,GAAQ,IAAMC,EAAO,IAAMC,EAC1G,EACAL,EAAIO,MAAQP,EAAIO,OAAS,SAAeL,EAAMM,GAC5C,MAAMT,EAASF,EAAWE,QAAUC,EAAID,OACxCU,EAAQC,IAAI,UAAYZ,EAAUC,EAAQG,IAASM,EAAI,IAAM,IAAMG,MAAMC,UAAUC,MAAMC,KAAKC,UAAW,EAAG,EAAIP,GAAGd,KAAK,MAC1H,EACAE,EAAQoB,KAAOpB,EAAQoB,MAAQA,KAC/BpB,EAAQqB,KAAOrB,EAAQqB,MAAQA,KAExBpB,CACT,CAGA,SAASqB,EAAgBrB,EAAYsB,GACnC,MAAMC,EAAaD,EAASE,QACtBtB,EAASqB,EAAWrB,OACpBuB,EAAQF,EAAWE,MACnBC,EAAQH,EAAoB,QAC5BI,EAASJ,EAAqB,SAC9BK,EAAWL,EAAwB,cAAK,EAG9C,SAASM,EAAQC,GACf,MAAM/C,EAAM,IAAIC,YAAYkB,EAAOrB,QAEnC,IAAKiD,KAAQ,IADC/C,EAAI6C,IAAa,GACL,MAAMnB,MAAM,eAAiBqB,GACvD,OAAO/C,GAAK6C,EAAW,IAAM,GAAU,EAALE,EACpC,CAGA,SAASC,EAAQD,GACf,MAAM/C,EAAM,IAAIC,YAAYkB,EAAOrB,QAEnC,IAAKiD,KAAQ,IADC/C,EAAI6C,IAAa,GACL,MAAMnB,MAAM,eAAiBqB,GACvD,OAAO/C,GAAK6C,EAAW,IAAM,GAAU,EAALE,EAAS,EAC7C,CAGA,SAASE,EAAcC,GACrB,OAAO,GAAKd,KAAKe,MAAOD,IAASpE,EAAoB,GACvD,CA6BA,SAASsE,EAAQC,EAAWC,EAAQC,GAClC,MAAMzD,EAASqB,EAAOrB,OACtB,GAAIyD,EACF,OAAQF,GACN,KAAK,EAAG,OAAO,IAAIG,aAAa1D,GAChC,KAAK,EAAG,OAAO,IAAI2D,aAAa3D,QAGlC,OAAQuD,GACN,KAAK,EAAG,OAAO,IAAKC,EAASI,UAAYC,YAAY7D,GACrD,KAAK,EAAG,OAAO,IAAKwD,EAASM,WAAazD,aAAaL,GACvD,KAAK,EAAG,OAAO,IAAKwD,EAASO,WAAa5D,aAAaH,GACvD,KAAK,EAAG,OAAO,IAAKwD,EAASQ,cAAgBrE,gBAAgBK,GAGjE,MAAM4B,MAAM,sBAAwB2B,EACtC,CA2BA,SAASU,EAAeC,GACtB,MAAMhE,EAAM,IAAIC,YAAYkB,EAAOrB,QAC7BiD,EAAK/C,EAAIgE,EAAMxF,IAAc,GAC7B0E,EAAOJ,EAAQC,GACrB,KAAMG,EAAOtE,GAAkB,MAAM8C,MAAM,iBAAmBqB,GAC9D,MAAMkB,EAAQhB,EAAcC,GAC5B,IAAIgB,EAAMlE,EAAIgE,EAAM7E,IAAqC,GACzD,MAAMiB,EAAS8C,EAAOrE,EAClBmB,EAAIgE,EAAM1E,IAAwB,GAClCU,EAAIkE,EAAMzF,IAAgB,KAAOwF,EACrC,OAAOb,EAAQa,EAAOf,EAAOnE,EAAYmE,EAAOlE,GACzCyB,SAASyD,KAASD,EAAOC,EAAM9D,EACxC,CAyBA,SAAS+D,EAAcC,EAAMf,EAAWtD,GACtC,OAAO,IAAIqE,EAAKC,EAAkBD,EAAMf,EAAWtD,GACrD,CAGA,SAASsE,EAAkBD,EAAMf,EAAWtD,GAC1C,MAAMD,EAASqB,EAAOrB,OAChBE,EAAM,IAAIC,YAAYH,GACtBwE,EAAStE,EAAID,EAAMZ,IAAqC,GAC9D,OAAO,IAAIiF,EAAKtE,EAAQwE,EAAQtE,EAAIsE,EAAS7F,IAAgB,KAAO4E,EACtE,CA6CA,OApJApC,EAAWsD,cARX,SAAuBC,GACrB,MAAMpE,EAASoE,EAAIpE,OACbL,EAAM4C,EAAMvC,GAAU,EAAGzB,GACzBuB,EAAM,IAAIC,YAAYgB,EAAOrB,QACnC,IAAK,IAAI2E,EAAI,EAAGC,EAAI3E,IAAQ,EAAG0E,EAAIrE,IAAUqE,EAAGvE,EAAIwE,EAAID,GAAKD,EAAIG,WAAWF,GAC5E,OAAO1E,CACT,EAYAkB,EAAW2D,YAPX,SAAqB7E,GACnB,MAAMD,EAASqB,EAAOrB,OAEtB,GADW,IAAIG,YAAYH,GAAQC,EAAMvB,IAAc,KAC5CG,EAAW,MAAM+C,MAAM,iBAAmB3B,GACrD,OAAOF,EAAcC,EAAQC,EAC/B,EA6CAkB,EAAW4D,aArBX,SAAsB9B,EAAI+B,GACxB,MAAM5B,EAAOJ,EAAQC,GACrB,KAAMG,GAAQtE,EAAkBC,IAAS,MAAM6C,MAAM,iBAAmBqB,EAAK,MAAQG,GACrF,MAAMe,EAAQhB,EAAcC,GACtB9C,EAAS0E,EAAO1E,OAChB8D,EAAMvB,EAAMvC,GAAU6D,EAAOvF,GAC7BsF,EAAMrB,EAAMO,EAAOrE,EAAQU,EAAaF,EAAsB0D,GAC9D/C,EAAM,IAAIC,YAAYkB,EAAOrB,QACnCE,EAAIgE,EAAM9E,IAAkC,GAAK0D,EAAOsB,GACxDlE,EAAIgE,EAAM7E,IAAqC,GAAK+E,EACpDlE,EAAIgE,EAAM5E,IAAsC,GAAKgB,GAAU6D,EAC3Df,EAAOrE,IAAOmB,EAAIgE,EAAM1E,IAAwB,GAAKc,GACzD,MAAM2E,EAAO3B,EAAQa,EAAOf,EAAOnE,EAAYmE,EAAOlE,GACtD,GAAIkE,EAAOjE,EACT,IAAK,IAAIwF,EAAI,EAAGA,EAAIrE,IAAUqE,EAAGM,GAAMb,IAAQD,GAASQ,GAAK7B,EAAOkC,EAAOL,SAE3EM,EAAKC,IAAIF,EAAQZ,IAAQD,GAE3B,OAAOD,CACT,EAmBA/C,EAAW8C,eAAiBA,EAW5B9C,EAAWgE,WARX,SAAoBjB,GAClB,MAAMkB,EAAQnB,EAAeC,GACvBmB,EAAMD,EAAM9E,OACZgF,EAAM,IAAIrD,MAAMoD,GACtB,IAAK,IAAIV,EAAI,EAAGA,EAAIU,EAAKV,IAAKW,EAAIX,GAAKS,EAAMT,GAC7C,OAAOW,CACT,EAWAnE,EAAWoE,iBANX,SAA0BtF,GACxB,MAAMD,EAASqB,EAAOrB,OAChBM,EAAS,IAAIH,YAAYH,GAAQC,EAAMtB,IAAgB,GAC7D,OAAOqB,EAAOmC,MAAMlC,EAAKA,EAAMK,EACjC,EAiBAa,EAAWqE,eAAiBnB,EAAcoB,KAAK,KAAM7B,UAAW,GAChEzC,EAAWuE,mBAAqBnB,EAAkBkB,KAAK,KAAM7B,UAAW,GACxEzC,EAAWwE,gBAAkBtB,EAAcoB,KAAK,KAAM5B,WAAY,GAClE1C,EAAWyE,oBAAsBrB,EAAkBkB,KAAK,KAAM5B,WAAY,GAC1E1C,EAAW0E,uBAAyBxB,EAAcoB,KAAK,KAAMK,kBAAmB,GAChF3E,EAAW4E,2BAA6BxB,EAAkBkB,KAAK,KAAMK,kBAAmB,GACxF3E,EAAW6E,gBAAkB3B,EAAcoB,KAAK,KAAM3B,WAAY,GAClE3C,EAAW8E,oBAAsB1B,EAAkBkB,KAAK,KAAM3B,WAAY,GAC1E3C,EAAW+E,iBAAmB7B,EAAcoB,KAAK,KAAMpF,YAAa,GACpEc,EAAWgF,qBAAuB5B,EAAkBkB,KAAK,KAAMpF,YAAa,GAC5Ec,EAAWiF,gBAAkB/B,EAAcoB,KAAK,KAAM1B,WAAY,GAClE5C,EAAWkF,oBAAsB9B,EAAkBkB,KAAK,KAAM1B,WAAY,GAC1E5C,EAAWmF,iBAAmBjC,EAAcoB,KAAK,KAAMtF,YAAa,GACpEgB,EAAWoF,qBAAuBhC,EAAkBkB,KAAK,KAAMtF,YAAa,GACxET,IACFyB,EAAWqF,gBAAkBnC,EAAcoB,KAAK,KAAMzB,cAAe,GACrE7C,EAAWsF,oBAAsBlC,EAAkBkB,KAAK,KAAMzB,cAAe,GAC7E7C,EAAWuF,iBAAmBrC,EAAcoB,KAAK,KAAM9F,eAAgB,GACvEwB,EAAWwF,qBAAuBpC,EAAkBkB,KAAK,KAAM9F,eAAgB,IAEjFwB,EAAWyF,kBAAoBvC,EAAcoB,KAAK,KAAM/B,aAAc,GACtEvC,EAAW0F,sBAAwBtC,EAAkBkB,KAAK,KAAM/B,aAAc,GAC9EvC,EAAW2F,kBAAoBzC,EAAcoB,KAAK,KAAM9B,aAAc,GACtExC,EAAW4F,sBAAwBxC,EAAkBkB,KAAK,KAAM9B,aAAc,GAa9ExC,EAAW6F,aAVX,SAAsB/G,EAAKgH,GACzB,MAAM/G,EAAM,IAAIC,YAAYkB,EAAOrB,QACnC,IAAIiD,EAAK/C,EAAKD,EAAMvB,IAAe,GACnC,GAAIuE,GAAM/C,EAAI6C,IAAa,GACzB,MAAOE,GAAMgE,EAAQ,OAAO,QACrBhE,EAAKC,EAAQD,IAEtB,OAAO,CACT,EAKA9B,EAAWE,OAASF,EAAWE,QAAUA,EACzCF,EAAWyB,MAASzB,EAAWyB,OAAUA,EAGlCsE,EAASxE,EAAYvB,EAC9B,CAEA,SAASgG,EAAWC,GAClB,MAA2B,oBAAbC,UAA4BD,aAAaC,QACzD,CAGAC,eAAeC,EAAYC,EAAQtG,GACjC,OAAIiG,EAAWK,QAAeA,GAAgBC,EAAqBD,EAAQtG,GACpEsB,EACLvB,EAAeC,IAAYA,EAAU,CAAC,UAChCwG,YAAYH,YAChBC,aAAkBE,YAAYC,OAC1BH,QACME,YAAYE,QAAQJ,GAC9BtG,GAGN,CAoBAoG,eAAeG,EAAqBD,EAAQtG,GAC1C,OAAKwG,YAAYD,qBAQVjF,EACLvB,EAAeC,IAAYA,EAAU,CAAC,WAC/BwG,YAAYD,qBAAqBD,EAAQtG,IAAUuB,UATnD8E,EACLJ,EAAWK,QAAeA,GACtBA,EAAOK,cACPL,EACJtG,EAON,CAKA,SAASgG,EAASvE,EAASxB,GACzB,IAAI2G,EAAS3G,EAAa4G,OAAOC,OAAO7G,GAAc,CAAC,EACnD8G,EAAqBtF,EAA2B,kBAChD,SAASrC,GAAUqC,EAA2B,kBAAEuF,MAAQ5H,CAAQ,EAChEqC,EAA8B,sBAAKA,EAAmB,WAAK,WAAY,EAC3E,IAAK,IAAIwF,KAAgBxF,EAAS,CAChC,IAAKoF,OAAO7F,UAAUkG,eAAehG,KAAKO,EAASwF,GAAe,SAClE,MAAME,EAAO1F,EAAQwF,GACrB,IAAIvH,EAAQuH,EAAaG,MAAM,KAC3BC,EAAOT,EACX,KAAOlH,EAAMN,OAAS,GAAG,CACvB,IAAIkI,EAAO5H,EAAM6H,QACZV,OAAO7F,UAAUkG,eAAehG,KAAKmG,EAAMC,KAAOD,EAAKC,GAAQ,CAAC,GACrED,EAAOA,EAAKC,EACd,CACA,IAAIE,EAAO9H,EAAM,GACb+H,EAAOD,EAAKE,QAAQ,KACxB,GAAID,GAAQ,EAAG,CACb,IAAIE,EAAYH,EAAKI,UAAU,EAAGH,GAC9BI,EAAYR,EAAKM,GACrB,QAAyB,IAAdE,IAA8BA,EAAU7G,UAAW,CAC5D,IAAI8G,EAAO,YAAYC,GACrB,OAAOD,EAAKE,KAAKF,EAAK9G,UAAUiH,YAAY,KAAMF,GACpD,EACAD,EAAK9G,UAAY,CACfkH,QAAS,WACP,OAAOC,KAAKzJ,EACd,GAEFoJ,EAAKE,KAAO,SAASI,GACnB,OAAOvB,OAAOC,OAAOgB,EAAK9G,UAAW,CAAE,CAACtC,GAAO,CAAEsI,MAAOoB,EAAWC,UAAU,IAC/E,EACIR,GAAWhB,OAAOyB,oBAAoBT,GAAWU,SAAQf,GAC3DX,OAAO2B,eAAeV,EAAMN,EAAMX,OAAO4B,yBAAyBZ,EAAWL,MAE/EH,EAAKM,GAAaG,CACpB,CAGA,GAFAN,EAAOA,EAAKI,UAAUH,EAAO,GAC7BJ,EAAOA,EAAKM,GAAW3G,UACnB,cAAc0H,KAAKlB,IACrB,IAAKX,OAAO7F,UAAUkG,eAAehG,KAAKmG,EAAMG,EAAOA,EAAKI,UAAU,IAAK,CACzE,IAAIe,EAASlH,EAAQwF,EAAa2B,QAAQ,OAAQ,SAC9CC,EAASpH,EAAQwF,EAAa2B,QAAQ,OAAQ,SAClD/B,OAAO2B,eAAenB,EAAMG,EAAM,CAChCsB,IAAK,WAAa,OAAOH,EAAOR,KAAKzJ,GAAQ,EAC7CsF,IAAK,SAASgD,GAAS6B,EAAOV,KAAKzJ,GAAOsI,EAAQ,EAClD+B,YAAY,GAEhB,MAEa,gBAATvB,GACDH,EAAKG,GAAQ,IAAIO,KAChBhB,EAAmBgB,EAAK3I,QACjB+H,KAAQY,KACdiB,SAAW7B,GAEbE,EAAKG,GAAQ,YAAYO,GAExB,OADAhB,EAAmBgB,EAAK3I,QACjB+H,EAAKgB,KAAKzJ,MAAUqJ,EAC7B,GAAGiB,SAAW7B,CAGpB,KACM,cAAcuB,KAAKlB,GAChBX,OAAO7F,UAAUkG,eAAehG,KAAKmG,EAAMG,EAAOA,EAAKI,UAAU,KACpEf,OAAO2B,eAAenB,EAAMG,EAAM,CAChCsB,IAAKrH,EAAQwF,EAAa2B,QAAQ,OAAQ,SAC1C5E,IAAKvC,EAAQwF,EAAa2B,QAAQ,OAAQ,SAC1CG,YAAY,IAGS,mBAAT5B,GAAuBA,IAASJ,GAC/CM,EAAKG,GAAQ,IAAIO,KAChBhB,EAAmBgB,EAAK3I,QACjB+H,KAAQY,KACdiB,SAAW7B,EAEdE,EAAKG,GAAQL,CAGnB,CACA,OAAOP,CACT,CAtHAnF,EAAQ4E,YAAcA,EAetB5E,EAAQwH,gBAZR,SAAyB3C,EAAQtG,GAC/B,OAAOsB,EACLvB,EAAeC,IAAYA,EAAU,CAAC,IACtC,IAAIwG,YAAY0C,SACd5C,aAAkBE,YAAYC,OAC1BH,EACA,IAAIE,YAAYC,OAAOH,GAC3BtG,GAGN,EAoBAyB,EAAQ8E,qBAAuBA,EAuF/B9E,EAAQuE,SAAWA,sCC7ZnBY,EAAOnF,QAAU,EAAjB,2CCDA,MAAM,aAAE0H,GAAiB,EAAQ,OAC3BC,EAAc,EAAQ,QACtB,YAAEC,EAAW,WAAEC,GAAe,EAAQ,OAEtCC,EAAW5K,OAAO,WAClB6K,EAAU7K,OAAO,UACjB8K,EAAc9K,OAAO,cACrB+K,EAAe/K,OAAO,eACtBgL,EAAkBhL,OAAO,kBA0K/B8C,EAAQmI,qBAxKR,MACE3B,YAAa4B,GACX,GAAkB,iBAAPA,GAA0B,OAAPA,EAAa,CAEzC,MAAM,IAAIC,UAAU,mEADA,OAAPD,EAAc,cAAgBA,IAE7C,CAEA1B,KAAKsB,GAAe,GACpBtB,KAAKwB,GAAmB,GACxBxB,KAAKqB,GAAW,OAChBrB,KAAKuB,GAAgBvB,KAAKuB,GAAcnF,KAAK4D,MAE7CA,KAAK0B,GAAKA,EACV1B,KAAK0B,GAAGE,eAAe5B,MACvBA,KAAK6B,SAAWH,EAAGG,QACrB,CAEI5K,aACF,OAAO+I,KAAKsB,GAAarK,MAC3B,CAEA6K,IAAKC,EAAKlD,EAAOmD,GACf,GAAsB,SAAlBhC,KAAKqB,GACP,MAAM,IAAIJ,EAAY,gEAAiE,CACrFgB,KAAM,yBAIV,MAAMC,EAAMlC,KAAK0B,GAAGS,UAAUJ,IAAQ/B,KAAK0B,GAAGU,YAAYvD,GAC1D,GAAIqD,EAAK,MAAMA,EAEf,MAAMR,EAAKM,GAA+B,MAApBA,EAAQK,SAAmBL,EAAQK,SAAWrC,KAAK0B,GACnEb,EAAWmB,EACXM,EAAcZ,EAAGY,YAAYN,GAAWA,EAAQM,aAChDC,EAAgBb,EAAGa,cAAcP,GAAWA,EAAQO,eACpDC,EAAYF,EAAYG,OAG9BT,EAAU,IAAKA,EAASM,YAAaE,EAAWD,cAAeA,EAAcE,QAGzEf,IAAO1B,KAAK0B,KACdM,EAAQK,SAAW,MAGrB,MAAMK,EAAYhB,EAAGiB,UAAUL,EAAYM,OAAOb,GAAMS,GAClDK,EAAcN,EAAcK,OAAO/D,GAKzC,OAHAmB,KAAK8C,KAAKJ,EAAWG,EAAab,GAClChC,KAAKsB,GAAa5J,KAAK,IAAKmJ,EAAUkC,KAAM,MAAOhB,MAAKlD,UAEjDmB,IACT,CAEA8C,KAAMf,EAAKlD,EAAOmD,GAAU,CAE5BgB,IAAKjB,EAAKC,GACR,GAAsB,SAAlBhC,KAAKqB,GACP,MAAM,IAAIJ,EAAY,gEAAiE,CACrFgB,KAAM,yBAIV,MAAMC,EAAMlC,KAAK0B,GAAGS,UAAUJ,GAC9B,GAAIG,EAAK,MAAMA,EAEf,MAAMR,EAAKM,GAA+B,MAApBA,EAAQK,SAAmBL,EAAQK,SAAWrC,KAAK0B,GACnEb,EAAWmB,EACXM,EAAcZ,EAAGY,YAAYN,GAAWA,EAAQM,aAChDE,EAAYF,EAAYG,OAa9B,OAVAT,EAAU,IAAKA,EAASM,YAAaE,GAGjCd,IAAO1B,KAAK0B,KACdM,EAAQK,SAAW,MAGrBrC,KAAKiD,KAAKvB,EAAGiB,UAAUL,EAAYM,OAAOb,GAAMS,GAAYR,GAC5DhC,KAAKsB,GAAa5J,KAAK,IAAKmJ,EAAUkC,KAAM,MAAOhB,QAE5C/B,IACT,CAEAiD,KAAMlB,EAAKC,GAAU,CAErBkB,QACE,GAAsB,SAAlBlD,KAAKqB,GACP,MAAM,IAAIJ,EAAY,kEAAmE,CACvFgB,KAAM,yBAOV,OAHAjC,KAAKmD,SACLnD,KAAKsB,GAAe,GAEbtB,IACT,CAEAmD,SAAW,CAEXC,MAAOpB,EAASqB,GAyBd,OAxBAA,EAAWnC,EAAYc,EAASqB,GAChCA,EAAWrC,EAAaqC,EAAUjC,GAClCY,EAAUb,EAAWa,GAEC,SAAlBhC,KAAKqB,GACPrB,KAAK6B,SAASwB,EAAU,IAAIpC,EAAY,kEAAmE,CACzGgB,KAAM,0BAEiB,IAAhBjC,KAAK/I,OACd+I,KAAKsD,MAAMD,IAEXrD,KAAKqB,GAAW,UAChBrB,KAAKuD,OAAOvB,GAAUE,IACpBlC,KAAKqB,GAAW,UAChBrB,KAAKwB,GAAiB9J,MAAK,IAAM2L,EAASnB,KAIrCA,GAAKlC,KAAK0B,GAAG8B,KAAK,QAASxD,KAAKsB,IAErCtB,KAAKyD,OAAOzD,KAAKuB,GAAa,KAI3B8B,EAASjC,EAClB,CAEAmC,OAAQvB,EAASqB,GAAW,CAE5BC,MAAOD,GAgBL,OAfAA,EAAWrC,EAAaqC,EAAUjC,GAEZ,YAAlBpB,KAAKqB,GACPrB,KAAKwB,GAAiB9J,KAAK2L,GACA,WAAlBrD,KAAKqB,GACdrB,KAAK6B,SAASwB,IAEdrD,KAAKwB,GAAiB9J,KAAK2L,GAEL,YAAlBrD,KAAKqB,KACPrB,KAAKqB,GAAW,UAChBrB,KAAKyD,OAAOzD,KAAKuB,MAId8B,EAASjC,EAClB,CAEAqC,OAAQJ,GACNrD,KAAK6B,SAASwB,EAChB,CAEA,CAAC9B,KACCvB,KAAKqB,GAAW,SAChBrB,KAAK0B,GAAGgC,eAAe1D,MAEvB,MAAM2D,EAAY3D,KAAKwB,GACvBxB,KAAKwB,GAAmB,GAExB,IAAK,MAAMoC,KAAMD,EACfC,GAEJ,sDC/KF,MAAM,aAAE5C,GAAiB,EAAQ,OAC3BC,EAAc,EAAQ,QACtB,WAAEE,EAAU,YAAED,GAAgB,EAAQ,OAEtCE,EAAW5K,OAAO,WAClBqN,EAAYrN,OAAO,YACnBsN,EAAWtN,OAAO,WAClBuN,EAAavN,OAAO,aACpBwN,EAAcxN,OAAO,cACrByN,EAAazN,OAAO,aACpB0N,EAAc1N,OAAO,cACrB2N,EAAc3N,OAAO,cACrB4N,EAAW5N,OAAO,WAClB6N,EAAe7N,OAAO,eACtB8N,EAAU9N,OAAO,UACjBgL,EAAkBhL,OAAO,kBACzB+N,EAAe/N,OAAO,eACtBgO,EAAiBhO,OAAO,iBACxBiO,EAAgBjO,OAAO,gBACvBkO,EAAUlO,OAAO,UACjBmO,EAAQnO,OAAO,QACfoO,EAAUpO,OAAO,UACjBqO,EAASrO,OAAO,SAChBsO,EAAStO,OAAO,SAEhBuO,EAAerG,OAAOsG,OAAO,CAAC,GAC9BC,EAAO,OACb,IAAIC,GAAY,EAIhB,MAAMC,EACJrF,YAAa4B,EAAIM,EAASoD,GACxB,GAAkB,iBAAP1D,GAA0B,OAAPA,EAAa,CAEzC,MAAM,IAAIC,UAAU,mEADA,OAAPD,EAAc,cAAgBA,IAE7C,CAEA,GAAuB,iBAAZM,GAAoC,OAAZA,EACjC,MAAM,IAAIL,UAAU,iDAGtB3B,KAAKsE,IAAW,EAChBtE,KAAKwB,GAAmB,GACxBxB,KAAK8D,IAAY,EACjB9D,KAAKoE,IAAY,EACjBpE,KAAKiE,IAAc,EACnBjE,KAAK6D,GAAa,KAClB7D,KAAK+D,GAAc/D,KAAK+D,GAAY3H,KAAK4D,MACzCA,KAAKgE,GAAehE,KAAKgE,GAAa5H,KAAK4D,MAC3CA,KAAKqE,GAAgBrE,KAAKqE,GAAcjI,KAAK4D,MAC7CA,KAAKuE,GAAgBvC,EAAQuC,GAC7BvE,KAAKwE,GAAkBxC,EAAQwC,GAC/BxE,KAAK0E,GAAWU,EAChBpF,KAAK6E,GAAUQ,OAAOC,UAAUtD,EAAQuD,QAAUvD,EAAQuD,OAAS,EAAIvD,EAAQuD,MAAQC,IACvFxF,KAAK8E,GAAU,EAMf9E,KAAKyE,KAAmBzC,EAAQyD,aAEhCzF,KAAK0B,GAAKA,EACV1B,KAAK0B,GAAGE,eAAe5B,MACvBA,KAAK6B,SAAWH,EAAGG,QACrB,CAEI6D,YACF,OAAO1F,KAAK8E,EACd,CAEIS,YACF,OAAOvF,KAAK6E,EACd,CAEAc,KAAMtC,GACJ,IAAIuC,EAEJ,QAAiBC,IAAbxC,EACFuC,EAAU,IAAIE,SAAQ,CAACC,EAASC,KAC9B3C,EAAW,CAACnB,EAAKH,EAAKlD,KAChBqD,EAAK8D,EAAO9D,GACNlC,KAAK0E,QACEmB,IAAR9D,QAA+B8D,IAAVhH,EAAqBkH,IAC9CA,EAAQ,CAAChE,EAAKlD,IAFMkH,EAAQhE,EAER,CAC3B,SAEG,GAAwB,mBAAbsB,EAChB,MAAM,IAAI1B,UAAU,+BAmBtB,OAhBI3B,KAAKoE,GACPpE,KAAK6B,SAASwB,EAAU,IAAIpC,EAAY,yDAA0D,CAChGgB,KAAM,6BAECjC,KAAK8D,GACd9D,KAAK6B,SAASwB,EAAU,IAAIpC,EAAY,yEAA0E,CAChHgB,KAAM,0BAGRjC,KAAK8D,IAAY,EACjB9D,KAAK6D,GAAaR,EAEdrD,KAAK8E,IAAW9E,KAAK6E,GAAS7E,KAAK6B,SAAS7B,KAAK+D,GAAa,MAC7D/D,KAAKiG,MAAMjG,KAAK+D,KAGhB6B,CACT,CAEAK,MAAO5C,GACLrD,KAAK6B,SAASwB,EAChB,CAEA6C,MAAOzO,EAAMuK,EAASqB,GAKpB,OAJAA,EAAWnC,EAAYc,EAASqB,GAChCA,EAAWrC,EAAaqC,EAAUjC,GAClCY,EAAUb,EAAWa,EAAS+C,GAEzBM,OAAOC,UAAU7N,IAKlBuI,KAAKoE,GACPpE,KAAK6B,SAASwB,EAAU,IAAIpC,EAAY,0DAA2D,CACjGgB,KAAM,6BAECjC,KAAK8D,GACd9D,KAAK6B,SAASwB,EAAU,IAAIpC,EAAY,0EAA2E,CACjHgB,KAAM,0BAGJxK,EAAO,IAAGA,EAAO,GACjBuI,KAAK6E,GAAUW,MAAU/N,EAAOwB,KAAKkN,IAAI1O,EAAMuI,KAAK6E,GAAU7E,KAAK8E,KAEvE9E,KAAK8D,IAAY,EACjB9D,KAAK6D,GAAaR,EAEd5L,GAAQ,EAAGuI,KAAK6B,SAAS7B,KAAKgE,GAAc,KAAM,IACjDhE,KAAKoG,OAAO3O,EAAMuK,EAAShC,KAAKgE,KAGhCX,EAASjC,KAvBdpB,KAAK6B,SAASwB,EAAU,IAAI1B,UAAU,iDAC/B0B,EAASjC,GAuBpB,CAEAgF,OAAQ3O,EAAMuK,EAASqB,GACrB,MAAMgD,EAAM,GACNC,EAAS,CAACpE,EAAKH,EAAKlD,IACpBqD,EACKmB,EAASnB,IACPlC,KAAK0E,QAAmBmB,IAAR9D,QAA+B8D,IAAVhH,OAA8BgH,IAAR9D,GAC7DsB,EAAS,KAAMgD,IAGxBA,EAAI3O,KAAKsI,KAAK0E,GAAW,CAAC3C,EAAKlD,GAASkD,QAEpCsE,EAAIpP,SAAWQ,EACjB4L,EAAS,KAAMgD,GAEfrG,KAAKiG,MAAMK,KAIftG,KAAKiG,MAAMK,EACb,CAEAC,IAAKvE,EAASqB,GAsBZ,OArBAA,EAAWnC,EAAYc,EAASqB,GAChCA,EAAWrC,EAAaqC,EAAUjC,GAClCY,EAAUb,EAAWa,EAAS+C,GAE1B/E,KAAKoE,GACPpE,KAAK6B,SAASwB,EAAU,IAAIpC,EAAY,wDAAyD,CAC/FgB,KAAM,6BAECjC,KAAK8D,GACd9D,KAAK6B,SAASwB,EAAU,IAAIpC,EAAY,wEAAyE,CAC/GgB,KAAM,0BAGRjC,KAAK8D,IAAY,EACjB9D,KAAK6D,GAAaR,EAClBrD,KAAKiE,IAAc,EAEfjE,KAAK8E,IAAW9E,KAAK6E,GAAS7E,KAAK6B,SAAS7B,KAAKgE,GAAc,KAAM,IACpEhE,KAAKwG,KAAKxE,EAAShC,KAAKgE,KAGxBX,EAASjC,EAClB,CAEAoF,KAAMxE,EAASqB,GAEb,IAAIqC,EAAQ1F,KAAK8E,GACjB,MAAMuB,EAAM,GAENH,EAAQ,KAEZ,MAAMzO,EAAOuI,KAAK6E,GAAUW,IAAWvM,KAAKkN,IAAI,IAAKnG,KAAK6E,GAAUa,GAAS,IAEzEjO,GAAQ,EACVuI,KAAK6B,SAASwB,EAAU,KAAMgD,GAE9BrG,KAAKoG,OAAO3O,EAAMsN,EAAc0B,EAClC,EAGIA,EAAU,CAACvE,EAAKwE,KAChBxE,EACFmB,EAASnB,GACiB,IAAjBwE,EAAMzP,OACfoM,EAAS,KAAMgD,IAEfA,EAAI3O,KAAKL,MAAMgP,EAAKK,GACpBhB,GAASgB,EAAMzP,OACfiP,IACF,EAGFA,GACF,CAEA,CAAChC,KACC,MAAMN,EAAK5D,KAAK6D,GAGhB,OAAI7D,KAAKyE,IAAyB,OAAPb,EAAoBqB,GAE/CjF,KAAK8D,IAAY,EACjB9D,KAAK6D,GAAa,KAEd7D,KAAKoE,IAAWpE,KAAKyD,OAAOzD,KAAKqE,IAE9BT,EACT,CAEA,CAACO,GAAcP,EAAI1B,EAAKwE,GAClB1G,KAAKiE,GACPjE,KAAKsD,MAAMM,EAAGxH,KAAK,KAAM8F,EAAKwE,IAE9B9C,EAAG1B,EAAKwE,EAEZ,CAEAC,KAAMC,EAAQ5E,GAGZ,GAFAA,EAAUb,EAAWa,EAAS+C,GAE1B/E,KAAKoE,QAGF,IAAIpE,KAAK8D,GACd,MAAM,IAAI7C,EAAY,kEAAmE,CACvFgB,KAAM,wBAEH,CACL,MAAMK,EAActC,KAAK0B,GAAGY,YAAYN,EAAQM,aAAetC,KAAKuE,IAC9D/B,EAAYF,EAAYG,OAE1BT,EAAQM,cAAgBE,IAC1BR,EAAU,IAAKA,EAASM,YAAaE,IAGvC,MAAMqE,EAAS7G,KAAK0B,GAAGiB,UAAUL,EAAYM,OAAOgE,GAASpE,GAC7DxC,KAAK8G,MAAMD,EAAQ7E,EACrB,EACF,CAEA8E,MAAOF,EAAQ5E,GACb,MAAM,IAAIf,EAAY,mCAAoC,CACxDgB,KAAM,uBAEV,CAEAqB,MAAOD,GAGL,GAFAA,EAAWrC,EAAaqC,EAAUjC,GAE9BpB,KAAKsE,GACPtE,KAAK6B,SAASwB,QACT,GAAIrD,KAAKoE,GACdpE,KAAKwB,GAAiB9J,KAAK2L,QAK3B,GAHArD,KAAKoE,IAAY,EACjBpE,KAAKwB,GAAiB9J,KAAK2L,GAEtBrD,KAAK8D,IAEH,GAAI9D,KAAKyE,GAAgB,CAEnBzE,KAAKkE,IAEhBN,CAAG,IAAI3C,EAAY,8BAA+B,CAChDgB,KAAM,4BAEV,OAREjC,KAAKyD,OAAOzD,KAAKqE,IAWrB,OAAOhB,EAASjC,EAClB,CAEAqC,OAAQJ,GACNrD,KAAK6B,SAASwB,EAChB,CAEA,CAACgB,KACCrE,KAAKsE,IAAW,EAChBtE,KAAK0B,GAAGgC,eAAe1D,MAEvB,MAAM2D,EAAY3D,KAAKwB,GACvBxB,KAAKwB,GAAmB,GAExB,IAAK,MAAMoC,KAAMD,EACfC,GAEJ,CAEA3F,OAASzH,OAAOuQ,iBACd,IACE,IAAIC,EAEJ,UAAwCnB,KAAhCmB,QAAchH,KAAK2F,eACnBqB,CAEV,CAAE,QACKhH,KAAKsE,UAAgBtE,KAAKsD,OACjC,CACF,EAIF,MAAM2D,UAAyB9B,EAC7BrF,YAAa4B,EAAIM,GACfkF,MAAMxF,EAAIM,GAAS,GACnBhC,KAAK2E,IAA0B,IAAjB3C,EAAQmF,KACtBnH,KAAK4E,IAA8B,IAAnB5C,EAAQrG,MAC1B,CAEA,CAACoI,GAAa7B,EAAKH,EAAKlD,GACtB,MAAM+E,EAAK5D,KAAKkE,KAChB,GAAIhC,EAAK,OAAO0B,EAAG1B,GAEnB,IACEH,EAAM/B,KAAK2E,SAAkBkB,IAAR9D,EAAoB/B,KAAKuE,GAAc6C,OAAOrF,QAAO8D,EAC1EhH,EAAQmB,KAAK4E,SAAsBiB,IAAVhH,EAAsBmB,KAAKwE,GAAgB4C,OAAOvI,QAASgH,CACtF,CAAE,MAAO3D,GACP,OAAO0B,EAAG,IAAIyD,EAAoB,QAASnF,GAC7C,MAEc2D,IAAR9D,QAA+B8D,IAAVhH,GACzBmB,KAAK8E,KAGPlB,EAAG,KAAM7B,EAAKlD,EAChB,CAEA,CAACmF,GAAc9B,EAAKoF,GAClB,MAAM1D,EAAK5D,KAAKkE,KAChB,GAAIhC,EAAK,OAAOlC,KAAKmE,GAAaP,EAAI1B,GAEtC,IACE,IAAK,MAAMqF,KAASD,EAAS,CAC3B,MAAMvF,EAAMwF,EAAM,GACZ1I,EAAQ0I,EAAM,GAEpBA,EAAM,GAAKvH,KAAK2E,SAAkBkB,IAAR9D,EAAoB/B,KAAKuE,GAAc6C,OAAOrF,QAAO8D,EAC/E0B,EAAM,GAAKvH,KAAK4E,SAAsBiB,IAAVhH,EAAsBmB,KAAKwE,GAAgB4C,OAAOvI,QAASgH,CACzF,CACF,CAAE,MAAO3D,GACP,OAAOlC,KAAKmE,GAAaP,EAAI,IAAIyD,EAAoB,UAAWnF,GAClE,CAEAlC,KAAK8E,IAAWwC,EAAQrQ,OACxB+I,KAAKmE,GAAaP,EAAI,KAAM0D,EAC9B,CAEAE,IAAKnE,GASH,OARK6B,QAAgC,IAAZxM,IACvBwM,GAAY,EACZxM,EAAQ+O,KAAK,IAAIxG,EACf,kHACA,CAAEgB,KAAM,mBAILjC,KAAKsD,MAAMD,EACpB,EA8EF,MAAMgE,UAA4BpG,EAChCnB,YAAa4H,EAASC,GACpBT,MAAM,6BAA6BQ,IAAW,CAC5CzF,KAAM,qBACN0F,SAEJ,EAIF,IAAK,MAAMC,IAAK,CAAC,kBAAmB,oBAAqB,eACvDlJ,OAAO2B,eAAe4G,EAAiBpO,UAAW+O,EAAE3I,MAAM,KAAK,GAAI,CACjE0B,MAAS,MAAM,IAAIM,EAAY,OAAO2G,qBAAsB,CAAE3F,KAAM,gBAAkB,EACtFpG,MAAS,MAAM,IAAIoF,EAAY,OAAO2G,qBAAsB,CAAE3F,KAAM,gBAAkB,IAK1FgF,EAAiB3E,YAAciC,EAC/B0C,EAAiB1E,cAAgBiC,EAEjClL,EAAQ2N,iBAAmBA,EAC3B3N,EAAQuO,oBAjGR,cAAkC1C,EAChCrF,YAAa4B,EAAIM,GACfkF,MAAMxF,EAAIM,GAAS,EACrB,CAEA,CAAC+B,GAAa7B,EAAKH,GACjB,MAAM6B,EAAK5D,KAAKkE,KAChB,GAAIhC,EAAK,OAAO0B,EAAG1B,GAEnB,IACEH,OAAc8D,IAAR9D,EAAoB/B,KAAKuE,GAAc6C,OAAOrF,QAAO8D,CAC7D,CAAE,MAAO3D,GACP,OAAO0B,EAAG,IAAIyD,EAAoB,MAAOnF,GAC3C,MAEY2D,IAAR9D,GAAmB/B,KAAK8E,KAC5BlB,EAAG,KAAM7B,EACX,CAEA,CAACiC,GAAc9B,EAAKiF,GAClB,MAAMvD,EAAK5D,KAAKkE,KAChB,GAAIhC,EAAK,OAAOlC,KAAKmE,GAAaP,EAAI1B,GAEtC,IACE,IAAK,IAAI5G,EAAI,EAAGA,EAAI6L,EAAKlQ,OAAQqE,IAAK,CACpC,MAAMyG,EAAMoF,EAAK7L,GACjB6L,EAAK7L,QAAauK,IAAR9D,EAAoB/B,KAAKuE,GAAc6C,OAAOrF,QAAO8D,CACjE,CACF,CAAE,MAAO3D,GACP,OAAOlC,KAAKmE,GAAaP,EAAI,IAAIyD,EAAoB,OAAQnF,GAC/D,CAEAlC,KAAK8E,IAAWqC,EAAKlQ,OACrB+I,KAAKmE,GAAaP,EAAI,KAAMuD,EAC9B,GAgEF7N,EAAQwO,sBA7DR,cAAoC3C,EAClCrF,YAAa4B,EAAIM,GACfkF,MAAMxF,EAAIM,GAAS,EACrB,CAEA,CAAC+B,GAAa7B,EAAKrD,GACjB,MAAM+E,EAAK5D,KAAKkE,KAChB,GAAIhC,EAAK,OAAO0B,EAAG1B,GAEnB,IACErD,OAAkBgH,IAAVhH,EAAsBmB,KAAKwE,GAAgB4C,OAAOvI,QAASgH,CACrE,CAAE,MAAO3D,GACP,OAAO0B,EAAG,IAAIyD,EAAoB,QAASnF,GAC7C,MAEc2D,IAAVhH,GAAqBmB,KAAK8E,KAC9BlB,EAAG,KAAM/E,EACX,CAEA,CAACmF,GAAc9B,EAAKvG,GAClB,MAAMiI,EAAK5D,KAAKkE,KAChB,GAAIhC,EAAK,OAAOlC,KAAKmE,GAAaP,EAAI1B,GAEtC,IACE,IAAK,IAAI5G,EAAI,EAAGA,EAAIK,EAAO1E,OAAQqE,IAAK,CACtC,MAAMuD,EAAQlD,EAAOL,GACrBK,EAAOL,QAAeuK,IAAVhH,EAAsBmB,KAAKwE,GAAgB4C,OAAOvI,QAASgH,CACzE,CACF,CAAE,MAAO3D,GACP,OAAOlC,KAAKmE,GAAaP,EAAI,IAAIyD,EAAoB,SAAUnF,GACjE,CAEAlC,KAAK8E,IAAWnJ,EAAO1E,OACvB+I,KAAKmE,GAAaP,EAAI,KAAMjI,EAC9B,uCC5cF,MAAM,SAAEoM,GAAa,EAAQ,QACvB,WAAEC,GAAe,EAAQ,QACzB,aAAEC,GAAiB,EAAQ,QAC3B,aAAEjH,GAAiB,EAAQ,OAC3BC,EAAc,EAAQ,QACtB,iBAAEgG,GAAqB,EAAQ,QAC/B,mBAAEiB,EAAkB,qBAAEC,GAAyB,EAAQ,QACvD,iBAAEC,EAAgB,oBAAEC,EAAmB,sBAAEC,GAA0B,EAAQ,QAC3E,oBAAEC,GAAwB,EAAQ,OAClC,YAAErH,EAAW,WAAEC,GAAe,EAAQ,OACtCqH,EAAe,EAAQ,OAEvBpH,EAAW5K,OAAO,WAClBiS,EAAUjS,OAAO,UACjBkS,EAAalS,OAAO,aACpBmS,EAAkBnS,OAAO,kBACzB8K,EAAc9K,OAAO,cACrBoS,EAAWpS,OAAO,WAClBqS,EAAarS,OAAO,aACpBsS,EAAWtS,OAAO,WAClB6K,EAAU7K,OAAO,UACjBuS,EAAkBvS,OAAO,kBACzBwS,EAAcxS,OAAO,cACrB+N,EAAe/N,OAAO,eACtBgO,EAAiBhO,OAAO,iBACxByO,EAAO,OAEb,MAAMgE,UAAsBhB,EAC1BnI,YAAaoJ,EAAUlH,GAGrB,GAFAkF,QAEwB,iBAAbgC,GAAsC,OAAbA,EAClC,MAAM,IAAIvH,UAAU,mDAGtBK,EAAUb,EAAWa,GACrB,MAAM,YAAEM,EAAW,cAAEC,EAAa,QAAE4G,KAAYC,GAAYpH,EAE5DhC,KAAK0I,GAAc,IAAIW,IACvBrJ,KAAKsB,GAAe,GACpBtB,KAAK6I,IAAc,EACnB7I,KAAK8I,GAAYM,EACjBpJ,KAAKqB,GAAW,UAEhBrB,KAAK+H,SAAWA,EAASmB,EAAU,CACjCI,QAAQ,EACRC,UAAU,EACVrG,OAAO,EACPsG,SAAS,EACTC,cAAc,EAGdC,WAAkC,IAAvBR,EAASQ,UACpBC,YAAoC,IAAxBT,EAASS,WAGrBC,aAAa,EACbC,eAAe,EACfC,eAAe,EACfC,aAAa,EAEbC,UAAWd,EAASc,WAAa,CAAC,EAClCC,OAAQvL,OAAOwL,OAAO,CAAC,EAAGhB,EAASe,OAAQ,CACzCE,SAAS,EACTC,MAAM,EACNC,SAAS,EACTC,QAAQ,EACRxI,KAAK,EACLkB,KAAK,EACLuH,OAAO,EACPrH,OAAO,MAIXlD,KAAKgJ,GAAe,IAAIhB,EAAWwC,EAAQxK,OAC3CA,KAAKuE,GAAgBvE,KAAKgJ,GAAayB,SAASnI,GAAe,QAC/DtC,KAAKwE,GAAkBxE,KAAKgJ,GAAayB,SAASlI,GAAiB,QAGnE,IAAK,MAAMkI,KAAYzK,KAAKgJ,GAAagB,YAClChK,KAAK+H,SAASiC,UAAUS,EAASC,cACpC1K,KAAK+H,SAASiC,UAAUS,EAASC,aAAc,GAInD1K,KAAK+I,GAAmB,CACtB4B,MAAOjM,OAAOsG,OAAO,CAAC,GACtBuC,MAAO7I,OAAOsG,OAAO,CACnB1C,YAAatC,KAAKuE,GAAcmG,WAChCnI,cAAevC,KAAKwE,GAAgBkG,aAEtC3I,IAAKrD,OAAOsG,OAAO,CACjB1C,YAAatC,KAAKuE,GAAcmG,cAKpC1K,KAAK6B,UAAS,KACR7B,KAAK6I,IACP7I,KAAKoK,KAAK,CAAEjB,SAAS,GAASlE,EAChC,GAEJ,CAEIqE,aACF,OAAOtJ,KAAKqB,EACd,CAEAiB,YAAamI,GACX,OAAOzK,KAAKgJ,GAAayB,SAAqB,MAAZA,EAAmBA,EAAWzK,KAAKuE,GACvE,CAEAhC,cAAekI,GACb,OAAOzK,KAAKgJ,GAAayB,SAAqB,MAAZA,EAAmBA,EAAWzK,KAAKwE,GACvE,CAEA4F,KAAMpI,EAASqB,GACbA,EAAWnC,EAAYc,EAASqB,GAChCA,EAAWrC,EAAaqC,EAAUjC,IAElCY,EAAU,IAAKhC,KAAK8I,MAAc3H,EAAWa,KAErC4I,iBAA8C,IAA5B5I,EAAQ4I,gBAClC5I,EAAQ6I,gBAAkB7I,EAAQ6I,cAElC,MAAMC,EAAe5I,IACG,YAAlBlC,KAAKqB,IAA4C,YAAlBrB,KAAKqB,GAEtCrB,KAAK+K,KAAKtC,EAASvG,EAAM,IAAM4I,EAAY5I,GAAO4I,GACvB,SAAlB9K,KAAKqB,GACdgC,EAAS,IAAIpC,EAAY,uBAAwB,CAC/CgB,KAAM,0BACN0F,MAAOzF,KAGTmB,GACF,EA8CF,OA3CIrB,EAAQmH,QACY,YAAlBnJ,KAAKqB,GACPrB,KAAK+K,KAAKtC,EAASqC,GAEnB9K,KAAK6B,SAASiJ,GAEW,WAAlB9K,KAAKqB,IAAyBrB,KAAK6I,IAC5C7I,KAAK6I,IAAc,EACnB7I,KAAKqB,GAAW,UAChBrB,KAAKwD,KAAK,WAEVxD,KAAKgL,MAAMhJ,GAAUE,IACnB,GAAIA,EAUF,OATAlC,KAAKqB,GAAW,SAGhBrB,KAAK2I,IAAiB,KACpB3I,KAAKwD,KAAKiF,GACVqC,EAAY5I,EAAG,SAGjBlC,KAAK4I,KAIP5I,KAAKqB,GAAW,OAChBrB,KAAK4I,KACL5I,KAAKwD,KAAKiF,GAGY,SAAlBzI,KAAKqB,IAAqBrB,KAAKwD,KAAK,QAGlB,SAAlBxD,KAAKqB,IAAqBrB,KAAKwD,KAAK,SAExCsH,GAAY,KAEa,SAAlB9K,KAAKqB,GACdrB,KAAK6B,SAASiJ,GAEd9K,KAAK+K,KAAKtC,GAAS,IAAMzI,KAAKoK,KAAKpI,EAASqB,KAGvCA,EAASjC,EAClB,CAEA4J,MAAOhJ,EAASqB,GACdrD,KAAK6B,SAASwB,EAChB,CAEAC,MAAOD,GACLA,EAAWrC,EAAaqC,EAAUjC,GAElC,MAAM6J,EAAe/I,IACG,YAAlBlC,KAAKqB,IAA4C,YAAlBrB,KAAKqB,GAEtCrB,KAAK+K,KAAKtC,EAASvG,EAAM+I,EAAY/I,GAAO+I,GACjB,WAAlBjL,KAAKqB,GACdgC,EAAS,IAAIpC,EAAY,yBAA0B,CACjDgB,KAAM,4BACN0F,MAAOzF,KAGTmB,GACF,EAGF,GAAsB,SAAlBrD,KAAKqB,GAAqB,CAC5BrB,KAAKqB,GAAW,UAChBrB,KAAKwD,KAAK,WAEV,MAAM0H,EAAUhJ,IACdlC,KAAKqB,GAAW,OAChBrB,KAAK4I,KACL5I,KAAKwD,KAAKiF,GACVwC,EAAY/I,EAAG,EAGjBlC,KAAK2I,IAAiB,KACpB3I,KAAKyD,QAAQvB,IACX,GAAIA,EAAK,OAAOgJ,EAAOhJ,GAEvBlC,KAAKqB,GAAW,SAChBrB,KAAK4I,KACL5I,KAAKwD,KAAKiF,GAGY,WAAlBzI,KAAKqB,IAAuBrB,KAAKwD,KAAK,UAE1CyH,GAAY,GACb,GAEL,KAA6B,WAAlBjL,KAAKqB,GACdrB,KAAK6B,SAASoJ,GAEdjL,KAAK+K,KAAKtC,GAAS,IAAMzI,KAAKsD,MAAMD,KAGtC,OAAOA,EAASjC,EAClB,CAEA,CAACuH,GAAkBtF,GACjB,GAA8B,IAA1BrD,KAAK0I,GAAYjR,KACnB,OAAOuI,KAAK6B,SAASwB,GAGvB,IAAI8H,EAAUnL,KAAK0I,GAAYjR,KAC3B2T,GAAO,EAEX,MAAMzF,EAAO,KACO,KAAZwF,IAEAC,EAAMpL,KAAK6B,SAASwB,GACnBA,IACP,EAIF,IAAK,MAAMgI,KAAYrL,KAAK0I,GAC1B2C,EAAS/H,MAAMqC,GAGjByF,GAAO,EACPpL,KAAK0I,GAAYxF,OACnB,CAEAO,OAAQJ,GACNrD,KAAK6B,SAASwB,EAChB,CAEA1C,IAAKoB,EAAKC,EAASqB,GAKjB,GAJAA,EAAWnC,EAAYc,EAASqB,GAChCA,EAAWrC,EAAaqC,EAAUjC,GAClCY,EAAUb,EAAWa,EAAShC,KAAK+I,GAAiBxB,OAE9B,YAAlBvH,KAAKqB,GAEP,OADArB,KAAKsL,OAAM,IAAMtL,KAAKW,IAAIoB,EAAKC,EAASqB,KACjCA,EAASjC,GAGlB,GAAImK,EAAWvL,KAAMqD,GACnB,OAAOA,EAASjC,GAGlB,MAAMc,EAAMlC,KAAKmC,UAAUJ,GAE3B,GAAIG,EAEF,OADAlC,KAAK6B,SAASwB,EAAUnB,GACjBmB,EAASjC,GAGlB,MAAMkB,EAActC,KAAKsC,YAAYN,EAAQM,aACvCC,EAAgBvC,KAAKuC,cAAcP,EAAQO,eAC3CC,EAAYF,EAAYG,OACxB+I,EAAcjJ,EAAcE,OAgClC,OA7BIT,EAAQM,cAAgBE,GAAaR,EAAQO,gBAAkBiJ,IAEjExJ,EAAUtD,OAAOwL,OAAO,CAAC,EAAGlI,EAAS,CAAEM,YAAaE,EAAWD,cAAeiJ,KAGhFxL,KAAKyL,KAAKzL,KAAK2C,UAAUL,EAAYM,OAAOb,GAAMS,GAAYR,GAAS,CAACE,EAAKrD,KAC3E,GAAIqD,EAQF,OANiB,oBAAbA,EAAID,MAA8BC,EAAIwJ,UAAY,YAAYnL,KAAK2B,MAChEA,EAAID,OAAMC,EAAID,KAAO,mBACrBC,EAAIwJ,WAAUxJ,EAAIwJ,UAAW,GAC7BxJ,EAAIoH,SAAQpH,EAAIoH,OAAS,MAGzBjG,EAASnB,GAGlB,IACErD,EAAQ0D,EAAc6E,OAAOvI,EAC/B,CAAE,MAAOqD,GACP,OAAOmB,EAAS,IAAIpC,EAAY,yBAA0B,CACxDgB,KAAM,qBACN0F,MAAOzF,IAEX,CAEAmB,EAAS,KAAMxE,EAAK,IAGfwE,EAASjC,EAClB,CAEAqK,KAAM1J,EAAKC,EAASqB,GAClBrD,KAAK6B,SAASwB,EAAU,IAAI9K,MAAM,YACpC,CAEAiR,QAASrC,EAAMnF,EAASqB,GAKtB,GAJAA,EAAWnC,EAAYc,EAASqB,GAChCA,EAAWrC,EAAaqC,EAAUjC,GAClCY,EAAUb,EAAWa,EAAShC,KAAK+I,GAAiBxB,OAE9B,YAAlBvH,KAAKqB,GAEP,OADArB,KAAKsL,OAAM,IAAMtL,KAAKwJ,QAAQrC,EAAMnF,EAASqB,KACtCA,EAASjC,GAGlB,GAAImK,EAAWvL,KAAMqD,GACnB,OAAOA,EAASjC,GAGlB,IAAKxI,MAAM+S,QAAQxE,GAEjB,OADAnH,KAAK6B,SAASwB,EAAU,IAAI1B,UAAU,+CAC/B0B,EAASjC,GAGlB,GAAoB,IAAhB+F,EAAKlQ,OAEP,OADA+I,KAAK6B,SAASwB,EAAU,KAAM,IACvBA,EAASjC,GAGlB,MAAMkB,EAActC,KAAKsC,YAAYN,EAAQM,aACvCC,EAAgBvC,KAAKuC,cAAcP,EAAQO,eAC3CC,EAAYF,EAAYG,OACxB+I,EAAcjJ,EAAcE,OAG9BT,EAAQM,cAAgBE,GAAaR,EAAQO,gBAAkBiJ,IACjExJ,EAAUtD,OAAOwL,OAAO,CAAC,EAAGlI,EAAS,CAAEM,YAAaE,EAAWD,cAAeiJ,KAGhF,MAAMI,EAAa,IAAIhT,MAAMuO,EAAKlQ,QAElC,IAAK,IAAIqE,EAAI,EAAGA,EAAI6L,EAAKlQ,OAAQqE,IAAK,CACpC,MAAMyG,EAAMoF,EAAK7L,GACX4G,EAAMlC,KAAKmC,UAAUJ,GAE3B,GAAIG,EAEF,OADAlC,KAAK6B,SAASwB,EAAUnB,GACjBmB,EAASjC,GAGlBwK,EAAWtQ,GAAK0E,KAAK2C,UAAUL,EAAYM,OAAOb,GAAMS,EAC1D,CAqBA,OAnBAxC,KAAK6L,SAASD,EAAY5J,GAAS,CAACE,EAAKvG,KACvC,GAAIuG,EAAK,OAAOmB,EAASnB,GAEzB,IACE,IAAK,IAAI5G,EAAI,EAAGA,EAAIK,EAAO1E,OAAQqE,SACfuK,IAAdlK,EAAOL,KACTK,EAAOL,GAAKiH,EAAc6E,OAAOzL,EAAOL,IAG9C,CAAE,MAAO4G,GACP,OAAOmB,EAAS,IAAIpC,EAAY,mCAAmCtF,EAAO1E,kBAAmB,CAC3FgL,KAAM,qBACN0F,MAAOzF,IAEX,CAEAmB,EAAS,KAAM1H,EAAM,IAGhB0H,EAASjC,EAClB,CAEAyK,SAAU1E,EAAMnF,EAASqB,GACvBrD,KAAK6B,SAASwB,EAAU,KAAM,IAAIzK,MAAMuO,EAAKlQ,QAAQ6U,UAAKjG,GAC5D,CAEA/D,IAAKC,EAAKlD,EAAOmD,EAASqB,GAKxB,GAJAA,EAAWnC,EAAYc,EAASqB,GAChCA,EAAWrC,EAAaqC,EAAUjC,GAClCY,EAAUb,EAAWa,EAAShC,KAAK+I,GAAiBxB,OAE9B,YAAlBvH,KAAKqB,GAEP,OADArB,KAAKsL,OAAM,IAAMtL,KAAK8B,IAAIC,EAAKlD,EAAOmD,EAASqB,KACxCA,EAASjC,GAGlB,GAAImK,EAAWvL,KAAMqD,GACnB,OAAOA,EAASjC,GAGlB,MAAMc,EAAMlC,KAAKmC,UAAUJ,IAAQ/B,KAAKoC,YAAYvD,GAEpD,GAAIqD,EAEF,OADAlC,KAAK6B,SAASwB,EAAUnB,GACjBmB,EAASjC,GAGlB,MAAMkB,EAActC,KAAKsC,YAAYN,EAAQM,aACvCC,EAAgBvC,KAAKuC,cAAcP,EAAQO,eAC3CC,EAAYF,EAAYG,OACxB+I,EAAcjJ,EAAcE,OAG9BT,EAAQM,cAAgBE,GAAaR,EAAQO,gBAAkBiJ,IACjExJ,EAAUtD,OAAOwL,OAAO,CAAC,EAAGlI,EAAS,CAAEM,YAAaE,EAAWD,cAAeiJ,KAGhF,MAAM9I,EAAY1C,KAAK2C,UAAUL,EAAYM,OAAOb,GAAMS,GACpDK,EAAcN,EAAcK,OAAO/D,GAQzC,OANAmB,KAAK8C,KAAKJ,EAAWG,EAAab,GAAUE,IAC1C,GAAIA,EAAK,OAAOmB,EAASnB,GACzBlC,KAAKwD,KAAK,MAAOzB,EAAKlD,GACtBwE,GAAS,IAGJA,EAASjC,EAClB,CAEA0B,KAAMf,EAAKlD,EAAOmD,EAASqB,GACzBrD,KAAK6B,SAASwB,EAChB,CAEAL,IAAKjB,EAAKC,EAASqB,GAKjB,GAJAA,EAAWnC,EAAYc,EAASqB,GAChCA,EAAWrC,EAAaqC,EAAUjC,GAClCY,EAAUb,EAAWa,EAAShC,KAAK+I,GAAiBhH,KAE9B,YAAlB/B,KAAKqB,GAEP,OADArB,KAAKsL,OAAM,IAAMtL,KAAKgD,IAAIjB,EAAKC,EAASqB,KACjCA,EAASjC,GAGlB,GAAImK,EAAWvL,KAAMqD,GACnB,OAAOA,EAASjC,GAGlB,MAAMc,EAAMlC,KAAKmC,UAAUJ,GAE3B,GAAIG,EAEF,OADAlC,KAAK6B,SAASwB,EAAUnB,GACjBmB,EAASjC,GAGlB,MAAMkB,EAActC,KAAKsC,YAAYN,EAAQM,aACvCE,EAAYF,EAAYG,OAa9B,OAVIT,EAAQM,cAAgBE,IAC1BR,EAAUtD,OAAOwL,OAAO,CAAC,EAAGlI,EAAS,CAAEM,YAAaE,KAGtDxC,KAAKiD,KAAKjD,KAAK2C,UAAUL,EAAYM,OAAOb,GAAMS,GAAYR,GAAUE,IACtE,GAAIA,EAAK,OAAOmB,EAASnB,GACzBlC,KAAKwD,KAAK,MAAOzB,GACjBsB,GAAS,IAGJA,EAASjC,EAClB,CAEA6B,KAAMlB,EAAKC,EAASqB,GAClBrD,KAAK6B,SAASwB,EAChB,CAEAkH,MAAOwB,EAAY/J,EAASqB,GAC1B,IAAKrK,UAAU/B,OAAQ,CACrB,GAAsB,YAAlB+I,KAAKqB,GAAwB,OAAO,IAAIkH,EAAoBvI,MAChE,GAAsB,SAAlBA,KAAKqB,GACP,MAAM,IAAIJ,EAAY,uBAAwB,CAC5CgB,KAAM,4BAGV,OAAOjC,KAAKgM,eACd,CAQA,GANsC3I,EAAZ,mBAAf0I,EAAsCA,EACjC7K,EAAYc,EAASqB,GAErCA,EAAWrC,EAAaqC,EAAUjC,GAClCY,EAAUb,EAAWa,EAAShC,KAAK+I,GAAiB4B,OAE9B,YAAlB3K,KAAKqB,GAEP,OADArB,KAAKsL,OAAM,IAAMtL,KAAKuK,MAAMwB,EAAY/J,EAASqB,KAC1CA,EAASjC,GAGlB,GAAImK,EAAWvL,KAAMqD,GACnB,OAAOA,EAASjC,GAGlB,IAAKxI,MAAM+S,QAAQI,GAEjB,OADA/L,KAAK6B,SAASwB,EAAU,IAAI1B,UAAU,qDAC/B0B,EAASjC,GAGlB,GAA0B,IAAtB2K,EAAW9U,OAEb,OADA+I,KAAK6B,SAASwB,GACPA,EAASjC,GAGlB,MAAMyF,EAAS,IAAIjO,MAAMmT,EAAW9U,SAC5BqL,YAAa2J,EAAI1J,cAAe2J,KAAO9C,GAAYpH,EAE3D,IAAK,IAAI1G,EAAI,EAAGA,EAAIyQ,EAAW9U,OAAQqE,IAAK,CAC1C,GAA6B,iBAAlByQ,EAAWzQ,IAAqC,OAAlByQ,EAAWzQ,GAElD,OADA0E,KAAK6B,SAASwB,EAAU,IAAI1B,UAAU,wCAC/B0B,EAASjC,GAGlB,MAAM+K,EAAKzN,OAAOwL,OAAO,CAAC,EAAG6B,EAAWzQ,IAExC,GAAgB,QAAZ6Q,EAAGpJ,MAA8B,QAAZoJ,EAAGpJ,KAE1B,OADA/C,KAAK6B,SAASwB,EAAU,IAAI1B,UAAU,uEAC/B0B,EAASjC,GAGlB,MAAMc,EAAMlC,KAAKmC,UAAUgK,EAAGpK,KAE9B,GAAIG,EAEF,OADAlC,KAAK6B,SAASwB,EAAUnB,GACjBmB,EAASjC,GAGlB,MAAMM,EAAoB,MAAfyK,EAAG9J,SAAmB8J,EAAG9J,SAAWrC,KACzCsC,EAAcZ,EAAGY,YAAY6J,EAAG7J,aAAe2J,GAC/CzJ,EAAYF,EAAYG,OAK9B,GAHA0J,EAAGpK,IAAML,EAAGiB,UAAUL,EAAYM,OAAOuJ,EAAGpK,KAAMS,GAClD2J,EAAG7J,YAAcE,EAED,QAAZ2J,EAAGpJ,KAAgB,CACrB,MAAMqJ,EAAWpM,KAAKoC,YAAY+J,EAAGtN,OAErC,GAAIuN,EAEF,OADApM,KAAK6B,SAASwB,EAAU+I,GACjB/I,EAASjC,GAGlB,MAAMmB,EAAgBb,EAAGa,cAAc4J,EAAG5J,eAAiB2J,GAE3DC,EAAGtN,MAAQ0D,EAAcK,OAAOuJ,EAAGtN,OACnCsN,EAAG5J,cAAgBA,EAAcE,MACnC,CAGIf,IAAO1B,OACTmM,EAAG9J,SAAW,MAGhBwE,EAAOvL,GAAK6Q,CACd,CAQA,OANAnM,KAAKqM,OAAOxF,EAAQuC,GAAUlH,IAC5B,GAAIA,EAAK,OAAOmB,EAASnB,GACzBlC,KAAKwD,KAAK,QAASuI,GACnB1I,GAAS,IAGJA,EAASjC,EAClB,CAEAiL,OAAQN,EAAY/J,EAASqB,GAC3BrD,KAAK6B,SAASwB,EAChB,CAEAhB,SAAUhD,EAAM2C,GACd,OAAOhC,KAAKsM,UAAUjN,EAAMkN,EAAiBC,SAASxK,GACxD,CAEAsK,UAAWjN,EAAM2C,GACf,OAAO,IAAIuK,EAAiBvM,KAAMX,EAAM2C,EAC1C,CAEAW,UAAWZ,EAAKS,GACd,OAAOT,CACT,CAEAmB,MAAOlB,EAASqB,GAKd,GAJAA,EAAWnC,EAAYc,EAASqB,GAChCA,EAAWrC,EAAaqC,EAAUjC,GAClCY,EAAUb,EAAWa,EAAShC,KAAK+I,GAAiB4B,OAE9B,YAAlB3K,KAAKqB,GAEP,OADArB,KAAKsL,OAAM,IAAMtL,KAAKkD,MAAMlB,EAASqB,KAC9BA,EAASjC,GAGlB,GAAImK,EAAWvL,KAAMqD,GACnB,OAAOA,EAASjC,GAGlB,MAAMP,EAAWmB,EACXM,EAActC,KAAKsC,YAAYN,EAAQM,aAe7C,OAbAN,EAAUwG,EAAaxG,EAASM,IACxBA,YAAcA,EAAYG,OAEZ,IAAlBT,EAAQuD,MACVvF,KAAK6B,SAASwB,GAEdrD,KAAKmD,OAAOnB,GAAUE,IACpB,GAAIA,EAAK,OAAOmB,EAASnB,GACzBlC,KAAKwD,KAAK,QAAS3C,GACnBwC,GAAS,IAINA,EAASjC,EAClB,CAEA+B,OAAQnB,EAASqB,GACfrD,KAAK6B,SAASwB,EAChB,CAEAoJ,SAAUzK,GACR,MAAMM,EAActC,KAAKsC,YAAYN,GAAWA,EAAQM,aAClDC,EAAgBvC,KAAKuC,cAAcP,GAAWA,EAAQO,eAc5D,IAZAP,EAAUwG,EAAaxG,EAASM,IACxB6E,MAAwB,IAAjBnF,EAAQmF,KACvBnF,EAAQrG,QAA4B,IAAnBqG,EAAQrG,OAGzBqG,EAAQiF,EAAiB3E,aAAeA,EACxCN,EAAQiF,EAAiB1E,eAAiBA,EAG1CP,EAAQM,YAAcA,EAAYG,OAClCT,EAAQO,cAAgBA,EAAcE,OAEhB,YAAlBzC,KAAKqB,GACP,OAAO,IAAI+G,EAAiBpI,KAAMgC,GAC7B,GAAsB,SAAlBhC,KAAKqB,GACd,MAAM,IAAIJ,EAAY,uBAAwB,CAC5CgB,KAAM,4BAIV,OAAOjC,KAAK0M,UAAU1K,EACxB,CAEA0K,UAAW1K,GACT,OAAO,IAAIiF,EAAiBjH,KAAMgC,EACpC,CAEAmF,KAAMnF,GAEJ,MAAMM,EAActC,KAAKsC,YAAYN,GAAWA,EAAQM,aAClDC,EAAgBvC,KAAKuC,cAAcP,GAAWA,EAAQO,eAY5D,IAVAP,EAAUwG,EAAaxG,EAASM,IAGxB2E,EAAiB3E,aAAeA,EACxCN,EAAQiF,EAAiB1E,eAAiBA,EAG1CP,EAAQM,YAAcA,EAAYG,OAClCT,EAAQO,cAAgBA,EAAcE,OAEhB,YAAlBzC,KAAKqB,GACP,OAAO,IAAIgH,EAAoBrI,KAAMgC,GAChC,GAAsB,SAAlBhC,KAAKqB,GACd,MAAM,IAAIJ,EAAY,uBAAwB,CAC5CgB,KAAM,4BAIV,OAAOjC,KAAK2M,MAAM3K,EACpB,CAEA2K,MAAO3K,GACL,OAAO,IAAIkG,EAAmBlI,KAAMgC,EACtC,CAEArG,OAAQqG,GACN,MAAMM,EAActC,KAAKsC,YAAYN,GAAWA,EAAQM,aAClDC,EAAgBvC,KAAKuC,cAAcP,GAAWA,EAAQO,eAY5D,IAVAP,EAAUwG,EAAaxG,EAASM,IAGxB2E,EAAiB3E,aAAeA,EACxCN,EAAQiF,EAAiB1E,eAAiBA,EAG1CP,EAAQM,YAAcA,EAAYG,OAClCT,EAAQO,cAAgBA,EAAcE,OAEhB,YAAlBzC,KAAKqB,GACP,OAAO,IAAIiH,EAAsBtI,KAAMgC,GAClC,GAAsB,SAAlBhC,KAAKqB,GACd,MAAM,IAAIJ,EAAY,uBAAwB,CAC5CgB,KAAM,4BAIV,OAAOjC,KAAK4M,QAAQ5K,EACtB,CAEA4K,QAAS5K,GACP,OAAO,IAAImG,EAAqBnI,KAAMgC,EACxC,CAEAsJ,MAAOuB,GACL,GAAkB,mBAAPA,EACT,MAAM,IAAIlL,UAAU,yCAGtB3B,KAAKsB,GAAa5J,KAAKmV,EACzB,CAEA,CAACjE,KACC,GAAiC,IAA7B5I,KAAKsB,GAAarK,OACpB,OAGF,MAAM8U,EAAa/L,KAAKsB,GACxBtB,KAAKsB,GAAe,GAEpB,IAAK,MAAM6K,KAAMJ,EACfI,GAEJ,CAGAvK,eAAgByJ,GACd,GAAwB,iBAAbA,GAAsC,OAAbA,GACR,mBAAnBA,EAAS/H,MAChB,MAAM,IAAI3B,UAAU,gDAGtB3B,KAAK0I,GAAYoE,IAAIzB,EACvB,CAGA3H,eAAgB2H,GACdrL,KAAK0I,GAAYqE,OAAO1B,EAC1B,CAEAW,gBACE,OAAO,IAAIzD,EAAoBvI,KACjC,CAEAmC,UAAWJ,GACT,GAAIA,QACF,OAAO,IAAId,EAAY,kCAAmC,CACxDgB,KAAM,qBAGZ,CAEAG,YAAavD,GACX,GAAIA,QACF,OAAO,IAAIoC,EAAY,oCAAqC,CAC1DgB,KAAM,uBAGZ,EAKFgH,EAAcpQ,UAAUgJ,SAAW,EAAQ,OAE3C,MAAM,iBAAE0K,GAAqB,EAAQ,MAAR,CAAmC,CAAEtD,kBAElE3P,EAAQ2P,cAAgBA,EACxB3P,EAAQiT,iBAAmBA,EAE3B,MAAMhB,EAAa,SAAU7J,EAAI2B,GAC/B,MAAoB,SAAhB3B,EAAGL,KACLK,EAAGG,SAASwB,EAAU,IAAIpC,EAAY,uBAAwB,CAC5DgB,KAAM,8BAED,EAIX,EAEMuI,EAAU,SAAU9I,GACxB,OAAOhD,OAAOyI,KAAKzF,EAAGqG,SAASiC,WAC5BgD,QAAOpF,KAAOlG,EAAGqG,SAASiC,UAAUpC,IACzC,sCC/yBAtO,EAAQ2P,cAAgB,EAAxB,qBACA3P,EAAQiT,iBAAmB,EAA3B,wBACAjT,EAAQ2N,iBAAmB,EAA3B,wBACA3N,EAAQuO,oBAAsB,EAA9B,2BACAvO,EAAQwO,sBAAwB,EAAhC,6BACAxO,EAAQmI,qBAAuB,EAA/B,gECLA,MAAM,iBAAEwF,EAAgB,oBAAEY,EAAmB,sBAAEC,GAA0B,EAAQ,OAE3EmF,EAASzW,OAAO,SAChB0W,EAAY1W,OAAO,YACnBuN,EAAavN,OAAO,aACpBwN,EAAcxN,OAAO,cACrBqN,EAAYrN,OAAO,YAGzB,MAAM2W,UAAiClG,EACrCnH,YAAa4B,EAAIM,EAASyK,EAAUW,GAClClG,MAAMxF,EAAIM,GAEVhC,KAAKkN,GAAaT,EAClBzM,KAAKiN,GAAUG,EACfpN,KAAK+D,GAAc/D,KAAK+D,GAAY3H,KAAK4D,MACzCA,KAAKgE,GAAehE,KAAKgE,GAAa5H,KAAK4D,MAC3CA,KAAK6D,GAAa,IACpB,CAEA,CAACE,GAAa7B,EAAKH,EAAKlD,GACtB,MAAMwE,EAAWrD,KAAK6D,GACtB,GAAI3B,EAAK,OAAOmB,EAASnB,QACb2D,IAAR9D,IAAmBA,EAAM/B,KAAKiN,GAAQlL,IAC1CsB,EAASnB,EAAKH,EAAKlD,EACrB,CAEA,CAACmF,GAAc9B,EAAKoF,GAClB,MAAMjE,EAAWrD,KAAK6D,GACtB,GAAI3B,EAAK,OAAOmB,EAASnB,GAEzB,IAAK,MAAMqF,KAASD,EAAS,CAC3B,MAAMvF,EAAMwF,EAAM,QACN1B,IAAR9D,IAAmBwF,EAAM,GAAKvH,KAAKiN,GAAQlL,GACjD,CAEAsB,EAASnB,EAAKoF,EAChB,EAGF,MAAM+F,UAAoCxF,EACxC/H,YAAa4B,EAAIM,EAASyK,EAAUW,GAClClG,MAAMxF,EAAIM,GAEVhC,KAAKkN,GAAaT,EAClBzM,KAAKiN,GAAUG,EACfpN,KAAK+D,GAAc/D,KAAK+D,GAAY3H,KAAK4D,MACzCA,KAAKgE,GAAehE,KAAKgE,GAAa5H,KAAK4D,MAC3CA,KAAK6D,GAAa,IACpB,CAEA,CAACE,GAAa7B,EAAKH,GACjB,MAAMsB,EAAWrD,KAAK6D,GACtB,GAAI3B,EAAK,OAAOmB,EAASnB,QACb2D,IAAR9D,IAAmBA,EAAM/B,KAAKiN,GAAQlL,IAC1CsB,EAASnB,EAAKH,EAChB,CAEA,CAACiC,GAAc9B,EAAKiF,GAClB,MAAM9D,EAAWrD,KAAK6D,GACtB,GAAI3B,EAAK,OAAOmB,EAASnB,GAEzB,IAAK,IAAI5G,EAAI,EAAGA,EAAI6L,EAAKlQ,OAAQqE,IAAK,CACpC,MAAMyG,EAAMoF,EAAK7L,QACLuK,IAAR9D,IAAmBoF,EAAK7L,GAAK0E,KAAKiN,GAAQlL,GAChD,CAEAsB,EAASnB,EAAKiF,EAChB,EAGF,MAAMmG,UAAsCxF,EAC1ChI,YAAa4B,EAAIM,EAASyK,GACxBvF,MAAMxF,EAAIM,GACVhC,KAAKkN,GAAaT,CACpB,EAGF,IAAK,MAAMc,IAAY,CAACJ,EAA0BE,GAChDE,EAAS1U,UAAUoN,MAAQ,SAAU5C,GACnCrD,KAAK6D,GAAaR,EAClBrD,KAAKkN,GAAWvH,KAAK3F,KAAK+D,GAC5B,EAEAwJ,EAAS1U,UAAUuN,OAAS,SAAU3O,EAAMuK,EAASqB,GACnDrD,KAAK6D,GAAaR,EAClBrD,KAAKkN,GAAWhH,MAAMzO,EAAMuK,EAAShC,KAAKgE,GAC5C,EAEAuJ,EAAS1U,UAAU2N,KAAO,SAAUxE,EAASqB,GAC3CrD,KAAK6D,GAAaR,EAClBrD,KAAKkN,GAAW3G,IAAIvE,EAAShC,KAAKgE,GACpC,EAGF,IAAK,MAAMuJ,IAAY,CAACD,GACtBC,EAAS1U,UAAUoN,MAAQ,SAAU5C,GACnCrD,KAAKkN,GAAWvH,KAAKtC,EACvB,EAEAkK,EAAS1U,UAAUuN,OAAS,SAAU3O,EAAMuK,EAASqB,GACnDrD,KAAKkN,GAAWhH,MAAMzO,EAAMuK,EAASqB,EACvC,EAEAkK,EAAS1U,UAAU2N,KAAO,SAAUxE,EAASqB,GAC3CrD,KAAKkN,GAAW3G,IAAIvE,EAASqB,EAC/B,EAGF,IAAK,MAAMkK,IAAY,CAACJ,EAA0BE,EAA6BC,GAC7EC,EAAS1U,UAAUiO,MAAQ,SAAUF,EAAQ5E,GAC3ChC,KAAKkN,GAAWvG,KAAKC,EAAQ5E,EAC/B,EAEAuL,EAAS1U,UAAU4K,OAAS,SAAUJ,GACpCrD,KAAKkN,GAAW5J,MAAMD,EACxB,EAGF/J,EAAQ6T,yBAA2BA,EACnC7T,EAAQ+T,4BAA8BA,EACtC/T,EAAQgU,8BAAgCA,sCCzHxC,MAAMrM,EAAc,EAAQ,QACtB,OAAEuM,GAAW,EAAQ,QAAa,CAAC,GACnC,yBACJL,EAAwB,4BACxBE,EAA2B,8BAC3BC,GACE,EAAQ,OAENG,EAAUjX,OAAO,UACjBkX,EAAclX,OAAO,cACrBmX,EAAenX,OAAO,eACtBoX,EAAUpX,OAAO,UACjByW,EAASzW,OAAO,SAEhBqX,EAAc,IAAIC,YAClBtB,EAAW,CAAEuB,UAAW,KAG9BtP,EAAOnF,QAAU,UAAU,cAAE2P,IAC3B,MAAMsD,UAAyBtD,EAC7B+E,gBAAiBhM,GAEf,GAAuB,iBAAZA,EACT,MAAM,IAAIf,EAAY,uEAAwE,CAC5FgB,KAAM,iBAEH,GAAID,GAAWA,EAAQoI,KAC5B,MAAM,IAAInJ,EAAY,gDAAiD,CACrEgB,KAAM,iBAIV,OAAe,MAAXD,EACKwK,EACGxK,EAAQ+L,UAGX/L,EAFA,IAAKA,EAAS+L,UAAW,IAIpC,CAGAjO,YAAa4B,EAAIrC,EAAM2C,GAErB,MAAM,UAAE+L,EAAS,SAAE7E,KAAaE,GAAYmD,EAAiBC,SAASxK,GACtE3C,EAAO4O,EAAK5O,EAAM0O,GAGlB,MAAMG,EAAWH,EAAUvS,WAAW,GAAK,EACrC2S,EAASzM,EAAGkM,IAAYlM,EAI9B,IAAKmM,EAAYjL,OAAOvD,GAAM+O,OAAMC,GAAKA,EAAIH,GAAYG,EAAI,MAC3D,MAAM,IAAIpN,EAAY,2BAA2BiN,UAAqB,CACpEjM,KAAM,yBAIViF,MAAMoH,EAAeH,EAAQjF,GAAWE,GAExC,MAAMmF,GAAU7M,EAAG6M,QAAU,IAAMR,EAAY1O,EAAO0O,EAChDS,EAAaD,EAAOzV,MAAM,GAAI,GAAK3B,OAAOC,aAAa8W,GAE7DlO,KAAK4N,GAAWO,EAChBnO,KAAKyN,GAAW,IAAIgB,EAAYF,GAChCvO,KAAK0N,GAAe,IAAIe,EAAYD,GACpCxO,KAAKiN,GAAU,IAAIyB,EAEnB1O,KAAK6B,SAAWsM,EAAOtM,QACzB,CAEAc,UAAWZ,EAAKS,GACd,GAAkB,SAAdA,EACF,OAAOxC,KAAKyN,GAASkB,KAAO5M,EACvB,GAAuB,IAAnBA,EAAI6M,WAEb,OAAO5O,KAAKyN,GAASjL,GAChB,GAAkB,SAAdA,EAAsB,CAC/B,MAAM5G,EAAOoE,KAAKyN,GAAS7R,KACrBiT,EAAS,IAAIrU,WAAWoB,EAAKgT,WAAa7M,EAAI6M,YAKpD,OAHAC,EAAOhT,IAAID,EAAM,GACjBiT,EAAOhT,IAAIkG,EAAKnG,EAAKgT,YAEdC,CACT,CAAO,CACL,MAAMlY,EAASqJ,KAAKyN,GAAS9W,OAC7B,OAAO6W,EAAOsB,OAAO,CAACnY,EAAQoL,GAAMpL,EAAOiY,WAAa7M,EAAI6M,WAC9D,CACF,CAGA,CAACjB,GAAeoB,EAAOvM,QACHqD,IAAdkJ,EAAMC,IACRD,EAAMC,IAAMhP,KAAK2C,UAAUoM,EAAMC,IAAKxM,QAChBqD,IAAbkJ,EAAME,GACfF,EAAME,GAAKjP,KAAK2C,UAAUoM,EAAME,GAAIzM,GAEpCuM,EAAMC,IAAMhP,KAAKyN,GAASjL,QAGVqD,IAAdkJ,EAAMG,IACRH,EAAMG,IAAMlP,KAAK2C,UAAUoM,EAAMG,IAAK1M,QAChBqD,IAAbkJ,EAAMI,GACfJ,EAAMI,GAAKnP,KAAK2C,UAAUoM,EAAMI,GAAI3M,GAEpCuM,EAAMG,IAAMlP,KAAK0N,GAAalL,EAElC,CAEI+L,aACF,OAAOvO,KAAKyN,GAASkB,IACvB,CAEIjN,SACF,OAAO1B,KAAK4N,EACd,CAEA5C,MAAOhJ,EAASqB,GAGdrD,KAAK4N,GAASxD,KAAK,CAAEjB,SAAS,GAAQ9F,EACxC,CAEAP,KAAMf,EAAKlD,EAAOmD,EAASqB,GACzBrD,KAAK4N,GAAS9L,IAAIC,EAAKlD,EAAOmD,EAASqB,EACzC,CAEAoI,KAAM1J,EAAKC,EAASqB,GAClBrD,KAAK4N,GAASjN,IAAIoB,EAAKC,EAASqB,EAClC,CAEAwI,SAAU1E,EAAMnF,EAASqB,GACvBrD,KAAK4N,GAASpE,QAAQrC,EAAMnF,EAASqB,EACvC,CAEAJ,KAAMlB,EAAKC,EAASqB,GAClBrD,KAAK4N,GAAS5K,IAAIjB,EAAKC,EAASqB,EAClC,CAEAgJ,OAAQN,EAAY/J,EAASqB,GAC3BrD,KAAK4N,GAASrD,MAAMwB,EAAY/J,EAASqB,EAC3C,CAEAF,OAAQnB,EAASqB,GAEfrD,KAAK2N,GAAc3L,EAASA,EAAQM,aACpCtC,KAAK4N,GAAS1K,MAAMlB,EAASqB,EAC/B,CAEAqJ,UAAW1K,GAEThC,KAAK2N,GAAc3L,EAASA,EAAQM,aACpC,MAAMmK,EAAWzM,KAAK4N,GAASnB,SAASzK,GAClCoL,EAAQpN,KAAKiN,GAAQtM,IAAIX,KAAKyN,GAASkB,KAAK1X,OAAQ+K,EAAQM,aAClE,OAAO,IAAI6K,EAAyBnN,KAAMgC,EAASyK,EAAUW,EAC/D,CAEAT,MAAO3K,GACLhC,KAAK2N,GAAc3L,EAASA,EAAQM,aACpC,MAAMmK,EAAWzM,KAAK4N,GAASzG,KAAKnF,GAC9BoL,EAAQpN,KAAKiN,GAAQtM,IAAIX,KAAKyN,GAASkB,KAAK1X,OAAQ+K,EAAQM,aAClE,OAAO,IAAI+K,EAA4BrN,KAAMgC,EAASyK,EAAUW,EAClE,CAEAR,QAAS5K,GACPhC,KAAK2N,GAAc3L,EAASA,EAAQM,aACpC,MAAMmK,EAAWzM,KAAK4N,GAASjS,OAAOqG,GACtC,OAAO,IAAIsL,EAA8BtN,KAAMgC,EAASyK,EAC1D,EAGF,MAAO,CAAEF,mBACX,EAEA,MAAM+B,EAAiB,SAAUH,EAAQjF,GACvC,MAAO,IAEFiF,EAAOpG,SAGV6C,iBAAiB,EACjBC,eAAe,EAGfZ,OAAQ,CAAC,EAITmF,kBAAmB,CAAC,KAIjBlG,EAEHc,UAAW,CACT2E,KAAMU,EAAiBlB,EAAQ,QAC/BxX,OAAQ0Y,EAAiBlB,EAAQ,UACjCvS,KAAMyT,EAAiBlB,EAAQ,SAGrC,EAEMkB,EAAmB,SAAUlB,EAAQ1D,GAEzC,QAAO0D,EAAOpG,SAASiC,UAAUS,IAC7B0D,EAAO7L,YAAYmI,GAAUpL,OAASoL,CAE5C,EAEA,MAAMgE,EACJ3O,YAAaiC,GACX/B,KAAK2O,KAAO5M,EACZ/B,KAAKpE,KAAOiS,EAAYjL,OAAOb,GAC/B/B,KAAKrJ,OAAS6W,EAASA,EAAO8B,KAAKtP,KAAKpE,KAAKjF,OAAQ,EAAGqJ,KAAKpE,KAAKgT,YAAc,CAAC,CACnF,EAGF,MAAMF,EACJ5O,cACEE,KAAKuP,MAAQ,IAAIC,GACnB,CAEA7O,IAAK8O,EAAcjN,GACjB,IAAI4K,EAAQpN,KAAKuP,MAAM5O,IAAI6B,GAkB3B,YAhBcqD,IAAVuH,IAEAA,EADgB,SAAd5K,EACM,SAAUiN,EAAc1N,GAE9B,OAAOA,EAAIzK,SAASmY,EACtB,EAAErT,KAAK,KAAMqT,GAEL,SAAUA,EAAc1N,GAE9B,OAAOA,EAAIjJ,MAAM2W,EACnB,EAAErT,KAAK,KAAMqT,GAGfzP,KAAKuP,MAAM1T,IAAI2G,EAAW4K,IAGrBA,CACT,EAGF,MAAMa,EAAO,SAAU5S,EAAKqU,GAC1B,IAAIC,EAAQ,EACRnI,EAAMnM,EAAIpE,OAEd,KAAO0Y,EAAQnI,GAAOnM,EAAIsU,KAAWD,GAAMC,IAC3C,KAAOnI,EAAMmI,GAAStU,EAAImM,EAAM,KAAOkI,GAAMlI,IAE7C,OAAOnM,EAAIvC,MAAM6W,EAAOnI,EAC1B,oCC/PAlO,EAAQ4H,YAAc,SAAUc,EAASqB,GACvC,MAA0B,mBAAZrB,EAAyBA,EAAUqB,CACnD,EAEA/J,EAAQ6H,WAAa,SAAUa,EAAS4N,GACtC,MAAuB,iBAAZ5N,GAAoC,OAAZA,EAC1BA,OAGG6D,IAAR+J,EACKA,EAGF,CAAC,CACV,qCCdA,MAAM,qBAAEnO,GAAyB,EAAQ,OACnCR,EAAc,EAAQ,OACtB4O,EAAWrZ,OAAO,WAoCxB8C,EAAQiP,oBAjCR,cAAkC9G,EAChC3B,YAAa4B,GACXwF,MAAMxF,GACN1B,KAAK6P,GAAY,EACnB,CAEA/M,KAAMf,EAAKlD,EAAOmD,GAChBhC,KAAK6P,GAAUnY,KAAK,IAAKsK,EAASe,KAAM,MAAOhB,MAAKlD,SACtD,CAEAoE,KAAMlB,EAAKC,GACThC,KAAK6P,GAAUnY,KAAK,IAAKsK,EAASe,KAAM,MAAOhB,OACjD,CAEAoB,SACEnD,KAAK6P,GAAY,EACnB,CAGAtM,OAAQvB,EAASqB,GACQ,YAAnBrD,KAAK0B,GAAG4H,OACVtJ,KAAK0B,GAAG4J,OAAM,IAAMtL,KAAKuD,OAAOvB,EAASqB,KACb,SAAnBrD,KAAK0B,GAAG4H,OACa,IAA1BtJ,KAAK6P,GAAU5Y,OAAc+I,KAAK6B,SAASwB,GAC1CrD,KAAK0B,GAAG2K,OAAOrM,KAAK6P,GAAW7N,EAASqB,GAE7CrD,KAAK6B,SAASwB,EAAU,IAAIpC,EAAY,kEAAmE,CACzGgB,KAAM,yBAGZ,uCCnCF,MAAM,oBAAE4F,EAAmB,sBAAEC,GAA0B,EAAQ,OAEzDoF,EAAY1W,OAAO,YACnBqN,EAAYrN,OAAO,YACnBuN,EAAavN,OAAO,aACpBwN,EAAcxN,OAAO,cAE3B,MAAM0R,UAA2BL,EAC/B/H,YAAa4B,EAAIM,GACfkF,MAAMxF,EAAIM,GAEVhC,KAAKkN,GAAaxL,EAAG+K,SAAS,IAAKzK,EAASmF,MAAM,EAAMxL,QAAQ,IAChEqE,KAAK+D,GAAc/D,KAAK+D,GAAY3H,KAAK4D,MACzCA,KAAKgE,GAAehE,KAAKgE,GAAa5H,KAAK4D,KAC7C,EAGF,MAAMmI,UAA6BL,EACjChI,YAAa4B,EAAIM,GACfkF,MAAMxF,EAAIM,GAEVhC,KAAKkN,GAAaxL,EAAG+K,SAAS,IAAKzK,EAASmF,MAAM,EAAOxL,QAAQ,IACjEqE,KAAK+D,GAAc/D,KAAK+D,GAAY3H,KAAK4D,MACzCA,KAAKgE,GAAehE,KAAKgE,GAAa5H,KAAK4D,KAC7C,EAGF,IAAK,MAAMuN,IAAY,CAACrF,EAAoBC,GAAuB,CACjE,MAAMhB,EAAOoG,IAAarF,EACpB4H,EAAW3I,EAAQI,GAAUA,EAAM,GAAMA,GAAUA,EAAM,GAE/DgG,EAAS1U,UAAUoN,MAAQ,SAAU5C,GACnCrD,KAAK6D,GAAaR,EAClBrD,KAAKkN,GAAWvH,KAAK3F,KAAK+D,GAC5B,EAEAwJ,EAAS1U,UAAUkL,GAAc,SAAU7B,EAAKH,EAAKlD,GACnD,MAAMwE,EAAWrD,KAAK6D,GAClB3B,EAAKmB,EAASnB,GACbmB,EAAS,KAAM8D,EAAOpF,EAAMlD,EACnC,EAEA0O,EAAS1U,UAAUuN,OAAS,SAAU3O,EAAMuK,EAASqB,GACnDrD,KAAK6D,GAAaR,EAClBrD,KAAKkN,GAAWhH,MAAMzO,EAAMuK,EAAShC,KAAKgE,GAC5C,EAEAuJ,EAAS1U,UAAU2N,KAAO,SAAUxE,EAASqB,GAC3CrD,KAAK6D,GAAaR,EAClBrD,KAAKkN,GAAW3G,IAAIvE,EAAShC,KAAKgE,GACpC,EAEAuJ,EAAS1U,UAAUmL,GAAe,SAAU9B,EAAKoF,GAC/C,MAAMjE,EAAWrD,KAAK6D,GAClB3B,EAAKmB,EAASnB,GACbmB,EAAS,KAAMiE,EAAQyI,IAAID,GAClC,EAEAvC,EAAS1U,UAAUiO,MAAQ,SAAUF,EAAQ5E,GAC3ChC,KAAKkN,GAAWvG,KAAKC,EAAQ5E,EAC/B,EAEAuL,EAAS1U,UAAU4K,OAAS,SAAUJ,GACpCrD,KAAKkN,GAAW5J,MAAMD,EACxB,CACF,CAGA/J,EAAQ4O,mBAAqBA,EAC7B5O,EAAQ6O,qBAAuBA,sCCrE/B,MAAM,iBAAElB,EAAgB,oBAAEY,EAAmB,sBAAEC,GAA0B,EAAQ,OAC3E7G,EAAc,EAAQ,OAEtB+O,EAAOxZ,OAAO,OACdoS,EAAWpS,OAAO,WAClByZ,EAAWzZ,OAAO,WAExB,MAAM4R,UAAyBnB,EAC7BnH,YAAa4B,EAAIM,GACfkF,MAAMxF,EAAIM,GAEVhC,KAAKgQ,GAAQ,KACbhQ,KAAKiQ,GAAY,IAAMvO,EAAG+K,SAASzK,GAEnChC,KAAK0B,GAAG4J,OAAM,IAAMtL,KAAK4I,MAC3B,EAGF,MAAMP,UAA4BR,EAChC/H,YAAa4B,EAAIM,GACfkF,MAAMxF,EAAIM,GAEVhC,KAAKgQ,GAAQ,KACbhQ,KAAKiQ,GAAY,IAAMvO,EAAGyF,KAAKnF,GAE/BhC,KAAK0B,GAAG4J,OAAM,IAAMtL,KAAK4I,MAC3B,EAGF,MAAMN,UAA8BR,EAClChI,YAAa4B,EAAIM,GACfkF,MAAMxF,EAAIM,GAEVhC,KAAKgQ,GAAQ,KACbhQ,KAAKiQ,GAAY,IAAMvO,EAAG/F,OAAOqG,GAEjChC,KAAK0B,GAAG4J,OAAM,IAAMtL,KAAK4I,MAC3B,EAGF,IAAK,MAAM2E,IAAY,CAACnF,EAAkBC,EAAqBC,GAC7DiF,EAAS1U,UAAU+P,GAAY,WACN,SAAnB5I,KAAK0B,GAAG4H,SACVtJ,KAAKgQ,GAAQhQ,KAAKiQ,KAEtB,EAEA1C,EAAS1U,UAAUoN,MAAQ,SAAU5C,GAChB,OAAfrD,KAAKgQ,GACPhQ,KAAKgQ,GAAMrK,KAAKtC,GACY,YAAnBrD,KAAK0B,GAAG4H,OACjBtJ,KAAK0B,GAAG4J,OAAM,IAAMtL,KAAKiG,MAAM5C,KAE/BrD,KAAK6B,SAASwB,EAAU,IAAIpC,EAAY,yDAA0D,CAChGgB,KAAM,4BAGZ,EAEAsL,EAAS1U,UAAUuN,OAAS,SAAU3O,EAAMuK,EAASqB,GAChC,OAAfrD,KAAKgQ,GACPhQ,KAAKgQ,GAAM9J,MAAMzO,EAAMuK,EAASqB,GACJ,YAAnBrD,KAAK0B,GAAG4H,OACjBtJ,KAAK0B,GAAG4J,OAAM,IAAMtL,KAAKoG,OAAO3O,EAAMuK,EAASqB,KAE/CrD,KAAK6B,SAASwB,EAAU,IAAIpC,EAAY,0DAA2D,CACjGgB,KAAM,4BAGZ,EAEAsL,EAAS1U,UAAU2N,KAAO,SAAUxE,EAASqB,GACxB,OAAfrD,KAAKgQ,GACPhQ,KAAKgQ,GAAMzJ,IAAIlD,GACa,YAAnBrD,KAAK0B,GAAG4H,OACjBtJ,KAAK0B,GAAG4J,OAAM,IAAMtL,KAAKwG,KAAKxE,EAASqB,KAEvCrD,KAAK6B,SAASwB,EAAU,IAAIpC,EAAY,wDAAyD,CAC/FgB,KAAM,4BAGZ,EAEAsL,EAAS1U,UAAUiO,MAAQ,SAAUF,EAAQ5E,GACxB,OAAfhC,KAAKgQ,GAEPhQ,KAAKgQ,GAAMlJ,MAAMF,EAAQ5E,GACG,YAAnBhC,KAAK0B,GAAG4H,QACjBtJ,KAAK0B,GAAG4J,OAAM,IAAMtL,KAAK8G,MAAMF,EAAQ5E,IAE3C,EAEAuL,EAAS1U,UAAU4K,OAAS,SAAUJ,GACjB,OAAfrD,KAAKgQ,GACPhQ,KAAKgQ,GAAM1M,MAAMD,GACW,YAAnBrD,KAAK0B,GAAG4H,OACjBtJ,KAAK0B,GAAG4J,OAAM,IAAMtL,KAAKyD,OAAOJ,KAEhCrD,KAAK6B,SAASwB,EAElB,EAGF/J,EAAQ8O,iBAAmBA,EAC3B9O,EAAQ+O,oBAAsBA,EAC9B/O,EAAQgP,sBAAwBA,sCCzGhC,MAAM4H,EAAiB,EAAQ,OAE/BzR,EAAOnF,QAAU,SAAUuT,KAAOjN,GACZ,IAAhBA,EAAK3I,OACPiZ,EAAerD,GAEfqD,GAAe,IAAMrD,KAAMjN,IAE/B,sCCRA,MAAMqB,EAAc,EAAQ,OACtBlC,EAAiBL,OAAO7F,UAAUkG,eAClCyJ,EAAe,IAAIa,IAAI,CAAC,KAAM,MAAO,KAAM,QAEjD5K,EAAOnF,QAAU,SAAU0I,EAASM,GAClC,MAAMuM,EAAS,CAAC,EAEhB,IAAK,MAAMjH,KAAK5F,EACd,GAAKjD,EAAehG,KAAKiJ,EAAS4F,IACxB,gBAANA,GAA6B,kBAANA,EAA3B,CAEA,GAAU,UAANA,GAAuB,QAANA,EACnB,MAAM,IAAI3G,EAAY,4BAA4B2G,sBAAuB,CACvE3F,KAAM,iBAEH,GAAU,aAAN2F,EAET,MAAM,IAAI3G,EAAY,mFAAoF,CACxGgB,KAAM,iBAINuG,EAAa2H,IAAIvI,GAGnBiH,EAAOjH,GAAKtF,EAAYM,OAAOZ,EAAQ4F,IAEvCiH,EAAOjH,GAAK5F,EAAQ4F,EAlB4B,CAyBpD,OAHAiH,EAAOuB,UAAYvB,EAAOuB,QAC1BvB,EAAOtJ,MAAQF,OAAOC,UAAUuJ,EAAOtJ,QAAUsJ,EAAOtJ,OAAS,EAAIsJ,EAAOtJ,OAAS,EAE9EsJ,CACT,qDC3BA,MAAMwB,EAAS,EAAQ,OACjBC,EAAU,EAAQ,OAClBC,EACe,mBAAX/Z,QAAkD,mBAAlBA,OAAY,IAChDA,OAAY,IAAE,8BACd,KAEN8C,EAAQkU,OAASA,EACjBlU,EAAQkX,WAyTR,SAAqBvZ,IACdA,GAAUA,IACbA,EAAS,GAEX,OAAOuW,EAAOhU,OAAOvC,EACvB,EA7TAqC,EAAQmX,kBAAoB,GAE5B,MAAMC,EAAe,WAwDrB,SAASC,EAAc1Z,GACrB,GAAIA,EAASyZ,EACX,MAAM,IAAIE,WAAW,cAAgB3Z,EAAS,kCAGhD,MAAM8D,EAAM,IAAIP,WAAWvD,GAE3B,OADAyH,OAAOmS,eAAe9V,EAAKyS,EAAO3U,WAC3BkC,CACT,CAYA,SAASyS,EAAQsD,EAAKC,EAAkB9Z,GAEtC,GAAmB,iBAAR6Z,EAAkB,CAC3B,GAAgC,iBAArBC,EACT,MAAM,IAAIpP,UACR,sEAGJ,OAAOqP,EAAYF,EACrB,CACA,OAAOxB,EAAKwB,EAAKC,EAAkB9Z,EACrC,CAIA,SAASqY,EAAMzQ,EAAOkS,EAAkB9Z,GACtC,GAAqB,iBAAV4H,EACT,OAqHJ,SAAqBoS,EAAQxG,GACH,iBAAbA,GAAsC,KAAbA,IAClCA,EAAW,QAGb,IAAK+C,EAAO0D,WAAWzG,GACrB,MAAM,IAAI9I,UAAU,qBAAuB8I,GAG7C,MAAMxT,EAAwC,EAA/B2X,EAAWqC,EAAQxG,GAClC,IAAI1P,EAAM4V,EAAa1Z,GAEvB,MAAMka,EAASpW,EAAIqI,MAAM6N,EAAQxG,GAE7B0G,IAAWla,IAIb8D,EAAMA,EAAIjC,MAAM,EAAGqY,IAGrB,OAAOpW,CACT,CA3IWqW,CAAWvS,EAAOkS,GAG3B,GAAIM,YAAYC,OAAOzS,GACrB,OAkJJ,SAAwB0S,GACtB,GAAIC,EAAWD,EAAW/W,YAAa,CACrC,MAAMiX,EAAO,IAAIjX,WAAW+W,GAC5B,OAAOG,EAAgBD,EAAK9a,OAAQ8a,EAAKE,WAAYF,EAAK7C,WAC5D,CACA,OAAOgD,EAAcL,EACvB,CAxJWM,CAAchT,GAGvB,GAAa,MAATA,EACF,MAAM,IAAI8C,UACR,yHACiD9C,GAIrD,GAAI2S,EAAW3S,EAAOwS,cACjBxS,GAAS2S,EAAW3S,EAAMlI,OAAQ0a,aACrC,OAAOK,EAAgB7S,EAAOkS,EAAkB9Z,GAGlD,GAAiC,oBAAtB6a,oBACNN,EAAW3S,EAAOiT,oBAClBjT,GAAS2S,EAAW3S,EAAMlI,OAAQmb,oBACrC,OAAOJ,EAAgB7S,EAAOkS,EAAkB9Z,GAGlD,GAAqB,iBAAV4H,EACT,MAAM,IAAI8C,UACR,yEAIJ,MAAM5B,EAAUlB,EAAMkB,SAAWlB,EAAMkB,UACvC,GAAe,MAAXA,GAAmBA,IAAYlB,EACjC,OAAO2O,EAAO8B,KAAKvP,EAASgR,EAAkB9Z,GAGhD,MAAM8a,EAkJR,SAAqBC,GACnB,GAAIxE,EAAOyE,SAASD,GAAM,CACxB,MAAMhW,EAA4B,EAAtBkW,EAAQF,EAAI/a,QAClB8D,EAAM4V,EAAa3U,GAEzB,OAAmB,IAAfjB,EAAI9D,QAIR+a,EAAIP,KAAK1W,EAAK,EAAG,EAAGiB,GAHXjB,CAKX,CAEA,QAAmB8K,IAAfmM,EAAI/a,OACN,MAA0B,iBAAf+a,EAAI/a,QAAuBkb,EAAYH,EAAI/a,QAC7C0Z,EAAa,GAEfiB,EAAcI,GAGvB,GAAiB,WAAbA,EAAIjP,MAAqBnK,MAAM+S,QAAQqG,EAAII,MAC7C,OAAOR,EAAcI,EAAII,KAE7B,CAzKYC,CAAWxT,GACrB,GAAIkT,EAAG,OAAOA,EAEd,GAAsB,oBAAXvb,QAAgD,MAAtBA,OAAO8b,aACH,mBAA9BzT,EAAMrI,OAAO8b,aACtB,OAAO9E,EAAO8B,KAAKzQ,EAAMrI,OAAO8b,aAAa,UAAWvB,EAAkB9Z,GAG5E,MAAM,IAAI0K,UACR,yHACiD9C,EAErD,CAmBA,SAAS0T,EAAY9a,GACnB,GAAoB,iBAATA,EACT,MAAM,IAAIkK,UAAU,0CACf,GAAIlK,EAAO,EAChB,MAAM,IAAImZ,WAAW,cAAgBnZ,EAAO,iCAEhD,CA0BA,SAASuZ,EAAavZ,GAEpB,OADA8a,EAAW9a,GACJkZ,EAAalZ,EAAO,EAAI,EAAoB,EAAhBya,EAAQza,GAC7C,CAuCA,SAASma,EAAeY,GACtB,MAAMvb,EAASub,EAAMvb,OAAS,EAAI,EAA4B,EAAxBib,EAAQM,EAAMvb,QAC9C8D,EAAM4V,EAAa1Z,GACzB,IAAK,IAAIqE,EAAI,EAAGA,EAAIrE,EAAQqE,GAAK,EAC/BP,EAAIO,GAAgB,IAAXkX,EAAMlX,GAEjB,OAAOP,CACT,CAUA,SAAS2W,EAAiBc,EAAOb,EAAY1a,GAC3C,GAAI0a,EAAa,GAAKa,EAAM5D,WAAa+C,EACvC,MAAM,IAAIf,WAAW,wCAGvB,GAAI4B,EAAM5D,WAAa+C,GAAc1a,GAAU,GAC7C,MAAM,IAAI2Z,WAAW,wCAGvB,IAAI7V,EAYJ,OAVEA,OADiB8K,IAAf8L,QAAuC9L,IAAX5O,EACxB,IAAIuD,WAAWgY,QACD3M,IAAX5O,EACH,IAAIuD,WAAWgY,EAAOb,GAEtB,IAAInX,WAAWgY,EAAOb,EAAY1a,GAI1CyH,OAAOmS,eAAe9V,EAAKyS,EAAO3U,WAE3BkC,CACT,CA2BA,SAASmX,EAASjb,GAGhB,GAAIA,GAAUyZ,EACZ,MAAM,IAAIE,WAAW,0DACaF,EAAa+B,SAAS,IAAM,UAEhE,OAAgB,EAATxb,CACT,CAsGA,SAAS2X,EAAYqC,EAAQxG,GAC3B,GAAI+C,EAAOyE,SAAShB,GAClB,OAAOA,EAAOha,OAEhB,GAAIoa,YAAYC,OAAOL,IAAWO,EAAWP,EAAQI,aACnD,OAAOJ,EAAOrC,WAEhB,GAAsB,iBAAXqC,EACT,MAAM,IAAItP,UACR,kGAC0BsP,GAI9B,MAAMjV,EAAMiV,EAAOha,OACbyb,EAAa1Z,UAAU/B,OAAS,IAAsB,IAAjB+B,UAAU,GACrD,IAAK0Z,GAAqB,IAAR1W,EAAW,OAAO,EAGpC,IAAI2W,GAAc,EAClB,OACE,OAAQlI,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAOzO,EACT,IAAK,OACL,IAAK,QACH,OAAO4W,EAAY3B,GAAQha,OAC7B,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAa,EAAN+E,EACT,IAAK,MACH,OAAOA,IAAQ,EACjB,IAAK,SACH,OAAO6W,EAAc5B,GAAQha,OAC/B,QACE,GAAI0b,EACF,OAAOD,GAAa,EAAIE,EAAY3B,GAAQha,OAE9CwT,GAAY,GAAKA,GAAUqI,cAC3BH,GAAc,EAGtB,CAGA,SAASI,EAActI,EAAUkF,EAAOnI,GACtC,IAAImL,GAAc,EAclB,SALc9M,IAAV8J,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQ3P,KAAK/I,OACf,MAAO,GAOT,SAJY4O,IAAR2B,GAAqBA,EAAMxH,KAAK/I,UAClCuQ,EAAMxH,KAAK/I,QAGTuQ,GAAO,EACT,MAAO,GAOT,IAHAA,KAAS,KACTmI,KAAW,GAGT,MAAO,GAKT,IAFKlF,IAAUA,EAAW,UAGxB,OAAQA,GACN,IAAK,MACH,OAAOuI,EAAShT,KAAM2P,EAAOnI,GAE/B,IAAK,OACL,IAAK,QACH,OAAOyL,EAAUjT,KAAM2P,EAAOnI,GAEhC,IAAK,QACH,OAAO0L,EAAWlT,KAAM2P,EAAOnI,GAEjC,IAAK,SACL,IAAK,SACH,OAAO2L,EAAYnT,KAAM2P,EAAOnI,GAElC,IAAK,SACH,OAAO4L,EAAYpT,KAAM2P,EAAOnI,GAElC,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO6L,EAAarT,KAAM2P,EAAOnI,GAEnC,QACE,GAAImL,EAAa,MAAM,IAAIhR,UAAU,qBAAuB8I,GAC5DA,GAAYA,EAAW,IAAIqI,cAC3BH,GAAc,EAGtB,CAUA,SAASW,EAAMvB,EAAGtZ,EAAG8a,GACnB,MAAMjY,EAAIyW,EAAEtZ,GACZsZ,EAAEtZ,GAAKsZ,EAAEwB,GACTxB,EAAEwB,GAAKjY,CACT,CA2IA,SAASkY,EAAsB7c,EAAQ8c,EAAK9B,EAAYlH,EAAUiJ,GAEhE,GAAsB,IAAlB/c,EAAOM,OAAc,OAAQ,EAmBjC,GAhB0B,iBAAf0a,GACTlH,EAAWkH,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAGZQ,EADJR,GAAcA,KAGZA,EAAa+B,EAAM,EAAK/c,EAAOM,OAAS,GAItC0a,EAAa,IAAGA,EAAahb,EAAOM,OAAS0a,GAC7CA,GAAchb,EAAOM,OAAQ,CAC/B,GAAIyc,EAAK,OAAQ,EACZ/B,EAAahb,EAAOM,OAAS,CACpC,MAAO,GAAI0a,EAAa,EAAG,CACzB,IAAI+B,EACC,OAAQ,EADJ/B,EAAa,CAExB,CAQA,GALmB,iBAAR8B,IACTA,EAAMjG,EAAO8B,KAAKmE,EAAKhJ,IAIrB+C,EAAOyE,SAASwB,GAElB,OAAmB,IAAfA,EAAIxc,QACE,EAEH0c,EAAahd,EAAQ8c,EAAK9B,EAAYlH,EAAUiJ,GAClD,GAAmB,iBAARD,EAEhB,OADAA,GAAY,IACgC,mBAAjCjZ,WAAW3B,UAAU0G,QAC1BmU,EACKlZ,WAAW3B,UAAU0G,QAAQxG,KAAKpC,EAAQ8c,EAAK9B,GAE/CnX,WAAW3B,UAAU+a,YAAY7a,KAAKpC,EAAQ8c,EAAK9B,GAGvDgC,EAAahd,EAAQ,CAAC8c,GAAM9B,EAAYlH,EAAUiJ,GAG3D,MAAM,IAAI/R,UAAU,uCACtB,CAEA,SAASgS,EAAc9Y,EAAK4Y,EAAK9B,EAAYlH,EAAUiJ,GACrD,IA0BIpY,EA1BAuY,EAAY,EACZC,EAAYjZ,EAAI5D,OAChB8c,EAAYN,EAAIxc,OAEpB,QAAiB4O,IAAb4E,IAEe,UADjBA,EAAWtT,OAAOsT,GAAUqI,gBACY,UAAbrI,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAI5P,EAAI5D,OAAS,GAAKwc,EAAIxc,OAAS,EACjC,OAAQ,EAEV4c,EAAY,EACZC,GAAa,EACbC,GAAa,EACbpC,GAAc,CAChB,CAGF,SAASqC,EAAMjZ,EAAKO,GAClB,OAAkB,IAAduY,EACK9Y,EAAIO,GAEJP,EAAIkZ,aAAa3Y,EAAIuY,EAEhC,CAGA,GAAIH,EAAK,CACP,IAAIQ,GAAc,EAClB,IAAK5Y,EAAIqW,EAAYrW,EAAIwY,EAAWxY,IAClC,GAAI0Y,EAAKnZ,EAAKS,KAAO0Y,EAAKP,GAAqB,IAAhBS,EAAoB,EAAI5Y,EAAI4Y,IAEzD,IADoB,IAAhBA,IAAmBA,EAAa5Y,GAChCA,EAAI4Y,EAAa,IAAMH,EAAW,OAAOG,EAAaL,OAEtC,IAAhBK,IAAmB5Y,GAAKA,EAAI4Y,GAChCA,GAAc,CAGpB,MAEE,IADIvC,EAAaoC,EAAYD,IAAWnC,EAAamC,EAAYC,GAC5DzY,EAAIqW,EAAYrW,GAAK,EAAGA,IAAK,CAChC,IAAI6Y,GAAQ,EACZ,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAWK,IAC7B,GAAIJ,EAAKnZ,EAAKS,EAAI8Y,KAAOJ,EAAKP,EAAKW,GAAI,CACrCD,GAAQ,EACR,KACF,CAEF,GAAIA,EAAO,OAAO7Y,CACpB,CAGF,OAAQ,CACV,CAcA,SAAS+Y,EAAUtZ,EAAKkW,EAAQ/Z,EAAQD,GACtCC,EAASmO,OAAOnO,IAAW,EAC3B,MAAMod,EAAYvZ,EAAI9D,OAASC,EAC1BD,GAGHA,EAASoO,OAAOpO,IACHqd,IACXrd,EAASqd,GAJXrd,EAASqd,EAQX,MAAMC,EAAStD,EAAOha,OAKtB,IAAIqE,EACJ,IAJIrE,EAASsd,EAAS,IACpBtd,EAASsd,EAAS,GAGfjZ,EAAI,EAAGA,EAAIrE,IAAUqE,EAAG,CAC3B,MAAMkZ,EAASC,SAASxD,EAAOyD,OAAW,EAAJpZ,EAAO,GAAI,IACjD,GAAI6W,EAAYqC,GAAS,OAAOlZ,EAChCP,EAAI7D,EAASoE,GAAKkZ,CACpB,CACA,OAAOlZ,CACT,CAEA,SAASqZ,EAAW5Z,EAAKkW,EAAQ/Z,EAAQD,GACvC,OAAO2d,EAAWhC,EAAY3B,EAAQlW,EAAI9D,OAASC,GAAS6D,EAAK7D,EAAQD,EAC3E,CAEA,SAAS4d,EAAY9Z,EAAKkW,EAAQ/Z,EAAQD,GACxC,OAAO2d,EAypCT,SAAuBvZ,GACrB,MAAMyZ,EAAY,GAClB,IAAK,IAAIxZ,EAAI,EAAGA,EAAID,EAAIpE,SAAUqE,EAEhCwZ,EAAUpd,KAAyB,IAApB2D,EAAIG,WAAWF,IAEhC,OAAOwZ,CACT,CAhqCoBC,CAAa9D,GAASlW,EAAK7D,EAAQD,EACvD,CAEA,SAAS+d,EAAaja,EAAKkW,EAAQ/Z,EAAQD,GACzC,OAAO2d,EAAW/B,EAAc5B,GAASlW,EAAK7D,EAAQD,EACxD,CAEA,SAASge,EAAWla,EAAKkW,EAAQ/Z,EAAQD,GACvC,OAAO2d,EA0pCT,SAAyBvZ,EAAK6Z,GAC5B,IAAIC,EAAGC,EAAIC,EACX,MAAMP,EAAY,GAClB,IAAK,IAAIxZ,EAAI,EAAGA,EAAID,EAAIpE,WACjBie,GAAS,GAAK,KADa5Z,EAGhC6Z,EAAI9Z,EAAIG,WAAWF,GACnB8Z,EAAKD,GAAK,EACVE,EAAKF,EAAI,IACTL,EAAUpd,KAAK2d,GACfP,EAAUpd,KAAK0d,GAGjB,OAAON,CACT,CAxqCoBQ,CAAerE,EAAQlW,EAAI9D,OAASC,GAAS6D,EAAK7D,EAAQD,EAC9E,CA8EA,SAASmc,EAAarY,EAAK4U,EAAOnI,GAChC,OAAc,IAAVmI,GAAenI,IAAQzM,EAAI9D,OACtBoZ,EAAOkF,cAAcxa,GAErBsV,EAAOkF,cAAcxa,EAAIjC,MAAM6W,EAAOnI,GAEjD,CAEA,SAASyL,EAAWlY,EAAK4U,EAAOnI,GAC9BA,EAAMvO,KAAKkN,IAAIpL,EAAI9D,OAAQuQ,GAC3B,MAAMgO,EAAM,GAEZ,IAAIla,EAAIqU,EACR,KAAOrU,EAAIkM,GAAK,CACd,MAAMiO,EAAY1a,EAAIO,GACtB,IAAIoa,EAAY,KACZC,EAAoBF,EAAY,IAChC,EACCA,EAAY,IACT,EACCA,EAAY,IACT,EACA,EAEZ,GAAIna,EAAIqa,GAAoBnO,EAAK,CAC/B,IAAIoO,EAAYC,EAAWC,EAAYC,EAEvC,OAAQJ,GACN,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EACHG,EAAa7a,EAAIO,EAAI,GACO,MAAV,IAAbsa,KACHG,GAA6B,GAAZN,IAAqB,EAAoB,GAAbG,EACzCG,EAAgB,MAClBL,EAAYK,IAGhB,MACF,KAAK,EACHH,EAAa7a,EAAIO,EAAI,GACrBua,EAAY9a,EAAIO,EAAI,GACQ,MAAV,IAAbsa,IAAsD,MAAV,IAAZC,KACnCE,GAA6B,GAAZN,IAAoB,IAAoB,GAAbG,IAAsB,EAAmB,GAAZC,EACrEE,EAAgB,OAAUA,EAAgB,OAAUA,EAAgB,SACtEL,EAAYK,IAGhB,MACF,KAAK,EACHH,EAAa7a,EAAIO,EAAI,GACrBua,EAAY9a,EAAIO,EAAI,GACpBwa,EAAa/a,EAAIO,EAAI,GACO,MAAV,IAAbsa,IAAsD,MAAV,IAAZC,IAAsD,MAAV,IAAbC,KAClEC,GAA6B,GAAZN,IAAoB,IAAqB,GAAbG,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,EAClGC,EAAgB,OAAUA,EAAgB,UAC5CL,EAAYK,IAItB,CAEkB,OAAdL,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACbF,EAAI9d,KAAKge,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBF,EAAI9d,KAAKge,GACTpa,GAAKqa,CACP,CAEA,OAQF,SAAgCK,GAC9B,MAAMha,EAAMga,EAAW/e,OACvB,GAAI+E,GAAOia,EACT,OAAO9e,OAAOC,aAAaC,MAAMF,OAAQ6e,GAI3C,IAAIR,EAAM,GACNla,EAAI,EACR,KAAOA,EAAIU,GACTwZ,GAAOre,OAAOC,aAAaC,MACzBF,OACA6e,EAAWld,MAAMwC,EAAGA,GAAK2a,IAG7B,OAAOT,CACT,CAxBSU,CAAsBV,EAC/B,CA3+BAlc,EAAQ6c,WAAazF,EAgBrBlD,EAAO4I,oBAUP,WAEE,IACE,MAAMvb,EAAM,IAAIL,WAAW,GACrB6b,EAAQ,CAAEC,IAAK,WAAc,OAAO,EAAG,GAG7C,OAFA5X,OAAOmS,eAAewF,EAAO7b,WAAW3B,WACxC6F,OAAOmS,eAAehW,EAAKwb,GACN,KAAdxb,EAAIyb,KACb,CAAE,MAAOC,GACP,OAAO,CACT,CACF,CArB6BC,GAExBhJ,EAAO4I,0BAA0C,IAAZ1d,GACb,mBAAlBA,EAAQ+d,OACjB/d,EAAQ+d,MACN,iJAkBJ/X,OAAO2B,eAAemN,EAAO3U,UAAW,SAAU,CAChD+H,YAAY,EACZD,IAAK,WACH,GAAK6M,EAAOyE,SAASjS,MACrB,OAAOA,KAAKrJ,MACd,IAGF+H,OAAO2B,eAAemN,EAAO3U,UAAW,SAAU,CAChD+H,YAAY,EACZD,IAAK,WACH,GAAK6M,EAAOyE,SAASjS,MACrB,OAAOA,KAAK2R,UACd,IAoCFnE,EAAOkJ,SAAW,KA8DlBlJ,EAAO8B,KAAO,SAAUzQ,EAAOkS,EAAkB9Z,GAC/C,OAAOqY,EAAKzQ,EAAOkS,EAAkB9Z,EACvC,EAIAyH,OAAOmS,eAAerD,EAAO3U,UAAW2B,WAAW3B,WACnD6F,OAAOmS,eAAerD,EAAQhT,YA8B9BgT,EAAOhU,MAAQ,SAAU/B,EAAMqU,EAAMrB,GACnC,OArBF,SAAgBhT,EAAMqU,EAAMrB,GAE1B,OADA8H,EAAW9a,GACPA,GAAQ,EACHkZ,EAAalZ,QAEToO,IAATiG,EAIyB,iBAAbrB,EACVkG,EAAalZ,GAAMqU,KAAKA,EAAMrB,GAC9BkG,EAAalZ,GAAMqU,KAAKA,GAEvB6E,EAAalZ,EACtB,CAOS+B,CAAM/B,EAAMqU,EAAMrB,EAC3B,EAUA+C,EAAOwD,YAAc,SAAUvZ,GAC7B,OAAOuZ,EAAYvZ,EACrB,EAIA+V,EAAOmJ,gBAAkB,SAAUlf,GACjC,OAAOuZ,EAAYvZ,EACrB,EA6GA+V,EAAOyE,SAAW,SAAmBF,GACnC,OAAY,MAALA,IAA6B,IAAhBA,EAAE6E,WACpB7E,IAAMvE,EAAO3U,SACjB,EAEA2U,EAAOqJ,QAAU,SAAkBC,EAAG/E,GAGpC,GAFIP,EAAWsF,EAAGtc,cAAasc,EAAItJ,EAAO8B,KAAKwH,EAAGA,EAAE5f,OAAQ4f,EAAElI,aAC1D4C,EAAWO,EAAGvX,cAAauX,EAAIvE,EAAO8B,KAAKyC,EAAGA,EAAE7a,OAAQ6a,EAAEnD,cACzDpB,EAAOyE,SAAS6E,KAAOtJ,EAAOyE,SAASF,GAC1C,MAAM,IAAIpQ,UACR,yEAIJ,GAAImV,IAAM/E,EAAG,OAAO,EAEpB,IAAI1D,EAAIyI,EAAE7f,OACN8f,EAAIhF,EAAE9a,OAEV,IAAK,IAAIqE,EAAI,EAAGU,EAAM/C,KAAKkN,IAAIkI,EAAG0I,GAAIzb,EAAIU,IAAOV,EAC/C,GAAIwb,EAAExb,KAAOyW,EAAEzW,GAAI,CACjB+S,EAAIyI,EAAExb,GACNyb,EAAIhF,EAAEzW,GACN,KACF,CAGF,OAAI+S,EAAI0I,GAAW,EACfA,EAAI1I,EAAU,EACX,CACT,EAEAb,EAAO0D,WAAa,SAAqBzG,GACvC,OAAQtT,OAAOsT,GAAUqI,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,EAEb,EAEAtF,EAAOsB,OAAS,SAAiBkI,EAAM/f,GACrC,IAAK2B,MAAM+S,QAAQqL,GACjB,MAAM,IAAIrV,UAAU,+CAGtB,GAAoB,IAAhBqV,EAAK/f,OACP,OAAOuW,EAAOhU,MAAM,GAGtB,IAAI8B,EACJ,QAAeuK,IAAX5O,EAEF,IADAA,EAAS,EACJqE,EAAI,EAAGA,EAAI0b,EAAK/f,SAAUqE,EAC7BrE,GAAU+f,EAAK1b,GAAGrE,OAItB,MAAMN,EAAS6W,EAAOwD,YAAY/Z,GAClC,IAAIggB,EAAM,EACV,IAAK3b,EAAI,EAAGA,EAAI0b,EAAK/f,SAAUqE,EAAG,CAChC,IAAIP,EAAMic,EAAK1b,GACf,GAAIkW,EAAWzW,EAAKP,YACdyc,EAAMlc,EAAI9D,OAASN,EAAOM,QACvBuW,EAAOyE,SAASlX,KAAMA,EAAMyS,EAAO8B,KAAKvU,IAC7CA,EAAI0W,KAAK9a,EAAQsgB,IAEjBzc,WAAW3B,UAAUgD,IAAI9C,KACvBpC,EACAoE,EACAkc,OAGC,KAAKzJ,EAAOyE,SAASlX,GAC1B,MAAM,IAAI4G,UAAU,+CAEpB5G,EAAI0W,KAAK9a,EAAQsgB,EACnB,CACAA,GAAOlc,EAAI9D,MACb,CACA,OAAON,CACT,EAiDA6W,EAAOoB,WAAaA,EA8EpBpB,EAAO3U,UAAU+d,WAAY,EAQ7BpJ,EAAO3U,UAAUqe,OAAS,WACxB,MAAMlb,EAAMgE,KAAK/I,OACjB,GAAI+E,EAAM,GAAM,EACd,MAAM,IAAI4U,WAAW,6CAEvB,IAAK,IAAItV,EAAI,EAAGA,EAAIU,EAAKV,GAAK,EAC5BgY,EAAKtT,KAAM1E,EAAGA,EAAI,GAEpB,OAAO0E,IACT,EAEAwN,EAAO3U,UAAUse,OAAS,WACxB,MAAMnb,EAAMgE,KAAK/I,OACjB,GAAI+E,EAAM,GAAM,EACd,MAAM,IAAI4U,WAAW,6CAEvB,IAAK,IAAItV,EAAI,EAAGA,EAAIU,EAAKV,GAAK,EAC5BgY,EAAKtT,KAAM1E,EAAGA,EAAI,GAClBgY,EAAKtT,KAAM1E,EAAI,EAAGA,EAAI,GAExB,OAAO0E,IACT,EAEAwN,EAAO3U,UAAUue,OAAS,WACxB,MAAMpb,EAAMgE,KAAK/I,OACjB,GAAI+E,EAAM,GAAM,EACd,MAAM,IAAI4U,WAAW,6CAEvB,IAAK,IAAItV,EAAI,EAAGA,EAAIU,EAAKV,GAAK,EAC5BgY,EAAKtT,KAAM1E,EAAGA,EAAI,GAClBgY,EAAKtT,KAAM1E,EAAI,EAAGA,EAAI,GACtBgY,EAAKtT,KAAM1E,EAAI,EAAGA,EAAI,GACtBgY,EAAKtT,KAAM1E,EAAI,EAAGA,EAAI,GAExB,OAAO0E,IACT,EAEAwN,EAAO3U,UAAU4Z,SAAW,WAC1B,MAAMxb,EAAS+I,KAAK/I,OACpB,OAAe,IAAXA,EAAqB,GACA,IAArB+B,UAAU/B,OAAqBgc,EAAUjT,KAAM,EAAG/I,GAC/C8b,EAAa1b,MAAM2I,KAAMhH,UAClC,EAEAwU,EAAO3U,UAAUwe,eAAiB7J,EAAO3U,UAAU4Z,SAEnDjF,EAAO3U,UAAUye,OAAS,SAAiBvF,GACzC,IAAKvE,EAAOyE,SAASF,GAAI,MAAM,IAAIpQ,UAAU,6BAC7C,OAAI3B,OAAS+R,GACsB,IAA5BvE,EAAOqJ,QAAQ7W,KAAM+R,EAC9B,EAEAvE,EAAO3U,UAAU0e,QAAU,WACzB,IAAIlc,EAAM,GACV,MAAMmc,EAAMle,EAAQmX,kBAGpB,OAFApV,EAAM2E,KAAKyS,SAAS,MAAO,EAAG+E,GAAK/W,QAAQ,UAAW,OAAOwN,OACzDjO,KAAK/I,OAASugB,IAAKnc,GAAO,SACvB,WAAaA,EAAM,GAC5B,EACIkV,IACF/C,EAAO3U,UAAU0X,GAAuB/C,EAAO3U,UAAU0e,SAG3D/J,EAAO3U,UAAUge,QAAU,SAAkBjQ,EAAQ+I,EAAOnI,EAAKiQ,EAAWC,GAI1E,GAHIlG,EAAW5K,EAAQpM,cACrBoM,EAAS4G,EAAO8B,KAAK1I,EAAQA,EAAO1P,OAAQ0P,EAAOgI,cAEhDpB,EAAOyE,SAASrL,GACnB,MAAM,IAAIjF,UACR,wFAC2BiF,GAiB/B,QAbcf,IAAV8J,IACFA,EAAQ,QAEE9J,IAAR2B,IACFA,EAAMZ,EAASA,EAAO3P,OAAS,QAEf4O,IAAd4R,IACFA,EAAY,QAEE5R,IAAZ6R,IACFA,EAAU1X,KAAK/I,QAGb0Y,EAAQ,GAAKnI,EAAMZ,EAAO3P,QAAUwgB,EAAY,GAAKC,EAAU1X,KAAK/I,OACtE,MAAM,IAAI2Z,WAAW,sBAGvB,GAAI6G,GAAaC,GAAW/H,GAASnI,EACnC,OAAO,EAET,GAAIiQ,GAAaC,EACf,OAAQ,EAEV,GAAI/H,GAASnI,EACX,OAAO,EAQT,GAAIxH,OAAS4G,EAAQ,OAAO,EAE5B,IAAIyH,GAJJqJ,KAAa,IADbD,KAAe,GAMXV,GAPJvP,KAAS,IADTmI,KAAW,GASX,MAAM3T,EAAM/C,KAAKkN,IAAIkI,EAAG0I,GAElBY,EAAW3X,KAAKlH,MAAM2e,EAAWC,GACjCE,EAAahR,EAAO9N,MAAM6W,EAAOnI,GAEvC,IAAK,IAAIlM,EAAI,EAAGA,EAAIU,IAAOV,EACzB,GAAIqc,EAASrc,KAAOsc,EAAWtc,GAAI,CACjC+S,EAAIsJ,EAASrc,GACbyb,EAAIa,EAAWtc,GACf,KACF,CAGF,OAAI+S,EAAI0I,GAAW,EACfA,EAAI1I,EAAU,EACX,CACT,EA2HAb,EAAO3U,UAAUgf,SAAW,SAAmBpE,EAAK9B,EAAYlH,GAC9D,OAAoD,IAA7CzK,KAAKT,QAAQkU,EAAK9B,EAAYlH,EACvC,EAEA+C,EAAO3U,UAAU0G,QAAU,SAAkBkU,EAAK9B,EAAYlH,GAC5D,OAAO+I,EAAqBxT,KAAMyT,EAAK9B,EAAYlH,GAAU,EAC/D,EAEA+C,EAAO3U,UAAU+a,YAAc,SAAsBH,EAAK9B,EAAYlH,GACpE,OAAO+I,EAAqBxT,KAAMyT,EAAK9B,EAAYlH,GAAU,EAC/D,EA4CA+C,EAAO3U,UAAUuK,MAAQ,SAAgB6N,EAAQ/Z,EAAQD,EAAQwT,GAE/D,QAAe5E,IAAX3O,EACFuT,EAAW,OACXxT,EAAS+I,KAAK/I,OACdC,EAAS,OAEJ,QAAe2O,IAAX5O,GAA0C,iBAAXC,EACxCuT,EAAWvT,EACXD,EAAS+I,KAAK/I,OACdC,EAAS,MAEJ,KAAI4gB,SAAS5gB,GAUlB,MAAM,IAAIqB,MACR,2EAVFrB,KAAoB,EAChB4gB,SAAS7gB,IACXA,KAAoB,OACH4O,IAAb4E,IAAwBA,EAAW,UAEvCA,EAAWxT,EACXA,OAAS4O,EAMb,CAEA,MAAMyO,EAAYtU,KAAK/I,OAASC,EAGhC,SAFe2O,IAAX5O,GAAwBA,EAASqd,KAAWrd,EAASqd,GAEpDrD,EAAOha,OAAS,IAAMA,EAAS,GAAKC,EAAS,IAAOA,EAAS8I,KAAK/I,OACrE,MAAM,IAAI2Z,WAAW,0CAGlBnG,IAAUA,EAAW,QAE1B,IAAIkI,GAAc,EAClB,OACE,OAAQlI,GACN,IAAK,MACH,OAAO4J,EAASrU,KAAMiR,EAAQ/Z,EAAQD,GAExC,IAAK,OACL,IAAK,QACH,OAAO0d,EAAU3U,KAAMiR,EAAQ/Z,EAAQD,GAEzC,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAO4d,EAAW7U,KAAMiR,EAAQ/Z,EAAQD,GAE1C,IAAK,SAEH,OAAO+d,EAAYhV,KAAMiR,EAAQ/Z,EAAQD,GAE3C,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOge,EAAUjV,KAAMiR,EAAQ/Z,EAAQD,GAEzC,QACE,GAAI0b,EAAa,MAAM,IAAIhR,UAAU,qBAAuB8I,GAC5DA,GAAY,GAAKA,GAAUqI,cAC3BH,GAAc,EAGtB,EAEAnF,EAAO3U,UAAUkf,OAAS,WACxB,MAAO,CACLhV,KAAM,SACNqP,KAAMxZ,MAAMC,UAAUC,MAAMC,KAAKiH,KAAKgY,MAAQhY,KAAM,GAExD,EAyFA,MAAMiW,EAAuB,KAoB7B,SAAS/C,EAAYnY,EAAK4U,EAAOnI,GAC/B,IAAIyQ,EAAM,GACVzQ,EAAMvO,KAAKkN,IAAIpL,EAAI9D,OAAQuQ,GAE3B,IAAK,IAAIlM,EAAIqU,EAAOrU,EAAIkM,IAAOlM,EAC7B2c,GAAO9gB,OAAOC,aAAsB,IAAT2D,EAAIO,IAEjC,OAAO2c,CACT,CAEA,SAAS9E,EAAapY,EAAK4U,EAAOnI,GAChC,IAAIyQ,EAAM,GACVzQ,EAAMvO,KAAKkN,IAAIpL,EAAI9D,OAAQuQ,GAE3B,IAAK,IAAIlM,EAAIqU,EAAOrU,EAAIkM,IAAOlM,EAC7B2c,GAAO9gB,OAAOC,aAAa2D,EAAIO,IAEjC,OAAO2c,CACT,CAEA,SAASjF,EAAUjY,EAAK4U,EAAOnI,GAC7B,MAAMxL,EAAMjB,EAAI9D,SAEX0Y,GAASA,EAAQ,KAAGA,EAAQ,KAC5BnI,GAAOA,EAAM,GAAKA,EAAMxL,KAAKwL,EAAMxL,GAExC,IAAIC,EAAM,GACV,IAAK,IAAIX,EAAIqU,EAAOrU,EAAIkM,IAAOlM,EAC7BW,GAAOic,EAAoBnd,EAAIO,IAEjC,OAAOW,CACT,CAEA,SAASoX,EAActY,EAAK4U,EAAOnI,GACjC,MAAM2Q,EAAQpd,EAAIjC,MAAM6W,EAAOnI,GAC/B,IAAIgO,EAAM,GAEV,IAAK,IAAIla,EAAI,EAAGA,EAAI6c,EAAMlhB,OAAS,EAAGqE,GAAK,EACzCka,GAAOre,OAAOC,aAAa+gB,EAAM7c,GAAqB,IAAf6c,EAAM7c,EAAI,IAEnD,OAAOka,CACT,CAiCA,SAAS4C,EAAalhB,EAAQmhB,EAAKphB,GACjC,GAAKC,EAAS,GAAO,GAAKA,EAAS,EAAG,MAAM,IAAI0Z,WAAW,sBAC3D,GAAI1Z,EAASmhB,EAAMphB,EAAQ,MAAM,IAAI2Z,WAAW,wCAClD,CAyQA,SAAS0H,EAAUvd,EAAK8D,EAAO3H,EAAQmhB,EAAKb,EAAKrR,GAC/C,IAAKqH,EAAOyE,SAASlX,GAAM,MAAM,IAAI4G,UAAU,+CAC/C,GAAI9C,EAAQ2Y,GAAO3Y,EAAQsH,EAAK,MAAM,IAAIyK,WAAW,qCACrD,GAAI1Z,EAASmhB,EAAMtd,EAAI9D,OAAQ,MAAM,IAAI2Z,WAAW,qBACtD,CA+FA,SAAS2H,EAAgBxd,EAAK8D,EAAO3H,EAAQiP,EAAKqR,GAChDgB,EAAW3Z,EAAOsH,EAAKqR,EAAKzc,EAAK7D,EAAQ,GAEzC,IAAIme,EAAKhQ,OAAOxG,EAAQ4Z,OAAO,aAC/B1d,EAAI7D,KAAYme,EAChBA,IAAW,EACXta,EAAI7D,KAAYme,EAChBA,IAAW,EACXta,EAAI7D,KAAYme,EAChBA,IAAW,EACXta,EAAI7D,KAAYme,EAChB,IAAID,EAAK/P,OAAOxG,GAAS4Z,OAAO,IAAMA,OAAO,aAQ7C,OAPA1d,EAAI7D,KAAYke,EAChBA,IAAW,EACXra,EAAI7D,KAAYke,EAChBA,IAAW,EACXra,EAAI7D,KAAYke,EAChBA,IAAW,EACXra,EAAI7D,KAAYke,EACTle,CACT,CAEA,SAASwhB,EAAgB3d,EAAK8D,EAAO3H,EAAQiP,EAAKqR,GAChDgB,EAAW3Z,EAAOsH,EAAKqR,EAAKzc,EAAK7D,EAAQ,GAEzC,IAAIme,EAAKhQ,OAAOxG,EAAQ4Z,OAAO,aAC/B1d,EAAI7D,EAAS,GAAKme,EAClBA,IAAW,EACXta,EAAI7D,EAAS,GAAKme,EAClBA,IAAW,EACXta,EAAI7D,EAAS,GAAKme,EAClBA,IAAW,EACXta,EAAI7D,EAAS,GAAKme,EAClB,IAAID,EAAK/P,OAAOxG,GAAS4Z,OAAO,IAAMA,OAAO,aAQ7C,OAPA1d,EAAI7D,EAAS,GAAKke,EAClBA,IAAW,EACXra,EAAI7D,EAAS,GAAKke,EAClBA,IAAW,EACXra,EAAI7D,EAAS,GAAKke,EAClBA,IAAW,EACXra,EAAI7D,GAAUke,EACPle,EAAS,CAClB,CAkHA,SAASyhB,EAAc5d,EAAK8D,EAAO3H,EAAQmhB,EAAKb,EAAKrR,GACnD,GAAIjP,EAASmhB,EAAMtd,EAAI9D,OAAQ,MAAM,IAAI2Z,WAAW,sBACpD,GAAI1Z,EAAS,EAAG,MAAM,IAAI0Z,WAAW,qBACvC,CAEA,SAASgI,EAAY7d,EAAK8D,EAAO3H,EAAQ2hB,EAAcC,GAOrD,OANAja,GAASA,EACT3H,KAAoB,EACf4hB,GACHH,EAAa5d,EAAK8D,EAAO3H,EAAQ,GAEnCoZ,EAAQlN,MAAMrI,EAAK8D,EAAO3H,EAAQ2hB,EAAc,GAAI,GAC7C3hB,EAAS,CAClB,CAUA,SAAS6hB,EAAahe,EAAK8D,EAAO3H,EAAQ2hB,EAAcC,GAOtD,OANAja,GAASA,EACT3H,KAAoB,EACf4hB,GACHH,EAAa5d,EAAK8D,EAAO3H,EAAQ,GAEnCoZ,EAAQlN,MAAMrI,EAAK8D,EAAO3H,EAAQ2hB,EAAc,GAAI,GAC7C3hB,EAAS,CAClB,CAzkBAsW,EAAO3U,UAAUC,MAAQ,SAAgB6W,EAAOnI,GAC9C,MAAMxL,EAAMgE,KAAK/I,QACjB0Y,IAAUA,GAGE,GACVA,GAAS3T,GACG,IAAG2T,EAAQ,GACdA,EAAQ3T,IACjB2T,EAAQ3T,IANVwL,OAAc3B,IAAR2B,EAAoBxL,IAAQwL,GASxB,GACRA,GAAOxL,GACG,IAAGwL,EAAM,GACVA,EAAMxL,IACfwL,EAAMxL,GAGJwL,EAAMmI,IAAOnI,EAAMmI,GAEvB,MAAMqJ,EAAShZ,KAAK1I,SAASqY,EAAOnI,GAIpC,OAFA9I,OAAOmS,eAAemI,EAAQxL,EAAO3U,WAE9BmgB,CACT,EAUAxL,EAAO3U,UAAUogB,WACjBzL,EAAO3U,UAAUqgB,WAAa,SAAqBhiB,EAAQ0X,EAAYkK,GACrE5hB,KAAoB,EACpB0X,KAA4B,EACvBkK,GAAUV,EAAYlhB,EAAQ0X,EAAY5O,KAAK/I,QAEpD,IAAIwc,EAAMzT,KAAK9I,GACXiiB,EAAM,EACN7d,EAAI,EACR,OAASA,EAAIsT,IAAeuK,GAAO,MACjC1F,GAAOzT,KAAK9I,EAASoE,GAAK6d,EAG5B,OAAO1F,CACT,EAEAjG,EAAO3U,UAAUugB,WACjB5L,EAAO3U,UAAUwgB,WAAa,SAAqBniB,EAAQ0X,EAAYkK,GACrE5hB,KAAoB,EACpB0X,KAA4B,EACvBkK,GACHV,EAAYlhB,EAAQ0X,EAAY5O,KAAK/I,QAGvC,IAAIwc,EAAMzT,KAAK9I,IAAW0X,GACtBuK,EAAM,EACV,KAAOvK,EAAa,IAAMuK,GAAO,MAC/B1F,GAAOzT,KAAK9I,IAAW0X,GAAcuK,EAGvC,OAAO1F,CACT,EAEAjG,EAAO3U,UAAUygB,UACjB9L,EAAO3U,UAAU0gB,UAAY,SAAoBriB,EAAQ4hB,GAGvD,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACpC+I,KAAK9I,EACd,EAEAsW,EAAO3U,UAAU2gB,aACjBhM,EAAO3U,UAAU4gB,aAAe,SAAuBviB,EAAQ4hB,GAG7D,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACpC+I,KAAK9I,GAAW8I,KAAK9I,EAAS,IAAM,CAC7C,EAEAsW,EAAO3U,UAAU6gB,aACjBlM,EAAO3U,UAAUob,aAAe,SAAuB/c,EAAQ4hB,GAG7D,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACnC+I,KAAK9I,IAAW,EAAK8I,KAAK9I,EAAS,EAC7C,EAEAsW,EAAO3U,UAAU8gB,aACjBnM,EAAO3U,UAAU+gB,aAAe,SAAuB1iB,EAAQ4hB,GAI7D,OAHA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,SAElC+I,KAAK9I,GACT8I,KAAK9I,EAAS,IAAM,EACpB8I,KAAK9I,EAAS,IAAM,IACD,SAAnB8I,KAAK9I,EAAS,EACrB,EAEAsW,EAAO3U,UAAUghB,aACjBrM,EAAO3U,UAAUihB,aAAe,SAAuB5iB,EAAQ4hB,GAI7D,OAHA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QAEpB,SAAf+I,KAAK9I,IACT8I,KAAK9I,EAAS,IAAM,GACrB8I,KAAK9I,EAAS,IAAM,EACrB8I,KAAK9I,EAAS,GAClB,EAEAsW,EAAO3U,UAAUkhB,gBAAkBC,GAAmB,SAA0B9iB,GAE9E+iB,EADA/iB,KAAoB,EACG,UACvB,MAAMgjB,EAAQla,KAAK9I,GACbM,EAAOwI,KAAK9I,EAAS,QACb2O,IAAVqU,QAAgCrU,IAATrO,GACzB2iB,EAAYjjB,EAAQ8I,KAAK/I,OAAS,GAGpC,MAAMoe,EAAK6E,EACQ,IAAjBla,OAAO9I,GACU,MAAjB8I,OAAO9I,GACP8I,OAAO9I,GAAU,GAAK,GAElBke,EAAKpV,OAAO9I,GACC,IAAjB8I,OAAO9I,GACU,MAAjB8I,OAAO9I,GACPM,EAAO,GAAK,GAEd,OAAOihB,OAAOpD,IAAOoD,OAAOrD,IAAOqD,OAAO,IAC5C,IAEAjL,EAAO3U,UAAUuhB,gBAAkBJ,GAAmB,SAA0B9iB,GAE9E+iB,EADA/iB,KAAoB,EACG,UACvB,MAAMgjB,EAAQla,KAAK9I,GACbM,EAAOwI,KAAK9I,EAAS,QACb2O,IAAVqU,QAAgCrU,IAATrO,GACzB2iB,EAAYjjB,EAAQ8I,KAAK/I,OAAS,GAGpC,MAAMme,EAAK8E,EAAQ,GAAK,GACL,MAAjBla,OAAO9I,GACU,IAAjB8I,OAAO9I,GACP8I,OAAO9I,GAEHme,EAAKrV,OAAO9I,GAAU,GAAK,GACd,MAAjB8I,OAAO9I,GACU,IAAjB8I,OAAO9I,GACPM,EAEF,OAAQihB,OAAOrD,IAAOqD,OAAO,KAAOA,OAAOpD,EAC7C,IAEA7H,EAAO3U,UAAUwhB,UAAY,SAAoBnjB,EAAQ0X,EAAYkK,GACnE5hB,KAAoB,EACpB0X,KAA4B,EACvBkK,GAAUV,EAAYlhB,EAAQ0X,EAAY5O,KAAK/I,QAEpD,IAAIwc,EAAMzT,KAAK9I,GACXiiB,EAAM,EACN7d,EAAI,EACR,OAASA,EAAIsT,IAAeuK,GAAO,MACjC1F,GAAOzT,KAAK9I,EAASoE,GAAK6d,EAM5B,OAJAA,GAAO,IAEH1F,GAAO0F,IAAK1F,GAAOxa,KAAKqhB,IAAI,EAAG,EAAI1L,IAEhC6E,CACT,EAEAjG,EAAO3U,UAAU0hB,UAAY,SAAoBrjB,EAAQ0X,EAAYkK,GACnE5hB,KAAoB,EACpB0X,KAA4B,EACvBkK,GAAUV,EAAYlhB,EAAQ0X,EAAY5O,KAAK/I,QAEpD,IAAIqE,EAAIsT,EACJuK,EAAM,EACN1F,EAAMzT,KAAK9I,IAAWoE,GAC1B,KAAOA,EAAI,IAAM6d,GAAO,MACtB1F,GAAOzT,KAAK9I,IAAWoE,GAAK6d,EAM9B,OAJAA,GAAO,IAEH1F,GAAO0F,IAAK1F,GAAOxa,KAAKqhB,IAAI,EAAG,EAAI1L,IAEhC6E,CACT,EAEAjG,EAAO3U,UAAU2hB,SAAW,SAAmBtjB,EAAQ4hB,GAGrD,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACtB,IAAf+I,KAAK9I,IAC0B,GAA5B,IAAO8I,KAAK9I,GAAU,GADK8I,KAAK9I,EAE3C,EAEAsW,EAAO3U,UAAU4hB,YAAc,SAAsBvjB,EAAQ4hB,GAC3D5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QAC3C,MAAMwc,EAAMzT,KAAK9I,GAAW8I,KAAK9I,EAAS,IAAM,EAChD,OAAc,MAANuc,EAAsB,WAANA,EAAmBA,CAC7C,EAEAjG,EAAO3U,UAAU6hB,YAAc,SAAsBxjB,EAAQ4hB,GAC3D5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QAC3C,MAAMwc,EAAMzT,KAAK9I,EAAS,GAAM8I,KAAK9I,IAAW,EAChD,OAAc,MAANuc,EAAsB,WAANA,EAAmBA,CAC7C,EAEAjG,EAAO3U,UAAU8hB,YAAc,SAAsBzjB,EAAQ4hB,GAI3D,OAHA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QAEnC+I,KAAK9I,GACV8I,KAAK9I,EAAS,IAAM,EACpB8I,KAAK9I,EAAS,IAAM,GACpB8I,KAAK9I,EAAS,IAAM,EACzB,EAEAsW,EAAO3U,UAAU+hB,YAAc,SAAsB1jB,EAAQ4hB,GAI3D,OAHA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QAEnC+I,KAAK9I,IAAW,GACrB8I,KAAK9I,EAAS,IAAM,GACpB8I,KAAK9I,EAAS,IAAM,EACpB8I,KAAK9I,EAAS,EACnB,EAEAsW,EAAO3U,UAAUgiB,eAAiBb,GAAmB,SAAyB9iB,GAE5E+iB,EADA/iB,KAAoB,EACG,UACvB,MAAMgjB,EAAQla,KAAK9I,GACbM,EAAOwI,KAAK9I,EAAS,QACb2O,IAAVqU,QAAgCrU,IAATrO,GACzB2iB,EAAYjjB,EAAQ8I,KAAK/I,OAAS,GAGpC,MAAMwc,EAAMzT,KAAK9I,EAAS,GACL,IAAnB8I,KAAK9I,EAAS,GACK,MAAnB8I,KAAK9I,EAAS,IACbM,GAAQ,IAEX,OAAQihB,OAAOhF,IAAQgF,OAAO,KAC5BA,OAAOyB,EACU,IAAjBla,OAAO9I,GACU,MAAjB8I,OAAO9I,GACP8I,OAAO9I,GAAU,GAAK,GAC1B,IAEAsW,EAAO3U,UAAUiiB,eAAiBd,GAAmB,SAAyB9iB,GAE5E+iB,EADA/iB,KAAoB,EACG,UACvB,MAAMgjB,EAAQla,KAAK9I,GACbM,EAAOwI,KAAK9I,EAAS,QACb2O,IAAVqU,QAAgCrU,IAATrO,GACzB2iB,EAAYjjB,EAAQ8I,KAAK/I,OAAS,GAGpC,MAAMwc,GAAOyG,GAAS,IACH,MAAjBla,OAAO9I,GACU,IAAjB8I,OAAO9I,GACP8I,OAAO9I,GAET,OAAQuhB,OAAOhF,IAAQgF,OAAO,KAC5BA,OAAOzY,OAAO9I,GAAU,GAAK,GACZ,MAAjB8I,OAAO9I,GACU,IAAjB8I,OAAO9I,GACPM,EACJ,IAEAgW,EAAO3U,UAAUkiB,YAAc,SAAsB7jB,EAAQ4hB,GAG3D,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACpCqZ,EAAQ0D,KAAKhU,KAAM9I,GAAQ,EAAM,GAAI,EAC9C,EAEAsW,EAAO3U,UAAUmiB,YAAc,SAAsB9jB,EAAQ4hB,GAG3D,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACpCqZ,EAAQ0D,KAAKhU,KAAM9I,GAAQ,EAAO,GAAI,EAC/C,EAEAsW,EAAO3U,UAAUoiB,aAAe,SAAuB/jB,EAAQ4hB,GAG7D,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACpCqZ,EAAQ0D,KAAKhU,KAAM9I,GAAQ,EAAM,GAAI,EAC9C,EAEAsW,EAAO3U,UAAUqiB,aAAe,SAAuBhkB,EAAQ4hB,GAG7D,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACpCqZ,EAAQ0D,KAAKhU,KAAM9I,GAAQ,EAAO,GAAI,EAC/C,EAQAsW,EAAO3U,UAAUsiB,YACjB3N,EAAO3U,UAAUuiB,YAAc,SAAsBvc,EAAO3H,EAAQ0X,EAAYkK,GAI9E,GAHAja,GAASA,EACT3H,KAAoB,EACpB0X,KAA4B,GACvBkK,EAAU,CAEbR,EAAStY,KAAMnB,EAAO3H,EAAQ0X,EADb3V,KAAKqhB,IAAI,EAAG,EAAI1L,GAAc,EACK,EACtD,CAEA,IAAIuK,EAAM,EACN7d,EAAI,EAER,IADA0E,KAAK9I,GAAkB,IAAR2H,IACNvD,EAAIsT,IAAeuK,GAAO,MACjCnZ,KAAK9I,EAASoE,GAAMuD,EAAQsa,EAAO,IAGrC,OAAOjiB,EAAS0X,CAClB,EAEApB,EAAO3U,UAAUwiB,YACjB7N,EAAO3U,UAAUyiB,YAAc,SAAsBzc,EAAO3H,EAAQ0X,EAAYkK,GAI9E,GAHAja,GAASA,EACT3H,KAAoB,EACpB0X,KAA4B,GACvBkK,EAAU,CAEbR,EAAStY,KAAMnB,EAAO3H,EAAQ0X,EADb3V,KAAKqhB,IAAI,EAAG,EAAI1L,GAAc,EACK,EACtD,CAEA,IAAItT,EAAIsT,EAAa,EACjBuK,EAAM,EAEV,IADAnZ,KAAK9I,EAASoE,GAAa,IAARuD,IACVvD,GAAK,IAAM6d,GAAO,MACzBnZ,KAAK9I,EAASoE,GAAMuD,EAAQsa,EAAO,IAGrC,OAAOjiB,EAAS0X,CAClB,EAEApB,EAAO3U,UAAU0iB,WACjB/N,EAAO3U,UAAU2iB,WAAa,SAAqB3c,EAAO3H,EAAQ4hB,GAKhE,OAJAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,IAAM,GACtD8I,KAAK9I,GAAmB,IAAR2H,EACT3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU4iB,cACjBjO,EAAO3U,UAAU6iB,cAAgB,SAAwB7c,EAAO3H,EAAQ4hB,GAMtE,OALAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,MAAQ,GACxD8I,KAAK9I,GAAmB,IAAR2H,EAChBmB,KAAK9I,EAAS,GAAM2H,IAAU,EACvB3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU8iB,cACjBnO,EAAO3U,UAAU+iB,cAAgB,SAAwB/c,EAAO3H,EAAQ4hB,GAMtE,OALAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,MAAQ,GACxD8I,KAAK9I,GAAW2H,IAAU,EAC1BmB,KAAK9I,EAAS,GAAc,IAAR2H,EACb3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAUgjB,cACjBrO,EAAO3U,UAAUijB,cAAgB,SAAwBjd,EAAO3H,EAAQ4hB,GAQtE,OAPAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,WAAY,GAC5D8I,KAAK9I,EAAS,GAAM2H,IAAU,GAC9BmB,KAAK9I,EAAS,GAAM2H,IAAU,GAC9BmB,KAAK9I,EAAS,GAAM2H,IAAU,EAC9BmB,KAAK9I,GAAmB,IAAR2H,EACT3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAUkjB,cACjBvO,EAAO3U,UAAUmjB,cAAgB,SAAwBnd,EAAO3H,EAAQ4hB,GAQtE,OAPAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,WAAY,GAC5D8I,KAAK9I,GAAW2H,IAAU,GAC1BmB,KAAK9I,EAAS,GAAM2H,IAAU,GAC9BmB,KAAK9I,EAAS,GAAM2H,IAAU,EAC9BmB,KAAK9I,EAAS,GAAc,IAAR2H,EACb3H,EAAS,CAClB,EA8CAsW,EAAO3U,UAAUojB,iBAAmBjC,GAAmB,SAA2Bnb,EAAO3H,EAAS,GAChG,OAAOqhB,EAAevY,KAAMnB,EAAO3H,EAAQuhB,OAAO,GAAIA,OAAO,sBAC/D,IAEAjL,EAAO3U,UAAUqjB,iBAAmBlC,GAAmB,SAA2Bnb,EAAO3H,EAAS,GAChG,OAAOwhB,EAAe1Y,KAAMnB,EAAO3H,EAAQuhB,OAAO,GAAIA,OAAO,sBAC/D,IAEAjL,EAAO3U,UAAUsjB,WAAa,SAAqBtd,EAAO3H,EAAQ0X,EAAYkK,GAG5E,GAFAja,GAASA,EACT3H,KAAoB,GACf4hB,EAAU,CACb,MAAMvT,EAAQtM,KAAKqhB,IAAI,EAAI,EAAI1L,EAAc,GAE7C0J,EAAStY,KAAMnB,EAAO3H,EAAQ0X,EAAYrJ,EAAQ,GAAIA,EACxD,CAEA,IAAIjK,EAAI,EACJ6d,EAAM,EACNiD,EAAM,EAEV,IADApc,KAAK9I,GAAkB,IAAR2H,IACNvD,EAAIsT,IAAeuK,GAAO,MAC7Bta,EAAQ,GAAa,IAARud,GAAsC,IAAzBpc,KAAK9I,EAASoE,EAAI,KAC9C8gB,EAAM,GAERpc,KAAK9I,EAASoE,IAAOuD,EAAQsa,GAAQ,GAAKiD,EAAM,IAGlD,OAAOllB,EAAS0X,CAClB,EAEApB,EAAO3U,UAAUwjB,WAAa,SAAqBxd,EAAO3H,EAAQ0X,EAAYkK,GAG5E,GAFAja,GAASA,EACT3H,KAAoB,GACf4hB,EAAU,CACb,MAAMvT,EAAQtM,KAAKqhB,IAAI,EAAI,EAAI1L,EAAc,GAE7C0J,EAAStY,KAAMnB,EAAO3H,EAAQ0X,EAAYrJ,EAAQ,GAAIA,EACxD,CAEA,IAAIjK,EAAIsT,EAAa,EACjBuK,EAAM,EACNiD,EAAM,EAEV,IADApc,KAAK9I,EAASoE,GAAa,IAARuD,IACVvD,GAAK,IAAM6d,GAAO,MACrBta,EAAQ,GAAa,IAARud,GAAsC,IAAzBpc,KAAK9I,EAASoE,EAAI,KAC9C8gB,EAAM,GAERpc,KAAK9I,EAASoE,IAAOuD,EAAQsa,GAAQ,GAAKiD,EAAM,IAGlD,OAAOllB,EAAS0X,CAClB,EAEApB,EAAO3U,UAAUyjB,UAAY,SAAoBzd,EAAO3H,EAAQ4hB,GAM9D,OALAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,KAAO,KACnD2H,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtCmB,KAAK9I,GAAmB,IAAR2H,EACT3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU0jB,aAAe,SAAuB1d,EAAO3H,EAAQ4hB,GAMpE,OALAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,OAAS,OACzD8I,KAAK9I,GAAmB,IAAR2H,EAChBmB,KAAK9I,EAAS,GAAM2H,IAAU,EACvB3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU2jB,aAAe,SAAuB3d,EAAO3H,EAAQ4hB,GAMpE,OALAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,OAAS,OACzD8I,KAAK9I,GAAW2H,IAAU,EAC1BmB,KAAK9I,EAAS,GAAc,IAAR2H,EACb3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU4jB,aAAe,SAAuB5d,EAAO3H,EAAQ4hB,GAQpE,OAPAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,YAAa,YAC7D8I,KAAK9I,GAAmB,IAAR2H,EAChBmB,KAAK9I,EAAS,GAAM2H,IAAU,EAC9BmB,KAAK9I,EAAS,GAAM2H,IAAU,GAC9BmB,KAAK9I,EAAS,GAAM2H,IAAU,GACvB3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU6jB,aAAe,SAAuB7d,EAAO3H,EAAQ4hB,GASpE,OARAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,YAAa,YACzD2H,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GAC5CmB,KAAK9I,GAAW2H,IAAU,GAC1BmB,KAAK9I,EAAS,GAAM2H,IAAU,GAC9BmB,KAAK9I,EAAS,GAAM2H,IAAU,EAC9BmB,KAAK9I,EAAS,GAAc,IAAR2H,EACb3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU8jB,gBAAkB3C,GAAmB,SAA0Bnb,EAAO3H,EAAS,GAC9F,OAAOqhB,EAAevY,KAAMnB,EAAO3H,GAASuhB,OAAO,sBAAuBA,OAAO,sBACnF,IAEAjL,EAAO3U,UAAU+jB,gBAAkB5C,GAAmB,SAA0Bnb,EAAO3H,EAAS,GAC9F,OAAOwhB,EAAe1Y,KAAMnB,EAAO3H,GAASuhB,OAAO,sBAAuBA,OAAO,sBACnF,IAiBAjL,EAAO3U,UAAUgkB,aAAe,SAAuBhe,EAAO3H,EAAQ4hB,GACpE,OAAOF,EAAW5Y,KAAMnB,EAAO3H,GAAQ,EAAM4hB,EAC/C,EAEAtL,EAAO3U,UAAUikB,aAAe,SAAuBje,EAAO3H,EAAQ4hB,GACpE,OAAOF,EAAW5Y,KAAMnB,EAAO3H,GAAQ,EAAO4hB,EAChD,EAYAtL,EAAO3U,UAAUkkB,cAAgB,SAAwBle,EAAO3H,EAAQ4hB,GACtE,OAAOC,EAAY/Y,KAAMnB,EAAO3H,GAAQ,EAAM4hB,EAChD,EAEAtL,EAAO3U,UAAUmkB,cAAgB,SAAwBne,EAAO3H,EAAQ4hB,GACtE,OAAOC,EAAY/Y,KAAMnB,EAAO3H,GAAQ,EAAO4hB,EACjD,EAGAtL,EAAO3U,UAAU4Y,KAAO,SAAe7K,EAAQqW,EAAatN,EAAOnI,GACjE,IAAKgG,EAAOyE,SAASrL,GAAS,MAAM,IAAIjF,UAAU,+BAQlD,GAPKgO,IAAOA,EAAQ,GACfnI,GAAe,IAARA,IAAWA,EAAMxH,KAAK/I,QAC9BgmB,GAAerW,EAAO3P,SAAQgmB,EAAcrW,EAAO3P,QAClDgmB,IAAaA,EAAc,GAC5BzV,EAAM,GAAKA,EAAMmI,IAAOnI,EAAMmI,GAG9BnI,IAAQmI,EAAO,OAAO,EAC1B,GAAsB,IAAlB/I,EAAO3P,QAAgC,IAAhB+I,KAAK/I,OAAc,OAAO,EAGrD,GAAIgmB,EAAc,EAChB,MAAM,IAAIrM,WAAW,6BAEvB,GAAIjB,EAAQ,GAAKA,GAAS3P,KAAK/I,OAAQ,MAAM,IAAI2Z,WAAW,sBAC5D,GAAIpJ,EAAM,EAAG,MAAM,IAAIoJ,WAAW,2BAG9BpJ,EAAMxH,KAAK/I,SAAQuQ,EAAMxH,KAAK/I,QAC9B2P,EAAO3P,OAASgmB,EAAczV,EAAMmI,IACtCnI,EAAMZ,EAAO3P,OAASgmB,EAActN,GAGtC,MAAM3T,EAAMwL,EAAMmI,EAalB,OAXI3P,OAAS4G,GAAqD,mBAApCpM,WAAW3B,UAAUqkB,WAEjDld,KAAKkd,WAAWD,EAAatN,EAAOnI,GAEpChN,WAAW3B,UAAUgD,IAAI9C,KACvB6N,EACA5G,KAAK1I,SAASqY,EAAOnI,GACrByV,GAIGjhB,CACT,EAMAwR,EAAO3U,UAAUiT,KAAO,SAAe2H,EAAK9D,EAAOnI,EAAKiD,GAEtD,GAAmB,iBAARgJ,EAAkB,CAS3B,GARqB,iBAAV9D,GACTlF,EAAWkF,EACXA,EAAQ,EACRnI,EAAMxH,KAAK/I,QACa,iBAARuQ,IAChBiD,EAAWjD,EACXA,EAAMxH,KAAK/I,aAEI4O,IAAb4E,GAA8C,iBAAbA,EACnC,MAAM,IAAI9I,UAAU,6BAEtB,GAAwB,iBAAb8I,IAA0B+C,EAAO0D,WAAWzG,GACrD,MAAM,IAAI9I,UAAU,qBAAuB8I,GAE7C,GAAmB,IAAfgJ,EAAIxc,OAAc,CACpB,MAAMgL,EAAOwR,EAAIjY,WAAW,IACV,SAAbiP,GAAuBxI,EAAO,KAClB,WAAbwI,KAEFgJ,EAAMxR,EAEV,CACF,KAA0B,iBAARwR,EAChBA,GAAY,IACY,kBAARA,IAChBA,EAAMpO,OAAOoO,IAIf,GAAI9D,EAAQ,GAAK3P,KAAK/I,OAAS0Y,GAAS3P,KAAK/I,OAASuQ,EACpD,MAAM,IAAIoJ,WAAW,sBAGvB,GAAIpJ,GAAOmI,EACT,OAAO3P,KAQT,IAAI1E,EACJ,GANAqU,KAAkB,EAClBnI,OAAc3B,IAAR2B,EAAoBxH,KAAK/I,OAASuQ,IAAQ,EAE3CiM,IAAKA,EAAM,GAGG,iBAARA,EACT,IAAKnY,EAAIqU,EAAOrU,EAAIkM,IAAOlM,EACzB0E,KAAK1E,GAAKmY,MAEP,CACL,MAAM0E,EAAQ3K,EAAOyE,SAASwB,GAC1BA,EACAjG,EAAO8B,KAAKmE,EAAKhJ,GACfzO,EAAMmc,EAAMlhB,OAClB,GAAY,IAAR+E,EACF,MAAM,IAAI2F,UAAU,cAAgB8R,EAClC,qCAEJ,IAAKnY,EAAI,EAAGA,EAAIkM,EAAMmI,IAASrU,EAC7B0E,KAAK1E,EAAIqU,GAASwI,EAAM7c,EAAIU,EAEhC,CAEA,OAAOgE,IACT,EAMA,MAAMmd,EAAS,CAAC,EAChB,SAASC,EAAGC,EAAKC,EAAYC,GAC3BJ,EAAOE,GAAO,cAAwBE,EACpCzd,cACEoH,QAEAxI,OAAO2B,eAAeL,KAAM,UAAW,CACrCnB,MAAOye,EAAWjmB,MAAM2I,KAAMhH,WAC9BkH,UAAU,EACVsd,cAAc,IAIhBxd,KAAKX,KAAO,GAAGW,KAAKX,SAASge,KAG7Brd,KAAKyd,aAEEzd,KAAKX,IACd,CAEI4C,WACF,OAAOob,CACT,CAEIpb,SAAMpD,GACRH,OAAO2B,eAAeL,KAAM,OAAQ,CAClCwd,cAAc,EACd5c,YAAY,EACZ/B,QACAqB,UAAU,GAEd,CAEAuS,WACE,MAAO,GAAGzS,KAAKX,SAASge,OAASrd,KAAK0d,SACxC,EAEJ,CA+BA,SAASC,EAAuBlK,GAC9B,IAAI+B,EAAM,GACNla,EAAImY,EAAIxc,OACZ,MAAM0Y,EAAmB,MAAX8D,EAAI,GAAa,EAAI,EACnC,KAAOnY,GAAKqU,EAAQ,EAAGrU,GAAK,EAC1Bka,EAAM,IAAI/B,EAAI3a,MAAMwC,EAAI,EAAGA,KAAKka,IAElC,MAAO,GAAG/B,EAAI3a,MAAM,EAAGwC,KAAKka,GAC9B,CAYA,SAASgD,EAAY3Z,EAAOsH,EAAKqR,EAAKzc,EAAK7D,EAAQ0X,GACjD,GAAI/P,EAAQ2Y,GAAO3Y,EAAQsH,EAAK,CAC9B,MAAM1N,EAAmB,iBAAR0N,EAAmB,IAAM,GAC1C,IAAI4I,EAWJ,MARIA,EAFAH,EAAa,EACH,IAARzI,GAAaA,IAAQsS,OAAO,GACtB,OAAOhgB,YAAYA,QAA2B,GAAlBmW,EAAa,KAASnW,IAElD,SAASA,QAA2B,GAAlBmW,EAAa,GAAS,IAAInW,iBACtB,GAAlBmW,EAAa,GAAS,IAAInW,IAGhC,MAAM0N,IAAM1N,YAAY+e,IAAM/e,IAElC,IAAI0kB,EAAOS,iBAAiB,QAAS7O,EAAOlQ,EACpD,EAtBF,SAAsB9D,EAAK7D,EAAQ0X,GACjCqL,EAAe/iB,EAAQ,eACH2O,IAAhB9K,EAAI7D,SAAsD2O,IAA7B9K,EAAI7D,EAAS0X,IAC5CuL,EAAYjjB,EAAQ6D,EAAI9D,QAAU2X,EAAa,GAEnD,CAkBEiP,CAAY9iB,EAAK7D,EAAQ0X,EAC3B,CAEA,SAASqL,EAAgBpb,EAAOQ,GAC9B,GAAqB,iBAAVR,EACT,MAAM,IAAIse,EAAOW,qBAAqBze,EAAM,SAAUR,EAE1D,CAEA,SAASsb,EAAatb,EAAO5H,EAAQ8L,GACnC,GAAI9J,KAAK8kB,MAAMlf,KAAWA,EAExB,MADAob,EAAepb,EAAOkE,GAChB,IAAIoa,EAAOS,iBAAiB7a,GAAQ,SAAU,aAAclE,GAGpE,GAAI5H,EAAS,EACX,MAAM,IAAIkmB,EAAOa,yBAGnB,MAAM,IAAIb,EAAOS,iBAAiB7a,GAAQ,SACR,MAAMA,EAAO,EAAI,YAAY9L,IAC7B4H,EACpC,CAvFAue,EAAE,4BACA,SAAU/d,GACR,OAAIA,EACK,GAAGA,gCAGL,gDACT,GAAGuR,YACLwM,EAAE,wBACA,SAAU/d,EAAM8R,GACd,MAAO,QAAQ9R,4DAA+D8R,GAChF,GAAGxP,WACLyb,EAAE,oBACA,SAAU/hB,EAAK0T,EAAOhT,GACpB,IAAIkiB,EAAM,iBAAiB5iB,sBACvB6iB,EAAWniB,EAWf,OAVIsJ,OAAOC,UAAUvJ,IAAU9C,KAAKklB,IAAIpiB,GAAS,GAAK,GACpDmiB,EAAWP,EAAsBxmB,OAAO4E,IACd,iBAAVA,IAChBmiB,EAAW/mB,OAAO4E,IACdA,EAAQ0c,OAAO,IAAMA,OAAO,KAAO1c,IAAU0c,OAAO,IAAMA,OAAO,QACnEyF,EAAWP,EAAsBO,IAEnCA,GAAY,KAEdD,GAAO,eAAelP,eAAmBmP,IAClCD,CACT,GAAGrN,YAiEL,MAAMwN,EAAoB,oBAgB1B,SAASxL,EAAa3B,EAAQiE,GAE5B,IAAIQ,EADJR,EAAQA,GAAS1P,IAEjB,MAAMvO,EAASga,EAAOha,OACtB,IAAIonB,EAAgB,KACpB,MAAMlG,EAAQ,GAEd,IAAK,IAAI7c,EAAI,EAAGA,EAAIrE,IAAUqE,EAAG,CAI/B,GAHAoa,EAAYzE,EAAOzV,WAAWF,GAG1Boa,EAAY,OAAUA,EAAY,MAAQ,CAE5C,IAAK2I,EAAe,CAElB,GAAI3I,EAAY,MAAQ,EAEjBR,GAAS,IAAM,GAAGiD,EAAMzgB,KAAK,IAAM,IAAM,KAC9C,QACF,CAAO,GAAI4D,EAAI,IAAMrE,EAAQ,EAEtBie,GAAS,IAAM,GAAGiD,EAAMzgB,KAAK,IAAM,IAAM,KAC9C,QACF,CAGA2mB,EAAgB3I,EAEhB,QACF,CAGA,GAAIA,EAAY,MAAQ,EACjBR,GAAS,IAAM,GAAGiD,EAAMzgB,KAAK,IAAM,IAAM,KAC9C2mB,EAAgB3I,EAChB,QACF,CAGAA,EAAkE,OAArD2I,EAAgB,OAAU,GAAK3I,EAAY,MAC1D,MAAW2I,IAEJnJ,GAAS,IAAM,GAAGiD,EAAMzgB,KAAK,IAAM,IAAM,KAMhD,GAHA2mB,EAAgB,KAGZ3I,EAAY,IAAM,CACpB,IAAKR,GAAS,GAAK,EAAG,MACtBiD,EAAMzgB,KAAKge,EACb,MAAO,GAAIA,EAAY,KAAO,CAC5B,IAAKR,GAAS,GAAK,EAAG,MACtBiD,EAAMzgB,KACJge,GAAa,EAAM,IACP,GAAZA,EAAmB,IAEvB,MAAO,GAAIA,EAAY,MAAS,CAC9B,IAAKR,GAAS,GAAK,EAAG,MACtBiD,EAAMzgB,KACJge,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,IAEvB,KAAO,MAAIA,EAAY,SASrB,MAAM,IAAInd,MAAM,sBARhB,IAAK2c,GAAS,GAAK,EAAG,MACtBiD,EAAMzgB,KACJge,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,IAIvB,CACF,CAEA,OAAOyC,CACT,CA2BA,SAAStF,EAAexX,GACtB,OAAOgV,EAAOiO,YAxHhB,SAAsBjjB,GAMpB,IAFAA,GAFAA,EAAMA,EAAI4D,MAAM,KAAK,IAEXgP,OAAOxN,QAAQ2d,EAAmB,KAEpCnnB,OAAS,EAAG,MAAO,GAE3B,KAAOoE,EAAIpE,OAAS,GAAM,GACxBoE,GAAY,IAEd,OAAOA,CACT,CA4G4BkjB,CAAYljB,GACxC,CAEA,SAASuZ,EAAY4J,EAAKC,EAAKvnB,EAAQD,GACrC,IAAIqE,EACJ,IAAKA,EAAI,EAAGA,EAAIrE,KACTqE,EAAIpE,GAAUunB,EAAIxnB,QAAYqE,GAAKkjB,EAAIvnB,UADpBqE,EAExBmjB,EAAInjB,EAAIpE,GAAUsnB,EAAIljB,GAExB,OAAOA,CACT,CAKA,SAASkW,EAAYQ,EAAKjP,GACxB,OAAOiP,aAAejP,GACZ,MAAPiP,GAAkC,MAAnBA,EAAIlS,aAA+C,MAAxBkS,EAAIlS,YAAYT,MACzD2S,EAAIlS,YAAYT,OAAS0D,EAAK1D,IACpC,CACA,SAAS8S,EAAaH,GAEpB,OAAOA,GAAQA,CACjB,CAIA,MAAMkG,EAAsB,WAC1B,MAAMwG,EAAW,mBACXnlB,EAAQ,IAAIX,MAAM,KACxB,IAAK,IAAI0C,EAAI,EAAGA,EAAI,KAAMA,EAAG,CAC3B,MAAMqjB,EAAU,GAAJrjB,EACZ,IAAK,IAAI8Y,EAAI,EAAGA,EAAI,KAAMA,EACxB7a,EAAMolB,EAAMvK,GAAKsK,EAASpjB,GAAKojB,EAAStK,EAE5C,CACA,OAAO7a,CACR,CAV2B,GAa5B,SAASygB,EAAoBnN,GAC3B,MAAyB,oBAAX4L,OAAyBmG,GAAyB/R,CAClE,CAEA,SAAS+R,KACP,MAAM,IAAIrmB,MAAM,uBAClB,qBCnjEA,SAASsmB,EAAWC,GAClB,MAAMC,EAAa,IAAIC,WAAWC,gBAElC,SAASC,IACPH,EAAW7mB,QAEX,IAAK,MAAMinB,KAAUL,EACdK,GAAWA,EAAOC,qBACvBD,EAAOC,oBAAoB,QAASF,EAExC,CAEA,IAAK,MAAMC,KAAUL,EACnB,GAAKK,GAAWA,EAAOE,iBAAvB,CACA,GAAIF,EAAOG,QAAS,CAClBJ,IACA,KACF,CACAC,EAAOE,iBAAiB,QAASH,EALQ,CAQ3C,OAAOH,EAAWI,MACpB,CAEA1gB,EAAOnF,QAAUulB,EACjBpgB,EAAOnF,QAAQulB,UAAYA,sCC3B3B,MAAM,cAAE5V,GAAkB,EAAQ,OAC5BhI,EAAc,EAAQ,OACtBse,EAAW,EAAQ,QACnB,aAAEve,GAAiB,EAAQ,QAC3B,SAAEuM,GAAa,EAAQ,MACvBiS,EAAc,EAAQ,OACtBtc,EAAQ,EAAQ,OAChBuc,EAAiB,EAAQ,OAGzBC,EAAiB,YAEjBC,EAAOnpB,OAAO,OACdopB,EAAcppB,OAAO,cACrBqpB,EAAYrpB,OAAO,YACnBspB,EAAWtpB,OAAO,WAClBupB,EAASvpB,OAAO,SAChBwpB,EAAcxpB,OAAO,cACrB4K,EAAW5K,OAAO,WAExB,MAAMypB,UAAqBhX,EACzBnJ,YAAaogB,EAAUle,EAASme,GAE9B,GAAuB,mBAAZne,GAAuC,mBAANme,EAC1C,MAAM,IAAIlf,EAAY,uDAAwD,CAC5EgB,KAAM,iBAIV,MAAM,OAAEsM,EAAM,QAAE6R,KAAYhX,GAAYpH,GAAW,CAAC,EAUpD,GARAkF,MAAM,CACJ8C,UAAW,CAAEpO,MAAM,GACnB8N,WAAW,EACXkB,iBAAiB,EACjBC,eAAe,EACflE,MAAM,GACLyC,GAEqB,iBAAb8W,EACT,MAAM,IAAI3nB,MAAM,mDAIlByH,KAAK6f,GAAaK,EAClBlgB,KAAK4f,GAAyB,MAAVrR,EAAiBmR,EAAiBnR,EACtDvO,KAAK8f,GAAYrL,SAAS2L,GAAW,EAAG,IACxCpgB,KAAK2f,GAAQ,IACf,CAEIO,eACF,OAAOlgB,KAAK6f,EACd,CAEIQ,iBACF,OAAOrgB,KAAK4f,EACd,CAEIQ,cACF,OAAOpgB,KAAK8f,EACd,CAGIpe,SACF,OAAO1B,KAAK2f,EACd,CAEI5c,WACF,MAAO,eACT,CAEAiI,MAAOhJ,EAASqB,GACd,MAAMid,EAAMC,UAAUnW,KAAKpK,KAAK4f,GAAe5f,KAAK6f,GAAY7f,KAAK8f,IAErEQ,EAAIE,QAAU,WACZnd,EAASid,EAAI7J,OAAS,IAAIle,MAAM,iBAClC,EAEA+nB,EAAIG,UAAY,KACdzgB,KAAK2f,GAAQW,EAAIzR,OACjBxL,GAAS,EAGXid,EAAII,gBAAmBC,IACrB,MAAMjf,EAAKif,EAAG/Z,OAAOiI,OAEhBnN,EAAGkf,iBAAiBC,SAAS7gB,KAAK6f,KACrCne,EAAGof,kBAAkB9gB,KAAK6f,GAC5B,CAEJ,CAEA,CAACE,GAASgB,GAER,OADoB/gB,KAAK2f,GAAMqB,YAAY,CAAChhB,KAAK6f,IAAakB,GAC3CE,YAAYjhB,KAAK6f,GACtC,CAEA,CAACG,GAAckB,EAAS7d,GACtB,MAAM2d,EAAcE,EAAQF,YAI5BA,EAAYG,QAAU,WACpB9d,EAAS2d,EAAYvK,OAAS,IAAIle,MAAM,mBAC1C,EAEAyoB,EAAYI,WAAa,WACvB/d,EAAS,KAAM6d,EAAQrS,OACzB,CACF,CAEApD,KAAM1J,EAAKC,EAASqB,GAClB,MAAMge,EAAQrhB,KAAK+f,GAAQ,YAC3B,IAAIO,EAEJ,IACEA,EAAMe,EAAM1gB,IAAIoB,EAClB,CAAE,MAAOG,GACP,OAAOlC,KAAK6B,SAASwB,EAAUnB,EACjC,CAEAlC,KAAKggB,GAAaM,GAAK,SAAUpe,EAAKrD,GACpC,OAAIqD,EAAYmB,EAASnB,QAEX2D,IAAVhH,EACKwE,EAAS,IAAIpC,EAAY,kBAAmB,CACjDgB,KAAM,0BAIVoB,EAAS,KAAMmc,EAAY3gB,GAC7B,GACF,CAEAgN,SAAU1E,EAAMnF,EAASqB,GACvB,MAAMge,EAAQrhB,KAAK+f,GAAQ,YACrBuB,EAAQna,EAAK4I,KAAKhO,GAAS4D,IAC/B,IAAIub,EAEJ,IACEA,EAAUG,EAAM1gB,IAAIoB,EACtB,CAAE,MAAOG,GACP,OAAOyD,EAAKzD,EACd,CAEAgf,EAAQT,UAAY,KAClB,MAAM5hB,EAAQqiB,EAAQrS,OACtBlJ,EAAK,UAAgBE,IAAVhH,EAAsBA,EAAQ2gB,EAAY3gB,GAAM,EAG7DqiB,EAAQV,QAAWG,IACjBA,EAAGY,kBACH5b,EAAKub,EAAQzK,MAAK,CACpB,IAGF8I,EAAS+B,EAAO,GAAIje,EACtB,CAEAJ,KAAMlB,EAAKC,EAASqB,GAClB,MAAMge,EAAQrhB,KAAK+f,GAAQ,aAC3B,IAAIO,EAEJ,IACEA,EAAMe,EAAMtU,OAAOhL,EACrB,CAAE,MAAOG,GACP,OAAOlC,KAAK6B,SAASwB,EAAUnB,EACjC,CAEAlC,KAAKggB,GAAaM,EAAKjd,EACzB,CAEAP,KAAMf,EAAKlD,EAAOmD,EAASqB,GACzB,MAAMge,EAAQrhB,KAAK+f,GAAQ,aAC3B,IAAIO,EAEJ,IAGEA,EAAMe,EAAMvf,IAAIjD,EAAOkD,EACzB,CAAE,MAAOG,GACP,OAAOlC,KAAK6B,SAASwB,EAAUnB,EACjC,CAEAlC,KAAKggB,GAAaM,EAAKjd,EACzB,CAGAqJ,UAAW1K,GACT,OAAO,IAAIuL,EAASvN,KAAMA,KAAK6f,GAAY7d,EAC7C,CAEAqK,OAAQN,EAAY/J,EAASqB,GAC3B,MAAMge,EAAQrhB,KAAK+f,GAAQ,aACrBiB,EAAcK,EAAML,YAC1B,IACIvK,EADA+K,EAAQ,EAGZR,EAAYG,QAAU,WACpB9d,EAASoT,GAASuK,EAAYvK,OAAS,IAAIle,MAAM,mBACnD,EAEAyoB,EAAYI,WAAa,WACvB/d,GACF,EAGA,SAASoe,IACP,MAAMtV,EAAKJ,EAAWyV,KAChBzf,EAAMoK,EAAGpK,IAEf,IAAIue,EAEJ,IACEA,EAAkB,QAAZnU,EAAGpJ,KAAiBse,EAAMtU,OAAOhL,GAAOsf,EAAMvf,IAAIqK,EAAGtN,MAAOkD,EACpE,CAAE,MAAOG,GAGP,OAFAuU,EAAQvU,OACR8e,EAAY9oB,OAEd,CAEIspB,EAAQzV,EAAW9U,OACrBqpB,EAAIG,UAAYgB,EACuB,mBAAvBT,EAAYU,QAE5BV,EAAYU,QAEhB,CAEAD,EACF,CAEAte,OAAQnB,EAASqB,GACf,IAAIse,EACArB,EAEJ,IACEqB,EAAWlC,EAAezd,EAC5B,CAAE,MAAOuU,GAGP,OAAOvW,KAAK6B,SAASwB,EACvB,CAEA,GAAIrB,EAAQuD,OAAS,EAGnB,OAAOrC,EAAMlD,KAAMA,KAAK6f,GAAY8B,EAAU3f,EAASqB,GAGzD,IACE,MAAMge,EAAQrhB,KAAK+f,GAAQ,aAC3BO,EAAMqB,EAAWN,EAAMtU,OAAO4U,GAAYN,EAAMne,OAClD,CAAE,MAAOhB,GACP,OAAOlC,KAAK6B,SAASwB,EAAUnB,EACjC,CAEAlC,KAAKggB,GAAaM,EAAKjd,EACzB,CAEAI,OAAQJ,GACNrD,KAAK2f,GAAMrc,QACXtD,KAAK6B,SAASwB,EAChB,EAGF4c,EAAa2B,QAAU,SAAU1B,EAAU3R,EAAQlL,GAC3B,mBAAXkL,IACTlL,EAAWkL,EACXA,EAASmR,GAGXrc,EAAWrC,EAAaqC,EAAUjC,GAClC,MAAM8f,EAAUX,UAAUsB,eAAetT,EAAS2R,GAUlD,OARAgB,EAAQT,UAAY,WAClBpd,GACF,EAEA6d,EAAQV,QAAU,SAAUte,GAC1BmB,EAASnB,EACX,EAEOmB,EAASjC,EAClB,EAEA9H,EAAQ2mB,aAAeA,qCChSvB,MAAM,iBAAEhZ,GAAqB,EAAQ,OAC/BwY,EAAiB,EAAQ,OACzBD,EAAc,EAAQ,OAEtBsC,EAAStrB,OAAO,SAChBurB,EAAYvrB,OAAO,YACnBsS,EAAWtS,OAAO,WAClBwrB,EAAkBxrB,OAAO,kBACzByrB,EAAYzrB,OAAO,YACnBqpB,EAAYrpB,OAAO,YACnB0rB,EAAS1rB,OAAO,SAChBuO,EAAe,CAAC,EA2NtB,SAASod,EAAanB,GAEc,mBAAvBA,EAAYU,QACrBV,EAAYU,QAEhB,CAPApoB,EAAQiU,SAvNR,cAAuBtG,EACrBnH,YAAa4B,EAAIwe,EAAUle,GACzBkF,MAAMxF,EAAIM,GAEVhC,KAAK8hB,GAAU,GACf9hB,KAAK+hB,GAA4B,IAAf/hB,KAAKuF,MACvBvF,KAAK8I,GAAY9G,EACjBhC,KAAKgiB,GAAmB,IAAKhgB,GAC7BhC,KAAKiiB,QAAapc,EAClB7F,KAAK6f,GAAaK,EAClBlgB,KAAKkiB,IAAU,CACjB,CAIA9b,OAAQ3O,EAAMuK,EAASqB,GAGrB,GAFArD,KAAKkiB,IAAU,EAEXliB,KAAK+hB,GACP,OAAO/hB,KAAK6B,SAASwB,EAAU,KAAM,IAChC,GAAIrD,KAAK8hB,GAAQ7qB,OAAS,EAG/B,OADAQ,EAAOwB,KAAKkN,IAAI1O,EAAMuI,KAAK8hB,GAAQ7qB,QAC5B+I,KAAK6B,SAASwB,EAAU,KAAMrD,KAAK8hB,GAAQM,OAAO,EAAG3qB,IAc9D,IAAIkqB,OAVoB9b,IAApB7F,KAAKiiB,KACHjiB,KAAK8I,GAAUsH,SACjBpQ,KAAKgiB,GAAiB7S,GAAKnP,KAAKiiB,GAChCjiB,KAAKgiB,GAAiB9S,SAAMrJ,IAE5B7F,KAAKgiB,GAAiB/S,GAAKjP,KAAKiiB,GAChCjiB,KAAKgiB,GAAiBhT,SAAMnJ,IAMhC,IACE8b,EAAWlC,EAAezf,KAAKgiB,GACjC,CAAE,MAAO7B,GAIP,OADAngB,KAAK+hB,IAAa,EACX/hB,KAAK6B,SAASwB,EAAU,KAAM,GACvC,CAEA,MAAM2d,EAAchhB,KAAK0B,GAAGA,GAAGsf,YAAY,CAAChhB,KAAK6f,IAAa,YACxDwB,EAAQL,EAAYC,YAAYjhB,KAAK6f,IACrCvY,EAAU,GAEhB,GAAKtH,KAAK8I,GAAUsH,QAsDb,CAKLiR,GAFgBrhB,KAAK8I,GAAUnN,QAAU0lB,EAAMgB,cAAgB,gBAAkB,cAEnEV,EAAU,QAAQlB,UAAaE,IAC3C,MAAM2B,EAAS3B,EAAG/Z,OAAOiI,OAEzB,GAAIyT,EAAQ,CACV,MAAM,IAAEvgB,EAAG,MAAElD,GAAUyjB,EACvBtiB,KAAKiiB,GAAalgB,EAElBuF,EAAQ5P,KAAK,CACXsI,KAAK8I,GAAU3B,WAAgBtB,IAAR9D,EAAoByd,EAAYzd,QAAO8D,EAC9D7F,KAAK8I,GAAUnN,aAAoBkK,IAAVhH,EAAsB2gB,EAAY3gB,QAASgH,IAGlEyB,EAAQrQ,OAASQ,EACnB6qB,EAAOC,WAEPJ,EAAYnB,EAEhB,MACEhhB,KAAK+hB,IAAa,CACpB,CAEJ,KAhF6B,CAC3B,IAAI5a,EACAxL,EAEJ,MAAM6mB,EAAW,KAEf,QAAa3c,IAATsB,QAAiCtB,IAAXlK,EAAsB,OAEhD,MAAM1E,EAASgC,KAAKue,IAAIrQ,EAAKlQ,OAAQ0E,EAAO1E,QAE7B,IAAXA,GAAgBQ,IAAS+N,IAC3BxF,KAAK+hB,IAAa,EAElB/hB,KAAKiiB,GAAa9a,EAAKlQ,EAAS,GAIlCqQ,EAAQrQ,OAASA,EAGjB,IAAK,IAAIqE,EAAI,EAAGA,EAAIrE,EAAQqE,IAAK,CAC/B,MAAMyG,EAAMoF,EAAK7L,GACXuD,EAAQlD,EAAOL,GAErBgM,EAAQhM,GAAK,CACX0E,KAAK8I,GAAU3B,WAAgBtB,IAAR9D,EAAoByd,EAAYzd,QAAO8D,EAC9D7F,KAAK8I,GAAUnN,aAAoBkK,IAAVhH,EAAsB2gB,EAAY3gB,QAASgH,EAExE,CAEAsc,EAAYnB,EAAW,EAKrBhhB,KAAK8I,GAAU3B,MAAQ1P,EAAO+N,IAChC6b,EAAMoB,WAAWd,EAAUlqB,EAAO+N,IAAW/N,OAAOoO,GAAW4a,UAAaE,IAC1ExZ,EAAOwZ,EAAG/Z,OAAOiI,OACjB2T,GAAS,GAGXrb,EAAO,GACPnH,KAAK6B,SAAS2gB,IAGZxiB,KAAK8I,GAAUnN,OACjB0lB,EAAMqB,OAAOf,EAAUlqB,EAAO+N,IAAW/N,OAAOoO,GAAW4a,UAAaE,IACtEhlB,EAASglB,EAAG/Z,OAAOiI,OACnB2T,GAAS,GAGX7mB,EAAS,GACTqE,KAAK6B,SAAS2gB,GAElB,CA6BAxB,EAAYG,QAAU,KACpB9d,EAAS2d,EAAYvK,OAAS,IAAIle,MAAM,oBACxC8K,EAAW,MAGb2d,EAAYI,WAAa,KACvB/d,EAAS,KAAMiE,GACfjE,EAAW,KAEf,CAEA4C,MAAO5C,GACL,GAAIrD,KAAK8hB,GAAQ7qB,OAAS,EAAG,CAC3B,MAAO8K,EAAKlD,GAASmB,KAAK8hB,GAAQ1iB,QAClCY,KAAK6B,SAASwB,EAAU,KAAMtB,EAAKlD,EACrC,MAAO,GAAImB,KAAK+hB,GACd/hB,KAAK6B,SAASwB,OACT,CACL,IAAI5L,EAAOwB,KAAKkN,IAAI,IAAKnG,KAAKuF,MAAQvF,KAAK0F,OAEvC1F,KAAKkiB,KAEPliB,KAAKkiB,IAAU,EACfzqB,EAAO,GAGTuI,KAAKoG,OAAO3O,EAAMsN,GAAc,CAAC7C,EAAKoF,KACpC,GAAIpF,EAAK,OAAOmB,EAASnB,GACzBlC,KAAK8hB,GAAUxa,EACftH,KAAKiG,MAAM5C,EAAQ,GAEvB,CACF,CAEAmD,KAAMxE,EAASqB,GACbrD,KAAKkiB,IAAU,EAGf,MAAM3S,EAAQvP,KAAK8hB,GAAQM,OAAO,EAAGpiB,KAAK8hB,GAAQ7qB,QAC5CQ,EAAOuI,KAAKuF,MAAQvF,KAAK0F,MAAQ6J,EAAMtY,OAE7C,GAAIQ,GAAQ,EACV,OAAOuI,KAAK6B,SAASwB,EAAU,KAAMkM,GAGvCvP,KAAKoG,OAAO3O,EAAMsN,GAAc,CAAC7C,EAAKoF,KACpC,GAAIpF,EAAK,OAAOmB,EAASnB,GACrBqN,EAAMtY,OAAS,IAAGqQ,EAAUiI,EAAMT,OAAOxH,IAC7CjE,EAAS,KAAMiE,EAAO,GAE1B,CAEAR,MAAOF,EAAQ5E,GASb,IAAI2f,EARJ3hB,KAAKkiB,IAAU,EACfliB,KAAK8hB,GAAU,GACf9hB,KAAK+hB,IAAa,EAClB/hB,KAAKiiB,QAAapc,EAGlB7F,KAAKgiB,GAAmB,IAAKhiB,KAAK8I,IAIlC,IACE6Y,EAAWlC,EAAezf,KAAK8I,GACjC,CAAE,MAAOqX,GAEP,YADAngB,KAAK+hB,IAAa,EAEpB,CAEiB,OAAbJ,GAAsBA,EAAS9J,SAASjR,GAEjC5G,KAAK8I,GAAUsH,QACxBpQ,KAAKgiB,GAAiB9S,IAAMtI,EAE5B5G,KAAKgiB,GAAiBhT,IAAMpI,EAJ5B5G,KAAK+hB,IAAa,CAMtB,mCCjOFtjB,EAAOnF,QAAU,SAAgBoI,EAAIwe,EAAUyB,EAAU3f,EAASqB,GAChE,GAAsB,IAAlBrB,EAAQuD,MAAa,OAAO7D,EAAGG,SAASwB,GAE5C,MAAM2d,EAActf,EAAGA,GAAGsf,YAAY,CAACd,GAAW,aAC5CmB,EAAQL,EAAYC,YAAYf,GACtC,IAAIxa,EAAQ,EAEZsb,EAAYI,WAAa,WACvB/d,GACF,EAEA2d,EAAYG,QAAU,WACpB9d,EAAS2d,EAAYvK,OAAS,IAAIle,MAAM,mBAC1C,EAIA,MAAMoqB,EAAStB,EAAMgB,cAAgB,gBAAkB,aACjDO,EAAY5gB,EAAQoO,QAAU,OAAS,OAE7CiR,EAAMsB,GAAQhB,EAAUiB,GAAWnC,UAAY,SAAUE,GACvD,MAAM2B,EAAS3B,EAAG/Z,OAAOiI,OAErByT,IAEFjB,EAAMtU,OAAOuV,EAAOvgB,KAAK0e,UAAY,YAC/Bze,EAAQuD,OAAS,KAAOG,EAAQ1D,EAAQuD,QAC1C+c,EAAOC,UAEX,EAEJ,CACF,kCChCA,MAAM1U,EAAc,IAAIC,YAExBrP,EAAOnF,QAAU,SAAU8Y,GACzB,OAAIA,aAAgB5X,WACX4X,EACEA,aAAgBf,YAClB,IAAI7W,WAAW4X,GAGfvE,EAAYjL,OAAOwP,EAE9B,kCCTA3T,EAAOnF,QAAU,SAAyB0I,GACxC,MAAM6gB,OAAwBhd,IAAhB7D,EAAQgN,IAAoBhN,EAAQgN,SAAqBnJ,IAAf7D,EAAQiN,GAAmBjN,EAAQiN,QAAKpJ,EAC1Fid,OAAwBjd,IAAhB7D,EAAQkN,IAAoBlN,EAAQkN,SAAqBrJ,IAAf7D,EAAQmN,GAAmBnN,EAAQmN,QAAKtJ,EAC1Fkd,OAAiCld,IAAhB7D,EAAQgN,IACzBgU,OAAiCnd,IAAhB7D,EAAQkN,IAE/B,YAAcrJ,IAAVgd,QAAiChd,IAAVid,EAClBG,YAAYC,MAAML,EAAOC,EAAOC,EAAgBC,QACpCnd,IAAVgd,EACFI,YAAYE,WAAWN,EAAOE,QAClBld,IAAVid,EACFG,YAAYzU,WAAWsU,EAAOE,GAE9B,IAEX,qDCTI3S,EAAS,EAAQ,OACjBC,EAAU,EAAQ,OAClBC,EACiB,mBAAX/Z,QAAkD,mBAAlBA,OAAY,IAChDA,OAAY,IAAE,8BACd,KAEN8C,EAAQkU,OAASA,EACjBlU,EAAQkX,WA2TR,SAAqBvZ,IACdA,GAAUA,IACbA,EAAS,GAEX,OAAOuW,EAAOhU,OAAOvC,EACvB,EA/TAqC,EAAQmX,kBAAoB,GAE5B,IAAIC,EAAe,WAwDnB,SAASC,EAAc1Z,GACrB,GAAIA,EAASyZ,EACX,MAAM,IAAIE,WAAW,cAAgB3Z,EAAS,kCAGhD,IAAI8D,EAAM,IAAIP,WAAWvD,GAEzB,OADAyH,OAAOmS,eAAe9V,EAAKyS,EAAO3U,WAC3BkC,CACT,CAYA,SAASyS,EAAQsD,EAAKC,EAAkB9Z,GAEtC,GAAmB,iBAAR6Z,EAAkB,CAC3B,GAAgC,iBAArBC,EACT,MAAM,IAAIpP,UACR,sEAGJ,OAAOqP,EAAYF,EACrB,CACA,OAAOxB,EAAKwB,EAAKC,EAAkB9Z,EACrC,CAIA,SAASqY,EAAMzQ,EAAOkS,EAAkB9Z,GACtC,GAAqB,iBAAV4H,EACT,OAuHJ,SAAqBoS,EAAQxG,GACH,iBAAbA,GAAsC,KAAbA,IAClCA,EAAW,QAGb,IAAK+C,EAAO0D,WAAWzG,GACrB,MAAM,IAAI9I,UAAU,qBAAuB8I,GAG7C,IAAIxT,EAAwC,EAA/B2X,EAAWqC,EAAQxG,GAC5B1P,EAAM4V,EAAa1Z,GAEnBka,EAASpW,EAAIqI,MAAM6N,EAAQxG,GAE3B0G,IAAWla,IAIb8D,EAAMA,EAAIjC,MAAM,EAAGqY,IAGrB,OAAOpW,CACT,CA7IWqW,CAAWvS,EAAOkS,GAG3B,GAAIM,YAAYC,OAAOzS,GACrB,OAoJJ,SAAwB0S,GACtB,GAAIC,EAAWD,EAAW/W,YAAa,CACrC,IAAIiX,EAAO,IAAIjX,WAAW+W,GAC1B,OAAOG,EAAgBD,EAAK9a,OAAQ8a,EAAKE,WAAYF,EAAK7C,WAC5D,CACA,OAAOgD,EAAcL,EACvB,CA1JWM,CAAchT,GAGvB,GAAa,MAATA,EACF,MAAM,IAAI8C,UACR,yHACiD9C,GAIrD,GAAI2S,EAAW3S,EAAOwS,cACjBxS,GAAS2S,EAAW3S,EAAMlI,OAAQ0a,aACrC,OAAOK,EAAgB7S,EAAOkS,EAAkB9Z,GAGlD,GAAiC,oBAAtB6a,oBACNN,EAAW3S,EAAOiT,oBAClBjT,GAAS2S,EAAW3S,EAAMlI,OAAQmb,oBACrC,OAAOJ,EAAgB7S,EAAOkS,EAAkB9Z,GAGlD,GAAqB,iBAAV4H,EACT,MAAM,IAAI8C,UACR,yEAIJ,IAAI5B,EAAUlB,EAAMkB,SAAWlB,EAAMkB,UACrC,GAAe,MAAXA,GAAmBA,IAAYlB,EACjC,OAAO2O,EAAO8B,KAAKvP,EAASgR,EAAkB9Z,GAGhD,IAAI8a,EAoJN,SAAqBC,GACnB,GAAIxE,EAAOyE,SAASD,GAAM,CACxB,IAAIhW,EAA4B,EAAtBkW,EAAQF,EAAI/a,QAClB8D,EAAM4V,EAAa3U,GAEvB,OAAmB,IAAfjB,EAAI9D,QAIR+a,EAAIP,KAAK1W,EAAK,EAAG,EAAGiB,GAHXjB,CAKX,CAEA,QAAmB8K,IAAfmM,EAAI/a,OACN,MAA0B,iBAAf+a,EAAI/a,QAAuBkb,EAAYH,EAAI/a,QAC7C0Z,EAAa,GAEfiB,EAAcI,GAGvB,GAAiB,WAAbA,EAAIjP,MAAqBnK,MAAM+S,QAAQqG,EAAII,MAC7C,OAAOR,EAAcI,EAAII,KAE7B,CA3KUC,CAAWxT,GACnB,GAAIkT,EAAG,OAAOA,EAEd,GAAsB,oBAAXvb,QAAgD,MAAtBA,OAAO8b,aACH,mBAA9BzT,EAAMrI,OAAO8b,aACtB,OAAO9E,EAAO8B,KACZzQ,EAAMrI,OAAO8b,aAAa,UAAWvB,EAAkB9Z,GAI3D,MAAM,IAAI0K,UACR,yHACiD9C,EAErD,CAmBA,SAAS0T,EAAY9a,GACnB,GAAoB,iBAATA,EACT,MAAM,IAAIkK,UAAU,0CACf,GAAIlK,EAAO,EAChB,MAAM,IAAImZ,WAAW,cAAgBnZ,EAAO,iCAEhD,CA0BA,SAASuZ,EAAavZ,GAEpB,OADA8a,EAAW9a,GACJkZ,EAAalZ,EAAO,EAAI,EAAoB,EAAhBya,EAAQza,GAC7C,CAuCA,SAASma,EAAeY,GAGtB,IAFA,IAAIvb,EAASub,EAAMvb,OAAS,EAAI,EAA4B,EAAxBib,EAAQM,EAAMvb,QAC9C8D,EAAM4V,EAAa1Z,GACdqE,EAAI,EAAGA,EAAIrE,EAAQqE,GAAK,EAC/BP,EAAIO,GAAgB,IAAXkX,EAAMlX,GAEjB,OAAOP,CACT,CAUA,SAAS2W,EAAiBc,EAAOb,EAAY1a,GAC3C,GAAI0a,EAAa,GAAKa,EAAM5D,WAAa+C,EACvC,MAAM,IAAIf,WAAW,wCAGvB,GAAI4B,EAAM5D,WAAa+C,GAAc1a,GAAU,GAC7C,MAAM,IAAI2Z,WAAW,wCAGvB,IAAI7V,EAYJ,OAVEA,OADiB8K,IAAf8L,QAAuC9L,IAAX5O,EACxB,IAAIuD,WAAWgY,QACD3M,IAAX5O,EACH,IAAIuD,WAAWgY,EAAOb,GAEtB,IAAInX,WAAWgY,EAAOb,EAAY1a,GAI1CyH,OAAOmS,eAAe9V,EAAKyS,EAAO3U,WAE3BkC,CACT,CA2BA,SAASmX,EAASjb,GAGhB,GAAIA,GAAUyZ,EACZ,MAAM,IAAIE,WAAW,0DACaF,EAAa+B,SAAS,IAAM,UAEhE,OAAgB,EAATxb,CACT,CAqGA,SAAS2X,EAAYqC,EAAQxG,GAC3B,GAAI+C,EAAOyE,SAAShB,GAClB,OAAOA,EAAOha,OAEhB,GAAIoa,YAAYC,OAAOL,IAAWO,EAAWP,EAAQI,aACnD,OAAOJ,EAAOrC,WAEhB,GAAsB,iBAAXqC,EACT,MAAM,IAAItP,UACR,kGAC0BsP,GAI9B,IAAIjV,EAAMiV,EAAOha,OACbyb,EAAa1Z,UAAU/B,OAAS,IAAsB,IAAjB+B,UAAU,GACnD,IAAK0Z,GAAqB,IAAR1W,EAAW,OAAO,EAIpC,IADA,IAAI2W,GAAc,IAEhB,OAAQlI,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAOzO,EACT,IAAK,OACL,IAAK,QACH,OAAO4W,EAAY3B,GAAQha,OAC7B,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAa,EAAN+E,EACT,IAAK,MACH,OAAOA,IAAQ,EACjB,IAAK,SACH,OAAO6W,EAAc5B,GAAQha,OAC/B,QACE,GAAI0b,EACF,OAAOD,GAAa,EAAIE,EAAY3B,GAAQha,OAE9CwT,GAAY,GAAKA,GAAUqI,cAC3BH,GAAc,EAGtB,CAGA,SAASI,EAActI,EAAUkF,EAAOnI,GACtC,IAAImL,GAAc,EAclB,SALc9M,IAAV8J,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQ3P,KAAK/I,OACf,MAAO,GAOT,SAJY4O,IAAR2B,GAAqBA,EAAMxH,KAAK/I,UAClCuQ,EAAMxH,KAAK/I,QAGTuQ,GAAO,EACT,MAAO,GAOT,IAHAA,KAAS,KACTmI,KAAW,GAGT,MAAO,GAKT,IAFKlF,IAAUA,EAAW,UAGxB,OAAQA,GACN,IAAK,MACH,OAAOuI,EAAShT,KAAM2P,EAAOnI,GAE/B,IAAK,OACL,IAAK,QACH,OAAOyL,EAAUjT,KAAM2P,EAAOnI,GAEhC,IAAK,QACH,OAAO0L,EAAWlT,KAAM2P,EAAOnI,GAEjC,IAAK,SACL,IAAK,SACH,OAAO2L,EAAYnT,KAAM2P,EAAOnI,GAElC,IAAK,SACH,OAAO4L,EAAYpT,KAAM2P,EAAOnI,GAElC,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO6L,EAAarT,KAAM2P,EAAOnI,GAEnC,QACE,GAAImL,EAAa,MAAM,IAAIhR,UAAU,qBAAuB8I,GAC5DA,GAAYA,EAAW,IAAIqI,cAC3BH,GAAc,EAGtB,CAUA,SAASW,EAAMvB,EAAGtZ,EAAG8a,GACnB,IAAIjY,EAAIyW,EAAEtZ,GACVsZ,EAAEtZ,GAAKsZ,EAAEwB,GACTxB,EAAEwB,GAAKjY,CACT,CA2IA,SAASkY,EAAsB7c,EAAQ8c,EAAK9B,EAAYlH,EAAUiJ,GAEhE,GAAsB,IAAlB/c,EAAOM,OAAc,OAAQ,EAmBjC,GAhB0B,iBAAf0a,GACTlH,EAAWkH,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAGZQ,EADJR,GAAcA,KAGZA,EAAa+B,EAAM,EAAK/c,EAAOM,OAAS,GAItC0a,EAAa,IAAGA,EAAahb,EAAOM,OAAS0a,GAC7CA,GAAchb,EAAOM,OAAQ,CAC/B,GAAIyc,EAAK,OAAQ,EACZ/B,EAAahb,EAAOM,OAAS,CACpC,MAAO,GAAI0a,EAAa,EAAG,CACzB,IAAI+B,EACC,OAAQ,EADJ/B,EAAa,CAExB,CAQA,GALmB,iBAAR8B,IACTA,EAAMjG,EAAO8B,KAAKmE,EAAKhJ,IAIrB+C,EAAOyE,SAASwB,GAElB,OAAmB,IAAfA,EAAIxc,QACE,EAEH0c,EAAahd,EAAQ8c,EAAK9B,EAAYlH,EAAUiJ,GAClD,GAAmB,iBAARD,EAEhB,OADAA,GAAY,IACgC,mBAAjCjZ,WAAW3B,UAAU0G,QAC1BmU,EACKlZ,WAAW3B,UAAU0G,QAAQxG,KAAKpC,EAAQ8c,EAAK9B,GAE/CnX,WAAW3B,UAAU+a,YAAY7a,KAAKpC,EAAQ8c,EAAK9B,GAGvDgC,EAAahd,EAAQ,CAAC8c,GAAM9B,EAAYlH,EAAUiJ,GAG3D,MAAM,IAAI/R,UAAU,uCACtB,CAEA,SAASgS,EAAc9Y,EAAK4Y,EAAK9B,EAAYlH,EAAUiJ,GACrD,IA0BIpY,EA1BAuY,EAAY,EACZC,EAAYjZ,EAAI5D,OAChB8c,EAAYN,EAAIxc,OAEpB,QAAiB4O,IAAb4E,IAEe,UADjBA,EAAWtT,OAAOsT,GAAUqI,gBACY,UAAbrI,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAI5P,EAAI5D,OAAS,GAAKwc,EAAIxc,OAAS,EACjC,OAAQ,EAEV4c,EAAY,EACZC,GAAa,EACbC,GAAa,EACbpC,GAAc,CAChB,CAGF,SAASqC,EAAMjZ,EAAKO,GAClB,OAAkB,IAAduY,EACK9Y,EAAIO,GAEJP,EAAIkZ,aAAa3Y,EAAIuY,EAEhC,CAGA,GAAIH,EAAK,CACP,IAAIQ,GAAc,EAClB,IAAK5Y,EAAIqW,EAAYrW,EAAIwY,EAAWxY,IAClC,GAAI0Y,EAAKnZ,EAAKS,KAAO0Y,EAAKP,GAAqB,IAAhBS,EAAoB,EAAI5Y,EAAI4Y,IAEzD,IADoB,IAAhBA,IAAmBA,EAAa5Y,GAChCA,EAAI4Y,EAAa,IAAMH,EAAW,OAAOG,EAAaL,OAEtC,IAAhBK,IAAmB5Y,GAAKA,EAAI4Y,GAChCA,GAAc,CAGpB,MAEE,IADIvC,EAAaoC,EAAYD,IAAWnC,EAAamC,EAAYC,GAC5DzY,EAAIqW,EAAYrW,GAAK,EAAGA,IAAK,CAEhC,IADA,IAAI6Y,GAAQ,EACHC,EAAI,EAAGA,EAAIL,EAAWK,IAC7B,GAAIJ,EAAKnZ,EAAKS,EAAI8Y,KAAOJ,EAAKP,EAAKW,GAAI,CACrCD,GAAQ,EACR,KACF,CAEF,GAAIA,EAAO,OAAO7Y,CACpB,CAGF,OAAQ,CACV,CAcA,SAAS+Y,EAAUtZ,EAAKkW,EAAQ/Z,EAAQD,GACtCC,EAASmO,OAAOnO,IAAW,EAC3B,IAAIod,EAAYvZ,EAAI9D,OAASC,EACxBD,GAGHA,EAASoO,OAAOpO,IACHqd,IACXrd,EAASqd,GAJXrd,EAASqd,EAQX,IAAIC,EAAStD,EAAOha,OAEhBA,EAASsd,EAAS,IACpBtd,EAASsd,EAAS,GAEpB,IAAK,IAAIjZ,EAAI,EAAGA,EAAIrE,IAAUqE,EAAG,CAC/B,IAAIkZ,EAASC,SAASxD,EAAOyD,OAAW,EAAJpZ,EAAO,GAAI,IAC/C,GAAI6W,EAAYqC,GAAS,OAAOlZ,EAChCP,EAAI7D,EAASoE,GAAKkZ,CACpB,CACA,OAAOlZ,CACT,CAEA,SAASqZ,EAAW5Z,EAAKkW,EAAQ/Z,EAAQD,GACvC,OAAO2d,EAAWhC,EAAY3B,EAAQlW,EAAI9D,OAASC,GAAS6D,EAAK7D,EAAQD,EAC3E,CAEA,SAAS4d,EAAY9Z,EAAKkW,EAAQ/Z,EAAQD,GACxC,OAAO2d,EAk4BT,SAAuBvZ,GAErB,IADA,IAAIyZ,EAAY,GACPxZ,EAAI,EAAGA,EAAID,EAAIpE,SAAUqE,EAEhCwZ,EAAUpd,KAAyB,IAApB2D,EAAIG,WAAWF,IAEhC,OAAOwZ,CACT,CAz4BoBC,CAAa9D,GAASlW,EAAK7D,EAAQD,EACvD,CAEA,SAAS+d,EAAaja,EAAKkW,EAAQ/Z,EAAQD,GACzC,OAAO2d,EAAW/B,EAAc5B,GAASlW,EAAK7D,EAAQD,EACxD,CAEA,SAASge,EAAWla,EAAKkW,EAAQ/Z,EAAQD,GACvC,OAAO2d,EAm4BT,SAAyBvZ,EAAK6Z,GAG5B,IAFA,IAAIC,EAAGC,EAAIC,EACPP,EAAY,GACPxZ,EAAI,EAAGA,EAAID,EAAIpE,WACjBie,GAAS,GAAK,KADa5Z,EAIhC8Z,GADAD,EAAI9Z,EAAIG,WAAWF,KACT,EACV+Z,EAAKF,EAAI,IACTL,EAAUpd,KAAK2d,GACfP,EAAUpd,KAAK0d,GAGjB,OAAON,CACT,CAj5BoBQ,CAAerE,EAAQlW,EAAI9D,OAASC,GAAS6D,EAAK7D,EAAQD,EAC9E,CA8EA,SAASmc,EAAarY,EAAK4U,EAAOnI,GAChC,OAAc,IAAVmI,GAAenI,IAAQzM,EAAI9D,OACtBoZ,EAAOkF,cAAcxa,GAErBsV,EAAOkF,cAAcxa,EAAIjC,MAAM6W,EAAOnI,GAEjD,CAEA,SAASyL,EAAWlY,EAAK4U,EAAOnI,GAC9BA,EAAMvO,KAAKkN,IAAIpL,EAAI9D,OAAQuQ,GAI3B,IAHA,IAAIgO,EAAM,GAENla,EAAIqU,EACDrU,EAAIkM,GAAK,CACd,IAWMoO,EAAYC,EAAWC,EAAYC,EAXrCN,EAAY1a,EAAIO,GAChBoa,EAAY,KACZC,EAAoBF,EAAY,IAChC,EACCA,EAAY,IACT,EACCA,EAAY,IACT,EACA,EAEZ,GAAIna,EAAIqa,GAAoBnO,EAG1B,OAAQmO,GACN,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EAEyB,MAAV,KADlBG,EAAa7a,EAAIO,EAAI,OAEnBya,GAA6B,GAAZN,IAAqB,EAAoB,GAAbG,GACzB,MAClBF,EAAYK,GAGhB,MACF,KAAK,EACHH,EAAa7a,EAAIO,EAAI,GACrBua,EAAY9a,EAAIO,EAAI,GACQ,MAAV,IAAbsa,IAAsD,MAAV,IAAZC,KACnCE,GAA6B,GAAZN,IAAoB,IAAoB,GAAbG,IAAsB,EAAmB,GAAZC,GACrD,OAAUE,EAAgB,OAAUA,EAAgB,SACtEL,EAAYK,GAGhB,MACF,KAAK,EACHH,EAAa7a,EAAIO,EAAI,GACrBua,EAAY9a,EAAIO,EAAI,GACpBwa,EAAa/a,EAAIO,EAAI,GACO,MAAV,IAAbsa,IAAsD,MAAV,IAAZC,IAAsD,MAAV,IAAbC,KAClEC,GAA6B,GAAZN,IAAoB,IAAqB,GAAbG,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,GAClF,OAAUC,EAAgB,UAC5CL,EAAYK,GAMJ,OAAdL,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACbF,EAAI9d,KAAKge,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBF,EAAI9d,KAAKge,GACTpa,GAAKqa,CACP,CAEA,OAQF,SAAgCK,GAC9B,IAAIha,EAAMga,EAAW/e,OACrB,GAAI+E,GAAOia,EACT,OAAO9e,OAAOC,aAAaC,MAAMF,OAAQ6e,GAI3C,IAAIR,EAAM,GACNla,EAAI,EACR,KAAOA,EAAIU,GACTwZ,GAAOre,OAAOC,aAAaC,MACzBF,OACA6e,EAAWld,MAAMwC,EAAGA,GAAK2a,IAG7B,OAAOT,CACT,CAxBSU,CAAsBV,EAC/B,CA3+BAlc,EAAQ6c,WAAazF,EAgBrBlD,EAAO4I,oBAUP,WAEE,IACE,IAAIvb,EAAM,IAAIL,WAAW,GACrB6b,EAAQ,CAAEC,IAAK,WAAc,OAAO,EAAG,GAG3C,OAFA5X,OAAOmS,eAAewF,EAAO7b,WAAW3B,WACxC6F,OAAOmS,eAAehW,EAAKwb,GACN,KAAdxb,EAAIyb,KACb,CAAE,MAAOC,GACP,OAAO,CACT,CACF,CArB6BC,GAExBhJ,EAAO4I,0BAA0C,IAAZ1d,GACb,mBAAlBA,EAAQ+d,OACjB/d,EAAQ+d,MACN,iJAkBJ/X,OAAO2B,eAAemN,EAAO3U,UAAW,SAAU,CAChD+H,YAAY,EACZD,IAAK,WACH,GAAK6M,EAAOyE,SAASjS,MACrB,OAAOA,KAAKrJ,MACd,IAGF+H,OAAO2B,eAAemN,EAAO3U,UAAW,SAAU,CAChD+H,YAAY,EACZD,IAAK,WACH,GAAK6M,EAAOyE,SAASjS,MACrB,OAAOA,KAAK2R,UACd,IAoCFnE,EAAOkJ,SAAW,KAgElBlJ,EAAO8B,KAAO,SAAUzQ,EAAOkS,EAAkB9Z,GAC/C,OAAOqY,EAAKzQ,EAAOkS,EAAkB9Z,EACvC,EAIAyH,OAAOmS,eAAerD,EAAO3U,UAAW2B,WAAW3B,WACnD6F,OAAOmS,eAAerD,EAAQhT,YA8B9BgT,EAAOhU,MAAQ,SAAU/B,EAAMqU,EAAMrB,GACnC,OArBF,SAAgBhT,EAAMqU,EAAMrB,GAE1B,OADA8H,EAAW9a,GACPA,GAAQ,EACHkZ,EAAalZ,QAEToO,IAATiG,EAIyB,iBAAbrB,EACVkG,EAAalZ,GAAMqU,KAAKA,EAAMrB,GAC9BkG,EAAalZ,GAAMqU,KAAKA,GAEvB6E,EAAalZ,EACtB,CAOS+B,CAAM/B,EAAMqU,EAAMrB,EAC3B,EAUA+C,EAAOwD,YAAc,SAAUvZ,GAC7B,OAAOuZ,EAAYvZ,EACrB,EAIA+V,EAAOmJ,gBAAkB,SAAUlf,GACjC,OAAOuZ,EAAYvZ,EACrB,EA6GA+V,EAAOyE,SAAW,SAAmBF,GACnC,OAAY,MAALA,IAA6B,IAAhBA,EAAE6E,WACpB7E,IAAMvE,EAAO3U,SACjB,EAEA2U,EAAOqJ,QAAU,SAAkBC,EAAG/E,GAGpC,GAFIP,EAAWsF,EAAGtc,cAAasc,EAAItJ,EAAO8B,KAAKwH,EAAGA,EAAE5f,OAAQ4f,EAAElI,aAC1D4C,EAAWO,EAAGvX,cAAauX,EAAIvE,EAAO8B,KAAKyC,EAAGA,EAAE7a,OAAQ6a,EAAEnD,cACzDpB,EAAOyE,SAAS6E,KAAOtJ,EAAOyE,SAASF,GAC1C,MAAM,IAAIpQ,UACR,yEAIJ,GAAImV,IAAM/E,EAAG,OAAO,EAKpB,IAHA,IAAI1D,EAAIyI,EAAE7f,OACN8f,EAAIhF,EAAE9a,OAEDqE,EAAI,EAAGU,EAAM/C,KAAKkN,IAAIkI,EAAG0I,GAAIzb,EAAIU,IAAOV,EAC/C,GAAIwb,EAAExb,KAAOyW,EAAEzW,GAAI,CACjB+S,EAAIyI,EAAExb,GACNyb,EAAIhF,EAAEzW,GACN,KACF,CAGF,OAAI+S,EAAI0I,GAAW,EACfA,EAAI1I,EAAU,EACX,CACT,EAEAb,EAAO0D,WAAa,SAAqBzG,GACvC,OAAQtT,OAAOsT,GAAUqI,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,EAEb,EAEAtF,EAAOsB,OAAS,SAAiBkI,EAAM/f,GACrC,IAAK2B,MAAM+S,QAAQqL,GACjB,MAAM,IAAIrV,UAAU,+CAGtB,GAAoB,IAAhBqV,EAAK/f,OACP,OAAOuW,EAAOhU,MAAM,GAGtB,IAAI8B,EACJ,QAAeuK,IAAX5O,EAEF,IADAA,EAAS,EACJqE,EAAI,EAAGA,EAAI0b,EAAK/f,SAAUqE,EAC7BrE,GAAU+f,EAAK1b,GAAGrE,OAItB,IAAIN,EAAS6W,EAAOwD,YAAY/Z,GAC5BggB,EAAM,EACV,IAAK3b,EAAI,EAAGA,EAAI0b,EAAK/f,SAAUqE,EAAG,CAChC,IAAIP,EAAMic,EAAK1b,GACf,GAAIkW,EAAWzW,EAAKP,YACdyc,EAAMlc,EAAI9D,OAASN,EAAOM,OAC5BuW,EAAO8B,KAAKvU,GAAK0W,KAAK9a,EAAQsgB,GAE9Bzc,WAAW3B,UAAUgD,IAAI9C,KACvBpC,EACAoE,EACAkc,OAGC,KAAKzJ,EAAOyE,SAASlX,GAC1B,MAAM,IAAI4G,UAAU,+CAEpB5G,EAAI0W,KAAK9a,EAAQsgB,EACnB,CACAA,GAAOlc,EAAI9D,MACb,CACA,OAAON,CACT,EAiDA6W,EAAOoB,WAAaA,EA8EpBpB,EAAO3U,UAAU+d,WAAY,EAQ7BpJ,EAAO3U,UAAUqe,OAAS,WACxB,IAAIlb,EAAMgE,KAAK/I,OACf,GAAI+E,EAAM,GAAM,EACd,MAAM,IAAI4U,WAAW,6CAEvB,IAAK,IAAItV,EAAI,EAAGA,EAAIU,EAAKV,GAAK,EAC5BgY,EAAKtT,KAAM1E,EAAGA,EAAI,GAEpB,OAAO0E,IACT,EAEAwN,EAAO3U,UAAUse,OAAS,WACxB,IAAInb,EAAMgE,KAAK/I,OACf,GAAI+E,EAAM,GAAM,EACd,MAAM,IAAI4U,WAAW,6CAEvB,IAAK,IAAItV,EAAI,EAAGA,EAAIU,EAAKV,GAAK,EAC5BgY,EAAKtT,KAAM1E,EAAGA,EAAI,GAClBgY,EAAKtT,KAAM1E,EAAI,EAAGA,EAAI,GAExB,OAAO0E,IACT,EAEAwN,EAAO3U,UAAUue,OAAS,WACxB,IAAIpb,EAAMgE,KAAK/I,OACf,GAAI+E,EAAM,GAAM,EACd,MAAM,IAAI4U,WAAW,6CAEvB,IAAK,IAAItV,EAAI,EAAGA,EAAIU,EAAKV,GAAK,EAC5BgY,EAAKtT,KAAM1E,EAAGA,EAAI,GAClBgY,EAAKtT,KAAM1E,EAAI,EAAGA,EAAI,GACtBgY,EAAKtT,KAAM1E,EAAI,EAAGA,EAAI,GACtBgY,EAAKtT,KAAM1E,EAAI,EAAGA,EAAI,GAExB,OAAO0E,IACT,EAEAwN,EAAO3U,UAAU4Z,SAAW,WAC1B,IAAIxb,EAAS+I,KAAK/I,OAClB,OAAe,IAAXA,EAAqB,GACA,IAArB+B,UAAU/B,OAAqBgc,EAAUjT,KAAM,EAAG/I,GAC/C8b,EAAa1b,MAAM2I,KAAMhH,UAClC,EAEAwU,EAAO3U,UAAUwe,eAAiB7J,EAAO3U,UAAU4Z,SAEnDjF,EAAO3U,UAAUye,OAAS,SAAiBvF,GACzC,IAAKvE,EAAOyE,SAASF,GAAI,MAAM,IAAIpQ,UAAU,6BAC7C,OAAI3B,OAAS+R,GACsB,IAA5BvE,EAAOqJ,QAAQ7W,KAAM+R,EAC9B,EAEAvE,EAAO3U,UAAU0e,QAAU,WACzB,IAAIlc,EAAM,GACNmc,EAAMle,EAAQmX,kBAGlB,OAFApV,EAAM2E,KAAKyS,SAAS,MAAO,EAAG+E,GAAK/W,QAAQ,UAAW,OAAOwN,OACzDjO,KAAK/I,OAASugB,IAAKnc,GAAO,SACvB,WAAaA,EAAM,GAC5B,EACIkV,IACF/C,EAAO3U,UAAU0X,GAAuB/C,EAAO3U,UAAU0e,SAG3D/J,EAAO3U,UAAUge,QAAU,SAAkBjQ,EAAQ+I,EAAOnI,EAAKiQ,EAAWC,GAI1E,GAHIlG,EAAW5K,EAAQpM,cACrBoM,EAAS4G,EAAO8B,KAAK1I,EAAQA,EAAO1P,OAAQ0P,EAAOgI,cAEhDpB,EAAOyE,SAASrL,GACnB,MAAM,IAAIjF,UACR,wFAC2BiF,GAiB/B,QAbcf,IAAV8J,IACFA,EAAQ,QAEE9J,IAAR2B,IACFA,EAAMZ,EAASA,EAAO3P,OAAS,QAEf4O,IAAd4R,IACFA,EAAY,QAEE5R,IAAZ6R,IACFA,EAAU1X,KAAK/I,QAGb0Y,EAAQ,GAAKnI,EAAMZ,EAAO3P,QAAUwgB,EAAY,GAAKC,EAAU1X,KAAK/I,OACtE,MAAM,IAAI2Z,WAAW,sBAGvB,GAAI6G,GAAaC,GAAW/H,GAASnI,EACnC,OAAO,EAET,GAAIiQ,GAAaC,EACf,OAAQ,EAEV,GAAI/H,GAASnI,EACX,OAAO,EAQT,GAAIxH,OAAS4G,EAAQ,OAAO,EAS5B,IAPA,IAAIyH,GAJJqJ,KAAa,IADbD,KAAe,GAMXV,GAPJvP,KAAS,IADTmI,KAAW,GASP3T,EAAM/C,KAAKkN,IAAIkI,EAAG0I,GAElBY,EAAW3X,KAAKlH,MAAM2e,EAAWC,GACjCE,EAAahR,EAAO9N,MAAM6W,EAAOnI,GAE5BlM,EAAI,EAAGA,EAAIU,IAAOV,EACzB,GAAIqc,EAASrc,KAAOsc,EAAWtc,GAAI,CACjC+S,EAAIsJ,EAASrc,GACbyb,EAAIa,EAAWtc,GACf,KACF,CAGF,OAAI+S,EAAI0I,GAAW,EACfA,EAAI1I,EAAU,EACX,CACT,EA2HAb,EAAO3U,UAAUgf,SAAW,SAAmBpE,EAAK9B,EAAYlH,GAC9D,OAAoD,IAA7CzK,KAAKT,QAAQkU,EAAK9B,EAAYlH,EACvC,EAEA+C,EAAO3U,UAAU0G,QAAU,SAAkBkU,EAAK9B,EAAYlH,GAC5D,OAAO+I,EAAqBxT,KAAMyT,EAAK9B,EAAYlH,GAAU,EAC/D,EAEA+C,EAAO3U,UAAU+a,YAAc,SAAsBH,EAAK9B,EAAYlH,GACpE,OAAO+I,EAAqBxT,KAAMyT,EAAK9B,EAAYlH,GAAU,EAC/D,EA2CA+C,EAAO3U,UAAUuK,MAAQ,SAAgB6N,EAAQ/Z,EAAQD,EAAQwT,GAE/D,QAAe5E,IAAX3O,EACFuT,EAAW,OACXxT,EAAS+I,KAAK/I,OACdC,EAAS,OAEJ,QAAe2O,IAAX5O,GAA0C,iBAAXC,EACxCuT,EAAWvT,EACXD,EAAS+I,KAAK/I,OACdC,EAAS,MAEJ,KAAI4gB,SAAS5gB,GAUlB,MAAM,IAAIqB,MACR,2EAVFrB,KAAoB,EAChB4gB,SAAS7gB,IACXA,KAAoB,OACH4O,IAAb4E,IAAwBA,EAAW,UAEvCA,EAAWxT,EACXA,OAAS4O,EAMb,CAEA,IAAIyO,EAAYtU,KAAK/I,OAASC,EAG9B,SAFe2O,IAAX5O,GAAwBA,EAASqd,KAAWrd,EAASqd,GAEpDrD,EAAOha,OAAS,IAAMA,EAAS,GAAKC,EAAS,IAAOA,EAAS8I,KAAK/I,OACrE,MAAM,IAAI2Z,WAAW,0CAGlBnG,IAAUA,EAAW,QAG1B,IADA,IAAIkI,GAAc,IAEhB,OAAQlI,GACN,IAAK,MACH,OAAO4J,EAASrU,KAAMiR,EAAQ/Z,EAAQD,GAExC,IAAK,OACL,IAAK,QACH,OAAO0d,EAAU3U,KAAMiR,EAAQ/Z,EAAQD,GAEzC,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAO4d,EAAW7U,KAAMiR,EAAQ/Z,EAAQD,GAE1C,IAAK,SAEH,OAAO+d,EAAYhV,KAAMiR,EAAQ/Z,EAAQD,GAE3C,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOge,EAAUjV,KAAMiR,EAAQ/Z,EAAQD,GAEzC,QACE,GAAI0b,EAAa,MAAM,IAAIhR,UAAU,qBAAuB8I,GAC5DA,GAAY,GAAKA,GAAUqI,cAC3BH,GAAc,EAGtB,EAEAnF,EAAO3U,UAAUkf,OAAS,WACxB,MAAO,CACLhV,KAAM,SACNqP,KAAMxZ,MAAMC,UAAUC,MAAMC,KAAKiH,KAAKgY,MAAQhY,KAAM,GAExD,EAyFA,IAAIiW,EAAuB,KAoB3B,SAAS/C,EAAYnY,EAAK4U,EAAOnI,GAC/B,IAAIyQ,EAAM,GACVzQ,EAAMvO,KAAKkN,IAAIpL,EAAI9D,OAAQuQ,GAE3B,IAAK,IAAIlM,EAAIqU,EAAOrU,EAAIkM,IAAOlM,EAC7B2c,GAAO9gB,OAAOC,aAAsB,IAAT2D,EAAIO,IAEjC,OAAO2c,CACT,CAEA,SAAS9E,EAAapY,EAAK4U,EAAOnI,GAChC,IAAIyQ,EAAM,GACVzQ,EAAMvO,KAAKkN,IAAIpL,EAAI9D,OAAQuQ,GAE3B,IAAK,IAAIlM,EAAIqU,EAAOrU,EAAIkM,IAAOlM,EAC7B2c,GAAO9gB,OAAOC,aAAa2D,EAAIO,IAEjC,OAAO2c,CACT,CAEA,SAASjF,EAAUjY,EAAK4U,EAAOnI,GAC7B,IAAIxL,EAAMjB,EAAI9D,SAET0Y,GAASA,EAAQ,KAAGA,EAAQ,KAC5BnI,GAAOA,EAAM,GAAKA,EAAMxL,KAAKwL,EAAMxL,GAGxC,IADA,IAAIC,EAAM,GACDX,EAAIqU,EAAOrU,EAAIkM,IAAOlM,EAC7BW,GAAOic,EAAoBnd,EAAIO,IAEjC,OAAOW,CACT,CAEA,SAASoX,EAActY,EAAK4U,EAAOnI,GAIjC,IAHA,IAAI2Q,EAAQpd,EAAIjC,MAAM6W,EAAOnI,GACzBgO,EAAM,GAEDla,EAAI,EAAGA,EAAI6c,EAAMlhB,OAAS,EAAGqE,GAAK,EACzCka,GAAOre,OAAOC,aAAa+gB,EAAM7c,GAAqB,IAAf6c,EAAM7c,EAAI,IAEnD,OAAOka,CACT,CAiCA,SAAS4C,EAAalhB,EAAQmhB,EAAKphB,GACjC,GAAKC,EAAS,GAAO,GAAKA,EAAS,EAAG,MAAM,IAAI0Z,WAAW,sBAC3D,GAAI1Z,EAASmhB,EAAMphB,EAAQ,MAAM,IAAI2Z,WAAW,wCAClD,CAmLA,SAAS0H,EAAUvd,EAAK8D,EAAO3H,EAAQmhB,EAAKb,EAAKrR,GAC/C,IAAKqH,EAAOyE,SAASlX,GAAM,MAAM,IAAI4G,UAAU,+CAC/C,GAAI9C,EAAQ2Y,GAAO3Y,EAAQsH,EAAK,MAAM,IAAIyK,WAAW,qCACrD,GAAI1Z,EAASmhB,EAAMtd,EAAI9D,OAAQ,MAAM,IAAI2Z,WAAW,qBACtD,CA+LA,SAAS+H,EAAc5d,EAAK8D,EAAO3H,EAAQmhB,EAAKb,EAAKrR,GACnD,GAAIjP,EAASmhB,EAAMtd,EAAI9D,OAAQ,MAAM,IAAI2Z,WAAW,sBACpD,GAAI1Z,EAAS,EAAG,MAAM,IAAI0Z,WAAW,qBACvC,CAEA,SAASgI,EAAY7d,EAAK8D,EAAO3H,EAAQ2hB,EAAcC,GAOrD,OANAja,GAASA,EACT3H,KAAoB,EACf4hB,GACHH,EAAa5d,EAAK8D,EAAO3H,EAAQ,GAEnCoZ,EAAQlN,MAAMrI,EAAK8D,EAAO3H,EAAQ2hB,EAAc,GAAI,GAC7C3hB,EAAS,CAClB,CAUA,SAAS6hB,EAAahe,EAAK8D,EAAO3H,EAAQ2hB,EAAcC,GAOtD,OANAja,GAASA,EACT3H,KAAoB,EACf4hB,GACHH,EAAa5d,EAAK8D,EAAO3H,EAAQ,GAEnCoZ,EAAQlN,MAAMrI,EAAK8D,EAAO3H,EAAQ2hB,EAAc,GAAI,GAC7C3hB,EAAS,CAClB,CAvbAsW,EAAO3U,UAAUC,MAAQ,SAAgB6W,EAAOnI,GAC9C,IAAIxL,EAAMgE,KAAK/I,QACf0Y,IAAUA,GAGE,GACVA,GAAS3T,GACG,IAAG2T,EAAQ,GACdA,EAAQ3T,IACjB2T,EAAQ3T,IANVwL,OAAc3B,IAAR2B,EAAoBxL,IAAQwL,GASxB,GACRA,GAAOxL,GACG,IAAGwL,EAAM,GACVA,EAAMxL,IACfwL,EAAMxL,GAGJwL,EAAMmI,IAAOnI,EAAMmI,GAEvB,IAAIqJ,EAAShZ,KAAK1I,SAASqY,EAAOnI,GAIlC,OAFA9I,OAAOmS,eAAemI,EAAQxL,EAAO3U,WAE9BmgB,CACT,EAUAxL,EAAO3U,UAAUogB,WACjBzL,EAAO3U,UAAUqgB,WAAa,SAAqBhiB,EAAQ0X,EAAYkK,GACrE5hB,KAAoB,EACpB0X,KAA4B,EACvBkK,GAAUV,EAAYlhB,EAAQ0X,EAAY5O,KAAK/I,QAKpD,IAHA,IAAIwc,EAAMzT,KAAK9I,GACXiiB,EAAM,EACN7d,EAAI,IACCA,EAAIsT,IAAeuK,GAAO,MACjC1F,GAAOzT,KAAK9I,EAASoE,GAAK6d,EAG5B,OAAO1F,CACT,EAEAjG,EAAO3U,UAAUugB,WACjB5L,EAAO3U,UAAUwgB,WAAa,SAAqBniB,EAAQ0X,EAAYkK,GACrE5hB,KAAoB,EACpB0X,KAA4B,EACvBkK,GACHV,EAAYlhB,EAAQ0X,EAAY5O,KAAK/I,QAKvC,IAFA,IAAIwc,EAAMzT,KAAK9I,IAAW0X,GACtBuK,EAAM,EACHvK,EAAa,IAAMuK,GAAO,MAC/B1F,GAAOzT,KAAK9I,IAAW0X,GAAcuK,EAGvC,OAAO1F,CACT,EAEAjG,EAAO3U,UAAUygB,UACjB9L,EAAO3U,UAAU0gB,UAAY,SAAoBriB,EAAQ4hB,GAGvD,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACpC+I,KAAK9I,EACd,EAEAsW,EAAO3U,UAAU2gB,aACjBhM,EAAO3U,UAAU4gB,aAAe,SAAuBviB,EAAQ4hB,GAG7D,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACpC+I,KAAK9I,GAAW8I,KAAK9I,EAAS,IAAM,CAC7C,EAEAsW,EAAO3U,UAAU6gB,aACjBlM,EAAO3U,UAAUob,aAAe,SAAuB/c,EAAQ4hB,GAG7D,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACnC+I,KAAK9I,IAAW,EAAK8I,KAAK9I,EAAS,EAC7C,EAEAsW,EAAO3U,UAAU8gB,aACjBnM,EAAO3U,UAAU+gB,aAAe,SAAuB1iB,EAAQ4hB,GAI7D,OAHA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,SAElC+I,KAAK9I,GACT8I,KAAK9I,EAAS,IAAM,EACpB8I,KAAK9I,EAAS,IAAM,IACD,SAAnB8I,KAAK9I,EAAS,EACrB,EAEAsW,EAAO3U,UAAUghB,aACjBrM,EAAO3U,UAAUihB,aAAe,SAAuB5iB,EAAQ4hB,GAI7D,OAHA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QAEpB,SAAf+I,KAAK9I,IACT8I,KAAK9I,EAAS,IAAM,GACrB8I,KAAK9I,EAAS,IAAM,EACrB8I,KAAK9I,EAAS,GAClB,EAEAsW,EAAO3U,UAAUwhB,UAAY,SAAoBnjB,EAAQ0X,EAAYkK,GACnE5hB,KAAoB,EACpB0X,KAA4B,EACvBkK,GAAUV,EAAYlhB,EAAQ0X,EAAY5O,KAAK/I,QAKpD,IAHA,IAAIwc,EAAMzT,KAAK9I,GACXiiB,EAAM,EACN7d,EAAI,IACCA,EAAIsT,IAAeuK,GAAO,MACjC1F,GAAOzT,KAAK9I,EAASoE,GAAK6d,EAM5B,OAFI1F,IAFJ0F,GAAO,OAES1F,GAAOxa,KAAKqhB,IAAI,EAAG,EAAI1L,IAEhC6E,CACT,EAEAjG,EAAO3U,UAAU0hB,UAAY,SAAoBrjB,EAAQ0X,EAAYkK,GACnE5hB,KAAoB,EACpB0X,KAA4B,EACvBkK,GAAUV,EAAYlhB,EAAQ0X,EAAY5O,KAAK/I,QAKpD,IAHA,IAAIqE,EAAIsT,EACJuK,EAAM,EACN1F,EAAMzT,KAAK9I,IAAWoE,GACnBA,EAAI,IAAM6d,GAAO,MACtB1F,GAAOzT,KAAK9I,IAAWoE,GAAK6d,EAM9B,OAFI1F,IAFJ0F,GAAO,OAES1F,GAAOxa,KAAKqhB,IAAI,EAAG,EAAI1L,IAEhC6E,CACT,EAEAjG,EAAO3U,UAAU2hB,SAAW,SAAmBtjB,EAAQ4hB,GAGrD,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACtB,IAAf+I,KAAK9I,IAC0B,GAA5B,IAAO8I,KAAK9I,GAAU,GADK8I,KAAK9I,EAE3C,EAEAsW,EAAO3U,UAAU4hB,YAAc,SAAsBvjB,EAAQ4hB,GAC3D5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QAC3C,IAAIwc,EAAMzT,KAAK9I,GAAW8I,KAAK9I,EAAS,IAAM,EAC9C,OAAc,MAANuc,EAAsB,WAANA,EAAmBA,CAC7C,EAEAjG,EAAO3U,UAAU6hB,YAAc,SAAsBxjB,EAAQ4hB,GAC3D5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QAC3C,IAAIwc,EAAMzT,KAAK9I,EAAS,GAAM8I,KAAK9I,IAAW,EAC9C,OAAc,MAANuc,EAAsB,WAANA,EAAmBA,CAC7C,EAEAjG,EAAO3U,UAAU8hB,YAAc,SAAsBzjB,EAAQ4hB,GAI3D,OAHA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QAEnC+I,KAAK9I,GACV8I,KAAK9I,EAAS,IAAM,EACpB8I,KAAK9I,EAAS,IAAM,GACpB8I,KAAK9I,EAAS,IAAM,EACzB,EAEAsW,EAAO3U,UAAU+hB,YAAc,SAAsB1jB,EAAQ4hB,GAI3D,OAHA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QAEnC+I,KAAK9I,IAAW,GACrB8I,KAAK9I,EAAS,IAAM,GACpB8I,KAAK9I,EAAS,IAAM,EACpB8I,KAAK9I,EAAS,EACnB,EAEAsW,EAAO3U,UAAUkiB,YAAc,SAAsB7jB,EAAQ4hB,GAG3D,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACpCqZ,EAAQ0D,KAAKhU,KAAM9I,GAAQ,EAAM,GAAI,EAC9C,EAEAsW,EAAO3U,UAAUmiB,YAAc,SAAsB9jB,EAAQ4hB,GAG3D,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACpCqZ,EAAQ0D,KAAKhU,KAAM9I,GAAQ,EAAO,GAAI,EAC/C,EAEAsW,EAAO3U,UAAUoiB,aAAe,SAAuB/jB,EAAQ4hB,GAG7D,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACpCqZ,EAAQ0D,KAAKhU,KAAM9I,GAAQ,EAAM,GAAI,EAC9C,EAEAsW,EAAO3U,UAAUqiB,aAAe,SAAuBhkB,EAAQ4hB,GAG7D,OAFA5hB,KAAoB,EACf4hB,GAAUV,EAAYlhB,EAAQ,EAAG8I,KAAK/I,QACpCqZ,EAAQ0D,KAAKhU,KAAM9I,GAAQ,EAAO,GAAI,EAC/C,EAQAsW,EAAO3U,UAAUsiB,YACjB3N,EAAO3U,UAAUuiB,YAAc,SAAsBvc,EAAO3H,EAAQ0X,EAAYkK,IAC9Eja,GAASA,EACT3H,KAAoB,EACpB0X,KAA4B,EACvBkK,IAEHR,EAAStY,KAAMnB,EAAO3H,EAAQ0X,EADf3V,KAAKqhB,IAAI,EAAG,EAAI1L,GAAc,EACO,GAGtD,IAAIuK,EAAM,EACN7d,EAAI,EAER,IADA0E,KAAK9I,GAAkB,IAAR2H,IACNvD,EAAIsT,IAAeuK,GAAO,MACjCnZ,KAAK9I,EAASoE,GAAMuD,EAAQsa,EAAO,IAGrC,OAAOjiB,EAAS0X,CAClB,EAEApB,EAAO3U,UAAUwiB,YACjB7N,EAAO3U,UAAUyiB,YAAc,SAAsBzc,EAAO3H,EAAQ0X,EAAYkK,IAC9Eja,GAASA,EACT3H,KAAoB,EACpB0X,KAA4B,EACvBkK,IAEHR,EAAStY,KAAMnB,EAAO3H,EAAQ0X,EADf3V,KAAKqhB,IAAI,EAAG,EAAI1L,GAAc,EACO,GAGtD,IAAItT,EAAIsT,EAAa,EACjBuK,EAAM,EAEV,IADAnZ,KAAK9I,EAASoE,GAAa,IAARuD,IACVvD,GAAK,IAAM6d,GAAO,MACzBnZ,KAAK9I,EAASoE,GAAMuD,EAAQsa,EAAO,IAGrC,OAAOjiB,EAAS0X,CAClB,EAEApB,EAAO3U,UAAU0iB,WACjB/N,EAAO3U,UAAU2iB,WAAa,SAAqB3c,EAAO3H,EAAQ4hB,GAKhE,OAJAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,IAAM,GACtD8I,KAAK9I,GAAmB,IAAR2H,EACT3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU4iB,cACjBjO,EAAO3U,UAAU6iB,cAAgB,SAAwB7c,EAAO3H,EAAQ4hB,GAMtE,OALAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,MAAQ,GACxD8I,KAAK9I,GAAmB,IAAR2H,EAChBmB,KAAK9I,EAAS,GAAM2H,IAAU,EACvB3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU8iB,cACjBnO,EAAO3U,UAAU+iB,cAAgB,SAAwB/c,EAAO3H,EAAQ4hB,GAMtE,OALAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,MAAQ,GACxD8I,KAAK9I,GAAW2H,IAAU,EAC1BmB,KAAK9I,EAAS,GAAc,IAAR2H,EACb3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAUgjB,cACjBrO,EAAO3U,UAAUijB,cAAgB,SAAwBjd,EAAO3H,EAAQ4hB,GAQtE,OAPAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,WAAY,GAC5D8I,KAAK9I,EAAS,GAAM2H,IAAU,GAC9BmB,KAAK9I,EAAS,GAAM2H,IAAU,GAC9BmB,KAAK9I,EAAS,GAAM2H,IAAU,EAC9BmB,KAAK9I,GAAmB,IAAR2H,EACT3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAUkjB,cACjBvO,EAAO3U,UAAUmjB,cAAgB,SAAwBnd,EAAO3H,EAAQ4hB,GAQtE,OAPAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,WAAY,GAC5D8I,KAAK9I,GAAW2H,IAAU,GAC1BmB,KAAK9I,EAAS,GAAM2H,IAAU,GAC9BmB,KAAK9I,EAAS,GAAM2H,IAAU,EAC9BmB,KAAK9I,EAAS,GAAc,IAAR2H,EACb3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAUsjB,WAAa,SAAqBtd,EAAO3H,EAAQ0X,EAAYkK,GAG5E,GAFAja,GAASA,EACT3H,KAAoB,GACf4hB,EAAU,CACb,IAAIvT,EAAQtM,KAAKqhB,IAAI,EAAI,EAAI1L,EAAc,GAE3C0J,EAAStY,KAAMnB,EAAO3H,EAAQ0X,EAAYrJ,EAAQ,GAAIA,EACxD,CAEA,IAAIjK,EAAI,EACJ6d,EAAM,EACNiD,EAAM,EAEV,IADApc,KAAK9I,GAAkB,IAAR2H,IACNvD,EAAIsT,IAAeuK,GAAO,MAC7Bta,EAAQ,GAAa,IAARud,GAAsC,IAAzBpc,KAAK9I,EAASoE,EAAI,KAC9C8gB,EAAM,GAERpc,KAAK9I,EAASoE,IAAOuD,EAAQsa,GAAQ,GAAKiD,EAAM,IAGlD,OAAOllB,EAAS0X,CAClB,EAEApB,EAAO3U,UAAUwjB,WAAa,SAAqBxd,EAAO3H,EAAQ0X,EAAYkK,GAG5E,GAFAja,GAASA,EACT3H,KAAoB,GACf4hB,EAAU,CACb,IAAIvT,EAAQtM,KAAKqhB,IAAI,EAAI,EAAI1L,EAAc,GAE3C0J,EAAStY,KAAMnB,EAAO3H,EAAQ0X,EAAYrJ,EAAQ,GAAIA,EACxD,CAEA,IAAIjK,EAAIsT,EAAa,EACjBuK,EAAM,EACNiD,EAAM,EAEV,IADApc,KAAK9I,EAASoE,GAAa,IAARuD,IACVvD,GAAK,IAAM6d,GAAO,MACrBta,EAAQ,GAAa,IAARud,GAAsC,IAAzBpc,KAAK9I,EAASoE,EAAI,KAC9C8gB,EAAM,GAERpc,KAAK9I,EAASoE,IAAOuD,EAAQsa,GAAQ,GAAKiD,EAAM,IAGlD,OAAOllB,EAAS0X,CAClB,EAEApB,EAAO3U,UAAUyjB,UAAY,SAAoBzd,EAAO3H,EAAQ4hB,GAM9D,OALAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,KAAO,KACnD2H,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtCmB,KAAK9I,GAAmB,IAAR2H,EACT3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU0jB,aAAe,SAAuB1d,EAAO3H,EAAQ4hB,GAMpE,OALAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,OAAS,OACzD8I,KAAK9I,GAAmB,IAAR2H,EAChBmB,KAAK9I,EAAS,GAAM2H,IAAU,EACvB3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU2jB,aAAe,SAAuB3d,EAAO3H,EAAQ4hB,GAMpE,OALAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,OAAS,OACzD8I,KAAK9I,GAAW2H,IAAU,EAC1BmB,KAAK9I,EAAS,GAAc,IAAR2H,EACb3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU4jB,aAAe,SAAuB5d,EAAO3H,EAAQ4hB,GAQpE,OAPAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,YAAa,YAC7D8I,KAAK9I,GAAmB,IAAR2H,EAChBmB,KAAK9I,EAAS,GAAM2H,IAAU,EAC9BmB,KAAK9I,EAAS,GAAM2H,IAAU,GAC9BmB,KAAK9I,EAAS,GAAM2H,IAAU,GACvB3H,EAAS,CAClB,EAEAsW,EAAO3U,UAAU6jB,aAAe,SAAuB7d,EAAO3H,EAAQ4hB,GASpE,OARAja,GAASA,EACT3H,KAAoB,EACf4hB,GAAUR,EAAStY,KAAMnB,EAAO3H,EAAQ,EAAG,YAAa,YACzD2H,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GAC5CmB,KAAK9I,GAAW2H,IAAU,GAC1BmB,KAAK9I,EAAS,GAAM2H,IAAU,GAC9BmB,KAAK9I,EAAS,GAAM2H,IAAU,EAC9BmB,KAAK9I,EAAS,GAAc,IAAR2H,EACb3H,EAAS,CAClB,EAiBAsW,EAAO3U,UAAUgkB,aAAe,SAAuBhe,EAAO3H,EAAQ4hB,GACpE,OAAOF,EAAW5Y,KAAMnB,EAAO3H,GAAQ,EAAM4hB,EAC/C,EAEAtL,EAAO3U,UAAUikB,aAAe,SAAuBje,EAAO3H,EAAQ4hB,GACpE,OAAOF,EAAW5Y,KAAMnB,EAAO3H,GAAQ,EAAO4hB,EAChD,EAYAtL,EAAO3U,UAAUkkB,cAAgB,SAAwBle,EAAO3H,EAAQ4hB,GACtE,OAAOC,EAAY/Y,KAAMnB,EAAO3H,GAAQ,EAAM4hB,EAChD,EAEAtL,EAAO3U,UAAUmkB,cAAgB,SAAwBne,EAAO3H,EAAQ4hB,GACtE,OAAOC,EAAY/Y,KAAMnB,EAAO3H,GAAQ,EAAO4hB,EACjD,EAGAtL,EAAO3U,UAAU4Y,KAAO,SAAe7K,EAAQqW,EAAatN,EAAOnI,GACjE,IAAKgG,EAAOyE,SAASrL,GAAS,MAAM,IAAIjF,UAAU,+BAQlD,GAPKgO,IAAOA,EAAQ,GACfnI,GAAe,IAARA,IAAWA,EAAMxH,KAAK/I,QAC9BgmB,GAAerW,EAAO3P,SAAQgmB,EAAcrW,EAAO3P,QAClDgmB,IAAaA,EAAc,GAC5BzV,EAAM,GAAKA,EAAMmI,IAAOnI,EAAMmI,GAG9BnI,IAAQmI,EAAO,OAAO,EAC1B,GAAsB,IAAlB/I,EAAO3P,QAAgC,IAAhB+I,KAAK/I,OAAc,OAAO,EAGrD,GAAIgmB,EAAc,EAChB,MAAM,IAAIrM,WAAW,6BAEvB,GAAIjB,EAAQ,GAAKA,GAAS3P,KAAK/I,OAAQ,MAAM,IAAI2Z,WAAW,sBAC5D,GAAIpJ,EAAM,EAAG,MAAM,IAAIoJ,WAAW,2BAG9BpJ,EAAMxH,KAAK/I,SAAQuQ,EAAMxH,KAAK/I,QAC9B2P,EAAO3P,OAASgmB,EAAczV,EAAMmI,IACtCnI,EAAMZ,EAAO3P,OAASgmB,EAActN,GAGtC,IAAI3T,EAAMwL,EAAMmI,EAahB,OAXI3P,OAAS4G,GAAqD,mBAApCpM,WAAW3B,UAAUqkB,WAEjDld,KAAKkd,WAAWD,EAAatN,EAAOnI,GAEpChN,WAAW3B,UAAUgD,IAAI9C,KACvB6N,EACA5G,KAAK1I,SAASqY,EAAOnI,GACrByV,GAIGjhB,CACT,EAMAwR,EAAO3U,UAAUiT,KAAO,SAAe2H,EAAK9D,EAAOnI,EAAKiD,GAEtD,GAAmB,iBAARgJ,EAAkB,CAS3B,GARqB,iBAAV9D,GACTlF,EAAWkF,EACXA,EAAQ,EACRnI,EAAMxH,KAAK/I,QACa,iBAARuQ,IAChBiD,EAAWjD,EACXA,EAAMxH,KAAK/I,aAEI4O,IAAb4E,GAA8C,iBAAbA,EACnC,MAAM,IAAI9I,UAAU,6BAEtB,GAAwB,iBAAb8I,IAA0B+C,EAAO0D,WAAWzG,GACrD,MAAM,IAAI9I,UAAU,qBAAuB8I,GAE7C,GAAmB,IAAfgJ,EAAIxc,OAAc,CACpB,IAAIgL,EAAOwR,EAAIjY,WAAW,IACR,SAAbiP,GAAuBxI,EAAO,KAClB,WAAbwI,KAEFgJ,EAAMxR,EAEV,CACF,KAA0B,iBAARwR,EAChBA,GAAY,IACY,kBAARA,IAChBA,EAAMpO,OAAOoO,IAIf,GAAI9D,EAAQ,GAAK3P,KAAK/I,OAAS0Y,GAAS3P,KAAK/I,OAASuQ,EACpD,MAAM,IAAIoJ,WAAW,sBAGvB,GAAIpJ,GAAOmI,EACT,OAAO3P,KAQT,IAAI1E,EACJ,GANAqU,KAAkB,EAClBnI,OAAc3B,IAAR2B,EAAoBxH,KAAK/I,OAASuQ,IAAQ,EAE3CiM,IAAKA,EAAM,GAGG,iBAARA,EACT,IAAKnY,EAAIqU,EAAOrU,EAAIkM,IAAOlM,EACzB0E,KAAK1E,GAAKmY,MAEP,CACL,IAAI0E,EAAQ3K,EAAOyE,SAASwB,GACxBA,EACAjG,EAAO8B,KAAKmE,EAAKhJ,GACjBzO,EAAMmc,EAAMlhB,OAChB,GAAY,IAAR+E,EACF,MAAM,IAAI2F,UAAU,cAAgB8R,EAClC,qCAEJ,IAAKnY,EAAI,EAAGA,EAAIkM,EAAMmI,IAASrU,EAC7B0E,KAAK1E,EAAIqU,GAASwI,EAAM7c,EAAIU,EAEhC,CAEA,OAAOgE,IACT,EAKA,IAAIoe,EAAoB,oBAgBxB,SAASxL,EAAa3B,EAAQiE,GAE5B,IAAIQ,EADJR,EAAQA,GAAS1P,IAMjB,IAJA,IAAIvO,EAASga,EAAOha,OAChBonB,EAAgB,KAChBlG,EAAQ,GAEH7c,EAAI,EAAGA,EAAIrE,IAAUqE,EAAG,CAI/B,IAHAoa,EAAYzE,EAAOzV,WAAWF,IAGd,OAAUoa,EAAY,MAAQ,CAE5C,IAAK2I,EAAe,CAElB,GAAI3I,EAAY,MAAQ,EAEjBR,GAAS,IAAM,GAAGiD,EAAMzgB,KAAK,IAAM,IAAM,KAC9C,QACF,CAAO,GAAI4D,EAAI,IAAMrE,EAAQ,EAEtBie,GAAS,IAAM,GAAGiD,EAAMzgB,KAAK,IAAM,IAAM,KAC9C,QACF,CAGA2mB,EAAgB3I,EAEhB,QACF,CAGA,GAAIA,EAAY,MAAQ,EACjBR,GAAS,IAAM,GAAGiD,EAAMzgB,KAAK,IAAM,IAAM,KAC9C2mB,EAAgB3I,EAChB,QACF,CAGAA,EAAkE,OAArD2I,EAAgB,OAAU,GAAK3I,EAAY,MAC1D,MAAW2I,IAEJnJ,GAAS,IAAM,GAAGiD,EAAMzgB,KAAK,IAAM,IAAM,KAMhD,GAHA2mB,EAAgB,KAGZ3I,EAAY,IAAM,CACpB,IAAKR,GAAS,GAAK,EAAG,MACtBiD,EAAMzgB,KAAKge,EACb,MAAO,GAAIA,EAAY,KAAO,CAC5B,IAAKR,GAAS,GAAK,EAAG,MACtBiD,EAAMzgB,KACJge,GAAa,EAAM,IACP,GAAZA,EAAmB,IAEvB,MAAO,GAAIA,EAAY,MAAS,CAC9B,IAAKR,GAAS,GAAK,EAAG,MACtBiD,EAAMzgB,KACJge,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,IAEvB,KAAO,MAAIA,EAAY,SASrB,MAAM,IAAInd,MAAM,sBARhB,IAAK2c,GAAS,GAAK,EAAG,MACtBiD,EAAMzgB,KACJge,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,IAIvB,CACF,CAEA,OAAOyC,CACT,CA2BA,SAAStF,EAAexX,GACtB,OAAOgV,EAAOiO,YAxHhB,SAAsBjjB,GAMpB,IAFAA,GAFAA,EAAMA,EAAI4D,MAAM,KAAK,IAEXgP,OAAOxN,QAAQ2d,EAAmB,KAEpCnnB,OAAS,EAAG,MAAO,GAE3B,KAAOoE,EAAIpE,OAAS,GAAM,GACxBoE,GAAY,IAEd,OAAOA,CACT,CA4G4BkjB,CAAYljB,GACxC,CAEA,SAASuZ,EAAY4J,EAAKC,EAAKvnB,EAAQD,GACrC,IAAK,IAAIqE,EAAI,EAAGA,EAAIrE,KACbqE,EAAIpE,GAAUunB,EAAIxnB,QAAYqE,GAAKkjB,EAAIvnB,UADhBqE,EAE5BmjB,EAAInjB,EAAIpE,GAAUsnB,EAAIljB,GAExB,OAAOA,CACT,CAKA,SAASkW,EAAYQ,EAAKjP,GACxB,OAAOiP,aAAejP,GACZ,MAAPiP,GAAkC,MAAnBA,EAAIlS,aAA+C,MAAxBkS,EAAIlS,YAAYT,MACzD2S,EAAIlS,YAAYT,OAAS0D,EAAK1D,IACpC,CACA,SAAS8S,EAAaH,GAEpB,OAAOA,GAAQA,CACjB,CAIA,IAAIkG,EAAsB,WAGxB,IAFA,IAAIwG,EAAW,mBACXnlB,EAAQ,IAAIX,MAAM,KACb0C,EAAI,EAAGA,EAAI,KAAMA,EAExB,IADA,IAAIqjB,EAAU,GAAJrjB,EACD8Y,EAAI,EAAGA,EAAI,KAAMA,EACxB7a,EAAMolB,EAAMvK,GAAKsK,EAASpjB,GAAKojB,EAAStK,GAG5C,OAAO7a,CACR,CAVyB,mCChwD1BkF,EAAOnF,QAuCP,SAAeuF,EAAOmD,GACpB,GAAqB,iBAAVnD,EACT,OAAOukB,EAAMvkB,GAGf,GAAqB,iBAAVA,EACT,OAAO4D,EAAO5D,EAAOmD,GAGvB,OAAO,IACT,EAhDAvD,EAAOnF,QAAQmJ,OAASA,EACxBhE,EAAOnF,QAAQ8pB,MAAQA,EAOvB,IAAIC,EAAwB,wBAExBC,EAAuB,wBAEvBvT,EAAM,CACRgC,EAAI,EACJwR,GAAI,KACJC,GAAI,GAAK,GACTC,GAAI,GAAK,GACTC,GAAIzqB,KAAKqhB,IAAI,KAAM,GACnBqJ,GAAI1qB,KAAKqhB,IAAI,KAAM,IAGjBsJ,EAAc,gDA+ClB,SAASnhB,EAAO5D,EAAOmD,GACrB,IAAKqD,OAAOyS,SAASjZ,GACnB,OAAO,KAGT,IAAIglB,EAAM5qB,KAAKklB,IAAItf,GACfilB,EAAsB9hB,GAAWA,EAAQ8hB,oBAAuB,GAChEC,EAAiB/hB,GAAWA,EAAQ+hB,eAAkB,GACtDC,EAAiBhiB,QAAqC6D,IAA1B7D,EAAQgiB,cAA+BhiB,EAAQgiB,cAAgB,EAC3FC,EAAgBC,QAAQliB,GAAWA,EAAQiiB,eAC3CE,EAAQniB,GAAWA,EAAQmiB,MAAS,GAEnCA,GAASpU,EAAIoU,EAAKrR,iBAEnBqR,EADEN,GAAO9T,EAAI4T,GACN,KACEE,GAAO9T,EAAI2T,GACb,KACEG,GAAO9T,EAAI0T,GACb,KACEI,GAAO9T,EAAIyT,GACb,KACEK,GAAO9T,EAAIwT,GACb,KAEA,KAIX,IACIloB,GADMwD,EAAQkR,EAAIoU,EAAKrR,gBACbsR,QAAQJ,GActB,OAZKC,IACH5oB,EAAMA,EAAIoF,QAAQ6iB,EAAsB,OAGtCQ,IACFzoB,EAAMA,EAAI4D,MAAM,KAAK8Q,KAAI,SAAUsU,EAAG/oB,GACpC,OAAa,IAANA,EACH+oB,EAAE5jB,QAAQ4iB,EAAuBS,GACjCO,CACN,IAAG1sB,KAAK,MAGH0D,EAAM0oB,EAAgBI,CAC/B,CAaA,SAASf,EAAM3P,GACb,GAAmB,iBAARA,IAAqB6Q,MAAM7Q,GACpC,OAAOA,EAGT,GAAmB,iBAARA,EACT,OAAO,KAIT,IACI8Q,EADAC,EAAUZ,EAAYa,KAAKhR,GAE3B0Q,EAAO,IAYX,OAVKK,GAMHD,EAAaG,WAAWF,EAAQ,IAChCL,EAAOK,EAAQ,GAAG1R,gBALlByR,EAAa9P,SAAShB,EAAK,IAC3B0Q,EAAO,KAOLG,MAAMC,GACD,KAGFtrB,KAAK8kB,MAAMhO,EAAIoU,GAAQI,EAChC,sCCvKA,IAAI1iB,EAAW,EAAQ,OAEvBvI,EAAQ0H,aAAe,SAAUqC,EAAUshB,GACzC,QAAiB9e,IAAbxC,EAAwB,CAC1B,IAAIuC,EAAU,IAAIE,SAAQ,SAAUC,EAASC,GAC3C3C,EAAW,SAAUnB,EAAKsT,GACpBtT,EAAK8D,EAAO9D,GACX6D,EAAQyP,EACf,CACF,IAEAnS,OAAoBwC,IAAX8e,EAAuBA,EAAS,WAAa/e,CACxD,MAAO,GAAwB,mBAAbvC,EAChB,MAAM,IAAI1B,UAAU,+BAGtB,OAAO0B,CACT,EAEA/J,EAAQsrB,YAAc,SAAUhf,EAASvC,GACvC,QAAiBwC,IAAbxC,EAAwB,OAAOuC,EAEnCA,EACGif,MAAK,SAAUrP,GAAO3T,GAAS,IAAMwB,EAAS,KAAMmS,IAAM,IAC1DsP,OAAM,SAAU5iB,GAAOL,GAAS,IAAMwB,EAASnB,IAAM,GAC1D,qBC3BAzD,EAAOnF,QAAoC,mBAAnB4W,eAAgCA,eAAkBrD,GAAO/G,QAAQC,UAAU8e,KAAKhY,uICKxG,MAAMkY,EAAcvuB,OAAO,iBACrBwuB,EAAiBxuB,OAAO,oBACxByuB,EAAezuB,OAAO,wBACtB0uB,EAAY1uB,OAAO,qBACnB2uB,EAAc3uB,OAAO,kBACrB4uB,EAAY3R,GAAwB,iBAARA,GAA4B,OAARA,GAAgC,mBAARA,EAgDxE4R,EAAmB,IAAI7V,IAAI,CAC7B,CAAC,QA7CwB,CACzB8V,UAAY7R,GAAQ2R,EAAS3R,IAAQA,EAAIsR,GACzCQ,UAAUvT,GACN,MAAM,MAAEwT,EAAK,MAAEC,GAAU,IAAIC,eAE7B,OADAC,EAAO3T,EAAKwT,GACL,CAACC,EAAO,CAACA,GACpB,EACAjG,YAAYoG,GAER,OADAA,EAAKjW,QAiJFkW,EAhJSD,EAgJO,GAAIhf,GAD/B,IAAkBA,CA9Id,IAoCA,CAAC,QA/BwB,CACzB0e,UAAYzmB,GAAUumB,EAASvmB,IAAUsmB,KAAetmB,EACxD0mB,WAAU,MAAE1mB,IACR,IAAIinB,EAcJ,OAZIA,EADAjnB,aAAiBtG,MACJ,CACTwtB,SAAS,EACTlnB,MAAO,CACH6e,QAAS7e,EAAM6e,QACfre,KAAMR,EAAMQ,KACZoe,MAAO5e,EAAM4e,QAKR,CAAEsI,SAAS,EAAOlnB,SAE5B,CAACinB,EAAY,GACxB,EACAtG,YAAYsG,GACR,GAAIA,EAAWC,QACX,MAAMrnB,OAAOwL,OAAO,IAAI3R,MAAMutB,EAAWjnB,MAAM6e,SAAUoI,EAAWjnB,OAExE,MAAMinB,EAAWjnB,KACrB,MAoBJ,SAAS8mB,EAAO3T,EAAKgU,EAAKhH,WAAYiH,EAAiB,CAAC,MACpDD,EAAG3G,iBAAiB,WAAW,SAAShc,EAASsd,GAC7C,IAAKA,IAAOA,EAAGvO,KACX,OAEJ,IAhBR,SAAyB6T,EAAgBC,GACrC,IAAK,MAAMC,KAAiBF,EAAgB,CACxC,GAAIC,IAAWC,GAAmC,MAAlBA,EAC5B,OAAO,EAEX,GAAIA,aAAyBC,QAAUD,EAAc5lB,KAAK2lB,GACtD,OAAO,CAEf,CACA,OAAO,CACX,CAMaG,CAAgBJ,EAAgBtF,EAAGuF,QAEpC,YADAxtB,EAAQ+O,KAAK,mBAAmBkZ,EAAGuF,6BAGvC,MAAM,GAAEtsB,EAAE,KAAEmJ,EAAI,KAAEujB,GAAS5nB,OAAOwL,OAAO,CAAEoc,KAAM,IAAM3F,EAAGvO,MACpDmU,GAAgB5F,EAAGvO,KAAKmU,cAAgB,IAAIxW,IAAIyW,GACtD,IAAIC,EACJ,IACI,MAAMtY,EAASmY,EAAKxtB,MAAM,GAAI,GAAG4tB,QAAO,CAAC1U,EAAK2U,IAAS3U,EAAI2U,IAAO3U,GAC5D4U,EAAWN,EAAKI,QAAO,CAAC1U,EAAK2U,IAAS3U,EAAI2U,IAAO3U,GACvD,OAAQjP,GACJ,IAAK,MAEG0jB,EAAcG,EAElB,MACJ,IAAK,MAEGzY,EAAOmY,EAAKxtB,OAAO,GAAG,IAAM0tB,EAAc7F,EAAGvO,KAAKvT,OAClD4nB,GAAc,EAElB,MACJ,IAAK,QAEGA,EAAcG,EAASvvB,MAAM8W,EAAQoY,GAEzC,MACJ,IAAK,YAGGE,EAAcI,EADA,IAAID,KAAYL,IAGlC,MACJ,IAAK,WACD,CACI,MAAM,MAAEf,EAAK,MAAEC,GAAU,IAAIC,eAC7BC,EAAO3T,EAAKyT,GACZgB,EAkKxB,SAAkBzU,EAAK8U,GAEnB,OADAC,EAAclrB,IAAImW,EAAK8U,GAChB9U,CACX,CArKsCgV,CAASxB,EAAO,CAACA,GACnC,CACA,MACJ,IAAK,UAEGiB,OAAc5gB,EAElB,MACJ,QACI,OAEZ,CACA,MAAOhH,GACH4nB,EAAc,CAAE5nB,QAAO,CAACsmB,GAAc,EAC1C,CACArf,QAAQC,QAAQ0gB,GACX3B,OAAOjmB,IACD,CAAEA,QAAO,CAACsmB,GAAc,MAE9BN,MAAM4B,IACP,MAAOQ,EAAWC,GAAiBC,EAAYV,GAC/CT,EAAGoB,YAAY1oB,OAAOwL,OAAOxL,OAAOwL,OAAO,CAAC,EAAG+c,GAAY,CAAErtB,OAAOstB,GACvD,YAATnkB,IAEAijB,EAAG5G,oBAAoB,UAAW/b,GAClCgkB,EAAcrB,GACVd,KAAalT,GAAiC,mBAAnBA,EAAIkT,IAC/BlT,EAAIkT,KAEZ,IAECJ,OAAOrO,IAER,MAAOwQ,EAAWC,GAAiBC,EAAY,CAC3CtoB,MAAO,IAAI8C,UAAU,+BACrB,CAACwjB,GAAc,IAEnBa,EAAGoB,YAAY1oB,OAAOwL,OAAOxL,OAAOwL,OAAO,CAAC,EAAG+c,GAAY,CAAErtB,OAAOstB,EAAc,GAE1F,IACIlB,EAAGrW,OACHqW,EAAGrW,OAEX,CAIA,SAAS0X,EAAcC,IAHvB,SAAuBA,GACnB,MAAqC,gBAA9BA,EAASxnB,YAAYT,IAChC,EAEQkoB,CAAcD,IACdA,EAAShkB,OACjB,CAIA,SAASkkB,EAAqBC,GAC1B,GAAIA,EACA,MAAM,IAAIlvB,MAAM,6CAExB,CACA,SAASmvB,EAAgB1B,GACrB,OAAO2B,EAAuB3B,EAAI,CAC9BjjB,KAAM,YACP8hB,MAAK,KACJwC,EAAcrB,EAAG,GAEzB,CACA,MAAM4B,EAAe,IAAIC,QACnBC,EAAkB,yBAA0B9I,YAC9C,IAAI+I,sBAAsB/B,IACtB,MAAMgC,GAAYJ,EAAajnB,IAAIqlB,IAAO,GAAK,EAC/C4B,EAAa/rB,IAAImqB,EAAIgC,GACJ,IAAbA,GACAN,EAAgB1B,EACpB,IAcR,SAASH,EAAYG,EAAIM,EAAO,GAAI1f,EAAS,WAAc,GACvD,IAAIqhB,GAAkB,EACtB,MAAMpB,EAAQ,IAAIqB,MAAMthB,EAAQ,CAC5BjG,IAAIwnB,EAASxB,GAET,GADAa,EAAqBS,GACjBtB,IAAS1B,EACT,MAAO,MAXvB,SAAyB4B,GACjBiB,GACAA,EAAgBM,WAAWvB,EAEnC,CAQoBwB,CAAgBxB,GAChBa,EAAgB1B,GAChBiC,GAAkB,CAAI,EAG9B,GAAa,SAATtB,EAAiB,CACjB,GAAoB,IAAhBL,EAAKrvB,OACL,MAAO,CAAE4tB,KAAM,IAAMgC,GAEzB,MAAMyB,EAAIX,EAAuB3B,EAAI,CACjCjjB,KAAM,MACNujB,KAAMA,EAAKvW,KAAKxU,GAAMA,EAAEkX,eACzBoS,KAAK2B,GACR,OAAO8B,EAAEzD,KAAKzoB,KAAKksB,EACvB,CACA,OAAOzC,EAAYG,EAAI,IAAIM,EAAMK,GACrC,EACA9qB,IAAIssB,EAASxB,EAAMC,GACfY,EAAqBS,GAGrB,MAAOppB,EAAOqoB,GAAiBC,EAAYP,GAC3C,OAAOe,EAAuB3B,EAAI,CAC9BjjB,KAAM,MACNujB,KAAM,IAAIA,EAAMK,GAAM5W,KAAKxU,GAAMA,EAAEkX,aACnC5T,SACDqoB,GAAerC,KAAK2B,EAC3B,EACAnvB,MAAM8wB,EAASI,EAAUC,GACrBhB,EAAqBS,GACrB,MAAMzwB,EAAO8uB,EAAKA,EAAKrvB,OAAS,GAChC,GAAIO,IAASwtB,EACT,OAAO2C,EAAuB3B,EAAI,CAC9BjjB,KAAM,aACP8hB,KAAK2B,GAGZ,GAAa,SAAThvB,EACA,OAAOquB,EAAYG,EAAIM,EAAKxtB,MAAM,GAAI,IAE1C,MAAOytB,EAAcW,GAAiBuB,EAAiBD,GACvD,OAAOb,EAAuB3B,EAAI,CAC9BjjB,KAAM,QACNujB,KAAMA,EAAKvW,KAAKxU,GAAMA,EAAEkX,aACxB8T,gBACDW,GAAerC,KAAK2B,EAC3B,EACAkC,UAAUP,EAASK,GACfhB,EAAqBS,GACrB,MAAO1B,EAAcW,GAAiBuB,EAAiBD,GACvD,OAAOb,EAAuB3B,EAAI,CAC9BjjB,KAAM,YACNujB,KAAMA,EAAKvW,KAAKxU,GAAMA,EAAEkX,aACxB8T,gBACDW,GAAerC,KAAK2B,EAC3B,IAGJ,OA7EJ,SAAuBK,EAAOb,GAC1B,MAAMgC,GAAYJ,EAAajnB,IAAIqlB,IAAO,GAAK,EAC/C4B,EAAa/rB,IAAImqB,EAAIgC,GACjBF,GACAA,EAAgBa,SAAS9B,EAAOb,EAAIa,EAE5C,CAsEI+B,CAAc/B,EAAOb,GACda,CACX,CAIA,SAAS4B,EAAiBlC,GACtB,MAAMsC,EAAYtC,EAAaxW,IAAIoX,GACnC,MAAO,CAAC0B,EAAU9Y,KAAK+Y,GAAMA,EAAE,MALnBjuB,EAK+BguB,EAAU9Y,KAAK+Y,GAAMA,EAAE,KAJ3DlwB,MAAMC,UAAUiW,OAAOzX,MAAM,GAAIwD,KAD5C,IAAgBA,CAMhB,CACA,MAAMksB,EAAgB,IAAIc,QAK1B,SAAShB,EAAM7U,GACX,OAAOtT,OAAOwL,OAAO8H,EAAK,CAAE,CAAC+S,IAAc,GAC/C,CAQA,SAASoC,EAAYtoB,GACjB,IAAK,MAAOQ,EAAM0pB,KAAY1D,EAC1B,GAAI0D,EAAQzD,UAAUzmB,GAAQ,CAC1B,MAAOmqB,EAAiB9B,GAAiB6B,EAAQxD,UAAU1mB,GAC3D,MAAO,CACH,CACIkE,KAAM,UACN1D,OACAR,MAAOmqB,GAEX9B,EAER,CAEJ,MAAO,CACH,CACInkB,KAAM,MACNlE,SAEJkoB,EAAcpmB,IAAI9B,IAAU,GAEpC,CACA,SAAS2nB,EAAc3nB,GACnB,OAAQA,EAAMkE,MACV,IAAK,UACD,OAAOsiB,EAAiB1kB,IAAI9B,EAAMQ,MAAMmgB,YAAY3gB,EAAMA,OAC9D,IAAK,MACD,OAAOA,EAAMA,MAEzB,CACA,SAAS8oB,EAAuB3B,EAAI/H,EAAK6I,GACrC,OAAO,IAAIhhB,SAASC,IAChB,MAAMnM,EAeH,IAAIhB,MAAM,GACZkT,KAAK,GACLiE,KAAI,IAAM9W,KAAK8kB,MAAM9kB,KAAKgwB,SAAW5jB,OAAO6jB,kBAAkBzW,SAAS,MACvE9a,KAAK,KAjBNquB,EAAG3G,iBAAiB,WAAW,SAAS8J,EAAExI,GACjCA,EAAGvO,MAASuO,EAAGvO,KAAKxY,IAAM+mB,EAAGvO,KAAKxY,KAAOA,IAG9CosB,EAAG5G,oBAAoB,UAAW+J,GAClCpjB,EAAQ4a,EAAGvO,MACf,IACI4T,EAAGrW,OACHqW,EAAGrW,QAEPqW,EAAGoB,YAAY1oB,OAAOwL,OAAO,CAAEtQ,MAAMqkB,GAAM6I,EAAU,GAE7D,uBChVA,IAAIsC,EAAyB,oBAATC,KAAuBA,KAAOrpB,KAC9CspB,EAAW,WACf,SAASC,IACTvpB,KAAKwpB,OAAQ,EACbxpB,KAAKypB,aAAeL,EAAOK,YAC3B,CAEA,OADAF,EAAE1wB,UAAYuwB,EACP,IAAIG,CACV,CAPc,IAQf,SAAUF,IAEO,SAAW/vB,GAE1B,IAAIowB,EAAU,CACZC,aAAc,oBAAqBN,EACnCO,SAAU,WAAYP,GAAQ,aAAc7yB,OAC5CqzB,KACE,eAAgBR,GAChB,SAAUA,GACV,WACE,IAEE,OADA,IAAIS,MACG,CACT,CAAE,MAAOvT,GACP,OAAO,CACT,CACD,CAPD,GAQFwT,SAAU,aAAcV,EACxB7qB,YAAa,gBAAiB6qB,GAOhC,GAAIK,EAAQlrB,YACV,IAAIwrB,EAAc,CAChB,qBACA,sBACA,6BACA,sBACA,uBACA,sBACA,uBACA,wBACA,yBAGEC,EACF5Y,YAAYC,QACZ,SAASU,GACP,OAAOA,GAAOgY,EAAYzqB,QAAQb,OAAO7F,UAAU4Z,SAAS1Z,KAAKiZ,KAAS,CAC5E,EAGJ,SAASkY,EAAc7qB,GAIrB,GAHoB,iBAATA,IACTA,EAAOlI,OAAOkI,IAEZ,4BAA4BkB,KAAKlB,GACnC,MAAM,IAAIsC,UAAU,0CAEtB,OAAOtC,EAAKyT,aACd,CAEA,SAASqX,EAAetrB,GAItB,MAHqB,iBAAVA,IACTA,EAAQ1H,OAAO0H,IAEVA,CACT,CAGA,SAASurB,EAAY1jB,GACnB,IAAI+F,EAAW,CACb9G,KAAM,WACJ,IAAI9G,EAAQ6H,EAAMtH,QAClB,MAAO,CAACirB,UAAgBxkB,IAAVhH,EAAqBA,MAAOA,EAC5C,GASF,OANI6qB,EAAQE,WACVnd,EAASjW,OAAOiW,UAAY,WAC1B,OAAOA,CACT,GAGKA,CACT,CAEA,SAAS6d,EAAQC,GACfvqB,KAAK+P,IAAM,CAAC,EAERwa,aAAmBD,EACrBC,EAAQnqB,SAAQ,SAASvB,EAAOQ,GAC9BW,KAAKwqB,OAAOnrB,EAAMR,EACpB,GAAGmB,MACMpH,MAAM+S,QAAQ4e,GACvBA,EAAQnqB,SAAQ,SAASqqB,GACvBzqB,KAAKwqB,OAAOC,EAAO,GAAIA,EAAO,GAChC,GAAGzqB,MACMuqB,GACT7rB,OAAOyB,oBAAoBoqB,GAASnqB,SAAQ,SAASf,GACnDW,KAAKwqB,OAAOnrB,EAAMkrB,EAAQlrB,GAC5B,GAAGW,KAEP,CA8DA,SAAS0qB,EAASC,GAChB,GAAIA,EAAKC,SACP,OAAO9kB,QAAQE,OAAO,IAAIrE,UAAU,iBAEtCgpB,EAAKC,UAAW,CAClB,CAEA,SAASC,EAAgBC,GACvB,OAAO,IAAIhlB,SAAQ,SAASC,EAASC,GACnC8kB,EAAOC,OAAS,WACdhlB,EAAQ+kB,EAAOjc,OACjB,EACAic,EAAOtK,QAAU,WACfxa,EAAO8kB,EAAOrU,MAChB,CACF,GACF,CAEA,SAASuU,EAAsBnB,GAC7B,IAAIiB,EAAS,IAAIG,WACbrlB,EAAUilB,EAAgBC,GAE9B,OADAA,EAAOI,kBAAkBrB,GAClBjkB,CACT,CAmBA,SAASulB,EAAYpwB,GACnB,GAAIA,EAAIjC,MACN,OAAOiC,EAAIjC,MAAM,GAEjB,IAAI8C,EAAO,IAAIpB,WAAWO,EAAI6T,YAE9B,OADAhT,EAAKC,IAAI,IAAIrB,WAAWO,IACjBa,EAAKjF,MAEhB,CAEA,SAASy0B,IA0FP,OAzFAprB,KAAK4qB,UAAW,EAEhB5qB,KAAKqrB,UAAY,SAASV,GAhM5B,IAAoB3Y,EAiMhBhS,KAAKsrB,UAAYX,EACZA,EAEsB,iBAATA,EAChB3qB,KAAKurB,UAAYZ,EACRjB,EAAQG,MAAQC,KAAKjxB,UAAU2yB,cAAcb,GACtD3qB,KAAKyrB,UAAYd,EACRjB,EAAQK,UAAY2B,SAAS7yB,UAAU2yB,cAAcb,GAC9D3qB,KAAK2rB,cAAgBhB,EACZjB,EAAQC,cAAgBiC,gBAAgB/yB,UAAU2yB,cAAcb,GACzE3qB,KAAKurB,UAAYZ,EAAKlY,WACbiX,EAAQlrB,aAAekrB,EAAQG,QA5M1B7X,EA4M6C2Y,IA3MjDkB,SAAShzB,UAAU2yB,cAAcxZ,KA4M3ChS,KAAK8rB,iBAAmBX,EAAYR,EAAKh0B,QAEzCqJ,KAAKsrB,UAAY,IAAIxB,KAAK,CAAC9pB,KAAK8rB,oBACvBpC,EAAQlrB,cAAgB6S,YAAYxY,UAAU2yB,cAAcb,IAASV,EAAkBU,IAChG3qB,KAAK8rB,iBAAmBX,EAAYR,GAEpC3qB,KAAKurB,UAAYZ,EAAOjsB,OAAO7F,UAAU4Z,SAAS1Z,KAAK4xB,GAhBvD3qB,KAAKurB,UAAY,GAmBdvrB,KAAKuqB,QAAQ5pB,IAAI,kBACA,iBAATgqB,EACT3qB,KAAKuqB,QAAQ1uB,IAAI,eAAgB,4BACxBmE,KAAKyrB,WAAazrB,KAAKyrB,UAAU1oB,KAC1C/C,KAAKuqB,QAAQ1uB,IAAI,eAAgBmE,KAAKyrB,UAAU1oB,MACvC2mB,EAAQC,cAAgBiC,gBAAgB/yB,UAAU2yB,cAAcb,IACzE3qB,KAAKuqB,QAAQ1uB,IAAI,eAAgB,mDAGvC,EAEI6tB,EAAQG,OACV7pB,KAAK6pB,KAAO,WACV,IAAIkC,EAAWrB,EAAS1qB,MACxB,GAAI+rB,EACF,OAAOA,EAGT,GAAI/rB,KAAKyrB,UACP,OAAO3lB,QAAQC,QAAQ/F,KAAKyrB,WACvB,GAAIzrB,KAAK8rB,iBACd,OAAOhmB,QAAQC,QAAQ,IAAI+jB,KAAK,CAAC9pB,KAAK8rB,oBACjC,GAAI9rB,KAAK2rB,cACd,MAAM,IAAIpzB,MAAM,wCAEhB,OAAOuN,QAAQC,QAAQ,IAAI+jB,KAAK,CAAC9pB,KAAKurB,YAE1C,EAEAvrB,KAAKxB,YAAc,WACjB,OAAIwB,KAAK8rB,iBACApB,EAAS1qB,OAAS8F,QAAQC,QAAQ/F,KAAK8rB,kBAEvC9rB,KAAK6pB,OAAOhF,KAAKmG,EAE5B,GAGFhrB,KAAKgsB,KAAO,WACV,IA3FoBnC,EAClBiB,EACAllB,EAyFEmmB,EAAWrB,EAAS1qB,MACxB,GAAI+rB,EACF,OAAOA,EAGT,GAAI/rB,KAAKyrB,UACP,OAjGkB5B,EAiGI7pB,KAAKyrB,UAhG3BX,EAAS,IAAIG,WACbrlB,EAAUilB,EAAgBC,GAC9BA,EAAOmB,WAAWpC,GACXjkB,EA8FE,GAAI5F,KAAK8rB,iBACd,OAAOhmB,QAAQC,QA5FrB,SAA+BhL,GAI7B,IAHA,IAAIa,EAAO,IAAIpB,WAAWO,GACtBmxB,EAAQ,IAAItzB,MAAMgD,EAAK3E,QAElBqE,EAAI,EAAGA,EAAIM,EAAK3E,OAAQqE,IAC/B4wB,EAAM5wB,GAAKnE,OAAOC,aAAawE,EAAKN,IAEtC,OAAO4wB,EAAMv0B,KAAK,GACpB,CAoF6Bw0B,CAAsBnsB,KAAK8rB,mBAC7C,GAAI9rB,KAAK2rB,cACd,MAAM,IAAIpzB,MAAM,wCAEhB,OAAOuN,QAAQC,QAAQ/F,KAAKurB,UAEhC,EAEI7B,EAAQK,WACV/pB,KAAK+pB,SAAW,WACd,OAAO/pB,KAAKgsB,OAAOnH,KAAKzd,EAC1B,GAGFpH,KAAKosB,KAAO,WACV,OAAOpsB,KAAKgsB,OAAOnH,KAAKwH,KAAKjJ,MAC/B,EAEOpjB,IACT,CA3MAsqB,EAAQzxB,UAAU2xB,OAAS,SAASnrB,EAAMR,GACxCQ,EAAO6qB,EAAc7qB,GACrBR,EAAQsrB,EAAetrB,GACvB,IAAIytB,EAAWtsB,KAAK+P,IAAI1Q,GACxBW,KAAK+P,IAAI1Q,GAAQitB,EAAWA,EAAW,KAAOztB,EAAQA,CACxD,EAEAyrB,EAAQzxB,UAAkB,OAAI,SAASwG,UAC9BW,KAAK+P,IAAIma,EAAc7qB,GAChC,EAEAirB,EAAQzxB,UAAU8H,IAAM,SAAStB,GAE/B,OADAA,EAAO6qB,EAAc7qB,GACdW,KAAKmQ,IAAI9Q,GAAQW,KAAK+P,IAAI1Q,GAAQ,IAC3C,EAEAirB,EAAQzxB,UAAUsX,IAAM,SAAS9Q,GAC/B,OAAOW,KAAK+P,IAAIhR,eAAemrB,EAAc7qB,GAC/C,EAEAirB,EAAQzxB,UAAUgD,IAAM,SAASwD,EAAMR,GACrCmB,KAAK+P,IAAIma,EAAc7qB,IAAS8qB,EAAetrB,EACjD,EAEAyrB,EAAQzxB,UAAUuH,QAAU,SAASiD,EAAUkpB,GAC7C,IAAK,IAAIltB,KAAQW,KAAK+P,IAChB/P,KAAK+P,IAAIhR,eAAeM,IAC1BgE,EAAStK,KAAKwzB,EAASvsB,KAAK+P,IAAI1Q,GAAOA,EAAMW,KAGnD,EAEAsqB,EAAQzxB,UAAUsO,KAAO,WACvB,IAAIT,EAAQ,GAIZ,OAHA1G,KAAKI,SAAQ,SAASvB,EAAOQ,GAC3BqH,EAAMhP,KAAK2H,EACb,IACO+qB,EAAY1jB,EACrB,EAEA4jB,EAAQzxB,UAAU8C,OAAS,WACzB,IAAI+K,EAAQ,GAIZ,OAHA1G,KAAKI,SAAQ,SAASvB,GACpB6H,EAAMhP,KAAKmH,EACb,IACOurB,EAAY1jB,EACrB,EAEA4jB,EAAQzxB,UAAUyO,QAAU,WAC1B,IAAIZ,EAAQ,GAIZ,OAHA1G,KAAKI,SAAQ,SAASvB,EAAOQ,GAC3BqH,EAAMhP,KAAK,CAAC2H,EAAMR,GACpB,IACOurB,EAAY1jB,EACrB,EAEIgjB,EAAQE,WACVU,EAAQzxB,UAAUrC,OAAOiW,UAAY6d,EAAQzxB,UAAUyO,SAqJzD,IAAIklB,EAAU,CAAC,SAAU,MAAO,OAAQ,UAAW,OAAQ,OAO3D,SAASC,EAAQ1wB,EAAOiG,GAEtB,IAPuB2gB,EACnB+J,EAMA/B,GADJ3oB,EAAUA,GAAW,CAAC,GACH2oB,KAEnB,GAAI5uB,aAAiB0wB,EAAS,CAC5B,GAAI1wB,EAAM6uB,SACR,MAAM,IAAIjpB,UAAU,gBAEtB3B,KAAK2sB,IAAM5wB,EAAM4wB,IACjB3sB,KAAK4sB,YAAc7wB,EAAM6wB,YACpB5qB,EAAQuoB,UACXvqB,KAAKuqB,QAAU,IAAID,EAAQvuB,EAAMwuB,UAEnCvqB,KAAK2iB,OAAS5mB,EAAM4mB,OACpB3iB,KAAK+gB,KAAOhlB,EAAMglB,KAClB/gB,KAAKmf,OAASpjB,EAAMojB,OACfwL,GAA2B,MAAnB5uB,EAAMuvB,YACjBX,EAAO5uB,EAAMuvB,UACbvvB,EAAM6uB,UAAW,EAErB,MACE5qB,KAAK2sB,IAAMx1B,OAAO4E,GAYpB,GATAiE,KAAK4sB,YAAc5qB,EAAQ4qB,aAAe5sB,KAAK4sB,aAAe,eAC1D5qB,EAAQuoB,SAAYvqB,KAAKuqB,UAC3BvqB,KAAKuqB,QAAU,IAAID,EAAQtoB,EAAQuoB,UAErCvqB,KAAK2iB,QAjCkBA,EAiCO3gB,EAAQ2gB,QAAU3iB,KAAK2iB,QAAU,MAhC3D+J,EAAU/J,EAAOkK,cACdL,EAAQjtB,QAAQmtB,IAAY,EAAIA,EAAU/J,GAgCjD3iB,KAAK+gB,KAAO/e,EAAQ+e,MAAQ/gB,KAAK+gB,MAAQ,KACzC/gB,KAAKmf,OAASnd,EAAQmd,QAAUnf,KAAKmf,OACrCnf,KAAK8sB,SAAW,MAEK,QAAhB9sB,KAAK2iB,QAAoC,SAAhB3iB,KAAK2iB,SAAsBgI,EACvD,MAAM,IAAIhpB,UAAU,6CAEtB3B,KAAKqrB,UAAUV,EACjB,CAMA,SAASvjB,EAAOujB,GACd,IAAIoC,EAAO,IAAIrB,SAYf,OAXAf,EACG1c,OACAhP,MAAM,KACNmB,SAAQ,SAAS+X,GAChB,GAAIA,EAAO,CACT,IAAIlZ,EAAQkZ,EAAMlZ,MAAM,KACpBI,EAAOJ,EAAMG,QAAQqB,QAAQ,MAAO,KACpC5B,EAAQI,EAAMtH,KAAK,KAAK8I,QAAQ,MAAO,KAC3CssB,EAAKvC,OAAOwC,mBAAmB3tB,GAAO2tB,mBAAmBnuB,GAC3D,CACF,IACKkuB,CACT,CAoBA,SAAS/uB,EAASivB,EAAUjrB,GACrBA,IACHA,EAAU,CAAC,GAGbhC,KAAK+C,KAAO,UACZ/C,KAAKsJ,YAA4BzD,IAAnB7D,EAAQsH,OAAuB,IAAMtH,EAAQsH,OAC3DtJ,KAAKktB,GAAKltB,KAAKsJ,QAAU,KAAOtJ,KAAKsJ,OAAS,IAC9CtJ,KAAKmtB,WAAa,eAAgBnrB,EAAUA,EAAQmrB,WAAa,KACjEntB,KAAKuqB,QAAU,IAAID,EAAQtoB,EAAQuoB,SACnCvqB,KAAK2sB,IAAM3qB,EAAQ2qB,KAAO,GAC1B3sB,KAAKqrB,UAAU4B,EACjB,CAlDAR,EAAQ5zB,UAAUu0B,MAAQ,WACxB,OAAO,IAAIX,EAAQzsB,KAAM,CAAC2qB,KAAM3qB,KAAKsrB,WACvC,EAkCAF,EAAKryB,KAAK0zB,EAAQ5zB,WAgBlBuyB,EAAKryB,KAAKiF,EAASnF,WAEnBmF,EAASnF,UAAUu0B,MAAQ,WACzB,OAAO,IAAIpvB,EAASgC,KAAKsrB,UAAW,CAClChiB,OAAQtJ,KAAKsJ,OACb6jB,WAAYntB,KAAKmtB,WACjB5C,QAAS,IAAID,EAAQtqB,KAAKuqB,SAC1BoC,IAAK3sB,KAAK2sB,KAEd,EAEA3uB,EAASyY,MAAQ,WACf,IAAI4W,EAAW,IAAIrvB,EAAS,KAAM,CAACsL,OAAQ,EAAG6jB,WAAY,KAE1D,OADAE,EAAStqB,KAAO,QACTsqB,CACT,EAEA,IAAIC,EAAmB,CAAC,IAAK,IAAK,IAAK,IAAK,KAE5CtvB,EAASuvB,SAAW,SAASZ,EAAKrjB,GAChC,IAA0C,IAAtCgkB,EAAiB/tB,QAAQ+J,GAC3B,MAAM,IAAIsH,WAAW,uBAGvB,OAAO,IAAI5S,EAAS,KAAM,CAACsL,OAAQA,EAAQihB,QAAS,CAACrK,SAAUyM,IACjE,EAEArzB,EAAQmwB,aAAeJ,EAAKI,aAC5B,IACE,IAAInwB,EAAQmwB,YACd,CAAE,MAAOvnB,GACP5I,EAAQmwB,aAAe,SAAS/L,EAASre,GACvCW,KAAK0d,QAAUA,EACf1d,KAAKX,KAAOA,EACZ,IAAIoX,EAAQle,MAAMmlB,GAClB1d,KAAKyd,MAAQhH,EAAMgH,KACrB,EACAnkB,EAAQmwB,aAAa5wB,UAAY6F,OAAOC,OAAOpG,MAAMM,WACrDS,EAAQmwB,aAAa5wB,UAAUiH,YAAcxG,EAAQmwB,YACvD,CAEA,SAASD,EAAMztB,EAAOyxB,GACpB,OAAO,IAAI1nB,SAAQ,SAASC,EAASC,GACnC,IAAIkb,EAAU,IAAIuL,EAAQ1wB,EAAOyxB,GAEjC,GAAItM,EAAQ/B,QAAU+B,EAAQ/B,OAAOG,QACnC,OAAOtZ,EAAO,IAAI1M,EAAQmwB,aAAa,UAAW,eAGpD,IAAIgE,EAAM,IAAIC,eAEd,SAASC,IACPF,EAAIv1B,OACN,CAEAu1B,EAAI1C,OAAS,WACX,IAxFgB6C,EAChBrD,EAuFIvoB,EAAU,CACZsH,OAAQmkB,EAAInkB,OACZ6jB,WAAYM,EAAIN,WAChB5C,SA3FcqD,EA2FQH,EAAII,yBAA2B,GA1FvDtD,EAAU,IAAID,EAGQsD,EAAWntB,QAAQ,eAAgB,KACzCxB,MAAM,SAASmB,SAAQ,SAAS/H,GAClD,IAAId,EAAQc,EAAK4G,MAAM,KACnB8C,EAAMxK,EAAM6H,QAAQ6O,OACxB,GAAIlM,EAAK,CACP,IAAIlD,EAAQtH,EAAMI,KAAK,KAAKsW,OAC5Bsc,EAAQC,OAAOzoB,EAAKlD,EACtB,CACF,IACO0rB,IAgFHvoB,EAAQ2qB,IAAM,gBAAiBc,EAAMA,EAAIK,YAAc9rB,EAAQuoB,QAAQ5pB,IAAI,iBAC3E,IAAIgqB,EAAO,aAAc8C,EAAMA,EAAIJ,SAAWI,EAAIM,aAClDhoB,EAAQ,IAAI/H,EAAS2sB,EAAM3oB,GAC7B,EAEAyrB,EAAIjN,QAAU,WACZxa,EAAO,IAAIrE,UAAU,0BACvB,EAEA8rB,EAAIO,UAAY,WACdhoB,EAAO,IAAIrE,UAAU,0BACvB,EAEA8rB,EAAItM,QAAU,WACZnb,EAAO,IAAI1M,EAAQmwB,aAAa,UAAW,cAC7C,EAEAgE,EAAIrjB,KAAK8W,EAAQyB,OAAQzB,EAAQyL,KAAK,GAEV,YAAxBzL,EAAQ0L,YACVa,EAAIQ,iBAAkB,EACW,SAAxB/M,EAAQ0L,cACjBa,EAAIQ,iBAAkB,GAGpB,iBAAkBR,GAAO/D,EAAQG,OACnC4D,EAAIS,aAAe,QAGrBhN,EAAQqJ,QAAQnqB,SAAQ,SAASvB,EAAOQ,GACtCouB,EAAIU,iBAAiB9uB,EAAMR,EAC7B,IAEIqiB,EAAQ/B,SACV+B,EAAQ/B,OAAOE,iBAAiB,QAASsO,GAEzCF,EAAIW,mBAAqB,WAEA,IAAnBX,EAAIY,YACNnN,EAAQ/B,OAAOC,oBAAoB,QAASuO,EAEhD,GAGFF,EAAIa,UAAkC,IAAtBpN,EAAQoK,UAA4B,KAAOpK,EAAQoK,UACrE,GACF,CAEA9B,EAAM+E,UAAW,EAEZlF,EAAKG,QACRH,EAAKG,MAAQA,EACbH,EAAKiB,QAAUA,EACfjB,EAAKoD,QAAUA,EACfpD,EAAKrrB,SAAWA,GAGlB1E,EAAQgxB,QAAUA,EAClBhxB,EAAQmzB,QAAUA,EAClBnzB,EAAQ0E,SAAWA,EACnB1E,EAAQkwB,MAAQA,EAEhB9qB,OAAO2B,eAAe/G,EAAS,aAAc,CAAEuF,OAAO,GAIvD,CAhhBgB,CAghBd,CAAC,EACH,CAnhBD,CAmhBGyqB,GACHA,EAASE,MAAMgF,UAAW,SAEnBlF,EAASE,MAAM+E,SAGtB,IAAIE,EAAMnF,GACVhwB,EAAUm1B,EAAIjF,OACd,QAAkBiF,EAAIjF,MACtBlwB,EAAQkwB,MAAQiF,EAAIjF,MACpBlwB,EAAQgxB,QAAUmE,EAAInE,QACtBhxB,EAAQmzB,QAAUgC,EAAIhC,QACtBnzB,EAAQ0E,SAAWywB,EAAIzwB,SACvBS,EAAOnF,QAAUA,kCCtiBjB,MAEMo1B,EAAmB,KACxB,MAAMjY,EAAQ,IAAIle,MAAM,iBAExB,OADAke,EAAMpX,KAAO,aACNoX,CAAK,EAGPkY,EAAc,EAAEC,aAAcC,EAAcC,WAAYjzB,EAAKkzB,iBAAiB,CAACC,GAAKnwB,QAAOsgB,UAAU,CAAC,KAC3G,GAAIA,GAAUA,EAAOG,QACpB,OAAOxZ,QAAQE,OAAO0oB,KAGvB,IAAIO,EACAC,EACAC,EACJ,MAAMjsB,EAAQ2rB,GAAgBD,aAExBQ,EAAiB,KACtBlsB,EAAM+rB,GACNE,EAAST,IAAmB,EASvBW,EAAe,IAAIvpB,SAAQ,CAACC,EAASC,KAC1CkpB,EAAS,KANL/P,GACHA,EAAOC,oBAAoB,QAASgQ,GAOhCL,EACHhpB,EAAQlH,GAERmH,EAAOnH,EACR,EAGDswB,EAAWnpB,EACXipB,GAAapzB,GAAOizB,YAAYI,EAAQF,EAAG,IAa5C,OAVI7P,GACHA,EAAOE,iBAAiB,QAAS+P,EAAgB,CAACrkB,MAAM,IAGzDskB,EAAansB,MAAQ,KACpBA,EAAM+rB,GACNA,EAAY,KACZC,GAAQ,EAGFG,CAAY,EAGdC,EAAmBC,IACxB,MAAMC,EAAQb,EAAY,IAAIY,EAAaR,aAAa,IAGxD,OAFAS,EAAMxpB,OAAS2oB,EAAY,IAAIY,EAAaR,aAAa,IACzDS,EAAMzgB,MAAQ,CAAC0gB,EAASC,EAAS1tB,IAAYwtB,EA3DxB,EAACC,EAASC,IAAYz2B,KAAK8kB,MAAO9kB,KAAKgwB,UAAYyG,EAAUD,EAAU,GAAMA,GA2D/CE,CAAcF,EAASC,GAAU1tB,GAC7EwtB,CAAK,EAGPA,EAAQF,IACdE,EAAMF,iBAAmBA,EAEzB7wB,EAAOnF,QAAUk2B,EAEjB/wB,EAAOnF,QAAP,QAAyBk2B,kCClEzB,SAASI,EAAOpd,EAAOxQ,GACjBA,EAAUA,GAAW,CAAC,EAC1BhC,KAAK6vB,UAAY7tB,EAAQ8tB,SAEzB9vB,KAAK+vB,MAAQ,EACb/vB,KAAKgwB,MAAQ,EAETp3B,MAAM+S,QAAQ6G,GAChBxS,KAAKiwB,WAAWzd,IAEhBxS,KAAKkwB,cAAgB,EACrBlwB,KAAKmwB,MAAQ,IAAIv3B,MAAM,GAE3B,CAgBAg3B,EAAO/2B,UAAUu3B,OAAS,SAAgB5O,GACxC,IAAIlmB,EAAIkmB,EAER,GAAKlmB,KAAW,EAAJA,GAAZ,CAGA,IAAIU,EAAMgE,KAAKvI,OACf,KAAI6D,GAAKU,GAAOV,GAAKU,GAGrB,OAFIV,EAAI,IAAGA,GAAKU,GAChBV,EAAK0E,KAAK+vB,MAAQz0B,EAAK0E,KAAKkwB,cACrBlwB,KAAKmwB,MAAM70B,EALlB,CAMF,EAOAs0B,EAAO/2B,UAAU8H,IAAM,SAAarF,GAClC,OAAO0E,KAAKowB,OAAO90B,EACrB,EAMAs0B,EAAO/2B,UAAUw3B,KAAO,WACtB,GAAIrwB,KAAK+vB,QAAU/vB,KAAKgwB,MACxB,OAAOhwB,KAAKmwB,MAAMnwB,KAAK+vB,MACzB,EAMAH,EAAO/2B,UAAUy3B,UAAY,WAC3B,OAAOtwB,KAAKqwB,MACd,EAMAT,EAAO/2B,UAAU03B,SAAW,WAC1B,OAAOvwB,KAAKowB,QAAQ,EACtB,EAMA1xB,OAAO2B,eAAeuvB,EAAO/2B,UAAW,SAAU,CAChD8H,IAAK,WACH,OAAOX,KAAKvI,MACd,IAOFm4B,EAAO/2B,UAAUpB,KAAO,WACtB,OAAIuI,KAAK+vB,QAAU/vB,KAAKgwB,MAAc,EAClChwB,KAAK+vB,MAAQ/vB,KAAKgwB,MAAchwB,KAAKgwB,MAAQhwB,KAAK+vB,MAC1C/vB,KAAKkwB,cAAgB,GAAKlwB,KAAK+vB,MAAQ/vB,KAAKgwB,MAC1D,EAMAJ,EAAO/2B,UAAU23B,QAAU,SAAiBxpB,GAC1C,GAAyB,IAArBhO,UAAU/B,OAAc,OAAO+I,KAAKvI,OACxC,IAAIuE,EAAMgE,KAAKmwB,MAAMl5B,OAKrB,OAJA+I,KAAK+vB,MAAS/vB,KAAK+vB,MAAQ,EAAI/zB,EAAOgE,KAAKkwB,cAC3ClwB,KAAKmwB,MAAMnwB,KAAK+vB,OAAS/oB,EACrBhH,KAAKgwB,QAAUhwB,KAAK+vB,OAAO/vB,KAAKywB,aAChCzwB,KAAK6vB,WAAa7vB,KAAKvI,OAASuI,KAAK6vB,WAAW7vB,KAAK0wB,MACrD1wB,KAAK+vB,MAAQ/vB,KAAKgwB,MAAchwB,KAAKgwB,MAAQhwB,KAAK+vB,MAC1C/vB,KAAKkwB,cAAgB,GAAKlwB,KAAK+vB,MAAQ/vB,KAAKgwB,MAC1D,EAOAJ,EAAO/2B,UAAUuG,MAAQ,WACvB,IAAIuxB,EAAO3wB,KAAK+vB,MAChB,GAAIY,IAAS3wB,KAAKgwB,MAAlB,CACA,IAAIhpB,EAAOhH,KAAKmwB,MAAMQ,GAItB,OAHA3wB,KAAKmwB,MAAMQ,QAAQ9qB,EACnB7F,KAAK+vB,MAASY,EAAO,EAAK3wB,KAAKkwB,cAC3BS,EAAO,GAAK3wB,KAAKgwB,MAAQ,KAAShwB,KAAKgwB,OAAShwB,KAAKmwB,MAAMl5B,SAAW,GAAG+I,KAAK4wB,eAC3E5pB,CALkC,CAM3C,EAMA4oB,EAAO/2B,UAAUnB,KAAO,SAAcsP,GACpC,GAAyB,IAArBhO,UAAU/B,OAAc,OAAO+I,KAAKvI,OACxC,IAAIo5B,EAAO7wB,KAAKgwB,MAShB,OARAhwB,KAAKmwB,MAAMU,GAAQ7pB,EACnBhH,KAAKgwB,MAASa,EAAO,EAAK7wB,KAAKkwB,cAC3BlwB,KAAKgwB,QAAUhwB,KAAK+vB,OACtB/vB,KAAKywB,aAEHzwB,KAAK6vB,WAAa7vB,KAAKvI,OAASuI,KAAK6vB,WACvC7vB,KAAKZ,QAEHY,KAAK+vB,MAAQ/vB,KAAKgwB,MAAchwB,KAAKgwB,MAAQhwB,KAAK+vB,MAC1C/vB,KAAKkwB,cAAgB,GAAKlwB,KAAK+vB,MAAQ/vB,KAAKgwB,MAC1D,EAOAJ,EAAO/2B,UAAU63B,IAAM,WACrB,IAAIG,EAAO7wB,KAAKgwB,MAChB,GAAIa,IAAS7wB,KAAK+vB,MAAlB,CACA,IAAI/zB,EAAMgE,KAAKmwB,MAAMl5B,OACrB+I,KAAKgwB,MAASa,EAAO,EAAI70B,EAAOgE,KAAKkwB,cACrC,IAAIlpB,EAAOhH,KAAKmwB,MAAMnwB,KAAKgwB,OAG3B,OAFAhwB,KAAKmwB,MAAMnwB,KAAKgwB,YAASnqB,EACrB7F,KAAK+vB,MAAQ,GAAKc,EAAO,KAASA,GAAQ70B,IAAQ,GAAGgE,KAAK4wB,eACvD5pB,CANkC,CAO3C,EAQA4oB,EAAO/2B,UAAUi4B,UAAY,SAAmBtP,GAC9C,IAAIlmB,EAAIkmB,EAER,GAAKlmB,KAAW,EAAJA,IAGR0E,KAAK+vB,QAAU/vB,KAAKgwB,MAAxB,CACA,IAAIv4B,EAAOuI,KAAKvI,OACZuE,EAAMgE,KAAKmwB,MAAMl5B,OACrB,KAAIqE,GAAK7D,GAAQ6D,GAAK7D,GAAtB,CACI6D,EAAI,IAAGA,GAAK7D,GAChB6D,EAAK0E,KAAK+vB,MAAQz0B,EAAK0E,KAAKkwB,cAC5B,IACItoB,EADAZ,EAAOhH,KAAKmwB,MAAM70B,GAEtB,GAAIkmB,EAAQ/pB,EAAO,EAAG,CACpB,IAAKmQ,EAAI4Z,EAAO5Z,EAAI,EAAGA,IACrB5H,KAAKmwB,MAAM70B,GAAK0E,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,eAEtDlwB,KAAKmwB,MAAM70B,QAAK,EAChB0E,KAAK+vB,MAAS/vB,KAAK+vB,MAAQ,EAAI/zB,EAAOgE,KAAKkwB,aAC7C,KAAO,CACL,IAAKtoB,EAAInQ,EAAO,EAAI+pB,EAAO5Z,EAAI,EAAGA,IAChC5H,KAAKmwB,MAAM70B,GAAK0E,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,eAEtDlwB,KAAKmwB,MAAM70B,QAAK,EAChB0E,KAAKgwB,MAAShwB,KAAKgwB,MAAQ,EAAIh0B,EAAOgE,KAAKkwB,aAC7C,CACA,OAAOlpB,CAlBkC,CAHG,CAsB9C,EAUA4oB,EAAO/2B,UAAUk4B,OAAS,SAAgBvP,EAAO9b,GAC/C,IACIsrB,EADA11B,EAAIkmB,EAEJyP,EAAYvrB,EAEhB,GAAKpK,KAAW,EAAJA,IAGR0E,KAAK+vB,QAAU/vB,KAAKgwB,MAAxB,CACA,IAAIv4B,EAAOuI,KAAKvI,OACZuE,EAAMgE,KAAKmwB,MAAMl5B,OACrB,KAAIqE,GAAK7D,GAAQ6D,GAAK7D,GAAQiO,EAAQ,GAAtC,CAEA,GADIpK,EAAI,IAAGA,GAAK7D,GACF,IAAViO,IAAgBA,EAGlB,OAFAsrB,EAAU,IAAIp4B,MAAM,IACZ,GAAKoH,KAAK8wB,UAAUx1B,GACrB01B,EAET,GAAU,IAAN11B,GAAWA,EAAIoK,GAASjO,EAG1B,OAFAu5B,EAAUhxB,KAAKkxB,UACflxB,KAAKkD,QACE8tB,EAGT,IAAIppB,EAEJ,IAHItM,EAAIoK,EAAQjO,IAAMiO,EAAQjO,EAAO6D,GAErC01B,EAAU,IAAIp4B,MAAM8M,GACfkC,EAAI,EAAGA,EAAIlC,EAAOkC,IACrBopB,EAAQppB,GAAK5H,KAAKmwB,MAAOnwB,KAAK+vB,MAAQz0B,EAAIsM,EAAK5H,KAAKkwB,eAGtD,GADA50B,EAAK0E,KAAK+vB,MAAQz0B,EAAK0E,KAAKkwB,cACxB1O,EAAQ9b,IAAUjO,EAAM,CAE1B,IADAuI,KAAKgwB,MAAShwB,KAAKgwB,MAAQtqB,EAAQ1J,EAAOgE,KAAKkwB,cAC1CtoB,EAAIlC,EAAOkC,EAAI,EAAGA,IACrB5H,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,oBAAiB,EAEvD,OAAOc,CACT,CACA,GAAc,IAAVxP,EAAa,CAEf,IADAxhB,KAAK+vB,MAAS/vB,KAAK+vB,MAAQrqB,EAAQ1J,EAAOgE,KAAKkwB,cAC1CtoB,EAAIlC,EAAQ,EAAGkC,EAAI,EAAGA,IACzB5H,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,oBAAiB,EAEvD,OAAOc,CACT,CACA,GAAI11B,EAAI7D,EAAO,EAAG,CAEhB,IADAuI,KAAK+vB,MAAS/vB,KAAK+vB,MAAQvO,EAAQ9b,EAAQ1J,EAAOgE,KAAKkwB,cAClDtoB,EAAI4Z,EAAO5Z,EAAI,EAAGA,IACrB5H,KAAKwwB,QAAQxwB,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,gBAGnD,IADA50B,EAAK0E,KAAK+vB,MAAQ,EAAI/zB,EAAOgE,KAAKkwB,cAC3Be,EAAY,GACjBjxB,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,oBAAiB,EACrDe,IAEEzP,EAAQ,IAAGxhB,KAAKgwB,MAAQ10B,EAC9B,KAAO,CAGL,IAFA0E,KAAKgwB,MAAQ10B,EACbA,EAAKA,EAAIoK,EAAQ1J,EAAOgE,KAAKkwB,cACxBtoB,EAAInQ,GAAQiO,EAAQ8b,GAAQ5Z,EAAI,EAAGA,IACtC5H,KAAKtI,KAAKsI,KAAKmwB,MAAM70B,MAGvB,IADAA,EAAI0E,KAAKgwB,MACFiB,EAAY,GACjBjxB,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,oBAAiB,EACrDe,GAEJ,CAEA,OADIjxB,KAAK+vB,MAAQ,GAAK/vB,KAAKgwB,MAAQ,KAAShwB,KAAKgwB,OAASh0B,IAAQ,GAAGgE,KAAK4wB,eACnEI,CAzD+C,CAHV,CA6D9C,EAaApB,EAAO/2B,UAAUupB,OAAS,SAAgBZ,EAAO9b,GAC/C,IAAIpK,EAAIkmB,EAER,GAAKlmB,KAAW,EAAJA,GAAZ,CAGA,IAAI7D,EAAOuI,KAAKvI,OAEhB,GADI6D,EAAI,IAAGA,GAAK7D,KACZ6D,EAAI7D,GAAR,CACA,GAAIuB,UAAU/B,OAAS,EAAG,CACxB,IAAI2Q,EACAupB,EACAH,EACAI,EAAUp4B,UAAU/B,OACpB+E,EAAMgE,KAAKmwB,MAAMl5B,OACjBo6B,EAAkB,EACtB,IAAK55B,GAAQ6D,EAAI7D,EAAO,EAAG,CAEzB,IADA05B,EAAO,IAAIv4B,MAAM0C,GACZsM,EAAI,EAAGA,EAAItM,EAAGsM,IACjBupB,EAAKvpB,GAAK5H,KAAKmwB,MAAOnwB,KAAK+vB,MAAQnoB,EAAK5H,KAAKkwB,eAW/C,IATc,IAAVxqB,GACFsrB,EAAU,GACN11B,EAAI,IACN0E,KAAK+vB,MAAS/vB,KAAK+vB,MAAQz0B,EAAIU,EAAOgE,KAAKkwB,iBAG7Cc,EAAUhxB,KAAK+wB,OAAOz1B,EAAGoK,GACzB1F,KAAK+vB,MAAS/vB,KAAK+vB,MAAQz0B,EAAIU,EAAOgE,KAAKkwB,eAEtCkB,EAAUC,GACfrxB,KAAKwwB,QAAQx3B,YAAYo4B,IAE3B,IAAKxpB,EAAItM,EAAGsM,EAAI,EAAGA,IACjB5H,KAAKwwB,QAAQW,EAAKvpB,EAAI,GAE1B,KAAO,CAEL,IAAI0pB,GADJH,EAAO,IAAIv4B,MAAMnB,GAAQ6D,EAAIoK,KACbzO,OAChB,IAAK2Q,EAAI,EAAGA,EAAI0pB,EAAM1pB,IACpBupB,EAAKvpB,GAAK5H,KAAKmwB,MAAOnwB,KAAK+vB,MAAQz0B,EAAIoK,EAAQkC,EAAK5H,KAAKkwB,eAW3D,IATc,IAAVxqB,GACFsrB,EAAU,GACN11B,GAAK7D,IACPuI,KAAKgwB,MAAShwB,KAAK+vB,MAAQz0B,EAAIU,EAAOgE,KAAKkwB,iBAG7Cc,EAAUhxB,KAAK+wB,OAAOz1B,EAAGoK,GACzB1F,KAAKgwB,MAAShwB,KAAKgwB,MAAQsB,EAAOt1B,EAAOgE,KAAKkwB,eAEzCmB,EAAkBD,GACvBpxB,KAAKtI,KAAKsB,UAAUq4B,MAEtB,IAAKzpB,EAAI,EAAGA,EAAI0pB,EAAM1pB,IACpB5H,KAAKtI,KAAKy5B,EAAKvpB,GAEnB,CACA,OAAOopB,CACT,CACE,OAAOhxB,KAAK+wB,OAAOz1B,EAAGoK,EApDG,CAH3B,CAyDF,EAKAkqB,EAAO/2B,UAAUqK,MAAQ,WACvBlD,KAAKmwB,MAAQ,IAAIv3B,MAAMoH,KAAKmwB,MAAMl5B,QAClC+I,KAAK+vB,MAAQ,EACb/vB,KAAKgwB,MAAQ,CACf,EAMAJ,EAAO/2B,UAAU04B,QAAU,WACzB,OAAOvxB,KAAK+vB,QAAU/vB,KAAKgwB,KAC7B,EAMAJ,EAAO/2B,UAAUq4B,QAAU,WACzB,OAAOlxB,KAAKwxB,YAAW,EACzB,EAcA5B,EAAO/2B,UAAUo3B,WAAa,SAAoBzd,GAChD,IAAIvb,EAASub,EAAMvb,OACf64B,EAAW9vB,KAAKyxB,cAAcx6B,GAElC+I,KAAKmwB,MAAQ,IAAIv3B,MAAMk3B,GACvB9vB,KAAKkwB,cAAgBJ,EAAW,EAChC9vB,KAAKgwB,MAAQ/4B,EAEb,IAAK,IAAIqE,EAAI,EAAGA,EAAIrE,EAAQqE,IAAK0E,KAAKmwB,MAAM70B,GAAKkX,EAAMlX,EACzD,EASAs0B,EAAO/2B,UAAU24B,WAAa,SAAoBE,EAAUj6B,GAC1D,IAAI+mB,EAAMxe,KAAKmwB,MACXL,EAAWtR,EAAIvnB,OACfA,EAAS+I,KAAK/I,OAIlB,IAHAQ,GAAcR,IAGFA,GAAU+I,KAAK+vB,MAAQ/vB,KAAKgwB,MAEtC,OAAOhwB,KAAKmwB,MAAMr3B,MAAMkH,KAAK+vB,MAAO/vB,KAAKgwB,OAG3C,IAGI10B,EAHAq2B,EAAO,IAAI/4B,MAAMnB,GAEjBmQ,EAAI,EAER,GAAI8pB,GAAY1xB,KAAK+vB,MAAQ/vB,KAAKgwB,MAAO,CACvC,IAAK10B,EAAI0E,KAAK+vB,MAAOz0B,EAAIw0B,EAAUx0B,IAAKq2B,EAAK/pB,KAAO4W,EAAIljB,GACxD,IAAKA,EAAI,EAAGA,EAAI0E,KAAKgwB,MAAO10B,IAAKq2B,EAAK/pB,KAAO4W,EAAIljB,EACnD,MACE,IAAKA,EAAI0E,KAAK+vB,MAAOz0B,EAAI0E,KAAKgwB,MAAO10B,IAAKq2B,EAAK/pB,KAAO4W,EAAIljB,GAG5D,OAAOq2B,CACT,EAMA/B,EAAO/2B,UAAU43B,WAAa,WAC5B,GAAkB,GAAdzwB,KAAK+vB,MAAY,CAEnB,IAAI6B,EAAU5xB,KAAKwxB,YAAW,EAAMxxB,KAAKmwB,MAAMl5B,QAAU,GAEzD+I,KAAKgwB,MAAQhwB,KAAKmwB,MAAMl5B,OACxB+I,KAAK+vB,MAAQ,EAEb/vB,KAAKmwB,MAAQyB,CACf,MACE5xB,KAAKgwB,MAAQhwB,KAAKmwB,MAAMl5B,OACxB+I,KAAKmwB,MAAMl5B,SAAW,EAGxB+I,KAAKkwB,cAAiBlwB,KAAKkwB,eAAiB,EAAK,CACnD,EAMAN,EAAO/2B,UAAU+3B,aAAe,WAC9B5wB,KAAKmwB,MAAMl5B,UAAY,EACvB+I,KAAKkwB,iBAAmB,CAC1B,EAQAN,EAAO/2B,UAAU44B,cAAgB,SAAuBI,GACtD,IACIC,EAAW,GADJ74B,KAAKN,IAAIk5B,GAAO54B,KAAKN,IAAI,GACR,EAE5B,OAAOM,KAAKue,IAAIsa,EAAU,EAC5B,EAEArzB,EAAOnF,QAAUs2B,uFChejB,MAAMrZ,EAAE,oBAAoByI,WAAWA,WAAW,oBAAoBqK,KAAKA,KAAK,oBAAoB0I,OAAOA,OAAO,EAAAC,EAAOC,EAAEvzB,OAAOyI,KAAK1O,EAAEG,MAAM+S,QAAQ,SAAS2c,EAAE/R,EAAE9d,GAAG,MAAM,iBAAiBA,GAAGw5B,EAAEx5B,GAAG2H,SAAQ,SAAU6xB,GAAG1b,EAAE0b,GAAGx5B,EAAEw5B,EAAG,IAAG1b,CAAC,CAAC,oBAAoBzQ,SAASyQ,EAAEzQ,UAAUyQ,EAAEzQ,QAAQA,SAAS,MAAMue,EAAE3lB,OAAOwzB,eAAe52B,EAAE,CAAC,EAAEyD,eAAe,SAAShB,EAAEwY,EAAE0b,GAAG,OAAO32B,EAAEvC,KAAKwd,EAAE0b,EAAE,CAAC,SAASnb,EAAEP,EAAE9d,GAAG,mBAAmBA,IAAIA,EAAEA,EAAE4rB,EAAE9N,MAAM,oBAAoB4b,QAAQF,EAAEE,QAAQC,SAAS35B,GAAG2H,SAAS6xB,IAAI9I,EAAE5S,EAAE0b,EAAEx5B,EAAEw5B,GAAI,GAAE,CAAC,MAAMI,EAAE3zB,OAAO2B,eAAe,SAAS8oB,EAAE5S,EAAE0b,EAAEx5B,EAAE4rB,GAAGgO,EAAE9b,EAAE0b,EAAE3J,EAAE7vB,GAAGsF,EAAEtF,EAAE,QAAQ,mBAAmBA,EAAEkI,IAAI,CAACA,IAAIlI,EAAEkI,IAAI9E,IAAIpD,EAAEoD,IAAI2hB,cAAa,GAAI,CAAC3e,MAAMpG,EAAE+kB,cAAa,EAAGtd,UAAS,GAAImkB,GAAG,CAAC,SAASlP,EAAEoB,GAAG,MAAM,CAACjH,KAAK,SAAS2iB,GAAG,OAAO1b,EAAE1d,UAAU6F,OAAOC,OAAOszB,EAAEp5B,WAAWswB,EAAE5S,EAAE1d,UAAU,cAAc0d,GAAG,CAAC+b,OAAOxb,EAAE1a,KAAK,KAAKma,EAAE1d,WAAW,EAAE,CAAC,MAAM05B,EAAE7zB,OAAO4B,yBAAyB,SAASkyB,EAAEjc,EAAE0b,GAAG,IAAIx5B,EAAE,OAAO85B,EAAEhc,EAAE0b,KAAKx5B,EAAE4rB,EAAE9N,KAAKic,EAAE/5B,EAAEw5B,EAAE,CAAC,MAAMQ,EAAE,GAAG35B,MAAM,SAASyC,EAAEgb,EAAE0b,EAAEx5B,GAAG,OAAOg6B,EAAE15B,KAAKwd,EAAE0b,EAAEx5B,EAAE,CAAC,SAASse,EAAER,EAAE0b,GAAG,OAAOA,EAAE1b,EAAE,CAAC,SAAShD,EAAEgD,GAAG,IAAIA,EAAE,MAAM,IAAIhe,MAAM,mBAAmB,CAAC,SAASuwB,EAAEmJ,GAAG1b,EAAEmc,aAAaA,aAAaT,GAAGnD,WAAWmD,EAAE,EAAE,CAAC,SAASD,EAAEzb,EAAE0b,GAAG,OAAO1b,EAAEmQ,QAAO,CAAEnQ,EAAE9d,EAAE6vB,KAAK,IAAIjE,EAAE4N,EAAEx5B,EAAE6vB,GAAG,OAAOjE,IAAI9N,EAAE8N,EAAE,IAAIA,EAAE,IAAI9N,CAAE,GAAE,CAAC,EAAE,CAAC,SAASxE,EAAEwE,EAAE0b,GAAG,GAAGl0B,EAAEwY,EAAE0b,GAAG,OAAO1b,EAAE0b,GAAG,IAAIA,EAAE,OAAO1b,EAAE,GAAG,iBAAiB0b,EAAE,CAAC,IAAI,IAAIx5B,EAAE,GAAG6vB,EAAE,EAAEjE,EAAE4N,EAAEh7B,OAAOqxB,EAAEjE,IAAIiE,EAAE,CAAC,IAAIhtB,EAAEyW,EAAEwE,EAAE0b,EAAE3J,IAAI7vB,EAAEf,KAAK4D,EAAE,CAAC,OAAO7C,CAAC,CAAC,IAAIqe,EAAEmb,EAAE1yB,QAAQ,KAAK,IAAI,IAAIuX,EAAE,CAAC,IAAIub,EAAE9b,EAAE0b,EAAEvd,OAAO,EAAEoC,IAAI,YAAO,IAASub,OAAE,EAAOtgB,EAAEsgB,EAAEJ,EAAEvd,OAAOoC,EAAE,GAAG,CAAC,CAAC,SAASqJ,EAAE5J,EAAE0b,EAAE3J,GAAG,GAAG/R,QAAG,IAAS0b,MAAM,aAAavzB,UAAUA,OAAOi0B,SAASpc,IAAI,GAAG,iBAAiB0b,GAAG,WAAWA,EAAE,CAAC1e,EAAE,iBAAiB+U,GAAG,WAAWA,GAAG,IAAI,IAAIjE,EAAE,EAAE/oB,EAAE22B,EAAEh7B,OAAOotB,EAAE/oB,IAAI+oB,EAAElE,EAAE5J,EAAE0b,EAAE5N,GAAGiE,EAAEjE,GAAG,KAAK,CAAC,IAAIvN,EAAEmb,EAAE1yB,QAAQ,KAAK,IAAI,IAAIuX,EAAE,CAAC,IAAIub,EAAEJ,EAAEvd,OAAO,EAAEoC,GAAGqS,EAAE8I,EAAEvd,OAAOoC,EAAE,GAAG,GAAG,KAAKqS,OAAE,IAASb,EAAE7vB,EAAE8d,KAAK+N,MAAM7P,SAAS4d,IAAI9b,EAAE6L,OAAOiQ,EAAE,UAAU9b,EAAE8b,GAAG9b,EAAE8b,GAAG/J,MAAM,CAAC,IAAInT,EAAEoB,EAAE8b,GAAGld,GAAGpX,EAAEwY,EAAE8b,KAAKld,EAAEoB,EAAE8b,GAAG,CAAC,GAAGlS,EAAEhL,EAAEgU,EAAEb,EAAE,CAAC,WAAM,IAASA,EAAE7vB,EAAE8d,KAAK+N,MAAM7P,SAASwd,IAAI1b,EAAE6L,OAAO6P,EAAE,UAAU1b,EAAE0b,GAAG1b,EAAE0b,GAAG3J,CAAC,CAAC,CAAC,SAASsK,EAAErc,GAAG,IAAI0b,EAAE,CAAC,EAAE,IAAI,IAAIx5B,KAAK8d,EAAExY,EAAEwY,EAAE9d,KAAKw5B,EAAEx5B,GAAG8d,EAAE9d,IAAI,OAAOw5B,CAAC,CAAC,MAAM5jB,EAAE,GAAGS,OAAO,SAASlH,EAAE2O,GAAG,OAAOlI,EAAEhX,MAAM,GAAGkf,EAAE,CAAC,MAAM6G,EAAE,oJAAoJne,MAAM,KAAK6P,OAAOlH,EAAE,CAAC,EAAE,GAAG,GAAG,IAAImI,KAAKwG,GAAG,CAAC,MAAM,OAAO,SAASxG,KAAKkiB,GAAGA,EAAE1b,EAAE,cAAcvJ,QAAQilB,GAAG1b,EAAE0b,KAAKY,EAAEzV,EAAErN,KAAKkiB,GAAG1b,EAAE0b,KAAKD,EAAE5U,GAAG7G,GAAG,CAACA,GAAE,KAAM,IAAIuc,EAAE,KAAK,SAASC,EAAExc,GAAGuc,EAAE,oBAAoBjL,SAAS,IAAIA,QAAQ,MAAMoK,EAAEe,EAAEzc,GAAG,OAAOuc,EAAE,KAAKb,CAAC,CAAC,SAASe,EAAEzc,GAAG,IAAIA,GAAG,iBAAiBA,EAAE,OAAOA,EAAE,IAAI0b,EAAEa,GAAGA,EAAEnyB,IAAI4V,GAAG,GAAG0b,EAAE,OAAOA,EAAE,GAAGx5B,EAAE8d,GAAG,CAAC0b,EAAE,GAAGa,GAAGA,EAAEj3B,IAAI0a,EAAE0b,GAAG,IAAI,IAAI3J,EAAE,EAAEhtB,EAAEib,EAAEtf,OAAOqxB,EAAEhtB,IAAIgtB,EAAE2J,EAAEv6B,KAAKs7B,EAAEzc,EAAE+R,IAAI,MAAM,GAAGuK,EAAEtzB,QAAQgX,EAAEzW,cAAc,EAAEmyB,EAAE1b,MAAM,CAAC,MAAM9d,EAAE4rB,EAAE9N,GAAG,IAAI,IAAIO,KAAKmb,EAAEx5B,IAAIiG,OAAO7F,UAAU,CAAC,EAAE6F,OAAOC,OAAOlG,GAAGq6B,GAAGA,EAAEj3B,IAAI0a,EAAE0b,GAAG1b,EAAExY,EAAEwY,EAAEO,KAAKmb,EAAEnb,GAAGkc,EAAEzc,EAAEO,IAAI,CAAC,OAAOmb,CAAC,CAAC,MAAMxf,SAASwgB,GAAG,CAAC,EAAE,SAASC,EAAE3c,GAAG,OAAO0c,EAAEl6B,KAAKwd,GAAGzd,MAAM,GAAG,EAAE,CAAC,MAAMsb,EAAE,oBAAoB5d,OAAOA,OAAOiW,SAAS,aAAa0mB,EAAE,iBAAiB/e,EAAE,SAASmC,GAAG,IAAI0b,EAAE,OAAO,MAAM1b,IAAI0b,EAAE1b,EAAEnC,KAAK6d,EAAE56B,MAAMkf,EAAE,EAAE,WAAW,OAAO,IAAI,EAAE6c,EAAE,CAAC,EAAE,SAASC,EAAE9c,GAAG,IAAI0b,EAAE3J,EAAEjE,EAAE/oB,EAAE,GAAG,IAAItC,UAAU/B,OAAO,CAAC,GAAGwB,EAAE8d,GAAG,OAAOA,EAAEzd,QAAQ,GAAGkH,OAAOozB,GAAG,iBAAiB7c,EAAE,MAAM,CAACA,GAAG,GAAGjb,EAAE63B,EAAE5c,GAAG,CAAC,IAAI+R,EAAE,KAAKjE,EAAE/oB,EAAEqK,QAAQ0kB,MAAM/B,EAAE5wB,KAAK2sB,EAAExlB,OAAO,OAAOypB,CAAC,CAAC,GAAG,MAAM/R,EAAE,MAAM,CAACA,GAAG,GAAG,iBAAiB0b,EAAE1b,EAAEtf,QAAQ,CAAC,IAAIqxB,EAAE,IAAI1vB,MAAMq5B,GAAGA,KAAK3J,EAAE2J,GAAG1b,EAAE0b,GAAG,OAAO3J,CAAC,CAAC,MAAM,CAAC/R,EAAE,CAAC,IAAI0b,EAAEj5B,UAAU/B,OAAOqxB,EAAE,IAAI1vB,MAAMq5B,GAAGA,KAAK3J,EAAE2J,GAAGj5B,UAAUi5B,GAAG,OAAO3J,CAAC,CAAC,MAAMgL,EAAE,oBAAoB98B,OAAO+f,GAAG,kBAAkBA,EAAE/f,OAAO+8B,aAAa,KAAI,EAAG,IAAIC,EAAE,oBAAoBtT,UAAU,6CAA6C3f,KAAK2f,SAASuT,MAAM,SAASlK,EAAEhT,EAAE0b,GAAGuB,EAAEjd,EAAEmd,EAAEzB,CAAC,CAAC,IAAIyB,EAAE,KAAI,EAAG,MAAMC,GAAG,IAAIp7B,MAAM,IAAIklB,MAAM,SAASmW,IAAI,GAAGD,EAAE,IAAI,MAAMC,EAAE56B,UAAU,IAAIT,KAAK,CAAC,MAAMge,GAAG,OAAOA,CAAC,CAAC,OAAO,IAAIhe,KAAK,CAAC,SAASs7B,EAAEtd,EAAE0b,GAAG,IAAIx5B,EAAE8d,EAAEkH,MAAM,OAAOhlB,GAAGw5B,EAAEA,GAAG,EAAE,IAAIx5B,EAAE8G,QAAQgX,EAAElX,QAAQ4yB,IAAI1b,EAAElX,KAAKkX,EAAEmH,SAASze,MAAM,MAAMhI,QAAQwB,EAAEwG,MAAM,MAAMnG,MAAMm5B,GAAGjlB,OAAO0mB,GAAG3jB,KAAKwG,GAAG,KAAKA,IAAI5e,KAAK,KAAK,EAAE,CAAC,IAAIm8B,EAAE,CAAC,UAAU,aAAa,OAAO,sBAAsB,WAAW,UAAU,WAAW,eAAe,gBAAgB,QAAQ,UAAU,gBAAgB,SAAS,aAAaC,EAAE,CAAC,SAAS,OAAO,aAAa,gBAAgB,SAAS,UAAU,eAAe,aAAa,iBAAiB,kBAAkB,iBAAiB,cAAc,WAAW,iBAAiB,kBAAkB,gBAAgBjlB,OAAOglB,GAAGE,EAAE,CAACC,eAAe,wDAAwDC,eAAe,2BAA2BC,MAAM,sBAAsBC,oBAAoB,8CAA8CC,WAAW,oEAAoE,SAASC,EAAE/d,EAAE0b,GAAGjyB,KAAKu0B,GAAGX,IAAI5zB,KAAKX,KAAKkX,EAAEvW,KAAK0d,QAAQuU,CAAC,CAAC,SAASuC,EAAEje,EAAE0b,GAAG,OAAO1b,EAAE,aAAa7X,OAAOyI,KAAK8qB,GAAGliB,KAAKwG,GAAG0b,EAAE1b,GAAG9D,aAAazF,QAAO,CAAEuJ,EAAE0b,EAAEx5B,IAAIA,EAAE8G,QAAQgX,KAAK0b,IAAIt6B,KAAK,KAAK,CAAC,SAAS88B,EAAEle,EAAE0b,EAAEx5B,EAAE6vB,GAAGtoB,KAAKu0B,GAAGX,IAAI5zB,KAAK00B,SAASzC,EAAEjyB,KAAK20B,WAAWrM,EAAEtoB,KAAK40B,aAAan8B,EAAEuH,KAAK0d,QAAQ8W,EAAEje,EAAE0b,EAAE,CAAC,SAAS4C,EAAEte,EAAE0b,GAAGjyB,KAAKu0B,GAAGX,IAAI5zB,KAAKX,KAAK,YAAYW,KAAK00B,SAASh2B,OAAOyI,KAAK8qB,GAAGliB,KAAKwG,GAAG0b,EAAE1b,KAAKvW,KAAK80B,cAAc7C,EAAEjyB,KAAK0d,QAAQ8W,EAAEje,EAAE0b,EAAE,CAAC9c,EAAEmf,GAAGhlB,KAAK/W,OAAO+5B,OAAO,CAAC7U,MAAM,CAAC9c,IAAI,WAAW,OAAOX,KAAK+0B,SAAS/0B,KAAK+0B,OAAO/0B,KAAKX,KAAK,KAAKW,KAAK0d,QAAQmW,EAAE7zB,KAAKu0B,GAAG,GAAG,GAAG9hB,SAAS,WAAW,OAAOzS,KAAKX,KAAK,KAAKW,KAAK0d,OAAO,IAAIvI,EAAEsf,GAAGnlB,KAAKglB,GAAGnf,EAAE0f,GAAGvlB,KAAKglB,GAAG,IAAIU,EAAEjB,EAAErN,QAAO,CAAEnQ,EAAE0b,KAAK1b,EAAE0b,GAAGA,EAAE,QAAQ1b,IAAI,CAAC,GAAG,MAAM0e,GAAEX,EAAE,IAAIY,GAAEnB,EAAErN,QAAO,CAAEnQ,EAAE0b,KAAK,IAAIx5B,EAAEw5B,EAAE,QAAQ,SAAS3J,EAAE/R,EAAE+R,GAAGtoB,KAAKu0B,GAAGX,IAAI5zB,KAAKX,KAAK5G,EAAE8d,EAAE,iBAAiBA,GAAGvW,KAAK0d,QAAQ,GAAGnH,IAAI+R,EAAE,MAAMA,EAAE,KAAKtoB,KAAKm1B,MAAM7M,GAAG,MAAM,iBAAiB/R,IAAIvW,KAAK0d,QAAQ,GAAGnH,EAAElX,QAAQkX,EAAEmH,UAAU1d,KAAKm1B,MAAM5e,IAAIvW,KAAK0d,QAAQsW,EAAE/B,IAAIx5B,EAAEuH,KAAKm1B,MAAM,KAAK,CAAC,OAAOhgB,EAAEmT,GAAGhZ,KAAK2lB,IAAG1e,EAAE0b,GAAG3J,EAAE/R,CAAE,GAAE,CAAC,GAAG2e,GAAEE,OAAOC,YAAYH,GAAEj6B,KAAK0G,UAAUuzB,GAAEI,MAAM1kB,WAAW,IAAI2kB,GAAEzB,EAAEpN,QAAO,CAAEnQ,EAAE0b,KAAK1b,EAAE0b,EAAE,SAASiD,GAAEjD,GAAG1b,IAAI,CAAC,GAAOif,GAAEzB,EAAErN,QAAO,CAAEnQ,EAAE0b,MAAM,IAAI,CAAC,SAAS,OAAO,SAAS1yB,QAAQ0yB,KAAK1b,EAAE0b,EAAE,SAASiD,GAAEjD,IAAI1b,IAAI,CAAC,GAAG,SAASkf,KAAK,CAAC,SAASC,GAAGnf,GAAG,OAAOA,CAAC,CAAC,SAASof,GAAGpf,EAAE0b,GAAG,OAAO,MAAM1b,GAAGA,IAAImf,GAAGzD,EAAE,SAASx5B,GAAG,OAAOw5B,EAAE1b,EAAE9d,GAAG,CAAC,CAAC,SAASm9B,GAAGrf,EAAE0b,GAAG,OAAO,WAAW1b,EAAElf,MAAM2I,KAAKhH,WAAWi5B,EAAE56B,MAAM2I,KAAKhH,UAAU,CAAC,CAAC,SAAS68B,GAAGtf,EAAE0b,GAAG,OAAO1b,IAAIkf,GAAGxD,EAAE,WAAW,IAAIx5B,EAAE8d,EAAElf,MAAM2I,KAAKhH,gBAAW,IAASP,IAAIO,UAAU,GAAGP,GAAG,IAAI6vB,EAAEtoB,KAAKygB,UAAU4D,EAAErkB,KAAKwgB,QAAQxgB,KAAKygB,UAAU,KAAKzgB,KAAKwgB,QAAQ,KAAK,IAAIllB,EAAE22B,EAAE56B,MAAM2I,KAAKhH,WAAW,OAAOsvB,IAAItoB,KAAKygB,UAAUzgB,KAAKygB,UAAUmV,GAAGtN,EAAEtoB,KAAKygB,WAAW6H,GAAGjE,IAAIrkB,KAAKwgB,QAAQxgB,KAAKwgB,QAAQoV,GAAGvR,EAAErkB,KAAKwgB,SAAS6D,QAAG,IAAS/oB,EAAEA,EAAE7C,CAAC,CAAC,CAAC,SAASq9B,GAAGvf,EAAE0b,GAAG,OAAO1b,IAAIkf,GAAGxD,EAAE,WAAW1b,EAAElf,MAAM2I,KAAKhH,WAAW,IAAIP,EAAEuH,KAAKygB,UAAU6H,EAAEtoB,KAAKwgB,QAAQxgB,KAAKygB,UAAUzgB,KAAKwgB,QAAQ,KAAKyR,EAAE56B,MAAM2I,KAAKhH,WAAWP,IAAIuH,KAAKygB,UAAUzgB,KAAKygB,UAAUmV,GAAGn9B,EAAEuH,KAAKygB,WAAWhoB,GAAG6vB,IAAItoB,KAAKwgB,QAAQxgB,KAAKwgB,QAAQoV,GAAGtN,EAAEtoB,KAAKwgB,SAAS8H,EAAE,CAAC,CAAC,SAASyN,GAAGxf,EAAE0b,GAAG,OAAO1b,IAAIkf,GAAGxD,EAAE,SAASx5B,GAAG,IAAI4rB,EAAE9N,EAAElf,MAAM2I,KAAKhH,WAAWsvB,EAAE7vB,EAAE4rB,GAAG,IAAI/oB,EAAE0E,KAAKygB,UAAU1iB,EAAEiC,KAAKwgB,QAAQxgB,KAAKygB,UAAU,KAAKzgB,KAAKwgB,QAAQ,KAAK,IAAI1J,EAAEmb,EAAE56B,MAAM2I,KAAKhH,WAAW,OAAOsC,IAAI0E,KAAKygB,UAAUzgB,KAAKygB,UAAUmV,GAAGt6B,EAAE0E,KAAKygB,WAAWnlB,GAAGyC,IAAIiC,KAAKwgB,QAAQxgB,KAAKwgB,QAAQoV,GAAG73B,EAAEiC,KAAKwgB,SAASziB,QAAG,IAASsmB,OAAE,IAASvN,OAAE,EAAOA,EAAEwR,EAAEjE,EAAEvN,EAAE,CAAC,CAAC,SAASkf,GAAGzf,EAAE0b,GAAG,OAAO1b,IAAIkf,GAAGxD,EAAE,WAAW,OAAM,IAAKA,EAAE56B,MAAM2I,KAAKhH,YAAYud,EAAElf,MAAM2I,KAAKhH,UAAU,CAAC,CAAC,SAASi9B,GAAG1f,EAAE0b,GAAG,OAAO1b,IAAIkf,GAAGxD,EAAE,WAAW,IAAIx5B,EAAE8d,EAAElf,MAAM2I,KAAKhH,WAAW,GAAGP,GAAG,mBAAmBA,EAAEosB,KAAK,CAAC,IAAI,IAAIyD,EAAEtoB,KAAKqkB,EAAErrB,UAAU/B,OAAOqE,EAAE,IAAI1C,MAAMyrB,GAAGA,KAAK/oB,EAAE+oB,GAAGrrB,UAAUqrB,GAAG,OAAO5rB,EAAEosB,MAAK,WAAY,OAAOoN,EAAE56B,MAAMixB,EAAEhtB,EAAG,GAAE,CAAC,OAAO22B,EAAE56B,MAAM2I,KAAKhH,UAAU,CAAC,CAACw8B,GAAEU,YAAYzB,EAAEe,GAAEW,WAAW7B,EAAEkB,GAAEY,UAAUvB,EAAE,IAAIwB,GAAG,CAAC,EAAE,MAAMC,GAAGC,GAAGC,IAAI,oBAAoB1wB,QAAQ,GAAG,MAAM,IAAIyQ,EAAEzQ,QAAQC,UAAU,GAAG,oBAAoB0wB,SAASA,OAAOC,OAAO,MAAM,CAACngB,EAAE8N,EAAE9N,GAAGA,GAAG,MAAM0b,EAAEwE,OAAOC,OAAOC,OAAO,UAAU,IAAIn8B,WAAW,CAAC,KAAK,MAAM,CAACy3B,EAAE5N,EAAE4N,GAAG1b,EAAG,EAA1K,GAA8KqgB,GAAGL,IAAIA,GAAG1R,KAAKgS,GAAGP,IAAIA,GAAGx2B,YAAYg3B,KAAKN,GAAG,IAAIO,IAAG,EAAG7qB,GAAGsqB,GAAG,KAAKA,GAAG3R,KAAKmS,GAAE,EAAGzgB,EAAEmc,aAAaA,aAAat2B,KAAK,KAAK46B,IAAIzgB,EAAE0gB,iBAAiB,KAAK,IAAI1gB,EAAE2gB,SAASC,cAAc,OAAO,IAAIF,kBAAiB,KAAMD,KAAKzgB,EAAE,IAAK,IAAG6gB,QAAQ7gB,EAAE,CAAC8gB,YAAW,IAAK9gB,EAAE+gB,aAAa,IAAI,IAAG,EAAG,KAAKxI,WAAWkI,GAAG,EAAC,EAAGO,GAAG,SAAShhB,EAAE0b,GAAGuF,GAAG9/B,KAAK,CAAC6e,EAAE0b,IAAIsC,KAAKroB,KAAKqoB,IAAG,EAAG,EAAEkD,IAAG,EAAGlD,IAAG,EAAGmD,GAAG,GAAGC,GAAG,GAAG1rB,GAAG,KAAK2rB,GAAGlC,GAAGmC,GAAG,CAACj+B,GAAG,SAASwvB,QAAO,EAAG0O,IAAI,EAAEC,WAAW,GAAGC,YAAYC,GAAGC,KAAI,EAAGjgC,IAAI,CAAC,EAAEkgC,SAAS,WAAWn4B,KAAK+3B,WAAW33B,SAASmW,IAAI,IAAI0hB,GAAG1hB,EAAE,GAAGA,EAAE,GAAG,CAAC,MAAMA,GAAG,CAAE,GAAE,GAAG6hB,GAAGP,GAAGL,GAAG,GAAGa,GAAG,EAAEC,GAAG,GAAG,SAASC,GAAGhiB,GAAG,GAAG,iBAAiBvW,KAAK,MAAM,IAAI2B,UAAU,wCAAwC3B,KAAKw4B,WAAW,GAAGx4B,KAAKy4B,YAAYhD,GAAGz1B,KAAK04B,MAAK,EAAG,IAAIzG,EAAEjyB,KAAK24B,KAAKP,GAAG,GAAG5E,IAAIxzB,KAAK44B,aAAahF,IAAI5zB,KAAK64B,MAAM,KAAK74B,KAAK84B,SAAS,GAAG,mBAAmBviB,EAAE,CAAC,GAAGA,IAAI8f,GAAG,MAAM,IAAI10B,UAAU,kBAAkB,OAAO3B,KAAK+4B,OAAO//B,UAAU,GAAGgH,KAAKg5B,OAAOhgC,UAAU,SAAQ,IAAKgH,KAAK+4B,QAAQE,GAAGj5B,KAAKA,KAAKg5B,QAAQ,CAACh5B,KAAK+4B,OAAO,KAAK/4B,KAAKg5B,OAAO,OAAO/G,EAAE6F,IAAIoB,GAAGl5B,KAAKuW,EAAE,CAAC,MAAM4iB,GAAG,CAACx4B,IAAI,WAAW,IAAI4V,EAAE6hB,GAAGnG,EAAEmH,GAAG,SAAS3gC,EAAEA,EAAE6vB,GAAG,IAAIjE,GAAG9N,EAAE6S,SAAS7S,IAAI6hB,IAAInG,IAAImH,IAAI,MAAM99B,EAAE+oB,IAAIgV,KAAK,IAAIt7B,EAAE,IAAIw6B,IAAG,CAAEtG,EAAEl0B,KAAKu7B,GAAGt5B,KAAK,IAAIu5B,GAAGC,GAAG/gC,EAAE8d,EAAE8N,EAAE/oB,GAAGk+B,GAAGlR,EAAE/R,EAAE8N,EAAE/oB,GAAG22B,EAAEl0B,EAAEwY,GAAI,IAAG,OAAOid,GAAGiG,GAAG17B,EAAEiC,MAAMjC,CAAC,CAAC,OAAOtF,EAAEI,UAAUw9B,GAAG59B,CAAC,EAAEoD,IAAI,SAAS0a,GAAG4S,EAAEnpB,KAAK,OAAOuW,GAAGA,EAAE1d,YAAYw9B,GAAG8C,GAAG,CAACx4B,IAAI,WAAW,OAAO4V,CAAC,EAAE1a,IAAIs9B,GAAGt9B,KAAK,GAAG,SAAS09B,GAAGhjB,EAAE0b,EAAEx5B,EAAE6vB,EAAEjE,GAAGrkB,KAAK05B,YAAY,mBAAmBnjB,EAAEA,EAAE,KAAKvW,KAAK25B,WAAW,mBAAmB1H,EAAEA,EAAE,KAAKjyB,KAAK+F,QAAQtN,EAAEuH,KAAKgG,OAAOsiB,EAAEtoB,KAAK45B,IAAIvV,CAAC,CAAC,SAAS6U,GAAG3iB,EAAE0b,GAAG,IAAIA,GAAGA,IAAI,GAAG,OAAO1b,EAAEwiB,OAAO,CAAC,GAAG9G,IAAI1b,EAAE,MAAM,IAAI5U,UAAU,6CAA6C,IAAIlJ,EAAE8d,EAAEmiB,MAAMmB,KAAK5H,GAAG,mBAAmBA,EAAEpN,KAAKqU,GAAG3iB,GAAE,CAAEA,EAAE9d,KAAKw5B,aAAasG,GAAGtG,EAAE6H,MAAMvjB,EAAE9d,GAAGw5B,EAAEpN,KAAKtO,EAAE9d,EAAG,KAAI8d,EAAEwiB,QAAO,EAAGxiB,EAAEyiB,OAAO/G,EAAE8H,GAAGxjB,IAAI9d,GAAGuhC,IAAI,CAAE,GAAEf,GAAG78B,KAAK,KAAKma,GAAG,CAAC,MAAM0b,GAAGgH,GAAG1iB,EAAE0b,EAAE,CAAC,CAAC,SAASgH,GAAG1iB,EAAE0b,GAAG,GAAG0F,GAAGjgC,KAAKu6B,GAAG,OAAO1b,EAAEwiB,OAAO,CAAC,IAAItgC,EAAE8d,EAAEmiB,MAAMmB,KAAK5H,EAAE2F,GAAG3F,GAAG1b,EAAEwiB,QAAO,EAAGxiB,EAAEyiB,OAAO/G,EAAEuB,GAAG,OAAOvB,GAAG,iBAAiBA,IAAIA,EAAEgI,UAAU,SAAS1jB,EAAE0b,EAAEx5B,GAAG,IAAI8d,EAAElf,MAAM,UAA5B,EAAmC,CAAC,MAAMkf,GAAU,CAAC,CAArD,EAAuD,KAAM,IAAI9d,EAAE+5B,EAAEP,EAAE,SAASA,EAAEgI,SAAS1jB,EAAE4S,EAAE8I,EAAE,QAAQ,CAACtxB,IAAI,IAAIo2B,GAAGt+B,IAAIA,EAAEkI,IAAIlI,EAAEkI,IAAItJ,MAAM46B,GAAGx5B,EAAEoG,OAAO0X,EAAEkH,OAAQ,IAAG,SAASlH,GAAGmhB,GAAGwC,MAAMjI,GAAGA,EAAE+G,SAASziB,EAAEyiB,UAAUtB,GAAGhgC,KAAK6e,EAAE,CAAzD,CAA2DA,GAAGwjB,GAAGxjB,GAAG9d,GAAGuhC,IAAI,CAAC,CAAC,SAASD,GAAGxjB,GAAG,IAAI0b,EAAE1b,EAAEiiB,WAAWjiB,EAAEiiB,WAAW,GAAG,IAAI,IAAI//B,EAAE,EAAE6vB,EAAE2J,EAAEh7B,OAAOwB,EAAE6vB,IAAI7vB,EAAE6gC,GAAG/iB,EAAE0b,EAAEx5B,IAAI,IAAI4rB,EAAE9N,EAAEoiB,OAAOtU,EAAEyT,KAAKzT,EAAE8T,WAAW,IAAIE,OAAOA,GAAGd,IAAG,KAAM,KAAKc,IAAI8B,IAAK,GAAE,IAAI,CAAC,SAASb,GAAG/iB,EAAE0b,GAAG,GAAG,OAAO1b,EAAEwiB,OAAO,CAAC,IAAItgC,EAAE8d,EAAEwiB,OAAO9G,EAAEyH,YAAYzH,EAAE0H,WAAW,GAAG,OAAOlhC,EAAE,OAAO8d,EAAEwiB,OAAO9G,EAAElsB,QAAQksB,EAAEjsB,QAAQuQ,EAAEyiB,UAAU/G,EAAE2H,IAAI9B,MAAMO,GAAGd,GAAG6C,GAAG,CAAC3hC,EAAE8d,EAAE0b,GAAG,MAAM1b,EAAEiiB,WAAW9gC,KAAKu6B,EAAE,CAAC,SAASmI,GAAG7jB,EAAE0b,EAAEx5B,GAAG,IAAIwT,GAAGgmB,EAAE,IAAI3J,EAAEjE,EAAE4N,EAAE+G,OAAO/G,EAAE8G,OAAOzQ,EAAE/R,EAAE8N,IAAIsT,GAAG1gC,SAAS0gC,GAAG,IAAIrP,EAAE/R,EAAE8N,IAAI,IAAIsT,GAAGp4B,QAAQ8kB,IAAI,SAAS9N,GAAmB,IAAhB,IAAI0b,EAAEyF,GAAGzgC,OAAYg7B,GAAG,GAAGyF,KAAKzF,GAAG+G,SAASziB,EAAEyiB,OAAO,YAAYtB,GAAGtV,OAAO6P,EAAE,EAAE,CAA3F,CAA6FA,IAAIx5B,EAAEsN,QAAQuiB,EAAE,CAAC,MAAM/R,GAAG9d,EAAEuN,OAAOuQ,EAAE,CAAC,QAAQtK,GAAG,KAAK,KAAKosB,IAAI8B,OAAO1hC,EAAEmhC,IAAI9B,KAAKr/B,EAAEmhC,IAAIzB,UAAU,CAAC,CAAC,SAASkC,GAAG9jB,EAAE0b,EAAEx5B,GAAG,GAAGw5B,EAAEh7B,SAASwB,EAAE,OAAOw5B,EAAE,IAAI3J,EAAE,GAAG,IAAG,IAAK/R,EAAEwiB,OAAO,CAAC,IAAI1U,EAAE/oB,EAAEyC,EAAEwY,EAAEyiB,OAAO,MAAMj7B,GAAGsmB,EAAEtmB,EAAEsB,MAAM,QAAQ/D,EAAEyC,EAAE2f,SAAS3f,EAAEuqB,EAAEuL,EAAE91B,EAAE,KAAKsmB,EAAEtmB,EAAEzC,EAAE,IAAI22B,EAAEv6B,KAAK2sB,GAAG/oB,EAAE,KAAKA,EAAE,IAAIgtB,EAAE,CAAC,OAAOkL,KAAKlL,EAAEuL,EAAEtd,EAAEqiB,aAAa,MAAM,IAAI3G,EAAE1yB,QAAQ+oB,IAAI2J,EAAEv6B,KAAK4wB,GAAG/R,EAAEsiB,OAAOwB,GAAG9jB,EAAEsiB,MAAM5G,EAAEx5B,IAAIw5B,CAAC,CAAC,SAASwH,GAAGljB,EAAE0b,GAAG,IAAIx5B,EAAEw5B,EAAEA,EAAE6G,SAAS,EAAE,EAAErgC,EAAE,MAAM8d,EAAEsiB,MAAM5G,EAAE1b,EAAEuiB,SAASrgC,EAAE,CAAC,SAASu+B,KAAK6C,MAAMG,IAAI,CAAC,SAASH,KAAK,IAAItjB,EAAEkhB,GAAG,OAAOA,IAAG,EAAGlD,IAAG,EAAGhe,CAAC,CAAC,SAASyjB,KAAK,IAAIzjB,EAAE0b,EAAEx5B,EAAE,GAAG,KAAK++B,GAAGvgC,OAAO,GAAG,IAAIsf,EAAEihB,GAAGA,GAAG,GAAG/+B,EAAE8d,EAAEtf,OAAOg7B,EAAE,EAAEA,EAAEx5B,IAAIw5B,EAAE,CAAC,IAAI3J,EAAE/R,EAAE0b,GAAG3J,EAAE,GAAGjxB,MAAM,KAAKixB,EAAE,GAAG,QAAQkP,GAAGvgC,OAAO,GAAGwgC,IAAG,EAAGlD,IAAG,CAAE,CAAC,SAAS4F,KAAK,IAAI5jB,EAAEmhB,GAAGA,GAAG,GAAGnhB,EAAEnW,SAASmW,IAAIA,EAAEoiB,KAAKX,YAAYj/B,KAAK,KAAKwd,EAAEyiB,OAAOziB,EAAG,IAAG,IAAI,IAAI0b,EAAEqG,GAAGx/B,MAAM,GAAGL,EAAEw5B,EAAEh7B,OAAOwB,GAAGw5B,IAAIx5B,IAAI,CAAC,SAAS6hC,GAAG/jB,GAAG,OAAO,IAAIgiB,GAAGlC,IAAG,EAAG9f,EAAE,CAAC,SAASgkB,GAAGhkB,EAAE0b,GAAG,IAAIx5B,EAAE2/B,GAAG,OAAO,WAAW,IAAI9P,EAAEuR,KAAKxV,EAAE+T,GAAG,IAAI,OAAOoC,GAAG/hC,GAAE,GAAI8d,EAAElf,MAAM2I,KAAKhH,UAAU,CAAC,MAAMud,GAAG0b,GAAGA,EAAE1b,EAAE,CAAC,QAAQikB,GAAGnW,GAAE,GAAIiE,GAAG0R,IAAI,CAAC,CAAC,CAACljB,EAAEyhB,GAAG1/B,UAAU,CAACgsB,KAAKsU,GAAGW,MAAM,SAASvjB,EAAE0b,GAAGqH,GAAGt5B,KAAK,IAAIu5B,GAAG,KAAK,KAAKhjB,EAAE0b,EAAEmG,IAAI,EAAEtT,MAAM,SAASvO,GAAG,GAAG,IAAIvd,UAAU/B,OAAO,OAAO+I,KAAK6kB,KAAK,KAAKtO,GAAG,IAAI0b,EAAEj5B,UAAU,GAAGP,EAAEO,UAAU,GAAG,MAAM,mBAAmBi5B,EAAEjyB,KAAK6kB,KAAK,MAAMtO,GAAGA,aAAa0b,EAAEx5B,EAAE8d,GAAG+jB,GAAG/jB,KAAKvW,KAAK6kB,KAAK,MAAMtO,GAAGA,GAAGA,EAAElX,OAAO4yB,EAAEx5B,EAAE8d,GAAG+jB,GAAG/jB,IAAI,EAAEkkB,QAAQ,SAASlkB,GAAG,OAAOvW,KAAK6kB,MAAMoN,IAAI1b,IAAI0b,KAAKA,IAAI1b,IAAI+jB,GAAGrI,KAAK,EAAExU,MAAM,CAAC9c,IAAI,WAAW,GAAGX,KAAK+0B,OAAO,OAAO/0B,KAAK+0B,OAAO,IAAIgC,IAAG,EAAG,IAAIxgB,EAAE8jB,GAAGr6B,KAAK,GAAG,IAAIrI,KAAK,qBAAqB,OAAO,OAAOqI,KAAK+4B,SAAS/4B,KAAK+0B,OAAOxe,GAAGA,CAAC,CAAC,QAAQwgB,IAAG,CAAE,CAAC,GAAG2D,QAAQ,SAASnkB,EAAE0b,GAAG,OAAO1b,EAAE,IAAI,IAAIgiB,IAAG,CAAE9/B,EAAE6vB,KAAK,IAAIjE,EAAEyK,YAAW,IAAKxG,EAAE,IAAI4M,GAAEyF,QAAQ1I,KAAK1b,GAAGvW,KAAK6kB,KAAKpsB,EAAE6vB,GAAGmS,QAAQ7L,aAAaxyB,KAAK,KAAKioB,GAAI,IAAGrkB,IAAI,IAAI,oBAAoBxJ,QAAQA,OAAO+8B,aAAapK,EAAEoP,GAAG1/B,UAAUrC,OAAO+8B,YAAY,iBAAiBsE,GAAG5/B,IAAI2iC,KAAK9jB,EAAEyhB,GAAG,CAAChyB,IAAI,WAAW,IAAIgQ,EAAE8c,EAAEh8B,MAAM,KAAK2B,WAAW+W,IAAI8qB,IAAI,OAAO,IAAItC,IAAG,SAAUtG,EAAEx5B,GAAG,IAAI8d,EAAEtf,QAAQg7B,EAAE,IAAI,IAAI3J,EAAE/R,EAAEtf,OAAOsf,EAAEnW,SAAQ,CAAEikB,EAAE/oB,IAAIi9B,GAAGxyB,QAAQse,GAAGQ,MAAMpsB,IAAI8d,EAAEjb,GAAG7C,IAAI6vB,GAAG2J,EAAE1b,EAAG,GAAE9d,IAAK,GAAE,EAAEsN,QAAQwQ,IAAI,GAAGA,aAAagiB,GAAG,OAAOhiB,EAAE,GAAGA,GAAG,mBAAmBA,EAAEsO,KAAK,OAAO,IAAI0T,IAAG,CAAEtG,EAAEx5B,KAAK8d,EAAEsO,KAAKoN,EAAEx5B,EAAG,IAAG,IAAIw5B,EAAE,IAAIsG,GAAGlC,IAAG,EAAG9f,GAAG,OAAOkjB,GAAGxH,EAAEhmB,IAAIgmB,GAAGjsB,OAAOs0B,GAAGQ,KAAK,WAAW,IAAIvkB,EAAE8c,EAAEh8B,MAAM,KAAK2B,WAAW+W,IAAI8qB,IAAI,OAAO,IAAItC,IAAG,CAAEtG,EAAEx5B,KAAK8d,EAAExG,KAAKwG,GAAGgiB,GAAGxyB,QAAQwQ,GAAGsO,KAAKoN,EAAEx5B,IAAK,GAAE,EAAEsiC,IAAI,CAACp6B,IAAI,IAAIy3B,GAAGv8B,IAAI0a,GAAG6hB,GAAG7hB,GAAGykB,YAAY,CAACr6B,IAAI,IAAIy4B,IAAI6B,OAAOC,GAAGC,OAAOC,GAAGC,UAAU,CAAC16B,IAAI,IAAI42B,GAAG17B,IAAI0a,IAAIghB,GAAGhhB,IAAI+kB,gBAAgB,CAAC36B,IAAI,IAAIi3B,GAAG/7B,IAAI0a,IAAIqhB,GAAGrhB,IAAIglB,OAAO,CAAChlB,EAAE0b,IAAI,IAAIsG,IAAG,CAAE9/B,EAAE6vB,IAAI4S,IAAG,CAAEjJ,EAAEx5B,KAAK,IAAI6vB,EAAE8P,GAAG9P,EAAEyP,WAAW,GAAGzP,EAAE0P,YAAYv/B,EAAE6vB,EAAE6P,SAASvC,IAAG,YAAa,SAASrf,GAA+C+hB,GAAG5gC,MAA/C,SAASu6B,IAAI1b,IAAI+hB,GAAGlW,OAAOkW,GAAG/4B,QAAQ0yB,GAAG,EAAE,MAAcoG,GAAGd,IAAG,KAAM,KAAKc,IAAI8B,IAAK,GAAE,GAAG,CAApG,EAAsG,KAAM,IAAIn6B,KAAK+3B,WAAW9gC,OAAOg7B,IAAIx5B,EAAEuH,KAAK+3B,WAAW,GAAI,GAAG,GAAEzP,EAAE6P,UAAU5hB,GAAI,GAAE0b,EAAEx5B,EAAE6vB,OAAOuO,KAAKA,GAAG2E,YAAYrS,EAAEoP,GAAG,cAAa,WAAY,MAAMhiB,EAAE8c,EAAEh8B,MAAM,KAAK2B,WAAW+W,IAAI8qB,IAAI,OAAO,IAAItC,IAAItG,IAAI,IAAI1b,EAAEtf,QAAQg7B,EAAE,IAAI,IAAIx5B,EAAE8d,EAAEtf,OAAO,MAAMqxB,EAAE,IAAI1vB,MAAMH,GAAG8d,EAAEnW,SAAQ,CAAEmW,EAAE8N,IAAIkU,GAAGxyB,QAAQwQ,GAAGsO,MAAMtO,GAAG+R,EAAEjE,GAAG,CAAC/a,OAAO,YAAYzK,MAAM0X,KAAKA,GAAG+R,EAAEjE,GAAG,CAAC/a,OAAO,WAAWmyB,OAAOllB,KAAKsO,MAAK,MAAOpsB,GAAGw5B,EAAE3J,MAAO,GAAG,IAAGuO,GAAG6E,KAAK,oBAAoBC,gBAAgBxS,EAAEoP,GAAG,OAAM,WAAY,MAAMhiB,EAAE8c,EAAEh8B,MAAM,KAAK2B,WAAW+W,IAAI8qB,IAAI,OAAO,IAAItC,IAAG,CAAEtG,EAAEx5B,KAAK,IAAI8d,EAAEtf,QAAQwB,EAAE,IAAIkjC,eAAe,KAAK,IAAIrT,EAAE/R,EAAEtf,OAAO,MAAMotB,EAAE,IAAIzrB,MAAM0vB,GAAG/R,EAAEnW,SAAQ,CAAEmW,EAAEjb,IAAIi9B,GAAGxyB,QAAQwQ,GAAGsO,MAAMtO,GAAG0b,EAAE1b,KAAKA,IAAI8N,EAAE/oB,GAAGib,IAAI+R,GAAG7vB,EAAE,IAAIkjC,eAAetX,GAAI,KAAK,GAAG,KAAI,MAAMuX,GAAG,CAACC,OAAO,EAAEC,OAAO,EAAEliC,GAAG,GAAG,IAAImiC,GAAG,EAAEC,GAAG,GAAGC,GAAG,EAAE7C,GAAG,EAAE8C,GAAG,EAAE,SAAShB,GAAG3kB,EAAE0b,EAAEx5B,EAAE4rB,GAAG,IAAI/oB,EAAE88B,GAAGr6B,EAAEW,OAAOC,OAAOrD,GAAGyC,EAAEoQ,OAAO7S,EAAEyC,EAAE+5B,IAAI,EAAE/5B,EAAEqrB,QAAO,EAAGrrB,EAAEnE,KAAKsiC,GAAG,IAAIplB,EAAE+gB,GAAG5/B,IAAI8F,EAAE9F,IAAI6+B,GAAG,CAAChxB,QAAQyyB,GAAG4D,YAAY,CAACt9B,MAAM05B,GAAG/a,cAAa,EAAGtd,UAAS,GAAIqG,IAAIgyB,GAAGhyB,IAAIu0B,KAAKvC,GAAGuC,KAAKU,WAAWjD,GAAGiD,WAAWE,IAAInD,GAAGmD,IAAI31B,QAAQwyB,GAAGxyB,QAAQC,OAAOuyB,GAAGvyB,OAAOo2B,MAAMjtB,GAAG2H,EAAEslB,MAAMr+B,GAAGs+B,MAAMltB,GAAG2H,EAAEulB,MAAMt+B,IAAI,CAAC,EAAEk0B,GAAG3J,EAAEvqB,EAAEk0B,KAAK32B,EAAEw8B,IAAI/5B,EAAEo6B,SAAS,aAAan4B,KAAKmO,OAAO2pB,KAAK93B,KAAKmO,OAAOgqB,UAAU,EAAE,IAAI9F,EAAE+I,GAAGr9B,EAAEwY,EAAE9d,EAAE4rB,GAAG,OAAO,IAAItmB,EAAE+5B,KAAK/5B,EAAEo6B,WAAW9F,CAAC,CAAC,SAASiK,KAAK,OAAOV,GAAGhiC,KAAKgiC,GAAGhiC,KAAKmiC,MAAMH,GAAGC,OAAOD,GAAGE,QAAQ,IAAIF,GAAGhiC,EAAE,CAAC,SAASy/B,KAAK,QAAQuC,GAAGC,SAAS,KAAKD,GAAGC,SAASD,GAAGhiC,GAAG,GAAGgiC,GAAGE,OAAO,IAAIF,GAAGC,QAAO,EAAG,CAAC,SAAShB,GAAGtkB,GAAG,OAAOqlB,GAAGE,QAAQvlB,GAAGA,EAAEzW,cAAc+2B,IAAIyF,KAAK/lB,EAAEsO,MAAMtO,IAAI8iB,KAAK9iB,KAAKA,IAAI8iB,KAAKkD,GAAGhmB,OAAOA,CAAC,CAAC,SAASimB,GAAGjmB,KAAK6iB,GAAGwC,GAAGE,QAAQ,KAAKF,GAAGE,SAASF,GAAGE,OAAOF,GAAGhiC,GAAG,GAAGoiC,GAAGtkC,KAAK0gC,IAAIoC,GAAGjkB,GAAE,EAAG,CAAC,SAASkmB,KAAK,IAAIlmB,EAAEylB,GAAGA,GAAG/kC,OAAO,GAAG+kC,GAAGtL,MAAM8J,GAAGjkB,GAAE,EAAG,CAAC,SAASikB,GAAGvI,EAAEx5B,GAAG,IAAI6vB,EAAE8P,GAAG,IAAI3/B,GAAGmjC,GAAGE,QAAQG,MAAMhK,IAAImG,IAAI6D,MAAMA,IAAIhK,IAAImG,KAAKsE,GAAGjkC,EAAE+jC,GAAGpgC,KAAK,KAAK61B,GAAGwK,IAAIxK,IAAImG,KAAKA,GAAGnG,EAAE3J,IAAIuP,KAAKA,GAAG5/B,IAAI2iC,MAAM9D,IAAI,CAAC,IAAIzS,EAAEwT,GAAG5/B,IAAI6N,QAAQxK,EAAE22B,EAAEh6B,IAAIs+B,GAAG1R,KAAKvpB,EAAE8gC,MAAM/X,EAAExrB,UAAUgsB,KAAKvpB,EAAE+gC,OAAO/T,EAAEc,QAAQ6I,EAAE7I,UAAU1qB,OAAO2B,eAAekW,EAAE,UAAUjb,EAAE6gC,aAAa9X,EAAE9d,IAAIjL,EAAEiL,IAAI8d,EAAEyW,KAAKx/B,EAAEw/B,KAAKzW,EAAEte,QAAQzK,EAAEyK,QAAQse,EAAEre,OAAO1K,EAAE0K,OAAO1K,EAAEkgC,aAAanX,EAAEmX,WAAWlgC,EAAEkgC,YAAYlgC,EAAEogC,MAAMrX,EAAEqX,IAAIpgC,EAAEogC,KAAK,CAAC,CAAC,SAASd,KAAK,IAAI3I,EAAE1b,EAAEzQ,QAAQ,OAAOgxB,GAAG,CAAChxB,QAAQmsB,EAAEkK,YAAYz9B,OAAO4B,yBAAyBiW,EAAE,WAAWhQ,IAAI0rB,EAAE1rB,IAAIu0B,KAAK7I,EAAE6I,KAAKU,WAAWvJ,EAAEuJ,WAAWE,IAAIzJ,EAAEyJ,IAAI31B,QAAQksB,EAAElsB,QAAQC,OAAOisB,EAAEjsB,OAAOo2B,MAAM7F,GAAG1R,KAAKwX,MAAMpK,EAAEp5B,UAAUgsB,MAAM,CAAC,CAAC,CAAC,SAASuW,GAAG7kB,EAAE0b,EAAEx5B,EAAE6vB,EAAEjE,GAAG,IAAI/oB,EAAE88B,GAAG,IAAI,OAAOoC,GAAGjkB,GAAE,GAAI0b,EAAEx5B,EAAE6vB,EAAEjE,EAAE,CAAC,QAAQmW,GAAGl/B,GAAE,EAAG,CAAC,CAAC,SAASohC,GAAGnmB,GAAGqgB,GAAG79B,KAAKu9B,GAAG/f,EAAE,CAAC,SAASijB,GAAGjjB,EAAE0b,EAAEx5B,EAAE6vB,GAAG,MAAM,mBAAmB/R,EAAEA,EAAE,WAAW,IAAI8N,EAAE+T,GAAG3/B,GAAG6jC,KAAK9B,GAAGvI,GAAE,GAAI,IAAI,OAAO1b,EAAElf,MAAM2I,KAAKhH,UAAU,CAAC,QAAQwhC,GAAGnW,GAAE,GAAIiE,GAAGoU,GAAGrD,GAAG,CAAC,CAAC,CAAC,SAASlqB,GAAGoH,EAAE0b,GAAG,OAAO,SAASx5B,EAAE6vB,GAAG,OAAO/R,EAAExd,KAAKiH,KAAKw5B,GAAG/gC,EAAEw5B,GAAGuH,GAAGlR,EAAE2J,GAAG,CAAC,CAAmD,SAASgG,GAAGhG,EAAEx5B,GAAG,IAAI4rB,EAAE,IAAIA,EAAE5rB,EAAEggC,YAAYxG,EAAE,CAAC,MAAM1b,GAAG,CAAC,IAAG,IAAK8N,EAAE,IAAI,IAAI/oB,EAAEyC,EAAE,CAAC6H,QAAQnN,EAAEgjC,OAAOxJ,GAAG,GAAG1b,EAAE2gB,UAAUA,SAASyF,cAAcrhC,EAAE47B,SAASyF,YAAY,UAAUC,UAAU,sBAAqB,GAAG,GAAItU,EAAEhtB,EAAEyC,IAAIwY,EAAEsmB,aAAavU,EAAEhtB,EAAE,IAAIuhC,YAAY,qBAAqB,CAACC,OAAO/+B,IAAIA,GAAGzC,GAAGib,EAAEwmB,gBAAgBA,cAAczhC,IAAIib,EAAEymB,uBAAuBzmB,EAAE0mB,sBAAsB,IAAI1mB,EAAE0mB,qBAAqB3hC,EAAE,CAAC,MAAMib,GAAG,CAACid,GAAGl4B,IAAIA,EAAE4hC,kBAAkBxkC,EAAQ+O,KAAK,wBAAwBwqB,EAAExU,OAAOwU,IAAI,CAAC,MAAM1b,GAAG,CAAC,EAAxiB,KAAK,GAAGqgB,IAAIr3B,QAAQ,mBAAmB+8B,GAAGjD,GAAG5D,IAA4f,IAAI8G,GAAGhE,GAAGvyB,OAAO,SAASm3B,GAAG5mB,EAAE0b,EAAEx5B,EAAE6vB,GAAG,GAAG/R,EAAE6mB,QAAQ7mB,EAAEwiB,OAAOsE,cAAcjF,GAAGkF,YAAY/mB,EAAEgnB,MAAM,CAAC,IAAIlZ,EAAE9N,EAAEinB,mBAAmBvL,EAAEx5B,EAAE8d,EAAEknB,WAAW,IAAIpZ,EAAE1lB,SAAS4X,EAAEwiB,OAAO2E,eAAe,CAAC,CAAC,MAAMrZ,GAAG,OAAOA,EAAEhlB,OAAO21B,EAAE2I,cAAcpnB,EAAEqnB,YAAYrnB,EAAEwiB,OAAO2E,eAAe,GAAGhlC,EAAQ+O,KAAK,4BAA4B8O,EAAE9S,SAAS8S,EAAEnM,OAAOya,MAAK,IAAKsY,GAAG5mB,EAAE0b,EAAEx5B,EAAE6vB,MAAMiU,GAAGlY,EAAE,CAAC,OAAOA,EAAE4V,SAAShI,GAAE,CAAE1b,EAAE0b,IAAIiJ,IAAG,KAAM9C,GAAGyF,MAAMxZ,EAAEiE,EAAE/R,EAAE0b,EAAE5N,QAAQQ,MAAMtO,GAAG8N,EAAEyZ,YAAYjZ,MAAK,IAAKtO,KAAK,CAAC,GAAGA,EAAEwiB,OAAOsE,aAAa,OAAOd,GAAG,IAAIrH,GAAEhB,eAAe3d,EAAEwiB,OAAOgF,cAAc,IAAIxnB,EAAEwiB,OAAOiF,cAAc,CAAC,IAAIznB,EAAE0nB,SAASC,SAAS,OAAO3B,GAAG,IAAIrH,GAAEhB,gBAAgB3d,EAAEnM,OAAO0a,MAAM2Q,GAAG,CAAC,OAAOlf,EAAEwiB,OAAOoF,eAAetZ,MAAK,IAAKsY,GAAG5mB,EAAE0b,EAAEx5B,EAAE6vB,IAAI,CAAC,MAAM8V,GAAGjnC,OAAOC,aAAa,OAAOinC,GAAG,oGAAoGC,GAAG,GAAGC,GAAG,oBAAoBC,WAAW,sBAAsBj+B,KAAKi+B,UAAUC,WAAWC,GAAGH,GAAGtvB,GAAGsvB,GAAGI,GAAGpoB,IAAI,6BAA6BhW,KAAKgW,GAAG,SAASqoB,GAAGroB,EAAE0b,GAAG,OAAO1b,EAAE0b,EAAE,WAAW,OAAO1b,EAAElf,MAAM2I,KAAKhH,YAAYi5B,EAAE56B,MAAM2I,KAAKhH,UAAU,EAAEud,EAAE0b,CAAC,CAAC,MAAM4M,GAAG,CAAC97B,KAAK,EAAE8f,OAAM,IAAKic,WAAU,EAAGhc,MAAM,CAAC,IAAIic,WAAU,GAAI,SAASC,GAAGzoB,GAAG,MAAM,iBAAiBA,GAAG,KAAKhW,KAAKgW,GAAGA,GAAGA,EAAE0b,SAAI,IAASA,EAAE1b,IAAIA,KAAK0b,UAAUA,EAAEc,EAAEd,IAAI1b,GAAG0b,EAAE,CAAC,MAAMgN,GAAGC,OAAO3oB,EAAE0b,EAAEx5B,GAAG,MAAM6vB,EAAEtoB,KAAKm/B,KAAK/G,GAAGyF,MAAMxZ,EAAErkB,KAAKX,KAAK,SAAS/D,EAAEib,EAAE9d,EAAE6vB,GAAG,IAAIA,EAAE8W,OAAO/a,GAAG,MAAM,IAAI6Q,GAAEmK,SAAS,SAAShb,EAAE,4BAA4B,OAAO4N,EAAE3J,EAAEgX,SAAShX,EAAE,CAAC,MAAMvqB,EAAE87B,KAAK,IAAI,OAAOvR,GAAGA,EAAE5mB,KAAK1B,KAAK0B,GAAG4mB,IAAI8P,GAAGyF,MAAMvV,EAAE2R,SAAS1jB,EAAEjb,EAAE7C,GAAGyiC,IAAG,IAAK5S,EAAE2R,SAAS1jB,EAAEjb,EAAE7C,IAAI,CAAColC,MAAMvV,EAAEiX,UAAUnH,GAAGmH,WAAWnH,KAAK+E,GAAGn9B,KAAK0B,GAAG6U,EAAE,CAACvW,KAAKX,MAAM/D,EAAE,CAAC,QAAQyC,GAAGi8B,IAAI,CAAC,CAACr5B,IAAI4V,EAAE0b,GAAG,OAAO1b,GAAGA,EAAEzW,cAAcpB,OAAOsB,KAAKw/B,MAAMjpB,GAAG2D,MAAM+X,GAAGjyB,KAAKk/B,OAAO,YAAYjN,GAAGjyB,KAAKy/B,KAAK9+B,IAAI,CAACk9B,MAAM5L,EAAElwB,IAAIwU,IAAIsO,MAAMtO,GAAGvW,KAAK0/B,KAAKC,QAAQC,KAAKrpB,OAAOsO,KAAKoN,EAAE,CAACuN,MAAMjpB,GAAG,GAAG,iBAAiBA,EAAE,OAAO,IAAIvW,KAAK0B,GAAGm+B,YAAY7/B,KAAKuW,GAAG,GAAG9d,EAAE8d,GAAG,OAAO,IAAIvW,KAAK0B,GAAGm+B,YAAY7/B,KAAK,IAAIuW,EAAE5e,KAAK,SAAS,MAAM2wB,EAAE2J,EAAE1b,GAAG,GAAG,IAAI+R,EAAErxB,OAAO,OAAO+I,KAAKw/B,MAAMlX,EAAE,IAAIhR,OAAOf,EAAE+R,EAAE,KAAK,MAAMjE,EAAErkB,KAAKo/B,OAAOU,QAAQhxB,OAAO9O,KAAKo/B,OAAOW,SAAS/yB,QAAQuJ,GAAGA,EAAEypB,UAAU1X,EAAEla,OAAO6jB,GAAG1b,EAAE0pB,QAAQ1gC,QAAQ0yB,IAAI,KAAK1b,EAAE0pB,QAAQ7xB,OAAOmI,GAAG+R,EAAE/oB,QAAQgX,IAAI,MAAM,GAAG,GAAG8N,GAAGrkB,KAAK0B,GAAGw+B,UAAU9B,GAAG,OAAOp+B,KAAKw/B,MAAMnb,EAAEhlB,MAAMiY,OAAO+M,EAAE4b,QAAQlwB,KAAKkiB,GAAG1b,EAAE0b,OAAO5N,GAAGmP,GAAG96B,EAAQ+O,KAAK,aAAa4kB,KAAK8T,UAAU5pB,SAASvW,KAAKX,2CAA2CipB,EAAE3wB,KAAK,SAAS,MAAMyoC,UAAU9kC,GAAG0E,KAAKo/B,OAAOrhC,EAAEiC,KAAK0B,GAAG2+B,MAAM9f,UAAU,SAASzJ,EAAEP,EAAE0b,GAAG,IAAI,OAAO,IAAIl0B,EAAEuiC,IAAI/pB,EAAE0b,EAAE,CAAC,MAAM1b,GAAG,OAAM,CAAE,CAAC,CAAC,MAAM8b,EAAElJ,GAAGb,EAAE5B,QAAO,EAAGuL,EAAE3J,GAAGjE,KAAK,MAAMtmB,EAAEzC,EAAE+oB,GAAGgO,EAAE9b,EAAE8N,GAAG,MAAM,CAAC4N,GAAGl0B,EAAEk0B,IAAIl0B,EAAE6gC,GAAGtW,EAAEvqB,GAAGA,EAAEwiC,MAAMhqB,IAAI,MAAM0b,EAAElgB,EAAEwE,EAAE8N,GAAG,OAAO5rB,EAAEw5B,IAAIA,EAAEiI,MAAM3jB,GAAGO,EAAEub,EAAE9b,IAAG,EAAGA,GAAGO,EAAEub,EAAEtgB,EAAEwE,EAAE8N,KAAKiE,EAAG,GAAE,CAAC,KAAK,OAAO,OAAO+J,EAAEryB,KAAKw/B,MAAMnN,EAAEhzB,MAAMiY,OAAOf,EAAE8b,EAAE4N,UAAUjzB,OAAOmc,GAAG9E,EAAErkB,KAAKgN,OAAOmc,GAAGnpB,KAAKw/B,MAAMlX,GAAGhR,OAAO,GAAG,CAACtK,OAAOuJ,GAAG,OAAOvW,KAAKwgC,eAAeC,IAAIlqB,EAAE,CAAC7Q,MAAM6Q,GAAG,OAAOvW,KAAKwgC,eAAe96B,MAAM6Q,EAAE,CAACrf,OAAOqf,GAAG,OAAOvW,KAAKwgC,eAAetpC,OAAOqf,EAAE,CAAChR,MAAMgR,GAAG,OAAOvW,KAAKwgC,eAAej7B,MAAMgR,EAAE,CAACmqB,KAAKnqB,GAAG,OAAOvW,KAAKwgC,eAAeE,KAAKnqB,EAAE,CAAC2a,QAAQ3a,GAAG,OAAOvW,KAAKwgC,eAAetP,QAAQ3a,EAAE,CAACiqB,eAAe,OAAO,IAAIxgC,KAAK0B,GAAGi/B,WAAW,IAAI3gC,KAAK0B,GAAGm+B,YAAY7/B,MAAM,CAAC4gC,QAAQrqB,GAAG,OAAO,IAAIvW,KAAK0B,GAAGi/B,WAAW,IAAI3gC,KAAK0B,GAAGm+B,YAAY7/B,KAAKvH,EAAE8d,GAAG,IAAIA,EAAE5e,KAAK,QAAQ4e,GAAG,CAACnG,UAAU,OAAOpQ,KAAKwgC,eAAepwB,SAAS,CAACywB,WAAWtqB,GAAGvW,KAAKo/B,OAAO0B,YAAYvqB,EAAE,MAAM0b,EAAEA,IAAI,IAAIA,EAAE,OAAOA,EAAE,MAAMx5B,EAAEiG,OAAOC,OAAO4X,EAAE1d,WAAW,IAAI,IAAIyvB,KAAK2J,EAAE,GAAGl0B,EAAEk0B,EAAE3J,GAAG,IAAI7vB,EAAE6vB,GAAG2J,EAAE3J,EAAE,CAAC,MAAM/R,GAAG,CAAC,OAAO9d,GAAG,OAAOuH,KAAKo/B,OAAO2B,UAAU/gC,KAAK0/B,KAAKC,QAAQqB,YAAYhhC,KAAKo/B,OAAO2B,UAAU/gC,KAAKo/B,OAAO2B,SAAS9O,EAAEjyB,KAAK0/B,KAAK,UAAUzN,GAAG1b,CAAC,CAAC0qB,cAAc,OAAOjhC,KAAK6gC,YAAW,SAAUtqB,GAAG+R,EAAEtoB,KAAKuW,EAAG,GAAE,CAACzJ,IAAIyJ,EAAE0b,GAAG,MAAMiP,KAAKzoC,EAAEwnC,QAAQ3X,GAAGtoB,KAAKo/B,OAAOW,QAAQ,IAAI1b,EAAE9N,EAAE,OAAO+R,GAAG7vB,IAAI4rB,EAAE2a,GAAG1W,EAAH0W,CAAMzoB,IAAIvW,KAAKk/B,OAAO,aAAa3oB,GAAGvW,KAAKy/B,KAAK0B,OAAO,CAACtD,MAAMtnB,EAAExT,KAAK,MAAMoE,KAAK,MAAM8qB,EAAE,CAACA,GAAG,KAAKt2B,OAAO,CAAC0oB,OAAOQ,MAAMtO,GAAGA,EAAE6qB,YAAY7I,GAAGvyB,OAAOuQ,EAAEme,SAAS,IAAIne,EAAE8qB,aAAaxc,MAAMoN,IAAI,GAAG3J,EAAE,IAAInI,EAAE5J,EAAE+R,EAAE2J,EAAE,CAAC,MAAM1b,GAAG,CAAC,OAAO0b,CAAE,GAAE,CAACqP,OAAO/qB,EAAE+R,GAAG,GAAG,iBAAiB/R,GAAG9d,EAAE8d,GAAG,OAAOvW,KAAKw/B,MAAM,OAAOloB,OAAOf,GAAGgrB,OAAOjZ,GAAG,CAAC,MAAM7vB,EAAEsZ,EAAEwE,EAAEvW,KAAKo/B,OAAOW,QAAQE,SAAS,QAAG,IAASxnC,EAAE,OAAO8jC,GAAG,IAAIrH,GAAEsM,gBAAgB,kDAAkD,IAAI,mBAAmBlZ,EAAE2J,EAAE3J,GAAGloB,SAAS6xB,IAAI9R,EAAE5J,EAAE0b,EAAE3J,EAAE2J,GAAI,IAAG3J,EAAE/R,EAAE,CAAC1X,MAAM0X,EAAEwpB,QAAQtnC,GAAG,CAAC,MAAM8d,GAAG,CAAC,OAAOvW,KAAKw/B,MAAM,OAAOloB,OAAO7e,GAAG8oC,OAAOjZ,EAAE,CAAC,CAACxmB,IAAIyU,EAAE0b,GAAG,MAAMiP,KAAKzoC,EAAEwnC,QAAQ3X,GAAGtoB,KAAKo/B,OAAOW,QAAQ,IAAI1b,EAAE9N,EAAE,OAAO+R,GAAG7vB,IAAI4rB,EAAE2a,GAAG1W,EAAH0W,CAAMzoB,IAAIvW,KAAKk/B,OAAO,aAAa3oB,GAAGvW,KAAKy/B,KAAK0B,OAAO,CAACtD,MAAMtnB,EAAExT,KAAK,MAAMpH,OAAO,CAAC0oB,GAAGld,KAAK,MAAM8qB,EAAE,CAACA,GAAG,SAASpN,MAAMtO,GAAGA,EAAE6qB,YAAY7I,GAAGvyB,OAAOuQ,EAAEme,SAAS,IAAIne,EAAE8qB,aAAaxc,MAAMoN,IAAI,GAAG3J,EAAE,IAAInI,EAAE5J,EAAE+R,EAAE2J,EAAE,CAAC,MAAM1b,GAAG,CAAC,OAAO0b,CAAE,GAAE,CAACllB,OAAOwJ,GAAG,OAAOvW,KAAKk/B,OAAO,aAAajN,GAAGjyB,KAAKy/B,KAAK0B,OAAO,CAACtD,MAAM5L,EAAElvB,KAAK,SAASoE,KAAK,CAACoP,OAAOsO,MAAMtO,GAAGA,EAAE6qB,YAAY7I,GAAGvyB,OAAOuQ,EAAEme,SAAS,SAAI,GAAQ,CAACxxB,QAAQ,OAAOlD,KAAKk/B,OAAO,aAAa3oB,GAAGvW,KAAKy/B,KAAK0B,OAAO,CAACtD,MAAMtnB,EAAExT,KAAK,cAAcgM,MAAM8vB,OAAOha,MAAMtO,GAAGA,EAAE6qB,YAAY7I,GAAGvyB,OAAOuQ,EAAEme,SAAS,SAAI,GAAQ,CAAC+M,QAAQlrB,GAAG,OAAOvW,KAAKk/B,OAAO,YAAYjN,GAAGjyB,KAAKy/B,KAAKj2B,QAAQ,CAACrC,KAAKoP,EAAEsnB,MAAM5L,IAAIpN,MAAMtO,GAAGA,EAAExG,KAAKwG,GAAGvW,KAAK0/B,KAAKC,QAAQC,KAAKrpB,QAAQ,CAACmrB,QAAQnrB,EAAE0b,EAAEx5B,GAAG,MAAM6vB,EAAE1vB,MAAM+S,QAAQsmB,GAAGA,OAAE,EAAO5N,GAAG5rB,EAAEA,IAAI6vB,OAAE,EAAO2J,IAAIx5B,EAAEkpC,aAAQ,EAAO,OAAO3hC,KAAKk/B,OAAO,aAAajN,IAAI,MAAMiP,KAAKzoC,EAAEwnC,QAAQ3kC,GAAG0E,KAAKo/B,OAAOW,QAAQ,GAAGzkC,GAAGgtB,EAAE,MAAM,IAAI4M,GAAEsM,gBAAgB,gEAAgE,GAAGlZ,GAAGA,EAAErxB,SAASsf,EAAEtf,OAAO,MAAM,IAAIi+B,GAAEsM,gBAAgB,wDAAwD,MAAMzjC,EAAEwY,EAAEtf,OAAO,IAAI6f,EAAExb,GAAG7C,EAAE8d,EAAExG,IAAIivB,GAAG1jC,IAAIib,EAAE,OAAOvW,KAAKy/B,KAAK0B,OAAO,CAACtD,MAAM5L,EAAElvB,KAAK,MAAMoE,KAAKmhB,EAAE3sB,OAAOmb,EAAE8qB,YAAYvd,IAAIQ,MAAK,EAAGuc,YAAY7qB,EAAEiO,QAAQyN,EAAEoP,WAAW5oC,EAAEi8B,SAASpM,MAAM,GAAG,IAAI/R,EAAE,OAAO8N,EAAE4N,EAAEx5B,EAAE,MAAM,IAAIo8B,EAAE,GAAG70B,KAAKX,mBAAmBkX,QAAQxY,sBAAsBuqB,EAAG,GAAG,GAAE,CAACuZ,QAAQtrB,EAAE0b,EAAEx5B,GAAG,MAAM6vB,EAAE1vB,MAAM+S,QAAQsmB,GAAGA,OAAE,EAAO5N,GAAG5rB,EAAEA,IAAI6vB,OAAE,EAAO2J,IAAIx5B,EAAEkpC,aAAQ,EAAO,OAAO3hC,KAAKk/B,OAAO,aAAajN,IAAI,MAAMiP,KAAKzoC,EAAEwnC,QAAQ3kC,GAAG0E,KAAKo/B,OAAOW,QAAQ,GAAGzkC,GAAGgtB,EAAE,MAAM,IAAI4M,GAAEsM,gBAAgB,gEAAgE,GAAGlZ,GAAGA,EAAErxB,SAASsf,EAAEtf,OAAO,MAAM,IAAIi+B,GAAEsM,gBAAgB,wDAAwD,MAAMzjC,EAAEwY,EAAEtf,OAAO,IAAI6f,EAAExb,GAAG7C,EAAE8d,EAAExG,IAAIivB,GAAG1jC,IAAIib,EAAE,OAAOvW,KAAKy/B,KAAK0B,OAAO,CAACtD,MAAM5L,EAAElvB,KAAK,MAAMoE,KAAKmhB,EAAE3sB,OAAOmb,EAAE8qB,YAAYvd,IAAIQ,MAAK,EAAGuc,YAAY7qB,EAAEiO,QAAQyN,EAAEoP,WAAW5oC,EAAEi8B,SAASpM,MAAM,GAAG,IAAI/R,EAAE,OAAO8N,EAAE4N,EAAEx5B,EAAE,MAAM,IAAIo8B,EAAE,GAAG70B,KAAKX,mBAAmBkX,QAAQxY,sBAAsBuqB,EAAG,GAAG,GAAE,CAACwZ,WAAWvrB,GAAG,MAAM0b,EAAE1b,EAAEtf,OAAO,OAAO+I,KAAKk/B,OAAO,aAAajN,GAAGjyB,KAAKy/B,KAAK0B,OAAO,CAACtD,MAAM5L,EAAElvB,KAAK,SAASoE,KAAKoP,MAAMsO,MAAK,EAAGuc,YAAY7qB,EAAE8qB,WAAW5oC,EAAEi8B,SAASpM,MAAM,GAAG,IAAI/R,EAAE,OAAO9d,EAAE,MAAM,IAAIo8B,EAAE,GAAG70B,KAAKX,sBAAsBkX,QAAQ0b,sBAAsB3J,EAAG,GAAE,EAAE,SAASyZ,GAAGxrB,GAAG,IAAI+R,EAAE,CAAC,EAAEjE,EAAE,SAAS4N,EAAEx5B,GAAG,GAAGA,EAAE,CAAC,IAAI,IAAI4rB,EAAErrB,UAAU/B,OAAOqE,EAAE,IAAI1C,MAAMyrB,EAAE,KAAKA,GAAG/oB,EAAE+oB,EAAE,GAAGrrB,UAAUqrB,GAAG,OAAOiE,EAAE2J,GAAG+P,UAAU3qC,MAAM,KAAKiE,GAAGib,CAAC,CAAC,GAAG,iBAAiB0b,EAAE,OAAO3J,EAAE2J,EAAE,EAAE5N,EAAE4d,aAAanrB,EAAE,IAAI,IAAIxb,EAAE,EAAEyC,EAAE/E,UAAU/B,OAAOqE,EAAEyC,IAAIzC,EAAEwb,EAAE9d,UAAUsC,IAAI,OAAO+oB,EAAE,SAASvN,EAAEP,EAAE0b,EAAEx5B,GAAG,GAAG,iBAAiB8d,EAAE,OAAO8b,EAAE9b,GAAG0b,IAAIA,EAAE+D,IAAIv9B,IAAIA,EAAEg9B,IAAI,IAAIn6B,EAAE,CAAC4mC,YAAY,GAAGtC,KAAKnnC,EAAEupC,UAAU,SAASzrB,IAAI,IAAIjb,EAAE4mC,YAAY3iC,QAAQgX,KAAKjb,EAAE4mC,YAAYxqC,KAAK6e,GAAGjb,EAAEskC,KAAK3N,EAAE32B,EAAEskC,KAAKrpB,GAAG,EAAEyqB,YAAY,SAASzqB,GAAGjb,EAAE4mC,YAAY5mC,EAAE4mC,YAAYl1B,QAAO,SAAUilB,GAAG,OAAOA,IAAI1b,CAAE,IAAGjb,EAAEskC,KAAKtkC,EAAE4mC,YAAYxb,OAAOuL,EAAEx5B,EAAE,GAAG,OAAO6vB,EAAE/R,GAAG8N,EAAE9N,GAAGjb,EAAEA,CAAC,CAAC,SAAS+2B,EAAE9b,GAAG0b,EAAE1b,GAAGnW,SAAQ,SAAU6xB,GAAG,IAAI3J,EAAE/R,EAAE0b,GAAG,GAAGx5B,EAAE6vB,GAAGxR,EAAEmb,EAAE1b,EAAE0b,GAAG,GAAG1b,EAAE0b,GAAG,QAAQ,CAAC,GAAG,SAAS3J,EAAE,MAAM,IAAI4M,GAAEsM,gBAAgB,wBAAwB,IAAInd,EAAEvN,EAAEmb,EAAEyD,IAAG,WAAY,IAAI,IAAInf,EAAEvd,UAAU/B,OAAOg7B,EAAE,IAAIr5B,MAAM2d,GAAGA,KAAK0b,EAAE1b,GAAGvd,UAAUud,GAAG8N,EAAE6d,YAAY9hC,SAAQ,SAAUmW,GAAGuS,GAAE,WAAYvS,EAAElf,MAAM,KAAK46B,EAAG,GAAG,GAAG,GAAE,CAAE,GAAE,CAAC,CAAC,SAASkQ,GAAG5rB,EAAE0b,GAAG,OAAO9c,EAAE8c,GAAG3iB,KAAK,CAACzW,UAAU0d,IAAI0b,CAAC,CAAC,SAASmQ,GAAG7rB,EAAE0b,GAAG,QAAQ1b,EAAEvJ,QAAQuJ,EAAE8rB,WAAW9rB,EAAE+rB,MAAMrQ,EAAE1b,EAAEgsB,WAAWhsB,EAAEisB,aAAa,CAAC,SAASC,GAAGlsB,EAAE0b,GAAG1b,EAAEvJ,OAAO4xB,GAAGroB,EAAEvJ,OAAOilB,EAAE,CAAC,SAASyQ,GAAGnsB,EAAE0b,EAAEx5B,GAAG,IAAI6vB,EAAE/R,EAAEisB,aAAajsB,EAAEisB,aAAala,EAAE,IAAIsW,GAAGtW,IAAI2J,KAAKA,EAAE1b,EAAEgsB,UAAU9pC,IAAI6vB,CAAC,CAAC,SAASqa,GAAGpsB,EAAE0b,GAAG,GAAG1b,EAAEqsB,UAAU,OAAO3Q,EAAE4Q,WAAW,MAAMpqC,EAAEw5B,EAAE6Q,kBAAkBvsB,EAAEiL,OAAO,IAAI/oB,EAAE,MAAM,IAAIy8B,GAAE6N,OAAO,WAAWxsB,EAAEiL,MAAM,oBAAoByQ,EAAE5yB,KAAK,mBAAmB,OAAO5G,CAAC,CAAC,SAASuqC,GAAGzsB,EAAE0b,EAAEx5B,GAAG,MAAM6vB,EAAEqa,GAAGpsB,EAAE0b,EAAEmN,QAAQ,OAAOnN,EAAEgR,WAAW,CAACpF,MAAMplC,EAAEkD,QAAQ4a,EAAE2sB,SAAS9yB,QAAQ,SAASmG,EAAE7C,IAAIyvB,SAAS5sB,EAAE4sB,OAAOC,MAAM,CAAC5hB,MAAM8G,EAAEvZ,MAAMwH,EAAExH,QAAQ,CAAC,SAASs0B,GAAG9sB,EAAE0b,EAAEx5B,EAAE6vB,GAAG,MAAMjE,EAAE9N,EAAEisB,aAAa5D,GAAGroB,EAAEvJ,OAAOuJ,EAAEisB,gBAAgBjsB,EAAEvJ,OAAO,GAAGuJ,EAAE+rB,GAAG,CAAC,MAAMhnC,EAAE,CAAC,EAAEwb,EAAE,CAACP,EAAE9d,EAAE6vB,KAAK,IAAIjE,GAAGA,EAAE5rB,EAAE6vB,GAAG/R,GAAG9d,EAAE6qC,KAAK/sB,KAAKA,GAAG9d,EAAE8qC,KAAKhtB,KAAK,CAAC,IAAIO,EAAEre,EAAEoqC,WAAWxQ,EAAE,GAAGvb,EAAE,yBAAyBub,IAAIA,EAAE,GAAG,IAAI73B,WAAWsc,IAAI/Y,EAAEzC,EAAE+2B,KAAK/2B,EAAE+2B,IAAG,EAAGJ,EAAE1b,EAAE9d,EAAE6vB,GAAG,GAAG,OAAOxiB,QAAQS,IAAI,CAACgQ,EAAE+rB,GAAGkB,SAAS1sB,EAAEre,GAAGgrC,GAAGT,GAAGzsB,EAAE+R,EAAE7vB,GAAG8d,EAAE8rB,UAAUvrB,GAAGP,EAAE2sB,UAAU3sB,EAAEmtB,cAAc,CAAC,OAAOD,GAAGT,GAAGzsB,EAAE+R,EAAE7vB,GAAGmmC,GAAGroB,EAAE8rB,UAAUhe,GAAG4N,GAAG1b,EAAE2sB,UAAU3sB,EAAEmtB,YAAY,CAAC,SAASD,GAAGltB,EAAE0b,EAAEx5B,EAAE6vB,GAAG,IAAIjE,EAAEkW,GAAGjS,EAAE,CAAC/R,EAAE0b,EAAE5N,IAAI5rB,EAAE6vB,EAAE/R,GAAG0b,EAAE5N,GAAG5rB,GAAG,OAAO8d,EAAEsO,MAAMtO,IAAI,GAAGA,EAAE,OAAOA,EAAE5G,OAAM,KAAM,IAAIlX,EAAE,IAAI8d,EAAEgM,WAAW0P,IAAIA,EAAE1b,GAAGA,GAAG9d,EAAE8d,IAAI0b,IAAI1b,EAAE+sB,KAAKrR,GAAGx5B,EAAEg9B,EAAG,IAAGxD,IAAI1b,EAAEgtB,KAAKtR,GAAGx5B,EAAEg9B,EAAG,KAAIpR,EAAE9N,EAAE1X,MAAM0X,GAAGA,GAAG9d,EAAE8d,IAAI9d,GAAI,GAAG,GAAE,CAAC,SAASkrC,GAAGptB,EAAE0b,GAAG,IAAI,MAAMx5B,EAAEmrC,GAAGrtB,GAAG+R,EAAEsb,GAAG3R,GAAG,GAAGx5B,IAAI6vB,EAAE,MAAM,UAAU7vB,EAAE,EAAE,UAAU6vB,GAAG,EAAE,WAAW7vB,EAAE,EAAE,WAAW6vB,GAAG,EAAE,WAAW7vB,EAAE,EAAE,WAAW6vB,GAAG,EAAE,SAAS7vB,EAAE,EAAE,SAAS6vB,EAAEub,KAAK,EAAE,OAAOprC,GAAG,IAAI,SAAS,IAAI,OAAO,IAAI,SAAS,OAAO8d,EAAE0b,EAAE,EAAE1b,EAAE0b,GAAG,EAAE,EAAE,IAAI,SAAS,OAAO,SAAS1b,EAAE0b,GAAG,MAAMx5B,EAAE8d,EAAEtf,OAAOqxB,EAAE2J,EAAEh7B,OAAOotB,EAAE5rB,EAAE6vB,EAAE7vB,EAAE6vB,EAAE,IAAI,IAAI7vB,EAAE,EAAEA,EAAE4rB,IAAI5rB,EAAE,GAAG8d,EAAE9d,KAAKw5B,EAAEx5B,GAAG,OAAO8d,EAAE9d,GAAGw5B,EAAEx5B,IAAI,EAAE,EAAE,OAAOA,IAAI6vB,EAAE,EAAE7vB,EAAE6vB,GAAG,EAAE,CAAC,CAApI,CAAsIwb,GAAGvtB,GAAGutB,GAAG7R,IAAI,IAAI,QAAQ,OAAO,SAAS1b,EAAE0b,GAAG,MAAMx5B,EAAE8d,EAAEtf,OAAOqxB,EAAE2J,EAAEh7B,OAAOotB,EAAE5rB,EAAE6vB,EAAE7vB,EAAE6vB,EAAE,IAAI,IAAI7vB,EAAE,EAAEA,EAAE4rB,IAAI5rB,EAAE,CAAC,MAAM6vB,EAAEqb,GAAGptB,EAAE9d,GAAGw5B,EAAEx5B,IAAI,GAAG,IAAI6vB,EAAE,OAAOA,CAAC,CAAC,OAAO7vB,IAAI6vB,EAAE,EAAE7vB,EAAE6vB,GAAG,EAAE,CAAC,CAAxI,CAA0I/R,EAAE0b,GAAG,CAAC,MAAM1b,GAAG,CAAC,OAAOstB,GAAG,CAAC,SAASD,GAAGrtB,GAAG,MAAM0b,SAAS1b,EAAE,GAAG,WAAW0b,EAAE,OAAOA,EAAE,GAAG5gB,YAAYC,OAAOiF,GAAG,MAAM,SAAS,MAAM9d,EAAEy6B,EAAE3c,GAAG,MAAM,gBAAgB9d,EAAE,SAASA,CAAC,CAAC,SAASqrC,GAAGvtB,GAAG,OAAOA,aAAa/b,WAAW+b,EAAElF,YAAYC,OAAOiF,GAAG,IAAI/b,WAAW+b,EAAE5f,OAAO4f,EAAE5E,WAAW4E,EAAE3H,YAAY,IAAIpU,WAAW+b,EAAE,CAAC,MAAMwtB,GAAGC,MAAMztB,EAAE0b,GAAG,IAAIx5B,EAAEuH,KAAKikC,KAAK,OAAOxrC,EAAEge,MAAMhe,EAAEc,MAAM2lC,OAAO,KAAK3C,GAAGngC,KAAK,KAAK3D,EAAEge,QAAQhe,EAAEc,MAAM2lC,OAAO,WAAW3oB,GAAGsO,KAAKoN,EAAE,CAAC1uB,OAAOgT,GAAG,IAAI0b,EAAEjyB,KAAKikC,KAAK,OAAOhS,EAAExb,MAAMwb,EAAE14B,MAAM2lC,OAAO,KAAK3C,GAAGngC,KAAK,KAAK61B,EAAExb,QAAQwb,EAAE14B,MAAM2lC,OAAO,YAAY3oB,EAAE,SAAS,CAAC2tB,cAAc3tB,GAAG,IAAI0b,EAAEjyB,KAAKikC,KAAKhS,EAAEoQ,UAAUzD,GAAG3M,EAAEoQ,UAAU9rB,EAAE,CAACitB,SAASjtB,EAAE0b,GAAG,OAAOoR,GAAGrjC,KAAKikC,KAAK1tB,EAAE0b,EAAEjyB,KAAKikC,KAAK1qC,MAAMkmC,KAAK,CAACrS,MAAM7W,GAAG,IAAI0b,EAAEvzB,OAAOC,OAAOqB,KAAKF,YAAYjH,WAAWJ,EAAEiG,OAAOC,OAAOqB,KAAKikC,MAAM,OAAO1tB,GAAG+R,EAAE7vB,EAAE8d,GAAG0b,EAAEgS,KAAKxrC,EAAEw5B,CAAC,CAACkS,MAAM,OAAOnkC,KAAKikC,KAAKP,YAAY,KAAK1jC,IAAI,CAAC0gC,KAAKnqB,GAAG,IAAI0b,EAAEjyB,KAAKikC,KAAK,OAAOjkC,KAAKgkC,OAAOvrC,GAAG4qC,GAAGpR,EAAE1b,EAAE9d,EAAEw5B,EAAE14B,MAAMkmC,OAAO,CAAC/5B,MAAM6Q,GAAG,OAAOvW,KAAKgkC,OAAOztB,IAAI,MAAM0b,EAAEjyB,KAAKikC,KAAKxrC,EAAEw5B,EAAE14B,MAAMkmC,KAAK,GAAG2C,GAAGnQ,GAAE,GAAI,OAAOx5B,EAAEiN,MAAM,CAACm4B,MAAMtnB,EAAE6sB,MAAM,CAAC5hB,MAAMmhB,GAAG1Q,EAAEx5B,EAAE2mC,QAAQrwB,MAAMkjB,EAAEljB,SAAS8V,MAAMtO,GAAGtd,KAAKkN,IAAIoQ,EAAE0b,EAAE1sB,SAAS,IAAI+iB,EAAE,EAAE,OAAO+a,GAAGpR,GAAE,OAAQ3J,GAAE,IAAK/R,EAAE9d,GAAGosB,MAAK,IAAKyD,GAAI,IAAGzD,KAAKtO,EAAE,CAAC6tB,OAAO7tB,EAAE0b,GAAG,MAAMx5B,EAAE8d,EAAEtX,MAAM,KAAKmR,UAAUkY,EAAE7vB,EAAE,GAAG4rB,EAAE5rB,EAAExB,OAAO,EAAE,SAASqE,EAAEib,EAAE0b,GAAG,OAAOA,EAAE32B,EAAEib,EAAE9d,EAAEw5B,IAAIA,EAAE,GAAG1b,EAAE+R,EAAE,CAAC,IAAIvqB,EAAE,SAASiC,KAAKikC,KAAKvwB,IAAI,GAAG,EAAE,SAASoD,EAAEP,EAAE0b,GAAG,IAAIx5B,EAAE6C,EAAEib,EAAE8N,GAAGiE,EAAEhtB,EAAE22B,EAAE5N,GAAG,OAAO5rB,EAAE6vB,GAAGvqB,EAAEtF,EAAE6vB,EAAEvqB,EAAE,CAAC,CAAC,OAAOiC,KAAKkxB,SAAQ,SAAU3a,GAAG,OAAOA,EAAE8tB,KAAKvtB,EAAG,IAAG+N,KAAKoN,EAAE,CAACf,QAAQ3a,GAAG,OAAOvW,KAAKgkC,OAAOztB,IAAI,IAAI0b,EAAEjyB,KAAKikC,KAAK,GAAG,SAAShS,EAAEve,KAAK0uB,GAAGnQ,GAAE,IAAKA,EAAE1sB,MAAM,EAAE,CAAC,MAAMm+B,YAAYjrC,GAAGw5B,EAAE3J,EAAEqa,GAAG1Q,EAAEA,EAAE14B,MAAMkmC,KAAKL,QAAQ,OAAOnN,EAAE14B,MAAMkmC,KAAK2D,MAAM,CAACvF,MAAMtnB,EAAEhR,MAAM0sB,EAAE1sB,MAAM5J,QAAO,EAAGynC,MAAM,CAAC5hB,MAAM8G,EAAEvZ,MAAMkjB,EAAEljB,SAAS8V,MAAK,EAAGhW,OAAO0H,KAAK9d,EAAE8d,EAAExG,IAAItX,GAAG8d,GAAG,CAAC,CAAC,MAAM9d,EAAE,GAAG,OAAO4qC,GAAGpR,GAAG1b,GAAG9d,EAAEf,KAAK6e,IAAIA,EAAE0b,EAAE14B,MAAMkmC,MAAM5a,MAAK,IAAKpsB,GAAG,CAAE,GAAE8d,EAAE,CAACrf,OAAOqf,GAAG,IAAI0b,EAAEjyB,KAAKikC,KAAK,OAAO1tB,GAAG,IAAI0b,EAAE/6B,QAAQqf,EAAE6rB,GAAGnQ,GAAGyQ,GAAGzQ,GAAE,KAAM,IAAIA,EAAE1b,EAAE,MAAM,CAACA,EAAE9d,IAAI,IAAIw5B,IAAI,IAAIA,KAAKA,GAAE,IAAKx5B,GAAE,KAAM8d,EAAE+tB,QAAQrS,GAAGA,EAAE,CAAE,KAAG,GAAK,IAAGyQ,GAAGzQ,GAAE,KAAM,IAAIA,EAAE1b,EAAE,MAAM,MAAM0b,EAAE,CAAE,KAAIjyB,IAAI,CAACuF,MAAMgR,GAAG,OAAOvW,KAAKikC,KAAK1+B,MAAMtM,KAAKkN,IAAInG,KAAKikC,KAAK1+B,MAAMgR,GAAGmsB,GAAG1iC,KAAKikC,MAAK,KAAM,IAAIhS,EAAE1b,EAAE,OAAO,SAASA,EAAE9d,EAAE6vB,GAAG,QAAQ2J,GAAG,GAAGx5B,EAAE6vB,GAAG2J,GAAG,CAAC,CAAE,IAAE,GAAIjyB,IAAI,CAACukC,MAAMhuB,EAAE0b,GAAG,OAAOwQ,GAAGziC,KAAKikC,MAAK,SAAUxrC,EAAE6vB,EAAEjE,GAAG,OAAO9N,EAAE9d,EAAEoG,SAASypB,EAAEjE,GAAG4N,EAAG,IAAGjyB,IAAI,CAACka,MAAM3D,GAAG,OAAOvW,KAAKuF,MAAM,GAAG2rB,SAAQ,SAAU3a,GAAG,OAAOA,EAAE,EAAG,IAAGsO,KAAKtO,EAAE,CAAC/e,KAAK+e,GAAG,OAAOvW,KAAKoQ,UAAU8J,MAAM3D,EAAE,CAACvJ,OAAOuJ,GAAG,IAAI0b,EAAEx5B,EAAE,OAAOgqC,GAAGziC,KAAKikC,MAAK,SAAUhS,GAAG,OAAO1b,EAAE0b,EAAEpzB,MAAO,IAAGozB,EAAEjyB,KAAKikC,KAAKxrC,EAAE8d,EAAE0b,EAAEuS,QAAQ5F,GAAG3M,EAAEuS,QAAQ/rC,GAAGuH,IAAI,CAACygC,IAAIlqB,GAAG,OAAOvW,KAAKgN,OAAOuJ,EAAE,CAAC+rB,GAAG/rB,GAAG,OAAO,IAAIvW,KAAK0B,GAAGm+B,YAAY7/B,KAAKikC,KAAK1qC,MAAMgd,EAAEvW,KAAK,CAACoQ,UAAU,OAAOpQ,KAAKikC,KAAKvwB,IAAI,SAAS1T,KAAKikC,KAAKvwB,IAAI,OAAO,OAAO1T,KAAKykC,oBAAoBzkC,KAAKykC,mBAAmBzkC,KAAKikC,KAAKvwB,KAAK1T,IAAI,CAAC0kC,OAAO,OAAO1kC,KAAKoQ,SAAS,CAACu0B,QAAQpuB,GAAG,IAAI0b,EAAEjyB,KAAKikC,KAAK,OAAOhS,EAAEiR,UAAUjR,EAAEuS,QAAQxkC,KAAK0gC,MAAK,SAAUzO,EAAEx5B,GAAG8d,EAAE9d,EAAEsJ,IAAItJ,EAAG,GAAE,CAACmsC,cAAcruB,GAAG,OAAOvW,KAAKikC,KAAKd,OAAO,SAASnjC,KAAK2kC,QAAQpuB,EAAE,CAACsuB,eAAetuB,GAAG,IAAI0b,EAAEjyB,KAAKikC,KAAK,OAAOhS,EAAEiR,UAAUjR,EAAEuS,QAAQxkC,KAAK0gC,MAAK,SAAUzO,EAAEx5B,GAAG8d,EAAE9d,EAAEoqC,WAAWpqC,EAAG,GAAE,CAAC0O,KAAKoP,GAAG,IAAI0b,EAAEjyB,KAAKikC,KAAKhS,EAAEiR,UAAUjR,EAAEuS,QAAQ,IAAI/rC,EAAE,GAAG,OAAOuH,KAAK0gC,MAAK,SAAUnqB,EAAE0b,GAAGx5B,EAAEf,KAAKu6B,EAAElwB,IAAK,IAAG8iB,MAAK,WAAY,OAAOpsB,CAAE,IAAGosB,KAAKtO,EAAE,CAACuuB,YAAYvuB,GAAG,IAAI0b,EAAEjyB,KAAKikC,KAAK,GAAG,SAAShS,EAAEve,KAAK0uB,GAAGnQ,GAAE,IAAKA,EAAE1sB,MAAM,EAAE,OAAOvF,KAAKgkC,OAAOztB,IAAI,IAAI9d,EAAEkqC,GAAG1Q,EAAEA,EAAE14B,MAAMkmC,KAAKL,QAAQ,OAAOnN,EAAE14B,MAAMkmC,KAAK2D,MAAM,CAACvF,MAAMtnB,EAAE5a,QAAO,EAAG4J,MAAM0sB,EAAE1sB,MAAM69B,MAAM,CAAC5hB,MAAM/oB,EAAEsW,MAAMkjB,EAAEljB,QAAS,IAAG8V,MAAK,EAAGhW,OAAO0H,KAAKA,IAAIsO,KAAKtO,GAAG0b,EAAEiR,UAAUjR,EAAEuS,QAAQ,IAAI/rC,EAAE,GAAG,OAAOuH,KAAK0gC,MAAK,SAAUnqB,EAAE0b,GAAGx5B,EAAEf,KAAKu6B,EAAE4Q,WAAY,IAAGhe,MAAK,WAAY,OAAOpsB,CAAE,IAAGosB,KAAKtO,EAAE,CAACwuB,WAAWxuB,GAAG,OAAOvW,KAAKikC,KAAKd,OAAO,SAASnjC,KAAKmH,KAAKoP,EAAE,CAACyuB,SAASzuB,GAAG,OAAOvW,KAAKuF,MAAM,GAAG4B,MAAK,SAAUoP,GAAG,OAAOA,EAAE,EAAG,IAAGsO,KAAKtO,EAAE,CAAC0uB,QAAQ1uB,GAAG,OAAOvW,KAAKoQ,UAAU40B,SAASzuB,EAAE,CAAC2uB,WAAW,IAAI3uB,EAAEvW,KAAKikC,KAAKhS,EAAE1b,EAAEiL,OAAOjL,EAAEhd,MAAM6lC,OAAOgB,UAAU7pB,EAAEiL,OAAO,IAAIyQ,IAAIA,EAAEsO,MAAM,OAAOvgC,KAAK,IAAIvH,EAAE,CAAC,EAAE,OAAOgqC,GAAGziC,KAAKikC,MAAK,SAAU1tB,GAAG,IAAI0b,EAAE1b,EAAEssB,WAAWpwB,WAAW6V,EAAEvqB,EAAEtF,EAAEw5B,GAAG,OAAOx5B,EAAEw5B,IAAG,GAAI3J,CAAE,IAAGtoB,IAAI,CAACuhC,OAAOhrB,GAAG,IAAI9d,EAAEuH,KAAKikC,KAAK,OAAOjkC,KAAKuD,QAAQ+kB,IAAI,IAAIjE,EAAE,GAAG,mBAAmB9N,EAAE8N,EAAE9N,MAAM,CAAC,IAAIjb,EAAE22B,EAAE1b,GAAGxY,EAAEzC,EAAErE,OAAOotB,EAAE,SAAS4N,GAAG,IAAI,IAAIx5B,GAAE,EAAG6vB,EAAE,EAAEA,EAAEvqB,IAAIuqB,EAAE,CAAC,IAAIjE,EAAE/oB,EAAEgtB,GAAGxR,EAAEP,EAAE8N,GAAGtS,EAAEkgB,EAAE5N,KAAKvN,IAAIqJ,EAAE8R,EAAE5N,EAAEvN,GAAGre,GAAE,EAAG,CAAC,OAAOA,CAAC,CAAC,CAAC,MAAMqe,EAAEre,EAAEc,MAAMkmC,MAAM0F,SAAS9S,EAAE+S,WAAWjc,GAAGrS,EAAEsoB,OAAOyD,WAAW1tB,EAAEnV,KAAK0B,GAAGu8B,SAASoH,iBAAiB,IAAI9S,EAAE,GAAG,IAAIC,EAAE,EAAE,MAAMC,EAAE,GAAGl3B,EAAE,CAACgb,EAAE9d,KAAK,MAAMi8B,SAASpM,EAAE8Y,YAAY/c,GAAG5rB,EAAE+5B,GAAGjc,EAAE8N,EAAE,IAAI,IAAI9N,KAAK0b,EAAE3J,GAAGiK,EAAE76B,KAAK4wB,EAAE/R,GAAE,EAAG,OAAOvW,KAAKotB,QAAQ0X,cAAcjgB,MAAMoN,IAAI,MAAM32B,EAAEyC,IAAI,MAAMw0B,EAAEt5B,KAAKkN,IAAIgP,EAAE8c,EAAEh7B,OAAO8G,GAAG,OAAO+Y,EAAEtN,QAAQ,CAACq0B,MAAMvV,EAAEnhB,KAAK8qB,EAAEn5B,MAAMiF,EAAEA,EAAEw0B,GAAGhjB,MAAM,cAAcsV,MAAM2N,IAAI,MAAMC,EAAE,GAAG1b,EAAE,GAAGxD,EAAE8e,EAAE,GAAG,KAAKvJ,EAAE,GAAG,IAAI,IAAIvS,EAAE,EAAEA,EAAEgc,IAAIhc,EAAE,CAAC,MAAM9d,EAAE+5B,EAAEjc,GAAG+R,EAAE,CAACzpB,MAAMk0B,EAAEt6B,GAAGsnC,QAAQ9N,EAAEl0B,EAAEwY,KAAI,IAAK8N,EAAEtrB,KAAKuvB,EAAEA,EAAEzpB,MAAMypB,KAAK,MAAMA,EAAEzpB,MAAMiqB,EAAEpxB,KAAKu6B,EAAEl0B,EAAEwY,IAAI8b,GAAG,IAAIsR,GAAGxa,EAAE1wB,GAAG0wB,EAAEb,EAAEzpB,SAASkY,EAAErf,KAAK4wB,EAAEzpB,OAAOwzB,GAAG9e,EAAE7b,KAAKu6B,EAAEl0B,EAAEwY,MAAMuS,EAAEpxB,KAAKu6B,EAAEl0B,EAAEwY,IAAIkc,EAAE/6B,KAAK4wB,EAAEzpB,QAAQ,CAAC,MAAMmzB,EAAEoQ,GAAG3pC,IAAIA,EAAE8M,QAAQ,MAAM,mBAAmBgR,GAAGA,IAAI+uB,KAAK,CAAC9jB,MAAM/oB,EAAE+oB,MAAMzS,MAAMtW,EAAEsW,OAAO,OAAOjJ,QAAQC,QAAQ0sB,EAAEx7B,OAAO,GAAG6f,EAAEqqB,OAAO,CAACtD,MAAMvV,EAAEvlB,KAAK,MAAMpH,OAAO82B,IAAI5N,MAAMtO,IAAI,IAAI,IAAI0b,KAAK1b,EAAEme,SAAS5L,EAAE1G,OAAO3N,SAASwd,GAAG,GAAG12B,EAAEk3B,EAAEx7B,OAAOsf,EAAG,KAAIsO,MAAK,KAAM9N,EAAE9f,OAAO,GAAG+6B,GAAG,iBAAiBzb,IAAIO,EAAEqqB,OAAO,CAACtD,MAAMvV,EAAEvlB,KAAK,MAAMoE,KAAKoM,EAAE5X,OAAOob,EAAEwuB,SAASvT,EAAEwT,WAAW,mBAAmBjvB,GAAGA,IAAIsO,MAAMtO,GAAGhb,EAAEwb,EAAE9f,OAAOsf,OAAOsO,MAAK,KAAMiE,EAAE7xB,OAAO,GAAG+6B,GAAGzb,IAAI+uB,KAAKxuB,EAAEqqB,OAAO,CAACtD,MAAMvV,EAAEvlB,KAAK,SAASoE,KAAK2hB,EAAEyc,SAASvT,IAAInN,MAAMtO,GAAGhb,EAAEutB,EAAE7xB,OAAOsf,OAAOsO,MAAK,IAAKoN,EAAEh7B,OAAO8G,EAAEw0B,GAAGj3B,EAAEyC,EAAEoX,IAAK,GAAC,EAAG,OAAO7Z,EAAE,GAAGupB,MAAK,KAAM,GAAG0N,EAAEt7B,OAAO,EAAE,MAAM,IAAIw9B,EAAE,sCAAsClC,EAAEC,EAAEC,GAAG,OAAOR,EAAEh7B,MAAO,GAAG,GAAG,GAAE,CAAC8V,SAAS,IAAIwJ,EAAEvW,KAAKikC,KAAKhS,EAAE1b,EAAExH,MAAM,OAAOqzB,GAAG7rB,KAAKA,EAAEqsB,YAAY3zB,IAAI,IAAIgjB,EAAElvB,MAAM/C,KAAKuD,QAAQ9K,IAAI,MAAMoqC,WAAWva,GAAG/R,EAAEhd,MAAMkmC,KAAKL,OAAO/a,EAAE4N,EAAE,OAAO1b,EAAEhd,MAAMkmC,KAAK/5B,MAAM,CAACm4B,MAAMplC,EAAE2qC,MAAM,CAAC5hB,MAAM8G,EAAEvZ,MAAMsV,KAAKQ,MAAMoN,GAAG1b,EAAEhd,MAAMkmC,KAAK0B,OAAO,CAACtD,MAAMplC,EAAEsK,KAAK,cAAcgM,MAAMsV,IAAIQ,MAAK,EAAG6P,SAASne,EAAE8qB,WAAW5oC,EAAE+rB,QAAQ8D,EAAE8Y,YAAY/c,MAAM,GAAGA,EAAE,MAAM,IAAIoQ,EAAE,+BAA+B/1B,OAAOyI,KAAKoP,GAAGxG,KAAKkiB,GAAG1b,EAAE0b,KAAKA,EAAE5N,GAAG,OAAO4N,EAAE5N,CAAE,KAAK,IAAGrkB,KAAKuhC,OAAO+D,GAAG,EAAE,MAAMA,GAAG,CAAC/uB,EAAE0b,IAAIA,EAAEpzB,MAAM,KAAK,SAAS4mC,GAAGlvB,EAAE0b,GAAG,OAAO1b,EAAE0b,GAAG,EAAE1b,IAAI0b,EAAE,EAAE,CAAC,CAAC,SAASyT,GAAGnvB,EAAE0b,GAAG,OAAO1b,EAAE0b,GAAG,EAAE1b,IAAI0b,EAAE,EAAE,CAAC,CAAC,SAAS0T,GAAGpvB,EAAE0b,EAAEx5B,GAAG,IAAI6vB,EAAE/R,aAAaqvB,GAAG,IAAIrvB,EAAEoqB,WAAWpqB,GAAGA,EAAE,OAAO+R,EAAE2b,KAAKxtB,MAAMhe,EAAE,IAAIA,EAAEw5B,GAAG,IAAItwB,UAAUswB,GAAG3J,CAAC,CAAC,SAASud,GAAGtvB,GAAG,OAAO,IAAIA,EAAEoqB,WAAWpqB,GAAE,IAAKuvB,GAAG,MAAMvgC,MAAM,EAAE,CAAC,SAASwgC,GAAGxvB,EAAE0b,EAAEx5B,EAAE6vB,EAAEjE,EAAE/oB,GAAG,IAAI,IAAIyC,EAAE9E,KAAKkN,IAAIoQ,EAAEtf,OAAOqxB,EAAErxB,QAAQ6f,GAAG,EAAEub,EAAE,EAAEA,EAAEt0B,IAAIs0B,EAAE,CAAC,IAAIlJ,EAAE8I,EAAEI,GAAG,GAAGlJ,IAAIb,EAAE+J,GAAG,OAAOhO,EAAE9N,EAAE8b,GAAG55B,EAAE45B,IAAI,EAAE9b,EAAE7B,OAAO,EAAE2d,GAAG55B,EAAE45B,GAAG55B,EAAEic,OAAO2d,EAAE,GAAGhO,EAAE9N,EAAE8b,GAAG/J,EAAE+J,IAAI,EAAE9b,EAAE7B,OAAO,EAAE2d,GAAG/J,EAAE+J,GAAG55B,EAAEic,OAAO2d,EAAE,GAAGvb,GAAG,EAAEP,EAAE7B,OAAO,EAAEoC,GAAGmb,EAAEnb,GAAGre,EAAEic,OAAOoC,EAAE,GAAG,KAAKuN,EAAE9N,EAAE8b,GAAGlJ,GAAG,IAAIrS,EAAEub,EAAE,CAAC,OAAOt0B,EAAEuqB,EAAErxB,QAAQ,SAASqE,EAAEib,EAAE9d,EAAEic,OAAO6B,EAAEtf,QAAQ8G,EAAEwY,EAAEtf,QAAQ,SAASqE,EAAEib,EAAE7B,OAAO,EAAEjc,EAAExB,QAAQ6f,EAAE,EAAE,KAAKP,EAAE7B,OAAO,EAAEoC,GAAGwR,EAAExR,GAAGre,EAAEic,OAAOoC,EAAE,EAAE,CAAC,SAASkvB,GAAGzvB,EAAE0b,EAAEx5B,EAAE6vB,GAAG,IAAIjE,EAAE/oB,EAAEyC,EAAE+Y,EAAEub,EAAElJ,EAAEhU,EAAEod,EAAE95B,EAAExB,OAAO,IAAIwB,EAAE2V,OAAOmI,GAAG,iBAAiBA,IAAI,OAAOovB,GAAGpvB,EAAE,oBAAoB,SAASic,EAAEjc,GAAG8N,EAAE,SAAS9N,GAAG,MAAM,SAASA,EAAEA,GAAGA,EAAEsW,cAActW,GAAGA,EAAEzD,aAAa,CAAlE,CAAoEyD,GAAGjb,EAAE,SAASib,GAAG,MAAM,SAASA,EAAEA,GAAGA,EAAEzD,cAAcyD,GAAGA,EAAEsW,aAAa,CAAlE,CAAoEtW,GAAGxY,EAAE,SAASwY,EAAEkvB,GAAGC,GAAG,IAAIzT,EAAEx5B,EAAEsX,KAAI,SAAUwG,GAAG,MAAM,CAACsM,MAAMvnB,EAAEib,GAAGuM,MAAMuB,EAAE9N,GAAI,IAAG8tB,MAAK,SAAU9tB,EAAE0b,GAAG,OAAOl0B,EAAEwY,EAAEsM,MAAMoP,EAAEpP,MAAO,IAAG/L,EAAEmb,EAAEliB,KAAI,SAAUwG,GAAG,OAAOA,EAAEuM,KAAM,IAAGuP,EAAEJ,EAAEliB,KAAI,SAAUwG,GAAG,OAAOA,EAAEsM,KAAM,IAAGsG,EAAE5S,EAAEpB,EAAE,SAASoB,EAAE,GAAG+R,CAAC,CAACkK,EAAE,QAAQ,IAAIC,EAAE,IAAIlc,EAAEoqB,WAAWpqB,GAAE,IAAK0vB,GAAGnvB,EAAE,GAAGub,EAAEE,EAAE,GAAGjK,KAAKmK,EAAEgS,mBAAmB,SAASluB,GAAGic,EAAEjc,EAAE,EAAE,IAAIhb,EAAE,EAAE,OAAOk3B,EAAEyR,eAAc,SAAU3tB,EAAE9d,EAAE6vB,GAAG,IAAIjE,EAAE9N,EAAExU,IAAI,GAAG,iBAAiBsiB,EAAE,OAAM,EAAG,IAAImO,EAAEl3B,EAAE+oB,GAAG,GAAG4N,EAAEO,EAAEH,EAAE92B,GAAG,OAAM,EAAG,IAAI,IAAIk3B,EAAE,KAAK1b,EAAExb,EAAEwb,EAAEwb,IAAIxb,EAAE,CAAC,IAAIxD,EAAEwyB,GAAG1hB,EAAEmO,EAAE1b,EAAEC,GAAGsb,EAAEtb,GAAGhZ,EAAEorB,GAAG,OAAO5V,GAAG,OAAOkf,EAAEl3B,EAAEwb,EAAE,GAAG,OAAO0b,GAAG10B,EAAE00B,EAAElf,GAAG,KAAKkf,EAAElf,EAAE,CAAC,OAAO9a,EAAE,OAAOg6B,EAAE,WAAWlc,EAAEgM,SAASkQ,EAAEtd,EAAE,EAAEmT,IAAG,CAAG,IAAGmK,CAAC,CAAC,SAASwT,GAAG1vB,EAAE0b,EAAEx5B,EAAE6vB,GAAG,MAAM,CAACvlB,KAAK,EAAE8f,MAAMtM,EAAEuM,MAAMmP,EAAE6M,UAAUrmC,EAAEsmC,UAAUzW,EAAE,CAAC,SAASwd,GAAGvvB,GAAG,MAAM,CAACxT,KAAK,EAAE8f,MAAMtM,EAAEuM,MAAMvM,EAAE,CAAC,MAAMqvB,GAAOjF,iBAAa,OAAO3gC,KAAKikC,KAAK1qC,MAAMmI,GAAGi/B,UAAU,CAACuF,QAAQ3vB,EAAE0b,EAAEx5B,EAAE6vB,GAAG7vB,GAAE,IAAKA,EAAE6vB,GAAE,IAAKA,EAAE,IAAI,OAAOtoB,KAAKmmC,KAAK5vB,EAAE0b,GAAG,GAAG,IAAIjyB,KAAKmmC,KAAK5vB,EAAE0b,KAAKx5B,GAAG6vB,MAAM7vB,IAAI6vB,GAAGud,GAAG7lC,MAAM,IAAIA,KAAK2gC,WAAW3gC,MAAK,IAAKimC,GAAG1vB,EAAE0b,GAAGx5B,GAAG6vB,IAAI,CAAC,MAAM/R,GAAG,OAAOovB,GAAG3lC,KAAKq+B,GAAG,CAAC,CAAC/mB,OAAOf,GAAG,OAAO,MAAMA,EAAEovB,GAAG3lC,KAAKq+B,IAAI,IAAIr+B,KAAK2gC,WAAW3gC,MAAK,IAAK8lC,GAAGvvB,IAAI,CAAC6vB,MAAM7vB,GAAG,OAAO,MAAMA,EAAEovB,GAAG3lC,KAAKq+B,IAAI,IAAIr+B,KAAK2gC,WAAW3gC,MAAK,IAAKimC,GAAG1vB,OAAE,GAAO,IAAK,CAAC8vB,aAAa9vB,GAAG,OAAO,MAAMA,EAAEovB,GAAG3lC,KAAKq+B,IAAI,IAAIr+B,KAAK2gC,WAAW3gC,MAAK,IAAKimC,GAAG1vB,OAAE,GAAO,IAAK,CAAC+vB,MAAM/vB,GAAG,OAAO,MAAMA,EAAEovB,GAAG3lC,KAAKq+B,IAAI,IAAIr+B,KAAK2gC,WAAW3gC,MAAK,IAAKimC,QAAG,EAAO1vB,GAAE,GAAG,IAAK,CAACgwB,aAAahwB,GAAG,OAAO,MAAMA,EAAEovB,GAAG3lC,KAAKq+B,IAAI,IAAIr+B,KAAK2gC,WAAW3gC,MAAK,IAAKimC,QAAG,EAAO1vB,IAAI,CAACiwB,WAAWjwB,GAAG,MAAM,iBAAiBA,EAAEovB,GAAG3lC,KAAK,oBAAoBA,KAAKkmC,QAAQ3vB,EAAEA,EAAE6nB,IAAG,GAAG,EAAG,CAACqI,qBAAqBlwB,GAAG,MAAM,KAAKA,EAAEvW,KAAKwmC,WAAWjwB,GAAGyvB,GAAGhmC,MAAK,CAAEuW,EAAE0b,IAAI,IAAI1b,EAAEhX,QAAQ0yB,EAAE,KAAK,CAAC1b,GAAG6nB,GAAG,CAACsI,iBAAiBnwB,GAAG,OAAOyvB,GAAGhmC,MAAK,CAAEuW,EAAE0b,IAAI1b,IAAI0b,EAAE,IAAI,CAAC1b,GAAG,GAAG,CAACowB,kBAAkB,IAAIpwB,EAAE8c,EAAEh8B,MAAM+7B,EAAEp6B,WAAW,OAAO,IAAIud,EAAEtf,OAAO4uC,GAAG7lC,MAAMgmC,GAAGhmC,MAAK,CAAEuW,EAAE0b,KAAK,IAAIA,EAAE1yB,QAAQgX,IAAIA,EAAE,GAAG,CAACqwB,4BAA4B,IAAIrwB,EAAE8c,EAAEh8B,MAAM+7B,EAAEp6B,WAAW,OAAO,IAAIud,EAAEtf,OAAO4uC,GAAG7lC,MAAMgmC,GAAGhmC,MAAK,CAAEuW,EAAE0b,IAAIA,EAAEiI,MAAMjI,GAAG,IAAI1b,EAAEhX,QAAQ0yB,MAAM1b,EAAE6nB,GAAG,CAACyI,QAAQ,MAAMtwB,EAAE8c,EAAEh8B,MAAM+7B,EAAEp6B,WAAW,IAAIi5B,EAAEjyB,KAAKmmC,KAAK,IAAI5vB,EAAE8tB,KAAKpS,EAAE,CAAC,MAAM1b,GAAG,OAAOovB,GAAG3lC,KAAKq+B,GAAG,CAAC,GAAG,IAAI9nB,EAAEtf,OAAO,OAAO4uC,GAAG7lC,MAAM,MAAMvH,EAAE,IAAIuH,KAAK2gC,WAAW3gC,MAAK,IAAKimC,GAAG1vB,EAAE,GAAGA,EAAEA,EAAEtf,OAAO,MAAMwB,EAAEgsC,mBAAmBhsC,IAAIw5B,EAAE,SAASx5B,EAAEuH,KAAK8mC,WAAW9mC,KAAK+mC,YAAYxwB,EAAE8tB,KAAKpS,EAAC,EAAG,IAAI3J,EAAE,EAAE,OAAO7vB,EAAEyrC,eAAc,CAAEzrC,EAAE4rB,EAAE/oB,KAAK,MAAMyC,EAAEtF,EAAEsJ,IAAI,KAAKkwB,EAAEl0B,EAAEwY,EAAE+R,IAAI,GAAG,KAAKA,EAAEA,IAAI/R,EAAEtf,OAAO,OAAOotB,EAAE/oB,IAAG,EAAG,OAAO,IAAI22B,EAAEl0B,EAAEwY,EAAE+R,MAAMjE,GAAE,KAAM5rB,EAAE8pB,SAAShM,EAAE+R,GAAI,KAAG,EAAI,IAAG7vB,CAAC,CAACuuC,SAASzwB,GAAG,OAAOvW,KAAKinC,WAAW,CAAC,EAAE,IAAM1wB,GAAG,CAACA,EAAEvW,KAAK0B,GAAGw+B,UAAU,CAACgH,eAAc,EAAGC,eAAc,GAAI,CAACC,SAAS,MAAM7wB,EAAE8c,EAAEh8B,MAAM+7B,EAAEp6B,WAAW,GAAG,IAAIud,EAAEtf,OAAO,OAAO,IAAI+I,KAAK2gC,WAAW3gC,MAAM,IAAIuW,EAAE8tB,KAAKrkC,KAAK8mC,WAAW,CAAC,MAAMvwB,GAAG,OAAOovB,GAAG3lC,KAAKq+B,GAAG,CAAC,MAAMpM,EAAE1b,EAAEmQ,QAAO,CAAEnQ,EAAE0b,IAAI1b,EAAEA,EAAEzH,OAAO,CAAC,CAACyH,EAAEA,EAAEtf,OAAO,GAAG,GAAGg7B,KAAK,CAAC,EAAE,IAAMA,KAAK,MAAM,OAAOA,EAAEv6B,KAAK,CAAC6e,EAAEA,EAAEtf,OAAO,GAAG+I,KAAK0B,GAAGw+B,UAAUlgC,KAAKinC,WAAWhV,EAAE,CAACiV,eAAc,EAAGC,eAAc,GAAI,CAACF,WAAW1wB,EAAE0b,GAAG,MAAMx5B,EAAEuH,KAAKmmC,KAAK7d,EAAEtoB,KAAK8mC,WAAWziB,EAAErkB,KAAK+mC,YAAYzrC,EAAE0E,KAAKqnC,KAAKtpC,EAAEiC,KAAKsnC,KAAK,GAAG,IAAI/wB,EAAEtf,OAAO,OAAO4uC,GAAG7lC,MAAM,IAAIuW,EAAEnI,OAAOmI,QAAG,IAASA,EAAE,SAAI,IAASA,EAAE,IAAI+R,EAAE/R,EAAE,GAAGA,EAAE,KAAK,IAAI,OAAOovB,GAAG3lC,KAAK,6HAA6Hk1B,GAAEsM,iBAAiB,MAAM1qB,GAAGmb,IAAG,IAAKA,EAAEiV,cAAc7U,EAAEJ,IAAG,IAAKA,EAAEkV,cAAc,IAAIhe,EAAEhU,EAAEmT,EAAE,SAASiK,EAAEhc,EAAE0b,GAAG,OAAO9c,EAAEoB,EAAE,GAAG0b,EAAE,GAAG,CAAC,IAAI9I,EAAE5S,EAAEmQ,QAAO,SAAUnQ,EAAE0b,GAAG,IAAI3J,EAAE,EAAEjE,EAAE9N,EAAEtf,OAAO,KAAKqxB,EAAEjE,IAAIiE,EAAE,CAAC,MAAMjE,EAAE9N,EAAE+R,GAAG,GAAG7vB,EAAEw5B,EAAE,GAAG5N,EAAE,IAAI,GAAG5rB,EAAEw5B,EAAE,GAAG5N,EAAE,IAAI,EAAE,CAACA,EAAE,GAAG/oB,EAAE+oB,EAAE,GAAG4N,EAAE,IAAI5N,EAAE,GAAGtmB,EAAEsmB,EAAE,GAAG4N,EAAE,IAAI,KAAK,CAAC,CAAC,OAAO3J,IAAIjE,GAAG9N,EAAE7e,KAAKu6B,GAAG1b,CAAE,GAAE,IAAI4S,EAAEkb,KAAK9R,EAAE,CAAC,MAAMhc,GAAG,OAAOovB,GAAG3lC,KAAKq+B,GAAG,CAAC,IAAI7L,EAAE,EAAE,MAAMC,EAAEJ,EAAE9b,GAAG+R,EAAE/R,EAAE4S,EAAEqJ,GAAG,IAAI,EAAEjc,GAAG+R,EAAE/R,EAAE4S,EAAEqJ,GAAG,KAAK,EAAEj3B,EAAEub,EAAEP,GAAG8N,EAAE9N,EAAE4S,EAAEqJ,GAAG,IAAI,EAAEjc,GAAG8N,EAAE9N,EAAE4S,EAAEqJ,GAAG,KAAK,EAAE,IAAIzb,EAAE0b,EAAE,MAAMlf,EAAE,IAAIvT,KAAK2gC,WAAW3gC,MAAK,IAAKimC,GAAG9c,EAAE,GAAG,GAAGA,EAAEA,EAAElyB,OAAO,GAAG,IAAI6f,GAAGub,KAAK,OAAO9e,EAAEkxB,mBAAmBluB,IAAI,SAASA,GAAGQ,EAAE0b,EAAEtd,EAAEmT,IAAIvR,EAAExb,EAAE4Z,EAAEkP,GAAG8E,EAAEkb,KAAK9R,EAAC,EAAGhf,EAAE2wB,eAAc,CAAE3tB,EAAE0b,EAAEx5B,KAAK,IAAI,IAAI4rB,EAAE9N,EAAExU,IAAIgV,EAAEsN,IAAI,KAAKmO,EAAEA,IAAIrJ,EAAElyB,OAAO,OAAOg7B,EAAEx5B,IAAG,EAAG,QAAQ,SAAS8d,GAAG,OAAOkc,EAAElc,KAAKhb,EAAEgb,EAAE,CAA9B,CAAgC8N,KAAK,IAAIrkB,KAAKmmC,KAAK9hB,EAAE8E,EAAEqJ,GAAG,KAAK,IAAIxyB,KAAKmmC,KAAK9hB,EAAE8E,EAAEqJ,GAAG,KAAKP,GAAE,KAAM9c,IAAImT,EAAE/R,EAAEgM,SAAS4G,EAAEqJ,GAAG,IAAIjc,EAAEgM,SAAS4G,EAAEqJ,GAAG,GAAI,KAAG,EAAI,IAAGjf,CAAC,CAACg0B,kBAAkB,MAAMhxB,EAAE8c,EAAEh8B,MAAM+7B,EAAEp6B,WAAW,OAAOud,EAAEnI,OAAOmI,GAAG,iBAAiBA,IAAI,IAAIA,EAAEtf,OAAO4uC,GAAG7lC,MAAMA,KAAKinC,WAAW1wB,EAAExG,KAAKwG,GAAG,CAACA,EAAEA,EAAE6nB,OAAOuH,GAAG3lC,KAAK,4CAA4C,EAAE,SAASwnC,GAAGjxB,GAAG,OAAOgkB,IAAG,SAAUtI,GAAG,OAAOwV,GAAGxV,GAAG1b,EAAE0b,EAAErrB,OAAO6P,QAAO,CAAG,GAAE,CAAC,SAASgxB,GAAGlxB,GAAGA,EAAEgL,iBAAiBhL,EAAEgL,kBAAkBhL,EAAEmxB,gBAAgBnxB,EAAEmxB,gBAAgB,CAAC,MAAMC,GAAG5F,GAAG,KAAK,kBAAkB,MAAM6F,GAAGC,QAAQ,OAAOt0B,GAAG6kB,GAAGhP,UAAUppB,KAAK8nC,UAAU,IAAI9nC,KAAK8nC,WAAW1P,GAAGhP,SAASgP,GAAG2P,aAAa/nC,MAAMA,IAAI,CAACgoC,UAAU,GAAGz0B,GAAG6kB,GAAGhP,QAAQ,KAAKppB,KAAK8nC,UAAU,IAAI1P,GAAGhP,SAASgP,GAAG2P,aAAa,MAAM/nC,KAAKioC,cAAchxC,OAAO,IAAI+I,KAAKkoC,WAAW,CAAC,IAAI3xB,EAAEvW,KAAKioC,cAAc7oC,QAAQ,IAAIg8B,GAAG7kB,EAAE,GAAGA,EAAE,GAAG,CAAC,MAAMA,GAAG,CAAC,CAAC,OAAOvW,IAAI,CAACkoC,UAAU,OAAOloC,KAAK8nC,WAAW1P,GAAG2P,eAAe/nC,IAAI,CAACrB,OAAO4X,GAAG,IAAIvW,KAAK+gB,KAAK,OAAO/gB,KAAK,MAAMiyB,EAAEjyB,KAAK0B,GAAG07B,MAAM3kC,EAAEuH,KAAK0B,GAAGq3B,OAAOgF,YAAY,GAAGxqB,GAAGvT,KAAKs/B,WAAW/oB,IAAI0b,EAAE,OAAOx5B,GAAGA,EAAE4G,MAAM,IAAI,sBAAsB,MAAM,IAAI61B,GAAEhB,eAAez7B,GAAG,IAAI,kBAAkB,MAAM,IAAIy8B,GAAEb,WAAW57B,EAAEilB,QAAQjlB,GAAG,QAAQ,MAAM,IAAIy8B,GAAEiT,WAAW1vC,GAAG,IAAIuH,KAAKooC,OAAO,MAAM,IAAIlT,GAAEd,oBAAoB,OAAO7gB,EAAE,OAAOvT,KAAK89B,YAAY/E,SAASxiB,EAAEvW,KAAKs/B,SAAS/oB,IAAIvW,KAAK0B,GAAG+9B,KAAKz/B,KAAK0B,GAAG+9B,KAAKze,YAAYhhB,KAAKqoC,WAAWroC,KAAK+gB,KAAK,CAACunB,WAAWtoC,KAAKuoC,8BAA8BtW,EAAEjR,YAAYhhB,KAAKqoC,WAAWroC,KAAK+gB,KAAK,CAACunB,WAAWtoC,KAAKuoC,gCAAgC/nB,QAAQ+Z,IAAItI,IAAIwV,GAAGxV,GAAGjyB,KAAKwoC,QAAQjyB,EAAEE,MAAO,IAAGF,EAAE4K,QAAQoZ,IAAItI,IAAIwV,GAAGxV,GAAGjyB,KAAKooC,QAAQpoC,KAAKwoC,QAAQ,IAAItT,GAAEf,MAAM5d,EAAEE,QAAQzW,KAAKooC,QAAO,EAAGpoC,KAAKyoC,GAAG,SAAS7I,KAAK3N,EAAG,IAAG1b,EAAE6K,WAAWmZ,IAAG,KAAMv6B,KAAKooC,QAAO,EAAGpoC,KAAK0oC,WAAW,iBAAiBnyB,GAAGoxB,GAAGgB,eAAe/I,KAAKrpB,EAAEqyB,aAAc,IAAG5oC,IAAI,CAACi6B,SAAS1jB,EAAE0b,EAAEx5B,GAAG,GAAG,cAAc8d,GAAG,cAAcvW,KAAK+gB,KAAK,OAAOwb,GAAG,IAAIrH,GAAE2T,SAAS,4BAA4B,IAAI7oC,KAAKooC,OAAO,OAAO7L,GAAG,IAAIrH,GAAEd,qBAAqB,GAAGp0B,KAAKkoC,UAAU,OAAO,IAAI3P,IAAG,CAAEjQ,EAAEjE,KAAKrkB,KAAKioC,cAAcvwC,KAAK,CAAC,KAAKsI,KAAKi6B,SAAS1jB,EAAE0b,EAAEx5B,GAAGosB,KAAKyD,EAAEjE,EAAC,EAAG+T,IAAK,IAAG,GAAG3/B,EAAE,OAAOyiC,IAAG,KAAM,IAAI3kB,EAAE,IAAIgiB,IAAG,CAAEhiB,EAAE9d,KAAKuH,KAAK6nC,QAAQ,MAAMvf,EAAE2J,EAAE1b,EAAE9d,EAAEuH,MAAMsoB,GAAGA,EAAEzD,MAAMyD,EAAEzD,KAAKtO,EAAE9d,EAAG,IAAG,OAAO8d,EAAEkkB,SAAQ,IAAKz6B,KAAKgoC,YAAYzxB,EAAEmiB,MAAK,EAAGniB,CAAE,IAAG,IAAI+R,EAAE,IAAIiQ,IAAG,CAAEhiB,EAAE9d,KAAK,IAAI6vB,EAAE2J,EAAE1b,EAAE9d,EAAEuH,MAAMsoB,GAAGA,EAAEzD,MAAMyD,EAAEzD,KAAKtO,EAAE9d,EAAG,IAAG,OAAO6vB,EAAEoQ,MAAK,EAAGpQ,CAAC,CAACwgB,QAAQ,OAAO9oC,KAAKmO,OAAOnO,KAAKmO,OAAO26B,QAAQ9oC,IAAI,CAAC+oC,QAAQxyB,GAAG,IAAI0b,EAAEjyB,KAAK8oC,QAAQ,MAAMrwC,EAAE8/B,GAAGxyB,QAAQwQ,GAAG,GAAG0b,EAAE+W,YAAY/W,EAAE+W,YAAY/W,EAAE+W,YAAYnkB,MAAK,IAAKpsB,QAAQ,CAACw5B,EAAE+W,YAAYvwC,EAAEw5B,EAAEgX,cAAc,GAAG,IAAI3gB,EAAE2J,EAAEqN,SAASre,YAAYgR,EAAEoW,WAAW,KAAK,SAAS9xB,IAAI,MAAM0b,EAAEiX,WAAWjX,EAAEgX,cAAchyC,QAAQg7B,EAAEgX,cAAc7pC,OAAhB6yB,GAA0BA,EAAE+W,cAAc1gB,EAAE3nB,KAAI,KAAM8f,UAAUlK,EAAE,CAA1H,EAA6H,CAAC,IAAI8N,EAAE4N,EAAE+W,YAAY,OAAO,IAAIzQ,IAAG,CAAEhiB,EAAE+R,KAAK7vB,EAAEosB,MAAMpsB,GAAGw5B,EAAEgX,cAAcvxC,KAAK6iC,GAAGhkB,EAAEna,KAAK,KAAK3D,OAAO8d,GAAG0b,EAAEgX,cAAcvxC,KAAK6iC,GAAGjS,EAAElsB,KAAK,KAAKma,OAAOkkB,SAAQ,KAAMxI,EAAE+W,cAAc3kB,IAAI4N,EAAE+W,YAAY,KAAM,GAAG,GAAE,CAAC9wC,QAAQ8H,KAAKooC,SAASpoC,KAAKooC,QAAO,EAAGpoC,KAAKs/B,UAAUt/B,KAAKs/B,SAASpnC,QAAQ8H,KAAKwoC,QAAQ,IAAItT,GAAEf,OAAO,CAAC56B,MAAMgd,GAAG,MAAM0b,EAAEjyB,KAAKmpC,kBAAkBnpC,KAAKmpC,gBAAgB,CAAC,GAAG,GAAGprC,EAAEk0B,EAAE1b,GAAG,OAAO0b,EAAE1b,GAAG,MAAM9d,EAAEuH,KAAKo/B,OAAO7oB,GAAG,IAAI9d,EAAE,MAAM,IAAIy8B,GAAEmK,SAAS,SAAS9oB,EAAE,4BAA4B,MAAM+R,EAAE,IAAItoB,KAAK0B,GAAG0nC,MAAM7yB,EAAE9d,EAAEuH,MAAM,OAAOsoB,EAAEmX,KAAKz/B,KAAK0B,GAAG+9B,KAAKlmC,MAAMgd,GAAG0b,EAAE1b,GAAG+R,EAAEA,CAAC,EAAE,SAAS+gB,GAAG9yB,EAAE0b,EAAEx5B,EAAE6vB,EAAEjE,EAAE/oB,EAAEyC,GAAG,MAAM,CAACsB,KAAKkX,EAAE0pB,QAAQhO,EAAEkR,OAAO1qC,EAAE8nC,MAAMjY,EAAE4Y,KAAK7c,EAAE2b,SAAS1kC,EAAEkjB,KAAK/lB,IAAIsF,EAAE,IAAI,KAAKuqB,EAAE,IAAI,KAAKjE,EAAE,KAAK,IAAIilB,GAAGrX,GAAG,CAAC,SAASqX,GAAG/yB,GAAG,MAAM,iBAAiBA,EAAEA,EAAEA,EAAE,IAAI,GAAG5e,KAAKoB,KAAKwd,EAAE,KAAK,IAAI,EAAE,CAAC,SAASgzB,GAAGhzB,EAAE0b,EAAEx5B,GAAG,MAAM,CAAC4G,KAAKkX,EAAEwpB,QAAQ9N,EAAE6N,QAAQrnC,EAAEqoC,YAAY,KAAKV,UAAUpO,EAAEv5B,GAAG8d,GAAG,CAACA,EAAElX,KAAKkX,KAAK,CAAC,IAAIizB,GAAGjzB,IAAI,IAAI,OAAOA,EAAEkzB,KAAK,CAAC,KAAKD,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,MAAMjzB,GAAG,OAAOizB,GAAG,IAAIpL,GAAGA,EAAE,GAAG,SAASsL,GAAGnzB,GAAG,OAAO,MAAMA,EAAE,OAAO,iBAAiBA,EAAE,SAASA,GAAG,OAAO,IAAIA,EAAEtX,MAAM,KAAKhI,OAAOg7B,GAAGA,EAAE1b,GAAG0b,GAAGlgB,EAAEkgB,EAAE1b,EAAE,CAA5D,CAA8DA,GAAG0b,GAAGlgB,EAAEkgB,EAAE1b,EAAE,CAAC,SAASozB,GAAGpzB,GAAG,MAAM,GAAGzd,MAAMC,KAAKwd,EAAE,CAAC,IAAIqzB,GAAG,EAAE,SAASC,GAAGtzB,GAAG,OAAO,MAAMA,EAAE,MAAM,iBAAiBA,EAAEA,EAAE,IAAIA,EAAE5e,KAAK,OAAO,CAAC,SAAS8wC,GAAGlyB,EAAE0b,EAAE3J,GAAG,SAASjE,EAAE9N,GAAG,GAAG,IAAIA,EAAExT,KAAK,OAAO,KAAK,GAAG,IAAIwT,EAAExT,KAAK,MAAM,IAAIxK,MAAM,4CAA4C,MAAMsqB,MAAMpqB,EAAEqqB,MAAMwF,EAAEwW,UAAUza,EAAE0a,UAAUzjC,GAAGib,EAAE,YAAO,IAAS9d,OAAE,IAAS6vB,EAAE,KAAK2J,EAAEzjB,WAAW8Z,IAAIhtB,QAAG,IAASgtB,EAAE2J,EAAE9O,WAAW1qB,IAAI4rB,GAAG4N,EAAE/O,MAAMzqB,EAAE6vB,IAAIjE,IAAI/oB,EAAE,CAAC,MAAM8jC,OAAO9jC,EAAEwuC,UAAU/rC,GAAG,SAASwY,EAAE0b,GAAG,MAAM3J,EAAEqhB,GAAGpzB,EAAEqK,kBAAkB,MAAM,CAACwe,OAAO,CAAC//B,KAAKkX,EAAElX,KAAK0qC,OAAOzhB,EAAEvY,KAAKwG,GAAG0b,EAAEhR,YAAY1K,KAAKxG,KAAKwG,IAAI,MAAM0pB,QAAQhO,EAAE+X,cAAc1hB,GAAG/R,EAAE8N,EAAE5rB,EAAEw5B,GAAG32B,EAAE,MAAM22B,EAAEl0B,EAAE,CAAC,EAAE+Y,EAAE,CAACzX,KAAKkX,EAAElX,KAAKwjC,WAAW,CAACxjC,KAAK,KAAK4qC,cAAa,EAAG9E,SAAS7pC,EAAE0kC,SAAS3b,EAAE4b,QAAQhO,EAAE+X,cAAc1hB,EAAE6a,QAAO,EAAGiC,WAAWsE,GAAGzX,IAAI6N,QAAQ6J,GAAGpzB,EAAE2zB,YAAYn6B,KAAKkiB,GAAG1b,EAAEiL,MAAMyQ,KAAKliB,KAAKwG,IAAI,MAAMlX,KAAK4yB,EAAEkR,OAAO7a,EAAE6hB,WAAW9lB,EAAE4b,QAAQ3kC,GAAGib,EAAEO,EAAE,CAACzX,KAAK4yB,EAAE+N,SAASvnC,EAAE6C,GAAG2kC,QAAQ3kC,EAAE6nC,OAAO7a,EAAE6hB,WAAW9lB,EAAE+gB,WAAWsE,GAAGpuC,IAAI,OAAOyC,EAAE8rC,GAAGvuC,IAAIwb,EAAEA,CAAE,IAAGgsB,kBAAkBvsB,GAAGxY,EAAE8rC,GAAGtzB,KAAK,OAAOxY,EAAE,OAAO+Y,EAAE+rB,WAAW,MAAM5Q,IAAIl0B,EAAE8rC,GAAG5X,IAAInb,EAAE+rB,YAAY/rB,CAAE,KAAIgzB,UAAUxhB,EAAErxB,OAAO,GAAG,WAAWg7B,EAAEhR,YAAYqH,EAAE,OAAO,oBAAoBkW,WAAW,SAASj+B,KAAKi+B,UAAUC,aAAa,oBAAoBl+B,KAAKi+B,UAAUC,YAAY,GAAG3vB,OAAO0vB,UAAUC,UAAU2L,MAAM,kBAAkB,GAAG,KAAK,CAAn0B,CAAq0B7zB,EAAE+R,GAAGxR,EAAExb,EAAEyuC,OAAOh6B,KAAKwG,GAAG,SAASA,GAAG,MAAM0b,EAAE1b,EAAElX,KAAK,MAAM,CAACA,KAAK4yB,EAAEmN,OAAO7oB,EAAE4qB,OAAO,UAAUtD,MAAMtnB,EAAExT,KAAKtK,EAAE0O,KAAKmhB,EAAE3sB,OAAOL,EAAEyT,MAAMhR,IAAI,OAAO,IAAI+H,SAAQ,CAAEgR,EAAEub,KAAKvb,EAAEyjB,GAAGzjB,GAAG,MAAMqS,EAAE5S,EAAE0K,YAAYgR,GAAG9c,EAAE,MAAMgU,EAAE8W,QAAQ1N,EAAE,QAAQ95B,GAAG,QAAQA,EAAE,IAAI85B,GAAG,WAAW95B,GAAG,gBAAgBA,EAAE,MAAM,IAAIF,MAAM,2BAA2BE,GAAG,MAAMxB,OAAOu7B,GAAGlK,GAAGhtB,GAAG,CAACrE,OAAO,GAAG,GAAGqxB,GAAGhtB,GAAGgtB,EAAErxB,SAASqE,EAAErE,OAAO,MAAM,IAAIsB,MAAM,iEAAiE,GAAG,IAAIi6B,EAAE,OAAO1b,EAAE,CAACsqB,YAAY,EAAE1M,SAAS,CAAC,EAAElQ,QAAQ,GAAG6c,gBAAW,IAAS,IAAI5O,EAAE,MAAMl3B,EAAE,GAAGwb,EAAE,GAAG,IAAIxD,EAAE,EAAE,MAAMuV,EAAEvS,MAAMhD,EAAEk0B,GAAGlxB,EAAC,EAAG,GAAG,gBAAgB9d,EAAE,CAAC,GAAG,IAAIsF,EAAEgF,KAAK,OAAO+T,EAAE,CAACsqB,YAAY7tB,EAAEmhB,SAAS3d,EAAEyN,QAAQ,GAAG6c,gBAAW,IAAS,IAAItjC,EAAEgF,KAAKxH,EAAE7D,KAAK+6B,EAAEtJ,EAAEjmB,SAAS3H,EAAE7D,KAAK+6B,EAAEtJ,EAAEpc,OAAOsX,EAAEtmB,IAAI,KAAK,CAAC,MAAMwY,EAAE0b,GAAGM,EAAEpd,EAAE,CAAC7Z,EAAEgtB,GAAG,CAAChtB,EAAE,MAAM,CAACgtB,EAAE,MAAM,GAAGiK,EAAE,IAAI,IAAIjK,EAAE,EAAEA,EAAEkK,IAAIlK,EAAE/sB,EAAE7D,KAAK+6B,EAAER,QAAG,IAASA,EAAE3J,GAAGa,EAAE1wB,GAAG8d,EAAE+R,GAAG2J,EAAE3J,IAAIa,EAAE1wB,GAAG8d,EAAE+R,KAAKmK,EAAEjS,QAAQsI,OAAO,IAAI,IAAImJ,EAAE,EAAEA,EAAEO,IAAIP,EAAE12B,EAAE7D,KAAK+6B,EAAEtJ,EAAE1wB,GAAG8d,EAAE0b,KAAKQ,EAAEjS,QAAQsI,CAAC,CAAC,MAAMkJ,EAAEzb,IAAI,MAAM0b,EAAE1b,EAAE3P,OAAOiI,OAAOtT,EAAE6E,SAAQ,CAAEmW,EAAE0b,IAAI,MAAM1b,EAAEE,QAAQM,EAAEkb,GAAG1b,EAAEE,SAASK,EAAE,CAACsqB,YAAY7tB,EAAEmhB,SAAS3d,EAAEyN,QAAQ,WAAW/rB,EAAE6vB,EAAE/sB,EAAEwU,KAAKwG,GAAGA,EAAE1H,SAASwyB,WAAWpP,GAAE,EAAGQ,EAAEjS,QAAQjK,IAAIuS,EAAEvS,GAAGyb,EAAEzb,EAAC,EAAGkc,EAAEhS,UAAUuR,CAAE,GAAE,EAAExoB,QAAQ,EAAEq0B,MAAMtnB,EAAEpP,KAAK1O,KAAK,IAAIqN,SAAQ,CAAEwiB,EAAEjE,KAAKiE,EAAEiS,GAAGjS,GAAG,MAAMhtB,EAAEib,EAAE0K,YAAYgR,GAAGl0B,EAAEtF,EAAExB,OAAO6f,EAAE,IAAIle,MAAMmF,GAAG,IAAIs0B,EAAElJ,EAAE,EAAEhU,EAAE,EAAE,MAAMod,EAAEhc,IAAI,MAAM0b,EAAE1b,EAAE3P,OAAOkQ,EAAEmb,EAAEoY,MAAMpY,EAAEpjB,SAASsG,IAAIgU,GAAGb,EAAExR,EAAC,EAAG0b,EAAEgV,GAAGnjB,GAAG,IAAI,IAAI9N,EAAE,EAAEA,EAAExY,IAAIwY,EAAE,MAAM9d,EAAE8d,KAAK8b,EAAE/2B,EAAEqF,IAAIlI,EAAE8d,IAAI8b,EAAEgY,KAAK9zB,EAAE8b,EAAE5R,UAAU8R,EAAEF,EAAE7R,QAAQgS,IAAIrJ,GAAG,IAAIA,GAAGb,EAAExR,EAAG,IAAGnW,IAAI,EAAEk9B,MAAMtnB,EAAExU,IAAItJ,KAAK,IAAIqN,SAAQ,CAAEwiB,EAAEjE,KAAKiE,EAAEiS,GAAGjS,GAAG,MAAMhtB,EAAEib,EAAE0K,YAAYgR,GAAGtxB,IAAIlI,GAAG6C,EAAEmlB,UAAUlK,GAAG+R,EAAE/R,EAAE3P,OAAOiI,QAAQvT,EAAEklB,QAAQgnB,GAAGnjB,EAAG,IAAG+e,MAAM,SAAS7sB,GAAG,OAAO9d,GAAG,IAAIqN,SAAQ,CAAEwiB,EAAEhtB,KAAKgtB,EAAEiS,GAAGjS,GAAG,MAAMuV,MAAM9/B,EAAEpC,OAAOmb,EAAEvR,MAAM8sB,EAAE+Q,MAAMja,GAAG1wB,EAAE0c,EAAEkd,IAAI,SAAI,EAAOA,GAAG7Q,MAAM+Q,EAAExjB,MAAMyjB,GAAGrJ,EAAEsJ,EAAE10B,EAAEkjB,YAAYgR,GAAG12B,EAAEg3B,EAAE0X,aAAaxX,EAAEA,EAAEjR,MAAM+Q,EAAElzB,MAAM0X,EAAEsN,EAAEmO,GAAG,GAAG,IAAIH,EAAE,OAAO/J,EAAE,CAACzZ,OAAO,KAAK,GAAG0H,EAAE,CAAC,MAAMA,EAAEO,EAAEvb,EAAEmnB,OAAO3L,EAAE5B,GAAG5Z,EAAEknB,WAAW1L,EAAE5B,GAAGoB,EAAEkK,UAAUlK,GAAG+R,EAAE,CAACzZ,OAAO0H,EAAE3P,OAAOiI,SAAS0H,EAAEiK,QAAQgnB,GAAGlsC,EAAE,KAAK,CAAC,IAAIib,EAAE,EAAE,MAAM0b,EAAEnb,KAAK,kBAAkBvb,GAAGA,EAAE0nC,WAAWlsB,GAAGxb,EAAE8mB,cAActL,GAAGte,EAAE,GAAGw5B,EAAExR,UAAU4D,IAAI,MAAM/oB,EAAE22B,EAAEpjB,OAAO,OAAOvT,GAAG7C,EAAEf,KAAKof,EAAExb,EAAEuD,MAAMvD,EAAEunC,cAActsB,IAAI8b,EAAE/J,EAAE,CAACzZ,OAAOpW,SAAS6C,EAAEinB,YAAY+F,EAAE,CAACzZ,OAAOpW,GAAE,EAAGw5B,EAAEzR,QAAQgnB,GAAGlsC,EAAE,CAAE,GAAE,CAAvjB,CAAyjByC,GAAGklC,WAAW,UAAUpF,MAAMtnB,EAAE5a,OAAOlD,EAAE2qC,MAAM9a,EAAElY,QAAQ9U,EAAE6nC,OAAOplC,IAAI,OAAO,IAAI+H,SAAQ,CAAEgR,EAAEub,KAAKvb,EAAEyjB,GAAGzjB,GAAG,MAAM0K,MAAM2H,EAAEpa,MAAMoG,GAAGmT,EAAEiK,EAAEhc,EAAE0K,YAAYgR,GAAGO,EAAErJ,EAAE8gB,aAAa1X,EAAEA,EAAE/Q,MAAM2H,EAAE9pB,MAAMozB,EAAEn3B,EAAEyC,EAAE,aAAa,OAAOA,EAAE,aAAa,OAAOxC,EAAE9C,KAAK,kBAAkB+5B,GAAGA,EAAEyQ,WAAW5e,EAAElP,GAAGsd,GAAGD,EAAEnQ,cAAcgC,EAAElP,GAAGsd,GAAGl3B,EAAEilB,QAAQgnB,GAAGnV,GAAG92B,EAAEklB,UAAU8Z,IAAItI,IAAI,MAAMx5B,EAAE8C,EAAEsT,OAAO,IAAIpW,EAAE,YAAYqe,EAAE,MAAMre,EAAE6xC,QAAQV,GAAGnxC,EAAE4xB,MAAK,EAAG,MAAM/B,EAAE7vB,EAAE8pB,SAASnmB,KAAK3D,GAAG,IAAI4rB,EAAE5rB,EAAE8xC,mBAAmBlmB,IAAIA,EAAEA,EAAEjoB,KAAK3D,IAAI,MAAM6C,EAAE7C,EAAE6rC,QAAQloC,KAAK3D,GAAGsF,EAAE,KAAK,MAAM,IAAIxF,MAAM,qBAAoB,EAAGE,EAAEolC,MAAMtnB,EAAE9d,EAAE6qC,KAAK7qC,EAAE8pB,SAAS9pB,EAAE8xC,mBAAmB9xC,EAAE6rC,QAAQ,KAAK,MAAM,IAAI/rC,MAAM,qBAAoB,EAAGE,EAAE8qC,KAAKhJ,GAAGlI,GAAG55B,EAAEkN,KAAK,WAAW,IAAI4Q,EAAE,EAAE,OAAOvW,KAAK2P,OAAM,IAAK4G,IAAIvW,KAAKuiB,WAAWviB,KAAKsjC,SAASze,MAAK,IAAK7kB,MAAM,EAAEvH,EAAEkX,MAAM4G,IAAI,MAAM0b,EAAE,IAAInsB,SAAQ,CAAEyQ,EAAE0b,KAAK1b,EAAEgkB,GAAGhkB,GAAGhb,EAAEilB,QAAQgnB,GAAGvV,GAAGx5B,EAAE8qC,KAAKtR,EAAEx5B,EAAE6qC,KAAKrR,IAAIx5B,EAAE6qC,KAAK7qC,EAAE8pB,SAAS9pB,EAAE8xC,mBAAmB9xC,EAAE6rC,QAAQvmC,EAAEwY,EAAE0b,EAAC,CAAG,IAAGnb,EAAE,KAAK,GAAGvb,EAAEsT,OAAO,IAAI0H,GAAG,CAAC,MAAMA,GAAG9d,EAAE8qC,KAAKhtB,EAAE,MAAM9d,EAAE4xB,MAAK,EAAG5xB,EAAEkX,MAAM,KAAK,MAAM,IAAIpX,MAAM,2BAA0B,EAAGE,EAAE6qC,MAAK,EAAG,OAAO/nC,EAAEklB,UAAU8Z,IAAIhkB,IAAIhb,EAAEklB,UAAU3J,EAAEA,GAAI,IAAGre,EAAE8pB,SAAS+F,EAAE7vB,EAAE8xC,mBAAmBlmB,EAAE5rB,EAAE6rC,QAAQhpC,EAAEwb,IAAImb,GAAGnb,EAAEre,EAAG,GAAE45B,EAAG,GAAE,EAAE3sB,OAAO09B,MAAM7sB,EAAEsnB,MAAMplC,IAAI,MAAM+oB,MAAM8G,EAAEvZ,MAAMzT,GAAGib,EAAE,OAAO,IAAIzQ,SAAQ,CAAEyQ,EAAExY,KAAK,MAAM+Y,EAAEre,EAAEwoB,YAAYgR,GAAGI,EAAE/J,EAAE2hB,aAAanzB,EAAEA,EAAE0K,MAAM8G,EAAEjpB,MAAM8pB,EAAE9E,EAAE/oB,GAAG6Z,EAAEgU,EAAEkJ,EAAE3sB,MAAMyjB,GAAGkJ,EAAE3sB,QAAQyP,EAAEsL,UAAU8Z,IAAItI,GAAG1b,EAAE0b,EAAErrB,OAAOiI,UAAUsG,EAAEqL,QAAQgnB,GAAGzpC,EAAG,GAAE,EAAE,CAA38G,CAA68GwY,KAAK8b,EAAE,CAAC,EAAE,OAAOvb,EAAE1W,SAASmW,GAAG8b,EAAE9b,EAAElX,MAAMkX,IAAI,CAACkH,MAAM,SAASuD,YAAYzK,EAAEyK,YAAY5kB,KAAKma,GAAGhd,MAAMgd,GAAG,IAAI8b,EAAE9b,GAAG,MAAM,IAAIhe,MAAM,UAAUge,gBAAgB,OAAO8b,EAAE9b,EAAE,EAAEi0B,SAAQ,IAAKC,QAAQjB,GAAGvX,GAAGmN,OAAO9jC,EAAE,CAAC,SAASovC,IAAIC,OAAOp0B,GAAG0b,GAAG,MAAMx5B,EAAEw5B,EAAEvwB,GAAG4mB,EAAE,SAAS/R,EAAE0b,GAAGhP,YAAYxqB,EAAE8nB,UAAU+H,GAAGjE,GAAG,MAAM/oB,EAAE,SAASib,EAAE0b,GAAG,OAAOA,EAAEvL,QAAO,CAAEnQ,GAAG5X,OAAOszB,MAAK,IAAK1b,KAAK0b,EAAE1b,MAAMA,EAAE,CAAnE,CAAqEkyB,GAAGxW,EAAEx5B,EAAE4rB,GAAG9N,EAAEq0B,QAAQ,MAAM,CAACA,OAAOtvC,EAAE,CAA7J,CAA+Jib,EAAEs0B,aAAapyC,EAAE8d,EAAE8pB,MAAMpO,GAAG1b,EAAEkpB,KAAKnX,EAAEsiB,OAAOr0B,EAAEwzB,OAAO3pC,SAAS6xB,IAAI,MAAMx5B,EAAEw5B,EAAE5yB,KAAKkX,EAAEkpB,KAAKL,OAAO2K,OAAO7P,MAAM3jB,GAAGA,EAAElX,OAAO5G,MAAMw5B,EAAEwN,KAAKlpB,EAAEkpB,KAAKlmC,MAAMd,GAAG8d,EAAE9d,aAAa8d,EAAE6yB,QAAQ7yB,EAAE9d,GAAGgnC,KAAKxN,EAAEwN,MAAO,GAAE,CAAC,SAASqL,IAAIH,OAAOp0B,GAAG0b,EAAEx5B,EAAE6vB,GAAG7vB,EAAE2H,SAAS3H,IAAI,MAAM4rB,EAAEiE,EAAE7vB,GAAGw5B,EAAE7xB,SAAS6xB,IAAI,MAAM3J,EAAEkK,EAAEP,EAAEx5B,KAAK6vB,GAAG,UAAUA,QAAG,IAASA,EAAEzpB,SAASozB,IAAI1b,EAAEw0B,YAAYlyC,WAAWo5B,aAAa1b,EAAEw0B,YAAY5hB,EAAE8I,EAAEx5B,EAAE,CAACkI,MAAM,OAAOX,KAAKzG,MAAMd,EAAE,EAAEoD,IAAI0a,GAAG8b,EAAEryB,KAAKvH,EAAE,CAACoG,MAAM0X,EAAErW,UAAS,EAAGsd,cAAa,EAAG5c,YAAW,GAAI,IAAIqxB,EAAEx5B,GAAG,IAAI8d,EAAE6yB,MAAM3wC,EAAE4rB,GAAI,GAAG,GAAE,CAAC,SAAS2mB,IAAIL,OAAOp0B,GAAG0b,GAAGA,EAAE7xB,SAAS6xB,IAAI,IAAI,IAAIx5B,KAAKw5B,EAAEA,EAAEx5B,aAAa8d,EAAE6yB,cAAcnX,EAAEx5B,EAAG,GAAE,CAAC,SAASwyC,GAAG10B,EAAE0b,GAAG,OAAO1b,EAAE20B,KAAK9qB,QAAQ6R,EAAEiZ,KAAK9qB,OAAO,CAAC,SAAS+qB,GAAG50B,EAAE9d,EAAE6vB,EAAEjE,GAAG,MAAM/oB,EAAEib,EAAEknB,UAAU1/B,EAAEwY,EAAEinB,mBAAmB,YAAYjnB,EAAE60B,YAAY9vC,GAAGyC,EAAEY,OAAO2pB,GAAGvqB,EAAE+/B,YAAYhZ,MAAMT,GAAG,MAAMvN,EAAE/Y,EAAEyqC,QAAQpsC,KAAK2B,GAAGs0B,EAAE+F,GAAGmH,WAAWnH,GAAG8C,IAAG,KAAM9C,GAAGyF,MAAM9/B,EAAEq6B,GAAGmH,UAAUlN,EAAE,IAAI55B,GAAGw5B,EAAE32B,GAAG8E,SAASmW,IAAI1J,GAAGyb,EAAE/R,EAAEjb,EAAEib,GAAGwpB,QAAQzkC,EAAEib,GAAGupB,QAAS,IAAG4K,GAAGn0B,EAAE+R,GAAGiQ,GAAGgD,QAAO,IAAKhlB,EAAEkyB,GAAG4C,SAASzL,KAAK7hC,KAAK+mB,MAAMhO,IAAI,UAAU6zB,OAAOp0B,GAAG9d,EAAE6vB,EAAEjE,GAAG,MAAM/oB,EAAE,GAAGyC,EAAEwY,EAAE+0B,UAAU,IAAIx0B,EAAEP,EAAEknB,UAAU8N,GAAGh1B,EAAEA,EAAE6mB,MAAM/Y,GAAGgO,GAAE,EAAuF,OAAOt0B,EAAEiP,QAAQuJ,GAAGA,EAAE20B,KAAK9qB,SAAS3nB,IAAI2H,SAASrC,IAAIzC,EAAE5D,MAAK,KAAM,MAAM4D,EAAEwb,EAAEqS,EAAEprB,EAAEmtC,KAAKM,SAASC,GAAGl1B,EAAEjb,EAAE+oB,GAAGonB,GAAGl1B,EAAE4S,EAAE9E,GAAGvN,EAAEP,EAAEknB,UAAUtU,EAAE,MAAMhU,EAAEu2B,GAAGpwC,EAAE6tB,GAAGhU,EAAErI,IAAI1M,SAASmW,IAAI1J,GAAGwX,EAAE9N,EAAE,GAAGA,EAAE,GAAGwpB,QAAQxpB,EAAE,GAAGupB,QAAS,IAAG3qB,EAAEw2B,OAAOvrC,SAASmW,IAAI,GAAGA,EAAEq1B,SAAS,MAAM,IAAI1W,GAAE2W,QAAQ,4CAA4C,CAAC,MAAM5Z,EAAE5N,EAAEpD,YAAY1K,EAAElX,MAAMkX,EAAEzJ,IAAI1M,SAASmW,GAAGu1B,GAAG7Z,EAAE1b,KAAKA,EAAEo1B,OAAOvrC,SAASmW,IAAI0b,EAAE8Z,YAAYx1B,EAAElX,MAAMysC,GAAG7Z,EAAE1b,EAAG,IAAGA,EAAEvT,IAAI5C,SAASmW,GAAG0b,EAAE8Z,YAAYx1B,IAAI,CAAE,IAAG,MAAMgc,EAAEx0B,EAAEmtC,KAAKc,eAAe,GAAGzZ,GAAGx0B,EAAEmtC,KAAK9qB,QAAQ3nB,EAAE,CAACiyC,GAAGn0B,EAAE8N,GAAGiE,EAAE6gB,gBAAgB,CAAC,EAAE9W,GAAE,EAAG,IAAI55B,EAAEm6B,EAAEzJ,GAAGhU,EAAEnS,IAAI5C,SAASmW,IAAI9d,EAAE8d,GAAGjb,EAAEib,EAAG,IAAGy0B,GAAGz0B,EAAE,CAACA,EAAEw0B,YAAYlyC,YAAYiyC,GAAGv0B,EAAE,CAACA,EAAEw0B,YAAYlyC,WAAWo5B,EAAEx5B,GAAGA,GAAG6vB,EAAE8W,OAAO3mC,EAAE,MAAMsF,EAAEu1B,EAAEf,GAAG,IAAIzb,EAAE/Y,GAAGu+B,KAAK,MAAM9J,EAAE+F,GAAGgD,QAAO,KAAM,GAAGzkB,EAAEyb,EAAEjK,GAAGxR,GAAG/Y,EAAE,CAAC,IAAIwY,EAAE8iB,GAAGj9B,KAAK,KAAK,MAAM0a,EAAE+N,KAAKtO,EAAEA,EAAE,CAAE,IAAG,OAAOO,GAAG,mBAAmBA,EAAE+N,KAAK0T,GAAGxyB,QAAQ+Q,GAAG0b,EAAE3N,MAAK,IAAK/N,GAAG,CAAE,IAAGxb,EAAE5D,MAAMu6B,IAAQI,GAAIqM,IAAK,SAASnoB,EAAE0b,GAAG,GAAGn5B,MAAMC,KAAKk5B,EAAEvwB,GAAGkf,kBAAkBxgB,SAAS3H,GAAG,MAAM8d,EAAE9d,IAAIw5B,EAAEvwB,GAAGuqC,kBAAkBxzC,IAAI,CAAtG,CAAwGsF,EAAEmtC,KAAKM,SAASvZ,GAAG+Y,GAAGz0B,EAAE,CAACA,EAAEw0B,YAAYlyC,YAAYiyC,GAAGv0B,EAAE,CAACA,EAAEw0B,YAAYlyC,WAAW0d,EAAE60B,YAAY70B,EAAEknB,WAAWnV,EAAE8W,OAAO7oB,EAAEknB,SAAU,GAAG,IAA7qC,SAAStU,IAAI,OAAO7tB,EAAErE,OAAOshC,GAAGxyB,QAAQzK,EAAE8D,OAAF9D,CAAUgtB,EAAEgX,WAAWza,KAAKsE,GAAGoP,GAAGxyB,SAAS,CAA6lCojB,GAAItE,MAAK,KAAM,IAAItO,EAAE9d,EAAEA,EAAE4rB,EAAE4N,EAAE1b,EAAEO,GAAG1W,SAAS6xB,IAAIx5B,EAAEiJ,GAAGkf,iBAAiBC,SAASoR,IAAIplB,GAAGpU,EAAEw5B,EAAE1b,EAAE0b,GAAG8N,QAAQxpB,EAAE0b,GAAG6N,QAAS,GAAG,GAAE,CAAp4C,CAAs4CvpB,EAAE9d,EAAEsF,EAAEuqB,GAAGxD,MAAMhO,EAAG,GAAE,CAAC,SAAS40B,GAAGn1B,EAAE0b,GAAG,MAAMx5B,EAAE,CAACuK,IAAI,GAAG8J,IAAI,GAAG6+B,OAAO,IAAI,IAAIrjB,EAAE,IAAIA,KAAK/R,EAAE0b,EAAE3J,IAAI7vB,EAAEuK,IAAItL,KAAK4wB,GAAG,IAAIA,KAAK2J,EAAE,CAAC,MAAM5N,EAAE9N,EAAE+R,GAAGhtB,EAAE22B,EAAE3J,GAAG,GAAGjE,EAAE,CAAC,MAAM9N,EAAE,CAAClX,KAAKipB,EAAE1Y,IAAItU,EAAEswC,UAAS,EAAG5oC,IAAI,GAAG8J,IAAI,GAAG6+B,OAAO,IAAI,GAAG,IAAItnB,EAAE0b,QAAQE,SAAS,KAAK,IAAI3kC,EAAEykC,QAAQE,SAAS,KAAK5b,EAAE0b,QAAQmB,OAAO5lC,EAAEykC,QAAQmB,OAAO3C,GAAGhoB,EAAEq1B,UAAS,EAAGnzC,EAAEkzC,OAAOj0C,KAAK6e,OAAO,CAAC,MAAM0b,EAAE5N,EAAE+b,UAAU9X,EAAEhtB,EAAE8kC,UAAU,IAAIriC,EAAE,IAAIA,KAAKk0B,EAAE3J,EAAEvqB,IAAIwY,EAAEvT,IAAItL,KAAKqG,GAAG,IAAIA,KAAKuqB,EAAE,CAAC,MAAM7vB,EAAEw5B,EAAEl0B,GAAGsmB,EAAEiE,EAAEvqB,GAAGtF,EAAEA,EAAE+lB,MAAM6F,EAAE7F,KAAKjI,EAAEo1B,OAAOj0C,KAAK2sB,GAAG9N,EAAEzJ,IAAIpV,KAAK2sB,EAAE,EAAE9N,EAAEvT,IAAI/L,OAAO,GAAGsf,EAAEzJ,IAAI7V,OAAO,GAAGsf,EAAEo1B,OAAO10C,OAAO,IAAIwB,EAAEkzC,OAAOj0C,KAAK6e,EAAE,CAAC,MAAM9d,EAAEqU,IAAIpV,KAAK,CAAC4wB,EAAEhtB,GAAG,CAAC,OAAO7C,CAAC,CAAC,SAASoU,GAAG0J,EAAE0b,EAAEx5B,EAAE6vB,GAAG,MAAMjE,EAAE9N,EAAE7U,GAAGof,kBAAkBmR,EAAEx5B,EAAEwnC,QAAQ,CAACA,QAAQxnC,EAAEwnC,QAAQ+J,cAAcvxC,EAAEyoC,MAAM,CAAC8I,cAAcvxC,EAAEyoC,OAAO,OAAO5Y,EAAEloB,SAASmW,GAAGu1B,GAAGznB,EAAE9N,KAAK8N,CAAC,CAAC,SAASynB,GAAGv1B,EAAE0b,GAAG1b,EAAE21B,YAAYja,EAAE5yB,KAAK4yB,EAAEgO,QAAQ,CAACkD,OAAOlR,EAAEkR,OAAOgH,WAAWlY,EAAEsO,OAAO,CAAC,SAASgL,GAAGh1B,EAAE0b,EAAEx5B,GAAG,MAAM6vB,EAAE,CAAC,EAAE,OAAO/sB,EAAE02B,EAAErR,iBAAiB,GAAGxgB,SAASmW,IAAI,MAAM0b,EAAEx5B,EAAEwoB,YAAY1K,GAAG,IAAI8N,EAAE4N,EAAEgO,QAAQ,MAAM3kC,EAAE+tC,GAAGC,GAAGjlB,GAAGA,GAAG,IAAG,GAAG,IAAK4N,EAAE+X,cAAc3lB,GAAG,iBAAiBA,GAAE,GAAItmB,EAAE,GAAG,IAAI,IAAIwY,EAAE,EAAEA,EAAE0b,EAAEiY,WAAWjzC,SAASsf,EAAE,CAAC,MAAM9d,EAAEw5B,EAAEzQ,MAAMyQ,EAAEiY,WAAW3zB,IAAI8N,EAAE5rB,EAAEwnC,QAAQ,IAAInpB,EAAEuyB,GAAG5wC,EAAE4G,KAAKglB,IAAI5rB,EAAE0qC,SAAS1qC,EAAE0xC,YAAW,EAAG9lB,GAAG,iBAAiBA,GAAE,GAAItmB,EAAErG,KAAKof,EAAE,CAACwR,EAAE/R,GAAGgzB,GAAGhzB,EAAEjb,EAAEyC,EAAG,IAAGuqB,CAAC,CAAC,SAASmjB,IAAId,OAAO1Y,GAAGx5B,EAAE6vB,GAAG,MAAMjE,EAAEiE,EAAE5mB,GAAGkf,iBAAiB,IAAI,IAAIrK,EAAE,EAAEA,EAAE8N,EAAEptB,SAASsf,EAAE,CAAC,MAAMjb,EAAE+oB,EAAE9N,GAAGxY,EAAEuqB,EAAErH,YAAY3lB,GAAG22B,EAAEka,WAAW,WAAWpuC,EAAE,IAAI,IAAIwY,EAAE,EAAEA,EAAExY,EAAEmsC,WAAWjzC,SAASsf,EAAE,CAAC,MAAM0b,EAAEl0B,EAAEmsC,WAAW3zB,GAAG+R,EAAEvqB,EAAEyjB,MAAMyQ,GAAGgO,QAAQ5b,EAAE,iBAAiBiE,EAAEA,EAAE,IAAI/sB,EAAE+sB,GAAG3wB,KAAK,KAAK,IAAI,GAAGc,EAAE6C,GAAG,CAAC,MAAMib,EAAE9d,EAAE6C,GAAG8kC,UAAU/b,GAAG9N,IAAIA,EAAElX,KAAK4yB,SAASx5B,EAAE6C,GAAG8kC,UAAU/b,GAAG5rB,EAAE6C,GAAG8kC,UAAUnO,GAAG1b,EAAE,CAAC,CAAC,CAAC,oBAAoBioB,WAAW,SAASj+B,KAAKi+B,UAAUC,aAAa,oBAAoBl+B,KAAKi+B,UAAUC,YAAYloB,EAAE61B,mBAAmB71B,aAAaA,EAAE61B,mBAAmB,GAAGt9B,OAAO0vB,UAAUC,UAAU2L,MAAM,kBAAkB,GAAG,MAAMnY,EAAEka,YAAW,EAAG,CAAC,MAAME,GAAGC,iBAAiB/1B,EAAE+R,GAAG2J,EAAE1b,GAAGnW,SAAS6xB,IAAI,GAAG,OAAO1b,EAAE0b,GAAG,CAAC,IAAI5N,EAAE9N,EAAE0b,GAAGhzB,MAAM,KAAK8Q,KAAI,CAAEwG,EAAE0b,KAAK,MAAM3J,GAAG/R,EAAEA,EAAEtI,QAAQxN,QAAQ,eAAe,IAAI4jB,EAAE,MAAM9jB,KAAK+nB,GAAGA,EAAE8hB,MAAM,cAAc,GAAGnrC,MAAM,KAAKqpB,EAAE,OAAO+gB,GAAG/gB,EAAEjE,GAAG,KAAK,KAAK9jB,KAAKgW,GAAG,KAAKhW,KAAKgW,GAAG,OAAOhW,KAAKgW,GAAG9d,EAAE4rB,GAAG,IAAI4N,EAAG,IAAG32B,EAAE+oB,EAAEjlB,QAAQ,GAAG9D,EAAEilC,MAAM,MAAM,IAAIrL,GAAE6N,OAAO,sCAAsC1e,EAAEjkB,SAASmW,IAAI,GAAGA,EAAE2qB,KAAK,MAAM,IAAIhM,GAAE6N,OAAO,wDAAwD,IAAIxsB,EAAE0pB,QAAQ,MAAM,IAAI/K,GAAE6N,OAAO,uDAAwD,IAAGza,EAAE2J,GAAGsX,GAAGtX,EAAE32B,EAAE+oB,EAAE,CAAE,GAAE,CAACkoB,OAAOh2B,GAAG,MAAM9d,EAAEuH,KAAK0B,GAAG1B,KAAKkrC,KAAKsB,aAAaxsC,KAAKkrC,KAAKsB,aAAalkB,EAAEtoB,KAAKkrC,KAAKsB,aAAaj2B,GAAGA,EAAE,MAAM8N,EAAE5rB,EAAE6yC,UAAUhwC,EAAE,CAAC,EAAE,IAAIyC,EAAE,CAAC,EAAE,OAAOsmB,EAAEjkB,SAASmW,IAAI+R,EAAEhtB,EAAEib,EAAE20B,KAAKsB,cAAczuC,EAAEwY,EAAE20B,KAAKM,SAAS,CAAC,EAAEj1B,EAAE+1B,iBAAiBhxC,EAAEyC,EAAG,IAAGtF,EAAEglC,UAAU1/B,EAAEitC,GAAGvyC,EAAE,CAACA,EAAEg0C,WAAWh0C,EAAEA,EAAEsyC,YAAYlyC,YAAYiyC,GAAGryC,EAAE,CAACA,EAAEg0C,WAAWh0C,EAAEA,EAAEsyC,YAAYlyC,UAAUmH,KAAKkrC,KAAKnB,QAAQ9X,EAAEl0B,GAAGA,GAAGtF,EAAE2yC,YAAYnZ,EAAEl0B,GAAGiC,IAAI,CAAC0sC,QAAQn2B,GAAG,OAAOvW,KAAKkrC,KAAKc,eAAe/V,GAAGj2B,KAAKkrC,KAAKc,gBAAgBvW,GAAGlf,GAAGvW,IAAI,EAAE,SAAS2sC,GAAGp2B,EAAE0b,GAAG,IAAIx5B,EAAE8d,EAAEq2B,WAAW,OAAOn0C,IAAIA,EAAE8d,EAAEq2B,WAAW,IAAIC,GAAG,YAAY,CAACC,OAAO,GAAGvsB,UAAUhK,EAAE0M,YAAYgP,IAAIx5B,EAAE2nB,QAAQ,GAAGmsB,OAAO,CAACQ,QAAQ,UAAUt0C,EAAEc,MAAM,UAAU,CAAC,SAASyzC,GAAGz2B,GAAG,OAAOA,GAAG,mBAAmBA,EAAE02B,SAAS,CAAC,SAASC,GAAG32B,GAAG,OAAO2kB,IAAG,WAAY,OAAO9C,GAAGkF,YAAW,EAAG/mB,GAAI,GAAE,CAAC,SAAS42B,KAAK,IAAI52B,EAAE,OAAOioB,UAAU4O,eAAe,WAAW7sC,KAAKi+B,UAAUC,aAAa,iBAAiBl+B,KAAKi+B,UAAUC,YAAYle,UAAU0sB,UAAU,IAAInnC,SAAQ,SAAUmsB,GAAG,IAAIx5B,EAAE,WAAW,OAAO8nB,UAAU0sB,YAAYxS,QAAQxI,EAAE,EAAE1b,EAAE82B,YAAY50C,EAAE,KAAKA,GAAI,IAAGgiC,SAAQ,WAAY,OAAO6S,cAAc/2B,EAAG,IAAGzQ,QAAQC,SAAS,CAAu1E,SAASwnC,GAAGh3B,GAAG,IAAI0b,EAAEA,GAAG1b,EAAE5Q,KAAKssB,GAAG3J,EAAEhtB,EAAE22B,GAAG5N,EAAE/oB,GAAG22B,GAAG1b,EAAEi3B,MAAMvb,KAAK,SAAS32B,EAAEib,GAAG,OAAO0b,IAAI,IAAI32B,EAAEib,EAAE0b,GAAGl0B,EAAEzC,EAAEuD,MAAM,OAAOvD,EAAE+uB,KAAKtsB,EAAEA,GAAG,mBAAmBA,EAAE8mB,KAAK9mB,EAAE8mB,KAAKyD,EAAEjE,GAAG5rB,EAAEsF,GAAG+H,QAAQS,IAAIxI,GAAG8mB,KAAKyD,EAAEjE,GAAGiE,EAAEvqB,EAAC,CAAE,CAAC,OAAOzC,EAAE22B,EAAF32B,EAAM,CAAC,SAASmyC,GAAGl3B,EAAE0b,EAAEx5B,GAAG,IAAI6vB,EAAEtvB,UAAU/B,OAAO,GAAGqxB,EAAE,EAAE,MAAM,IAAI4M,GAAEsM,gBAAgB,qBAAqB,IAAI,IAAInd,EAAE,IAAIzrB,MAAM0vB,EAAE,KAAKA,GAAGjE,EAAEiE,EAAE,GAAGtvB,UAAUsvB,GAAwB,OAArB7vB,EAAE4rB,EAAEqM,MAAuB,CAACna,EAAZ3O,EAAEyc,GAAc5rB,EAAE,CAAC,SAASi1C,GAAGn3B,EAAE0b,EAAEx5B,EAAE6vB,EAAEjE,GAAG,OAAOkU,GAAGxyB,UAAU8e,MAAK,KAAM,MAAMvpB,EAAE88B,GAAGmH,WAAWnH,GAAGr6B,EAAEwY,EAAEinB,mBAAmBvL,EAAEx5B,EAAE8d,EAAEknB,UAAUnV,GAAGxR,EAAE,CAAC+mB,MAAM9/B,EAAEwhC,UAAUjkC,GAAG,GAAGgtB,EAAEvqB,EAAEuhC,SAAShX,EAAEgX,cAAc,IAAIvhC,EAAEY,SAAS4X,EAAEwiB,OAAO2E,eAAe,CAAC,CAAC,MAAMpV,GAAG,OAAOA,EAAEjpB,OAAO21B,EAAE2I,cAAcpnB,EAAEqnB,YAAYrnB,EAAEwiB,OAAO2E,eAAe,GAAGhlC,EAAQ+O,KAAK,4BAA4B8O,EAAE9S,SAAS8S,EAAEnM,OAAOya,MAAK,IAAK6oB,GAAGn3B,EAAE0b,EAAEx5B,EAAE,KAAK4rB,MAAMkY,GAAGjU,EAAE,CAAC,MAAM+J,EAAEiB,EAAEjP,GAAG,IAAI8E,EAAEkJ,GAAGiK,KAAK,MAAMnnB,EAAEojB,GAAGgD,QAAO,KAAM,GAAGpS,EAAE9E,EAAEtrB,KAAKgF,EAAEA,GAAGorB,EAAE,GAAGkJ,EAAE,CAAC,IAAI9b,EAAE8iB,GAAGj9B,KAAK,KAAK,MAAM+sB,EAAEtE,KAAKtO,EAAEA,EAAE,KAAK,mBAAmB4S,EAAExjB,MAAM,mBAAmBwjB,EAAEqkB,QAAQrkB,EAAEokB,GAAGpkB,GAAI,GAAErS,GAAG,OAAOqS,GAAG,mBAAmBA,EAAEtE,KAAK0T,GAAGxyB,QAAQojB,GAAGtE,MAAMtO,GAAGxY,EAAEqqC,OAAO7xB,EAAEgmB,GAAG,IAAIrH,GAAEyY,gBAAgB,iEAAiEx4B,EAAE0P,MAAK,IAAKsE,KAAKtE,MAAMtO,IAAI+R,GAAGvqB,EAAE2qC,WAAW3qC,EAAE+/B,YAAYjZ,MAAK,IAAKtO,OAAOuO,OAAOvO,IAAIxY,EAAEyqC,QAAQjyB,GAAGgmB,GAAGhmB,KAAM,GAAE,CAAC,SAASq3B,GAAGr3B,EAAE0b,EAAE3J,GAAG,MAAMjE,EAAE5rB,EAAE8d,GAAGA,EAAEzd,QAAQ,CAACyd,GAAG,IAAI,IAAIA,EAAE,EAAEA,EAAE+R,IAAI/R,EAAE8N,EAAE3sB,KAAKu6B,GAAG,OAAO5N,CAAC,CAAC,MAAMwpB,GAAG,CAACpwB,MAAM,SAASpe,KAAK,yBAAyByuC,MAAM,EAAEnvC,OAAO,SAAS4X,GAAG,MAAM,IAAIA,EAAEhd,MAAM04B,GAAG,MAAMx5B,EAAE8d,EAAEhd,MAAM04B,IAAImN,OAAO9W,GAAG7vB,EAAE4rB,EAAE,CAAC,EAAE/oB,EAAE,GAAG,SAASyC,EAAEwY,EAAE0b,EAAEx5B,GAAG,MAAM6vB,EAAEuhB,GAAGtzB,GAAGO,EAAEuN,EAAEiE,GAAGjE,EAAEiE,IAAI,GAAG+J,EAAE,MAAM9b,EAAE,EAAE,iBAAiBA,EAAE,EAAEA,EAAEtf,OAAOkyB,EAAE8I,EAAE,EAAE9c,EAAE,IAAI1c,EAAEs1C,UAAU5kB,EAAE6kB,QAAQ/b,EAAEgc,UAAU5b,EAAE+S,WAAWsE,GAAGnzB,GAAG4sB,QAAQha,GAAG1wB,EAAE0qC,QAAuF,OAA5ErsB,EAAEpf,KAAKyd,GAAGA,EAAE80B,cAAc3uC,EAAE5D,KAAKyd,GAAGkd,EAAE,GAAGt0B,EAAE,IAAIs0B,EAAE9b,EAAE,GAAGA,EAAEzd,MAAM,EAAEu5B,EAAE,GAAGJ,EAAE,EAAEx5B,GAAUqe,EAAEutB,MAAK,CAAE9tB,EAAE0b,IAAI1b,EAAEy3B,QAAQ/b,EAAE+b,UAAU74B,CAAC,CAAC,MAAM2B,EAAE/Y,EAAEuqB,EAAEua,WAAW5C,QAAQ,EAAE3X,EAAEua,YAAYxe,EAAE,OAAO,CAACvN,GAAG,IAAI,MAAMP,KAAK+R,EAAEwX,QAAQ/hC,EAAEwY,EAAE0pB,QAAQ,EAAE1pB,GAAG,SAAS8b,EAAEJ,GAAG,MAAMx5B,EAAEw5B,EAAEmR,MAAM5hB,MAAM,OAAO/oB,EAAEs1C,UAAU,IAAI9b,EAAEmR,MAAM,CAAC5hB,MAAM/oB,EAAEsW,OAAOuZ,EAAE2J,EAAEmR,MAAMr0B,MAAMsV,EAAE5rB,EAAEu1C,QAAQ,CAACjrC,KAAK,IAAIulB,EAAEvlB,KAAK,EAAEulB,EAAEvlB,KAAK8f,MAAM+qB,GAAGtlB,EAAEzF,MAAMyF,EAAEwW,UAAUvoB,EAAEk0B,QAAQl0B,EAAEi0B,QAAQnmB,GAAGya,WAAU,EAAGhc,MAAM8qB,GAAGtlB,EAAExF,MAAMwF,EAAEyW,UAAUxoB,EAAEi0B,QAAQj0B,EAAEk0B,QAAQpmB,GAAG0a,WAAU,MAAO9M,EAAE,IAAI3J,EAAEjE,CAAC,CAAC,MAAM8E,EAAE,IAAI1wB,EAAE2mC,OAAO,IAAI9W,EAAEua,WAAW/rB,EAAEgpB,QAAQxkC,EAAEwnC,kBAAkB,SAASvsB,GAAG,MAAM0b,EAAE5N,EAAEwlB,GAAGtzB,IAAI,OAAO0b,GAAGA,EAAE,EAAE,GAAGvsB,MAAM6Q,GAAG9d,EAAEiN,MAAM2sB,EAAE9b,IAAI6sB,MAAM7sB,GAAG9d,EAAE2qC,MAAM/Q,EAAE9b,IAAI0sB,WAAWhR,GAAG,MAAM+b,QAAQ1lB,EAAEylB,UAAU1pB,EAAE4pB,UAAU3yC,GAAG22B,EAAEmR,MAAM5hB,MAAM,OAAI6C,EAAgC5rB,EAAEwqC,WAAW5Q,EAAEJ,IAAIpN,MAAMpsB,GAAGA,GAAG,SAASA,GAAG,MAAM4rB,EAAE3lB,OAAOC,OAAOlG,EAAE,CAAC8pB,SAAS,CAAC1jB,MAAM,SAASwlB,GAAG,MAAMA,EAAE5rB,EAAE8pB,SAASqrB,GAAGvpB,EAAE4N,EAAE7hB,QAAQmG,EAAEk0B,QAAQl0B,EAAEi0B,QAAQliB,IAAI2J,EAAEkR,OAAO1qC,EAAE8pB,SAAS9pB,EAAEsJ,IAAIjJ,MAAM,EAAEwC,GAAGwT,OAAOmjB,EAAE7hB,QAAQmG,EAAEi0B,QAAQj0B,EAAEk0B,QAAQniB,IAAI7vB,EAAE8pB,UAAU,GAAGgoB,mBAAmB,CAAC1rC,MAAMozB,EAAE5N,GAAG5rB,EAAE8xC,mBAAmBqD,GAAG3b,EAAE1b,EAAEk0B,QAAQniB,GAAGjE,EAAE,GAAGwe,WAAW,CAACliC,IAAI,IAAIlI,EAAEoqC,YAAY9gC,IAAI,CAACpB,MAAM,MAAM4V,EAAE9d,EAAEsJ,IAAI,OAAO,IAAIzG,EAAEib,EAAE,GAAGA,EAAEzd,MAAM,EAAEwC,EAAE,GAAGuD,MAAM,CAAC8B,IAAI,IAAIlI,EAAEoG,SAAS,OAAOwlB,CAAC,CAAja,CAAma5rB,KAAzdA,EAAEwqC,WAAWhR,EAAgd,GAAG,OAAO9I,CAAC,EAAE,GAAG,SAAS+kB,GAAG33B,EAAE9d,EAAE6vB,EAAEjE,GAAG,OAAOiE,EAAEA,GAAG,CAAC,EAAEjE,EAAEA,GAAG,GAAG4N,EAAE1b,GAAGnW,SAAS6xB,IAAI,GAAGl0B,EAAEtF,EAAEw5B,GAAG,CAAC,IAAI32B,EAAEib,EAAE0b,GAAGnb,EAAEre,EAAEw5B,GAAG,GAAG,iBAAiB32B,GAAG,iBAAiBwb,GAAGxb,GAAGwb,EAAE,CAAC,MAAMP,EAAE2c,EAAE53B,GAAGib,IAAI2c,EAAEpc,GAAGwR,EAAEjE,EAAE4N,GAAGx5B,EAAEw5B,GAAG,WAAW1b,EAAE23B,GAAG5yC,EAAEwb,EAAEwR,EAAEjE,EAAE4N,EAAE,KAAK32B,IAAIwb,IAAIwR,EAAEjE,EAAE4N,GAAGx5B,EAAEw5B,GAAG,MAAM32B,IAAIwb,IAAIwR,EAAEjE,EAAE4N,GAAGx5B,EAAEw5B,GAAG,MAAM3J,EAAEjE,EAAE4N,QAAG,CAAO,IAAGA,EAAEx5B,GAAG2H,SAAS6xB,IAAIl0B,EAAEwY,EAAE0b,KAAK3J,EAAEjE,EAAE4N,GAAGx5B,EAAEw5B,GAAI,IAAG3J,CAAC,CAAC,MAAM6lB,GAAG,CAAC1wB,MAAM,SAASpe,KAAK,kBAAkByuC,MAAM,EAAEnvC,OAAO4X,IAAG,IAAKA,EAAEhd,MAAM04B,GAAG,MAAMx5B,EAAE8d,EAAEhd,MAAM04B,IAAI4Q,WAAWva,GAAG7vB,EAAE2mC,OAAO/a,EAAE,IAAI5rB,EAAE0oC,OAAO5qB,GAAG,MAAM8N,EAAE+T,GAAGyF,OAAOuQ,SAAS9yC,EAAE+yC,SAASv3B,EAAEw3B,SAASjc,GAAGhO,EAAE9qB,MAAM04B,GAAGyN,KAAK,OAAOnpB,EAAExT,MAAM,IAAI,MAAM,GAAG+T,EAAE8oB,OAAOnK,GAAG,MAAM,OAAOpR,EAAE4V,SAAS,aAAY,IAAK9Q,EAAE5S,KAAI,GAAI,IAAI,MAAM,GAAGO,EAAE8oB,OAAOnK,IAAIpD,EAAEuN,OAAOnK,GAAG,MAAM,OAAOpR,EAAE4V,SAAS,aAAY,IAAK9Q,EAAE5S,KAAI,GAAI,IAAI,SAAS,GAAGjb,EAAEskC,OAAOnK,GAAG,MAAM,OAAOpR,EAAE4V,SAAS,aAAY,IAAK9Q,EAAE5S,KAAI,GAAI,IAAI,cAAc,GAAGjb,EAAEskC,OAAOnK,GAAG,MAAM,OAAOpR,EAAE4V,SAAS,aAAY,IAAK,SAAS1jB,GAAG,OAAOpB,EAAEoB,EAAEsnB,MAAMtnB,EAAExH,MAAM,IAAI,CAAzC,CAA2CwH,KAAI,GAAI,OAAO9d,EAAE0oC,OAAO5qB,GAAG,SAAS4S,EAAE5S,GAAG,MAAM0b,EAAEmG,GAAGyF,MAAMxZ,EAAE9N,EAAEpP,MAAM,SAASoP,EAAE0b,GAAG,MAAM,WAAWA,EAAElvB,KAAKkvB,EAAE9qB,KAAK8qB,EAAE9qB,MAAM8qB,EAAEt2B,OAAOoU,IAAIwG,EAAE6uB,WAAW,CAA/E,CAAiF9c,EAAE/R,GAAG,IAAI8N,EAAE,MAAM,IAAI9rB,MAAM,gBAAgB,MAAM,YAAYge,EAAE,QAAQA,EAAExT,MAAM,QAAQwT,EAAExT,KAAK,IAAIwT,EAAEpP,KAAKkd,GAAG,IAAI9N,IAAIxT,OAAOwT,EAAE5a,OAAO,IAAI4a,EAAE5a,SAAS4a,EAAEpP,OAAOoP,EAAEpP,KAAK,IAAIoP,EAAEpP,OAAO,SAASoP,EAAE0b,EAAEx5B,GAAG,MAAM,QAAQw5B,EAAElvB,KAAK+C,QAAQC,QAAQ,IAAIwQ,EAAE/M,QAAQ,CAACq0B,MAAM5L,EAAE4L,MAAM12B,KAAK1O,EAAE8W,MAAM,aAAa,CAA5G,CAA8G9W,EAAE8d,EAAE8N,GAAGQ,MAAMsE,IAAI,MAAMhU,EAAEkP,EAAEtU,KAAI,CAAEtX,EAAE4rB,KAAK,MAAMlP,EAAEgU,EAAE9E,GAAGkO,EAAE,CAAC/R,QAAQ,KAAKC,UAAU,MAAM,GAAG,WAAWlK,EAAExT,KAAKzH,EAAEskC,KAAK7mC,KAAKw5B,EAAE95B,EAAE0c,EAAE8c,QAAQ,GAAG,QAAQ1b,EAAExT,WAAM,IAASoS,EAAE,CAAC,MAAM7Z,EAAEwb,EAAE8oB,KAAK7mC,KAAKw5B,EAAE95B,EAAE8d,EAAE5a,OAAO0oB,GAAG4N,GAAG,MAAMx5B,GAAG,MAAM6C,IAAI7C,EAAE6C,EAAEib,EAAEpP,KAAKkd,GAAG5rB,EAAE6vB,EAAE6c,UAAUhlB,EAAE5J,EAAE5a,OAAO0oB,GAAGiE,EAAE2X,QAAQxnC,GAAG,KAAK,CAAC,MAAM6vB,EAAE4lB,GAAG/4B,EAAEoB,EAAE5a,OAAO0oB,IAAI/oB,EAAE+2B,EAAEuN,KAAK7mC,KAAKw5B,EAAEjK,EAAE7vB,EAAE0c,EAAE8c,GAAG,GAAG32B,EAAE,CAAC,MAAM22B,EAAE1b,EAAE5a,OAAO0oB,GAAG3lB,OAAOyI,KAAK7L,GAAG8E,SAASmW,IAAIxY,EAAEk0B,EAAE1b,GAAG0b,EAAE1b,GAAGjb,EAAEib,GAAG4J,EAAE8R,EAAE1b,EAAEjb,EAAEib,GAAI,GAAE,CAAC,CAAC,OAAOgc,CAAE,IAAG,OAAO95B,EAAE0oC,OAAO5qB,GAAGsO,MAAK,EAAG6P,SAASzC,EAAEzN,QAAQ/rB,EAAE2oC,YAAY9Y,EAAE+Y,WAAW/lC,MAAM,IAAI,IAAIgtB,EAAE,EAAEA,EAAEjE,EAAEptB,SAASqxB,EAAE,CAAC,MAAMhtB,EAAE7C,EAAEA,EAAE6vB,GAAGjE,EAAEiE,GAAGvqB,EAAEoX,EAAEmT,GAAG,MAAMhtB,EAAEyC,EAAEyiB,SAASziB,EAAEyiB,QAAQyR,EAAE3J,IAAIvqB,EAAE0iB,WAAW1iB,EAAE0iB,UAAU,QAAQlK,EAAExT,MAAMomB,EAAEb,GAAG/R,EAAE5a,OAAO2sB,GAAGhtB,EAAE,CAAC,MAAM,CAACo5B,SAASzC,EAAEzN,QAAQ/rB,EAAE2oC,YAAY9Y,EAAE+Y,WAAW/lC,EAAG,IAAGwpB,OAAOvO,IAAIpB,EAAE/U,SAAS6xB,GAAGA,EAAEzR,SAASyR,EAAEzR,QAAQjK,KAAKzQ,QAAQE,OAAOuQ,KAAM,GAAE,CAAC,SAASpB,EAAEoB,EAAE0b,EAAE5N,GAAG,OAAO5rB,EAAE2qC,MAAM,CAACvF,MAAMtnB,EAAE5a,QAAO,EAAGynC,MAAM,CAAC5hB,MAAM8G,EAAEvZ,MAAMkjB,GAAG1sB,MAAM8e,IAAIQ,MAAK,EAAGhW,OAAOpW,KAAK0wB,EAAE,CAACpmB,KAAK,SAASoE,KAAK1O,EAAEolC,MAAMtnB,IAAIsO,MAAMyD,GAAGA,EAAE8Y,YAAY,EAAEt7B,QAAQE,OAAOsiB,EAAEoM,SAAS,IAAIj8B,EAAExB,OAAOotB,EAAE,CAACqQ,SAAS,GAAG0M,YAAY,EAAEC,gBAAW,GAAQlsB,EAAEoB,EAAE,IAAI0b,EAAEpP,MAAMpqB,EAAEA,EAAExB,OAAO,GAAG6nC,WAAU,GAAIza,MAAM,CAAC,GAAG,OAAOA,CAAC,KAAK,SAASkqB,GAAGh4B,EAAE0b,EAAEx5B,GAAG,IAAI,IAAIw5B,EAAE,OAAO,KAAK,GAAGA,EAAE9qB,KAAKlQ,OAAOsf,EAAEtf,OAAO,OAAO,KAAK,MAAMqxB,EAAE,GAAG,IAAI,IAAIjE,EAAE,EAAE/oB,EAAE,EAAE+oB,EAAE4N,EAAE9qB,KAAKlQ,QAAQqE,EAAEib,EAAEtf,SAASotB,EAAE,IAAIsf,GAAG1R,EAAE9qB,KAAKkd,GAAG9N,EAAEjb,MAAMgtB,EAAE5wB,KAAKe,EAAEs6B,EAAEd,EAAEt2B,OAAO0oB,IAAI4N,EAAEt2B,OAAO0oB,MAAM/oB,GAAG,OAAOgtB,EAAErxB,SAASsf,EAAEtf,OAAOqxB,EAAE,IAAI,CAAC,MAAM/R,GAAG,OAAO,IAAI,CAAC,CAAC,MAAMi4B,GAAG,CAAC/wB,MAAM,SAASqwB,OAAO,EAAEnvC,OAAO4X,IAAG,CAAEhd,MAAM04B,IAAI,MAAMx5B,EAAE8d,EAAEhd,MAAM04B,GAAG,MAAM,IAAIx5B,EAAE+Q,QAAQ+M,IAAI,IAAIA,EAAEhH,MAAM,OAAO9W,EAAE+Q,QAAQ+M,GAAG,MAAM0b,EAAEsc,GAAGh4B,EAAEpP,KAAKoP,EAAEsnB,MAAM4Q,OAAO,UAAUl4B,EAAEhH,OAAO,OAAO0iB,EAAEsG,GAAGxyB,QAAQksB,GAAGx5B,EAAE+Q,QAAQ+M,GAAGsO,MAAMoN,IAAI1b,EAAEsnB,MAAM4Q,OAAO,CAACtnC,KAAKoP,EAAEpP,KAAKxL,OAAO,UAAU4a,EAAEhH,MAAMwjB,EAAEd,GAAGA,GAAGA,IAAG,EAAGkP,OAAO5qB,IAAI,QAAQA,EAAExT,OAAOwT,EAAEsnB,MAAM4Q,OAAO,MAAMh2C,EAAE0oC,OAAO5qB,IAAG,KAAM,SAASm4B,GAAGn4B,GAAG,QAAQ,SAASA,EAAE,CAAC,MAAMo4B,GAAG,SAASp4B,EAAE0b,GAAG,IAAIjyB,KAAK,CAAC,MAAMiyB,EAAE,IAAI0c,GAAG,OAAOp4B,GAAG,MAAMA,GAAG+R,EAAE2J,EAAE1b,GAAG0b,CAAC,CAAC3J,EAAEtoB,KAAKhH,UAAU/B,OAAO,CAACu7B,EAAE,EAAEljB,KAAKiH,EAAEq4B,GAAG51C,UAAU/B,OAAO,EAAEg7B,EAAE1b,GAAG,CAACic,EAAE,GAAG,EAAE,SAASqc,GAAGt4B,EAAE0b,EAAEx5B,GAAG,MAAM4rB,EAAEsf,GAAG1R,EAAEx5B,GAAG,GAAG6rB,MAAMD,GAAG,OAAO,GAAGA,EAAE,EAAE,MAAMzT,aAAa,GAAG89B,GAAGn4B,GAAG,OAAO+R,EAAE/R,EAAE,CAACjH,KAAK2iB,EAAE2c,GAAGn2C,EAAE+5B,EAAE,IAAI,MAAMl3B,EAAEib,EAAE4S,EAAEprB,EAAEwY,EAAE+R,EAAE,GAAGqb,GAAGlrC,EAAE8d,EAAEjH,MAAM,EAAE,OAAOhU,EAAEuzC,GAAGvzC,EAAE22B,EAAEx5B,GAAG8d,EAAE4S,EAAE,CAAC7Z,KAAK2iB,EAAE2c,GAAGn2C,EAAE+5B,EAAE,EAAErJ,EAAE,KAAKb,EAAE,MAAMwmB,GAAGv4B,GAAG,GAAGotB,GAAG1R,EAAE1b,EAAEq4B,IAAI,EAAE,OAAO7wC,EAAE8wC,GAAG9wC,EAAEk0B,EAAEx5B,GAAG8d,EAAE+R,EAAE,CAAChZ,KAAK2iB,EAAE2c,GAAGn2C,EAAE+5B,EAAE,EAAErJ,EAAE,KAAKb,EAAE,MAAMwmB,GAAGv4B,GAAGotB,GAAG1R,EAAE1b,EAAEjH,MAAM,IAAIiH,EAAEjH,KAAK2iB,EAAE1b,EAAE4S,EAAE,KAAK5S,EAAEic,EAAEz0B,EAAEA,EAAEy0B,EAAE,EAAE,GAAGmR,GAAGlrC,EAAE8d,EAAEq4B,IAAI,IAAIr4B,EAAEq4B,GAAGn2C,EAAE8d,EAAE+R,EAAE,KAAK/R,EAAEic,EAAEjc,EAAE4S,EAAE5S,EAAE4S,EAAEqJ,EAAE,EAAE,GAAG,MAAM1b,GAAGP,EAAE+R,EAAEhtB,IAAIib,EAAE4S,GAAG4lB,GAAGx4B,EAAEjb,GAAGyC,GAAG+Y,GAAGi4B,GAAGx4B,EAAExY,EAAE,CAAC,SAASgxC,GAAGx4B,EAAE0b,GAAGyc,GAAGzc,IAAI,SAAS1b,EAAE0b,GAAG3iB,KAAK7W,EAAEm2C,GAAGtmB,EAAEa,EAAE9E,EAAEiE,EAAEhtB,IAAIuzC,GAAG5c,EAAEx5B,EAAE6vB,GAAGjE,GAAG9N,EAAE0b,EAAE5N,GAAG/oB,GAAGib,EAAE0b,EAAE32B,EAAE,CAAjE,CAAmEib,EAAE0b,EAAE,CAA2R,SAAS+c,GAAGz4B,GAAG,IAAI0b,EAAEyc,GAAGn4B,GAAG,KAAK,CAAC8N,EAAE,EAAE5rB,EAAE8d,GAAG,MAAM,CAAC5Q,KAAK4Q,GAAG,MAAM9d,EAAEO,UAAU/B,OAAO,EAAE,KAAKg7B,GAAG,OAAOA,EAAE5N,GAAG,KAAK,EAAE,GAAG4N,EAAE5N,EAAE,EAAE5rB,EAAE,KAAKw5B,EAAEx5B,EAAE0wB,GAAGwa,GAAGptB,EAAE0b,EAAEx5B,EAAE6W,MAAM,GAAG2iB,EAAE,CAACgd,GAAGhd,EAAEx5B,EAAEw5B,EAAEx5B,EAAE0wB,EAAE9E,EAAE,QAAQ,KAAK4N,EAAEx5B,EAAE0wB,GAAG8I,EAAE,CAACgd,GAAGhd,EAAEx5B,EAAEw5B,EAAEx5B,EAAE0wB,EAAE9E,EAAE,GAAG,KAAK,EAAE,GAAG4N,EAAE5N,EAAE,GAAG5rB,GAAGkrC,GAAGptB,EAAE0b,EAAEx5B,EAAEm2C,KAAK,EAAE,MAAM,CAAC/vC,MAAMozB,EAAEx5B,EAAE4xB,MAAK,GAAI,KAAK,EAAE,GAAG4H,EAAEx5B,EAAE6vB,EAAE,CAAC2J,EAAE5N,EAAE,EAAE4N,EAAE,CAACgd,GAAGhd,EAAEx5B,EAAEw5B,EAAEx5B,EAAE6vB,EAAEjE,EAAE,GAAG,QAAQ,CAAC,KAAK,EAAE4N,EAAEA,EAAEgd,GAAG,MAAM,CAAC5kB,MAAK,EAAG,EAAE,CAAC,SAASykB,GAAGv4B,GAAG,IAAI0b,EAAEx5B,EAAE,MAAM6vB,IAAI,QAAQ2J,EAAE1b,EAAE+R,SAAI,IAAS2J,OAAE,EAAOA,EAAEO,IAAI,KAAK,QAAQ/5B,EAAE8d,EAAE4S,SAAI,IAAS1wB,OAAE,EAAOA,EAAE+5B,IAAI,GAAGnO,EAAEiE,EAAE,EAAE,IAAIA,GAAG,EAAE,IAAI,GAAG,GAAGjE,EAAE,CAAC,MAAM4N,EAAE,MAAM5N,EAAE,IAAI,IAAI5rB,EAAE,IAAI8d,GAAG+R,EAAE/R,EAAE8N,GAAG9N,EAAEjH,KAAKgZ,EAAEhZ,KAAKiH,EAAEq4B,GAAGtmB,EAAEsmB,GAAGr4B,EAAE8N,GAAGiE,EAAEjE,GAAG5rB,EAAE4rB,GAAGiE,EAAE2J,GAAG1b,EAAE0b,GAAGx5B,EAAEA,EAAE+5B,EAAE0c,GAAGz2C,EAAE,CAAC8d,EAAEic,EAAE0c,GAAG34B,EAAE,CAAC,SAAS24B,IAAI5mB,EAAE/R,EAAE4S,EAAE8I,IAAI,OAAO1b,EAAE0b,EAAEh5B,KAAKue,IAAIjB,EAAEic,EAAEP,EAAEO,GAAGjc,EAAEic,EAAEP,EAAEA,EAAEO,EAAE,GAAG,CAAC,CAAC1b,EAAE63B,GAAG91C,UAAU,CAACiU,IAAIyJ,GAAG,OAAOw4B,GAAG/uC,KAAKuW,GAAGvW,IAAI,EAAEmvC,OAAO54B,GAAG,OAAOs4B,GAAG7uC,KAAKuW,EAAEA,GAAGvW,IAAI,EAAEovC,QAAQ74B,GAAG,OAAOA,EAAEnW,SAASmW,GAAGs4B,GAAG7uC,KAAKuW,EAAEA,KAAKvW,IAAI,EAAE,CAACoU,KAAK,OAAO46B,GAAGhvC,KAAK,IAAI,MAAMqvC,GAAG,CAAC5xB,MAAM,SAASqwB,MAAM,EAAEnvC,OAAO4X,IAAI,MAAM+R,EAAE/R,EAAE6oB,OAAO//B,KAAKglB,EAAE,IAAIsqB,GAAGp4B,EAAEi0B,QAAQj0B,EAAEk0B,SAAS,MAAM,IAAIl0B,EAAEhd,MAAM+B,IAAI,MAAMyC,EAAEwY,EAAEhd,MAAM+B,IAAI8jC,OAAOtoB,GAAG/Y,GAAG8kC,WAAWxQ,GAAGvb,GAAGsuB,WAAWjc,EAAEgc,SAAShwB,GAAGkd,EAAEE,EAAE,IAAIx0B,EAAEojC,OAAO5qB,IAAI,MAAM0b,EAAE1b,EAAEsnB,MAAMxL,EAAEJ,EAAE2W,eAAe3W,EAAE2W,aAAa,CAAC,GAAGzf,EAAE5S,IAAI,MAAM0b,EAAE,SAAS3J,KAAKhtB,KAAKib,IAAI,OAAO8b,EAAEJ,KAAKI,EAAEJ,GAAG,IAAI0c,GAAE,EAAGx5B,EAAEgU,EAAE,IAAIoJ,EAAEpJ,EAAE,UAAUpmB,KAAKyvB,GAAGjc,EAAE,IAAIkc,EAAEl3B,GAAG,gBAAgBgb,EAAExT,KAAK,CAACwT,EAAExH,OAAO,WAAWwH,EAAExT,KAAK,CAACwT,EAAEpP,MAAMoP,EAAE5a,OAAO1E,OAAO,GAAG,CAAC,GAAGsf,EAAE5a,QAAQ,GAAG,MAAMob,EAAER,EAAEsnB,MAAM4Q,OAAO,OAAO1wC,EAAEojC,OAAO5qB,GAAGsO,MAAMtO,IAAI,GAAG9d,EAAEg6B,GAAG,CAAC,WAAWD,IAAIC,EAAElc,EAAEiO,SAASrP,EAAEi6B,QAAQ3c,GAAG,MAAMR,EAAEsc,GAAG9b,EAAE1b,GAAGkb,GAAG,QAAQO,GAAGD,EAAE6c,QAAQ3c,IAAIR,GAAG12B,IAAI,SAASgb,EAAE0b,EAAE3J,EAAEjE,GAAqQ4N,EAAE6N,QAAQ1/B,SAA5Q,SAAW6xB,GAAG,MAAM32B,EAAEib,EAAE0b,EAAE5yB,MAAM,IAAI,SAAStB,EAAEwY,GAAG,OAAO,MAAMA,EAAE0b,EAAEmT,WAAW7uB,GAAG,IAAI,CAAC,MAAMO,EAAEP,GAAG0b,EAAEkY,YAAY1xC,EAAE8d,GAAGA,EAAEnW,SAASmW,GAAGjb,EAAE6zC,OAAO54B,KAAKjb,EAAE6zC,OAAO54B,IAAI+R,GAAGjE,GAAGjkB,SAAQ,CAAEmW,EAAE0b,KAAK,MAAMx5B,EAAE6vB,GAAGvqB,EAAEuqB,EAAE2J,IAAI32B,EAAE+oB,GAAGtmB,EAAEsmB,EAAE4N,IAAI,IAAI0R,GAAGlrC,EAAE6C,KAAK,MAAM7C,GAAGqe,EAAEre,GAAG,MAAM6C,GAAGwb,EAAExb,GAAI,GAAE,GAAqB,CAAxS,CAA0S6tB,EAAErS,EAAEmb,EAAE12B,EAAE,MAAM,GAAGk3B,EAAE,CAAC,MAAMlc,EAAE,CAACjH,KAAKmjB,EAAE5P,MAAM+rB,GAAGnc,EAAE3P,OAAOyP,EAAEzlB,IAAIyJ,GAAGpB,EAAErI,IAAIyJ,EAAE,MAAMpB,EAAErI,IAAIuX,GAAGkO,EAAEzlB,IAAIuX,GAAGvN,EAAEgpB,QAAQ1/B,SAASmW,GAAG4S,EAAE5S,EAAElX,MAAMyN,IAAIuX,KAAK,OAAO9N,CAAE,GAAC,GAAIic,EAAE,EAAE4Q,OAAO5hB,MAAMyQ,EAAEljB,MAAMtW,OAAO,IAAI6vB,EAAEjE,EAAE,MAAM,CAAC4N,EAAE,IAAI0c,GAAG,QAAQrmB,EAAE7vB,EAAEoqB,aAAQ,IAASyF,EAAEA,EAAE/R,EAAEi0B,QAAQ,QAAQnmB,EAAE5rB,EAAEqqB,aAAQ,IAASuB,EAAEA,EAAE9N,EAAEk0B,SAAQ,EAAGhY,EAAE,CAAC9xB,IAAI4V,GAAG,CAAC8b,EAAE,IAAIsc,GAAGp4B,EAAExU,MAAMyH,QAAQ+M,GAAG,CAAC8b,GAAE,IAAKsc,IAAIS,QAAQ74B,EAAEpP,OAAOzB,MAAM8sB,EAAE4Q,MAAM5Q,EAAEyQ,WAAWzQ,GAAG,OAAOP,EAAEQ,GAAGryB,SAASmW,IAAIgc,EAAEhc,GAAG,SAAS0b,GAAG,MAAMqd,OAAO72C,GAAG2/B,GAAG,GAAG3/B,EAAE,CAAC,MAAMqe,EAAEP,IAAI,MAAM0b,EAAE,SAAS3J,KAAKhtB,KAAKib,IAAI,OAAO9d,EAAEw5B,KAAKx5B,EAAEw5B,GAAG,IAAI0c,GAAE,EAAGtc,EAAEvb,EAAE,IAAIyb,EAAEzb,EAAE,UAAU0b,EAAEj3B,GAAGk3B,EAAElc,GAAG0b,GAAG,GAAGnb,EAAE0b,EAAEnzB,MAAM,IAAIyN,IAAIvR,IAAIi3B,EAAEyX,aAAa,CAAC,GAAG,UAAU1zB,EAAE,CAAC,MAAM9d,EAAE,UAAU8d,GAAGpB,GAAG8c,EAAEt2B,QAAQoC,EAAEqlC,MAAM,IAAInR,EAAEt2B,QAAO,IAAK,OAAOoC,EAAEwY,GAAGlf,MAAM2I,KAAKhH,WAAW6rB,MAAMyD,IAAI,GAAG,UAAU/R,EAAE,CAAC,GAAGpB,GAAG8c,EAAEt2B,OAAO,OAAOlD,EAAEosB,MAAK,EAAGhW,OAAO0H,MAAM8b,EAAE+c,QAAQ74B,GAAG+R,KAAK,MAAM/R,EAAE0b,EAAEt2B,OAAO2sB,EAAEzZ,OAAOkB,IAAIoZ,GAAGb,EAAEzZ,OAAOojB,EAAEt2B,OAAO02B,EAAE+c,QAAQ74B,GAAGgc,EAAE6c,QAAQ74B,EAAE,MAAM,GAAG,eAAeA,EAAE,CAAC,MAAMA,EAAE+R,EAAE7vB,EAAEw5B,EAAEt2B,OAAO,OAAO4a,GAAG7X,OAAOC,OAAO4X,EAAE,CAACxU,IAAI,CAACpB,IAAI,KAAK4xB,EAAE4c,OAAO54B,EAAEssB,YAAYtsB,EAAExU,MAAM8gC,WAAW,CAACliC,MAAM,MAAMsxB,EAAE1b,EAAEssB,WAAW,OAAOtQ,EAAE4c,OAAOld,GAAGA,CAAC,GAAGpzB,MAAM,CAAC8B,IAAI,KAAKlI,GAAG45B,EAAE8c,OAAO54B,EAAEssB,YAAYtsB,EAAE1X,SAAS,CAAC,OAAOypB,CAAE,GAAE,CAACiK,EAAEzlB,IAAIuX,EAAE,CAAC,CAAC,OAAOtmB,EAAEwY,GAAGlf,MAAM2I,KAAKhH,UAAU,CAAE,IAAGu5B,GAAE,GAAI,MAAMsa,GAAG/sC,YAAYyW,EAAE0b,GAAGjyB,KAAK6qC,aAAa,CAAC,EAAE7qC,KAAKuvC,MAAM,EAAE,MAAM92C,EAAEo0C,GAAG2C,aAAaxvC,KAAKi+B,SAAShM,EAAE,CAAC6a,OAAOD,GAAGC,OAAO5O,UAAS,EAAG3d,UAAU9nB,EAAE8nB,UAAU0C,YAAYxqB,EAAEwqB,eAAegP,GAAGjyB,KAAKqgC,MAAM,CAAC9f,UAAU0R,EAAE1R,UAAU0C,YAAYgP,EAAEhP,aAAa,MAAM6pB,OAAOxkB,GAAG2J,EAAEjyB,KAAKy9B,UAAU,CAAC,EAAEz9B,KAAKsrC,UAAU,GAAGtrC,KAAKorC,YAAY,GAAGprC,KAAKysC,WAAW,CAAC,EAAEzsC,KAAKo9B,MAAM,KAAKp9B,KAAK2qC,OAAO3qC,KAAK,MAAMqkB,EAAE,CAAC0Z,YAAY,KAAKC,eAAc,EAAGyR,kBAAkB,KAAKpS,cAAa,EAAGqS,eAAeja,GAAG0I,eAAe,KAAKwR,WAAWla,GAAGma,cAAc,KAAKC,YAAW,EAAGnS,eAAe,GAAG,IAAIpiC,EAAE+oB,EAAE8Z,eAAe,IAAI5F,IAAIhiB,IAAI8N,EAAEqrB,eAAen5B,CAAE,IAAG8N,EAAEurB,cAAc,IAAIrX,IAAG,CAAEhiB,EAAE0b,KAAK5N,EAAEsrB,WAAW1d,CAAE,IAAGjyB,KAAK+4B,OAAO1U,EAAErkB,KAAKX,KAAKkX,EAAEvW,KAAKyoC,GAAG1G,GAAG/hC,KAAK,WAAW,UAAU,gBAAgB,QAAQ,CAAC8vC,MAAM,CAAC7Z,GAAGR,MAAMz1B,KAAKyoC,GAAGqH,MAAM9N,UAAUjrB,EAAE/W,KAAKyoC,GAAGqH,MAAM9N,WAAWzrB,GAAG,CAAC0b,EAAEx5B,KAAKo0C,GAAGkD,KAAI,KAAM,MAAMznB,EAAEtoB,KAAK+4B,OAAO,GAAGzQ,EAAE+U,aAAa/U,EAAEyV,aAAaxF,GAAGxyB,UAAU8e,KAAKoN,GAAGx5B,GAAG8d,EAAE0b,QAAQ,GAAG3J,EAAEmnB,kBAAkBnnB,EAAEmnB,kBAAkB/3C,KAAKu6B,GAAGx5B,GAAG8d,EAAE0b,OAAO,CAAC1b,EAAE0b,GAAG,MAAM3J,EAAEtoB,KAAKvH,GAAG8d,GAAE,SAAUA,IAAI+R,EAAEmgB,GAAGqH,MAAM9O,YAAY/O,GAAG3J,EAAEmgB,GAAGqH,MAAM9O,YAAYzqB,EAAG,GAAE,CAAE,GAAC,IAAKvW,KAAK2gC,YAAYrlC,EAAE0E,KAAKmiC,GAAG4B,GAAGlrC,WAAU,SAAU0d,EAAE0b,GAAGjyB,KAAK0B,GAAGpG,EAAE,IAAI7C,EAAEomC,GAAGvW,EAAE,KAAK,GAAG2J,EAAE,IAAIx5B,EAAEw5B,GAAG,CAAC,MAAM1b,GAAG+R,EAAE/R,CAAC,CAAC,MAAM8N,EAAE9N,EAAE0tB,KAAKlmC,EAAEsmB,EAAE9qB,MAAMud,EAAE/Y,EAAE2hC,KAAKC,QAAQC,KAAK5/B,KAAKikC,KAAK,CAAC1qC,MAAMwE,EAAEyjB,MAAM6C,EAAE7C,MAAMohB,WAAWve,EAAE7C,OAAOzjB,EAAEqhC,OAAOW,QAAQE,SAAS5b,EAAE7C,QAAQzjB,EAAEqhC,OAAOW,QAAQ1gC,KAAK0P,MAAMtW,EAAEyqC,UAAS,EAAGxvB,IAAI,OAAOyvB,OAAO,GAAGd,UAAU,KAAKr1B,OAAO,KAAKw1B,aAAa,KAAKD,WAAU,EAAGiC,QAAQ,KAAKttC,OAAO,EAAEqO,MAAM,IAAIkR,MAAM6R,EAAEga,GAAGje,EAAEie,GAAGoB,YAAY5sB,IAAI4e,GAAG5e,EAAE,KAAM,KAAI9W,KAAKopC,MAAM,SAAS7yB,GAAG,OAAO4rB,GAAGlD,GAAGpmC,WAAU,SAAUo5B,EAAEx5B,EAAE6vB,GAAGtoB,KAAK0B,GAAG6U,EAAEvW,KAAKm/B,IAAI7W,EAAEtoB,KAAKX,KAAK4yB,EAAEjyB,KAAKo/B,OAAO3mC,EAAEuH,KAAK0/B,KAAKnpB,EAAEk2B,WAAWxa,GAAG1b,EAAEk2B,WAAWxa,GAAGyN,KAAKqC,GAAG,KAAK,CAACsM,SAAS,CAACxY,GAAGJ,IAAIkK,QAAQ,CAAChK,GAAGD,IAAI4Y,SAAS,CAACvY,GAAGN,IAAI2Y,SAAS,CAACtY,GAAGL,KAAM,GAAE,CAAlO,CAAoOz1B,MAAMA,KAAK+qC,YAAY,SAASx0B,GAAG,OAAO4rB,GAAGyF,GAAG/uC,WAAU,SAAUo5B,EAAEx5B,EAAE6vB,EAAEjE,EAAE/oB,GAAG0E,KAAK0B,GAAG6U,EAAEvW,KAAK+gB,KAAKkR,EAAEjyB,KAAKqoC,WAAW5vC,EAAEuH,KAAKo/B,OAAO9W,EAAEtoB,KAAKuoC,4BAA4BlkB,EAAErkB,KAAKs/B,SAAS,KAAKt/B,KAAKyoC,GAAG1G,GAAG/hC,KAAK,WAAW,QAAQ,SAASA,KAAKmO,OAAO7S,GAAG,KAAK0E,KAAKooC,QAAO,EAAGpoC,KAAK8nC,UAAU,EAAE9nC,KAAKioC,cAAc,GAAGjoC,KAAK0oC,SAAS,KAAK1oC,KAAKwoC,QAAQ,KAAKxoC,KAAKgpC,YAAY,KAAKhpC,KAAKipC,cAAc,KAAKjpC,KAAKkpC,WAAW,EAAElpC,KAAK89B,YAAY,IAAIvF,IAAG,CAAEhiB,EAAE0b,KAAKjyB,KAAK0oC,SAASnyB,EAAEvW,KAAKwoC,QAAQvW,CAAE,IAAGjyB,KAAK89B,YAAYjZ,MAAK,KAAM7kB,KAAKooC,QAAO,EAAGpoC,KAAKyoC,GAAGjmB,SAASod,MAAO,IAAGrpB,IAAI,IAAI0b,EAAEjyB,KAAKooC,OAAO,OAAOpoC,KAAKooC,QAAO,EAAGpoC,KAAKyoC,GAAGhyB,MAAMmpB,KAAKrpB,GAAGvW,KAAKmO,OAAOnO,KAAKmO,OAAOq6B,QAAQjyB,GAAG0b,GAAGjyB,KAAKs/B,UAAUt/B,KAAKs/B,SAASpnC,QAAQqkC,GAAGhmB,EAAG,GAAG,GAAE,CAAhqB,CAAkqBvW,MAAMA,KAAKgwC,QAAQ,SAASz5B,GAAG,OAAO4rB,GAAGkK,GAAGxzC,WAAU,SAAUo5B,GAAGjyB,KAAK0B,GAAG6U,EAAEvW,KAAKkrC,KAAK,CAAC9qB,QAAQ6R,EAAEua,aAAa,KAAKhB,SAAS,CAAC,EAAEzB,OAAO,CAAC,EAAEiC,eAAe,KAAM,GAAE,CAA9I,CAAgJhsC,MAAMA,KAAK6/B,YAAY,SAAStpB,GAAG,OAAO4rB,GAAGyD,GAAG/sC,WAAU,SAAUo5B,EAAEx5B,EAAE6vB,GAAGtoB,KAAK0B,GAAG6U,EAAEvW,KAAKikC,KAAK,CAAC1qC,MAAM04B,EAAEzQ,MAAM,QAAQ/oB,EAAE,KAAKA,EAAE6pC,GAAGha,GAAG,MAAMjE,EAAE9N,EAAE8pB,MAAM9f,UAAU,IAAI8D,EAAE,MAAM,IAAI6Q,GAAEb,WAAWr0B,KAAKmmC,KAAKnmC,KAAK8mC,WAAWziB,EAAEic,IAAIlkC,KAAKioB,GAAGrkB,KAAK+mC,YAAY,CAACxwB,EAAE0b,IAAI5N,EAAEic,IAAIrO,EAAE1b,GAAGvW,KAAKsnC,KAAK,CAAC/wB,EAAE0b,IAAI5N,EAAEic,IAAI/pB,EAAE0b,GAAG,EAAE1b,EAAE0b,EAAEjyB,KAAKqnC,KAAK,CAAC9wB,EAAE0b,IAAI5N,EAAEic,IAAI/pB,EAAE0b,GAAG,EAAE1b,EAAE0b,EAAEjyB,KAAKiwC,aAAa15B,EAAE8pB,MAAMpd,WAAY,GAAE,CAA5V,CAA8VjjB,MAAMA,KAAKyoC,GAAG,iBAAiBlyB,IAAIA,EAAE25B,WAAW,EAAEx3C,EAAQ+O,KAAK,iDAAiDzH,KAAKX,gDAAgD3G,EAAQ+O,KAAK,gDAAgDzH,KAAKX,uDAAuDW,KAAKsD,OAAQ,IAAGtD,KAAKyoC,GAAG,WAAWlyB,KAAKA,EAAE25B,YAAY35B,EAAE25B,WAAW35B,EAAE45B,WAAWz3C,EAAQ+O,KAAK,iBAAiBzH,KAAKX,sBAAsB3G,EAAQ+O,KAAK,YAAYzH,KAAKX,qDAAqDkX,EAAE45B,WAAW,KAAM,IAAGnwC,KAAKkgC,QAAQsJ,GAAGvX,EAAEhP,aAAajjB,KAAKw9B,mBAAmB,CAACjnB,EAAE0b,EAAEx5B,EAAE6vB,IAAI,IAAItoB,KAAK+qC,YAAYx0B,EAAE0b,EAAEx5B,EAAEuH,KAAKi+B,SAASsK,4BAA4BjgB,GAAGtoB,KAAKowC,eAAe75B,IAAIvW,KAAKyoC,GAAG,WAAW7I,KAAKrpB,GAAG+nB,GAAGtxB,QAAQuJ,GAAGA,EAAElX,OAAOW,KAAKX,MAAMkX,IAAIvW,OAAOuW,EAAEwiB,OAAOsX,UAAUtgC,KAAKkiB,GAAGA,EAAEwW,GAAG,iBAAiB7I,KAAKrpB,IAAG,EAAGvW,KAAKswC,IAAIzC,IAAI7tC,KAAKswC,IAAInC,IAAInuC,KAAKswC,IAAIjB,IAAIrvC,KAAKswC,IAAI9B,IAAIxuC,KAAK+vC,IAAIrxC,OAAOC,OAAOqB,KAAK,CAACu9B,KAAK,CAAC1+B,OAAM,KAAMypB,EAAEloB,SAASmW,GAAGA,EAAEvW,OAAO,CAACogB,QAAQ7J,GAAG,GAAG+N,MAAM/N,IAAIA,EAAE,GAAG,MAAM,IAAI2e,GAAEj6B,KAAK,0CAA0C,GAAGsb,EAAEtd,KAAKs3C,MAAM,GAAGh6B,GAAG,GAAGvW,KAAKo9B,OAAOp9B,KAAK+4B,OAAOiF,cAAc,MAAM,IAAI9I,GAAE6N,OAAO,4CAA4C/iC,KAAKuvC,MAAMt2C,KAAKue,IAAIxX,KAAKuvC,MAAMh5B,GAAG,MAAM0b,EAAEjyB,KAAKsrC,UAAU,IAAI7yC,EAAEw5B,EAAEjlB,QAAQilB,GAAGA,EAAEiZ,KAAK9qB,UAAU7J,IAAI,GAAG,OAAO9d,IAAIA,EAAE,IAAIuH,KAAKgwC,QAAQz5B,GAAG0b,EAAEv6B,KAAKe,GAAGw5B,EAAEoS,KAAK4G,IAAIxyC,EAAE8zC,OAAO,CAAC,GAAGvsC,KAAK+4B,OAAO8W,YAAW,EAAGp3C,EAAE,CAAC+3C,WAAWj6B,GAAG,OAAOvW,KAAKo9B,QAAQp9B,KAAK+4B,OAAOsE,cAAcjF,GAAGkF,YAAYt9B,KAAKu9B,MAAMhnB,IAAI,IAAIgiB,IAAG,CAAEhiB,EAAE0b,KAAK,GAAGjyB,KAAK+4B,OAAOsE,aAAa,OAAOpL,EAAE,IAAIiD,GAAEhB,eAAel0B,KAAK+4B,OAAOgF,cAAc,IAAI/9B,KAAK+4B,OAAOiF,cAAc,CAAC,IAAIh+B,KAAKi+B,SAASC,SAAS,YAAYjM,EAAE,IAAIiD,GAAEhB,gBAAgBl0B,KAAKoK,OAAO0a,MAAM2Q,GAAG,CAACz1B,KAAK+4B,OAAOoF,eAAetZ,KAAKtO,EAAE0b,EAAG,IAAGpN,KAAKtO,EAAE,CAAC+5B,KAAK7yB,MAAMlH,EAAE5X,OAAOszB,EAAE6b,MAAMr1C,EAAE4G,KAAKipB,IAAIA,GAAGtoB,KAAKywC,MAAM,CAAChzB,MAAMlH,EAAElX,KAAKipB,IAAI,MAAMjE,EAAErkB,KAAK6qC,aAAat0B,KAAKvW,KAAK6qC,aAAat0B,GAAG,IAAI,OAAO8N,EAAE3sB,KAAK,CAAC+lB,MAAMlH,EAAE5X,OAAOszB,EAAE6b,MAAM,MAAMr1C,EAAE,GAAGA,EAAE4G,KAAKipB,IAAIjE,EAAEggB,MAAK,CAAE9tB,EAAE0b,IAAI1b,EAAEu3B,MAAM7b,EAAE6b,QAAQ9tC,IAAI,CAACywC,OAAOhzB,MAAMlH,EAAElX,KAAK4yB,EAAEtzB,OAAOlG,IAAI,OAAO8d,GAAGvW,KAAK6qC,aAAat0B,KAAKvW,KAAK6qC,aAAat0B,GAAGvW,KAAK6qC,aAAat0B,GAAGvJ,QAAQuJ,GAAG9d,EAAE8d,EAAE5X,SAASlG,IAAIw5B,GAAG1b,EAAElX,OAAO4yB,KAAKjyB,IAAI,CAACoK,OAAO,OAAnhiB,SAAYmM,GAAG,MAAM9d,EAAE8d,EAAEwiB,QAAQxY,UAAU+H,GAAG/R,EAAE8pB,MAAM,GAAG5nC,EAAEulC,eAAeznB,EAAE6mB,MAAM,OAAO3kC,EAAE0lC,eAAetZ,MAAK,IAAKpsB,EAAEslC,YAAYxB,GAAG9jC,EAAEslC,aAAaxnB,IAAIid,IAAI/6B,EAAEm3C,cAAchX,aAAahF,KAAKn7B,EAAEulC,eAAc,EAAGvlC,EAAEslC,YAAY,KAAKtlC,EAAE4kC,cAAa,EAAG,MAAMhZ,EAAE5rB,EAAEm3C,cAAc,SAASt0C,IAAI,GAAG7C,EAAEm3C,gBAAgBvrB,EAAE,MAAM,IAAI6Q,GAAEhB,eAAe,0BAA0B,CAAC,IAAIn2B,EAAEtF,EAAEi3C,eAAe54B,EAAE,KAAKub,GAAE,EAAG,OAAOkG,GAAGuC,KAAK,CAACzW,GAAG,oBAAoBma,UAAUjG,GAAGxyB,UAAUonC,MAAMtoB,MAAK,IAAK,IAAI0T,IAAG,CAAElU,EAAEtmB,KAAK,GAAGzC,KAAKgtB,EAAE,MAAM,IAAI4M,GAAEb,WAAW,MAAMlL,EAAE5S,EAAElX,KAAK8V,EAAE1c,EAAEo3C,WAAWvnB,EAAEle,KAAK+e,GAAGb,EAAEle,KAAK+e,EAAElwB,KAAKs3C,MAAM,GAAGh6B,EAAEg5B,QAAQ,IAAIp6B,EAAE,MAAM,IAAI+f,GAAEb,WAAWlf,EAAEqL,QAAQgnB,GAAGzpC,GAAGoX,EAAEu7B,UAAUnW,GAAGhkB,EAAE65B,gBAAgBj7B,EAAEuL,gBAAgB6Z,IAAItI,IAAI,GAAGnb,EAAE3B,EAAE6L,YAAYvoB,EAAEo3C,aAAat5B,EAAE0nB,SAAS0S,aAAa,CAACx7B,EAAEqL,QAAQinB,GAAG3wB,EAAE5e,QAAQid,EAAEtG,OAAOvL,QAAQ,MAAMiT,EAAE+R,EAAEzG,eAAesH,GAAG5S,EAAEkK,UAAUlK,EAAEiK,QAAQ+Z,IAAG,KAAMx8B,EAAE,IAAIm3B,GAAE0b,eAAe,YAAYznB,kBAAmB,GAAE,KAAK,CAACrS,EAAE0J,QAAQgnB,GAAGzpC,GAAG,IAAIsmB,EAAE4N,EAAEke,WAAWl3C,KAAKqhB,IAAI,EAAE,IAAI,EAAE2X,EAAEke,WAAW9d,EAAEhO,EAAE,EAAE9N,EAAEo0B,OAAOvN,MAAMjoB,EAAEtG,OAAOs8B,GAAG50B,EAAE8N,EAAE,GAAGvN,EAAE/Y,EAAE,CAAE,GAAEA,GAAGoX,EAAEsL,UAAU8Z,IAAG,KAAMzjB,EAAE,KAAK,MAAMwR,EAAE/R,EAAEo0B,OAAOvN,MAAMjoB,EAAEtG,OAAOvT,EAAEC,EAAE+sB,EAAE1H,kBAAkB,GAAGtlB,EAAErE,OAAO,EAAE,IAAI,MAAMotB,EAAEiE,EAAEtH,YAAY,KAAKjjB,EAAEzC,GAAGrE,OAAO8G,EAAE,GAAGA,EAAE,YAAYtF,EAAEo3C,WAAW,UAAUlF,OAAOp0B,GAAG9d,EAAE6vB,GAAG/R,EAAEg5B,MAAM92C,EAAE2nB,QAAQ,GAAG,MAAMiE,EAAE9N,EAAEknB,UAAU8N,GAAG,EAAE9yC,EAAE6vB,GAAG/R,EAAE60B,YAAY7vC,EAAE9C,EAAEmoB,iBAAiB,GAAGkqB,GAAGv0B,EAAE,CAACA,EAAEk2B,YAAYxa,EAAE5N,GAAGA,EAAE,CAA7I,CAA+I9N,EAAE+R,EAAEjE,IAAIonB,GAAGl1B,EAAEA,EAAEknB,UAAUpZ,GAAG,SAAS9N,EAAE0b,GAAG,MAAMx5B,EAAEizC,GAAGH,GAAG,EAAEh1B,EAAE6mB,MAAMnL,GAAG1b,EAAEknB,WAAW,QAAQhlC,EAAEqU,IAAI7V,QAAQwB,EAAEkzC,OAAOzR,MAAM3jB,GAAGA,EAAEzJ,IAAI7V,QAAQsf,EAAEo1B,OAAO10C,SAAS,CAA9H,CAAgIsf,EAAE8N,IAAI3rB,EAAQ+O,KAAK,uHAAuHijC,GAAGn0B,EAAE8N,EAAE,CAAC,MAAM9N,GAAG,CAAC,IAAIxY,EAAEugC,GAAG5mC,KAAK6e,GAAG+R,EAAEuoB,gBAAgBtW,IAAItI,IAAIx5B,EAAE43C,SAAQ,EAAG95B,EAAEkyB,GAAG,iBAAiB7I,KAAK3N,EAAG,IAAG3J,EAAEwoB,QAAQvW,IAAItI,IAAI1b,EAAEkyB,GAAG,SAAS7I,KAAK3N,EAAG,IAAGI,GAAG,UAAU9R,UAAUhK,EAAE0M,YAAYgP,GAAGx5B,IAAIu0C,GAAGz2B,IAAI,cAAc9d,GAAGk0C,GAAGp2B,EAAE0b,GAAGnwB,IAAI,CAACzC,KAAK5G,IAAIqsB,MAAM2Q,GAAG,CAAhG,CAAkGlf,EAAE8pB,MAAMlX,GAAG9E,GAAI,GAAEtmB,EAAG,QAAO8mB,MAAK,KAAMvpB,IAAI7C,EAAEg3C,kBAAkB,GAAGlX,GAAGxyB,QAAQmnC,IAAG,IAAK32B,EAAEkyB,GAAGqH,MAAMlQ,KAAKrpB,EAAEw5B,QAAQlrB,MAAK,SAAUoN,IAAI,GAAGx5B,EAAEg3C,kBAAkBx4C,OAAO,EAAE,CAAC,IAAIqxB,EAAE7vB,EAAEg3C,kBAAkB/oB,OAAOuP,GAAGR,IAAI,OAAOh9B,EAAEg3C,kBAAkB,GAAGlX,GAAGxyB,QAAQmnC,IAAG,IAAK5kB,EAAE/R,EAAEw5B,QAAQlrB,KAAKoN,EAAE,CAAE,OAAMwI,SAAQ,KAAMhiC,EAAEg3C,kBAAkB,KAAKh3C,EAAEulC,eAAc,CAAG,IAAGnZ,MAAK,IAAKtO,IAAIuO,OAAOmN,IAAIx5B,EAAEslC,YAAY9L,EAAE,IAAInb,GAAGA,EAAE5e,OAAO,CAAC,MAAMqe,GAAG,CAAC,OAAO8N,IAAI5rB,EAAEm3C,eAAer5B,EAAE9S,SAAS84B,GAAGtK,EAAG,IAAGwI,SAAQ,KAAMhiC,EAAE4kC,cAAa,EAAGt/B,GAAI,GAAE,CAAqsdgzC,CAAG/wC,KAAK,CAACyD,SAAS,MAAM8S,EAAEvW,KAAK+4B,OAAO9G,EAAEqM,GAAG/+B,QAAQS,MAAM,GAAGiyB,GAAG,GAAGqM,GAAGlc,OAAO6P,EAAE,GAAGjyB,KAAKo9B,MAAM,CAAC,IAAIp9B,KAAKo9B,MAAM95B,OAAO,CAAC,MAAMiT,GAAG,CAACvW,KAAK2qC,OAAOvN,MAAM,IAAI,CAAC7mB,EAAE4nB,eAAe,IAAI5F,IAAItG,IAAI1b,EAAEm5B,eAAezd,CAAE,IAAG1b,EAAEq5B,cAAc,IAAIrX,IAAG,CAAEtG,EAAEx5B,KAAK8d,EAAEo5B,WAAWl3C,CAAE,GAAE,CAAC6K,QAAQtD,KAAKyD,SAAS,MAAM8S,EAAEvW,KAAK+4B,OAAO/4B,KAAKi+B,SAASC,UAAS,EAAG3nB,EAAEwnB,YAAY,IAAI7I,GAAEhB,eAAe3d,EAAEynB,eAAeznB,EAAEo5B,WAAWp5B,EAAEwnB,YAAY,CAAChxB,SAAS,MAAMwJ,EAAEvd,UAAU/B,OAAO,EAAEg7B,EAAEjyB,KAAK+4B,OAAO,OAAO,IAAIR,IAAG,CAAE9/B,EAAE6vB,KAAK,MAAMjE,EAAE,KAAKrkB,KAAKsD,QAAQ,IAAIiT,EAAEvW,KAAKqgC,MAAM9f,UAAUsB,eAAe7hB,KAAKX,MAAMkX,EAAEkK,UAAU8Z,IAAG,MAAO,UAAUha,UAAUhK,EAAE0M,YAAYgP,GAAGx5B,IAAIu0C,GAAGz2B,IAAI,cAAc9d,GAAGk0C,GAAGp2B,EAAE0b,GAAGllB,OAAOtU,GAAGqsB,MAAM2Q,GAAG,CAA5F,CAA8Fz1B,KAAKqgC,MAAMrgC,KAAKX,MAAM5G,GAAI,IAAG8d,EAAEiK,QAAQgnB,GAAGlf,GAAG/R,EAAEm6B,UAAU1wC,KAAKowC,gBAAgB,GAAG75B,EAAE,MAAM,IAAI2e,GAAEsM,gBAAgB,wCAAwCvP,EAAE+L,cAAc/L,EAAEkM,eAAetZ,KAAKR,GAAGA,GAAI,GAAE,CAAC2sB,YAAY,OAAOhxC,KAAKo9B,KAAK,CAACQ,SAAS,OAAO,OAAO59B,KAAKo9B,KAAK,CAAC6T,gBAAgB,MAAM16B,EAAEvW,KAAK+4B,OAAOgF,YAAY,OAAOxnB,GAAG,mBAAmBA,EAAElX,IAAI,CAAC6xC,YAAY,OAAO,OAAOlxC,KAAK+4B,OAAOgF,WAAW,CAACoT,oBAAoB,OAAOnxC,KAAK+4B,OAAO8W,UAAU,CAAK9F,aAAS,OAAO9X,EAAEjyB,KAAKysC,YAAY18B,KAAKwG,GAAGvW,KAAKysC,WAAWl2B,IAAI,CAACyK,cAAc,MAAMzK,EAAEk3B,GAAGp2C,MAAM2I,KAAKhH,WAAW,OAAOgH,KAAKoxC,aAAa/5C,MAAM2I,KAAKuW,EAAE,CAAC66B,aAAa76B,EAAE0b,EAAEx5B,GAAG,IAAI6vB,EAAE8P,GAAGyF,MAAMvV,GAAGA,EAAE5mB,KAAK1B,OAAO,IAAIuW,EAAEhX,QAAQ,OAAO+oB,EAAE,MAAM,MAAMjE,GAAG,IAAI9N,EAAEhX,QAAQ,KAAK,IAAIjE,EAAEyC,EAAEwY,EAAEA,EAAE9V,QAAQ,IAAI,IAAIA,QAAQ,IAAI,IAAI,IAAI,GAAG1C,EAAEk0B,EAAEliB,KAAKwG,IAAI,IAAI0b,EAAE1b,aAAavW,KAAKopC,MAAM7yB,EAAElX,KAAKkX,EAAE,GAAG,iBAAiB0b,EAAE,MAAM,IAAItwB,UAAU,mFAAmF,OAAOswB,CAAE,IAAG,KAAK1b,GAAG,aAAaA,EAAEjb,EAAE,eAAe,CAAC,GAAG,MAAMib,GAAG,aAAaA,EAAE,MAAM,IAAI2e,GAAEsM,gBAAgB,6BAA6BjrB,GAAGjb,EAAE,WAAW,CAAC,GAAGgtB,EAAE,CAAC,GAAG,aAAaA,EAAEvH,MAAM,cAAczlB,EAAE,CAAC,IAAI+oB,EAAE,MAAM,IAAI6Q,GAAEmc,eAAe,0FAA0F/oB,EAAE,IAAI,CAACA,GAAGvqB,EAAEqC,SAASmW,IAAI,GAAG+R,IAAI,IAAIA,EAAE+f,WAAW9oC,QAAQgX,GAAG,CAAC,IAAI8N,EAAE,MAAM,IAAI6Q,GAAEmc,eAAe,SAAS96B,EAAE,wCAAwC+R,EAAE,IAAI,CAAE,IAAGjE,GAAGiE,IAAIA,EAAE8f,SAAS9f,EAAE,KAAK,CAAC,CAAC,MAAM/R,GAAG,OAAO+R,EAAEA,EAAE2R,SAAS,MAAK,CAAEhI,EAAEx5B,KAAKA,EAAE8d,EAAG,IAAGgmB,GAAGhmB,EAAE,CAAC,MAAMO,EAAE42B,GAAGtxC,KAAK,KAAK4D,KAAK1E,EAAEyC,EAAEuqB,EAAE7vB,GAAG,OAAO6vB,EAAEA,EAAE2R,SAAS3+B,EAAEwb,EAAE,QAAQshB,GAAGyF,MAAMzC,GAAGhD,GAAGmH,WAAU,IAAKv/B,KAAKwwC,WAAW15B,KAAK9W,KAAKwwC,WAAW15B,EAAE,CAACvd,MAAMgd,GAAG,IAAIxY,EAAEiC,KAAKysC,WAAWl2B,GAAG,MAAM,IAAI2e,GAAEoc,aAAa,SAAS/6B,oBAAoB,OAAOvW,KAAKysC,WAAWl2B,EAAE,EAAE,MAAMg7B,GAAG,oBAAoB/6C,QAAQ,eAAeA,OAAOA,OAAOg7C,WAAW,eAAe,MAAMC,GAAG3xC,YAAYyW,GAAGvW,KAAK0xC,WAAWn7B,CAAC,CAACyrB,UAAUzrB,EAAE0b,EAAEx5B,GAAG,OAAOuH,KAAK0xC,WAAWn7B,GAAG,mBAAmBA,EAAEA,EAAE,CAAC5Q,KAAK4Q,EAAEE,MAAMwb,EAAEzP,SAAS/pB,GAAG,CAAC,CAAC84C,MAAM,OAAOvxC,IAAI,EAAE,SAAS2xC,GAAGp7B,EAAE9d,GAAG,OAAOw5B,EAAEx5B,GAAG2H,SAAS6xB,IAAI8c,GAAGx4B,EAAE0b,KAAK1b,EAAE0b,GAAG,IAAI0c,IAAIl2C,EAAEw5B,GAAI,IAAG1b,CAAC,CAA8mB,IAAIq7B,GAAG,IAAIA,GAAG,CAACrxB,UAAUhK,EAAEgK,WAAWhK,EAAEs7B,cAAct7B,EAAEu7B,iBAAiBv7B,EAAEw7B,YAAY9uB,YAAY1M,EAAE0M,aAAa1M,EAAEy7B,kBAAkB,CAAC,MAAMz7B,GAAGq7B,GAAG,CAACrxB,UAAU,KAAK0C,YAAY,KAAK,CAAC,MAAMgvB,GAAGpF,GAAG,SAASqF,GAAG37B,GAAG,IAAI0b,EAAEkgB,GAAG,IAAIA,IAAG,EAAGxK,GAAGgB,eAAe/I,KAAKrpB,EAAE,CAAC,QAAQ47B,GAAGlgB,CAAC,CAAC,CAACnb,EAAEm7B,GAAG,IAAIzc,GAAEzoB,OAAOwJ,GAAG,IAAI07B,GAAG17B,EAAE,CAACu2B,OAAO,KAAK//B,SAASqlC,OAAO77B,GAAG,IAAI07B,GAAG17B,EAAE,CAACu2B,OAAO,KAAK1iC,OAAOya,MAAMtO,IAAIA,EAAEjT,SAAQ,KAAMwhB,MAAM,uBAAsB,KAAK,IAAKutB,iBAAiB97B,GAAG,IAAI,OAAO,UAAUgK,UAAUhK,EAAE0M,YAAYgP,IAAI,OAAO+a,GAAGz2B,GAAGzQ,QAAQC,QAAQwQ,EAAE02B,aAAapoB,MAAMtO,GAAGA,EAAExG,KAAKwG,GAAGA,EAAElX,OAAO2N,QAAQuJ,GAAG,cAAcA,MAAMo2B,GAAGp2B,EAAE0b,GAAGuO,eAAesE,aAAa,CAAjL,CAAmLmN,GAAGzC,cAAc3qB,KAAKtO,EAAE,CAAC,MAAMA,GAAG,OAAOgmB,GAAG,IAAIrH,GAAEb,WAAW,CAAC,EAAE4M,YAAY,IAAI,SAAS1qB,GAAG+R,EAAEtoB,KAAKuW,EAAE,EAAE+7B,kBAAkB/7B,GAAG6hB,GAAGyF,MAAMzC,GAAGhD,GAAGmH,UAAUhpB,GAAGA,IAAIw5B,IAAI7C,GAAGjvC,MAAM,SAASsY,GAAG,OAAO,WAAW,IAAI,IAAI0b,EAAEsb,GAAGh3B,EAAElf,MAAM2I,KAAKhH,YAAY,OAAOi5B,GAAG,mBAAmBA,EAAEpN,KAAKoN,EAAEsG,GAAGxyB,QAAQksB,EAAE,CAAC,MAAM1b,GAAG,OAAOgmB,GAAGhmB,EAAE,CAAC,CAAC,EAAEg8B,MAAM,SAASh8B,EAAE0b,EAAEx5B,GAAG,IAAI,IAAI6vB,EAAEilB,GAAGh3B,EAAElf,MAAMoB,EAAEw5B,GAAG,KAAK,OAAO3J,GAAG,mBAAmBA,EAAEzD,KAAKyD,EAAEiQ,GAAGxyB,QAAQuiB,EAAE,CAAC,MAAM/R,GAAG,OAAOgmB,GAAGhmB,EAAE,CAAC,EAAEi8B,mBAAmB,CAAC7xC,IAAI,IAAIy3B,GAAGyF,OAAO,MAAMkL,QAAQ,SAASxyB,EAAE0b,GAAG,MAAMx5B,EAAE8/B,GAAGxyB,QAAQ,mBAAmBwQ,EAAE07B,GAAGK,kBAAkB/7B,GAAGA,GAAGmkB,QAAQzI,GAAG,KAAK,OAAOmG,GAAGyF,MAAMzF,GAAGyF,MAAMkL,QAAQtwC,GAAGA,CAAC,EAAEqN,QAAQyyB,GAAGka,MAAM,CAAC9xC,IAAI,IAAI6yB,EAAE33B,IAAI0a,IAAIgT,EAAEhT,EAAE,UAAUA,EAAE,KAAI,EAAGooB,GAAE,GAAI+T,OAAOv9B,EAAEmd,OAAOhK,EAAEqqB,MAAM77B,EAAE87B,SAAS77B,EAAE87B,OAAO9Q,GAAG0G,GAAGd,GAAGmL,UAAl9D,SAAYv8B,GAAG,OAAO,IAAIk7B,IAAIh5C,IAAI,MAAM6vB,EAAEgL,EAAE/c,GAAG,IAAI8N,GAAE,EAAG/oB,EAAE,CAAC,EAAEyC,EAAE,CAAC,EAAE,MAAM+Y,EAAE,CAAKxM,aAAS,OAAO+Z,CAAC,EAAE2c,YAAY,KAAK3c,GAAE,EAAGsjB,GAAGgB,eAAe3H,YAAYzO,EAAC,GAAI95B,EAAEkX,OAAOlX,EAAEkX,MAAMmH,GAAG,IAAIub,GAAE,EAAGlJ,GAAE,EAAG,SAAShU,IAAI,OAAO8c,EAAEl0B,GAAGm8B,MAAM3jB,GAAGjb,EAAEib,IAAtjW,SAAYA,EAAE0b,GAAG,MAAMx5B,EAAEu2C,GAAG/c,GAAG,IAAI3J,EAAE7vB,EAAEkN,OAAO,GAAG2iB,EAAE+B,KAAK,OAAM,EAAG,IAAIhG,EAAEiE,EAAEzpB,MAAM,MAAMvD,EAAE0zC,GAAGz4B,GAAG,IAAIxY,EAAEzC,EAAEqK,KAAK0e,EAAE/U,MAAMwH,EAAE/Y,EAAEc,MAAM,MAAMypB,EAAE+B,OAAOtsB,EAAEssB,MAAM,CAAC,GAAGsZ,GAAG7sB,EAAExH,KAAK+U,EAAEuqB,KAAK,GAAGjL,GAAG7sB,EAAE83B,GAAGvqB,EAAE/U,OAAO,EAAE,OAAM,EAAGq0B,GAAGtf,EAAE/U,KAAKwH,EAAExH,MAAM,EAAE+U,GAAGiE,EAAE7vB,EAAEkN,KAAKmR,EAAExH,OAAOzQ,MAAMiY,GAAG/Y,EAAEzC,EAAEqK,KAAK0e,EAAE/U,OAAOzQ,KAAK,CAAC,OAAM,CAAE,CAAiyVk0C,CAAGz3C,EAAEib,GAAGxY,EAAEwY,KAAK,CAAC,MAAMgc,EAAEhc,IAAIo7B,GAAGr2C,EAAEib,GAAGpB,KAAKqd,GAAE,EAAGA,EAAE,KAAK,GAAGH,GAAGhO,EAAE,OAAO/oB,EAAE,CAAC,EAAE,MAAM22B,EAAE,CAAC,EAAEQ,EAAE,SAASR,GAAG3J,GAAGgU,KAAK,MAAM7jC,EAAE,IAAIyiC,GAAG3kB,EAAE,CAAC+4B,OAAOrd,EAAE4L,MAAM,OAAOxZ,EAAE+T,GAAGyF,MAAMzC,GAAGhD,GAAGmH,UAAU9mC,GAAGA,IAAI,OAAO6vB,GAAGjE,EAAEQ,KAAKwU,GAAGA,IAAIhV,CAAC,CAAvH,CAAyH4N,GAAG9I,IAAIwe,GAAG,iBAAiBpV,GAAGpJ,GAAE,GAAIkJ,GAAE,EAAGvsB,QAAQC,QAAQ0sB,GAAG5N,MAAMtO,IAAI8b,GAAE,EAAGhO,IAAIlP,IAAIqd,KAAKl3B,EAAE,CAAC,EAAEyC,EAAEk0B,EAAEx5B,EAAEkN,MAAMlN,EAAEkN,KAAK4Q,IAAK,IAAGA,IAAI8b,GAAE,EAAG55B,EAAEge,OAAOhe,EAAEge,MAAMF,GAAGO,EAAEkqB,aAAc,GAAC,EAAG,OAAOxO,IAAI1b,CAAE,GAAE,EAAm3Ck8B,uBAAuBrB,GAAGsB,aAAalhC,EAAEmhC,aAAa/yB,EAAEgzB,aAAa,SAAS58B,EAAE0b,GAAG,iBAAiBA,EAAE9R,EAAE5J,EAAE0b,OAAE,GAAQ,WAAWA,GAAG,GAAGliB,IAAIhX,KAAKk5B,GAAE,SAAUA,GAAG9R,EAAE5J,EAAE0b,OAAE,EAAQ,GAAE,EAAEmhB,aAAaxgB,EAAEygB,UAAUtgB,EAAEugB,cAAcpF,GAAG5N,IAAIqD,GAAG4P,KAAKzqB,EAAE0qB,QAAQ,IAAM1G,OAAO,GAAG2G,YAAYnV,GAAGoV,SAAS1e,EAAEwa,aAAaoC,GAAG+B,OAAO,QAAQvzB,QAAQ,QAAQnhB,MAAM,KAAK8Q,KAAKwG,GAAG9B,SAAS8B,KAAKmQ,QAAO,CAAEnQ,EAAE0b,EAAEx5B,IAAI8d,EAAE0b,EAAEh5B,KAAKqhB,IAAI,GAAG,EAAE7hB,OAAOw5C,GAAG2B,OAAOpK,GAAGyI,GAAGzC,aAAavsB,aAAa,oBAAoB8Z,eAAe,oBAAoB1d,mBAAmBsoB,GAAG,kBAAkBpxB,IAAI,IAAI47B,GAAG,CAAC,IAAIlgB,EAAEsM,IAAItM,EAAEiF,SAASyF,YAAY,eAAe1K,EAAE4hB,gBAAgB,sBAAqB,GAAG,EAAGt9B,IAAI0b,EAAE,IAAI4K,YAAY,qBAAqB,CAACC,OAAOvmB,IAAI47B,IAAG,EAAGpV,cAAc9K,GAAGkgB,IAAG,CAAE,CAAE,IAAG9yB,iBAAiB,sBAAqB,EAAGyd,OAAOvmB,MAAM47B,IAAID,GAAG37B,EAAG,KAAI,IAAI47B,IAAG,EAAG,GAAG,oBAAoB2B,iBAAiB,CAAC,MAAMv9B,EAAE,IAAIu9B,iBAAiB,sBAAsB,mBAAmBv9B,EAAEw9B,OAAOx9B,EAAEw9B,QAAQpM,GAAG,kBAAkB1V,IAAIkgB,IAAI57B,EAAE6Q,YAAY6K,EAAG,IAAG1b,EAAEy9B,UAAUz9B,IAAIA,EAAEnE,MAAM8/B,GAAG37B,EAAEnE,KAAI,CAAE,MAAM,GAAG,oBAAoBiX,MAAM,oBAAoBmV,UAAU,CAACmJ,GAAG,kBAAkBpxB,IAAI,IAAI47B,KAAK,oBAAoB8B,cAAcA,aAAaC,QAAQ,qBAAqB7nB,KAAK8T,UAAU,CAACgU,KAAKl7C,KAAKgwB,SAASmrB,aAAa79B,KAAK,iBAAiB8S,KAAKgrB,SAAS,IAAIhrB,KAAKgrB,QAAQC,SAAS,CAACC,qBAAoB,KAAMn0C,SAAS6xB,GAAGA,EAAE7K,YAAY,CAACrkB,KAAK,qBAAqBqxC,aAAa79B,MAAM,CAAC,MAAMA,GAAG,CAAE,IAAG,oBAAoB8I,kBAAkBA,iBAAiB,WAAW9I,IAAI,GAAG,uBAAuBA,EAAExU,IAAI,CAAC,MAAMkwB,EAAE5F,KAAKjJ,MAAM7M,EAAEi+B,UAAUviB,GAAGigB,GAAGjgB,EAAEmiB,aAAa,CAAE,IAAG,MAAM79B,EAAE8S,KAAK6N,UAAUsH,UAAUiW,cAAcl+B,GAAGA,EAAE8I,iBAAiB,WAAU,UAAWjN,KAAKmE,IAAIA,GAAG,uBAAuBA,EAAExT,MAAMmvC,GAAG37B,EAAE69B,aAAc,GAAE,CAAC7b,GAAG+C,gBAAgB,SAAS/kB,EAAE0b,GAAG,IAAI1b,GAAGA,aAAa+d,GAAG/d,aAAa5U,WAAW4U,aAAa8e,cAAc9e,EAAElX,OAAOk2B,GAAEhf,EAAElX,MAAM,OAAOkX,EAAE,IAAI9d,EAAE,IAAI88B,GAAEhf,EAAElX,MAAM4yB,GAAG1b,EAAEmH,QAAQnH,GAAG,MAAM,UAAUA,GAAG4S,EAAE1wB,EAAE,QAAQ,CAACkI,IAAI,WAAW,OAAOX,KAAKm1B,MAAM1X,KAAK,IAAIhlB,CAAC,EAAE8wB,EAAEiK,EAAEmL,uBCA14yElgC,EAAOnF,QAAQ,SAAS24B,EAAEx5B,EAAE8d,EAAEjb,EAAEyC,GAAG,IAAItF,EAAEA,EAAEwG,MAAMxG,EAAEwG,MAAM,KAAKxG,EAAE6C,EAAE,EAAEA,EAAE7C,EAAExB,OAAOqE,IAAI22B,EAAEA,EAAEA,EAAEx5B,EAAE6C,IAAIyC,EAAE,OAAOk0B,IAAIl0B,EAAEwY,EAAE0b,CAAC,sCCErL,MAAMyiB,EAAmB,EAAQ,MACjCp7C,EAAQ,GAAgBo7C,EAAiBC,cAQvBD,EAAiBC,8CCTnCl2C,EAAOnF,QAAU,SAAyBs7C,GACxC,IAAIC,EAAMD,EAAKC,IACbx1C,EAAOu1C,EAAKv1C,KACZ0D,EAAO6xC,EAAK7xC,KACd/C,KAAK60C,IAAMA,EACX70C,KAAKX,KAAOA,EACZW,KAAK+C,KAAOA,CACd,sCCPA,IAAI+xC,EAA2B,EAAQ,OAEvCr2C,EAAOnF,QAAU,SAASy7C,EAAal2C,EAAOynB,EAAM0uB,GASlD,IAAI5nB,OARS,IAAT9G,IACFA,EAAO,SAGiB,IAAtB0uB,IACFA,EAAoBF,GAItB,IAAIG,EAAQ,IAAIzlC,IAEhB,SAAS0lC,EAAQC,EAAO/8C,GACtB,IAAIg9C,EAAcH,EAAMt0C,IAAIvI,GACxBg9C,EAAaA,EAAY19C,KAAKL,MAAM+9C,EAAaD,GAChDF,EAAMp5C,IAAIzD,EAAM+8C,EACvB,CAEA,GAAIH,EAAkBn2C,GACpBuuB,EAAQ,KACR8nB,EAAQ,CAAC5uB,GAAOznB,OACX,CACL,IAAI0P,EAAS+X,EAAOA,EAAO,IAAM,GACjC,GAAwB,oBAAb+uB,UAA4Bx2C,aAAiBw2C,SACtDjoB,EAAQx0B,MAAMC,UAAUkX,IAAIhX,KAAK8F,GAAO,SAAUzG,EAAMkD,GAEtD,OADA45C,EAAQ,CAAC,GAAK3mC,EAASjT,GAAIlD,GACpB,IACT,SACG,GAAIQ,MAAM+S,QAAQ9M,GACrBuuB,EAAQvuB,EAAMkR,KAAI,SAAUulC,EAAOh6C,GACjC,IAAIuT,EAASkmC,EAAaO,EAAO,GAAK/mC,EAASjT,EAAG05C,GAElD,OADAnmC,EAAOomC,MAAM70C,QAAQ80C,GACdrmC,EAAOue,KAChB,SACG,GAAIvuB,GAASA,EAAMiB,cAAgBpB,OAGtC,IAAK,IAAIpD,KAFT8xB,EAAQ,CAAC,EAEKvuB,EAAO,CACnB,IAAIgQ,EAASkmC,EAAal2C,EAAMvD,GAAI,GAAKiT,EAASjT,EAAG05C,GACrDnmC,EAAOomC,MAAM70C,QAAQ80C,GACrB9nB,EAAM9xB,GAAKuT,EAAOue,KACpB,MACKA,EAAQvuB,CACjB,CAEA,MAAO,CACLuuB,MAAOA,EACP6nB,MAAOA,EAEX,sCCnDA,IAAIM,EAAkB,EAAQ,OAE9B92C,EAAOnF,QAAU,SAA2BuF,GAC1C,MACmB,oBAAT22C,MAAwB32C,aAAiB22C,MAChC,oBAAT1rB,MAAwBjrB,aAAiBirB,MACjDjrB,aAAiB02C,CAErB,oBCVA92C,EAAOnF,QAAU,MACfwG,YAAa21C,GACX,KAAMA,EAAM,IAA4B,IAApBA,EAAM,EAAKA,GAAY,MAAM,IAAIl9C,MAAM,qDAC3DyH,KAAKrJ,OAAS,IAAIiC,MAAM68C,GACxBz1C,KAAK01C,KAAOD,EAAM,EAClBz1C,KAAK21C,IAAM,EACX31C,KAAK41C,IAAM,EACX51C,KAAK2F,KAAO,IACd,CAEAjO,KAAM0a,GACJ,YAA8BvM,IAA1B7F,KAAKrJ,OAAOqJ,KAAK21C,OACrB31C,KAAKrJ,OAAOqJ,KAAK21C,KAAOvjC,EACxBpS,KAAK21C,IAAO31C,KAAK21C,IAAM,EAAK31C,KAAK01C,MAC1B,EACT,CAEAt2C,QACE,MAAM5H,EAAOwI,KAAKrJ,OAAOqJ,KAAK41C,KAC9B,QAAa/vC,IAATrO,EAGJ,OAFAwI,KAAKrJ,OAAOqJ,KAAK41C,UAAO/vC,EACxB7F,KAAK41C,IAAO51C,KAAK41C,IAAM,EAAK51C,KAAK01C,KAC1Bl+C,CACT,CAEA64B,OACE,OAAOrwB,KAAKrJ,OAAOqJ,KAAK41C,IAC1B,CAEArkB,UACE,YAAiC1rB,IAA1B7F,KAAKrJ,OAAOqJ,KAAK41C,IAC1B,0BC/BF,MAAMC,EAAY,EAAQ,MAE1Bp3C,EAAOnF,QAAU,MACfwG,YAAa21C,GACXz1C,KAAKy1C,IAAMA,GAAO,GAClBz1C,KAAK2wB,KAAO,IAAIklB,EAAU71C,KAAKy1C,KAC/Bz1C,KAAK6wB,KAAO7wB,KAAK2wB,IACnB,CAEAj5B,KAAM+b,GACJ,IAAKzT,KAAK2wB,KAAKj5B,KAAK+b,GAAM,CACxB,MAAMqiC,EAAO91C,KAAK2wB,KAClB3wB,KAAK2wB,KAAOmlB,EAAKnwC,KAAO,IAAIkwC,EAAU,EAAI71C,KAAK2wB,KAAKh6B,OAAOM,QAC3D+I,KAAK2wB,KAAKj5B,KAAK+b,EACjB,CACF,CAEArU,QACE,MAAMqU,EAAMzT,KAAK6wB,KAAKzxB,QACtB,QAAYyG,IAAR4N,GAAqBzT,KAAK6wB,KAAKlrB,KAAM,CACvC,MAAMA,EAAO3F,KAAK6wB,KAAKlrB,KAGvB,OAFA3F,KAAK6wB,KAAKlrB,KAAO,KACjB3F,KAAK6wB,KAAOlrB,EACL3F,KAAK6wB,KAAKzxB,OACnB,CACA,OAAOqU,CACT,CAEA4c,OACE,OAAOrwB,KAAK6wB,KAAKR,MACnB,CAEAkB,UACE,OAAOvxB,KAAK2wB,KAAKY,SACnB,uCChCF,MAAMwkB,EAAY,EAAQ,OACpBC,EAAY,EAAQ,OACpBC,EAAa,EAAQ,OAE3Bx3C,EAAOnF,QAAU,CACf08C,UAAWA,EACXE,aAAcH,EACdE,WAAYA,qCCPd,MAAME,EAAgB,gLAEhBC,EAAa,IAAMD,EAAgB,MADxBA,EAAgB,gDAC0B,KACrDE,EAAY,IAAIjwB,OAAO,IAAMgwB,EAAa,KAuBhD98C,EAAQg9C,QAAU,SAASxtB,GACzB,YAAoB,IAANA,CAChB,EAEAxvB,EAAQi9C,cAAgB,SAASvkC,GAC/B,OAAmC,IAA5BtT,OAAOyI,KAAK6K,GAAK/a,MAC1B,EAOAqC,EAAQk9C,MAAQ,SAAS5vC,EAAQkQ,EAAG2/B,GAClC,GAAI3/B,EAAG,CACL,MAAM3P,EAAOzI,OAAOyI,KAAK2P,GACnB9a,EAAMmL,EAAKlQ,OACjB,IAAK,IAAIqE,EAAI,EAAGA,EAAIU,EAAKV,IAErBsL,EAAOO,EAAK7L,IADI,WAAdm7C,EACgB,CAAE3/B,EAAE3P,EAAK7L,KAETwb,EAAE3P,EAAK7L,GAG/B,CACF,EAKAhC,EAAQo9C,SAAW,SAAS5tB,GAC1B,OAAIxvB,EAAQg9C,QAAQxtB,GACXA,EAEA,EAEX,EAKAxvB,EAAQq9C,OA9CO,SAAS1lC,GACtB,MAAMm5B,EAAQiM,EAAU5xB,KAAKxT,GAC7B,QAAQ,MAACm5B,EACX,EA4CA9wC,EAAQs9C,cA/Dc,SAAS3lC,EAAQ4lC,GACrC,MAAMC,EAAU,GAChB,IAAI1M,EAAQyM,EAAMpyB,KAAKxT,GACvB,KAAOm5B,GAAO,CACZ,MAAM2M,EAAa,GACnBA,EAAWC,WAAaH,EAAMI,UAAY7M,EAAM,GAAGnzC,OACnD,MAAM+E,EAAMouC,EAAMnzC,OAClB,IAAK,IAAIuqB,EAAQ,EAAGA,EAAQxlB,EAAKwlB,IAC/Bu1B,EAAWr/C,KAAK0yC,EAAM5oB,IAExBs1B,EAAQp/C,KAAKq/C,GACb3M,EAAQyM,EAAMpyB,KAAKxT,EACrB,CACA,OAAO6lC,CACT,EAkDAx9C,EAAQ88C,WAAaA,sCCrErB,MAAMc,EAAO,EAAQ,OAEfC,EAAiB,CACrBC,wBAAwB,EACxBC,aAAc,IAwLhB,SAASC,EAAa5nC,GACpB,MAAgB,MAATA,GAAyB,OAATA,GAA0B,OAATA,GAA2B,OAATA,CAC5D,CAMA,SAAS6nC,EAAOC,EAASl8C,GACvB,MAAMqU,EAAQrU,EACd,KAAOA,EAAIk8C,EAAQvgD,OAAQqE,IACzB,GAAkB,KAAdk8C,EAAQl8C,IAA2B,KAAdk8C,EAAQl8C,QAAjC,CAEE,MAAMm8C,EAAUD,EAAQ9iC,OAAO/E,EAAOrU,EAAIqU,GAC1C,GAAIrU,EAAI,GAAiB,QAAZm8C,EACX,OAAOC,EAAe,aAAc,6DAA8DC,EAAyBH,EAASl8C,IAC/H,GAAkB,KAAdk8C,EAAQl8C,IAA+B,KAAlBk8C,EAAQl8C,EAAI,GAAW,CAErDA,IACA,KACF,CAGF,CAEF,OAAOA,CACT,CAEA,SAASs8C,EAAoBJ,EAASl8C,GACpC,GAAIk8C,EAAQvgD,OAASqE,EAAI,GAAwB,MAAnBk8C,EAAQl8C,EAAI,IAAiC,MAAnBk8C,EAAQl8C,EAAI,IAElE,IAAKA,GAAK,EAAGA,EAAIk8C,EAAQvgD,OAAQqE,IAC/B,GAAmB,MAAfk8C,EAAQl8C,IAAiC,MAAnBk8C,EAAQl8C,EAAI,IAAiC,MAAnBk8C,EAAQl8C,EAAI,GAAY,CAC1EA,GAAK,EACL,KACF,OAEG,GACLk8C,EAAQvgD,OAASqE,EAAI,GACF,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,GACZ,CACA,IAAIu8C,EAAqB,EACzB,IAAKv8C,GAAK,EAAGA,EAAIk8C,EAAQvgD,OAAQqE,IAC/B,GAAmB,MAAfk8C,EAAQl8C,GACVu8C,SACK,GAAmB,MAAfL,EAAQl8C,KACjBu8C,IAC2B,IAAvBA,GACF,KAIR,MAAO,GACLL,EAAQvgD,OAASqE,EAAI,GACF,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,GAEZ,IAAKA,GAAK,EAAGA,EAAIk8C,EAAQvgD,OAAQqE,IAC/B,GAAmB,MAAfk8C,EAAQl8C,IAAiC,MAAnBk8C,EAAQl8C,EAAI,IAAiC,MAAnBk8C,EAAQl8C,EAAI,GAAY,CAC1EA,GAAK,EACL,KACF,CAIJ,OAAOA,CACT,CAjQAhC,EAAQw+C,SAAW,SAAUN,EAASx1C,GACpCA,EAAUtD,OAAOwL,OAAO,CAAC,EAAGitC,EAAgBn1C,GAK5C,MAAM+1C,EAAO,GACb,IAAIC,GAAW,EAGXC,GAAc,EAEC,WAAfT,EAAQ,KAEVA,EAAUA,EAAQ9iC,OAAO,IAG3B,IAAK,IAAIpZ,EAAI,EAAGA,EAAIk8C,EAAQvgD,OAAQqE,IAElC,GAAmB,MAAfk8C,EAAQl8C,IAA+B,MAAjBk8C,EAAQl8C,EAAE,IAGlC,GAFAA,GAAG,EACHA,EAAIi8C,EAAOC,EAAQl8C,GACfA,EAAE4G,IAAK,OAAO5G,MACd,IAAmB,MAAfk8C,EAAQl8C,GAwIX,CACL,GAAKg8C,EAAaE,EAAQl8C,IACxB,SAEF,OAAOo8C,EAAe,cAAe,SAASF,EAAQl8C,GAAG,qBAAsBq8C,EAAyBH,EAASl8C,GACnH,CA7I8B,CAG5B,IAAI48C,EAAc58C,EAGlB,GAFAA,IAEmB,MAAfk8C,EAAQl8C,GAAY,CACtBA,EAAIs8C,EAAoBJ,EAASl8C,GACjC,QACF,CAAO,CACL,IAAI68C,GAAa,EACE,MAAfX,EAAQl8C,KAEV68C,GAAa,EACb78C,KAGF,IAAI88C,EAAU,GACd,KAAO98C,EAAIk8C,EAAQvgD,QACF,MAAfugD,EAAQl8C,IACO,MAAfk8C,EAAQl8C,IACO,OAAfk8C,EAAQl8C,IACO,OAAfk8C,EAAQl8C,IACO,OAAfk8C,EAAQl8C,GAAaA,IAErB88C,GAAWZ,EAAQl8C,GAWrB,GATA88C,EAAUA,EAAQnqC,OAGkB,MAAhCmqC,EAAQA,EAAQnhD,OAAS,KAE3BmhD,EAAUA,EAAQ34C,UAAU,EAAG24C,EAAQnhD,OAAS,GAEhDqE,KAiVem8C,EA/UIW,GAgVpBlB,EAAKP,OAAOc,GAhVkB,CAC7B,IAAIx5B,EAMJ,OAJEA,EAD4B,IAA1Bm6B,EAAQnqC,OAAOhX,OACX,2BAEA,QAAQmhD,EAAQ,wBAEjBV,EAAe,aAAcz5B,EAAK05B,EAAyBH,EAASl8C,GAC7E,CAEA,MAAMuT,EAASwpC,EAAiBb,EAASl8C,GACzC,IAAe,IAAXuT,EACF,OAAO6oC,EAAe,cAAe,mBAAmBU,EAAQ,qBAAsBT,EAAyBH,EAASl8C,IAE1H,IAAIg9C,EAAUzpC,EAAOhQ,MAGrB,GAFAvD,EAAIuT,EAAO2S,MAEyB,MAAhC82B,EAAQA,EAAQrhD,OAAS,GAAY,CAEvC,MAAMshD,EAAej9C,EAAIg9C,EAAQrhD,OACjCqhD,EAAUA,EAAQ74C,UAAU,EAAG64C,EAAQrhD,OAAS,GAChD,MAAMuhD,EAAUC,EAAwBH,EAASt2C,GACjD,IAAgB,IAAZw2C,EAOF,OAAOd,EAAec,EAAQt2C,IAAID,KAAMu2C,EAAQt2C,IAAI+b,IAAK05B,EAAyBH,EAASe,EAAeC,EAAQt2C,IAAI7J,OANtH2/C,GAAW,CAQf,MAAO,GAAIG,EAAY,CACrB,IAAKtpC,EAAO6pC,UACV,OAAOhB,EAAe,aAAc,gBAAgBU,EAAQ,iCAAkCT,EAAyBH,EAASl8C,IAC3H,GAAIg9C,EAAQrqC,OAAOhX,OAAS,EACjC,OAAOygD,EAAe,aAAc,gBAAgBU,EAAQ,+CAAgDT,EAAyBH,EAASU,IACzI,CACL,MAAMS,EAAMZ,EAAKrnB,MACjB,GAAI0nB,IAAYO,EAAIP,QAAS,CAC3B,IAAIQ,EAAUjB,EAAyBH,EAASmB,EAAIT,aACpD,OAAOR,EAAe,aACpB,yBAAyBiB,EAAIP,QAAQ,qBAAqBQ,EAAQvgD,KAAK,SAASugD,EAAQC,IAAI,6BAA6BT,EAAQ,KACjIT,EAAyBH,EAASU,GACtC,CAGmB,GAAfH,EAAK9gD,SACPghD,GAAc,EAElB,CACF,KAAO,CACL,MAAMO,EAAUC,EAAwBH,EAASt2C,GACjD,IAAgB,IAAZw2C,EAIF,OAAOd,EAAec,EAAQt2C,IAAID,KAAMu2C,EAAQt2C,IAAI+b,IAAK05B,EAAyBH,EAASl8C,EAAIg9C,EAAQrhD,OAASuhD,EAAQt2C,IAAI7J,OAI9H,IAAoB,IAAhB4/C,EACF,OAAOP,EAAe,aAAc,sCAAuCC,EAAyBH,EAASl8C,KAC1D,IAA3C0G,EAAQq1C,aAAa93C,QAAQ64C,IAGrCL,EAAKrgD,KAAK,CAAC0gD,UAASF,gBAEtBF,GAAW,CACb,CAIA,IAAK18C,IAAKA,EAAIk8C,EAAQvgD,OAAQqE,IAC5B,GAAmB,MAAfk8C,EAAQl8C,GAAY,CACtB,GAAuB,MAAnBk8C,EAAQl8C,EAAI,GAAY,CAE1BA,IACAA,EAAIs8C,EAAoBJ,EAASl8C,GACjC,QACF,CAAO,GAAqB,MAAjBk8C,EAAQl8C,EAAE,GAInB,MAFA,GADAA,EAAIi8C,EAAOC,IAAWl8C,GAClBA,EAAE4G,IAAK,OAAO5G,CAItB,MAAO,GAAmB,MAAfk8C,EAAQl8C,GAAY,CAC7B,MAAMw9C,EAAWC,EAAkBvB,EAASl8C,GAC5C,IAAiB,GAAbw9C,EACF,OAAOpB,EAAe,cAAe,4BAA6BC,EAAyBH,EAASl8C,IACtGA,EAAIw9C,CACN,MACE,IAAoB,IAAhBb,IAAyBX,EAAaE,EAAQl8C,IAChD,OAAOo8C,EAAe,aAAc,wBAAyBC,EAAyBH,EAASl8C,IAIlF,MAAfk8C,EAAQl8C,IACVA,GAEJ,CACF,CAKA,CAsOJ,IAAyBm8C,EAnOvB,OAAKO,EAEoB,GAAfD,EAAK9gD,OACJygD,EAAe,aAAc,iBAAiBK,EAAK,GAAGK,QAAQ,KAAMT,EAAyBH,EAASO,EAAK,GAAGG,gBAC/GH,EAAK9gD,OAAS,IACbygD,EAAe,aAAc,YAChCrrB,KAAK8T,UAAU4X,EAAKhoC,KAAIkiB,GAAKA,EAAEmmB,UAAU,KAAM,GAAG33C,QAAQ,SAAU,IACpE,WAAY,CAACpI,KAAM,EAAGwgD,IAAK,IAN1BnB,EAAe,aAAc,sBAAuB,EAU/D,EAiFA,MAAMsB,EAAc,IACdC,EAAc,IAOpB,SAASZ,EAAiBb,EAASl8C,GACjC,IAAIg9C,EAAU,GACVY,EAAY,GACZR,GAAY,EAChB,KAAOp9C,EAAIk8C,EAAQvgD,OAAQqE,IAAK,CAC9B,GAAIk8C,EAAQl8C,KAAO09C,GAAexB,EAAQl8C,KAAO29C,EAC7B,KAAdC,EACFA,EAAY1B,EAAQl8C,GACX49C,IAAc1B,EAAQl8C,KAG/B49C,EAAY,SAET,GAAmB,MAAf1B,EAAQl8C,IACC,KAAd49C,EAAkB,CACpBR,GAAY,EACZ,KACF,CAEFJ,GAAWd,EAAQl8C,EACrB,CACA,MAAkB,KAAd49C,GAIG,CACLr6C,MAAOy5C,EACP92B,MAAOlmB,EACPo9C,UAAWA,EAEf,CAKA,MAAMS,EAAoB,IAAI/yB,OAAO,0DAA2D,KAIhG,SAASqyB,EAAwBH,EAASt2C,GAKxC,MAAM80C,EAAUI,EAAKN,cAAc0B,EAASa,GACtCC,EAAY,CAAC,EAEnB,IAAK,IAAI99C,EAAI,EAAGA,EAAIw7C,EAAQ7/C,OAAQqE,IAAK,CACvC,GAA6B,IAAzBw7C,EAAQx7C,GAAG,GAAGrE,OAEhB,OAAOygD,EAAe,cAAe,cAAcZ,EAAQx7C,GAAG,GAAG,8BAA+B+9C,EAAqBvC,EAAQx7C,KACxH,QAAsBuK,IAAlBixC,EAAQx7C,GAAG,SAAsCuK,IAAlBixC,EAAQx7C,GAAG,GACnD,OAAOo8C,EAAe,cAAe,cAAcZ,EAAQx7C,GAAG,GAAG,sBAAuB+9C,EAAqBvC,EAAQx7C,KAChH,QAAsBuK,IAAlBixC,EAAQx7C,GAAG,KAAqB0G,EAAQo1C,uBAEjD,OAAOM,EAAe,cAAe,sBAAsBZ,EAAQx7C,GAAG,GAAG,oBAAqB+9C,EAAqBvC,EAAQx7C,KAK7H,MAAMg+C,EAAWxC,EAAQx7C,GAAG,GAC5B,IAAKi+C,EAAiBD,GACpB,OAAO5B,EAAe,cAAe,cAAc4B,EAAS,wBAAyBD,EAAqBvC,EAAQx7C,KAEpH,GAAK89C,EAAUr6C,eAAeu6C,GAI5B,OAAO5B,EAAe,cAAe,cAAc4B,EAAS,iBAAkBD,EAAqBvC,EAAQx7C,KAF3G89C,EAAUE,GAAY,CAI1B,CAEA,OAAO,CACT,CAiBA,SAASP,EAAkBvB,EAASl8C,GAGlC,GAAmB,MAAfk8C,IADJl8C,GAEE,OAAQ,EACV,GAAmB,MAAfk8C,EAAQl8C,GAEV,OAtBJ,SAAiCk8C,EAASl8C,GACxC,IAAIs6B,EAAK,KAKT,IAJmB,MAAf4hB,EAAQl8C,KACVA,IACAs6B,EAAK,cAEAt6B,EAAIk8C,EAAQvgD,OAAQqE,IAAK,CAC9B,GAAmB,MAAfk8C,EAAQl8C,GACV,OAAOA,EACT,IAAKk8C,EAAQl8C,GAAG8uC,MAAMxU,GACpB,KACJ,CACA,OAAQ,CACV,CASW4jB,CAAwBhC,IAD/Bl8C,GAGF,IAAIoK,EAAQ,EACZ,KAAOpK,EAAIk8C,EAAQvgD,OAAQqE,IAAKoK,IAC9B,KAAI8xC,EAAQl8C,GAAG8uC,MAAM,OAAS1kC,EAAQ,IAAtC,CAEA,GAAmB,MAAf8xC,EAAQl8C,GACV,MACF,OAAQ,CAHE,CAKZ,OAAOA,CACT,CAEA,SAASo8C,EAAez1C,EAAMyb,EAAS+7B,GACrC,MAAO,CACLv3C,IAAK,CACHD,KAAMA,EACNgc,IAAKP,EACLrlB,KAAMohD,EAAWphD,MAAQohD,EACzBZ,IAAKY,EAAWZ,KAGtB,CAEA,SAASU,EAAiBD,GACxB,OAAOpC,EAAKP,OAAO2C,EACrB,CASA,SAAS3B,EAAyBH,EAASh2B,GACzC,MAAMk4B,EAAQlC,EAAQ/3C,UAAU,EAAG+hB,GAAOviB,MAAM,SAChD,MAAO,CACL5G,KAAMqhD,EAAMziD,OAGZ4hD,IAAKa,EAAMA,EAAMziD,OAAS,GAAGA,OAAS,EAE1C,CAGA,SAASoiD,EAAqBjP,GAC5B,OAAOA,EAAM4M,WAAa5M,EAAM,GAAGnzC,MACrC,sCCpaA,MAAM0iD,EAAqB,EAAQ,OAE7BxC,EAAiB,CACrByC,oBAAqB,KACrBC,qBAAqB,EACrBC,aAAc,QACdC,kBAAkB,EAClBC,eAAe,EACfv3C,QAAQ,EACRw3C,SAAU,KACVC,mBAAmB,EACnBC,sBAAsB,EACtBC,2BAA2B,EAC3BC,kBAAmB,SAASt4C,EAAK+U,GAC/B,OAAOA,CACT,EACAwjC,wBAAyB,SAAShB,EAAUxiC,GAC1C,OAAOA,CACT,EACAyjC,eAAe,EACfC,iBAAiB,EACjBnD,aAAc,GACdoD,SAAU,CACR,CAAE5D,MAAO,IAAIzwB,OAAO,IAAK,KAAM3S,IAAK,SACpC,CAAEojC,MAAO,IAAIzwB,OAAO,IAAK,KAAM3S,IAAK,QACpC,CAAEojC,MAAO,IAAIzwB,OAAO,IAAK,KAAM3S,IAAK,QACpC,CAAEojC,MAAO,IAAIzwB,OAAO,IAAM,KAAM3S,IAAK,UACrC,CAAEojC,MAAO,IAAIzwB,OAAO,IAAM,KAAM3S,IAAK,WAEvCinC,iBAAiB,EACjBC,UAAW,GAGXC,cAAc,GAGhB,SAASC,EAAQ74C,GACfhC,KAAKgC,QAAUtD,OAAOwL,OAAO,CAAC,EAAGitC,EAAgBn1C,GAC7ChC,KAAKgC,QAAQ+3C,kBAAoB/5C,KAAKgC,QAAQ63C,oBAChD75C,KAAK86C,YAAc,WACjB,OAAO,CACT,GAEA96C,KAAK+6C,cAAgB/6C,KAAKgC,QAAQ43C,oBAAoB3iD,OACtD+I,KAAK86C,YAAcA,GAGrB96C,KAAKg7C,qBAAuBA,EAExBh7C,KAAKgC,QAAQS,QACfzC,KAAKi7C,UAAYA,EACjBj7C,KAAKk7C,WAAa,MAClBl7C,KAAKm7C,QAAU,OAEfn7C,KAAKi7C,UAAY,WACf,MAAO,EACT,EACAj7C,KAAKk7C,WAAa,IAClBl7C,KAAKm7C,QAAU,GAEnB,CA2FA,SAASH,EAAsBI,EAAQr5C,EAAK+rC,GAC1C,MAAMj/B,EAAS7O,KAAKq7C,IAAID,EAAQtN,EAAQ,GACxC,YAA0CjoC,IAAtCu1C,EAAOp7C,KAAKgC,QAAQ83C,eAA8D,IAA/Bp7C,OAAOyI,KAAKi0C,GAAQnkD,OAClE+I,KAAKs7C,iBAAiBF,EAAOp7C,KAAKgC,QAAQ83C,cAAe/3C,EAAK8M,EAAOypC,QAASxK,GAE9E9tC,KAAKu7C,gBAAgB1sC,EAAO4E,IAAK1R,EAAK8M,EAAOypC,QAASxK,EAEjE,CAsFA,SAASmN,EAAUnN,GACjB,OAAO9tC,KAAKgC,QAAQi4C,SAASuB,OAAO1N,EACtC,CAEA,SAASgN,EAAYz7C,GACnB,QAAIA,EAAKmnC,WAAWxmC,KAAKgC,QAAQ43C,sBACxBv6C,EAAKqV,OAAO1U,KAAK+6C,cAI5B,CAhMAF,EAAQhiD,UAAU4iD,MAAQ,SAASC,GACjC,OAAG17C,KAAKgC,QAAQu4C,cACPZ,EAAmB+B,EAAM17C,KAAKgC,UAElCpJ,MAAM+S,QAAQ+vC,IAAS17C,KAAKgC,QAAQ25C,eAAiB37C,KAAKgC,QAAQ25C,cAAc1kD,OAAS,IAC1FykD,EAAO,CACL,CAAC17C,KAAKgC,QAAQ25C,eAAiBD,IAG5B17C,KAAKq7C,IAAIK,EAAM,GAAGjoC,IAE7B,EAEAonC,EAAQhiD,UAAUwiD,IAAM,SAASK,EAAM5N,GACrC,IAAIwK,EAAU,GACV7kC,EAAM,GACV,IAAK,IAAI1R,KAAO25C,EACd,QAAyB,IAAdA,EAAK35C,SAET,GAAkB,OAAd25C,EAAK35C,GACA,MAAXA,EAAI,GAAY0R,GAAOzT,KAAKi7C,UAAUnN,GAAS,IAAM/rC,EAAM,IAAM/B,KAAKk7C,WACpEznC,GAAOzT,KAAKi7C,UAAUnN,GAAS,IAAM/rC,EAAM,IAAM/B,KAAKk7C,gBAEtD,GAAIQ,EAAK35C,aAAgB7I,KAC9Bua,GAAOzT,KAAKs7C,iBAAiBI,EAAK35C,GAAMA,EAAK,GAAI+rC,QAC5C,GAAyB,iBAAd4N,EAAK35C,GAAmB,CAExC,MAAM65C,EAAO57C,KAAK86C,YAAY/4C,GAC9B,GAAI65C,EACFtD,GAAWt4C,KAAK67C,iBAAiBD,EAAM,GAAKF,EAAK35C,SAGjD,GAAIA,IAAQ/B,KAAKgC,QAAQ83C,aAAc,CACrC,IAAIgC,EAAS97C,KAAKgC,QAAQq4C,kBAAkBt4C,EAAK,GAAK25C,EAAK35C,IAC3D0R,GAAOzT,KAAK+7C,qBAAqBD,EACnC,MACEroC,GAAOzT,KAAKs7C,iBAAiBI,EAAK35C,GAAMA,EAAK,GAAI+rC,EAGvD,MAAO,GAAIl1C,MAAM+S,QAAQ+vC,EAAK35C,IAAO,CAEnC,MAAMi6C,EAASN,EAAK35C,GAAK9K,OACzB,IAAIglD,EAAa,GACjB,IAAK,IAAI7nC,EAAI,EAAGA,EAAI4nC,EAAQ5nC,IAAK,CAC/B,MAAMpN,EAAO00C,EAAK35C,GAAKqS,QACH,IAATpN,IAES,OAATA,EACK,MAAXjF,EAAI,GAAY0R,GAAOzT,KAAKi7C,UAAUnN,GAAS,IAAM/rC,EAAM,IAAM/B,KAAKk7C,WACpEznC,GAAOzT,KAAKi7C,UAAUnN,GAAS,IAAM/rC,EAAM,IAAM/B,KAAKk7C,WAElC,iBAATl0C,EACbhH,KAAKgC,QAAQ44C,aACdqB,GAAcj8C,KAAKq7C,IAAIr0C,EAAM8mC,EAAQ,GAAGr6B,IAExCwoC,GAAcj8C,KAAKg7C,qBAAqBh0C,EAAMjF,EAAK+rC,GAGrDmO,GAAcj8C,KAAKs7C,iBAAiBt0C,EAAMjF,EAAK,GAAI+rC,GAEvD,CACG9tC,KAAKgC,QAAQ44C,eACdqB,EAAaj8C,KAAKu7C,gBAAgBU,EAAYl6C,EAAK,GAAI+rC,IAEzDr6B,GAAOwoC,CACT,MAEE,GAAIj8C,KAAKgC,QAAQ63C,qBAAuB93C,IAAQ/B,KAAKgC,QAAQ63C,oBAAqB,CAChF,MAAMqC,EAAKx9C,OAAOyI,KAAKu0C,EAAK35C,IACtBgyB,EAAImoB,EAAGjlD,OACb,IAAK,IAAImd,EAAI,EAAGA,EAAI2f,EAAG3f,IACrBkkC,GAAWt4C,KAAK67C,iBAAiBK,EAAG9nC,GAAI,GAAKsnC,EAAK35C,GAAKm6C,EAAG9nC,IAE9D,MACEX,GAAOzT,KAAKg7C,qBAAqBU,EAAK35C,GAAMA,EAAK+rC,GAIvD,MAAO,CAACwK,QAASA,EAAS7kC,IAAKA,EACjC,EAEAonC,EAAQhiD,UAAUgjD,iBAAmB,SAASvC,EAAU7lC,GAGtD,OAFAA,EAAMzT,KAAKgC,QAAQs4C,wBAAwBhB,EAAU,GAAK7lC,GAC1DA,EAAMzT,KAAK+7C,qBAAqBtoC,GAC5BzT,KAAKgC,QAAQo4C,2BAAqC,SAAR3mC,EACrC,IAAM6lC,EACD,IAAMA,EAAW,KAAO7lC,EAAM,GAC9C,EAWAonC,EAAQhiD,UAAU0iD,gBAAkB,SAAS9nC,EAAK1R,EAAKu2C,EAASxK,GAC9D,GAAW,KAARr6B,EACD,MAAc,MAAX1R,EAAI,GAAoB/B,KAAKi7C,UAAUnN,GAAS,IAAM/rC,EAAMu2C,EAAS,IAAMt4C,KAAKk7C,WAE1El7C,KAAKi7C,UAAUnN,GAAS,IAAM/rC,EAAMu2C,EAAUt4C,KAAKm8C,SAASp6C,GAAO/B,KAAKk7C,WAE9E,CAEH,IAAIkB,EAAY,KAAOr6C,EAAM/B,KAAKk7C,WAC9BmB,EAAgB,GAOpB,MALc,MAAXt6C,EAAI,KACLs6C,EAAgB,IAChBD,EAAY,IAGV9D,IAAiC,IAAtB7kC,EAAIlU,QAAQ,KAChBS,KAAKi7C,UAAUnN,GAAS,IAAO/rC,EAAMu2C,EAAU+D,EAAgB,IAAM5oC,EAAM2oC,GAC1C,IAAjCp8C,KAAKgC,QAAQw4C,iBAA6Bz4C,IAAQ/B,KAAKgC,QAAQw4C,iBAA4C,IAAzB6B,EAAcplD,OAClG+I,KAAKi7C,UAAUnN,GAAS,UAAOr6B,UAAWzT,KAAKm7C,QAGpDn7C,KAAKi7C,UAAUnN,GAAS,IAAM/rC,EAAMu2C,EAAU+D,EAAgBr8C,KAAKk7C,WACnEznC,EACAzT,KAAKi7C,UAAUnN,GAASsO,CAE9B,CACF,EAEAvB,EAAQhiD,UAAUsjD,SAAW,SAASp6C,GACpC,IAAIo6C,EAAW,GAQf,OAP+C,IAA5Cn8C,KAAKgC,QAAQq1C,aAAa93C,QAAQwC,GAC/B/B,KAAKgC,QAAQm4C,uBAAsBgC,EAAW,KAElDA,EADOn8C,KAAKgC,QAAQk4C,kBACT,IAEA,MAAMn4C,IAEZo6C,CACT,EAcAtB,EAAQhiD,UAAUyiD,iBAAmB,SAAS7nC,EAAK1R,EAAKu2C,EAASxK,GAC/D,IAAmC,IAA/B9tC,KAAKgC,QAAQg4C,eAA2Bj4C,IAAQ/B,KAAKgC,QAAQg4C,cAC/D,OAAOh6C,KAAKi7C,UAAUnN,GAAS,YAAYr6B,OAAYzT,KAAKm7C,QACxD,IAAqC,IAAjCn7C,KAAKgC,QAAQw4C,iBAA6Bz4C,IAAQ/B,KAAKgC,QAAQw4C,gBACvE,OAAOx6C,KAAKi7C,UAAUnN,GAAS,UAAOr6B,UAAYzT,KAAKm7C,QACnD,GAAc,MAAXp5C,EAAI,GACX,OAAQ/B,KAAKi7C,UAAUnN,GAAS,IAAM/rC,EAAMu2C,EAAS,IAAMt4C,KAAKk7C,WAC7D,CACH,IAAIoB,EAAYt8C,KAAKgC,QAAQq4C,kBAAkBt4C,EAAK0R,GAGpD,OAFA6oC,EAAYt8C,KAAK+7C,qBAAqBO,GAEpB,KAAdA,EACKt8C,KAAKi7C,UAAUnN,GAAS,IAAM/rC,EAAMu2C,EAAUt4C,KAAKm8C,SAASp6C,GAAO/B,KAAKk7C,WAExEl7C,KAAKi7C,UAAUnN,GAAS,IAAM/rC,EAAMu2C,EAAU,IAClDgE,EACD,KAAOv6C,EAAM/B,KAAKk7C,UAExB,CACF,EAEAL,EAAQhiD,UAAUkjD,qBAAuB,SAASO,GAChD,GAAGA,GAAaA,EAAUrlD,OAAS,GAAK+I,KAAKgC,QAAQ04C,gBACnD,IAAK,IAAIp/C,EAAE,EAAGA,EAAE0E,KAAKgC,QAAQy4C,SAASxjD,OAAQqE,IAAK,CACjD,MAAMihD,EAASv8C,KAAKgC,QAAQy4C,SAASn/C,GACrCghD,EAAYA,EAAU77C,QAAQ87C,EAAO1F,MAAO0F,EAAO9oC,IACrD,CAEF,OAAO6oC,CACT,EAcA79C,EAAOnF,QAAUuhD,qBClPjB,SAAS2B,EAAS3hD,EAAKmH,EAASy6C,EAAOC,GACnC,IAAIC,EAAS,GACTC,GAAuB,EAE3B,IAAK,IAAIthD,EAAI,EAAGA,EAAIT,EAAI5D,OAAQqE,IAAK,CACjC,MAAMuhD,EAAShiD,EAAIS,GACb88C,EAAU0E,EAASD,GACzB,IAAIE,EAAW,GAIf,GAHwBA,EAAH,IAAjBN,EAAMxlD,OAAyBmhD,EACnB,GAAGqE,KAASrE,IAExBA,IAAYp2C,EAAQ83C,aAAc,CAClC,IAAIkD,EAAUH,EAAOzE,GAChB6E,EAAWF,EAAU/6C,KACtBg7C,EAAUh7C,EAAQq4C,kBAAkBjC,EAAS4E,GAC7CA,EAAUjB,EAAqBiB,EAASh7C,IAExC46C,IACAD,GAAUD,GAEdC,GAAUK,EACVJ,GAAuB,EACvB,QACJ,CAAO,GAAIxE,IAAYp2C,EAAQg4C,cAAe,CACtC4C,IACAD,GAAUD,GAEdC,GAAU,YAAYE,EAAOzE,GAAS,GAAGp2C,EAAQ83C,mBACjD8C,GAAuB,EACvB,QACJ,CAAO,GAAIxE,IAAYp2C,EAAQw4C,gBAAiB,CAC5CmC,GAAUD,EAAc,UAAOG,EAAOzE,GAAS,GAAGp2C,EAAQ83C,sBAC1D8C,GAAuB,EACvB,QACJ,CAAO,GAAmB,MAAfxE,EAAQ,GAAY,CAC3B,MAAM8E,EAASC,EAAYN,EAAO,MAAO76C,GACnCo7C,EAAsB,SAAZhF,EAAqB,GAAKsE,EAC1C,IAAIW,EAAiBR,EAAOzE,GAAS,GAAGp2C,EAAQ83C,cAChDuD,EAA2C,IAA1BA,EAAepmD,OAAe,IAAMomD,EAAiB,GACtEV,GAAUS,EAAU,IAAIhF,IAAUiF,IAAiBH,MACnDN,GAAuB,EACvB,QACJ,CACA,IAAIU,EAAgBZ,EACE,KAAlBY,IACAA,GAAiBt7C,EAAQi4C,UAE7B,MACMsD,EAAWb,EAAc,IAAItE,IADpB+E,EAAYN,EAAO,MAAO76C,KAEnCw7C,EAAWhB,EAASK,EAAOzE,GAAUp2C,EAAS+6C,EAAUO,IACf,IAA3Ct7C,EAAQq1C,aAAa93C,QAAQ64C,GACzBp2C,EAAQm4C,qBAAsBwC,GAAUY,EAAW,IAClDZ,GAAUY,EAAW,KACjBC,GAAgC,IAApBA,EAASvmD,SAAiB+K,EAAQk4C,kBAEhDsD,GAAYA,EAASC,SAAS,KACrCd,GAAUY,EAAW,IAAIC,IAAWd,MAAgBtE,MAEpDuE,GAAUY,EAAW,IACjBC,GAA4B,KAAhBd,IAAuBc,EAAS3lC,SAAS,OAAS2lC,EAAS3lC,SAAS,OAChF8kC,GAAUD,EAAc16C,EAAQi4C,SAAWuD,EAAWd,EAEtDC,GAAUa,EAEdb,GAAU,KAAKvE,MAVfuE,GAAUY,EAAW,KAYzBX,GAAuB,CAC3B,CAEA,OAAOD,CACX,CAEA,SAASG,EAAS9qC,GACd,MAAM7K,EAAOzI,OAAOyI,KAAK6K,GACzB,IAAK,IAAI1W,EAAI,EAAGA,EAAI6L,EAAKlQ,OAAQqE,IAAK,CAClC,MAAMyG,EAAMoF,EAAK7L,GACjB,GAAY,OAARyG,EAAc,OAAOA,CAC7B,CACJ,CAEA,SAASo7C,EAAYO,EAAS17C,GAC1B,IAAIs2C,EAAU,GACd,GAAIoF,IAAY17C,EAAQ+3C,iBACpB,IAAK,IAAI6B,KAAQ8B,EAAS,CACtB,IAAIC,EAAU37C,EAAQs4C,wBAAwBsB,EAAM8B,EAAQ9B,IAC5D+B,EAAU5B,EAAqB4B,EAAS37C,IACxB,IAAZ27C,GAAoB37C,EAAQo4C,0BAC5B9B,GAAW,IAAIsD,EAAKlnC,OAAO1S,EAAQ43C,oBAAoB3iD,UAEvDqhD,GAAW,IAAIsD,EAAKlnC,OAAO1S,EAAQ43C,oBAAoB3iD,YAAY0mD,IAE3E,CAEJ,OAAOrF,CACX,CAEA,SAAS2E,EAAWR,EAAOz6C,GAEvB,IAAIo2C,GADJqE,EAAQA,EAAM/nC,OAAO,EAAG+nC,EAAMxlD,OAAS+K,EAAQ83C,aAAa7iD,OAAS,IACjDyd,OAAO+nC,EAAM7oC,YAAY,KAAO,GACpD,IAAK,IAAI4N,KAASxf,EAAQ24C,UACtB,GAAI34C,EAAQ24C,UAAUn5B,KAAWi7B,GAASz6C,EAAQ24C,UAAUn5B,KAAW,KAAO42B,EAAS,OAAO,EAElG,OAAO,CACX,CAEA,SAAS2D,EAAqBO,EAAWt6C,GACrC,GAAIs6C,GAAaA,EAAUrlD,OAAS,GAAK+K,EAAQ04C,gBAC7C,IAAK,IAAIp/C,EAAI,EAAGA,EAAI0G,EAAQy4C,SAASxjD,OAAQqE,IAAK,CAC9C,MAAMihD,EAASv6C,EAAQy4C,SAASn/C,GAChCghD,EAAYA,EAAU77C,QAAQ87C,EAAO1F,MAAO0F,EAAO9oC,IACvD,CAEJ,OAAO6oC,CACX,CACA79C,EAAOnF,QA1HP,SAAeskD,EAAQ57C,GACnB,IAAI06C,EAAc,GAIlB,OAHI16C,EAAQS,QAAUT,EAAQi4C,SAAShjD,OAAS,IAC5CylD,EAXI,MAaDF,EAASoB,EAAQ57C,EAAS,GAAI06C,EACzC,yBCdA,MAAMxF,EAAO,EAAQ,OA+DrB,SAAS2G,EAAcrG,EAAQl8C,GAW3B,IAAIwiD,EAAa,GACjB,KAAOxiD,EAAIk8C,EAAQvgD,QAA0B,MAAfugD,EAAQl8C,IAA6B,MAAfk8C,EAAQl8C,GAAcA,IAGtEwiD,GAActG,EAAQl8C,GAG1B,GADAwiD,EAAaA,EAAW7vC,QACQ,IAA7B6vC,EAAWv+C,QAAQ,KAAa,MAAM,IAAIhH,MAAM,sCAGnD,MAAM2gD,EAAY1B,EAAQl8C,KAC1B,IAAImY,EAAM,GACV,KAAOnY,EAAIk8C,EAAQvgD,QAAUugD,EAAQl8C,KAAO49C,EAAY59C,IACpDmY,GAAO+jC,EAAQl8C,GAEnB,MAAO,CAACwiD,EAAYrqC,EAAKnY,EAC7B,CAEA,SAASyiD,EAAUvG,EAASl8C,GACxB,MAAoB,MAAjBk8C,EAAQl8C,EAAE,IACI,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,EAEd,CACA,SAAS0iD,EAASxG,EAASl8C,GACvB,MAAoB,MAAjBk8C,EAAQl8C,EAAE,IACI,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,EAEd,CACA,SAAS2iD,EAAUzG,EAASl8C,GACxB,MAAoB,MAAjBk8C,EAAQl8C,EAAE,IACI,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,EAEd,CAEA,SAAS4iD,EAAU1G,EAASl8C,GACxB,MAAoB,MAAjBk8C,EAAQl8C,EAAE,IACI,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,EAEd,CACA,SAAS6iD,EAAW3G,EAASl8C,GACzB,MAAoB,MAAjBk8C,EAAQl8C,EAAE,IACI,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,IACO,MAAjBk8C,EAAQl8C,EAAE,EAEd,CAEA,SAAS8iD,EAAmB/+C,GACxB,GAAI63C,EAAKP,OAAOt3C,GACnB,OAAOA,EAEA,MAAM,IAAI9G,MAAM,uBAAuB8G,IAC/C,CAEAZ,EAAOnF,QApJP,SAAqBk+C,EAASl8C,GAE1B,MAAMm/C,EAAW,CAAC,EAClB,GAAuB,MAAnBjD,EAAQl8C,EAAI,IACQ,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,IACO,MAAnBk8C,EAAQl8C,EAAI,GA+Cb,MAAM,IAAI/C,MAAM,kCA9CpB,CACI+C,GAAM,EACN,IAAIu8C,EAAqB,EACrBwG,GAAU,EAAOC,GAAU,EAC3BC,EAAM,GACV,KAAKjjD,EAAEk8C,EAAQvgD,OAAOqE,IAClB,GAAmB,MAAfk8C,EAAQl8C,IAAegjD,EAkBpB,GAAmB,MAAf9G,EAAQl8C,IASf,GARGgjD,EACwB,MAAnB9G,EAAQl8C,EAAI,IAAiC,MAAnBk8C,EAAQl8C,EAAI,KACtCgjD,GAAU,EACVzG,KAGJA,IAEuB,IAAvBA,EACF,UAEmB,MAAfL,EAAQl8C,GACd+iD,GAAU,EAEVE,GAAO/G,EAAQl8C,OAjCiB,CAChC,GAAI+iD,GAAWL,EAASxG,EAASl8C,GAC7BA,GAAK,GACJwiD,WAAYrqC,IAAInY,GAAKuiD,EAAcrG,EAAQl8C,EAAE,IACrB,IAAtBmY,IAAIlU,QAAQ,OACXk7C,EAAU2D,EAAmBN,aAAgB,CACzCU,KAAOp4B,OAAQ,IAAI03B,cAAc,KACjCrqC,IAAKA,WAGZ,GAAI4qC,GAAWJ,EAAUzG,EAASl8C,GAAKA,GAAK,OAC5C,GAAI+iD,GAAWH,EAAU1G,EAASl8C,GAAKA,GAAK,OAC5C,GAAI+iD,GAAWF,EAAW3G,EAASl8C,GAAIA,GAAK,MAC5C,KAAIyiD,EACmC,MAAM,IAAIxlD,MAAM,mBADhB+lD,GAAU,CACwB,CAE9EzG,IACA0G,EAAM,EACV,CAkBJ,GAA0B,IAAvB1G,EACC,MAAM,IAAIt/C,MAAM,mBAExB,CAGA,MAAO,CAACkiD,WAAUn/C,IACtB,uBC5DA,MAAM67C,EAAiB,CACnBoD,eAAe,EACfX,oBAAqB,KACrBC,qBAAqB,EACrBC,aAAc,QACdC,kBAAkB,EAClB0E,gBAAgB,EAChBrH,wBAAwB,EAExBsH,eAAe,EACfC,qBAAqB,EACrBC,YAAY,EACZ5E,eAAe,EACf6E,mBAAoB,CAClBC,KAAK,EACLC,cAAc,EACdC,WAAW,GAEb3E,kBAAmB,SAASjC,EAAS3kC,GACnC,OAAOA,CACT,EACA6mC,wBAAyB,SAAShB,EAAU7lC,GAC1C,OAAOA,CACT,EACAknC,UAAW,GACXsE,sBAAsB,EACtBtzC,QAAS,KAAM,EACf6uC,iBAAiB,EACjBnD,aAAc,GACdqD,iBAAiB,EACjBwE,cAAc,EACdC,mBAAmB,EACnBC,cAAc,EACdC,kBAAkB,EAClBC,wBAAwB,EACxBC,UAAW,SAASnH,EAASqE,EAAO+C,GAClC,OAAOpH,CACT,GAQJ9+C,EAAQmmD,aAJa,SAASz9C,GAC1B,OAAOtD,OAAOwL,OAAO,CAAC,EAAGitC,EAAgBn1C,EAC7C,EAGA1I,EAAQ69C,eAAiBA,sCC5CzB,MAAMD,EAAO,EAAQ,OACfwI,EAAU,EAAQ,OAClBC,EAAc,EAAQ,OACtBC,EAAW,EAAQ,OAGvB,wFACCn/C,QAAQ,QAASy2C,EAAKd,YA+CzB,SAASyJ,EAAoBC,GAC3B,MAAMC,EAAUrhD,OAAOyI,KAAK24C,GAC5B,IAAK,IAAIxkD,EAAI,EAAGA,EAAIykD,EAAQ9oD,OAAQqE,IAAK,CACvC,MAAM0kD,EAAMD,EAAQzkD,GACpB0E,KAAKigD,aAAaD,GAAO,CACtBnJ,MAAO,IAAIzwB,OAAO,IAAI45B,EAAI,IAAI,KAC9BvsC,IAAMqsC,EAAiBE,GAE5B,CACF,CAWA,SAASE,EAAczsC,EAAK2kC,EAASqE,EAAO0D,EAAUC,EAAeC,EAAYC,GAC/E,QAAYz6C,IAAR4N,IACEzT,KAAKgC,QAAQ48C,aAAeuB,IAC9B1sC,EAAMA,EAAIxF,QAETwF,EAAIxc,OAAS,GAAE,CACZqpD,IAAgB7sC,EAAMzT,KAAK+7C,qBAAqBtoC,IAEpD,MAAMqoC,EAAS97C,KAAKgC,QAAQq4C,kBAAkBjC,EAAS3kC,EAAKgpC,EAAO2D,EAAeC,GAClF,GAAGvE,QAED,OAAOroC,EACH,UAAUqoC,UAAkBroC,GAAOqoC,IAAWroC,EAElD,OAAOqoC,EACH,GAAG97C,KAAKgC,QAAQ48C,WACpB,OAAO2B,EAAW9sC,EAAKzT,KAAKgC,QAAQ08C,cAAe1+C,KAAKgC,QAAQ68C,oBAGhE,OADmBprC,EAAIxF,SACLwF,EACT8sC,EAAW9sC,EAAKzT,KAAKgC,QAAQ08C,cAAe1+C,KAAKgC,QAAQ68C,oBAEzDprC,CAGb,CAEJ,CAEA,SAAS+sC,EAAiB/I,GACxB,GAAIz3C,KAAKgC,QAAQy8C,eAAgB,CAC/B,MAAM1G,EAAON,EAAQx4C,MAAM,KACrBsP,EAA+B,MAAtBkpC,EAAQgJ,OAAO,GAAa,IAAM,GACjD,GAAgB,UAAZ1I,EAAK,GACP,MAAO,GAEW,IAAhBA,EAAK9gD,SACPwgD,EAAUlpC,EAASwpC,EAAK,GAE5B,CACA,OAAON,CACT,CAIA,MAAMiJ,EAAY,IAAIt6B,OAAO,+CAAgD,MAE7E,SAASu6B,EAAmBrI,EAASmE,EAAOrE,GAC1C,IAAKp4C,KAAKgC,QAAQ+3C,kBAAuC,iBAAZzB,EAAsB,CAIjE,MAAMxB,EAAUI,EAAKN,cAAc0B,EAASoI,GACtC1kD,EAAM86C,EAAQ7/C,OACduoD,EAAQ,CAAC,EACf,IAAK,IAAIlkD,EAAI,EAAGA,EAAIU,EAAKV,IAAK,CAC5B,MAAMg+C,EAAWt5C,KAAKwgD,iBAAiB1J,EAAQx7C,GAAG,IAClD,IAAIslD,EAAS9J,EAAQx7C,GAAG,GACpBulD,EAAQ7gD,KAAKgC,QAAQ43C,oBAAsBN,EAC/C,GAAIA,EAASriD,OAKX,GAJI+I,KAAKgC,QAAQs9C,yBACfuB,EAAQ7gD,KAAKgC,QAAQs9C,uBAAuBuB,IAEjC,cAAVA,IAAuBA,EAAS,mBACpBh7C,IAAX+6C,EAAsB,CACpB5gD,KAAKgC,QAAQ48C,aACfgC,EAASA,EAAO3yC,QAElB2yC,EAAS5gD,KAAK+7C,qBAAqB6E,GACnC,MAAME,EAAS9gD,KAAKgC,QAAQs4C,wBAAwBhB,EAAUsH,EAAQnE,GAGpE+C,EAAMqB,GAFLC,QAEcF,SACDE,UAAkBF,GAAUE,IAAWF,EAEtCE,EAGAP,EACbK,EACA5gD,KAAKgC,QAAQ28C,oBACb3+C,KAAKgC,QAAQ68C,mBAGnB,MAAW7+C,KAAKgC,QAAQo1C,yBACtBoI,EAAMqB,IAAS,EAGrB,CACA,IAAKniD,OAAOyI,KAAKq4C,GAAOvoD,OACtB,OAEF,GAAI+I,KAAKgC,QAAQ63C,oBAAqB,CACpC,MAAMkH,EAAiB,CAAC,EAExB,OADAA,EAAe/gD,KAAKgC,QAAQ63C,qBAAuB2F,EAC5CuB,CACT,CACA,OAAOvB,CACT,CACF,CAEA,MAAMwB,EAAW,SAASxJ,GACxBA,EAAUA,EAAQ/2C,QAAQ,SAAU,MACpC,MAAMwgD,EAAS,IAAIvB,EAAQ,QAC3B,IAAIwB,EAAcD,EACdE,EAAW,GACX1E,EAAQ,GACZ,IAAI,IAAInhD,EAAE,EAAGA,EAAGk8C,EAAQvgD,OAAQqE,IAAI,CAElC,GAAU,MADCk8C,EAAQl8C,GAIjB,GAAqB,MAAjBk8C,EAAQl8C,EAAE,GAAY,CACxB,MAAM8lD,EAAaC,EAAiB7J,EAAS,IAAKl8C,EAAG,8BACrD,IAAI88C,EAAUZ,EAAQ/3C,UAAUnE,EAAE,EAAE8lD,GAAYnzC,OAEhD,GAAGjO,KAAKgC,QAAQy8C,eAAe,CAC7B,MAAM6C,EAAalJ,EAAQ74C,QAAQ,MAChB,IAAhB+hD,IACDlJ,EAAUA,EAAQ1jC,OAAO4sC,EAAW,GAExC,CAEGthD,KAAKgC,QAAQq9C,mBACdjH,EAAUp4C,KAAKgC,QAAQq9C,iBAAiBjH,IAGvC8I,IACDC,EAAWnhD,KAAKuhD,oBAAoBJ,EAAUD,EAAazE,IAI7D,MAAM+E,EAAc/E,EAAMh9C,UAAUg9C,EAAM7oC,YAAY,KAAK,GAC3D,GAAGwkC,IAA2D,IAAhDp4C,KAAKgC,QAAQq1C,aAAa93C,QAAQ64C,GAC9C,MAAM,IAAI7/C,MAAM,kDAAkD6/C,MAEpE,IAAIqJ,EAAY,EACbD,IAAmE,IAApDxhD,KAAKgC,QAAQq1C,aAAa93C,QAAQiiD,IAClDC,EAAYhF,EAAM7oC,YAAY,IAAK6oC,EAAM7oC,YAAY,KAAK,GAC1D5T,KAAK0hD,cAAchxB,OAEnB+wB,EAAYhF,EAAM7oC,YAAY,KAEhC6oC,EAAQA,EAAMh9C,UAAU,EAAGgiD,GAE3BP,EAAclhD,KAAK0hD,cAAchxB,MACjCywB,EAAW,GACX7lD,EAAI8lD,CACN,MAAO,GAAqB,MAAjB5J,EAAQl8C,EAAE,GAAY,CAE/B,IAAIqmD,EAAUC,EAAWpK,EAAQl8C,GAAG,EAAO,MAC3C,IAAIqmD,EAAS,MAAM,IAAIppD,MAAM,yBAG7B,GADA4oD,EAAWnhD,KAAKuhD,oBAAoBJ,EAAUD,EAAazE,GACtDz8C,KAAKgC,QAAQm9C,mBAAyC,SAApBwC,EAAQvJ,SAAuBp4C,KAAKgC,QAAQo9C,kBAE9E,CAEH,MAAMyC,EAAY,IAAInC,EAAQiC,EAAQvJ,SACtCyJ,EAAU/0C,IAAI9M,KAAKgC,QAAQ83C,aAAc,IAEtC6H,EAAQvJ,UAAYuJ,EAAQG,QAAUH,EAAQI,iBAC/CF,EAAU,MAAQ7hD,KAAK2gD,mBAAmBgB,EAAQG,OAAQrF,EAAOkF,EAAQvJ,UAE3Ep4C,KAAKgiD,SAASd,EAAaW,EAAWpF,EAExC,CAGAnhD,EAAIqmD,EAAQP,WAAa,CAC3B,MAAO,GAAgC,QAA7B5J,EAAQ9iC,OAAOpZ,EAAI,EAAG,GAAc,CAC5C,MAAM2mD,EAAWZ,EAAiB7J,EAAS,SAAOl8C,EAAE,EAAG,0BACvD,GAAG0E,KAAKgC,QAAQw4C,gBAAgB,CAC9B,MAAM8D,EAAU9G,EAAQ/3C,UAAUnE,EAAI,EAAG2mD,EAAW,GAEpDd,EAAWnhD,KAAKuhD,oBAAoBJ,EAAUD,EAAazE,GAE3DyE,EAAYp0C,IAAI9M,KAAKgC,QAAQw4C,gBAAiB,CAAE,CAAE,CAACx6C,KAAKgC,QAAQ83C,cAAgBwE,IAClF,CACAhjD,EAAI2mD,CACN,MAAO,GAAiC,OAA7BzK,EAAQ9iC,OAAOpZ,EAAI,EAAG,GAAa,CAC5C,MAAMuT,EAAS8wC,EAAYnI,EAASl8C,GACpC0E,KAAKkiD,gBAAkBrzC,EAAO4rC,SAC9Bn/C,EAAIuT,EAAOvT,CACb,MAAM,GAAgC,OAA7Bk8C,EAAQ9iC,OAAOpZ,EAAI,EAAG,GAAa,CAC1C,MAAM8lD,EAAaC,EAAiB7J,EAAS,MAAOl8C,EAAG,wBAA0B,EAC3EwmD,EAAStK,EAAQ/3C,UAAUnE,EAAI,EAAE8lD,GAKvC,GAHAD,EAAWnhD,KAAKuhD,oBAAoBJ,EAAUD,EAAazE,GAGxDz8C,KAAKgC,QAAQg4C,cAGdkH,EAAYp0C,IAAI9M,KAAKgC,QAAQg4C,cAAe,CAAE,CAAE,CAACh6C,KAAKgC,QAAQ83C,cAAgBgI,SAC3E,CACH,IAAIruC,EAAMzT,KAAKkgD,cAAc4B,EAAQZ,EAAYzJ,QAASgF,GAAO,GAAM,GAAO,GACpE52C,MAAP4N,IAAkBA,EAAM,IAC3BytC,EAAYp0C,IAAI9M,KAAKgC,QAAQ83C,aAAcrmC,EAC7C,CAEAnY,EAAI8lD,EAAa,CACnB,KAAM,CACJ,IAAIvyC,EAAS+yC,EAAWpK,EAAQl8C,EAAG0E,KAAKgC,QAAQy8C,gBAC5CrG,EAASvpC,EAAOupC,QAChB0J,EAASjzC,EAAOizC,OAChBC,EAAiBlzC,EAAOkzC,eACxBX,EAAavyC,EAAOuyC,WAEpBphD,KAAKgC,QAAQq9C,mBACfjH,EAAUp4C,KAAKgC,QAAQq9C,iBAAiBjH,IAItC8I,GAAeC,GACU,SAAxBD,EAAYzJ,UAEb0J,EAAWnhD,KAAKuhD,oBAAoBJ,EAAUD,EAAazE,GAAO,IAKtE,MAAM0F,EAAUjB,EAQhB,GAPGiB,IAAmE,IAAxDniD,KAAKgC,QAAQq1C,aAAa93C,QAAQ4iD,EAAQ1K,WACtDyJ,EAAclhD,KAAK0hD,cAAchxB,MACjC+rB,EAAQA,EAAMh9C,UAAU,EAAGg9C,EAAM7oC,YAAY,OAE5CwkC,IAAY6I,EAAOxJ,UACpBgF,GAASA,EAAQ,IAAMrE,EAAUA,GAE/Bp4C,KAAKoiD,aAAapiD,KAAKgC,QAAQ24C,UAAW8B,EAAOrE,GAAU,CAC7D,IAAIiK,EAAa,GAEjB,GAAGP,EAAO7qD,OAAS,GAAK6qD,EAAOluC,YAAY,OAASkuC,EAAO7qD,OAAS,EAClEqE,EAAIuT,EAAOuyC,gBAGR,IAAmD,IAAhDphD,KAAKgC,QAAQq1C,aAAa93C,QAAQ64C,GACxC98C,EAAIuT,EAAOuyC,eAGT,CAEF,MAAMvyC,EAAS7O,KAAKsiD,iBAAiB9K,EAASY,EAASgJ,EAAa,GACpE,IAAIvyC,EAAQ,MAAM,IAAItW,MAAM,qBAAqB6/C,KACjD98C,EAAIuT,EAAOvT,EACX+mD,EAAaxzC,EAAOwzC,UACtB,CAEA,MAAMR,EAAY,IAAInC,EAAQtH,GAC3BA,IAAY0J,GAAUC,IACvBF,EAAU,MAAQ7hD,KAAK2gD,mBAAmBmB,EAAQrF,EAAOrE,IAExDiK,IACDA,EAAariD,KAAKkgD,cAAcmC,EAAYjK,EAASqE,GAAO,EAAMsF,GAAgB,GAAM,IAG1FtF,EAAQA,EAAM/nC,OAAO,EAAG+nC,EAAM7oC,YAAY,MAC1CiuC,EAAU/0C,IAAI9M,KAAKgC,QAAQ83C,aAAcuI,GAEzCriD,KAAKgiD,SAASd,EAAaW,EAAWpF,EACxC,KAAK,CAEH,GAAGqF,EAAO7qD,OAAS,GAAK6qD,EAAOluC,YAAY,OAASkuC,EAAO7qD,OAAS,EAAE,CACjC,MAAhCmhD,EAAQA,EAAQnhD,OAAS,IAC1BmhD,EAAUA,EAAQ1jC,OAAO,EAAG0jC,EAAQnhD,OAAS,GAC7C6qD,EAAS1J,GAET0J,EAASA,EAAOptC,OAAO,EAAGotC,EAAO7qD,OAAS,GAGzC+I,KAAKgC,QAAQq9C,mBACdjH,EAAUp4C,KAAKgC,QAAQq9C,iBAAiBjH,IAG1C,MAAMyJ,EAAY,IAAInC,EAAQtH,GAC3BA,IAAY0J,GAAUC,IACvBF,EAAU,MAAQ7hD,KAAK2gD,mBAAmBmB,EAAQrF,EAAOrE,IAE3Dp4C,KAAKgiD,SAASd,EAAaW,EAAWpF,GACtCA,EAAQA,EAAM/nC,OAAO,EAAG+nC,EAAM7oC,YAAY,KAC5C,KAEI,CACF,MAAMiuC,EAAY,IAAInC,EAAStH,GAC/Bp4C,KAAK0hD,cAAchqD,KAAKwpD,GAErB9I,IAAY0J,GAAUC,IACvBF,EAAU,MAAQ7hD,KAAK2gD,mBAAmBmB,EAAQrF,EAAOrE,IAE3Dp4C,KAAKgiD,SAASd,EAAaW,EAAWpF,GACtCyE,EAAcW,CAChB,CACAV,EAAW,GACX7lD,EAAI8lD,CACN,CACF,MAEAD,GAAY3J,EAAQl8C,EAExB,CACA,OAAO2lD,EAAO3L,KAChB,EAEA,SAAS0M,EAASd,EAAaW,EAAWpF,GACxC,MAAM5tC,EAAS7O,KAAKgC,QAAQu9C,UAAUsC,EAAUpK,QAASgF,EAAOoF,EAAU,QAC5D,IAAXhzC,IACwB,iBAAXA,GACdgzC,EAAUpK,QAAU5oC,EACpBqyC,EAAYc,SAASH,IAErBX,EAAYc,SAASH,GAEzB,CAEA,MAAM9F,EAAuB,SAAStoC,GAEpC,GAAGzT,KAAKgC,QAAQ04C,gBAAgB,CAC9B,IAAI,IAAIoD,KAAc99C,KAAKkiD,gBAAgB,CACzC,MAAM3F,EAASv8C,KAAKkiD,gBAAgBpE,GACpCrqC,EAAMA,EAAIhT,QAAS87C,EAAOiC,KAAMjC,EAAO9oC,IACzC,CACA,IAAI,IAAIqqC,KAAc99C,KAAKigD,aAAa,CACtC,MAAM1D,EAASv8C,KAAKigD,aAAanC,GACjCrqC,EAAMA,EAAIhT,QAAS87C,EAAO1F,MAAO0F,EAAO9oC,IAC1C,CACA,GAAGzT,KAAKgC,QAAQk9C,aACd,IAAI,IAAIpB,KAAc99C,KAAKk/C,aAAa,CACtC,MAAM3C,EAASv8C,KAAKk/C,aAAapB,GACjCrqC,EAAMA,EAAIhT,QAAS87C,EAAO1F,MAAO0F,EAAO9oC,IAC1C,CAEFA,EAAMA,EAAIhT,QAAST,KAAKuiD,UAAU1L,MAAO72C,KAAKuiD,UAAU9uC,IAC1D,CACA,OAAOA,CACT,EACA,SAAS8tC,EAAoBJ,EAAUD,EAAazE,EAAO4D,GAezD,OAdIc,SACgBt7C,IAAfw6C,IAA0BA,EAAuD,IAA1C3hD,OAAOyI,KAAK+5C,EAAY5L,OAAOr+C,aASxD4O,KAPjBs7C,EAAWnhD,KAAKkgD,cAAciB,EAC5BD,EAAYzJ,QACZgF,GACA,IACAyE,EAAY,OAAkD,IAA1CxiD,OAAOyI,KAAK+5C,EAAY,OAAOjqD,OACnDopD,KAEyC,KAAbc,GAC5BD,EAAYp0C,IAAI9M,KAAKgC,QAAQ83C,aAAcqH,GAC7CA,EAAW,IAENA,CACT,CASA,SAASiB,EAAazH,EAAW8B,EAAO+F,GACtC,MAAMC,EAAc,KAAOD,EAC3B,IAAK,MAAME,KAAgB/H,EAAW,CACpC,MAAMgI,EAAchI,EAAU+H,GAC9B,GAAID,IAAgBE,GAAelG,IAAUkG,EAAe,OAAO,CACrE,CACA,OAAO,CACT,CAsCA,SAAStB,EAAiB7J,EAASn8C,EAAKC,EAAGsnD,GACzC,MAAMC,EAAerL,EAAQj4C,QAAQlE,EAAKC,GAC1C,IAAqB,IAAlBunD,EACD,MAAM,IAAItqD,MAAMqqD,GAEhB,OAAOC,EAAexnD,EAAIpE,OAAS,CAEvC,CAEA,SAAS2qD,EAAWpK,EAAQl8C,EAAGmjD,EAAgBqE,EAAc,KAC3D,MAAMj0C,EAxCR,SAAgC2oC,EAASl8C,EAAGwnD,EAAc,KACxD,IAAIC,EACAjB,EAAS,GACb,IAAK,IAAItgC,EAAQlmB,EAAGkmB,EAAQg2B,EAAQvgD,OAAQuqB,IAAS,CACnD,IAAIwhC,EAAKxL,EAAQh2B,GACjB,GAAIuhC,EACIC,IAAOD,IAAcA,EAAe,SACrC,GAAW,MAAPC,GAAqB,MAAPA,EACrBD,EAAeC,OACZ,GAAIA,IAAOF,EAAY,GAAI,CAChC,IAAGA,EAAY,GAQb,MAAO,CACL1wC,KAAM0vC,EACNtgC,MAAOA,GATT,GAAGg2B,EAAQh2B,EAAQ,KAAOshC,EAAY,GACpC,MAAO,CACL1wC,KAAM0vC,EACNtgC,MAAOA,EASf,KAAkB,OAAPwhC,IACTA,EAAK,KAEPlB,GAAUkB,CACZ,CACF,CAYiBC,CAAuBzL,EAASl8C,EAAE,EAAGwnD,GACpD,IAAIj0C,EAAQ,OACZ,IAAIizC,EAASjzC,EAAOuD,KACpB,MAAMgvC,EAAavyC,EAAO2S,MACpB0hC,EAAiBpB,EAAOqB,OAAO,MACrC,IAAI/K,EAAU0J,EACVC,GAAiB,EAMrB,IALuB,IAApBmB,IACD9K,EAAU0J,EAAOptC,OAAO,EAAGwuC,GAAgBziD,QAAQ,SAAU,IAC7DqhD,EAASA,EAAOptC,OAAOwuC,EAAiB,IAGvCzE,EAAe,CAChB,MAAM6C,EAAalJ,EAAQ74C,QAAQ,MAChB,IAAhB+hD,IACDlJ,EAAUA,EAAQ1jC,OAAO4sC,EAAW,GACpCS,EAAiB3J,IAAYvpC,EAAOuD,KAAKsC,OAAO4sC,EAAa,GAEjE,CAEA,MAAO,CACLlJ,QAASA,EACT0J,OAAQA,EACRV,WAAYA,EACZW,eAAgBA,EAEpB,CAOA,SAASO,EAAiB9K,EAASY,EAAS98C,GAC1C,MAAM07C,EAAa17C,EAEnB,IAAI8nD,EAAe,EAEnB,KAAO9nD,EAAIk8C,EAAQvgD,OAAQqE,IACzB,GAAmB,MAAfk8C,EAAQl8C,GACV,GAAqB,MAAjBk8C,EAAQl8C,EAAE,GAAY,CACtB,MAAM8lD,EAAaC,EAAiB7J,EAAS,IAAKl8C,EAAG,GAAG88C,mBAExD,GADmBZ,EAAQ/3C,UAAUnE,EAAE,EAAE8lD,GAAYnzC,SACjCmqC,IAClBgL,IACqB,IAAjBA,GACF,MAAO,CACLf,WAAY7K,EAAQ/3C,UAAUu3C,EAAY17C,GAC1CA,EAAI8lD,GAIV9lD,EAAE8lD,CACJ,MAAO,GAAoB,MAAjB5J,EAAQl8C,EAAE,GAAY,CAE9BA,EADmB+lD,EAAiB7J,EAAS,KAAMl8C,EAAE,EAAG,0BAE1D,MAAO,GAAgC,QAA7Bk8C,EAAQ9iC,OAAOpZ,EAAI,EAAG,GAAc,CAE5CA,EADmB+lD,EAAiB7J,EAAS,SAAOl8C,EAAE,EAAG,0BAE3D,MAAO,GAAgC,OAA7Bk8C,EAAQ9iC,OAAOpZ,EAAI,EAAG,GAAa,CAE3CA,EADmB+lD,EAAiB7J,EAAS,MAAOl8C,EAAG,2BAA6B,CAEtF,KAAO,CACL,MAAMqmD,EAAUC,EAAWpK,EAASl8C,EAAG,KAEvC,GAAIqmD,EAAS,EACSA,GAAWA,EAAQvJ,WACnBA,GAAuD,MAA5CuJ,EAAQG,OAAOH,EAAQG,OAAO7qD,OAAO,IAClEmsD,IAEF9nD,EAAEqmD,EAAQP,UACZ,CACF,CAGR,CAEA,SAASb,EAAW9sC,EAAK4vC,EAAarhD,GACpC,GAAIqhD,GAA8B,iBAAR5vC,EAAkB,CAE1C,MAAMqoC,EAASroC,EAAIxF,OACnB,MAAc,SAAX6tC,GACgB,UAAXA,GACI8D,EAASnsC,EAAKzR,EAC5B,CACE,OAAIk1C,EAAKZ,QAAQ7iC,GACRA,EAEA,EAGb,CAGAhV,EAAOnF,QA5jBP,MACEwG,YAAYkC,GACVhC,KAAKgC,QAAUA,EACfhC,KAAKkhD,YAAc,KACnBlhD,KAAK0hD,cAAgB,GACrB1hD,KAAKkiD,gBAAkB,CAAC,EACxBliD,KAAKigD,aAAe,CAClB,KAAS,CAAEpJ,MAAO,qBAAsBpjC,IAAM,KAC9C,GAAO,CAAEojC,MAAO,mBAAoBpjC,IAAM,KAC1C,GAAO,CAAEojC,MAAO,mBAAoBpjC,IAAM,KAC1C,KAAS,CAAEojC,MAAO,qBAAsBpjC,IAAM,MAEhDzT,KAAKuiD,UAAY,CAAE1L,MAAO,oBAAqBpjC,IAAM,KACrDzT,KAAKk/C,aAAe,CAClB,MAAS,CAAErI,MAAO,iBAAkBpjC,IAAK,KAMzC,KAAS,CAAEojC,MAAO,iBAAkBpjC,IAAK,KACzC,MAAU,CAAEojC,MAAO,kBAAmBpjC,IAAK,KAC3C,IAAQ,CAAEojC,MAAO,gBAAiBpjC,IAAK,KACvC,KAAS,CAAEojC,MAAO,kBAAmBpjC,IAAK,KAC1C,UAAc,CAAEojC,MAAO,iBAAkBpjC,IAAK,KAC9C,IAAQ,CAAEojC,MAAO,gBAAiBpjC,IAAK,KACvC,IAAQ,CAAEojC,MAAO,iBAAkBpjC,IAAK,MAE1CzT,KAAK6/C,oBAAsBA,EAC3B7/C,KAAKghD,SAAWA,EAChBhhD,KAAKkgD,cAAgBA,EACrBlgD,KAAKwgD,iBAAmBA,EACxBxgD,KAAK2gD,mBAAqBA,EAC1B3gD,KAAKoiD,aAAeA,EACpBpiD,KAAK+7C,qBAAuBA,EAC5B/7C,KAAKsiD,iBAAmBA,EACxBtiD,KAAKuhD,oBAAsBA,EAC3BvhD,KAAKgiD,SAAWA,CAClB,0BCrDF,MAAM,aAAEvC,GAAgB,EAAQ,OAC1B6D,EAAmB,EAAQ,QAC3B,SAAEC,GAAY,EAAQ,OACtBxN,EAAY,EAAQ,OAsD1Bt3C,EAAOnF,QApDP,MAEIwG,YAAYkC,GACRhC,KAAK8/C,iBAAmB,CAAC,EACzB9/C,KAAKgC,QAAUy9C,EAAaz9C,EAEhC,CAMAohB,MAAMo0B,EAAQgM,GACV,GAAsB,iBAAZhM,OACJ,KAAIA,EAAQ/kC,SAGd,MAAM,IAAIla,MAAM,mDAFhBi/C,EAAUA,EAAQ/kC,UAGtB,CACA,GAAI+wC,EAAiB,EACO,IAArBA,IAA2BA,EAAmB,CAAC,GAElD,MAAM30C,EAASknC,EAAU+B,SAASN,EAASgM,GAC3C,IAAe,IAAX30C,EACF,MAAMtW,MAAO,GAAGsW,EAAO3M,IAAI+b,OAAOpP,EAAO3M,IAAI7J,QAAQwW,EAAO3M,IAAI22C,MAEpE,CACF,MAAM4K,EAAmB,IAAIH,EAAiBtjD,KAAKgC,SACnDyhD,EAAiB5D,oBAAoB7/C,KAAK8/C,kBAC1C,MAAM4D,EAAgBD,EAAiBzC,SAASxJ,GAChD,OAAGx3C,KAAKgC,QAAQu4C,oBAAmC10C,IAAlB69C,EAAoCA,EACzDH,EAASG,EAAe1jD,KAAKgC,QAC7C,CAOA2hD,UAAU5hD,EAAKlD,GACX,IAA2B,IAAxBA,EAAMU,QAAQ,KACb,MAAM,IAAIhH,MAAM,+BACd,IAAyB,IAAtBwJ,EAAIxC,QAAQ,OAAqC,IAAtBwC,EAAIxC,QAAQ,KAC5C,MAAM,IAAIhH,MAAM,wEACd,GAAa,MAAVsG,EACL,MAAM,IAAItG,MAAM,6CAEhByH,KAAK8/C,iBAAiB/9C,GAAOlD,CAErC,qCCnCJ,SAAS+kD,EAAS/oD,EAAKmH,EAASy6C,GAC9B,IAAIzwB,EACJ,MAAM63B,EAAgB,CAAC,EACvB,IAAK,IAAIvoD,EAAI,EAAGA,EAAIT,EAAI5D,OAAQqE,IAAK,CACnC,MAAMuhD,EAAShiD,EAAIS,GACbwoD,EAAWhH,EAASD,GAC1B,IAAIkH,EAAW,GAIf,GAHwBA,OAAXl+C,IAAV42C,EAAgCqH,EACnBrH,EAAQ,IAAMqH,EAE3BA,IAAa9hD,EAAQ83C,kBACVj0C,IAATmmB,EAAoBA,EAAO6wB,EAAOiH,GAChC93B,GAAQ,GAAK6wB,EAAOiH,OACrB,SAAgBj+C,IAAbi+C,EACP,SACI,GAAGjH,EAAOiH,GAAU,CAExB,IAAIrwC,EAAMmwC,EAAS/G,EAAOiH,GAAW9hD,EAAS+hD,GAC9C,MAAMC,EAASC,EAAUxwC,EAAKzR,GAE3B66C,EAAO,MACRqH,EAAkBzwC,EAAKopC,EAAO,MAAOkH,EAAU/hD,GACZ,IAA5BtD,OAAOyI,KAAKsM,GAAKxc,aAA8C4O,IAA9B4N,EAAIzR,EAAQ83C,eAAgC93C,EAAQi9C,qBAEzD,IAA5BvgD,OAAOyI,KAAKsM,GAAKxc,SACrB+K,EAAQi9C,qBAAsBxrC,EAAIzR,EAAQ83C,cAAgB,GACxDrmC,EAAM,IAHXA,EAAMA,EAAIzR,EAAQ83C,mBAMWj0C,IAA5Bg+C,EAAcC,IAA2BD,EAAc9kD,eAAe+kD,IACnElrD,MAAM+S,QAAQk4C,EAAcC,MAC5BD,EAAcC,GAAY,CAAED,EAAcC,KAE9CD,EAAcC,GAAUpsD,KAAK+b,IAIzBzR,EAAQ2J,QAAQm4C,EAAUC,EAAUC,GACtCH,EAAcC,GAAY,CAACrwC,GAE3BowC,EAAcC,GAAYrwC,CAGhC,EAEF,CAKA,MAHmB,iBAATuY,EACLA,EAAK/0B,OAAS,IAAG4sD,EAAc7hD,EAAQ83C,cAAgB9tB,QAC1CnmB,IAATmmB,IAAoB63B,EAAc7hD,EAAQ83C,cAAgB9tB,GAC5D63B,CACT,CAEA,SAAS/G,EAAS9qC,GAChB,MAAM7K,EAAOzI,OAAOyI,KAAK6K,GACzB,IAAK,IAAI1W,EAAI,EAAGA,EAAI6L,EAAKlQ,OAAQqE,IAAK,CACpC,MAAMyG,EAAMoF,EAAK7L,GACjB,GAAW,OAARyG,EAAc,OAAOA,CAC1B,CACF,CAEA,SAASmiD,EAAiBlyC,EAAK0rC,EAASyG,EAAOniD,GAC7C,GAAI07C,EAAS,CACX,MAAMv2C,EAAOzI,OAAOyI,KAAKu2C,GACnB1hD,EAAMmL,EAAKlQ,OACjB,IAAK,IAAIqE,EAAI,EAAGA,EAAIU,EAAKV,IAAK,CAC5B,MAAM8oD,EAAWj9C,EAAK7L,GAClB0G,EAAQ2J,QAAQy4C,EAAUD,EAAQ,IAAMC,GAAU,GAAM,GAC1DpyC,EAAIoyC,GAAY,CAAE1G,EAAQ0G,IAE1BpyC,EAAIoyC,GAAY1G,EAAQ0G,EAE5B,CACF,CACF,CAEA,SAASH,EAAUjyC,EAAKhQ,GACtB,MAAM,aAAE83C,GAAiB93C,EACnBqiD,EAAY3lD,OAAOyI,KAAK6K,GAAK/a,OAEnC,OAAkB,IAAdotD,KAKY,IAAdA,IACCryC,EAAI8nC,IAA8C,kBAAtB9nC,EAAI8nC,IAAqD,IAAtB9nC,EAAI8nC,GAMxE,CACAxgD,EAAQiqD,SAxGR,SAAkBe,EAAMtiD,GACtB,OAAO4hD,EAAUU,EAAMtiD,EACzB,kCCcAvD,EAAOnF,QAtBP,MACEwG,YAAY23C,GACVz3C,KAAKy3C,QAAUA,EACfz3C,KAAKs1C,MAAQ,GACbt1C,KAAK,MAAQ,CAAC,CAChB,CACA8M,IAAI/K,EAAI0R,GAEK,cAAR1R,IAAqBA,EAAM,cAC9B/B,KAAKs1C,MAAM59C,KAAM,CAAC,CAACqK,GAAM0R,GAC3B,CACAuuC,SAASsC,GACa,cAAjBA,EAAK7M,UAAyB6M,EAAK7M,QAAU,cAC7C6M,EAAK,OAAS5lD,OAAOyI,KAAKm9C,EAAK,OAAOrtD,OAAS,EAChD+I,KAAKs1C,MAAM59C,KAAM,CAAE,CAAC4sD,EAAK7M,SAAU6M,EAAKhP,MAAO,KAAQgP,EAAK,QAE5DtkD,KAAKs1C,MAAM59C,KAAM,CAAE,CAAC4sD,EAAK7M,SAAU6M,EAAKhP,OAE5C,qCCFF,SAASh2C,EAAK+kB,EAAGkO,EAAIjzB,EAAKilD,MACtB,MAAMp7B,EAAI9E,EAAEptB,OACZ,IAAK,IAAIqE,EAAI,EAAGA,EAAI6tB,EAAG7tB,IACnBi3B,GAAKlO,EAAE7oB,WAAWF,GAClBi3B,IAAMA,GAAK,IAAMA,GAAK,IAAMA,GAAK,IAAMA,GAAK,IAAMA,GAAK,IAE3D,OAAOA,IAAM,CACjB,CAxBA7zB,OAAO2B,eAAe/G,EAAS,aAAc,CAAEuF,OAAO,IAQtDS,EAAKilD,KAAO,WAiBZjrD,EAAA,QAAkBgG,EAClBb,EAAOnF,QAAUgG,qBC1BjBb,EAAOnF,QAAyB,iBAAR+vB,KAAmBA,KAAKqC,SAAWqG,OAAOrG,kFCC9D84B,EAAW,IAAIh1C,IACfi1C,EAAoB,IAAIj1C,IACxBk1C,GAAwB,EACxBC,GAAgC,EACpC,SAASC,EAAU3zC,GACf,OAAOA,EAAOxQ,QAAQ,UAAW,KAAKwN,MAC1C,CAIA,SAAS42C,EAAiBC,GACtB,IAAIC,EAAW,IAAI17C,IACf27C,EAAc,GA0BlB,OAzBAF,EAAIE,YAAY5kD,SAAQ,SAAU6kD,GAC9B,GAAgC,uBAA5BA,EAAmBC,KAA+B,CAClD,IAAIC,EAAeF,EAAmB5lD,KAAKR,MACvCumD,EARLR,GADcS,EASmBJ,EAAmBI,KARtClnD,OAAOwsB,KAAKlrB,UAAU4lD,EAAI11C,MAAO01C,EAAI79C,MAS9C89C,EAAeb,EAAkB9jD,IAAIwkD,GACrCG,IAAiBA,EAAan1C,IAAIi1C,GAC9BV,GACAhsD,EAAQ+O,KAAK,+BAAiC09C,EAAjC,iMAKXG,GACNb,EAAkB5oD,IAAIspD,EAAcG,EAAe,IAAIj8C,KAE3Di8C,EAAax4C,IAAIs4C,GACZL,EAAS50C,IAAIi1C,KACdL,EAASj4C,IAAIs4C,GACbJ,EAAYttD,KAAKutD,GAEzB,MAEID,EAAYttD,KAAKutD,GA5B7B,IAAyBI,CA8BrB,KACO,SAAS,QAAS,CAAC,EAAGP,GAAM,CAAEE,YAAaA,GACtD,CAoBA,SAASO,EAAcpnD,GACnB,IAAIqnD,EAAWZ,EAAUzmD,GACzB,IAAKqmD,EAASr0C,IAAIq1C,GAAW,CACzB,IAAIhxC,GAAS,QAAMrW,EAAQ,CACvBwmD,8BAA+BA,EAC/Bc,6BAA8Bd,IAElC,IAAKnwC,GAA0B,aAAhBA,EAAO0wC,KAClB,MAAM,IAAI3sD,MAAM,iCAEpBisD,EAAS3oD,IAAI2pD,EA7BrB,SAAkBE,GACd,IAAIC,EAAU,IAAIt8C,IAAIq8C,EAAIV,aAC1BW,EAAQvlD,SAAQ,SAAUkkD,GAClBA,EAAKe,YACEf,EAAKe,IAChB3mD,OAAOyI,KAAKm9C,GAAMlkD,SAAQ,SAAU2B,GAChC,IAAIlD,EAAQylD,EAAKviD,GACblD,GAA0B,iBAAVA,GAChB8mD,EAAQ74C,IAAIjO,EAEpB,GACJ,IACA,IAAIwmD,EAAMK,EAAIL,IAKd,OAJIA,WACOA,EAAIO,kBACJP,EAAIQ,UAERH,CACX,CAW+BI,CAASjB,EAAiBrwC,IACrD,CACA,OAAOgwC,EAAS7jD,IAAI6kD,EACxB,CACO,SAASO,EAAIC,GAEhB,IADA,IAAIpmD,EAAO,GACFqmD,EAAK,EAAGA,EAAKjtD,UAAU/B,OAAQgvD,IACpCrmD,EAAKqmD,EAAK,GAAKjtD,UAAUitD,GAEL,iBAAbD,IACPA,EAAW,CAACA,IAEhB,IAAIn3C,EAASm3C,EAAS,GAUtB,OATApmD,EAAKQ,SAAQ,SAAU0Q,EAAKxV,GACpBwV,GAAoB,aAAbA,EAAIo0C,KACXr2C,GAAUiC,EAAIu0C,IAAIlnD,OAAOwsB,KAGzB9b,GAAUiC,EAEdjC,GAAUm3C,EAAS1qD,EAAI,EAC3B,IACOiqD,EAAc12C,EACzB,CAcA,IAOWq3C,EAPPC,EACKJ,EADLI,EAbG,WACH3B,EAASthD,QACTuhD,EAAkBvhD,OACtB,EAUIijD,EATG,WACHzB,GAAwB,CAC5B,EAOIyB,EANG,WACHxB,GAAgC,CACpC,EAIIwB,EAHG,WACHxB,GAAgC,CACpC,GAQWuB,EAERH,IAAQA,EAAM,CAAC,IADRA,IAAMI,EAAYD,EAAME,YAAcD,EAAoBD,EAAMG,wBAA0BF,EAAgCD,EAAMI,oCAAsCH,EAA4CD,EAAMK,qCAAuCJ,EAEzQJ,EAAa,QAAIA,EACjB,2CCvHO,SAASS,EAAUC,EAAW/oC,GAGnC,IAFyBwG,QAAQuiC,GAG/B,MAAM,IAAIluD,MAAMmlB,EAEpB,oGCNA,MAAMgpC,EAAmB,GACnBC,EAAsB,EAKrB,SAASpvC,EAAQ1Y,GACtB,OAAO+nD,EAAY/nD,EAAO,GAC5B,CAEA,SAAS+nD,EAAY/nD,EAAOgoD,GAC1B,cAAehoD,GACb,IAAK,SACH,OAAOwtB,KAAK8T,UAAUthC,GAExB,IAAK,WACH,OAAOA,EAAMQ,KAAO,aAAaR,EAAMQ,QAAU,aAEnD,IAAK,SACH,OAON,SAA2BR,EAAOioD,GAChC,GAAc,OAAVjoD,EACF,MAAO,OAGT,GAAIioD,EAAqBjvC,SAAShZ,GAChC,MAAO,aAGT,MAAMgoD,EAAa,IAAIC,EAAsBjoD,GAE7C,GAeF,SAAoBA,GAClB,MAA+B,mBAAjBA,EAAMkZ,MACtB,CAjBMgvC,CAAWloD,GAAQ,CACrB,MAAMmoD,EAAYnoD,EAAMkZ,SAExB,GAAIivC,IAAcnoD,EAChB,MAA4B,iBAAdmoD,EACVA,EACAJ,EAAYI,EAAWH,EAE/B,MAAO,GAAIjuD,MAAM+S,QAAQ9M,GACvB,OA2BJ,SAAqB2T,EAAOq0C,GAC1B,GAAqB,IAAjBr0C,EAAMvb,OACR,MAAO,KAGT,GAAI4vD,EAAW5vD,OAAS0vD,EACtB,MAAO,UAGT,MAAM3qD,EAAM/C,KAAKkN,IAAIugD,EAAkBl0C,EAAMvb,QACvCqd,EAAY9B,EAAMvb,OAAS+E,EAC3B0K,EAAQ,GAEd,IAAK,IAAIpL,EAAI,EAAGA,EAAIU,IAAOV,EACzBoL,EAAMhP,KAAKkvD,EAAYp0C,EAAMlX,GAAIurD,IAGjB,IAAdvyC,EACF5N,EAAMhP,KAAK,mBACF4c,EAAY,GACrB5N,EAAMhP,KAAK,OAAO4c,gBAGpB,MAAO,IAAM5N,EAAM/O,KAAK,MAAQ,GAClC,CAnDWsvD,CAAYpoD,EAAOgoD,GAG5B,OAOF,SAAsBzL,EAAQyL,GAC5B,MAAMv/C,EAAU5I,OAAO4I,QAAQ8zC,GAE/B,GAAuB,IAAnB9zC,EAAQrQ,OACV,MAAO,KAGT,GAAI4vD,EAAW5vD,OAAS0vD,EACtB,MAAO,IAmCX,SAAsBvL,GACpB,MAAM8L,EAAMxoD,OAAO7F,UAAU4Z,SAC1B1Z,KAAKqiD,GACL36C,QAAQ,aAAc,IACtBA,QAAQ,KAAM,IAEjB,GAAY,WAARymD,GAAkD,mBAAvB9L,EAAOt7C,YAA4B,CAChE,MAAMT,EAAO+7C,EAAOt7C,YAAYT,KAEhC,GAAoB,iBAATA,GAA8B,KAATA,EAC9B,OAAOA,CAEX,CAEA,OAAO6nD,CACT,CAlDiBC,CAAa/L,GAAU,IAGtC,MAAMgM,EAAa9/C,EAAQyI,KACzB,EAAEhO,EAAKlD,KAAWkD,EAAM,KAAO6kD,EAAY/nD,EAAOgoD,KAEpD,MAAO,KAAOO,EAAWzvD,KAAK,MAAQ,IACxC,CAtBS0vD,CAAaxoD,EAAOgoD,EAC7B,CA/BaS,CAAkBzoD,EAAOgoD,GAElC,QACE,OAAO1vD,OAAO0H,GAEpB,uKCpBO,MAAM0oD,EAoBXznD,YAAY8lD,EAAYC,EAAU1nD,GAChC6B,KAAK2P,MAAQi2C,EAAWj2C,MACxB3P,KAAKwH,IAAMq+C,EAASr+C,IACpBxH,KAAK4lD,WAAaA,EAClB5lD,KAAK6lD,SAAWA,EAChB7lD,KAAK7B,OAASA,CAChB,CAEYo1B,IAAP/8B,OAAO+8B,eACV,MAAO,UACT,CAEAxb,SACE,MAAO,CACLpI,MAAO3P,KAAK2P,MACZnI,IAAKxH,KAAKwH,IAEd,EAOK,MAAMggD,EAiCX1nD,YAAYolD,EAAMv1C,EAAOnI,EAAKnP,EAAMovD,EAAQ5oD,GAC1CmB,KAAKklD,KAAOA,EACZllD,KAAK2P,MAAQA,EACb3P,KAAKwH,IAAMA,EACXxH,KAAK3H,KAAOA,EACZ2H,KAAKynD,OAASA,EAEdznD,KAAKnB,MAAQA,EACbmB,KAAK81C,KAAO,KACZ91C,KAAK2F,KAAO,IACd,CAEY4tB,IAAP/8B,OAAO+8B,eACV,MAAO,OACT,CAEAxb,SACE,MAAO,CACLmtC,KAAMllD,KAAKklD,KACXrmD,MAAOmB,KAAKnB,MACZxG,KAAM2H,KAAK3H,KACXovD,OAAQznD,KAAKynD,OAEjB,EASK,MAAMC,EAAoB,CAC/BC,KAAM,GACNC,SAAU,CAAC,eACXC,oBAAqB,CACnB,OACA,sBACA,aACA,gBAEFC,mBAAoB,CAAC,WAAY,OAAQ,eAAgB,cACzDC,SAAU,CAAC,QACXC,aAAc,CAAC,cACfC,MAAO,CAAC,QAAS,OAAQ,YAAa,aAAc,gBACpDC,SAAU,CAAC,OAAQ,SACnBC,eAAgB,CAAC,OAAQ,cACzBC,eAAgB,CAAC,gBAAiB,aAAc,gBAChDC,mBAAoB,CAClB,OACA,sBACA,gBACA,aACA,gBAEFC,SAAU,GACVC,WAAY,GACZC,YAAa,GACbC,aAAc,GACdC,UAAW,GACXC,UAAW,GACXC,UAAW,CAAC,UACZC,YAAa,CAAC,UACdC,YAAa,CAAC,OAAQ,SACtBC,UAAW,CAAC,OAAQ,aACpBC,UAAW,CAAC,QACZC,SAAU,CAAC,QACXC,YAAa,CAAC,QACdC,iBAAkB,CAAC,cAAe,aAAc,kBAChDC,wBAAyB,CAAC,QAC1BC,qBAAsB,CAAC,cAAe,OAAQ,cAC9CC,qBAAsB,CACpB,cACA,OACA,aACA,aACA,UAEFC,gBAAiB,CAAC,cAAe,OAAQ,YAAa,OAAQ,cAC9DC,qBAAsB,CACpB,cACA,OACA,OACA,eACA,cAEFC,wBAAyB,CACvB,cACA,OACA,aACA,aACA,UAEFC,oBAAqB,CAAC,cAAe,OAAQ,aAAc,SAC3DC,mBAAoB,CAAC,cAAe,OAAQ,aAAc,UAC1DC,oBAAqB,CAAC,cAAe,OAAQ,cAC7CC,0BAA2B,CAAC,cAAe,OAAQ,aAAc,UACjEC,oBAAqB,CAAC,cAAe,OAAQ,YAAa,aAC1DC,gBAAiB,CAAC,aAAc,kBAChCC,oBAAqB,CAAC,OAAQ,cAC9BC,oBAAqB,CAAC,OAAQ,aAAc,aAAc,UAC1DC,uBAAwB,CAAC,OAAQ,aAAc,aAAc,UAC7DC,mBAAoB,CAAC,OAAQ,aAAc,SAC3CC,kBAAmB,CAAC,OAAQ,aAAc,UAC1CC,yBAA0B,CAAC,OAAQ,aAAc,WAE7CC,EAAa,IAAIjhD,IAAI3K,OAAOyI,KAAKugD,IAKhC,SAAS6C,EAAOC,GACrB,MAAMC,EACJD,aAA6C,EAASA,EAAUtF,KAClE,MAA4B,iBAAduF,GAA0BH,EAAWn6C,IAAIs6C,EACzD,CAGA,IAAIC,GAEJ,SAAWA,GACTA,EAAyB,MAAI,QAC7BA,EAA4B,SAAI,WAChCA,EAAgC,aAAI,cACrC,CAJD,CAIGA,IAAsBA,EAAoB,CAAC,+GCnMvC,SAASC,EAAuBjR,GACrC,IAAIkR,EAEJ,IAAIC,EAAexlD,OAAO6jB,iBACtB4hC,EAAoB,KACpBC,GAAoB,EAExB,IAAK,IAAIzvD,EAAI,EAAGA,EAAIo+C,EAAMziD,SAAUqE,EAAG,CACrC,IAAI0vD,EAEJ,MAAM3yD,EAAOqhD,EAAMp+C,GACb2vD,EAASC,EAAkB7yD,GAE7B4yD,IAAW5yD,EAAKpB,SAIpB6zD,EAC+C,QAA5CE,EAAqBF,SACC,IAAvBE,EACIA,EACA1vD,EACNyvD,EAAmBzvD,EAET,IAANA,GAAW2vD,EAASJ,IACtBA,EAAeI,GAEnB,CAEA,OAAOvR,EACJ3pC,KAAI,CAAC1X,EAAMiD,IAAa,IAANA,EAAUjD,EAAOA,EAAKS,MAAM+xD,KAC9C/xD,MAC+C,QAA7C8xD,EAAsBE,SACG,IAAxBF,EACEA,EACA,EACJG,EAAmB,EAEzB,CAEA,SAASG,EAAkB7vD,GACzB,IAAIC,EAAI,EAER,KAAOA,EAAID,EAAIpE,SAAU,QAAaoE,EAAIG,WAAWF,OACjDA,EAGJ,OAAOA,CACT,CAgFO,SAAS6vD,EAAiBtsD,EAAOmD,GACtC,MAAMopD,EAAevsD,EAAM4B,QAAQ,OAAQ,SAErCi5C,EAAQ0R,EAAansD,MAAM,gBAC3BosD,EAAgC,IAAjB3R,EAAMziD,OAErBq0D,EACJ5R,EAAMziD,OAAS,GACfyiD,EACG5gD,MAAM,GACNsV,OAAO/V,GAAyB,IAAhBA,EAAKpB,SAAgB,QAAaoB,EAAKmD,WAAW,MAEjE+vD,EAA0BH,EAAa3N,SAAS,SAEhD+N,EAAmB3sD,EAAM4+C,SAAS,OAAS8N,EAC3CE,EAAmB5sD,EAAM4+C,SAAS,MAClCiO,EAAuBF,GAAoBC,EAC3CE,IACF3pD,SAA0CA,EAAQ4pD,aAClDP,GACAxsD,EAAM5H,OAAS,IACfy0D,GACAJ,GACAC,GACJ,IAAI18C,EAAS,GAEb,MAAMg9C,EAAqBR,IAAgB,QAAaxsD,EAAMrD,WAAW,IAYzE,OAVKmwD,IAAyBE,GAAuBP,KACnDz8C,GAAU,MAGZA,GAAUu8C,GAENO,GAAwBD,KAC1B78C,GAAU,MAGL,MAAQA,EAAS,KAC1B,sCCzKO,SAASyoC,EAAar1C,GAC3B,OAAgB,IAATA,GAA4B,KAATA,CAC5B,CASO,SAAS6pD,EAAQ7pD,GACtB,OAAOA,GAAQ,IAAUA,GAAQ,EACnC,CAYO,SAAS8pD,EAAS9pD,GACvB,OACGA,GAAQ,IAAUA,GAAQ,KAC1BA,GAAQ,IAAUA,GAAQ,EAE/B,CAUO,SAAS+pD,EAAY/pD,GAC1B,OAAO8pD,EAAS9pD,IAAkB,KAATA,CAC3B,CAWO,SAASgqD,EAAehqD,GAC7B,OAAO8pD,EAAS9pD,IAAS6pD,EAAQ7pD,IAAkB,KAATA,CAC5C,6IC5DA,IAAIiqD,kCAEJ,SAAWA,GACTA,EAAW,KAAI,OACfA,EAAe,SAAI,WACnBA,EAA2B,qBAAI,sBAC/BA,EAA0B,oBAAI,qBAC9BA,EAAoB,cAAI,eACxBA,EAAY,MAAI,QAChBA,EAAe,SAAI,WACnBA,EAAsB,gBAAI,iBAC1BA,EAAsB,gBAAI,iBAC1BA,EAA0B,oBAAI,qBAC9BA,EAAe,SAAI,WACnBA,EAAU,IAAI,WACdA,EAAY,MAAI,aAChBA,EAAa,OAAI,cACjBA,EAAc,QAAI,eAClBA,EAAW,KAAI,YACfA,EAAW,KAAI,YACfA,EAAW,KAAI,YACfA,EAAa,OAAI,cACjBA,EAAmB,aAAI,cACvBA,EAAgB,UAAI,YACpBA,EAAiB,WAAI,YACrBA,EAAgB,UAAI,WACpBA,EAAoB,cAAI,cACxBA,EAAwB,kBAAI,mBAC5BA,EAAgC,0BAAI,0BACpCA,EAA6B,uBAAI,uBACjCA,EAA6B,uBAAI,uBACjCA,EAAuB,iBAAI,kBAC3BA,EAA6B,uBAAI,uBACjCA,EAAgC,0BAAI,0BACpCA,EAA4B,sBAAI,sBAChCA,EAA2B,qBAAI,qBAC/BA,EAA4B,sBAAI,sBAChCA,EAAmC,6BAAI,4BACvCA,EAA2B,qBAAI,sBAC/BA,EAAuB,iBAAI,kBAC3BA,EAA4B,sBAAI,sBAChCA,EAA4B,sBAAI,sBAChCA,EAA+B,yBAAI,yBACnCA,EAA2B,qBAAI,qBAC/BA,EAA0B,oBAAI,oBAC9BA,EAAkC,4BAAI,0BACvC,CA5CD,CA4CGA,IAASA,EAAO,CAAC,wCCjDb,SAASC,EAAU1F,EAAW/oC,GAGnC,IAFyBwG,QAAQuiC,GAG/B,MAAM,IAAIluD,MACG,MAAXmlB,EAAkBA,EAAU,kCAGlC,kCCPA,MAAM0uC,EAAa,eASZ,SAASC,EAAYluD,EAAQmuD,GAClC,IAAIC,EAAgB,EAChBl0D,EAAO,EAEX,IAAK,MAAM+xC,KAASjsC,EAAOwsB,KAAK2pB,SAAS8X,GAAa,CAGpD,GAFuB,iBAAhBhiB,EAAM5oB,OAAsB2qC,GAAU,GAEzC/hB,EAAM5oB,OAAS8qC,EACjB,MAGFC,EAAgBniB,EAAM5oB,MAAQ4oB,EAAM,GAAGnzC,OACvCoB,GAAQ,CACV,CAEA,MAAO,CACLA,OACAovD,OAAQ6E,EAAW,EAAIC,EAE3B,CCxBO,SAASC,EAActsC,GAC5B,OAAOusC,EACLvsC,EAAS/hB,OACTkuD,EAAYnsC,EAAS/hB,OAAQ+hB,EAASvQ,OAE1C,CAKO,SAAS88C,EAAoBtuD,EAAQuuD,GAC1C,MAAMC,EAAwBxuD,EAAOyuD,eAAenF,OAAS,EACvD98B,EAAO,GAAGkiC,SAASF,GAAyBxuD,EAAOwsB,KACnDmiC,EAAYJ,EAAer0D,KAAO,EAClC00D,EAAa5uD,EAAOyuD,eAAev0D,KAAO,EAC1C20D,EAAUN,EAAer0D,KAAO00D,EAChCE,EAAuC,IAAxBP,EAAer0D,KAAas0D,EAAwB,EACnEO,EAAYR,EAAejF,OAASwF,EACpCE,EAAc,GAAGhvD,EAAOkB,QAAQ2tD,KAAWE,MAC3CxT,EAAQ/uB,EAAK1rB,MAAM,gBACnBmuD,EAAe1T,EAAMoT,GAE3B,GAAIM,EAAan2D,OAAS,IAAK,CAC7B,MAAMo2D,EAAep0D,KAAK8kB,MAAMmvC,EAAY,IACtCI,EAAmBJ,EAAY,GAC/BK,EAAW,GAEjB,IAAK,IAAIjyD,EAAI,EAAGA,EAAI8xD,EAAan2D,OAAQqE,GAAK,GAC5CiyD,EAAS71D,KAAK01D,EAAat0D,MAAMwC,EAAGA,EAAI,KAG1C,OACE6xD,EACAK,EAAmB,CACjB,CAAC,GAAGR,MAAaO,EAAS,OACvBA,EAASz0D,MAAM,EAAGu0D,EAAe,GAAGt9C,KAAK09C,GAAY,CAAC,IAAKA,KAC9D,CAAC,IAAK,IAAIZ,SAASS,IACnB,CAAC,IAAKC,EAASF,EAAe,KAGpC,CAEA,OACEF,EACAK,EAAmB,CAEjB,CAAIR,EAAU,EAAb,KAAoBtT,EAAMoT,EAAY,IACvC,CAAC,GAAGE,MAAaI,GACjB,CAAC,IAAK,IAAIP,SAASK,IACnB,CAAC,GAAGF,EAAU,MAAOtT,EAAMoT,EAAY,KAG7C,CAEA,SAASU,EAAmB9T,GAC1B,MAAMgU,EAAgBhU,EAAM1sC,QAAO,EAAEmT,EAAG9nB,UAAmBwN,IAATxN,IAC5Cs1D,EAAS10D,KAAKue,OAAOk2C,EAAc39C,KAAI,EAAExB,KAAYA,EAAOtX,UAClE,OAAOy2D,EACJ39C,KAAI,EAAExB,EAAQlW,KAAUkW,EAAOs+C,SAASc,IAAWt1D,EAAO,IAAMA,EAAO,MACvEV,KAAK,KACV,CCnCO,MAAMi2D,UAAqBr1D,MA8ChCuH,YAAY4d,KAAYmwC,GACtB,IAAIC,EAAaC,EAAiBnZ,EAElC,MAAM,MAAEoZ,EAAK,OAAE7vD,EAAM,UAAE8vD,EAAS,KAAE3nC,EAAI,cAAE4nC,EAAa,WAAEC,GAxE3D,SAA6BvuD,GAC3B,MAAMwuD,EAAWxuD,EAAK,GAEtB,OAAgB,MAAZwuD,GAAoB,SAAUA,GAAY,WAAYA,EACjD,CACLJ,MAAOI,EACPjwD,OAAQyB,EAAK,GACbquD,UAAWruD,EAAK,GAChB0mB,KAAM1mB,EAAK,GACXsuD,cAAetuD,EAAK,GACpBuuD,WAAYvuD,EAAK,IAIdwuD,CACT,CA0DMC,CAAoBR,GACtB3mD,MAAMwW,GACN1d,KAAKX,KAAO,eACZW,KAAKsmB,KAAOA,QAAmCA,OAAOzgB,EACtD7F,KAAKkuD,cACHA,QACIA,OACAroD,EAEN7F,KAAKguD,MAAQM,EACX11D,MAAM+S,QAAQqiD,GAASA,EAAQA,EAAQ,CAACA,QAASnoD,GAEnD,MAAM0oD,EAAgBD,EACW,QAA9BR,EAAc9tD,KAAKguD,aAAmC,IAAhBF,OACnC,EACAA,EAAY/9C,KAAKu0C,GAASA,EAAKe,MAAKr4C,QAAQq4C,GAAe,MAAPA,KAG1DrlD,KAAK7B,OACHA,QACIA,EACAowD,SAEyC,QAAxCR,EAAkBQ,EAAc,UACb,IAApBR,OAFA,EAIAA,EAAgB5vD,OACtB6B,KAAKiuD,UACHA,QACIA,EACAM,aACA,EACAA,EAAcx+C,KAAKs1C,GAAQA,EAAI11C,QACrC3P,KAAKwuD,UACHP,GAAa9vD,EACT8vD,EAAUl+C,KAAKkH,GAAQo1C,EAAYluD,EAAQ8Y,KAC3Cs3C,aACA,EACAA,EAAcx+C,KAAKs1C,GAAQgH,EAAYhH,EAAIlnD,OAAQknD,EAAI11C,SAC7D,MAAM8+C,EClHe,iBADI5vD,EDoHvBqvD,aACI,EACAA,EAAcC,aCrHuB,OAAVtvD,EDuH7BqvD,aACE,EACAA,EAAcC,gBAChBtoD,EC3HD,IAAsBhH,ED4HzBmB,KAAKmuD,WAI2B,QAH7BvZ,EACCuZ,QACIA,EACAM,SAAyC,IAAT7Z,EAClCA,EACAl2C,OAAOC,OAAO,MAGpBD,OAAOgwD,iBAAiB1uD,KAAM,CAC5B0d,QAAS,CACPxd,UAAU,EACVU,YAAY,GAEdvB,KAAM,CACJuB,YAAY,GAEdotD,MAAO,CACLptD,YAAY,GAEdzC,OAAQ,CACNyC,YAAY,GAEdqtD,UAAW,CACTrtD,YAAY,GAEdstD,cAAe,CACbttD,YAAY,KAQdstD,SAEAA,EAAczwC,MAEd/e,OAAO2B,eAAeL,KAAM,QAAS,CACnCnB,MAAOqvD,EAAczwC,MACrBvd,UAAU,EACVsd,cAAc,IAEPjlB,MAAMo2D,kBACfp2D,MAAMo2D,kBAAkB3uD,KAAM4tD,GAE9BlvD,OAAO2B,eAAeL,KAAM,QAAS,CACnCnB,MAAOtG,QAAQklB,MACfvd,UAAU,EACVsd,cAAc,GAIpB,CAEY+V,IAAP/8B,OAAO+8B,eACV,MAAO,cACT,CAEA9gB,WACE,IAAIm8C,EAAS5uD,KAAK0d,QAElB,GAAI1d,KAAKguD,MACP,IAAK,MAAM1J,KAAQtkD,KAAKguD,MAClB1J,EAAKe,MACPuJ,GAAU,OAASpC,EAAclI,EAAKe,WAGrC,GAAIrlD,KAAK7B,QAAU6B,KAAKwuD,UAC7B,IAAK,MAAMtuC,KAAYlgB,KAAKwuD,UAC1BI,GAAU,OAASnC,EAAoBzsD,KAAK7B,OAAQ+hB,GAIxD,OAAO0uC,CACT,CAEA72C,SACE,MAAM82C,EAAiB,CACrBnxC,QAAS1d,KAAK0d,SAehB,OAZsB,MAAlB1d,KAAKwuD,YACPK,EAAeL,UAAYxuD,KAAKwuD,WAGjB,MAAbxuD,KAAKsmB,OACPuoC,EAAevoC,KAAOtmB,KAAKsmB,MAGN,MAAnBtmB,KAAKmuD,YAAsBzvD,OAAOyI,KAAKnH,KAAKmuD,YAAYl3D,OAAS,IACnE43D,EAAeV,WAAanuD,KAAKmuD,YAG5BU,CACT,EAGF,SAASP,EAAiB97C,GACxB,YAAiB3M,IAAV2M,GAAwC,IAAjBA,EAAMvb,YAAe4O,EAAY2M,CACjE,CE/NO,SAASs8C,EAAY3wD,EAAQmuD,EAAUyC,GAC5C,OAAO,IAAInB,EAAa,iBAAiBmB,IAAe,CACtD5wD,SACA8vD,UAAW,CAAC3B,IAEhB,KCRI0C,cAEJ,SAAWA,GACTA,EAAyB,MAAI,QAC7BA,EAA4B,SAAI,WAChCA,EAAgC,aAAI,eACpCA,EAAyB,MAAI,QAC7BA,EAAuC,oBAAI,sBAC3CA,EAAmC,gBAAI,kBACvCA,EAAmC,gBAAI,kBACvCA,EAAuC,oBAAI,sBAC3CA,EAA0B,OAAI,SAC9BA,EAA0B,OAAI,SAC9BA,EAA0B,OAAI,SAC9BA,EAAoC,iBAAI,mBACxCA,EAAuC,oBAAI,sBAC3CA,EAA6B,UAAI,YACjCA,EAAyB,MAAI,QAC7BA,EAAwB,KAAI,OAC5BA,EAA8B,WAAI,aAClCA,EAAgC,aAAI,eACpCA,EAA0C,uBAAI,wBAC/C,CApBD,CAoBGA,IAAsBA,EAAoB,CAAC,QCrB1C,kCAEJ,SAAWC,GACTA,EAAe,IAAI,QACnBA,EAAe,IAAI,QACnBA,EAAgB,KAAI,IACpBA,EAAkB,OAAI,IACtBA,EAAe,IAAI,IACnBA,EAAmB,QAAI,IACvBA,EAAmB,QAAI,IACvBA,EAAkB,OAAI,MACtBA,EAAiB,MAAI,IACrBA,EAAkB,OAAI,IACtBA,EAAc,GAAI,IAClBA,EAAqB,UAAI,IACzBA,EAAqB,UAAI,IACzBA,EAAmB,QAAI,IACvBA,EAAgB,KAAI,IACpBA,EAAmB,QAAI,IACvBA,EAAgB,KAAI,OACpBA,EAAe,IAAI,MACnBA,EAAiB,MAAI,QACrBA,EAAkB,OAAI,SACtBA,EAAwB,aAAI,cAC5BA,EAAmB,QAAI,SACxB,CAvBD,CAuBG,IAAc,EAAY,CAAC,ICfvB,MAAMC,EAgBXpvD,YAAY3B,GACV,MAAMgxD,EAAmB,IAAI,KAAM,MAAe,EAAG,EAAG,EAAG,GAC3DnvD,KAAK7B,OAASA,EACd6B,KAAKovD,UAAYD,EACjBnvD,KAAKqvD,MAAQF,EACbnvD,KAAK3H,KAAO,EACZ2H,KAAKsvD,UAAY,CACnB,CAEY/7B,IAAP/8B,OAAO+8B,eACV,MAAO,OACT,CAKA+Q,UACEtkC,KAAKovD,UAAYpvD,KAAKqvD,MAEtB,OADervD,KAAKqvD,MAAQrvD,KAAKuvD,WAEnC,CAMAA,YACE,IAAIF,EAAQrvD,KAAKqvD,MAEjB,GAAIA,EAAMnK,OAAS,MACjB,GACE,GAAImK,EAAM1pD,KACR0pD,EAAQA,EAAM1pD,SACT,CAEL,MAAM6pD,EAAYC,EAAczvD,KAAMqvD,EAAM7nD,KAE5C6nD,EAAM1pD,KAAO6pD,EAEbA,EAAU1Z,KAAOuZ,EACjBA,EAAQG,CACV,QACOH,EAAMnK,OAAS,WAG1B,OAAOmK,CACT,EAiCF,SAASK,EAAqBztD,GAC5B,OACGA,GAAQ,GAAUA,GAAQ,OAAYA,GAAQ,OAAUA,GAAQ,OAErE,CAUA,SAAS0tD,EAAyBhlC,EAAMzK,GACtC,OACE0vC,EAAmBjlC,EAAKnvB,WAAW0kB,KACnC2vC,EAAoBllC,EAAKnvB,WAAW0kB,EAAW,GAEnD,CAEA,SAAS0vC,EAAmB3tD,GAC1B,OAAOA,GAAQ,OAAUA,GAAQ,KACnC,CAEA,SAAS4tD,EAAoB5tD,GAC3B,OAAOA,GAAQ,OAAUA,GAAQ,KACnC,CASA,SAAS6tD,EAAiBC,EAAO7vC,GAC/B,MAAMje,EAAO8tD,EAAM5xD,OAAOwsB,KAAKqlC,YAAY9vC,GAE3C,QAAara,IAAT5D,EACF,OAAO,MACF,GAAIA,GAAQ,IAAUA,GAAQ,IAAQ,CAE3C,MAAMyN,EAAOvY,OAAO84D,cAAchuD,GAClC,MAAgB,MAATyN,EAAe,OAAS,IAAIA,IACrC,CAEA,MAAO,KAAOzN,EAAKwQ,SAAS,IAAIoa,cAAcggC,SAAS,EAAG,IAC5D,CAKA,SAASqD,EAAYH,EAAO7K,EAAMv1C,EAAOnI,EAAK3I,GAC5C,MAAMxG,EAAO03D,EAAM13D,KACbwgD,EAAM,EAAIlpC,EAAQogD,EAAMT,UAC9B,OAAO,IAAI,KAAMpK,EAAMv1C,EAAOnI,EAAKnP,EAAMwgD,EAAKh6C,EAChD,CASA,SAAS4wD,EAAcM,EAAOpgD,GAC5B,MAAMgb,EAAOolC,EAAM5xD,OAAOwsB,KACpBwlC,EAAaxlC,EAAK1zB,OACxB,IAAIq1D,EAAW38C,EAEf,KAAO28C,EAAW6D,GAAY,CAC5B,MAAMluD,EAAO0oB,EAAKnvB,WAAW8wD,GAE7B,OAAQrqD,GAeN,KAAK,MAEL,KAAK,EAEL,KAAK,GAEL,KAAK,KAEDqqD,EACF,SAMF,KAAK,KAEDA,IACAyD,EAAM13D,KACR03D,EAAMT,UAAYhD,EAClB,SAEF,KAAK,GAEmC,KAAlC3hC,EAAKnvB,WAAW8wD,EAAW,GAC7BA,GAAY,IAEVA,IAGFyD,EAAM13D,KACR03D,EAAMT,UAAYhD,EAClB,SAGF,KAAK,GAEH,OAAO8D,EAAYL,EAAOzD,GAU5B,KAAK,GAEH,OAAO4D,EAAYH,EAAO,OAAgBzD,EAAUA,EAAW,GAEjE,KAAK,GAEH,OAAO4D,EAAYH,EAAO,SAAkBzD,EAAUA,EAAW,GAEnE,KAAK,GAEH,OAAO4D,EAAYH,EAAO,MAAezD,EAAUA,EAAW,GAEhE,KAAK,GAEH,OAAO4D,EAAYH,EAAO,UAAmBzD,EAAUA,EAAW,GAEpE,KAAK,GAEH,OAAO4D,EAAYH,EAAO,UAAmBzD,EAAUA,EAAW,GAEpE,KAAK,GAEH,GACoC,KAAlC3hC,EAAKnvB,WAAW8wD,EAAW,IACO,KAAlC3hC,EAAKnvB,WAAW8wD,EAAW,GAE3B,OAAO4D,EAAYH,EAAO,SAAkBzD,EAAUA,EAAW,GAGnE,MAEF,KAAK,GAEH,OAAO4D,EAAYH,EAAO,QAAiBzD,EAAUA,EAAW,GAElE,KAAK,GAEH,OAAO4D,EAAYH,EAAO,SAAkBzD,EAAUA,EAAW,GAEnE,KAAK,GAEH,OAAO4D,EAAYH,EAAO,KAAczD,EAAUA,EAAW,GAE/D,KAAK,GAEH,OAAO4D,EAAYH,EAAO,YAAqBzD,EAAUA,EAAW,GAEtE,KAAK,GAEH,OAAO4D,EAAYH,EAAO,YAAqBzD,EAAUA,EAAW,GAEtE,KAAK,IAEH,OAAO4D,EAAYH,EAAO,UAAmBzD,EAAUA,EAAW,GAEpE,KAAK,IAEH,OAAO4D,EAAYH,EAAO,OAAgBzD,EAAUA,EAAW,GAEjE,KAAK,IAEH,OAAO4D,EAAYH,EAAO,UAAmBzD,EAAUA,EAAW,GAGpE,KAAK,GAEH,OACoC,KAAlC3hC,EAAKnvB,WAAW8wD,EAAW,IACO,KAAlC3hC,EAAKnvB,WAAW8wD,EAAW,GAEpB+D,EAAgBN,EAAOzD,GAGzBgE,EAAWP,EAAOzD,GAG7B,IAAI,QAAQrqD,IAAkB,KAATA,EACnB,OAAOsuD,EAAWR,EAAOzD,EAAUrqD,GAGrC,IAAI,QAAYA,GACd,OAAOuuD,EAAST,EAAOzD,GAGzB,MAAMwC,EACJiB,EAAM5xD,OACNmuD,EACS,KAATrqD,EACI,kFACAytD,EAAqBztD,IAAS0tD,EAAyBhlC,EAAM2hC,GAC7D,yBAAyBwD,EAAiBC,EAAOzD,MACjD,sBAAsBwD,EAAiBC,EAAOzD,MAEtD,CAEA,OAAO4D,EAAYH,EAAO,MAAeI,EAAYA,EACvD,CAWA,SAASC,EAAYL,EAAOpgD,GAC1B,MAAMgb,EAAOolC,EAAM5xD,OAAOwsB,KACpBwlC,EAAaxlC,EAAK1zB,OACxB,IAAIq1D,EAAW38C,EAAQ,EAEvB,KAAO28C,EAAW6D,GAAY,CAC5B,MAAMluD,EAAO0oB,EAAKnvB,WAAW8wD,GAE7B,GAAa,KAATrqD,GAA4B,KAATA,EACrB,MAGF,GAAIytD,EAAqBztD,KACrBqqD,MACG,KAAIqD,EAAyBhlC,EAAM2hC,GAGxC,MAFAA,GAAY,CAGd,CACF,CAEA,OAAO4D,EACLH,EACA,UACApgD,EACA28C,EACA3hC,EAAK7xB,MAAM6W,EAAQ,EAAG28C,GAE1B,CA+BA,SAASiE,EAAWR,EAAOpgD,EAAO8gD,GAChC,MAAM9lC,EAAOolC,EAAM5xD,OAAOwsB,KAC1B,IAAI2hC,EAAW38C,EACX1N,EAAOwuD,EACPC,GAAU,EAMd,GAJa,KAATzuD,IACFA,EAAO0oB,EAAKnvB,aAAa8wD,IAGd,KAATrqD,GAGF,GAFAA,EAAO0oB,EAAKnvB,aAAa8wD,IAErB,QAAQrqD,GACV,MAAM6sD,EACJiB,EAAM5xD,OACNmuD,EACA,6CAA6CwD,EAC3CC,EACAzD,YAKNA,EAAWqE,EAAWZ,EAAOzD,EAAUrqD,GACvCA,EAAO0oB,EAAKnvB,WAAW8wD,GAsBzB,GAnBa,KAATrqD,IACFyuD,GAAU,EACVzuD,EAAO0oB,EAAKnvB,aAAa8wD,GACzBA,EAAWqE,EAAWZ,EAAOzD,EAAUrqD,GACvCA,EAAO0oB,EAAKnvB,WAAW8wD,IAGZ,KAATrqD,GAA4B,MAATA,IACrByuD,GAAU,EACVzuD,EAAO0oB,EAAKnvB,aAAa8wD,GAEZ,KAATrqD,GAA4B,KAATA,IACrBA,EAAO0oB,EAAKnvB,aAAa8wD,IAG3BA,EAAWqE,EAAWZ,EAAOzD,EAAUrqD,GACvCA,EAAO0oB,EAAKnvB,WAAW8wD,IAGZ,KAATrqD,IAAmB,QAAYA,GACjC,MAAM6sD,EACJiB,EAAM5xD,OACNmuD,EACA,2CAA2CwD,EACzCC,EACAzD,OAKN,OAAO4D,EACLH,EACAW,EAAU,QAAkB,MAC5B/gD,EACA28C,EACA3hC,EAAK7xB,MAAM6W,EAAO28C,GAEtB,CAKA,SAASqE,EAAWZ,EAAOpgD,EAAO8gD,GAChC,KAAK,QAAQA,GACX,MAAM3B,EACJiB,EAAM5xD,OACNwR,EACA,2CAA2CmgD,EACzCC,EACApgD,OAKN,MAAMgb,EAAOolC,EAAM5xD,OAAOwsB,KAC1B,IAAI2hC,EAAW38C,EAAQ,EAEvB,MAAO,QAAQgb,EAAKnvB,WAAW8wD,OAC3BA,EAGJ,OAAOA,CACT,CAsBA,SAASgE,EAAWP,EAAOpgD,GACzB,MAAMgb,EAAOolC,EAAM5xD,OAAOwsB,KACpBwlC,EAAaxlC,EAAK1zB,OACxB,IAAIq1D,EAAW38C,EAAQ,EACnBihD,EAAatE,EACbztD,EAAQ,GAEZ,KAAOytD,EAAW6D,GAAY,CAC5B,MAAMluD,EAAO0oB,EAAKnvB,WAAW8wD,GAE7B,GAAa,KAATrqD,EAEF,OADApD,GAAS8rB,EAAK7xB,MAAM83D,EAAYtE,GACzB4D,EAAYH,EAAO,SAAkBpgD,EAAO28C,EAAW,EAAGztD,GAGnE,GAAa,KAAToD,EAAJ,CAcA,GAAa,KAATA,GAA4B,KAATA,EACrB,MAGF,GAAIytD,EAAqBztD,KACrBqqD,MACG,KAAIqD,EAAyBhlC,EAAM2hC,GAGxC,MAAMwC,EACJiB,EAAM5xD,OACNmuD,EACA,oCAAoCwD,EAClCC,EACAzD,OAPJA,GAAY,CAUd,CAnBA,KAZA,CACEztD,GAAS8rB,EAAK7xB,MAAM83D,EAAYtE,GAChC,MAAMuE,EAC8B,MAAlClmC,EAAKnvB,WAAW8wD,EAAW,GACW,MAAlC3hC,EAAKnvB,WAAW8wD,EAAW,GACzBwE,EAAgCf,EAAOzD,GACvCyE,EAA6BhB,EAAOzD,GACtC0E,EAAqBjB,EAAOzD,GAClCztD,GAASgyD,EAAOhyD,MAChBytD,GAAYuE,EAAOp5D,KACnBm5D,EAAatE,CAEf,CAoBF,CAEA,MAAMwC,EAAYiB,EAAM5xD,OAAQmuD,EAAU,uBAC5C,CAEA,SAASwE,EAAgCf,EAAOzD,GAC9C,MAAM3hC,EAAOolC,EAAM5xD,OAAOwsB,KAC1B,IAAIsmC,EAAQ,EACRx5D,EAAO,EAEX,KAAOA,EAAO,IAAI,CAChB,MAAMwK,EAAO0oB,EAAKnvB,WAAW8wD,EAAW70D,KAExC,GAAa,MAATwK,EAAiB,CAEnB,GAAIxK,EAAO,IAAMi4D,EAAqBuB,GACpC,MAGF,MAAO,CACLpyD,MAAO1H,OAAO84D,cAAcgB,GAC5Bx5D,OAEJ,CAIA,GAFAw5D,EAASA,GAAS,EAAKC,EAAajvD,GAEhCgvD,EAAQ,EACV,KAEJ,CAEA,MAAMnC,EACJiB,EAAM5xD,OACNmuD,EACA,qCAAqC3hC,EAAK7xB,MACxCwzD,EACAA,EAAW70D,OAGjB,CAEA,SAASs5D,EAA6BhB,EAAOzD,GAC3C,MAAM3hC,EAAOolC,EAAM5xD,OAAOwsB,KACpB1oB,EAAOkvD,EAAiBxmC,EAAM2hC,EAAW,GAE/C,GAAIoD,EAAqBztD,GACvB,MAAO,CACLpD,MAAO1H,OAAO84D,cAAchuD,GAC5BxK,KAAM,GAKV,GAAIm4D,EAAmB3tD,IAGe,KAAlC0oB,EAAKnvB,WAAW8wD,EAAW,IACO,MAAlC3hC,EAAKnvB,WAAW8wD,EAAW,GAC3B,CACA,MAAM8E,EAAeD,EAAiBxmC,EAAM2hC,EAAW,GAEvD,GAAIuD,EAAoBuB,GAOtB,MAAO,CACLvyD,MAAO1H,OAAO84D,cAAchuD,EAAMmvD,GAClC35D,KAAM,GAGZ,CAGF,MAAMq3D,EACJiB,EAAM5xD,OACNmuD,EACA,qCAAqC3hC,EAAK7xB,MAAMwzD,EAAUA,EAAW,OAEzE,CASA,SAAS6E,EAAiBxmC,EAAM2hC,GAG9B,OACG4E,EAAavmC,EAAKnvB,WAAW8wD,KAAc,GAC3C4E,EAAavmC,EAAKnvB,WAAW8wD,EAAW,KAAO,EAC/C4E,EAAavmC,EAAKnvB,WAAW8wD,EAAW,KAAO,EAChD4E,EAAavmC,EAAKnvB,WAAW8wD,EAAW,GAE5C,CAgBA,SAAS4E,EAAajvD,GACpB,OAAOA,GAAQ,IAAUA,GAAQ,GAC7BA,EAAO,GACPA,GAAQ,IAAUA,GAAQ,GAC1BA,EAAO,GACPA,GAAQ,IAAUA,GAAQ,IAC1BA,EAAO,IACN,CACP,CAcA,SAAS+uD,EAAqBjB,EAAOzD,GACnC,MAAM3hC,EAAOolC,EAAM5xD,OAAOwsB,KAG1B,OAFaA,EAAKnvB,WAAW8wD,EAAW,IAGtC,KAAK,GAEH,MAAO,CACLztD,MAAO,IACPpH,KAAM,GAGV,KAAK,GAEH,MAAO,CACLoH,MAAO,KACPpH,KAAM,GAGV,KAAK,GAEH,MAAO,CACLoH,MAAO,IACPpH,KAAM,GAGV,KAAK,GAEH,MAAO,CACLoH,MAAO,KACPpH,KAAM,GAGV,KAAK,IAEH,MAAO,CACLoH,MAAO,KACPpH,KAAM,GAGV,KAAK,IAEH,MAAO,CACLoH,MAAO,KACPpH,KAAM,GAGV,KAAK,IAEH,MAAO,CACLoH,MAAO,KACPpH,KAAM,GAGV,KAAK,IAEH,MAAO,CACLoH,MAAO,KACPpH,KAAM,GAIZ,MAAMq3D,EACJiB,EAAM5xD,OACNmuD,EACA,uCAAuC3hC,EAAK7xB,MAC1CwzD,EACAA,EAAW,OAGjB,CAcA,SAAS+D,EAAgBN,EAAOpgD,GAC9B,MAAMgb,EAAOolC,EAAM5xD,OAAOwsB,KACpBwlC,EAAaxlC,EAAK1zB,OACxB,IAAIq4D,EAAYS,EAAMT,UAClBhD,EAAW38C,EAAQ,EACnBihD,EAAatE,EACb+E,EAAc,GAClB,MAAMC,EAAa,GAEnB,KAAOhF,EAAW6D,GAAY,CAC5B,MAAMluD,EAAO0oB,EAAKnvB,WAAW8wD,GAE7B,GACW,KAATrqD,GACkC,KAAlC0oB,EAAKnvB,WAAW8wD,EAAW,IACO,KAAlC3hC,EAAKnvB,WAAW8wD,EAAW,GAC3B,CACA+E,GAAe1mC,EAAK7xB,MAAM83D,EAAYtE,GACtCgF,EAAW55D,KAAK25D,GAChB,MAAMhC,EAAQa,EACZH,EACA,eACApgD,EACA28C,EAAW,GACX,QAAuBgF,GAAY35D,KAAK,OAI1C,OAFAo4D,EAAM13D,MAAQi5D,EAAWr6D,OAAS,EAClC84D,EAAMT,UAAYA,EACXD,CACT,CAEA,GACW,KAATptD,GACkC,KAAlC0oB,EAAKnvB,WAAW8wD,EAAW,IACO,KAAlC3hC,EAAKnvB,WAAW8wD,EAAW,IACO,KAAlC3hC,EAAKnvB,WAAW8wD,EAAW,GAS7B,GAAa,KAATrqD,GAA4B,KAATA,EAgBvB,GAAIytD,EAAqBztD,KACrBqqD,MACG,KAAIqD,EAAyBhlC,EAAM2hC,GAGxC,MAAMwC,EACJiB,EAAM5xD,OACNmuD,EACA,oCAAoCwD,EAClCC,EACAzD,OAPJA,GAAY,CAUd,MA5BE+E,GAAe1mC,EAAK7xB,MAAM83D,EAAYtE,GACtCgF,EAAW55D,KAAK25D,GAEH,KAATpvD,GAAqD,KAAlC0oB,EAAKnvB,WAAW8wD,EAAW,GAChDA,GAAY,IAEVA,EAGJ+E,EAAc,GACdT,EAAatE,EACbgD,EAAYhD,OAnBZ+E,GAAe1mC,EAAK7xB,MAAM83D,EAAYtE,GACtCsE,EAAatE,EAAW,EAExBA,GAAY,CAkChB,CAEA,MAAMwC,EAAYiB,EAAM5xD,OAAQmuD,EAAU,uBAC5C,CAUA,SAASkE,EAAST,EAAOpgD,GACvB,MAAMgb,EAAOolC,EAAM5xD,OAAOwsB,KACpBwlC,EAAaxlC,EAAK1zB,OACxB,IAAIq1D,EAAW38C,EAAQ,EAEvB,KAAO28C,EAAW6D,GAAY,CAC5B,MAAMluD,EAAO0oB,EAAKnvB,WAAW8wD,GAE7B,KAAI,QAAerqD,GAGjB,QAFEqqD,CAIN,CAEA,OAAO4D,EACLH,EACA,OACApgD,EACA28C,EACA3hC,EAAK7xB,MAAM6W,EAAO28C,GAEtB,0BC73BO,MAAMiF,EAGXvyC,WAAWwyC,SAA+C,eAApCxyC,WAAWwyC,QAAQv5D,IAAIw5D,SACzC,SAAoB5yD,EAAOiB,GACzB,OAAOjB,aAAiBiB,CAC1B,EACA,SAAoBjB,EAAOiB,GACzB,GAAIjB,aAAiBiB,EACnB,OAAO,EAGT,GAAqB,iBAAVjB,GAAgC,OAAVA,EAAgB,CAC/C,IAAI6yD,EAGJ,MAAMlyD,EAAYM,EAAYjH,UAAUrC,OAAO+8B,aAS/C,GAAI/zB,KAPFhJ,OAAO+8B,eAAe10B,EAClBA,EAAMrI,OAAO+8B,aACgC,QAA5Cm+B,EAAqB7yD,EAAMiB,mBACL,IAAvB4xD,OACA,EACAA,EAAmBryD,MAES,CAChC,MAAMsyD,GAAmB,EAAAp6C,EAAA,GAAQ1Y,GACjC,MAAM,IAAItG,MAAM,cAAciH,MAAcmyD,0jBAY9C,CACF,CAEA,OAAO,CACT,ECxCC,MAAMC,EACX9xD,YACE6qB,EACAtrB,EAAO,kBACPutD,EAAiB,CACfv0D,KAAM,EACNovD,OAAQ,IAGM,iBAAT98B,IACL,EAAA67B,EAAA,IAAU,EAAO,qCAAoC,EAAAjvC,EAAA,GAAQoT,OAC/D3qB,KAAK2qB,KAAOA,EACZ3qB,KAAKX,KAAOA,EACZW,KAAK4sD,eAAiBA,EACtB5sD,KAAK4sD,eAAev0D,KAAO,IACzB,EAAAmuD,EAAA,IACE,EACA,6DAEJxmD,KAAK4sD,eAAenF,OAAS,IAC3B,EAAAjB,EAAA,IACE,EACA,8DAEN,CAEYjzB,IAAP/8B,OAAO+8B,eACV,MAAO,QACT,ECxBK,SAASnQ,EAAMjlB,EAAQ6D,GAE5B,OADe,IAAI6vD,EAAO1zD,EAAQ6D,GACpBujD,eAChB,CA6DO,MAAMsM,EACX/xD,YAAY3B,EAAQ6D,EAAU,CAAC,GAC7B,MAAM8vD,EDlCH,SAAkB3zD,GACvB,OAAOozD,EAAWpzD,EAAQyzD,EAC5B,CCgCsBG,CAAS5zD,GAAUA,EAAS,IAAIyzD,EAAOzzD,GACzD6B,KAAKgyD,OAAS,IAAI9C,EAAM4C,GACxB9xD,KAAKi+B,SAAWj8B,EAChBhC,KAAKiyD,cAAgB,CACvB,CAKAC,YACE,MAAM7C,EAAQrvD,KAAKmyD,YAAY,QAC/B,OAAOnyD,KAAKskD,KAAK+K,EAAO,CACtBnK,KAAM,SACNrmD,MAAOwwD,EAAMxwD,OAEjB,CAMA0mD,gBACE,OAAOvlD,KAAKskD,KAAKtkD,KAAKgyD,OAAO3C,MAAO,CAClCnK,KAAM,aACNF,YAAahlD,KAAKoyD,KAChB,MACApyD,KAAKqyD,gBACL,QAGN,CAyBAA,kBACE,GAAIryD,KAAKqwB,KAAK,WACZ,OAAOrwB,KAAKsyD,2BAGd,MAAMC,EAAiBvyD,KAAKwyD,kBACtBC,EAAeF,EACjBvyD,KAAKgyD,OAAOzC,YACZvvD,KAAKgyD,OAAO3C,MAEhB,GAAIoD,EAAavN,OAAS,OAAgB,CACxC,OAAQuN,EAAa5zD,OACnB,IAAK,SACH,OAAOmB,KAAK0yD,wBAEd,IAAK,SACH,OAAO1yD,KAAK2yD,4BAEd,IAAK,OACH,OAAO3yD,KAAK4yD,4BAEd,IAAK,YACH,OAAO5yD,KAAK6yD,+BAEd,IAAK,QACH,OAAO7yD,KAAK8yD,2BAEd,IAAK,OACH,OAAO9yD,KAAK+yD,0BAEd,IAAK,QACH,OAAO/yD,KAAKgzD,iCAEd,IAAK,YACH,OAAOhzD,KAAKizD,2BAGhB,GAAIV,EACF,MAAMzD,EACJ9uD,KAAKgyD,OAAO7zD,OACZ6B,KAAKgyD,OAAO3C,MAAM1/C,MAClB,gFAIJ,OAAQ8iD,EAAa5zD,OACnB,IAAK,QACL,IAAK,WACL,IAAK,eACH,OAAOmB,KAAKsyD,2BAEd,IAAK,WACH,OAAOtyD,KAAKkzD,0BAEd,IAAK,SACH,OAAOlzD,KAAKmzD,2BAElB,CAEA,MAAMnzD,KAAKozD,WAAWX,EACxB,CAQAH,2BACE,MAAM3iD,EAAQ3P,KAAKgyD,OAAO3C,MAE1B,GAAIrvD,KAAKqwB,KAAK,WACZ,OAAOrwB,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,yBACNmO,UAAW,WACXh0D,UAAMwG,EACNytD,oBAAqB,GACrBC,WAAY,GACZC,aAAcxzD,KAAKyzD,sBAIvB,MAAMJ,EAAYrzD,KAAK0zD,qBACvB,IAAIr0D,EAMJ,OAJIW,KAAKqwB,KAAK,UACZhxB,EAAOW,KAAKkyD,aAGPlyD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,yBACNmO,YACAh0D,OACAi0D,oBAAqBtzD,KAAK2zD,2BAC1BJ,WAAYvzD,KAAK4zD,iBAAgB,GACjCJ,aAAcxzD,KAAKyzD,qBAEvB,CAKAC,qBACE,MAAMG,EAAiB7zD,KAAKmyD,YAAY,QAExC,OAAQ0B,EAAeh1D,OACrB,IAAK,QACH,OAAO,WAET,IAAK,WACH,OAAO,cAET,IAAK,eACH,OAAO,kBAGX,MAAMmB,KAAKozD,WAAWS,EACxB,CAKAF,2BACE,OAAO3zD,KAAK8zD,aACV,UACA9zD,KAAK+zD,wBACL,UAEJ,CAKAA,0BACE,OAAO/zD,KAAKskD,KAAKtkD,KAAKgyD,OAAO3C,MAAO,CAClCnK,KAAM,wBACN8O,SAAUh0D,KAAKi0D,gBACflxD,MAAO/C,KAAKmyD,YAAY,SAAkBnyD,KAAKk0D,sBAC/CC,aAAcn0D,KAAKo0D,oBAAoB,UACnCp0D,KAAKq0D,8BACLxuD,EACJ0tD,WAAYvzD,KAAKs0D,wBAErB,CAKAL,gBACE,MAAMtkD,EAAQ3P,KAAKgyD,OAAO3C,MAE1B,OADArvD,KAAKmyD,YAAY,UACVnyD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,aACN7lD,KAAMW,KAAKkyD,aAEf,CAOAuB,oBACE,OAAOzzD,KAAKskD,KAAKtkD,KAAKgyD,OAAO3C,MAAO,CAClCnK,KAAM,kBACNqP,WAAYv0D,KAAKoyD,KACf,UACApyD,KAAKw0D,eACL,YAGN,CAQAA,iBACE,OAAOx0D,KAAKqwB,KAAK,UACbrwB,KAAKy0D,gBACLz0D,KAAK00D,YACX,CAOAA,aACE,MAAM/kD,EAAQ3P,KAAKgyD,OAAO3C,MACpBsF,EAAc30D,KAAKkyD,YACzB,IAAI0C,EACAv1D,EASJ,OAPIW,KAAKo0D,oBAAoB,UAC3BQ,EAAQD,EACRt1D,EAAOW,KAAKkyD,aAEZ7yD,EAAOs1D,EAGF30D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,UACN0P,QACAv1D,OACArG,UAAWgH,KAAK60D,gBAAe,GAC/BtB,WAAYvzD,KAAK4zD,iBAAgB,GACjCJ,aAAcxzD,KAAKqwB,KAAK,WACpBrwB,KAAKyzD,yBACL5tD,GAER,CAKAgvD,eAAeC,GACb,MAAM9tD,EAAO8tD,EAAU90D,KAAK+0D,mBAAqB/0D,KAAKg1D,cACtD,OAAOh1D,KAAK8zD,aAAa,UAAmB9sD,EAAM,UACpD,CAKAguD,cAAcF,GAAU,GACtB,MAAMnlD,EAAQ3P,KAAKgyD,OAAO3C,MACpBhwD,EAAOW,KAAKkyD,YAElB,OADAlyD,KAAKmyD,YAAY,SACVnyD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,aACN7lD,OACAR,MAAOmB,KAAKi1D,kBAAkBH,IAElC,CAEAC,qBACE,OAAO/0D,KAAKg1D,eAAc,EAC5B,CAUAP,gBACE,MAAM9kD,EAAQ3P,KAAKgyD,OAAO3C,MAC1BrvD,KAAKmyD,YAAY,UACjB,MAAM+C,EAAmBl1D,KAAKm1D,sBAAsB,MAEpD,OAAKD,GAAoBl1D,KAAKqwB,KAAK,QAC1BrwB,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,oBACN7lD,KAAMW,KAAKo1D,oBACX7B,WAAYvzD,KAAK4zD,iBAAgB,KAI9B5zD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,oBACNmQ,cAAeH,EAAmBl1D,KAAKs1D,sBAAmBzvD,EAC1D0tD,WAAYvzD,KAAK4zD,iBAAgB,GACjCJ,aAAcxzD,KAAKyzD,qBAEvB,CAQAP,0BACE,MAAMvjD,EAAQ3P,KAAKgyD,OAAO3C,MAK1B,OAJArvD,KAAKu1D,cAAc,aAIgC,IAA/Cv1D,KAAKi+B,SAASwnB,6BACTzlD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,wBACN7lD,KAAMW,KAAKo1D,oBACX9B,oBAAqBtzD,KAAK2zD,2BAC1B0B,eAAgBr1D,KAAKu1D,cAAc,MAAOv1D,KAAKs1D,kBAC/C/B,WAAYvzD,KAAK4zD,iBAAgB,GACjCJ,aAAcxzD,KAAKyzD,sBAIhBzzD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,wBACN7lD,KAAMW,KAAKo1D,oBACXC,eAAgBr1D,KAAKu1D,cAAc,MAAOv1D,KAAKs1D,kBAC/C/B,WAAYvzD,KAAK4zD,iBAAgB,GACjCJ,aAAcxzD,KAAKyzD,qBAEvB,CAKA2B,oBACE,GAAgC,OAA5Bp1D,KAAKgyD,OAAO3C,MAAMxwD,MACpB,MAAMmB,KAAKozD,aAGb,OAAOpzD,KAAKkyD,WACd,CAqBA+C,kBAAkBH,GAChB,MAAMzF,EAAQrvD,KAAKgyD,OAAO3C,MAE1B,OAAQA,EAAMnK,MACZ,KAAK,YACH,OAAOllD,KAAKw1D,UAAUV,GAExB,KAAK,UACH,OAAO90D,KAAKy1D,YAAYX,GAE1B,KAAK,MAEH,OADA90D,KAAK01D,eACE11D,KAAKskD,KAAK+K,EAAO,CACtBnK,KAAM,QACNrmD,MAAOwwD,EAAMxwD,QAGjB,KAAK,QAEH,OADAmB,KAAK01D,eACE11D,KAAKskD,KAAK+K,EAAO,CACtBnK,KAAM,UACNrmD,MAAOwwD,EAAMxwD,QAGjB,KAAK,SACL,KAAK,eACH,OAAOmB,KAAK21D,qBAEd,KAAK,OAGH,OAFA31D,KAAK01D,eAEGrG,EAAMxwD,OACZ,IAAK,OACH,OAAOmB,KAAKskD,KAAK+K,EAAO,CACtBnK,KAAM,YACNrmD,OAAO,IAGX,IAAK,QACH,OAAOmB,KAAKskD,KAAK+K,EAAO,CACtBnK,KAAM,YACNrmD,OAAO,IAGX,IAAK,OACH,OAAOmB,KAAKskD,KAAK+K,EAAO,CACtBnK,KAAM,WAGV,QACE,OAAOllD,KAAKskD,KAAK+K,EAAO,CACtBnK,KAAM,SACNrmD,MAAOwwD,EAAMxwD,QAIrB,KAAK,SACH,GAAIi2D,EAAS,CAGX,GAFA90D,KAAKmyD,YAAY,UAEbnyD,KAAKgyD,OAAO3C,MAAMnK,OAAS,OAAgB,CAC7C,MAAM0Q,EAAU51D,KAAKgyD,OAAO3C,MAAMxwD,MAClC,MAAMiwD,EACJ9uD,KAAKgyD,OAAO7zD,OACZkxD,EAAM1/C,MACN,yBAAyBimD,wBAE7B,CACE,MAAM51D,KAAKozD,WAAW/D,EAE1B,CAEA,OAAOrvD,KAAKi0D,gBAEd,QACE,MAAMj0D,KAAKozD,aAEjB,CAEAiB,yBACE,OAAOr0D,KAAKi1D,mBAAkB,EAChC,CAEAU,qBACE,MAAMtG,EAAQrvD,KAAKgyD,OAAO3C,MAE1B,OADArvD,KAAK01D,eACE11D,KAAKskD,KAAK+K,EAAO,CACtBnK,KAAM,WACNrmD,MAAOwwD,EAAMxwD,MACbg3D,MAAOxG,EAAMnK,OAAS,gBAE1B,CAOAsQ,UAAUV,GAGR,OAAO90D,KAAKskD,KAAKtkD,KAAKgyD,OAAO3C,MAAO,CAClCnK,KAAM,SACNvpD,OAAQqE,KAAK07B,IAAI,aAJN,IAAM17B,KAAKi1D,kBAAkBH,IAII,cAEhD,CASAW,YAAYX,GAGV,OAAO90D,KAAKskD,KAAKtkD,KAAKgyD,OAAO3C,MAAO,CAClCnK,KAAM,WACN4Q,OAAQ91D,KAAK07B,IAAI,WAJN,IAAM17B,KAAK+1D,iBAAiBjB,IAIG,YAE9C,CAKAiB,iBAAiBjB,GACf,MAAMnlD,EAAQ3P,KAAKgyD,OAAO3C,MACpBhwD,EAAOW,KAAKkyD,YAElB,OADAlyD,KAAKmyD,YAAY,SACVnyD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,iBACN7lD,OACAR,MAAOmB,KAAKi1D,kBAAkBH,IAElC,CAMAlB,gBAAgBkB,GACd,MAAMvB,EAAa,GAEnB,KAAOvzD,KAAKqwB,KAAK,OACfkjC,EAAW77D,KAAKsI,KAAKg2D,eAAelB,IAGtC,OAAOvB,CACT,CAEAe,uBACE,OAAOt0D,KAAK4zD,iBAAgB,EAC9B,CAOAoC,eAAelB,GACb,MAAMnlD,EAAQ3P,KAAKgyD,OAAO3C,MAE1B,OADArvD,KAAKmyD,YAAY,MACVnyD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,cACN7lD,KAAMW,KAAKkyD,YACXl5D,UAAWgH,KAAK60D,eAAeC,IAEnC,CASAZ,qBACE,MAAMvkD,EAAQ3P,KAAKgyD,OAAO3C,MAC1B,IAAItsD,EAEJ,GAAI/C,KAAKo0D,oBAAoB,aAAsB,CACjD,MAAM6B,EAAYj2D,KAAKk0D,qBACvBl0D,KAAKmyD,YAAY,aACjBpvD,EAAO/C,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,cACNniD,KAAMkzD,GAEV,MACElzD,EAAO/C,KAAKs1D,iBAGd,OAAIt1D,KAAKo0D,oBAAoB,QACpBp0D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,kBACNniD,SAIGA,CACT,CAKAuyD,iBACE,OAAOt1D,KAAKskD,KAAKtkD,KAAKgyD,OAAO3C,MAAO,CAClCnK,KAAM,eACN7lD,KAAMW,KAAKkyD,aAEf,CAEAM,kBACE,OAAOxyD,KAAKqwB,KAAK,WAAqBrwB,KAAKqwB,KAAK,eAClD,CAKA6lC,mBACE,GAAIl2D,KAAKwyD,kBACP,OAAOxyD,KAAK21D,oBAEhB,CAOAjD,wBACE,MAAM/iD,EAAQ3P,KAAKgyD,OAAO3C,MACpBN,EAAc/uD,KAAKk2D,mBACzBl2D,KAAKu1D,cAAc,UACnB,MAAMhC,EAAavzD,KAAKs0D,uBAClB6B,EAAiBn2D,KAAKoyD,KAC1B,UACApyD,KAAKo2D,6BACL,WAEF,OAAOp2D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,sBACN6J,cACAwE,aACA4C,kBAEJ,CAKAC,+BACE,MAAMzmD,EAAQ3P,KAAKgyD,OAAO3C,MACpBgE,EAAYrzD,KAAK0zD,qBACvB1zD,KAAKmyD,YAAY,SACjB,MAAMpvD,EAAO/C,KAAKs1D,iBAClB,OAAOt1D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,8BACNmO,YACAtwD,QAEJ,CAKA4vD,4BACE,MAAMhjD,EAAQ3P,KAAKgyD,OAAO3C,MACpBN,EAAc/uD,KAAKk2D,mBACzBl2D,KAAKu1D,cAAc,UACnB,MAAMl2D,EAAOW,KAAKkyD,YACZqB,EAAavzD,KAAKs0D,uBACxB,OAAOt0D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,2BACN6J,cACA1vD,OACAk0D,cAEJ,CAOAX,4BACE,MAAMjjD,EAAQ3P,KAAKgyD,OAAO3C,MACpBN,EAAc/uD,KAAKk2D,mBACzBl2D,KAAKu1D,cAAc,QACnB,MAAMl2D,EAAOW,KAAKkyD,YACZmE,EAAar2D,KAAKs2D,4BAClB/C,EAAavzD,KAAKs0D,uBAClBwB,EAAS91D,KAAKu2D,wBACpB,OAAOv2D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,2BACN6J,cACA1vD,OACAg3D,aACA9C,aACAuC,UAEJ,CAOAQ,4BACE,OAAOt2D,KAAKm1D,sBAAsB,cAC9Bn1D,KAAKw2D,cAAc,MAAex2D,KAAKs1D,gBACvC,EACN,CAOAiB,wBACE,OAAOv2D,KAAK8zD,aACV,UACA9zD,KAAKy2D,qBACL,UAEJ,CAMAA,uBACE,MAAM9mD,EAAQ3P,KAAKgyD,OAAO3C,MACpBN,EAAc/uD,KAAKk2D,mBACnB72D,EAAOW,KAAKkyD,YACZtyD,EAAOI,KAAK02D,oBAClB12D,KAAKmyD,YAAY,SACjB,MAAMpvD,EAAO/C,KAAKk0D,qBACZX,EAAavzD,KAAKs0D,uBACxB,OAAOt0D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,qBACN6J,cACA1vD,OACArG,UAAW4G,EACXmD,OACAwwD,cAEJ,CAKAmD,oBACE,OAAO12D,KAAK8zD,aACV,UACA9zD,KAAK22D,mBACL,UAEJ,CAMAA,qBACE,MAAMhnD,EAAQ3P,KAAKgyD,OAAO3C,MACpBN,EAAc/uD,KAAKk2D,mBACnB72D,EAAOW,KAAKkyD,YAClBlyD,KAAKmyD,YAAY,SACjB,MAAMpvD,EAAO/C,KAAKk0D,qBAClB,IAAIC,EAEAn0D,KAAKo0D,oBAAoB,YAC3BD,EAAen0D,KAAKq0D,0BAGtB,MAAMd,EAAavzD,KAAKs0D,uBACxB,OAAOt0D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,2BACN6J,cACA1vD,OACA0D,OACAoxD,eACAZ,cAEJ,CAMAV,+BACE,MAAMljD,EAAQ3P,KAAKgyD,OAAO3C,MACpBN,EAAc/uD,KAAKk2D,mBACzBl2D,KAAKu1D,cAAc,aACnB,MAAMl2D,EAAOW,KAAKkyD,YACZmE,EAAar2D,KAAKs2D,4BAClB/C,EAAavzD,KAAKs0D,uBAClBwB,EAAS91D,KAAKu2D,wBACpB,OAAOv2D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,8BACN6J,cACA1vD,OACAg3D,aACA9C,aACAuC,UAEJ,CAMAhD,2BACE,MAAMnjD,EAAQ3P,KAAKgyD,OAAO3C,MACpBN,EAAc/uD,KAAKk2D,mBACzBl2D,KAAKu1D,cAAc,SACnB,MAAMl2D,EAAOW,KAAKkyD,YACZqB,EAAavzD,KAAKs0D,uBAClBsC,EAAQ52D,KAAK62D,wBACnB,OAAO72D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,0BACN6J,cACA1vD,OACAk0D,aACAqD,SAEJ,CAOAC,wBACE,OAAO72D,KAAKo0D,oBAAoB,UAC5Bp0D,KAAKw2D,cAAc,OAAgBx2D,KAAKs1D,gBACxC,EACN,CAMAvC,0BACE,MAAMpjD,EAAQ3P,KAAKgyD,OAAO3C,MACpBN,EAAc/uD,KAAKk2D,mBACzBl2D,KAAKu1D,cAAc,QACnB,MAAMl2D,EAAOW,KAAKkyD,YACZqB,EAAavzD,KAAKs0D,uBAClB34D,EAASqE,KAAK82D,4BACpB,OAAO92D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,yBACN6J,cACA1vD,OACAk0D,aACA53D,UAEJ,CAOAm7D,4BACE,OAAO92D,KAAK8zD,aACV,UACA9zD,KAAK+2D,yBACL,UAEJ,CAKAA,2BACE,MAAMpnD,EAAQ3P,KAAKgyD,OAAO3C,MACpBN,EAAc/uD,KAAKk2D,mBACnB72D,EAAOW,KAAKg3D,qBACZzD,EAAavzD,KAAKs0D,uBACxB,OAAOt0D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,0BACN6J,cACA1vD,OACAk0D,cAEJ,CAKAyD,qBACE,GAC8B,SAA5Bh3D,KAAKgyD,OAAO3C,MAAMxwD,OACU,UAA5BmB,KAAKgyD,OAAO3C,MAAMxwD,OACU,SAA5BmB,KAAKgyD,OAAO3C,MAAMxwD,MAElB,MAAMiwD,EACJ9uD,KAAKgyD,OAAO7zD,OACZ6B,KAAKgyD,OAAO3C,MAAM1/C,MAClB,GAAGsnD,EACDj3D,KAAKgyD,OAAO3C,4DAKlB,OAAOrvD,KAAKkyD,WACd,CAMAc,iCACE,MAAMrjD,EAAQ3P,KAAKgyD,OAAO3C,MACpBN,EAAc/uD,KAAKk2D,mBACzBl2D,KAAKu1D,cAAc,SACnB,MAAMl2D,EAAOW,KAAKkyD,YACZqB,EAAavzD,KAAKs0D,uBAClBwB,EAAS91D,KAAKk3D,6BACpB,OAAOl3D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,iCACN6J,cACA1vD,OACAk0D,aACAuC,UAEJ,CAOAoB,6BACE,OAAOl3D,KAAK8zD,aACV,UACA9zD,KAAK22D,mBACL,UAEJ,CAeAxD,2BACE,MAAMV,EAAezyD,KAAKgyD,OAAOzC,YAEjC,GAAIkD,EAAavN,OAAS,OACxB,OAAQuN,EAAa5zD,OACnB,IAAK,SACH,OAAOmB,KAAKm3D,uBAEd,IAAK,SACH,OAAOn3D,KAAKo3D,2BAEd,IAAK,OACH,OAAOp3D,KAAKq3D,2BAEd,IAAK,YACH,OAAOr3D,KAAKs3D,8BAEd,IAAK,QACH,OAAOt3D,KAAKu3D,0BAEd,IAAK,OACH,OAAOv3D,KAAKw3D,yBAEd,IAAK,QACH,OAAOx3D,KAAKy3D,gCAIlB,MAAMz3D,KAAKozD,WAAWX,EACxB,CASA0E,uBACE,MAAMxnD,EAAQ3P,KAAKgyD,OAAO3C,MAC1BrvD,KAAKu1D,cAAc,UACnBv1D,KAAKu1D,cAAc,UACnB,MAAMhC,EAAavzD,KAAKs0D,uBAClB6B,EAAiBn2D,KAAK8zD,aAC1B,UACA9zD,KAAKo2D,6BACL,WAGF,GAA0B,IAAtB7C,EAAWt8D,QAA0C,IAA1Bk/D,EAAel/D,OAC5C,MAAM+I,KAAKozD,aAGb,OAAOpzD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,qBACNqO,aACA4C,kBAEJ,CAMAiB,2BACE,MAAMznD,EAAQ3P,KAAKgyD,OAAO3C,MAC1BrvD,KAAKu1D,cAAc,UACnBv1D,KAAKu1D,cAAc,UACnB,MAAMl2D,EAAOW,KAAKkyD,YACZqB,EAAavzD,KAAKs0D,uBAExB,GAA0B,IAAtBf,EAAWt8D,OACb,MAAM+I,KAAKozD,aAGb,OAAOpzD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,0BACN7lD,OACAk0D,cAEJ,CAQA8D,2BACE,MAAM1nD,EAAQ3P,KAAKgyD,OAAO3C,MAC1BrvD,KAAKu1D,cAAc,UACnBv1D,KAAKu1D,cAAc,QACnB,MAAMl2D,EAAOW,KAAKkyD,YACZmE,EAAar2D,KAAKs2D,4BAClB/C,EAAavzD,KAAKs0D,uBAClBwB,EAAS91D,KAAKu2D,wBAEpB,GACwB,IAAtBF,EAAWp/D,QACW,IAAtBs8D,EAAWt8D,QACO,IAAlB6+D,EAAO7+D,OAEP,MAAM+I,KAAKozD,aAGb,OAAOpzD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,0BACN7lD,OACAg3D,aACA9C,aACAuC,UAEJ,CAQAwB,8BACE,MAAM3nD,EAAQ3P,KAAKgyD,OAAO3C,MAC1BrvD,KAAKu1D,cAAc,UACnBv1D,KAAKu1D,cAAc,aACnB,MAAMl2D,EAAOW,KAAKkyD,YACZmE,EAAar2D,KAAKs2D,4BAClB/C,EAAavzD,KAAKs0D,uBAClBwB,EAAS91D,KAAKu2D,wBAEpB,GACwB,IAAtBF,EAAWp/D,QACW,IAAtBs8D,EAAWt8D,QACO,IAAlB6+D,EAAO7+D,OAEP,MAAM+I,KAAKozD,aAGb,OAAOpzD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,6BACN7lD,OACAg3D,aACA9C,aACAuC,UAEJ,CAOAyB,0BACE,MAAM5nD,EAAQ3P,KAAKgyD,OAAO3C,MAC1BrvD,KAAKu1D,cAAc,UACnBv1D,KAAKu1D,cAAc,SACnB,MAAMl2D,EAAOW,KAAKkyD,YACZqB,EAAavzD,KAAKs0D,uBAClBsC,EAAQ52D,KAAK62D,wBAEnB,GAA0B,IAAtBtD,EAAWt8D,QAAiC,IAAjB2/D,EAAM3/D,OACnC,MAAM+I,KAAKozD,aAGb,OAAOpzD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,yBACN7lD,OACAk0D,aACAqD,SAEJ,CAOAY,yBACE,MAAM7nD,EAAQ3P,KAAKgyD,OAAO3C,MAC1BrvD,KAAKu1D,cAAc,UACnBv1D,KAAKu1D,cAAc,QACnB,MAAMl2D,EAAOW,KAAKkyD,YACZqB,EAAavzD,KAAKs0D,uBAClB34D,EAASqE,KAAK82D,4BAEpB,GAA0B,IAAtBvD,EAAWt8D,QAAkC,IAAlB0E,EAAO1E,OACpC,MAAM+I,KAAKozD,aAGb,OAAOpzD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,wBACN7lD,OACAk0D,aACA53D,UAEJ,CAOA87D,gCACE,MAAM9nD,EAAQ3P,KAAKgyD,OAAO3C,MAC1BrvD,KAAKu1D,cAAc,UACnBv1D,KAAKu1D,cAAc,SACnB,MAAMl2D,EAAOW,KAAKkyD,YACZqB,EAAavzD,KAAKs0D,uBAClBwB,EAAS91D,KAAKk3D,6BAEpB,GAA0B,IAAtB3D,EAAWt8D,QAAkC,IAAlB6+D,EAAO7+D,OACpC,MAAM+I,KAAKozD,aAGb,OAAOpzD,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,gCACN7lD,OACAk0D,aACAuC,UAEJ,CAQA7C,2BACE,MAAMtjD,EAAQ3P,KAAKgyD,OAAO3C,MACpBN,EAAc/uD,KAAKk2D,mBACzBl2D,KAAKu1D,cAAc,aACnBv1D,KAAKmyD,YAAY,MACjB,MAAM9yD,EAAOW,KAAKkyD,YACZtyD,EAAOI,KAAK02D,oBACZgB,EAAa13D,KAAKm1D,sBAAsB,cAC9Cn1D,KAAKu1D,cAAc,MACnB,MAAM/G,EAAYxuD,KAAK23D,0BACvB,OAAO33D,KAAKskD,KAAK30C,EAAO,CACtBu1C,KAAM,yBACN6J,cACA1vD,OACArG,UAAW4G,EACX83D,aACAlJ,aAEJ,CAOAmJ,0BACE,OAAO33D,KAAKw2D,cAAc,OAAgBx2D,KAAK43D,uBACjD,CA6BAA,yBACE,MAAMjoD,EAAQ3P,KAAKgyD,OAAO3C,MACpBhwD,EAAOW,KAAKkyD,YAElB,GAAIxzD,OAAO7F,UAAUkG,eAAehG,KAAKi2D,EAAmB3vD,EAAKR,OAC/D,OAAOQ,EAGT,MAAMW,KAAKozD,WAAWzjD,EACxB,CAQA20C,KAAKsB,EAAYtB,GASf,OARiC,IAA7BtkD,KAAKi+B,SAAS45B,aAChBvT,EAAKe,IAAM,IAAI,KACbO,EACA5lD,KAAKgyD,OAAO5C,UACZpvD,KAAKgyD,OAAO7zD,SAITmmD,CACT,CAKAj0B,KAAK60B,GACH,OAAOllD,KAAKgyD,OAAO3C,MAAMnK,OAASA,CACpC,CAMAiN,YAAYjN,GACV,MAAMmK,EAAQrvD,KAAKgyD,OAAO3C,MAE1B,GAAIA,EAAMnK,OAASA,EAEjB,OADAllD,KAAK01D,eACErG,EAGT,MAAMP,EACJ9uD,KAAKgyD,OAAO7zD,OACZkxD,EAAM1/C,MACN,YAAYmoD,EAAiB5S,aAAgB+R,EAAa5H,MAE9D,CAMA+E,oBAAoBlP,GAGlB,OAFcllD,KAAKgyD,OAAO3C,MAEhBnK,OAASA,IACjBllD,KAAK01D,gBACE,EAIX,CAMAH,cAAc12D,GACZ,MAAMwwD,EAAQrvD,KAAKgyD,OAAO3C,MAE1B,GAAIA,EAAMnK,OAAS,QAAkBmK,EAAMxwD,QAAUA,EAGnD,MAAMiwD,EACJ9uD,KAAKgyD,OAAO7zD,OACZkxD,EAAM1/C,MACN,aAAa9Q,aAAiBo4D,EAAa5H,OAL7CrvD,KAAK01D,cAQT,CAMAP,sBAAsBt2D,GACpB,MAAMwwD,EAAQrvD,KAAKgyD,OAAO3C,MAE1B,OAAIA,EAAMnK,OAAS,QAAkBmK,EAAMxwD,QAAUA,IACnDmB,KAAK01D,gBACE,EAIX,CAKAtC,WAAW2E,GACT,MAAM1I,EACJ0I,QAAyCA,EAAU/3D,KAAKgyD,OAAO3C,MACjE,OAAOP,EACL9uD,KAAKgyD,OAAO7zD,OACZkxD,EAAM1/C,MACN,cAAcsnD,EAAa5H,MAE/B,CAOA3zB,IAAIs8B,EAAUC,EAASC,GACrBl4D,KAAKmyD,YAAY6F,GACjB,MAAMhK,EAAQ,GAEd,MAAQhuD,KAAKo0D,oBAAoB8D,IAC/BlK,EAAMt2D,KAAKugE,EAAQl/D,KAAKiH,OAG1B,OAAOguD,CACT,CAQA8F,aAAakE,EAAUC,EAASC,GAC9B,GAAIl4D,KAAKo0D,oBAAoB4D,GAAW,CACtC,MAAMhK,EAAQ,GAEd,GACEA,EAAMt2D,KAAKugE,EAAQl/D,KAAKiH,cAChBA,KAAKo0D,oBAAoB8D,IAEnC,OAAOlK,CACT,CAEA,MAAO,EACT,CAOAoE,KAAK4F,EAAUC,EAASC,GACtBl4D,KAAKmyD,YAAY6F,GACjB,MAAMhK,EAAQ,GAEd,GACEA,EAAMt2D,KAAKugE,EAAQl/D,KAAKiH,cAChBA,KAAKo0D,oBAAoB8D,IAEnC,OAAOlK,CACT,CAOAwI,cAAc2B,EAAeF,GAC3Bj4D,KAAKo0D,oBAAoB+D,GACzB,MAAMnK,EAAQ,GAEd,GACEA,EAAMt2D,KAAKugE,EAAQl/D,KAAKiH,aACjBA,KAAKo0D,oBAAoB+D,IAElC,OAAOnK,CACT,CAEA0H,eACE,MAAM,UAAE0C,GAAcp4D,KAAKi+B,SAErBoxB,EAAQrvD,KAAKgyD,OAAO1tB,UAE1B,QAAkBz+B,IAAduyD,GAA2B/I,EAAMnK,OAAS,UAC1CllD,KAAKiyD,cAEHjyD,KAAKiyD,cAAgBmG,GACvB,MAAMtJ,EACJ9uD,KAAKgyD,OAAO7zD,OACZkxD,EAAM1/C,MACN,+BAA+ByoD,6BAIvC,EAMF,SAASnB,EAAa5H,GACpB,MAAMxwD,EAAQwwD,EAAMxwD,MACpB,OAAOi5D,EAAiBzI,EAAMnK,OAAkB,MAATrmD,EAAgB,KAAKA,KAAW,GACzE,CAKA,SAASi5D,EAAiB5S,GACxB,OHh6CK,SAA+BA,GACpC,OACEA,IAAS,QACTA,IAAS,UACTA,IAAS,OACTA,IAAS,WACTA,IAAS,WACTA,IAAS,UACTA,IAAS,SACTA,IAAS,UACTA,IAAS,MACTA,IAAS,aACTA,IAAS,aACTA,IAAS,WACTA,IAAS,QACTA,IAAS,SAEb,CG+4CSmT,CAAsBnT,GAAQ,IAAIA,KAAUA,CACrD,qBCn/CAzmD,EAAOnF,QAAU,SAAUke,GAEzB,IAAKA,EAAK,MAAMjf,MAAM,iEAEtB,IAAId,EAAO,EAAG8X,EAAQ7Q,OAAOC,OAAO,MAAO8vC,EAAS/vC,OAAOC,OAAO,MAElE,SAAS2iC,EAAQv/B,EAAKlD,GACpB0Q,EAAMxN,GAAOlD,IACbpH,GACW+f,IACT/f,EAAO,EACPg3C,EAASl/B,EACTA,EAAQ7Q,OAAOC,OAAO,MAE1B,CAEA,MAAO,CACLwR,IAAK,SAAUpO,GACb,YAAsB8D,IAAf0J,EAAMxN,SAAsC8D,IAAhB4oC,EAAO1sC,EAC5C,EACAgvB,OAAQ,SAAUhvB,QACE8D,IAAf0J,EAAMxN,KACPwN,EAAMxN,QAAO8D,QACIA,IAAhB4oC,EAAO1sC,KACR0sC,EAAO1sC,QAAO8D,EAClB,EACAlF,IAAK,SAAUoB,GACb,IAAI+mB,EAAIvZ,EAAMxN,GACd,YAAS8D,IAANijB,EAAwBA,OACFjjB,KAArBijB,EAAI2lB,EAAO1sC,KACbu/B,EAAOv/B,EAAK+mB,GACLA,QAFT,CAIF,EACAjtB,IAAK,SAAUkG,EAAKlD,QACAgH,IAAf0J,EAAMxN,GAAoBwN,EAAMxN,GAAOlD,EACrCyiC,EAAOv/B,EAAKlD,EACnB,EACAqE,MAAO,WACLqM,EAAQ7Q,OAAOC,OAAO,MACtB8vC,EAAS/vC,OAAOC,OAAO,KACzB,EAEJ,kCCzCA,IAAIwR,EAAMzR,OAAO7F,UAAUkG,eACvBwP,EAAS,IASb,SAASskC,IAAU,CA4BnB,SAASylB,EAAGzrD,EAAI0rD,EAASxtD,GACvB/K,KAAK6M,GAAKA,EACV7M,KAAKu4D,QAAUA,EACfv4D,KAAK+K,KAAOA,IAAQ,CACtB,CAaA,SAASytD,EAAYC,EAASC,EAAO7rD,EAAI0rD,EAASxtD,GAChD,GAAkB,mBAAP8B,EACT,MAAM,IAAIlL,UAAU,mCAGtB,IAAIg3D,EAAW,IAAIL,EAAGzrD,EAAI0rD,GAAWE,EAAS1tD,GAC1C6tD,EAAMrqD,EAASA,EAASmqD,EAAQA,EAMpC,OAJKD,EAAQI,QAAQD,GACXH,EAAQI,QAAQD,GAAK/rD,GAC1B4rD,EAAQI,QAAQD,GAAO,CAACH,EAAQI,QAAQD,GAAMD,GADhBF,EAAQI,QAAQD,GAAKlhE,KAAKihE,IADlCF,EAAQI,QAAQD,GAAOD,EAAUF,EAAQK,gBAI7DL,CACT,CASA,SAASM,EAAWN,EAASG,GACI,KAAzBH,EAAQK,aAAoBL,EAAQI,QAAU,IAAIhmB,SAC5C4lB,EAAQI,QAAQD,EAC9B,CASA,SAAS3wD,IACPjI,KAAK64D,QAAU,IAAIhmB,EACnB7yC,KAAK84D,aAAe,CACtB,CAzEIp6D,OAAOC,SACTk0C,EAAOh6C,UAAY6F,OAAOC,OAAO,OAM5B,IAAIk0C,GAASmmB,YAAWzqD,GAAS,IA2ExCtG,EAAapP,UAAUogE,WAAa,WAClC,IACIhvD,EACA5K,EAFA65D,EAAQ,GAIZ,GAA0B,IAAtBl5D,KAAK84D,aAAoB,OAAOI,EAEpC,IAAK75D,KAAS4K,EAASjK,KAAK64D,QACtB1oD,EAAIpX,KAAKkR,EAAQ5K,IAAO65D,EAAMxhE,KAAK6W,EAASlP,EAAKvG,MAAM,GAAKuG,GAGlE,OAAIX,OAAOy6D,sBACFD,EAAMpqD,OAAOpQ,OAAOy6D,sBAAsBlvD,IAG5CivD,CACT,EASAjxD,EAAapP,UAAUugE,UAAY,SAAmBV,GACpD,IAAIE,EAAMrqD,EAASA,EAASmqD,EAAQA,EAChCW,EAAWr5D,KAAK64D,QAAQD,GAE5B,IAAKS,EAAU,MAAO,GACtB,GAAIA,EAASxsD,GAAI,MAAO,CAACwsD,EAASxsD,IAElC,IAAK,IAAIvR,EAAI,EAAG6tB,EAAIkwC,EAASpiE,OAAQw+B,EAAK,IAAI78B,MAAMuwB,GAAI7tB,EAAI6tB,EAAG7tB,IAC7Dm6B,EAAGn6B,GAAK+9D,EAAS/9D,GAAGuR,GAGtB,OAAO4oB,CACT,EASAxtB,EAAapP,UAAUygE,cAAgB,SAAuBZ,GAC5D,IAAIE,EAAMrqD,EAASA,EAASmqD,EAAQA,EAChCU,EAAYp5D,KAAK64D,QAAQD,GAE7B,OAAKQ,EACDA,EAAUvsD,GAAW,EAClBusD,EAAUniE,OAFM,CAGzB,EASAgR,EAAapP,UAAU2K,KAAO,SAAck1D,EAAOa,EAAIC,EAAIC,EAAIC,EAAIC,GACjE,IAAIf,EAAMrqD,EAASA,EAASmqD,EAAQA,EAEpC,IAAK14D,KAAK64D,QAAQD,GAAM,OAAO,EAE/B,IAEIh5D,EACAtE,EAHA89D,EAAYp5D,KAAK64D,QAAQD,GACzB58D,EAAMhD,UAAU/B,OAIpB,GAAImiE,EAAUvsD,GAAI,CAGhB,OAFIusD,EAAUruD,MAAM/K,KAAK45D,eAAelB,EAAOU,EAAUvsD,QAAIhH,GAAW,GAEhE7J,GACN,KAAK,EAAG,OAAOo9D,EAAUvsD,GAAG9T,KAAKqgE,EAAUb,UAAU,EACrD,KAAK,EAAG,OAAOa,EAAUvsD,GAAG9T,KAAKqgE,EAAUb,QAASgB,IAAK,EACzD,KAAK,EAAG,OAAOH,EAAUvsD,GAAG9T,KAAKqgE,EAAUb,QAASgB,EAAIC,IAAK,EAC7D,KAAK,EAAG,OAAOJ,EAAUvsD,GAAG9T,KAAKqgE,EAAUb,QAASgB,EAAIC,EAAIC,IAAK,EACjE,KAAK,EAAG,OAAOL,EAAUvsD,GAAG9T,KAAKqgE,EAAUb,QAASgB,EAAIC,EAAIC,EAAIC,IAAK,EACrE,KAAK,EAAG,OAAON,EAAUvsD,GAAG9T,KAAKqgE,EAAUb,QAASgB,EAAIC,EAAIC,EAAIC,EAAIC,IAAK,EAG3E,IAAKr+D,EAAI,EAAGsE,EAAO,IAAIhH,MAAMoD,EAAK,GAAIV,EAAIU,EAAKV,IAC7CsE,EAAKtE,EAAI,GAAKtC,UAAUsC,GAG1B89D,EAAUvsD,GAAGxV,MAAM+hE,EAAUb,QAAS34D,EACxC,KAAO,CACL,IACIwU,EADAnd,EAASmiE,EAAUniE,OAGvB,IAAKqE,EAAI,EAAGA,EAAIrE,EAAQqE,IAGtB,OAFI89D,EAAU99D,GAAGyP,MAAM/K,KAAK45D,eAAelB,EAAOU,EAAU99D,GAAGuR,QAAIhH,GAAW,GAEtE7J,GACN,KAAK,EAAGo9D,EAAU99D,GAAGuR,GAAG9T,KAAKqgE,EAAU99D,GAAGi9D,SAAU,MACpD,KAAK,EAAGa,EAAU99D,GAAGuR,GAAG9T,KAAKqgE,EAAU99D,GAAGi9D,QAASgB,GAAK,MACxD,KAAK,EAAGH,EAAU99D,GAAGuR,GAAG9T,KAAKqgE,EAAU99D,GAAGi9D,QAASgB,EAAIC,GAAK,MAC5D,KAAK,EAAGJ,EAAU99D,GAAGuR,GAAG9T,KAAKqgE,EAAU99D,GAAGi9D,QAASgB,EAAIC,EAAIC,GAAK,MAChE,QACE,IAAK75D,EAAM,IAAKwU,EAAI,EAAGxU,EAAO,IAAIhH,MAAMoD,EAAK,GAAIoY,EAAIpY,EAAKoY,IACxDxU,EAAKwU,EAAI,GAAKpb,UAAUob,GAG1BglD,EAAU99D,GAAGuR,GAAGxV,MAAM+hE,EAAU99D,GAAGi9D,QAAS34D,GAGpD,CAEA,OAAO,CACT,EAWAqI,EAAapP,UAAU4vC,GAAK,SAAYiwB,EAAO7rD,EAAI0rD,GACjD,OAAOC,EAAYx4D,KAAM04D,EAAO7rD,EAAI0rD,GAAS,EAC/C,EAWAtwD,EAAapP,UAAUkS,KAAO,SAAc2tD,EAAO7rD,EAAI0rD,GACrD,OAAOC,EAAYx4D,KAAM04D,EAAO7rD,EAAI0rD,GAAS,EAC/C,EAYAtwD,EAAapP,UAAU+gE,eAAiB,SAAwBlB,EAAO7rD,EAAI0rD,EAASxtD,GAClF,IAAI6tD,EAAMrqD,EAASA,EAASmqD,EAAQA,EAEpC,IAAK14D,KAAK64D,QAAQD,GAAM,OAAO54D,KAC/B,IAAK6M,EAEH,OADAksD,EAAW/4D,KAAM44D,GACV54D,KAGT,IAAIo5D,EAAYp5D,KAAK64D,QAAQD,GAE7B,GAAIQ,EAAUvsD,GAEVusD,EAAUvsD,KAAOA,GACf9B,IAAQquD,EAAUruD,MAClBwtD,GAAWa,EAAUb,UAAYA,GAEnCQ,EAAW/4D,KAAM44D,OAEd,CACL,IAAK,IAAIt9D,EAAI,EAAG2O,EAAS,GAAIhT,EAASmiE,EAAUniE,OAAQqE,EAAIrE,EAAQqE,KAEhE89D,EAAU99D,GAAGuR,KAAOA,GACnB9B,IAASquD,EAAU99D,GAAGyP,MACtBwtD,GAAWa,EAAU99D,GAAGi9D,UAAYA,IAErCtuD,EAAOvS,KAAK0hE,EAAU99D,IAOtB2O,EAAOhT,OAAQ+I,KAAK64D,QAAQD,GAAyB,IAAlB3uD,EAAOhT,OAAegT,EAAO,GAAKA,EACpE8uD,EAAW/4D,KAAM44D,EACxB,CAEA,OAAO54D,IACT,EASAiI,EAAapP,UAAUghE,mBAAqB,SAA4BnB,GACtE,IAAIE,EAUJ,OARIF,GACFE,EAAMrqD,EAASA,EAASmqD,EAAQA,EAC5B14D,KAAK64D,QAAQD,IAAMG,EAAW/4D,KAAM44D,KAExC54D,KAAK64D,QAAU,IAAIhmB,EACnB7yC,KAAK84D,aAAe,GAGf94D,IACT,EAKAiI,EAAapP,UAAUihE,IAAM7xD,EAAapP,UAAU+gE,eACpD3xD,EAAapP,UAAU2/D,YAAcvwD,EAAapP,UAAU4vC,GAK5DxgC,EAAa8xD,SAAWxrD,EAKxBtG,EAAaA,aAAeA,EAM1BxJ,EAAOnF,QAAU2O,yBC9UnB,MAAM+xD,EAAmB,EAAQ,OAC3BC,EAAmB,EAAQ,MAC3BC,EAAmB,EAAQ,OAC3BC,EAAsB,EAAQ,QAC9B,yBAACC,EAAwB,4BAAEC,EAA2B,mBAAEC,GAAsB,EAAQ,MACtFC,EAAoB,EAAQ,OAC5BC,EAAsB,EAAQ,OAC9BC,EAAyB,EAAQ,OACjCC,EAAmB,EAAQ,OAC3BC,EAAmB,EAAQ,OAC3BC,EAAoB,EAAQ,OAC5BC,EAAiB,EAAQ,OAE/Bp8D,EAAOnF,QAAU,CACf0gE,mBACAC,mBACAC,mBACAC,sBACAI,oBACAC,sBACAJ,2BACAC,8BACAC,qBACAG,yBACAC,mBACAC,mBACAC,oBACAC,uCC1BFvhE,EAAQ0a,KAAO,SAAUrd,EAAQO,EAAQ4jE,EAAMC,EAAMC,GACnD,IAAIzkD,EAAGhD,EACH0nD,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACT9/D,EAAIw/D,EAAQE,EAAS,EAAK,EAC1BxoC,EAAIsoC,GAAQ,EAAI,EAChBz2C,EAAI1tB,EAAOO,EAASoE,GAOxB,IALAA,GAAKk3B,EAELjc,EAAI8N,GAAM,IAAO+2C,GAAU,EAC3B/2C,KAAQ+2C,EACRA,GAASH,EACFG,EAAQ,EAAG7kD,EAAS,IAAJA,EAAW5f,EAAOO,EAASoE,GAAIA,GAAKk3B,EAAG4oC,GAAS,GAKvE,IAHA7nD,EAAIgD,GAAM,IAAO6kD,GAAU,EAC3B7kD,KAAQ6kD,EACRA,GAASL,EACFK,EAAQ,EAAG7nD,EAAS,IAAJA,EAAW5c,EAAOO,EAASoE,GAAIA,GAAKk3B,EAAG4oC,GAAS,GAEvE,GAAU,IAAN7kD,EACFA,EAAI,EAAI4kD,MACH,IAAI5kD,IAAM2kD,EACf,OAAO3nD,EAAIswB,IAAsBr+B,KAAd6e,GAAK,EAAI,GAE5B9Q,GAAQta,KAAKqhB,IAAI,EAAGygD,GACpBxkD,GAAQ4kD,CACV,CACA,OAAQ92C,GAAK,EAAI,GAAK9Q,EAAIta,KAAKqhB,IAAI,EAAG/D,EAAIwkD,EAC5C,EAEAzhE,EAAQ8J,MAAQ,SAAUzM,EAAQkI,EAAO3H,EAAQ4jE,EAAMC,EAAMC,GAC3D,IAAIzkD,EAAGhD,EAAG4B,EACN8lD,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBz+B,EAAe,KAATs+B,EAAc9hE,KAAKqhB,IAAI,GAAI,IAAMrhB,KAAKqhB,IAAI,GAAI,IAAM,EAC1Dhf,EAAIw/D,EAAO,EAAKE,EAAS,EACzBxoC,EAAIsoC,EAAO,GAAK,EAChBz2C,EAAIxlB,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,EAmC1D,IAjCAA,EAAQ5F,KAAKklB,IAAItf,GAEbylB,MAAMzlB,IAAUA,IAAU2G,KAC5B+N,EAAI+Q,MAAMzlB,GAAS,EAAI,EACvB0X,EAAI2kD,IAEJ3kD,EAAItd,KAAK8kB,MAAM9kB,KAAKN,IAAIkG,GAAS5F,KAAKoiE,KAClCx8D,GAASsW,EAAIlc,KAAKqhB,IAAI,GAAI/D,IAAM,IAClCA,IACApB,GAAK,IAGLtW,GADE0X,EAAI4kD,GAAS,EACN1+B,EAAKtnB,EAELsnB,EAAKxjC,KAAKqhB,IAAI,EAAG,EAAI6gD,IAEpBhmD,GAAK,IACfoB,IACApB,GAAK,GAGHoB,EAAI4kD,GAASD,GACf3nD,EAAI,EACJgD,EAAI2kD,GACK3kD,EAAI4kD,GAAS,GACtB5nD,GAAM1U,EAAQsW,EAAK,GAAKlc,KAAKqhB,IAAI,EAAGygD,GACpCxkD,GAAQ4kD,IAER5nD,EAAI1U,EAAQ5F,KAAKqhB,IAAI,EAAG6gD,EAAQ,GAAKliE,KAAKqhB,IAAI,EAAGygD,GACjDxkD,EAAI,IAIDwkD,GAAQ,EAAGpkE,EAAOO,EAASoE,GAAS,IAAJiY,EAAUjY,GAAKk3B,EAAGjf,GAAK,IAAKwnD,GAAQ,GAI3E,IAFAxkD,EAAKA,GAAKwkD,EAAQxnD,EAClB0nD,GAAQF,EACDE,EAAO,EAAGtkE,EAAOO,EAASoE,GAAS,IAAJib,EAAUjb,GAAKk3B,EAAGjc,GAAK,IAAK0kD,GAAQ,GAE1EtkE,EAAOO,EAASoE,EAAIk3B,IAAU,IAAJnO,CAC5B,kCC/EA,SAASuL,EAAOpd,EAAOxQ,GACjBA,EAAUA,GAAW,CAAC,EAE1BhC,KAAK+vB,MAAQ,EACb/vB,KAAKgwB,MAAQ,EACbhwB,KAAK6vB,UAAY7tB,EAAQ8tB,SACzB9vB,KAAKkwB,cAAgB,EACrBlwB,KAAKmwB,MAAQ,IAAIv3B,MAAM,GACnBA,MAAM+S,QAAQ6G,IAChBxS,KAAKiwB,WAAWzd,EAEpB,CAgBAod,EAAO/2B,UAAUu3B,OAAS,SAAgB5O,GACxC,IAAIlmB,EAAIkmB,EAER,GAAKlmB,KAAW,EAAJA,GAAZ,CAGA,IAAIU,EAAMgE,KAAKvI,OACf,KAAI6D,GAAKU,GAAOV,GAAKU,GAGrB,OAFIV,EAAI,IAAGA,GAAKU,GAChBV,EAAK0E,KAAK+vB,MAAQz0B,EAAK0E,KAAKkwB,cACrBlwB,KAAKmwB,MAAM70B,EALlB,CAMF,EAOAs0B,EAAO/2B,UAAU8H,IAAM,SAAarF,GAClC,OAAO0E,KAAKowB,OAAO90B,EACrB,EAMAs0B,EAAO/2B,UAAUw3B,KAAO,WACtB,GAAIrwB,KAAK+vB,QAAU/vB,KAAKgwB,MACxB,OAAOhwB,KAAKmwB,MAAMnwB,KAAK+vB,MACzB,EAMAH,EAAO/2B,UAAUy3B,UAAY,WAC3B,OAAOtwB,KAAKqwB,MACd,EAMAT,EAAO/2B,UAAU03B,SAAW,WAC1B,OAAOvwB,KAAKowB,QAAQ,EACtB,EAMA1xB,OAAO2B,eAAeuvB,EAAO/2B,UAAW,SAAU,CAChD8H,IAAK,WACH,OAAOX,KAAKvI,MACd,IAOFm4B,EAAO/2B,UAAUpB,KAAO,WACtB,OAAIuI,KAAK+vB,QAAU/vB,KAAKgwB,MAAc,EAClChwB,KAAK+vB,MAAQ/vB,KAAKgwB,MAAchwB,KAAKgwB,MAAQhwB,KAAK+vB,MAC1C/vB,KAAKkwB,cAAgB,GAAKlwB,KAAK+vB,MAAQ/vB,KAAKgwB,MAC1D,EAMAJ,EAAO/2B,UAAU23B,QAAU,SAAiBxpB,GAC1C,QAAanB,IAATmB,EAAoB,OAAOhH,KAAKvI,OACpC,IAAIuE,EAAMgE,KAAKmwB,MAAMl5B,OAKrB,OAJA+I,KAAK+vB,MAAS/vB,KAAK+vB,MAAQ,EAAI/zB,EAAOgE,KAAKkwB,cAC3ClwB,KAAKmwB,MAAMnwB,KAAK+vB,OAAS/oB,EACrBhH,KAAKgwB,QAAUhwB,KAAK+vB,OAAO/vB,KAAKywB,aAChCzwB,KAAK6vB,WAAa7vB,KAAKvI,OAASuI,KAAK6vB,WAAW7vB,KAAK0wB,MACrD1wB,KAAK+vB,MAAQ/vB,KAAKgwB,MAAchwB,KAAKgwB,MAAQhwB,KAAK+vB,MAC1C/vB,KAAKkwB,cAAgB,GAAKlwB,KAAK+vB,MAAQ/vB,KAAKgwB,MAC1D,EAOAJ,EAAO/2B,UAAUuG,MAAQ,WACvB,IAAIuxB,EAAO3wB,KAAK+vB,MAChB,GAAIY,IAAS3wB,KAAKgwB,MAAlB,CACA,IAAIhpB,EAAOhH,KAAKmwB,MAAMQ,GAItB,OAHA3wB,KAAKmwB,MAAMQ,QAAQ9qB,EACnB7F,KAAK+vB,MAASY,EAAO,EAAK3wB,KAAKkwB,cAC3BS,EAAO,GAAK3wB,KAAKgwB,MAAQ,KAAShwB,KAAKgwB,OAAShwB,KAAKmwB,MAAMl5B,SAAW,GAAG+I,KAAK4wB,eAC3E5pB,CALkC,CAM3C,EAMA4oB,EAAO/2B,UAAUnB,KAAO,SAAcsP,GACpC,QAAanB,IAATmB,EAAoB,OAAOhH,KAAKvI,OACpC,IAAIo5B,EAAO7wB,KAAKgwB,MAShB,OARAhwB,KAAKmwB,MAAMU,GAAQ7pB,EACnBhH,KAAKgwB,MAASa,EAAO,EAAK7wB,KAAKkwB,cAC3BlwB,KAAKgwB,QAAUhwB,KAAK+vB,OACtB/vB,KAAKywB,aAEHzwB,KAAK6vB,WAAa7vB,KAAKvI,OAASuI,KAAK6vB,WACvC7vB,KAAKZ,QAEHY,KAAK+vB,MAAQ/vB,KAAKgwB,MAAchwB,KAAKgwB,MAAQhwB,KAAK+vB,MAC1C/vB,KAAKkwB,cAAgB,GAAKlwB,KAAK+vB,MAAQ/vB,KAAKgwB,MAC1D,EAOAJ,EAAO/2B,UAAU63B,IAAM,WACrB,IAAIG,EAAO7wB,KAAKgwB,MAChB,GAAIa,IAAS7wB,KAAK+vB,MAAlB,CACA,IAAI/zB,EAAMgE,KAAKmwB,MAAMl5B,OACrB+I,KAAKgwB,MAASa,EAAO,EAAI70B,EAAOgE,KAAKkwB,cACrC,IAAIlpB,EAAOhH,KAAKmwB,MAAMnwB,KAAKgwB,OAG3B,OAFAhwB,KAAKmwB,MAAMnwB,KAAKgwB,YAASnqB,EACrB7F,KAAK+vB,MAAQ,GAAKc,EAAO,KAASA,GAAQ70B,IAAQ,GAAGgE,KAAK4wB,eACvD5pB,CANkC,CAO3C,EAQA4oB,EAAO/2B,UAAUi4B,UAAY,SAAmBtP,GAC9C,IAAIlmB,EAAIkmB,EAER,GAAKlmB,KAAW,EAAJA,IAGR0E,KAAK+vB,QAAU/vB,KAAKgwB,MAAxB,CACA,IAAIv4B,EAAOuI,KAAKvI,OACZuE,EAAMgE,KAAKmwB,MAAMl5B,OACrB,KAAIqE,GAAK7D,GAAQ6D,GAAK7D,GAAtB,CACI6D,EAAI,IAAGA,GAAK7D,GAChB6D,EAAK0E,KAAK+vB,MAAQz0B,EAAK0E,KAAKkwB,cAC5B,IACItoB,EADAZ,EAAOhH,KAAKmwB,MAAM70B,GAEtB,GAAIkmB,EAAQ/pB,EAAO,EAAG,CACpB,IAAKmQ,EAAI4Z,EAAO5Z,EAAI,EAAGA,IACrB5H,KAAKmwB,MAAM70B,GAAK0E,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,eAEtDlwB,KAAKmwB,MAAM70B,QAAK,EAChB0E,KAAK+vB,MAAS/vB,KAAK+vB,MAAQ,EAAI/zB,EAAOgE,KAAKkwB,aAC7C,KAAO,CACL,IAAKtoB,EAAInQ,EAAO,EAAI+pB,EAAO5Z,EAAI,EAAGA,IAChC5H,KAAKmwB,MAAM70B,GAAK0E,KAAKmwB,MAAM70B,EAAMA,EAAI,EAAIU,EAAOgE,KAAKkwB,eAEvDlwB,KAAKmwB,MAAM70B,QAAK,EAChB0E,KAAKgwB,MAAShwB,KAAKgwB,MAAQ,EAAIh0B,EAAOgE,KAAKkwB,aAC7C,CACA,OAAOlpB,CAlBkC,CAHG,CAsB9C,EAUA4oB,EAAO/2B,UAAUk4B,OAAS,SAAgBvP,EAAO9b,GAC/C,IACIsrB,EADA11B,EAAIkmB,EAEJyP,EAAYvrB,EAEhB,GAAKpK,KAAW,EAAJA,IAGR0E,KAAK+vB,QAAU/vB,KAAKgwB,MAAxB,CACA,IAAIv4B,EAAOuI,KAAKvI,OACZuE,EAAMgE,KAAKmwB,MAAMl5B,OACrB,KAAIqE,GAAK7D,GAAQ6D,GAAK7D,GAAQiO,EAAQ,GAAtC,CAEA,GADIpK,EAAI,IAAGA,GAAK7D,GACF,IAAViO,IAAgBA,EAGlB,OAFAsrB,EAAU,IAAIp4B,MAAM,IACZ,GAAKoH,KAAK8wB,UAAUx1B,GACrB01B,EAET,GAAU,IAAN11B,GAAWA,EAAIoK,GAASjO,EAG1B,OAFAu5B,EAAUhxB,KAAKkxB,UACflxB,KAAKkD,QACE8tB,EAGT,IAAIppB,EAEJ,IAHItM,EAAIoK,EAAQjO,IAAMiO,EAAQjO,EAAO6D,GAErC01B,EAAU,IAAIp4B,MAAM8M,GACfkC,EAAI,EAAGA,EAAIlC,EAAOkC,IACrBopB,EAAQppB,GAAK5H,KAAKmwB,MAAOnwB,KAAK+vB,MAAQz0B,EAAIsM,EAAK5H,KAAKkwB,eAGtD,GADA50B,EAAK0E,KAAK+vB,MAAQz0B,EAAK0E,KAAKkwB,cACxB1O,EAAQ9b,IAAUjO,EAAM,CAE1B,IADAuI,KAAKgwB,MAAShwB,KAAKgwB,MAAQtqB,EAAQ1J,EAAOgE,KAAKkwB,cAC1CtoB,EAAIlC,EAAOkC,EAAI,EAAGA,IACrB5H,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,oBAAiB,EAEvD,OAAOc,CACT,CACA,GAAc,IAAVxP,EAAa,CAEf,IADAxhB,KAAK+vB,MAAS/vB,KAAK+vB,MAAQrqB,EAAQ1J,EAAOgE,KAAKkwB,cAC1CtoB,EAAIlC,EAAQ,EAAGkC,EAAI,EAAGA,IACzB5H,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,oBAAiB,EAEvD,OAAOc,CACT,CACA,GAAI11B,EAAI7D,EAAO,EAAG,CAEhB,IADAuI,KAAK+vB,MAAS/vB,KAAK+vB,MAAQvO,EAAQ9b,EAAQ1J,EAAOgE,KAAKkwB,cAClDtoB,EAAI4Z,EAAO5Z,EAAI,EAAGA,IACrB5H,KAAKwwB,QAAQxwB,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,gBAGnD,IADA50B,EAAK0E,KAAK+vB,MAAQ,EAAI/zB,EAAOgE,KAAKkwB,cAC3Be,EAAY,GACjBjxB,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,oBAAiB,EACrDe,IAEEzP,EAAQ,IAAGxhB,KAAKgwB,MAAQ10B,EAC9B,KAAO,CAGL,IAFA0E,KAAKgwB,MAAQ10B,EACbA,EAAKA,EAAIoK,EAAQ1J,EAAOgE,KAAKkwB,cACxBtoB,EAAInQ,GAAQiO,EAAQ8b,GAAQ5Z,EAAI,EAAGA,IACtC5H,KAAKtI,KAAKsI,KAAKmwB,MAAM70B,MAGvB,IADAA,EAAI0E,KAAKgwB,MACFiB,EAAY,GACjBjxB,KAAKmwB,MAAM70B,EAAKA,EAAI,EAAIU,EAAOgE,KAAKkwB,oBAAiB,EACrDe,GAEJ,CAEA,OADIjxB,KAAK+vB,MAAQ,GAAK/vB,KAAKgwB,MAAQ,KAAShwB,KAAKgwB,OAASh0B,IAAQ,GAAGgE,KAAK4wB,eACnEI,CAzD+C,CAHV,CA6D9C,EAaApB,EAAO/2B,UAAUupB,OAAS,SAAgBZ,EAAO9b,GAC/C,IAAIpK,EAAIkmB,EAER,GAAKlmB,KAAW,EAAJA,GAAZ,CAGA,IAAI7D,EAAOuI,KAAKvI,OAEhB,GADI6D,EAAI,IAAGA,GAAK7D,KACZ6D,EAAI7D,GAAR,CACA,GAAIuB,UAAU/B,OAAS,EAAG,CACxB,IAAI2Q,EACAupB,EACAH,EACAI,EAAUp4B,UAAU/B,OACpB+E,EAAMgE,KAAKmwB,MAAMl5B,OACjBo6B,EAAkB,EACtB,IAAK55B,GAAQ6D,EAAI7D,EAAO,EAAG,CAEzB,IADA05B,EAAO,IAAIv4B,MAAM0C,GACZsM,EAAI,EAAGA,EAAItM,EAAGsM,IACjBupB,EAAKvpB,GAAK5H,KAAKmwB,MAAOnwB,KAAK+vB,MAAQnoB,EAAK5H,KAAKkwB,eAW/C,IATc,IAAVxqB,GACFsrB,EAAU,GACN11B,EAAI,IACN0E,KAAK+vB,MAAS/vB,KAAK+vB,MAAQz0B,EAAIU,EAAOgE,KAAKkwB,iBAG7Cc,EAAUhxB,KAAK+wB,OAAOz1B,EAAGoK,GACzB1F,KAAK+vB,MAAS/vB,KAAK+vB,MAAQz0B,EAAIU,EAAOgE,KAAKkwB,eAEtCkB,EAAUC,GACfrxB,KAAKwwB,QAAQx3B,YAAYo4B,IAE3B,IAAKxpB,EAAItM,EAAGsM,EAAI,EAAGA,IACjB5H,KAAKwwB,QAAQW,EAAKvpB,EAAI,GAE1B,KAAO,CAEL,IAAI0pB,GADJH,EAAO,IAAIv4B,MAAMnB,GAAQ6D,EAAIoK,KACbzO,OAChB,IAAK2Q,EAAI,EAAGA,EAAI0pB,EAAM1pB,IACpBupB,EAAKvpB,GAAK5H,KAAKmwB,MAAOnwB,KAAK+vB,MAAQz0B,EAAIoK,EAAQkC,EAAK5H,KAAKkwB,eAW3D,IATc,IAAVxqB,GACFsrB,EAAU,GACN11B,GAAK7D,IACPuI,KAAKgwB,MAAShwB,KAAK+vB,MAAQz0B,EAAIU,EAAOgE,KAAKkwB,iBAG7Cc,EAAUhxB,KAAK+wB,OAAOz1B,EAAGoK,GACzB1F,KAAKgwB,MAAShwB,KAAKgwB,MAAQsB,EAAOt1B,EAAOgE,KAAKkwB,eAEzCmB,EAAkBD,GACvBpxB,KAAKtI,KAAKsB,UAAUq4B,MAEtB,IAAKzpB,EAAI,EAAGA,EAAI0pB,EAAM1pB,IACpB5H,KAAKtI,KAAKy5B,EAAKvpB,GAEnB,CACA,OAAOopB,CACT,CACE,OAAOhxB,KAAK+wB,OAAOz1B,EAAGoK,EApDG,CAH3B,CAyDF,EAKAkqB,EAAO/2B,UAAUqK,MAAQ,WACvBlD,KAAK+vB,MAAQ,EACb/vB,KAAKgwB,MAAQ,CACf,EAMAJ,EAAO/2B,UAAU04B,QAAU,WACzB,OAAOvxB,KAAK+vB,QAAU/vB,KAAKgwB,KAC7B,EAMAJ,EAAO/2B,UAAUq4B,QAAU,WACzB,OAAOlxB,KAAKwxB,YAAW,EACzB,EAcA5B,EAAO/2B,UAAUo3B,WAAa,SAAoBzd,GAChD,IAAK,IAAIlX,EAAI,EAAGA,EAAIkX,EAAMvb,OAAQqE,IAAK0E,KAAKtI,KAAK8a,EAAMlX,GACzD,EAQAs0B,EAAO/2B,UAAU24B,WAAa,SAAoBE,GAChD,IAGIp2B,EAHAggE,EAAW,GACXtkD,EAAOhX,KAAKmwB,MACZn0B,EAAMgb,EAAK/f,OAEf,GAAIy6B,GAAY1xB,KAAK+vB,MAAQ/vB,KAAKgwB,MAAO,CACvC,IAAK10B,EAAI0E,KAAK+vB,MAAOz0B,EAAIU,EAAKV,IAAKggE,EAAS5jE,KAAKsf,EAAK1b,IACtD,IAAKA,EAAI,EAAGA,EAAI0E,KAAKgwB,MAAO10B,IAAKggE,EAAS5jE,KAAKsf,EAAK1b,GACtD,MACE,IAAKA,EAAI0E,KAAK+vB,MAAOz0B,EAAI0E,KAAKgwB,MAAO10B,IAAKggE,EAAS5jE,KAAKsf,EAAK1b,IAE/D,OAAOggE,CACT,EAMA1rC,EAAO/2B,UAAU43B,WAAa,WACxBzwB,KAAK+vB,QAEP/vB,KAAKmwB,MAAQnwB,KAAKwxB,YAAW,GAC7BxxB,KAAK+vB,MAAQ,GAIf/vB,KAAKgwB,MAAQhwB,KAAKmwB,MAAMl5B,OAExB+I,KAAKmwB,MAAMl5B,SAAW,EACtB+I,KAAKkwB,cAAiBlwB,KAAKkwB,eAAiB,EAAK,CACnD,EAMAN,EAAO/2B,UAAU+3B,aAAe,WAC9B5wB,KAAKmwB,MAAMl5B,UAAY,EACvB+I,KAAKkwB,iBAAmB,CAC1B,EAGAzxB,EAAOnF,QAAUs2B,sCCvbjBnxB,EAAOnF,QAAU,EAAjB,2CCFA,IAAIiiE,EAAWjiE,EA2Bf,SAASkiE,IACLD,EAASrkB,KAAKukB,aACdF,EAASG,OAAOD,WAAWF,EAASI,cACpCJ,EAASK,OAAOH,WAAWF,EAASM,aACxC,CAvBAN,EAAS9f,MAAQ,UAGjB8f,EAASG,OAAe,EAAQ,MAChCH,EAASI,aAAe,EAAQ,OAChCJ,EAASK,OAAe,EAAQ,MAChCL,EAASM,aAAe,EAAQ,OAGhCN,EAASrkB,KAAe,EAAQ,OAChCqkB,EAASO,IAAe,EAAQ,OAChCP,EAASQ,MAAe,EAAQ,OAChCR,EAASC,UAAeA,EAcxBA,uCClCA/8D,EAAOnF,QAAUsiE,EAEjB,IAEIC,EAFA3kB,EAAY,EAAQ,OAIpB8kB,EAAY9kB,EAAK8kB,SACjBrtD,EAAYuoC,EAAKvoC,KAGrB,SAASstD,EAAgBnxC,EAAQoxC,GAC7B,OAAOtrD,WAAW,uBAAyBka,EAAO7T,IAAM,OAASilD,GAAe,GAAK,MAAQpxC,EAAO9uB,IACxG,CAQA,SAAS4/D,EAAOjlE,GAMZqJ,KAAKjF,IAAMpE,EAMXqJ,KAAKiX,IAAM,EAMXjX,KAAKhE,IAAMrF,EAAOM,MACtB,CAEA,IA4CQ4H,EA5CJs9D,EAAqC,oBAAf3hE,WACpB,SAA4B7D,GAC1B,GAAIA,aAAkB6D,YAAc5B,MAAM+S,QAAQhV,GAC9C,OAAO,IAAIilE,EAAOjlE,GACtB,MAAM4B,MAAM,iBAChB,EAEE,SAAsB5B,GACpB,GAAIiC,MAAM+S,QAAQhV,GACd,OAAO,IAAIilE,EAAOjlE,GACtB,MAAM4B,MAAM,iBAChB,EAEAoG,EAAS,WACT,OAAOu4C,EAAK1pC,OACN,SAA6B7W,GAC3B,OAAQilE,EAAOj9D,OAAS,SAAuBhI,GAC3C,OAAOugD,EAAK1pC,OAAOyE,SAAStb,GACtB,IAAIklE,EAAallE,GAEjBwlE,EAAaxlE,EACvB,GAAGA,EACP,EAEEwlE,CACV,EAuDA,SAASC,IAEL,IAAIC,EAAO,IAAIL,EAAS,EAAG,GACvB1gE,EAAI,EACR,KAAI0E,KAAKhE,IAAMgE,KAAKiX,IAAM,GAanB,CACH,KAAO3b,EAAI,IAAKA,EAAG,CAEf,GAAI0E,KAAKiX,KAAOjX,KAAKhE,IACjB,MAAMigE,EAAgBj8D,MAG1B,GADAq8D,EAAKhnD,IAAMgnD,EAAKhnD,IAA2B,IAArBrV,KAAKjF,IAAIiF,KAAKiX,OAAmB,EAAJ3b,KAAW,EAC1D0E,KAAKjF,IAAIiF,KAAKiX,OAAS,IACvB,OAAOolD,CACf,CAGA,OADAA,EAAKhnD,IAAMgnD,EAAKhnD,IAA6B,IAAvBrV,KAAKjF,IAAIiF,KAAKiX,SAAqB,EAAJ3b,KAAW,EACzD+gE,CACX,CAzBI,KAAO/gE,EAAI,IAAKA,EAGZ,GADA+gE,EAAKhnD,IAAMgnD,EAAKhnD,IAA2B,IAArBrV,KAAKjF,IAAIiF,KAAKiX,OAAmB,EAAJ3b,KAAW,EAC1D0E,KAAKjF,IAAIiF,KAAKiX,OAAS,IACvB,OAAOolD,EAKf,GAFAA,EAAKhnD,IAAMgnD,EAAKhnD,IAA2B,IAArBrV,KAAKjF,IAAIiF,KAAKiX,OAAe,MAAQ,EAC3DolD,EAAKjnD,IAAMinD,EAAKjnD,IAA2B,IAArBpV,KAAKjF,IAAIiF,KAAKiX,OAAgB,KAAO,EACvDjX,KAAKjF,IAAIiF,KAAKiX,OAAS,IACvB,OAAOolD,EAgBf,GAfI/gE,EAAI,EAeJ0E,KAAKhE,IAAMgE,KAAKiX,IAAM,GACtB,KAAO3b,EAAI,IAAKA,EAGZ,GADA+gE,EAAKjnD,IAAMinD,EAAKjnD,IAA2B,IAArBpV,KAAKjF,IAAIiF,KAAKiX,OAAmB,EAAJ3b,EAAQ,KAAO,EAC9D0E,KAAKjF,IAAIiF,KAAKiX,OAAS,IACvB,OAAOolD,OAGf,KAAO/gE,EAAI,IAAKA,EAAG,CAEf,GAAI0E,KAAKiX,KAAOjX,KAAKhE,IACjB,MAAMigE,EAAgBj8D,MAG1B,GADAq8D,EAAKjnD,IAAMinD,EAAKjnD,IAA2B,IAArBpV,KAAKjF,IAAIiF,KAAKiX,OAAmB,EAAJ3b,EAAQ,KAAO,EAC9D0E,KAAKjF,IAAIiF,KAAKiX,OAAS,IACvB,OAAOolD,CACf,CAGJ,MAAM9jE,MAAM,0BAChB,CAiCA,SAAS+jE,EAAgBvhE,EAAKyM,GAC1B,OAAQzM,EAAIyM,EAAM,GACVzM,EAAIyM,EAAM,IAAM,EAChBzM,EAAIyM,EAAM,IAAM,GAChBzM,EAAIyM,EAAM,IAAM,MAAQ,CACpC,CA8BA,SAAS+0D,IAGL,GAAIv8D,KAAKiX,IAAM,EAAIjX,KAAKhE,IACpB,MAAMigE,EAAgBj8D,KAAM,GAEhC,OAAO,IAAIg8D,EAASM,EAAgBt8D,KAAKjF,IAAKiF,KAAKiX,KAAO,GAAIqlD,EAAgBt8D,KAAKjF,IAAKiF,KAAKiX,KAAO,GACxG,CA5KA2kD,EAAOj9D,OAASA,IAEhBi9D,EAAO/iE,UAAU2jE,OAAStlB,EAAKt+C,MAAMC,UAAUvB,UAAuC4/C,EAAKt+C,MAAMC,UAAUC,MAO3G8iE,EAAO/iE,UAAU4jE,QACT59D,EAAQ,WACL,WACuD,GAA1DA,GAAuC,IAArBmB,KAAKjF,IAAIiF,KAAKiX,QAAuB,EAAOjX,KAAKjF,IAAIiF,KAAKiX,OAAS,IAAK,OAAOpY,EACvC,GAA1DA,GAASA,GAA8B,IAArBmB,KAAKjF,IAAIiF,KAAKiX,OAAgB,KAAO,EAAOjX,KAAKjF,IAAIiF,KAAKiX,OAAS,IAAK,OAAOpY,EACvC,GAA1DA,GAASA,GAA8B,IAArBmB,KAAKjF,IAAIiF,KAAKiX,OAAe,MAAQ,EAAOjX,KAAKjF,IAAIiF,KAAKiX,OAAS,IAAK,OAAOpY,EACvC,GAA1DA,GAASA,GAA8B,IAArBmB,KAAKjF,IAAIiF,KAAKiX,OAAe,MAAQ,EAAOjX,KAAKjF,IAAIiF,KAAKiX,OAAS,IAAK,OAAOpY,EACvC,GAA1DA,GAASA,GAA+B,GAAtBmB,KAAKjF,IAAIiF,KAAKiX,OAAe,MAAQ,EAAOjX,KAAKjF,IAAIiF,KAAKiX,OAAS,IAAK,OAAOpY,EAGjG,IAAKmB,KAAKiX,KAAO,GAAKjX,KAAKhE,IAEvB,MADAgE,KAAKiX,IAAMjX,KAAKhE,IACVigE,EAAgBj8D,KAAM,IAEhC,OAAOnB,CACX,GAOJ+8D,EAAO/iE,UAAU6jE,MAAQ,WACrB,OAAuB,EAAhB18D,KAAKy8D,QAChB,EAMAb,EAAO/iE,UAAU8jE,OAAS,WACtB,IAAI99D,EAAQmB,KAAKy8D,SACjB,OAAO59D,IAAU,IAAc,EAARA,GAAa,CACxC,EAoFA+8D,EAAO/iE,UAAU+jE,KAAO,WACpB,OAAyB,IAAlB58D,KAAKy8D,QAChB,EAaAb,EAAO/iE,UAAUgkE,QAAU,WAGvB,GAAI78D,KAAKiX,IAAM,EAAIjX,KAAKhE,IACpB,MAAMigE,EAAgBj8D,KAAM,GAEhC,OAAOs8D,EAAgBt8D,KAAKjF,IAAKiF,KAAKiX,KAAO,EACjD,EAMA2kD,EAAO/iE,UAAUikE,SAAW,WAGxB,GAAI98D,KAAKiX,IAAM,EAAIjX,KAAKhE,IACpB,MAAMigE,EAAgBj8D,KAAM,GAEhC,OAAkD,EAA3Cs8D,EAAgBt8D,KAAKjF,IAAKiF,KAAKiX,KAAO,EACjD,EAkCA2kD,EAAO/iE,UAAUuB,MAAQ,WAGrB,GAAI4F,KAAKiX,IAAM,EAAIjX,KAAKhE,IACpB,MAAMigE,EAAgBj8D,KAAM,GAEhC,IAAInB,EAAQq4C,EAAK98C,MAAM2gB,YAAY/a,KAAKjF,IAAKiF,KAAKiX,KAElD,OADAjX,KAAKiX,KAAO,EACLpY,CACX,EAOA+8D,EAAO/iE,UAAUkkE,OAAS,WAGtB,GAAI/8D,KAAKiX,IAAM,EAAIjX,KAAKhE,IACpB,MAAMigE,EAAgBj8D,KAAM,GAEhC,IAAInB,EAAQq4C,EAAK98C,MAAM6gB,aAAajb,KAAKjF,IAAKiF,KAAKiX,KAEnD,OADAjX,KAAKiX,KAAO,EACLpY,CACX,EAMA+8D,EAAO/iE,UAAUsf,MAAQ,WACrB,IAAIlhB,EAAS+I,KAAKy8D,SACd9sD,EAAS3P,KAAKiX,IACdzP,EAASxH,KAAKiX,IAAMhgB,EAGxB,GAAIuQ,EAAMxH,KAAKhE,IACX,MAAMigE,EAAgBj8D,KAAM/I,GAGhC,OADA+I,KAAKiX,KAAOhgB,EACR2B,MAAM+S,QAAQ3L,KAAKjF,KACZiF,KAAKjF,IAAIjC,MAAM6W,EAAOnI,GAC1BmI,IAAUnI,EACX,IAAIxH,KAAKjF,IAAI+E,YAAY,GACzBE,KAAKw8D,OAAOzjE,KAAKiH,KAAKjF,IAAK4U,EAAOnI,EAC5C,EAMAo0D,EAAO/iE,UAAUoY,OAAS,WACtB,IAAIkH,EAAQnY,KAAKmY,QACjB,OAAOxJ,EAAKqF,KAAKmE,EAAO,EAAGA,EAAMlhB,OACrC,EAOA2kE,EAAO/iE,UAAUmkE,KAAO,SAAc/lE,GAClC,GAAsB,iBAAXA,EAAqB,CAE5B,GAAI+I,KAAKiX,IAAMhgB,EAAS+I,KAAKhE,IACzB,MAAMigE,EAAgBj8D,KAAM/I,GAChC+I,KAAKiX,KAAOhgB,CAChB,MACI,GAEI,GAAI+I,KAAKiX,KAAOjX,KAAKhE,IACjB,MAAMigE,EAAgBj8D,YACE,IAAvBA,KAAKjF,IAAIiF,KAAKiX,QAE3B,OAAOjX,IACX,EAOA47D,EAAO/iE,UAAUokE,SAAW,SAASC,GACjC,OAAQA,GACJ,KAAK,EACDl9D,KAAKg9D,OACL,MACJ,KAAK,EACDh9D,KAAKg9D,KAAK,GACV,MACJ,KAAK,EACDh9D,KAAKg9D,KAAKh9D,KAAKy8D,UACf,MACJ,KAAK,EACD,KAA0C,IAAlCS,EAA2B,EAAhBl9D,KAAKy8D,WACpBz8D,KAAKi9D,SAASC,GAElB,MACJ,KAAK,EACDl9D,KAAKg9D,KAAK,GACV,MAGJ,QACI,MAAMzkE,MAAM,qBAAuB2kE,EAAW,cAAgBl9D,KAAKiX,KAE3E,OAAOjX,IACX,EAEA47D,EAAOH,WAAa,SAAS0B,GACzBtB,EAAesB,EACfvB,EAAOj9D,OAASA,IAChBk9D,EAAaJ,aAEb,IAAI5uD,EAAKqqC,EAAKkmB,KAAO,SAAsC,WAC3DlmB,EAAKV,MAAMolB,EAAO/iE,UAAW,CAEzBwkE,MAAO,WACH,OAAOjB,EAAerjE,KAAKiH,MAAM6M,IAAI,EACzC,EAEAywD,OAAQ,WACJ,OAAOlB,EAAerjE,KAAKiH,MAAM6M,IAAI,EACzC,EAEA0wD,OAAQ,WACJ,OAAOnB,EAAerjE,KAAKiH,MAAMw9D,WAAW3wD,IAAI,EACpD,EAEA4wD,QAAS,WACL,OAAOlB,EAAYxjE,KAAKiH,MAAM6M,IAAI,EACtC,EAEA6wD,SAAU,WACN,OAAOnB,EAAYxjE,KAAKiH,MAAM6M,IAAI,EACtC,GAGR,sCCzZApO,EAAOnF,QAAUuiE,EAGjB,IAAID,EAAS,EAAQ,OACpBC,EAAahjE,UAAY6F,OAAOC,OAAOi9D,EAAO/iE,YAAYiH,YAAc+7D,EAEzE,IAAI3kB,EAAO,EAAQ,OASnB,SAAS2kB,EAAallE,GAClBilE,EAAO7iE,KAAKiH,KAAMrJ,EAOtB,CAEAklE,EAAaJ,WAAa,WAElBvkB,EAAK1pC,SACLquD,EAAahjE,UAAU2jE,OAAStlB,EAAK1pC,OAAO3U,UAAUC,MAC9D,EAMA+iE,EAAahjE,UAAUoY,OAAS,WAC5B,IAAIjV,EAAMgE,KAAKy8D,SACf,OAAOz8D,KAAKjF,IAAIkY,UACVjT,KAAKjF,IAAIkY,UAAUjT,KAAKiX,IAAKjX,KAAKiX,IAAMhe,KAAKkN,IAAInG,KAAKiX,IAAMjb,EAAKgE,KAAKhE,MACtEgE,KAAKjF,IAAI0X,SAAS,QAASzS,KAAKiX,IAAKjX,KAAKiX,IAAMhe,KAAKkN,IAAInG,KAAKiX,IAAMjb,EAAKgE,KAAKhE,KACxF,EASA6/D,EAAaJ,6CCjDbh9D,EAAOnF,QAAU,CAAC,sCCKRA,EA6BNqkE,QAAU,EAAQ,uCClCtBl/D,EAAOnF,QAAUqkE,EAEjB,IAAIzmB,EAAO,EAAQ,OAsCnB,SAASymB,EAAQC,EAASC,EAAkBC,GAExC,GAAuB,mBAAZF,EACP,MAAMj8D,UAAU,8BAEpBu1C,EAAKjvC,aAAalP,KAAKiH,MAMvBA,KAAK49D,QAAUA,EAMf59D,KAAK69D,iBAAmB35C,QAAQ25C,GAMhC79D,KAAK89D,kBAAoB55C,QAAQ45C,EACrC,EA3DCH,EAAQ9kE,UAAY6F,OAAOC,OAAOu4C,EAAKjvC,aAAapP,YAAYiH,YAAc69D,EAwE/EA,EAAQ9kE,UAAUklE,QAAU,SAASA,EAAQp7C,EAAQq7C,EAAaC,EAAc/8C,EAAS7d,GAErF,IAAK6d,EACD,MAAMvf,UAAU,6BAEpB,IAAI0nB,EAAOrpB,KACX,IAAKqD,EACD,OAAO6zC,EAAKgnB,UAAUH,EAAS10C,EAAM1G,EAAQq7C,EAAaC,EAAc/8C,GAE5E,GAAKmI,EAAKu0C,QAKV,IACI,OAAOv0C,EAAKu0C,QACRj7C,EACAq7C,EAAY30C,EAAKw0C,iBAAmB,kBAAoB,UAAU38C,GAASi9C,UAC3E,SAAqBj8D,EAAKmrB,GAEtB,GAAInrB,EAEA,OADAmnB,EAAK7lB,KAAK,QAAStB,EAAKygB,GACjBtf,EAASnB,GAGpB,GAAiB,OAAbmrB,EAAJ,CAKA,KAAMA,aAAoB4wC,GACtB,IACI5wC,EAAW4wC,EAAa50C,EAAKy0C,kBAAoB,kBAAoB,UAAUzwC,EACnF,CAAE,MAAOnrB,GAEL,OADAmnB,EAAK7lB,KAAK,QAAStB,EAAKygB,GACjBtf,EAASnB,EACpB,CAIJ,OADAmnB,EAAK7lB,KAAK,OAAQ6pB,EAAU1K,GACrBtf,EAAS,KAAMgqB,EAZtB,CAFIhE,EAAK7hB,KAAqB,EAelC,GAER,CAAE,MAAOtF,GAGL,OAFAmnB,EAAK7lB,KAAK,QAAStB,EAAKygB,QACxBmM,YAAW,WAAazrB,EAASnB,EAAM,GAAG,EAE9C,MArCI4sB,YAAW,WAAazrB,EAAS9K,MAAM,iBAAmB,GAAG,EAsCrE,EAOAolE,EAAQ9kE,UAAU2O,IAAM,SAAa42D,GAOjC,OANIp+D,KAAK49D,UACAQ,GACDp+D,KAAK49D,QAAQ,KAAM,KAAM,MAC7B59D,KAAK49D,QAAU,KACf59D,KAAKwD,KAAK,OAAOs2D,OAEd95D,IACX,sCC5IAvB,EAAOnF,QAAU0iE,EAEjB,IAAI9kB,EAAO,EAAQ,OAUnB,SAAS8kB,EAAS3mD,EAAID,GASlBpV,KAAKqV,GAAKA,IAAO,EAMjBrV,KAAKoV,GAAKA,IAAO,CACrB,CAOA,IAAIipD,EAAOrC,EAASqC,KAAO,IAAIrC,EAAS,EAAG,GAE3CqC,EAAKze,SAAW,WAAa,OAAO,CAAG,EACvCye,EAAKC,SAAWD,EAAKb,SAAW,WAAa,OAAOx9D,IAAM,EAC1Dq+D,EAAKpnE,OAAS,WAAa,OAAO,CAAG,EAOrC,IAAIsnE,EAAWvC,EAASuC,SAAW,mBAOnCvC,EAASwC,WAAa,SAAoB3/D,GACtC,GAAc,IAAVA,EACA,OAAOw/D,EACX,IAAII,EAAO5/D,EAAQ,EACf4/D,IACA5/D,GAASA,GACb,IAAIwW,EAAKxW,IAAU,EACfuW,GAAMvW,EAAQwW,GAAM,aAAe,EAUvC,OATIopD,IACArpD,GAAMA,IAAO,EACbC,GAAMA,IAAO,IACPA,EAAK,aACPA,EAAK,IACCD,EAAK,aACPA,EAAK,KAGV,IAAI4mD,EAAS3mD,EAAID,EAC5B,EAOA4mD,EAAS1sD,KAAO,SAAczQ,GAC1B,GAAqB,iBAAVA,EACP,OAAOm9D,EAASwC,WAAW3/D,GAC/B,GAAIq4C,EAAKwnB,SAAS7/D,GAAQ,CAEtB,IAAIq4C,EAAKkmB,KAGL,OAAOpB,EAASwC,WAAW/pD,SAAS5V,EAAO,KAF3CA,EAAQq4C,EAAKkmB,KAAKhsD,WAAWvS,EAGrC,CACA,OAAOA,EAAM8/D,KAAO9/D,EAAM+/D,KAAO,IAAI5C,EAASn9D,EAAM8/D,MAAQ,EAAG9/D,EAAM+/D,OAAS,GAAKP,CACvF,EAOArC,EAASnjE,UAAU+mD,SAAW,SAAkBif,GAC5C,IAAKA,GAAY7+D,KAAKoV,KAAO,GAAI,CAC7B,IAAIC,EAAgB,GAAVrV,KAAKqV,KAAW,EACtBD,GAAMpV,KAAKoV,KAAW,EAG1B,OAFKC,IACDD,EAAKA,EAAK,IAAM,KACXC,EAAU,WAALD,EAClB,CACA,OAAOpV,KAAKqV,GAAe,WAAVrV,KAAKoV,EAC1B,EAOA4mD,EAASnjE,UAAUimE,OAAS,SAAgBD,GACxC,OAAO3nB,EAAKkmB,KACN,IAAIlmB,EAAKkmB,KAAe,EAAVp9D,KAAKqV,GAAkB,EAAVrV,KAAKoV,GAAQ8O,QAAQ26C,IAEhD,CAAEF,IAAe,EAAV3+D,KAAKqV,GAAQupD,KAAgB,EAAV5+D,KAAKoV,GAAQypD,SAAU36C,QAAQ26C,GACnE,EAEA,IAAIrjE,EAAarE,OAAO0B,UAAU2C,WAOlCwgE,EAAS+C,SAAW,SAAkBz/D,GAClC,OAAIA,IAASi/D,EACFF,EACJ,IAAIrC,GACLxgE,EAAWzC,KAAKuG,EAAM,GACtB9D,EAAWzC,KAAKuG,EAAM,IAAM,EAC5B9D,EAAWzC,KAAKuG,EAAM,IAAM,GAC5B9D,EAAWzC,KAAKuG,EAAM,IAAM,MAAQ,GAEpC9D,EAAWzC,KAAKuG,EAAM,GACtB9D,EAAWzC,KAAKuG,EAAM,IAAM,EAC5B9D,EAAWzC,KAAKuG,EAAM,IAAM,GAC5B9D,EAAWzC,KAAKuG,EAAM,IAAM,MAAQ,EAE9C,EAMA08D,EAASnjE,UAAUmmE,OAAS,WACxB,OAAO7nE,OAAOC,aACO,IAAjB4I,KAAKqV,GACLrV,KAAKqV,KAAO,EAAK,IACjBrV,KAAKqV,KAAO,GAAK,IACjBrV,KAAKqV,KAAO,GACK,IAAjBrV,KAAKoV,GACLpV,KAAKoV,KAAO,EAAK,IACjBpV,KAAKoV,KAAO,GAAK,IACjBpV,KAAKoV,KAAO,GAEpB,EAMA4mD,EAASnjE,UAAUylE,SAAW,WAC1B,IAAI5oB,EAAS11C,KAAKoV,IAAM,GAGxB,OAFApV,KAAKoV,KAAQpV,KAAKoV,IAAM,EAAIpV,KAAKqV,KAAO,IAAMqgC,KAAU,EACxD11C,KAAKqV,IAAQrV,KAAKqV,IAAM,EAAsBqgC,KAAU,EACjD11C,IACX,EAMAg8D,EAASnjE,UAAU2kE,SAAW,WAC1B,IAAI9nB,IAAmB,EAAV11C,KAAKqV,IAGlB,OAFArV,KAAKqV,KAAQrV,KAAKqV,KAAO,EAAIrV,KAAKoV,IAAM,IAAMsgC,KAAU,EACxD11C,KAAKoV,IAAQpV,KAAKoV,KAAO,EAAqBsgC,KAAU,EACjD11C,IACX,EAMAg8D,EAASnjE,UAAU5B,OAAS,WACxB,IAAIgoE,EAASj/D,KAAKqV,GACd6pD,GAASl/D,KAAKqV,KAAO,GAAKrV,KAAKoV,IAAM,KAAO,EAC5C+pD,EAASn/D,KAAKoV,KAAO,GACzB,OAAiB,IAAV+pD,EACU,IAAVD,EACED,EAAQ,MACNA,EAAQ,IAAM,EAAI,EAClBA,EAAQ,QAAU,EAAI,EACxBC,EAAQ,MACNA,EAAQ,IAAM,EAAI,EAClBA,EAAQ,QAAU,EAAI,EAC1BC,EAAQ,IAAM,EAAI,EAC7B,sCCtMA,IAAIjoB,EAAO59C,EA2OX,SAASk9C,EAAM/3B,EAAKD,EAAK4gD,GACrB,IAAK,IAAIj4D,EAAOzI,OAAOyI,KAAKqX,GAAMljB,EAAI,EAAGA,EAAI6L,EAAKlQ,SAAUqE,OACnCuK,IAAjB4Y,EAAItX,EAAK7L,KAAsB8jE,IAC/B3gD,EAAItX,EAAK7L,IAAMkjB,EAAIrX,EAAK7L,KAChC,OAAOmjB,CACX,CAmBA,SAAS4gD,EAAShgE,GAEd,SAASigE,EAAY5hD,EAAS0pC,GAE1B,KAAMpnD,gBAAgBs/D,GAClB,OAAO,IAAIA,EAAY5hD,EAAS0pC,GAKpC1oD,OAAO2B,eAAeL,KAAM,UAAW,CAAEW,IAAK,WAAa,OAAO+c,CAAS,IAGvEnlB,MAAMo2D,kBACNp2D,MAAMo2D,kBAAkB3uD,KAAMs/D,GAE9B5gE,OAAO2B,eAAeL,KAAM,QAAS,CAAEnB,OAAO,IAAItG,OAAQklB,OAAS,KAEnE2pC,GACA5Q,EAAMx2C,KAAMonD,EACpB,CAUA,OARCkY,EAAYzmE,UAAY6F,OAAOC,OAAOpG,MAAMM,YAAYiH,YAAcw/D,EAEvE5gE,OAAO2B,eAAei/D,EAAYzmE,UAAW,OAAQ,CAAE8H,IAAK,WAAa,OAAOtB,CAAM,IAEtFigE,EAAYzmE,UAAU4Z,SAAW,WAC7B,OAAOzS,KAAKX,KAAO,KAAOW,KAAK0d,OACnC,EAEO4hD,CACX,CA/RApoB,EAAKgnB,UAAY,EAAQ,OAGzBhnB,EAAK7mC,OAAS,EAAQ,OAGtB6mC,EAAKjvC,aAAe,EAAQ,OAG5BivC,EAAK98C,MAAQ,EAAQ,OAGrB88C,EAAKqoB,QAAU,EAAQ,OAGvBroB,EAAKvoC,KAAO,EAAQ,OAGpBuoC,EAAKsoB,KAAO,EAAQ,OAGpBtoB,EAAK8kB,SAAW,EAAQ,OAOxB9kB,EAAKqT,OAASrmC,aAA0B,IAAX,EAAA8N,GACP,EAAAA,GACA,EAAAA,EAAOw/B,SACP,EAAAx/B,EAAOw/B,QAAQiO,UACf,EAAAztC,EAAOw/B,QAAQiO,SAASnb,MAO9CpN,EAAK9tB,OAAS8tB,EAAKqT,QAAU,EAAAv4B,GACG,oBAAXD,QAA0BA,QACf,oBAAX1I,MAA0BA,MACjCrpB,KAQdk3C,EAAKwoB,WAAahhE,OAAOsG,OAAStG,OAAOsG,OAAO,IAAiC,GAOjFkyC,EAAKyoB,YAAcjhE,OAAOsG,OAAStG,OAAOsG,OAAO,CAAC,GAAgC,CAAC,EAQnFkyC,EAAK5xC,UAAYD,OAAOC,WAAwC,SAAmBzG,GAC/E,MAAwB,iBAAVA,GAAsBiZ,SAASjZ,IAAU5F,KAAK8kB,MAAMlf,KAAWA,CACjF,EAOAq4C,EAAKwnB,SAAW,SAAkB7/D,GAC9B,MAAwB,iBAAVA,GAAsBA,aAAiB1H,MACzD,EAOA+/C,EAAK9xB,SAAW,SAAkBvmB,GAC9B,OAAOA,GAA0B,iBAAVA,CAC3B,EAUAq4C,EAAK0oB,MAQL1oB,EAAK2oB,MAAQ,SAAe7tD,EAAK2U,GAC7B,IAAI9nB,EAAQmT,EAAI2U,GAChB,QAAa,MAAT9nB,IAAiBmT,EAAIjT,eAAe4nB,MACZ,iBAAV9nB,IAAuBjG,MAAM+S,QAAQ9M,GAASA,EAAM5H,OAASyH,OAAOyI,KAAKtI,GAAO5H,QAAU,EAEhH,EAaAigD,EAAK1pC,OAAS,WACV,IACI,IAAIA,EAAS0pC,EAAKqoB,QAAQ,UAAU/xD,OAEpC,OAAOA,EAAO3U,UAAU8b,UAAYnH,EAAoC,IAC5E,CAAE,MAAO+I,GAEL,OAAO,IACX,CACH,CATa,GAYd2gC,EAAK4oB,aAAe,KAGpB5oB,EAAK6oB,oBAAsB,KAO3B7oB,EAAK8oB,UAAY,SAAmBC,GAEhC,MAA8B,iBAAhBA,EACR/oB,EAAK1pC,OACD0pC,EAAK6oB,oBAAoBE,GACzB,IAAI/oB,EAAKt+C,MAAMqnE,GACnB/oB,EAAK1pC,OACD0pC,EAAK4oB,aAAaG,GACI,oBAAfzlE,WACHylE,EACA,IAAIzlE,WAAWylE,EACjC,EAMA/oB,EAAKt+C,MAA8B,oBAAf4B,WAA6BA,WAAwC5B,MAezFs+C,EAAKkmB,KAAkClmB,EAAK9tB,OAAO82C,SAAsChpB,EAAK9tB,OAAO82C,QAAQ9C,MACtElmB,EAAK9tB,OAAOg0C,MACvClmB,EAAKqoB,QAAQ,QAOzBroB,EAAKipB,OAAS,mBAOdjpB,EAAKkpB,QAAU,wBAOflpB,EAAKmpB,QAAU,6CAOfnpB,EAAKopB,WAAa,SAAoBzhE,GAClC,OAAOA,EACDq4C,EAAK8kB,SAAS1sD,KAAKzQ,GAAOmgE,SAC1B9nB,EAAK8kB,SAASuC,QACxB,EAQArnB,EAAKqpB,aAAe,SAAsBjhE,EAAMu/D,GAC5C,IAAIxC,EAAOnlB,EAAK8kB,SAAS+C,SAASz/D,GAClC,OAAI43C,EAAKkmB,KACElmB,EAAKkmB,KAAKoD,SAASnE,EAAKhnD,GAAIgnD,EAAKjnD,GAAIypD,GACzCxC,EAAKzc,SAAS17B,QAAQ26C,GACjC,EAiBA3nB,EAAKV,MAAQA,EAObU,EAAKupB,QAAU,SAAiBplE,GAC5B,OAAOA,EAAIolD,OAAO,GAAG3tC,cAAgBzX,EAAIoE,UAAU,EACvD,EAyCAy3C,EAAKmoB,SAAWA,EAmBhBnoB,EAAKwpB,cAAgBrB,EAAS,iBAoB9BnoB,EAAKypB,YAAc,SAAkBC,GAEjC,IADA,IAAIC,EAAW,CAAC,EACPvlE,EAAI,EAAGA,EAAIslE,EAAW3pE,SAAUqE,EACrCulE,EAASD,EAAWtlE,IAAM,EAO9B,OAAO,WACH,IAAK,IAAI6L,EAAOzI,OAAOyI,KAAKnH,MAAO1E,EAAI6L,EAAKlQ,OAAS,EAAGqE,GAAK,IAAKA,EAC9D,GAA0B,IAAtBulE,EAAS15D,EAAK7L,UAA+BuK,IAAlB7F,KAAKmH,EAAK7L,KAAuC,OAAlB0E,KAAKmH,EAAK7L,IACpE,OAAO6L,EAAK7L,EACxB,CACJ,EAeA47C,EAAK4pB,YAAc,SAAkBF,GAQjC,OAAO,SAASvhE,GACZ,IAAK,IAAI/D,EAAI,EAAGA,EAAIslE,EAAW3pE,SAAUqE,EACjCslE,EAAWtlE,KAAO+D,UACXW,KAAK4gE,EAAWtlE,GACnC,CACJ,EAkBA47C,EAAK6pB,cAAgB,CACjBC,MAAO7pE,OACP8pE,MAAO9pE,OACPghB,MAAOhhB,OACPi1B,MAAM,GAIV8qB,EAAKukB,WAAa,WACd,IAAIjuD,EAAS0pC,EAAK1pC,OAEbA,GAML0pC,EAAK4oB,aAAetyD,EAAO8B,OAAS9U,WAAW8U,MAAQ9B,EAAO8B,MAE1D,SAAqBzQ,EAAO4L,GACxB,OAAO,IAAI+C,EAAO3O,EAAO4L,EAC7B,EACJysC,EAAK6oB,oBAAsBvyD,EAAOwD,aAE9B,SAA4BvZ,GACxB,OAAO,IAAI+V,EAAO/V,EACtB,GAdAy/C,EAAK4oB,aAAe5oB,EAAK6oB,oBAAsB,IAevD,qCCnaAthE,EAAOnF,QAAUoiE,EAEjB,IAEIC,EAFAzkB,EAAY,EAAQ,OAIpB8kB,EAAY9kB,EAAK8kB,SACjB3rD,EAAY6mC,EAAK7mC,OACjB1B,EAAYuoC,EAAKvoC,KAWrB,SAASuyD,EAAGr0D,EAAI7Q,EAAKyX,GAMjBzT,KAAK6M,GAAKA,EAMV7M,KAAKhE,IAAMA,EAMXgE,KAAK2F,UAAOE,EAMZ7F,KAAKyT,IAAMA,CACf,CAGA,SAASxO,IAAQ,CAUjB,SAASk8D,EAAMC,GAMXphE,KAAK2wB,KAAOywC,EAAOzwC,KAMnB3wB,KAAK6wB,KAAOuwC,EAAOvwC,KAMnB7wB,KAAKhE,IAAMolE,EAAOplE,IAMlBgE,KAAK2F,KAAOy7D,EAAOC,MACvB,CAOA,SAAS3F,IAML17D,KAAKhE,IAAM,EAMXgE,KAAK2wB,KAAO,IAAIuwC,EAAGj8D,EAAM,EAAG,GAM5BjF,KAAK6wB,KAAO7wB,KAAK2wB,KAMjB3wB,KAAKqhE,OAAS,IAOlB,CAEA,IAAI1iE,EAAS,WACT,OAAOu4C,EAAK1pC,OACN,WACE,OAAQkuD,EAAO/8D,OAAS,WACpB,OAAO,IAAIg9D,CACf,IACJ,EAEE,WACE,OAAO,IAAID,CACf,CACR,EAqCA,SAAS4F,EAAU7tD,EAAK1Y,EAAKkc,GACzBlc,EAAIkc,GAAa,IAANxD,CACf,CAmBA,SAAS8tD,EAASvlE,EAAKyX,GACnBzT,KAAKhE,IAAMA,EACXgE,KAAK2F,UAAOE,EACZ7F,KAAKyT,IAAMA,CACf,CA6CA,SAAS+tD,EAAc/tD,EAAK1Y,EAAKkc,GAC7B,KAAOxD,EAAI2B,IACPra,EAAIkc,KAAkB,IAATxD,EAAI4B,GAAW,IAC5B5B,EAAI4B,IAAM5B,EAAI4B,KAAO,EAAI5B,EAAI2B,IAAM,MAAQ,EAC3C3B,EAAI2B,MAAQ,EAEhB,KAAO3B,EAAI4B,GAAK,KACZta,EAAIkc,KAAkB,IAATxD,EAAI4B,GAAW,IAC5B5B,EAAI4B,GAAK5B,EAAI4B,KAAO,EAExBta,EAAIkc,KAASxD,EAAI4B,EACrB,CA0CA,SAASosD,EAAahuD,EAAK1Y,EAAKkc,GAC5Blc,EAAIkc,GAA0B,IAAdxD,EAChB1Y,EAAIkc,EAAM,GAAMxD,IAAQ,EAAM,IAC9B1Y,EAAIkc,EAAM,GAAMxD,IAAQ,GAAM,IAC9B1Y,EAAIkc,EAAM,GAAMxD,IAAQ,EAC5B,CA9JAioD,EAAO/8D,OAASA,IAOhB+8D,EAAOliE,MAAQ,SAAe/B,GAC1B,OAAO,IAAIy/C,EAAKt+C,MAAMnB,EAC1B,EAIIy/C,EAAKt+C,QAAUA,QACf8iE,EAAOliE,MAAQ09C,EAAKsoB,KAAK9D,EAAOliE,MAAO09C,EAAKt+C,MAAMC,UAAUvB,WAUhEokE,EAAO7iE,UAAU6oE,MAAQ,SAAc70D,EAAI7Q,EAAKyX,GAG5C,OAFAzT,KAAK6wB,KAAO7wB,KAAK6wB,KAAKlrB,KAAO,IAAIu7D,EAAGr0D,EAAI7Q,EAAKyX,GAC7CzT,KAAKhE,KAAOA,EACLgE,IACX,EA6BAuhE,EAAS1oE,UAAY6F,OAAOC,OAAOuiE,EAAGroE,WACtC0oE,EAAS1oE,UAAUgU,GAxBnB,SAAuB4G,EAAK1Y,EAAKkc,GAC7B,KAAOxD,EAAM,KACT1Y,EAAIkc,KAAe,IAANxD,EAAY,IACzBA,KAAS,EAEb1Y,EAAIkc,GAAOxD,CACf,EAyBAioD,EAAO7iE,UAAU4jE,OAAS,SAAsB59D,GAW5C,OARAmB,KAAKhE,MAAQgE,KAAK6wB,KAAO7wB,KAAK6wB,KAAKlrB,KAAO,IAAI47D,GACzC1iE,KAAkB,GACT,IAAY,EACpBA,EAAQ,MAAY,EACpBA,EAAQ,QAAY,EACpBA,EAAQ,UAAY,EACA,EAC1BA,IAAQ7C,IACDgE,IACX,EAQA07D,EAAO7iE,UAAU6jE,MAAQ,SAAqB79D,GAC1C,OAAOA,EAAQ,EACTmB,KAAK0hE,MAAMF,EAAe,GAAIxF,EAASwC,WAAW3/D,IAClDmB,KAAKy8D,OAAO59D,EACtB,EAOA68D,EAAO7iE,UAAU8jE,OAAS,SAAsB99D,GAC5C,OAAOmB,KAAKy8D,QAAQ59D,GAAS,EAAIA,GAAS,MAAQ,EACtD,EAqBA68D,EAAO7iE,UAAUykE,OAAS,SAAsBz+D,GAC5C,IAAIw9D,EAAOL,EAAS1sD,KAAKzQ,GACzB,OAAOmB,KAAK0hE,MAAMF,EAAenF,EAAKplE,SAAUolE,EACpD,EASAX,EAAO7iE,UAAUwkE,MAAQ3B,EAAO7iE,UAAUykE,OAQ1C5B,EAAO7iE,UAAU0kE,OAAS,SAAsB1+D,GAC5C,IAAIw9D,EAAOL,EAAS1sD,KAAKzQ,GAAOy/D,WAChC,OAAOt+D,KAAK0hE,MAAMF,EAAenF,EAAKplE,SAAUolE,EACpD,EAOAX,EAAO7iE,UAAU+jE,KAAO,SAAoB/9D,GACxC,OAAOmB,KAAK0hE,MAAMJ,EAAW,EAAGziE,EAAQ,EAAI,EAChD,EAcA68D,EAAO7iE,UAAUgkE,QAAU,SAAuBh+D,GAC9C,OAAOmB,KAAK0hE,MAAMD,EAAc,EAAG5iE,IAAU,EACjD,EAQA68D,EAAO7iE,UAAUikE,SAAWpB,EAAO7iE,UAAUgkE,QAQ7CnB,EAAO7iE,UAAU4kE,QAAU,SAAuB5+D,GAC9C,IAAIw9D,EAAOL,EAAS1sD,KAAKzQ,GACzB,OAAOmB,KAAK0hE,MAAMD,EAAc,EAAGpF,EAAKhnD,IAAIqsD,MAAMD,EAAc,EAAGpF,EAAKjnD,GAC5E,EASAsmD,EAAO7iE,UAAU6kE,SAAWhC,EAAO7iE,UAAU4kE,QAQ7C/B,EAAO7iE,UAAUuB,MAAQ,SAAqByE,GAC1C,OAAOmB,KAAK0hE,MAAMxqB,EAAK98C,MAAMyiB,aAAc,EAAGhe,EAClD,EAQA68D,EAAO7iE,UAAUkkE,OAAS,SAAsBl+D,GAC5C,OAAOmB,KAAK0hE,MAAMxqB,EAAK98C,MAAM2iB,cAAe,EAAGle,EACnD,EAEA,IAAI8iE,EAAazqB,EAAKt+C,MAAMC,UAAUgD,IAChC,SAAwB4X,EAAK1Y,EAAKkc,GAChClc,EAAIc,IAAI4X,EAAKwD,EACjB,EAEE,SAAwBxD,EAAK1Y,EAAKkc,GAChC,IAAK,IAAI3b,EAAI,EAAGA,EAAImY,EAAIxc,SAAUqE,EAC9BP,EAAIkc,EAAM3b,GAAKmY,EAAInY,EAC3B,EAOJogE,EAAO7iE,UAAUsf,MAAQ,SAAqBtZ,GAC1C,IAAI7C,EAAM6C,EAAM5H,SAAW,EAC3B,IAAK+E,EACD,OAAOgE,KAAK0hE,MAAMJ,EAAW,EAAG,GACpC,GAAIpqB,EAAKwnB,SAAS7/D,GAAQ,CACtB,IAAI9D,EAAM2gE,EAAOliE,MAAMwC,EAAMqU,EAAOpZ,OAAO4H,IAC3CwR,EAAOjJ,OAAOvI,EAAO9D,EAAK,GAC1B8D,EAAQ9D,CACZ,CACA,OAAOiF,KAAKy8D,OAAOzgE,GAAK0lE,MAAMC,EAAY3lE,EAAK6C,EACnD,EAOA68D,EAAO7iE,UAAUoY,OAAS,SAAsBpS,GAC5C,IAAI7C,EAAM2S,EAAK1X,OAAO4H,GACtB,OAAO7C,EACDgE,KAAKy8D,OAAOzgE,GAAK0lE,MAAM/yD,EAAKvL,MAAOpH,EAAK6C,GACxCmB,KAAK0hE,MAAMJ,EAAW,EAAG,EACnC,EAOA5F,EAAO7iE,UAAU+oE,KAAO,WAIpB,OAHA5hE,KAAKqhE,OAAS,IAAIF,EAAMnhE,MACxBA,KAAK2wB,KAAO3wB,KAAK6wB,KAAO,IAAIqwC,EAAGj8D,EAAM,EAAG,GACxCjF,KAAKhE,IAAM,EACJgE,IACX,EAMA07D,EAAO7iE,UAAUgpE,MAAQ,WAUrB,OATI7hE,KAAKqhE,QACLrhE,KAAK2wB,KAAS3wB,KAAKqhE,OAAO1wC,KAC1B3wB,KAAK6wB,KAAS7wB,KAAKqhE,OAAOxwC,KAC1B7wB,KAAKhE,IAASgE,KAAKqhE,OAAOrlE,IAC1BgE,KAAKqhE,OAASrhE,KAAKqhE,OAAO17D,OAE1B3F,KAAK2wB,KAAO3wB,KAAK6wB,KAAO,IAAIqwC,EAAGj8D,EAAM,EAAG,GACxCjF,KAAKhE,IAAO,GAETgE,IACX,EAMA07D,EAAO7iE,UAAUipE,OAAS,WACtB,IAAInxC,EAAO3wB,KAAK2wB,KACZE,EAAO7wB,KAAK6wB,KACZ70B,EAAOgE,KAAKhE,IAOhB,OANAgE,KAAK6hE,QAAQpF,OAAOzgE,GAChBA,IACAgE,KAAK6wB,KAAKlrB,KAAOgrB,EAAKhrB,KACtB3F,KAAK6wB,KAAOA,EACZ7wB,KAAKhE,KAAOA,GAETgE,IACX,EAMA07D,EAAO7iE,UAAUslE,OAAS,WAItB,IAHA,IAAIxtC,EAAO3wB,KAAK2wB,KAAKhrB,KACjB5K,EAAOiF,KAAKF,YAAYtG,MAAMwG,KAAKhE,KACnCib,EAAO,EACJ0Z,GACHA,EAAK9jB,GAAG8jB,EAAKld,IAAK1Y,EAAKkc,GACvBA,GAAO0Z,EAAK30B,IACZ20B,EAAOA,EAAKhrB,KAGhB,OAAO5K,CACX,EAEA2gE,EAAOD,WAAa,SAASsG,GACzBpG,EAAeoG,EACfrG,EAAO/8D,OAASA,IAChBg9D,EAAaF,YACjB,sCC/cAh9D,EAAOnF,QAAUqiE,EAGjB,IAAID,EAAS,EAAQ,OACpBC,EAAa9iE,UAAY6F,OAAOC,OAAO+8D,EAAO7iE,YAAYiH,YAAc67D,EAEzE,IAAIzkB,EAAO,EAAQ,OAQnB,SAASykB,IACLD,EAAO3iE,KAAKiH,KAChB,CAuCA,SAASgiE,EAAkBvuD,EAAK1Y,EAAKkc,GAC7BxD,EAAIxc,OAAS,GACbigD,EAAKvoC,KAAKvL,MAAMqQ,EAAK1Y,EAAKkc,GACrBlc,EAAI4Z,UACT5Z,EAAI4Z,UAAUlB,EAAKwD,GAEnBlc,EAAIqI,MAAMqQ,EAAKwD,EACvB,CA5CA0kD,EAAaF,WAAa,WAOtBE,EAAaniE,MAAQ09C,EAAK6oB,oBAE1BpE,EAAasG,iBAAmB/qB,EAAK1pC,QAAU0pC,EAAK1pC,OAAO3U,qBAAqB2B,YAAiD,QAAnC08C,EAAK1pC,OAAO3U,UAAUgD,IAAIwD,KAClH,SAA8BoU,EAAK1Y,EAAKkc,GACxClc,EAAIc,IAAI4X,EAAKwD,EAEf,EAEE,SAA+BxD,EAAK1Y,EAAKkc,GACzC,GAAIxD,EAAIhC,KACNgC,EAAIhC,KAAK1W,EAAKkc,EAAK,EAAGxD,EAAIxc,aACvB,IAAK,IAAIqE,EAAI,EAAGA,EAAImY,EAAIxc,QAC3B8D,EAAIkc,KAASxD,EAAInY,IACrB,CACR,EAMAqgE,EAAa9iE,UAAUsf,MAAQ,SAA4BtZ,GACnDq4C,EAAKwnB,SAAS7/D,KACdA,EAAQq4C,EAAK4oB,aAAajhE,EAAO,WACrC,IAAI7C,EAAM6C,EAAM5H,SAAW,EAI3B,OAHA+I,KAAKy8D,OAAOzgE,GACRA,GACAgE,KAAK0hE,MAAM/F,EAAasG,iBAAkBjmE,EAAK6C,GAC5CmB,IACX,EAcA27D,EAAa9iE,UAAUoY,OAAS,SAA6BpS,GACzD,IAAI7C,EAAMk7C,EAAK1pC,OAAOoB,WAAW/P,GAIjC,OAHAmB,KAAKy8D,OAAOzgE,GACRA,GACAgE,KAAK0hE,MAAMM,EAAmBhmE,EAAK6C,GAChCmB,IACX,EAUA27D,EAAaF,iDCjFbh9D,EAAOnF,QAAU,EAAjB,2CCFA,IAAIiiE,EAAWjiE,EA2Bf,SAASkiE,IACLD,EAASrkB,KAAKukB,aACdF,EAASG,OAAOD,WAAWF,EAASI,cACpCJ,EAASK,OAAOH,WAAWF,EAASM,aACxC,CAvBAN,EAAS9f,MAAQ,UAGjB8f,EAASG,OAAe,EAAQ,MAChCH,EAASI,aAAe,EAAQ,OAChCJ,EAASK,OAAe,EAAQ,OAChCL,EAASM,aAAe,EAAQ,OAGhCN,EAASrkB,KAAe,EAAQ,OAChCqkB,EAASO,IAAe,EAAQ,OAChCP,EAASQ,MAAe,EAAQ,OAChCR,EAASC,UAAeA,EAcxBA,wCClCA/8D,EAAOnF,QAAUsiE,EAEjB,IAEIC,EAFA3kB,EAAY,EAAQ,OAIpB8kB,EAAY9kB,EAAK8kB,SACjBrtD,EAAYuoC,EAAKvoC,KAGrB,SAASstD,EAAgBnxC,EAAQoxC,GAC7B,OAAOtrD,WAAW,uBAAyBka,EAAO7T,IAAM,OAASilD,GAAe,GAAK,MAAQpxC,EAAO9uB,IACxG,CAQA,SAAS4/D,EAAOjlE,GAMZqJ,KAAKjF,IAAMpE,EAMXqJ,KAAKiX,IAAM,EAMXjX,KAAKhE,IAAMrF,EAAOM,MACtB,CAEA,IA4CQ4H,EA5CJs9D,EAAqC,oBAAf3hE,WACpB,SAA4B7D,GAC1B,GAAIA,aAAkB6D,YAAc5B,MAAM+S,QAAQhV,GAC9C,OAAO,IAAIilE,EAAOjlE,GACtB,MAAM4B,MAAM,iBAChB,EAEE,SAAsB5B,GACpB,GAAIiC,MAAM+S,QAAQhV,GACd,OAAO,IAAIilE,EAAOjlE,GACtB,MAAM4B,MAAM,iBAChB,EAEAoG,EAAS,WACT,OAAOu4C,EAAK1pC,OACN,SAA6B7W,GAC3B,OAAQilE,EAAOj9D,OAAS,SAAuBhI,GAC3C,OAAOugD,EAAK1pC,OAAOyE,SAAStb,GACtB,IAAIklE,EAAallE,GAEjBwlE,EAAaxlE,EACvB,GAAGA,EACP,EAEEwlE,CACV,EAuDA,SAASC,IAEL,IAAIC,EAAO,IAAIL,EAAS,EAAG,GACvB1gE,EAAI,EACR,KAAI0E,KAAKhE,IAAMgE,KAAKiX,IAAM,GAanB,CACH,KAAO3b,EAAI,IAAKA,EAAG,CAEf,GAAI0E,KAAKiX,KAAOjX,KAAKhE,IACjB,MAAMigE,EAAgBj8D,MAG1B,GADAq8D,EAAKhnD,IAAMgnD,EAAKhnD,IAA2B,IAArBrV,KAAKjF,IAAIiF,KAAKiX,OAAmB,EAAJ3b,KAAW,EAC1D0E,KAAKjF,IAAIiF,KAAKiX,OAAS,IACvB,OAAOolD,CACf,CAGA,OADAA,EAAKhnD,IAAMgnD,EAAKhnD,IAA6B,IAAvBrV,KAAKjF,IAAIiF,KAAKiX,SAAqB,EAAJ3b,KAAW,EACzD+gE,CACX,CAzBI,KAAO/gE,EAAI,IAAKA,EAGZ,GADA+gE,EAAKhnD,IAAMgnD,EAAKhnD,IAA2B,IAArBrV,KAAKjF,IAAIiF,KAAKiX,OAAmB,EAAJ3b,KAAW,EAC1D0E,KAAKjF,IAAIiF,KAAKiX,OAAS,IACvB,OAAOolD,EAKf,GAFAA,EAAKhnD,IAAMgnD,EAAKhnD,IAA2B,IAArBrV,KAAKjF,IAAIiF,KAAKiX,OAAe,MAAQ,EAC3DolD,EAAKjnD,IAAMinD,EAAKjnD,IAA2B,IAArBpV,KAAKjF,IAAIiF,KAAKiX,OAAgB,KAAO,EACvDjX,KAAKjF,IAAIiF,KAAKiX,OAAS,IACvB,OAAOolD,EAgBf,GAfI/gE,EAAI,EAeJ0E,KAAKhE,IAAMgE,KAAKiX,IAAM,GACtB,KAAO3b,EAAI,IAAKA,EAGZ,GADA+gE,EAAKjnD,IAAMinD,EAAKjnD,IAA2B,IAArBpV,KAAKjF,IAAIiF,KAAKiX,OAAmB,EAAJ3b,EAAQ,KAAO,EAC9D0E,KAAKjF,IAAIiF,KAAKiX,OAAS,IACvB,OAAOolD,OAGf,KAAO/gE,EAAI,IAAKA,EAAG,CAEf,GAAI0E,KAAKiX,KAAOjX,KAAKhE,IACjB,MAAMigE,EAAgBj8D,MAG1B,GADAq8D,EAAKjnD,IAAMinD,EAAKjnD,IAA2B,IAArBpV,KAAKjF,IAAIiF,KAAKiX,OAAmB,EAAJ3b,EAAQ,KAAO,EAC9D0E,KAAKjF,IAAIiF,KAAKiX,OAAS,IACvB,OAAOolD,CACf,CAGJ,MAAM9jE,MAAM,0BAChB,CAiCA,SAAS+jE,EAAgBvhE,EAAKyM,GAC1B,OAAQzM,EAAIyM,EAAM,GACVzM,EAAIyM,EAAM,IAAM,EAChBzM,EAAIyM,EAAM,IAAM,GAChBzM,EAAIyM,EAAM,IAAM,MAAQ,CACpC,CA8BA,SAAS+0D,IAGL,GAAIv8D,KAAKiX,IAAM,EAAIjX,KAAKhE,IACpB,MAAMigE,EAAgBj8D,KAAM,GAEhC,OAAO,IAAIg8D,EAASM,EAAgBt8D,KAAKjF,IAAKiF,KAAKiX,KAAO,GAAIqlD,EAAgBt8D,KAAKjF,IAAKiF,KAAKiX,KAAO,GACxG,CA5KA2kD,EAAOj9D,OAASA,IAEhBi9D,EAAO/iE,UAAU2jE,OAAStlB,EAAKt+C,MAAMC,UAAUvB,UAAuC4/C,EAAKt+C,MAAMC,UAAUC,MAO3G8iE,EAAO/iE,UAAU4jE,QACT59D,EAAQ,WACL,WACuD,GAA1DA,GAAuC,IAArBmB,KAAKjF,IAAIiF,KAAKiX,QAAuB,EAAOjX,KAAKjF,IAAIiF,KAAKiX,OAAS,IAAK,OAAOpY,EACvC,GAA1DA,GAASA,GAA8B,IAArBmB,KAAKjF,IAAIiF,KAAKiX,OAAgB,KAAO,EAAOjX,KAAKjF,IAAIiF,KAAKiX,OAAS,IAAK,OAAOpY,EACvC,GAA1DA,GAASA,GAA8B,IAArBmB,KAAKjF,IAAIiF,KAAKiX,OAAe,MAAQ,EAAOjX,KAAKjF,IAAIiF,KAAKiX,OAAS,IAAK,OAAOpY,EACvC,GAA1DA,GAASA,GAA8B,IAArBmB,KAAKjF,IAAIiF,KAAKiX,OAAe,MAAQ,EAAOjX,KAAKjF,IAAIiF,KAAKiX,OAAS,IAAK,OAAOpY,EACvC,GAA1DA,GAASA,GAA+B,GAAtBmB,KAAKjF,IAAIiF,KAAKiX,OAAe,MAAQ,EAAOjX,KAAKjF,IAAIiF,KAAKiX,OAAS,IAAK,OAAOpY,EAGjG,IAAKmB,KAAKiX,KAAO,GAAKjX,KAAKhE,IAEvB,MADAgE,KAAKiX,IAAMjX,KAAKhE,IACVigE,EAAgBj8D,KAAM,IAEhC,OAAOnB,CACX,GAOJ+8D,EAAO/iE,UAAU6jE,MAAQ,WACrB,OAAuB,EAAhB18D,KAAKy8D,QAChB,EAMAb,EAAO/iE,UAAU8jE,OAAS,WACtB,IAAI99D,EAAQmB,KAAKy8D,SACjB,OAAO59D,IAAU,IAAc,EAARA,GAAa,CACxC,EAoFA+8D,EAAO/iE,UAAU+jE,KAAO,WACpB,OAAyB,IAAlB58D,KAAKy8D,QAChB,EAaAb,EAAO/iE,UAAUgkE,QAAU,WAGvB,GAAI78D,KAAKiX,IAAM,EAAIjX,KAAKhE,IACpB,MAAMigE,EAAgBj8D,KAAM,GAEhC,OAAOs8D,EAAgBt8D,KAAKjF,IAAKiF,KAAKiX,KAAO,EACjD,EAMA2kD,EAAO/iE,UAAUikE,SAAW,WAGxB,GAAI98D,KAAKiX,IAAM,EAAIjX,KAAKhE,IACpB,MAAMigE,EAAgBj8D,KAAM,GAEhC,OAAkD,EAA3Cs8D,EAAgBt8D,KAAKjF,IAAKiF,KAAKiX,KAAO,EACjD,EAkCA2kD,EAAO/iE,UAAUuB,MAAQ,WAGrB,GAAI4F,KAAKiX,IAAM,EAAIjX,KAAKhE,IACpB,MAAMigE,EAAgBj8D,KAAM,GAEhC,IAAInB,EAAQq4C,EAAK98C,MAAM2gB,YAAY/a,KAAKjF,IAAKiF,KAAKiX,KAElD,OADAjX,KAAKiX,KAAO,EACLpY,CACX,EAOA+8D,EAAO/iE,UAAUkkE,OAAS,WAGtB,GAAI/8D,KAAKiX,IAAM,EAAIjX,KAAKhE,IACpB,MAAMigE,EAAgBj8D,KAAM,GAEhC,IAAInB,EAAQq4C,EAAK98C,MAAM6gB,aAAajb,KAAKjF,IAAKiF,KAAKiX,KAEnD,OADAjX,KAAKiX,KAAO,EACLpY,CACX,EAMA+8D,EAAO/iE,UAAUsf,MAAQ,WACrB,IAAIlhB,EAAS+I,KAAKy8D,SACd9sD,EAAS3P,KAAKiX,IACdzP,EAASxH,KAAKiX,IAAMhgB,EAGxB,GAAIuQ,EAAMxH,KAAKhE,IACX,MAAMigE,EAAgBj8D,KAAM/I,GAGhC,OADA+I,KAAKiX,KAAOhgB,EACR2B,MAAM+S,QAAQ3L,KAAKjF,KACZiF,KAAKjF,IAAIjC,MAAM6W,EAAOnI,GAC1BmI,IAAUnI,EACX,IAAIxH,KAAKjF,IAAI+E,YAAY,GACzBE,KAAKw8D,OAAOzjE,KAAKiH,KAAKjF,IAAK4U,EAAOnI,EAC5C,EAMAo0D,EAAO/iE,UAAUoY,OAAS,WACtB,IAAIkH,EAAQnY,KAAKmY,QACjB,OAAOxJ,EAAKqF,KAAKmE,EAAO,EAAGA,EAAMlhB,OACrC,EAOA2kE,EAAO/iE,UAAUmkE,KAAO,SAAc/lE,GAClC,GAAsB,iBAAXA,EAAqB,CAE5B,GAAI+I,KAAKiX,IAAMhgB,EAAS+I,KAAKhE,IACzB,MAAMigE,EAAgBj8D,KAAM/I,GAChC+I,KAAKiX,KAAOhgB,CAChB,MACI,GAEI,GAAI+I,KAAKiX,KAAOjX,KAAKhE,IACjB,MAAMigE,EAAgBj8D,YACE,IAAvBA,KAAKjF,IAAIiF,KAAKiX,QAE3B,OAAOjX,IACX,EAOA47D,EAAO/iE,UAAUokE,SAAW,SAASC,GACjC,OAAQA,GACJ,KAAK,EACDl9D,KAAKg9D,OACL,MACJ,KAAK,EACDh9D,KAAKg9D,KAAK,GACV,MACJ,KAAK,EACDh9D,KAAKg9D,KAAKh9D,KAAKy8D,UACf,MACJ,KAAK,EACD,KAA0C,IAAlCS,EAA2B,EAAhBl9D,KAAKy8D,WACpBz8D,KAAKi9D,SAASC,GAElB,MACJ,KAAK,EACDl9D,KAAKg9D,KAAK,GACV,MAGJ,QACI,MAAMzkE,MAAM,qBAAuB2kE,EAAW,cAAgBl9D,KAAKiX,KAE3E,OAAOjX,IACX,EAEA47D,EAAOH,WAAa,SAAS0B,GACzBtB,EAAesB,EACfvB,EAAOj9D,OAASA,IAChBk9D,EAAaJ,aAEb,IAAI5uD,EAAKqqC,EAAKkmB,KAAO,SAAsC,WAC3DlmB,EAAKV,MAAMolB,EAAO/iE,UAAW,CAEzBwkE,MAAO,WACH,OAAOjB,EAAerjE,KAAKiH,MAAM6M,IAAI,EACzC,EAEAywD,OAAQ,WACJ,OAAOlB,EAAerjE,KAAKiH,MAAM6M,IAAI,EACzC,EAEA0wD,OAAQ,WACJ,OAAOnB,EAAerjE,KAAKiH,MAAMw9D,WAAW3wD,IAAI,EACpD,EAEA4wD,QAAS,WACL,OAAOlB,EAAYxjE,KAAKiH,MAAM6M,IAAI,EACtC,EAEA6wD,SAAU,WACN,OAAOnB,EAAYxjE,KAAKiH,MAAM6M,IAAI,EACtC,GAGR,sCCzZApO,EAAOnF,QAAUuiE,EAGjB,IAAID,EAAS,EAAQ,QACpBC,EAAahjE,UAAY6F,OAAOC,OAAOi9D,EAAO/iE,YAAYiH,YAAc+7D,EAEzE,IAAI3kB,EAAO,EAAQ,OASnB,SAAS2kB,EAAallE,GAClBilE,EAAO7iE,KAAKiH,KAAMrJ,EAOtB,CAEAklE,EAAaJ,WAAa,WAElBvkB,EAAK1pC,SACLquD,EAAahjE,UAAU2jE,OAAStlB,EAAK1pC,OAAO3U,UAAUC,MAC9D,EAMA+iE,EAAahjE,UAAUoY,OAAS,WAC5B,IAAIjV,EAAMgE,KAAKy8D,SACf,OAAOz8D,KAAKjF,IAAIkY,UACVjT,KAAKjF,IAAIkY,UAAUjT,KAAKiX,IAAKjX,KAAKiX,IAAMhe,KAAKkN,IAAInG,KAAKiX,IAAMjb,EAAKgE,KAAKhE,MACtEgE,KAAKjF,IAAI0X,SAAS,QAASzS,KAAKiX,IAAKjX,KAAKiX,IAAMhe,KAAKkN,IAAInG,KAAKiX,IAAMjb,EAAKgE,KAAKhE,KACxF,EASA6/D,EAAaJ,6CCjDbh9D,EAAOnF,QAAU,CAAC,sCCKRA,EA6BNqkE,QAAU,EAAQ,2CClCtBl/D,EAAOnF,QAAUqkE,EAEjB,IAAIzmB,EAAO,EAAQ,OAsCnB,SAASymB,EAAQC,EAASC,EAAkBC,GAExC,GAAuB,mBAAZF,EACP,MAAMj8D,UAAU,8BAEpBu1C,EAAKjvC,aAAalP,KAAKiH,MAMvBA,KAAK49D,QAAUA,EAMf59D,KAAK69D,iBAAmB35C,QAAQ25C,GAMhC79D,KAAK89D,kBAAoB55C,QAAQ45C,EACrC,EA3DCH,EAAQ9kE,UAAY6F,OAAOC,OAAOu4C,EAAKjvC,aAAapP,YAAYiH,YAAc69D,EAwE/EA,EAAQ9kE,UAAUklE,QAAU,SAASA,EAAQp7C,EAAQq7C,EAAaC,EAAc/8C,EAAS7d,GAErF,IAAK6d,EACD,MAAMvf,UAAU,6BAEpB,IAAI0nB,EAAOrpB,KACX,IAAKqD,EACD,OAAO6zC,EAAKgnB,UAAUH,EAAS10C,EAAM1G,EAAQq7C,EAAaC,EAAc/8C,GAE5E,GAAKmI,EAAKu0C,QAKV,IACI,OAAOv0C,EAAKu0C,QACRj7C,EACAq7C,EAAY30C,EAAKw0C,iBAAmB,kBAAoB,UAAU38C,GAASi9C,UAC3E,SAAqBj8D,EAAKmrB,GAEtB,GAAInrB,EAEA,OADAmnB,EAAK7lB,KAAK,QAAStB,EAAKygB,GACjBtf,EAASnB,GAGpB,GAAiB,OAAbmrB,EAAJ,CAKA,KAAMA,aAAoB4wC,GACtB,IACI5wC,EAAW4wC,EAAa50C,EAAKy0C,kBAAoB,kBAAoB,UAAUzwC,EACnF,CAAE,MAAOnrB,GAEL,OADAmnB,EAAK7lB,KAAK,QAAStB,EAAKygB,GACjBtf,EAASnB,EACpB,CAIJ,OADAmnB,EAAK7lB,KAAK,OAAQ6pB,EAAU1K,GACrBtf,EAAS,KAAMgqB,EAZtB,CAFIhE,EAAK7hB,KAAqB,EAelC,GAER,CAAE,MAAOtF,GAGL,OAFAmnB,EAAK7lB,KAAK,QAAStB,EAAKygB,QACxBmM,YAAW,WAAazrB,EAASnB,EAAM,GAAG,EAE9C,MArCI4sB,YAAW,WAAazrB,EAAS9K,MAAM,iBAAmB,GAAG,EAsCrE,EAOAolE,EAAQ9kE,UAAU2O,IAAM,SAAa42D,GAOjC,OANIp+D,KAAK49D,UACAQ,GACDp+D,KAAK49D,QAAQ,KAAM,KAAM,MAC7B59D,KAAK49D,QAAU,KACf59D,KAAKwD,KAAK,OAAOs2D,OAEd95D,IACX,sCC5IAvB,EAAOnF,QAAU0iE,EAEjB,IAAI9kB,EAAO,EAAQ,OAUnB,SAAS8kB,EAAS3mD,EAAID,GASlBpV,KAAKqV,GAAKA,IAAO,EAMjBrV,KAAKoV,GAAKA,IAAO,CACrB,CAOA,IAAIipD,EAAOrC,EAASqC,KAAO,IAAIrC,EAAS,EAAG,GAE3CqC,EAAKze,SAAW,WAAa,OAAO,CAAG,EACvCye,EAAKC,SAAWD,EAAKb,SAAW,WAAa,OAAOx9D,IAAM,EAC1Dq+D,EAAKpnE,OAAS,WAAa,OAAO,CAAG,EAOrC,IAAIsnE,EAAWvC,EAASuC,SAAW,mBAOnCvC,EAASwC,WAAa,SAAoB3/D,GACtC,GAAc,IAAVA,EACA,OAAOw/D,EACX,IAAII,EAAO5/D,EAAQ,EACf4/D,IACA5/D,GAASA,GACb,IAAIwW,EAAKxW,IAAU,EACfuW,GAAMvW,EAAQwW,GAAM,aAAe,EAUvC,OATIopD,IACArpD,GAAMA,IAAO,EACbC,GAAMA,IAAO,IACPA,EAAK,aACPA,EAAK,IACCD,EAAK,aACPA,EAAK,KAGV,IAAI4mD,EAAS3mD,EAAID,EAC5B,EAOA4mD,EAAS1sD,KAAO,SAAczQ,GAC1B,GAAqB,iBAAVA,EACP,OAAOm9D,EAASwC,WAAW3/D,GAC/B,GAAIq4C,EAAKwnB,SAAS7/D,GAAQ,CAEtB,IAAIq4C,EAAKkmB,KAGL,OAAOpB,EAASwC,WAAW/pD,SAAS5V,EAAO,KAF3CA,EAAQq4C,EAAKkmB,KAAKhsD,WAAWvS,EAGrC,CACA,OAAOA,EAAM8/D,KAAO9/D,EAAM+/D,KAAO,IAAI5C,EAASn9D,EAAM8/D,MAAQ,EAAG9/D,EAAM+/D,OAAS,GAAKP,CACvF,EAOArC,EAASnjE,UAAU+mD,SAAW,SAAkBif,GAC5C,IAAKA,GAAY7+D,KAAKoV,KAAO,GAAI,CAC7B,IAAIC,EAAgB,GAAVrV,KAAKqV,KAAW,EACtBD,GAAMpV,KAAKoV,KAAW,EAG1B,OAFKC,IACDD,EAAKA,EAAK,IAAM,KACXC,EAAU,WAALD,EAClB,CACA,OAAOpV,KAAKqV,GAAe,WAAVrV,KAAKoV,EAC1B,EAOA4mD,EAASnjE,UAAUimE,OAAS,SAAgBD,GACxC,OAAO3nB,EAAKkmB,KACN,IAAIlmB,EAAKkmB,KAAe,EAAVp9D,KAAKqV,GAAkB,EAAVrV,KAAKoV,GAAQ8O,QAAQ26C,IAEhD,CAAEF,IAAe,EAAV3+D,KAAKqV,GAAQupD,KAAgB,EAAV5+D,KAAKoV,GAAQypD,SAAU36C,QAAQ26C,GACnE,EAEA,IAAIrjE,EAAarE,OAAO0B,UAAU2C,WAOlCwgE,EAAS+C,SAAW,SAAkBz/D,GAClC,OAAIA,IAASi/D,EACFF,EACJ,IAAIrC,GACLxgE,EAAWzC,KAAKuG,EAAM,GACtB9D,EAAWzC,KAAKuG,EAAM,IAAM,EAC5B9D,EAAWzC,KAAKuG,EAAM,IAAM,GAC5B9D,EAAWzC,KAAKuG,EAAM,IAAM,MAAQ,GAEpC9D,EAAWzC,KAAKuG,EAAM,GACtB9D,EAAWzC,KAAKuG,EAAM,IAAM,EAC5B9D,EAAWzC,KAAKuG,EAAM,IAAM,GAC5B9D,EAAWzC,KAAKuG,EAAM,IAAM,MAAQ,EAE9C,EAMA08D,EAASnjE,UAAUmmE,OAAS,WACxB,OAAO7nE,OAAOC,aACO,IAAjB4I,KAAKqV,GACLrV,KAAKqV,KAAO,EAAK,IACjBrV,KAAKqV,KAAO,GAAK,IACjBrV,KAAKqV,KAAO,GACK,IAAjBrV,KAAKoV,GACLpV,KAAKoV,KAAO,EAAK,IACjBpV,KAAKoV,KAAO,GAAK,IACjBpV,KAAKoV,KAAO,GAEpB,EAMA4mD,EAASnjE,UAAUylE,SAAW,WAC1B,IAAI5oB,EAAS11C,KAAKoV,IAAM,GAGxB,OAFApV,KAAKoV,KAAQpV,KAAKoV,IAAM,EAAIpV,KAAKqV,KAAO,IAAMqgC,KAAU,EACxD11C,KAAKqV,IAAQrV,KAAKqV,IAAM,EAAsBqgC,KAAU,EACjD11C,IACX,EAMAg8D,EAASnjE,UAAU2kE,SAAW,WAC1B,IAAI9nB,IAAmB,EAAV11C,KAAKqV,IAGlB,OAFArV,KAAKqV,KAAQrV,KAAKqV,KAAO,EAAIrV,KAAKoV,IAAM,IAAMsgC,KAAU,EACxD11C,KAAKoV,IAAQpV,KAAKoV,KAAO,EAAqBsgC,KAAU,EACjD11C,IACX,EAMAg8D,EAASnjE,UAAU5B,OAAS,WACxB,IAAIgoE,EAASj/D,KAAKqV,GACd6pD,GAASl/D,KAAKqV,KAAO,GAAKrV,KAAKoV,IAAM,KAAO,EAC5C+pD,EAASn/D,KAAKoV,KAAO,GACzB,OAAiB,IAAV+pD,EACU,IAAVD,EACED,EAAQ,MACNA,EAAQ,IAAM,EAAI,EAClBA,EAAQ,QAAU,EAAI,EACxBC,EAAQ,MACNA,EAAQ,IAAM,EAAI,EAClBA,EAAQ,QAAU,EAAI,EAC1BC,EAAQ,IAAM,EAAI,EAC7B,sCCtMA,IAAIjoB,EAAO59C,EA2OX,SAASk9C,EAAM/3B,EAAKD,EAAK4gD,GACrB,IAAK,IAAIj4D,EAAOzI,OAAOyI,KAAKqX,GAAMljB,EAAI,EAAGA,EAAI6L,EAAKlQ,SAAUqE,OACnCuK,IAAjB4Y,EAAItX,EAAK7L,KAAsB8jE,IAC/B3gD,EAAItX,EAAK7L,IAAMkjB,EAAIrX,EAAK7L,KAChC,OAAOmjB,CACX,CAmBA,SAAS4gD,EAAShgE,GAEd,SAASigE,EAAY5hD,EAAS0pC,GAE1B,KAAMpnD,gBAAgBs/D,GAClB,OAAO,IAAIA,EAAY5hD,EAAS0pC,GAKpC1oD,OAAO2B,eAAeL,KAAM,UAAW,CAAEW,IAAK,WAAa,OAAO+c,CAAS,IAGvEnlB,MAAMo2D,kBACNp2D,MAAMo2D,kBAAkB3uD,KAAMs/D,GAE9B5gE,OAAO2B,eAAeL,KAAM,QAAS,CAAEnB,OAAO,IAAItG,OAAQklB,OAAS,KAEnE2pC,GACA5Q,EAAMx2C,KAAMonD,EACpB,CA2BA,OAzBAkY,EAAYzmE,UAAY6F,OAAOC,OAAOpG,MAAMM,UAAW,CACnDiH,YAAa,CACTjB,MAAOygE,EACPp/D,UAAU,EACVU,YAAY,EACZ4c,cAAc,GAElBne,KAAM,CACFsB,IAAK,WAAiB,OAAOtB,CAAM,EACnCxD,SAAKgK,EACLjF,YAAY,EAKZ4c,cAAc,GAElB/K,SAAU,CACN5T,MAAO,WAAmB,OAAOmB,KAAKX,KAAO,KAAOW,KAAK0d,OAAS,EAClExd,UAAU,EACVU,YAAY,EACZ4c,cAAc,KAIf8hD,CACX,CAhTApoB,EAAKgnB,UAAY,EAAQ,OAGzBhnB,EAAK7mC,OAAS,EAAQ,OAGtB6mC,EAAKjvC,aAAe,EAAQ,OAG5BivC,EAAK98C,MAAQ,EAAQ,OAGrB88C,EAAKqoB,QAAU,EAAQ,OAGvBroB,EAAKvoC,KAAO,EAAQ,OAGpBuoC,EAAKsoB,KAAO,EAAQ,OAGpBtoB,EAAK8kB,SAAW,EAAQ,OAOxB9kB,EAAKqT,OAASrmC,aAA0B,IAAX,EAAA8N,GACP,EAAAA,GACA,EAAAA,EAAOw/B,SACP,EAAAx/B,EAAOw/B,QAAQiO,UACf,EAAAztC,EAAOw/B,QAAQiO,SAASnb,MAO9CpN,EAAK9tB,OAAS8tB,EAAKqT,QAAU,EAAAv4B,GACG,oBAAXD,QAA0BA,QACf,oBAAX1I,MAA0BA,MACjCrpB,KAQdk3C,EAAKwoB,WAAahhE,OAAOsG,OAAStG,OAAOsG,OAAO,IAAiC,GAOjFkyC,EAAKyoB,YAAcjhE,OAAOsG,OAAStG,OAAOsG,OAAO,CAAC,GAAgC,CAAC,EAQnFkyC,EAAK5xC,UAAYD,OAAOC,WAAwC,SAAmBzG,GAC/E,MAAwB,iBAAVA,GAAsBiZ,SAASjZ,IAAU5F,KAAK8kB,MAAMlf,KAAWA,CACjF,EAOAq4C,EAAKwnB,SAAW,SAAkB7/D,GAC9B,MAAwB,iBAAVA,GAAsBA,aAAiB1H,MACzD,EAOA+/C,EAAK9xB,SAAW,SAAkBvmB,GAC9B,OAAOA,GAA0B,iBAAVA,CAC3B,EAUAq4C,EAAK0oB,MAQL1oB,EAAK2oB,MAAQ,SAAe7tD,EAAK2U,GAC7B,IAAI9nB,EAAQmT,EAAI2U,GAChB,QAAa,MAAT9nB,IAAiBmT,EAAIjT,eAAe4nB,MACZ,iBAAV9nB,IAAuBjG,MAAM+S,QAAQ9M,GAASA,EAAM5H,OAASyH,OAAOyI,KAAKtI,GAAO5H,QAAU,EAEhH,EAaAigD,EAAK1pC,OAAS,WACV,IACI,IAAIA,EAAS0pC,EAAKqoB,QAAQ,UAAU/xD,OAEpC,OAAOA,EAAO3U,UAAU8b,UAAYnH,EAAoC,IAC5E,CAAE,MAAO+I,GAEL,OAAO,IACX,CACH,CATa,GAYd2gC,EAAK4oB,aAAe,KAGpB5oB,EAAK6oB,oBAAsB,KAO3B7oB,EAAK8oB,UAAY,SAAmBC,GAEhC,MAA8B,iBAAhBA,EACR/oB,EAAK1pC,OACD0pC,EAAK6oB,oBAAoBE,GACzB,IAAI/oB,EAAKt+C,MAAMqnE,GACnB/oB,EAAK1pC,OACD0pC,EAAK4oB,aAAaG,GACI,oBAAfzlE,WACHylE,EACA,IAAIzlE,WAAWylE,EACjC,EAMA/oB,EAAKt+C,MAA8B,oBAAf4B,WAA6BA,WAAwC5B,MAezFs+C,EAAKkmB,KAAkClmB,EAAK9tB,OAAO82C,SAAsChpB,EAAK9tB,OAAO82C,QAAQ9C,MACtElmB,EAAK9tB,OAAOg0C,MACvClmB,EAAKqoB,QAAQ,QAOzBroB,EAAKipB,OAAS,mBAOdjpB,EAAKkpB,QAAU,wBAOflpB,EAAKmpB,QAAU,6CAOfnpB,EAAKopB,WAAa,SAAoBzhE,GAClC,OAAOA,EACDq4C,EAAK8kB,SAAS1sD,KAAKzQ,GAAOmgE,SAC1B9nB,EAAK8kB,SAASuC,QACxB,EAQArnB,EAAKqpB,aAAe,SAAsBjhE,EAAMu/D,GAC5C,IAAIxC,EAAOnlB,EAAK8kB,SAAS+C,SAASz/D,GAClC,OAAI43C,EAAKkmB,KACElmB,EAAKkmB,KAAKoD,SAASnE,EAAKhnD,GAAIgnD,EAAKjnD,GAAIypD,GACzCxC,EAAKzc,SAAS17B,QAAQ26C,GACjC,EAiBA3nB,EAAKV,MAAQA,EAObU,EAAKupB,QAAU,SAAiBplE,GAC5B,OAAOA,EAAIolD,OAAO,GAAG3tC,cAAgBzX,EAAIoE,UAAU,EACvD,EA0DAy3C,EAAKmoB,SAAWA,EAmBhBnoB,EAAKwpB,cAAgBrB,EAAS,iBAoB9BnoB,EAAKypB,YAAc,SAAkBC,GAEjC,IADA,IAAIC,EAAW,CAAC,EACPvlE,EAAI,EAAGA,EAAIslE,EAAW3pE,SAAUqE,EACrCulE,EAASD,EAAWtlE,IAAM,EAO9B,OAAO,WACH,IAAK,IAAI6L,EAAOzI,OAAOyI,KAAKnH,MAAO1E,EAAI6L,EAAKlQ,OAAS,EAAGqE,GAAK,IAAKA,EAC9D,GAA0B,IAAtBulE,EAAS15D,EAAK7L,UAA+BuK,IAAlB7F,KAAKmH,EAAK7L,KAAuC,OAAlB0E,KAAKmH,EAAK7L,IACpE,OAAO6L,EAAK7L,EACxB,CACJ,EAeA47C,EAAK4pB,YAAc,SAAkBF,GAQjC,OAAO,SAASvhE,GACZ,IAAK,IAAI/D,EAAI,EAAGA,EAAIslE,EAAW3pE,SAAUqE,EACjCslE,EAAWtlE,KAAO+D,UACXW,KAAK4gE,EAAWtlE,GACnC,CACJ,EAkBA47C,EAAK6pB,cAAgB,CACjBC,MAAO7pE,OACP8pE,MAAO9pE,OACPghB,MAAOhhB,OACPi1B,MAAM,GAIV8qB,EAAKukB,WAAa,WACd,IAAIjuD,EAAS0pC,EAAK1pC,OAEbA,GAML0pC,EAAK4oB,aAAetyD,EAAO8B,OAAS9U,WAAW8U,MAAQ9B,EAAO8B,MAE1D,SAAqBzQ,EAAO4L,GACxB,OAAO,IAAI+C,EAAO3O,EAAO4L,EAC7B,EACJysC,EAAK6oB,oBAAsBvyD,EAAOwD,aAE9B,SAA4BvZ,GACxB,OAAO,IAAI+V,EAAO/V,EACtB,GAdAy/C,EAAK4oB,aAAe5oB,EAAK6oB,oBAAsB,IAevD,qCCpbAthE,EAAOnF,QAAUoiE,EAEjB,IAEIC,EAFAzkB,EAAY,EAAQ,OAIpB8kB,EAAY9kB,EAAK8kB,SACjB3rD,EAAY6mC,EAAK7mC,OACjB1B,EAAYuoC,EAAKvoC,KAWrB,SAASuyD,EAAGr0D,EAAI7Q,EAAKyX,GAMjBzT,KAAK6M,GAAKA,EAMV7M,KAAKhE,IAAMA,EAMXgE,KAAK2F,UAAOE,EAMZ7F,KAAKyT,IAAMA,CACf,CAGA,SAASxO,IAAQ,CAUjB,SAASk8D,EAAMC,GAMXphE,KAAK2wB,KAAOywC,EAAOzwC,KAMnB3wB,KAAK6wB,KAAOuwC,EAAOvwC,KAMnB7wB,KAAKhE,IAAMolE,EAAOplE,IAMlBgE,KAAK2F,KAAOy7D,EAAOC,MACvB,CAOA,SAAS3F,IAML17D,KAAKhE,IAAM,EAMXgE,KAAK2wB,KAAO,IAAIuwC,EAAGj8D,EAAM,EAAG,GAM5BjF,KAAK6wB,KAAO7wB,KAAK2wB,KAMjB3wB,KAAKqhE,OAAS,IAOlB,CAEA,IAAI1iE,EAAS,WACT,OAAOu4C,EAAK1pC,OACN,WACE,OAAQkuD,EAAO/8D,OAAS,WACpB,OAAO,IAAIg9D,CACf,IACJ,EAEE,WACE,OAAO,IAAID,CACf,CACR,EAqCA,SAAS4F,EAAU7tD,EAAK1Y,EAAKkc,GACzBlc,EAAIkc,GAAa,IAANxD,CACf,CAmBA,SAAS8tD,EAASvlE,EAAKyX,GACnBzT,KAAKhE,IAAMA,EACXgE,KAAK2F,UAAOE,EACZ7F,KAAKyT,IAAMA,CACf,CA6CA,SAAS+tD,EAAc/tD,EAAK1Y,EAAKkc,GAC7B,KAAOxD,EAAI2B,IACPra,EAAIkc,KAAkB,IAATxD,EAAI4B,GAAW,IAC5B5B,EAAI4B,IAAM5B,EAAI4B,KAAO,EAAI5B,EAAI2B,IAAM,MAAQ,EAC3C3B,EAAI2B,MAAQ,EAEhB,KAAO3B,EAAI4B,GAAK,KACZta,EAAIkc,KAAkB,IAATxD,EAAI4B,GAAW,IAC5B5B,EAAI4B,GAAK5B,EAAI4B,KAAO,EAExBta,EAAIkc,KAASxD,EAAI4B,EACrB,CA0CA,SAASosD,EAAahuD,EAAK1Y,EAAKkc,GAC5Blc,EAAIkc,GAA0B,IAAdxD,EAChB1Y,EAAIkc,EAAM,GAAMxD,IAAQ,EAAM,IAC9B1Y,EAAIkc,EAAM,GAAMxD,IAAQ,GAAM,IAC9B1Y,EAAIkc,EAAM,GAAMxD,IAAQ,EAC5B,CA9JAioD,EAAO/8D,OAASA,IAOhB+8D,EAAOliE,MAAQ,SAAe/B,GAC1B,OAAO,IAAIy/C,EAAKt+C,MAAMnB,EAC1B,EAIIy/C,EAAKt+C,QAAUA,QACf8iE,EAAOliE,MAAQ09C,EAAKsoB,KAAK9D,EAAOliE,MAAO09C,EAAKt+C,MAAMC,UAAUvB,WAUhEokE,EAAO7iE,UAAU6oE,MAAQ,SAAc70D,EAAI7Q,EAAKyX,GAG5C,OAFAzT,KAAK6wB,KAAO7wB,KAAK6wB,KAAKlrB,KAAO,IAAIu7D,EAAGr0D,EAAI7Q,EAAKyX,GAC7CzT,KAAKhE,KAAOA,EACLgE,IACX,EA6BAuhE,EAAS1oE,UAAY6F,OAAOC,OAAOuiE,EAAGroE,WACtC0oE,EAAS1oE,UAAUgU,GAxBnB,SAAuB4G,EAAK1Y,EAAKkc,GAC7B,KAAOxD,EAAM,KACT1Y,EAAIkc,KAAe,IAANxD,EAAY,IACzBA,KAAS,EAEb1Y,EAAIkc,GAAOxD,CACf,EAyBAioD,EAAO7iE,UAAU4jE,OAAS,SAAsB59D,GAW5C,OARAmB,KAAKhE,MAAQgE,KAAK6wB,KAAO7wB,KAAK6wB,KAAKlrB,KAAO,IAAI47D,GACzC1iE,KAAkB,GACT,IAAY,EACpBA,EAAQ,MAAY,EACpBA,EAAQ,QAAY,EACpBA,EAAQ,UAAY,EACA,EAC1BA,IAAQ7C,IACDgE,IACX,EAQA07D,EAAO7iE,UAAU6jE,MAAQ,SAAqB79D,GAC1C,OAAOA,EAAQ,EACTmB,KAAK0hE,MAAMF,EAAe,GAAIxF,EAASwC,WAAW3/D,IAClDmB,KAAKy8D,OAAO59D,EACtB,EAOA68D,EAAO7iE,UAAU8jE,OAAS,SAAsB99D,GAC5C,OAAOmB,KAAKy8D,QAAQ59D,GAAS,EAAIA,GAAS,MAAQ,EACtD,EAqBA68D,EAAO7iE,UAAUykE,OAAS,SAAsBz+D,GAC5C,IAAIw9D,EAAOL,EAAS1sD,KAAKzQ,GACzB,OAAOmB,KAAK0hE,MAAMF,EAAenF,EAAKplE,SAAUolE,EACpD,EASAX,EAAO7iE,UAAUwkE,MAAQ3B,EAAO7iE,UAAUykE,OAQ1C5B,EAAO7iE,UAAU0kE,OAAS,SAAsB1+D,GAC5C,IAAIw9D,EAAOL,EAAS1sD,KAAKzQ,GAAOy/D,WAChC,OAAOt+D,KAAK0hE,MAAMF,EAAenF,EAAKplE,SAAUolE,EACpD,EAOAX,EAAO7iE,UAAU+jE,KAAO,SAAoB/9D,GACxC,OAAOmB,KAAK0hE,MAAMJ,EAAW,EAAGziE,EAAQ,EAAI,EAChD,EAcA68D,EAAO7iE,UAAUgkE,QAAU,SAAuBh+D,GAC9C,OAAOmB,KAAK0hE,MAAMD,EAAc,EAAG5iE,IAAU,EACjD,EAQA68D,EAAO7iE,UAAUikE,SAAWpB,EAAO7iE,UAAUgkE,QAQ7CnB,EAAO7iE,UAAU4kE,QAAU,SAAuB5+D,GAC9C,IAAIw9D,EAAOL,EAAS1sD,KAAKzQ,GACzB,OAAOmB,KAAK0hE,MAAMD,EAAc,EAAGpF,EAAKhnD,IAAIqsD,MAAMD,EAAc,EAAGpF,EAAKjnD,GAC5E,EASAsmD,EAAO7iE,UAAU6kE,SAAWhC,EAAO7iE,UAAU4kE,QAQ7C/B,EAAO7iE,UAAUuB,MAAQ,SAAqByE,GAC1C,OAAOmB,KAAK0hE,MAAMxqB,EAAK98C,MAAMyiB,aAAc,EAAGhe,EAClD,EAQA68D,EAAO7iE,UAAUkkE,OAAS,SAAsBl+D,GAC5C,OAAOmB,KAAK0hE,MAAMxqB,EAAK98C,MAAM2iB,cAAe,EAAGle,EACnD,EAEA,IAAI8iE,EAAazqB,EAAKt+C,MAAMC,UAAUgD,IAChC,SAAwB4X,EAAK1Y,EAAKkc,GAChClc,EAAIc,IAAI4X,EAAKwD,EACjB,EAEE,SAAwBxD,EAAK1Y,EAAKkc,GAChC,IAAK,IAAI3b,EAAI,EAAGA,EAAImY,EAAIxc,SAAUqE,EAC9BP,EAAIkc,EAAM3b,GAAKmY,EAAInY,EAC3B,EAOJogE,EAAO7iE,UAAUsf,MAAQ,SAAqBtZ,GAC1C,IAAI7C,EAAM6C,EAAM5H,SAAW,EAC3B,IAAK+E,EACD,OAAOgE,KAAK0hE,MAAMJ,EAAW,EAAG,GACpC,GAAIpqB,EAAKwnB,SAAS7/D,GAAQ,CACtB,IAAI9D,EAAM2gE,EAAOliE,MAAMwC,EAAMqU,EAAOpZ,OAAO4H,IAC3CwR,EAAOjJ,OAAOvI,EAAO9D,EAAK,GAC1B8D,EAAQ9D,CACZ,CACA,OAAOiF,KAAKy8D,OAAOzgE,GAAK0lE,MAAMC,EAAY3lE,EAAK6C,EACnD,EAOA68D,EAAO7iE,UAAUoY,OAAS,SAAsBpS,GAC5C,IAAI7C,EAAM2S,EAAK1X,OAAO4H,GACtB,OAAO7C,EACDgE,KAAKy8D,OAAOzgE,GAAK0lE,MAAM/yD,EAAKvL,MAAOpH,EAAK6C,GACxCmB,KAAK0hE,MAAMJ,EAAW,EAAG,EACnC,EAOA5F,EAAO7iE,UAAU+oE,KAAO,WAIpB,OAHA5hE,KAAKqhE,OAAS,IAAIF,EAAMnhE,MACxBA,KAAK2wB,KAAO3wB,KAAK6wB,KAAO,IAAIqwC,EAAGj8D,EAAM,EAAG,GACxCjF,KAAKhE,IAAM,EACJgE,IACX,EAMA07D,EAAO7iE,UAAUgpE,MAAQ,WAUrB,OATI7hE,KAAKqhE,QACLrhE,KAAK2wB,KAAS3wB,KAAKqhE,OAAO1wC,KAC1B3wB,KAAK6wB,KAAS7wB,KAAKqhE,OAAOxwC,KAC1B7wB,KAAKhE,IAASgE,KAAKqhE,OAAOrlE,IAC1BgE,KAAKqhE,OAASrhE,KAAKqhE,OAAO17D,OAE1B3F,KAAK2wB,KAAO3wB,KAAK6wB,KAAO,IAAIqwC,EAAGj8D,EAAM,EAAG,GACxCjF,KAAKhE,IAAO,GAETgE,IACX,EAMA07D,EAAO7iE,UAAUipE,OAAS,WACtB,IAAInxC,EAAO3wB,KAAK2wB,KACZE,EAAO7wB,KAAK6wB,KACZ70B,EAAOgE,KAAKhE,IAOhB,OANAgE,KAAK6hE,QAAQpF,OAAOzgE,GAChBA,IACAgE,KAAK6wB,KAAKlrB,KAAOgrB,EAAKhrB,KACtB3F,KAAK6wB,KAAOA,EACZ7wB,KAAKhE,KAAOA,GAETgE,IACX,EAMA07D,EAAO7iE,UAAUslE,OAAS,WAItB,IAHA,IAAIxtC,EAAO3wB,KAAK2wB,KAAKhrB,KACjB5K,EAAOiF,KAAKF,YAAYtG,MAAMwG,KAAKhE,KACnCib,EAAO,EACJ0Z,GACHA,EAAK9jB,GAAG8jB,EAAKld,IAAK1Y,EAAKkc,GACvBA,GAAO0Z,EAAK30B,IACZ20B,EAAOA,EAAKhrB,KAGhB,OAAO5K,CACX,EAEA2gE,EAAOD,WAAa,SAASsG,GACzBpG,EAAeoG,EACfrG,EAAO/8D,OAASA,IAChBg9D,EAAaF,YACjB,sCC/cAh9D,EAAOnF,QAAUqiE,EAGjB,IAAID,EAAS,EAAQ,OACpBC,EAAa9iE,UAAY6F,OAAOC,OAAO+8D,EAAO7iE,YAAYiH,YAAc67D,EAEzE,IAAIzkB,EAAO,EAAQ,OAQnB,SAASykB,IACLD,EAAO3iE,KAAKiH,KAChB,CAuCA,SAASgiE,EAAkBvuD,EAAK1Y,EAAKkc,GAC7BxD,EAAIxc,OAAS,GACbigD,EAAKvoC,KAAKvL,MAAMqQ,EAAK1Y,EAAKkc,GACrBlc,EAAI4Z,UACT5Z,EAAI4Z,UAAUlB,EAAKwD,GAEnBlc,EAAIqI,MAAMqQ,EAAKwD,EACvB,CA5CA0kD,EAAaF,WAAa,WAOtBE,EAAaniE,MAAQ09C,EAAK6oB,oBAE1BpE,EAAasG,iBAAmB/qB,EAAK1pC,QAAU0pC,EAAK1pC,OAAO3U,qBAAqB2B,YAAiD,QAAnC08C,EAAK1pC,OAAO3U,UAAUgD,IAAIwD,KAClH,SAA8BoU,EAAK1Y,EAAKkc,GACxClc,EAAIc,IAAI4X,EAAKwD,EAEf,EAEE,SAA+BxD,EAAK1Y,EAAKkc,GACzC,GAAIxD,EAAIhC,KACNgC,EAAIhC,KAAK1W,EAAKkc,EAAK,EAAGxD,EAAIxc,aACvB,IAAK,IAAIqE,EAAI,EAAGA,EAAImY,EAAIxc,QAC3B8D,EAAIkc,KAASxD,EAAInY,IACrB,CACR,EAMAqgE,EAAa9iE,UAAUsf,MAAQ,SAA4BtZ,GACnDq4C,EAAKwnB,SAAS7/D,KACdA,EAAQq4C,EAAK4oB,aAAajhE,EAAO,WACrC,IAAI7C,EAAM6C,EAAM5H,SAAW,EAI3B,OAHA+I,KAAKy8D,OAAOzgE,GACRA,GACAgE,KAAK0hE,MAAM/F,EAAasG,iBAAkBjmE,EAAK6C,GAC5CmB,IACX,EAcA27D,EAAa9iE,UAAUoY,OAAS,SAA6BpS,GACzD,IAAI7C,EAAMk7C,EAAK1pC,OAAOoB,WAAW/P,GAIjC,OAHAmB,KAAKy8D,OAAOzgE,GACRA,GACAgE,KAAK0hE,MAAMM,EAAmBhmE,EAAK6C,GAChCmB,IACX,EAUA27D,EAAaF,oCCpFb,UAKQ,EAAO,CAAC,eAA8B,0BAAP,EAK9B,SAASyG,GACd,aAGA,IAAIC,EAAUD,EAAUtG,OAAQwG,EAAUF,EAAUxG,OAAQ2G,EAAQH,EAAUhrB,KAG1EorB,EAAQJ,EAAUnG,MAAe,UAAMmG,EAAUnG,MAAe,QAAI,CAAC,GAm0DzE,OAj0DAuG,EAAMC,IAAM,WAmBR,SAASA,EAAIhnE,GAGT,GAFAyE,KAAKwiE,cAAgB,GACrBxiE,KAAKyiE,SAAW,GACZlnE,EACA,IAAK,IAAImnE,EAAKhkE,OAAOyI,KAAK5L,GAAID,EAAI,EAAGA,EAAIonE,EAAGzrE,SAAUqE,EAClC,MAAZC,EAAEmnE,EAAGpnE,MACL0E,KAAK0iE,EAAGpnE,IAAMC,EAAEmnE,EAAGpnE,IACnC,CA2BA,IAAIqnE,EAywDJ,OA5xDAJ,EAAI1pE,UAAU2pE,cAAgBH,EAAM3C,WAQpC6C,EAAI1pE,UAAU4pE,SAAWJ,EAAM3C,WAQ/B6C,EAAI1pE,UAAU+pE,QAAU,KAWxBlkE,OAAO2B,eAAekiE,EAAI1pE,UAAW,WAAY,CAC7C8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,YACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAY3BJ,EAAI3/D,OAAS,SAAgB2Q,EAAGqf,GAG5B,GAFKA,IACDA,EAAIwvC,EAAQzjE,UACO,MAAnB4U,EAAEivD,eAAyBjvD,EAAEivD,cAAcvrE,OAC3C,IAAK,IAAIqE,EAAI,EAAGA,EAAIiY,EAAEivD,cAAcvrE,SAAUqE,EAC1CgnE,EAAMC,IAAIM,QAAQjgE,OAAO2Q,EAAEivD,cAAclnE,GAAIs3B,EAAE6pC,OAAO,IAAImF,QAAQE,SAE1E,GAAkB,MAAdvuD,EAAEkvD,UAAoBlvD,EAAEkvD,SAASxrE,OACjC,IAASqE,EAAI,EAAGA,EAAIiY,EAAEkvD,SAASxrE,SAAUqE,EACrCgnE,EAAMC,IAAIO,QAAQlgE,OAAO2Q,EAAEkvD,SAASnnE,GAAIs3B,EAAE6pC,OAAO,IAAImF,QAAQE,SAIrE,OAFiB,MAAbvuD,EAAEqvD,SAAmBlkE,OAAOK,eAAehG,KAAKwa,EAAG,YACnD+uD,EAAMC,IAAIQ,eAAengE,OAAO2Q,EAAEqvD,QAAShwC,EAAE6pC,OAAO,IAAImF,QAAQE,SAC7DlvC,CACX,EAaA2vC,EAAIn7D,OAAS,SAAgBkhB,EAAGa,GACtBb,aAAa65C,IACf75C,EAAI65C,EAAQxjE,OAAO2pB,IAEvB,IADA,IAAInT,OAAUtP,IAANsjB,EAAkBb,EAAEtsB,IAAMssB,EAAErR,IAAMkS,EAAG5V,EAAI,IAAI+uD,EAAMC,IACpDj6C,EAAErR,IAAM9B,GAAG,CACd,IAAI8c,EAAI3J,EAAEm0C,SACV,OAAQxqC,IAAM,GACd,KAAK,EACK1e,EAAEivD,eAAiBjvD,EAAEivD,cAAcvrE,SACrCsc,EAAEivD,cAAgB,IACtBjvD,EAAEivD,cAAc9qE,KAAK4qE,EAAMC,IAAIM,QAAQz7D,OAAOkhB,EAAGA,EAAEm0C,WACnD,MACJ,KAAK,EACKlpD,EAAEkvD,UAAYlvD,EAAEkvD,SAASxrE,SAC3Bsc,EAAEkvD,SAAW,IACjBlvD,EAAEkvD,SAAS/qE,KAAK4qE,EAAMC,IAAIO,QAAQ17D,OAAOkhB,EAAGA,EAAEm0C,WAC9C,MACJ,KAAK,EACDlpD,EAAEqvD,QAAUN,EAAMC,IAAIQ,eAAe37D,OAAOkhB,EAAGA,EAAEm0C,UACjD,MACJ,QACIn0C,EAAE20C,SAAa,EAAJhrC,GAGnB,CACA,OAAO1e,CACX,EAUAgvD,EAAIlwD,WAAa,SAAoBmgB,GACjC,GAAIA,aAAa8vC,EAAMC,IACnB,OAAO/vC,EACX,IAAIjf,EAAI,IAAI+uD,EAAMC,IAClB,GAAI/vC,EAAEgwC,cAAe,CACjB,IAAK5pE,MAAM+S,QAAQ6mB,EAAEgwC,eACjB,MAAM7gE,UAAU,sCACpB4R,EAAEivD,cAAgB,GAClB,IAAK,IAAIlnE,EAAI,EAAGA,EAAIk3B,EAAEgwC,cAAcvrE,SAAUqE,EAAG,CAC7C,GAAkC,iBAAvBk3B,EAAEgwC,cAAclnE,GACvB,MAAMqG,UAAU,uCACpB4R,EAAEivD,cAAclnE,GAAKgnE,EAAMC,IAAIM,QAAQxwD,WAAWmgB,EAAEgwC,cAAclnE,GACtE,CACJ,CACA,GAAIk3B,EAAEiwC,SAAU,CACZ,IAAK7pE,MAAM+S,QAAQ6mB,EAAEiwC,UACjB,MAAM9gE,UAAU,iCAEpB,IADA4R,EAAEkvD,SAAW,GACJnnE,EAAI,EAAGA,EAAIk3B,EAAEiwC,SAASxrE,SAAUqE,EAAG,CACxC,GAA6B,iBAAlBk3B,EAAEiwC,SAASnnE,GAClB,MAAMqG,UAAU,kCACpB4R,EAAEkvD,SAASnnE,GAAKgnE,EAAMC,IAAIO,QAAQzwD,WAAWmgB,EAAEiwC,SAASnnE,GAC5D,CACJ,CACA,GAAiB,MAAbk3B,EAAEowC,QAAiB,CACnB,GAAyB,iBAAdpwC,EAAEowC,QACT,MAAMjhE,UAAU,iCACpB4R,EAAEqvD,QAAUN,EAAMC,IAAIQ,eAAe1wD,WAAWmgB,EAAEowC,QACtD,CACA,OAAOrvD,CACX,EAWAgvD,EAAIS,SAAW,SAAkBzvD,EAAGxV,GAC3BA,IACDA,EAAI,CAAC,GACT,IAAIy0B,EAAI,CAAC,EAKT,IAJIz0B,EAAEklE,QAAUllE,EAAEyO,YACdgmB,EAAEgwC,cAAgB,GAClBhwC,EAAEiwC,SAAW,IAEblvD,EAAEivD,eAAiBjvD,EAAEivD,cAAcvrE,OAAQ,CAC3Cu7B,EAAEgwC,cAAgB,GAClB,IAAK,IAAIpuD,EAAI,EAAGA,EAAIb,EAAEivD,cAAcvrE,SAAUmd,EAC1Coe,EAAEgwC,cAAcpuD,GAAKkuD,EAAMC,IAAIM,QAAQG,SAASzvD,EAAEivD,cAAcpuD,GAAIrW,EAE5E,CACA,GAAIwV,EAAEkvD,UAAYlvD,EAAEkvD,SAASxrE,OAEzB,IADAu7B,EAAEiwC,SAAW,GACJruD,EAAI,EAAGA,EAAIb,EAAEkvD,SAASxrE,SAAUmd,EACrCoe,EAAEiwC,SAASruD,GAAKkuD,EAAMC,IAAIO,QAAQE,SAASzvD,EAAEkvD,SAASruD,GAAIrW,GAQlE,OALiB,MAAbwV,EAAEqvD,SAAmBrvD,EAAExU,eAAe,aACtCyzB,EAAEowC,QAAUN,EAAMC,IAAIQ,eAAeC,SAASzvD,EAAEqvD,QAAS7kE,GACrDA,EAAEmlE,SACF1wC,EAAE2wC,SAAW,YAEd3wC,CACX,EASA+vC,EAAI1pE,UAAUkf,OAAS,WACnB,OAAO/X,KAAKF,YAAYkjE,SAAShjE,KAAMkiE,EAAUhrB,KAAK6pB,cAC1D,EAEAwB,EAAIM,QAAU,WAkBV,SAASA,EAAQtnE,GACb,GAAIA,EACA,IAAK,IAAImnE,EAAKhkE,OAAOyI,KAAK5L,GAAID,EAAI,EAAGA,EAAIonE,EAAGzrE,SAAUqE,EAClC,MAAZC,EAAEmnE,EAAGpnE,MACL0E,KAAK0iE,EAAGpnE,IAAMC,EAAEmnE,EAAGpnE,IACnC,CAmBA,IAAIqnE,EAqIJ,OAhJAE,EAAQhqE,UAAUmpC,UAAY,KAQ9B6gC,EAAQhqE,UAAUuqE,MAAQ,KAW1B1kE,OAAO2B,eAAewiE,EAAQhqE,UAAW,aAAc,CACnD8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,cACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAS3BjkE,OAAO2B,eAAewiE,EAAQhqE,UAAW,SAAU,CAC/C8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,UACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAY3BE,EAAQjgE,OAAS,SAAgB2Q,EAAGqf,GAOhC,OANKA,IACDA,EAAIwvC,EAAQzjE,UACG,MAAf4U,EAAEyuB,WAAqBtjC,OAAOK,eAAehG,KAAKwa,EAAG,cACrDqf,EAAE6pC,OAAO,GAAGG,KAAKrpD,EAAEyuB,WACR,MAAXzuB,EAAE6vD,OAAiB1kE,OAAOK,eAAehG,KAAKwa,EAAG,UACjDqf,EAAE6pC,OAAO,IAAIxrD,OAAOsC,EAAE6vD,OACnBxwC,CACX,EAaAiwC,EAAQz7D,OAAS,SAAgBkhB,EAAGa,GAC1Bb,aAAa65C,IACf75C,EAAI65C,EAAQxjE,OAAO2pB,IAEvB,IADA,IAAInT,OAAUtP,IAANsjB,EAAkBb,EAAEtsB,IAAMssB,EAAErR,IAAMkS,EAAG5V,EAAI,IAAI+uD,EAAMC,IAAIM,QACxDv6C,EAAErR,IAAM9B,GAAG,CACd,IAAI8c,EAAI3J,EAAEm0C,SACV,OAAQxqC,IAAM,GACd,KAAK,EACD1e,EAAEyuB,UAAY1Z,EAAEs0C,OAChB,MACJ,KAAK,EACDrpD,EAAE6vD,MAAQ96C,EAAErX,SACZ,MACJ,QACIqX,EAAE20C,SAAa,EAAJhrC,GAGnB,CACA,OAAO1e,CACX,EAUAsvD,EAAQxwD,WAAa,SAAoBmgB,GACrC,GAAIA,aAAa8vC,EAAMC,IAAIM,QACvB,OAAOrwC,EACX,IAAIjf,EAAI,IAAI+uD,EAAMC,IAAIM,QAOtB,OANmB,MAAfrwC,EAAEwP,YACFzuB,EAAEyuB,UAAY9d,QAAQsO,EAAEwP,YAEb,MAAXxP,EAAE4wC,QACF7vD,EAAE6vD,MAAQjsE,OAAOq7B,EAAE4wC,QAEhB7vD,CACX,EAWAsvD,EAAQG,SAAW,SAAkBzvD,EAAGxV,GAC/BA,IACDA,EAAI,CAAC,GACT,IAAIy0B,EAAI,CAAC,EAWT,OAVmB,MAAfjf,EAAEyuB,WAAqBzuB,EAAExU,eAAe,eACxCyzB,EAAEwP,UAAYzuB,EAAEyuB,UACZjkC,EAAEmlE,SACF1wC,EAAEkf,WAAa,cAER,MAAXn+B,EAAE6vD,OAAiB7vD,EAAExU,eAAe,WACpCyzB,EAAE4wC,MAAQ7vD,EAAE6vD,MACRrlE,EAAEmlE,SACF1wC,EAAE6wC,OAAS,UAEZ7wC,CACX,EASAqwC,EAAQhqE,UAAUkf,OAAS,WACvB,OAAO/X,KAAKF,YAAYkjE,SAAShjE,KAAMkiE,EAAUhrB,KAAK6pB,cAC1D,EAEO8B,CACV,CAhLa,GAkLdN,EAAIO,QAAU,WAsBV,SAASA,EAAQvnE,GACb,GAAIA,EACA,IAAK,IAAImnE,EAAKhkE,OAAOyI,KAAK5L,GAAID,EAAI,EAAGA,EAAIonE,EAAGzrE,SAAUqE,EAClC,MAAZC,EAAEmnE,EAAGpnE,MACL0E,KAAK0iE,EAAGpnE,IAAMC,EAAEmnE,EAAGpnE,IACnC,CAmDA,IAAIqnE,EA2OJ,OAtRAG,EAAQjqE,UAAUyW,KAAO,KAQzBwzD,EAAQjqE,UAAUuZ,KAAO,KAQzB0wD,EAAQjqE,UAAUyqE,MAAQ,KAQ1BR,EAAQjqE,UAAUuqE,MAAQ,GAQ1BN,EAAQjqE,UAAU0qE,UAAY,KAQ9BT,EAAQjqE,UAAUkJ,IAAM,KAWxBrD,OAAO2B,eAAeyiE,EAAQjqE,UAAW,QAAS,CAC9C8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,SACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAS3BjkE,OAAO2B,eAAeyiE,EAAQjqE,UAAW,QAAS,CAC9C8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,SACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAS3BjkE,OAAO2B,eAAeyiE,EAAQjqE,UAAW,SAAU,CAC/C8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,UACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAS3BjkE,OAAO2B,eAAeyiE,EAAQjqE,UAAW,aAAc,CACnD8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,cACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAS3BjkE,OAAO2B,eAAeyiE,EAAQjqE,UAAW,OAAQ,CAC7C8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,QACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAY3BG,EAAQlgE,OAAS,SAAgB2Q,EAAGqf,GAchC,OAbKA,IACDA,EAAIwvC,EAAQzjE,UACF,MAAV4U,EAAEjE,MAAgB5Q,OAAOK,eAAehG,KAAKwa,EAAG,SAChDqf,EAAE6pC,OAAO,IAAItkD,MAAM5E,EAAEjE,MACX,MAAViE,EAAEnB,MAAgB1T,OAAOK,eAAehG,KAAKwa,EAAG,SAChDqf,EAAE6pC,OAAO,IAAItkD,MAAM5E,EAAEnB,MACV,MAAXmB,EAAE+vD,OAAiB5kE,OAAOK,eAAehG,KAAKwa,EAAG,UACjDqf,EAAE6pC,OAAO,IAAItkD,MAAM5E,EAAE+vD,OACzB1wC,EAAE6pC,OAAO,IAAIxrD,OAAOsC,EAAE6vD,OACH,MAAf7vD,EAAEgwD,WAAqB7kE,OAAOK,eAAehG,KAAKwa,EAAG,cACrDqf,EAAE6pC,OAAO,IAAItkD,MAAM5E,EAAEgwD,WACZ,MAAThwD,EAAExR,KAAerD,OAAOK,eAAehG,KAAKwa,EAAG,QAC/Cqf,EAAE6pC,OAAO,IAAItkD,MAAM5E,EAAExR,KAClB6wB,CACX,EAaAkwC,EAAQ17D,OAAS,SAAgBkhB,EAAGa,GAC1Bb,aAAa65C,IACf75C,EAAI65C,EAAQxjE,OAAO2pB,IAEvB,IADA,IAAInT,OAAUtP,IAANsjB,EAAkBb,EAAEtsB,IAAMssB,EAAErR,IAAMkS,EAAG5V,EAAI,IAAI+uD,EAAMC,IAAIO,QACxDx6C,EAAErR,IAAM9B,GAAG,CACd,IAAI8c,EAAI3J,EAAEm0C,SACV,OAAQxqC,IAAM,GACd,KAAK,EACD1e,EAAEjE,KAAOgZ,EAAEnQ,QACX,MACJ,KAAK,EACD5E,EAAEnB,KAAOkW,EAAEnQ,QACX,MACJ,KAAK,EACD5E,EAAE+vD,MAAQh7C,EAAEnQ,QACZ,MACJ,KAAK,EACD5E,EAAE6vD,MAAQ96C,EAAErX,SACZ,MACJ,KAAK,EACDsC,EAAEgwD,UAAYj7C,EAAEnQ,QAChB,MACJ,KAAK,EACD5E,EAAExR,IAAMumB,EAAEnQ,QACV,MACJ,QACImQ,EAAE20C,SAAa,EAAJhrC,GAGnB,CACA,IAAK1e,EAAExU,eAAe,SAClB,MAAMsjE,EAAM3B,cAAc,2BAA4B,CAAEtnE,SAAUma,IACtE,OAAOA,CACX,EAUAuvD,EAAQzwD,WAAa,SAAoBmgB,GACrC,GAAIA,aAAa8vC,EAAMC,IAAIO,QACvB,OAAOtwC,EACX,IAAIjf,EAAI,IAAI+uD,EAAMC,IAAIO,QAkCtB,OAjCc,MAAVtwC,EAAEljB,OACoB,iBAAXkjB,EAAEljB,KACT+yD,EAAMhyD,OAAOjJ,OAAOorB,EAAEljB,KAAMiE,EAAEjE,KAAO+yD,EAAMrC,UAAUqC,EAAMhyD,OAAOpZ,OAAOu7B,EAAEljB,OAAQ,GAC9EkjB,EAAEljB,KAAKrY,SACZsc,EAAEjE,KAAOkjB,EAAEljB,OAEL,MAAVkjB,EAAEpgB,OACoB,iBAAXogB,EAAEpgB,KACTiwD,EAAMhyD,OAAOjJ,OAAOorB,EAAEpgB,KAAMmB,EAAEnB,KAAOiwD,EAAMrC,UAAUqC,EAAMhyD,OAAOpZ,OAAOu7B,EAAEpgB,OAAQ,GAC9EogB,EAAEpgB,KAAKnb,SACZsc,EAAEnB,KAAOogB,EAAEpgB,OAEJ,MAAXogB,EAAE8wC,QACqB,iBAAZ9wC,EAAE8wC,MACTjB,EAAMhyD,OAAOjJ,OAAOorB,EAAE8wC,MAAO/vD,EAAE+vD,MAAQjB,EAAMrC,UAAUqC,EAAMhyD,OAAOpZ,OAAOu7B,EAAE8wC,QAAS,GACjF9wC,EAAE8wC,MAAMrsE,SACbsc,EAAE+vD,MAAQ9wC,EAAE8wC,QAEL,MAAX9wC,EAAE4wC,QACF7vD,EAAE6vD,MAAQjsE,OAAOq7B,EAAE4wC,QAEJ,MAAf5wC,EAAE+wC,YACyB,iBAAhB/wC,EAAE+wC,UACTlB,EAAMhyD,OAAOjJ,OAAOorB,EAAE+wC,UAAWhwD,EAAEgwD,UAAYlB,EAAMrC,UAAUqC,EAAMhyD,OAAOpZ,OAAOu7B,EAAE+wC,YAAa,GAC7F/wC,EAAE+wC,UAAUtsE,SACjBsc,EAAEgwD,UAAY/wC,EAAE+wC,YAEX,MAAT/wC,EAAEzwB,MACmB,iBAAVywB,EAAEzwB,IACTsgE,EAAMhyD,OAAOjJ,OAAOorB,EAAEzwB,IAAKwR,EAAExR,IAAMsgE,EAAMrC,UAAUqC,EAAMhyD,OAAOpZ,OAAOu7B,EAAEzwB,MAAO,GAC3EywB,EAAEzwB,IAAI9K,SACXsc,EAAExR,IAAMywB,EAAEzwB,MAEXwR,CACX,EAWAuvD,EAAQE,SAAW,SAAkBzvD,EAAGxV,GAC/BA,IACDA,EAAI,CAAC,GACT,IAAIy0B,EAAI,CAAC,EAgCT,OA/BIz0B,EAAEyO,WACFgmB,EAAE4wC,MAAQ,IAEA,MAAV7vD,EAAEjE,MAAgBiE,EAAExU,eAAe,UACnCyzB,EAAEljB,KAAOvR,EAAEoa,QAAUhhB,OAASkrE,EAAMhyD,OAAOzN,OAAO2Q,EAAEjE,KAAM,EAAGiE,EAAEjE,KAAKrY,QAAU8G,EAAEoa,QAAUvf,MAAQA,MAAMC,UAAUC,MAAMC,KAAKwa,EAAEjE,MAAQiE,EAAEjE,KACrIvR,EAAEmlE,SACF1wC,EAAEgxC,MAAQ,SAEJ,MAAVjwD,EAAEnB,MAAgBmB,EAAExU,eAAe,UACnCyzB,EAAEpgB,KAAOrU,EAAEoa,QAAUhhB,OAASkrE,EAAMhyD,OAAOzN,OAAO2Q,EAAEnB,KAAM,EAAGmB,EAAEnB,KAAKnb,QAAU8G,EAAEoa,QAAUvf,MAAQA,MAAMC,UAAUC,MAAMC,KAAKwa,EAAEnB,MAAQmB,EAAEnB,KACrIrU,EAAEmlE,SACF1wC,EAAEixC,MAAQ,SAEH,MAAXlwD,EAAE+vD,OAAiB/vD,EAAExU,eAAe,WACpCyzB,EAAE8wC,MAAQvlE,EAAEoa,QAAUhhB,OAASkrE,EAAMhyD,OAAOzN,OAAO2Q,EAAE+vD,MAAO,EAAG/vD,EAAE+vD,MAAMrsE,QAAU8G,EAAEoa,QAAUvf,MAAQA,MAAMC,UAAUC,MAAMC,KAAKwa,EAAE+vD,OAAS/vD,EAAE+vD,MACzIvlE,EAAEmlE,SACF1wC,EAAEkxC,OAAS,UAEJ,MAAXnwD,EAAE6vD,OAAiB7vD,EAAExU,eAAe,WACpCyzB,EAAE4wC,MAAQ7vD,EAAE6vD,OAEG,MAAf7vD,EAAEgwD,WAAqBhwD,EAAExU,eAAe,eACxCyzB,EAAE+wC,UAAYxlE,EAAEoa,QAAUhhB,OAASkrE,EAAMhyD,OAAOzN,OAAO2Q,EAAEgwD,UAAW,EAAGhwD,EAAEgwD,UAAUtsE,QAAU8G,EAAEoa,QAAUvf,MAAQA,MAAMC,UAAUC,MAAMC,KAAKwa,EAAEgwD,WAAahwD,EAAEgwD,UACzJxlE,EAAEmlE,SACF1wC,EAAEmxC,WAAa,cAEV,MAATpwD,EAAExR,KAAewR,EAAExU,eAAe,SAClCyzB,EAAEzwB,IAAMhE,EAAEoa,QAAUhhB,OAASkrE,EAAMhyD,OAAOzN,OAAO2Q,EAAExR,IAAK,EAAGwR,EAAExR,IAAI9K,QAAU8G,EAAEoa,QAAUvf,MAAQA,MAAMC,UAAUC,MAAMC,KAAKwa,EAAExR,KAAOwR,EAAExR,IACjIhE,EAAEmlE,SACF1wC,EAAEoxC,KAAO,QAEVpxC,CACX,EASAswC,EAAQjqE,UAAUkf,OAAS,WACvB,OAAO/X,KAAKF,YAAYkjE,SAAShjE,KAAMkiE,EAAUhrB,KAAK6pB,cAC1D,EAEO+B,CACV,CA1Ta,GA4TdP,EAAIQ,eAAiB,WAoBjB,SAASA,EAAexnE,GAKpB,GAJAyE,KAAK6jE,MAAQ,GACb7jE,KAAK8jE,MAAQ,GACb9jE,KAAK+jE,MAAQ,GACb/jE,KAAKgkE,MAAQ,GACTzoE,EACA,IAAK,IAAImnE,EAAKhkE,OAAOyI,KAAK5L,GAAID,EAAI,EAAGA,EAAIonE,EAAGzrE,SAAUqE,EAClC,MAAZC,EAAEmnE,EAAGpnE,MACL0E,KAAK0iE,EAAGpnE,IAAMC,EAAEmnE,EAAGpnE,IACnC,CA+NA,OAvNAynE,EAAelqE,UAAUgrE,MAAQxB,EAAM3C,WAQvCqD,EAAelqE,UAAUirE,MAAQzB,EAAM3C,WAQvCqD,EAAelqE,UAAUkrE,MAAQ1B,EAAM3C,WAQvCqD,EAAelqE,UAAUmrE,MAAQ3B,EAAM3C,WAWvCqD,EAAengE,OAAS,SAAgB2Q,EAAGqf,GAGvC,GAFKA,IACDA,EAAIwvC,EAAQzjE,UACD,MAAX4U,EAAEswD,OAAiBtwD,EAAEswD,MAAM5sE,OAC3B,IAAK,IAAIqE,EAAI,EAAGA,EAAIiY,EAAEswD,MAAM5sE,SAAUqE,EAClCgnE,EAAMC,IAAI0B,aAAarhE,OAAO2Q,EAAEswD,MAAMvoE,GAAIs3B,EAAE6pC,OAAO,IAAImF,QAAQE,SAEvE,GAAe,MAAXvuD,EAAEuwD,OAAiBvwD,EAAEuwD,MAAM7sE,OAC3B,IAASqE,EAAI,EAAGA,EAAIiY,EAAEuwD,MAAM7sE,SAAUqE,EAClCgnE,EAAMC,IAAI2B,aAAathE,OAAO2Q,EAAEuwD,MAAMxoE,GAAIs3B,EAAE6pC,OAAO,IAAImF,QAAQE,SAEvE,GAAe,MAAXvuD,EAAEwwD,OAAiBxwD,EAAEwwD,MAAM9sE,OAC3B,IAASqE,EAAI,EAAGA,EAAIiY,EAAEwwD,MAAM9sE,SAAUqE,EAClCgnE,EAAMC,IAAI4B,aAAavhE,OAAO2Q,EAAEwwD,MAAMzoE,GAAIs3B,EAAE6pC,OAAO,IAAImF,QAAQE,SAEvE,GAAe,MAAXvuD,EAAEywD,OAAiBzwD,EAAEywD,MAAM/sE,OAC3B,IAASqE,EAAI,EAAGA,EAAIiY,EAAEywD,MAAM/sE,SAAUqE,EAClCgnE,EAAMC,IAAI6B,aAAaxhE,OAAO2Q,EAAEywD,MAAM1oE,GAAIs3B,EAAE6pC,OAAO,IAAImF,QAAQE,SAEvE,OAAOlvC,CACX,EAaAmwC,EAAe37D,OAAS,SAAgBkhB,EAAGa,GACjCb,aAAa65C,IACf75C,EAAI65C,EAAQxjE,OAAO2pB,IAEvB,IADA,IAAInT,OAAUtP,IAANsjB,EAAkBb,EAAEtsB,IAAMssB,EAAErR,IAAMkS,EAAG5V,EAAI,IAAI+uD,EAAMC,IAAIQ,eACxDz6C,EAAErR,IAAM9B,GAAG,CACd,IAAI8c,EAAI3J,EAAEm0C,SACV,OAAQxqC,IAAM,GACd,KAAK,EACK1e,EAAEswD,OAAStwD,EAAEswD,MAAM5sE,SACrBsc,EAAEswD,MAAQ,IACdtwD,EAAEswD,MAAMnsE,KAAK4qE,EAAMC,IAAI0B,aAAa78D,OAAOkhB,EAAGA,EAAEm0C,WAChD,MACJ,KAAK,EACKlpD,EAAEuwD,OAASvwD,EAAEuwD,MAAM7sE,SACrBsc,EAAEuwD,MAAQ,IACdvwD,EAAEuwD,MAAMpsE,KAAK4qE,EAAMC,IAAI2B,aAAa98D,OAAOkhB,EAAGA,EAAEm0C,WAChD,MACJ,KAAK,EACKlpD,EAAEwwD,OAASxwD,EAAEwwD,MAAM9sE,SACrBsc,EAAEwwD,MAAQ,IACdxwD,EAAEwwD,MAAMrsE,KAAK4qE,EAAMC,IAAI4B,aAAa/8D,OAAOkhB,EAAGA,EAAEm0C,WAChD,MACJ,KAAK,EACKlpD,EAAEywD,OAASzwD,EAAEywD,MAAM/sE,SACrBsc,EAAEywD,MAAQ,IACdzwD,EAAEywD,MAAMtsE,KAAK4qE,EAAMC,IAAI6B,aAAah9D,OAAOkhB,EAAGA,EAAEm0C,WAChD,MACJ,QACIn0C,EAAE20C,SAAa,EAAJhrC,GAGnB,CACA,OAAO1e,CACX,EAUAwvD,EAAe1wD,WAAa,SAAoBmgB,GAC5C,GAAIA,aAAa8vC,EAAMC,IAAIQ,eACvB,OAAOvwC,EACX,IAAIjf,EAAI,IAAI+uD,EAAMC,IAAIQ,eACtB,GAAIvwC,EAAEqxC,MAAO,CACT,IAAKjrE,MAAM+S,QAAQ6mB,EAAEqxC,OACjB,MAAMliE,UAAU,6CACpB4R,EAAEswD,MAAQ,GACV,IAAK,IAAIvoE,EAAI,EAAGA,EAAIk3B,EAAEqxC,MAAM5sE,SAAUqE,EAAG,CACrC,GAA0B,iBAAfk3B,EAAEqxC,MAAMvoE,GACf,MAAMqG,UAAU,8CACpB4R,EAAEswD,MAAMvoE,GAAKgnE,EAAMC,IAAI0B,aAAa5xD,WAAWmgB,EAAEqxC,MAAMvoE,GAC3D,CACJ,CACA,GAAIk3B,EAAEsxC,MAAO,CACT,IAAKlrE,MAAM+S,QAAQ6mB,EAAEsxC,OACjB,MAAMniE,UAAU,6CAEpB,IADA4R,EAAEuwD,MAAQ,GACDxoE,EAAI,EAAGA,EAAIk3B,EAAEsxC,MAAM7sE,SAAUqE,EAAG,CACrC,GAA0B,iBAAfk3B,EAAEsxC,MAAMxoE,GACf,MAAMqG,UAAU,8CACpB4R,EAAEuwD,MAAMxoE,GAAKgnE,EAAMC,IAAI2B,aAAa7xD,WAAWmgB,EAAEsxC,MAAMxoE,GAC3D,CACJ,CACA,GAAIk3B,EAAEuxC,MAAO,CACT,IAAKnrE,MAAM+S,QAAQ6mB,EAAEuxC,OACjB,MAAMpiE,UAAU,6CAEpB,IADA4R,EAAEwwD,MAAQ,GACDzoE,EAAI,EAAGA,EAAIk3B,EAAEuxC,MAAM9sE,SAAUqE,EAAG,CACrC,GAA0B,iBAAfk3B,EAAEuxC,MAAMzoE,GACf,MAAMqG,UAAU,8CACpB4R,EAAEwwD,MAAMzoE,GAAKgnE,EAAMC,IAAI4B,aAAa9xD,WAAWmgB,EAAEuxC,MAAMzoE,GAC3D,CACJ,CACA,GAAIk3B,EAAEwxC,MAAO,CACT,IAAKprE,MAAM+S,QAAQ6mB,EAAEwxC,OACjB,MAAMriE,UAAU,6CAEpB,IADA4R,EAAEywD,MAAQ,GACD1oE,EAAI,EAAGA,EAAIk3B,EAAEwxC,MAAM/sE,SAAUqE,EAAG,CACrC,GAA0B,iBAAfk3B,EAAEwxC,MAAM1oE,GACf,MAAMqG,UAAU,8CACpB4R,EAAEywD,MAAM1oE,GAAKgnE,EAAMC,IAAI6B,aAAa/xD,WAAWmgB,EAAEwxC,MAAM1oE,GAC3D,CACJ,CACA,OAAOiY,CACX,EAWAwvD,EAAeC,SAAW,SAAkBzvD,EAAGxV,GACtCA,IACDA,EAAI,CAAC,GACT,IAAIy0B,EAAI,CAAC,EAOT,IANIz0B,EAAEklE,QAAUllE,EAAEyO,YACdgmB,EAAEqxC,MAAQ,GACVrxC,EAAEsxC,MAAQ,GACVtxC,EAAEuxC,MAAQ,GACVvxC,EAAEwxC,MAAQ,IAEVzwD,EAAEswD,OAAStwD,EAAEswD,MAAM5sE,OAAQ,CAC3Bu7B,EAAEqxC,MAAQ,GACV,IAAK,IAAIzvD,EAAI,EAAGA,EAAIb,EAAEswD,MAAM5sE,SAAUmd,EAClCoe,EAAEqxC,MAAMzvD,GAAKkuD,EAAMC,IAAI0B,aAAajB,SAASzvD,EAAEswD,MAAMzvD,GAAIrW,EAEjE,CACA,GAAIwV,EAAEuwD,OAASvwD,EAAEuwD,MAAM7sE,OAEnB,IADAu7B,EAAEsxC,MAAQ,GACD1vD,EAAI,EAAGA,EAAIb,EAAEuwD,MAAM7sE,SAAUmd,EAClCoe,EAAEsxC,MAAM1vD,GAAKkuD,EAAMC,IAAI2B,aAAalB,SAASzvD,EAAEuwD,MAAM1vD,GAAIrW,GAGjE,GAAIwV,EAAEwwD,OAASxwD,EAAEwwD,MAAM9sE,OAEnB,IADAu7B,EAAEuxC,MAAQ,GACD3vD,EAAI,EAAGA,EAAIb,EAAEwwD,MAAM9sE,SAAUmd,EAClCoe,EAAEuxC,MAAM3vD,GAAKkuD,EAAMC,IAAI4B,aAAanB,SAASzvD,EAAEwwD,MAAM3vD,GAAIrW,GAGjE,GAAIwV,EAAEywD,OAASzwD,EAAEywD,MAAM/sE,OAEnB,IADAu7B,EAAEwxC,MAAQ,GACD5vD,EAAI,EAAGA,EAAIb,EAAEywD,MAAM/sE,SAAUmd,EAClCoe,EAAEwxC,MAAM5vD,GAAKkuD,EAAMC,IAAI6B,aAAapB,SAASzvD,EAAEywD,MAAM5vD,GAAIrW,GAGjE,OAAOy0B,CACX,EASAuwC,EAAelqE,UAAUkf,OAAS,WAC9B,OAAO/X,KAAKF,YAAYkjE,SAAShjE,KAAMkiE,EAAUhrB,KAAK6pB,cAC1D,EAEOgC,CACV,CA7PoB,GA+PrBR,EAAI0B,aAAe,WAkBf,SAASA,EAAa1oE,GAElB,GADAyE,KAAKqkE,WAAa,GACd9oE,EACA,IAAK,IAAImnE,EAAKhkE,OAAOyI,KAAK5L,GAAID,EAAI,EAAGA,EAAIonE,EAAGzrE,SAAUqE,EAClC,MAAZC,EAAEmnE,EAAGpnE,MACL0E,KAAK0iE,EAAGpnE,IAAMC,EAAEmnE,EAAGpnE,IACnC,CAmBA,IAAIqnE,EA0IJ,OArJAsB,EAAaprE,UAAUyrE,QAAU,KAQjCL,EAAaprE,UAAUwrE,WAAahC,EAAM3C,WAW1ChhE,OAAO2B,eAAe4jE,EAAaprE,UAAW,WAAY,CACtD8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,YACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAY3BsB,EAAarhE,OAAS,SAAgB2Q,EAAGqf,GAKrC,GAJKA,IACDA,EAAIwvC,EAAQzjE,UACC,MAAb4U,EAAE+wD,SAAmB5lE,OAAOK,eAAehG,KAAKwa,EAAG,YACnDqf,EAAE6pC,OAAO,IAAIxrD,OAAOsC,EAAE+wD,SACN,MAAhB/wD,EAAE8wD,YAAsB9wD,EAAE8wD,WAAWptE,OACrC,IAAK,IAAIqE,EAAI,EAAGA,EAAIiY,EAAE8wD,WAAWptE,SAAUqE,EACvCs3B,EAAE6pC,OAAO,IAAItkD,MAAM5E,EAAE8wD,WAAW/oE,IAExC,OAAOs3B,CACX,EAaAqxC,EAAa78D,OAAS,SAAgBkhB,EAAGa,GAC/Bb,aAAa65C,IACf75C,EAAI65C,EAAQxjE,OAAO2pB,IAEvB,IADA,IAAInT,OAAUtP,IAANsjB,EAAkBb,EAAEtsB,IAAMssB,EAAErR,IAAMkS,EAAG5V,EAAI,IAAI+uD,EAAMC,IAAI0B,aACxD37C,EAAErR,IAAM9B,GAAG,CACd,IAAI8c,EAAI3J,EAAEm0C,SACV,OAAQxqC,IAAM,GACd,KAAK,EACD1e,EAAE+wD,QAAUh8C,EAAErX,SACd,MACJ,KAAK,EACKsC,EAAE8wD,YAAc9wD,EAAE8wD,WAAWptE,SAC/Bsc,EAAE8wD,WAAa,IACnB9wD,EAAE8wD,WAAW3sE,KAAK4wB,EAAEnQ,SACpB,MACJ,QACImQ,EAAE20C,SAAa,EAAJhrC,GAGnB,CACA,OAAO1e,CACX,EAUA0wD,EAAa5xD,WAAa,SAAoBmgB,GAC1C,GAAIA,aAAa8vC,EAAMC,IAAI0B,aACvB,OAAOzxC,EACX,IAAIjf,EAAI,IAAI+uD,EAAMC,IAAI0B,aAItB,GAHiB,MAAbzxC,EAAE8xC,UACF/wD,EAAE+wD,QAAUntE,OAAOq7B,EAAE8xC,UAErB9xC,EAAE6xC,WAAY,CACd,IAAKzrE,MAAM+S,QAAQ6mB,EAAE6xC,YACjB,MAAM1iE,UAAU,gDACpB4R,EAAE8wD,WAAa,GACf,IAAK,IAAI/oE,EAAI,EAAGA,EAAIk3B,EAAE6xC,WAAWptE,SAAUqE,EACR,iBAApBk3B,EAAE6xC,WAAW/oE,GACpB+mE,EAAMhyD,OAAOjJ,OAAOorB,EAAE6xC,WAAW/oE,GAAIiY,EAAE8wD,WAAW/oE,GAAK+mE,EAAMrC,UAAUqC,EAAMhyD,OAAOpZ,OAAOu7B,EAAE6xC,WAAW/oE,KAAM,GACzGk3B,EAAE6xC,WAAW/oE,GAAGrE,SACrBsc,EAAE8wD,WAAW/oE,GAAKk3B,EAAE6xC,WAAW/oE,GAE3C,CACA,OAAOiY,CACX,EAWA0wD,EAAajB,SAAW,SAAkBzvD,EAAGxV,GACpCA,IACDA,EAAI,CAAC,GACT,IAAIy0B,EAAI,CAAC,EAST,IARIz0B,EAAEklE,QAAUllE,EAAEyO,YACdgmB,EAAE6xC,WAAa,IAEF,MAAb9wD,EAAE+wD,SAAmB/wD,EAAExU,eAAe,aACtCyzB,EAAE8xC,QAAU/wD,EAAE+wD,QACVvmE,EAAEmlE,SACF1wC,EAAE+xC,SAAW,YAEjBhxD,EAAE8wD,YAAc9wD,EAAE8wD,WAAWptE,OAAQ,CACrCu7B,EAAE6xC,WAAa,GACf,IAAK,IAAIjwD,EAAI,EAAGA,EAAIb,EAAE8wD,WAAWptE,SAAUmd,EACvCoe,EAAE6xC,WAAWjwD,GAAKrW,EAAEoa,QAAUhhB,OAASkrE,EAAMhyD,OAAOzN,OAAO2Q,EAAE8wD,WAAWjwD,GAAI,EAAGb,EAAE8wD,WAAWjwD,GAAGnd,QAAU8G,EAAEoa,QAAUvf,MAAQA,MAAMC,UAAUC,MAAMC,KAAKwa,EAAE8wD,WAAWjwD,IAAMb,EAAE8wD,WAAWjwD,EAEhM,CACA,OAAOoe,CACX,EASAyxC,EAAaprE,UAAUkf,OAAS,WAC5B,OAAO/X,KAAKF,YAAYkjE,SAAShjE,KAAMkiE,EAAUhrB,KAAK6pB,cAC1D,EAEOkD,CACV,CAtLkB,GAwLnB1B,EAAI2B,aAAe,WAiBf,SAASA,EAAa3oE,GAElB,GADAyE,KAAKqkE,WAAa,GACd9oE,EACA,IAAK,IAAImnE,EAAKhkE,OAAOyI,KAAK5L,GAAID,EAAI,EAAGA,EAAIonE,EAAGzrE,SAAUqE,EAClC,MAAZC,EAAEmnE,EAAGpnE,MACL0E,KAAK0iE,EAAGpnE,IAAMC,EAAEmnE,EAAGpnE,IACnC,CA0HA,OAlHA4oE,EAAarrE,UAAUwrE,WAAahC,EAAM3C,WAW1CwE,EAAathE,OAAS,SAAgB2Q,EAAGqf,GAGrC,GAFKA,IACDA,EAAIwvC,EAAQzjE,UACI,MAAhB4U,EAAE8wD,YAAsB9wD,EAAE8wD,WAAWptE,OACrC,IAAK,IAAIqE,EAAI,EAAGA,EAAIiY,EAAE8wD,WAAWptE,SAAUqE,EACvCs3B,EAAE6pC,OAAO,IAAItkD,MAAM5E,EAAE8wD,WAAW/oE,IAExC,OAAOs3B,CACX,EAaAsxC,EAAa98D,OAAS,SAAgBkhB,EAAGa,GAC/Bb,aAAa65C,IACf75C,EAAI65C,EAAQxjE,OAAO2pB,IAEvB,IADA,IAAInT,OAAUtP,IAANsjB,EAAkBb,EAAEtsB,IAAMssB,EAAErR,IAAMkS,EAAG5V,EAAI,IAAI+uD,EAAMC,IAAI2B,aACxD57C,EAAErR,IAAM9B,GAAG,CACd,IAAI8c,EAAI3J,EAAEm0C,SACFxqC,IAAM,GACT,GACK1e,EAAE8wD,YAAc9wD,EAAE8wD,WAAWptE,SAC/Bsc,EAAE8wD,WAAa,IACnB9wD,EAAE8wD,WAAW3sE,KAAK4wB,EAAEnQ,UAGpBmQ,EAAE20C,SAAa,EAAJhrC,EAGnB,CACA,OAAO1e,CACX,EAUA2wD,EAAa7xD,WAAa,SAAoBmgB,GAC1C,GAAIA,aAAa8vC,EAAMC,IAAI2B,aACvB,OAAO1xC,EACX,IAAIjf,EAAI,IAAI+uD,EAAMC,IAAI2B,aACtB,GAAI1xC,EAAE6xC,WAAY,CACd,IAAKzrE,MAAM+S,QAAQ6mB,EAAE6xC,YACjB,MAAM1iE,UAAU,gDACpB4R,EAAE8wD,WAAa,GACf,IAAK,IAAI/oE,EAAI,EAAGA,EAAIk3B,EAAE6xC,WAAWptE,SAAUqE,EACR,iBAApBk3B,EAAE6xC,WAAW/oE,GACpB+mE,EAAMhyD,OAAOjJ,OAAOorB,EAAE6xC,WAAW/oE,GAAIiY,EAAE8wD,WAAW/oE,GAAK+mE,EAAMrC,UAAUqC,EAAMhyD,OAAOpZ,OAAOu7B,EAAE6xC,WAAW/oE,KAAM,GACzGk3B,EAAE6xC,WAAW/oE,GAAGrE,SACrBsc,EAAE8wD,WAAW/oE,GAAKk3B,EAAE6xC,WAAW/oE,GAE3C,CACA,OAAOiY,CACX,EAWA2wD,EAAalB,SAAW,SAAkBzvD,EAAGxV,GACpCA,IACDA,EAAI,CAAC,GACT,IAAIy0B,EAAI,CAAC,EAIT,IAHIz0B,EAAEklE,QAAUllE,EAAEyO,YACdgmB,EAAE6xC,WAAa,IAEf9wD,EAAE8wD,YAAc9wD,EAAE8wD,WAAWptE,OAAQ,CACrCu7B,EAAE6xC,WAAa,GACf,IAAK,IAAIjwD,EAAI,EAAGA,EAAIb,EAAE8wD,WAAWptE,SAAUmd,EACvCoe,EAAE6xC,WAAWjwD,GAAKrW,EAAEoa,QAAUhhB,OAASkrE,EAAMhyD,OAAOzN,OAAO2Q,EAAE8wD,WAAWjwD,GAAI,EAAGb,EAAE8wD,WAAWjwD,GAAGnd,QAAU8G,EAAEoa,QAAUvf,MAAQA,MAAMC,UAAUC,MAAMC,KAAKwa,EAAE8wD,WAAWjwD,IAAMb,EAAE8wD,WAAWjwD,EAEhM,CACA,OAAOoe,CACX,EASA0xC,EAAarrE,UAAUkf,OAAS,WAC5B,OAAO/X,KAAKF,YAAYkjE,SAAShjE,KAAMkiE,EAAUhrB,KAAK6pB,cAC1D,EAEOmD,CACV,CAlJkB,GAoJnB3B,EAAI4B,aAAe,WAiBf,SAASA,EAAa5oE,GAClB,GAAIA,EACA,IAAK,IAAImnE,EAAKhkE,OAAOyI,KAAK5L,GAAID,EAAI,EAAGA,EAAIonE,EAAGzrE,SAAUqE,EAClC,MAAZC,EAAEmnE,EAAGpnE,MACL0E,KAAK0iE,EAAGpnE,IAAMC,EAAEmnE,EAAGpnE,IACnC,CAWA,IAAIqnE,EA6GJ,OAhHAwB,EAAatrE,UAAUyrE,QAAU,KAWjC5lE,OAAO2B,eAAe8jE,EAAatrE,UAAW,WAAY,CACtD8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,YACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAY3BwB,EAAavhE,OAAS,SAAgB2Q,EAAGqf,GAKrC,OAJKA,IACDA,EAAIwvC,EAAQzjE,UACC,MAAb4U,EAAE+wD,SAAmB5lE,OAAOK,eAAehG,KAAKwa,EAAG,YACnDqf,EAAE6pC,OAAO,IAAIxrD,OAAOsC,EAAE+wD,SACnB1xC,CACX,EAaAuxC,EAAa/8D,OAAS,SAAgBkhB,EAAGa,GAC/Bb,aAAa65C,IACf75C,EAAI65C,EAAQxjE,OAAO2pB,IAEvB,IADA,IAAInT,OAAUtP,IAANsjB,EAAkBb,EAAEtsB,IAAMssB,EAAErR,IAAMkS,EAAG5V,EAAI,IAAI+uD,EAAMC,IAAI4B,aACxD77C,EAAErR,IAAM9B,GAAG,CACd,IAAI8c,EAAI3J,EAAEm0C,SACFxqC,IAAM,GACT,EACD1e,EAAE+wD,QAAUh8C,EAAErX,SAGdqX,EAAE20C,SAAa,EAAJhrC,EAGnB,CACA,OAAO1e,CACX,EAUA4wD,EAAa9xD,WAAa,SAAoBmgB,GAC1C,GAAIA,aAAa8vC,EAAMC,IAAI4B,aACvB,OAAO3xC,EACX,IAAIjf,EAAI,IAAI+uD,EAAMC,IAAI4B,aAItB,OAHiB,MAAb3xC,EAAE8xC,UACF/wD,EAAE+wD,QAAUntE,OAAOq7B,EAAE8xC,UAElB/wD,CACX,EAWA4wD,EAAanB,SAAW,SAAkBzvD,EAAGxV,GACpCA,IACDA,EAAI,CAAC,GACT,IAAIy0B,EAAI,CAAC,EAMT,OALiB,MAAbjf,EAAE+wD,SAAmB/wD,EAAExU,eAAe,aACtCyzB,EAAE8xC,QAAU/wD,EAAE+wD,QACVvmE,EAAEmlE,SACF1wC,EAAE+xC,SAAW,YAEd/xC,CACX,EASA2xC,EAAatrE,UAAUkf,OAAS,WAC5B,OAAO/X,KAAKF,YAAYkjE,SAAShjE,KAAMkiE,EAAUhrB,KAAK6pB,cAC1D,EAEOoD,CACV,CA/IkB,GAiJnB5B,EAAI6B,aAAe,WAmBf,SAASA,EAAa7oE,GAElB,GADAyE,KAAKwkE,MAAQ,GACTjpE,EACA,IAAK,IAAImnE,EAAKhkE,OAAOyI,KAAK5L,GAAID,EAAI,EAAGA,EAAIonE,EAAGzrE,SAAUqE,EAClC,MAAZC,EAAEmnE,EAAGpnE,MACL0E,KAAK0iE,EAAGpnE,IAAMC,EAAEmnE,EAAGpnE,IACnC,CA2BA,IAAIqnE,EA2KJ,OA9LAyB,EAAavrE,UAAUyrE,QAAU,KAQjCF,EAAavrE,UAAU2rE,MAAQnC,EAAM3C,WAQrC0E,EAAavrE,UAAU4rE,QAAU,KAWjC/lE,OAAO2B,eAAe+jE,EAAavrE,UAAW,WAAY,CACtD8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,YACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAS3BjkE,OAAO2B,eAAe+jE,EAAavrE,UAAW,WAAY,CACtD8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,YACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAY3ByB,EAAaxhE,OAAS,SAAgB2Q,EAAGqf,GAKrC,GAJKA,IACDA,EAAIwvC,EAAQzjE,UACC,MAAb4U,EAAE+wD,SAAmB5lE,OAAOK,eAAehG,KAAKwa,EAAG,YACnDqf,EAAE6pC,OAAO,IAAIxrD,OAAOsC,EAAE+wD,SACX,MAAX/wD,EAAEixD,OAAiBjxD,EAAEixD,MAAMvtE,OAC3B,IAAK,IAAIqE,EAAI,EAAGA,EAAIiY,EAAEixD,MAAMvtE,SAAUqE,EAClCgnE,EAAMC,IAAImC,SAAS9hE,OAAO2Q,EAAEixD,MAAMlpE,GAAIs3B,EAAE6pC,OAAO,IAAImF,QAAQE,SAInE,OAFiB,MAAbvuD,EAAEkxD,SAAmB/lE,OAAOK,eAAehG,KAAKwa,EAAG,YACnDqf,EAAE6pC,OAAO,IAAIa,OAAO/pD,EAAEkxD,SACnB7xC,CACX,EAaAwxC,EAAah9D,OAAS,SAAgBkhB,EAAGa,GAC/Bb,aAAa65C,IACf75C,EAAI65C,EAAQxjE,OAAO2pB,IAEvB,IADA,IAAInT,OAAUtP,IAANsjB,EAAkBb,EAAEtsB,IAAMssB,EAAErR,IAAMkS,EAAG5V,EAAI,IAAI+uD,EAAMC,IAAI6B,aACxD97C,EAAErR,IAAM9B,GAAG,CACd,IAAI8c,EAAI3J,EAAEm0C,SACV,OAAQxqC,IAAM,GACd,KAAK,EACD1e,EAAE+wD,QAAUh8C,EAAErX,SACd,MACJ,KAAK,EACKsC,EAAEixD,OAASjxD,EAAEixD,MAAMvtE,SACrBsc,EAAEixD,MAAQ,IACdjxD,EAAEixD,MAAM9sE,KAAK4qE,EAAMC,IAAImC,SAASt9D,OAAOkhB,EAAGA,EAAEm0C,WAC5C,MACJ,KAAK,EACDlpD,EAAEkxD,QAAUn8C,EAAEg1C,SACd,MACJ,QACIh1C,EAAE20C,SAAa,EAAJhrC,GAGnB,CACA,OAAO1e,CACX,EAUA6wD,EAAa/xD,WAAa,SAAoBmgB,GAC1C,GAAIA,aAAa8vC,EAAMC,IAAI6B,aACvB,OAAO5xC,EACX,IAAIjf,EAAI,IAAI+uD,EAAMC,IAAI6B,aAItB,GAHiB,MAAb5xC,EAAE8xC,UACF/wD,EAAE+wD,QAAUntE,OAAOq7B,EAAE8xC,UAErB9xC,EAAEgyC,MAAO,CACT,IAAK5rE,MAAM+S,QAAQ6mB,EAAEgyC,OACjB,MAAM7iE,UAAU,2CACpB4R,EAAEixD,MAAQ,GACV,IAAK,IAAIlpE,EAAI,EAAGA,EAAIk3B,EAAEgyC,MAAMvtE,SAAUqE,EAAG,CACrC,GAA0B,iBAAfk3B,EAAEgyC,MAAMlpE,GACf,MAAMqG,UAAU,4CACpB4R,EAAEixD,MAAMlpE,GAAKgnE,EAAMC,IAAImC,SAASryD,WAAWmgB,EAAEgyC,MAAMlpE,GACvD,CACJ,CAWA,OAViB,MAAbk3B,EAAEiyC,UACEpC,EAAMjF,MACL7pD,EAAEkxD,QAAUpC,EAAMjF,KAAKuH,UAAUnyC,EAAEiyC,UAAU5F,UAAW,EAC/B,iBAAdrsC,EAAEiyC,QACdlxD,EAAEkxD,QAAUhwD,SAAS+d,EAAEiyC,QAAS,IACN,iBAAdjyC,EAAEiyC,QACdlxD,EAAEkxD,QAAUjyC,EAAEiyC,QACY,iBAAdjyC,EAAEiyC,UACdlxD,EAAEkxD,QAAU,IAAIpC,EAAMrG,SAASxpC,EAAEiyC,QAAQ9F,MAAQ,EAAGnsC,EAAEiyC,QAAQ7F,OAAS,GAAGhf,UAAS,KAEpFrsC,CACX,EAWA6wD,EAAapB,SAAW,SAAkBzvD,EAAGxV,GACpCA,IACDA,EAAI,CAAC,GACT,IAAIy0B,EAAI,CAAC,EAST,IARIz0B,EAAEklE,QAAUllE,EAAEyO,YACdgmB,EAAEgyC,MAAQ,IAEG,MAAbjxD,EAAE+wD,SAAmB/wD,EAAExU,eAAe,aACtCyzB,EAAE8xC,QAAU/wD,EAAE+wD,QACVvmE,EAAEmlE,SACF1wC,EAAE+xC,SAAW,YAEjBhxD,EAAEixD,OAASjxD,EAAEixD,MAAMvtE,OAAQ,CAC3Bu7B,EAAEgyC,MAAQ,GACV,IAAK,IAAIpwD,EAAI,EAAGA,EAAIb,EAAEixD,MAAMvtE,SAAUmd,EAClCoe,EAAEgyC,MAAMpwD,GAAKkuD,EAAMC,IAAImC,SAAS1B,SAASzvD,EAAEixD,MAAMpwD,GAAIrW,EAE7D,CASA,OARiB,MAAbwV,EAAEkxD,SAAmBlxD,EAAExU,eAAe,aACb,iBAAdwU,EAAEkxD,QACTjyC,EAAEiyC,QAAU1mE,EAAEijE,QAAU7pE,OAASA,OAAOoc,EAAEkxD,SAAWlxD,EAAEkxD,QAEvDjyC,EAAEiyC,QAAU1mE,EAAEijE,QAAU7pE,OAASkrE,EAAMjF,KAAKvkE,UAAU4Z,SAAS1Z,KAAKwa,EAAEkxD,SAAW1mE,EAAEijE,QAAU37D,OAAS,IAAIg9D,EAAMrG,SAASzoD,EAAEkxD,QAAQ9F,MAAQ,EAAGprD,EAAEkxD,QAAQ7F,OAAS,GAAGhf,UAAS,GAAQrsC,EAAEkxD,QACvL1mE,EAAEmlE,SACF1wC,EAAEoyC,SAAW,YAEdpyC,CACX,EASA4xC,EAAavrE,UAAUkf,OAAS,WAC5B,OAAO/X,KAAKF,YAAYkjE,SAAShjE,KAAMkiE,EAAUhrB,KAAK6pB,cAC1D,EAEOqD,CACV,CAhOkB,GAkOnB7B,EAAImC,SAAW,WAkBX,SAASA,EAASnpE,GACd,GAAIA,EACA,IAAK,IAAImnE,EAAKhkE,OAAOyI,KAAK5L,GAAID,EAAI,EAAGA,EAAIonE,EAAGzrE,SAAUqE,EAClC,MAAZC,EAAEmnE,EAAGpnE,MACL0E,KAAK0iE,EAAGpnE,IAAMC,EAAEmnE,EAAGpnE,IACnC,CAmBA,IAAIqnE,EA2IJ,OAtJA+B,EAAS7rE,UAAUgsE,OAAS,KAQ5BH,EAAS7rE,UAAUisE,iBAAmB,KAWtCpmE,OAAO2B,eAAeqkE,EAAS7rE,UAAW,UAAW,CACjD8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,WACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAS3BjkE,OAAO2B,eAAeqkE,EAAS7rE,UAAW,oBAAqB,CAC3D8H,IAAK0hE,EAAM1B,YAAYgC,EAAe,CAAC,qBACvC9mE,IAAKwmE,EAAMvB,YAAY6B,KAY3B+B,EAAS9hE,OAAS,SAAgB2Q,EAAGqf,GAOjC,OANKA,IACDA,EAAIwvC,EAAQzjE,UACA,MAAZ4U,EAAEsxD,QAAkBnmE,OAAOK,eAAehG,KAAKwa,EAAG,WAClDqf,EAAE6pC,OAAO,IAAItkD,MAAM5E,EAAEsxD,QACC,MAAtBtxD,EAAEuxD,kBAA4BpmE,OAAOK,eAAehG,KAAKwa,EAAG,qBAC5Dqf,EAAE6pC,OAAO,IAAItkD,MAAM5E,EAAEuxD,kBAClBlyC,CACX,EAaA8xC,EAASt9D,OAAS,SAAgBkhB,EAAGa,GAC3Bb,aAAa65C,IACf75C,EAAI65C,EAAQxjE,OAAO2pB,IAEvB,IADA,IAAInT,OAAUtP,IAANsjB,EAAkBb,EAAEtsB,IAAMssB,EAAErR,IAAMkS,EAAG5V,EAAI,IAAI+uD,EAAMC,IAAImC,SACxDp8C,EAAErR,IAAM9B,GAAG,CACd,IAAI8c,EAAI3J,EAAEm0C,SACV,OAAQxqC,IAAM,GACd,KAAK,EACD1e,EAAEsxD,OAASv8C,EAAEnQ,QACb,MACJ,KAAK,EACD5E,EAAEuxD,iBAAmBx8C,EAAEnQ,QACvB,MACJ,QACImQ,EAAE20C,SAAa,EAAJhrC,GAGnB,CACA,OAAO1e,CACX,EAUAmxD,EAASryD,WAAa,SAAoBmgB,GACtC,GAAIA,aAAa8vC,EAAMC,IAAImC,SACvB,OAAOlyC,EACX,IAAIjf,EAAI,IAAI+uD,EAAMC,IAAImC,SAatB,OAZgB,MAAZlyC,EAAEqyC,SACsB,iBAAbryC,EAAEqyC,OACTxC,EAAMhyD,OAAOjJ,OAAOorB,EAAEqyC,OAAQtxD,EAAEsxD,OAASxC,EAAMrC,UAAUqC,EAAMhyD,OAAOpZ,OAAOu7B,EAAEqyC,SAAU,GACpFryC,EAAEqyC,OAAO5tE,SACdsc,EAAEsxD,OAASryC,EAAEqyC,SAEK,MAAtBryC,EAAEsyC,mBACgC,iBAAvBtyC,EAAEsyC,iBACTzC,EAAMhyD,OAAOjJ,OAAOorB,EAAEsyC,iBAAkBvxD,EAAEuxD,iBAAmBzC,EAAMrC,UAAUqC,EAAMhyD,OAAOpZ,OAAOu7B,EAAEsyC,mBAAoB,GAClHtyC,EAAEsyC,iBAAiB7tE,SACxBsc,EAAEuxD,iBAAmBtyC,EAAEsyC,mBAExBvxD,CACX,EAWAmxD,EAAS1B,SAAW,SAAkBzvD,EAAGxV,GAChCA,IACDA,EAAI,CAAC,GACT,IAAIy0B,EAAI,CAAC,EAWT,OAVgB,MAAZjf,EAAEsxD,QAAkBtxD,EAAExU,eAAe,YACrCyzB,EAAEqyC,OAAS9mE,EAAEoa,QAAUhhB,OAASkrE,EAAMhyD,OAAOzN,OAAO2Q,EAAEsxD,OAAQ,EAAGtxD,EAAEsxD,OAAO5tE,QAAU8G,EAAEoa,QAAUvf,MAAQA,MAAMC,UAAUC,MAAMC,KAAKwa,EAAEsxD,QAAUtxD,EAAEsxD,OAC7I9mE,EAAEmlE,SACF1wC,EAAEuyC,QAAU,WAEM,MAAtBxxD,EAAEuxD,kBAA4BvxD,EAAExU,eAAe,sBAC/CyzB,EAAEsyC,iBAAmB/mE,EAAEoa,QAAUhhB,OAASkrE,EAAMhyD,OAAOzN,OAAO2Q,EAAEuxD,iBAAkB,EAAGvxD,EAAEuxD,iBAAiB7tE,QAAU8G,EAAEoa,QAAUvf,MAAQA,MAAMC,UAAUC,MAAMC,KAAKwa,EAAEuxD,kBAAoBvxD,EAAEuxD,iBACrL/mE,EAAEmlE,SACF1wC,EAAEwyC,kBAAoB,qBAEvBxyC,CACX,EASAkyC,EAAS7rE,UAAUkf,OAAS,WACxB,OAAO/X,KAAKF,YAAYkjE,SAAShjE,KAAMkiE,EAAUhrB,KAAK6pB,cAC1D,EAEO2D,CACV,CAtLc,GAwLRnC,CACV,CA/zDW,GAi0DLD,CACX,GAh1D8C,mGCLvC,MAAM2C,EACTC,OACAC,KAAO,IAAI31D,IACX41D,aACAC,QAAU,GAEVC,kBAAoB,EAIpBxlE,YAMAolE,EAAQK,EAAiBH,GACrBplE,KAAKklE,OAASA,EACdllE,KAAKolE,aAAeA,EACpB,IAAK,IAAI9pE,EAAI,EAAGA,EAAIiqE,EAAiBjqE,IACjC0E,KAAKqlE,QAAQ/pE,GAAK,EAE1B,CACI7D,WACA,OAAOuI,KAAKmlE,KAAK1tE,IACrB,CAKAqK,IAAI0jE,EAAWvnD,EAAKwnD,GAAY,GAC5B,MAAM,SAAEC,GAAaF,EAErB,OAAIxlE,KAAKmlE,KAAKh1D,IAAIu1D,KAGlB1lE,KAAKmlE,KAAKtpE,IAAI6pE,EAAU,CACpBhoD,QAASO,EACTwnD,YACAE,iBAAkB,IAAIt8D,IACtBu8D,YAAa,IAAIp2D,MAErBxP,KAAKqlE,QAAQ,GAAG3tE,KAAK,IAAK8tE,EAAWpC,MAAOnlD,EAAImlD,QAC3CqC,GACDzlE,KAAKslE,qBAEF,EACX,CACAO,iBAAiBC,EAAOC,GACpB,MAAMx+D,EAAQvH,KAAKmlE,KAAKxkE,IAAImlE,GACxBv+D,IAGCA,EAAMk+D,WACPl+D,EAAMo+D,iBAAiB74D,IAAIi5D,EAEnC,CAIAplE,IAAImlE,GACA,OAAO9lE,KAAKmlE,KAAKxkE,IAAIX,KAAKolE,aAAaU,KAASpoD,OACpD,CAKAsoD,kBAAkBN,EAAUnqE,GACxB,MAAM0iB,EAAMje,KAAKmlE,KAAKxkE,IAAI+kE,GAC1B,IAAKznD,EACD,OAAO,KAEX,MAAMvY,GAASuY,EAAI2nD,YAAYjlE,IAAIpF,IAAM,GAAK,EAE9C,OADA0iB,EAAI2nD,YAAY/pE,IAAIN,EAAGmK,GAChB,CAAEuY,IAAKA,EAAIP,QAAShY,QAC/B,CAIAugE,aAAaC,GACT,MAAMC,EAAgB,IAAI32D,IAC1B,IAAK,IAAIlU,EAAI,EAAGA,EAAI0E,KAAKklE,OAAQ5pE,IAC7B0E,KAAKqlE,QAAQ/pE,GAAG8E,SAASmH,IACrB,MAAM0W,EAAMje,KAAKmlE,KAAKxkE,IAAI4G,EAAMm+D,UAChC,GAAIznD,GAAOA,EAAIwnD,WAAaS,EAAO/1D,IAAI5I,EAAM67D,OAAQ,CACjD,IAAIgD,EAASD,EAAcxlE,IAAI4G,EAAM67D,OAChCgD,IACDA,EAAS,GACTD,EAActqE,IAAI0L,EAAM67D,MAAOgD,IAEnCA,EAAO1uE,KAAK6P,EAAMu+D,MACtB,KAGR,OAAOK,CACX,CAMAruB,SAASguB,GACL,MAAMv+D,EAAQvH,KAAKmlE,KAAKxkE,IAAImlE,GAC5B,IAAKv+D,EACD,OAAO,KAENA,EAAMk+D,WACPzlE,KAAKslE,oBAET,MAAM,QAAE5nD,EAAO,iBAAEioD,GAAqBp+D,EAKtC,OAJAA,EAAMk+D,WAAY,EAGlBl+D,EAAMo+D,iBAAmB,IAAIt8D,IACtB,CAAEqU,UAASioD,mBACtB,CAIAvmE,QAC6BY,KAAKqlE,QAAQrlE,KAAKqlE,QAAQpuE,OAAS,GAC3CmJ,SAASimE,IACtB,MAAM9+D,EAAQvH,KAAKmlE,KAAKxkE,IAAI0lE,EAAWX,UACnCn+D,IACAvH,KAAKmlE,KAAKp4D,OAAOs5D,EAAWX,UACvBn+D,EAAMk+D,WACPzlE,KAAKslE,oBAEb,IAEJtlE,KAAKqlE,QAAQ30C,MACb1wB,KAAKqlE,QAAQ70C,QAAQ,GACzB,CACAO,OAAO+0C,GACH,MAAMv+D,EAAQvH,KAAKmlE,KAAKxkE,IAAImlE,GAC5B,OAAKv+D,GAILvH,KAAKmlE,KAAKp4D,OAAO+4D,GACVv+D,GAJI,IAKf,uCC7IG,SAAS++D,EAAaC,EAAMC,EAAQC,EAAQC,GAC/C,IAAIC,EAAQ,EAEZjoE,OAAO4I,QAAQk/D,EAAON,QAAQ9lE,SAAQ,EAAEgjE,EAAOwD,MAE3C,MAAMC,EAAcJ,EAAOP,OAAO9C,GAClC,QAAoBv9D,IAAhBghE,EAEA,OAEJ,IAAIC,EAAa,EAEjB,GAAIF,EAAOG,OAAQ,CACf,IAAIC,EAAKJ,EAAOK,SAAWJ,EAAYK,kBACnCF,EAAKH,EAAYM,gBACjBH,EAAKH,EAAYM,eAErBL,GAAcE,EAAKH,EAAYO,gBACnC,CAEA,IAAIC,EAAKT,EAAOU,uBAMhB,GALID,EAAKR,EAAYU,4BACjBF,EAAKR,EAAYU,2BAErBT,GAAcO,EAAKR,EAAYW,6BAE3BZ,EAAOa,6BACPb,EAAOc,sBAAwBb,EAAYc,+BAAgC,CAC3E,MAAMC,EAAUf,EAAYc,+BAAiCf,EAAOc,sBAEpEZ,GADWc,EAAUA,EACFf,EAAYgB,2BACnC,CAIAf,GADYF,EAAOkB,mBACCjB,EAAYkB,yBAIhCjB,GADWF,EAAOoB,yBAA2BpB,EAAOoB,yBACjCnB,EAAYoB,+BAE/BtB,GAASG,EAAaD,EAAYqB,WAAW,IAG7CzB,EAAO0B,cAAgB,GAAKxB,EAAQF,EAAO0B,gBAC3CxB,EAAQF,EAAO0B,eAGnB,MAAMC,EAAK3B,EAAO4B,iBAAiB9B,GAmBnC,GAlBAI,GAASyB,EAAK3B,EAAO6B,kBAErB9B,EAAO+B,SAASnoE,SAASooE,IACrB,GAAI/B,EAAOgC,4BAA4Bt4D,IAAIq4D,GACvC,OAKJ,MAAME,EAAYhC,EAAQ/lE,IAAI6nE,GACxBG,EAAeD,EAAYA,EAAUjxE,KAAO,EAClD,GAAIkxE,EAAelC,EAAOmC,4BAA6B,CACnD,MAAMC,EAAUF,EAAelC,EAAOmC,4BAEtCjC,GADWkC,EAAUA,EACPpC,EAAOqC,wBACzB,KAGAtC,EAAOuC,iBAAmBtC,EAAOuC,0BAA2B,CAC5D,MAAMC,EAASzC,EAAOuC,iBAAmBtC,EAAOuC,0BAEhDrC,GADWsC,EAASA,EACNxC,EAAOyC,sBACzB,CACA,OAAOvC,CACX,qGCzEO,MAAMwC,EAAgC,oECAtC,SAASC,EAAoB7C,EAAMC,EAAQC,EAAQC,EAAS2C,GAC/D,IAAI1C,EAAQ,EACZ,MAAM2C,EAAU,IAAI95D,IA8DpB,GA5DA9Q,OAAO4I,QAAQk/D,EAAON,QAAQ9lE,SAAQ,EAAEgjE,EAAOwD,MAG3C,MAAM2C,EAAaF,EAAgB1oE,IAAIyiE,IAAU,UAC3CyD,EAAcJ,EAAOP,OAAO9C,GAClC,QAAoBv9D,IAAhBghE,EAEA,OAEJ,IAAI2C,EAAcF,EAAQ3oE,IAAI4oE,GACzBC,IACDA,EAAc,CACVC,IAAK,EACLC,IAAK,EACLC,IAAK,EACLC,KAAM,EACNC,IAAK,GAETP,EAAQztE,IAAI0tE,EAAYC,IAE5B,IAAIC,EAAM,EACNC,EAAM,EACNC,EAAM,EACNC,EAAO,EACPC,EAAM,EAEV,GAAIjD,EAAOG,OAAQ,CAEf0C,GADWxwE,KAAKue,IAAIovD,EAAOK,SAAWJ,EAAYK,kBAAmBL,EAAYM,eACrEN,EAAYO,gBAC5B,CAEA,IAAIC,EAAKT,EAAOU,uBAMhB,GALID,EAAKR,EAAYU,4BACjBF,EAAKR,EAAYU,2BAErBmC,GAAOrC,EAAKR,EAAYW,6BAEpBZ,EAAOa,6BACPb,EAAOc,sBAAwBb,EAAYc,+BAAgC,CAC3E,MAAMC,EAAUf,EAAYc,+BAAiCf,EAAOc,sBAEpEiC,GADW/B,EAAUA,EACTf,EAAYgB,2BAC5B,CAIA+B,GADYhD,EAAOkB,mBACLjB,EAAYkB,yBAI1B8B,GADWjD,EAAOoB,yBAA2BpB,EAAOoB,yBACxCnB,EAAYoB,+BAExBtB,IAAU8C,EAAMC,EAAMC,EAAMC,EAAOC,GAAOhD,EAAYqB,YACtDsB,EAAYC,KAAOA,EACnBD,EAAYE,KAAOA,EACnBF,EAAYG,KAAOA,EACnBH,EAAYI,MAAQA,EACpBJ,EAAYK,KAAOA,CAAG,IAGtBpD,EAAO0B,cAAgB,GAAKxB,EAAQF,EAAO0B,cAAe,CAC1DxB,EAAQF,EAAO0B,cAEf,MAAM2B,EAAOrD,EAAO0B,cAAgBxB,EACpC,IAAK,MAAMoD,KAAMT,EAAQ3tE,SACrBouE,EAAGN,KAAOK,EACVC,EAAGL,KAAOI,EACVC,EAAGJ,KAAOG,EACVC,EAAGH,MAAQE,EACXC,EAAGF,KAAOC,CAElB,CACA,IAAIE,EAAM,EACNC,EAAM,EACNC,EAAM,EAGVF,GADWvD,EAAO4B,iBAAiB9B,GACvBE,EAAO6B,kBAEnB9B,EAAO+B,SAASnoE,SAASooE,IACrB,GAAI/B,EAAOgC,4BAA4Bt4D,IAAIq4D,GACvC,OAKJ,MAAME,EAAYhC,EAAQ/lE,IAAI6nE,GACxBG,EAAeD,EAAYA,EAAUjxE,KAAO,EAClD,GAAIkxE,EAAelC,EAAOmC,4BAA6B,CACnD,MAAMC,EAAUF,EAAelC,EAAOmC,4BAEtCqB,GADWpB,EAAUA,EACTpC,EAAOqC,wBACvB,KAMJ,OAFAoB,GADW1D,EAAOuC,iBAAmBvC,EAAOuC,iBAChCtC,EAAOyC,uBACnBvC,GAASqD,EAAMC,EAAMC,EACd,CACHZ,UACAU,MACAC,MACAC,MACAvD,QAER,CACO,SAASwD,EAA4BC,EAAYC,EAAW5D,EAAQC,EAAS2C,GAChF,MAAMiB,EAAK,CACPhB,QAAS,IAAI95D,IACbw6D,IAAK,GACLC,IAAK,GACLC,IAAK,GACLvD,MAAO,IAEX,IAAK,MAAM4D,KAAaH,EAAY,CAChC,MAAM5D,EAAS6D,EAAU1pE,IAAI4pE,GAC7B,GAAI/D,EAAQ,CACR,MAAMgE,EAASpB,EAAoBmB,EAAW/D,EAAQC,EAAQC,EAAS2C,GACvE,IAAK,MAAOjG,EAAOqH,KAAgBD,EAAOlB,QAAS,CAC/C,IAAIoB,EAAUJ,EAAGhB,QAAQ3oE,IAAIyiE,GACxBsH,IACDA,EAAU,CACNjB,IAAK,GACLC,IAAK,GACLC,IAAK,GACLC,KAAM,GACNC,IAAK,IAETS,EAAGhB,QAAQztE,IAAIunE,EAAOsH,IAE1BA,EAAQjB,IAAI/xE,KAAK+yE,EAAYhB,KAC7BiB,EAAQhB,IAAIhyE,KAAK+yE,EAAYf,KAC7BgB,EAAQf,IAAIjyE,KAAK+yE,EAAYd,KAC7Be,EAAQd,KAAKlyE,KAAK+yE,EAAYb,MAC9Bc,EAAQb,IAAInyE,KAAK+yE,EAAYZ,IACjC,CACAS,EAAGN,IAAItyE,KAAK8yE,EAAOR,KACnBM,EAAGL,IAAIvyE,KAAK8yE,EAAOP,KACnBK,EAAGJ,IAAIxyE,KAAK8yE,EAAON,KACnBI,EAAG3D,MAAMjvE,KAAK8yE,EAAO7D,MACzB,MAEI2D,EAAGN,IAAItyE,KAAK,GACZ4yE,EAAGL,IAAIvyE,KAAK,GACZ4yE,EAAGJ,IAAIxyE,KAAK,GACZ4yE,EAAG3D,MAAMjvE,KAAK,EAEtB,CACA,OAAO4yE,CACX,qECpJO,SAASK,EAAQ9vE,GACpB,GAAIA,EAAI5D,QAAU,EACd,OAAO4D,EAKX,IAAK,IAAIS,EAAI,EAAGA,EAAIT,EAAI5D,OAAQqE,IAAK,CACjC,MAAM8Y,EAHCnb,KAAK8kB,MAAM9kB,KAAKgwB,SAAWhwB,KAAK8kB,MAAMljB,EAAI5D,SAI3C2zE,EAAM/vE,EAAIS,GAChBT,EAAIS,GAAKT,EAAIuZ,GACbvZ,EAAIuZ,GAAKw2D,CACb,CACA,OAAO/vE,CACX,qGCdO,MAAMgwE,EACTvjE,QAAU,IAAIkI,IACds7D,WACAhrE,YAAYirE,GACR/qE,KAAK8qE,WAAaC,EAAKD,UAG3B,CACIrzE,WACA,OAAOuI,KAAKsH,QAAQ7P,IACxB,CAEAqK,IAAIC,EAAKlD,GACL,QAAImB,KAAKsH,QAAQ6I,IAAIpO,KAQrB/B,KAAKsH,QAAQzL,IAAIkG,EAAK,CAAElD,QAAOmsE,aAAc9xE,KAAK+xE,MAAQjrE,KAAK8qE,cACxD,EACX,CACA9G,QACI,MAAMiH,EAAM/xE,KAAK+xE,MACjB,IAAK,MAAOrjE,EAAGkhB,KAAM9oB,KAAKsH,QAAQA,UAAW,CACzC,KAAIwhB,EAAEkiD,aAAeC,GAMjB,MALAjrE,KAAKsH,QAAQyF,OAAOnF,EAO5B,CACJ,CACAuI,IAAIpO,GACA,OAAO/B,KAAKsH,QAAQ6I,IAAIpO,EAC5B,CACApB,IAAIoB,GACA,MAAMlD,EAAQmB,KAAKsH,QAAQ3G,IAAIoB,GAC/B,OAAOlD,GAASA,EAAMmsE,cAAgB9xE,KAAK+xE,MAAQpsE,EAAMA,WAAQgH,CACrE,CACA3C,QACIlD,KAAKsH,QAAQpE,OACjB,4HC7COgoE,EAMPC,EAWOC,EAiDAC,cAjEX,SAAWH,GACPA,EAAa,IAAI,MACjBA,EAAiB,QAAI,UACrBA,EAAmB,UAAI,WAC1B,CAJD,CAIGA,IAAYA,EAAU,CAAC,IAE1B,SAAWC,GACPA,EAAgBA,EAAqB,IAAI,GAAK,MAC9CA,EAAgBA,EAAyB,QAAI,GAAK,UAClDA,EAAgBA,EAA2B,UAAI,GAAK,WACvD,CAJD,CAIGA,IAAoBA,EAAkB,CAAC,IAC1C,SAAWD,GACPA,EAAQI,MAAQ,KACL,QAAYH,EAE1B,CAJD,CAIGD,IAAYA,EAAU,CAAC,IAE1B,SAAWE,GACP,IAAIG,EACJH,EAAUE,MAAQ,KACA,MAAVC,IACAA,GAAS,SAAQ,CAACv5D,EAAK4gB,EAAGm4C,EAAO,CAAC,MACD,IAAzBA,EAAKS,iBACL54C,EAAEgvC,OAEU,MAAZ5vD,EAAI/W,OACJ23B,EAAE6pC,OAAO,GACTyO,EAAQI,QAAQ1oE,OAAOoP,EAAI/W,KAAM23B,IAErB,MAAZ5gB,EAAIy5D,OACJ74C,EAAE6pC,OAAO,IACT7pC,EAAEza,MAAMnG,EAAIy5D,QAEa,IAAzBV,EAAKS,iBACL54C,EAAEkvC,QACN,IACD,CAACh3C,EAAQ7zB,KACR,MAAM+a,EAAM,CAAC,EACPxK,EAAgB,MAAVvQ,EAAiB6zB,EAAO9uB,IAAM8uB,EAAO7T,IAAMhgB,EACvD,KAAO6zB,EAAO7T,IAAMzP,GAAK,CACrB,MAAM0/C,EAAMp8B,EAAO2xC,SACnB,OAAQvV,IAAQ,GACZ,KAAK,EACDl1C,EAAI/W,KAAOiwE,EAAQI,QAAQlkE,OAAO0jB,GAClC,MACJ,KAAK,EACD9Y,EAAIy5D,KAAO3gD,EAAO3S,QAClB,MACJ,QACI2S,EAAOmyC,SAAe,EAAN/V,GAG5B,CACA,OAAOl1C,CAAG,KAGXu5D,GAEXH,EAAUxoE,OAAUoP,IACT,QAAcA,EAAKo5D,EAAUE,SAExCF,EAAUhkE,OAAUrM,IACT,QAAcA,EAAKqwE,EAAUE,QAE3C,CA/CD,CA+CGF,IAAcA,EAAY,CAAC,IAE9B,SAAWC,GACP,IAAIE,EACJF,EAAWC,MAAQ,KACD,MAAVC,IACAA,GAAS,SAAQ,CAACv5D,EAAK4gB,EAAGm4C,EAAO,CAAC,MACD,IAAzBA,EAAKS,iBACL54C,EAAEgvC,OAEU,MAAZ5vD,EAAI/W,OACJ23B,EAAE6pC,OAAO,GACTyO,EAAQI,QAAQ1oE,OAAOoP,EAAI/W,KAAM23B,IAErB,MAAZ5gB,EAAIy5D,OACJ74C,EAAE6pC,OAAO,IACT7pC,EAAEza,MAAMnG,EAAIy5D,QAEa,IAAzBV,EAAKS,iBACL54C,EAAEkvC,QACN,IACD,CAACh3C,EAAQ7zB,KACR,MAAM+a,EAAM,CAAC,EACPxK,EAAgB,MAAVvQ,EAAiB6zB,EAAO9uB,IAAM8uB,EAAO7T,IAAMhgB,EACvD,KAAO6zB,EAAO7T,IAAMzP,GAAK,CACrB,MAAM0/C,EAAMp8B,EAAO2xC,SACnB,OAAQvV,IAAQ,GACZ,KAAK,EACDl1C,EAAI/W,KAAOiwE,EAAQI,QAAQlkE,OAAO0jB,GAClC,MACJ,KAAK,EACD9Y,EAAIy5D,KAAO3gD,EAAO3S,QAClB,MACJ,QACI2S,EAAOmyC,SAAe,EAAN/V,GAG5B,CACA,OAAOl1C,CAAG,KAGXu5D,GAEXF,EAAWzoE,OAAUoP,IACV,QAAcA,EAAKq5D,EAAWC,SAEzCD,EAAWjkE,OAAUrM,IACV,QAAcA,EAAKswE,EAAWC,QAE5C,CA/CD,CA+CGD,IAAeA,EAAa,CAAC,iGCtHjB,SAASK,EAAYz0E,GAChC,GAAIqtB,MAAMrtB,IAAWA,GAAU,EAC3B,MAAM,IAAI,KAAU,qDAAsD,sBAE9E,OAAO,QAAMA,EACjB,gECLA,SAAS00E,EAAYtsE,EAAMkP,EAAQ3L,EAAQwE,GACvC,MAAO,CACH/H,OACAkP,SACAq9D,QAAS,CACLvsE,OACAkP,SACA3L,UAEJipE,QAAS,CACLzkE,UAGZ,CACA,MAAM6J,EAAS06D,EAAY,OAAQ,KAAM5wE,GAE9B,IADS,IAAI+wE,YAAY,QACX1kE,OAAOrM,KAC5BM,IACgB,IAAIyS,aACLlL,OAAOvH,EAAIoE,UAAU,MAElCssE,EAAQJ,EAAY,QAAS,KAAM5wE,IACrC,IAAIkW,EAAS,IACb,IAAK,IAAI3V,EAAI,EAAGA,EAAIP,EAAI9D,OAAQqE,IAC5B2V,GAAU9Z,OAAOC,aAAa2D,EAAIO,IAEtC,OAAO2V,CAAM,IACb5V,IACAA,EAAMA,EAAIoE,UAAU,GACpB,MAAM1E,GAAM,OAAYM,EAAIpE,QAC5B,IAAK,IAAIqE,EAAI,EAAGA,EAAID,EAAIpE,OAAQqE,IAC5BP,EAAIO,GAAKD,EAAIG,WAAWF,GAE5B,OAAOP,CAAG,IAERixE,EAAQ,CACVr9D,KAAMsC,EACN,QAASA,EACT6tC,IAAK,YACLmtB,OAAQF,EACRA,MAAOA,EACPG,OAAQH,KACL,MAEP,0CC9CO,SAASI,EAAYn6D,GACxB,GAAW,MAAPA,EAAa,CACb,GAAoC,mBAAzBA,EAAIxb,OAAOiW,UAClB,OAAOuF,EAAIxb,OAAOiW,YAEtB,GAAyC,mBAA9BuF,EAAIxb,OAAOuQ,eAClB,OAAOiL,EAAIxb,OAAOuQ,iBAEtB,GAAwB,mBAAbiL,EAAIrM,KACX,OAAOqM,CAEf,CACA,MAAM,IAAIzZ,MAAM,0CACpB,qGCZA,MAAMs9C,EACFl/C,OACA++C,KACAC,IACAC,IACAjwC,KACA7F,YAAY21C,GACR,KAAMA,EAAM,IAA4B,IAApBA,EAAM,EAAKA,GAC3B,MAAM,IAAIl9C,MAAM,qDAEpByH,KAAKrJ,OAAS,IAAIiC,MAAM68C,GACxBz1C,KAAK01C,KAAOD,EAAM,EAClBz1C,KAAK21C,IAAM,EACX31C,KAAK41C,IAAM,EACX51C,KAAK2F,KAAO,IAChB,CACAjO,KAAK0a,GACD,YAA8BvM,IAA1B7F,KAAKrJ,OAAOqJ,KAAK21C,OAGrB31C,KAAKrJ,OAAOqJ,KAAK21C,KAAOvjC,EACxBpS,KAAK21C,IAAO31C,KAAK21C,IAAM,EAAK31C,KAAK01C,MAC1B,EACX,CACAt2C,QACI,MAAM5H,EAAOwI,KAAKrJ,OAAOqJ,KAAK41C,KAC9B,QAAa/vC,IAATrO,EAKJ,OAFAwI,KAAKrJ,OAAOqJ,KAAK41C,UAAO/vC,EACxB7F,KAAK41C,IAAO51C,KAAK41C,IAAM,EAAK51C,KAAK01C,KAC1Bl+C,CACX,CACA+5B,UACI,YAAiC1rB,IAA1B7F,KAAKrJ,OAAOqJ,KAAK41C,IAC5B,EAEG,MAAMw2B,EACT30E,KACAg+C,IACA9kB,KACAE,KACA/wB,YAAYkC,EAAU,CAAC,GACnBhC,KAAKy1C,IAAMzzC,EAAQqqE,YAAc,GACjCrsE,KAAK2wB,KAAO,IAAIklB,EAAU71C,KAAKy1C,KAC/Bz1C,KAAK6wB,KAAO7wB,KAAK2wB,KACjB3wB,KAAKvI,KAAO,CAChB,CACA60E,cAAct6D,GACV,OAAuB,MAAnBA,GAAKpD,WACEoD,EAAIpD,WAER,CACX,CACAlX,KAAK+b,GAID,GAHkB,MAAdA,GAAK5U,QACLmB,KAAKvI,MAAQuI,KAAKssE,cAAc74D,EAAI5U,SAEnCmB,KAAK2wB,KAAKj5B,KAAK+b,GAAM,CACtB,MAAMqiC,EAAO91C,KAAK2wB,KAClB3wB,KAAK2wB,KAAOmlB,EAAKnwC,KAAO,IAAIkwC,EAAU,EAAI71C,KAAK2wB,KAAKh6B,OAAOM,QAC3D+I,KAAK2wB,KAAKj5B,KAAK+b,EACnB,CACJ,CACArU,QACI,IAAIqU,EAAMzT,KAAK6wB,KAAKzxB,QACpB,QAAYyG,IAAR4N,GAAwC,MAAlBzT,KAAK6wB,KAAKlrB,KAAe,CAC/C,MAAMA,EAAO3F,KAAK6wB,KAAKlrB,KACvB3F,KAAK6wB,KAAKlrB,KAAO,KACjB3F,KAAK6wB,KAAOlrB,EACZ8N,EAAMzT,KAAK6wB,KAAKzxB,OACpB,CAIA,OAHkB,MAAdqU,GAAK5U,QACLmB,KAAKvI,MAAQuI,KAAKssE,cAAc74D,EAAI5U,QAEjC4U,CACX,CACA8d,UACI,OAAOvxB,KAAK2wB,KAAKY,SACrB,+IChFU,IAAI/2B,WAAW,GAA7B,MAmBM8c,EAAS,CAACi1D,EAAIC,KAClB,GAAID,IAAOC,EAAI,OAAO,EACtB,GAAID,EAAG39D,aAAe49D,EAAG59D,WACvB,OAAO,EAGT,IAAK,IAAI69D,EAAK,EAAGA,EAAKF,EAAG39D,WAAY69D,IACnC,GAAIF,EAAGE,KAAQD,EAAGC,GAChB,OAAO,EAIX,OAAO,GAOHC,EAAS3uE,IACb,GAAIA,aAAavD,YAAqC,eAAvBuD,EAAE+B,YAAYT,KAAuB,OAAOtB,EAC3E,GAAIA,aAAasT,YAAa,OAAO,IAAI7W,WAAWuD,GACpD,GAAIsT,YAAYC,OAAOvT,GACrB,OAAO,IAAIvD,WAAWuD,EAAEpH,OAAQoH,EAAE4T,WAAY5T,EAAE6Q,YAElD,MAAM,IAAIrW,MAAM,oCAAmC,EAc/C6Y,EAAa/V,IAAO,IAAKyS,aAAelL,OAAOvH,GAM/CoX,EAAWV,IAAK,IAAK+5D,aAAe1kE,OAAO2K,iIC7C1C,MAAMtP,EAAS,CAACkqE,EAAMC,KAC3B,MAAM,MAAEz0D,EAAK,QAAEiI,GAAYusD,EAC3B,OACO,IADCvsD,EAEGysD,EACL10D,EACA20D,EAAUH,GAC+B,GAAU,EAAAI,UAAA,SAG9CC,EACL70D,EACA20D,EAAUH,GACmCC,GAAQ,EAAAK,OAAA,QAE3D,EAoBI19D,EAAQ,IAAIsY,QAMZilD,EAAYI,IAChB,MAAMJ,EAAYv9D,EAAM5O,IAAIusE,GAC5B,GAAiB,MAAbJ,EAAmB,CACrB,MAAMA,EAAY,IAAIt9D,IAEtB,OADAD,EAAM1T,IAAIqxE,EAAKJ,GACRA,CACT,CACA,OAAOA,GAWF,MAAMK,EAOXrtE,YAAasgB,EAASne,EAAMmrE,EAAWj1D,GAErCnY,KAAKiC,KAAOA,EAEZjC,KAAKogB,QAAUA,EAEfpgB,KAAKotE,UAAYA,EAEjBptE,KAAKmY,MAAQA,EAKbnY,KAAK,KAAOmY,CACd,CAQIk1D,YACF,OAAOrtE,IACT,CAGI2R,iBACF,OAAO3R,KAAKmY,MAAMxG,UACpB,CAGI/C,iBACF,OAAO5O,KAAKmY,MAAMvJ,UACpB,CAKA0+D,OACE,OAAQttE,KAAKogB,SACX,KAAK,EACH,OAA4D,KAE9D,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,UAAEmrE,GAAcptE,KAE5B,GAAIiC,IAASsrE,EACX,MAAM,IAAIh1E,MAAM,4CAIlB,GAAI60E,EAAUnrE,OAASurE,EACrB,MAAM,IAAIj1E,MAAM,sDAGlB,OACE40E,EAAIM,SAC8C,EAGtD,CACA,QACE,MAAMl1E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAKAstD,OACE,OAAQ1tE,KAAKogB,SACX,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,OAAE00B,GAAW32B,KAAKotE,UACxBA,EAAY,KAAcnrE,EAAM00B,GACtC,OACEw2C,EAAIQ,SAAS3tE,KAAKiC,KAAMmrE,EAE5B,CACA,KAAK,EACH,OAAgD,KAElD,QACE,MAAM70E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAMA9I,OAAQs2D,GACN,OAAOT,EAAI71D,OAAOtX,KAAM4tE,EAC1B,CAWA5/D,cAAeqb,EAAMukD,GACnB,MAAMC,EACiE,EAGvE,OACEA,GACAxkD,EAAKpnB,OAAS4rE,EAAQ5rE,MACtBonB,EAAKjJ,UAAYytD,EAAQztD,SACzB,KAAciJ,EAAK+jD,UAAWS,EAAQT,UAE1C,CAMA36D,SAAUm6D,GACR,OAAOnqE,EAAOzC,KAAM4sE,EACtB,CAKA70D,SACE,MAAO,CAAE,IAAKtV,EAAOzC,MACvB,CAEA2sE,OACE,OAAO3sE,IACT,CAEYuzB,IAAP/8B,OAAO+8B,eACV,MAAO,KACT,CAIA,CAAC/8B,OAAOs3E,IAAI,iCACV,MAAO,OAAO9tE,KAAKyS,aACrB,CAoBAzE,aAAcjS,GACZ,GAAa,MAATA,EACF,OAAO,KAGT,MAAM8C,EAA2B,EACjC,GAAIA,aAAiBsuE,EAEnB,OAAOtuE,EACF,GAAmB,MAAdA,EAAM,MAAgBA,EAAM,OAASA,EAAMsZ,OAAUtZ,EAAMwuE,QAAUxuE,EAAO,CAMtF,MAAM,QAAEuhB,EAAO,KAAEne,EAAI,UAAEmrE,EAAS,MAAEj1D,GAAUtZ,EAC5C,OAAO,IAAIsuE,EACT/sD,EACAne,EACwC,EACxCkW,GAAS41D,EAAU3tD,EAASne,EAAMmrE,EAAUj1D,OAEhD,CAAO,IAAyB,IAArBtZ,EAAMmvE,GAAqB,CAIpC,MAAM,QAAE5tD,EAAO,UAAEgtD,EAAS,KAAEnrE,GAASpD,EAC/B83B,EAEH,KAAcy2C,GACjB,OAAOD,EAAIxuE,OAAOyhB,EAASne,EAAM00B,EACnC,CAGE,OAAO,IAEX,CAaA3oB,cAAeoS,EAASne,EAAM00B,GAC5B,GAAoB,iBAAT10B,EACT,MAAM,IAAI1J,MAAM,yCAGlB,KAAMo+B,EAAOxe,iBAAiB3d,YAC5B,MAAM,IAAIjC,MAAM,kBAGlB,OAAQ6nB,GACN,KAAK,EACH,GAAIne,IAASsrE,EACX,MAAM,IAAIh1E,MACR,wCAAwCg1E,qBAG1C,OAAO,IAAIJ,EAAI/sD,EAASne,EAAM00B,EAAQA,EAAOxe,OAGjD,KAAK,EAAG,CACN,MAAMA,EAAQ41D,EAAU3tD,EAASne,EAAM00B,EAAOxe,OAC9C,OAAO,IAAIg1D,EAAI/sD,EAASne,EAAM00B,EAAQxe,EACxC,CACA,QACE,MAAM,IAAI5f,MAAM,mBAGtB,CASAyV,gBAAiB2oB,GACf,OAAOw2C,EAAIxuE,OAAO,EAAG4uE,EAAa52C,EACpC,CAYA3oB,gBAAiB/L,EAAM00B,GACrB,OAAOw2C,EAAIxuE,OAAO,EAAGsD,EAAM00B,EAC7B,CAgBA3oB,cAAemK,GACb,MAAO+0D,EAAKe,GAAad,EAAIe,YAAY/1D,GACzC,GAAI81D,EAAUh3E,OACZ,MAAM,IAAIsB,MAAM,oBAElB,OAAO20E,CACT,CAkBAl/D,mBAAoBmK,GAClB,MAAMg2D,EAAQhB,EAAIiB,aAAaj2D,GACzBk2D,EAAaF,EAAM12E,KAAO02E,EAAMG,cAChCC,GAAiB,QACrBp2D,EAAM7gB,SAAS+2E,EAAYA,EAAaF,EAAMG,gBAEhD,GAAIC,EAAe3/D,aAAeu/D,EAAMG,cACtC,MAAM,IAAI/1E,MAAM,oBAElB,MAAMi2E,EAAcD,EAAej3E,SACjC62E,EAAMG,cAAgBH,EAAMM,YAExB93C,EAAS,IAAI,KACjBw3C,EAAMO,cACNP,EAAMM,WACND,EACAD,GAMF,MAAO,CAHa,IAAlBJ,EAAM/tD,QACF+sD,EAAIM,SAAyD,GAC7DN,EAAIQ,SAASQ,EAAM7C,MAAO30C,GACaxe,EAAM7gB,SAAS62E,EAAM12E,MACpE,CAkBAuW,oBAAqB2gE,GACnB,IAAIz3E,EAAS,EACb,MAAMyO,EAAO,KACX,MAAOrK,EAAGrE,GAAU,KAAc03E,EAAar3E,SAASJ,IAExD,OADAA,GAAUD,EACHqE,GAGT,IAAI8kB,EAA4Bza,IAC5B2lE,EAAyB,EAS7B,GARuC,KAAd,GAEvBlrD,EAA2B,EAC3BlpB,EAAS,GAETo0E,EAA0B3lE,IAGZ,IAAZya,GAA6B,IAAZA,EACnB,MAAM,IAAIxP,WAAW,uBAAuBwP,KAG9C,MAAMiuD,EAAan3E,EACbw3E,EAAkC/oE,IAClC8oE,EAAa9oE,IACblO,EAAOP,EAASu3E,EAGtB,MAAO,CAAEruD,UAASkrD,QAAOoD,gBAAeD,aAAYH,cAF9B72E,EAAO42E,EAEsC52E,OACrE,CAiBAuW,aAAc7P,EAAQyuE,GACpB,MAAOr+D,EAAQ4J,GAASy2D,EAAgBzwE,EAAQyuE,GAE1CM,EAAMC,EAAI/lE,OAAO+Q,GAEvB,GAAoB,IAAhB+0D,EAAI9sD,SAA+B,MAAdjiB,EAAO,GAC9B,MAAM5F,MAAM,0DAMd,OAFAu0E,EAAUI,GAAKrxE,IAAI0S,EAAQpQ,GAEpB+uE,CACT,EAaF,MAAM0B,EAAkB,CAACzwE,EAAQyuE,KAC/B,OAAQzuE,EAAO,IAEb,IAAK,IAAK,CACR,MAAM0tE,EAAUe,GAAQ,EAAAG,UACxB,MAAO,CACkB,EAAAA,UAAgB,OACvClB,EAAQzkE,OAAO,GAAG,EAAA2lE,UAAA,SAAmB5uE,KAEzC,CACA,KAAK,EAAA4uE,UAAA,OAAkB,CACrB,MAAMlB,EAAUe,GAAQ,EAAAG,UACxB,MAAO,CAAuB,EAAAA,UAAgB,OAAGlB,EAAQzkE,OAAOjJ,GAClE,CACA,KAAK,EAAA8uE,OAAA,OAAe,CAClB,MAAMpB,EAAUe,GAAQ,EAAAK,OACxB,MAAO,CAAuB,EAAAA,OAAa,OAAGpB,EAAQzkE,OAAOjJ,GAC/D,CACA,QACE,GAAY,MAARyuE,EACF,MAAMr0E,MACJ,mFAGJ,MAAO,CAAuB4F,EAAO,GAAKyuE,EAAKxlE,OAAOjJ,IAE1D,EASI0uE,EAAa,CAAC10D,EAAO5I,EAAOq9D,KAChC,MAAM,OAAEr+D,GAAWq+D,EACnB,GAAIr+D,IAAW,EAAAw+D,UAAA,OACb,MAAMx0E,MAAM,8BAA8Bq0E,EAAKvtE,iBAGjD,MAAM6tE,EAAM39D,EAAM5O,IAAI4N,GACtB,GAAW,MAAP2+D,EAAa,CACf,MAAMA,EAAMN,EAAKhqE,OAAOuV,GAAOrf,MAAM,GAErC,OADAyW,EAAM1T,IAAI0S,EAAQ2+D,GACXA,CACT,CACE,OAAOA,CACT,EASIF,EAAa,CAAC70D,EAAO5I,EAAOq9D,KAChC,MAAM,OAAEr+D,GAAWq+D,EACbM,EAAM39D,EAAM5O,IAAI4N,GACtB,GAAW,MAAP2+D,EAAa,CACf,MAAMA,EAAMN,EAAKhqE,OAAOuV,GAExB,OADA5I,EAAM1T,IAAI0S,EAAQ2+D,GACXA,CACT,CACE,OAAOA,CACT,EAGIK,EAAc,IACdC,EAAe,GAQfO,EAAY,CAAC3tD,EAASne,EAAMmrE,KAChC,MAAMyB,EAAa,KAAsBzuD,GACnC0uD,EAAaD,EAAa,KAAsB5sE,GAChDkW,EAAQ,IAAI3d,WAAWs0E,EAAa1B,EAAUx+D,YAIpD,OAHA,KAAgBwR,EAASjI,EAAO,GAChC,KAAgBlW,EAAMkW,EAAO02D,GAC7B12D,EAAMtc,IAAIuxE,EAAW0B,GACd32D,GAGH61D,EAAYx3E,OAAOs3E,IAAI,0LC3kBtB,MAAMnvE,EAAS,CAACsD,EAAM00B,KAC3B,MAAMl/B,EAAOk/B,EAAO/nB,WACdmgE,EAAa,KAAsB9sE,GACnC+sE,EAAeD,EAAa,KAAsBt3E,GAElD0gB,EAAQ,IAAI3d,WAAWw0E,EAAev3E,GAK5C,OAJA,KAAgBwK,EAAMkW,EAAO,GAC7B,KAAgB1gB,EAAM0gB,EAAO42D,GAC7B52D,EAAMtc,IAAI86B,EAAQq4C,GAEX,IAAIC,EAAOhtE,EAAMxK,EAAMk/B,EAAQxe,EAAK,EAShC/Q,EAAUgmE,IACrB,MAAMj1D,GAAQ,QAAOi1D,IACdnrE,EAAM8sE,GAAc,KAAc52D,IAClC1gB,EAAMu3E,GAAgB,KAAc72D,EAAM7gB,SAASy3E,IACpDp4C,EAASxe,EAAM7gB,SAASy3E,EAAaC,GAE3C,GAAIr4C,EAAO/nB,aAAenX,EACxB,MAAM,IAAIc,MAAM,oBAGlB,OAAO,IAAI02E,EAAOhtE,EAAMxK,EAAMk/B,EAAQxe,EAAK,EAQhCb,EAAS,CAACR,EAAG/E,KACxB,GAAI+E,IAAM/E,EACR,OAAO,EACF,CACL,MAAMK,EAAoE,EAE1E,OACE0E,EAAE7U,OAASmQ,EAAKnQ,MAChB6U,EAAErf,OAAS2a,EAAK3a,MAChB2a,EAAK+F,iBAAiB3d,aACtB,QAAWsc,EAAEqB,MAAO/F,EAAK+F,MAE7B,GAgBK,MAAM82D,EASXnvE,YAAamC,EAAMxK,EAAMk/B,EAAQxe,GAC/BnY,KAAKiC,KAAOA,EACZjC,KAAKvI,KAAOA,EACZuI,KAAK22B,OAASA,EACd32B,KAAKmY,MAAQA,CACf,8GCtFF,MAIMvV,EAAS,KAQFssE,EAAW,CAAEjtE,KAZb,EAYmB5C,KAXnB,WAWyBuD,SAAQ+zB,OAF9B56B,GAAU,KAVb,EAUiC6G,EAAO7G,0HCbrD,IAAIozE,EAOJ,SAASvsE,EAAOivB,EAAK51B,EAAK/E,GACxB+E,EAAMA,GAAO,GAEb,IAAImzE,EADJl4E,EAASA,GAAU,EAGnB,KAAM26B,GAAOw9C,GACXpzE,EAAI/E,KAAmB,IAAN26B,EAAcy9C,EAC/Bz9C,GAAO,IAET,KAAMA,EAAM09C,GACVtzE,EAAI/E,KAAmB,IAAN26B,EAAcy9C,EAC/Bz9C,KAAS,EAMX,OAJA51B,EAAI/E,GAAgB,EAAN26B,EAEdjvB,EAAOuV,MAAQjhB,EAASk4E,EAAY,EAE7BnzE,CACT,EAvBIqzE,EAAM,IAENC,GAAS,IACTF,EAAMp2E,KAAKqhB,IAAI,EAAG,IAsBtB,IAAIlT,EAKJ,SAAS4M,EAAKjZ,EAAK7D,GACjB,IAII6a,EAJAyD,EAAS,EAETpW,EAAS,EACTowE,EAFAt4E,EAASA,GAAU,EAInBiyB,EAAIpuB,EAAI9D,OAEZ,EAAG,CACD,GAAIu4E,GAAWrmD,EAEb,MADAnV,EAAKmE,MAAQ,EACP,IAAIvH,WAAW,2BAEvBmB,EAAIhX,EAAIy0E,KACRh6D,GAAOpW,EAAQ,IACV2S,EAAI09D,IAAWrwE,GACf2S,EAAI09D,GAAUx2E,KAAKqhB,IAAI,EAAGlb,GAC/BA,GAAS,CACX,OAAS2S,GAAK29D,GAId,OAFA17D,EAAKmE,MAAQq3D,EAAUt4E,EAEhBse,CACT,EA1BIk6D,EAAQ,IACRD,EAAS,IA2Bb,IAAIE,EAAK12E,KAAKqhB,IAAI,EAAI,GAClBs1D,EAAK32E,KAAKqhB,IAAI,EAAG,IACjBu1D,EAAK52E,KAAKqhB,IAAI,EAAG,IACjBw1D,EAAK72E,KAAKqhB,IAAI,EAAG,IACjBy1D,EAAK92E,KAAKqhB,IAAI,EAAG,IACjB01D,EAAK/2E,KAAKqhB,IAAI,EAAG,IACjB21D,EAAKh3E,KAAKqhB,IAAI,EAAG,IACjB41D,EAAKj3E,KAAKqhB,IAAI,EAAG,IACjB61D,EAAKl3E,KAAKqhB,IAAI,EAAG,IAyBrB,EARa,CACT1X,OAAQusE,EACR/nE,OAAQA,EACRgpE,eAlBS,SAAUvxE,GACrB,OACEA,EAAQ8wE,EAAK,EACb9wE,EAAQ+wE,EAAK,EACb/wE,EAAQgxE,EAAK,EACbhxE,EAAQixE,EAAK,EACbjxE,EAAQkxE,EAAK,EACblxE,EAAQmxE,EAAK,EACbnxE,EAAQoxE,EAAK,EACbpxE,EAAQqxE,EAAK,EACbrxE,EAAQsxE,EAAK,EACA,EAEjB,GCzEO,MAAM,EAAS,CAAC/9D,EAAMlb,EAAS,IAE7B,CADM,SAAckb,EAAMlb,GACnB,gBAQHm5E,EAAW,CAACC,EAAK1pE,EAAQ1P,EAAS,KAC7C,SAAco5E,EAAK1pE,EAAQ1P,GACpB0P,GAOIwpE,EAAkBE,GACtB,iBAAsBA,iECzB/B,SAAS3E,EAAYtsE,EAAMkP,EAAQ3L,EAAQwE,GACvC,MAAO,CACH/H,OACAkP,SACAq9D,QAAS,CACLvsE,OACAkP,SACA3L,UAEJipE,QAAS,CACLzkE,UAGZ,CACA,MAAM6J,EAAS06D,EAAY,OAAQ,KAAM5wE,GAE9B,IADS,IAAI+wE,YAAY,QACX1kE,OAAOrM,KAC5BM,IACgB,IAAIyS,aACLlL,OAAOvH,EAAIoE,UAAU,MAElCssE,EAAQJ,EAAY,QAAS,KAAM5wE,IACrC,IAAIkW,EAAS,IACb,IAAK,IAAI3V,EAAI,EAAGA,EAAIP,EAAI9D,OAAQqE,IAC5B2V,GAAU9Z,OAAOC,aAAa2D,EAAIO,IAEtC,OAAO2V,CAAM,IACb5V,IACAA,EAAMA,EAAIoE,UAAU,GACpB,MAAM1E,GAAM,OAAYM,EAAIpE,QAC5B,IAAK,IAAIqE,EAAI,EAAGA,EAAID,EAAIpE,OAAQqE,IAC5BP,EAAIO,GAAKD,EAAIG,WAAWF,GAE5B,OAAOP,CAAG,IAERixE,EAAQ,CACVr9D,KAAMsC,EACN,QAASA,EACT6tC,IAAK,YACLmtB,OAAQF,EACRA,QACAG,OAAQH,KACL,MAEP,0HC9CO,MAAMwE,EAA6B,MAE7BC,EAAoBtsD,QAAQlF,WAAWwyC,SAASv5D,KAAKu4E,iECE3D,MAAMC,EAAe,CACxBC,WAAWt+D,IACA,EAAAu+D,EAAA,GAAOv+D,GAElBw+D,QAAQC,EAAIC,GACR,MAAMC,GAAM,QAAQJ,EAAA,EAAQG,EAAKD,GAE3BG,GADa,QAAOL,EAAA,EAAQI,OAAKlrE,EAAW,IAKlD,MAAO,CAHImrE,EAAI15E,SAAS,EAAG,IAChB05E,EAAI15E,SAAS,GAAI,IACjB05E,EAAI15E,SAAS,GAAI,IAEhC,EACA25E,wBACI,MAAMC,EAAY,8BAElB,MAAO,CACHC,UAFc,kBAAoBD,GAGlCE,WAAYF,EAEpB,EACAG,8BAA8BC,IAEnB,CACHH,UAFc,kBAAoBG,GAGlCF,WAAYE,IAGpBC,wBAAuB,CAACH,EAAYD,IACzB,qBAAuBC,EAAYD,GAE9CK,wBAAuB,CAACC,EAAWC,EAAOC,EAAI/pE,KACnC,EAAAgqE,EAAA,IAAiBhqE,EAAG8pE,EAAOC,GAAIE,QAAQJ,GAElDK,wBAAuB,CAACC,EAAYL,EAAOC,EAAI/pE,EAAG6W,KACvC,EAAAmzD,EAAA,IAAiBhqE,EAAG8pE,EAAOC,GAAIK,QAAQD,EAAYtzD,kBCtClE,MAMawzD,EAAkBpzE,IAC3B,MAAM+H,GAPW5K,EAOU,EANvBgjB,WAAWxR,OACJwR,WAAWxR,OAAOwD,YAAYhV,GAElC,IAAIxB,WAAWwB,IAJN,IAACA,EASjB,OADA,IAAI6vB,SAASjlB,EAAOjQ,OAAQiQ,EAAO+K,WAAY/K,EAAOgI,YAAYsjE,UAAU,EAAGrzE,GAAO,GAC/E+H,CAAM,EAEjBqrE,EAAe95D,MAAQ,EAChB,MAAMg6D,EAAkB//D,IAC3B,GAAIA,EAAKnb,OAAS,EACd,MAAM2Z,WAAW,4BACrB,OAAIwB,aAAgB5X,WACT,IAAIqxB,SAASzZ,EAAKzb,OAAQyb,EAAKT,WAAYS,EAAKxD,YAAYwjE,UAAU,GAAG,GAE7EhgE,EAAKggE,UAAU,EAAE,EAE5BD,EAAeh6D,MAAQ,yGCLhB,MAAMk6D,EAAgB,CACzBC,aACAC,QAAS,EACTC,oBAEJ,SAASC,EAAe1vE,GACpB,MAAM2vE,EAAYh0E,OAAOyI,KAAKkrE,GAAe16E,KAAK,OAClD,OAAO,IAAI,KAAU,mCAAmCoL,cAAiB2vE,IAAa,2BAC1F,CA4COz0E,eAAe00E,EAAoB53E,GACtC,MAAM63E,EAAUzrE,EAAA,UAA0BpM,GACpCqX,EAAOwgE,EAAQnH,MAAQ,IAAIjxE,WACjC,OAAQo4E,EAAQ33E,MACZ,KAAKkM,EAAA,OACD,OAAOkrE,EAAcC,IAAIO,uBAAuBzgE,GACpD,KAAKjL,EAAA,WACD,OAAOkrE,EAAcE,QAAQO,2BAA2B1gE,GAC5D,KAAKjL,EAAA,aACD,OAAOkrE,EAAcG,UAAUO,6BAA6B3gE,GAChE,QACI,MAAMqgE,EAAeG,EAAQ33E,MAAQ,OAEjD,4FCxEA,MAAMsc,EAAU/gB,OAAOs3E,IAAI,8BACrBkF,EAAct0E,OACf/C,OAAO,MACPoU,KAAIu7D,GAASA,EAAMO,UAEnBnlD,QAAO,CAACrgB,EAAKnH,IAASmH,EAAIi8B,GAAGpjC,IAAO,uBAEnC+zE,EAAkB,IAClBC,EAAwC,GACxCC,EAAyC,GAC/C,MAAMC,EACFrwE,KACAqqE,UACAgE,WACAD,UACAlgE,OACAnR,YAAY0tB,GACRxtB,KAAK+C,KAAOyqB,EAAKzqB,KACjB/C,KAAKotE,UAAY5/C,EAAK4/C,UACtBptE,KAAKoxE,WAAa5jD,EAAK4jD,WAEvB1yE,OAAO2B,eAAeL,KAAM,SAAU,CAClCY,YAAY,EACZV,UAAU,GAElB,CACYqzB,IAAP/8B,OAAO+8B,eACR,MAAO,UAAUvzB,KAAKyS,aAC1B,CACA,CAAC,MAAU,EACXA,WAII,OAHmB,MAAfzS,KAAKiR,SACLjR,KAAKiR,OAASoiE,EAAAtG,UAAA,OAAiB/sE,KAAKotE,UAAUj1D,OAAOrf,MAAM,IAExDkH,KAAKiR,MAChB,CAGAqiE,QACI,OAAO,cAAaL,EAAiBjzE,KAAKotE,UAC9C,CACAmG,UACI,OAAOvzE,KAAKotE,UAAUj1D,KAC1B,CAIAJ,SACI,OAAO/X,KAAKyS,UAChB,CAIA6E,OAAO1d,GACH,GAAIA,aAAcY,WACd,OAAO,OAAiBwF,KAAKotE,UAAUj1D,MAAOve,GAE7C,GAAkB,iBAAPA,EACZ,OAyEL,SAA0ByB,EAAKwwE,GAElC,GADAA,EAAUA,GAAWmH,EACC,MAAlB33E,EAAIolD,OAAO,IAAgC,MAAlBplD,EAAIolD,OAAO,GAAY,CAGhD,MAAM2sB,EAAY,KAAciG,EAAAtG,UAAA,OAAiB,IAAI1xE,MACrD,OAAIA,EAAImrC,WAAW,OACR,IAAIgtC,EAAkB,CAAEpG,cAE1B/xE,EAAImrC,WAAW,OACb,IAAIitC,EAAoB,CAAErG,cAG1B,IAAIsG,EAAc,CAAEtG,aAEnC,CACA,OAEG,SAAyBryE,GAC5B,IACI,MAAMqyE,EAAY,KAAcryE,GAChC,GAAIqyE,EAAUnrE,OAASitE,EAAS,SAAT,KAAe,CAClC,GAAI9B,EAAUz2C,OAAO1/B,SAAWi8E,EAC5B,OAAO,IAAIM,EAAkB,CAAEpG,cAE9B,GAAIA,EAAUz2C,OAAO1/B,SAAWk8E,EACjC,OAAO,IAAIM,EAAoB,CAAErG,aAEzC,CACA,GAAIA,EAAUnrE,OAAS,EAAA0uE,OAAA,KACnB,OAAO,IAAI+C,EAAc,CAAEtG,aAEnC,CACA,MACI,OAID,SAAuBF,GAC1B,GAAW,MAAPA,GAAgC,MAAjBA,EAAIE,WAAoC,MAAfF,EAAI9sD,SAAoC,IAAhB8sD,EAAI9sD,SAAiB8sD,EAAIjrE,OAASgxE,EAClG,MAAM,IAAI16E,MAAM,kCAEpB,MAAM60E,EAAYF,EAAIE,UACtB,GAAIA,EAAUnrE,OAAS,EAAA0uE,OAAA,KACnB,OAAO,IAAI+C,EAAc,CAAEtG,UAAWF,EAAIE,YAEzC,GAAIA,EAAUnrE,OAASitE,EAAS,SAAT,KAAe,CACvC,GAAI9B,EAAUz2C,OAAO1/B,SAAWi8E,EAC5B,OAAO,IAAIM,EAAkB,CAAEpG,UAAWF,EAAIE,YAE7C,GAAIA,EAAUz2C,OAAO1/B,SAAWk8E,EACjC,OAAO,IAAIM,EAAoB,CAAErG,UAAWF,EAAIE,WAExD,CACA,MAAM,IAAI70E,MAAM,iCACpB,CArBeo7E,CAAc,YAAW54E,GACpC,CACA,MAAM,IAAIxC,MAAM,iCACpB,CArBWq7E,CAAgBZ,EAAY5rE,OAAO/L,GAC9C,CA1FmBw4E,CAAiBj6E,GAAI0d,OAAOtX,MAElC,GAA4B,MAAxBpG,GAAIwzE,WAAWj1D,MACpB,OAAO,OAAiBnY,KAAKotE,UAAUj1D,MAAOve,EAAGwzE,UAAUj1D,OAG3D,MAAM,IAAI5f,MAAM,eAExB,CAaA,CAACgf,KACG,MAAO,UAAUvX,KAAKyS,aAC1B,EAEJ,MAAMihE,UAAsBN,EACxBrwE,KAAO,MACPouE,UACArxE,YAAY0tB,GACRtmB,MAAM,IAAKsmB,EAAMzqB,KAAM,QACvB/C,KAAKmxE,UAAY3jD,EAAK2jD,SAC1B,EAEJ,MAAMqC,UAA0BJ,EAC5BrwE,KAAO,UACPouE,UACArxE,YAAY0tB,GACRtmB,MAAM,IAAKsmB,EAAMzqB,KAAM,YACvB/C,KAAKmxE,UAAY3jD,EAAK4/C,UAAUz2C,MACpC,EAEJ,MAAM88C,UAA4BL,EAC9BrwE,KAAO,YACPouE,UACArxE,YAAY0tB,GACRtmB,MAAM,IAAKsmB,EAAMzqB,KAAM,cACvB/C,KAAKmxE,UAAY3jD,EAAK4/C,UAAUz2C,MACpC,EAsFG14B,eAAe61E,EAAe3C,EAAWC,GAC5C,OAAID,EAAUl6E,SAAWi8E,EACd,IAAIM,EAAkB,CAAEpG,UAAW,KAAc8B,EAAS,SAAT,KAAeiC,GAAYC,eAEnFD,EAAUl6E,SAAWk8E,EACd,IAAIM,EAAoB,CAAErG,UAAW,KAAc8B,EAAS,SAAT,KAAeiC,GAAYC,eAElF,IAAIsC,EAAc,CAAEtG,gBAAiB,EAAAuD,OAAA,OAAcQ,GAAYA,YAAWC,cACrF,KC1MW2C,EA8CAC,aC/CJ/1E,eAAeg2E,EAAWC,EAAWC,EAAiBhmB,GACzD,MAAMimB,QAaHn2E,eAA2Bo2E,EAAQC,GACtC,GAAyB,MAArBD,EAAOjD,WACP,MAAM,IAAI74E,MAAM,sCAGpB,aADyBo6E,EAAoB0B,EAAOjD,aAClC3S,KAAK6V,EAC3B,CAnBgCC,CAAYL,EAAWM,EAAoBL,IACvE,GAA2B,MAAvBD,EAAU/C,UACV,MAAM,IAAI54E,MAAM,2CAEpB,OAEG,SAAgCk8E,EAAiBL,EAAejmB,GACnE,OAAO6lB,EAAsBpxE,OAAO,CAChC8xE,YAAaD,EACbE,YAAaP,EACbjmB,WAAYA,GAAc,CAAEymB,uBAAwB,MACrDt9E,UACP,CARWu9E,CAAuBX,EAAU/C,UAAWiD,EAAejmB,EACtE,CAeOlwD,eAAe62E,EAAqBR,GACvC,OAAOR,EAAeQ,EAAQI,YAClC,CACO,SAASK,EAAcT,GAC1B,OAAON,EAAsB5sE,OAAOktE,EACxC,CACO,SAASE,EAAoBrD,GAChC,MAAM5iE,GAAS,OAAqB,4BACpC,OAAO,OAAiB,CAACA,EAAQ4iE,GAAY5iE,EAAOtX,OAASk6E,EAAUl6E,OAC3E,CASOgH,eAAe+2E,EAAoBC,EAAgBX,EAASY,GAE/D,MAAMC,QAAsBrB,EAAeQ,EAAQI,aACnD,IAAKS,EAAc79D,OAAO49D,GACtB,MAAM,IAAI38E,MAAM,wBAAwB48E,EAAc1iE,kDAAkDyiE,EAAWziE,cAEvH,MAAM2iE,EAAmBZ,EAAoBS,GAC7C,GAA+B,MAA3BE,EAAchE,UACd,MAAM,IAAI54E,MAAM,qCAEpB,GAA2B,MAAvB+7E,EAAQK,YACR,MAAM,IAAIp8E,MAAM,sCAEpB,MAAM44E,EHXH,SAA4Bp2E,GAC/B,MAAM63E,EAAUzrE,EAAA,UAAyBpM,GACnCqX,EAAOwgE,EAAQnH,MAAQ,IAAIjxE,WACjC,OAAQo4E,EAAQ33E,MACZ,KAAKkM,EAAA,OACD,OAAOkrE,EAAcC,IAAI+C,sBAAsBjjE,GACnD,KAAKjL,EAAA,WACD,OAAOkrE,EAAcE,QAAQ+C,0BAA0BljE,GAC3D,KAAKjL,EAAA,aACD,OAAOkrE,EAAcG,UAAU+C,4BAA4BnjE,GAC/D,QACI,MAAMqgE,EAAeG,EAAQ33E,MAAQ,WAEjD,CGFsBu6E,CAAmBL,EAAchE,WAEnD,UADoBA,EAAUsE,OAAOL,EAAkBd,EAAQK,aAE3D,MAAM,IAAIp8E,MAAM,yDAEpB,OAAO48E,CACX,CACO,SAASO,EAAiBC,GAC7B,OAAMA,aAAcn7E,YAGF,KAAdm7E,EAAG1+E,MAIX,EDjEA,SAAW88E,GACP,IAAIxI,EACJwI,EAAgBzI,MAAQ,KACN,MAAVC,IACAA,GAAS,SAAQ,CAACv5D,EAAK4gB,EAAGm4C,EAAO,CAAC,KAI9B,IAH6B,IAAzBA,EAAKS,iBACL54C,EAAEgvC,OAE4B,MAA9B5vD,EAAI4iE,uBACJ,IAAK,MAAM/1E,KAASmT,EAAI4iE,uBACpBhiD,EAAE6pC,OAAO,IACT7pC,EAAEza,MAAMtZ,IAGa,IAAzBksE,EAAKS,iBACL54C,EAAEkvC,QACN,IACD,CAACh3C,EAAQ7zB,KACR,MAAM+a,EAAM,CACR4iE,uBAAwB,IAEtBptE,EAAgB,MAAVvQ,EAAiB6zB,EAAO9uB,IAAM8uB,EAAO7T,IAAMhgB,EACvD,KAAO6zB,EAAO7T,IAAMzP,GAAK,CACrB,MAAM0/C,EAAMp8B,EAAO2xC,SACnB,GAAQvV,IAAQ,GACP,EACDl1C,EAAI4iE,uBAAuBl9E,KAAKozB,EAAO3S,cAGvC2S,EAAOmyC,SAAe,EAAN/V,EAG5B,CACA,OAAOl1C,CAAG,KAGXu5D,GAEXwI,EAAgBnxE,OAAUoP,IACf,QAAcA,EAAK+hE,EAAgBzI,SAE9CyI,EAAgB3sE,OAAUrM,IACf,QAAcA,EAAKg5E,EAAgBzI,QAEjD,CA5CD,CA4CGyI,IAAoBA,EAAkB,CAAC,IAE1C,SAAWC,GACP,IAAIzI,EACJyI,EAAsB1I,MAAQ,KACZ,MAAVC,IACAA,GAAS,SAAQ,CAACv5D,EAAK4gB,EAAGm4C,EAAO,CAAC,MACD,IAAzBA,EAAKS,iBACL54C,EAAEgvC,SAEqB,IAAvBmJ,EAAK6K,eAA8C,MAAnB5jE,EAAI0iE,aAAuB1iE,EAAI0iE,YAAY9lE,WAAa,KACxFgkB,EAAE6pC,OAAO,IACT7pC,EAAEza,MAAMnG,EAAI0iE,aAAe,IAAIl6E,WAAW,OAEnB,IAAvBuwE,EAAK6K,eAA8C,MAAnB5jE,EAAI2iE,aAAuB3iE,EAAI2iE,YAAY/lE,WAAa,KACxFgkB,EAAE6pC,OAAO,IACT7pC,EAAEza,MAAMnG,EAAI2iE,aAAe,IAAIn6E,WAAW,KAExB,MAAlBwX,EAAIm8C,aACJv7B,EAAE6pC,OAAO,IACTsX,EAAgBzI,QAAQ1oE,OAAOoP,EAAIm8C,WAAYv7B,EAAG,CAC9CgjD,eAAe,MAGM,IAAzB7K,EAAKS,iBACL54C,EAAEkvC,QACN,IACD,CAACh3C,EAAQ7zB,KACR,MAAM+a,EAAM,CACR0iE,YAAa,IAAIl6E,WAAW,GAC5Bm6E,YAAa,IAAIn6E,WAAW,IAE1BgN,EAAgB,MAAVvQ,EAAiB6zB,EAAO9uB,IAAM8uB,EAAO7T,IAAMhgB,EACvD,KAAO6zB,EAAO7T,IAAMzP,GAAK,CACrB,MAAM0/C,EAAMp8B,EAAO2xC,SACnB,OAAQvV,IAAQ,GACZ,KAAK,EACDl1C,EAAI0iE,YAAc5pD,EAAO3S,QACzB,MACJ,KAAK,EACDnG,EAAI2iE,YAAc7pD,EAAO3S,QACzB,MACJ,KAAK,EACDnG,EAAIm8C,WAAa4lB,EAAgBzI,QAAQlkE,OAAO0jB,EAAQA,EAAO2xC,UAC/D,MACJ,QACI3xC,EAAOmyC,SAAe,EAAN/V,GAG5B,CACA,OAAOl1C,CAAG,KAGXu5D,GAEXyI,EAAsBpxE,OAAUoP,IACrB,QAAcA,EAAKgiE,EAAsB1I,SAEpD0I,EAAsB5sE,OAAUrM,IACrB,QAAcA,EAAKi5E,EAAsB1I,QAEvD,CA3DD,CA2DG0I,IAA0BA,EAAwB,CAAC,mBE7GtD,MAAMr7E,GAAM,eAAO,gBAEnB,IAAIk9E,EAeG,SAASC,GAAsBv/D,GAC9BA,GACAs/D,EAAU,+BAA8B,OAAmBt/D,EAAE46D,UAAW,UACxE0E,EAAU,gCAA+B,OAAmBt/D,EAAE66D,WAAY,WAG1EyE,EAAU,gCAElB,CAIO,SAASE,GAAsBngD,GAClCigD,EAAU,gCAA+B,OAAmBjgD,EAAI,SACpE,CA3BIigD,EADArF,EACY73E,EAGA+F,OAAOwL,QAAO,QAAW,CACjC8rE,SAAS,EACTx9E,MAAO,OACPie,MAAO,yBCRR,MAAMw/D,GACTx/C,OACA32B,YAAY22B,GACRz2B,KAAKy2B,OAASA,CAClB,CACAy/C,cAAcC,EAAIxE,EAAIF,GAClB,MAAMl7D,EAAIvW,KAAK6xE,QAAQsE,EAAGvuE,EAAGuuE,EAAG19E,EAAGk5E,EAAIF,GAEvC,OADA0E,EAAG19E,EAAE29E,YACE7/D,CACX,CACA8/D,cAAcF,EAAIxE,EAAII,EAAYtzD,GAC9B,MAAM,UAAEgzD,EAAS,MAAE6E,GAAUt2E,KAAKgyE,QAAQmE,EAAGvuE,EAAGuuE,EAAG19E,EAAGk5E,EAAII,EAAYtzD,GAGtE,OAFI63D,GACAH,EAAG19E,EAAE29E,YACF,CAAE3E,YAAW6E,QACxB,CAEAC,OAAOJ,GACH,OAAQn2E,KAAKw2E,WAAWL,EAAGvuE,EAC/B,CACA6uE,iBACI,OAAO,IAAIj8E,WAAW,GAC1B,CACAg8E,WAAW5uE,GACP,MAAM8uE,EAAW12E,KAAKy2E,iBACtB,OAAO,OAAiBC,EAAU9uE,EACtC,CACAiqE,QAAQjqE,EAAGnP,EAAGk5E,EAAIF,GAEd,OADAh5E,EAAEk+E,cACK32E,KAAKy2B,OAAO+6C,wBAAwBC,EAAWh5E,EAAEm+E,WAAYjF,EAAI/pE,EAC5E,CACAivE,eAAeC,EAAIrF,GACf,IAAIM,EAQJ,OANIA,EADA/xE,KAAKu2E,OAAOO,EAAGX,IACFn2E,KAAKk2E,cAAcY,EAAGX,GAAIW,EAAGvkD,EAAGk/C,GAGhCA,EAEjBzxE,KAAK+2E,QAAQD,EAAI/E,GACVA,CACX,CACAC,QAAQpqE,EAAGnP,EAAGk5E,EAAII,EAAYtzD,GAC1BhmB,EAAEk+E,cACF,MAAMK,EAAmBh3E,KAAKy2B,OAAOq7C,wBAAwBC,EAAYt5E,EAAEm+E,WAAYjF,EAAI/pE,EAAG6W,GAC9F,OAAIu4D,EACO,CACHvF,UAAWuF,EACXV,OAAO,GAIJ,CACH7E,UAAW,IAAIj3E,WAAW,GAC1B87E,OAAO,EAGnB,CACAW,eAAeH,EAAI/E,GACf,IAAIN,EACA6E,GAAQ,EAQZ,OAPIt2E,KAAKu2E,OAAOO,EAAGX,MACZ1E,YAAW6E,SAAUt2E,KAAKq2E,cAAcS,EAAGX,GAAIW,EAAGvkD,EAAGw/C,IAGxDN,EAAYM,EAEhB/xE,KAAK+2E,QAAQD,EAAI/E,GACV,CAAEN,YAAW6E,QACxB,CACAY,GAAG9F,EAAYD,GACX,IACI,MAAMgG,EAAYn3E,KAAKy2B,OAAO86C,wBAAwBH,EAAYD,GAClE,OAAyB,KAArBgG,EAAUlgF,OACHkgF,EAEJA,EAAU7/E,SAAS,EAAG,GACjC,CACA,MAAOif,GACH,MAAMrU,EAAMqU,EAEZ,OADA5d,EAAA,MAAauJ,GACN,IAAI1H,WAAW,GAC1B,CACJ,CACAu8E,QAAQD,EAAI1kE,GACR0kE,EAAGvkD,EAAIvyB,KAAKo3E,QAAQN,EAAGvkD,EAAGngB,EAC9B,CACAglE,QAAQtgE,EAAG/E,GAEP,OADU/R,KAAKy2B,OAAOi6C,YAAW,OAAiB,CAAC55D,EAAG/E,GAAI+E,EAAE7f,OAAS8a,EAAE9a,QAE3E,CACAogF,OAAOP,EAAIhG,GACP,MAAOD,EAAIyG,GAASt3E,KAAKy2B,OAAOm6C,QAAQkG,EAAGjG,GAAIC,GAC/CgG,EAAGX,GAAKn2E,KAAKu3E,cAAcD,GAC3BR,EAAGjG,GAAKA,CACZ,CACA0G,cAAc3vE,GACV,MAAO,CAAEA,IAAGnP,EAAG,IAAI,MACvB,CAEA++E,oBAAoBC,GAChB,MAAMC,GAAoB,OAAqBD,EAAc,SACvDllD,EAAIvyB,KAAK23E,iBAAiBD,GAC1B7G,EAAKt+C,EACLxwB,EAAM/B,KAAKy2E,iBAEjB,MAAO,CAAEN,GADEn2E,KAAKu3E,cAAcx1E,GACjB8uE,KAAIt+C,IACrB,CACAolD,iBAAiBF,GACb,GAAIA,EAAaxgF,QAAU,GAAI,CAC3B,MAAMs7B,EAAI,IAAI/3B,WAAW,IAEzB,OADA+3B,EAAE12B,IAAI47E,GACCllD,CACX,CAEI,OAAOvyB,KAAKo3E,QAAQK,EAAc,IAAIj9E,WAAW,GAEzD,CACAyE,MAAM63E,GACF,MAAOc,EAAQC,GAAU73E,KAAKy2B,OAAOm6C,QAAQkG,EAAGjG,GAAI,IAAIr2E,WAAW,IAGnE,MAAO,CAAEs9E,IAFG93E,KAAKu3E,cAAcK,GAEjBG,IADF/3E,KAAKu3E,cAAcM,GAEnC,CACAG,oBAAoB7B,EAAI7B,GACpB,MAAMvC,EAAa/xE,KAAKk2E,cAAcC,EAAI,IAAI37E,WAAW,GAAI85E,GAG7D,MAAO,CAAE3+C,GAFE31B,KAAKy2E,iBAEHwB,GADF,IAAIz9E,WAAW,GACTu3E,aACrB,CACAmG,mBAAmB/B,EAAIz4D,GACnB,OAAO1d,KAAKq2E,cAAcF,EAAI,IAAI37E,WAAW,GAAIkjB,EAAQq0D,WAC7D,ECvIG,MAAMoG,WAAWlC,GACpBmC,oBAAoBC,EAAUh0D,EAAGi0D,EAAIC,GACjC,MACMzB,EAAK92E,KAAKw3E,oBADH,oCAEbx3E,KAAK+2E,QAAQD,EAAIuB,GAEjB,MAAO,CAAEvB,KAAIzyD,IAAGi0D,KAAIC,MAAK3iD,GADd,IAAIp7B,WAAW,IAE9B,CACAg+E,oBAAoBH,EAAUh0D,EAAGi0D,EAAIC,GACjC,MACMzB,EAAK92E,KAAKw3E,oBADH,oCAEbx3E,KAAK+2E,QAAQD,EAAIuB,GAEjB,MAAO,CAAEvB,KAAIzyD,IAAGi0D,KAAIC,MAAK3iD,GADd,IAAIp7B,WAAW,IAE9B,CACAi+E,cAAcC,EAAIpE,EAAS/9D,GACvB,MAAM0hE,EAAK,IAAIz9E,WAAW,GAEtBk+E,EAAGniE,OADG1Q,IAAN0Q,EACOA,EAGAvW,KAAKy2B,OAAOw6C,wBAEvB,MAAMt7C,EAAK+iD,EAAGniE,EAAE46D,UAChBnxE,KAAK+2E,QAAQ2B,EAAG5B,GAAInhD,GAEpB,MAAO,CAAEA,KAAIsiD,KAAIlG,WADE/xE,KAAK62E,eAAe6B,EAAG5B,GAAIxC,GAElD,CACAqE,cAAcD,EAAIpE,GACdoE,EAAGniE,EAAIvW,KAAKy2B,OAAOw6C,wBACnB,MAAMt7C,EAAK+iD,EAAGniE,EAAE46D,UAChBnxE,KAAK+2E,QAAQ2B,EAAG5B,GAAInhD,GACpB31B,KAAKq3E,OAAOqB,EAAG5B,GAAI92E,KAAKk3E,GAAGwB,EAAGniE,EAAE66D,WAAYsH,EAAG9iD,KAC/C,MAAMgjD,EAAMF,EAAGr0D,EAAE8sD,UACX8G,EAAKj4E,KAAK62E,eAAe6B,EAAG5B,GAAI8B,GACtC54E,KAAKq3E,OAAOqB,EAAG5B,GAAI92E,KAAKk3E,GAAGwB,EAAGr0D,EAAE+sD,WAAYsH,EAAG9iD,KAE/C,MAAO,CAAED,KAAIsiD,KAAIlG,WADE/xE,KAAK62E,eAAe6B,EAAG5B,GAAIxC,GAElD,CACAuE,cAAcH,EAAIpE,GACd,MAAMsE,EAAMF,EAAGr0D,EAAE8sD,UACX8G,EAAKj4E,KAAK62E,eAAe6B,EAAG5B,GAAI8B,GACtC54E,KAAKq3E,OAAOqB,EAAG5B,GAAI92E,KAAKk3E,GAAGwB,EAAGr0D,EAAE+sD,WAAYsH,EAAG9iD,KAC/C,MAAMm8C,EAAa/xE,KAAK62E,eAAe6B,EAAG5B,GAAIxC,GAExCwE,EAAgB,CAAEnjD,GADb31B,KAAKy2E,iBACYwB,KAAIlG,eAC1B,IAAE+F,EAAG,IAAEC,GAAQ/3E,KAAKf,MAAMy5E,EAAG5B,IACnC,MAAO,CAAEvkD,EAAGmmD,EAAG5B,GAAGvkD,EAAGumD,gBAAehB,MAAKC,MAC7C,CACAgB,aAAaL,EAAIh7D,GAKb,OAJIg4D,EAAiBh4D,EAAQiY,MACzB+iD,EAAG9iD,GAAKlY,EAAQiY,IAEpB31B,KAAK+2E,QAAQ2B,EAAG5B,GAAI4B,EAAG9iD,IAChB51B,KAAKi3E,eAAeyB,EAAG5B,GAAIp5D,EAAQq0D,WAC9C,CACAiH,aAAaN,EAAIh7D,GAKb,GAJIg4D,EAAiBh4D,EAAQiY,MACzB+iD,EAAG9iD,GAAKlY,EAAQiY,IAEpB31B,KAAK+2E,QAAQ2B,EAAG5B,GAAI4B,EAAG9iD,KAClB8iD,EAAGniE,EACJ,MAAM,IAAIhe,MAAM,yCAEpByH,KAAKq3E,OAAOqB,EAAG5B,GAAI92E,KAAKk3E,GAAGwB,EAAGniE,EAAE66D,WAAYsH,EAAG9iD,KAC/C,MAAQ67C,UAAWwG,EAAI3B,MAAO2C,GAAWj5E,KAAKi3E,eAAeyB,EAAG5B,GAAIp5D,EAAQu6D,IACxEgB,GAAUvD,EAAiBuC,KAC3BS,EAAGJ,GAAKL,GAEZj4E,KAAKq3E,OAAOqB,EAAG5B,GAAI92E,KAAKk3E,GAAGwB,EAAGniE,EAAE66D,WAAYsH,EAAGJ,KAC/C,MAAM,UAAE7G,EAAW6E,MAAO4C,GAAWl5E,KAAKi3E,eAAeyB,EAAG5B,GAAIp5D,EAAQq0D,YACxE,MAAO,CAAEN,YAAW6E,MAAQ2C,GAAUC,EAC1C,CACAC,aAAaT,EAAIh7D,GACb,MAAQ+zD,UAAWwG,EAAI3B,MAAO2C,GAAWj5E,KAAKi3E,eAAeyB,EAAG5B,GAAIp5D,EAAQu6D,IAI5E,GAHIgB,GAAUvD,EAAiBuC,KAC3BS,EAAGJ,GAAKL,IAEPS,EAAGniE,EACJ,MAAM,IAAIhe,MAAM,yCAEpByH,KAAKq3E,OAAOqB,EAAG5B,GAAI92E,KAAKk3E,GAAGwB,EAAGniE,EAAE66D,WAAYsH,EAAGJ,KAC/C,MAAM,UAAE7G,EAAW6E,MAAO4C,GAAWl5E,KAAKi3E,eAAeyB,EAAG5B,GAAIp5D,EAAQq0D,aAClE,IAAE+F,EAAG,IAAEC,GAAQ/3E,KAAKf,MAAMy5E,EAAG5B,IACnC,MAAO,CAAEvkD,EAAGmmD,EAAG5B,GAAGvkD,EAAGk/C,YAAW6E,MAAQ2C,GAAUC,EAASpB,MAAKC,MACpE,CACAqB,YAAYC,EAAWhB,EAAUh0D,GAC7B,MAAMk0D,EAAMv4E,KAAKy2E,iBACX6B,EAAK,IAAI99E,WAAW,IAC1B,IAAIk+E,EAOJ,OALIA,EADAW,EACKr5E,KAAKo4E,oBAAoBC,EAAUh0D,EAAGi0D,EAAIC,GAG1Cv4E,KAAKw4E,oBAAoBH,EAAUh0D,EAAGi0D,EAAIC,GAE5C,CACHG,KACAp9E,EAAG+9E,EACHC,GAAI,EAEZ,CACAC,YAAYC,EAAS97D,EAAS+7D,GAC1B,IAAIX,EACJ,GAAmB,IAAfU,EAAQF,GACRR,EAAgB94E,KAAKy4E,cAAce,EAAQd,GAAIh7D,EAAS+7D,QAEvD,GAAmB,IAAfD,EAAQF,GACbR,EAAgB94E,KAAK24E,cAAca,EAAQd,GAAIh7D,QAE9C,GAAmB,IAAf87D,EAAQF,GAAU,CACvB,MAAM,EAAE/mD,EAAGumD,cAAeY,EAAe,IAAE5B,EAAG,IAAEC,GAAQ/3E,KAAK64E,cAAcW,EAAQd,GAAIh7D,GACvFo7D,EAAgBY,EAChBF,EAAQjnD,EAAIA,EACZinD,EAAQ1B,IAAMA,EACd0B,EAAQzB,IAAMA,CAClB,KACK,MAAIyB,EAAQF,GAAK,GAelB,MAAM,IAAI/gF,MAAM,oBAdhB,GAAIihF,EAAQl+E,EAAG,CACX,IAAKk+E,EAAQ1B,IACT,MAAM,IAAIv/E,MAAM,qCAEpBugF,EAAgB94E,KAAKg4E,oBAAoBwB,EAAQ1B,IAAKp6D,EAC1D,KACK,CACD,IAAK87D,EAAQzB,IACT,MAAM,IAAIx/E,MAAM,qCAEpBugF,EAAgB94E,KAAKg4E,oBAAoBwB,EAAQzB,IAAKr6D,EAC1D,CAIJ,CAEA,OADA87D,EAAQF,KACDR,CACX,CACAa,YAAYH,EAAS97D,GACjB,IAAI+zD,EAAY,IAAIj3E,WAAW,GAC3B87E,GAAQ,EACZ,GAAmB,IAAfkD,EAAQF,KACL7H,YAAW6E,SAAUt2E,KAAK+4E,aAAaS,EAAQd,GAAIh7D,SAErD,GAAmB,IAAf87D,EAAQF,KACV7H,YAAW6E,SAAUt2E,KAAKg5E,aAAaQ,EAAQd,GAAIh7D,SAErD,GAAmB,IAAf87D,EAAQF,GAAU,CACvB,MAAM,EAAE/mD,EAAGk/C,UAAWmI,EAAoBtD,MAAOuD,EAAc,IAAE/B,EAAG,IAAEC,GAAQ/3E,KAAKm5E,aAAaK,EAAQd,GAAIh7D,GAC5G+zD,EAAYmI,EACZtD,EAAQuD,EACRL,EAAQjnD,EAAIA,EACZinD,EAAQ1B,IAAMA,EACd0B,EAAQzB,IAAMA,CAClB,CAEA,OADAyB,EAAQF,KACD,CAAE7H,YAAW6E,QACxB,ECzJG,MAAMwD,GACTC,YACAP,QACAtE,WACA8E,iBAAmB,CAAEpF,uBAAwB,IAC7CN,QACA2F,WACAC,GACAC,cACA9B,SACAv4E,YAAYi6E,EAAazF,EAAS+D,EAAU5hD,EAAQ0jD,EAAeF,EAAY/E,EAAYkF,GACvFp6E,KAAK+5E,YAAcA,EACnB/5E,KAAKs0E,QAAUA,EACft0E,KAAKq4E,SAAWA,EAChBr4E,KAAKm6E,cAAgBA,EACrBn6E,KAAKi6E,WAAaA,EACd/E,IACAl1E,KAAKk1E,WAAaA,GAEtBl1E,KAAKk6E,GAAKE,GAAa,IAAIjC,GAAG1hD,GAC9Bz2B,KAAKw5E,QAAUx5E,KAAKk6E,GAAGd,YAAYp5E,KAAK+5E,YAAa/5E,KAAKq4E,SAAUr4E,KAAKm6E,cAC7E,CAEAl8E,gBHZG,IAA4BomB,ELOX3G,EQOhB,GHd2B2G,EGaRrkB,KAAKw5E,QAAQd,GAAGr0D,EHZvCwxD,EAAU,4BAA2B,OAAmBxxD,EAAE8sD,UAAW,UACrE0E,EAAU,6BAA4B,OAAmBxxD,EAAE+sD,WAAY,UGY/DpxE,KAAK+5E,YAAa,CAClBphF,EAAA,MAAa,uDACb,MAAMmgF,EAAgB94E,KAAKk6E,GAAGX,YAAYv5E,KAAKw5E,QAAS,IAAIh/E,WAAW,UACjEwF,KAAKi6E,WAAW72E,ORVVsa,EQUwBo7D,GRTrC,OAAiB,CAACp7D,EAAQiY,GAAIjY,EAAQq0D,YAAar0D,EAAQiY,GAAG1+B,OAASymB,EAAQq0D,WAAW96E,UQUzF0B,EAAA,MAAa,uDACbm9E,GAAsB91E,KAAKw5E,QAAQd,GAAGniE,EAC1C,KACK,CACD5d,EAAA,MAAa,2DACb,MAAM0hF,ERPX,SAAiBt+E,GACpB,GAAIA,EAAM9E,OAAS,GACf,MAAM,IAAIsB,MAAM,mEAEpB,MAAO,CACHo9B,GAAI55B,EAAMzE,SAAS,EAAG,IACtBy6E,WAAYh2E,EAAMzE,SAAS,GAAIyE,EAAM9E,QACrCghF,GAAI,IAAIz9E,WAAW,GAE3B,CQF0C8/E,QAAet6E,KAAKi6E,WAAWjmE,QAAQ1c,aAC/D,MAAEg/E,GAAUt2E,KAAKk6E,GAAGP,YAAY35E,KAAKw5E,QAASa,GACpD,IAAK/D,EACD,MAAM,IAAI,KAA2B,wCAEzC39E,EAAA,MAAa,+CACbo9E,GAAsB/1E,KAAKw5E,QAAQd,GAAG9iD,GAC1C,CACJ,CAEA33B,iBACI,GAAI+B,KAAK+5E,YAAa,CAClBphF,EAAA,MAAa,0EACb,MAAM0hF,ERVX,SAAiBt+E,GACpB,GAAIA,EAAM9E,OAAS,GACf,MAAM,IAAIsB,MAAM,mEAEpB,MAAO,CACHo9B,GAAI55B,EAAMzE,SAAS,EAAG,IACtB2gF,GAAIl8E,EAAMzE,SAAS,GAAI,IACvBy6E,WAAYh2E,EAAMzE,SAAS,GAAIyE,EAAM9E,QAE7C,CQC0CsjF,QAAev6E,KAAKi6E,WAAWjmE,QAAQ1c,aAC/D,UAAEm6E,EAAS,MAAE6E,GAAUt2E,KAAKk6E,GAAGP,YAAY35E,KAAKw5E,QAASa,GAC/D,IAAK/D,EACD,MAAM,IAAI,KAA2B,wCAEzC39E,EAAA,MAAa,6CACbo9E,GAAsB/1E,KAAKw5E,QAAQd,GAAG9iD,IH7Bf0iD,EG8BJt4E,KAAKw5E,QAAQd,GAAGJ,GH7B3CzC,EAAU,6BAA4B,OAAmByC,EAAI,UG8BrD3/E,EAAA,MAAa,kDACb,IACI,MAAM6hF,EAAiBzF,EAActD,GACrCzxE,KAAKk1E,WAAal1E,KAAKk1E,kBAAoBJ,EAAqB0F,SAC1DxF,EAAoBh1E,KAAKw5E,QAAQd,GAAGJ,GAAIkC,EAAgBx6E,KAAKk1E,YACnEl1E,KAAKy6E,wBAAwBD,EAAersB,WAChD,CACA,MAAO53C,GACH,MAAMrU,EAAMqU,EACZ,MAAM,IAAI,KAAoB,kDAAkDrU,EAAIwb,UACxF,CACA/kB,EAAA,MAAa,+BACjB,KACK,CACDA,EAAA,MAAa,qFACb,MAAMmgF,EAAgB94E,KAAKk6E,GAAGX,YAAYv5E,KAAKw5E,QAASx5E,KAAKs0E,eACvDt0E,KAAKi6E,WAAW72E,ORlDVsa,EQkDwBo7D,GRjDrC,OAAiB,CAACp7D,EAAQiY,GAAIjY,EAAQu6D,GAAIv6D,EAAQq0D,YAAar0D,EAAQiY,GAAG1+B,OAASymB,EAAQu6D,GAAGhhF,OAASymB,EAAQq0D,WAAW96E,UQkDzH0B,EAAA,MAAa,8EACbm9E,GAAsB91E,KAAKw5E,QAAQd,GAAGniE,EAC1C,CRrDD,IAAiBmH,EKGW46D,CGmD/B,CAEAr6E,eACI,GAAI+B,KAAK+5E,YAAa,CAClBphF,EAAA,MAAa,wDACb,MAAMmgF,EAAgB94E,KAAKk6E,GAAGX,YAAYv5E,KAAKw5E,QAASx5E,KAAKs0E,eACvDt0E,KAAKi6E,WAAW72E,ORzDVsa,EQyDwBo7D,GRxDrC,OAAiB,CAACp7D,EAAQu6D,GAAIv6D,EAAQq0D,YAAar0D,EAAQu6D,GAAGhhF,OAASymB,EAAQq0D,WAAW96E,UQyDzF0B,EAAA,MAAa,wDACjB,KACK,CACDA,EAAA,MAAa,8DACb,MAAM0hF,ERvCX,SAAiBt+E,GACpB,GAAIA,EAAM9E,OAAS,GACf,MAAM,IAAIsB,MAAM,mEAEpB,MAAO,CACHo9B,GAAI,IAAIn7B,WAAW,GACnBy9E,GAAIl8E,EAAMzE,SAAS,EAAG,IACtBy6E,WAAYh2E,EAAMzE,SAAS,GAAIyE,EAAM9E,QAE7C,CQ8B0CyjF,QAAe16E,KAAKi6E,WAAWjmE,QAAQ1c,aAC/D,UAAEm6E,EAAS,MAAE6E,GAAUt2E,KAAKk6E,GAAGP,YAAY35E,KAAKw5E,QAASa,GAC/D,IAAK/D,EACD,MAAM,IAAI,KAA2B,wCAEzC39E,EAAA,MAAa,iEACb,IACI,MAAM6hF,EAAiBzF,EAActD,GACrCzxE,KAAKk1E,WAAal1E,KAAKk1E,kBAAoBJ,EAAqB0F,SAC1DxF,EAAoBh1E,KAAKw5E,QAAQd,GAAGJ,GAAIkC,EAAgBx6E,KAAKk1E,YACnEl1E,KAAKy6E,wBAAwBD,EAAersB,WAChD,CACA,MAAO53C,GACH,MAAMrU,EAAMqU,EACZ,MAAM,IAAI,KAAoB,kDAAkDrU,EAAIwb,UACxF,CACJ,CR9ED,IAAiBA,EKMO87D,KGyERx5E,KAAKw5E,SHxEZ1B,KAAO0B,EAAQzB,KACvBlC,EAAU,kBAAkB2D,EAAQ1B,IAAIr/E,EAAEkiF,gBAAe,OAAmBnB,EAAQ1B,IAAIlwE,EAAG,UAC3FiuE,EAAU,kBAAkB2D,EAAQzB,IAAIt/E,EAAEkiF,gBAAe,OAAmBnB,EAAQzB,IAAInwE,EAAG,WAG3FiuE,EAAU,wBGoEd,CACAhE,QAAQJ,EAAW+H,GACf,MAAMrD,EAAKn2E,KAAK46E,MAAMpB,GACtB,OAAOx5E,KAAKk6E,GAAGhE,cAAcC,EAAI,IAAI37E,WAAW,GAAIi3E,EACxD,CACAO,QAAQD,EAAYyH,EAAS/6D,GACzB,MAAM03D,EAAKn2E,KAAK46E,MAAMpB,GAAS,GAC/B,OAAOx5E,KAAKk6E,GAAG7D,cAAcF,EAAI,IAAI37E,WAAW,GAAIu3E,EAAYtzD,EACpE,CACAo8D,qBACI,OAAO76E,KAAKw5E,QAAQd,GAAGJ,EAC3B,CACAsC,MAAMpB,EAASsB,GAAa,GACxB,IAAKtB,EAAQ1B,MAAQ0B,EAAQzB,IACzB,MAAM,IAAI,KAA2B,kEAEzC,OAAI/3E,KAAK+5E,YACEe,EAAatB,EAAQ1B,IAAM0B,EAAQzB,IAGnC+C,EAAatB,EAAQzB,IAAMyB,EAAQ1B,GAElD,CACA2C,wBAAwBlkE,GAChBA,IACAvW,KAAKg6E,iBAAmBzjE,EAEhC,gBC7HG,MAAMwkE,GACTC,SAAW,SACXvkD,OACA4hD,SACA4C,WACA9sB,WACA+sB,QACAp7E,YAAY0tB,EAAO,CAAC,GAChB,MAAM,eAAE2tD,EAAc,WAAEhtB,EAAU,OAAE13B,EAAM,cAAE2kD,EAAa,QAAEF,GAAY1tD,EACvExtB,KAAKy2B,OAASA,GAAUg6C,EACxBzwE,KAAKmuD,WAAaA,EAClBnuD,KAAKk7E,QAAUA,GAAU,QAAgBA,QAAWr1E,EAGhD7F,KAAKi7E,WAFLE,EAEkBn7E,KAAKy2B,OAAO46C,8BAA8B8J,GAG1Cn7E,KAAKy2B,OAAOw6C,wBAElCjxE,KAAKq4E,SAAW+C,GAAiB,IAAI5gF,WAAW,EACpD,CASAyD,qBAAqBi2E,EAAW+F,EAAY/E,GACxC,MAAMmG,GAAoB,OAASpB,EAAY,CAC3CqB,cAAerJ,EACfsJ,cAAepJ,EACfqJ,cAAejL,IAEb6J,QAAkBp6E,KAAKy7E,iBAAiB,CAC1CxB,WAAYoB,EACZtB,aAAa,EACb7F,YACAgB,eAGJ,MAAO,CACHwG,WAFe17E,KAAK27E,uBAAuBN,EAAmBjB,GAG9DJ,iBAAkBI,EAAUJ,iBAC5B9E,WAAYkF,EAAUlF,WAE9B,CASAj3E,oBAAoBi2E,EAAW+F,EAAY/E,GACvC,MAAMmG,GAAoB,OAASpB,EAAY,CAC3CqB,cAAerJ,EACfsJ,cAAepJ,EACfqJ,cAAejL,IAEb6J,QAAkBp6E,KAAKy7E,iBAAiB,CAC1CxB,WAAYoB,EACZtB,aAAa,EACb7F,YACAgB,eAGJ,MAAO,CACHwG,WAFe17E,KAAK27E,uBAAuBN,EAAmBjB,GAG9DlF,WAAYkF,EAAUlF,WACtB8E,iBAAkBI,EAAUJ,iBAEpC,CAOA/7E,uBAAuBwoE,GACnB,MAAM6N,QAAgBL,EAAWxN,EAAOyN,UAAWl0E,KAAKi7E,WAAW9J,UAAWnxE,KAAKmuD,YAEnF,OAAOnuD,KAAK47E,mBAAmBnV,EAAQ6N,EAC3C,CACAr2E,yBAAyBwoE,EAAQ6N,GAC7B,MAAM,YAAEyF,EAAW,WAAE7E,EAAU,WAAE+E,GAAexT,EAC1C2T,EAAY,IAAIN,GAAYC,EAAazF,EAASt0E,KAAKq4E,SAAUr4E,KAAKy2B,OAAQz2B,KAAKi7E,WAAYhB,EAAY/E,GACjH,UACUkF,EAAUyB,gBACVzB,EAAU0B,iBACV1B,EAAUjc,SAChBn+D,KAAKk7E,SAASa,qBAAqB3F,WACvC,CACA,MAAO7/D,GAEH,GADAvW,KAAKk7E,SAASc,kBAAkB5F,YAC5B7/D,aAAahe,MAEb,MADAge,EAAEmH,QAAU,uCAAuCnH,EAAEmH,UAC/CnH,CAEd,CACA,OAAO6jE,CACX,CACAn8E,6BAA6Bg8E,EAAYG,GAErC,MAAO6B,EAAQC,IAAQ,EAAAC,EAAA,KACjBC,EAAUnC,EAAWoC,SAQ3B,aAPM,OAAKJ,ECnHZ,SAAuB7B,EAAWc,GACrC,OAAOj9E,gBAAiBE,GACpB,UAAW,MAAMm+E,KAASn+E,EACtB,IAAK,IAAI7C,EAAI,EAAGA,EAAIghF,EAAMrlF,OAAQqE,GZNQi1E,MYMqC,CAC3E,IAAI/oE,EAAMlM,EZP4Bi1E,MYQlC/oE,EAAM80E,EAAMrlF,SACZuQ,EAAM80E,EAAMrlF,QAEhB,MAAMmb,EAAOgoE,EAAUvI,QAAQyK,EAAMhlF,SAASgE,EAAGkM,GAAM4yE,EAAUZ,SACjE0B,GAASqB,iBAAiBnG,kBACpBnE,EAAe7/D,EAAKxD,kBACpBwD,CACV,CAER,CACJ,CDqGQoqE,CAAcpC,EAAWp6E,KAAKk7E,SAC9BkB,GACCj+E,IAAW,OAAOA,EAAQ,CAAEo9E,cAAepJ,KCrG7C,SAAuBiI,EAAWc,GACrC,OAAOj9E,gBAAiBE,GACpB,UAAW,MAAMm+E,KAASn+E,EACtB,IAAK,IAAI7C,EAAI,EAAGA,EAAIghF,EAAMrlF,OAAQqE,GAAKi1E,EAA4B,CAC/D,IAAI/oE,EAAMlM,EAAIi1E,EAId,GAHI/oE,EAAM80E,EAAMrlF,SACZuQ,EAAM80E,EAAMrlF,QAEZuQ,EA3BM,GA2BoBlM,EAC1B,MAAM,IAAI/C,MAAM,iBAEpB,MAAMkkF,EAAYH,EAAMhlF,SAASgE,EAAGkM,GAK9BiX,EAAM69D,EAAMhlF,SAASgE,EAAGkM,EAnCpB,KAoCFiqE,UAAWiL,EAAS,MAAEpG,GAAU8D,EAAUpI,QAAQyK,EAAWrC,EAAUZ,QAAS/6D,GACxF,IAAK63D,EAED,MADA4E,GAASyB,cAAcvG,YACjB,IAAI79E,MAAM,sCAEpB2iF,GAAS0B,iBAAiBxG,kBACpBsG,CACV,CAER,CACJ,CD2EQG,CAAczC,EAAWp6E,KAAKk7E,SAC9Be,GAEOC,CACX,EE7HG,SAASY,GAAMtvD,EAAO,CAAC,GAC1B,MAAO,IAAM,IAAIutD,GAAMvtD,EAC3B,oCCJO,SAASuvD,EAAgB7B,GAC5B,MAAO,CACHa,qBAAsBb,EAAQ8B,gBAAgB,2CAA4C,CACtFC,KAAM,iDAEVjB,kBAAmBd,EAAQ8B,gBAAgB,uCAAwC,CAC/EC,KAAM,6CAEVV,iBAAkBrB,EAAQ8B,gBAAgB,uCAAwC,CAC9EC,KAAM,wDAEVL,iBAAkB1B,EAAQ8B,gBAAgB,uCAAwC,CAC9EC,KAAM,2CAEVN,cAAezB,EAAQ8B,gBAAgB,oCAAqC,CACxEC,KAAM,wCAGlB,sGCLO,MAAMC,EACTzkF,EACA0f,MACAvc,KACAkE,YAAYrH,EAjBS,GAkBjBuH,KAAKvH,EAAIA,EACTuH,KAAKmY,MAAQ,IAAI3d,WAAW,IAC5BwF,KAAKpE,KAAO,IAAIiwB,SAAS7rB,KAAKmY,MAAMxhB,OAAQqJ,KAAKmY,MAAMxG,WAAY3R,KAAKmY,MAAMvJ,YAC9E5O,KAAKpE,KAAKuhF,UAAU,EAAG1kF,GAAG,EAC9B,CACA29E,YACIp2E,KAAKvH,IAELuH,KAAKpE,KAAKuhF,UAAU,EAAGn9E,KAAKvH,GAAG,EACnC,CACAm+E,WACI,OAAO52E,KAAKmY,KAChB,CACAwiE,YACI,OAAO36E,KAAKvH,CAChB,CACAk+E,cACI,GAAI32E,KAAKvH,EA5BQ,WA6Bb,MAAM,IAAIF,MA5BA,uEA8BlB,4HChCO2yE,EAMPC,EAWOC,EAiDAC,cAjEX,SAAWH,GACPA,EAAa,IAAI,MACjBA,EAAiB,QAAI,UACrBA,EAAmB,UAAI,WAC1B,CAJD,CAIGA,IAAYA,EAAU,CAAC,IAE1B,SAAWC,GACPA,EAAgBA,EAAqB,IAAI,GAAK,MAC9CA,EAAgBA,EAAyB,QAAI,GAAK,UAClDA,EAAgBA,EAA2B,UAAI,GAAK,WACvD,CAJD,CAIGA,IAAoBA,EAAkB,CAAC,IAC1C,SAAWD,GACPA,EAAQI,MAAQ,KACL,QAAYH,EAE1B,CAJD,CAIGD,IAAYA,EAAU,CAAC,IAE1B,SAAWE,GACP,IAAIG,EACJH,EAAUE,MAAQ,KACA,MAAVC,IACAA,GAAS,SAAQ,CAACv5D,EAAK4gB,EAAGm4C,EAAO,CAAC,MACD,IAAzBA,EAAKS,iBACL54C,EAAEgvC,OAEU,MAAZ5vD,EAAI/W,OACJ23B,EAAE6pC,OAAO,GACTyO,EAAQI,QAAQ1oE,OAAOoP,EAAI/W,KAAM23B,IAErB,MAAZ5gB,EAAIy5D,OACJ74C,EAAE6pC,OAAO,IACT7pC,EAAEza,MAAMnG,EAAIy5D,QAEa,IAAzBV,EAAKS,iBACL54C,EAAEkvC,QACN,IACD,CAACh3C,EAAQ7zB,KACR,MAAM+a,EAAM,CAAC,EACPxK,EAAgB,MAAVvQ,EAAiB6zB,EAAO9uB,IAAM8uB,EAAO7T,IAAMhgB,EACvD,KAAO6zB,EAAO7T,IAAMzP,GAAK,CACrB,MAAM0/C,EAAMp8B,EAAO2xC,SACnB,OAAQvV,IAAQ,GACZ,KAAK,EACDl1C,EAAI/W,KAAOiwE,EAAQI,QAAQlkE,OAAO0jB,GAClC,MACJ,KAAK,EACD9Y,EAAIy5D,KAAO3gD,EAAO3S,QAClB,MACJ,QACI2S,EAAOmyC,SAAe,EAAN/V,GAG5B,CACA,OAAOl1C,CAAG,KAGXu5D,GAEXH,EAAUxoE,OAAUoP,IACT,QAAcA,EAAKo5D,EAAUE,SAExCF,EAAUhkE,OAAUrM,IACT,QAAcA,EAAKqwE,EAAUE,QAE3C,CA/CD,CA+CGF,IAAcA,EAAY,CAAC,IAE9B,SAAWC,GACP,IAAIE,EACJF,EAAWC,MAAQ,KACD,MAAVC,IACAA,GAAS,SAAQ,CAACv5D,EAAK4gB,EAAGm4C,EAAO,CAAC,MACD,IAAzBA,EAAKS,iBACL54C,EAAEgvC,OAEU,MAAZ5vD,EAAI/W,OACJ23B,EAAE6pC,OAAO,GACTyO,EAAQI,QAAQ1oE,OAAOoP,EAAI/W,KAAM23B,IAErB,MAAZ5gB,EAAIy5D,OACJ74C,EAAE6pC,OAAO,IACT7pC,EAAEza,MAAMnG,EAAIy5D,QAEa,IAAzBV,EAAKS,iBACL54C,EAAEkvC,QACN,IACD,CAACh3C,EAAQ7zB,KACR,MAAM+a,EAAM,CAAC,EACPxK,EAAgB,MAAVvQ,EAAiB6zB,EAAO9uB,IAAM8uB,EAAO7T,IAAMhgB,EACvD,KAAO6zB,EAAO7T,IAAMzP,GAAK,CACrB,MAAM0/C,EAAMp8B,EAAO2xC,SACnB,OAAQvV,IAAQ,GACZ,KAAK,EACDl1C,EAAI/W,KAAOiwE,EAAQI,QAAQlkE,OAAO0jB,GAClC,MACJ,KAAK,EACD9Y,EAAIy5D,KAAO3gD,EAAO3S,QAClB,MACJ,QACI2S,EAAOmyC,SAAe,EAAN/V,GAG5B,CACA,OAAOl1C,CAAG,KAGXu5D,GAEXF,EAAWzoE,OAAUoP,IACV,QAAcA,EAAKq5D,EAAWC,SAEzCD,EAAWjkE,OAAUrM,IACV,QAAcA,EAAKswE,EAAWC,QAE5C,CA/CD,CA+CGD,IAAeA,EAAa,CAAC,uFCpHzB,SAAS+R,IACZ,MAAMC,GAAW,SACjB,IAAIC,GAAQ,EACZ,MAAO,CACHC,KAAMt/E,MAAOE,IACT,GAAIm/E,EACA,MAAM,IAAI/kF,MAAM,iBAEpB+kF,GAAQ,EACRD,EAASt3E,QAAQ5H,EAAO,EAE5BA,OAASF,kBACL,MAAME,QAAek/E,EAASz3E,cACvBzH,CACX,CAHQ,GAKhB,CChBO,SAASq/E,IACZ,MAAM1mE,EAAIsmE,IACJrrE,EAAIqrE,IACV,MAAO,CACH,CACIj/E,OAAQ2Y,EAAE3Y,OACVo/E,KAAMxrE,EAAEwrE,MAEZ,CACIp/E,OAAQ4T,EAAE5T,OACVo/E,KAAMzmE,EAAEymE,MAGpB,8WCfO,MAAMtQ,GAAS,QAAQ,CAC5B1+D,OAAQ,IACRlP,KAAM,SACNqf,SAAU,mCACV++D,YAAa,IAGFC,GAAc,QAAQ,CACjCnvE,OAAQ,IACRlP,KAAM,cACNqf,SAAU,mCACV++D,YAAa,IAGFE,GAAY,QAAQ,CAC/BpvE,OAAQ,IACRlP,KAAM,YACNqf,SAAU,oCACV++D,YAAa,IAGFG,GAAiB,QAAQ,CACpCrvE,OAAQ,IACRlP,KAAM,iBACNqf,SAAU,oCACV++D,YAAa,IAGFI,GAAY,QAAQ,CAC/BtvE,OAAQ,IACRlP,KAAM,YACNqf,SAAU,mCACV++D,YAAa,IAGFK,GAAiB,QAAQ,CACpCvvE,OAAQ,IACRlP,KAAM,iBACNqf,SAAU,mCACV++D,YAAa,IAGFM,GAAe,QAAQ,CAClCxvE,OAAQ,IACRlP,KAAM,eACNqf,SAAU,oCACV++D,YAAa,IAGFO,GAAoB,QAAQ,CACvCzvE,OAAQ,IACRlP,KAAM,oBACNqf,SAAU,oCACV++D,YAAa,IAGFQ,GAAU,QAAQ,CAC7B1vE,OAAQ,IACRlP,KAAM,UACNqf,SAAU,mCACV++D,YAAa,wIC5DR,MAAM1Q,GAAY,QAAM,CAC7B1tE,KAAM,YACNkP,OAAQ,IACRmQ,SAAU,+DAGCw/D,GAAe,QAAM,CAChC7+E,KAAM,eACNkP,OAAQ,IACRmQ,SAAU,4MCXE,IAAIlkB,WAAW,GAA7B,MAmBM8c,EAAS,CAACi1D,EAAIC,KAClB,GAAID,IAAOC,EAAI,OAAO,EACtB,GAAID,EAAG39D,aAAe49D,EAAG59D,WACvB,OAAO,EAGT,IAAK,IAAI69D,EAAK,EAAGA,EAAKF,EAAG39D,WAAY69D,IACnC,GAAIF,EAAGE,KAAQD,EAAGC,GAChB,OAAO,EAIX,OAAO,GAOHC,EAAS3uE,IACb,GAAIA,aAAavD,YAAqC,eAAvBuD,EAAE+B,YAAYT,KAAuB,OAAOtB,EAC3E,GAAIA,aAAasT,YAAa,OAAO,IAAI7W,WAAWuD,GACpD,GAAIsT,YAAYC,OAAOvT,GACrB,OAAO,IAAIvD,WAAWuD,EAAEpH,OAAQoH,EAAE4T,WAAY5T,EAAE6Q,YAElD,MAAM,IAAIrW,MAAM,oCAAmC,EAc/C6Y,EAAa/V,IAAO,IAAKyS,aAAelL,OAAOvH,GAM/CoX,EAAWV,IAAK,IAAK+5D,aAAe1kE,OAAO2K,mIC7C1C,MAAMtP,EAAS,CAACkqE,EAAMC,KAC3B,MAAM,MAAEz0D,EAAK,QAAEiI,GAAYusD,EAC3B,OACO,IADCvsD,EAEGysD,EACL10D,EACA20D,EAAUH,GAC+B,GAAU,EAAAI,UAAA,SAG9CC,EACL70D,EACA20D,EAAUH,GACmCC,GAAQ,EAAAK,OAAA,QAE3D,EAoBI19D,EAAQ,IAAIsY,QAMZilD,EAAYI,IAChB,MAAMJ,EAAYv9D,EAAM5O,IAAIusE,GAC5B,GAAiB,MAAbJ,EAAmB,CACrB,MAAMA,EAAY,IAAIt9D,IAEtB,OADAD,EAAM1T,IAAIqxE,EAAKJ,GACRA,CACT,CACA,OAAOA,GAWF,MAAMK,EAOXrtE,YAAasgB,EAASne,EAAMmrE,EAAWj1D,GAErCnY,KAAKiC,KAAOA,EAEZjC,KAAKogB,QAAUA,EAEfpgB,KAAKotE,UAAYA,EAEjBptE,KAAKmY,MAAQA,EAKbnY,KAAK,KAAOmY,CACd,CAQIk1D,YACF,OAAOrtE,IACT,CAGI2R,iBACF,OAAO3R,KAAKmY,MAAMxG,UACpB,CAGI/C,iBACF,OAAO5O,KAAKmY,MAAMvJ,UACpB,CAKA0+D,OACE,OAAQttE,KAAKogB,SACX,KAAK,EACH,OAA4D,KAE9D,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,UAAEmrE,GAAcptE,KAE5B,GAAIiC,IAASsrE,EACX,MAAM,IAAIh1E,MAAM,4CAIlB,GAAI60E,EAAUnrE,OAASurE,EACrB,MAAM,IAAIj1E,MAAM,sDAGlB,OACE40E,EAAIM,SAC8C,EAGtD,CACA,QACE,MAAMl1E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAKAstD,OACE,OAAQ1tE,KAAKogB,SACX,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,OAAE00B,GAAW32B,KAAKotE,UACxBA,EAAY,KAAcnrE,EAAM00B,GACtC,OACEw2C,EAAIQ,SAAS3tE,KAAKiC,KAAMmrE,EAE5B,CACA,KAAK,EACH,OAAgD,KAElD,QACE,MAAM70E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAMA9I,OAAQs2D,GACN,OAAOT,EAAI71D,OAAOtX,KAAM4tE,EAC1B,CAWA5/D,cAAeqb,EAAMukD,GACnB,MAAMC,EACiE,EAGvE,OACEA,GACAxkD,EAAKpnB,OAAS4rE,EAAQ5rE,MACtBonB,EAAKjJ,UAAYytD,EAAQztD,SACzB,KAAciJ,EAAK+jD,UAAWS,EAAQT,UAE1C,CAMA36D,SAAUm6D,GACR,OAAOnqE,EAAOzC,KAAM4sE,EACtB,CAKA70D,SACE,MAAO,CAAE,IAAKtV,EAAOzC,MACvB,CAEA2sE,OACE,OAAO3sE,IACT,CAEYuzB,IAAP/8B,OAAO+8B,eACV,MAAO,KACT,CAIA,CAAC/8B,OAAOs3E,IAAI,iCACV,MAAO,OAAO9tE,KAAKyS,aACrB,CAoBAzE,aAAcjS,GACZ,GAAa,MAATA,EACF,OAAO,KAGT,MAAM8C,EAA2B,EACjC,GAAIA,aAAiBsuE,EAEnB,OAAOtuE,EACF,GAAmB,MAAdA,EAAM,MAAgBA,EAAM,OAASA,EAAMsZ,OAAUtZ,EAAMwuE,QAAUxuE,EAAO,CAMtF,MAAM,QAAEuhB,EAAO,KAAEne,EAAI,UAAEmrE,EAAS,MAAEj1D,GAAUtZ,EAC5C,OAAO,IAAIsuE,EACT/sD,EACAne,EACwC,EACxCkW,GAAS41D,EAAU3tD,EAASne,EAAMmrE,EAAUj1D,OAEhD,CAAO,IAAyB,IAArBtZ,EAAMmvE,GAAqB,CAIpC,MAAM,QAAE5tD,EAAO,UAAEgtD,EAAS,KAAEnrE,GAASpD,EAC/B83B,EAEH,KAAcy2C,GACjB,OAAOD,EAAIxuE,OAAOyhB,EAASne,EAAM00B,EACnC,CAGE,OAAO,IAEX,CAaA3oB,cAAeoS,EAASne,EAAM00B,GAC5B,GAAoB,iBAAT10B,EACT,MAAM,IAAI1J,MAAM,yCAGlB,KAAMo+B,EAAOxe,iBAAiB3d,YAC5B,MAAM,IAAIjC,MAAM,kBAGlB,OAAQ6nB,GACN,KAAK,EACH,GAAIne,IAASsrE,EACX,MAAM,IAAIh1E,MACR,wCAAwCg1E,qBAG1C,OAAO,IAAIJ,EAAI/sD,EAASne,EAAM00B,EAAQA,EAAOxe,OAGjD,KAAK,EAAG,CACN,MAAMA,EAAQ41D,EAAU3tD,EAASne,EAAM00B,EAAOxe,OAC9C,OAAO,IAAIg1D,EAAI/sD,EAASne,EAAM00B,EAAQxe,EACxC,CACA,QACE,MAAM,IAAI5f,MAAM,mBAGtB,CASAyV,gBAAiB2oB,GACf,OAAOw2C,EAAIxuE,OAAO,EAAG4uE,EAAa52C,EACpC,CAYA3oB,gBAAiB/L,EAAM00B,GACrB,OAAOw2C,EAAIxuE,OAAO,EAAGsD,EAAM00B,EAC7B,CAgBA3oB,cAAemK,GACb,MAAO+0D,EAAKe,GAAad,EAAIe,YAAY/1D,GACzC,GAAI81D,EAAUh3E,OACZ,MAAM,IAAIsB,MAAM,oBAElB,OAAO20E,CACT,CAkBAl/D,mBAAoBmK,GAClB,MAAMg2D,EAAQhB,EAAIiB,aAAaj2D,GACzBk2D,EAAaF,EAAM12E,KAAO02E,EAAMG,cAChCC,GAAiB,QACrBp2D,EAAM7gB,SAAS+2E,EAAYA,EAAaF,EAAMG,gBAEhD,GAAIC,EAAe3/D,aAAeu/D,EAAMG,cACtC,MAAM,IAAI/1E,MAAM,oBAElB,MAAMi2E,EAAcD,EAAej3E,SACjC62E,EAAMG,cAAgBH,EAAMM,YAExB93C,EAAS,IAAI,KACjBw3C,EAAMO,cACNP,EAAMM,WACND,EACAD,GAMF,MAAO,CAHa,IAAlBJ,EAAM/tD,QACF+sD,EAAIM,SAAyD,GAC7DN,EAAIQ,SAASQ,EAAM7C,MAAO30C,GACaxe,EAAM7gB,SAAS62E,EAAM12E,MACpE,CAkBAuW,oBAAqB2gE,GACnB,IAAIz3E,EAAS,EACb,MAAMyO,EAAO,KACX,MAAOrK,EAAGrE,GAAU,KAAc03E,EAAar3E,SAASJ,IAExD,OADAA,GAAUD,EACHqE,GAGT,IAAI8kB,EAA4Bza,IAC5B2lE,EAAyB,EAS7B,GARuC,KAAd,GAEvBlrD,EAA2B,EAC3BlpB,EAAS,GAETo0E,EAA0B3lE,IAGZ,IAAZya,GAA6B,IAAZA,EACnB,MAAM,IAAIxP,WAAW,uBAAuBwP,KAG9C,MAAMiuD,EAAan3E,EACbw3E,EAAkC/oE,IAClC8oE,EAAa9oE,IACblO,EAAOP,EAASu3E,EAGtB,MAAO,CAAEruD,UAASkrD,QAAOoD,gBAAeD,aAAYH,cAF9B72E,EAAO42E,EAEsC52E,OACrE,CAiBAuW,aAAc7P,EAAQyuE,GACpB,MAAOr+D,EAAQ4J,GAASy2D,EAAgBzwE,EAAQyuE,GAE1CM,EAAMC,EAAI/lE,OAAO+Q,GAEvB,GAAoB,IAAhB+0D,EAAI9sD,SAA+B,MAAdjiB,EAAO,GAC9B,MAAM5F,MAAM,0DAMd,OAFAu0E,EAAUI,GAAKrxE,IAAI0S,EAAQpQ,GAEpB+uE,CACT,EAaF,MAAM0B,EAAkB,CAACzwE,EAAQyuE,KAC/B,OAAQzuE,EAAO,IAEb,IAAK,IAAK,CACR,MAAM0tE,EAAUe,GAAQ,EAAAG,UACxB,MAAO,CACkB,EAAAA,UAAgB,OACvClB,EAAQzkE,OAAO,GAAG,EAAA2lE,UAAA,SAAmB5uE,KAEzC,CACA,KAAK,EAAA4uE,UAAA,OAAkB,CACrB,MAAMlB,EAAUe,GAAQ,EAAAG,UACxB,MAAO,CAAuB,EAAAA,UAAgB,OAAGlB,EAAQzkE,OAAOjJ,GAClE,CACA,KAAK,EAAA8uE,OAAA,OAAe,CAClB,MAAMpB,EAAUe,GAAQ,EAAAK,OACxB,MAAO,CAAuB,EAAAA,OAAa,OAAGpB,EAAQzkE,OAAOjJ,GAC/D,CACA,QACE,GAAY,MAARyuE,EACF,MAAMr0E,MACJ,mFAGJ,MAAO,CAAuB4F,EAAO,GAAKyuE,EAAKxlE,OAAOjJ,IAE1D,EASI0uE,EAAa,CAAC10D,EAAO5I,EAAOq9D,KAChC,MAAM,OAAEr+D,GAAWq+D,EACnB,GAAIr+D,IAAW,EAAAw+D,UAAA,OACb,MAAMx0E,MAAM,8BAA8Bq0E,EAAKvtE,iBAGjD,MAAM6tE,EAAM39D,EAAM5O,IAAI4N,GACtB,GAAW,MAAP2+D,EAAa,CACf,MAAMA,EAAMN,EAAKhqE,OAAOuV,GAAOrf,MAAM,GAErC,OADAyW,EAAM1T,IAAI0S,EAAQ2+D,GACXA,CACT,CACE,OAAOA,CACT,EASIF,EAAa,CAAC70D,EAAO5I,EAAOq9D,KAChC,MAAM,OAAEr+D,GAAWq+D,EACbM,EAAM39D,EAAM5O,IAAI4N,GACtB,GAAW,MAAP2+D,EAAa,CACf,MAAMA,EAAMN,EAAKhqE,OAAOuV,GAExB,OADA5I,EAAM1T,IAAI0S,EAAQ2+D,GACXA,CACT,CACE,OAAOA,CACT,EAGIK,EAAc,IACdC,EAAe,GAQfO,EAAY,CAAC3tD,EAASne,EAAMmrE,KAChC,MAAMyB,EAAa,KAAsBzuD,GACnC0uD,EAAaD,EAAa,KAAsB5sE,GAChDkW,EAAQ,IAAI3d,WAAWs0E,EAAa1B,EAAUx+D,YAIpD,OAHA,KAAgBwR,EAASjI,EAAO,GAChC,KAAgBlW,EAAMkW,EAAO02D,GAC7B12D,EAAMtc,IAAIuxE,EAAW0B,GACd32D,GAGH61D,EAAYx3E,OAAOs3E,IAAI,2LC3kBtB,MAAMnvE,EAAS,CAACsD,EAAM00B,KAC3B,MAAMl/B,EAAOk/B,EAAO/nB,WACdmgE,EAAa,KAAsB9sE,GACnC+sE,EAAeD,EAAa,KAAsBt3E,GAElD0gB,EAAQ,IAAI3d,WAAWw0E,EAAev3E,GAK5C,OAJA,KAAgBwK,EAAMkW,EAAO,GAC7B,KAAgB1gB,EAAM0gB,EAAO42D,GAC7B52D,EAAMtc,IAAI86B,EAAQq4C,GAEX,IAAIC,EAAOhtE,EAAMxK,EAAMk/B,EAAQxe,EAAK,EAShC/Q,EAAUgmE,IACrB,MAAMj1D,GAAQ,QAAOi1D,IACdnrE,EAAM8sE,GAAc,KAAc52D,IAClC1gB,EAAMu3E,GAAgB,KAAc72D,EAAM7gB,SAASy3E,IACpDp4C,EAASxe,EAAM7gB,SAASy3E,EAAaC,GAE3C,GAAIr4C,EAAO/nB,aAAenX,EACxB,MAAM,IAAIc,MAAM,oBAGlB,OAAO,IAAI02E,EAAOhtE,EAAMxK,EAAMk/B,EAAQxe,EAAK,EAQhCb,EAAS,CAACR,EAAG/E,KACxB,GAAI+E,IAAM/E,EACR,OAAO,EACF,CACL,MAAMK,EAAoE,EAE1E,OACE0E,EAAE7U,OAASmQ,EAAKnQ,MAChB6U,EAAErf,OAAS2a,EAAK3a,MAChB2a,EAAK+F,iBAAiB3d,aACtB,QAAWsc,EAAEqB,MAAO/F,EAAK+F,MAE7B,GAgBK,MAAM82D,EASXnvE,YAAamC,EAAMxK,EAAMk/B,EAAQxe,GAC/BnY,KAAKiC,KAAOA,EACZjC,KAAKvI,KAAOA,EACZuI,KAAK22B,OAASA,EACd32B,KAAKmY,MAAQA,CACf,+GCtFF,MAIMvV,EAAS,KAQFssE,EAAW,CAAEjtE,KAZb,EAYmB5C,KAXnB,WAWyBuD,SAAQ+zB,OAF9B56B,GAAU,KAVb,EAUiC6G,EAAO7G,gICNrD,MAAMoiF,EAAM9+E,GAIVpB,SAAc,IAAIzD,iBAAiBi8B,OAAOC,OAAOC,OAAOt3B,EAAM+S,IAEnDu+D,GAAS,OAAK,CACzBtxE,KAAM,WACN4C,KAAM,GACNW,OAAQu7E,EAAI,aAGDC,GAAS,OAAK,CACzB/+E,KAAM,WACN4C,KAAM,GACNW,OAAQu7E,EAAI,kICtBd,IAAIhP,EAOJ,SAASvsE,EAAOivB,EAAK51B,EAAK/E,GACxB+E,EAAMA,GAAO,GAEb,IAAImzE,EADJl4E,EAASA,GAAU,EAGnB,KAAM26B,GAAOw9C,GACXpzE,EAAI/E,KAAmB,IAAN26B,EAAcy9C,EAC/Bz9C,GAAO,IAET,KAAMA,EAAM09C,GACVtzE,EAAI/E,KAAmB,IAAN26B,EAAcy9C,EAC/Bz9C,KAAS,EAMX,OAJA51B,EAAI/E,GAAgB,EAAN26B,EAEdjvB,EAAOuV,MAAQjhB,EAASk4E,EAAY,EAE7BnzE,CACT,EAvBIqzE,EAAM,IAENC,GAAS,IACTF,EAAMp2E,KAAKqhB,IAAI,EAAG,IAsBtB,IAAIlT,EAKJ,SAAS4M,EAAKjZ,EAAK7D,GACjB,IAII6a,EAJAyD,EAAS,EAETpW,EAAS,EACTowE,EAFAt4E,EAASA,GAAU,EAInBiyB,EAAIpuB,EAAI9D,OAEZ,EAAG,CACD,GAAIu4E,GAAWrmD,EAEb,MADAnV,EAAKmE,MAAQ,EACP,IAAIvH,WAAW,2BAEvBmB,EAAIhX,EAAIy0E,KACRh6D,GAAOpW,EAAQ,IACV2S,EAAI09D,IAAWrwE,GACf2S,EAAI09D,GAAUx2E,KAAKqhB,IAAI,EAAGlb,GAC/BA,GAAS,CACX,OAAS2S,GAAK29D,GAId,OAFA17D,EAAKmE,MAAQq3D,EAAUt4E,EAEhBse,CACT,EA1BIk6D,EAAQ,IACRD,EAAS,IA2Bb,IAAIE,EAAK12E,KAAKqhB,IAAI,EAAI,GAClBs1D,EAAK32E,KAAKqhB,IAAI,EAAG,IACjBu1D,EAAK52E,KAAKqhB,IAAI,EAAG,IACjBw1D,EAAK72E,KAAKqhB,IAAI,EAAG,IACjBy1D,EAAK92E,KAAKqhB,IAAI,EAAG,IACjB01D,EAAK/2E,KAAKqhB,IAAI,EAAG,IACjB21D,EAAKh3E,KAAKqhB,IAAI,EAAG,IACjB41D,EAAKj3E,KAAKqhB,IAAI,EAAG,IACjB61D,EAAKl3E,KAAKqhB,IAAI,EAAG,IAyBrB,EARa,CACT1X,OAAQusE,EACR/nE,OAAQA,EACRgpE,eAlBS,SAAUvxE,GACrB,OACEA,EAAQ8wE,EAAK,EACb9wE,EAAQ+wE,EAAK,EACb/wE,EAAQgxE,EAAK,EACbhxE,EAAQixE,EAAK,EACbjxE,EAAQkxE,EAAK,EACblxE,EAAQmxE,EAAK,EACbnxE,EAAQoxE,EAAK,EACbpxE,EAAQqxE,EAAK,EACbrxE,EAAQsxE,EAAK,EACA,EAEjB,GCzEO,MAAM,EAAS,CAAC/9D,EAAMlb,EAAS,IAE7B,CADM,SAAckb,EAAMlb,GACnB,gBAQHm5E,EAAW,CAACC,EAAK1pE,EAAQ1P,EAAS,KAC7C,SAAco5E,EAAK1pE,EAAQ1P,GACpB0P,GAOIwpE,EAAkBE,GACtB,iBAAsBA,iECzB/B,SAAS3E,EAAYtsE,EAAMkP,EAAQ3L,EAAQwE,GACvC,MAAO,CACH/H,OACAkP,SACAq9D,QAAS,CACLvsE,OACAkP,SACA3L,UAEJipE,QAAS,CACLzkE,UAGZ,CACA,MAAM6J,EAAS06D,EAAY,OAAQ,KAAM5wE,GAE9B,IADS,IAAI+wE,YAAY,QACX1kE,OAAOrM,KAC5BM,IACgB,IAAIyS,aACLlL,OAAOvH,EAAIoE,UAAU,MAElCssE,EAAQJ,EAAY,QAAS,KAAM5wE,IACrC,IAAIkW,EAAS,IACb,IAAK,IAAI3V,EAAI,EAAGA,EAAIP,EAAI9D,OAAQqE,IAC5B2V,GAAU9Z,OAAOC,aAAa2D,EAAIO,IAEtC,OAAO2V,CAAM,IACb5V,IACAA,EAAMA,EAAIoE,UAAU,GACpB,MAAM1E,GAAM,OAAYM,EAAIpE,QAC5B,IAAK,IAAIqE,EAAI,EAAGA,EAAID,EAAIpE,OAAQqE,IAC5BP,EAAIO,GAAKD,EAAIG,WAAWF,GAE5B,OAAOP,CAAG,IAERixE,EAAQ,CACVr9D,KAAMsC,EACN,QAASA,EACT6tC,IAAK,YACLmtB,OAAQF,EACRA,QACAG,OAAQH,KACL,MAEP,qICHO,SAASsS,EAAOh/E,GAEnB,IAAI7G,EAbR,SAA8B8lF,GAC1B,MAAMD,EAAS,OAQf,OAPAA,EAAOrI,SAAU,EACjBqI,EAAOE,MAAQ,GACfF,EAAOG,KAAO,EACdH,EAAO1lF,IAAM,OACb0lF,EAAOC,UAAYA,EACnBD,EAAOz8D,QAAU,KAAM,EACvBy8D,EAAO/rD,OAAS,IAAM+rD,EACfA,CACX,CAGgBI,CAAqB,GAAGp/E,WAKpC,OAHI,UAAc,GAAGA,YAAuF,MAAtE,aAAgBipB,GAAKA,EAAE7V,aAAYisE,MAAKjmF,GAAKA,EAAEof,SAAS,cAC1Frf,EAAQ,EAAM,GAAG6G,YAEdX,OAAOwL,OAAO,EAAM7K,GAAO,CAC9BoX,MAAO,EAAM,GAAGpX,WAChB7G,SAER,CAjDA,eAAsBswB,GACN,MAALA,EAAY,YAAcuqD,EAAA,aAAqBvqD,GAG1D,eAAsBA,GACN,MAALA,EAAY,YAAcmkD,EAAA,cAAkBnkD,GAGvD,eAAsBA,GACN,MAALA,EAAY,YAAczY,EAAA,cAAkByY,GAGvD,eAAsBA,GACN,MAALA,EAAY,YAAcA,EAAErW,WAGvC,eAAsBqW,GACN,MAALA,EAAY,YAAcA,EAAErW,WAGvC,eAAsBqW,GACN,MAALA,EAAY,YAAcA,EAAErW,WAGvC,eAAsBqW,GACN,MAALA,EAAY,YAAcA,EAAErW,WC9BhC,MAAMksE,UAAmBpmF,MAC5BuH,YAAY4d,EAASzb,GACjBiF,MAAMwW,GAAW,6BACjB1d,KAAK+C,KAAO,UACZ/C,KAAKiC,KAAOA,GAAQ,WACxB,gBC6CG,SAAS28E,EAAgBzgF,EAAQghB,EAAQnd,GAC5C,MAAM+oE,EAAO/oE,GAAW,CAAC,EACnByK,GAAW,OAAYtO,GA+D7B,OA9DAF,kBACI,IAAI4gF,EACJ,MAAMC,EAAe,KACO,MAApBD,GACAA,GAAkB,EAG1B,IADA1/D,EAAOE,iBAAiB,QAASy/D,KACpB,CACT,IAAIjwE,EACJ,IACI,GAAIsQ,EAAOG,QAAS,CAChB,MAAM,aAAEy/D,EAAY,UAAEC,GAAcjU,EACpC,MAAM,IAAI4T,EAAWI,EAAcC,EACvC,CACA,MAAM9mF,EAAQ,IAAI4N,SAAQ,CAACC,EAASC,KAChC64E,EAAmB,KACf,MAAM,aAAEE,EAAY,UAAEC,GAAcjU,EACpC/kE,EAAO,IAAI24E,EAAWI,EAAcC,GAAW,CAClD,IAGLnwE,QAAe/I,QAAQg1B,KAAK,CAAC5iC,EAAOuU,EAAS9G,SAC7Ck5E,EAAmB,IACvB,CACA,MAAO38E,GACHid,EAAOC,oBAAoB,QAAS0/D,GAEpC,MAAMG,EAA8B,YAAb/8E,EAAIa,MAAsBoc,EAAOG,QAMxD,GALI2/D,GAAmC,MAAhBlU,EAAK7rD,SAExB6rD,EAAK7rD,QAAQ/gB,GAGc,mBAApBsO,EAASyyE,OAChB,IACI,MAAM3jF,EAAIkR,EAASyyE,SACf3jF,aAAauK,SACbvK,EAAEupB,OAAM5iB,IACsB,MAAtB6oE,EAAKoU,eACLpU,EAAKoU,cAAcj9E,EACvB,GAGZ,CACA,MAAOA,GACuB,MAAtB6oE,EAAKoU,eACLpU,EAAKoU,cAAcj9E,EAE3B,CAEJ,GAAI+8E,IAAyC,IAAvBlU,EAAKqU,cACvB,OAEJ,MAAMl9E,CACV,CACA,IAAoB,IAAhB2M,EAAOwb,KACP,YAEExb,EAAOhQ,KACjB,CACAsgB,EAAOC,oBAAoB,QAAS0/D,EACxC,CACOO,EACX,sCClEO,MAAM,UAAmB9mF,MAC5BwK,KACAd,KACAnC,YAAY4d,EAASzb,GACjBiF,MAAMwW,GAAW,6BACjB1d,KAAK+C,KAAO,UACZ/C,KAAKiC,KAAOA,GAAQ,WACxB,EA8CJ,SAASq9E,EAAUC,EAASv9E,GAExB,IAEIw9E,EACAC,EACAC,EAJAC,GADJ39E,EAAUA,GAAW,CAAC,GACF29E,MAChBhpF,EAAS,IAAI,IAIbipF,GAAQ,SACZ,MAiCMC,EAAcl6E,GACF,MAAV85E,EACOA,EAAO95E,IAElBhP,EAAOe,KAAKiO,GACL65E,GAUL9nF,EAAQmH,IACV,GAAI6gF,EACA,OAAOF,EAGX,IAA4B,IAAxBx9E,GAAS89E,YAA4C,MAArBjhF,GAAO+P,WACvC,MAAM,IAAIrW,MAAM,kEAEpB,OAAOsnF,EAAW,CAAEx1D,MAAM,EAAOxrB,SAAQ,EAEvC2I,EAAOtF,GACLw9E,EACOF,GACXE,GAAQ,EACO,MAAPx9E,EAtBQ,CAACA,IACjBvL,EAAS,IAAI,IACC,MAAV8oF,EACOA,EAAO,CAAEhpE,MAAOvU,KAE3BvL,EAAOe,KAAK,CAAE+e,MAAOvU,IACds9E,IAgBgBO,CAAY79E,GAAO29E,EAAW,CAAEx1D,MAAM,KAkDjE,GAvCAm1D,EAAW,CACP,CAAChpF,OAAOuQ,iBAAmB,OAAO/G,IAAM,EACxC2F,KA3Ea1H,UACb,IACI,OAAKtH,EAAO46B,UAGRmuD,EACO,CAAEr1D,MAAM,SAEN,IAAIvkB,SAAQ,CAACC,EAASC,KAC/By5E,EAAU95E,IACN85E,EAAS,KACT9oF,EAAOe,KAAKiO,GACZ,IACII,EAAQw5E,EAAQ5oF,GACpB,CACA,MAAOuL,GACH8D,EAAO9D,EACX,CACA,OAAOs9E,CAAQ,CAClB,IAhBMD,EAAQ5oF,EAkBvB,CACA,QACQA,EAAO46B,WAGPrhB,gBAAe,KACX0vE,EAAM75E,UACN65E,GAAQ,QAAU,GAG9B,GA6CAV,OAZY,KACZvoF,EAAS,IAAI,IACb6Q,IACO,CAAE6iB,MAAM,IAUfmjB,MARYtrC,IACZsF,EAAItF,GACG,CAAEmoB,MAAM,IAOf3yB,OACA8P,MACIw4E,qBACA,OAAOrpF,EAAOc,IAClB,EACAwoF,QAAShiF,MAAO+D,IACZ,MAAMmd,EAASnd,GAASmd,OAExB,GADAA,GAAQ+gE,iBACJvpF,EAAO46B,UACP,OAEJ,IAAIrmB,EACAytD,EACU,MAAVx5C,IACAjU,EAAS,IAAIpF,SAAQ,CAACC,EAASC,KAC3B2yD,EAAW,KACP3yD,EAAO,IAAI,EAAa,EAE5BmZ,EAAOE,iBAAiB,QAASs5C,EAAS,KAGlD,UACU7yD,QAAQg1B,KAAK,CACf8kD,EAAMh6E,QACNsF,GAER,CACA,QACoB,MAAZytD,GAA8B,MAAVx5C,GACpBA,GAAQC,oBAAoB,QAASu5C,EAE7C,IAGK,MAATgnB,EACA,OAAOH,EAEX,MAAMF,EAAYE,EAmClB,OAlCAA,EAAW,CACP,CAAChpF,OAAOuQ,iBAAmB,OAAO/G,IAAM,EACxC2F,KAAI,IACO25E,EAAU35E,OAErB6nC,MAAMtrC,IACFo9E,EAAU9xC,MAAMtrC,GACH,MAATy9E,IACAA,EAAMz9E,GACNy9E,OAAQ95E,GAEL,CAAEwkB,MAAM,IAEnB60D,OAAM,KACFI,EAAUJ,SACG,MAATS,IACAA,IACAA,OAAQ95E,GAEL,CAAEwkB,MAAM,IAEnB3yB,OACA8P,IAAItF,IACAo9E,EAAU93E,IAAItF,GACD,MAATy9E,IACAA,EAAMz9E,GACNy9E,OAAQ95E,GAEL25E,GAEPQ,qBACA,OAAOV,EAAUU,cACrB,GAEGR,CACX,CCrQO,MAAMW,EAAoB,oBACpBC,EAAuB,uBACvBC,EAAwB,wBACxBC,EAA4B,4BAC5BC,EAA6B,6BAC7BC,EAAmB,mBACnBC,EAA2B,2BAC3BC,EAAkB,IAAIr3E,IAAI,CACnC82E,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,IAGSE,EAAqB,qBACrBC,EAAyB,yBACzBC,EAA0B,0BAU1BC,EAAwB,OC3BxBC,EAAgB,CACzBpoF,IAAK0lF,EAAO,gBACZ2C,iBAAiB,EACjBC,kBAAmB,IACnBC,kBAAmB,IACnBC,mBAAoB,IACpBC,wBAAyBN,EACzBO,oBDwB6B,SCvB7BC,eAAgB,WCXTC,EAWAC,cAVX,SAAWD,GAEPA,EAAUA,EAAgB,KAAI,GAAK,OAEnCA,EAAUA,EAAwB,aAAI,GAAK,eAE3CA,EAAUA,EAAgB,KAAI,GAAK,OAEnCA,EAAUA,EAAkB,OAAI,GAAK,QACxC,CATD,CASGA,IAAcA,EAAY,CAAC,IAE9B,SAAWC,GAEPA,EAAKA,EAAU,IAAI,GAAK,MAExBA,EAAKA,EAAU,IAAI,GAAK,MAExBA,EAAKA,EAAU,IAAI,GAAK,MAExBA,EAAKA,EAAU,IAAI,GAAK,KAC3B,CATD,CASGA,IAASA,EAAO,CAAC,IACpB,MAAMC,EAAY/iF,OAAO/C,OAAO6lF,GAAMx0E,QAAQqB,GAAmB,iBAANA,IAEpD,IAAIqzE,GACX,SAAWA,GACPA,EAAWA,EAA8B,kBAAI,GAAK,oBAClDA,EAAWA,EAA0B,cAAI,GAAK,gBAC9CA,EAAWA,EAA0B,cAAI,GAAK,eACjD,CAJD,CAIGA,IAAeA,EAAa,CAAC,IAEzB,SAASC,EAAgBl3D,GAC5B,MAAMm3D,EAAQH,EAAUz0E,QAAOylB,IAAMhI,EAAOo3D,KAAOpvD,KAAOA,IAAG1iB,KAAI0iB,GAAK+uD,EAAK/uD,KAAI96B,KAAK,KACpF,MAAO,YAAY8yB,EAAOq3D,iBAAiBP,EAAU92D,EAAO1nB,cAAc6+E,YAAgBn3D,EAAOxzB,QACrG,CC5BA,MAAM8qF,EAAW,GAAK,GAoBf,MAAMC,EACT7jF,OAEAxH,OAEAsrF,gBACAniF,YAAY3B,GASR6B,KAAK7B,OAsEN,SAA0BA,GAC7B,QAAgC0H,IAA5B1H,EAAO3H,OAAOiW,UAAyB,CACvC,MAAMA,EAAWtO,EAAO3H,OAAOiW,YAE/B,OADAA,EAASyyE,YAASr5E,EACX,CACH,CAACrP,OAAOiW,UAAS,IAAYA,EAErC,CACK,QAAqC5G,IAAjC1H,EAAO3H,OAAOuQ,eAA8B,CACjD,MAAM0F,EAAWtO,EAAO3H,OAAOuQ,iBAE/B,OADA0F,EAASyyE,YAASr5E,EACX,CACH,CAACrP,OAAOuQ,eAAc,IAAY0F,EAE1C,CAEI,MAAM,IAAIlU,MAAM,2DAExB,CAxFsB2pF,CAAiB/jF,GAC/B6B,KAAKrJ,OAAS,IAAI,IAClBqJ,KAAKiiF,iBAAkB,CAC3B,CAOAhkF,mBACI,UAAW,MAAMq+E,KAASt8E,KAAK7B,OAI3B,IAHA6B,KAAKrJ,OAAO6zB,OAAO8xD,KAGN,CACT,MAAM7xD,EAASzqB,KAAKmiF,aACpB,QAAet8E,IAAX4kB,EACA,MAEJ,MAAM,KAAE1nB,EAAI,OAAE9L,GAAWwzB,EACrB1nB,IAASw+E,EAAU9V,MAGnBzrE,KAAKiiF,iBAAkB,OACjB,CACFx3D,SACA23D,SAAUpiF,KAAKqiF,UAAUjmF,KAAK4D,KAAM/I,UAIlC,CAAEwzB,SAEhB,CAER,CACA03D,aAGI,GAAIniF,KAAKiiF,gBACL,MAAM,IAAI,KAAU,qCHzDM,0BG2D9B,GAAIjiF,KAAKrJ,OAAOM,ODrDK,GCuDjB,OAEJ,MAAMwzB,EA3EP,SAAsBrY,GACzB,GDUyB,ICVrBA,EAAK,GACL,MAAM,IAAI,KAAU,wBAAyBmuE,GAEjD,MAAO,CACHx9E,KAAMqP,EAAK,GACXyvE,MAAOzvE,EAAK,IAAM,GAAKA,EAAK,GAC5B0vE,SAAW1vE,EAAK,GAAK2vE,GAAa3vE,EAAK,IAAM,KAAOA,EAAK,IAAM,GAAKA,EAAK,GACzEnb,OAASmb,EAAK,GAAK2vE,GAAa3vE,EAAK,IAAM,KAAOA,EAAK,KAAO,GAAKA,EAAK,IAEhF,CAiEuBkwE,CAAatiF,KAAKrJ,OAAOW,SAAS,EDzD5B,KC2DrB,OADA0I,KAAKrJ,OAAO4rF,QD1DS,IC2Dd93D,CACX,CACAxsB,gBAAgBhH,GACZ,GAAI+I,KAAKrJ,OAAOM,OAASA,EACrB,UAAW,MAAMqlF,KAASt8E,KAAK7B,OAE3B,GADA6B,KAAKrJ,OAAO6zB,OAAO8xD,GACft8E,KAAKrJ,OAAOM,QAAUA,EAEtB,MAIZ,MAAMgF,EAAM+D,KAAKrJ,OAAO6rF,QAAQ,EAAGvrF,GAInC,OAHA+I,KAAKrJ,OAAO4rF,QAAQtrF,GAEpB+I,KAAKiiF,iBAAkB,EAChBhmF,CACX,ECzGG,SAASwmF,EAAah4D,GACzB,MAAMi4D,EAAQ,IAAIloF,WF4BO,IEdzB,OAXAkoF,EAAM,GAAKj4D,EAAO1nB,KAClB2/E,EAAM,GAAKj4D,EAAOo3D,OAAS,EAC3Ba,EAAM,GAAKj4D,EAAOo3D,KAClBa,EAAM,GAAKj4D,EAAOq3D,WAAa,GAC/BY,EAAM,GAAKj4D,EAAOq3D,WAAa,GAC/BY,EAAM,GAAKj4D,EAAOq3D,WAAa,EAC/BY,EAAM,GAAKj4D,EAAOq3D,SAClBY,EAAM,GAAKj4D,EAAOxzB,SAAW,GAC7ByrF,EAAM,GAAKj4D,EAAOxzB,SAAW,GAC7ByrF,EAAM,IAAMj4D,EAAOxzB,SAAW,EAC9ByrF,EAAM,IAAMj4D,EAAOxzB,OACZyrF,CACX,KCZWC,wBACX,SAAWA,GACPA,EAAYA,EAAkB,KAAI,GAAK,OACvCA,EAAYA,EAAqB,QAAI,GAAK,UAC1CA,EAAYA,EAAyB,YAAI,GAAK,cAC9CA,EAAYA,EAAyB,YAAI,GAAK,cAC9CA,EAAYA,EAAsB,SAAI,GAAK,UAC9C,CAND,CAMGA,IAAgBA,EAAc,CAAC,IAE3B,MAAMC,UAAoB,IAC7BvjF,KACAwjF,MACAC,OACAC,IAEAC,mBAEAC,yBAEAC,WAEAC,mBAMAC,WACAC,OACAC,UACAxjF,YAAY0tB,GACRtmB,MAAM,IACCsmB,EACHmyD,MAAQz9E,IACJlC,KAAK6iF,MAAQF,EAAYY,SACzB/1D,EAAKmyD,QAAQz9E,EAAI,IAGzBlC,KAAK8iF,OAASt1D,EAAKs1D,OACnB9iF,KAAK+iF,IAAMtuE,SAAS+Y,EAAK5zB,GAAI,IAC7BoG,KAAKX,KAAOmuB,EAAKnuB,KACjBW,KAAK6iF,MAAQr1D,EAAKq1D,MAClB7iF,KAAKgjF,mBAAqBlC,EAC1B9gF,KAAKkjF,WAAaljF,KAAK8iF,OAAO1B,wBAC9BphF,KAAKmjF,mBAAqBnjF,KAAKkjF,WAC/BljF,KAAKojF,WAAalqF,KAAK+xE,MACvBjrE,KAAKqjF,OAAS71D,EAAK61D,OACnBrjF,KAAKsjF,UAAY91D,EAAK81D,UACtBtjF,KAAK7B,QAAS,OAAK6B,KAAK7B,QAAQ,KAC5B6B,KAAKwjF,kBAAkB,GAE/B,CAQAvlF,sBACA,CAIAA,eAAelD,EAAKiH,EAAU,CAAC,GAG3B,IAFAjH,EAAMA,EAAIynF,UAEgB,IAAnBznF,EAAI6T,YAAkB,CAMzB,GAJgC,IAA5B5O,KAAKgjF,0BACChjF,KAAKyjF,0BAA0BzhF,GAGrB,SAAhBhC,KAAKsJ,OACL,OAGJ,MAAMo6E,EAASzqF,KAAKkN,IAAInG,KAAKgjF,mBAAoBhjF,KAAK8iF,OAAOxB,eHpD5C,GGoD4EvmF,EAAI9D,QAC3F2qF,EAAQ5hF,KAAK2jF,eACnB3jF,KAAKsjF,UAAU,CACXvgF,KAAMw+E,EAAU9V,KAChBoW,KAAMD,EACNE,SAAU9hF,KAAK+iF,IACf9rF,OAAQysF,GACT3oF,EAAIzD,SAAS,EAAGosF,IACnB1jF,KAAKgjF,oBAAsBU,EAC3B3oF,EAAIwnF,QAAQmB,EAChB,CACJ,CAIAzlF,kBACI+B,KAAKsjF,UAAU,CACXvgF,KAAMw+E,EAAUqC,aAChB/B,KAAML,EAAKqC,IACX/B,SAAU9hF,KAAK+iF,IACf9rF,OAAQ,GAEhB,CAKAgH,uBACI,MAAM2jF,EAAQ5hF,KAAK2jF,eAAiBnC,EAAKsC,IACzC9jF,KAAKsjF,UAAU,CACXvgF,KAAMw+E,EAAUqC,aAChB/B,KAAMD,EACNE,SAAU9hF,KAAK+iF,IACf9rF,OAAQ,GAEhB,CAKAgH,sBACA,CAMAA,gCAAgC+D,EAAU,CAAC,GACvC,GAAIhC,KAAKgjF,mBAAqB,EAC1B,OAEJ,IAAIj9E,EACAC,EACJ,MAAM9N,EAAQ,KACU,SAAhB8H,KAAKsJ,OACLtD,EAAO,IAAI,KAAU,iBLnHL,qBKuHhBD,GACJ,EAEJ/D,EAAQmd,QAAQE,iBAAiB,QAASnnB,GAC1C,UACU,IAAI4N,SAAQ,CAAC4iC,EAAUF,KACzBxoC,KAAKijF,yBAA2B,KAC5Bv6C,GAAU,EAEd1iC,EAASwiC,EACTziC,EAAU2iC,CAAQ,GAE1B,CACA,QACI1mC,EAAQmd,QAAQC,oBAAoB,QAASlnB,EACjD,CACJ,CAIA6rF,mBAAmBt5D,GACfzqB,KAAKrH,KAAKH,MAAM,sCAAuCwH,KAAK+iF,KAC5D/iF,KAAKgkF,aAAav5D,EAAOo3D,MAEzB,MAAMoC,EAAYjkF,KAAKgjF,mBACvBhjF,KAAKgjF,oBAAsBv4D,EAAOxzB,OAEhB,IAAdgtF,GAAmBx5D,EAAOxzB,OAAS,GACnC+I,KAAKijF,4BAEb,CAIAhlF,iBAAiBwsB,EAAQ23D,GAIrB,GAHApiF,KAAKrH,KAAKH,MAAM,6BAA8BwH,KAAK+iF,KACnD/iF,KAAKgkF,aAAav5D,EAAOo3D,MAErB7hF,KAAKmjF,mBAAqB14D,EAAOxzB,OACjC,MAAM,IAAI,KAAU,0BAA2BwpF,EAA0B,CAAEwD,UAAWjkF,KAAKmjF,mBAAoBe,KAAMz5D,EAAOxzB,SAEhI,MAAMmb,QAAagwE,IACnBpiF,KAAKmjF,oBAAsB14D,EAAOxzB,OAClC+I,KAAKmkF,WAAW/xE,EACpB,CAIA4xE,aAAapC,IACJA,EAAQJ,EAAK4C,OAAS5C,EAAK4C,KACxBpkF,KAAK6iF,QAAUF,EAAY0B,UAC3BrkF,KAAK6iF,MAAQF,EAAY2B,cAG5B1C,EAAQJ,EAAKsC,OAAStC,EAAKsC,KAC5B9jF,KAAKukF,oBAEJ3C,EAAQJ,EAAKqC,OAASrC,EAAKqC,KAC5B7jF,KAAK6hE,OAEb,CAOA8hB,eACI,OAAQ3jF,KAAK6iF,OACT,KAAKF,EAAY6B,KAEb,OADAxkF,KAAK6iF,MAAQF,EAAY0B,QAClB7C,EAAKiD,IAChB,KAAK9B,EAAY+B,YAEb,OADA1kF,KAAK6iF,MAAQF,EAAY2B,YAClB9C,EAAK4C,IAChB,QACI,OAAO,EAEnB,CAIAZ,mBAEI,MAAM5B,EAAQ5hF,KAAK2jF,eAIb1Y,EAAM/xE,KAAK+xE,MACX0Z,EAAM3kF,KAAKqjF,SAKjB,GAJc,IAAVzB,GAAe+C,EAAM,GAAK1Z,EAAMjrE,KAAKojF,WAAmB,EAANuB,IAElD3kF,KAAKkjF,WAAajqF,KAAKkN,IAAsB,EAAlBnG,KAAKkjF,WAAgBljF,KAAK8iF,OAAOzB,sBAE5DrhF,KAAKmjF,oBAAsBnjF,KAAKkjF,YAAwB,IAAVtB,EAE9C,OAGJ,MAAMgD,EAAQ5kF,KAAKkjF,WAAaljF,KAAKmjF,mBACrCnjF,KAAKmjF,mBAAqBnjF,KAAKkjF,WAE/BljF,KAAKojF,WAAanY,EAElBjrE,KAAKsjF,UAAU,CACXvgF,KAAMw+E,EAAUqC,aAChB/B,KAAMD,EACNE,SAAU9hF,KAAK+iF,IACf9rF,OAAQ2tF,GAEhB,EChPJ,MAAMC,EAAoB,eAEnB,MAAMC,EACT9J,SAAW6J,EACXE,MACAjlF,YAAY0tB,EAAO,CAAC,GAChBxtB,KAAK+kF,MAAQv3D,CACjB,CACAw3D,kBAAkBx3D,GACd,OAAO,IAAIy3D,EAAW,IACfjlF,KAAK+kF,SACLv3D,GAEX,EAEG,MAAMy3D,EACTjK,SAAW6J,EACX1mF,OACAo/E,KACAuF,OACAnqF,IAEAusF,gBAEAC,aAEAC,SAEAC,WAEAC,WAEAX,IAEAY,OACAC,YACAC,aAEAC,kBAEAC,mBACAC,iBACAC,YACA/lF,YAAY0tB,GACRxtB,KAAKulF,OAA4B,aAAnB/3D,EAAK5K,UACnB5iB,KAAK8iF,OAAS,IAAK/B,KAAkBvzD,GACrCxtB,KAAKrH,IAAMqH,KAAK8iF,OAAOnqF,IL5CxB,SAAsBmqF,GACzB,GAAIA,EAAO7B,mBAAqB,EAC5B,MAAM,IAAI,KAAU,uCAAwCN,GAEhE,GAAImC,EAAO5B,kBAAoB,EAC3B,MAAM,IAAI,KAAU,gDAAiDP,GAEzE,GAAImC,EAAO3B,mBAAqB,EAC5B,MAAM,IAAI,KAAU,iDAAkDR,GAE1E,GAAImC,EAAO1B,wBAA0BN,EACjC,MAAM,IAAI,KAAU,yDAA0DH,GAElF,GAAImC,EAAOzB,oBAAsByB,EAAO1B,wBACpC,MAAM,IAAI,KAAU,sEAAuET,GAE/F,GAAImC,EAAOzB,oBAAsB,GAAK,GAAK,EACvC,MAAM,IAAI,KAAU,yDAA0DV,GAElF,GAAImC,EAAOxB,eAAiB,KACxB,MAAM,IAAI,KAAU,iDAAkDX,EAE9E,CKuBQmF,CAAa9lF,KAAK8iF,QAClB9iF,KAAKklF,gBAAkB,IAAIjmE,gBAC3Bjf,KAAK4lF,iBAAmBp4D,EAAKo4D,iBAC7B5lF,KAAK6lF,YAAcr4D,EAAKq4D,YACxB7lF,KAAKolF,SAAW,IAAI51E,IACpBxP,KAAK7B,OPJN,SAAkB6D,EAAU,CAAC,GAehC,OAAOs9E,GAdU3oF,IACb,MAAMgP,EAAOhP,EAAOyI,QACpB,GAAY,MAARuG,EACA,MAAO,CAAE0kB,MAAM,GAEnB,GAAkB,MAAd1kB,EAAK8Q,MACL,MAAM9Q,EAAK8Q,MAEf,MAAO,CACH4T,MAAoB,IAAd1kB,EAAK0kB,KAEXxrB,MAAO8G,EAAK9G,MACf,GAEqBmD,EAC9B,COZsBw9E,CAAS,CACnBG,MAAO,KACH3/E,KAAKrH,KAAKH,MAAM,sBAChBwH,KAAKolF,SAAShlF,SAAQ2lF,IAClBA,EAAOnkE,SAAS,GAClB,IAGV5hB,KAAKu9E,KAAOt/E,MAAOE,IAEf,IAAIs9B,EAAQhlB,EADZtY,EAASygF,EAAgBzgF,EAAQ6B,KAAKklF,gBAAgB/lE,OAAQ,CAAEigE,eAAe,IAE/E,IACI,MAAMvT,EAAU,IAAImW,EAAQ7jF,SACtB,OAAK0tE,EAAQma,WAAW5pF,KAAKyvE,IAAU5tE,MAAOE,IAChD,UAAW,MAAM,OAAEssB,EAAM,SAAE23D,KAAcjkF,QAC/B6B,KAAKimF,YAAYx7D,EAAQ23D,EACnC,IAEJ3mD,EAASimD,EAAWwE,iBACxB,CACA,MAAOhkF,GAEH,MAAMikF,EAAUjkF,EAAID,KAChBy+E,EAAgBvwE,IAAIg2E,IACpBnmF,KAAKrH,KAAK8d,MAAM,yBAA0BvU,GAC1Cu5B,EAASimD,EAAWhhB,gBAGpB1gE,KAAKrH,KAAK8d,MAAM,yBAA0BvU,GAC1Cu5B,EAASimD,EAAW0E,eAExB3vE,EAAQvU,CACZ,CACAlC,KAAKrH,KAAKH,MAAM,oBACH,MAATie,EACAzW,KAAK9H,MAAMue,EAAOglB,SAGZz7B,KAAKsD,MAAM,CAAEm4B,UACvB,EAEJz7B,KAAK0lF,kBAAoB,EACzB1lF,KAAK2lF,mBAAqB,EAE1B3lF,KAAKmlF,aAAenlF,KAAKulF,OAAS,EAAI,EACtCvlF,KAAKqlF,WAAa,EAClBrlF,KAAK2kF,IAAM,EACX3kF,KAAKrH,KAAKH,MAAM,iBACZwH,KAAK8iF,OAAO9B,iBACZhhF,KAAKqmF,gBAAgBvhE,OAAMvO,GAAKvW,KAAKrH,KAAK8d,MAAM,sBAAuBF,IAE/E,CACI+vE,cACA,OAAO1tF,MAAM0W,KAAKtP,KAAKolF,SAASzpF,SACpC,CACA4qF,UAAUlnF,GACN,QAA0BwG,IAAtB7F,KAAKylF,aACL,MAAM,IAAI,KAAU,wBAAyB5E,GAEjD,QAAyBh7E,IAArB7F,KAAKwlF,YACL,MAAM,IAAI,KAAU,uBAAwB5E,GAEhD,MAAMhnF,EAAKoG,KAAKmlF,aAGhB,GAFAnlF,KAAKmlF,cAAgB,EAEjBnlF,KAAK2lF,oBAAsB3lF,KAAK8iF,OAAO3B,mBACvC,MAAM,IAAI,KAAU,gCN1GiB,uCM4GzCnhF,KAAKrH,KAAKH,MAAM,4BAA6BoB,GAC7C,MAAMmsF,EAAS/lF,KAAKwmF,WAAW5sF,EAAIyF,EAAMsjF,EAAY6B,KAAM,YAK3D,OAJAxkF,KAAKolF,SAASvpF,IAAIjC,EAAImsF,GACtB/lF,KAAK2lF,qBAELI,EAAOvC,mBACAuC,CACX,CASA9nF,aACI,QAA0B4H,IAAtB7F,KAAKylF,aACL,MAAM,IAAI,KAAU,wBAAyB5E,GAEjD,QAAyBh7E,IAArB7F,KAAKwlF,YACL,MAAM,IAAI,KAAU,uBAAwB5E,GAGhD,QAAwB/6E,IAApB7F,KAAKslF,WAA0B,CAE/B,IAAI58C,EAAW,OACf1oC,KAAKslF,WAAa,CACd1rF,GAAIoG,KAAKqlF,aAETz/E,QAAS,IAAIE,SAAQ,CAACC,EAASC,KAC3B,MAAMsE,EAAS,KACXtE,EAAO,IAAI,KAAU,uBAAwB46E,GAAwB,EAEzE5gF,KAAKklF,gBAAgB/lE,OAAOE,iBAAiB,QAAS/U,EAAQ,CAAES,MAAM,IACtE29B,EAAW,KACP1oC,KAAKklF,gBAAgB/lE,OAAOC,oBAAoB,QAAS9U,GACzDvE,GAAS,CACZ,IAELA,QAAS2iC,GAGb,MAAM/4B,EAAQzW,KAAK+xE,MACnBjrE,KAAKymF,SAASzmF,KAAKslF,WAAW1rF,IAE9B,UACUoG,KAAKslF,WAAW1/E,OAC1B,CACA,eAEW5F,KAAKslF,UAChB,CAEA,MAAM99E,EAAMtO,KAAK+xE,MACjBjrE,KAAK2kF,IAAMn9E,EAAMmI,CACrB,YAGU3P,KAAKslF,WAAW1/E,QAE1B,OAAO5F,KAAK2kF,GAChB,CAQAtB,SACI,OAAOrjF,KAAK2kF,GAChB,CAIA1mF,YAAY+D,EAAU,CAAC,GACnB,GAAIhC,KAAKklF,gBAAgB/lE,OAAOG,QAE5B,OAEJ,MAAMmc,EAASz5B,GAASy5B,QAAUimD,EAAWwE,kBAC7ClmF,KAAKrH,KAAKH,MAAM,wBAAyBijC,GACzCz5B,EAAQmd,OAASnd,EAAQmd,QAAUunE,YAAYhsD,QA1MjC,KA2Md,UACU50B,QAAQS,IAAI,IAAIvG,KAAKolF,SAASzpF,UAAUoU,KAAI9R,MAAOomB,GAAMA,EAAE/gB,MAAMtB,MAEvEhC,KAAK2mF,WAAWlrD,GAChBz7B,KAAK4mF,aACT,CACA,MAAO1kF,GACHlC,KAAK9H,MAAMgK,EACf,CACJ,CACAhK,MAAMgK,EAAKu5B,GACP,IAAIz7B,KAAKklF,gBAAgB/lE,OAAOG,QAAhC,CAIAmc,EAASA,GAAUimD,EAAW0E,cAE9BpmF,KAAKrH,KAAK8d,MAAM,iCAAkCglB,EAAQv5B,GAE1D,IAAK,MAAM6jF,KAAU/lF,KAAKolF,SAASzpF,SAC/BoqF,EAAO7tF,MAAMgK,GAGjBlC,KAAK2mF,WAAWlrD,GAChBz7B,KAAK4mF,aAVL,CAWJ,CACAC,WACI,OAAO7mF,KAAKklF,gBAAgB/lE,OAAOG,OACvC,CAIAsnE,cAEI5mF,KAAKklF,gBAAgBhtF,QAErB8H,KAAK7B,OAAOqJ,KAChB,CAEAg/E,WAAW5sF,EAAIyF,EAAMwjF,EAAOjgE,GACxB,GAA6B,MAAzB5iB,KAAKolF,SAASzkF,IAAI/G,GAClB,MAAM,IAAI,KAAU,wBAAyB0mF,EAA2B,CAAE1mF,OAE9E,MAAMmsF,EAAS,IAAInD,EAAY,CAC3BhpF,GAAIA,EAAG6Y,WACPpT,OACAwjF,QACAjgE,YACA0gE,UAAWtjF,KAAKsjF,UAAUlnF,KAAK4D,MAC/B2/E,MAAO,KACH3/E,KAAK8mF,YAAYltF,GACjBoG,KAAK6lF,cAAcE,EAAO,EAE9BptF,IAAK0lF,EAAO,gBAAgBz7D,KAAahpB,KACzCkpF,OAAQ9iF,KAAK8iF,OACbO,OAAQrjF,KAAKqjF,OAAOjnF,KAAK4D,QAE7B,OAAO+lF,CACX,CAKAe,YAAYltF,GACJoG,KAAKulF,UAAY3rF,EAAK,GAAM,GAC5BoG,KAAK0lF,oBAGL1lF,KAAK2lF,qBAET3lF,KAAKolF,SAASr4E,OAAOnT,EACzB,CACAqE,sBACI,MAAM8oF,EAAe,IAAIjhF,SAAQ,CAAC4iC,EAAU1iC,KAAahG,KAAKklF,gBAAgB/lE,OAAOE,iBAAiB,QAASrZ,EAAQ,CAAE+E,MAAM,GAAO,IAEtI,IADA/K,KAAKrH,KAAKH,MAAM,sCAAuCwH,KAAK8iF,OAAO7B,qBACtD,CACT,IAAIhyD,EACJ,UACUnpB,QAAQg1B,KAAK,CACfisD,EACA,IAAIjhF,SAASC,IACTkpB,EAAYH,WAAW/oB,EAAS/F,KAAK8iF,OAAO7B,kBAAkB,MAGtEjhF,KAAKgnF,OAAOliE,OAAMvO,GAAKvW,KAAKrH,KAAK8d,MAAM,iBAAkBF,IAC7D,CACA,MAAOA,GAGH,YADA+2B,cAAcre,EAElB,CACJ,CACJ,CACAhxB,kBAAkBwsB,EAAQ23D,GACtB,MAAM,SAAEN,EAAQ,KAAE/+E,EAAI,OAAE9L,GAAWwzB,EAEnC,GADAzqB,KAAKrH,KAAKH,MAAM,oBAAqBmpF,EAAgBl3D,IACpC,IAAbq3D,EACA,OAAQ/+E,GACJ,KAAKw+E,EAAU0F,KAGP,YADAjnF,KAAKknF,WAAWz8D,GAGxB,KAAK82D,EAAU4F,OAGP,YADAnnF,KAAKonF,aAAanwF,GAG1B,QAEI,MAAM,IAAI,KAAU,qBAAsBkpF,EAAmB,CAAE11D,gBAIvE,OAAQA,EAAO1nB,MACX,KAAKw+E,EAAU9V,KACf,KAAK8V,EAAUqC,aAGP,kBADM5jF,KAAKqnF,oBAAoB58D,EAAQ23D,GAG/C,QAEI,MAAM,IAAI,KAAU,qBAAsBjC,EAAmB,CAAE11D,WAG/E,CACAy8D,WAAWz8D,GAEP,GAAIA,EAAOo3D,OAASL,EAAKiD,IACrBzkF,KAAKrH,KAAKH,MAAM,kCAAmCiyB,EAAOxzB,QAC1D+I,KAAKymF,SAASh8D,EAAOxzB,OAAQuqF,EAAK4C,SAEjC,IAAI35D,EAAOo3D,OAASL,EAAK4C,IAM1B,MAAM,IAAI,KAAU,qBAAsBjE,EAAmB,CAAE11D,WAL/DzqB,KAAKrH,KAAKH,MAAM,mCAAoCiyB,EAAOxzB,QAC3D+I,KAAKsnF,mBAAmB78D,EAAOxzB,OAKnC,CACJ,CACAqwF,mBAAmBC,GACf,QAAwB1hF,IAApB7F,KAAKslF,WAEL,MAAM,IAAI,KAAU,qBAAsBlF,GAE9C,GAAIpgF,KAAKslF,WAAW1rF,KAAO2tF,EAEvB,MAAM,IAAI,KAAU,4BAA8BlH,GAGtDrgF,KAAKslF,WAAWv/E,SACpB,CACAqhF,aAAa3rD,GACTz7B,KAAKrH,KAAKH,MAAM,4BAA6BkpF,EAAWjmD,IAAW,WACnEz7B,KAAKylF,aAAehqD,EAGpB,IAAK,MAAMsqD,KAAU/lF,KAAKolF,SAASzpF,SAC/BoqF,EAAOlkB,QAEX7hE,KAAK4mF,aACT,CACA3oF,0BAA0BwsB,EAAQ23D,GAC9B,MAAM,SAAEN,EAAQ,KAAED,EAAI,KAAE9+E,GAAS0nB,GAC5Bo3D,EAAOL,EAAKiD,OAASjD,EAAKiD,KAC3BzkF,KAAKwnF,eAAe1F,GAExB,MAAMiE,EAAS/lF,KAAKolF,SAASzkF,IAAImhF,GACjC,QAAej8E,IAAXkgF,EAaJ,OAAQhjF,GACJ,KAAKw+E,EAAUqC,aAEX,YADAmC,EAAOhC,mBAAmBt5D,GAG9B,KAAK82D,EAAU9V,KACX,QAAiB5lE,IAAbu8E,EACA,MAAM,IAAI7pF,MAAM,eAGpB,kBADMwtF,EAAO0B,WAAWh9D,EAAQ23D,GAGpC,QACI,MAAM,IAAI7pF,MAAM,oBAzBpB,GAAIwK,IAASw+E,EAAU9V,KAAM,CAEzB,GADAzrE,KAAKrH,MAAM,mCAAoCmpF,QAC9Bj8E,IAAbu8E,EACA,MAAM,IAAI7pF,MAAM,qBAEd6pF,GACV,MAEIpiF,KAAKrH,MAAM,iCAAkCmpF,EAmBzD,CACA0F,eAAe5tF,GACX,GAAIoG,KAAKulF,UAAY3rF,EAAK,GAAM,GAC5B,MAAM,IAAI,KAAU,6BAA8B4mF,GAEtD,GAAIxgF,KAAKolF,SAASj1E,IAAIvW,GAClB,OAGJ,GADAoG,KAAKrH,KAAKH,MAAM,4BAA6BoB,QACpBiM,IAArB7F,KAAKwlF,YAQL,YANAxlF,KAAKsjF,UAAU,CACXvgF,KAAMw+E,EAAUqC,aAChB/B,KAAML,EAAKqC,IACX/B,SAAUloF,EACV3C,OAAQ,IAKhB,GAAI+I,KAAK0lF,mBAAqB1lF,KAAK8iF,OAAO5B,kBAQtC,OAPAlhF,KAAKrH,MAAM,0DACXqH,KAAKsjF,UAAU,CACXvgF,KAAMw+E,EAAUqC,aAChB/B,KAAML,EAAKqC,IACX/B,SAAUloF,EACV3C,OAAQ,IAKhB,MAAM8uF,EAAS/lF,KAAKwmF,WAAW5sF,OAAIiM,EAAW88E,EAAY+B,YAAa,WACvE1kF,KAAK0lF,oBAEL1lF,KAAKolF,SAASvpF,IAAIjC,EAAImsF,GACtB/lF,KAAK4lF,mBAAmBG,EAC5B,CACAzC,UAAU74D,EAAQrY,GAEd,GADApS,KAAKrH,KAAKH,MAAM,mBAAoBmpF,EAAgBl3D,IAChDA,EAAO1nB,OAASw+E,EAAU9V,KAAM,CAChC,QAAa5lE,IAATuM,EACA,MAAM,IAAI,KAAU,gBAAiB+tE,GAEzCngF,KAAK7B,OAAOzG,KAAK+qF,EAAah4D,IAC9BzqB,KAAK7B,OAAOzG,KAAK0a,EACrB,MAEIpS,KAAK7B,OAAOzG,KAAK+qF,EAAah4D,GAEtC,CACAg8D,SAASc,EAAQ1F,EAAOL,EAAKiD,KACrB5C,IAASL,EAAKiD,IACdzkF,KAAKrH,KAAKH,MAAM,iCAAkC+uF,GAGlDvnF,KAAKrH,KAAKH,MAAM,kCAAmC+uF,GAEvDvnF,KAAKsjF,UAAU,CACXvgF,KAAMw+E,EAAU0F,KAChBpF,OACAC,SAAU,EACV7qF,OAAQswF,GAEhB,CACAZ,WAAWlrD,EAASimD,EAAWwE,mBAC3BlmF,KAAKrH,MAAM,2BAA4B+oF,EAAWjmD,IAClDz7B,KAAKwlF,YAAc/pD,EACnBz7B,KAAKsjF,UAAU,CACXvgF,KAAMw+E,EAAU4F,OAChBtF,KAAM,EACNC,SAAU,EACV7qF,OAAQwkC,GAEhB,ECpeG,SAASisD,EAAMl6D,EAAO,CAAC,GAC1B,MAAO,IAAM,IAAIs3D,EAAMt3D,EAC3B,qCCJO,SAAS2+C,EAAYn6D,GACxB,GAAW,MAAPA,EAAa,CACb,GAAoC,mBAAzBA,EAAIxb,OAAOiW,UAClB,OAAOuF,EAAIxb,OAAOiW,YAEtB,GAAyC,mBAA9BuF,EAAIxb,OAAOuQ,eAClB,OAAOiL,EAAIxb,OAAOuQ,iBAEtB,GAAwB,mBAAbiL,EAAIrM,KACX,OAAOqM,CAEf,CACA,MAAM,IAAIzZ,MAAM,0CACpB,oFCyBA,IAlCA,SAAiB4F,EAAQ0O,GACrB,GAHsC,MAGlB1O,EAHP3H,OAAOuQ,eAIhB,OAAO,kBACH,UAAW,MAAM4gF,KAASxpF,QAChB0O,EAAG86E,SACHA,CAEb,CALM,GAQX,MAAMC,GAAW,OAAKzpF,IAChB,MAAEU,EAAK,KAAEwrB,GAASu9D,EAASjiF,OACjC,IAAa,IAAT0kB,EACA,OAAQ,YAAe,CAAhB,GAEX,MAAM7U,EAAM3I,EAAGhO,GACf,GAAyB,mBAAd2W,GAAKqP,KACZ,OAAO,wBACGhmB,EACN,UAAW,MAAM4U,KAAOm0E,QACd/6E,EAAG4G,SACHA,CAEb,CANM,GAQX,MAAMo0E,EAAOh7E,EACb,OAAO,kBACGhO,EACN,IAAK,MAAM4U,KAAOm0E,EACdC,EAAKp0E,SACCA,CAEb,CANM,EAOX,sECpCA,MAAMoiC,EACFl/C,OACA++C,KACAC,IACAC,IACAjwC,KACA7F,YAAY21C,GACR,KAAMA,EAAM,IAA4B,IAApBA,EAAM,EAAKA,GAC3B,MAAM,IAAIl9C,MAAM,qDAEpByH,KAAKrJ,OAAS,IAAIiC,MAAM68C,GACxBz1C,KAAK01C,KAAOD,EAAM,EAClBz1C,KAAK21C,IAAM,EACX31C,KAAK41C,IAAM,EACX51C,KAAK2F,KAAO,IAChB,CACAjO,KAAK0a,GACD,YAA8BvM,IAA1B7F,KAAKrJ,OAAOqJ,KAAK21C,OAGrB31C,KAAKrJ,OAAOqJ,KAAK21C,KAAOvjC,EACxBpS,KAAK21C,IAAO31C,KAAK21C,IAAM,EAAK31C,KAAK01C,MAC1B,EACX,CACAt2C,QACI,MAAM5H,EAAOwI,KAAKrJ,OAAOqJ,KAAK41C,KAC9B,QAAa/vC,IAATrO,EAKJ,OAFAwI,KAAKrJ,OAAOqJ,KAAK41C,UAAO/vC,EACxB7F,KAAK41C,IAAO51C,KAAK41C,IAAM,EAAK51C,KAAK01C,KAC1Bl+C,CACX,CACA+5B,UACI,YAAiC1rB,IAA1B7F,KAAKrJ,OAAOqJ,KAAK41C,IAC5B,EAEG,MAAMw2B,EACT30E,KACAg+C,IACA9kB,KACAE,KACA/wB,YAAYkC,EAAU,CAAC,GACnBhC,KAAKy1C,IAAMzzC,EAAQqqE,YAAc,GACjCrsE,KAAK2wB,KAAO,IAAIklB,EAAU71C,KAAKy1C,KAC/Bz1C,KAAK6wB,KAAO7wB,KAAK2wB,KACjB3wB,KAAKvI,KAAO,CAChB,CACA60E,cAAct6D,GACV,OAAuB,MAAnBA,GAAKpD,WACEoD,EAAIpD,WAER,CACX,CACAlX,KAAK+b,GAID,GAHkB,MAAdA,GAAK5U,QACLmB,KAAKvI,MAAQuI,KAAKssE,cAAc74D,EAAI5U,SAEnCmB,KAAK2wB,KAAKj5B,KAAK+b,GAAM,CACtB,MAAMqiC,EAAO91C,KAAK2wB,KAClB3wB,KAAK2wB,KAAOmlB,EAAKnwC,KAAO,IAAIkwC,EAAU,EAAI71C,KAAK2wB,KAAKh6B,OAAOM,QAC3D+I,KAAK2wB,KAAKj5B,KAAK+b,EACnB,CACJ,CACArU,QACI,IAAIqU,EAAMzT,KAAK6wB,KAAKzxB,QACpB,QAAYyG,IAAR4N,GAAwC,MAAlBzT,KAAK6wB,KAAKlrB,KAAe,CAC/C,MAAMA,EAAO3F,KAAK6wB,KAAKlrB,KACvB3F,KAAK6wB,KAAKlrB,KAAO,KACjB3F,KAAK6wB,KAAOlrB,EACZ8N,EAAMzT,KAAK6wB,KAAKzxB,OACpB,CAIA,OAHkB,MAAdqU,GAAK5U,QACLmB,KAAKvI,MAAQuI,KAAKssE,cAAc74D,EAAI5U,QAEjC4U,CACX,CACA8d,UACI,OAAOvxB,KAAK2wB,KAAKY,SACrB,6NC/DJ,MAdA,SAAepzB,GACX,GAHsC,MAGlBA,EAHP3H,OAAOuQ,eAIhB,MAAO,WACH,UAAW,MAAMQ,KAASpJ,EACtB,OAAOoJ,CAGd,EALM,GAOX,IAAK,MAAMA,KAASpJ,EAChB,OAAOoJ,CAGf,ECgCA,MA7CA,SAAepJ,EAAQ1G,EAAO,GAE1B,OADAA,EAAO4N,OAAO5N,GAHwB,MAIlB0G,EAJP3H,OAAOuQ,eAKR9I,kBACJ,IAAI6pF,EAAS,GAIb,GAHIrwF,EAAO,IACPA,EAAO,GAEPA,IAASwB,KAAKs3C,MAAM94C,GACpB,MAAM,IAAIc,MAAM,iCAEpB,UAAW,MAAMovF,KAASxpF,EAEtB,IADA2pF,EAAOpwF,KAAKiwF,GACLG,EAAO7wF,QAAUQ,SACdqwF,EAAOhvF,MAAM,EAAGrB,GACtBqwF,EAASA,EAAOhvF,MAAMrB,GAG9B,KAAOqwF,EAAO7wF,OAAS,SACb6wF,EAAOhvF,MAAM,EAAGrB,GACtBqwF,EAASA,EAAOhvF,MAAMrB,EAE9B,CAnBO,GAqBH,YACJ,IAAIqwF,EAAS,GAIb,GAHIrwF,EAAO,IACPA,EAAO,GAEPA,IAASwB,KAAKs3C,MAAM94C,GACpB,MAAM,IAAIc,MAAM,iCAEpB,IAAK,MAAMovF,KAASxpF,EAEhB,IADA2pF,EAAOpwF,KAAKiwF,GACLG,EAAO7wF,QAAUQ,SACdqwF,EAAOhvF,MAAM,EAAGrB,GACtBqwF,EAASA,EAAOhvF,MAAMrB,GAG9B,KAAOqwF,EAAO7wF,OAAS,SACb6wF,EAAOhvF,MAAM,EAAGrB,GACtBqwF,EAASA,EAAOhvF,MAAMrB,EAE9B,CAnBO,EAoBX,ECzCewG,eAAgB8pF,EAAc5pF,EAAQ1G,EAAO,GACxD,UAAW,MAAM6pB,KAAS,EAAMnjB,EAAQ1G,GAAO,CAC3C,MAAMqwF,EAASxmE,EAAMvR,KAAI9R,MAAO1C,GACrBA,IAAIspB,MAAKhmB,IAAS,CAAGquB,IAAI,EAAMruB,YAAUqD,IAAO,CAAGgrB,IAAI,EAAOhrB,YAEzE,IAAK,IAAI5G,EAAI,EAAGA,EAAIwsF,EAAO7wF,OAAQqE,IAAK,CACpC,MAAMuT,QAAei5E,EAAOxsF,GAC5B,IAAIuT,EAAOqe,GAIP,MAAMre,EAAO3M,UAHP2M,EAAOhQ,KAKrB,CACJ,CACJ,gBCpBA,MACampF,EAAY,CAAChmF,EAAU,CAAC,KACjC,MAAMimF,EAAYjmF,EAAQimF,WAFH,OAGvB,OAAOhqF,gBAAiCE,GACpC,IAAI6Y,EAAO,IAAI,IACXkxE,EAAgB,EAChBC,GAAU,EACd,UAAW,MAAMxxF,KAAUwH,EAGvB,IAFA6Y,EAAKwT,OAAO7zB,GACZuxF,GAAiBvxF,EAAOM,OACjBixF,GAAiBD,GAIpB,SAHMjxE,EAAKle,MAAM,EAAGmvF,GACpBE,GAAU,EAENF,IAAcjxE,EAAK/f,OACnB+f,EAAO,IAAI,IACXkxE,EAAgB,MAEf,CACD,MAAME,EAAQ,IAAI,IAClBA,EAAM59D,OAAOxT,EAAKwrE,QAAQyF,IAC1BjxE,EAAOoxE,EAEPF,GAAiBD,CACrB,GAGHE,GAAWD,EAAgB,WAEtBlxE,EAAK1f,SAAS,EAAG4wF,GAE/B,CAAC,MC1BMzc,EAsHA4c,EAiDAC,yBAtKX,SAAW7c,GACP,IAAI8c,EASAC,EAcAjd,GAtBJ,SAAWgd,GACPA,EAAc,IAAI,MAClBA,EAAoB,UAAI,YACxBA,EAAe,KAAI,OACnBA,EAAmB,SAAI,WACvBA,EAAkB,QAAI,UACtBA,EAAoB,UAAI,WAC3B,CAPD,CAOGA,EAAW9c,EAAK8c,WAAa9c,EAAK8c,SAAW,CAAC,IAEjD,SAAWC,GACPA,EAAiBA,EAAsB,IAAI,GAAK,MAChDA,EAAiBA,EAA4B,UAAI,GAAK,YACtDA,EAAiBA,EAAuB,KAAI,GAAK,OACjDA,EAAiBA,EAA2B,SAAI,GAAK,WACrDA,EAAiBA,EAA0B,QAAI,GAAK,UACpDA,EAAiBA,EAA4B,UAAI,GAAK,WACzD,CAPD,CAOGA,IAAqBA,EAAmB,CAAC,IAC5C,SAAWD,GACPA,EAASjd,MAAQ,KACN,QAAYkd,EAE1B,CAJD,CAIGD,EAAW9c,EAAK8c,WAAa9c,EAAK8c,SAAW,CAAC,IAEjD9c,EAAKH,MAAQ,KACK,MAAVC,IACAA,GAAS,SAAQ,CAACv5D,EAAK4gB,EAAGm4C,EAAO,CAAC,KAgB9B,IAf6B,IAAzBA,EAAKS,iBACL54C,EAAEgvC,OAEU,MAAZ5vD,EAAI/W,OACJ23B,EAAE6pC,OAAO,GACTgP,EAAK8c,SAASjd,QAAQ1oE,OAAOoP,EAAI/W,KAAM23B,IAE3B,MAAZ5gB,EAAIy5D,OACJ74C,EAAE6pC,OAAO,IACT7pC,EAAEza,MAAMnG,EAAIy5D,OAEI,MAAhBz5D,EAAIy2E,WACJ71D,EAAE6pC,OAAO,IACT7pC,EAAE0qC,OAAOtrD,EAAIy2E,WAEK,MAAlBz2E,EAAI02E,WACJ,IAAK,MAAM7pF,KAASmT,EAAI02E,WACpB91D,EAAE6pC,OAAO,IACT7pC,EAAE0qC,OAAOz+D,GAGG,MAAhBmT,EAAI22E,WACJ/1D,EAAE6pC,OAAO,IACT7pC,EAAE0qC,OAAOtrD,EAAI22E,WAEC,MAAd32E,EAAI42E,SACJh2D,EAAE6pC,OAAO,IACT7pC,EAAE0qC,OAAOtrD,EAAI42E,SAED,MAAZ52E,EAAI+O,OACJ6R,EAAE6pC,OAAO,IACT7pC,EAAE6pC,OAAOzqD,EAAI+O,OAEA,MAAb/O,EAAI62E,QACJj2D,EAAE6pC,OAAO,IACT4rB,EAAS/c,QAAQ1oE,OAAOoP,EAAI62E,MAAOj2D,KAEV,IAAzBm4C,EAAKS,iBACL54C,EAAEkvC,QACN,IACD,CAACh3C,EAAQ7zB,KACR,MAAM+a,EAAM,CACR02E,WAAY,IAEVlhF,EAAgB,MAAVvQ,EAAiB6zB,EAAO9uB,IAAM8uB,EAAO7T,IAAMhgB,EACvD,KAAO6zB,EAAO7T,IAAMzP,GAAK,CACrB,MAAM0/C,EAAMp8B,EAAO2xC,SACnB,OAAQvV,IAAQ,GACZ,KAAK,EACDl1C,EAAI/W,KAAOwwE,EAAK8c,SAASjd,QAAQlkE,OAAO0jB,GACxC,MACJ,KAAK,EACD9Y,EAAIy5D,KAAO3gD,EAAO3S,QAClB,MACJ,KAAK,EACDnG,EAAIy2E,SAAW39D,EAAOwyC,SACtB,MACJ,KAAK,EACDtrD,EAAI02E,WAAWhxF,KAAKozB,EAAOwyC,UAC3B,MACJ,KAAK,EACDtrD,EAAI22E,SAAW79D,EAAOwyC,SACtB,MACJ,KAAK,EACDtrD,EAAI42E,OAAS99D,EAAOwyC,SACpB,MACJ,KAAK,EACDtrD,EAAI+O,KAAO+J,EAAO2xC,SAClB,MACJ,KAAK,EACDzqD,EAAI62E,MAAQR,EAAS/c,QAAQlkE,OAAO0jB,EAAQA,EAAO2xC,UACnD,MACJ,QACI3xC,EAAOmyC,SAAe,EAAN/V,GAG5B,CACA,OAAOl1C,CAAG,KAGXu5D,GAEXE,EAAK7oE,OAAUoP,IACJ,QAAcA,EAAKy5D,EAAKH,SAEnCG,EAAKrkE,OAAUrM,IACJ,QAAcA,EAAK0wE,EAAKH,QAEtC,CApHD,CAoHGG,IAASA,EAAO,CAAC,IAEpB,SAAW4c,GACP,IAAI9c,EACJ8c,EAAS/c,MAAQ,KACC,MAAVC,IACAA,GAAS,SAAQ,CAACv5D,EAAK4gB,EAAGm4C,EAAO,CAAC,MACD,IAAzBA,EAAKS,iBACL54C,EAAEgvC,OAEa,MAAf5vD,EAAI82E,UACJl2D,EAAE6pC,OAAO,GACT7pC,EAAEyqC,MAAMrrD,EAAI82E,UAEiB,MAA7B92E,EAAI+2E,wBACJn2D,EAAE6pC,OAAO,IACT7pC,EAAEiqC,QAAQ7qD,EAAI+2E,yBAEW,IAAzBhe,EAAKS,iBACL54C,EAAEkvC,QACN,IACD,CAACh3C,EAAQ7zB,KACR,MAAM+a,EAAM,CAAC,EACPxK,EAAgB,MAAVvQ,EAAiB6zB,EAAO9uB,IAAM8uB,EAAO7T,IAAMhgB,EACvD,KAAO6zB,EAAO7T,IAAMzP,GAAK,CACrB,MAAM0/C,EAAMp8B,EAAO2xC,SACnB,OAAQvV,IAAQ,GACZ,KAAK,EACDl1C,EAAI82E,QAAUh+D,EAAOuyC,QACrB,MACJ,KAAK,EACDrrD,EAAI+2E,sBAAwBj+D,EAAO+xC,UACnC,MACJ,QACI/xC,EAAOmyC,SAAe,EAAN/V,GAG5B,CACA,OAAOl1C,CAAG,KAGXu5D,GAEX8c,EAASzlF,OAAUoP,IACR,QAAcA,EAAKq2E,EAAS/c,SAEvC+c,EAASjhF,OAAUrM,IACR,QAAcA,EAAKstF,EAAS/c,QAE1C,CA/CD,CA+CG+c,IAAaA,EAAW,CAAC,IAE5B,SAAWC,GACP,IAAI/c,EACJ+c,EAAShd,MAAQ,KACC,MAAVC,IACAA,GAAS,SAAQ,CAACv5D,EAAK4gB,EAAGm4C,EAAO,CAAC,MACD,IAAzBA,EAAKS,iBACL54C,EAAEgvC,OAEc,MAAhB5vD,EAAIg3E,WACJp2D,EAAE6pC,OAAO,IACT7pC,EAAE3hB,OAAOe,EAAIg3E,YAEY,IAAzBje,EAAKS,iBACL54C,EAAEkvC,QACN,IACD,CAACh3C,EAAQ7zB,KACR,MAAM+a,EAAM,CAAC,EACPxK,EAAgB,MAAVvQ,EAAiB6zB,EAAO9uB,IAAM8uB,EAAO7T,IAAMhgB,EACvD,KAAO6zB,EAAO7T,IAAMzP,GAAK,CACrB,MAAM0/C,EAAMp8B,EAAO2xC,SACnB,GAAQvV,IAAQ,GACP,EACDl1C,EAAIg3E,SAAWl+D,EAAO7Z,cAGtB6Z,EAAOmyC,SAAe,EAAN/V,EAG5B,CACA,OAAOl1C,CAAG,KAGXu5D,GAEX+c,EAAS1lF,OAAUoP,IACR,QAAcA,EAAKs2E,EAAShd,SAEvCgd,EAASlhF,OAAUrM,IACR,QAAcA,EAAKutF,EAAShd,QAE1C,CAxCD,CAwCGgd,IAAaA,EAAW,CAAC,ICpN5B,MAAM1xB,EAAQ,CACVqyB,IAAK,MACLC,UAAW,YACX1zC,KAAM,OACN8yC,SAAU,WACVa,QAAS,UACTC,UAAW,0BAETC,EAAW,CACb,YACA,0BAEEC,EAAoB70E,SAAS,OAAQ,GACrC80E,EAAyB90E,SAAS,OAAQ,GAChD,MAAM+0E,EAIFx7E,iBAAiBy7E,GACb,MAAM/rE,EAAU,SAAc+rE,GACxBr3E,EAAO,IAAIo3E,EAAO,CACpBzmF,KAAM6zD,EAAsB,MAAhBl5C,EAAQziB,KAAeyiB,EAAQziB,KAAKwX,WAAa,QAC7DL,KAAMsL,EAAQ+tD,KACdie,WAAYhsE,EAAQgrE,WACpB3nE,KAAMrD,EAAQqD,KACd8nE,MAAwB,MAAjBnrE,EAAQmrE,MACT,CACEc,KAAMjsE,EAAQmrE,MAAMC,SAAW,GAC/Bc,MAAOlsE,EAAQmrE,MAAME,4BAEvBljF,EACN+iF,OAAQlrE,EAAQkrE,SAIpB,OADAx2E,EAAKy3E,cAAgBnsE,EAAQqD,MAAQ,EAC9B3O,CACX,CACArP,KACAqP,KACAs3E,WACAf,SACAC,OACAC,MACAiB,MACAD,cACA/pF,YAAYkC,EAAU,CAClBe,KAAM,SAEN,MAAM,KAAEA,EAAI,KAAEqP,EAAI,WAAEs3E,EAAU,SAAEf,EAAQ,OAAEC,EAAM,MAAEC,EAAK,KAAE9nE,GAAS/e,EAClE,GAAY,MAARe,IAAiBrE,OAAO/C,OAAOi7D,GAAO/+C,SAAS9U,GAC/C,MAAM,EAAQ,IAAIxK,MAAM,SAAWwK,EAAO,iBAAkB,oBAEhE/C,KAAK+C,KAAOA,GAAQ,OACpB/C,KAAKoS,KAAOA,EACZpS,KAAK2oF,SAAWA,EAChB3oF,KAAK4oF,OAASA,EACd5oF,KAAK0pF,WAAaA,GAAc,GAChC1pF,KAAK6pF,cAAgB,EACrB7pF,KAAK+gB,KAAOA,EACZ/gB,KAAK6oF,MAAQA,CACjB,CACI9nE,SAAKA,GAED/gB,KAAK8pF,MADG,MAAR/oE,EACa/gB,KAAK+pF,cAAgBR,EAAyBD,EAGtC,KAAPvoE,CAEtB,CACIA,WACA,OAAO/gB,KAAK8pF,KAChB,CACAC,cACI,OAAOV,EAASxxE,SAAS7X,KAAK+C,KAClC,CACAinF,aAAavyF,GACTuI,KAAK0pF,WAAWhyF,KAAKD,EACzB,CACAwyF,gBAAgBzoE,GACZxhB,KAAK0pF,WAAWtnE,OAAOZ,EAAO,EAClC,CAIA0oE,WACI,GAAIlqF,KAAK+pF,cAEL,OAAO,GAEX,IAAII,EAAM,GAOV,OANAnqF,KAAK0pF,WAAWtpF,SAAS3I,IACrB0yF,GAAO1yF,CAAI,IAEE,MAAbuI,KAAKoS,OACL+3E,GAAO1xE,OAAOzY,KAAKoS,KAAKnb,SAErBkzF,CACX,CAIAC,UACI,IAAIrnF,EACJ,OAAQ/C,KAAK+C,MACT,IAAK,MACDA,EAAO,eACP,MACJ,IAAK,YACDA,EAAO,qBACP,MACJ,IAAK,OACDA,EAAO,gBACP,MACJ,IAAK,WACDA,EAAO,oBACP,MACJ,IAAK,UACDA,EAAO,mBACP,MACJ,IAAK,yBACDA,EAAO,qBACP,MACJ,QACI,MAAM,EAAQ,IAAIxK,MAAM,SAASwK,kBAAsB,oBAE/D,IAIIge,EAUA8nE,EAdAz2E,EAAOpS,KAAKoS,KAqBhB,OApBiB,MAAbpS,KAAKoS,MAAqC,IAArBpS,KAAKoS,KAAKnb,SAC/Bmb,OAAOvM,GAGM,MAAb7F,KAAK+gB,OACLA,EAA6B,WAArB/gB,KAAK6pF,eAA+B7pF,KAAK+gB,MAAQ,GACrDA,IAASuoE,GAAsBtpF,KAAK+pF,gBACpChpE,OAAOlb,GAEPkb,IAASwoE,GAA0BvpF,KAAK+pF,gBACxChpE,OAAOlb,IAIG,MAAd7F,KAAK6oF,QACLA,EAAQ,CACJC,QAAS9oF,KAAK6oF,MAAMc,KACpBZ,sBAAuB/oF,KAAK6oF,MAAMe,QAGnC,SAAc,CACjB3uF,KAAM8H,EACN0oE,KAAMr5D,EACNq2E,SAAUzoF,KAAK+pF,mBAAgBlkF,EAAY7F,KAAKkqF,WAChDxB,WAAY1oF,KAAK0pF,WACjBf,SAAU3oF,KAAK2oF,SACfC,OAAQ5oF,KAAK4oF,OACb7nE,OACA8nE,SAER,EC9JJ,MAAMl+E,EAAQ,IAAInQ,WAAW,GAUvB6vF,EAAUvrC,IACd,MAAMwrC,EAAQxrC,EAAI1U,MAAM,OACxB,OAAOkgD,EAAQ,IAAI9vF,WAAW8vF,EAAMv6E,KAAIgC,GAAK0C,SAAS1C,EAAG,OAAQpH,GA0B7D,EAAS5M,IACb,GAAIA,aAAavD,YAAqC,eAAvBuD,EAAE+B,YAAYT,KAAuB,OAAOtB,EAC3E,GAAIA,aAAasT,YAAa,OAAO,IAAI7W,WAAWuD,GACpD,GAAIsT,YAAYC,OAAOvT,GACrB,OAAO,IAAIvD,WAAWuD,EAAEpH,OAAQoH,EAAE4T,WAAY5T,EAAE6Q,YAElD,MAAM,IAAIrW,MAAM,oCAAmC,ECnCxC,EAAO,MACP0J,EAAO,GAMPW,EAAU0hD,GAAS,EAAOA,GAM1Bl9C,EAAUgL,GAAS,EAAOA,kBCoGvC,IAIA,EAzHA,SAAem4E,EAAUlrF,GACvB,GAAIkrF,EAAStzF,QAAU,IAAO,MAAM,IAAI0K,UAAU,qBAElD,IADA,IAAI6oF,EAAW,IAAIhwF,WAAW,KACrB4Z,EAAI,EAAGA,EAAIo2E,EAASvzF,OAAQmd,IACnCo2E,EAASp2E,GAAK,IAEhB,IAAK,IAAI9Y,EAAI,EAAGA,EAAIivF,EAAStzF,OAAQqE,IAAK,CACxC,IAAI+S,EAAIk8E,EAAS9pC,OAAOnlD,GACpBmvF,EAAKp8E,EAAE7S,WAAW,GACtB,GAAqB,MAAjBgvF,EAASC,GAAe,MAAM,IAAI9oF,UAAU0M,EAAI,iBACpDm8E,EAASC,GAAMnvF,CACjB,CACA,IAAIipD,EAAOgmC,EAAStzF,OAChByzF,EAASH,EAAS9pC,OAAO,GACzBkqC,EAAS1xF,KAAKN,IAAI4rD,GAAQtrD,KAAKN,IAAI,KACnCiyF,EAAU3xF,KAAKN,IAAI,KAAOM,KAAKN,IAAI4rD,GA6CvC,SAASsmC,EAAc1sF,GACrB,GAAsB,iBAAXA,EAAuB,MAAM,IAAIwD,UAAU,mBACtD,GAAsB,IAAlBxD,EAAOlH,OAAgB,OAAO,IAAIuD,WACtC,IAAIswF,EAAM,EAEV,GAAoB,MAAhB3sF,EAAO2sF,GAAX,CAIA,IAFA,IAAIC,EAAS,EACT9zF,EAAS,EACNkH,EAAO2sF,KAASJ,GACrBK,IACAD,IAMF,IAHA,IAAIrzF,GAAU0G,EAAOlH,OAAS6zF,GAAOH,EAAU,IAAO,EAClDK,EAAO,IAAIxwF,WAAW/C,GAEnB0G,EAAO2sF,IAAM,CAElB,IAAIG,EAAQT,EAASrsF,EAAO3C,WAAWsvF,IAEvC,GAAc,MAAVG,EAAiB,OAErB,IADA,IAAI3vF,EAAI,EACC4vF,EAAMzzF,EAAO,GAAc,IAAVwzF,GAAe3vF,EAAIrE,KAAqB,IAATi0F,EAAaA,IAAO5vF,IAC3E2vF,GAAU1mC,EAAOymC,EAAKE,KAAU,EAChCF,EAAKE,GAAQD,EAAQ,MAAS,EAC9BA,EAASA,EAAQ,MAAS,EAE5B,GAAc,IAAVA,EAAe,MAAM,IAAI1yF,MAAM,kBACnCtB,EAASqE,EACTwvF,GACF,CAEA,GAAoB,MAAhB3sF,EAAO2sF,GAAX,CAGA,IADA,IAAIK,EAAM1zF,EAAOR,EACVk0F,IAAQ1zF,GAAsB,IAAduzF,EAAKG,IAC1BA,IAIF,IAFA,IAAIC,EAAM,IAAI5wF,WAAWuwF,GAAUtzF,EAAO0zF,IACtC/2E,EAAI22E,EACDI,IAAQ1zF,GACb2zF,EAAIh3E,KAAO42E,EAAKG,KAElB,OAAOC,CAX2B,CA5BA,CAwCpC,CAMA,MAAO,CACLxoF,OAhGF,SAAiBzE,GAMf,GALIA,aAAkB3D,aAAuB6W,YAAYC,OAAOnT,GAC9DA,EAAS,IAAI3D,WAAW2D,EAAOxH,OAAQwH,EAAOwT,WAAYxT,EAAOyQ,YACxDhW,MAAM+S,QAAQxN,KACvBA,EAAS3D,WAAW8U,KAAKnR,OAErBA,aAAkB3D,YAAe,MAAM,IAAImH,UAAU,uBAC3D,GAAsB,IAAlBxD,EAAOlH,OAAgB,MAAO,GAMlC,IAJA,IAAI8zF,EAAS,EACT9zF,EAAS,EACTo0F,EAAS,EACTC,EAAOntF,EAAOlH,OACXo0F,IAAWC,GAA2B,IAAnBntF,EAAOktF,IAC/BA,IACAN,IAMF,IAHA,IAAItzF,GAAS6zF,EAAOD,GAAUT,EAAU,IAAO,EAC3CW,EAAM,IAAI/wF,WAAW/C,GAElB4zF,IAAWC,GAAM,CAItB,IAHA,IAAIL,EAAQ9sF,EAAOktF,GAEf/vF,EAAI,EACCkwF,EAAM/zF,EAAO,GAAc,IAAVwzF,GAAe3vF,EAAIrE,KAAqB,IAATu0F,EAAaA,IAAOlwF,IAC3E2vF,GAAU,IAAMM,EAAIC,KAAU,EAC9BD,EAAIC,GAAQP,EAAQ1mC,IAAU,EAC9B0mC,EAASA,EAAQ1mC,IAAU,EAE7B,GAAc,IAAV0mC,EAAe,MAAM,IAAI1yF,MAAM,kBACnCtB,EAASqE,EACT+vF,GACF,CAGA,IADA,IAAII,EAAMh0F,EAAOR,EACVw0F,IAAQh0F,GAAqB,IAAb8zF,EAAIE,IACzBA,IAIF,IADA,IAAIpwF,EAAMqvF,EAAOlvC,OAAOuvC,GACjBU,EAAMh0F,IAAQg0F,EAAOpwF,GAAOkvF,EAAS9pC,OAAO8qC,EAAIE,IACvD,OAAOpwF,CACT,EAsDEwvF,aAAcA,EACdzjF,OARF,SAAiB6J,GACf,IAAIta,EAASk0F,EAAa55E,GAC1B,GAAIta,EAAU,OAAOA,EACrB,MAAM,IAAI4B,MAAM,OAAO8G,cACzB,EAMF,ECxGA,MAAMqsF,EAMJ5rF,YAAaT,EAAMkP,EAAQo9E,GACzB3rF,KAAKX,KAAOA,EACZW,KAAKuO,OAASA,EACdvO,KAAK2rF,WAAaA,CACpB,CAMA/oF,OAAQuV,GACN,GAAIA,aAAiB3d,WACnB,MAAO,GAAGwF,KAAKuO,SAASvO,KAAK2rF,WAAWxzE,KAExC,MAAM5f,MAAM,oCAEhB,EAkBF,MAAMypF,EAMJliF,YAAaT,EAAMkP,EAAQq9E,GAIzB,GAHA5rF,KAAKX,KAAOA,EACZW,KAAKuO,OAASA,OAEgB1I,IAA1B0I,EAAOyhD,YAAY,GACrB,MAAM,IAAIz3D,MAAM,4BAGlByH,KAAK6rF,gBAAyCt9E,EAAOyhD,YAAY,GACjEhwD,KAAK4rF,WAAaA,CACpB,CAKAxkF,OAAQ4kB,GACN,GAAoB,iBAATA,EAAmB,CAC5B,GAAIA,EAAKgkC,YAAY,KAAOhwD,KAAK6rF,gBAC/B,MAAMtzF,MAAM,qCAAqC8zB,KAAK8T,UAAUnU,OAAUhsB,KAAKX,mDAAmDW,KAAKuO,UAEzI,OAAOvO,KAAK4rF,WAAW5/D,EAAKlzB,MAAMkH,KAAKuO,OAAOtX,QAChD,CACE,MAAMsB,MAAM,oCAEhB,CAOA+pC,GAAIupC,GACF,OAAOvpC,EAAGtiC,KAAM6rE,EAClB,EAaF,MAAMigB,EAIJhsF,YAAaisF,GACX/rF,KAAK+rF,SAAWA,CAClB,CAOAzpD,GAAIupC,GACF,OAAOvpC,EAAGtiC,KAAM6rE,EAClB,CAMAzkE,OAAQrL,GACN,MAAMwS,EAAgCxS,EAAM,GACtC8vE,EAAU7rE,KAAK+rF,SAASx9E,GAC9B,GAAIs9D,EACF,OAAOA,EAAQzkE,OAAOrL,GAEtB,MAAM6U,WAAW,qCAAqCyb,KAAK8T,UAAUpkC,iCAAqC2C,OAAOyI,KAAKnH,KAAK+rF,0BAE/H,EAUK,MAAMzpD,EAAK,CAAC0pD,EAAMC,IAAU,IAAIH,EAA4C,IAC7EE,EAAKD,UAAY,CAAE,CAAmC,EAAOx9E,QAASy9E,MACtEC,EAAMF,UAAY,CAAE,CAAmC,EAAQx9E,QAAS09E,KAcvE,MAAMC,EAOXpsF,YAAaT,EAAMkP,EAAQo9E,EAAYC,GACrC5rF,KAAKX,KAAOA,EACZW,KAAKuO,OAASA,EACdvO,KAAK2rF,WAAaA,EAClB3rF,KAAK4rF,WAAaA,EAClB5rF,KAAK4rE,QAAU,IAAI8f,EAAQrsF,EAAMkP,EAAQo9E,GACzC3rF,KAAK6rE,QAAU,IAAImW,EAAQ3iF,EAAMkP,EAAQq9E,EAC3C,CAKAhpF,OAAQ7G,GACN,OAAOiE,KAAK4rE,QAAQhpE,OAAO7G,EAC7B,CAKAqL,OAAQrL,GACN,OAAOiE,KAAK6rE,QAAQzkE,OAAOrL,EAC7B,EAaK,MAAMuT,EAAO,EAAGjQ,OAAMkP,SAAQ3L,SAAQwE,YAC3C,IAAI8kF,EAAM7sF,EAAMkP,EAAQ3L,EAAQwE,GAWrB+kF,EAAQ,EAAG59E,SAAQlP,OAAMqf,eACpC,MAAM,OAAE9b,EAAM,OAAEwE,GAAW,EAAMsX,EAAUrf,GAC3C,OAAOiQ,EAAK,CACVf,SACAlP,OACAuD,SAIAwE,OAAQ4kB,GAAQ,EAAO5kB,EAAO4kB,KAC/B,EA4GUogE,EAAU,EAAG/sF,OAAMkP,SAAQkvE,cAAa/+D,cAC5CpP,EAAK,CACVf,SACAlP,OACAuD,OAAQ7G,GAjDG,EAACqW,EAAMsM,EAAU++D,KAC9B,MAAM4O,EAAwC,MAAlC3tE,EAASA,EAASznB,OAAS,GACjCy+C,GAAQ,GAAK+nC,GAAe,EAClC,IAAIxhF,EAAM,GAENogE,EAAO,EACP1lE,EAAS,EACb,IAAK,IAAI2E,EAAI,EAAGA,EAAI8W,EAAKnb,SAAUqE,EAMjC,IAJA3E,EAAUA,GAAU,EAAKyb,EAAK9W,GAC9B+gE,GAAQ,EAGDA,EAAOohB,GACZphB,GAAQohB,EACRxhF,GAAOyiB,EAASg3B,EAAQ/+C,GAAU0lE,GAUtC,GALIA,IACFpgE,GAAOyiB,EAASg3B,EAAQ/+C,GAAW8mF,EAAcphB,IAI/CgwB,EACF,KAAQpwF,EAAIhF,OAASwmF,EAAe,GAClCxhF,GAAO,IAIX,OAAOA,GAmBI,CAAOF,EAAO2iB,EAAU++D,GAEjCr2E,OAAQrL,GAzGG,EAACkV,EAAQyN,EAAU++D,EAAap+E,KAG7C,MAAMitF,EAAQ,CAAC,EACf,IAAK,IAAIhxF,EAAI,EAAGA,EAAIojB,EAASznB,SAAUqE,EACrCgxF,EAAM5tE,EAASpjB,IAAMA,EAIvB,IAAIkM,EAAMyJ,EAAOha,OACjB,KAA2B,MAApBga,EAAOzJ,EAAM,MAChBA,EAIJ,MAAMvL,EAAM,IAAIzB,WAAYgN,EAAMi2E,EAAc,EAAK,GAGrD,IAAIphB,EAAO,EACP1lE,EAAS,EACT41F,EAAU,EACd,IAAK,IAAIjxF,EAAI,EAAGA,EAAIkM,IAAOlM,EAAG,CAE5B,MAAMuD,EAAQytF,EAAMr7E,EAAO3V,IAC3B,QAAcuK,IAAVhH,EACF,MAAM,IAAIw2B,YAAY,OAAOh2B,eAI/B1I,EAAUA,GAAU8mF,EAAe5+E,EACnCw9D,GAAQohB,EAGJphB,GAAQ,IACVA,GAAQ,EACRpgE,EAAIswF,KAAa,IAAQ51F,GAAU0lE,EAEvC,CAGA,GAAIA,GAAQohB,GAAe,IAAQ9mF,GAAW,EAAI0lE,EAChD,MAAM,IAAIhnC,YAAY,0BAGxB,OAAOp5B,GA8DI,CAAOF,EAAO2iB,EAAU++D,EAAap+E,KCrVrC,EAAS+sF,EAAQ,CAC5B79E,OAAQ,IACRlP,KAAM,SACNqf,SAAU,mCACV++D,YAAa,ICJF,GDOc2O,EAAQ,CACjC79E,OAAQ,IACRlP,KAAM,cACNqf,SAAU,mCACV++D,YAAa,IAGU2O,EAAQ,CAC/B79E,OAAQ,IACRlP,KAAM,YACNqf,SAAU,oCACV++D,YAAa,IAGe2O,EAAQ,CACpC79E,OAAQ,IACRlP,KAAM,iBACNqf,SAAU,oCACV++D,YAAa,IAGU2O,EAAQ,CAC/B79E,OAAQ,IACRlP,KAAM,YACNqf,SAAU,mCACV++D,YAAa,IAGe2O,EAAQ,CACpC79E,OAAQ,IACRlP,KAAM,iBACNqf,SAAU,mCACV++D,YAAa,IAGa2O,EAAQ,CAClC79E,OAAQ,IACRlP,KAAM,eACNqf,SAAU,oCACV++D,YAAa,IAGkB2O,EAAQ,CACvC79E,OAAQ,IACRlP,KAAM,oBACNqf,SAAU,oCACV++D,YAAa,IAGQ2O,EAAQ,CAC7B79E,OAAQ,IACRlP,KAAM,UACNqf,SAAU,mCACV++D,YAAa,IC5DU0O,EAAM,CAC7B9sF,KAAM,YACNkP,OAAQ,IACRmQ,SAAU,gEAGgBytE,EAAM,CAChC9sF,KAAM,eACNkP,OAAQ,IACRmQ,SAAU,+DCXZ,IAAIywD,EAOJ,SAAS,EAAOt9C,EAAK51B,EAAK/E,GACxB+E,EAAMA,GAAO,GAEb,IAAImzE,EADJl4E,EAASA,GAAU,EAGnB,KAAM26B,GAAOw9C,GACXpzE,EAAI/E,KAAmB,IAAN26B,EAAcy9C,EAC/Bz9C,GAAO,IAET,KAAMA,EAAM09C,GACVtzE,EAAI/E,KAAmB,IAAN26B,EAAcy9C,EAC/Bz9C,KAAS,EAMX,OAJA51B,EAAI/E,GAAgB,EAAN26B,EAEd,EAAO1Z,MAAQjhB,EAASk4E,EAAY,EAE7BnzE,CACT,EAvBIqzE,EAAM,IAENC,GAAS,IACTF,EAAMp2E,KAAKqhB,IAAI,EAAG,IAsBtB,IAAI,EAKJ,SAAStG,EAAKjZ,EAAK7D,GACjB,IAII6a,EAJAyD,EAAS,EAETpW,EAAS,EACTowE,EAFAt4E,EAASA,GAAU,EAInBiyB,EAAIpuB,EAAI9D,OAEZ,EAAG,CACD,GAAIu4E,GAAWrmD,EAEb,MADAnV,EAAKmE,MAAQ,EACP,IAAIvH,WAAW,2BAEvBmB,EAAIhX,EAAIy0E,KACRh6D,GAAOpW,EAAQ,IACV2S,EAAI09D,IAAWrwE,GACf2S,EAAI09D,GAAUx2E,KAAKqhB,IAAI,EAAGlb,GAC/BA,GAAS,CACX,OAAS2S,GAAK29D,GAId,OAFA17D,EAAKmE,MAAQq3D,EAAUt4E,EAEhBse,CACT,EA1BIk6D,EAAQ,IACRD,EAAS,IA2Bb,IAAIE,EAAK12E,KAAKqhB,IAAI,EAAI,GAClBs1D,EAAK32E,KAAKqhB,IAAI,EAAG,IACjBu1D,EAAK52E,KAAKqhB,IAAI,EAAG,IACjBw1D,EAAK72E,KAAKqhB,IAAI,EAAG,IACjBy1D,EAAK92E,KAAKqhB,IAAI,EAAG,IACjB01D,EAAK/2E,KAAKqhB,IAAI,EAAG,IACjB21D,EAAKh3E,KAAKqhB,IAAI,EAAG,IACjB41D,EAAKj3E,KAAKqhB,IAAI,EAAG,IACjB61D,GAAKl3E,KAAKqhB,IAAI,EAAG,IAyBrB,GARa,CACT1X,OAAQusE,EACR/nE,OAAQ,EACRgpE,eAlBS,SAAUvxE,GACrB,OACEA,EAAQ8wE,EAAK,EACb9wE,EAAQ+wE,EAAK,EACb/wE,EAAQgxE,EAAK,EACbhxE,EAAQixE,EAAK,EACbjxE,EAAQkxE,EAAK,EACblxE,EAAQmxE,EAAK,EACbnxE,EAAQoxE,EAAK,EACbpxE,EAAQqxE,EAAK,EACbrxE,EAAQsxE,GAAK,EACA,EAEjB,GCzEO,MAAM,GAAS,CAAC/9D,EAAMlb,EAAS,IAE7B,CADM,UAAckb,EAAMlb,GACnB,iBAQHm5E,GAAW,CAACC,EAAK1pE,EAAQ1P,EAAS,KAC7C,UAAco5E,EAAK1pE,EAAQ1P,GACpB0P,GAOIwpE,GAAkBE,GACtB,kBAAsBA,GCjBlB,GAAS,CAACruE,EAAM00B,KAC3B,MAAMl/B,EAAOk/B,EAAO/nB,WACdmgE,EAAa,GAAsB9sE,GACnC+sE,EAAeD,EAAa,GAAsBt3E,GAElD0gB,EAAQ,IAAI3d,WAAWw0E,EAAev3E,GAK5C,OAJA,GAAgBwK,EAAMkW,EAAO,GAC7B,GAAgB1gB,EAAM0gB,EAAO42D,GAC7B52D,EAAMtc,IAAI86B,EAAQq4C,GAEX,IAAI,GAAO/sE,EAAMxK,EAAMk/B,EAAQxe,EAAK,EAShC,GAAUi1D,IACrB,MAAMj1D,EAAQ,EAAOi1D,IACdnrE,EAAM8sE,GAAc,GAAc52D,IAClC1gB,EAAMu3E,GAAgB,GAAc72D,EAAM7gB,SAASy3E,IACpDp4C,EAASxe,EAAM7gB,SAASy3E,EAAaC,GAE3C,GAAIr4C,EAAO/nB,aAAenX,EACxB,MAAM,IAAIc,MAAM,oBAGlB,OAAO,IAAI,GAAO0J,EAAMxK,EAAMk/B,EAAQxe,EAAK,EAoCtC,MAAM,GASXrY,YAAamC,EAAMxK,EAAMk/B,EAAQxe,GAC/BnY,KAAKiC,KAAOA,EACZjC,KAAKvI,KAAOA,EACZuI,KAAK22B,OAASA,EACd32B,KAAKmY,MAAQA,CACf,ECtEK,MAAM1V,GAAS,CAACkqE,EAAMC,KAC3B,MAAM,MAAEz0D,EAAK,QAAEiI,GAAYusD,EAC3B,OACO,IADCvsD,EAEGysD,GACL10D,EACA20D,GAAUH,GAC+B,GAAU,WAG9CK,GACL70D,EACA20D,GAAUH,GACmCC,GAAQ,UAE3D,EAoBIr9D,GAAQ,IAAIsY,QAMZilD,GAAYI,IAChB,MAAMJ,EAAYv9D,GAAM5O,IAAIusE,GAC5B,GAAiB,MAAbJ,EAAmB,CACrB,MAAMA,EAAY,IAAIt9D,IAEtB,OADAD,GAAM1T,IAAIqxE,EAAKJ,GACRA,CACT,CACA,OAAOA,GAWF,MAAMK,GAOXrtE,YAAasgB,EAASne,EAAMmrE,EAAWj1D,GAErCnY,KAAKiC,KAAOA,EAEZjC,KAAKogB,QAAUA,EAEfpgB,KAAKotE,UAAYA,EAEjBptE,KAAKmY,MAAQA,EAKbnY,KAAK,KAAOmY,CACd,CAQIk1D,YACF,OAAOrtE,IACT,CAGI2R,iBACF,OAAO3R,KAAKmY,MAAMxG,UACpB,CAGI/C,iBACF,OAAO5O,KAAKmY,MAAMvJ,UACpB,CAKA0+D,OACE,OAAQttE,KAAKogB,SACX,KAAK,EACH,OAA4D,KAE9D,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,UAAEmrE,GAAcptE,KAE5B,GAAIiC,IAASsrE,GACX,MAAM,IAAIh1E,MAAM,4CAIlB,GAAI60E,EAAUnrE,OAASurE,GACrB,MAAM,IAAIj1E,MAAM,sDAGlB,OACE40E,GAAIM,SAC8C,EAGtD,CACA,QACE,MAAMl1E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAKAstD,OACE,OAAQ1tE,KAAKogB,SACX,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,OAAE00B,GAAW32B,KAAKotE,UACxBA,EAAY,GAAcnrE,EAAM00B,GACtC,OACEw2C,GAAIQ,SAAS3tE,KAAKiC,KAAMmrE,EAE5B,CACA,KAAK,EACH,OAAgD,KAElD,QACE,MAAM70E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAMA9I,OAAQs2D,GACN,OAAOT,GAAI71D,OAAOtX,KAAM4tE,EAC1B,CAWA5/D,cAAeqb,EAAMukD,GACnB,MAAMC,EACiE,EAGvE,OACEA,GACAxkD,EAAKpnB,OAAS4rE,EAAQ5rE,MACtBonB,EAAKjJ,UAAYytD,EAAQztD,SD5JT,EAACtJ,EAAG/E,KACxB,GAAI+E,IAAM/E,EACR,OAAO,EACF,CACL,MAAMK,EAAoE,EAE1E,OACE0E,EAAE7U,OAASmQ,EAAKnQ,MAChB6U,EAAErf,OAAS2a,EAAK3a,MAChB2a,EAAK+F,iBAAiB3d,YRrCb,EAAC+xE,EAAIC,KAClB,GAAID,IAAOC,EAAI,OAAO,EACtB,GAAID,EAAG39D,aAAe49D,EAAG59D,WACvB,OAAO,EAGT,IAAK,IAAI69D,EAAK,EAAGA,EAAKF,EAAG39D,WAAY69D,IACnC,GAAIF,EAAGE,KAAQD,EAAGC,GAChB,OAAO,EAIX,OAAO,GQ0BH,CAAW31D,EAAEqB,MAAO/F,EAAK+F,MAE7B,GCiJI,CAAckR,EAAK+jD,UAAWS,EAAQT,UAE1C,CAMA36D,SAAUm6D,GACR,OAAOnqE,GAAOzC,KAAM4sE,EACtB,CAKA70D,SACE,MAAO,CAAE,IAAKtV,GAAOzC,MACvB,CAEA2sE,OACE,OAAO3sE,IACT,CAEYuzB,IAAP/8B,OAAO+8B,eACV,MAAO,KACT,CAIA,CAAC/8B,OAAOs3E,IAAI,iCACV,MAAO,OAAO9tE,KAAKyS,aACrB,CAoBAzE,aAAcjS,GACZ,GAAa,MAATA,EACF,OAAO,KAGT,MAAM8C,EAA2B,EACjC,GAAIA,aAAiBsuE,GAEnB,OAAOtuE,EACF,GAAmB,MAAdA,EAAM,MAAgBA,EAAM,OAASA,EAAMsZ,OAAUtZ,EAAMwuE,QAAUxuE,EAAO,CAMtF,MAAM,QAAEuhB,EAAO,KAAEne,EAAI,UAAEmrE,EAAS,MAAEj1D,GAAUtZ,EAC5C,OAAO,IAAIsuE,GACT/sD,EACAne,EACwC,EACxCkW,GAAS41D,GAAU3tD,EAASne,EAAMmrE,EAAUj1D,OAEhD,CAAO,IAAyB,IAArBtZ,EAAMmvE,IAAqB,CAIpC,MAAM,QAAE5tD,EAAO,UAAEgtD,EAAS,KAAEnrE,GAASpD,EAC/B83B,EAEH,GAAcy2C,GACjB,OAAOD,GAAIxuE,OAAOyhB,EAASne,EAAM00B,EACnC,CAGE,OAAO,IAEX,CAaA3oB,cAAeoS,EAASne,EAAM00B,GAC5B,GAAoB,iBAAT10B,EACT,MAAM,IAAI1J,MAAM,yCAGlB,KAAMo+B,EAAOxe,iBAAiB3d,YAC5B,MAAM,IAAIjC,MAAM,kBAGlB,OAAQ6nB,GACN,KAAK,EACH,GAAIne,IAASsrE,GACX,MAAM,IAAIh1E,MACR,wCAAwCg1E,sBAG1C,OAAO,IAAIJ,GAAI/sD,EAASne,EAAM00B,EAAQA,EAAOxe,OAGjD,KAAK,EAAG,CACN,MAAMA,EAAQ41D,GAAU3tD,EAASne,EAAM00B,EAAOxe,OAC9C,OAAO,IAAIg1D,GAAI/sD,EAASne,EAAM00B,EAAQxe,EACxC,CACA,QACE,MAAM,IAAI5f,MAAM,mBAGtB,CASAyV,gBAAiB2oB,GACf,OAAOw2C,GAAIxuE,OAAO,EAAG4uE,GAAa52C,EACpC,CAYA3oB,gBAAiB/L,EAAM00B,GACrB,OAAOw2C,GAAIxuE,OAAO,EAAGsD,EAAM00B,EAC7B,CAgBA3oB,cAAemK,GACb,MAAO+0D,EAAKe,GAAad,GAAIe,YAAY/1D,GACzC,GAAI81D,EAAUh3E,OACZ,MAAM,IAAIsB,MAAM,oBAElB,OAAO20E,CACT,CAkBAl/D,mBAAoBmK,GAClB,MAAMg2D,EAAQhB,GAAIiB,aAAaj2D,GACzBk2D,EAAaF,EAAM12E,KAAO02E,EAAMG,cAChCC,EAAiB,EACrBp2D,EAAM7gB,SAAS+2E,EAAYA,EAAaF,EAAMG,gBAEhD,GAAIC,EAAe3/D,aAAeu/D,EAAMG,cACtC,MAAM,IAAI/1E,MAAM,oBAElB,MAAMi2E,EAAcD,EAAej3E,SACjC62E,EAAMG,cAAgBH,EAAMM,YAExB93C,EAAS,IAAI,GACjBw3C,EAAMO,cACNP,EAAMM,WACND,EACAD,GAMF,MAAO,CAHa,IAAlBJ,EAAM/tD,QACF+sD,GAAIM,SAAyD,GAC7DN,GAAIQ,SAASQ,EAAM7C,MAAO30C,GACaxe,EAAM7gB,SAAS62E,EAAM12E,MACpE,CAkBAuW,oBAAqB2gE,GACnB,IAAIz3E,EAAS,EACb,MAAMyO,EAAO,KACX,MAAOrK,EAAGrE,GAAU,GAAc03E,EAAar3E,SAASJ,IAExD,OADAA,GAAUD,EACHqE,GAGT,IAAI8kB,EAA4Bza,IAC5B2lE,EAAyB,GAS7B,GARuC,KAAd,GAEvBlrD,EAA2B,EAC3BlpB,EAAS,GAETo0E,EAA0B3lE,IAGZ,IAAZya,GAA6B,IAAZA,EACnB,MAAM,IAAIxP,WAAW,uBAAuBwP,KAG9C,MAAMiuD,EAAan3E,EACbw3E,EAAkC/oE,IAClC8oE,EAAa9oE,IACblO,EAAOP,EAASu3E,EAGtB,MAAO,CAAEruD,UAASkrD,QAAOoD,gBAAeD,aAAYH,cAF9B72E,EAAO42E,EAEsC52E,OACrE,CAiBAuW,aAAc7P,EAAQyuE,GACpB,MAAOr+D,EAAQ4J,GAASy2D,GAAgBzwE,EAAQyuE,GAE1CM,EAAMC,GAAI/lE,OAAO+Q,GAEvB,GAAoB,IAAhB+0D,EAAI9sD,SAA+B,MAAdjiB,EAAO,GAC9B,MAAM5F,MAAM,0DAMd,OAFAu0E,GAAUI,GAAKrxE,IAAI0S,EAAQpQ,GAEpB+uE,CACT,EAaF,MAAM0B,GAAkB,CAACzwE,EAAQyuE,KAC/B,OAAQzuE,EAAO,IAEb,IAAK,IAAK,CACR,MAAM0tE,EAAUe,GAAQ,EACxB,MAAO,CACkB,EAAgB,OACvCf,EAAQzkE,OAAO,GAAG,WAAmBjJ,KAEzC,CACA,KAAK,SAAkB,CACrB,MAAM0tE,EAAUe,GAAQ,EACxB,MAAO,CAAuB,EAAgB,OAAGf,EAAQzkE,OAAOjJ,GAClE,CACA,KAAK,SAAe,CAClB,MAAM0tE,EAAUe,GAAQ,EACxB,MAAO,CAAuB,EAAa,OAAGf,EAAQzkE,OAAOjJ,GAC/D,CACA,QACE,GAAY,MAARyuE,EACF,MAAMr0E,MACJ,mFAGJ,MAAO,CAAuB4F,EAAO,GAAKyuE,EAAKxlE,OAAOjJ,IAE1D,EASI0uE,GAAa,CAAC10D,EAAO5I,EAAOq9D,KAChC,MAAM,OAAEr+D,GAAWq+D,EACnB,GAAIr+D,IAAW,SACb,MAAMhW,MAAM,8BAA8Bq0E,EAAKvtE,iBAGjD,MAAM6tE,EAAM39D,EAAM5O,IAAI4N,GACtB,GAAW,MAAP2+D,EAAa,CACf,MAAMA,EAAMN,EAAKhqE,OAAOuV,GAAOrf,MAAM,GAErC,OADAyW,EAAM1T,IAAI0S,EAAQ2+D,GACXA,CACT,CACE,OAAOA,CACT,EASIF,GAAa,CAAC70D,EAAO5I,EAAOq9D,KAChC,MAAM,OAAEr+D,GAAWq+D,EACbM,EAAM39D,EAAM5O,IAAI4N,GACtB,GAAW,MAAP2+D,EAAa,CACf,MAAMA,EAAMN,EAAKhqE,OAAOuV,GAExB,OADA5I,EAAM1T,IAAI0S,EAAQ2+D,GACXA,CACT,CACE,OAAOA,CACT,EAGIK,GAAc,IACdC,GAAe,GAQfO,GAAY,CAAC3tD,EAASne,EAAMmrE,KAChC,MAAMyB,EAAa,GAAsBzuD,GACnC0uD,EAAaD,EAAa,GAAsB5sE,GAChDkW,EAAQ,IAAI3d,WAAWs0E,EAAa1B,EAAUx+D,YAIpD,OAHA,GAAgBwR,EAASjI,EAAO,GAChC,GAAgBlW,EAAMkW,EAAO02D,GAC7B12D,EAAMtc,IAAIuxE,EAAW0B,GACd32D,GAGH61D,GAAYx3E,OAAOs3E,IAAI,oBC3kBhB,GAAO,EAAGzuE,OAAM4C,OAAMW,YAAa,IAAI4pF,GAAOntF,EAAM4C,EAAMW,GAWhE,MAAM4pF,GAOX1sF,YAAaT,EAAM4C,EAAMW,GACvB5C,KAAKX,KAAOA,EACZW,KAAKiC,KAAOA,EACZjC,KAAK4C,OAASA,CAChB,CAMA+zB,OAAQ56B,GACN,GAAIA,aAAiBvB,WAAY,CAC/B,MAAMqU,EAAS7O,KAAK4C,OAAO7G,GAC3B,OAAO8S,aAAkBrU,WACrB,GAAcwF,KAAKiC,KAAM4M,GAEzBA,EAAOgW,MAAK8R,GAAU,GAAc32B,KAAKiC,KAAM00B,IACrD,CACE,MAAMp+B,MAAM,oCAGhB,EC1CF,MAAM4lF,GAAM9+E,GAIVpB,SAAc,IAAIzD,iBAAiBi8B,OAAOC,OAAOC,OAAOt3B,EAAM+S,IAEnDu+D,GAAS,GAAK,CACzBtxE,KAAM,WACN4C,KAAM,GACNW,OAAQu7E,GAAI,aCbDsO,IDgBS,GAAK,CACzBptF,KAAM,WACN4C,KAAM,GACNW,OAAQu7E,GAAI,aCnBSlgF,MAAOtH,EAAQ+1F,EAAY1qF,KACzB,MAAjBA,EAAQspE,QACRtpE,EAAQspE,MAAQ,GAEpB,MAAM8B,QAAkBuD,GAAOh6C,OAAOhgC,GAChCu2E,EAAMC,GAAIxuE,OAAOqD,EAAQ2qF,WAAY3qF,EAAQspE,MAAMrpE,KAAMmrE,GAE/D,aADMsf,EAAW5qF,IAAIorE,EAAKv2E,EAAQqL,GAC3BkrE,CAAG,GCLP,SAAS0f,GAAsB5qF,GAClC,OAAO/D,gBAA+B7F,EAAMs0F,GACxC,IAAIG,EAAe,GACnB,UAAW,IAAIh3B,KAASz9D,EAAK00F,cACnB7uF,UACF,IAAI8uF,EACJ,MAAMhiB,EAAO,CACTO,MAAO,EACPqhB,WAAY3qF,EAAQ2qF,WACpBK,WAAYhrF,EAAQgrF,YAEpBhrF,EAAQirF,WACRliB,EAAKO,MAAQ,EACbP,EAAK4hB,WAAa,IAGlBI,EAAS,IAAIvD,EAAO,CAChBzmF,KAAMf,EAAQkrF,SACd96E,KAAMyjD,IAEVA,EAAQ,SAAa,CACjB4V,KAAMshB,EAAO3C,UACb+C,MAAO,MAGf,MAAMjgB,QAAYuf,GAAQ52B,EAAO62B,EAAY3hB,GAO7C,OANA8hB,GAAgBp0E,OAAOo9C,EAAMjnD,YAC7B5M,EAAQgrF,aAAa,IAAI,IAAoB,sCAAuC,CAChFH,eACA3f,MACA5mD,KAAMluB,EAAKkuB,QAER,CACH4mD,MACA6f,SACAt1F,KAAMghB,OAAOo9C,EAAM5+D,QACnB4+D,QACH,CAGb,CACJ,CC3CO,MAAMu3B,GAAanvF,MAAOyV,EAAKg5E,EAAY1qF,KAC9C,MAAM+qF,EAAS,IAAIvD,EAAO,CACtBzmF,KAAM,YACN8lF,MAAOn1E,EAAIm1E,MACX9nE,KAAMrN,EAAIqN,OAER80C,GAAQ,IAAAjzD,SAAO,IAAAyqF,SAAQ,CAAE5hB,KAAMshB,EAAO3C,aAG5C,MAAO,CACHld,UAHcuf,GAAQ52B,EAAO62B,EAAY1qF,GAIzCskB,KAHS5S,EAAI4S,KAIbymE,SACAt1F,KAAMghB,OAAOo9C,EAAM5+D,QACnBq2F,aAAc55E,EAAI45E,aAClBz3B,QACH,ECmBL,SAAS03B,GAAoB1+E,GACzB,OAAyB,IAAlBA,EAAO2+E,MAClB,CACA,MA+FaC,GAAcxvF,MAAO7F,EAAMy9D,EAAO7zD,IACpCA,EAAQ0rF,OAnInBzvF,gBAA+B7F,EAAMs0F,EAAY1qF,GAC7C,IACI2rF,EADAjoF,GAAS,EAEb,UAAW,MAAM6B,KAASwgF,EAAc/lF,EAAQ4rF,eAAex1F,EAAMs0F,GAAa1qF,EAAQ6rF,uBACtFnoF,IACc,IAAVA,GAQe,IAAVA,GAA4B,MAAZioF,SAEf,IACCA,EACH93B,WAAOhwD,EACP2nF,YAAQ3nF,GAEZ8nF,OAAW9nF,QAGT,IACC0B,EACHsuD,WAAOhwD,IAlBP8nF,EAAW,IACJpmF,EACHimF,QAAQ,GAmBJ,MAAZG,UACMA,EAEd,CAoG0BG,CAAe11F,EAAMy9D,EAAO7zD,GAhGvC,EAAC5J,EAAMs0F,EAAY1qF,IACd/D,eAAgB8vF,GAC5B,GAAsB,IAAlBA,EAAO92F,QAAgBs2F,GAAoBQ,EAAO,KAAO/rF,EAAQgsF,uBAAwB,CACzF,MAAMC,EAAOF,EAAO,GACpB,IAAIzpC,EAAO2pC,EAAKp4B,MAsBhB,OArBI03B,GAAoBU,SAAyBpoF,IAAfzN,EAAKywF,YAAqChjF,IAAdzN,EAAK2oB,OAG/DktE,EAAKlB,OAAS,IAAIvD,EAAO,CACrBzmF,KAAM,OACN8lF,MAAOzwF,EAAKywF,MACZ9nE,KAAM3oB,EAAK2oB,KACX3O,KAAM67E,EAAKp4B,QAEfvR,EAAO,CAAEmnB,KAAMwiB,EAAKlB,OAAO3C,UAAW+C,MAAO,IAC7Cc,EAAKp4B,OAAQ,IAAAjzD,SAAO,IAAAyqF,SAAQ/oC,IAC5B2pC,EAAK/gB,UAAYuf,GAAQwB,EAAKp4B,MAAO62B,EAAY,IAC1C1qF,EACH2qF,WAAY3qF,EAAQ2qF,aAExBsB,EAAKx2F,KAAOghB,OAAOw1E,EAAKp4B,MAAM5+D,SAElC+K,EAAQgrF,aAAa,IAAI,IAAoB,uCAAwC,CACjF9f,IAAK+gB,EAAK/gB,IACV5mD,KAAM2nE,EAAKX,gBAER,CACHpgB,IAAK+gB,EAAK/gB,IACV5mD,KAAMluB,EAAKkuB,KACXymE,OAAQkB,EAAKlB,OACbt1F,KAAMw2F,EAAKx2F,KACX61F,aAAcW,EAAKX,aAE3B,CAEA,MAAM76D,EAAI,IAAI+2D,EAAO,CACjBzmF,KAAM,OACN8lF,MAAOzwF,EAAKywF,MACZ9nE,KAAM3oB,EAAK2oB,OAETmtE,EAAQH,EACT/gF,QAAOihF,GACJA,EAAK/gB,IAAIjrE,OAAS,GAAiBgsF,EAAKx2F,KAAO,GAG/B,MAAfw2F,EAAKlB,QAAwC,MAApBkB,EAAKlB,OAAO36E,MAAiB67E,EAAKlB,OAAO7C,WAAa,IAG7EhmE,QAAQ+pE,EAAKlB,QAAQ36E,MAAMnb,UAEjC8Y,KAAKk+E,GACFA,EAAK/gB,IAAIjrE,OAAS,GAElBwwB,EAAEu3D,aAAaiE,EAAKx2F,MACb,CACHkwD,KAAM,GACNwmC,MAAO9oF,OAAO4oF,EAAKx2F,MACnB22F,KAAMH,EAAK/gB,OAGC,MAAf+gB,EAAKlB,QAAwC,MAApBkB,EAAKlB,OAAO36E,KAEtCqgB,EAAEu3D,aAAaiE,EAAKlB,QAAQ7C,YAAc,IAI1Cz3D,EAAEu3D,aAAavxE,OAAOw1E,EAAKlB,OAAO36E,KAAKnb,SAEpC,CACH0wD,KAAM,GACNwmC,MAAO9oF,OAAO4oF,EAAKx2F,MACnB22F,KAAMH,EAAK/gB,QAGb5oB,EAAO,CACTmnB,KAAMh5C,EAAE23D,UACR+C,MAAOe,GAELr4B,GAAQ,IAAAjzD,SAAO,IAAAyqF,SAAQ/oC,IACvB4oB,QAAYuf,GAAQ52B,EAAO62B,EAAY1qF,GAK7C,OAJAA,EAAQgrF,aAAa,IAAI,IAAoB,uCAAwC,CACjF9f,MACA5mD,KAAMluB,EAAKk1F,gBAER,CACHpgB,MACA5mD,KAAMluB,EAAKkuB,KACXymE,OAAQt6D,EACRh7B,KAAMghB,OAAOo9C,EAAM5+D,OAASqtD,EAAK6oC,MAAMzmE,QAAO,CAACrgB,EAAKnH,IAASmH,GAAOnH,EAAKivF,OAAS,IAAI,IACtFb,aAAcl1F,EAAKk1F,aACnBz3B,QAER,EAI4DnvC,CAAOtuB,EAAMy9D,EAAO7zD,IC/HpF,SAASqsF,GAAuBvB,GAC5B,IACI,GAAIA,aAAmBtyF,WACnB,OAAQyD,wBACE6uF,CACV,CAFO,GAIN,GAbOnF,EAaQmF,EAZjBt2F,OAAOiW,YAAYk7E,EAalB,OAAQ1pF,wBACG6uF,CACX,CAFO,GAIN,GAfb,SAAyBnF,GACrB,OAAOnxF,OAAOuQ,iBAAiB4gF,CACnC,CAaiB,CAAgBmF,GACrB,OAAOA,CAEf,CACA,MACI,MAAM,EAAQ,IAAIv0F,MAAM,uBAAwB,sBACpD,CAxBJ,IAAoBovF,EAyBhB,MAAM,EAAQ,IAAIpvF,MAAM,uBAAwB,sBACpD,CAiDA,SAAS+1F,GAAgB/mF,GACrB,OAAwB,MAAjBA,EAAMulF,OACjB,iBC/EO,MAAMyB,GAAwB,IAC1BtwF,gBAA+BE,GAClC,UAAW,MAAM2uF,KAAW3uF,EAAQ,CAChC,QAAuB0H,IAAnBinF,EAAQ71F,OACR,MAAM,EAAQ,IAAIsB,MAAM,uBAAwB,uBAEpD,GAAuB,iBAAZu0F,GAAwBA,aAAmB31F,aAC5C,QAAqB21F,EAAQr6E,iBAElC,GAAI7Z,MAAM+S,QAAQmhF,SACbtyF,WAAW8U,KAAKw9E,OAErB,MAAIA,aAAmBtyF,YAIxB,MAAM,EAAQ,IAAIjC,MAAM,uBAAwB,6BAH1Cu0F,CAIV,CACJ,CACJ,ECpBE0B,GAAgC,IAC/B,SAASC,GAASzsF,GACrB,MAAM0sF,EAAqB1sF,GAAS0sF,oBAAsBF,GAC1D,OAAOvwF,eAAe0wF,EAAexwF,EAAQuoB,GACzC,MAAMq1C,EAAQ,GACd,UAAW,MAAM6yB,KAAW,EAAMzwF,EAAQuwF,GACtC3yB,EAAMrkE,WAAWgvB,EAAOkoE,IAE5B,OAAI7yB,EAAM9kE,OAAS,EACR03F,EAAe5yB,EAAOr1C,GAE1Bq1C,EAAM,EACjB,CACJ,CCbO,MAAM8yB,GACT7sF,QACA8sF,KACAp7E,IACA4S,KACAyoE,MACAC,KACA7gF,OACA8gF,UACAlC,OACAhsE,KACA8nE,MACA3b,IACAz1E,KACAy3F,SACApvF,YAAY6yC,EAAO3wC,GACfhC,KAAKgC,QAAUA,GAAW,CAAC,EAC3BhC,KAAK8uF,KAAOn8C,EAAMm8C,KAClB9uF,KAAK0T,IAAMi/B,EAAMj/B,IACjB1T,KAAKsmB,KAAOqsB,EAAMrsB,KAClBtmB,KAAK+uF,MAAQp8C,EAAMo8C,MACnB/uF,KAAKgvF,KAAOr8C,EAAMq8C,KAClBhvF,KAAKmO,OAASwkC,EAAMxkC,OACpBnO,KAAKivF,UAAYt8C,EAAMs8C,UACvBjvF,KAAK+sF,OAASp6C,EAAMo6C,OACpB/sF,KAAK+gB,KAAO4xB,EAAM5xB,KAClB/gB,KAAK6oF,MAAQl2C,EAAMk2C,KACvB,EAMG,MAAMsG,GAAShiB,GAAI/pD,MAAM,kDACnBgsE,GAASjiB,GAAI/pD,MAAM,qDC/BzB,MAAMisE,WAAgBR,GACzBS,UACAxvF,YAAY6yC,EAAO3wC,GACfkF,MAAMyrC,EAAO3wC,GACbhC,KAAKsvF,UAAY,IAAI9/E,GACzB,CACAvR,UAAUoB,EAAMR,GACZmB,KAAKktE,SAAMrnE,EACX7F,KAAKvI,UAAOoO,EACZ7F,KAAKkvF,cAAWrpF,EAChB7F,KAAKsvF,UAAUzzF,IAAIwD,EAAMR,EAC7B,CACAZ,UAAUoB,GACN,OAAOyG,QAAQC,QAAQ/F,KAAKsvF,UAAU3uF,IAAItB,GAC9C,CACAkwF,aACI,OAAOvvF,KAAKsvF,UAAU73F,IAC1B,CACA+3F,sBACI,OAAOxvF,KAAKuvF,YAChB,CACAE,YACI,OAAOzvF,KAAKsvF,UAAU3zF,SAASgK,OAAO9G,KAC1C,CACAZ,wBACI,IAAK,MAAO8D,EAAKuzC,KAAUt1C,KAAKsvF,UAAUhoF,eAChC,CACFvF,MACAuzC,QAGZ,CACAo6C,mBACI,QAAsB7pF,IAAlB7F,KAAKkvF,SACL,OAAOlvF,KAAKkvF,SAEhBlvF,KAAKkvF,SAAW,EAGhB,IAAK,MAAO7vF,EAAMi2C,KAAUt1C,KAAKsvF,UAAUhoF,UACrB,MAAdguC,EAAM79C,MAA8B,MAAb69C,EAAM43B,MAC7BltE,KAAKkvF,UAAY7vF,EAAKpI,QAAsC,IAA5B+I,KAAKgC,QAAQ2qF,WAAmByC,GAAOj3E,MAAMvJ,WAAaugF,GAAOh3E,MAAMvJ,aAG/G,OAAO5O,KAAKkvF,QAChB,CACAjxF,YAAa43D,GACT,MAAMq4B,EAAQ,GACd,IAAK,MAAO7uF,EAAMi2C,KAAUt1C,KAAKsvF,UAAUhoF,UAAW,CAClD,IAAIuH,EAASymC,EACb,GAAIA,aAAiBu5C,GACjB,UAAW,MAAMtnF,KAAS+tC,EAAMq6C,MAAM95B,GAClChnD,EAAStH,QACHA,EAGK,MAAfsH,EAAOpX,MAA+B,MAAdoX,EAAOq+D,KAC/BghB,EAAMx2F,KAAK,CACPiwD,KAAMtoD,EACN8uF,MAAO9oF,OAAOwJ,EAAOpX,MACrB22F,KAAMv/E,EAAOq+D,KAGzB,CACA,MAAM6f,EAAS,IAAIvD,EAAO,CACtBzmF,KAAM,YACN8lF,MAAO7oF,KAAK6oF,MACZ9nE,KAAM/gB,KAAK+gB,OAETujC,EAAO,CAAEmnB,KAAMshB,EAAO3C,UAAW+C,MAAOe,GACxCv3F,GAAS,IAAAiM,SAAO,IAAAyqF,SAAQ/oC,IACxB4oB,QAAYuf,GAAQ91F,EAAQk/D,EAAO71D,KAAKgC,SACxCvK,EAAOd,EAAOM,OAASqtD,EAAK6oC,MAAMzmE,QAKxC,CAACrgB,EAAKnH,IAASmH,GAAqB,MAAdnH,EAAKivF,MAAgB,EAAIjvF,EAAKivF,QAAQ,GAC5DnuF,KAAKktE,IAAMA,EACXltE,KAAKvI,KAAOA,OACN,CACFy1E,MACA6f,SACAzmE,KAAMtmB,KAAKsmB,KACX7uB,KAAMghB,OAAOhhB,GAErB,EC1FJ,MAAM,GAAQ,IAAI+C,WAAW,GAUvB,GAAUskD,IACd,MAAMwrC,EAAQxrC,EAAI1U,MAAM,OACxB,OAAOkgD,EAAQ,IAAI9vF,WAAW8vF,EAAMv6E,KAAIgC,GAAK0C,SAAS1C,EAAG,OAAQ,ICZnE,IAAI,GAOJ,SAAS,EAAO8f,EAAK51B,EAAK/E,GACxB+E,EAAMA,GAAO,GAEb,IAAImzE,EADJl4E,EAASA,GAAU,EAGnB,KAAM26B,GAAO,IACX51B,EAAI/E,KAAmB,IAAN26B,EAAc,GAC/BA,GAAO,IAET,KAAMA,EAAM,IACV51B,EAAI/E,KAAmB,IAAN26B,EAAc,GAC/BA,KAAS,EAMX,OAJA51B,EAAI/E,GAAgB,EAAN26B,EAEd,EAAO1Z,MAAQjhB,EAASk4E,EAAY,EAE7BnzE,CACT,EAvBI,GAAM,IAEN,IAAS,IACT,GAAMhD,KAAKqhB,IAAI,EAAG,IAsBtB,IAAI,GAKJ,SAAS,EAAKvf,EAAK7D,GACjB,IAII6a,EAJAyD,EAAS,EAETpW,EAAS,EACTowE,EAFAt4E,EAASA,GAAU,EAInBiyB,EAAIpuB,EAAI9D,OAEZ,EAAG,CACD,GAAIu4E,GAAWrmD,EAEb,MADA,EAAKhR,MAAQ,EACP,IAAIvH,WAAW,2BAEvBmB,EAAIhX,EAAIy0E,KACRh6D,GAAOpW,EAAQ,IACV2S,EAAI,KAAW3S,GACf2S,EAAI,IAAU9Y,KAAKqhB,IAAI,EAAGlb,GAC/BA,GAAS,CACX,OAAS2S,GAAK,IAId,OAFA,EAAKoG,MAAQq3D,EAAUt4E,EAEhBse,CACT,EA1BI,GAAQ,IACR,GAAS,IA2Bb,IAAI,GAAKvc,KAAKqhB,IAAI,EAAI,GAClB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IAyBrB,GARa,CACT1X,OAAQ,GACRwE,OAAQ,GACRgpE,eAlBS,SAAUvxE,GACrB,OACEA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACA,EAEjB,GCzEO,MAUM,GAAW,CAACyxE,EAAK1pE,EAAQ1P,EAAS,KAC7C,UAAco5E,EAAK1pE,EAAQ1P,GACpB0P,GAOI,GAAkB0pE,GACtB,kBAAsBA,GCjBlB,GAAS,CAACruE,EAAM00B,KAC3B,MAAMl/B,EAAOk/B,EAAO/nB,WACdmgE,EAAa,GAAsB9sE,GACnC+sE,EAAeD,EAAa,GAAsBt3E,GAElD0gB,EAAQ,IAAI3d,WAAWw0E,EAAev3E,GAK5C,OAJA,GAAgBwK,EAAMkW,EAAO,GAC7B,GAAgB1gB,EAAM0gB,EAAO42D,GAC7B52D,EAAMtc,IAAI86B,EAAQq4C,GAEX,IAAI,GAAO/sE,EAAMxK,EAAMk/B,EAAQxe,EAAK,EAuDtC,MAAM,GASXrY,YAAamC,EAAMxK,EAAMk/B,EAAQxe,GAC/BnY,KAAKiC,KAAOA,EACZjC,KAAKvI,KAAOA,EACZuI,KAAK22B,OAASA,EACd32B,KAAKmY,MAAQA,CACf,EC/EK,MAAM,GAAO,EAAG9Y,OAAM4C,OAAMW,YAAa,IAAI,GAAOvD,EAAM4C,EAAMW,GAWhE,MAAM,GAOX9C,YAAaT,EAAM4C,EAAMW,GACvB5C,KAAKX,KAAOA,EACZW,KAAKiC,KAAOA,EACZjC,KAAK4C,OAASA,CAChB,CAMA+zB,OAAQ56B,GACN,GAAIA,aAAiBvB,WAAY,CAC/B,MAAMqU,EAAS7O,KAAK4C,OAAO7G,GAC3B,OAAO8S,aAAkBrU,WACrB,GAAcwF,KAAKiC,KAAM4M,GAEzBA,EAAOgW,MAAK8R,GAAU,GAAc32B,KAAKiC,KAAM00B,IACrD,CACE,MAAMp+B,MAAM,oCAGhB,ECyEF,IAIA,GAzHA,SAAegyF,EAAUlrF,GACvB,GAAIkrF,EAAStzF,QAAU,IAAO,MAAM,IAAI0K,UAAU,qBAElD,IADA,IAAI6oF,EAAW,IAAIhwF,WAAW,KACrB4Z,EAAI,EAAGA,EAAIo2E,EAASvzF,OAAQmd,IACnCo2E,EAASp2E,GAAK,IAEhB,IAAK,IAAI9Y,EAAI,EAAGA,EAAIivF,EAAStzF,OAAQqE,IAAK,CACxC,IAAI+S,EAAIk8E,EAAS9pC,OAAOnlD,GACpBmvF,EAAKp8E,EAAE7S,WAAW,GACtB,GAAqB,MAAjBgvF,EAASC,GAAe,MAAM,IAAI9oF,UAAU0M,EAAI,iBACpDm8E,EAASC,GAAMnvF,CACjB,CACA,IAAIipD,EAAOgmC,EAAStzF,OAChByzF,EAASH,EAAS9pC,OAAO,GACzBkqC,EAAS1xF,KAAKN,IAAI4rD,GAAQtrD,KAAKN,IAAI,KACnCiyF,EAAU3xF,KAAKN,IAAI,KAAOM,KAAKN,IAAI4rD,GA6CvC,SAASsmC,EAAc1sF,GACrB,GAAsB,iBAAXA,EAAuB,MAAM,IAAIwD,UAAU,mBACtD,GAAsB,IAAlBxD,EAAOlH,OAAgB,OAAO,IAAIuD,WACtC,IAAIswF,EAAM,EAEV,GAAoB,MAAhB3sF,EAAO2sF,GAAX,CAIA,IAFA,IAAIC,EAAS,EACT9zF,EAAS,EACNkH,EAAO2sF,KAASJ,GACrBK,IACAD,IAMF,IAHA,IAAIrzF,GAAU0G,EAAOlH,OAAS6zF,GAAOH,EAAU,IAAO,EAClDK,EAAO,IAAIxwF,WAAW/C,GAEnB0G,EAAO2sF,IAAM,CAElB,IAAIG,EAAQT,EAASrsF,EAAO3C,WAAWsvF,IAEvC,GAAc,MAAVG,EAAiB,OAErB,IADA,IAAI3vF,EAAI,EACC4vF,EAAMzzF,EAAO,GAAc,IAAVwzF,GAAe3vF,EAAIrE,KAAqB,IAATi0F,EAAaA,IAAO5vF,IAC3E2vF,GAAU1mC,EAAOymC,EAAKE,KAAU,EAChCF,EAAKE,GAAQD,EAAQ,MAAS,EAC9BA,EAASA,EAAQ,MAAS,EAE5B,GAAc,IAAVA,EAAe,MAAM,IAAI1yF,MAAM,kBACnCtB,EAASqE,EACTwvF,GACF,CAEA,GAAoB,MAAhB3sF,EAAO2sF,GAAX,CAGA,IADA,IAAIK,EAAM1zF,EAAOR,EACVk0F,IAAQ1zF,GAAsB,IAAduzF,EAAKG,IAC1BA,IAIF,IAFA,IAAIC,EAAM,IAAI5wF,WAAWuwF,GAAUtzF,EAAO0zF,IACtC/2E,EAAI22E,EACDI,IAAQ1zF,GACb2zF,EAAIh3E,KAAO42E,EAAKG,KAElB,OAAOC,CAX2B,CA5BA,CAwCpC,CAMA,MAAO,CACLxoF,OAhGF,SAAiBzE,GAMf,GALIA,aAAkB3D,aAAuB6W,YAAYC,OAAOnT,GAC9DA,EAAS,IAAI3D,WAAW2D,EAAOxH,OAAQwH,EAAOwT,WAAYxT,EAAOyQ,YACxDhW,MAAM+S,QAAQxN,KACvBA,EAAS3D,WAAW8U,KAAKnR,OAErBA,aAAkB3D,YAAe,MAAM,IAAImH,UAAU,uBAC3D,GAAsB,IAAlBxD,EAAOlH,OAAgB,MAAO,GAMlC,IAJA,IAAI8zF,EAAS,EACT9zF,EAAS,EACTo0F,EAAS,EACTC,EAAOntF,EAAOlH,OACXo0F,IAAWC,GAA2B,IAAnBntF,EAAOktF,IAC/BA,IACAN,IAMF,IAHA,IAAItzF,GAAS6zF,EAAOD,GAAUT,EAAU,IAAO,EAC3CW,EAAM,IAAI/wF,WAAW/C,GAElB4zF,IAAWC,GAAM,CAItB,IAHA,IAAIL,EAAQ9sF,EAAOktF,GAEf/vF,EAAI,EACCkwF,EAAM/zF,EAAO,GAAc,IAAVwzF,GAAe3vF,EAAIrE,KAAqB,IAATu0F,EAAaA,IAAOlwF,IAC3E2vF,GAAU,IAAMM,EAAIC,KAAU,EAC9BD,EAAIC,GAAQP,EAAQ1mC,IAAU,EAC9B0mC,EAASA,EAAQ1mC,IAAU,EAE7B,GAAc,IAAV0mC,EAAe,MAAM,IAAI1yF,MAAM,kBACnCtB,EAASqE,EACT+vF,GACF,CAGA,IADA,IAAII,EAAMh0F,EAAOR,EACVw0F,IAAQh0F,GAAqB,IAAb8zF,EAAIE,IACzBA,IAIF,IADA,IAAIpwF,EAAMqvF,EAAOlvC,OAAOuvC,GACjBU,EAAMh0F,IAAQg0F,EAAOpwF,GAAOkvF,EAAS9pC,OAAO8qC,EAAIE,IACvD,OAAOpwF,CACT,EAsDEwvF,aAAcA,EACdzjF,OARF,SAAiB6J,GACf,IAAIta,EAASk0F,EAAa55E,GAC1B,GAAIta,EAAU,OAAOA,EACrB,MAAM,IAAI4B,MAAM,OAAO8G,cACzB,EAMF,ECxGA,MAAM,GAMJS,YAAaT,EAAMkP,EAAQo9E,GACzB3rF,KAAKX,KAAOA,EACZW,KAAKuO,OAASA,EACdvO,KAAK2rF,WAAaA,CACpB,CAMA/oF,OAAQuV,GACN,GAAIA,aAAiB3d,WACnB,MAAO,GAAGwF,KAAKuO,SAASvO,KAAK2rF,WAAWxzE,KAExC,MAAM5f,MAAM,oCAEhB,EAkBF,MAAM,GAMJuH,YAAaT,EAAMkP,EAAQq9E,GAIzB,GAHA5rF,KAAKX,KAAOA,EACZW,KAAKuO,OAASA,OAEgB1I,IAA1B0I,EAAOyhD,YAAY,GACrB,MAAM,IAAIz3D,MAAM,4BAGlByH,KAAK6rF,gBAAyCt9E,EAAOyhD,YAAY,GACjEhwD,KAAK4rF,WAAaA,CACpB,CAKAxkF,OAAQ4kB,GACN,GAAoB,iBAATA,EAAmB,CAC5B,GAAIA,EAAKgkC,YAAY,KAAOhwD,KAAK6rF,gBAC/B,MAAMtzF,MAAM,qCAAqC8zB,KAAK8T,UAAUnU,OAAUhsB,KAAKX,mDAAmDW,KAAKuO,UAEzI,OAAOvO,KAAK4rF,WAAW5/D,EAAKlzB,MAAMkH,KAAKuO,OAAOtX,QAChD,CACE,MAAMsB,MAAM,oCAEhB,CAOA+pC,GAAIupC,GACF,OAAO,GAAG7rE,KAAM6rE,EAClB,EAaF,MAAM,GAIJ/rE,YAAaisF,GACX/rF,KAAK+rF,SAAWA,CAClB,CAOAzpD,GAAIupC,GACF,OAAO,GAAG7rE,KAAM6rE,EAClB,CAMAzkE,OAAQrL,GACN,MAAMwS,EAAgCxS,EAAM,GACtC8vE,EAAU7rE,KAAK+rF,SAASx9E,GAC9B,GAAIs9D,EACF,OAAOA,EAAQzkE,OAAOrL,GAEtB,MAAM6U,WAAW,qCAAqCyb,KAAK8T,UAAUpkC,iCAAqC2C,OAAOyI,KAAKnH,KAAK+rF,0BAE/H,EAUK,MAAM,GAAK,CAACC,EAAMC,IAAU,IAAI,GAA4C,IAC7ED,EAAKD,UAAY,CAAE,CAAmC,EAAOx9E,QAASy9E,MACtEC,EAAMF,UAAY,CAAE,CAAmC,EAAQx9E,QAAS09E,KAcvE,MAAM,GAOXnsF,YAAaT,EAAMkP,EAAQo9E,EAAYC,GACrC5rF,KAAKX,KAAOA,EACZW,KAAKuO,OAASA,EACdvO,KAAK2rF,WAAaA,EAClB3rF,KAAK4rF,WAAaA,EAClB5rF,KAAK4rE,QAAU,IAAI,GAAQvsE,EAAMkP,EAAQo9E,GACzC3rF,KAAK6rE,QAAU,IAAI,GAAQxsE,EAAMkP,EAAQq9E,EAC3C,CAKAhpF,OAAQ7G,GACN,OAAOiE,KAAK4rE,QAAQhpE,OAAO7G,EAC7B,CAKAqL,OAAQrL,GACN,OAAOiE,KAAK6rE,QAAQzkE,OAAOrL,EAC7B,EAaK,MAAM,GAAO,EAAGsD,OAAMkP,SAAQ3L,SAAQwE,YAC3C,IAAI,GAAM/H,EAAMkP,EAAQ3L,EAAQwE,GAWrB,GAAQ,EAAGmH,SAAQlP,OAAMqf,eACpC,MAAM,OAAE9b,EAAM,OAAEwE,GAAW,GAAMsX,EAAUrf,GAC3C,OAAO,GAAK,CACVkP,SACAlP,OACAuD,SAIAwE,OAAQ4kB,GN5LGjuB,KACb,GAAIA,aAAavD,YAAqC,eAAvBuD,EAAE+B,YAAYT,KAAuB,OAAOtB,EAC3E,GAAIA,aAAasT,YAAa,OAAO,IAAI7W,WAAWuD,GACpD,GAAIsT,YAAYC,OAAOvT,GACrB,OAAO,IAAIvD,WAAWuD,EAAEpH,OAAQoH,EAAE4T,WAAY5T,EAAE6Q,YAElD,MAAM,IAAIrW,MAAM,oCAAmC,EMsLjC,CAAO6O,EAAO4kB,KAC/B,EA4GU,GAAU,EAAG3sB,OAAMkP,SAAQkvE,cAAa/+D,cAC5C,GAAK,CACVnQ,SACAlP,OACAuD,OAAQ7G,GAjDG,EAACqW,EAAMsM,EAAU++D,KAC9B,MAAM4O,EAAwC,MAAlC3tE,EAASA,EAASznB,OAAS,GACjCy+C,GAAQ,GAAK+nC,GAAe,EAClC,IAAIxhF,EAAM,GAENogE,EAAO,EACP1lE,EAAS,EACb,IAAK,IAAI2E,EAAI,EAAGA,EAAI8W,EAAKnb,SAAUqE,EAMjC,IAJA3E,EAAUA,GAAU,EAAKyb,EAAK9W,GAC9B+gE,GAAQ,EAGDA,EAAOohB,GACZphB,GAAQohB,EACRxhF,GAAOyiB,EAASg3B,EAAQ/+C,GAAU0lE,GAUtC,GALIA,IACFpgE,GAAOyiB,EAASg3B,EAAQ/+C,GAAW8mF,EAAcphB,IAI/CgwB,EACF,KAAQpwF,EAAIhF,OAASwmF,EAAe,GAClCxhF,GAAO,IAIX,OAAOA,GAmBI,CAAOF,EAAO2iB,EAAU++D,GAEjCr2E,OAAQrL,GAzGG,EAACkV,EAAQyN,EAAU++D,EAAap+E,KAG7C,MAAMitF,EAAQ,CAAC,EACf,IAAK,IAAIhxF,EAAI,EAAGA,EAAIojB,EAASznB,SAAUqE,EACrCgxF,EAAM5tE,EAASpjB,IAAMA,EAIvB,IAAIkM,EAAMyJ,EAAOha,OACjB,KAA2B,MAApBga,EAAOzJ,EAAM,MAChBA,EAIJ,MAAMvL,EAAM,IAAIzB,WAAYgN,EAAMi2E,EAAc,EAAK,GAGrD,IAAIphB,EAAO,EACP1lE,EAAS,EACT41F,EAAU,EACd,IAAK,IAAIjxF,EAAI,EAAGA,EAAIkM,IAAOlM,EAAG,CAE5B,MAAMuD,EAAQytF,EAAMr7E,EAAO3V,IAC3B,QAAcuK,IAAVhH,EACF,MAAM,IAAIw2B,YAAY,OAAOh2B,eAI/B1I,EAAUA,GAAU8mF,EAAe5+E,EACnCw9D,GAAQohB,EAGJphB,GAAQ,IACVA,GAAQ,EACRpgE,EAAIswF,KAAa,IAAQ51F,GAAU0lE,EAEvC,CAGA,GAAIA,GAAQohB,GAAe,IAAQ9mF,GAAW,EAAI0lE,EAChD,MAAM,IAAIhnC,YAAY,0BAGxB,OAAOp5B,GA8DI,CAAOF,EAAO2iB,EAAU++D,EAAap+E,KCrVzB,GAAM,CAC7BA,KAAM,YACNkP,OAAQ,IACRmQ,SAAU,+DAGgB,GAAM,CAChCrf,KAAM,eACNkP,OAAQ,IACRmQ,SAAU,+DCTU,GAAQ,CAC5BnQ,OAAQ,IACRlP,KAAM,SACNqf,SAAU,mCACV++D,YAAa,IAGY,GAAQ,CACjClvE,OAAQ,IACRlP,KAAM,cACNqf,SAAU,mCACV++D,YAAa,IAGU,GAAQ,CAC/BlvE,OAAQ,IACRlP,KAAM,YACNqf,SAAU,oCACV++D,YAAa,IAGe,GAAQ,CACpClvE,OAAQ,IACRlP,KAAM,iBACNqf,SAAU,oCACV++D,YAAa,IAGU,GAAQ,CAC/BlvE,OAAQ,IACRlP,KAAM,YACNqf,SAAU,mCACV++D,YAAa,IAGe,GAAQ,CACpClvE,OAAQ,IACRlP,KAAM,iBACNqf,SAAU,mCACV++D,YAAa,IAGa,GAAQ,CAClClvE,OAAQ,IACRlP,KAAM,eACNqf,SAAU,oCACV++D,YAAa,IAGkB,GAAQ,CACvClvE,OAAQ,IACRlP,KAAM,oBACNqf,SAAU,oCACV++D,YAAa,IAGQ,GAAQ,CAC7BlvE,OAAQ,IACRlP,KAAM,UACNqf,SAAU,mCACV++D,YAAa,ICRD,IAAI51D,QAwBX,MAAM,GAQX/nB,YAAasgB,EAASne,EAAMmrE,EAAWj1D,GAErCnY,KAAKiC,KAAOA,EAEZjC,KAAKogB,QAAUA,EAEfpgB,KAAKotE,UAAYA,EAEjBptE,KAAKmY,MAAQA,EAKbnY,KAAK,KAAOmY,CACd,CAQIk1D,YACF,OAAOrtE,IACT,CAGI2R,iBACF,OAAO3R,KAAKmY,MAAMxG,UACpB,CAGI/C,iBACF,OAAO5O,KAAKmY,MAAMvJ,UACpB,CAKA0+D,OACE,OAAQttE,KAAKogB,SACX,KAAK,EACH,OAA4D,KAE9D,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,UAAEmrE,GAAcptE,KAE5B,GAAIiC,IAAS,gBACX,MAAM,IAAI1J,MAAM,4CAIlB,GAAI60E,EAAUnrE,OAAS,iBACrB,MAAM,IAAI1J,MAAM,sDAGlB,OACE,GAAIk1E,SAC8C,EAGtD,CACA,QACE,MAAMl1E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAKAstD,OACE,OAAQ1tE,KAAKogB,SACX,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,OAAE00B,GAAW32B,KAAKotE,UACxBA,EAAY6B,OAAOtwE,OAAOsD,EAAM00B,GACtC,OACE,GAAIg3C,SAAS3tE,KAAKiC,KAAMmrE,EAE5B,CACA,KAAK,EACH,OAAgD,KAElD,QACE,MAAM70E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAMA9I,OAAQs2D,GACN,OAAO,GAAIt2D,OAAOtX,KAAM4tE,EAC1B,CAWA5/D,cAAeqb,EAAMukD,GACnB,MAAMC,EACiE,EAGvE,OACEA,GACAxkD,EAAKpnB,OAAS4rE,EAAQ5rE,MACtBonB,EAAKjJ,UAAYytD,EAAQztD,SACzB6uD,OAAO33D,OAAO+R,EAAK+jD,UAAWS,EAAQT,UAE1C,CAMA36D,SAAUm6D,GACR,OAAO,WAAO5sE,KAAM4sE,EACtB,CAEA70D,SACE,MAAO,CAAE,IAAK,WAAO/X,MACvB,CAEA2sE,OACE,OAAO3sE,IACT,CAEYuzB,IAAP/8B,OAAO+8B,eACV,MAAO,KACT,CAIA,CAAC/8B,OAAOs3E,IAAI,iCACV,MAAO,OAAO9tE,KAAKyS,aACrB,CAoBAzE,aAAcjS,GACZ,GAAa,MAATA,EACF,OAAO,KAGT,MAAM8C,EAA2B,EACjC,GAAIA,aAAiB,GAEnB,OAAOA,EACF,GAAmB,MAAdA,EAAM,MAAgBA,EAAM,OAASA,EAAMsZ,OAAUtZ,EAAMwuE,QAAUxuE,EAAO,CAMtF,MAAM,QAAEuhB,EAAO,KAAEne,EAAI,UAAEmrE,EAAS,MAAEj1D,GAAUtZ,EAC5C,OAAO,IAAI,GACTuhB,EACAne,EACwC,EACxCkW,GAAS,cAAUiI,EAASne,EAAMmrE,EAAUj1D,OAEhD,CAAO,IAAyB,IAArBtZ,EAAM,eAAqB,CAIpC,MAAM,QAAEuhB,EAAO,UAAEgtD,EAAS,KAAEnrE,GAASpD,EAC/B83B,EAEHs4C,OAAO7nE,OAAOgmE,GACjB,OAAO,GAAIzuE,OAAOyhB,EAASne,EAAM00B,EACnC,CAGE,OAAO,IAEX,CAaA3oB,cAAeoS,EAASne,EAAM00B,GAC5B,GAAoB,iBAAT10B,EACT,MAAM,IAAI1J,MAAM,yCAGlB,KAAMo+B,EAAOxe,iBAAiB3d,YAC5B,MAAM,IAAIjC,MAAM,kBAGlB,OAAQ6nB,GACN,KAAK,EACH,GAAIne,IAAS,gBACX,MAAM,IAAI1J,MACR,wCAAwC,mCAG1C,OAAO,IAAI,GAAI6nB,EAASne,EAAM00B,EAAQA,EAAOxe,OAGjD,KAAK,EAAG,CACN,MAAMA,EAAQ,cAAUiI,EAASne,EAAM00B,EAAOxe,OAC9C,OAAO,IAAI,GAAIiI,EAASne,EAAM00B,EAAQxe,EACxC,CACA,QACE,MAAM,IAAI5f,MAAM,mBAGtB,CASAyV,gBAAiB2oB,GACf,OAAO,GAAIh4B,OAAO,EAAG,gBAAag4B,EACpC,CAYA3oB,gBAAiB/L,EAAM00B,GACrB,OAAO,GAAIh4B,OAAO,EAAGsD,EAAM00B,EAC7B,CAgBA3oB,cAAemK,GACb,MAAO+0D,EAAKe,GAAa,GAAIC,YAAY/1D,GACzC,GAAI81D,EAAUh3E,OACZ,MAAM,IAAIsB,MAAM,oBAElB,OAAO20E,CACT,CAkBAl/D,mBAAoBmK,GAClB,MAAMg2D,EAAQ,GAAIC,aAAaj2D,GACzBk2D,EAAaF,EAAM12E,KAAO02E,EAAMG,cAChCC,EAAiB7B,OACrBv0D,EAAM7gB,SAAS+2E,EAAYA,EAAaF,EAAMG,gBAEhD,GAAIC,EAAe3/D,aAAeu/D,EAAMG,cACtC,MAAM,IAAI/1E,MAAM,oBAElB,MAAMi2E,EAAcD,EAAej3E,SACjC62E,EAAMG,cAAgBH,EAAMM,YAExB93C,EAAS,IAAIs4C,OAAOA,OACxBd,EAAMO,cACNP,EAAMM,WACND,EACAD,GAMF,MAAO,CAHa,IAAlBJ,EAAM/tD,QACF,GAAIqtD,SAAyD,GAC7D,GAAIE,SAASQ,EAAM7C,MAAO30C,GACaxe,EAAM7gB,SAAS62E,EAAM12E,MACpE,CAkBAuW,oBAAqB2gE,GACnB,IAAIz3E,EAAS,EACb,MAAMyO,EAAO,KACX,MAAOrK,EAAGrE,GAAU24F,OAAOxoF,OAAOunE,EAAar3E,SAASJ,IAExD,OADUD,EACHqE,GAGT,IAAI8kB,EAA4Bza,IAC5B2lE,EAAyB,gBAS7B,GARuC,KAAd,GAEI,EAClB,GAEiB3lE,IAGZ,IAAZya,GAA6B,IAAZA,EACnB,MAAM,IAAIxP,WAAW,uBAAuBwP,KAG9C,MAAMiuD,EAAan3E,EACbw3E,EAAkC/oE,IAClC8oE,EAAa9oE,IACblO,EAAOP,EAASu3E,EAGtB,MAAO,CAAEruD,UAASkrD,QAAOoD,gBAAeD,aAAYH,cAF9B72E,EAAO42E,EAEsC52E,OACrE,CAiBAuW,aAAc7P,EAAQyuE,GACpB,MAAOr+D,EAAQ4J,GAAS,oBAAgBha,EAAQyuE,GAE1CM,EAAM,GAAI9lE,OAAO+Q,GAEvB,GAAoB,IAAhB+0D,EAAI9sD,SAA+B,MAAdjiB,EAAO,GAC9B,MAAM5F,MAAM,0DAMd,OAFA,cAAU20E,GAAKrxE,IAAI0S,EAAQpQ,GAEpB+uE,CACT,EAqGgB12E,OAAOs3E,IAAI,oCCjkBJ,GAAK,CAC5BzuE,KAAM,aACN4C,KAAM,GACNW,OAAS7G,GAZX,SAA+B8zF,GAC7B,MAAM13E,EAAQ,IAAIvf,MAAM,GACxB,IAAK,IAAI0C,EAAI,EAAGA,EAAI,EAAGA,IACrB6c,EAAM7c,GAAc,IAATu0F,EACXA,IAAmB,EAErB,OAAO,IAAIr1F,WAAW2d,EACxB,CAKqB23E,CAAqB,cAAe/zF,MAHlD,MAMMg0F,GAAa,GAAK,CAC7B1wF,KAAM,cACN4C,KAAM,GACNW,OAAS7G,GAAU,GAAc,eAAgBA,MAI1B,GAAK,CAC5BsD,KAAM,iBACN4C,KAAM,GACNW,OAAS7G,GAAU,GAAc,eAAgBA,IAAQzE,SAAS,EAAG,qBC5BvE2G,eAAe+xF,GAAWj1F,GACtB,aAAcg1F,GAAWntF,OAAO7H,IAI3BjC,MAAM,EAAG,GAETsX,SACT,CACA,MAAM6/E,GAAiBx3E,OAAO,IAqD9B,OAnDA,cAAyBo2E,GACrBqB,QACApwF,YAAY6yC,EAAO3wC,GACfkF,MAAMyrC,EAAO3wC,GACbhC,KAAKkwF,SAAU,QAAW,CACtBC,OAAQH,GACR3zB,KAAMr6D,EAAQouF,iBAPE,GASxB,CACAnyF,UAAUoB,EAAMR,GACZmB,KAAKktE,SAAMrnE,EACX7F,KAAKvI,UAAOoO,EACZ7F,KAAKkvF,cAAWrpF,QACV7F,KAAKkwF,QAAQpuF,IAAIzC,EAAMR,EACjC,CACAZ,UAAUoB,GACN,OAAOW,KAAKkwF,QAAQvvF,IAAItB,EAC5B,CACAkwF,aACI,OAAOvvF,KAAKkwF,QAAQG,WACxB,CACAb,sBACI,OAAOxvF,KAAKkwF,QAAQI,eACxB,CACAb,YACI,OAAOzvF,KAAKkwF,QAAQT,WACxB,CACAxxF,wBACI,UAAW,MAAM,IAAE8D,EAAG,MAAElD,KAAWmB,KAAKkwF,QAAQK,sBACtC,CACFxuF,MACAuzC,MAAOz2C,EAGnB,CACA6wF,mBACI,YAAsB7pF,IAAlB7F,KAAKkvF,WAGTlvF,KAAKkvF,SAAW5iB,GAActsE,KAAKkwF,QAASlwF,KAAMA,KAAKgC,UAF5ChC,KAAKkvF,QAIpB,CACAjxF,YAAayuF,GACT,UAAW,MAAMnlF,KAASooF,GAAM3vF,KAAKkwF,QAASxD,EAAY1sF,KAAMA,KAAKgC,cAC3D,IACCuF,EACH+e,KAAMtmB,KAAKsmB,KAGvB,GAGJroB,eAAgB0xF,GAAMa,EAAQ9D,EAAY+D,EAAWzuF,GACjD,MAAM0uF,EAAWF,EAAOlB,UAClBqB,GAAaH,EAAOI,YAAc,GAAGn+E,SAAS,IAAIxb,OAClDi3F,EAAQ,GACd,IAAI2C,EAAe,GACnB,IAAK,IAAIv1F,EAAI,EAAGA,EAAIo1F,EAASz5F,OAAQqE,IAAK,CACtC,MAAMg6C,EAAQo7C,EAAS/vF,IAAIrF,GAC3B,GAAa,MAATg6C,EACA,SAEJ,MAAMw7C,EAAcx1F,EAAEmX,SAAS,IAAIoa,cAAcggC,SAAS8jC,EAAW,KACrE,GAAIr7C,aAAiB,KAAQ,CACzB,IAAIy7C,EACJ,UAAW,MAAMC,KAAYrB,GAAMr6C,EAAOo3C,EAAY,KAAM1qF,GACxD+uF,EAAQC,EAEZ,GAAa,MAATD,EACA,MAAM,IAAIx4F,MAAM,wDAEpB21F,EAAMx2F,KAAK,CACPiwD,KAAMmpC,EACN3C,MAAO9oF,OAAO0rF,EAAMt5F,MACpB22F,KAAM2C,EAAM7jB,MAEhB2jB,GAAgBE,EAAMt5F,IAC1B,MACK,GA0DmB,mBA1DT69C,EAAMz2C,MA0DP8wF,MA1De,CACzB,MAAMj8E,EAAM4hC,EAAMz2C,MAClB,IAAIoyF,EACJ,UAAW,MAAM1pF,KAASmM,EAAIi8E,MAAMjD,GAChCuE,EAAa1pF,QACP0pF,EAEV,GAAkB,MAAdA,EACA,MAAM,IAAI14F,MAAM,qBAEpB,MAAM24F,EAAQJ,EAAcx7C,EAAMvzC,IAClCmsF,EAAMx2F,KAAK,CACPiwD,KAAMupC,EACN/C,MAAO9oF,OAAO4rF,EAAWx5F,MACzB22F,KAAM6C,EAAW/jB,MAErB2jB,GAAgBI,EAAWx5F,IAC/B,KACK,CACD,MAAMoH,EAAQy2C,EAAMz2C,MACpB,GAAiB,MAAbA,EAAMquE,IACN,SAEJ,MAAMgkB,EAAQJ,EAAcx7C,EAAMvzC,IAC5BtK,EAAOoH,EAAMpH,KACnBy2F,EAAMx2F,KAAK,CACPiwD,KAAMupC,EACN/C,MAAO9oF,OAAO5N,GACd22F,KAAMvvF,EAAMquE,MAEhB2jB,GAAgBp4E,OAAOhhB,GAAQ,EACnC,CACJ,CAGA,MAAM2a,EAAO5X,WAAW8U,KAAKohF,EAASS,WAAW/gF,WAC3CsD,EAAM,IAAI81E,EAAO,CACnBzmF,KAAM,yBACNqP,OACAw2E,OAAQnwE,OAAO+3E,EAAOI,aACtBjI,SAAUsH,GACVpH,MAAO4H,GAAW5H,MAClB9nE,KAAM0vE,GAAW1vE,OAEfujC,EAAO,CACTmnB,KAAM/3D,EAAI02E,UACV+C,MAAOe,GAELv3F,GAAS,IAAAiM,SAAO,IAAAyqF,SAAQ/oC,IACxB4oB,QAAYuf,GAAQ91F,EAAQ+1F,EAAY1qF,GACxCvK,EAAOghB,OAAO9hB,EAAOiY,YAAciiF,OACnC,CACF3jB,MACA6f,OAAQr5E,EACRjc,OAER,CAIA,SAAS60E,GAAckkB,EAAQC,EAAWzuF,GACtC,MAAM0uF,EAAWF,EAAOlB,UAClBqB,GAAaH,EAAOI,YAAc,GAAGn+E,SAAS,IAAIxb,OAClDi3F,EAAQ,GACd,IAAK,IAAI5yF,EAAI,EAAGA,EAAIo1F,EAASz5F,OAAQqE,IAAK,CACtC,MAAMg6C,EAAQo7C,EAAS/vF,IAAIrF,GAC3B,GAAa,MAATg6C,EACA,SAEJ,MAAMw7C,EAAcx1F,EAAEmX,SAAS,IAAIoa,cAAcggC,SAAS8jC,EAAW,KACrE,GAAIr7C,aAAiB,KAAQ,CACzB,MAAM79C,EAAO60E,GAAch3B,EAAO,KAAMtzC,GACxCksF,EAAMx2F,KAAK,CACPiwD,KAAMmpC,EACN3C,MAAO9oF,OAAO5N,GACd22F,KAA6B,IAAvBpsF,EAAQ2qF,WAAmBwC,GAASC,IAElD,MACK,GAAiC,mBAAtB95C,EAAMz2C,MAAM8wF,MAAsB,CAC9C,MACMl4F,EADM69C,EAAMz2C,MACDqwF,WACjBhB,EAAMx2F,KAAK,CACPiwD,KAAMmpC,EAAcx7C,EAAMvzC,IAC1BosF,MAAO9oF,OAAO5N,GACd22F,KAA6B,IAAvBpsF,EAAQ2qF,WAAmBwC,GAASC,IAElD,KACK,CACD,MAAMvwF,EAAQy2C,EAAMz2C,MACpB,GAAiB,MAAbA,EAAMquE,IACN,SAEJ,MAAMgkB,EAAQJ,EAAcx7C,EAAMvzC,IAC5BtK,EAAOoH,EAAMpH,KACnBy2F,EAAMx2F,KAAK,CACPiwD,KAAMupC,EACN/C,MAAO9oF,OAAO5N,GACd22F,KAAMvvF,EAAMquE,KAEpB,CACJ,CAGA,MAAM96D,EAAO5X,WAAW8U,KAAKohF,EAASS,WAAW/gF,WAC3CsD,EAAM,IAAI81E,EAAO,CACnBzmF,KAAM,yBACNqP,OACAw2E,OAAQnwE,OAAO+3E,EAAOI,aACtBjI,SAAUsH,GACVpH,MAAO4H,GAAW5H,MAClB9nE,KAAM0vE,GAAW1vE,OAMrB,OAJe,IAAAne,SAAO,IAAAyqF,SAAQ,CAC1B5hB,KAAM/3D,EAAI02E,UACV+C,MAAOe,KAEGj3F,MAClB,CClNOgH,eAAemzF,GAAY97C,EAAO5hC,EAAK29E,EAAWrvF,GACrD,IAAIsvF,EAAS59E,EACTA,aAAe27E,IAAW37E,EAAIg8E,mBAAqB2B,IACnDC,QAiBRrzF,eAA8BszF,EAAQvvF,GAClC,MAAMsvF,EAAS,IAAI,GAAW,CAC1BxC,KAAMyC,EAAOzC,KACbp7E,KAAK,EACLvF,OAAQojF,EAAOpjF,OACf8gF,UAAWsC,EAAOtC,UAClB3oE,KAAMirE,EAAOjrE,KACbyoE,MAAOwC,EAAOxC,MACdC,MAAM,EACNnG,MAAO0I,EAAO1I,MACd9nE,KAAMwwE,EAAOxwE,MACd/e,GACH,UAAW,MAAM,IAAED,EAAG,MAAEuzC,KAAWi8C,EAAOC,wBAChCF,EAAOxvF,IAAIC,EAAKuzC,GAE1B,OAAOg8C,CACX,CAjCuBG,CAAe/9E,EAAK1R,IAEvC,MAAMmM,EAASmjF,EAAOnjF,OACtB,GAAc,MAAVA,EAAgB,CAChB,GAAImjF,IAAW59E,EAAK,CAIhB,GAHa,MAAT4hC,IACAA,EAAMnnC,OAASmjF,GAEK,MAApBA,EAAOrC,UACP,MAAM,IAAI12F,MAAM,6BAEd4V,EAAOrM,IAAIwvF,EAAOrC,UAAWqC,EACvC,CACA,OAAOF,GAAYE,EAAQnjF,EAAQkjF,EAAWrvF,EAClD,CACA,OAAOsvF,CACX,CCrBO,MAAMI,GAAmB,CAACprE,EAAO,KAE7BA,EAAKrnB,MAAM,aAAa+N,OAAOkX,SCE1CjmB,eAAe0zF,GAAU3yF,EAAM4yF,EAAM5vF,GACjC,MAAM6vF,EAAYH,GAAiB1yF,EAAKsnB,MAAQ,IAC1C2wB,EAAY46C,EAAU56F,OAAS,EACrC,IAAIkX,EAASyjF,EACTE,EAAc,GAClB,IAAK,IAAIx2F,EAAI,EAAGA,EAAIu2F,EAAU56F,OAAQqE,IAAK,CACvC,MAAMy2F,EAAWF,EAAUv2F,GAC3Bw2F,GAAe,GAAmB,KAAhBA,EAAqB,IAAM,KAAKC,IAClD,MAAMv6F,EAAQ8D,IAAM27C,EAIpB,GAHA9oC,EAAO4gF,OAAQ,EACf5gF,EAAO++D,SAAMrnE,EACbsI,EAAO1W,UAAOoO,EACVrO,QACM2W,EAAOrM,IAAIiwF,EAAU/yF,GAC3B4yF,QAAaR,GAAY,KAAMjjF,EAAQnM,EAAQgwF,yBAA0BhwF,OAExE,CACD,IAAI0R,QAAYvF,EAAOxN,IAAIoxF,GACf,MAAPr+E,GAAkBA,aAAem7E,KAClCn7E,EAAM,IAAI27E,GAAQ,CACdP,MAAM,EACNp7E,KAAK,EACLvF,SACA8gF,UAAW8C,EACXzrE,KAAMwrE,EACN/C,OAAO,EACPC,MAAM,EACNnG,MAAOn1E,GAAKq5E,QAAQlE,MACpB9nE,KAAMrN,GAAKq5E,QAAQhsE,MACpB/e,UAEDmM,EAAOrM,IAAIiwF,EAAUr+E,GAC3BvF,EAASuF,CACb,CACJ,CACA,OAAOk+E,CACX,CACA3zF,eAAgBg0F,GAAcL,EAAMlF,GAC1BkF,aAAgB/C,SAMf+C,EAAKjC,MAAMjD,IALqB,IAA/BkF,EAAK7E,QAAQhD,sBACP6H,EAKlB,CCbO3zF,eAAgBi0F,GAAS/zF,EAAQuuF,EAAY1qF,EAAU,CAAC,GAC3D,IAAImwF,EAEAA,EADA37F,OAAOuQ,iBAAiB5I,GAAU3H,OAAOiW,YAAYtO,EACxCA,EAGA,CAACA,GAElB,MAAMi0F,EAAoBpwF,EAAQowF,oBAAqB,EACjDJ,EAA2BhwF,EAAQgwF,0BAA4B,OAC/D5B,EAAkBpuF,EAAQouF,iBAAmB,EAC7CzD,EAAa3qF,EAAQ2qF,YAAc,EACnCM,EAAYjrF,EAAQirF,YAAa,EACjCC,EAAWlrF,EAAQkrF,UAAY,OAC/BmF,EAAwBrwF,EAAQqwF,uBAAyB,GACzDxE,EAAwB7rF,EAAQ6rF,uBAAyB,GACzDG,EAAyBhsF,EAAQgsF,yBAA0B,EAC3DsE,EAAUtwF,EAAQswF,SAAWtK,IAC7BuK,EAAiBvwF,EAAQuwF,gBAAkBhE,KAC3CiE,EAAWxwF,EAAQywF,YpBxBtB,SAA2BzwF,GAC9B,OAAO/D,gBAA2BE,EAAQuuF,GACtC,UAAW,MAAMnlF,KAASpJ,EAAQ,CAC9B,IAAImvF,EAQJ,GAPkB,MAAd/lF,EAAM+e,OACNgnE,EAAe/lF,EAAM+e,KACrB/e,EAAM+e,KAAO/e,EAAM+e,KACdrnB,MAAM,KACN+N,QAAOsZ,GAAgB,MAARA,GAAyB,MAATA,IAC/B3uB,KAAK,MAEV22F,GAAgB/mF,GAAQ,CACxB,MAAMnP,EAAO,CACTkuB,KAAM/e,EAAM+e,KACZuiE,MAAOthF,EAAMshF,MACb9nE,KAAMxZ,EAAMwZ,KACZ+rE,QAAS,kBACL,IAAI4F,EAAY,GAChB,UAAW,MAAMpW,KAASt6E,EAAQswF,QAAQtwF,EAAQuwF,eAAelE,GAAuB9mF,EAAMulF,WAAY,CACtG,MAAM6F,EAAmBl6E,OAAO6jE,EAAM1tE,YACtC8jF,GAAaC,EACb3wF,EAAQgrF,aAAa,IAAI,IAAoB,qCAAsC,CAC/E0F,YACAzK,UAAW0K,EACXrsE,KAAM/e,EAAM+e,cAEVg2D,CACV,CACH,CAZQ,GAaTgR,sBAEErvF,SAAYwvF,GAAYr1F,EAAMs0F,EAAY1qF,EACpD,KACK,IAAkB,MAAduF,EAAM+e,KAUX,MAAM,IAAI/tB,MAAM,sDAVS,CACzB,MAAMmb,EAAM,CACR4S,KAAM/e,EAAM+e,KACZuiE,MAAOthF,EAAMshF,MACb9nE,KAAMxZ,EAAMwZ,KACZusE,sBAEErvF,SAAYmvF,GAAW15E,EAAKg5E,EAAY1qF,EAClD,CAGA,CACJ,CACJ,CACJ,CoBvB2C4wF,CAAkB,CACrDN,UACAC,iBACAH,oBACA1E,OAAQ1rF,EAAQ0rF,QAAUe,KAC1Bb,eAAgB5rF,EAAQ4rF,gBAAkBhB,GAAsB,CAC5DD,aACAM,YACAC,WACAF,WAAYhrF,EAAQgrF,aAExBa,wBACAG,yBACArB,aACAK,WAAYhrF,EAAQgrF,aAElB6F,EAAY7wF,EAAQ8wF,aDrBvB,SAA4B9wF,GAC/B,OAAO/D,gBAA4BE,EAAQ03D,GACvC,IAOIk9B,EAPAnB,EAAO,IAAIvC,GAAQ,CACnBP,MAAM,EACNp7E,KAAK,EACL4S,KAAM,GACNyoE,OAAO,EACPC,MAAM,GACPhtF,GAECgxF,GAAa,EACjB,UAAW,MAAMzrF,KAASpJ,EAAQ,CAC9B,GAAa,MAAToJ,EACA,SAIJ,MAAMmM,EAAM,GAAGnM,EAAM+lF,cAAgB,KAAKruF,MAAM,KAAK,GAC1C,MAAPyU,GAAuB,KAARA,IACA,MAAXq/E,GACAA,EAAUr/E,EACVs/E,GAAa,GAERD,IAAYr/E,IACjBs/E,GAAa,IAGrBpB,QAAaD,GAAUpqF,EAAOqqF,EAAM5vF,GAChB,MAAhBuF,EAAMwlF,QAAmBxlF,EAAMwlF,OAAOhD,sBAChCxiF,EAEd,CACA,GAAIvF,EAAQowF,mBAAsBY,GAAcpB,EAAKrC,aAAe,QACzD0C,GAAcL,EAAM/7B,QAG3B,UAAW,MAAMo9B,KAAarB,EAAKJ,kBACd,MAAbyB,UAGGhB,GAAcgB,EAAU39C,MAAOugB,GAGlD,CACJ,CCvB6Cq9B,CAAmB,CACxDd,oBACAJ,2BACA5B,kBACAzD,aACAK,WAAYhrF,EAAQgrF,aAExB,UAAW,MAAMzlF,KAASsrF,EAAU9K,EAAcyK,EAASL,EAAYzF,GAAa2F,GAAwB3F,QAClG,CACFxf,IAAK3lE,EAAM2lE,IACX5mD,KAAM/e,EAAM+e,KACZymE,OAAQxlF,EAAMwlF,OACdt1F,KAAM8P,EAAM9P,KAGxB,CAuBOwG,eAAek1F,GAAWrG,EAASJ,EAAY1qF,EAAU,CAAC,GAC7D,MAAM6M,QAAe,EAAMqjF,GAAS,CAACpF,GAAUJ,EAAY1qF,IAC3D,GAAc,MAAV6M,EACA,MAAM,EAAQ,IAAItW,MAAM,oBAAqB,sBAEjD,OAAOsW,CACX,UC3FO,MClBDukF,GAA0B,CAC5BzG,WAAY,EACZM,WAAW,EACXS,OAAQe,GAAS,CACbC,mBAAoB,OAExB4D,QAAStK,EAAU,CACfC,UAAW,WASZhqF,eAAeo1F,GAASl7E,EAAOu0E,EAAY1qF,EAAU,CAAC,GACzD,MAAM,IAAEkrE,SF2ILjvE,eAA2BlD,EAAK2xF,EAAY1qF,EAAU,CAAC,GAC1D,OAAOmxF,GAAW,CACdrG,QAAS/xF,GACV2xF,EAAY1qF,EACnB,CE/I0BsxF,CAAYn7E,EAAOu0E,EAAY,IAC9C0G,MACApxF,IAEP,OAAOkrE,CACX,CACOjvE,eAAes1F,GAAcp7E,EAAOu0E,EAAY1qF,EAAU,CAAC,GAC9D,MAAM,IAAEkrE,SF8JLjvE,eAAgCu1F,EAAM9G,EAAY1qF,EAAU,CAAC,GAChE,OAAOmxF,GAAW,CACdrG,QAAS0G,GACV9G,EAAY1qF,EACnB,CElK0ByxF,CAAiBt7E,EAAOu0E,EAAY,IACnD0G,MACApxF,IAEP,OAAOkrE,CACX,CAQOjvE,eAAey1F,GAAahgF,EAAKg5E,EAAY1qF,EAAU,CAAC,GAC3D,MAAM,IAAEkrE,SF6FLjvE,eAA+B6uF,EAASJ,EAAY1qF,EAAU,CAAC,GAClE,MAAM6M,QAAe,EAAMqjF,GAAS,CAACpF,GAAUJ,EAAY1qF,IAC3D,GAAc,MAAV6M,EACA,MAAM,EAAQ,IAAItW,MAAM,oBAAqB,sBAEjD,OAAOsW,CACX,CEnG0B8kF,CAAgB,IAC/BjgF,EACH4S,KAAM5S,EAAI4S,MAAQ,KACnBomE,EAAY,IACR0G,MACApxF,IAEP,OAAOkrE,CACX,CCjCA,OAhBA,SAAc/uE,GACV,GAHsC,MAGlBA,EAHP3H,OAAOuQ,eAIhB,MAAO,WACH,IAAIyO,EACJ,UAAW,MAAMjO,KAASpJ,EACtBqX,EAAMjO,EAEV,OAAOiO,CACV,EANM,GAQX,IAAIA,EACJ,IAAK,MAAMjO,KAASpJ,EAChBqX,EAAMjO,EAEV,OAAOiO,CACX,cCfA,MAYa05D,GAZA,ECwDb,OAxDgBjxE,MAAOivE,EAAK7tE,EAAMinB,EAAMstE,EAAW7tF,EAAS8tF,EAAOnH,EAAY1qF,KAC3E,MAAM6zD,QAAc62B,EAAW/rF,IAAIusE,EAAKlrE,GAClCo5C,EAAS,UAAeya,GAC9B,IAAIi+B,EAAY14C,EACZ24C,EAAUztE,EACd,KAAOstE,EAAU38F,OAAS,GAAG,CACzB,MAAM0vB,EAAOitE,EAAU,GACvB,KAAIjtE,KAAQmtE,GA+BR,MAAM,EAAQ,IAAIv7F,MAAM,qBAAqBouB,wBAA2BumD,KAAQ,eA/B7D,CAEnB0mB,EAAUx0F,QACV20F,EAAU,GAAGA,KAAWptE,IACxB,MAAMqtE,EAAe7mB,GAAIE,MAAMymB,EAAUntE,IACzC,GAAoB,MAAhBqtE,EACA,MAAO,CACHzsF,MAAO,CACHxE,KAAM,SACN1D,OACAinB,OACA4mD,MACA5oB,KAAMuR,EACNg+B,QACAp8F,KAAMghB,OAAOo9C,EAAM5+D,QACnB61F,QAAS7uF,wBACCm9C,CACV,GAEJz1C,KAAM,CACFunE,IAAK8mB,EACL30F,KAAMsnB,EACNL,KAAMytE,EACNH,cAIZE,EAAYA,EAAUntE,EAC1B,CAKJ,CACA,MAAO,CACHpf,MAAO,CACHxE,KAAM,SACN1D,OACAinB,OACA4mD,MACA5oB,KAAMuR,EACNg+B,QACAp8F,KAAMghB,OAAOo9C,EAAM5+D,QACnB61F,QAAS7uF,wBACCm9C,CACV,GAEP,ECvCL,OAlBA,SAA8Bya,EAAOo+B,EAAYC,EAAgBC,GAC7D,MAAMC,EAAc37E,OAAOo9C,EAAM5+D,QAC3Bo9F,EAAW57E,OAAOw7E,EAAaG,GACrC,OAAIF,GAAkBG,GAAYF,EAAeF,EAGtC,IAAIz5F,WAAW,IAEtB25F,GAAgBF,GAAcE,EAAeE,IAE7Cx+B,EAAQA,EAAMv+D,SAAS,EAAG+N,OAAO8uF,EAAeF,KAEhDC,GAAkBD,GAAcC,EAAiBG,IAEjDx+B,EAAQA,EAAMv+D,SAAS+N,OAAO6uF,EAAiBD,KAE5Cp+B,EACX,ECWA,OA3BgC,CAACp+D,EAAMP,EAAS,EAAGD,EAASQ,KACxD,MAAMyyF,EAAWzxE,OAAOhhB,GAClBkY,EAAQ8I,OAAOvhB,GAAU,GAC/B,IAAIsQ,EAAMiR,OAAOxhB,GAOjB,GANIuQ,IAAQ0iF,IACR1iF,EAAMmI,EAAQnI,GAEdA,EAAM0iF,IACN1iF,EAAM0iF,GAENv6E,EAAQ,GACR,MAAM,EAAQ,IAAIpX,MAAM,6CAA8C,sBAE1E,GAAIoX,EAAQu6E,EACR,MAAM,EAAQ,IAAI3xF,MAAM,0CAA2C,sBAEvE,GAAIiP,EAAM,GACN,MAAM,EAAQ,IAAIjP,MAAM,6CAA8C,sBAE1E,GAAIiP,EAAM0iF,EACN,MAAM,EAAQ,IAAI3xF,MAAM,0CAA2C,sBAEvE,MAAO,CACHoX,QACAnI,MACH,ECUL,OAlBgBvJ,MAAOivE,EAAK7tE,EAAMinB,EAAMstE,EAAW7tF,EAAS8tF,EAAOnH,EAAY1qF,KAC3E,GAAI4xF,EAAU38F,OAAS,EACnB,MAAM,EAAQ,IAAIsB,MAAM,iBAAiB+tB,uBAA0B4mD,KAAQ,iBAE/E,MAAMnyE,EAAM,GAAUmyE,EAAIE,UAAUj1D,OACpC,MAAO,CACH5Q,MAAO,CACHxE,KAAM,WACN1D,OACAinB,OACA4mD,MACA4f,SAxBQxoC,EAwBYvpD,EAAI47B,OAvBhC14B,gBAAiC+D,EAAU,CAAC,GACxC,MAAM,MAAE2N,EAAK,IAAEnI,GAAQ,GAAwB88C,EAAKrtD,OAAQ+K,EAAQ9K,OAAQ8K,EAAQ/K,QAC9E8D,EAAM,GAAqBupD,EAAM,GAAI30C,EAAOnI,GAClDxF,EAAQgrF,aAAa,IAAI,IAAoB,oCAAqC,CAC9E0F,UAAWj6E,OAAO1d,EAAI6T,YACtB0lF,WAAY9sF,EAAMmI,EAClBu6E,SAAUzxE,OAAO6rC,EAAK11C,qBAEpB7T,CACV,GAeQ84F,QACAp8F,KAAMghB,OAAO1d,EAAI47B,OAAO1/B,QACxBqtD,KAAMvpD,EAAI47B,SA3BH,IAAC2tB,CA6Bf,ECCL,OAlBgBrmD,MAAOivE,EAAK7tE,EAAMinB,EAAMstE,EAAW7tF,EAAS8tF,EAAOnH,EAAY1qF,KAC3E,GAAI4xF,EAAU38F,OAAS,EACnB,MAAM,EAAQ,IAAIsB,MAAM,iBAAiB+tB,uBAA0B4mD,KAAQ,iBAE/E,MAAMrX,QAAc62B,EAAW/rF,IAAIusE,EAAKlrE,GACxC,MAAO,CACHuF,MAAO,CACHxE,KAAM,MACN1D,OACAinB,OACA4mD,MACA4f,SAxBQxoC,EAwBYuR,EAvB5B53D,gBAAiC+D,EAAU,CAAC,GACxC,MAAM,MAAE2N,EAAK,IAAEnI,GAAQ,GAAwB88C,EAAKrtD,OAAQ+K,EAAQ9K,OAAQ8K,EAAQ/K,QAC9E8D,EAAM,GAAqBupD,EAAM,GAAI30C,EAAOnI,GAClDxF,EAAQgrF,aAAa,IAAI,IAAoB,+BAAgC,CACzE0F,UAAWj6E,OAAO1d,EAAI6T,YACtB0lF,WAAY9sF,EAAMmI,EAClBu6E,SAAUzxE,OAAO6rC,EAAK11C,qBAEpB7T,CACV,GAeQ84F,QACAp8F,KAAMghB,OAAOo9C,EAAM5+D,QACnBqtD,KAAMuR,IA3BC,IAACvR,CA6Bf,ECjCL,MAAM,GAAQ,IAAI9pD,WAAW,GAUvB,GAAUskD,IACd,MAAMwrC,EAAQxrC,EAAI1U,MAAM,OACxB,OAAOkgD,EAAQ,IAAI9vF,WAAW8vF,EAAMv6E,KAAIgC,GAAK0C,SAAS1C,EAAG,OAAQ,ICZnE,IAAI,GAOJ,SAAS,EAAO8f,EAAK51B,EAAK/E,GACxB+E,EAAMA,GAAO,GAEb,IAAImzE,EADJl4E,EAASA,GAAU,EAGnB,KAAM26B,GAAO,IACX51B,EAAI/E,KAAmB,IAAN26B,EAAc,GAC/BA,GAAO,IAET,KAAMA,EAAM,IACV51B,EAAI/E,KAAmB,IAAN26B,EAAc,GAC/BA,KAAS,EAMX,OAJA51B,EAAI/E,GAAgB,EAAN26B,EAEd,EAAO1Z,MAAQjhB,EAASk4E,EAAY,EAE7BnzE,CACT,EAvBI,GAAM,IAEN,IAAS,IACT,GAAMhD,KAAKqhB,IAAI,EAAG,IAsBtB,IAAI,GAKJ,SAAS,EAAKvf,EAAK7D,GACjB,IAII6a,EAJAyD,EAAS,EAETpW,EAAS,EACTowE,EAFAt4E,EAASA,GAAU,EAInBiyB,EAAIpuB,EAAI9D,OAEZ,EAAG,CACD,GAAIu4E,GAAWrmD,EAEb,MADA,EAAKhR,MAAQ,EACP,IAAIvH,WAAW,2BAEvBmB,EAAIhX,EAAIy0E,KACRh6D,GAAOpW,EAAQ,IACV2S,EAAI,KAAW3S,GACf2S,EAAI,IAAU9Y,KAAKqhB,IAAI,EAAGlb,GAC/BA,GAAS,CACX,OAAS2S,GAAK,IAId,OAFA,EAAKoG,MAAQq3D,EAAUt4E,EAEhBse,CACT,EA1BI,GAAQ,IACR,GAAS,IA2Bb,IAAI,GAAKvc,KAAKqhB,IAAI,EAAI,GAClB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IACjB,GAAKrhB,KAAKqhB,IAAI,EAAG,IAyBrB,GARa,CACT1X,OAAQ,GACRwE,OAAQ,GACRgpE,eAlBS,SAAUvxE,GACrB,OACEA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACbA,EAAQ,GAAK,EACA,EAEjB,GCzEO,MAUM,GAAW,CAACyxE,EAAK1pE,EAAQ1P,EAAS,KAC7C,UAAco5E,EAAK1pE,EAAQ1P,GACpB0P,GAOI,GAAkB0pE,GACtB,kBAAsBA,GCjBlB,GAAS,CAACruE,EAAM00B,KAC3B,MAAMl/B,EAAOk/B,EAAO/nB,WACdmgE,EAAa,GAAsB9sE,GACnC+sE,EAAeD,EAAa,GAAsBt3E,GAElD0gB,EAAQ,IAAI3d,WAAWw0E,EAAev3E,GAK5C,OAJA,GAAgBwK,EAAMkW,EAAO,GAC7B,GAAgB1gB,EAAM0gB,EAAO42D,GAC7B52D,EAAMtc,IAAI86B,EAAQq4C,GAEX,IAAI,GAAO/sE,EAAMxK,EAAMk/B,EAAQxe,EAAK,EAuDtC,MAAM,GASXrY,YAAamC,EAAMxK,EAAMk/B,EAAQxe,GAC/BnY,KAAKiC,KAAOA,EACZjC,KAAKvI,KAAOA,EACZuI,KAAK22B,OAASA,EACd32B,KAAKmY,MAAQA,CACf,EC/EK,MAAM,GAAO,EAAG9Y,OAAM4C,OAAMW,YAAa,IAAI,GAAOvD,EAAM4C,EAAMW,GAWhE,MAAM,GAOX9C,YAAaT,EAAM4C,EAAMW,GACvB5C,KAAKX,KAAOA,EACZW,KAAKiC,KAAOA,EACZjC,KAAK4C,OAASA,CAChB,CAMA+zB,OAAQ56B,GACN,GAAIA,aAAiBvB,WAAY,CAC/B,MAAMqU,EAAS7O,KAAK4C,OAAO7G,GAC3B,OAAO8S,aAAkBrU,WACrB,GAAcwF,KAAKiC,KAAM4M,GAEzBA,EAAOgW,MAAK8R,GAAU,GAAc32B,KAAKiC,KAAM00B,IACrD,CACE,MAAMp+B,MAAM,oCAGhB,ECyEF,IAIA,GAzHA,SAAegyF,EAAUlrF,GACvB,GAAIkrF,EAAStzF,QAAU,IAAO,MAAM,IAAI0K,UAAU,qBAElD,IADA,IAAI6oF,EAAW,IAAIhwF,WAAW,KACrB4Z,EAAI,EAAGA,EAAIo2E,EAASvzF,OAAQmd,IACnCo2E,EAASp2E,GAAK,IAEhB,IAAK,IAAI9Y,EAAI,EAAGA,EAAIivF,EAAStzF,OAAQqE,IAAK,CACxC,IAAI+S,EAAIk8E,EAAS9pC,OAAOnlD,GACpBmvF,EAAKp8E,EAAE7S,WAAW,GACtB,GAAqB,MAAjBgvF,EAASC,GAAe,MAAM,IAAI9oF,UAAU0M,EAAI,iBACpDm8E,EAASC,GAAMnvF,CACjB,CACA,IAAIipD,EAAOgmC,EAAStzF,OAChByzF,EAASH,EAAS9pC,OAAO,GACzBkqC,EAAS1xF,KAAKN,IAAI4rD,GAAQtrD,KAAKN,IAAI,KACnCiyF,EAAU3xF,KAAKN,IAAI,KAAOM,KAAKN,IAAI4rD,GA6CvC,SAASsmC,EAAc1sF,GACrB,GAAsB,iBAAXA,EAAuB,MAAM,IAAIwD,UAAU,mBACtD,GAAsB,IAAlBxD,EAAOlH,OAAgB,OAAO,IAAIuD,WACtC,IAAIswF,EAAM,EAEV,GAAoB,MAAhB3sF,EAAO2sF,GAAX,CAIA,IAFA,IAAIC,EAAS,EACT9zF,EAAS,EACNkH,EAAO2sF,KAASJ,GACrBK,IACAD,IAMF,IAHA,IAAIrzF,GAAU0G,EAAOlH,OAAS6zF,GAAOH,EAAU,IAAO,EAClDK,EAAO,IAAIxwF,WAAW/C,GAEnB0G,EAAO2sF,IAAM,CAElB,IAAIG,EAAQT,EAASrsF,EAAO3C,WAAWsvF,IAEvC,GAAc,MAAVG,EAAiB,OAErB,IADA,IAAI3vF,EAAI,EACC4vF,EAAMzzF,EAAO,GAAc,IAAVwzF,GAAe3vF,EAAIrE,KAAqB,IAATi0F,EAAaA,IAAO5vF,IAC3E2vF,GAAU1mC,EAAOymC,EAAKE,KAAU,EAChCF,EAAKE,GAAQD,EAAQ,MAAS,EAC9BA,EAASA,EAAQ,MAAS,EAE5B,GAAc,IAAVA,EAAe,MAAM,IAAI1yF,MAAM,kBACnCtB,EAASqE,EACTwvF,GACF,CAEA,GAAoB,MAAhB3sF,EAAO2sF,GAAX,CAGA,IADA,IAAIK,EAAM1zF,EAAOR,EACVk0F,IAAQ1zF,GAAsB,IAAduzF,EAAKG,IAC1BA,IAIF,IAFA,IAAIC,EAAM,IAAI5wF,WAAWuwF,GAAUtzF,EAAO0zF,IACtC/2E,EAAI22E,EACDI,IAAQ1zF,GACb2zF,EAAIh3E,KAAO42E,EAAKG,KAElB,OAAOC,CAX2B,CA5BA,CAwCpC,CAMA,MAAO,CACLxoF,OAhGF,SAAiBzE,GAMf,GALIA,aAAkB3D,aAAuB6W,YAAYC,OAAOnT,GAC9DA,EAAS,IAAI3D,WAAW2D,EAAOxH,OAAQwH,EAAOwT,WAAYxT,EAAOyQ,YACxDhW,MAAM+S,QAAQxN,KACvBA,EAAS3D,WAAW8U,KAAKnR,OAErBA,aAAkB3D,YAAe,MAAM,IAAImH,UAAU,uBAC3D,GAAsB,IAAlBxD,EAAOlH,OAAgB,MAAO,GAMlC,IAJA,IAAI8zF,EAAS,EACT9zF,EAAS,EACTo0F,EAAS,EACTC,EAAOntF,EAAOlH,OACXo0F,IAAWC,GAA2B,IAAnBntF,EAAOktF,IAC/BA,IACAN,IAMF,IAHA,IAAItzF,GAAS6zF,EAAOD,GAAUT,EAAU,IAAO,EAC3CW,EAAM,IAAI/wF,WAAW/C,GAElB4zF,IAAWC,GAAM,CAItB,IAHA,IAAIL,EAAQ9sF,EAAOktF,GAEf/vF,EAAI,EACCkwF,EAAM/zF,EAAO,GAAc,IAAVwzF,GAAe3vF,EAAIrE,KAAqB,IAATu0F,EAAaA,IAAOlwF,IAC3E2vF,GAAU,IAAMM,EAAIC,KAAU,EAC9BD,EAAIC,GAAQP,EAAQ1mC,IAAU,EAC9B0mC,EAASA,EAAQ1mC,IAAU,EAE7B,GAAc,IAAV0mC,EAAe,MAAM,IAAI1yF,MAAM,kBACnCtB,EAASqE,EACT+vF,GACF,CAGA,IADA,IAAII,EAAMh0F,EAAOR,EACVw0F,IAAQh0F,GAAqB,IAAb8zF,EAAIE,IACzBA,IAIF,IADA,IAAIpwF,EAAMqvF,EAAOlvC,OAAOuvC,GACjBU,EAAMh0F,IAAQg0F,EAAOpwF,GAAOkvF,EAAS9pC,OAAO8qC,EAAIE,IACvD,OAAOpwF,CACT,EAsDEwvF,aAAcA,EACdzjF,OARF,SAAiB6J,GACf,IAAIta,EAASk0F,EAAa55E,GAC1B,GAAIta,EAAU,OAAOA,EACrB,MAAM,IAAI4B,MAAM,OAAO8G,cACzB,EAMF,ECxGA,MAAM,GAMJS,YAAaT,EAAMkP,EAAQo9E,GACzB3rF,KAAKX,KAAOA,EACZW,KAAKuO,OAASA,EACdvO,KAAK2rF,WAAaA,CACpB,CAMA/oF,OAAQuV,GACN,GAAIA,aAAiB3d,WACnB,MAAO,GAAGwF,KAAKuO,SAASvO,KAAK2rF,WAAWxzE,KAExC,MAAM5f,MAAM,oCAEhB,EAkBF,MAAM,GAMJuH,YAAaT,EAAMkP,EAAQq9E,GAIzB,GAHA5rF,KAAKX,KAAOA,EACZW,KAAKuO,OAASA,OAEgB1I,IAA1B0I,EAAOyhD,YAAY,GACrB,MAAM,IAAIz3D,MAAM,4BAGlByH,KAAK6rF,gBAAyCt9E,EAAOyhD,YAAY,GACjEhwD,KAAK4rF,WAAaA,CACpB,CAKAxkF,OAAQ4kB,GACN,GAAoB,iBAATA,EAAmB,CAC5B,GAAIA,EAAKgkC,YAAY,KAAOhwD,KAAK6rF,gBAC/B,MAAMtzF,MAAM,qCAAqC8zB,KAAK8T,UAAUnU,OAAUhsB,KAAKX,mDAAmDW,KAAKuO,UAEzI,OAAOvO,KAAK4rF,WAAW5/D,EAAKlzB,MAAMkH,KAAKuO,OAAOtX,QAChD,CACE,MAAMsB,MAAM,oCAEhB,CAOA+pC,GAAIupC,GACF,OAAO,GAAG7rE,KAAM6rE,EAClB,EAaF,MAAM,GAIJ/rE,YAAaisF,GACX/rF,KAAK+rF,SAAWA,CAClB,CAOAzpD,GAAIupC,GACF,OAAO,GAAG7rE,KAAM6rE,EAClB,CAMAzkE,OAAQrL,GACN,MAAMwS,EAAgCxS,EAAM,GACtC8vE,EAAU7rE,KAAK+rF,SAASx9E,GAC9B,GAAIs9D,EACF,OAAOA,EAAQzkE,OAAOrL,GAEtB,MAAM6U,WAAW,qCAAqCyb,KAAK8T,UAAUpkC,iCAAqC2C,OAAOyI,KAAKnH,KAAK+rF,0BAE/H,EAUK,MAAM,GAAK,CAACC,EAAMC,IAAU,IAAI,GAA4C,IAC7ED,EAAKD,UAAY,CAAE,CAAmC,EAAOx9E,QAASy9E,MACtEC,EAAMF,UAAY,CAAE,CAAmC,EAAQx9E,QAAS09E,KAcvE,MAAM,GAOXnsF,YAAaT,EAAMkP,EAAQo9E,EAAYC,GACrC5rF,KAAKX,KAAOA,EACZW,KAAKuO,OAASA,EACdvO,KAAK2rF,WAAaA,EAClB3rF,KAAK4rF,WAAaA,EAClB5rF,KAAK4rE,QAAU,IAAI,GAAQvsE,EAAMkP,EAAQo9E,GACzC3rF,KAAK6rE,QAAU,IAAI,GAAQxsE,EAAMkP,EAAQq9E,EAC3C,CAKAhpF,OAAQ7G,GACN,OAAOiE,KAAK4rE,QAAQhpE,OAAO7G,EAC7B,CAKAqL,OAAQrL,GACN,OAAOiE,KAAK6rE,QAAQzkE,OAAOrL,EAC7B,EAaK,MAAM,GAAO,EAAGsD,OAAMkP,SAAQ3L,SAAQwE,YAC3C,IAAI,GAAM/H,EAAMkP,EAAQ3L,EAAQwE,GAWrB,GAAQ,EAAGmH,SAAQlP,OAAMqf,eACpC,MAAM,OAAE9b,EAAM,OAAEwE,GAAW,GAAMsX,EAAUrf,GAC3C,OAAO,GAAK,CACVkP,SACAlP,OACAuD,SAIAwE,OAAQ4kB,GN5LGjuB,KACb,GAAIA,aAAavD,YAAqC,eAAvBuD,EAAE+B,YAAYT,KAAuB,OAAOtB,EAC3E,GAAIA,aAAasT,YAAa,OAAO,IAAI7W,WAAWuD,GACpD,GAAIsT,YAAYC,OAAOvT,GACrB,OAAO,IAAIvD,WAAWuD,EAAEpH,OAAQoH,EAAE4T,WAAY5T,EAAE6Q,YAElD,MAAM,IAAIrW,MAAM,oCAAmC,EMsLjC,CAAO6O,EAAO4kB,KAC/B,EA4GU,GAAU,EAAG3sB,OAAMkP,SAAQkvE,cAAa/+D,cAC5C,GAAK,CACVnQ,SACAlP,OACAuD,OAAQ7G,GAjDG,EAACqW,EAAMsM,EAAU++D,KAC9B,MAAM4O,EAAwC,MAAlC3tE,EAASA,EAASznB,OAAS,GACjCy+C,GAAQ,GAAK+nC,GAAe,EAClC,IAAIxhF,EAAM,GAENogE,EAAO,EACP1lE,EAAS,EACb,IAAK,IAAI2E,EAAI,EAAGA,EAAI8W,EAAKnb,SAAUqE,EAMjC,IAJA3E,EAAUA,GAAU,EAAKyb,EAAK9W,GAC9B+gE,GAAQ,EAGDA,EAAOohB,GACZphB,GAAQohB,EACRxhF,GAAOyiB,EAASg3B,EAAQ/+C,GAAU0lE,GAUtC,GALIA,IACFpgE,GAAOyiB,EAASg3B,EAAQ/+C,GAAW8mF,EAAcphB,IAI/CgwB,EACF,KAAQpwF,EAAIhF,OAASwmF,EAAe,GAClCxhF,GAAO,IAIX,OAAOA,GAmBI,CAAOF,EAAO2iB,EAAU++D,GAEjCr2E,OAAQrL,GAzGG,EAACkV,EAAQyN,EAAU++D,EAAap+E,KAG7C,MAAMitF,EAAQ,CAAC,EACf,IAAK,IAAIhxF,EAAI,EAAGA,EAAIojB,EAASznB,SAAUqE,EACrCgxF,EAAM5tE,EAASpjB,IAAMA,EAIvB,IAAIkM,EAAMyJ,EAAOha,OACjB,KAA2B,MAApBga,EAAOzJ,EAAM,MAChBA,EAIJ,MAAMvL,EAAM,IAAIzB,WAAYgN,EAAMi2E,EAAc,EAAK,GAGrD,IAAIphB,EAAO,EACP1lE,EAAS,EACT41F,EAAU,EACd,IAAK,IAAIjxF,EAAI,EAAGA,EAAIkM,IAAOlM,EAAG,CAE5B,MAAMuD,EAAQytF,EAAMr7E,EAAO3V,IAC3B,QAAcuK,IAAVhH,EACF,MAAM,IAAIw2B,YAAY,OAAOh2B,eAI/B1I,EAAUA,GAAU8mF,EAAe5+E,EACnCw9D,GAAQohB,EAGJphB,GAAQ,IACVA,GAAQ,EACRpgE,EAAIswF,KAAa,IAAQ51F,GAAU0lE,EAEvC,CAGA,GAAIA,GAAQohB,GAAe,IAAQ9mF,GAAW,EAAI0lE,EAChD,MAAM,IAAIhnC,YAAY,0BAGxB,OAAOp5B,GA8DI,CAAOF,EAAO2iB,EAAU++D,EAAap+E,KCrVzB,GAAM,CAC7BA,KAAM,YACNkP,OAAQ,IACRmQ,SAAU,+DAGgB,GAAM,CAChCrf,KAAM,eACNkP,OAAQ,IACRmQ,SAAU,+DCTU,GAAQ,CAC5BnQ,OAAQ,IACRlP,KAAM,SACNqf,SAAU,mCACV++D,YAAa,IAGY,GAAQ,CACjClvE,OAAQ,IACRlP,KAAM,cACNqf,SAAU,mCACV++D,YAAa,IAGU,GAAQ,CAC/BlvE,OAAQ,IACRlP,KAAM,YACNqf,SAAU,oCACV++D,YAAa,IAGe,GAAQ,CACpClvE,OAAQ,IACRlP,KAAM,iBACNqf,SAAU,oCACV++D,YAAa,IAGU,GAAQ,CAC/BlvE,OAAQ,IACRlP,KAAM,YACNqf,SAAU,mCACV++D,YAAa,IAGe,GAAQ,CACpClvE,OAAQ,IACRlP,KAAM,iBACNqf,SAAU,mCACV++D,YAAa,IAGa,GAAQ,CAClClvE,OAAQ,IACRlP,KAAM,eACNqf,SAAU,oCACV++D,YAAa,IAGkB,GAAQ,CACvClvE,OAAQ,IACRlP,KAAM,oBACNqf,SAAU,oCACV++D,YAAa,IAGQ,GAAQ,CAC7BlvE,OAAQ,IACRlP,KAAM,UACNqf,SAAU,mCACV++D,YAAa,ICRD,IAAI51D,QAwBX,MAAM,GAQX/nB,YAAasgB,EAASne,EAAMmrE,EAAWj1D,GAErCnY,KAAKiC,KAAOA,EAEZjC,KAAKogB,QAAUA,EAEfpgB,KAAKotE,UAAYA,EAEjBptE,KAAKmY,MAAQA,EAKbnY,KAAK,KAAOmY,CACd,CAQIk1D,YACF,OAAOrtE,IACT,CAGI2R,iBACF,OAAO3R,KAAKmY,MAAMxG,UACpB,CAGI/C,iBACF,OAAO5O,KAAKmY,MAAMvJ,UACpB,CAKA0+D,OACE,OAAQttE,KAAKogB,SACX,KAAK,EACH,OAA4D,KAE9D,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,UAAEmrE,GAAcptE,KAE5B,GAAIiC,IAAS,oBACX,MAAM,IAAI1J,MAAM,4CAIlB,GAAI60E,EAAUnrE,OAAS,qBACrB,MAAM,IAAI1J,MAAM,sDAGlB,OACE,GAAIk1E,SAC8C,EAGtD,CACA,QACE,MAAMl1E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAKAstD,OACE,OAAQ1tE,KAAKogB,SACX,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,OAAE00B,GAAW32B,KAAKotE,UACxBA,EAAY6B,OAAOtwE,OAAOsD,EAAM00B,GACtC,OACE,GAAIg3C,SAAS3tE,KAAKiC,KAAMmrE,EAE5B,CACA,KAAK,EACH,OAAgD,KAElD,QACE,MAAM70E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAMA9I,OAAQs2D,GACN,OAAO,GAAIt2D,OAAOtX,KAAM4tE,EAC1B,CAWA5/D,cAAeqb,EAAMukD,GACnB,MAAMC,EACiE,EAGvE,OACEA,GACAxkD,EAAKpnB,OAAS4rE,EAAQ5rE,MACtBonB,EAAKjJ,UAAYytD,EAAQztD,SACzB6uD,OAAO33D,OAAO+R,EAAK+jD,UAAWS,EAAQT,UAE1C,CAMA36D,SAAUm6D,GACR,OAAO,eAAO5sE,KAAM4sE,EACtB,CAEA70D,SACE,MAAO,CAAE,IAAK,eAAO/X,MACvB,CAEA2sE,OACE,OAAO3sE,IACT,CAEYuzB,IAAP/8B,OAAO+8B,eACV,MAAO,KACT,CAIA,CAAC/8B,OAAOs3E,IAAI,iCACV,MAAO,OAAO9tE,KAAKyS,aACrB,CAoBAzE,aAAcjS,GACZ,GAAa,MAATA,EACF,OAAO,KAGT,MAAM8C,EAA2B,EACjC,GAAIA,aAAiB,GAEnB,OAAOA,EACF,GAAmB,MAAdA,EAAM,MAAgBA,EAAM,OAASA,EAAMsZ,OAAUtZ,EAAMwuE,QAAUxuE,EAAO,CAMtF,MAAM,QAAEuhB,EAAO,KAAEne,EAAI,UAAEmrE,EAAS,MAAEj1D,GAAUtZ,EAC5C,OAAO,IAAI,GACTuhB,EACAne,EACwC,EACxCkW,GAAS,kBAAUiI,EAASne,EAAMmrE,EAAUj1D,OAEhD,CAAO,IAAyB,IAArBtZ,EAAM,mBAAqB,CAIpC,MAAM,QAAEuhB,EAAO,UAAEgtD,EAAS,KAAEnrE,GAASpD,EAC/B83B,EAEHs4C,OAAO7nE,OAAOgmE,GACjB,OAAO,GAAIzuE,OAAOyhB,EAASne,EAAM00B,EACnC,CAGE,OAAO,IAEX,CAaA3oB,cAAeoS,EAASne,EAAM00B,GAC5B,GAAoB,iBAAT10B,EACT,MAAM,IAAI1J,MAAM,yCAGlB,KAAMo+B,EAAOxe,iBAAiB3d,YAC5B,MAAM,IAAIjC,MAAM,kBAGlB,OAAQ6nB,GACN,KAAK,EACH,GAAIne,IAAS,oBACX,MAAM,IAAI1J,MACR,wCAAwC,uCAG1C,OAAO,IAAI,GAAI6nB,EAASne,EAAM00B,EAAQA,EAAOxe,OAGjD,KAAK,EAAG,CACN,MAAMA,EAAQ,kBAAUiI,EAASne,EAAM00B,EAAOxe,OAC9C,OAAO,IAAI,GAAIiI,EAASne,EAAM00B,EAAQxe,EACxC,CACA,QACE,MAAM,IAAI5f,MAAM,mBAGtB,CASAyV,gBAAiB2oB,GACf,OAAO,GAAIh4B,OAAO,EAAG,oBAAag4B,EACpC,CAYA3oB,gBAAiB/L,EAAM00B,GACrB,OAAO,GAAIh4B,OAAO,EAAGsD,EAAM00B,EAC7B,CAgBA3oB,cAAemK,GACb,MAAO+0D,EAAKe,GAAa,GAAIC,YAAY/1D,GACzC,GAAI81D,EAAUh3E,OACZ,MAAM,IAAIsB,MAAM,oBAElB,OAAO20E,CACT,CAkBAl/D,mBAAoBmK,GAClB,MAAMg2D,EAAQ,GAAIC,aAAaj2D,GACzBk2D,EAAaF,EAAM12E,KAAO02E,EAAMG,cAChCC,EAAiB7B,OACrBv0D,EAAM7gB,SAAS+2E,EAAYA,EAAaF,EAAMG,gBAEhD,GAAIC,EAAe3/D,aAAeu/D,EAAMG,cACtC,MAAM,IAAI/1E,MAAM,oBAElB,MAAMi2E,EAAcD,EAAej3E,SACjC62E,EAAMG,cAAgBH,EAAMM,YAExB93C,EAAS,IAAIs4C,OAAOA,OACxBd,EAAMO,cACNP,EAAMM,WACND,EACAD,GAMF,MAAO,CAHa,IAAlBJ,EAAM/tD,QACF,GAAIqtD,SAAyD,GAC7D,GAAIE,SAASQ,EAAM7C,MAAO30C,GACaxe,EAAM7gB,SAAS62E,EAAM12E,MACpE,CAkBAuW,oBAAqB2gE,GACnB,IAAIz3E,EAAS,EACb,MAAMyO,EAAO,KACX,MAAOrK,EAAGrE,GAAU24F,OAAOxoF,OAAOunE,EAAar3E,SAASJ,IAExD,OADUD,EACHqE,GAGT,IAAI8kB,EAA4Bza,IAC5B2lE,EAAyB,oBAS7B,GARuC,KAAd,GAEI,EAClB,GAEiB3lE,IAGZ,IAAZya,GAA6B,IAAZA,EACnB,MAAM,IAAIxP,WAAW,uBAAuBwP,KAG9C,MAAMiuD,EAAan3E,EACbw3E,EAAkC/oE,IAClC8oE,EAAa9oE,IACblO,EAAOP,EAASu3E,EAGtB,MAAO,CAAEruD,UAASkrD,QAAOoD,gBAAeD,aAAYH,cAF9B72E,EAAO42E,EAEsC52E,OACrE,CAiBAuW,aAAc7P,EAAQyuE,GACpB,MAAOr+D,EAAQ4J,GAAS,wBAAgBha,EAAQyuE,GAE1CM,EAAM,GAAI9lE,OAAO+Q,GAEvB,GAAoB,IAAhB+0D,EAAI9sD,SAA+B,MAAdjiB,EAAO,GAC9B,MAAM5F,MAAM,0DAMd,OAFA,kBAAU20E,GAAKrxE,IAAI0S,EAAQpQ,GAEpB+uE,CACT,EAqGgB12E,OAAOs3E,IAAI,oBCjkBJ,GAAK,CAC5BzuE,KAAM,aACN4C,KAAM,GACNW,OAAS7G,GAZX,SAA+B8zF,GAC7B,MAAM13E,EAAQ,IAAIvf,MAAM,GACxB,IAAK,IAAI0C,EAAI,EAAGA,EAAI,EAAGA,IACrB6c,EAAM7c,GAAc,IAATu0F,EACXA,IAAmB,EAErB,OAAO,IAAIr1F,WAAW2d,EACxB,CAKqB,CAAqB,cAAepc,MAHlD,MAMM,GAAa,GAAK,CAC7BsD,KAAM,cACN4C,KAAM,GACNW,OAAS7G,GAAU,GAAc,eAAgBA,MCrB7Co0F,IDyBmB,GAAK,CAC5B9wF,KAAM,iBACN4C,KAAM,GACNW,OAAS7G,GAAU,GAAc,eAAgBA,IAAQzE,SAAS,EAAG,KC5BxD2G,eAAgBlD,GAC3B,aAAc,UAAkBA,IAI3BjC,MAAM,EAAG,GAETsX,SACT,GAmBMmkF,GAAW,CAACjoC,EAAUqkC,IACjBrkC,EACF75C,SAAS,IACToa,cACAggC,SAAS8jC,EAAW,KACpBlxF,UAAU,EAAGkxF,GAYhB6D,GAAev2F,MAAOqmD,EAAMjlD,EAAMqtF,EAAYn0B,EAASv2D,KACzD,GAAe,MAAXu2D,EAAiB,CACjB,GAAiB,MAAbjU,EAAKmnB,KACL,MAAM,EAAQ,IAAIlzE,MAAM,qBAAsB,kBAElD,IAAImb,EACJ,IACIA,EAAM81E,EAAOiL,UAAUnwC,EAAKmnB,KAChC,CACA,MAAOvpE,GACH,MAAM,EAAQA,EAAK,iBACvB,CACA,GAAiB,2BAAbwR,EAAI3Q,KACJ,MAAM,EAAQ,IAAIxK,MAAM,cAAe,kBAE3C,GAAkB,MAAdmb,EAAIk1E,OACJ,MAAM,EAAQ,IAAIrwF,MAAM,kBAAmB,kBAE/C,MAAMm8F,GAAa,QAAW,CAC1BvE,UACA9zB,KAAMpjE,KAAK07F,KAAKtvF,OAAOqO,EAAIk1E,WAE/BrwB,EAAU,CACNm8B,aACAE,UAAW,EACXC,WAAYH,EAEpB,CACA,MAAM/D,GAAap4B,EAAQs8B,WAAWjE,YAAc,GAAGn+E,SAAS,IAAIxb,YA/D3CgH,OAAOiwF,EAAOsC,EAAQkE,KAC/C,MAAM/D,GAAaH,EAAOI,YAAc,GAAGn+E,SAAS,IAAIxb,aAClD6O,QAAQS,IAAI2nF,EAAMn+E,KAAI9R,MAAO0uE,IAC/B,GAAiB,MAAbA,EAAKhlB,KAEL,MAAM,IAAIpvD,MAAM,kCAEpB,GAAIo0E,EAAKhlB,KAAK1wD,SAAW05F,QAQnB+D,EAAW5yF,IAAI6qE,EAAKhlB,KAAKloD,UAAU,IAAI,OAR7C,CACI,MAAMwX,EAAMxC,SAASk4D,EAAKhlB,KAAM,IAChC6oC,EAAOsE,aAAa79E,EAAK,IAAI,KAAO,CAChC3X,KAAMo1F,EAAWz2D,SAAS3+B,KAC1B+8D,KAAMq4B,EAAWz2D,SAASo+B,MAC3Bm0B,EAAQv5E,GAEf,CACkD,IACnD,EAgDG89E,CAAqBzwC,EAAK6oC,MAAO50B,EAAQs8B,WAAYt8B,EAAQm8B,YACnE,MAAMpoC,QAAiBiM,EAAQm8B,WAAWM,qBAAqB31F,GAC/D,IAAIkP,EAASgmF,GAASjoC,EAASr1C,IAAK05E,GACpC,MAAMsE,EA1CW,CAAC3oC,IAClB,IAAIkkC,EAASlkC,EAASkkC,OACtB,MAAMlqE,EAAO,GACb,KAAyB,MAAlBkqE,EAAO0E,SACV5uE,EAAK5uB,KAAK84F,GACVA,EAASA,EAAO0E,QAGpB,OADA5uE,EAAK5uB,KAAK84F,GACHlqE,EAAKlW,SAAS,EAkCF+kF,CAAa7oC,GAC5B2oC,EAAWh+F,OAASshE,EAAQq8B,YAC5Br8B,EAAQs8B,WAAaI,EAAW18B,EAAQq8B,WACxCrmF,EAASgmF,GAASh8B,EAAQs8B,WAAWO,aAAczE,IAEvD,MAAMhkB,EAAOroB,EAAK6oC,MAAMzO,MAAK/R,IACzB,GAAiB,MAAbA,EAAKhlB,KACL,OAAO,EAEX,MAAM0tC,EAAc1oB,EAAKhlB,KAAKloD,UAAU,EAAGkxF,GACrC2E,EAAY3oB,EAAKhlB,KAAKloD,UAAUkxF,GACtC,OAAI0E,IAAgB9mF,IAIF,KAAd+mF,GAAoBA,IAAcj2F,EAI3B,IAEf,GAAY,MAARstE,EACA,OAEJ,GAAiB,MAAbA,EAAKhlB,MAAgBglB,EAAKhlB,KAAKloD,UAAUkxF,KAAetxF,EACxD,OAAOstE,EAAKyhB,KAEhB71B,EAAQq8B,YACR,MAAM/+B,QAAc62B,EAAW/rF,IAAIgsE,EAAKyhB,KAAMpsF,GAE9C,OADAsiD,GAAO,IAAAl9C,QAAOyuD,GACP2+B,GAAalwC,EAAMjlD,EAAMqtF,EAAYn0B,EAASv2D,EAAQ,EAEjE,sBCpEA,OA1CA,SAAgB7D,EAAQ0O,GACpB,GAHsC,MAGlB1O,EAHP3H,OAAOuQ,eAIhB,OAAO,kBACH,UAAW,MAAMQ,KAASpJ,QACZ0O,EAAGtF,WACHA,EAGjB,CANM,GASX,MAAMqgF,GAAW,QAAKzpF,IAChB,MAAEU,EAAK,KAAEwrB,GAASu9D,EAASjiF,OACjC,IAAa,IAAT0kB,EACA,OAAQ,YAAe,CAAhB,GAEX,MAAM7U,EAAM3I,EAAGhO,GAEf,GAAwB,mBAAb2W,EAAIqP,KACX,OAAO,wBACOrP,UACA3W,GAEV,UAAW,MAAM0I,KAASqgF,QACZ/6E,EAAGtF,WACHA,EAGjB,CATM,GAWX,MAAMsgF,EAAOh7E,EACb,OAAO,aACS,IAAR2I,UACM3W,GAEV,IAAK,MAAM0I,KAASqgF,EACZC,EAAKtgF,WACCA,EAGjB,CATM,EAUX,ECTA,OAhCA,SAAapJ,EAAQ0pF,GACjB,GAHsC,MAGlB1pF,EAHP3H,OAAOuQ,eAIhB,OAAO,kBACH,UAAW,MAAM0M,KAAOtV,QACd0pF,EAAKp0E,EAElB,CAJM,GAOX,MAAMm0E,GAAW,QAAKzpF,IAChB,MAAEU,EAAK,KAAEwrB,GAASu9D,EAASjiF,OACjC,IAAa,IAAT0kB,EACA,OAAQ,YAAe,CAAhB,GAEX,MAAM7U,EAAMqyE,EAAKhpF,GAEjB,GAAwB,mBAAb2W,EAAIqP,KACX,OAAO,8BACSrP,EACZ,UAAW,MAAM/B,KAAOm0E,QACdC,EAAKp0E,EAElB,CALM,GAOX,MAAM5G,EAAKg7E,EACX,OAAO,kBACGryE,EACN,IAAK,MAAM/B,KAAOm0E,QACR/6E,EAAG4G,EAEhB,CALM,EAMX,0BCXA,OAnByB,CAACy5D,EAAK5oB,EAAMyoC,EAAQzmE,EAAMvgB,EAAS8tF,EAAOnH,IAC/DzuF,gBAAsC+D,EAAU,CAAC,GAC7C,MAAM9K,EAAS8K,EAAQ9K,QAAU,EAC3BD,EAAS+K,EAAQ/K,QAAUqtD,EAAK6oC,MAAMl2F,OACtCi3F,EAAQ5pC,EAAK6oC,MAAMr0F,MAAM5B,EAAQD,GACvC+K,EAAQgrF,aAAa,IAAI,IAAoB,iCAAkC,CAC3E9f,gBAEG,QAAKghB,GAAO/vF,GAAU,GAAIA,GAAQwuE,GAC9B1uE,UACH,MAAMs3F,EAAW5oB,EAAKhlB,MAAQ,GACxB6tC,EAAW,GAAGlvE,KAAQivE,IAE5B,aADqBxvF,EAAQ4mE,EAAKyhB,KAAMmH,EAAUC,EAAU,GAAI3B,EAAQ,EAAGnH,EAAY1qF,IACzEuF,KAAK,MAEvBpJ,IAAU,QAASA,EAAQ,CAAEs3F,SAAS,MAASt3F,GAAU,GAAOA,GAAQoJ,GAAkB,MAATA,KACzF,0BCTJtJ,eAAey3F,GAAQhJ,EAAYpoC,EAAMqxC,EAAOC,EAAgBjmF,EAAOnI,EAAKxF,GAExE,GAAIsiD,aAAgB9pD,WAAY,CAC5B,MAAMO,EAAM,GAAqBupD,EAAMsxC,EAAgBjmF,EAAOnI,GAE9D,YADAmuF,EAAMj+F,KAAKqD,EAEf,CACA,GAAiB,MAAbupD,EAAKmnB,KACL,MAAM,EAAQ,IAAIlzE,MAAM,qBAAsB,kBAElD,IAAIH,EACJ,IACIA,EAAOoxF,EAAOiL,UAAUnwC,EAAKmnB,KACjC,CACA,MAAOvpE,GACH,MAAM,EAAQA,EAAK,iBACvB,CAEA,GAAiB,MAAb9J,EAAKga,KAAc,CACnB,MAAMA,EAAOha,EAAKga,KACZrX,EAAM,GAAqBqX,EAAMwjF,EAAgBjmF,EAAOnI,GAC9DmuF,EAAMj+F,KAAKqD,GACX66F,GAAkBn9E,OAAO1d,EAAI6T,WACjC,CACA,MAAMinF,EAAW,GACjB,GAAIvxC,EAAK6oC,MAAMl2F,SAAWmB,EAAKsxF,WAAWzyF,OACtC,MAAM,EAAQ,IAAIsB,MAAM,0CAA2C,kBAEvE,IAAK,IAAI+C,EAAI,EAAGA,EAAIgpD,EAAK6oC,MAAMl2F,OAAQqE,IAAK,CACxC,MAAMw6F,EAAYxxC,EAAK6oC,MAAM7xF,GACvBy6F,EAAaH,EACbI,EAAWD,EAAa39F,EAAKsxF,WAAWpuF,GAU9C,IATKqU,GAASomF,GAAcpmF,EAAQqmF,GAC/BxuF,GAAOuuF,GAAcvuF,GAAOwuF,GAC5BrmF,EAAQomF,GAAcvuF,EAAMwuF,IAC7BH,EAASn+F,KAAK,CACVi1E,KAAMmpB,EACN7B,WAAY2B,KAGpBA,EAAiBI,GACIxuF,EACjB,KAER,OACM,QAAKquF,GAAW13F,GAAW,GAAIA,GAASgO,GACnClO,UACH,MAAM43D,QAAc62B,EAAW/rF,IAAIwL,EAAGwgE,KAAKyhB,KAAMpsF,GACjD,MAAO,IACAmK,EACH0pD,QACH,MAEJ13D,IAAW,QAASA,EAAQ,CAC7Bs3F,SAAS,MACTx3F,MAAOE,IACP,UAAW,MAAM,KAAEwuE,EAAI,MAAE9W,EAAK,WAAEo+B,KAAgB91F,EAAQ,CACpD,IAAIm3C,EACJ,OAAQq3B,EAAKyhB,KAAKnsF,MACd,KAAK,OACDqzC,EAAQ,SAAaugB,GACrB,MACJ,KAAK,EACDvgB,EAAQugB,EACR,MACJ,QAEI,YADA8/B,EAAMnuF,IAAI,EAAQ,IAAIjP,MAAM,sBAAsBo0E,EAAKyhB,KAAKnsF,QAAS,mBAK7E,MAAMg0F,EAAa,IAAI,KAAO,CAC1BC,YAAa,IAGjBD,EAAWxtD,GAAG,SAAShyB,IACnBk/E,EAAMnuF,IAAIiP,EAAM,IAGfw/E,EAAWnpF,KAAI7O,UAChB+D,EAAQgrF,aAAa,IAAI,IAAoB,4BAA6B,CACtE9f,IAAKP,EAAKyhB,cAERsH,GAAQhJ,EAAYp3C,EAAOqgD,EAAO1B,EAAYtkF,EAAOnI,EAAKxF,EAAQ,UAGtEi0F,EAAWE,QACrB,KAEAP,GAAkBpuF,GAClBmuF,EAAMnuF,KAEd,CA8CA,OA7CoB,CAAC0lE,EAAK5oB,EAAMyoC,EAAQzmE,EAAMvgB,EAAS8tF,EAAOnH,IAC1DzuF,gBAAiC+D,EAAU,CAAC,GACxC,MAAMkoF,EAAW6C,EAAO7C,WACxB,QAAiBrkF,IAAbqkF,EACA,MAAM,IAAI3xF,MAAM,wBAEpB,MAAM,MAAEoX,EAAK,IAAEnI,GAAQ,GAAwB0iF,EAAUloF,EAAQ9K,OAAQ8K,EAAQ/K,QACjF,GAAY,KAARuQ,EACA,OAEJ,IAAIwM,EAAO,GACX,MAAMoiF,EAAS5uF,EAAMmI,EACfgmF,GAAQ,UACd3zF,EAAQgrF,aAAa,IAAI,IAAoB,4BAA6B,CACtE9f,SAECwoB,GAAQhJ,EAAYpoC,EAAMqxC,EAAO,GAAIhmF,EAAOnI,EAAKxF,GACjD8iB,OAAM5iB,IACPyzF,EAAMnuF,IAAItF,EAAI,IAElB,UAAW,MAAMnH,KAAO46F,EACpB,GAAW,MAAP56F,EAAJ,CAIA,GADAiZ,GAAQyE,OAAO1d,EAAI6T,YACfoF,EAAOoiF,EAEP,MADAT,EAAMnuF,MACA,EAAQ,IAAIjP,MAAM,qGAAsG,iBAE9Hyb,IAASoiF,GACTT,EAAMnuF,MAEVxF,EAAQgrF,aAAa,IAAI,IAAoB,uCAAwC,CACjF0F,UAAW1+E,EACXsgF,WAAY8B,EACZlM,oBAEEnvF,CAdN,CAgBJ,GAAIiZ,EAAOoiF,EACP,MAAM,EAAQ,IAAI79F,MAAM,sDAAuD,iBAEvF,ECnIJ0F,eAAgBo4F,GAAc/xC,EAAMh+B,EAAMvgB,EAAS8tF,EAAOnH,EAAY1qF,GAClE,MAAMksF,EAAQ5pC,EAAK6oC,MACnB,GAAiB,MAAb7oC,EAAKmnB,KACL,MAAM,EAAQ,IAAIlzE,MAAM,qBAAsB,kBAElD,IAAImb,EACJ,IACIA,EAAM81E,EAAOiL,UAAUnwC,EAAKmnB,KAChC,CACA,MAAOvpE,GACH,MAAM,EAAQA,EAAK,iBACvB,CACA,GAAkB,MAAdwR,EAAIk1E,OACJ,MAAM,EAAQ,IAAIrwF,MAAM,kBAAmB,kBAE/C,MAAMo4F,GAAaj9E,EAAIk1E,OAAS,IAAIn2E,SAAS,IAAIxb,OAC3CutB,GAAU,QAAK0pE,GAAO/vF,GAAU,GAAIA,GAAQwuE,GACvC1uE,UACH,MAAMoB,EAAoB,MAAbstE,EAAKhlB,KAAeglB,EAAKhlB,KAAKloD,UAAUkxF,GAAa,KAClE,GAAY,MAARtxF,GAAyB,KAATA,EAAa,CAC7B,MAAMwP,QAAe9I,EAAQ4mE,EAAKyhB,KAAM/uF,EAAM,GAAGinB,KAAQjnB,IAAQ,GAAIw0F,EAAQ,EAAGnH,EAAY1qF,GAC5F,MAAO,CAAEsF,QAAyB,MAAhBuH,EAAOtH,MAAgB,GAAK,CAACsH,EAAOtH,OAC1D,CACK,CAED,MAAMsuD,QAAc62B,EAAW/rF,IAAIgsE,EAAKyhB,KAAMpsF,GAK9C,OAJAsiD,GAAO,IAAAl9C,QAAOyuD,GACd7zD,EAAQgrF,aAAa,IAAI,IAAoB,8CAA+C,CACxF9f,IAAKP,EAAKyhB,QAEP,CAAE9mF,QAAS+uF,GAAc/xC,EAAMh+B,EAAMvgB,EAAS8tF,EAAOnH,EAAY1qF,GAC5E,OAEJ7D,IAAU,QAASA,EAAQ,CAAEs3F,SAAS,MAC1C,UAAW,MAAM,QAAEnuF,KAAakd,QACrBld,CAEf,CACA,OA/CoC,CAAC4lE,EAAK5oB,EAAMyoC,EAAQzmE,EAAMvgB,EAAS8tF,EAAOnH,IAC1E,SAAmC1qF,EAAU,CAAC,GAI1C,OAHAA,EAAQgrF,aAAa,IAAI,IAAoB,8CAA+C,CACxF9f,SAEGmpB,GAAc/xC,EAAMh+B,EAAMvgB,EAAS8tF,EAAOnH,EAAY1qF,EACjE,ECNJ,MAIMs0F,GAAmB,CACrBnyD,IAAK,GACL/rC,KAAM,GACNm+F,UAAW,GACX,yBAA0B,GAC1BC,SAAU,CAACtpB,EAAK5oB,EAAMyoC,EAAQzmE,EAAMvgB,EAAS8tF,EAAOnH,IACzC,IAAM,GAEjB+J,QAAS,CAACvpB,EAAK5oB,EAAMyoC,EAAQzmE,EAAMvgB,EAAS8tF,EAAOnH,IACxC,IAAM,IAkFrB,OA9EuBzuF,MAAOivE,EAAK7tE,EAAMinB,EAAMstE,EAAW7tF,EAAS8tF,EAAOnH,EAAY1qF,KAClF,MAAM6zD,QAAc62B,EAAW/rF,IAAIusE,EAAKlrE,GAClCsiD,GAAO,IAAAl9C,QAAOyuD,GACpB,IAAIk3B,EACApnF,EAIJ,GAHY,MAARtG,IACAA,EAAO6tE,EAAIz6D,YAEE,MAAb6xC,EAAKmnB,KACL,MAAM,EAAQ,IAAIlzE,MAAM,qBAAsB,kBAElD,IACIw0F,EAASvD,EAAOiL,UAAUnwC,EAAKmnB,KACnC,CACA,MAAOvpE,GAEH,MAAM,EAAQA,EAAK,iBACvB,CAIA,GAHY,MAARokB,IACAA,EAAOjnB,GAEPu0F,EAAU38F,OAAS,EAAG,CACtB,IAAIy/F,EAQJ,GALIA,EAFiB,2BAAjB3J,GAAQhqF,WAEQ,GAAauhD,EAAMsvC,EAAU,GAAIlH,GA1CzC,EAACpoC,EAAMjlD,KACvB,MAAMstE,EAAOroB,EAAK6oC,MAAMzO,MAAK/R,GAAQA,EAAKhlB,OAAStoD,IACnD,OAAOstE,GAAMyhB,IAAI,EA2CCuI,CAAYryC,EAAMsvC,EAAU,IAE3B,MAAX8C,EACA,MAAM,EAAQ,IAAIn+F,MAAM,uBAAwB,iBAGpD,MAAMq+F,EAAWhD,EAAUx0F,QAE3BuG,EAAO,CACHunE,IAAKwpB,EACL9C,YACAv0F,KAAMu3F,GAAY,GAClBtwE,KALa,GAAGA,KAAQswE,IAOhC,CACA,MAAM9J,EAAUwJ,GAAiBvJ,EAAOhqF,MAAMmqE,EAAK5oB,EAAMyoC,EAAQzmE,EAAMvgB,EAAS8tF,EAAOnH,GACvF,GAAe,MAAXI,EACA,MAAM,EAAQ,IAAIv0F,MAAM,mCAAoC,iBAEhE,OAAIw0F,EAAOhD,cACA,CACHxiF,MAAO,CACHxE,KAAM,YACN1D,OACAinB,OACA4mD,MACA4f,UACAC,SACA8G,QACAvvC,OACA7sD,KAAMs1F,EAAO7C,YAEjBvkF,QAGD,CACH4B,MAAO,CACHxE,KAAM,OACN1D,OACAinB,OACA4mD,MACA4f,UACAC,SACA8G,QACAvvC,OACA7sD,KAAMs1F,EAAO7C,YAEjBvkF,OACH,EC3FL,MAAMkxF,GAAY,CACd,CAAC,QAAa,GACd,CAAC,GAAW1yD,GACZ,CAAC,SAAe,GAChB,CAAC+qC,IAAgB,IAEf,GAAUjxE,MAAOivE,EAAK7tE,EAAMinB,EAAMstE,EAAWC,EAAOnH,EAAY1qF,KAClE,MAAM80F,EAAWD,GAAU3pB,EAAIjrE,MAC/B,GAAgB,MAAZ60F,EACA,MAAM,EAAQ,IAAIv+F,MAAM,wBAAwB20E,EAAIjrE,QAAS,mBAEjE,OAAO60F,EAAS5pB,EAAK7tE,EAAMinB,EAAMstE,EAAW,GAASC,EAAOnH,EAAY1qF,EAAQ,EAEpF,UClBA,MAOM+0F,GAAczwE,IAChB,GAAIA,aAAgB9rB,WAChB,MAAO,CACH0yE,IAAKC,GAAI/lE,OAAOkf,GAChBstE,UAAW,IAGnB,MAAM1mB,EAAMC,GAAIE,MAAM/mD,GACtB,GAAW,MAAP4mD,EACA,MAAO,CACHA,MACA0mB,UAAW,IAGnB,GAAoB,iBAATttE,EAAmB,CACK,IAA3BA,EAAK/mB,QAAQ,YACb+mB,EAAOA,EAAK7mB,UAAU,IAE1B,MAAMmvD,EAzBW,EAACtoC,EAAO,MAErBA,EACHrY,OACAm8B,MAAM,qBAAuB,IAC7Bp9B,OAAOkX,SAoBO,CAAiBoC,GAChC,MAAO,CACH4mD,IAAKC,GAAI/pD,MAAMwrC,EAAO,IACtBglC,UAAWhlC,EAAO91D,MAAM,GAEhC,CACA,MAAM,EAAQ,IAAIP,MAAM,qBAAqB+tB,KAAS,eAAe,EAyBlEroB,eAAe+4F,GAAS1wE,EAAMomE,EAAY1qF,EAAU,CAAC,GACxD,MAAM6M,QAAe,GAxBlB5Q,gBAAyBqoB,EAAMomE,EAAY1qF,EAAU,CAAC,GACzD,IAAI,IAAEkrE,EAAG,UAAE0mB,GAAcmD,GAAWzwE,GAChCjnB,EAAO6tE,EAAIz6D,WACXwkF,EAAY53F,EAChB,MAAM63F,EAAgBtD,EAAU38F,OAChC,OAAa,CACT,MAAM4X,QAAe,GAAQq+D,EAAK7tE,EAAM43F,EAAWrD,EAAWsD,EAAexK,EAAY1qF,GACzF,GAAoB,MAAhB6M,EAAOtH,OAAgC,MAAfsH,EAAOlJ,KAC/B,MAAM,EAAQ,IAAIpN,MAAM,qBAAqB+tB,KAAS,iBAK1D,GAHoB,MAAhBzX,EAAOtH,cACDsH,EAAOtH,OAEE,MAAfsH,EAAOlJ,KACP,OAGJiuF,EAAY/kF,EAAOlJ,KAAKiuF,UACxB1mB,EAAMr+D,EAAOlJ,KAAKunE,IAClB7tE,EAAOwP,EAAOlJ,KAAKtG,KACnB43F,EAAYpoF,EAAOlJ,KAAK2gB,IAC5B,CACJ,CAE8B6wE,CAAS7wE,EAAMomE,EAAY1qF,IACrD,GAAc,MAAV6M,EACA,MAAM,EAAQ,IAAItW,MAAM,qBAAqB+tB,KAAS,iBAE1D,OAAOzX,CACX,CACO5Q,eAAgBm5F,GAAU9wE,EAAMomE,EAAY1qF,EAAU,CAAC,GAC1D,MAAMsiD,QAAa0yC,GAAS1wE,EAAMomE,EAAY1qF,GAC9C,GAAY,MAARsiD,UAGEA,EACY,cAAdA,EAAKvhD,MACL,UAAW,MAAMuyC,KAIrBr3C,eAAgBo5F,EAAQ/yC,EAAMtiD,GAC1B,UAAW,MAAM5J,KAAQksD,EAAKwoC,QAAQ9qF,SAC5B5J,EACFA,aAAgBoC,YAGF,cAAdpC,EAAK2K,aACEs0F,EAAQj/F,EAAM4J,GAGjC,CAd8Bq1F,CAAQ/yC,EAAMtiD,SAC9BszC,CAclB,iBCzFO,MAAMgiD,WAAoB/+F,MAC7B8G,KACA4C,KACAnC,YAAY4d,EAASre,EAAM4C,GACvBiF,MAAMwW,GACN1d,KAAKX,KAAOA,EACZW,KAAKiC,KAAOA,CAChB,EAEG,MAAMs1F,WAAuBD,GAChCx3F,YAAY4d,EAAU,qBAClBxW,MAAMwW,EAAS,iBAAkB,iBACrC,EAEG,MAAM85E,WAA2BF,GACpCx3F,YAAY4d,EAAU,kBAClBxW,MAAMwW,EAAS,qBAAsB,qBACzC,EAEG,MAAM,WAAqB45E,GAC9Bx3F,YAAY4d,EAAU,iBAClBxW,MAAMwW,EAAS,qBAAsB,oBACzC,EAEG,MAAM+5E,WAA2BH,GACpCx3F,YAAY4d,EAAU,uBAClBxW,MAAMwW,EAAS,qBAAsB,qBACzC,EAEG,MAAMg6E,WAA0BJ,GACnCx3F,YAAY4d,EAAU,uBAClBxW,MAAMwW,EAAS,oBAAqB,qBACxC,EAEG,MAAMi6E,WAAuBL,GAChCx3F,YAAY4d,EAAU,cAClBxW,MAAMwW,EAAS,iBAAkB,iBACrC,EAEG,MAAMk6E,WAAsBN,GAC/Bx3F,YAAY4d,EAAU,cAClBxW,MAAMwW,EAAS,gBAAiB,iBACpC,EAEG,MAAMm6E,WAA2BP,GACpCx3F,YAAY4d,EAAU,mBAClBxW,MAAMwW,EAAS,qBAAsB,sBACzC,EAEG,MAAMo6E,WAA+BR,GACxCx3F,YAAY4d,EAAU,sBAClBxW,MAAMwW,EAAS,yBAA0B,yBAC7C,kBChDG,MAAMrN,GAAS+7E,EAAQ,CAC5B79E,OAAQ,IACRlP,KAAM,SACNqf,SAAU,mEACV++D,YAAa,IAGU2O,EAAQ,CAC/B79E,OAAQ,IACRlP,KAAM,YACNqf,SAAU,oEACV++D,YAAa,IAGU2O,EAAQ,CAC/B79E,OAAQ,IACRlP,KAAM,YACNqf,SAAU,mEACV++D,YAAa,IAGa2O,EAAQ,CAClC79E,OAAQ,IACRlP,KAAM,eACNqf,SAAU,oEACV++D,YAAa,ICcR,SAASY,GAAOh/E,GAEnB,IAAI7G,EAbR,SAA8B8lF,GAC1B,MAAMD,EAAS,OAQf,OAPAA,EAAOrI,SAAU,EACjBqI,EAAOE,MAAQ,GACfF,EAAOG,KAAO,EACdH,EAAO1lF,IAAM,OACb0lF,EAAOC,UAAYA,EACnBD,EAAOz8D,QAAU,KAAM,EACvBy8D,EAAO/rD,OAAS,IAAM+rD,EACfA,CACX,CAGgBI,CAAqB,GAAGp/E,WAKpC,OAHI,WAAc,GAAGA,YAAuF,MAAtE,cAAgBipB,GAAKA,EAAE7V,aAAYisE,MAAKjmF,GAAKA,EAAEof,SAAS,cAC1Frf,EAAQ,GAAM,GAAG6G,YAEdX,OAAOwL,OAAO,GAAM7K,GAAO,CAC9BoX,MAAO,GAAM,GAAGpX,WAChB7G,SAER,CAjDA,gBAAsBswB,GACN,MAALA,EAAY,YAAc,aAAqBA,GAG1D,gBAAsBA,GACN,MAALA,EAAY,YAAc,aAAkBA,GAGvD,gBAAsBA,GACN,MAALA,EAAY,YAAczY,GAAOs7E,WAAW7iE,GAGvD,gBAAsBA,GACN,MAALA,EAAY,YAAcA,EAAErW,WAGvC,gBAAsBqW,GACN,MAALA,EAAY,YAAcA,EAAErW,WAGvC,gBAAsBqW,GACN,MAALA,EAAY,YAAcA,EAAErW,WAGvC,gBAAsBqW,GACN,MAALA,EAAY,YAAcA,EAAErW,uCC7BhC,SAASslF,GAAS5H,GAUrB,OATA,SAAiBtxF,GACb,OAAIA,aAAiBm5F,GAEVn5F,EAGA,IAAIm5F,GAAan5F,EAAOsxF,EAEvC,CAEJ,CACO,MAAM6H,GACTh/D,OACAi/D,QACAC,OACAC,eACAC,oBACAC,SACAv4F,YAAYjB,EAAOsxF,GACf,KAAMtxF,aAAiBrE,YACnB,MAAM,IAAIjC,MAAM,6BAEpByH,KAAKg5B,OAASn6B,EACdmB,KAAKi4F,QAAU9H,EACfnwF,KAAKk4F,QAAU,EACfl4F,KAAKm4F,eAAiB,EACtBn4F,KAAKo4F,oBAAsB,EAC3Bp4F,KAAKq4F,SAAW,EACpB,CACAp6F,WAAWo+D,GACP,IAAIi8B,EAAcj8B,EAClB,KAAOr8D,KAAKm4F,eAAiBG,SACnBt4F,KAAKu4F,mBAEf,IAAI1pF,EAAS,EACb,KAAOypF,EAAc,GAAG,CACpB,MAAMh5F,EAAOU,KAAKq4F,SAASr4F,KAAKo4F,qBAC1BnU,EAAYhrF,KAAKkN,IAAI7G,EAAKk5F,gBAAiBF,GAEjDzpF,GAAUA,GAAUo1E,GADP3kF,EAAKm5F,KAAKxU,GAEvBqU,GAAerU,EACfjkF,KAAKm4F,gBAAkBlU,EACM,IAAzB3kF,EAAKk5F,iBACLx4F,KAAKo4F,qBAEb,CACA,OAAOvpF,CACX,CACA6pF,OAAOr8B,GACH,IAAIi8B,EAAcj8B,EAClB,KAAOi8B,EAAc,GAAG,CACpB,MAAMh5F,EAAOU,KAAKq4F,SAASr4F,KAAKo4F,qBAC1BO,EAAqB1/F,KAAKkN,IAAI7G,EAAKs5F,YAAct5F,EAAKk5F,gBAAiBF,GAC7Eh5F,EAAKo5F,OAAOC,GACZL,GAAeK,EACf34F,KAAKm4F,gBAAkBQ,EACnB34F,KAAKo4F,oBAAsB,GAAK94F,EAAKs5F,cAAgBt5F,EAAKk5F,kBAC1Dx4F,KAAKk4F,SACLl4F,KAAKo4F,sBAEb,CACJ,CACAn6F,yBACI+B,KAAKk4F,SACL,MAAMr5F,EAAQmB,KAAKk4F,OAAS,GAAI,QAAiB,CAACl4F,KAAKg5B,OAAQx+B,WAAW8U,KAAK,CAACtP,KAAKk4F,WAAal4F,KAAKg5B,OACjG6/D,QAAkB74F,KAAKi4F,QAAQp5F,GAC/BlI,EAAS,IAAImiG,GAAiBD,GACpC74F,KAAKq4F,SAAS3gG,KAAKf,GACnBqJ,KAAKm4F,gBAAkBxhG,EAAO6hG,eAClC,EAEJ,MAAMO,GAAc,CAChB,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAEEC,GAAa,CACf,EACA,EACA,EACA,GACA,GACA,GACA,IACA,KAEG,MAAMF,GACT9/D,OACAigE,gBACAC,eACAp5F,YAAYjB,GACRmB,KAAKg5B,OAASn6B,EACdmB,KAAKi5F,gBAAkBp6F,EAAM5H,OAAS,EACtC+I,KAAKk5F,eAAiB,CAC1B,CACAV,gBACI,OAAOx4F,KAAKk5F,eAAiB,EAA2B,EAAvBl5F,KAAKi5F,eAC1C,CACAL,YACI,OAA4B,EAArB54F,KAAKg5B,OAAO/hC,MACvB,CACAwhG,KAAKp8B,GACD,IAAIi8B,EAAcj8B,EACdxtD,EAAS,EACb,KAAOypF,EAAc,GAAKt4F,KAAKm5F,aAAa,CACxC,MAAMC,EAAOp5F,KAAKg5B,OAAOh5B,KAAKi5F,iBACxBT,EAAgBx4F,KAAKk5F,eAAiB,EACtCG,EAASpgG,KAAKkN,IAAIqyF,EAAeF,GAEvCzpF,GAAUA,GAAUwqF,GADNC,GAAcF,EAAMZ,EAAgBa,EAAQA,GAE1Df,GAAee,EACfr5F,KAAKk5F,gBAAkBG,EACnBr5F,KAAKk5F,eAAiB,IACtBl5F,KAAKk5F,eAAiB,EACtBl5F,KAAKi5F,kBAEb,CACA,OAAOpqF,CACX,CACA6pF,OAAOr8B,GAEH,IADAr8D,KAAKk5F,gBAAkB78B,EAChBr8D,KAAKk5F,eAAiB,GACzBl5F,KAAKk5F,gBAAkB,EACvBl5F,KAAKi5F,iBAAmB,CAEhC,CACAE,YACI,OAAOn5F,KAAKi5F,iBAAmB,CACnC,EAEJ,SAASK,GAAcF,EAAMzpF,EAAO1Y,GAChC,MAAMy+C,EAGV,SAAiB/lC,EAAO1Y,GACpB,OAAO8hG,GAAYppF,GAASqpF,GAAW//F,KAAKkN,IAAIlP,EAAS0Y,EAAQ,EAAG,GACxE,CALiB4pF,CAAQ5pF,EAAO1Y,GAC5B,OAAQmiG,EAAO1jD,KAAU/lC,CAC7B,CC1HyB,GAAK,CAC5BtQ,KAAM,aACN4C,KAAM,GACNW,OAAS7G,GAZX,SAA+B8zF,GAC7B,MAAM13E,EAAQ,IAAIvf,MAAM,GACxB,IAAK,IAAI0C,EAAI,EAAGA,EAAI,EAAGA,IACrB6c,EAAM7c,GAAc,IAATu0F,EACXA,IAAmB,EAErB,OAAO,IAAIr1F,WAAW2d,EACxB,CAKqB,CAAqB,cAAepc,MAHlD,MAMM,GAAa,GAAK,CAC7BsD,KAAM,cACN4C,KAAM,GACNW,OAAS7G,GAAU,EAAc,eAAgBA,MC1BtCy9F,ID8BY,GAAK,CAC5Bn6F,KAAM,iBACN4C,KAAM,GACNW,OAAS7G,GAAU,EAAc,eAAgBA,IAAQzE,SAAS,EAAG,KCjC3CmhB,OAAO,UAE5Bxa,eAAe,GAAWlD,GAC7B,aAAc,UAAkBA,IAI3BzD,SAAS,EAAG,GAEZ8Y,SACT,CCRO,MAAM,GAAUnS,MAAOtH,EAAQ+1F,EAAY1qF,KACzB,MAAjBA,EAAQspE,QACRtpE,EAAQspE,MAAQ,GAEpB,MAAM8B,QAAkBuD,GAAOh6C,OAAOhgC,GAChCu2E,EAAMC,GAAIxuE,OAAOqD,EAAQ2qF,WAAY3qF,EAAQspE,MAAMrpE,KAAMmrE,GAK/D,aAJMsf,EAAW5qF,IAAIorE,EAAKv2E,EAAQ,IAC3BqL,EACHmd,OAAQnd,EAAQmd,SAEb+tD,CAAG,ECPd,MAAM,GACFlrE,QACA8sF,KACAp7E,IACA4S,KACAyoE,MACAC,KACA7gF,OACA8gF,UACAlC,OACAhsE,KACA8nE,MACA3b,IACAz1E,KACAy3F,SACApvF,YAAY6yC,EAAO3wC,GACfhC,KAAKgC,QAAUA,GAAW,CAAC,EAC3BhC,KAAK8uF,KAAOn8C,EAAMm8C,KAClB9uF,KAAK0T,IAAMi/B,EAAMj/B,IACjB1T,KAAKsmB,KAAOqsB,EAAMrsB,KAClBtmB,KAAK+uF,MAAQp8C,EAAMo8C,MACnB/uF,KAAKgvF,KAAOr8C,EAAMq8C,KAClBhvF,KAAKmO,OAASwkC,EAAMxkC,OACpBnO,KAAKivF,UAAYt8C,EAAMs8C,UACvBjvF,KAAK+sF,OAASp6C,EAAMo6C,OACpB/sF,KAAK+gB,KAAO4xB,EAAM5xB,KAClB/gB,KAAK6oF,MAAQl2C,EAAMk2C,KACvB,EAEG,MAAM,WAAmB,GAC5BqH,QACApwF,YAAY6yC,EAAO3wC,GACfkF,MAAMyrC,EAAO3wC,GACbhC,KAAKkwF,SAAU,QAAW,CACtBC,OAAQ,GACR9zB,KAAM,GAEd,CACAp+D,UAAUoB,EAAMR,GACZmB,KAAKktE,SAAMrnE,EACX7F,KAAKvI,UAAOoO,EACZ7F,KAAKkvF,cAAWrpF,QACV7F,KAAKkwF,QAAQpuF,IAAIzC,EAAMR,EACjC,CACAZ,UAAUoB,GACN,OAAOW,KAAKkwF,QAAQvvF,IAAItB,EAC5B,CACAkwF,aACI,OAAOvvF,KAAKkwF,QAAQG,WACxB,CACAb,sBACI,OAAOxvF,KAAKkwF,QAAQI,eACxB,CACAb,YACI,OAAOzvF,KAAKkwF,QAAQT,WACxB,CACAxxF,wBACI,UAAW,MAAM,IAAE8D,EAAG,MAAElD,KAAWmB,KAAKkwF,QAAQK,sBACtC,CACFxuF,MACAuzC,MAAOz2C,EAGnB,CACA6wF,mBACI,YAAsB7pF,IAAlB7F,KAAKkvF,WAGTlvF,KAAKkvF,SAAW,GAAclvF,KAAKkwF,QAASlwF,KAAMA,KAAKgC,UAF5ChC,KAAKkvF,QAIpB,CACAjxF,YAAayuF,GACT,UAAW,MAAMnlF,KAAS,GAAMvH,KAAKkwF,QAASxD,EAAY1sF,KAAMA,KAAKgC,cAC3D,IACCuF,EACH+e,KAAMtmB,KAAKsmB,KAGvB,EAEJroB,eAAgB,GAAMuyF,EAAQ9D,EAAY+D,EAAWzuF,GACjD,MAAM0uF,EAAWF,EAAOlB,UAClBpB,EAAQ,GACd,IAAI2C,EAAe,GACnB,IAAK,IAAIv1F,EAAI,EAAGA,EAAIo1F,EAASz5F,OAAQqE,IAAK,CACtC,MAAMg6C,EAAQo7C,EAAS/vF,IAAIrF,GAC3B,GAAa,MAATg6C,EACA,SAEJ,MAAMw7C,EAAcx1F,EAAEmX,SAAS,IAAIoa,cAAcggC,SAAS,EAAG,KAC7D,GAAIvX,aAAiB,KAAQ,CACzB,IAAIy7C,EACJ,UAAW,MAAMC,KAAY,GAAM17C,EAAOo3C,EAAY,KAAM1qF,GACxD+uF,EAAQC,EAEZ,GAAa,MAATD,EACA,MAAM,IAAIx4F,MAAM,wDAEpB21F,EAAMx2F,KAAK,CACPiwD,KAAMmpC,EACN3C,MAAO9oF,OAAO0rF,EAAMt5F,MACpB22F,KAAM2C,EAAM7jB,MAEhB2jB,GAAgBE,EAAMt5F,IAC1B,MACK,GA0DmB,mBA1DT69C,EAAMz2C,MA0DP8wF,MA1De,CACzB,MAAMj8E,EAAM4hC,EAAMz2C,MAClB,IAAIoyF,EACJ,UAAW,MAAM1pF,KAASmM,EAAIi8E,MAAMjD,GAChCuE,EAAa1pF,QACP0pF,EAEV,GAAkB,MAAdA,EACA,MAAM,IAAI14F,MAAM,qBAEpB,MAAM24F,EAAQJ,EAAcx7C,EAAMvzC,IAClCmsF,EAAMx2F,KAAK,CACPiwD,KAAMupC,EACN/C,MAAO9oF,OAAO4rF,EAAWx5F,MACzB22F,KAAM6C,EAAW/jB,MAErB2jB,GAAgBI,EAAWx5F,IAC/B,KACK,CACD,MAAMoH,EAAQy2C,EAAMz2C,MACpB,GAAiB,MAAbA,EAAMquE,IACN,SAEJ,MAAMgkB,EAAQJ,EAAcx7C,EAAMvzC,IAC5BtK,EAAOoH,EAAMpH,KACnBy2F,EAAMx2F,KAAK,CACPiwD,KAAMupC,EACN/C,MAAO9oF,OAAO5N,GACd22F,KAAMvvF,EAAMquE,MAEhB2jB,GAAgBp4E,OAAOhhB,GAAQ,EACnC,CACJ,CAGA,MAAM2a,EAAO5X,WAAW8U,KAAKohF,EAASS,WAAW/gF,WAC3CsD,EAAM,IAAI81E,EAAO,CACnBzmF,KAAM,yBACNqP,OACAw2E,OAAQnwE,OAAO+3E,EAAOI,aACtBjI,SAAU6Q,GACV3Q,MAAO4H,GAAW5H,MAClB9nE,KAAM0vE,GAAW1vE,OAEfujC,EAAO,CACTmnB,KAAM/3D,EAAI02E,UACV+C,MAAOe,GAELv3F,GAAS,IAAAiM,SAAO,IAAAyqF,SAAQ/oC,IACxB4oB,QAAY,GAAQv2E,EAAQ+1F,EAAY1qF,GACxCvK,EAAOghB,OAAO9hB,EAAOiY,YAAciiF,OACnC,CACF3jB,MACA6f,OAAQr5E,EACRjc,OAER,CAIA,SAAS,GAAc+4F,EAAQC,EAAWzuF,GACtC,MAAM0uF,EAAWF,EAAOlB,UAClBpB,EAAQ,GACd,IAAK,IAAI5yF,EAAI,EAAGA,EAAIo1F,EAASz5F,OAAQqE,IAAK,CACtC,MAAMg6C,EAAQo7C,EAAS/vF,IAAIrF,GAC3B,GAAa,MAATg6C,EACA,SAEJ,MAAMw7C,EAAcx1F,EAAEmX,SAAS,IAAIoa,cAAcggC,SAAS,EAAG,KAC7D,GAAIvX,aAAiB,KAAQ,CACzB,MAAM79C,EAAO,GAAc69C,EAAO,KAAMtzC,GACxCksF,EAAMx2F,KAAK,CACPiwD,KAAMmpC,EACN3C,MAAO9oF,OAAO5N,GACd22F,KAA6B,IAAvBpsF,EAAQ2qF,WAAmB,GAAS,IAElD,MACK,GAAiC,mBAAtBr3C,EAAMz2C,MAAM8wF,MAAsB,CAC9C,MACMl4F,EADM69C,EAAMz2C,MACDqwF,WACjBhB,EAAMx2F,KAAK,CACPiwD,KAAMmpC,EAAcx7C,EAAMvzC,IAC1BosF,MAAO9oF,OAAO5N,GACd22F,KAA6B,IAAvBpsF,EAAQ2qF,WAAmB,GAAS,IAElD,KACK,CACD,MAAM9tF,EAAQy2C,EAAMz2C,MACpB,GAAiB,MAAbA,EAAMquE,IACN,SAEJ,MAAMgkB,EAAQJ,EAAcx7C,EAAMvzC,IAC5BtK,EAAOoH,EAAMpH,KACnBy2F,EAAMx2F,KAAK,CACPiwD,KAAMupC,EACN/C,MAAO9oF,OAAO5N,GACd22F,KAAMvvF,EAAMquE,KAEpB,CACJ,CAGA,MAAM96D,EAAO5X,WAAW8U,KAAKohF,EAASS,WAAW/gF,WAC3CsD,EAAM,IAAI81E,EAAO,CACnBzmF,KAAM,yBACNqP,OACAw2E,OAAQnwE,OAAO+3E,EAAOI,aACtBjI,SAAU6Q,GACV3Q,MAAO4H,GAAW5H,MAClB9nE,KAAM0vE,GAAW1vE,OAMrB,OAJe,IAAAne,SAAO,IAAAyqF,SAAQ,CAC1B5hB,KAAM/3D,EAAI02E,UACV+C,MAAOe,KAEGj3F,MAClB,CAKO,MAAM,GAASk2E,GAAI/pD,MAAM,kDACnB,GAAS+pD,GAAI/pD,MAAM,qDC9N1BzqB,GAAM0lF,GAAO,0CACN,GAAY/xB,GACdA,EACF75C,SAAS,IACToa,cACAggC,SAAS,EAAG,KACZptD,UAAU,EAAG,GA0BTg6F,GAAyBx7F,MAAOqoB,EAAMomE,EAAY1qF,KAE3D,MAAMyuF,EAAYjH,EAAOiL,UAAUnuE,EAAK,GAAGg+B,KAAKmnB,MAAQ,IAAIjxE,WAAW,IAEjEouF,EAASnwE,OAAOxf,KAAKqhB,IAAI,EH7CL,IGgD1B,IAAI4yD,EACA5oB,EAFJh+B,EAAKlW,UAGL,IAAK,IAAI9U,EAAI,EAAGA,EAAIgrB,EAAKrvB,OAAQqE,IAAK,CAClC,MAAMo+F,EAASp+F,IAAMgrB,EAAKrvB,OAAS,EAC7B0iG,EAAUrzE,EAAKhrB,GAGf8W,EAAO5X,WAAW8U,KAAKqqF,EAAQjJ,SAASS,WAAW/gF,WACnDsD,EAAM,IAAI81E,EAAO,CACnBzmF,KAAM,yBACNqP,OACAw2E,SACAD,SAAU6Q,KAEVE,IACAhmF,EAAIm1E,MAAQ4H,EAAU5H,MACtBn1E,EAAIqN,KAAO0vE,EAAU1vE,MAEzBujC,EAAO,CACHmnB,KAAM/3D,EAAI02E,UACV+C,MAAOwM,EAAQr1C,KAAK6oC,OAExB,MAAMt3B,EAAQ,SAAa,UAAcvR,IAEzC,GADA4oB,QAAY,GAAQrX,EAAO62B,EAAY1qF,IAClC03F,EAAQ,CAET,MAAME,EAActzE,EAAKhrB,EAAI,GAC7B,GAAmB,MAAfs+F,EACA,MAAM,IAAIrhG,MAAM,2DAEpBI,GAAI,mDAAoDihG,EAAYrrF,QACpEqrF,EAAYt1C,KAAK6oC,MAAQyM,EAAYt1C,KAAK6oC,MAAMngF,QAAOmc,GAAKA,EAAEw+B,OAASiyC,EAAYrrF,SACnFqrF,EAAYt1C,KAAK6oC,MAAMz1F,KAAK,CACxBiwD,KAAMiyC,EAAYrrF,OAClB6/E,KAAMlhB,EACNihB,MAAOwL,EAAQr1C,KAAK6oC,MAAMzmE,QAAO,CAACrgB,EAAKnH,IAASmH,GAAOnH,EAAKivF,OAAS,IAAIt4B,EAAMjnD,aAEvF,CACJ,CACA,GAAW,MAAPs+D,GAAuB,MAAR5oB,EACf,MAAM,IAAI/rD,MAAM,oBAEpB,MAAO,CAAE20E,MAAK5oB,OAAM,EAEXu1C,GAA2B57F,MAAOivE,EAAK4sB,EAAUpN,EAAY1qF,KACtE,MACM1C,EADUy4F,GAAS,GACZgC,EAAQ,QAAqBD,IACpCxzE,EAAO,GAEb,OAAa,CACT,MAAMuvC,QAAc62B,EAAW/rF,IAAIusE,EAAKlrE,GAClCsiD,EAAO,SAAauR,GACpB66B,EAAW,IAAI,GACflvE,QAAcliB,EAAKm5F,KHrGH,GGsGhBlqF,EAAS,GAASiT,GAMxB,IAAIs0E,EALJxvE,EAAK5uB,KAAK,CACN6W,SACAmiF,WACApsC,SAKJ,IAAK,MAAMqoB,KAAQroB,EAAK6oC,MAAO,CAC3B,MAAMoI,EAAW5oB,EAAKhlB,MAAQ,GAC9B,GAAI4tC,EAASt+F,OAAS,EAClB,MAAM,IAAIsB,MAAM,0CAEpB,MAAM+zD,EAAW73C,SAAS8gF,EAAS91F,UAAU,EAAG,GAAI,IACpDixF,EAAS70F,IAAIywD,GAAU,GAEnBipC,EAAS/uD,WAAWj4B,KACpBunF,EAAYnpB,EAEpB,CACA,GAAiB,MAAbmpB,EAAmB,CACnBn9F,GAAI,sCAAuC4V,EAAQurF,GAEnD,KACJ,CACA,MAAMvE,EAAWO,EAAUnuC,MAAQ,GACnC,GAAI4tC,EAASt+F,OAAS,EAClB,MAAM,IAAIsB,MAAM,0CAEpB,GAAwB,IAApBg9F,EAASt+F,OAMb,MAJIi2E,EAAM4oB,EAAU1H,KAChBz1F,GAAI,wCAAyC48F,EAIrD,CACA,MAAO,CAAEjvE,OAAMhnB,OAAM,ECrIlBrB,eAAe+7F,GAAqB11C,EAAMooC,EAAY2E,EAAWrvF,GACpE,GAAiB,MAAbsiD,EAAKmnB,KACL,MAAM,IAAIlzE,MAAM,0BAEpB,MAAMw0F,EAASvD,EAAOiL,UAAUnwC,EAAKmnB,MACrC,IAAIh0E,EACJ,GAAoB,cAAhBs1F,EAAOhqF,KACPtL,EAUR,SAA0B6sD,GACtB,IAAI7sD,EAAO,EAGX,IAAK,MAAMk1E,KAAQroB,EAAK6oC,MACpB11F,IAASk1E,EAAKhlB,MAAQ,IAAI1wD,OAC1BQ,GAA8B,IAAtBk1E,EAAKyhB,KAAKhuE,QAAgB,oBAA0B,oBAEhE,OAAO3oB,CACX,CAnBei4F,CAAiBprC,OAEvB,IAAoB,2BAAhByoC,EAAOhqF,KAIZ,MAAM,IAAIxK,MAAM,uDAHhBd,QAAawiG,GAAkB31C,EAAM,EAAG+sC,EAAW3E,EAAY1qF,EAInE,CACA,OAAOvK,EAAO45F,CAClB,CAWApzF,eAAeg8F,GAAkB31C,EAAM41C,EAAS1iF,EAAKk1E,EAAY1qF,GAC7D,GAAIk4F,EAAU1iF,EACV,OAAOA,EAEX,GAAiB,MAAb8sC,EAAKmnB,KACL,OAAOyuB,EAGX,IADe1Q,EAAOiL,UAAUnwC,EAAKmnB,MACzBse,cACR,OAAOmQ,EAEX,IAAK,MAAMvtB,KAAQroB,EAAK6oC,MAAO,CAC3B,IAAI9tF,EAAOstE,EAAKhlB,MAAQ,GAKxB,GAHAtoD,EAAOA,EAAKI,UAAU,GACtBy6F,GAAW76F,EAAKpI,OAChBijG,GAAWvtB,EAAKyhB,KAAKj2E,MAAMvJ,WACvB+9D,EAAKyhB,KAAKnsF,OAAS,OAAY,CAC/B,MAAM4zD,QAAc62B,EAAW/rF,IAAIgsE,EAAKyhB,KAAMpsF,GACxCsiD,EAAO,SAAauR,GAC1BqkC,SAAiBD,GAAkB31C,EAAM41C,EAAS1iF,EAAKk1E,EAAY1qF,EACvE,CACJ,CACA,OAAOk4F,CACX,CC/CA,MAAM,GAAM7b,GAAO,0CACZpgF,eAAek8F,GAAQhsF,EAAQmnC,EAAOo3C,EAAY1qF,GACrD,GAAwB,MAApBmM,EAAOm2C,KAAKmnB,KACZ,MAAM,IAAIqsB,GAAuB,oCAGrC,GAAkB,2BADLtO,EAAOiL,UAAUtmF,EAAOm2C,KAAKmnB,MACjC1oE,KAEL,OADA,GAAI,oCACGq3F,GAAsBjsF,EAAQmnC,EAAOo3C,EAAY1qF,GAE5D,GAAI,UAAUszC,EAAMqS,SAASrS,EAAM84C,8BACnC,MAAMv/E,QAAewrF,GAAelsF,EAAQmnC,EAAOo3C,EAAY1qF,GAC/D,SAAUg4F,GAAqBnrF,EAAOy1C,KAAMooC,EAAY1qF,EAAQgwF,yBAA0BhwF,GAAU,CAChG,GAAI,6CACJ,MAAMs4F,QAAkBC,GAA0B1rF,EAAQ69E,GAC1D79E,EAAOq+D,IAAMotB,EAAUptB,IACvBr+D,EAAOy1C,KAAO,eAAmBooC,EAAW/rF,IAAI25F,EAAUptB,IAAKlrE,GACnE,CACA,OAAO6M,CACX,CACA,MAAM0rF,GAA4Bt8F,MAAOkQ,EAAQu+E,KAC7C,GAAwB,MAApBv+E,EAAOm2C,KAAKmnB,KACZ,MAAM,IAAIqsB,GAAuB,sDAErC,MAAM/K,EAASvD,EAAOiL,UAAUtmF,EAAOm2C,KAAKmnB,MACtC58D,OFnBiB5Q,OAAOyuF,EAAY8N,EAAUx4F,KACpD,MAAM+uF,EAAQ,IAAI,GAAW,CACzBjC,MAAM,EACNp7E,KAAK,EACLvF,YAAQtI,EACRopF,eAAWppF,EACXygB,KAAM,GACNyoE,OAAO,EACPC,MAAM,EACNnG,MAAO7mF,EAAQ6mF,MACf9nE,KAAM/e,EAAQ+e,MACf/e,GACH,IAAK,IAAI1G,EAAI,EAAGA,EAAIk/F,EAASvjG,OAAQqE,UAC3By1F,EAAMb,QAAQpuF,IAAI04F,EAASl/F,GAAG+D,KAAM,CACtC5H,KAAM+iG,EAASl/F,GAAG7D,KAClBy1E,IAAKstB,EAASl/F,GAAG4xE,MAGzB,MAAM13D,QAAY,GAAKu7E,EAAMpB,MAAMjD,IACnC,GAAW,MAAPl3E,EACA,MAAM,IAAIjd,MAAM,oCAEpB,OAAOid,CAAG,EEHWilF,CAAY/N,EAAYv+E,EAAOm2C,KAAK6oC,MAAMp9E,KAAI48D,IAAQ,CACvEttE,KAAOstE,EAAKhlB,MAAQ,GACpBlwD,KAAMghB,OAAOk0D,EAAKwhB,OAAS,GAC3BjhB,IAAKP,EAAKyhB,SACT,CACDrtE,KAAMgsE,EAAOhsE,KACb8nE,MAAOkE,EAAOlE,MACd8D,WAAYx+E,EAAO++D,IAAI9sD,UAG3B,OADA,GAAI,4CAA4CvR,EAAOq+D,OAChDr+D,CAAM,EAEXwrF,GAAiBp8F,MAAOkQ,EAAQmnC,EAAOo3C,EAAY1qF,KAErD,MAAM04F,EAAcvsF,EAAOm2C,KAAK6oC,MAAMngF,QAAQ2/D,IAC1C,MAAM71B,EAAU61B,EAAKhlB,OAASrS,EAAMqS,KACpC,GAAI7Q,IAAY90C,EAAQ24F,iBACpB,MAAM,IAAIlD,GAEd,OAAQ3gD,CAAO,IAGnB,GADA4jD,EAAYhjG,KAAK49C,GACO,MAApBnnC,EAAOm2C,KAAKmnB,KACZ,MAAM,IAAI+rB,GAAmB,qDAEjC,MAAMlzC,EAAOklC,EAAOiL,UAAUtmF,EAAOm2C,KAAKmnB,MAC1C,IAAIr5D,EACJ,GAAkB,MAAdkyC,EAAKukC,MAAe,CAEpB,MAAM75D,EAAK91B,KAAK+xE,MACV0e,EAAO1wF,KAAK8kB,MAAMiR,EAAK,KAC7Bs1B,EAAKukC,MAAQ,CACTc,KAAMlxE,OAAOkxE,GACbC,MAA8B,KAAtB56D,EAAa,IAAP26D,IAElBv3E,EAAOkyC,EAAK8lC,SAChB,MAEIh4E,EAAOjE,EAAOm2C,KAAKmnB,KAEvBt9D,EAAOm2C,KAAO,UAAc,CACxBmnB,KAAMr5D,EACN+6E,MAAOuN,IAGX,MAAM3/F,EAAM,SAAaoT,EAAOm2C,MAC1BhlD,QAAaqxE,GAAOh6C,OAAO57B,GAC3BmyE,EAAMC,GAAIxuE,OAAOwP,EAAO++D,IAAI9sD,QAAS,OAAY9gB,GAEvD,aADMotF,EAAW5qF,IAAIorE,EAAKnyE,GACnB,CACHupD,KAAMn2C,EAAOm2C,KACb4oB,MACH,EAECktB,GAAwBn8F,MAAOkQ,EAAQmnC,EAAOo3C,EAAY1qF,KAC5D,MAAM,KAAEskB,EAAI,KAAEhnB,SAAeu6F,GAAyB1rF,EAAO++D,IAAK53B,EAAMqS,KAAM+kC,EAAY1qF,GACpF44F,EAAet0E,EAAKA,EAAKrvB,OAAS,GACxC,GAAoB,MAAhB2jG,EACA,MAAM,IAAIriG,MAAM,yCAIpB,MAAMgW,EAASqsF,EAAarsF,OACtBiT,EAAQ/M,SAASlG,EAAQ,IAC/B,GAAI,2BAA4B+mC,EAAMqS,KAAMp5C,GAC5C,MAAMgnF,EAAW,GAAGhnF,IAAS+mC,EAAMqS,OAC7BkzC,EAAeD,EAAat2C,KAAK6oC,MAAMzO,MAAKv1D,IAAMA,EAAEw+B,MAAQ,IAAInhB,WAAWj4B,KACjF,GAAoB,MAAhBssF,EAGA,GAFA,GAAI,+BAAgCtF,GAEhCsF,EAAalzC,OAAS4tC,EAAU,CAEhC,IAAKvzF,EAAQ24F,iBACT,MAAM,IAAIlD,GAEd,GAAI,6BAA8BniD,EAAMqS,MACxCizC,EAAat2C,KAAK6oC,MAAQyN,EAAat2C,KAAK6oC,MAAMngF,QAAOmc,GAAKA,EAAEw+B,OAAS4tC,IACzEqF,EAAat2C,KAAK6oC,MAAMz1F,KAAK,CACzBiwD,KAAM4tC,EACNnH,KAAM94C,EAAM84C,KACZD,MAAO74C,EAAM64C,OAErB,KACK,IAAkC,IAA9B0M,EAAalzC,MAAM1wD,OACxB,MAAM,IAAIsB,MAAM,gCAEf,CAED,GAAI,kDAAmDgW,GAEvD,MAAMiT,EAAQo5E,EAAat2C,KAAK6oC,MAAM2N,WAAU3xE,GAAKA,EAAEw+B,MAAMnhB,WAAWj4B,KAClEwsF,EAAUH,EAAat2C,KAAK6oC,MAAM/qE,OAAOZ,EAAO,GAAG,GAEnDw5E,GAAeD,EAAQpzC,MAAQ,IAAIloD,UAAU,GAE7Cw7F,EADUlD,GAAS,GACLgC,EAAQ,QAAqBiB,IAEjD,IAAK,IAAI1/F,EAAI,EAAGA,EAAIgrB,EAAKrvB,OAAQqE,UACvB2/F,EAAYxC,KLtIJ,GKwIlB,OAAa,CACT,MAAMyC,QAAqBD,EAAYxC,KLzIzB,GK0IR0C,EAAgB,GAASD,GAC/BH,EAAQpzC,KAAO,GAAGwzC,IAAgBH,IAElC,MAAMI,QAAiB97F,EAAKm5F,KL7Id,GK8IR4C,EAAY,GAASD,GAC3B,GAAID,IAAkBE,EAAW,CAI7B,MAAM3K,EAAW,IAAI,GACrBA,EAAS70F,IAAIu/F,GAAU,GACvB90E,EAAK5uB,KAAK,CACN6W,OAAQ8sF,EACR3K,WACApsC,KAAM,CACF6oC,MAAO,MAGf,QACJ,CAEA,MAAMuD,EAAW,IAAI,GACrBA,EAAS70F,IAAIu/F,GAAU,GACvB1K,EAAS70F,IAAIq/F,GAAc,GAE3B50E,EAAK5uB,KAAK,CACN6W,SACAmiF,WACApsC,KAAM,CACF6oC,MAAO,CACH4N,EAAS,CACLpzC,KAAM,GAAG0zC,IAAY/lD,EAAMqS,OAC3BymC,KAAM94C,EAAM84C,KACZD,MAAO74C,EAAM64C,WAK7B,KACJ,CACJ,OAGA,GAAI,uCAAwCoH,GAE5CjgD,EAAMqS,KAAO4tC,EACbqF,EAAat2C,KAAK6oC,MAAMz1F,KAAK49C,GAC7BslD,EAAalK,SAAS70F,IAAI2lB,GAAO,GACjC,GAAI,kCAAmC+zE,GAE3C,OAAOkE,GAAuBnzE,EAAMomE,EAAY1qF,EAAQ,EC5LrD/D,eAAeq9F,GAAepuB,EAAKwf,EAAY1qF,EAAU,CAAC,GAC7D,MAAMuF,QAAcyvF,GAAS9pB,EAAKwf,EAAY1qF,GAC9C,GAAmB,cAAfuF,EAAMxE,KACN,MAAM,IAAI80F,GAAmB,GAAG3qB,EAAIz6D,yCAExC,MAAO,CACHy6D,MACA5oB,KAAM/8C,EAAM+8C,KAEpB,CCROrmD,eAAes9F,GAAYruB,EAAK7tE,EAAMqtF,EAAY1qF,GACrD,MAAMw5F,QAAoBxE,GAAS9pB,EAAKwf,EAAY1qF,GACpD,GAAyB,cAArBw5F,EAAYz4F,MAA6C,SAArBy4F,EAAYz4F,MAAwC,QAArBy4F,EAAYz4F,KAC/E,MAAM,IAAIw0F,GAAe,GAAGrqB,EAAIz6D,oCAEpC,MAAO,CACHk1C,KAAMtoD,EACN8uF,MAAOqN,EAAYl3C,gBAAgB9pD,WAAaghG,EAAYl3C,KAAK11C,WAAa6sF,GAAaD,EAAYl3C,MACvG8pC,KAAMlhB,EAEd,CACA,SAASuuB,GAAan3C,GAClB,MAAMo3C,EAAYp3C,EAAK6oC,MAAMzmE,QAAO,CAACrgB,EAAKnH,IAASmH,GAAOnH,EAAKivF,OAAS,IAAI,GAC5E,OAAO,SAAa7pC,GAAM11C,WAAa8sF,CAC3C,CCXA,MAAM,GAAMrd,GAAO,yCACZpgF,eAAe,GAAQivE,EAAK5mD,EAAMomE,EAAY1qF,GACjD,GAAY,MAARskB,GAAyB,KAATA,EAChB,MAAO,CAAE4mD,OAEb,GAAI,wBAAyB5mD,EAAM4mD,GACnC,MAAM31E,EAAQ+uB,EAAKrnB,MAAM,KAAK+N,OAAOkX,SAC/By3E,EAAW,CAAC,CACVt8F,KAAM,GACN6tE,MACAz1E,KAAM,KAEd,IAAK,IAAI6D,EAAI,EAAGA,EAAI/D,EAAMN,OAAQqE,IAAK,CACnC,MAAM6D,EAAO5H,EAAM+D,GACbuT,QAAemoF,GAAS9pB,EAAKwf,EAAY1qF,GAE/C,GADA,GAAI,iBAAkB7C,EAAM0P,GACR,SAAhBA,EAAO9L,KAAiB,CACxB,GAAIzH,EAAI/D,EAAMN,OAAS,EACnB,MAAM,IAAI6gG,GAAuB,oBAErC5qB,EAAMr+D,EAAOq+D,GACjB,KACK,IAAoB,cAAhBr+D,EAAO9L,KAmBZ,MAAM,IAAI+0F,GAAuB,0BAnBC,CAClC,IAAI8D,EACJ,UAAW,MAAMr0F,KAASsH,EAAOi+E,UAC7B,GAAIvlF,EAAMlI,OAASF,EAAM,CACrBy8F,EAASr0F,EAAM2lE,IACf,KACJ,CAEJ,GAAc,MAAV0uB,EACA,MAAM,IAAIlE,GAAkB,oCAEhCxqB,EAAM0uB,EACND,EAASjkG,KAAK,CACV2H,KAAMF,EACN+tE,MACAz1E,KAAMoX,EAAOpX,MAErB,CAGA,CACJ,CAEA,OADA,GAAI,oBAAqB6uB,EAAM4mD,GACxB,CACHA,MACA5mD,OACAq1E,WAER,CAKO19F,eAAe49F,GAAe3uB,EAAKr+D,EAAQ69E,EAAY1qF,GAC1D,GAAuB,MAAnB6M,EAAO8sF,UAA+C,IAA3B9sF,EAAO8sF,SAAS1kG,OAC3C,OAAOi2E,EAEX,IAAI53B,EAAQzmC,EAAO8sF,SAASjrE,MAC5B,GAAa,MAAT4kB,EACA,MAAM,IAAI/8C,MAAM,yBAEpB+8C,EAAM43B,IAAMA,EACZr+D,EAAO8sF,SAASvrF,UAChB,IAAK,MAAMjC,KAAUU,EAAO8sF,SAAU,CAClC,MAAOpF,EAAWuF,SAAgBh2F,QAAQS,IAAI,CAC1C+0F,GAAentF,EAAO++D,IAAKwf,EAAY1qF,GACvCu5F,GAAYjmD,EAAM43B,IAAK53B,EAAMj2C,KAAMqtF,EAAY1qF,KAOnDkrE,SALqBitB,GAAQ5D,EAAWuF,EAAQpP,EAAY,IACrD1qF,EACH24F,kBAAkB,EAClBhO,WAAYzf,EAAI9sD,WAEP8sD,IACb/+D,EAAO++D,IAAMA,EACb53B,EAAQnnC,CACZ,CACA,OAAO++D,CACX,CClFA,MAAM6uB,GAAe,UAAe,CAAEC,iBAAiB,IACjD7kD,GAAiB,CAAC,ECLjB,MAAM8kD,GAA8B,OCerC,GAAe,UAAe,CAAED,iBAAiB,IACjD,GAAM3d,GAAO,sBACb,GAAiB,CACnB+Y,WAAW,EACXpF,yBAA0BiK,ICZ9B,MAAM,GAAe,UAAe,CAAED,iBAAiB,IACjD,GAAM3d,GAAO,mBACb,GAAiB,CACnB6d,OAAO,EACPlK,yBAA0BiK,ICP9B,MAAM,GAAe,UAAe,CAAED,iBAAiB,IACjD,GAAiB,CAAC,ECOxB,MAAM,GAAe,UAAe,CAAEA,iBAAiB,IACjD,GAAM3d,GAAO,sBACb,GAAiB,CACnBsO,WAAY,EACZuP,OAAO,EACPlK,yBAA0BiK,ICT9B,MAAM,GAAM5d,GAAO,kCAkBnB,MAAM8d,GAAsBl+F,MAAOkQ,EAAQ9O,EAAMqtF,EAAY1qF,KAEzDmM,EAAOm2C,KAAK6oC,MAAQh/E,EAAOm2C,KAAK6oC,MAAMngF,QAAQ2/D,GACnCA,EAAKhlB,OAAStoD,IAEzB,MAAM+8F,EAAc,SAAajuF,EAAOm2C,MAClC+3C,QAAkB,GAAQD,EAAa1P,EAAY,IAClD1qF,EACH2qF,WAAYx+E,EAAO++D,IAAI9sD,UAG3B,OADA,GAAI,6BAA6Bi8E,KAC1B,CACH/3C,KAAMn2C,EAAOm2C,KACb4oB,IAAKmvB,EACR,EAECC,GAA6Br+F,MAAOkQ,EAAQ9O,EAAMqtF,EAAY1qF,KAChE,MAAM,KAAEskB,SAAeuzE,GAAyB1rF,EAAO++D,IAAK7tE,EAAMqtF,EAAY1qF,GACxE44F,EAAet0E,EAAKA,EAAKrvB,OAAS,GACxC,GAAoB,MAAhB2jG,EACA,MAAM,IAAIriG,MAAM,yCAEpB,MAAMg9F,EAAWqF,EAAat2C,KAAK6oC,MAAMngF,QAAOmc,IAAMA,EAAEw+B,MAAQ,IAAIloD,UAAU,KAAOJ,IAAM0Q,KAAIoZ,GAAKA,EAAEw+B,OAAMj3B,MAC5G,GAAgB,MAAZ6kE,EACA,MAAM,IAAIh9F,MAAM,kBAEpB,MAAMgW,EAASgnF,EAAS91F,UAAU,EAAG,GAC/B+hB,EAAQ/M,SAASlG,EAAQ,IAI/B,GAFAqsF,EAAat2C,KAAK6oC,MAAQyN,EAAat2C,KAAK6oC,MAAMngF,QAAO2/D,GAAQA,EAAKhlB,OAAS4tC,IAC/EqF,EAAalK,SAAS6L,MAAM/6E,GACW,IAAnCo5E,EAAat2C,KAAK6oC,MAAMl2F,OAExB,KACwB,IAAhBqvB,EAAKrvB,QADA,CAIT,MAAM0iG,EAAUrzE,EAAKA,EAAKrvB,OAAS,GACnC,GAAe,MAAX0iG,GAAmBA,EAAQr1C,KAAK6oC,MAAMl2F,OAAS,EAC/C,MAGJqvB,EAAKoK,MACL,MAAMkpE,EAActzE,EAAKA,EAAKrvB,OAAS,GACvC,GAAmB,MAAf2iG,EACA,MAEJ,MAAMjtB,EAAOgtB,EAAQr1C,KAAK6oC,MAAM,GAChCyM,EAAYt1C,KAAK6oC,MAAQyM,EAAYt1C,KAAK6oC,MAAMngF,QAAOmc,KAAOA,EAAEw+B,MAAQ,IAAInhB,WAAWozD,EAAYrrF,UACnGqrF,EAAYt1C,KAAK6oC,MAAMz1F,KAAK,CACxB02F,KAAMzhB,EAAKyhB,KACXzmC,KAAM,GAAGiyC,EAAYrrF,UAAUo+D,EAAKhlB,MAAQ,IAAIloD,UAAU,KAC1D0uF,MAAOxhB,EAAKwhB,OAEpB,CAEJ,OAAOsL,GAAuBnzE,EAAMomE,EAAY1qF,EAAQ,EAEtDw6F,GAAyBv+F,MAAOkQ,EAAQu+E,EAAY1qF,KACtD,GAAwB,MAApBmM,EAAOm2C,KAAKmnB,KACZ,MAAM,IAAIqsB,GAAuB,mDAErC,MAAM2E,EAAW,CACbtP,MAAO,IAELz5E,QAAYsjF,GAAS7oF,EAAO++D,IAAKwf,GACvC,GAAiB,cAAbh5E,EAAI3Q,KACJ,MAAM,IAAIxK,MAAM,wBAEpB,UAAW,MAAMgP,KAASmM,EAAIo5E,UAAW,CACrC,IAAI4P,EAAQ,EAERA,EADAn1F,EAAM+8C,gBAAgB9pD,WACd+M,EAAM+8C,KAAK11C,WAGX,SAAarH,EAAM+8C,MAAMrtD,OAErCwlG,EAAStP,MAAMz1F,KAAK,CAChB02F,KAAM7mF,EAAM2lE,IACZvlB,KAAMpgD,EAAMlI,KACZ8uF,MAAOuO,GAEf,CAEA,MAAMC,EAAYnT,EAAOiL,UAAUtmF,EAAOm2C,KAAKmnB,MAC/CgxB,EAAShxB,KAAO,IAAI+d,EAAO,CAAEzmF,KAAM,YAAage,KAAM47E,EAAU57E,KAAM8nE,MAAO8T,EAAU9T,QAASuB,UAChG,MAAMv0B,EAAQ,SAAa,UAAc4mC,IAMzC,MAAO,CACHvvB,UANc,GAAQrX,EAAO62B,EAAY,CACzCphB,MAAO,EACPqhB,WAAYx+E,EAAO++D,IAAI9sD,QACvBjB,OAAQnd,EAAQmd,SAIhBmlC,KAAMm4C,EACT,ECnHC,GAAe,UAAe,CAAET,iBAAiB,IACjD,GAAM3d,GAAO,mBACb,GAAiB,CACnB2T,yBAA0BiK,IAEvBh+F,eAAe2+F,GAAGh2F,EAAQvH,EAAMqtF,EAAY1qF,EAAU,CAAC,GAC1D,MAAM+oE,EAAO,GAAa,GAAgB/oE,GAC1C,GAAI3C,EAAKwY,SAAS,KACd,MAAM,IAAIigF,GAAuB,8BAErC,MAAMvB,QAAkB+E,GAAe10F,EAAQ8lF,EAAY3hB,GAC3D,GAAI,sBAAuB1rE,EAAMuH,GACjC,MAAMiI,QDTH5Q,eAA0BkQ,EAAQ9O,EAAMqtF,EAAY1qF,GACvD,GAAwB,MAApBmM,EAAOm2C,KAAKmnB,KACZ,MAAM,IAAI+rB,GAAmB,2BAGjC,GAAkB,2BADLhO,EAAOiL,UAAUtmF,EAAOm2C,KAAKmnB,MACjC1oE,KAAmC,CACxC,GAAI,YAAY1D,4BAChB,MAAMwP,QAAeytF,GAA2BnuF,EAAQ9O,EAAMqtF,EAAY1qF,GAC1E,aAAYg4F,GAAqBnrF,EAAOy1C,KAAMooC,EAAY1qF,EAAQgwF,yBAA0BhwF,GAIrF6M,GAHH,GAAI,wCAAyCV,EAAO++D,KAC7CsvB,GAAuB3tF,EAAQ69E,EAAY1qF,GAG1D,CAEA,OADA,GAAI,iBAAiB3C,uBACd88F,GAAoBhuF,EAAQ9O,EAAMqtF,EAAY1qF,EACzD,CCPyB66F,CAAWtG,EAAWl3F,EAAMqtF,EAAY,IACtD3hB,EACH4hB,WAAY/lF,EAAOwZ,UAEvB,OAAOvR,EAAOq+D,GAClB,CCfA,MAAM,GAAe,UAAe,CAAE8uB,iBAAiB,IACjD,GAAM3d,GAAO,qBACb,GAAiB,CAAC,EACjBpgF,eAAe6+F,GAAK5vB,EAAKwf,EAAY1qF,EAAU,CAAC,GACnD,MAAM+oE,EAAO,GAAa,GAAgB/oE,GACpC+6F,QAAiB,GAAQ7vB,EAAKlrE,EAAQskB,KAAMomE,EAAY3hB,GAC9D,GAAI,UAAWgyB,EAAS7vB,KACxB,MAAMr+D,QAAemoF,GAAS+F,EAAS7vB,IAAKwf,EAAY3hB,GACxD,GAAoB,SAAhBl8D,EAAO9L,MAAmC,cAAhB8L,EAAO9L,MAAwC,QAAhB8L,EAAO9L,KAChE,MAAM,IAAIw0F,GAEd,IAKIx2E,EACA8nE,EANAqB,EAAW,GACX8S,EAAU,GACVC,EAAgB,GAChBC,EAAe,GACfC,EAAS,EAGb,MAAMp6F,EAAO8L,EAAO9L,KACpB,IAAIgqF,EAkBJ,GAjBoB,QAAhBl+E,EAAO9L,OACPmnF,EAAWzxE,OAAO5J,EAAOy1C,KAAK11C,YAC9BouF,EAAUvkF,OAAO5J,EAAOy1C,KAAK11C,YAC7BquF,EAAgBxkF,OAAO5J,EAAOy1C,KAAK11C,YACnCsuF,EAAezkF,OAAO5J,EAAOy1C,KAAK11C,YAClCuuF,EAAS,GAEO,cAAhBtuF,EAAO9L,OACPmnF,EAAW,GACX8S,EAAUvkF,OAAO5J,EAAOk+E,OAAO3C,UAAUx7E,YACzCquF,EAAgB,GAChBC,EAAeF,EACfG,EAAS,EACTp8E,EAAOlS,EAAOk+E,OAAOhsE,KACrB8nE,EAAQh6E,EAAOk+E,OAAOlE,MACtBkE,EAASl+E,EAAOk+E,QAEA,SAAhBl+E,EAAO9L,KAAiB,CACxB,MAAMyhB,QAAgB44E,GAAWL,EAAS7vB,IAAKwf,EAAY3hB,GAC3Dmf,EAAWr7E,EAAOk+E,OAAO7C,WACzB8S,EAAUvkF,QAAQ5J,EAAOy1C,KAAKmnB,MAAM78D,YAAc,GAAKC,EAAOy1C,KAAK6oC,MAAMzmE,QAAO,CAACrgB,EAAKnH,IAASmH,GAAOnH,EAAKivF,OAAS,IAAI,IACxH8O,EAAgBxkF,OAAO+L,EAAQy4E,eAC/BC,EAAezkF,OAAO+L,EAAQ04E,cAC9BC,EAAS34E,EAAQ24E,OACjBp8E,EAAOlS,EAAOk+E,OAAOhsE,KACrB8nE,EAAQh6E,EAAOk+E,OAAOlE,MACtBkE,EAASl+E,EAAOk+E,MACpB,CACA,MAAO,CACH7f,IAAK6vB,EAAS7vB,IACdnsD,OACA8nE,QACAqB,WACA8S,UACAC,gBACAC,eACAC,SACAp6F,OACAgqF,SAER,CACA9uF,eAAem/F,GAAWlwB,EAAKwf,EAAY1qF,GACvC,MAAMwiB,EAAU,CACZy4E,cAAe,EACfC,aAAc,EACdC,OAAQ,GAEZ,SAAUzQ,EAAWv8E,IAAI+8D,EAAKlrE,GAAU,CACpC,MAAM6zD,QAAc62B,EAAW/rF,IAAIusE,EAAKlrE,GAGxC,GAFAwiB,EAAQ24E,SACR34E,EAAQ04E,cAAgBrnC,EAAMjnD,WAC1Bs+D,EAAIjrE,OAAS,EACbuiB,EAAQy4E,eAAiBpnC,EAAMjnD,eAE9B,IAAIs+D,EAAIjrE,OAAS,OAwBlB,MAAM,IAAI,GAAa,GAAGirE,EAAIz6D,yCAxBA,CAC9B,MAAM4qF,EAAS,SAAaxnC,GAC5B,GAAIwnC,EAAOlQ,MAAMl2F,OAAS,EAEtB,IAAK,MAAM01E,KAAQ0wB,EAAOlQ,MAAO,CAC7B,MAAMmQ,QAAmBF,GAAWzwB,EAAKyhB,KAAM1B,EAAY1qF,GAC3DwiB,EAAQy4E,eAAiBK,EAAWL,cACpCz4E,EAAQ04E,cAAgBI,EAAWJ,aACnC14E,EAAQ24E,QAAUG,EAAWH,MACjC,KAEC,CAED,GAAmB,MAAfE,EAAO5xB,KACP,MAAM,IAAI+rB,GAAmB,UAAUtqB,EAAIz6D,0BAE/C,MAAMs6E,EAASvD,EAAOiL,UAAU4I,EAAO5xB,MACvC,GAAmB,MAAfshB,EAAO36E,KACP,MAAM,IAAIolF,GAAmB,eAAetqB,EAAIz6D,0BAEpD+R,EAAQy4E,eAAiBlQ,EAAO36E,KAAKxD,YAAc,CACvD,CACJ,CAGA,CACJ,CACA,OAAO4V,CACX,CC/FA,MAAM,GAAe,UAAe,CAAEw3E,iBAAiB,IACjD,GAAM3d,GAAO,sBACb,GAAiB,CACnB+Y,WAAW,EACXpF,yBAA0BiK,aCkC9B,MAAMsB,GACFC,WACA19F,YAAY09F,GACRx9F,KAAKw9F,WAAaA,CACtB,CACAv/F,aAAcE,EAAQ6D,EAAU,CAAC,SpD1C9B/D,gBAAuBE,EAAQuuF,EAAY1qF,EAAU,CAAC,SAClDkwF,GAAS/zF,EAAQuuF,EAAY,IAC7B0G,MACApxF,GAEX,CoDsCey7F,CAAOt/F,EAAQ6B,KAAKw9F,WAAW9Q,WAAY1qF,EACtD,CACA/D,eAAeka,EAAOnW,EAAU,CAAC,GAC7B,OAAOqxF,GAASl7E,EAAOnY,KAAKw9F,WAAW9Q,WAAY1qF,EACvD,CACA/D,oBAAoBka,EAAOnW,EAAU,CAAC,GAClC,OAAOuxF,GAAcp7E,EAAOnY,KAAKw9F,WAAW9Q,WAAY1qF,EAC5D,CACA/D,cAAc7F,EAAM4J,EAAU,CAAC,GAC3B,OpDhCD/D,eAAuB7F,EAAMs0F,EAAY1qF,EAAU,CAAC,GACvD,MAAM,IAAEkrE,SAAcimB,GAAW/6F,EAAMs0F,EAAY,IAC5C0G,MACApxF,IAEP,OAAOkrE,CACX,CoD0Beh4B,CAAQ98C,EAAM4H,KAAKw9F,WAAW9Q,WAAY1qF,EACrD,CACA/D,mBAAmByV,EAAM,CAAC,EAAG1R,EAAU,CAAC,GACpC,OAAO0xF,GAAahgF,EAAK1T,KAAKw9F,WAAW9Q,WAAY1qF,EACzD,CACA/D,UAAWivE,EAAKlrE,EAAU,CAAC,SVnExB/D,gBAAoBivE,EAAKwf,EAAY1qF,EAAU,CAAC,GACnD,MAAM+oE,EAAOgxB,GAAa5kD,GAAgBn1C,GACpC+6F,QAAiB,GAAQ7vB,EAAKnC,EAAKzkD,KAAMomE,EAAY3hB,GACrDl8D,QAAemoF,GAAS+F,EAAS7vB,IAAKwf,EAAY3hB,GACxD,GAAoB,SAAhBl8D,EAAO9L,MAAmC,QAAhB8L,EAAO9L,KACjC,MAAM,IAAI60F,GAEd,GAAsB,MAAlB/oF,EAAOi+E,QACP,MAAM,IAAI6K,SAEP9oF,EAAOi+E,QAAQ/hB,EAC1B,CUyDe2yB,CAAIxwB,EAAKltE,KAAKw9F,WAAW9Q,WAAY1qF,EAChD,CACA/D,YAAYivE,EAAKnsD,EAAM/e,EAAU,CAAC,GAC9B,ORxDD/D,eAAqBivE,EAAKnsD,EAAM2rE,EAAY1qF,EAAU,CAAC,GAC1D,MAAM+oE,EAAO,GAAa,GAAgB/oE,GACpC+6F,QAAiB,GAAQ7vB,EAAKnC,EAAKzkD,KAAMomE,EAAY1qF,GAE3D,GADA,GAAI,cAAe+6F,EAAS7vB,IAAKnsD,GAC7BgqD,EAAKqsB,UAAW,CAGhB,MAAMtI,QAAa,SAAK7wF,kBACpB,UAAW,MAAMsJ,KAAS6vF,GAAU2F,EAAS7vB,IAAKwf,EAAY1qF,GAAU,CACpE,IAAIw0F,EACAtI,EAAQ,GACZ,GAAmB,QAAf3mF,EAAMxE,KAENyzF,EAAW,IAAIhN,EAAO,CAAEzmF,KAAM,OAAQqP,KAAM7K,EAAM+8C,WAEjD,IAAmB,SAAf/8C,EAAMxE,MAAkC,cAAfwE,EAAMxE,KAKpC,MAAM,IAAIw0F,GAJVf,EAAWjvF,EAAMwlF,OACjBmB,EAAQ3mF,EAAM+8C,KAAK6oC,KAIvB,CACAqJ,EAASz1E,KAAOA,EAChB,MAAMujC,EAAO,CACTmnB,KAAM+qB,EAASpM,UACf+C,MAAOe,QAEL,CACF5nE,KAAM/e,EAAM+e,KACZwmE,QAASxoC,EAEjB,CACJ,IAECnmD,GAAW+zF,GAAS/zF,EAAQuuF,EAAY,IAClC3hB,EACH0nB,WAAYx0F,gBAAiBE,EAAQ03D,GACjC,UAAW,MAAMtuD,KAASpJ,QAChBF,iBAEF,MAAMqmD,EAAO/8C,EAAMulF,QACb/xF,EAAM,SAAaupD,GACnBq5C,QAAmB,GAAQ5iG,EAAK86D,EAAO,IACtCkV,EACH4hB,WAAYzf,EAAI9sD,UAEpB,GAAiB,MAAbkkC,EAAKmnB,KACL,MAAM,IAAI+rB,GAAmB,GAAGmG,iBAEpC,MAAM5Q,EAASvD,EAAOiL,UAAUnwC,EAAKmnB,MACrC,MAAO,CACHyB,IAAKywB,EACLlmG,KAAMghB,OAAO1d,EAAI9D,QACjBqvB,KAAM/e,EAAM+e,KACZymE,SAER,CAER,MACA9uF,MAAO+vD,GAAU,GAAKA,KAC1B,GAAY,MAAR8gC,EACA,MAAM,IAAI,GAAa,mBAAmBiO,EAAS7vB,IAAIz6D,cAE3D,OAAOopF,GAAe/M,EAAK5hB,IAAK6vB,EAAUrQ,EAAY3hB,EAC1D,CACA,MAAMlV,QAAc62B,EAAW/rF,IAAIo8F,EAAS7vB,IAAKlrE,GACjD,IAAIw0F,EACAtI,EAAQ,GACZ,GAAI6O,EAAS7vB,IAAIjrE,OAAS,EAEtBu0F,EAAW,IAAIhN,EAAO,CAAEzmF,KAAM,OAAQqP,KAAMyjD,QAE3C,CACD,MAAMvR,EAAO,SAAauR,GAC1B,GAAiB,MAAbvR,EAAKmnB,KACL,MAAM,IAAI+rB,GAAmB,GAAGuF,EAAS7vB,IAAIz6D,0BAEjDy7E,EAAQ5pC,EAAK6oC,MACbqJ,EAAWhN,EAAOiL,UAAUnwC,EAAKmnB,KACrC,CACA+qB,EAASz1E,KAAOA,EAChB,MAAM68E,EAAe,SAAa,CAC9BnyB,KAAM+qB,EAASpM,UACf+C,MAAOe,IAEL5uF,QAAaqxE,GAAOh6C,OAAOinE,GAC3BD,EAAaxwB,GAAIxuE,OAAOo+F,EAAS7vB,IAAI9sD,QAAS,OAAY9gB,GAEhE,aADMotF,EAAW5qF,IAAI67F,EAAYC,GAC1B/B,GAAe8B,EAAYZ,EAAUrQ,EAAY3hB,EAC5D,CQjCe8yB,CAAM3wB,EAAKnsD,EAAM/gB,KAAKw9F,WAAW9Q,WAAY1qF,EACxD,CACA/D,SAASE,EAAQyI,EAAQvH,EAAM2C,EAAU,CAAC,GACtC,OPnED/D,eAAkBE,EAAQyI,EAAQvH,EAAMqtF,EAAY1qF,EAAU,CAAC,GAClE,MAAM+oE,EAAO,GAAa,GAAgB/oE,GAC1C,GAAI3C,EAAKwY,SAAS,KACd,MAAM,IAAIigF,GAAuB,8BAErC,MAAOvB,EAAWuF,SAAgBh2F,QAAQS,IAAI,CAC1C+0F,GAAe10F,EAAQ8lF,EAAY3hB,GACnCwwB,GAAYp9F,EAAQkB,EAAMqtF,EAAY3hB,KAQ1C,OANA,GAAI,0BAA2B5sE,EAAQkB,EAAMuH,UACxBuzF,GAAQ5D,EAAWuF,EAAQpP,EAAY,CACxDiO,iBAAkB5vB,EAAKmxB,MACvBvP,WAAY/lF,EAAOwZ,WAChB2qD,KAEOmC,GAClB,COmDe4wB,CAAG3/F,EAAQyI,EAAQvH,EAAMW,KAAKw9F,WAAW9Q,WAAY1qF,EAChE,CACA/D,SAAUivE,EAAKlrE,EAAU,CAAC,SN5EvB/D,gBAAmBivE,EAAKwf,EAAY1qF,EAAU,CAAC,GAClD,MAAM+oE,EAAO,GAAa,GAAgB/oE,GACpC+6F,QAAiB,GAAQ7vB,EAAKnC,EAAKzkD,KAAMomE,EAAY3hB,GACrDl8D,QAAemoF,GAAS+F,EAAS7vB,IAAKwf,GAC5C,GAAoB,SAAhB79E,EAAO9L,MAAmC,QAAhB8L,EAAO9L,KAArC,CAIA,GAAsB,MAAlB8L,EAAOi+E,QACP,MAAM,IAAI6K,GAEd,GAAoB,cAAhB9oF,EAAO9L,KACP,MAAM,IAAI80F,SAEPhpF,EAAOi+E,QAAQ,CAClB51F,OAAQ8K,EAAQ9K,OAChBD,OAAQ+K,EAAQ/K,QATpB,YAFU4X,CAad,CM2DekvF,CAAG7wB,EAAKltE,KAAKw9F,WAAW9Q,WAAY1qF,EAC/C,CACA/D,YAAYivE,EAAK8wB,EAASh8F,EAAU,CAAC,GACjC,OLnED/D,eAAqBo+F,EAAW2B,EAAStR,EAAY1qF,EAAU,CAAC,GACnE,MAAM+oE,EAAO,GAAa,GAAgB/oE,GAC1C,GAAIg8F,EAAQnmF,SAAS,KACjB,MAAM,IAAIigF,GAAuB,8BAGrC,GAAmB,qBADCd,GAASqF,EAAW3P,EAAY1qF,IAC1Ce,KACN,MAAM,IAAI80F,GAAmB,GAAGwE,EAAU5pF,yCAE9C,GAAI,cAAeurF,GACnB,MAMM15C,EAAO,CACTmnB,KAPa,IAAI+d,EAAO,CACxBzmF,KAAM,YACNge,KAAMgqD,EAAKhqD,KACX8nE,MAAO9d,EAAK8d,QAIGuB,UACf+C,MAAO,IAELpyF,EAAM,SAAaupD,GACnBhlD,QAAaqxE,GAAOh6C,OAAO57B,GAC3BkjG,EAAc9wB,GAAIxuE,OAAOosE,EAAK4hB,WAAY,OAAYrtF,SACtDotF,EAAW5qF,IAAIm8F,EAAaljG,GAClC,MAAOw7F,EAAWuF,SAAgBh2F,QAAQS,IAAI,CAC1C+0F,GAAee,EAAW3P,EAAY3hB,GACtCwwB,GAAY0C,EAAaD,EAAStR,EAAY3hB,KAOlD,OALA,GAAI,mCAAoCizB,EAAS3B,UAC5BlC,GAAQ5D,EAAWuF,EAAQpP,EAAY,IACrD3hB,EACH4vB,iBAAkB5vB,EAAKmxB,SAEbhvB,GAClB,CKiCegxB,CAAMhxB,EAAK8wB,EAASh+F,KAAKw9F,WAAW9Q,WAAY1qF,EAC3D,CACA/D,SAASivE,EAAK5mD,EAAMtkB,EAAU,CAAC,GAC3B,OAAO46F,GAAG1vB,EAAK5mD,EAAMtmB,KAAKw9F,WAAW9Q,WAAY1qF,EACrD,CACA/D,WAAWivE,EAAKlrE,EAAU,CAAC,GACvB,OAAO86F,GAAK5vB,EAAKltE,KAAKw9F,WAAW9Q,WAAY1qF,EACjD,CACA/D,YAAYivE,EAAKlrE,EAAU,CAAC,GACxB,OD1ED/D,eAAqBivE,EAAKwf,EAAY1qF,EAAU,CAAC,GACpD,MAAM+oE,EAAO,GAAa,GAAgB/oE,GACpC+6F,QAAiB,GAAQ7vB,EAAKnC,EAAKzkD,KAAMomE,EAAY3hB,GACrD8d,EAAQ9d,EAAK8d,OAAS,CACxBc,KAAMlxE,OAAOxf,KAAKs3C,MAAMr3C,KAAK+xE,MAAQ,MACrC2e,MAAO,GAGX,GADA,GAAI,cAAemT,EAAS7vB,IAAK2b,GAC7B9d,EAAKqsB,UAAW,CAGhB,MAAMtI,QAAa,SAAK7wF,kBACpB,UAAW,MAAMsJ,KAAS6vF,GAAU2F,EAAS7vB,IAAKwf,GAAa,CAC3D,IAAI8J,EACAtI,EACJ,GAAmB,QAAf3mF,EAAMxE,KACNyzF,EAAW,IAAIhN,EAAO,CAAEp3E,KAAM7K,EAAM+8C,OACpC4pC,EAAQ,OAEP,IAAmB,SAAf3mF,EAAMxE,MAAkC,cAAfwE,EAAMxE,KAKpC,MAAM,IAAIw0F,GAJVf,EAAWjvF,EAAMwlF,OACjBmB,EAAQ3mF,EAAM+8C,KAAK6oC,KAIvB,CACAqJ,EAAS3N,MAAQA,EACjB,MAAMvkC,EAAO,CACTmnB,KAAM+qB,EAASpM,UACf+C,MAAOe,QAEL,CACF5nE,KAAM/e,EAAM+e,KACZwmE,QAASxoC,EAEjB,CACJ,IAECnmD,GAAW+zF,GAAS/zF,EAAQuuF,EAAY,IAClC3hB,EACH0nB,WAAYx0F,gBAAiBE,EAAQ03D,GACjC,UAAW,MAAMtuD,KAASpJ,QAChBF,iBAEF,MAAMqmD,EAAO/8C,EAAMulF,QACb/xF,EAAM,SAAaupD,GACnBq5C,QAAmB,GAAQ5iG,EAAK86D,EAAO,IACtCkV,EACH4hB,WAAYzf,EAAI9sD,UAEpB,GAAiB,MAAbkkC,EAAKmnB,KACL,MAAM,IAAI+rB,GAAmB,GAAGmG,iBAEpC,MAAM5Q,EAASvD,EAAOiL,UAAUnwC,EAAKmnB,MACrC,MAAO,CACHyB,IAAKywB,EACLlmG,KAAMghB,OAAO1d,EAAI9D,QACjBqvB,KAAM/e,EAAM+e,KACZymE,SAER,CAER,MACA9uF,MAAO+vD,GAAU,GAAKA,KAC1B,GAAY,MAAR8gC,EACA,MAAM,IAAI,GAAa,mBAAmBiO,EAAS7vB,IAAIz6D,cAE3D,OAAOopF,GAAe/M,EAAK5hB,IAAK6vB,EAAUrQ,EAAY3hB,EAC1D,CACA,MAAMlV,QAAc62B,EAAW/rF,IAAIo8F,EAAS7vB,IAAKlrE,GACjD,IAAIw0F,EACAtI,EAAQ,GACZ,GAAI6O,EAAS7vB,IAAIjrE,OAAS,EACtBu0F,EAAW,IAAIhN,EAAO,CAAEp3E,KAAMyjD,QAE7B,CACD,MAAMvR,EAAO,SAAauR,GAE1B,GADAq4B,EAAQ5pC,EAAK6oC,MACI,MAAb7oC,EAAKmnB,KACL,MAAM,IAAI+rB,GAAmB,GAAGuF,EAAS7vB,IAAIz6D,0BAEjD+jF,EAAWhN,EAAOiL,UAAUnwC,EAAKmnB,KACrC,CACA+qB,EAAS3N,MAAQA,EACjB,MAAM+U,EAAe,SAAa,CAC9BnyB,KAAM+qB,EAASpM,UACf+C,MAAOe,IAEL5uF,QAAaqxE,GAAOh6C,OAAOinE,GAC3BD,EAAaxwB,GAAIxuE,OAAOo+F,EAAS7vB,IAAI9sD,QAAS,OAAY9gB,GAEhE,aADMotF,EAAW5qF,IAAI67F,EAAYC,GAC1B/B,GAAe8B,EAAYZ,EAAUrQ,EAAY3hB,EAC5D,CClBeozB,CAAMjxB,EAAKltE,KAAKw9F,WAAW9Q,WAAY1qF,EAClD,EAKG,SAAS+qF,GAAOqR,GACnB,OAAO,IAAIb,GAAca,EAC7B,uHCvGO,MAAMzf,UAAmBpmF,MAC5BuH,YAAY4d,EAASzb,GACjBiF,MAAMwW,GAAW,6BACjB1d,KAAK+C,KAAO,UACZ/C,KAAKiC,KAAOA,GAAQ,WACxB,ECFG,SAAS28E,EAAgBzgF,EAAQghB,EAAQnd,GAC5C,MAAM+oE,EAAO/oE,GAAW,CAAC,EACnByK,ECLH,SAAqBuF,GACxB,GAAW,MAAPA,EAAa,CACb,GAAoC,mBAAzBA,EAAIxb,OAAOiW,UAClB,OAAOuF,EAAIxb,OAAOiW,YAEtB,GAAyC,mBAA9BuF,EAAIxb,OAAOuQ,eAClB,OAAOiL,EAAIxb,OAAOuQ,iBAEtB,GAAwB,mBAAbiL,EAAIrM,KACX,OAAOqM,CAEf,CACA,MAAM,IAAIzZ,MAAM,0CACpB,CDRqB4zE,CAAYhuE,GA+D7B,OA9DAF,kBACI,IAAI4gF,EACJ,MAAMC,EAAe,KACO,MAApBD,GACAA,GAAkB,EAG1B,IADA1/D,EAAOE,iBAAiB,QAASy/D,KACpB,CACT,IAAIjwE,EACJ,IACI,GAAIsQ,EAAOG,QAAS,CAChB,MAAM,aAAEy/D,EAAY,UAAEC,GAAcjU,EACpC,MAAM,IAAI4T,EAAWI,EAAcC,EACvC,CACA,MAAM9mF,EAAQ,IAAI4N,SAAQ,CAACC,EAASC,KAChC64E,EAAmB,KACf,MAAM,aAAEE,EAAY,UAAEC,GAAcjU,EACpC/kE,EAAO,IAAI24E,EAAWI,EAAcC,GAAW,CAClD,IAGLnwE,QAAe/I,QAAQg1B,KAAK,CAAC5iC,EAAOuU,EAAS9G,SAC7Ck5E,EAAmB,IACvB,CACA,MAAO38E,GACHid,EAAOC,oBAAoB,QAAS0/D,GAEpC,MAAMG,EAA8B,YAAb/8E,EAAIa,MAAsBoc,EAAOG,QAMxD,GALI2/D,GAAmC,MAAhBlU,EAAK7rD,eAElB6rD,EAAK7rD,QAAQ/gB,GAGQ,mBAApBsO,EAASyyE,OAChB,IACI,MAAM3jF,EAAIkR,EAASyyE,SACf3jF,aAAauK,SACbvK,EAAEupB,OAAM5iB,IACsB,MAAtB6oE,EAAKoU,eACLpU,EAAKoU,cAAcj9E,EACvB,GAGZ,CACA,MAAOA,GACuB,MAAtB6oE,EAAKoU,eACLpU,EAAKoU,cAAcj9E,EAE3B,CAEJ,GAAI+8E,IAAyC,IAAvBlU,EAAKqU,cACvB,OAEJ,MAAMl9E,CACV,CACA,IAAoB,IAAhB2M,EAAOwb,KACP,YAEExb,EAAOhQ,KACjB,CACAsgB,EAAOC,oBAAoB,QAAS0/D,EACxC,CACOO,EACX,CACO,SAASgf,EAAc9gB,EAAMp+D,EAAQnd,GACxC,OAAQ7D,GAAWo/E,EAAKqB,EAAgBzgF,EAAQghB,EAAQnd,GAC5D,CACO,SAASs8F,EAAgBniB,EAAQh9D,EAAQnd,GAC5C,MAAO,CACHu7E,KAAM8gB,EAAcliB,EAAOoB,KAAMp+D,EAAQ,IAClCnd,EACHkd,aAASrZ,IAEb1H,OAAQygF,EAAgBzC,EAAOh+E,OAAQghB,EAAQnd,GAEvD,qCEjFe,SAASu8F,EAAa/rF,GACpC,IAAK5Z,MAAM+S,QAAQ6G,GAClB,MAAM,IAAI7Q,UAAU,iCAAiC6Q,GAKtD,IAAK,IAAIgP,GAFThP,EAAQ,IAAIA,IAEWvb,OAAS,EAAGuqB,EAAQ,EAAGA,IAAS,CACtD,MAAM45E,EAAWniG,KAAK8kB,MAAM9kB,KAAKgwB,UAAYzH,EAAQ,KACpDhP,EAAMgP,GAAQhP,EAAM4oF,IAAa,CAAC5oF,EAAM4oF,GAAW5oF,EAAMgP,GAC3D,CAEA,OAAOhP,CACR,qGCbO,MAAMgsF,EACTruF,IAAIpO,EAAKC,GACL,OAAO8D,QAAQE,OAAO,IAAIzN,MAAM,2BACpC,CACAuJ,IAAIC,EAAK0R,EAAKzR,GACV,OAAO8D,QAAQE,OAAO,IAAIzN,MAAM,2BACpC,CACA0F,cAAeE,EAAQ6D,GACnB,UAAW,MAAM,IAAEkrE,EAAG,MAAErX,KAAW13D,QACzB6B,KAAK8B,IAAIorE,EAAKrX,EAAO7zD,SACrBkrE,CAEd,CACAvsE,IAAIoB,EAAKC,GACL,OAAO8D,QAAQE,OAAO,IAAIzN,MAAM,2BACpC,CACA0F,cAAeE,EAAQ6D,GACnB,UAAW,MAAMD,KAAO5D,OACd,CACF+uE,IAAKnrE,EACL8zD,YAAa71D,KAAKW,IAAIoB,EAAKC,GAGvC,CACA/D,aAAa8D,EAAKC,SACR8D,QAAQE,OAAO,IAAIzN,MAAM,8BACnC,CACA0F,iBAAkBE,EAAQ6D,GACtB,UAAW,MAAMD,KAAO5D,QACd6B,KAAK+M,OAAOhL,EAAKC,SACjBD,CAEd,CAIA9D,aAAc+D,GACV,MAAM,IAAIzJ,MAAM,6BACpB,yWCrCG,SAASkmG,EAAgBv8F,GAE5B,OADAA,EAAMA,GAAO,IAAI3J,MAAM,eAChB,EAAQ2J,EAAK,kBACxB,CACO,SAASw8F,EAAiBx8F,GAE7B,OADAA,EAAMA,GAAO,IAAI3J,MAAM,gBAChB,EAAQ2J,EAAK,mBACxB,CACO,SAASy8F,EAAez8F,GAE3B,OADAA,EAAMA,GAAO,IAAI3J,MAAM,cAChB,EAAQ2J,EAAK,iBACxB,CACO,SAAS08F,EAAe18F,GAE3B,OADAA,EAAMA,GAAO,IAAI3J,MAAM,cAChB,EAAQ2J,EAAK,iBACxB,CACO,SAAS28F,EAAkB38F,GAE9B,OADAA,EAAMA,GAAO,IAAI3J,MAAM,iBAChB,EAAQ2J,EAAK,oBACxB,CACO,SAAS48F,EAAe58F,GAE3B,OADAA,EAAMA,GAAO,IAAI3J,MAAM,cAChB,EAAQ2J,EAAK,iBACxB,CACO,SAAS68F,EAAc78F,GAE1B,OADAA,EAAMA,GAAO,IAAI3J,MAAM,aAChB,EAAQ2J,EAAK,gBACxB,CACO,SAAS88F,EAAa98F,GAEzB,OADAA,EAAMA,GAAO,IAAI3J,MAAM,WAChB,EAAQ2J,EAAK,cACxB,kLChCIitE,EAOJ,SAASvsE,EAAOivB,EAAK51B,EAAK/E,GACxB+E,EAAMA,GAAO,GAEb,IAAImzE,EADJl4E,EAASA,GAAU,EAGnB,KAAM26B,GAAOw9C,GACXpzE,EAAI/E,KAAmB,IAAN26B,EAAcy9C,EAC/Bz9C,GAAO,IAET,KAAMA,EAAM09C,GACVtzE,EAAI/E,KAAmB,IAAN26B,EAAcy9C,EAC/Bz9C,KAAS,EAMX,OAJA51B,EAAI/E,GAAgB,EAAN26B,EAEdjvB,EAAOuV,MAAQjhB,EAASk4E,EAAY,EAE7BnzE,CACT,EAvBIqzE,EAAM,IAENC,GAAS,IACTF,EAAMp2E,KAAKqhB,IAAI,EAAG,IAsBtB,IAAIlT,EAKJ,SAAS4M,EAAKjZ,EAAK7D,GACjB,IAII6a,EAJAyD,EAAS,EAETpW,EAAS,EACTowE,EAFAt4E,EAASA,GAAU,EAInBiyB,EAAIpuB,EAAI9D,OAEZ,EAAG,CACD,GAAIu4E,GAAWrmD,EAEb,MADAnV,EAAKmE,MAAQ,EACP,IAAIvH,WAAW,2BAEvBmB,EAAIhX,EAAIy0E,KACRh6D,GAAOpW,EAAQ,IACV2S,EAAI09D,IAAWrwE,GACf2S,EAAI09D,GAAUx2E,KAAKqhB,IAAI,EAAGlb,GAC/BA,GAAS,CACX,OAAS2S,GAAK29D,GAId,OAFA17D,EAAKmE,MAAQq3D,EAAUt4E,EAEhBse,CACT,EA1BIk6D,EAAQ,IACRD,EAAS,IA2Bb,IAAIE,EAAK12E,KAAKqhB,IAAI,EAAI,GAClBs1D,EAAK32E,KAAKqhB,IAAI,EAAG,IACjBu1D,EAAK52E,KAAKqhB,IAAI,EAAG,IACjBw1D,EAAK72E,KAAKqhB,IAAI,EAAG,IACjBy1D,EAAK92E,KAAKqhB,IAAI,EAAG,IACjB01D,EAAK/2E,KAAKqhB,IAAI,EAAG,IACjB21D,EAAKh3E,KAAKqhB,IAAI,EAAG,IACjB41D,EAAKj3E,KAAKqhB,IAAI,EAAG,IACjB61D,EAAKl3E,KAAKqhB,IAAI,EAAG,IAyBrB,EARa,CACT1X,OAAQusE,EACR/nE,OAAQA,EACRgpE,eAlBS,SAAUvxE,GACrB,OACEA,EAAQ8wE,EAAK,EACb9wE,EAAQ+wE,EAAK,EACb/wE,EAAQgxE,EAAK,EACbhxE,EAAQixE,EAAK,EACbjxE,EAAQkxE,EAAK,EACblxE,EAAQmxE,EAAK,EACbnxE,EAAQoxE,EAAK,EACbpxE,EAAQqxE,EAAK,EACbrxE,EAAQsxE,EAAK,EACA,EAEjB,GCzEO,MAAM,EAAS,CAAC/9D,EAAMlb,EAAS,IAE7B,CADM,SAAckb,EAAMlb,GACnB,gBAQHm5E,EAAW,CAACC,EAAK1pE,EAAQ1P,EAAS,KAC7C,SAAco5E,EAAK1pE,EAAQ1P,GACpB0P,GAOIwpE,EAAkBE,GACtB,iBAAsBA,GCElB,EAAUlD,IACrB,MAAMj1D,GAAQ,QAAOi1D,IACdnrE,EAAM8sE,GAAc,EAAc52D,IAClC1gB,EAAMu3E,GAAgB,EAAc72D,EAAM7gB,SAASy3E,IACpDp4C,EAASxe,EAAM7gB,SAASy3E,EAAaC,GAE3C,GAAIr4C,EAAO/nB,aAAenX,EACxB,MAAM,IAAIc,MAAM,oBAGlB,OAAO,IAAI02E,EAAOhtE,EAAMxK,EAAMk/B,EAAQxe,EAAK,EAoCtC,MAAM82D,EASXnvE,YAAamC,EAAMxK,EAAMk/B,EAAQxe,GAC/BnY,KAAKiC,KAAOA,EACZjC,KAAKvI,KAAOA,EACZuI,KAAK22B,OAASA,EACd32B,KAAKmY,MAAQA,CACf,ECtEK,MAAM1V,EAAS,CAACkqE,EAAMC,KAC3B,MAAM,MAAEz0D,EAAK,QAAEiI,GAAYusD,EAC3B,OACO,IADCvsD,EAEGysD,EACL10D,EACA20D,EAAUH,GAC+B,GAAU0G,EAAA,WAG9CrG,EACL70D,EACA20D,EAAUH,GACmCC,GAAQK,EAAA,WAE3D,EAoBI19D,EAAQ,IAAIsY,QAMZilD,EAAYI,IAChB,MAAMJ,EAAYv9D,EAAM5O,IAAIusE,GAC5B,GAAiB,MAAbJ,EAAmB,CACrB,MAAMA,EAAY,IAAIt9D,IAEtB,OADAD,EAAM1T,IAAIqxE,EAAKJ,GACRA,CACT,CACA,OAAOA,GAWF,MAAMK,EAOXrtE,YAAasgB,EAASne,EAAMmrE,EAAWj1D,GAErCnY,KAAKiC,KAAOA,EAEZjC,KAAKogB,QAAUA,EAEfpgB,KAAKotE,UAAYA,EAEjBptE,KAAKmY,MAAQA,EAKbnY,KAAK,KAAOmY,CACd,CAQIk1D,YACF,OAAOrtE,IACT,CAGI2R,iBACF,OAAO3R,KAAKmY,MAAMxG,UACpB,CAGI/C,iBACF,OAAO5O,KAAKmY,MAAMvJ,UACpB,CAKA0+D,OACE,OAAQttE,KAAKogB,SACX,KAAK,EACH,OAA4D,KAE9D,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,UAAEmrE,GAAcptE,KAE5B,GAAIiC,IAASsrE,EACX,MAAM,IAAIh1E,MAAM,4CAIlB,GAAI60E,EAAUnrE,OAASurE,EACrB,MAAM,IAAIj1E,MAAM,sDAGlB,OACE40E,EAAIM,SAC8C,EAGtD,CACA,QACE,MAAMl1E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAKAstD,OACE,OAAQ1tE,KAAKogB,SACX,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,OAAE00B,GAAW32B,KAAKotE,UACxBA,EDxJQ,EAACnrE,EAAM00B,KAC3B,MAAMl/B,EAAOk/B,EAAO/nB,WACdmgE,EAAa,EAAsB9sE,GACnC+sE,EAAeD,EAAa,EAAsBt3E,GAElD0gB,EAAQ,IAAI3d,WAAWw0E,EAAev3E,GAK5C,OAJA,EAAgBwK,EAAMkW,EAAO,GAC7B,EAAgB1gB,EAAM0gB,EAAO42D,GAC7B52D,EAAMtc,IAAI86B,EAAQq4C,GAEX,IAAIC,EAAOhtE,EAAMxK,EAAMk/B,EAAQxe,EAAK,EC8InB,CAAclW,EAAM00B,GACtC,OACEw2C,EAAIQ,SAAS3tE,KAAKiC,KAAMmrE,EAE5B,CACA,KAAK,EACH,OAAgD,KAElD,QACE,MAAM70E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAMA9I,OAAQs2D,GACN,OAAOT,EAAI71D,OAAOtX,KAAM4tE,EAC1B,CAWA5/D,cAAeqb,EAAMukD,GACnB,MAAMC,EACiE,EAGvE,OACEA,GACAxkD,EAAKpnB,OAAS4rE,EAAQ5rE,MACtBonB,EAAKjJ,UAAYytD,EAAQztD,SD5JT,EAACtJ,EAAG/E,KACxB,GAAI+E,IAAM/E,EACR,OAAO,EACF,CACL,MAAMK,EAAoE,EAE1E,OACE0E,EAAE7U,OAASmQ,EAAKnQ,MAChB6U,EAAErf,OAAS2a,EAAK3a,MAChB2a,EAAK+F,iBAAiB3d,aACtB,QAAWsc,EAAEqB,MAAO/F,EAAK+F,MAE7B,GCiJI,CAAckR,EAAK+jD,UAAWS,EAAQT,UAE1C,CAMA36D,SAAUm6D,GACR,OAAOnqE,EAAOzC,KAAM4sE,EACtB,CAKA70D,SACE,MAAO,CAAE,IAAKtV,EAAOzC,MACvB,CAEA2sE,OACE,OAAO3sE,IACT,CAEYuzB,IAAP/8B,OAAO+8B,eACV,MAAO,KACT,CAIA,CAAC/8B,OAAOs3E,IAAI,iCACV,MAAO,OAAO9tE,KAAKyS,aACrB,CAoBAzE,aAAcjS,GACZ,GAAa,MAATA,EACF,OAAO,KAGT,MAAM8C,EAA2B,EACjC,GAAIA,aAAiBsuE,EAEnB,OAAOtuE,EACF,GAAmB,MAAdA,EAAM,MAAgBA,EAAM,OAASA,EAAMsZ,OAAUtZ,EAAMwuE,QAAUxuE,EAAO,CAMtF,MAAM,QAAEuhB,EAAO,KAAEne,EAAI,UAAEmrE,EAAS,MAAEj1D,GAAUtZ,EAC5C,OAAO,IAAIsuE,EACT/sD,EACAne,EACwC,EACxCkW,GAAS41D,EAAU3tD,EAASne,EAAMmrE,EAAUj1D,OAEhD,CAAO,IAAyB,IAArBtZ,EAAMmvE,GAAqB,CAIpC,MAAM,QAAE5tD,EAAO,UAAEgtD,EAAS,KAAEnrE,GAASpD,EAC/B83B,EAEH,EAAcy2C,GACjB,OAAOD,EAAIxuE,OAAOyhB,EAASne,EAAM00B,EACnC,CAGE,OAAO,IAEX,CAaA3oB,cAAeoS,EAASne,EAAM00B,GAC5B,GAAoB,iBAAT10B,EACT,MAAM,IAAI1J,MAAM,yCAGlB,KAAMo+B,EAAOxe,iBAAiB3d,YAC5B,MAAM,IAAIjC,MAAM,kBAGlB,OAAQ6nB,GACN,KAAK,EACH,GAAIne,IAASsrE,EACX,MAAM,IAAIh1E,MACR,wCAAwCg1E,qBAG1C,OAAO,IAAIJ,EAAI/sD,EAASne,EAAM00B,EAAQA,EAAOxe,OAGjD,KAAK,EAAG,CACN,MAAMA,EAAQ41D,EAAU3tD,EAASne,EAAM00B,EAAOxe,OAC9C,OAAO,IAAIg1D,EAAI/sD,EAASne,EAAM00B,EAAQxe,EACxC,CACA,QACE,MAAM,IAAI5f,MAAM,mBAGtB,CASAyV,gBAAiB2oB,GACf,OAAOw2C,EAAIxuE,OAAO,EAAG4uE,EAAa52C,EACpC,CAYA3oB,gBAAiB/L,EAAM00B,GACrB,OAAOw2C,EAAIxuE,OAAO,EAAGsD,EAAM00B,EAC7B,CAgBA3oB,cAAemK,GACb,MAAO+0D,EAAKe,GAAad,EAAIe,YAAY/1D,GACzC,GAAI81D,EAAUh3E,OACZ,MAAM,IAAIsB,MAAM,oBAElB,OAAO20E,CACT,CAkBAl/D,mBAAoBmK,GAClB,MAAMg2D,EAAQhB,EAAIiB,aAAaj2D,GACzBk2D,EAAaF,EAAM12E,KAAO02E,EAAMG,cAChCC,GAAiB,QACrBp2D,EAAM7gB,SAAS+2E,EAAYA,EAAaF,EAAMG,gBAEhD,GAAIC,EAAe3/D,aAAeu/D,EAAMG,cACtC,MAAM,IAAI/1E,MAAM,oBAElB,MAAMi2E,EAAcD,EAAej3E,SACjC62E,EAAMG,cAAgBH,EAAMM,YAExB93C,EAAS,IAAIs4C,EACjBd,EAAMO,cACNP,EAAMM,WACND,EACAD,GAMF,MAAO,CAHa,IAAlBJ,EAAM/tD,QACF+sD,EAAIM,SAAyD,GAC7DN,EAAIQ,SAASQ,EAAM7C,MAAO30C,GACaxe,EAAM7gB,SAAS62E,EAAM12E,MACpE,CAkBAuW,oBAAqB2gE,GACnB,IAAIz3E,EAAS,EACb,MAAMyO,EAAO,KACX,MAAOrK,EAAGrE,GAAU,EAAc03E,EAAar3E,SAASJ,IAExD,OADAA,GAAUD,EACHqE,GAGT,IAAI8kB,EAA4Bza,IAC5B2lE,EAAyB,EAS7B,GARuC,KAAd,GAEvBlrD,EAA2B,EAC3BlpB,EAAS,GAETo0E,EAA0B3lE,IAGZ,IAAZya,GAA6B,IAAZA,EACnB,MAAM,IAAIxP,WAAW,uBAAuBwP,KAG9C,MAAMiuD,EAAan3E,EACbw3E,EAAkC/oE,IAClC8oE,EAAa9oE,IACblO,EAAOP,EAASu3E,EAGtB,MAAO,CAAEruD,UAASkrD,QAAOoD,gBAAeD,aAAYH,cAF9B72E,EAAO42E,EAEsC52E,OACrE,CAiBAuW,aAAc7P,EAAQyuE,GACpB,MAAOr+D,EAAQ4J,GAASy2D,EAAgBzwE,EAAQyuE,GAE1CM,EAAMC,EAAI/lE,OAAO+Q,GAEvB,GAAoB,IAAhB+0D,EAAI9sD,SAA+B,MAAdjiB,EAAO,GAC9B,MAAM5F,MAAM,0DAMd,OAFAu0E,EAAUI,GAAKrxE,IAAI0S,EAAQpQ,GAEpB+uE,CACT,EAaF,MAAM0B,EAAkB,CAACzwE,EAAQyuE,KAC/B,OAAQzuE,EAAO,IAEb,IAAK,IAAK,CACR,MAAM0tE,EAAUe,GAAQyG,EAAA,EACxB,MAAO,CACkBA,EAAA,EAAgB,OACvCxH,EAAQzkE,OAAO,GAAGisE,EAAA,WAAmBl1E,KAEzC,CACA,KAAKk1E,EAAA,SAAkB,CACrB,MAAMxH,EAAUe,GAAQyG,EAAA,EACxB,MAAO,CAAuBA,EAAA,EAAgB,OAAGxH,EAAQzkE,OAAOjJ,GAClE,CACA,KAAK8uE,EAAA,UAAe,CAClB,MAAMpB,EAAUe,GAAQK,EAAA,GACxB,MAAO,CAAuBA,EAAA,GAAa,OAAGpB,EAAQzkE,OAAOjJ,GAC/D,CACA,QACE,GAAY,MAARyuE,EACF,MAAMr0E,MACJ,mFAGJ,MAAO,CAAuB4F,EAAO,GAAKyuE,EAAKxlE,OAAOjJ,IAE1D,EASI0uE,EAAa,CAAC10D,EAAO5I,EAAOq9D,KAChC,MAAM,OAAEr+D,GAAWq+D,EACnB,GAAIr+D,IAAW8kE,EAAA,SACb,MAAM96E,MAAM,8BAA8Bq0E,EAAKvtE,iBAGjD,MAAM6tE,EAAM39D,EAAM5O,IAAI4N,GACtB,GAAW,MAAP2+D,EAAa,CACf,MAAMA,EAAMN,EAAKhqE,OAAOuV,GAAOrf,MAAM,GAErC,OADAyW,EAAM1T,IAAI0S,EAAQ2+D,GACXA,CACT,CACE,OAAOA,CACT,EASIF,EAAa,CAAC70D,EAAO5I,EAAOq9D,KAChC,MAAM,OAAEr+D,GAAWq+D,EACbM,EAAM39D,EAAM5O,IAAI4N,GACtB,GAAW,MAAP2+D,EAAa,CACf,MAAMA,EAAMN,EAAKhqE,OAAOuV,GAExB,OADA5I,EAAM1T,IAAI0S,EAAQ2+D,GACXA,CACT,CACE,OAAOA,CACT,EAGIK,EAAc,IACdC,EAAe,GAQfO,EAAY,CAAC3tD,EAASne,EAAMmrE,KAChC,MAAMyB,EAAa,EAAsBzuD,GACnC0uD,EAAaD,EAAa,EAAsB5sE,GAChDkW,EAAQ,IAAI3d,WAAWs0E,EAAa1B,EAAUx+D,YAIpD,OAHA,EAAgBwR,EAASjI,EAAO,GAChC,EAAgBlW,EAAMkW,EAAO02D,GAC7B12D,EAAMtc,IAAIuxE,EAAW0B,GACd32D,GAGH61D,EAAYx3E,OAAOs3E,IAAI,oBC/kBtB,MAAMmxB,UAAyB,IAClC7sF,KACAtS,cACIoH,QACAlH,KAAKoS,KAAO,IAAI5C,GACpB,CACA1N,IAAIC,EAAK0R,GAEL,OADAzT,KAAKoS,KAAKvW,IAAIoxE,EAAA,UAAclrE,EAAIqrE,UAAUj1D,OAAQ1E,GAC3C1R,CACX,CACApB,IAAIoB,GACA,MAAMhH,EAAMiF,KAAKoS,KAAKzR,IAAIssE,EAAA,UAAclrE,EAAIqrE,UAAUj1D,QACtD,GAAW,MAAPpd,EACA,MAAM,kBAEV,OAAOA,CACX,CACAoV,IAAIpO,GACA,OAAO/B,KAAKoS,KAAKjC,IAAI88D,EAAA,UAAclrE,EAAIqrE,UAAUj1D,OACrD,CACAla,aAAa8D,GACT/B,KAAKoS,KAAKrF,OAAOkgE,EAAA,UAAclrE,EAAIqrE,UAAUj1D,OACjD,CACAla,eACI,IAAK,MAAO8D,EAAKlD,KAAUmB,KAAKoS,KAAK9K,eAC3B,CACF4lE,IAAKC,EAAIQ,SCtBL,GDsBwB,EAAcV,EAAA,UAAclrE,KACxD8zD,MAAOh3D,EAGnB,oBE/BG,MAAMqgG,EAAS,IACf,sFCJA,MAAMjyB,GAAS,QAAQ,CAC5B1+D,OAAQ,IACRlP,KAAM,SACNqf,SAAU,mCACV++D,YAAa,KAGY,QAAQ,CACjClvE,OAAQ,IACRlP,KAAM,cACNqf,SAAU,mCACV++D,YAAa,KAGU,QAAQ,CAC/BlvE,OAAQ,IACRlP,KAAM,YACNqf,SAAU,oCACV++D,YAAa,KAGe,QAAQ,CACpClvE,OAAQ,IACRlP,KAAM,iBACNqf,SAAU,oCACV++D,YAAa,KAGU,QAAQ,CAC/BlvE,OAAQ,IACRlP,KAAM,YACNqf,SAAU,mCACV++D,YAAa,KAGe,QAAQ,CACpClvE,OAAQ,IACRlP,KAAM,iBACNqf,SAAU,mCACV++D,YAAa,KAGa,QAAQ,CAClClvE,OAAQ,IACRlP,KAAM,eACNqf,SAAU,oCACV++D,YAAa,KAGkB,QAAQ,CACvClvE,OAAQ,IACRlP,KAAM,oBACNqf,SAAU,oCACV++D,YAAa,KAGQ,QAAQ,CAC7BlvE,OAAQ,IACRlP,KAAM,UACNqf,SAAU,mCACV++D,YAAa,uFC5DR,MAAM1Q,GAAY,QAAM,CAC7B1tE,KAAM,YACNkP,OAAQ,IACRmQ,SAAU,gEAGgB,QAAM,CAChCrf,KAAM,eACNkP,OAAQ,IACRmQ,SAAU,2JCXE,IAAIlkB,WAAW,GAA7B,MAmBM8c,EAAS,CAACi1D,EAAIC,KAClB,GAAID,IAAOC,EAAI,OAAO,EACtB,GAAID,EAAG39D,aAAe49D,EAAG59D,WACvB,OAAO,EAGT,IAAK,IAAI69D,EAAK,EAAGA,EAAKF,EAAG39D,WAAY69D,IACnC,GAAIF,EAAGE,KAAQD,EAAGC,GAChB,OAAO,EAIX,OAAO,GAOHC,EAAS3uE,IACb,GAAIA,aAAavD,YAAqC,eAAvBuD,EAAE+B,YAAYT,KAAuB,OAAOtB,EAC3E,GAAIA,aAAasT,YAAa,OAAO,IAAI7W,WAAWuD,GACpD,GAAIsT,YAAYC,OAAOvT,GACrB,OAAO,IAAIvD,WAAWuD,EAAEpH,OAAQoH,EAAE4T,WAAY5T,EAAE6Q,YAElD,MAAM,IAAIrW,MAAM,oCAAmC,+FC8ErD,IAIA,EAzHA,SAAegyF,EAAUlrF,GACvB,GAAIkrF,EAAStzF,QAAU,IAAO,MAAM,IAAI0K,UAAU,qBAElD,IADA,IAAI6oF,EAAW,IAAIhwF,WAAW,KACrB4Z,EAAI,EAAGA,EAAIo2E,EAASvzF,OAAQmd,IACnCo2E,EAASp2E,GAAK,IAEhB,IAAK,IAAI9Y,EAAI,EAAGA,EAAIivF,EAAStzF,OAAQqE,IAAK,CACxC,IAAI+S,EAAIk8E,EAAS9pC,OAAOnlD,GACpBmvF,EAAKp8E,EAAE7S,WAAW,GACtB,GAAqB,MAAjBgvF,EAASC,GAAe,MAAM,IAAI9oF,UAAU0M,EAAI,iBACpDm8E,EAASC,GAAMnvF,CACjB,CACA,IAAIipD,EAAOgmC,EAAStzF,OAChByzF,EAASH,EAAS9pC,OAAO,GACzBkqC,EAAS1xF,KAAKN,IAAI4rD,GAAQtrD,KAAKN,IAAI,KACnCiyF,EAAU3xF,KAAKN,IAAI,KAAOM,KAAKN,IAAI4rD,GA6CvC,SAASsmC,EAAc1sF,GACrB,GAAsB,iBAAXA,EAAuB,MAAM,IAAIwD,UAAU,mBACtD,GAAsB,IAAlBxD,EAAOlH,OAAgB,OAAO,IAAIuD,WACtC,IAAIswF,EAAM,EAEV,GAAoB,MAAhB3sF,EAAO2sF,GAAX,CAIA,IAFA,IAAIC,EAAS,EACT9zF,EAAS,EACNkH,EAAO2sF,KAASJ,GACrBK,IACAD,IAMF,IAHA,IAAIrzF,GAAU0G,EAAOlH,OAAS6zF,GAAOH,EAAU,IAAO,EAClDK,EAAO,IAAIxwF,WAAW/C,GAEnB0G,EAAO2sF,IAAM,CAElB,IAAIG,EAAQT,EAASrsF,EAAO3C,WAAWsvF,IAEvC,GAAc,MAAVG,EAAiB,OAErB,IADA,IAAI3vF,EAAI,EACC4vF,EAAMzzF,EAAO,GAAc,IAAVwzF,GAAe3vF,EAAIrE,KAAqB,IAATi0F,EAAaA,IAAO5vF,IAC3E2vF,GAAU1mC,EAAOymC,EAAKE,KAAU,EAChCF,EAAKE,GAAQD,EAAQ,MAAS,EAC9BA,EAASA,EAAQ,MAAS,EAE5B,GAAc,IAAVA,EAAe,MAAM,IAAI1yF,MAAM,kBACnCtB,EAASqE,EACTwvF,GACF,CAEA,GAAoB,MAAhB3sF,EAAO2sF,GAAX,CAGA,IADA,IAAIK,EAAM1zF,EAAOR,EACVk0F,IAAQ1zF,GAAsB,IAAduzF,EAAKG,IAC1BA,IAIF,IAFA,IAAIC,EAAM,IAAI5wF,WAAWuwF,GAAUtzF,EAAO0zF,IACtC/2E,EAAI22E,EACDI,IAAQ1zF,GACb2zF,EAAIh3E,KAAO42E,EAAKG,KAElB,OAAOC,CAX2B,CA5BA,CAwCpC,CAMA,MAAO,CACLxoF,OAhGF,SAAiBzE,GAMf,GALIA,aAAkB3D,aAAuB6W,YAAYC,OAAOnT,GAC9DA,EAAS,IAAI3D,WAAW2D,EAAOxH,OAAQwH,EAAOwT,WAAYxT,EAAOyQ,YACxDhW,MAAM+S,QAAQxN,KACvBA,EAAS3D,WAAW8U,KAAKnR,OAErBA,aAAkB3D,YAAe,MAAM,IAAImH,UAAU,uBAC3D,GAAsB,IAAlBxD,EAAOlH,OAAgB,MAAO,GAMlC,IAJA,IAAI8zF,EAAS,EACT9zF,EAAS,EACTo0F,EAAS,EACTC,EAAOntF,EAAOlH,OACXo0F,IAAWC,GAA2B,IAAnBntF,EAAOktF,IAC/BA,IACAN,IAMF,IAHA,IAAItzF,GAAS6zF,EAAOD,GAAUT,EAAU,IAAO,EAC3CW,EAAM,IAAI/wF,WAAW/C,GAElB4zF,IAAWC,GAAM,CAItB,IAHA,IAAIL,EAAQ9sF,EAAOktF,GAEf/vF,EAAI,EACCkwF,EAAM/zF,EAAO,GAAc,IAAVwzF,GAAe3vF,EAAIrE,KAAqB,IAATu0F,EAAaA,IAAOlwF,IAC3E2vF,GAAU,IAAMM,EAAIC,KAAU,EAC9BD,EAAIC,GAAQP,EAAQ1mC,IAAU,EAC9B0mC,EAASA,EAAQ1mC,IAAU,EAE7B,GAAc,IAAV0mC,EAAe,MAAM,IAAI1yF,MAAM,kBACnCtB,EAASqE,EACT+vF,GACF,CAGA,IADA,IAAII,EAAMh0F,EAAOR,EACVw0F,IAAQh0F,GAAqB,IAAb8zF,EAAIE,IACzBA,IAIF,IADA,IAAIpwF,EAAMqvF,EAAOlvC,OAAOuvC,GACjBU,EAAMh0F,IAAQg0F,EAAOpwF,GAAOkvF,EAAS9pC,OAAO8qC,EAAIE,IACvD,OAAOpwF,CACT,EAsDEwvF,aAAcA,EACdzjF,OARF,SAAiB6J,GACf,IAAIta,EAASk0F,EAAa55E,GAC1B,GAAIta,EAAU,OAAOA,EACrB,MAAM,IAAI4B,MAAM,OAAO8G,cACzB,EAMF,ECzHc,IAAI7E,WAAW,GAA7B,MAsCM,EAASuD,IACb,GAAIA,aAAavD,YAAqC,eAAvBuD,EAAE+B,YAAYT,KAAuB,OAAOtB,EAC3E,GAAIA,aAAasT,YAAa,OAAO,IAAI7W,WAAWuD,GACpD,GAAIsT,YAAYC,OAAOvT,GACrB,OAAO,IAAIvD,WAAWuD,EAAEpH,OAAQoH,EAAE4T,WAAY5T,EAAE6Q,YAElD,MAAM,IAAIrW,MAAM,oCAAmC,EC3BrD,MAAMmzF,EAMJ5rF,YAAaT,EAAMkP,EAAQo9E,GACzB3rF,KAAKX,KAAOA,EACZW,KAAKuO,OAASA,EACdvO,KAAK2rF,WAAaA,CACpB,CAMA/oF,OAAQuV,GACN,GAAIA,aAAiB3d,WACnB,MAAO,GAAGwF,KAAKuO,SAASvO,KAAK2rF,WAAWxzE,KAExC,MAAM5f,MAAM,oCAEhB,EAkBF,MAAMypF,EAMJliF,YAAaT,EAAMkP,EAAQq9E,GAIzB,GAHA5rF,KAAKX,KAAOA,EACZW,KAAKuO,OAASA,OAEgB1I,IAA1B0I,EAAOyhD,YAAY,GACrB,MAAM,IAAIz3D,MAAM,4BAGlByH,KAAK6rF,gBAAyCt9E,EAAOyhD,YAAY,GACjEhwD,KAAK4rF,WAAaA,CACpB,CAKAxkF,OAAQ4kB,GACN,GAAoB,iBAATA,EAAmB,CAC5B,GAAIA,EAAKgkC,YAAY,KAAOhwD,KAAK6rF,gBAC/B,MAAMtzF,MAAM,qCAAqC8zB,KAAK8T,UAAUnU,OAAUhsB,KAAKX,mDAAmDW,KAAKuO,UAEzI,OAAOvO,KAAK4rF,WAAW5/D,EAAKlzB,MAAMkH,KAAKuO,OAAOtX,QAChD,CACE,MAAMsB,MAAM,oCAEhB,CAOA+pC,GAAIupC,GACF,OAAOvpC,EAAGtiC,KAAM6rE,EAClB,EAaF,MAAMigB,EAIJhsF,YAAaisF,GACX/rF,KAAK+rF,SAAWA,CAClB,CAOAzpD,GAAIupC,GACF,OAAOvpC,EAAGtiC,KAAM6rE,EAClB,CAMAzkE,OAAQrL,GACN,MAAMwS,EAAgCxS,EAAM,GACtC8vE,EAAU7rE,KAAK+rF,SAASx9E,GAC9B,GAAIs9D,EACF,OAAOA,EAAQzkE,OAAOrL,GAEtB,MAAM6U,WAAW,qCAAqCyb,KAAK8T,UAAUpkC,iCAAqC2C,OAAOyI,KAAKnH,KAAK+rF,0BAE/H,EAUK,MAAMzpD,EAAK,CAAC0pD,EAAMC,IAAU,IAAIH,EAA4C,IAC7EE,EAAKD,UAAY,CAAE,CAAmC,EAAOx9E,QAASy9E,MACtEC,EAAMF,UAAY,CAAE,CAAmC,EAAQx9E,QAAS09E,KAcvE,MAAMC,EAOXpsF,YAAaT,EAAMkP,EAAQo9E,EAAYC,GACrC5rF,KAAKX,KAAOA,EACZW,KAAKuO,OAASA,EACdvO,KAAK2rF,WAAaA,EAClB3rF,KAAK4rF,WAAaA,EAClB5rF,KAAK4rE,QAAU,IAAI8f,EAAQrsF,EAAMkP,EAAQo9E,GACzC3rF,KAAK6rE,QAAU,IAAImW,EAAQ3iF,EAAMkP,EAAQq9E,EAC3C,CAKAhpF,OAAQ7G,GACN,OAAOiE,KAAK4rE,QAAQhpE,OAAO7G,EAC7B,CAKAqL,OAAQrL,GACN,OAAOiE,KAAK6rE,QAAQzkE,OAAOrL,EAC7B,EAaK,MAAMuT,EAAO,EAAGjQ,OAAMkP,SAAQ3L,SAAQwE,YAC3C,IAAI8kF,EAAM7sF,EAAMkP,EAAQ3L,EAAQwE,GAWrB+kF,EAAQ,EAAG59E,SAAQlP,OAAMqf,eACpC,MAAM,OAAE9b,EAAM,OAAEwE,GAAW,EAAMsX,EAAUrf,GAC3C,OAAOiQ,EAAK,CACVf,SACAlP,OACAuD,SAIAwE,OAAQ4kB,GAAQ,EAAO5kB,EAAO4kB,KAC/B,EA4GUogE,EAAU,EAAG/sF,OAAMkP,SAAQkvE,cAAa/+D,cAC5CpP,EAAK,CACVf,SACAlP,OACAuD,OAAQ7G,GAjDG,EAACqW,EAAMsM,EAAU++D,KAC9B,MAAM4O,EAAwC,MAAlC3tE,EAASA,EAASznB,OAAS,GACjCy+C,GAAQ,GAAK+nC,GAAe,EAClC,IAAIxhF,EAAM,GAENogE,EAAO,EACP1lE,EAAS,EACb,IAAK,IAAI2E,EAAI,EAAGA,EAAI8W,EAAKnb,SAAUqE,EAMjC,IAJA3E,EAAUA,GAAU,EAAKyb,EAAK9W,GAC9B+gE,GAAQ,EAGDA,EAAOohB,GACZphB,GAAQohB,EACRxhF,GAAOyiB,EAASg3B,EAAQ/+C,GAAU0lE,GAUtC,GALIA,IACFpgE,GAAOyiB,EAASg3B,EAAQ/+C,GAAW8mF,EAAcphB,IAI/CgwB,EACF,KAAQpwF,EAAIhF,OAASwmF,EAAe,GAClCxhF,GAAO,IAIX,OAAOA,GAmBI2G,CAAO7G,EAAO2iB,EAAU++D,GAEjCr2E,OAAQrL,GAzGG,EAACkV,EAAQyN,EAAU++D,EAAap+E,KAG7C,MAAMitF,EAAQ,CAAC,EACf,IAAK,IAAIhxF,EAAI,EAAGA,EAAIojB,EAASznB,SAAUqE,EACrCgxF,EAAM5tE,EAASpjB,IAAMA,EAIvB,IAAIkM,EAAMyJ,EAAOha,OACjB,KAA2B,MAApBga,EAAOzJ,EAAM,MAChBA,EAIJ,MAAMvL,EAAM,IAAIzB,WAAYgN,EAAMi2E,EAAc,EAAK,GAGrD,IAAIphB,EAAO,EACP1lE,EAAS,EACT41F,EAAU,EACd,IAAK,IAAIjxF,EAAI,EAAGA,EAAIkM,IAAOlM,EAAG,CAE5B,MAAMuD,EAAQytF,EAAMr7E,EAAO3V,IAC3B,QAAcuK,IAAVhH,EACF,MAAM,IAAIw2B,YAAY,OAAOh2B,eAI/B1I,EAAUA,GAAU8mF,EAAe5+E,EACnCw9D,GAAQohB,EAGJphB,GAAQ,IACVA,GAAQ,EACRpgE,EAAIswF,KAAa,IAAQ51F,GAAU0lE,EAEvC,CAGA,GAAIA,GAAQohB,GAAe,IAAQ9mF,GAAW,EAAI0lE,EAChD,MAAM,IAAIhnC,YAAY,0BAGxB,OAAOp5B,GA8DImL,CAAOrL,EAAO2iB,EAAU++D,EAAap+E,KCrVrC4tE,EAASmf,EAAQ,CAC5B79E,OAAQ,IACRlP,KAAM,SACNqf,SAAU,mCACV++D,YAAa,IAGFC,EAAc0O,EAAQ,CACjC79E,OAAQ,IACRlP,KAAM,cACNqf,SAAU,mCACV++D,YAAa,ICXF1Q,GDcYqf,EAAQ,CAC/B79E,OAAQ,IACRlP,KAAM,YACNqf,SAAU,oCACV++D,YAAa,IAGe2O,EAAQ,CACpC79E,OAAQ,IACRlP,KAAM,iBACNqf,SAAU,oCACV++D,YAAa,IAGU2O,EAAQ,CAC/B79E,OAAQ,IACRlP,KAAM,YACNqf,SAAU,mCACV++D,YAAa,IAGe2O,EAAQ,CACpC79E,OAAQ,IACRlP,KAAM,iBACNqf,SAAU,mCACV++D,YAAa,IAGa2O,EAAQ,CAClC79E,OAAQ,IACRlP,KAAM,eACNqf,SAAU,oCACV++D,YAAa,IAGkB2O,EAAQ,CACvC79E,OAAQ,IACRlP,KAAM,oBACNqf,SAAU,oCACV++D,YAAa,IAGQ2O,EAAQ,CAC7B79E,OAAQ,IACRlP,KAAM,UACNqf,SAAU,mCACV++D,YAAa,IC5DU0O,EAAM,CAC7B9sF,KAAM,YACNkP,OAAQ,IACRmQ,SAAU,gEAGgBytE,EAAM,CAChC9sF,KAAM,eACNkP,OAAQ,IACRmQ,SAAU,+DCXZ,IAAIywD,EAOJ,SAAS,EAAOt9C,EAAK51B,EAAK/E,GACxB+E,EAAMA,GAAO,GAEb,IAAImzE,EADJl4E,EAASA,GAAU,EAGnB,KAAM26B,GAAOw9C,GACXpzE,EAAI/E,KAAmB,IAAN26B,EAAcy9C,EAC/Bz9C,GAAO,IAET,KAAMA,EAAM09C,GACVtzE,EAAI/E,KAAmB,IAAN26B,EAAcy9C,EAC/Bz9C,KAAS,EAMX,OAJA51B,EAAI/E,GAAgB,EAAN26B,EAEd,EAAO1Z,MAAQjhB,EAASk4E,EAAY,EAE7BnzE,CACT,EAvBIqzE,EAAM,IAENC,GAAS,IACTF,EAAMp2E,KAAKqhB,IAAI,EAAG,IAsBtB,IAAI,EAKJ,SAAStG,EAAKjZ,EAAK7D,GACjB,IAII6a,EAJAyD,EAAS,EAETpW,EAAS,EACTowE,EAFAt4E,EAASA,GAAU,EAInBiyB,EAAIpuB,EAAI9D,OAEZ,EAAG,CACD,GAAIu4E,GAAWrmD,EAEb,MADAnV,EAAKmE,MAAQ,EACP,IAAIvH,WAAW,2BAEvBmB,EAAIhX,EAAIy0E,KACRh6D,GAAOpW,EAAQ,IACV2S,EAAI09D,IAAWrwE,GACf2S,EAAI09D,GAAUx2E,KAAKqhB,IAAI,EAAGlb,GAC/BA,GAAS,CACX,OAAS2S,GAAK29D,GAId,OAFA17D,EAAKmE,MAAQq3D,EAAUt4E,EAEhBse,CACT,EA1BIk6D,EAAQ,IACRD,EAAS,IA2Bb,IAAIE,EAAK12E,KAAKqhB,IAAI,EAAI,GAClBs1D,EAAK32E,KAAKqhB,IAAI,EAAG,IACjBu1D,EAAK52E,KAAKqhB,IAAI,EAAG,IACjBw1D,EAAK72E,KAAKqhB,IAAI,EAAG,IACjBy1D,EAAK92E,KAAKqhB,IAAI,EAAG,IACjB01D,EAAK/2E,KAAKqhB,IAAI,EAAG,IACjB21D,EAAKh3E,KAAKqhB,IAAI,EAAG,IACjB41D,EAAKj3E,KAAKqhB,IAAI,EAAG,IACjB61D,EAAKl3E,KAAKqhB,IAAI,EAAG,IAyBrB,EARa,CACT1X,OAAQusE,EACR/nE,OAAQ,EACRgpE,eAlBS,SAAUvxE,GACrB,OACEA,EAAQ8wE,EAAK,EACb9wE,EAAQ+wE,EAAK,EACb/wE,EAAQgxE,EAAK,EACbhxE,EAAQixE,EAAK,EACbjxE,EAAQkxE,EAAK,EACblxE,EAAQmxE,EAAK,EACbnxE,EAAQoxE,EAAK,EACbpxE,EAAQqxE,EAAK,EACbrxE,EAAQsxE,EAAK,EACA,EAEjB,GCzEO,MAAM,EAAS,CAAC/9D,EAAMlb,EAAS,IAE7B,CADM,SAAckb,EAAMlb,GACnB,gBAQHm5E,EAAW,CAACC,EAAK1pE,EAAQ1P,EAAS,KAC7C,SAAco5E,EAAK1pE,EAAQ1P,GACpB0P,GAOIwpE,EAAkBE,GACtB,iBAAsBA,GCElB,EAAUlD,IACrB,MAAMj1D,EAAQ,EAAOi1D,IACdnrE,EAAM8sE,GAAc,EAAc52D,IAClC1gB,EAAMu3E,GAAgB,EAAc72D,EAAM7gB,SAASy3E,IACpDp4C,EAASxe,EAAM7gB,SAASy3E,EAAaC,GAE3C,GAAIr4C,EAAO/nB,aAAenX,EACxB,MAAM,IAAIc,MAAM,oBAGlB,OAAO,IAAI02E,EAAOhtE,EAAMxK,EAAMk/B,EAAQxe,EAAK,EAoCtC,MAAM82D,EASXnvE,YAAamC,EAAMxK,EAAMk/B,EAAQxe,GAC/BnY,KAAKiC,KAAOA,EACZjC,KAAKvI,KAAOA,EACZuI,KAAK22B,OAASA,EACd32B,KAAKmY,MAAQA,CACf,ECtEK,MAAM1V,EAAS,CAACkqE,EAAMC,KAC3B,MAAM,MAAEz0D,EAAK,QAAEiI,GAAYusD,EAC3B,OACO,IADCvsD,EAEGysD,EACL10D,EACA20D,EAAUH,GAC+B,GAAUI,EAAUnB,SAGxDoB,EACL70D,EACA20D,EAAUH,GACmCC,GAAQK,EAAOrB,QAElE,EAoBIr8D,EAAQ,IAAIsY,QAMZilD,EAAYI,IAChB,MAAMJ,EAAYv9D,EAAM5O,IAAIusE,GAC5B,GAAiB,MAAbJ,EAAmB,CACrB,MAAMA,EAAY,IAAIt9D,IAEtB,OADAD,EAAM1T,IAAIqxE,EAAKJ,GACRA,CACT,CACA,OAAOA,GAWF,MAAMK,EAOXrtE,YAAasgB,EAASne,EAAMmrE,EAAWj1D,GAErCnY,KAAKiC,KAAOA,EAEZjC,KAAKogB,QAAUA,EAEfpgB,KAAKotE,UAAYA,EAEjBptE,KAAKmY,MAAQA,EAKbnY,KAAK,KAAOmY,CACd,CAQIk1D,YACF,OAAOrtE,IACT,CAGI2R,iBACF,OAAO3R,KAAKmY,MAAMxG,UACpB,CAGI/C,iBACF,OAAO5O,KAAKmY,MAAMvJ,UACpB,CAKA0+D,OACE,OAAQttE,KAAKogB,SACX,KAAK,EACH,OAA4D,KAE9D,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,UAAEmrE,GAAcptE,KAE5B,GAAIiC,IAASsrE,EACX,MAAM,IAAIh1E,MAAM,4CAIlB,GAAI60E,EAAUnrE,OAASurE,EACrB,MAAM,IAAIj1E,MAAM,sDAGlB,OACE40E,EAAIM,SAC8C,EAGtD,CACA,QACE,MAAMl1E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAKAstD,OACE,OAAQ1tE,KAAKogB,SACX,KAAK,EAAG,CACN,MAAM,KAAEne,EAAI,OAAE00B,GAAW32B,KAAKotE,UACxBA,EDxJQ,EAACnrE,EAAM00B,KAC3B,MAAMl/B,EAAOk/B,EAAO/nB,WACdmgE,EAAa,EAAsB9sE,GACnC+sE,EAAeD,EAAa,EAAsBt3E,GAElD0gB,EAAQ,IAAI3d,WAAWw0E,EAAev3E,GAK5C,OAJA,EAAgBwK,EAAMkW,EAAO,GAC7B,EAAgB1gB,EAAM0gB,EAAO42D,GAC7B52D,EAAMtc,IAAI86B,EAAQq4C,GAEX,IAAIC,EAAOhtE,EAAMxK,EAAMk/B,EAAQxe,EAAK,EC8InB,CAAclW,EAAM00B,GACtC,OACEw2C,EAAIQ,SAAS3tE,KAAKiC,KAAMmrE,EAE5B,CACA,KAAK,EACH,OAAgD,KAElD,QACE,MAAM70E,MACJ,+BAA+ByH,KAAKogB,qDAI5C,CAMA9I,OAAQs2D,GACN,OAAOT,EAAI71D,OAAOtX,KAAM4tE,EAC1B,CAWA5/D,cAAeqb,EAAMukD,GACnB,MAAMC,EACiE,EAGvE,OACEA,GACAxkD,EAAKpnB,OAAS4rE,EAAQ5rE,MACtBonB,EAAKjJ,UAAYytD,EAAQztD,SD5JT,EAACtJ,EAAG/E,KACxB,GAAI+E,IAAM/E,EACR,OAAO,EACF,CACL,MAAMK,EAAoE,EAE1E,OACE0E,EAAE7U,OAASmQ,EAAKnQ,MAChB6U,EAAErf,OAAS2a,EAAK3a,MAChB2a,EAAK+F,iBAAiB3d,YNrCb,EAAC+xE,EAAIC,KAClB,GAAID,IAAOC,EAAI,OAAO,EACtB,GAAID,EAAG39D,aAAe49D,EAAG59D,WACvB,OAAO,EAGT,IAAK,IAAI69D,EAAK,EAAGA,EAAKF,EAAG39D,WAAY69D,IACnC,GAAIF,EAAGE,KAAQD,EAAGC,GAChB,OAAO,EAIX,OAAO,GM0BH,CAAW31D,EAAEqB,MAAO/F,EAAK+F,MAE7B,GCiJI,CAAckR,EAAK+jD,UAAWS,EAAQT,UAE1C,CAMA36D,SAAUm6D,GACR,OAAOnqE,EAAOzC,KAAM4sE,EACtB,CAKA70D,SACE,MAAO,CAAE,IAAKtV,EAAOzC,MACvB,CAEA2sE,OACE,OAAO3sE,IACT,CAEYuzB,IAAP/8B,OAAO+8B,eACV,MAAO,KACT,CAIA,CAAC/8B,OAAOs3E,IAAI,iCACV,MAAO,OAAO9tE,KAAKyS,aACrB,CAoBAzE,aAAcjS,GACZ,GAAa,MAATA,EACF,OAAO,KAGT,MAAM8C,EAA2B,EACjC,GAAIA,aAAiBsuE,EAEnB,OAAOtuE,EACF,GAAmB,MAAdA,EAAM,MAAgBA,EAAM,OAASA,EAAMsZ,OAAUtZ,EAAMwuE,QAAUxuE,EAAO,CAMtF,MAAM,QAAEuhB,EAAO,KAAEne,EAAI,UAAEmrE,EAAS,MAAEj1D,GAAUtZ,EAC5C,OAAO,IAAIsuE,EACT/sD,EACAne,EACwC,EACxCkW,GAAS41D,EAAU3tD,EAASne,EAAMmrE,EAAUj1D,OAEhD,CAAO,IAAyB,IAArBtZ,EAAMmvE,GAAqB,CAIpC,MAAM,QAAE5tD,EAAO,UAAEgtD,EAAS,KAAEnrE,GAASpD,EAC/B83B,EAEH,EAAcy2C,GACjB,OAAOD,EAAIxuE,OAAOyhB,EAASne,EAAM00B,EACnC,CAGE,OAAO,IAEX,CAaA3oB,cAAeoS,EAASne,EAAM00B,GAC5B,GAAoB,iBAAT10B,EACT,MAAM,IAAI1J,MAAM,yCAGlB,KAAMo+B,EAAOxe,iBAAiB3d,YAC5B,MAAM,IAAIjC,MAAM,kBAGlB,OAAQ6nB,GACN,KAAK,EACH,GAAIne,IAASsrE,EACX,MAAM,IAAIh1E,MACR,wCAAwCg1E,qBAG1C,OAAO,IAAIJ,EAAI/sD,EAASne,EAAM00B,EAAQA,EAAOxe,OAGjD,KAAK,EAAG,CACN,MAAMA,EAAQ41D,EAAU3tD,EAASne,EAAM00B,EAAOxe,OAC9C,OAAO,IAAIg1D,EAAI/sD,EAASne,EAAM00B,EAAQxe,EACxC,CACA,QACE,MAAM,IAAI5f,MAAM,mBAGtB,CASAyV,gBAAiB2oB,GACf,OAAOw2C,EAAIxuE,OAAO,EAAG4uE,EAAa52C,EACpC,CAYA3oB,gBAAiB/L,EAAM00B,GACrB,OAAOw2C,EAAIxuE,OAAO,EAAGsD,EAAM00B,EAC7B,CAgBA3oB,cAAemK,GACb,MAAO+0D,EAAKe,GAAad,EAAIe,YAAY/1D,GACzC,GAAI81D,EAAUh3E,OACZ,MAAM,IAAIsB,MAAM,oBAElB,OAAO20E,CACT,CAkBAl/D,mBAAoBmK,GAClB,MAAMg2D,EAAQhB,EAAIiB,aAAaj2D,GACzBk2D,EAAaF,EAAM12E,KAAO02E,EAAMG,cAChCC,EAAiB,EACrBp2D,EAAM7gB,SAAS+2E,EAAYA,EAAaF,EAAMG,gBAEhD,GAAIC,EAAe3/D,aAAeu/D,EAAMG,cACtC,MAAM,IAAI/1E,MAAM,oBAElB,MAAMi2E,EAAcD,EAAej3E,SACjC62E,EAAMG,cAAgBH,EAAMM,YAExB93C,EAAS,IAAIs4C,EACjBd,EAAMO,cACNP,EAAMM,WACND,EACAD,GAMF,MAAO,CAHa,IAAlBJ,EAAM/tD,QACF+sD,EAAIM,SAAyD,GAC7DN,EAAIQ,SAASQ,EAAM7C,MAAO30C,GACaxe,EAAM7gB,SAAS62E,EAAM12E,MACpE,CAkBAuW,oBAAqB2gE,GACnB,IAAIz3E,EAAS,EACb,MAAMyO,EAAO,KACX,MAAOrK,EAAGrE,GAAU,EAAc03E,EAAar3E,SAASJ,IAExD,OADAA,GAAUD,EACHqE,GAGT,IAAI8kB,EAA4Bza,IAC5B2lE,EAAyB,EAS7B,GARuC,KAAd,GAEvBlrD,EAA2B,EAC3BlpB,EAAS,GAETo0E,EAA0B3lE,IAGZ,IAAZya,GAA6B,IAAZA,EACnB,MAAM,IAAIxP,WAAW,uBAAuBwP,KAG9C,MAAMiuD,EAAan3E,EACbw3E,EAAkC/oE,IAClC8oE,EAAa9oE,IACblO,EAAOP,EAASu3E,EAGtB,MAAO,CAAEruD,UAASkrD,QAAOoD,gBAAeD,aAAYH,cAF9B72E,EAAO42E,EAEsC52E,OACrE,CAiBAuW,aAAc7P,EAAQyuE,GACpB,MAAOr+D,EAAQ4J,GAASy2D,EAAgBzwE,EAAQyuE,GAE1CM,EAAMC,EAAI/lE,OAAO+Q,GAEvB,GAAoB,IAAhB+0D,EAAI9sD,SAA+B,MAAdjiB,EAAO,GAC9B,MAAM5F,MAAM,0DAMd,OAFAu0E,EAAUI,GAAKrxE,IAAI0S,EAAQpQ,GAEpB+uE,CACT,EAaF,MAAM0B,EAAkB,CAACzwE,EAAQyuE,KAC/B,OAAQzuE,EAAO,IAEb,IAAK,IAAK,CACR,MAAM0tE,EAAUe,GAAQG,EACxB,MAAO,CACkBA,EAAgB,OACvClB,EAAQzkE,OAAO,GAAG2lE,EAAUx+D,SAASpQ,KAEzC,CACA,KAAK4uE,EAAUx+D,OAAQ,CACrB,MAAMs9D,EAAUe,GAAQG,EACxB,MAAO,CAAuBA,EAAgB,OAAGlB,EAAQzkE,OAAOjJ,GAClE,CACA,KAAK8uE,EAAO1+D,OAAQ,CAClB,MAAMs9D,EAAUe,GAAQK,EACxB,MAAO,CAAuBA,EAAa,OAAGpB,EAAQzkE,OAAOjJ,GAC/D,CACA,QACE,GAAY,MAARyuE,EACF,MAAMr0E,MACJ,mFAGJ,MAAO,CAAuB4F,EAAO,GAAKyuE,EAAKxlE,OAAOjJ,IAE1D,EASI0uE,EAAa,CAAC10D,EAAO5I,EAAOq9D,KAChC,MAAM,OAAEr+D,GAAWq+D,EACnB,GAAIr+D,IAAWw+D,EAAUx+D,OACvB,MAAMhW,MAAM,8BAA8Bq0E,EAAKvtE,iBAGjD,MAAM6tE,EAAM39D,EAAM5O,IAAI4N,GACtB,GAAW,MAAP2+D,EAAa,CACf,MAAMA,EAAMN,EAAKhqE,OAAOuV,GAAOrf,MAAM,GAErC,OADAyW,EAAM1T,IAAI0S,EAAQ2+D,GACXA,CACT,CACE,OAAOA,CACT,EASIF,EAAa,CAAC70D,EAAO5I,EAAOq9D,KAChC,MAAM,OAAEr+D,GAAWq+D,EACbM,EAAM39D,EAAM5O,IAAI4N,GACtB,GAAW,MAAP2+D,EAAa,CACf,MAAMA,EAAMN,EAAKhqE,OAAOuV,GAExB,OADA5I,EAAM1T,IAAI0S,EAAQ2+D,GACXA,CACT,CACE,OAAOA,CACT,EAGIK,EAAc,IACdC,EAAe,GAQfO,EAAY,CAAC3tD,EAASne,EAAMmrE,KAChC,MAAMyB,EAAa,EAAsBzuD,GACnC0uD,EAAaD,EAAa,EAAsB5sE,GAChDkW,EAAQ,IAAI3d,WAAWs0E,EAAa1B,EAAUx+D,YAIpD,OAHA,EAAgBwR,EAASjI,EAAO,GAChC,EAAgBlW,EAAMkW,EAAO02D,GAC7B12D,EAAMtc,IAAIuxE,EAAW0B,GACd32D,GAGH61D,EAAYx3E,OAAOs3E,IAAI,oBC/kBtB,MAAMqxB,UAAsB,KAC/Bj/E,SACAE,QACA1e,GACAkrE,KACA9sE,YAAYogB,EAAUsN,EAAO,CAAC,GAC1BtmB,QACAlH,KAAKkgB,SAAW,GAAGsN,EAAKjf,QAAU,KAAK2R,IACvClgB,KAAKogB,QAAUoN,EAAKpN,SAAW,EAE/BpgB,KAAK4sE,KAAOp/C,EAAKo/C,MAAQ8Q,CAC7B,CACA,GAAQxQ,GACJ,MAAO,IAAIltE,KAAK4sE,KAAKhB,QAAQhpE,OAAOsqE,EAAIE,UAAUj1D,QACtD,CACA,GAAQpW,GACJ,OAAOorE,EAAIQ,SCZC,GDYkB,EAAc3tE,KAAK4sE,KAAKf,QAAQzkE,OAAOrF,EAAItC,UAAU,KACvF,CACAxB,aACI,IACI,MAAMiiB,EAAWlgB,KAAKkgB,SACtBlgB,KAAK0B,SAAW,QAAOwe,EAAUlgB,KAAKogB,QAAS,CAC3CssB,QAAQhrC,GACJA,EAAGof,kBAAkBZ,EACzB,GAER,CACA,MAAOhe,GACH,MAAM,qBAAuBA,EACjC,CACJ,CACAjE,cACI+B,KAAK0B,IAAI4B,OACb,CACArF,UAAU8D,EAAK0R,GACX,GAAe,MAAXzT,KAAK0B,GACL,MAAM,IAAInJ,MAAM,kCAEpB,IAEI,aADMyH,KAAK0B,GAAGI,IAAI9B,KAAKkgB,SAAUzM,EAAKzT,MAAK,EAAQ+B,IAC5CA,CACX,CACA,MAAOG,GACH,MAAM,oBAAsBA,EAChC,CACJ,CACAjE,UAAU8D,GACN,GAAe,MAAX/B,KAAK0B,GACL,MAAM,IAAInJ,MAAM,kCAEpB,IAAIkb,EACJ,IACIA,QAAYzT,KAAK0B,GAAGf,IAAIX,KAAKkgB,SAAUlgB,MAAK,EAAQ+B,GACxD,CACA,MAAOG,GACH,MAAM,oBAAsBA,EAChC,CACA,QAAY2D,IAAR4N,EACA,MAAM,qBAEV,OAAOA,CACX,CACAxV,aAAa8D,GACT,GAAe,MAAX/B,KAAK0B,GACL,MAAM,IAAInJ,MAAM,kCAEpB,UACUyH,KAAK0B,GAAGqL,OAAO/M,KAAKkgB,SAAUlgB,MAAK,EAAQ+B,GACrD,CACA,MAAOG,GACH,MAAM,oBAAsBA,EAChC,CACJ,CACAjE,UAAU8D,GACN,GAAe,MAAX/B,KAAK0B,GACL,MAAM,IAAInJ,MAAM,kCAEpB,IACI,OAAO2rB,cAAclkB,KAAK0B,GAAG09F,OAAOp/F,KAAKkgB,SAAUlgB,MAAK,EAAQ+B,IACpE,CACA,MAAOG,GACH,MAAM,oBAAsBA,EAChC,CACJ,CACAjE,aAAc+D,GACV,GAAe,MAAXhC,KAAK0B,GACL,MAAM,IAAInJ,MAAM,kCAEpB,IAAK,MAAMwJ,WAAa/B,KAAK0B,GAAG+gB,WAAWziB,KAAKkgB,UAAW,CACvD,MAAMgtD,EAAMltE,MAAK,EAAQ+B,EAAI0Q,YACvBojD,QAAc71D,KAAKW,IAAIusE,QACvB,CAAEA,MAAKrX,QACjB,CACJ,CACA53D,sBACU,QAAS+B,KAAKkgB,SACxB,uCE/FWjiB,eAAgBohG,EAA0BtZ,EAAQ/jF,EAAU,CAAC,GACxE,MAAM8oB,EAASi7D,EAAOuZ,YACtB,IACI,OAAa,CACT,MAAMzwF,QAAeic,EAAO9W,OAC5B,GAAInF,EAAOwb,KACP,aAEExb,EAAOhQ,KACjB,CACJ,CACA,SACkC,IAA1BmD,EAAQu9F,qBACFz0E,EAAO5f,SAEjB4f,EAAO00E,aACX,CACJ,qECxBe,SAASC,EAAS1kG,GAC7B,OAAIA,aAAeP,WACR,CACHmG,IAAI6gB,GACOzmB,EAAIymB,GAEf3lB,IAAI2lB,EAAO3iB,GACP9D,EAAIymB,GAAS3iB,CACjB,GAGD,CACH8B,IAAI6gB,GACOzmB,EAAI4F,IAAI6gB,GAEnB3lB,IAAI2lB,EAAO3iB,GACP9D,EAAIc,IAAI2lB,EAAO3iB,EACnB,EAER,keCnBO,MAAM6gG,EAAY1gF,WAAWwyC,UAAYxyC,WAAWwyC,QAAQmuC,SAAW3gF,WAAWxR,QAAgD,mBAA/BwR,WAAWxR,OAAOyE,SACtH2tF,EAAc,IAAI9zB,YAClBj+D,EAAc,IAAIC,YACxB,SAASmE,EAASlX,GAChB,OAAO2kG,GAAa1gF,WAAWxR,OAAOyE,SAASlX,EACjD,CACO,SAAS8kG,EAAM9kG,GACpB,OAAMA,aAAeP,WAGdyX,EAASlX,GAAO,IAAIP,WAAWO,EAAIpE,OAAQoE,EAAI4W,WAAY5W,EAAI6T,YAAc7T,EAF3EP,WAAW8U,KAAKvU,EAG3B,CACO,MAAM0X,EAAWitF,EAAY,CAACvnF,EAAOxI,EAAOnI,IAC1CA,EAAMmI,EAAQ,GAAKqP,WAAWxR,OAAO8B,KAAK6I,EAAM7gB,SAASqY,EAAOnI,IAAMiL,SAAS,QAAUQ,EAAUkF,EAAOxI,EAAOnI,GACtH,CAAC2Q,EAAOxI,EAAOnI,IACVA,EAAMmI,EAAQ,GAAKiwF,EAAYx4F,OAAO+Q,EAAM7gB,SAASqY,EAAOnI,IAAQyL,EAAUkF,EAAOxI,EAAOnI,GAExF4J,EAAasuF,EAAYzuF,GAC7BA,EAAOha,OAAS,GAAK+nB,WAAWxR,OAAO8B,KAAK2B,GAAU2B,EAAY3B,GACvEA,GACKA,EAAOha,OAAS,GAAK4W,EAAYjL,OAAOqO,GAAU2B,EAAY3B,GAE1D6uF,EAAYjlG,GAChBL,WAAW8U,KAAKzU,GAEZ/B,EAAQ4mG,EAAY,CAACvnF,EAAOxI,EAAOnI,IAC1CyK,EAASkG,GACJ,IAAI3d,WAAW2d,EAAM7gB,SAASqY,EAAOnI,IAEvC2Q,EAAMrf,MAAM6W,EAAOnI,GACxB,CAAC2Q,EAAOxI,EAAOnI,IACV2Q,EAAMrf,MAAM6W,EAAOnI,GAEfsH,EAAS4wF,EAAY,CAACK,EAAQ9oG,KACzC8oG,EAASA,EAAOhwF,KAAIoF,GAAKA,aAAa3a,WAAa2a,EAAI6J,WAAWxR,OAAO8B,KAAK6F,KACvE0qF,EAAM7gF,WAAWxR,OAAOsB,OAAOixF,EAAQ9oG,KAC5C,CAAC8oG,EAAQ9oG,KACX,MAAMgF,EAAM,IAAIzB,WAAWvD,GAC3B,IAAI6iE,EAAM,EACV,IAAK,IAAI/nD,KAAKguF,EACRjmC,EAAM/nD,EAAE9a,OAASgF,EAAIhF,SACvB8a,EAAIA,EAAEza,SAAS,EAAG2E,EAAIhF,OAAS6iE,IAEjC79D,EAAIJ,IAAIkW,EAAG+nD,GACXA,GAAO/nD,EAAE9a,OAEX,OAAOgF,CAAG,EAECzC,EAAQkmG,EAAYjoG,GACxBunB,WAAWxR,OAAOwD,YAAYvZ,GACnCA,GACK,IAAI+C,WAAW/C,GAuCjB,SAASof,EAAQmpF,EAAIC,GAC1B,GAAIhuF,EAAS+tF,IAAO/tF,EAASguF,GAC3B,OAAOD,EAAGnpF,QAAQopF,GAEpB,IAAK,IAAI3kG,EAAI,EAAGA,EAAI0kG,EAAG/oG,OAAQqE,IAC7B,GAAI0kG,EAAG1kG,KAAO2kG,EAAG3kG,GAGjB,OAAO0kG,EAAG1kG,GAAK2kG,EAAG3kG,IAAM,EAAI,EAE9B,OAAO,CACT,CACA,SAASsX,EAAY3B,EAAQiE,EAAQ1P,KACnC,IAAIkQ,EACJ,MAAMze,EAASga,EAAOha,OACtB,IAAIonB,EAAgB,KACpB,MAAMlG,EAAQ,GACd,IAAK,IAAI7c,EAAI,EAAGA,EAAIrE,IAAUqE,EAAG,CAE/B,GADAoa,EAAYzE,EAAOzV,WAAWF,GAC1Boa,EAAY,OAASA,EAAY,MAAO,CAC1C,IAAK2I,EAAe,CAClB,GAAI3I,EAAY,MAAO,EAChBR,GAAS,IAAM,GAClBiD,EAAMzgB,KAAK,IAAK,IAAK,KACvB,QACF,CAAO,GAAI4D,EAAI,IAAMrE,EAAQ,EACtBie,GAAS,IAAM,GAClBiD,EAAMzgB,KAAK,IAAK,IAAK,KACvB,QACF,CACA2mB,EAAgB3I,EAChB,QACF,CACA,GAAIA,EAAY,MAAO,EAChBR,GAAS,IAAM,GAClBiD,EAAMzgB,KAAK,IAAK,IAAK,KACvB2mB,EAAgB3I,EAChB,QACF,CACAA,EAAgE,OAAnD2I,EAAgB,OAAS,GAAK3I,EAAY,MACzD,MAAW2I,IACJnJ,GAAS,IAAM,GAClBiD,EAAMzgB,KAAK,IAAK,IAAK,KAGzB,GADA2mB,EAAgB,KACZ3I,EAAY,IAAK,CACnB,IAAKR,GAAS,GAAK,EACjB,MACFiD,EAAMzgB,KAAKge,EACb,MAAO,GAAIA,EAAY,KAAM,CAC3B,IAAKR,GAAS,GAAK,EACjB,MACFiD,EAAMzgB,KAAKge,GAAa,EAAI,IAAiB,GAAZA,EAAiB,IACpD,MAAO,GAAIA,EAAY,MAAO,CAC5B,IAAKR,GAAS,GAAK,EACjB,MACFiD,EAAMzgB,KAAKge,GAAa,GAAK,IAAKA,GAAa,EAAI,GAAK,IAAiB,GAAZA,EAAiB,IAChF,KAAO,MAAIA,EAAY,SAKrB,MAAM,IAAInd,MAAM,sBAJhB,IAAK2c,GAAS,GAAK,EACjB,MACFiD,EAAMzgB,KAAKge,GAAa,GAAK,IAAKA,GAAa,GAAK,GAAK,IAAKA,GAAa,EAAI,GAAK,IAAiB,GAAZA,EAAiB,IAG5G,CACF,CACA,OAAOyC,CACT,CACA,SAASlF,EAAUlY,EAAK7D,EAAQsQ,GAC9B,MAAMgO,EAAM,GACZ,KAAOte,EAASsQ,GAAK,CACnB,MAAMiO,EAAY1a,EAAI7D,GACtB,IAAIwe,EAAY,KACZC,EAAmBF,EAAY,IAAM,EAAIA,EAAY,IAAM,EAAIA,EAAY,IAAM,EAAI,EACzF,GAAIve,EAASye,GAAoBnO,EAAK,CACpC,IAAIoO,EAAYC,EAAWC,EAAYC,EACvC,OAAQJ,GACR,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EACHG,EAAa7a,EAAI7D,EAAS,GACC,MAAT,IAAb0e,KACHG,GAA6B,GAAZN,IAAmB,EAAiB,GAAbG,EACpCG,EAAgB,MAClBL,EAAYK,IAGhB,MACF,KAAK,EACHH,EAAa7a,EAAI7D,EAAS,GAC1B2e,EAAY9a,EAAI7D,EAAS,GACE,MAAT,IAAb0e,IAAmD,MAAT,IAAZC,KACjCE,GAA6B,GAAZN,IAAmB,IAAmB,GAAbG,IAAoB,EAAgB,GAAZC,EAC9DE,EAAgB,OAASA,EAAgB,OAASA,EAAgB,SACpEL,EAAYK,IAGhB,MACF,KAAK,EACHH,EAAa7a,EAAI7D,EAAS,GAC1B2e,EAAY9a,EAAI7D,EAAS,GACzB4e,EAAa/a,EAAI7D,EAAS,GACC,MAAT,IAAb0e,IAAmD,MAAT,IAAZC,IAAmD,MAAT,IAAbC,KAC9DC,GAA6B,GAAZN,IAAmB,IAAmB,GAAbG,IAAoB,IAAkB,GAAZC,IAAmB,EAAiB,GAAbC,EACvFC,EAAgB,OAASA,EAAgB,UAC3CL,EAAYK,IAIpB,CACkB,OAAdL,GACFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QACrBA,GAAa,MACbF,EAAI9d,KAAKge,IAAc,GAAK,KAAO,OACnCA,EAAY,MAAoB,KAAZA,GAEtBF,EAAI9d,KAAKge,GACTxe,GAAUye,CACZ,CACA,OAAOO,EAAsBV,EAC/B,CACA,MAAMS,EAAuB,KACtB,SAASC,EAAsBF,GACpC,MAAMha,EAAMga,EAAW/e,OACvB,GAAI+E,GAAOia,EACT,OAAO9e,OAAOC,aAAaC,MAAMF,OAAQ6e,GAE3C,IAAIR,EAAM,GACNla,EAAI,EACR,KAAOA,EAAIU,GACTwZ,GAAOre,OAAOC,aAAaC,MAAMF,OAAQ6e,EAAWld,MAAMwC,EAAGA,GAAK2a,IAEpE,OAAOT,CACT,uHCnOA,MAAM0qF,EAAkB,qBAClBC,EAAkB,qBAClBC,EAAuB,GAM7B,SAASC,EAAiBjuF,EAAM6E,EAAKqpF,GACnC,GAAIluF,EAAKnb,OAASggB,EAAMqpF,EACtB,MAAM,IAAI/nG,MAAM,GAAI2nG,6BAExB,CATAE,EAAqB,IAAM,EAC3BA,EAAqB,IAAM,EAC3BA,EAAqB,IAAM,EAC3BA,EAAqB,IAAM,EAC3BA,EAAqB,IAAM,4GCD3B,MAAMG,EAAuB,CAC3BC,QAAQ,EACRC,iBAAiB,EACjBC,gBAAgB,EAChBC,aAAa,GAEf,MAAMC,EACJ9gG,YAAYsS,EAAMpQ,EAAU,CAAC,GAC3BhC,KAAKiX,IAAM,EACXjX,KAAKoS,KAAOA,EACZpS,KAAKgC,QAAUA,CACjB,CACAqoB,OACE,OAAOrqB,KAAKiX,KAAOjX,KAAKoS,KAAKnb,MAC/B,CACA0O,OACE,MAAMk7F,EAAM7gG,KAAKoS,KAAKpS,KAAKiX,KAC3B,IAAIo4C,EAAQ,KAAMwxC,GAClB,QAAch7F,IAAVwpD,EAAqB,CACvB,MAAMwc,EAAU,KAAKg1B,GACrB,IAAKh1B,EACH,MAAM,IAAItzE,MAAM,GAAI,kCAA+CsoG,IAAQ,aAAeA,EAAIpuF,SAAS,IAAIo6C,SAAS,EAAG,SAEzH,MAAMi0C,EAAc,GAAND,EACdxxC,EAAQwc,EAAQ7rE,KAAKoS,KAAMpS,KAAKiX,IAAK6pF,EAAO9gG,KAAKgC,QACnD,CAEA,OADAhC,KAAKiX,KAAOo4C,EAAM0xC,cACX1xC,CACT,EAEF,MAAM2xC,EAAOxqG,OAAOs3E,IAAI,QAClBmzB,EAAQzqG,OAAOs3E,IAAI,SAqDzB,SAASozB,EAAeC,EAAWn/F,GACjC,GAAIm/F,EAAU92E,OACZ,OAAO22E,EAET,MAAM3xC,EAAQ8xC,EAAUx7F,OACxB,GAAI0pD,EAAMtsD,OAAS,UACjB,OAAOk+F,EAET,GAAI5xC,EAAMtsD,KAAKq+F,SACb,OAAO/xC,EAAMxwD,MAEf,GAAIwwD,EAAMtsD,OAAS,UACjB,OAhEJ,SAAsBssD,EAAO8xC,EAAWn/F,GACtC,MAAMnH,EAAM,GACZ,IAAK,IAAIS,EAAI,EAAGA,EAAI+zD,EAAMxwD,MAAOvD,IAAK,CACpC,MAAMuD,EAAQqiG,EAAeC,EAAWn/F,GACxC,GAAInD,IAAUoiG,EAAO,CACnB,GAAI5xC,EAAMxwD,QAAU2G,IAClB,MAEF,MAAM,IAAIjN,MAAM,GAAI,8CACtB,CACA,GAAIsG,IAAUmiG,EACZ,MAAM,IAAIzoG,MAAM,GAAI,gDAA6D+C,eAAiB+zD,EAAMxwD,UAE1GhE,EAAIS,GAAKuD,CACX,CACA,OAAOhE,CACT,CAgDWwmG,CAAahyC,EAAO8xC,EAAWn/F,GAExC,GAAIqtD,EAAMtsD,OAAS,QACjB,OAlDJ,SAAoBssD,EAAO8xC,EAAWn/F,GACpC,MAAMs/F,GAA8B,IAApBt/F,EAAQs/F,QAClBtvF,EAAMsvF,OAAUz7F,EAAY,CAAC,EAC7B0N,EAAI+tF,EAAU,IAAI9xF,SAAQ3J,EAChC,IAAK,IAAIvK,EAAI,EAAGA,EAAI+zD,EAAMxwD,MAAOvD,IAAK,CACpC,MAAMyG,EAAMm/F,EAAeC,EAAWn/F,GACtC,GAAID,IAAQk/F,EAAO,CACjB,GAAI5xC,EAAMxwD,QAAU2G,IAClB,MAEF,MAAM,IAAIjN,MAAM,GAAI,4CACtB,CACA,GAAIwJ,IAAQi/F,EACV,MAAM,IAAIzoG,MAAM,GAAI,8CAA2D+C,wBAA0B+zD,EAAMxwD,UAEjH,IAAgB,IAAZyiG,GAAmC,iBAARv/F,EAC7B,MAAM,IAAIxJ,MAAM,GAAI,kDAA+DwJ,MAErF,IAAuC,IAAnCC,EAAQu/F,yBACND,GAAW/tF,EAAEpD,IAAIpO,KAASu/F,GAAWv/F,KAAOiQ,GAC9C,MAAM,IAAIzZ,MAAM,GAAI,8BAA2CwJ,MAGnE,MAAMlD,EAAQqiG,EAAeC,EAAWn/F,GACxC,GAAInD,IAAUmiG,EACZ,MAAM,IAAIzoG,MAAM,GAAI,8CAA2D+C,0BAA4B+zD,EAAMxwD,UAE/GyiG,EACF/tF,EAAE1X,IAAIkG,EAAKlD,GAEXmT,EAAIjQ,GAAOlD,CAEf,CACA,OAAOyiG,EAAU/tF,EAAIvB,CACvB,CAgBWwvF,CAAWnyC,EAAO8xC,EAAWn/F,GAEtC,GAAIqtD,EAAMtsD,OAAS,QAAU,CAC3B,GAAIf,EAAQ+1C,MAA6C,mBAA9B/1C,EAAQ+1C,KAAKsX,EAAMxwD,OAAuB,CACnE,MAAM4iG,EAASP,EAAeC,EAAWn/F,GACzC,OAAOA,EAAQ+1C,KAAKsX,EAAMxwD,OAAO4iG,EACnC,CACA,MAAM,IAAIlpG,MAAM,GAAI,2BAAwC82D,EAAMxwD,SACpE,CACA,MAAM,IAAItG,MAAM,cAClB,CACA,SAAS6O,EAAOgL,EAAMpQ,GACpB,KAAMoQ,aAAgB5X,YACpB,MAAM,IAAIjC,MAAM,GAAI,4CAGtB,MAAM4oG,GADNn/F,EAAUtD,OAAOwL,OAAO,CAAC,EAAGq2F,EAAsBv+F,IACxB0/F,WAAa,IAAId,EAAUxuF,EAAMpQ,GACrD4wE,EAAUsuB,EAAeC,EAAWn/F,GAC1C,GAAI4wE,IAAYouB,EACd,MAAM,IAAIzoG,MAAM,GAAI,2CAEtB,GAAIq6E,IAAYquB,EACd,MAAM,IAAI1oG,MAAM,GAAI,6BAEtB,IAAK4oG,EAAU92E,OACb,MAAM,IAAI9xB,MAAM,GAAI,gDAEtB,OAAOq6E,CACT,uQCpHA,MAAM+uB,EAAuB,CAC3BC,SAAS,EACTC,UA6KF,SAAmBC,EAAIC,GACrB,MAAMC,EAAYppG,MAAM+S,QAAQm2F,EAAG,IAAMA,EAAG,GAAG,GAAKA,EAAG,GACjDG,EAAYrpG,MAAM+S,QAAQo2F,EAAG,IAAMA,EAAG,GAAG,GAAKA,EAAG,GACvD,GAAIC,EAAUj/F,OAASk/F,EAAUl/F,KAC/B,OAAOi/F,EAAUj/F,KAAK8T,QAAQorF,EAAUl/F,MAE1C,MAAMm/F,EAAQF,EAAUj/F,KAAKm/F,MACvBC,EAAOC,EAAaF,GAAOG,cAAcL,EAAWC,GAC7C,IAATE,GACFzpG,EAAQ+O,KAAK,yEAEf,OAAO06F,CACT,EAxLEG,iBAAgB,MAclB,MAAMF,EAZC,WACL,MAAMG,EAAW,GASjB,OARAA,EAAS,gBAAmB,KAC5BA,EAAS,kBAAqB,KAC9BA,EAAS,iBAAoB,KAC7BA,EAAS,kBAAqB,KAC9BA,EAAS,iBAAoB,KAC7BA,EAAS,eAAkB,KAC3BA,EAAS,eAAkB,KAC3BA,EAAS,iBAAoB,KACtBA,CACT,CACqBC,GACfznG,EAAM,IAAI,EAAA0nG,GAChB,MAAMC,EACJ5iG,YAAYkS,EAAK7D,GACfnO,KAAKgS,IAAMA,EACXhS,KAAKmO,OAASA,CAChB,CACA0J,SAAS7F,GACP,IAAIzW,EAAIyE,KACR,GACE,GAAIzE,EAAEyW,MAAQA,EACZ,OAAO,QAEFzW,EAAIA,EAAE4S,QACf,OAAO,CACT,CACAH,mBAAmByP,EAAOzL,GACxB,GAAIyL,GAASA,EAAM5F,SAAS7F,GAC1B,MAAM,IAAIzZ,MAAM,GAAI,4CAEtB,OAAO,IAAImqG,EAAI1wF,EAAKyL,EACtB,EAEF,MAAMklF,EAAe,CACnBC,KAAM,IAAI,IAAM,SAAW,MAC3B/8F,UAAW,IAAI,IAAM,mBAAgBA,GACrCg9F,KAAM,IAAI,IAAM,UAAW,GAC3BC,MAAO,IAAI,IAAM,WAAY,GAC7BpjC,WAAY,IAAI,IAAM,UAAY,GAClCqjC,SAAU,IAAI,IAAM,QAAU,IAE1BC,EAAe,CACnBnT,OAAM,CAAC79E,EAAKixF,EAAMhlE,EAAUilE,IACrB79F,OAAOC,UAAU0M,IAAS3M,OAAO89F,cAAcnxF,GAEzCA,GAAO,EACT,IAAI,IAAM,SAAWA,GAErB,IAAI,IAAM,WAAaA,GAJvB,IAAI,IAAM,UAAYA,GAOjCoxF,OAAM,CAACpxF,EAAKixF,EAAMhlE,EAAUilE,IACtBlxF,GAAOyG,OAAO,GACT,IAAI,IAAM,SAAWzG,GAErB,IAAI,IAAM,WAAaA,GAGlCxX,WAAU,CAACwX,EAAKixF,EAAMhlE,EAAUilE,IACvB,IAAI,IAAM,UAAYlxF,GAE/Bf,OAAM,CAACe,EAAKixF,EAAMhlE,EAAUilE,IACnB,IAAI,IAAM,WAAalxF,GAEhCqxF,QAAO,CAACrxF,EAAKixF,EAAMhlE,EAAUilE,IACpBlxF,EAAM2wF,EAAaE,KAAOF,EAAaG,MAEhDF,KAAI,CAACU,EAAML,EAAMhlE,EAAUilE,IAClBP,EAAaC,KAEtB/8F,UAAS,CAACy9F,EAAML,EAAMhlE,EAAUilE,IACvBP,EAAa98F,UAEtBwL,YAAW,CAACW,EAAKixF,EAAMhlE,EAAUilE,IACxB,IAAI,IAAM,UAAY,IAAI1oG,WAAWwX,IAE9C6Z,SAAQ,CAAC7Z,EAAKixF,EAAMhlE,EAAUilE,IACrB,IAAI,IAAM,UAAY,IAAI1oG,WAAWwX,EAAIrb,OAAQqb,EAAIL,WAAYK,EAAIpD,aAE9EhW,MAAMoZ,EAAKixF,EAAMjhG,EAASuhG,GACxB,IAAKvxF,EAAI/a,OACP,OAA+B,IAA3B+K,EAAQwhG,eACH,CACLb,EAAajjC,WACb,IAAI,IAAM,YAGPijC,EAAajjC,WAEtB6jC,EAAWb,EAAIe,YAAYF,EAAUvxF,GACrC,MAAM1K,EAAU,GAChB,IAAIhM,EAAI,EACR,IAAK,MAAMib,KAAKvE,EACd1K,EAAQhM,KAAOooG,EAAentF,EAAGvU,EAASuhG,GAE5C,OAAIvhG,EAAQwhG,eACH,CACL,IAAI,IAAM,UAAYxxF,EAAI/a,QAC1BqQ,EACA,IAAI,IAAM,YAGP,CACL,IAAI,IAAM,UAAY0K,EAAI/a,QAC1BqQ,EAEJ,EACA5I,OAAOsT,EAAK2xF,EAAK3hG,EAASuhG,GACxB,MAAMK,EAAgB,WAARD,EACRx8F,EAAOy8F,EAAQ5xF,EAAI7K,OAASzI,OAAOyI,KAAK6K,GACxC/a,EAAS2sG,EAAQ5xF,EAAIva,KAAO0P,EAAKlQ,OACvC,IAAKA,EACH,OAA+B,IAA3B+K,EAAQwhG,eACH,CACLb,EAAaI,SACb,IAAI,IAAM,YAGPJ,EAAaI,SAEtBQ,EAAWb,EAAIe,YAAYF,EAAUvxF,GACrC,MAAM1K,EAAU,GAChB,IAAIhM,EAAI,EACR,IAAK,MAAMyG,KAAOoF,EAChBG,EAAQhM,KAAO,CACbooG,EAAe3hG,EAAKC,EAASuhG,GAC7BG,EAAeE,EAAQ5xF,EAAIrR,IAAIoB,GAAOiQ,EAAIjQ,GAAMC,EAASuhG,IAI7D,OAiCJ,SAAwBj8F,EAAStF,GAC3BA,EAAQ6/F,WACVv6F,EAAQ+8B,KAAKriC,EAAQ6/F,UAEzB,CAtCIgC,CAAev8F,EAAStF,GACpBA,EAAQwhG,eACH,CACL,IAAI,IAAM,QAAUvsG,GACpBqQ,EACA,IAAI,IAAM,YAGP,CACL,IAAI,IAAM,QAAUrQ,GACpBqQ,EAEJ,GAEF07F,EAAaxzF,IAAMwzF,EAAatkG,OAChCskG,EAAax1F,OAASw1F,EAAaxoG,WACnC,IAAK,MAAMmpG,IAAO,iFAAiF1kG,MAAM,KACvG+jG,EAAa,GAAIW,UAAeX,EAAan3E,SAE/C,SAAS63E,EAAe1xF,EAAKhQ,EAAU,CAAC,EAAGuhG,GACzC,MAAMI,GAAM,IAAAG,IAAG9xF,GACT+xF,EAAoB/hG,GAAWA,EAAQghG,cAAgBhhG,EAAQghG,aAAaW,IAAQX,EAAaW,GACvG,GAAiC,mBAAtBI,EAAkC,CAC3C,MAAMC,EAASD,EAAkB/xF,EAAK2xF,EAAK3hG,EAASuhG,GACpD,GAAc,MAAVS,EACF,OAAOA,CAEX,CACA,MAAMC,EAAcjB,EAAaW,GACjC,IAAKM,EACH,MAAM,IAAI1rG,MAAM,GAAI,0BAAuCorG,KAE7D,OAAOM,EAAYjyF,EAAK2xF,EAAK3hG,EAASuhG,EACxC,CAmBA,SAASW,EAAgBnpG,EAAKipG,EAAQzB,EAAUvgG,GAC9C,GAAIpJ,MAAM+S,QAAQq4F,GAChB,IAAK,MAAM30C,KAAS20C,EAClBE,EAAgBnpG,EAAKs0D,EAAOkzC,EAAUvgG,QAGxCugG,EAASyB,EAAOjhG,KAAKm/F,OAAOnnG,EAAKipG,EAAQhiG,EAE7C,CACA,SAASmiG,EAAa/xF,EAAMmwF,EAAUvgG,GACpC,MAAMgiG,EAASN,EAAetxF,EAAMpQ,GACpC,IAAKpJ,MAAM+S,QAAQq4F,IAAWhiG,EAAQsgG,iBAAkB,CACtD,MAAM8B,EAAapiG,EAAQsgG,iBAAiB0B,GAC5C,GAAII,EACF,OAAOA,EAET,MAAMx4B,EAAU22B,EAASyB,EAAOjhG,KAAKm/F,OACrC,GAAIt2B,EAAQy4B,YAAa,CACvB,MAAM5sG,EAAOm0E,EAAQy4B,YAAYL,EAAQhiG,GACnCjH,EAAM,IAAI,EAAA0nG,GAAGhrG,GAEnB,GADAm0E,EAAQ7wE,EAAKipG,EAAQhiG,GACK,IAAtBjH,EAAIglG,OAAO9oG,OACb,MAAM,IAAIsB,MAAM,+CAAgDyrG,eAElE,OAAO,QAAMjpG,EAAIglG,OAAO,GAC1B,CACF,CAGA,OAFAhlG,EAAI8mE,QACJqiC,EAAgBnpG,EAAKipG,EAAQzB,EAAUvgG,GAChCjH,EAAIw4E,SAAQ,EACrB,CACA,SAAS3wE,EAAOwP,EAAMpQ,GAEpB,OADAA,EAAUtD,OAAOwL,OAAO,CAAC,EAAGy3F,EAAsB3/F,GAC3CmiG,EAAa/xF,EAAMgwF,EAAcpgG,EAC1C,uKCxOA,MAAMsiG,UAAoB1rG,MACxBkH,cACEoH,QACAlH,KAAKukG,YAAc,EACrB,CACAh2F,OAAOxT,GACL,MAAMypG,EAASxkG,KAAKukG,YAAYvkG,KAAKukG,YAAYttG,OAAS,GACtDutG,IACEA,EAAOzhG,OAAS,YAClByhG,EAAOC,WACiB,IAApBD,EAAOC,UACT1pG,EAAIrD,KAAK,CAAC,MAGV8sG,EAAOzhG,OAAS,UAClByhG,EAAOC,WACiB,IAApBD,EAAOC,WACLD,EAAOC,SAAW,GAAM,EAC1B1pG,EAAIrD,KAAK,CAAC,KAEVqD,EAAIrD,KAAK,CAAC,OAKpB,CACA,CAAC,gBAAiBqD,EAAKs0D,GACrBrvD,KAAKuO,OAAOxT,GACZ,MAAM+oG,EAAK3sG,OAAOk4D,EAAMxwD,OAClB6lG,EAAM,GACZ,IAAK,IAAIppG,EAAI,EAAGA,EAAIwoG,EAAG7sG,OAAQqE,IAC7BopG,EAAIppG,GAAKwoG,EAAGtoG,WAAWF,GAEzBP,EAAIrD,KAAKgtG,EACX,CACA,CAAC,kBAAmB3pG,EAAKs0D,GACvBrvD,KAAK,gBAAiBjF,EAAKs0D,EAC7B,CACA,CAAC,iBAAkBs1C,EAAMC,GACvB,MAAM,IAAIrsG,MAAM,GAAI,oCACtB,CACA,CAAC,kBAAmBwC,EAAKs0D,GACvBrvD,KAAKuO,OAAOxT,GACZ,MAAM8pG,GAAO,QAAWx4E,KAAK8T,UAAUkvB,EAAMxwD,QAC7C9D,EAAIrD,KAAKmtG,EAAK5tG,OAAS,IAAK,QAAM4tG,GAAQA,EAC5C,CACA,CAAC,iBAAkB9pG,EAAK6pG,GACtB5kG,KAAKuO,OAAOxT,GACZiF,KAAKukG,YAAY7sG,KAAK,CACpBqL,KAAM,UACN0hG,SAAU,IAEZ1pG,EAAIrD,KAAK,CAAC,IACZ,CACA,CAAC,eAAgBqD,EAAK6pG,GACpB5kG,KAAKuO,OAAOxT,GACZiF,KAAKukG,YAAY7sG,KAAK,CACpBqL,KAAM,QACN0hG,SAAU,IAEZ1pG,EAAIrD,KAAK,CAAC,KACZ,CACA,CAAC,eAAgBitG,EAAMC,GACvB,CACA,CAAC,iBAAkB7pG,EAAKs0D,GACtB,GAAwB,UAApBA,EAAMtsD,KAAK1D,KAAkB,CAC/B,MAAMmlG,EAASxkG,KAAKukG,YAAY7zE,MAChC,GAAI8zE,EAAQ,CACV,GAAIA,EAAOzhG,OAAS,UAClBhI,EAAIrD,KAAK,CAAC,SACL,IAAI8sG,EAAOzhG,OAAS,QAGzB,MAAM,IAAIxK,MAAM,sDAFhBwC,EAAIrD,KAAK,CAAC,KAGZ,CACA,MACF,CACA,MAAM,IAAIa,MAAM,4CAClB,CACA,QAAoBsN,IAAhBwpD,EAAMxwD,MACR,MAAM,IAAItG,MAAM,GAAI,oCAGtB,GADAyH,KAAKuO,OAAOxT,GACY,SAApBs0D,EAAMtsD,KAAK1D,KAOb,YANAtE,EAAIrD,KAAK,CACP,IACA,IACA,IACA,MAGG,GAAwB,UAApB23D,EAAMtsD,KAAK1D,KAQpB,YAPAtE,EAAIrD,KAAK,CACP,IACA,GACA,IACA,IACA,MAGG,GAAwB,SAApB23D,EAAMtsD,KAAK1D,KAOpB,YANAtE,EAAIrD,KAAK,CACP,IACA,IACA,IACA,MAIJ,MAAMosG,EAAK3sG,OAAOk4D,EAAMxwD,OAClB6lG,EAAM,GACZ,IAAII,GAAK,EACT,IAAK,IAAIxpG,EAAI,EAAGA,EAAIwoG,EAAG7sG,OAAQqE,IAC7BopG,EAAIppG,GAAKwoG,EAAGtoG,WAAWF,GAClBwpG,GAAkB,KAAXJ,EAAIppG,IAAwB,MAAXopG,EAAIppG,IAAyB,KAAXopG,EAAIppG,KACjDwpG,GAAK,GAGJA,IACHJ,EAAIhtG,KAAK,IACTgtG,EAAIhtG,KAAK,KAEXqD,EAAIrD,KAAKgtG,EACX,EAmBF,MAAM/C,EAAuB,CAC3B6B,gBAAgB,EAChB3B,UAnBF,SAAmBC,EAAIC,GACrB,GAAInpG,MAAM+S,QAAQm2F,EAAG,KAAOlpG,MAAM+S,QAAQo2F,EAAG,IAC3C,MAAM,IAAIxpG,MAAM,GAAI,2CAEtB,MAAMypG,EAAYF,EAAG,GACfG,EAAYF,EAAG,GACrB,GAAIC,EAAUj/F,OAAS,YAAek/F,EAAUl/F,OAAS,WACvD,MAAM,IAAIxK,MAAM,GAAI,8CAEtB,GAAIypG,EAAYC,EACd,OAAQ,EAEV,GAAID,EAAYC,EACd,OAAO,EAET,MAAM,IAAI1pG,MAAM,GAAI,4DACtB,GAKA,SAAS,EAAO6Z,EAAMpQ,GAEpB,OADAA,EAAUtD,OAAOwL,OAAO,CAAC,EAAGy3F,EAAsB3/F,IAC3C,EAAAY,EAAA,IAAawP,EAAM,IAAIkyF,EAAetiG,EAC/C,gBCrJA,MAAM+iG,EACJjlG,YAAYsS,EAAMpQ,EAAU,CAAC,GAC3BhC,KAAKiX,IAAM,EACXjX,KAAKoS,KAAOA,EACZpS,KAAKgC,QAAUA,EACfhC,KAAKglG,UAAY,CAAC,SAClBhlG,KAAKovD,UAAY,EACnB,CACA/kC,OACE,OAAOrqB,KAAKiX,KAAOjX,KAAKoS,KAAKnb,MAC/B,CACA+rD,KACE,OAAOhjD,KAAKoS,KAAKpS,KAAKiX,IACxB,CACAguF,cACE,OAAOjlG,KAAKglG,UAAUhlG,KAAKglG,UAAU/tG,OAAS,EAChD,CACAiuG,iBACE,IAAI/vF,EAAInV,KAAKgjD,KACb,KAAa,KAAN7tC,GAAkB,IAANA,GAAiB,KAANA,GAAkB,KAANA,GACxCA,EAAInV,KAAKoS,OAAOpS,KAAKiX,IAEzB,CACAkuF,OAAO9pG,GACL,GAAI2E,KAAKoS,KAAKnb,OAAS+I,KAAKiX,IAAM5b,EAAIpE,OACpC,MAAM,IAAIsB,MAAM,GAAI,4CAAyDyH,KAAKiX,OAEpF,IAAK,IAAI3b,EAAI,EAAGA,EAAID,EAAIpE,OAAQqE,IAC9B,GAAI0E,KAAKoS,KAAKpS,KAAKiX,SAAW5b,EAAIC,GAChC,MAAM,IAAI/C,MAAM,GAAI,qCAAkDyH,KAAKiX,0BAA4B9f,OAAOC,gBAAgBiE,MAGpI,CACA+pG,cACE,MAAMC,EAAWrlG,KAAKiX,IACtB,IAAIquF,GAAW,EACXlrG,GAAQ,EACZ,MAAMmrG,EAAUr5E,IACd,MAAQlsB,KAAKqqB,QAAQ,CACnB,MAAM24B,EAAKhjD,KAAKgjD,KAChB,IAAI92B,EAAMrU,SAASmrC,GAGjB,MAFAhjD,KAAKiX,KAIT,GAMF,GAJkB,KAAdjX,KAAKgjD,OACPsiD,GAAW,EACXtlG,KAAKiX,OAEW,KAAdjX,KAAKgjD,KAAa,CAEpB,GADAhjD,KAAKiX,MACa,KAAdjX,KAAKgjD,KAIP,OAAO,IAAI,IAAM,SAAW,EAAGhjD,KAAKiX,IAAMouF,GAH1CrlG,KAAKiX,MACL7c,GAAQ,CAIZ,CAaA,GAZAmrG,EAAQ,CACN,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,KAEED,GAAYtlG,KAAKiX,MAAQouF,EAAW,EACtC,MAAM,IAAI9sG,MAAM,GAAI,qCAAkDyH,KAAKiX,OAE7E,IAAKjX,KAAKqqB,QAAwB,KAAdrqB,KAAKgjD,KAAa,CACpC,GAAI5oD,EACF,MAAM,IAAI7B,MAAM,GAAI,qCAAkDyH,KAAKiX,OAE7E7c,GAAQ,EACR4F,KAAKiX,MACLsuF,EAAQ,CACN,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IAEJ,CACKvlG,KAAKqqB,QAAyB,MAAdrqB,KAAKgjD,MAA8B,KAAdhjD,KAAKgjD,OAC7C5oD,GAAQ,EACR4F,KAAKiX,MACAjX,KAAKqqB,QAAyB,KAAdrqB,KAAKgjD,MAA6B,KAAdhjD,KAAKgjD,MAC5ChjD,KAAKiX,MAEPsuF,EAAQ,CACN,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,MAGJ,MAAMC,EAASruG,OAAOC,aAAaC,MAAM,KAAM2I,KAAKoS,KAAK9a,SAAS+tG,EAAUrlG,KAAKiX,MAC3E4a,EAAMnN,WAAW8gF,GACvB,OAAIprG,EACK,IAAI,IAAM,UAAYy3B,EAAK7xB,KAAKiX,IAAMouF,IAEd,IAA7BrlG,KAAKgC,QAAQ2+F,aAAwBt7F,OAAO89F,cAActxE,GACrD,IAAI,IAAMA,GAAO,EAAI,SAAY,WAAaA,EAAK7xB,KAAKiX,IAAMouF,GAEhE,IAAI,IAAMxzE,GAAO,EAAI,SAAY,WAAapZ,OAAO+sF,GAASxlG,KAAKiX,IAAMouF,EAClF,CACAI,cACE,GAAkB,KAAdzlG,KAAKgjD,KACP,MAAM,IAAIzqD,MAAM,GAAI,yCAAsDyH,KAAKiX,8BAEjFjX,KAAKiX,MACL,IAAK,IAAI3b,EAAI0E,KAAKiX,IAAKkS,EAAI,EAAG7tB,EAAI0E,KAAKoS,KAAKnb,QAAUkyB,EAAI,MAAO7tB,IAAK6tB,IAAK,CACzE,MAAM65B,EAAKhjD,KAAKoS,KAAK9W,GACrB,GAAW,KAAP0nD,GAAaA,EAAK,IAAMA,GAAM,IAChC,MAEF,GAAW,KAAPA,EAAW,CACb,MAAM3nD,EAAMlE,OAAOC,aAAaC,MAAM,KAAM2I,KAAKoS,KAAK9a,SAAS0I,KAAKiX,IAAK3b,IAEzE,OADA0E,KAAKiX,IAAM3b,EAAI,EACR,IAAI,IAAM,WAAaD,EAAK8tB,EACrC,CACF,CACA,MAAMk8E,EAAWrlG,KAAKiX,IAChBiV,EAAQ,GACRw5E,EAAS,KACb,GAAI1lG,KAAKiX,IAAM,GAAKjX,KAAKoS,KAAKnb,OAC5B,MAAM,IAAIsB,MAAM,GAAI,8DAA2EyH,KAAKiX,OAEtG,IAAI0uF,EAAK,EACT,IAAK,IAAIrqG,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAI0nD,EAAKhjD,KAAKgjD,KACd,GAAIA,GAAM,IAAMA,GAAM,GACpBA,GAAM,QACD,GAAIA,GAAM,IAAMA,GAAM,IAC3BA,EAAKA,EAAK,GAAK,OACV,MAAIA,GAAM,IAAMA,GAAM,IAG3B,MAAM,IAAIzqD,MAAM,GAAI,wDAAqEyH,KAAKiX,OAF9F+rC,EAAKA,EAAK,GAAK,EAGjB,CACA2iD,EAAU,GAALA,EAAU3iD,EACfhjD,KAAKiX,KACP,CACA,OAAO0uF,CAAE,EAELC,EAAe,KACnB,MAAMnwF,EAAYzV,KAAKgjD,KACvB,IAKIptC,EAAYC,EAAWC,EAAYC,EALnCL,EAAY,KACZC,EAAmBF,EAAY,IAAM,EAAIA,EAAY,IAAM,EAAIA,EAAY,IAAM,EAAI,EACzF,GAAIzV,KAAKiX,IAAMtB,EAAmB3V,KAAKoS,KAAKnb,OAC1C,MAAM,IAAIsB,MAAM,GAAI,gDAA6DyH,KAAKiX,OAGxF,OAAQtB,GACR,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EACHG,EAAa5V,KAAKoS,KAAKpS,KAAKiX,IAAM,GACP,MAAT,IAAbrB,KACHG,GAA6B,GAAZN,IAAmB,EAAiB,GAAbG,EACpCG,EAAgB,MAClBL,EAAYK,IAGhB,MACF,KAAK,EACHH,EAAa5V,KAAKoS,KAAKpS,KAAKiX,IAAM,GAClCpB,EAAY7V,KAAKoS,KAAKpS,KAAKiX,IAAM,GACN,MAAT,IAAbrB,IAAmD,MAAT,IAAZC,KACjCE,GAA6B,GAAZN,IAAmB,IAAmB,GAAbG,IAAoB,EAAgB,GAAZC,EAC9DE,EAAgB,OAASA,EAAgB,OAASA,EAAgB,SACpEL,EAAYK,IAGhB,MACF,KAAK,EACHH,EAAa5V,KAAKoS,KAAKpS,KAAKiX,IAAM,GAClCpB,EAAY7V,KAAKoS,KAAKpS,KAAKiX,IAAM,GACjCnB,EAAa9V,KAAKoS,KAAKpS,KAAKiX,IAAM,GACP,MAAT,IAAbrB,IAAmD,MAAT,IAAZC,IAAmD,MAAT,IAAbC,KAC9DC,GAA6B,GAAZN,IAAmB,IAAmB,GAAbG,IAAoB,IAAkB,GAAZC,IAAmB,EAAiB,GAAbC,EACvFC,EAAgB,OAASA,EAAgB,UAC3CL,EAAYK,IAIA,OAAdL,GACFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QACrBA,GAAa,MACbwW,EAAMx0B,KAAKge,IAAc,GAAK,KAAO,OACrCA,EAAY,MAAoB,KAAZA,GAEtBwW,EAAMx0B,KAAKge,GACX1V,KAAKiX,KAAOtB,CAAgB,EAE9B,MAAQ3V,KAAKqqB,QAAQ,CACnB,MAAM24B,EAAKhjD,KAAKgjD,KAChB,IAAI6iD,EACJ,OAAQ7iD,GACR,KAAK,GAEH,GADAhjD,KAAKiX,MACDjX,KAAKqqB,OACP,MAAM,IAAI9xB,MAAM,GAAI,kDAA+DyH,KAAKiX,OAI1F,OAFA4uF,EAAM7lG,KAAKgjD,KACXhjD,KAAKiX,MACG4uF,GACR,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACH35E,EAAMx0B,KAAKmuG,GACX,MACF,KAAK,GACH35E,EAAMx0B,KAAK,GACX,MACF,KAAK,IACHw0B,EAAMx0B,KAAK,GACX,MACF,KAAK,IACHw0B,EAAMx0B,KAAK,IACX,MACF,KAAK,IACHw0B,EAAMx0B,KAAK,IACX,MACF,KAAK,IACHw0B,EAAMx0B,KAAK,IACX,MACF,KAAK,IACHw0B,EAAMx0B,KAAKguG,KACX,MACF,QACE,MAAM,IAAIntG,MAAM,GAAI,uDAAoEyH,KAAKiX,OAE/F,MACF,KAAK,GAEH,OADAjX,KAAKiX,MACE,IAAI,IAAM,YAAa,QAAsBiV,GAAQlsB,KAAKiX,IAAMouF,GACzE,QACE,GAAIriD,EAAK,GACP,MAAM,IAAIzqD,MAAM,GAAI,8CAA2DyH,KAAKiX,OAC3E+rC,EAAK,KACd92B,EAAMx0B,KAAKsrD,GACXhjD,KAAKiX,OAEL2uF,IAGN,CACA,MAAM,IAAIrtG,MAAM,GAAI,6CAA0DyH,KAAKiX,MACrF,CACAspC,aACE,OAAQvgD,KAAKgjD,MACb,KAAK,IAGH,OAFAhjD,KAAKglG,UAAUttG,KAAK,aACpBsI,KAAKiX,MACE,IAAI,IAAM,QAAUzR,IAAU,GACvC,KAAK,GAGH,OAFAxF,KAAKglG,UAAUttG,KAAK,eACpBsI,KAAKiX,MACE,IAAI,IAAM,UAAYzR,IAAU,GACzC,KAAK,GACD,OAAOxF,KAAKylG,cAEhB,KAAK,IAOH,OANAzlG,KAAKmlG,OAAO,CACV,IACA,IACA,IACA,MAEK,IAAI,IAAM,SAAW,KAAM,GACpC,KAAK,IAQH,OAPAnlG,KAAKmlG,OAAO,CACV,IACA,GACA,IACA,IACA,MAEK,IAAI,IAAM,WAAY,EAAO,GACtC,KAAK,IAOH,OANAnlG,KAAKmlG,OAAO,CACV,IACA,IACA,IACA,MAEK,IAAI,IAAM,UAAW,EAAM,GACpC,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACH,OAAOnlG,KAAKolG,cACd,QACE,MAAM,IAAI7sG,MAAM,GAAI,yCAAsDyH,KAAKiX,OAEnF,CACAtR,OAEE,OADA3F,KAAKklG,iBACGllG,KAAKilG,eACb,IAAK,QAEH,OADAjlG,KAAKglG,UAAUt0E,MACR1wB,KAAKugD,aACd,IAAK,cAED,GADAvgD,KAAKglG,UAAUt0E,MACG,KAAd1wB,KAAKgjD,KAGP,OAFAhjD,KAAKiX,MACLjX,KAAKklG,iBACE,IAAI,IAAM,eAAYr/F,EAAW,GAE1C,GAAkB,KAAd7F,KAAKgjD,KACP,MAAM,IAAIzqD,MAAM,GAAI,yCAAsDyH,KAAKiX,iDAAmD9f,OAAOC,aAAa4I,KAAKgjD,UAK7J,OAHAhjD,KAAKiX,MACLjX,KAAKglG,UAAUttG,KAAK,eACpBsI,KAAKklG,iBACEllG,KAAKugD,aAEhB,IAAK,cAED,OADAvgD,KAAKglG,UAAUt0E,MACG,KAAd1wB,KAAKgjD,MACPhjD,KAAKiX,MACLjX,KAAKklG,iBACE,IAAI,IAAM,eAAYr/F,EAAW,KAE1C7F,KAAKglG,UAAUttG,KAAK,eACpBsI,KAAKklG,iBACEllG,KAAKugD,cAEhB,IAAK,UACH,GAAkB,MAAdvgD,KAAKgjD,KAIP,OAHAhjD,KAAKglG,UAAUt0E,MACf1wB,KAAKiX,MACLjX,KAAKklG,iBACE,IAAI,IAAM,eAAYr/F,EAAW,GAE1C,GAAkB,KAAd7F,KAAKgjD,KACP,MAAM,IAAIzqD,MAAM,GAAI,yCAAsDyH,KAAKiX,kDAAoD9f,OAAOC,aAAa4I,KAAKgjD,UAE9JhjD,KAAKiX,MACLjX,KAAKklG,iBACP,IAAK,YAAa,CAEd,GADAllG,KAAKglG,UAAUt0E,MACG,MAAd1wB,KAAKgjD,KAGP,OAFAhjD,KAAKiX,MACLjX,KAAKklG,iBACE,IAAI,IAAM,eAAYr/F,EAAW,GAE1C,MAAMwpD,EAAQrvD,KAAKylG,cAEnB,GADAzlG,KAAKklG,iBACa,KAAdllG,KAAKgjD,KACP,MAAM,IAAIzqD,MAAM,GAAI,yCAAsDyH,KAAKiX,yDAA2D9f,OAAOC,aAAa4I,KAAKgjD,UAIrK,OAFAhjD,KAAKiX,MACLjX,KAAKglG,UAAUttG,KAAK,aACb23D,CACT,CACF,IAAK,YAID,OAHArvD,KAAKglG,UAAUt0E,MACf1wB,KAAKglG,UAAUttG,KAAK,WACpBsI,KAAKklG,iBACEllG,KAAKugD,aAEhB,QACE,MAAM,IAAIhoD,MAAM,GAAI,2CAAwDyH,KAAKiX,8BAErF,EAEF,SAAS,EAAO7E,EAAMpQ,GAEpB,OADAA,EAAUtD,OAAOwL,OAAO,CAAEw3F,UAAW,IAAIqD,EAAU3yF,EAAMpQ,IAAYA,IAC9D,QAAQoQ,EAAMpQ,EACvB,mPC1YA,SAAS8jG,EAAa1zF,EAAM6E,EAAK6pF,GAC/B,MAAM,IAAIvoG,MAAM,GAAI,mCAAgDuoG,gBAAsB1uF,EAAK6E,KAAS,IAC1G,CACA,SAAS8uF,EAAQ9nF,GACf,MAAO,KACL,MAAM,IAAI1lB,MAAM,GAAI,QAAqB0lB,IAAO,CAEpD,CACO,MAAM+nF,EAAO,GACpB,IAAK,IAAI1qG,EAAI,EAAGA,GAAK,GAAIA,IACvB0qG,EAAK1qG,GAAKwqG,EAEZE,EAAK,IAAM,KACXA,EAAK,IAAM,KACXA,EAAK,IAAM,KACXA,EAAK,IAAM,KACXA,EAAK,IAAMF,EACXE,EAAK,IAAMF,EACXE,EAAK,IAAMF,EACXE,EAAK,IAAMF,EACX,IAAK,IAAIxqG,EAAI,GAAIA,GAAK,GAAIA,IACxB0qG,EAAK1qG,GAAKwqG,EAEZE,EAAK,IAAM,KACXA,EAAK,IAAM,KACXA,EAAK,IAAM,KACXA,EAAK,IAAM,KACXA,EAAK,IAAMF,EACXE,EAAK,IAAMF,EACXE,EAAK,IAAMF,EACXE,EAAK,IAAMF,EACX,IAAK,IAAIxqG,EAAI,GAAIA,GAAK,GAAIA,IACxB0qG,EAAK1qG,GAAK,KAEZ0qG,EAAK,IAAM,KACXA,EAAK,IAAM,KACXA,EAAK,IAAM,KACXA,EAAK,IAAM,KACXA,EAAK,IAAMF,EACXE,EAAK,IAAMF,EACXE,EAAK,IAAMF,EACXE,EAAK,IAAMD,EAAQ,qDACnB,IAAK,IAAIzqG,EAAI,GAAIA,GAAK,IAAKA,IACzB0qG,EAAK1qG,GAAK,KAEZ0qG,EAAK,KAAO,KACZA,EAAK,KAAO,IACZA,EAAK,KAAO,KACZA,EAAK,KAAO,KACZA,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZE,EAAK,KAAOD,EAAQ,qDACpB,IAAK,IAAIzqG,EAAI,IAAKA,GAAK,IAAKA,IAC1B0qG,EAAK1qG,GAAK,KAEZ0qG,EAAK,KAAO,KACZA,EAAK,KAAO,KACZA,EAAK,KAAO,KACZA,EAAK,KAAO,KACZA,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZE,EAAK,KAAO,KACZ,IAAK,IAAI1qG,EAAI,IAAKA,GAAK,IAAKA,IAC1B0qG,EAAK1qG,GAAK,KAEZ0qG,EAAK,KAAO,IACZA,EAAK,KAAO,KACZA,EAAK,KAAO,KACZA,EAAK,KAAO,KACZA,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZE,EAAK,KAAO,KACZ,IAAK,IAAI1qG,EAAI,IAAKA,GAAK,IAAKA,IAC1B0qG,EAAK1qG,GAAK,KAEZ0qG,EAAK,KAAO,KACZA,EAAK,KAAO,KACZA,EAAK,KAAO,KACZA,EAAK,KAAO,KACZA,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZ,IAAK,IAAIxqG,EAAI,IAAKA,GAAK,IAAKA,IAC1B0qG,EAAK1qG,GAAKyqG,EAAQ,mCAEpBC,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZE,EAAK,KAAO,KACZA,EAAK,KAAOD,EAAQ,mCACpBC,EAAK,KAAO,KACZA,EAAK,KAAO,KACZA,EAAK,KAAO,KACZA,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZE,EAAK,KAAOF,EACZE,EAAK,KAAO,KACL,MAAMC,EAAQ,GACrB,IAAK,IAAI3qG,EAAI,EAAGA,EAAI,GAAIA,IACtB2qG,EAAM3qG,GAAK,IAAI,IAAM,SAAWA,EAAG,GAErC,IAAK,IAAIA,GAAK,EAAGA,IAAM,GAAIA,IACzB2qG,EAAM,GAAK3qG,GAAK,IAAI,IAAM,WAAaA,EAAG,GASrC,SAASgnG,EAAiBjzC,GAC/B,OAAQA,EAAMtsD,MACd,KAAK,UACH,OAAO,QAAU,CAAC,MACpB,KAAK,SACH,OAAO,QAAU,CAAC,MACpB,KAAK,SACH,OAAO,QAAU,CAAC,MACpB,KAAK,UACH,OAAKssD,EAAMxwD,MAAM5H,YAGjB,GAFS,QAAU,CAAC,KAGtB,KAAK,WACH,MAAoB,KAAhBo4D,EAAMxwD,OACD,QAAU,CAAC,UAEpB,EACF,KAAK,UACH,OAAoB,IAAhBwwD,EAAMxwD,OACD,QAAU,CAAC,WAEpB,EACF,KAAK,QACH,OAAoB,IAAhBwwD,EAAMxwD,OACD,QAAU,CAAC,WAEpB,EACF,KAAK,SACH,OAAIwwD,EAAMxwD,MAAQ,IACT,QAAU,CAACwG,OAAOgqD,EAAMxwD,cAEjC,EACF,KAAK,WACH,GAAIwwD,EAAMxwD,QAAU,GAClB,OAAO,QAAU,CAAC,GAAKwG,OAAOgqD,EAAMxwD,SAG1C,CA7CAonG,EAAM,IAAM,IAAI,IAAM,UAAY,IAAIzrG,WAAW,GAAI,GACrDyrG,EAAM,IAAM,IAAI,IAAM,WAAa,GAAI,GACvCA,EAAM,KAAO,IAAI,IAAM,UAAY,EAAG,GACtCA,EAAM,KAAO,IAAI,IAAM,QAAU,EAAG,GACpCA,EAAM,KAAO,IAAI,IAAM,WAAY,EAAO,GAC1CA,EAAM,KAAO,IAAI,IAAM,UAAW,EAAM,GACxCA,EAAM,KAAO,IAAI,IAAM,SAAW,KAAM,8FChIxC,MAAMhrG,EACJ6E,YAAYoiG,EAAO7iG,EAAM+hG,GACvBphG,KAAKkiG,MAAQA,EACbliG,KAAKkmG,aAAehE,GAAS,EAC7BliG,KAAKX,KAAOA,EACZW,KAAKohG,SAAWA,CAClB,CACA3uF,WACE,MAAO,QAASzS,KAAKkiG,UAAYliG,KAAKX,MACxC,CACAwX,QAAQ8sF,GACN,OAAO3jG,KAAKkiG,MAAQyB,EAAIzB,OAAS,EAAIliG,KAAKkiG,MAAQyB,EAAIzB,MAAQ,EAAI,CACpE,EAEFjnG,EAAKkrG,KAAO,IAAIlrG,EAAK,EAAG,QAAQ,GAChCA,EAAKmrG,OAAS,IAAInrG,EAAK,EAAG,UAAU,GACpCA,EAAKkd,MAAQ,IAAIld,EAAK,EAAG,SAAS,GAClCA,EAAKgW,OAAS,IAAIhW,EAAK,EAAG,UAAU,GACpCA,EAAKuX,MAAQ,IAAIvX,EAAK,EAAG,SAAS,GAClCA,EAAK8U,IAAM,IAAI9U,EAAK,EAAG,OAAO,GAC9BA,EAAKisD,IAAM,IAAIjsD,EAAK,EAAG,OAAO,GAC9BA,EAAKb,MAAQ,IAAIa,EAAK,EAAG,SAAS,GAClCA,EAAK6nG,MAAQ,IAAI7nG,EAAK,EAAG,SAAS,GAClCA,EAAK4nG,KAAO,IAAI5nG,EAAK,EAAG,QAAQ,GAChCA,EAAK2nG,KAAO,IAAI3nG,EAAK,EAAG,QAAQ,GAChCA,EAAK4K,UAAY,IAAI5K,EAAK,EAAG,aAAa,GAC1CA,EAAKorG,MAAQ,IAAIprG,EAAK,EAAG,SAAS,GAClC,MAAMusD,EACJ1nD,YAAYiD,EAAMlE,EAAOkiG,GACvB/gG,KAAK+C,KAAOA,EACZ/C,KAAKnB,MAAQA,EACbmB,KAAK+gG,cAAgBA,EACrB/gG,KAAKsmG,kBAAezgG,EACpB7F,KAAKumG,eAAY1gG,CACnB,CACA4M,WACE,MAAO,SAAUzS,KAAK+C,SAAW/C,KAAKnB,OACxC,iNCpCK,SAAS2nG,EAAYz0F,GACxB,OAAO1B,EAAAo2F,UAAA,OAAiB10F,GAAGjZ,MAAM,EACrC,CACO,SAAS4tG,EAAcriF,GAC1B,OAAOhU,EAAAo2F,UAAA,OAAiB,IAAIpiF,IAChC,gBCIA,SAASsiF,EAAgBpjC,GACrB,MAAMqjC,EAAU,CACZrjC,UAAWmjC,EAAcnjC,EAAUA,YAMvC,OAJIA,EAAU94C,SACVm8E,EAAQn8E,OAAS84C,EAAU94C,QAC3B84C,EAAUsjC,YACVD,EAAQC,UAAYH,EAAcnjC,EAAUsjC,YACzCD,CACX,CAcA,SAASE,EAAgBF,GACrB,MAAMnoC,EAAO,CACT8E,UAAWijC,EAAYI,EAAQrjC,YAMnC,OAJIqjC,EAAQn8E,SACRg0C,EAAKh0C,OAASm8E,EAAQn8E,QACtBm8E,EAAQC,YACRpoC,EAAKooC,UAAYL,EAAYI,EAAQC,YAClCpoC,CACX,CC7BA,SAASsoC,EAAgBC,GACrB,MAAMC,EAAS,CAAC,EAKhB,OAJID,EAAUE,gBACVD,EAAOC,cAAgBR,EAAcM,EAAUE,gBAC/CF,EAAUv8E,SACVw8E,EAAOx8E,OAASu8E,EAAUv8E,QACvBw8E,CACX,CAgBA,SAASE,EAAgBP,GACrB,MAAMI,EAAY,CAAC,EAKnB,OAJIJ,EAAQM,gBACRF,EAAUE,cAAgBV,EAAYI,EAAQM,gBAC9CN,EAAQn8E,SACRu8E,EAAUv8E,OAASm8E,EAAQn8E,QACxBu8E,CACX,gBCxCO,MAAM,EAAO,WACP/kG,EAAO,IACpB,SAASmlG,EAASC,GACd,MAAQ,YAAaA,GACO,iBAAjBA,EAAK/yB,SACZ,eAAgB+yB,GAChBzuG,MAAM+S,QAAQ07F,EAAKC,WAC3B,CAiBA,SAASC,EAASF,GACd,MAAQ,eAAgBA,GACO,iBAApBA,EAAKt1B,YACZ,OAAQs1B,GACW,iBAAZA,EAAKG,IACZ,cAAeH,GACW,iBAAnBA,EAAKR,WACZ,QAASQ,GACW,iBAAbA,EAAKngD,GACpB,CACO,SAASugD,EAAUJ,GACtB,GAAoB,iBAATA,EAAmB,CAC1B,MAAMpoG,EAAQooG,EAAKpoG,MAAM,KACzB,GAAqB,IAAjBA,EAAMhI,OACN,OFvCL,SAAmBgI,GACtB,MAAOyoG,EAAiBpzB,EAAS/Q,GAAatkE,EAC9C,MAAO,CACHq1E,UACAgzB,WAAY,CAAC,CAAET,UAAWa,EAAiBnkC,cAC3CoJ,KAAM,YAAW+5B,EAAcpyB,IAEvC,CEgCmB,CAAkBr1E,GAExB,GAAqB,IAAjBA,EAAMhI,OACX,OD3CL,SAAmBgI,GACtB,MAAOyoG,EAAiBR,EAAeM,EAAIz1B,EAAY7qB,GAAOjoD,EACxD0oG,EAAM,CACR51B,aACAy1B,KACAX,UAAWa,EACXxgD,OAIJ,OAFIggD,IACAS,EAAIC,WAAa,CAAC,CAAEV,mBACjBS,CACX,CCgCmB,CAAqB1oG,GAEhC,MAAM,IAAI1G,MAAM,0BACpB,CACA,GAAI6uG,EAASC,IAASE,EAASF,GAC3B,OAAOA,EAEX,MAAM,IAAI9uG,MAAM,oCACpB,CACO,SAAS,EAAOyZ,GAInB,IAAI61F,EACJ,GAJmB,iBAAR71F,IACPA,EAAMy1F,EAAUz1F,IAGhBo1F,EAASp1F,GACT61F,EFvCD,SAAgBC,GACnB,MAAMxzB,EAAUoyB,EAAcoB,EAAIxzB,SAClC,IACI,YAAWA,EACf,CACA,MAAO/9D,GACH,MAAM,IAAIhe,MAAM,qBACpB,CACA,MAAO,CACH+7E,UACAgzB,WAAYQ,EAAIR,WAAWv3F,IAAI42F,GAEvC,CE2BsB,CAAe30F,OAE5B,KAAIu1F,EAASv1F,GAId,MAAM,IAAIzZ,MAAM,2BAHhBsvG,EDzCD,SAAgBF,GACnB,MAAMI,EAAS,CACXh2B,WAAY20B,EAAciB,EAAI51B,YAC9B80B,UAAWH,EAAciB,EAAId,WAC7BW,GAAId,EAAciB,EAAIH,IACtBtgD,IAAKw/C,EAAciB,EAAIzgD,MAQ3B,OANIygD,EAAIK,MACJD,EAAOC,IAAMtB,EAAciB,EAAIK,MAC/BL,EAAIC,aACJG,EAAOH,WAAaD,EAAIC,WAAW73F,IAAIg3F,IACvCY,EAAIM,cACJF,EAAOE,YAAcN,EAAIM,aACtBF,CACX,CC2BsB,CAAkB/1F,EAIpC,CACA,OAAO,IAAIxX,WAAW,SAAYqtG,GACtC,CACO,SAAS,EAAOz1F,GACnB,IAAIw0F,EACJ,IACIA,EAAU,SAAYx0F,EAC1B,CACA,MAAOmE,GACH,MAAM,IAAIhe,MAAM,8BACpB,CACA,GAjEQ,YADU8uG,EAkEDT,IAhEbS,EAAK/yB,mBAAmB95E,YACxB,eAAgB6sG,GAChBzuG,MAAM+S,QAAQ07F,EAAKC,YA+DnB,OFnCD,SAAgBV,GACnB,MAAMh0B,EAAU,CACZ0B,QAASkyB,EAAYI,EAAQtyB,SAC7BgzB,WAAYV,EAAQU,WAAWv3F,IAAI+2F,IAGvC,OADAl0B,EAAQjG,KAAO,YAAW,IAAInyE,WAAWosG,EAAQtyB,UAC1C1B,CACX,CE4Be,CAAeg0B,GAErB,GA/DT,SAAsBS,GAClB,MAAQ,eAAgBA,GACpBA,EAAKt1B,sBAAsBv3E,YAC3B,OAAQ6sG,GACRA,EAAKG,cAAchtG,YACnB,cAAe6sG,GACfA,EAAKR,qBAAqBrsG,YAC1B,QAAS6sG,GACTA,EAAKngD,eAAe1sD,UAC5B,CAsDa0tG,CAAatB,GAClB,ODrCD,SAAgBA,GACnB,MAAMe,EAAM,CACR51B,WAAYy0B,EAAYI,EAAQ70B,YAChC80B,UAAWL,EAAYI,EAAQC,WAC/BW,GAAIhB,EAAYI,EAAQY,IACxBtgD,IAAKs/C,EAAYI,EAAQ1/C,MAQ7B,OANI0/C,EAAQoB,MACRL,EAAIK,IAAMxB,EAAYI,EAAQoB,MAC9BpB,EAAQgB,aACRD,EAAIC,WAAahB,EAAQgB,WAAW73F,IAAIo3F,IACxCP,EAAQqB,cACRN,EAAIM,YAAcrB,EAAQqB,aACvBN,CACX,CCuBe,CAAkBf,GAGzB,MAAM,IAAIruG,MAAM,+BAzExB,IAAsB8uG,CA2EtB,sECzEA,MAVA,SAAelpG,GACX,GAHsC,MAGlBA,EAHP3H,OAAOuQ,eAIhB,MAAO,WACH,UAAW,MAAMoZ,KAAKhiB,GACzB,EAFM,GAKP,IAAK,MAAMgiB,KAAKhiB,GAExB,aCkCA,MA1CA,SAAgBA,EAAQ0O,GACpB,GAHsC,MAGlB1O,EAHP3H,OAAOuQ,eAIhB,OAAO,kBACH,UAAW,MAAMQ,KAASpJ,QACZ0O,EAAGtF,WACHA,EAGjB,CANM,GASX,MAAMqgF,GAAW,OAAKzpF,IAChB,MAAEU,EAAK,KAAEwrB,GAASu9D,EAASjiF,OACjC,IAAa,IAAT0kB,EACA,OAAQ,YAAe,CAAhB,GAEX,MAAM7U,EAAM3I,EAAGhO,GAEf,GAAwB,mBAAb2W,EAAIqP,KACX,OAAO,wBACOrP,UACA3W,GAEV,UAAW,MAAM0I,KAASqgF,QACZ/6E,EAAGtF,WACHA,EAGjB,CATM,GAWX,MAAMsgF,EAAOh7E,EACb,OAAO,aACS,IAAR2I,UACM3W,GAEV,IAAK,MAAM0I,KAASqgF,EACZC,EAAKtgF,WACCA,EAGjB,CATM,EAUX,EC1BA,MAhBA,SAAapJ,GACT,GAHsC,MAGlBA,EAHP3H,OAAOuQ,eAIhB,MAAO,WACH,MAAMlM,EAAM,GACZ,UAAW,MAAM0M,KAASpJ,EACtBtD,EAAInD,KAAK6P,GAEb,OAAO1M,CACV,EANM,GAQX,MAAMA,EAAM,GACZ,IAAK,MAAM0M,KAASpJ,EAChBtD,EAAInD,KAAK6P,GAEb,OAAO1M,CACX,ECFA,MAZA,SAAcsD,EAAQgqG,GAClB,OAHsC,MAGlBhqG,EAHP3H,OAAOuQ,eAIT,kBACH,MAAMlM,QAAY,EAAIsD,SACftD,EAAIwpC,KAAK8jE,EACnB,CAHM,GAKJ,YACH,MAAMttG,EAAM,EAAIsD,SACTtD,EAAIwpC,KAAK8jE,EACnB,CAHM,EAIX,ECkBA,MA9BA,SAAchqG,EAAQoH,GAClB,OAHsC,MAGlBpH,EAHP3H,OAAOuQ,eAIT,kBACH,IAAIL,EAAQ,EACZ,KAAInB,EAAQ,GAGZ,UAAW,MAAMgC,KAASpJ,EAGtB,SAFMoJ,EACNb,IACIA,IAAUnB,EACV,MAGX,CAZM,GAcJ,YACH,IAAImB,EAAQ,EACZ,KAAInB,EAAQ,GAGZ,IAAK,MAAMgC,KAASpJ,EAGhB,SAFMoJ,EACNb,IACIA,IAAUnB,EACV,MAGX,CAZM,EAaX,EC5BO,MAAM6iG,EACTtmG,IAAIC,EAAK0R,EAAKzR,GACV,OAAO8D,QAAQE,OAAO,IAAIzN,MAAM,2BACpC,CACAoI,IAAIoB,EAAKC,GACL,OAAO8D,QAAQE,OAAO,IAAIzN,MAAM,2BACpC,CACA4X,IAAIpO,EAAKC,GACL,OAAO8D,QAAQE,OAAO,IAAIzN,MAAM,2BACpC,CACAwU,OAAOhL,EAAKC,GACR,OAAO8D,QAAQE,OAAO,IAAIzN,MAAM,8BACpC,CACA0F,cAAeE,EAAQ6D,EAAU,CAAC,GAC9B,UAAW,MAAM,IAAED,EAAG,MAAElD,KAAWV,QACzB6B,KAAK8B,IAAIC,EAAKlD,EAAOmD,SACrBD,CAEd,CACA9D,cAAeE,EAAQ6D,EAAU,CAAC,GAC9B,UAAW,MAAMD,KAAO5D,OACd,CACF4D,MACAlD,YAAamB,KAAKW,IAAIoB,EAAKC,GAGvC,CACA/D,iBAAkBE,EAAQ6D,EAAU,CAAC,GACjC,UAAW,MAAMD,KAAO5D,QACd6B,KAAK+M,OAAOhL,EAAKC,SACjBD,CAEd,CACAwI,QACI,IAAI89F,EAAO,GACPC,EAAO,GACX,MAAO,CACHxmG,IAAIC,EAAKlD,GACLwpG,EAAK3wG,KAAK,CAAEqK,MAAKlD,SACrB,EACAkO,OAAOhL,GACHumG,EAAK5wG,KAAKqK,EACd,EACA2f,OAAQzjB,MAAO+D,UACL,EAAMhC,KAAKuoG,QAAQF,EAAMrmG,IAC/BqmG,EAAO,SACD,EAAMroG,KAAKwoG,WAAWF,EAAMtmG,IAClCsmG,EAAO,EAAE,EAGrB,CAKArqG,WAAY21B,EAAG5xB,GACX,MAAM,IAAIzJ,MAAM,2BACpB,CAKA0F,eAAgB21B,EAAG5xB,GACf,MAAM,IAAIzJ,MAAM,+BACpB,CACA6qC,MAAMxP,EAAG5xB,GACL,IAAI44B,EAAK56B,KAAKwG,KAAKotB,EAAG5xB,GACtB,GAAgB,MAAZ4xB,EAAErlB,OAAgB,CAClB,MAAMA,EAASqlB,EAAErlB,OACjBqsB,EAAK,EAAOA,GAAKrkB,GAAMA,EAAExU,IAAI0Q,WAAW+zB,WAAWj4B,IACvD,CAOA,GANI3V,MAAM+S,QAAQioB,EAAE60E,WAChB7tE,EAAKhH,EAAE60E,QAAQ/hF,QAAO,CAACkU,EAAInI,IAAM,EAAOmI,EAAInI,IAAImI,IAEhDhiC,MAAM+S,QAAQioB,EAAE80E,UAChB9tE,EAAKhH,EAAE80E,OAAOhiF,QAAO,CAACkU,EAAInI,IAAM,EAAKmI,EAAInI,IAAImI,IAEjC,MAAZhH,EAAE18B,OAAgB,CAClB,IAAIoE,EAAI,EACR,MAAMpE,EAAS08B,EAAE18B,OACjB0jC,EAAK,EAAOA,GAAI,IAAMt/B,KAAOpE,GACjC,CAIA,OAHe,MAAX08B,EAAEruB,QACFq1B,EAAK,EAAKA,EAAIhH,EAAEruB,QAEbq1B,CACX,CACA+tE,UAAU/0E,EAAG5xB,GACT,IAAI44B,EAAK56B,KAAK4oG,SAASh1E,EAAG5xB,GAC1B,GAAgB,MAAZ4xB,EAAErlB,OAAgB,CAClB,MAAMA,EAASqlB,EAAErlB,OACjBqsB,EAAK,EAAOA,GAAK74B,GAAQA,EAAI0Q,WAAW+zB,WAAWj4B,IACvD,CAOA,GANI3V,MAAM+S,QAAQioB,EAAE60E,WAChB7tE,EAAKhH,EAAE60E,QAAQ/hF,QAAO,CAACkU,EAAInI,IAAM,EAAOmI,EAAInI,IAAImI,IAEhDhiC,MAAM+S,QAAQioB,EAAE80E,UAChB9tE,EAAKhH,EAAE80E,OAAOhiF,QAAO,CAACkU,EAAInI,IAAM,EAAKmI,EAAInI,IAAImI,IAEjC,MAAZhH,EAAE18B,OAAgB,CAClB,MAAMA,EAAS08B,EAAE18B,OACjB,IAAIoE,EAAI,EACRs/B,EAAK,EAAOA,GAAI,IAAMt/B,KAAOpE,GACjC,CAIA,OAHe,MAAX08B,EAAEruB,QACFq1B,EAAK,EAAKA,EAAIhH,EAAEruB,QAEbq1B,CACX,0SC/GG,SAASiuE,EAAkB3mG,GAE9B,OADAA,EAAMA,GAAO,IAAI3J,MAAM,wBAChB,EAAQ2J,EAAK,qBACxB,CACO,SAAS4mG,EAAoB5mG,GAEhC,OADAA,EAAMA,GAAO,IAAI3J,MAAM,iBAChB,EAAQ2J,EAAK,uBACxB,CACO,SAAS6mG,EAAmB7mG,GAE/B,OADAA,EAAMA,GAAO,IAAI3J,MAAM,gBAChB,EAAQ2J,EAAK,sBACxB,CACO,SAAS8mG,EAAkB9mG,GAE9B,OADAA,EAAMA,GAAO,IAAI3J,MAAM,eAChB,EAAQ2J,EAAK,qBACxB,CACO,SAAS68F,EAAc78F,GAE1B,OADAA,EAAMA,GAAO,IAAI3J,MAAM,aAChB,EAAQ2J,EAAK,gBACxB,CACO,SAAS88F,EAAa98F,GAEzB,OADAA,EAAMA,GAAO,IAAI3J,MAAM,WAChB,EAAQ2J,EAAK,cACxB,iUCrBO,MAAM+mG,UAAwB,IACjC72F,KACAtS,cACIoH,QACAlH,KAAKoS,KAAO,IAAI5C,GACpB,CACA1N,IAAIC,EAAK0R,GAEL,OADAzT,KAAKoS,KAAKvW,IAAIkG,EAAI0Q,WAAYgB,GACvB1R,CACX,CACApB,IAAIoB,GACA,MAAM8M,EAAS7O,KAAKoS,KAAKzR,IAAIoB,EAAI0Q,YACjC,GAAc,MAAV5D,EACA,MAAM,kBAEV,OAAOA,CACX,CACAsB,IAAIpO,GACA,OAAO/B,KAAKoS,KAAKjC,IAAIpO,EAAI0Q,WAC7B,CACA1F,OAAOhL,GACH/B,KAAKoS,KAAKrF,OAAOhL,EAAI0Q,WACzB,CACA,QACI,IAAK,MAAO1Q,EAAKlD,KAAUmB,KAAKoS,KAAK9K,eAC3B,CAAEvF,IAAK,IAAI,IAAIA,GAAMlD,QAEnC,CACA,YACI,IAAK,MAAMkD,KAAO/B,KAAKoS,KAAKjL,aAClB,IAAI,IAAIpF,EAEtB,iIChCJ,MAAMmnG,EAAW,IACXC,GAAW,IAAIr7F,aAAclL,OAAOsmG,GACpCE,EAAUD,EAAS,GAiBlB,MAAME,EAKTvpG,YAAYukB,EAAGilF,GACX,GAAiB,iBAANjlF,EACPrkB,KAAK2kG,MAAO,OAAqBtgF,OAEhC,MAAIA,aAAa7pB,YAIlB,MAAM,IAAIjC,MAAM,+CAHhByH,KAAK2kG,KAAOtgF,CAIhB,CAOA,GANa,MAATilF,IACAA,GAAQ,GAERA,GACAtpG,KAAKspG,QAEoB,IAAzBtpG,KAAK2kG,KAAK/1F,YAAoB5O,KAAK2kG,KAAK,KAAOyE,EAC/C,MAAM,IAAI7wG,MAAM,cAExB,CAOAka,SAAShI,EAAW,QAChB,OAAO,OAAmBzK,KAAK2kG,KAAMl6F,EACzC,CAMA8+F,aACI,OAAOvpG,KAAK2kG,IAChB,CAMYpxE,IAAP/8B,OAAO+8B,eACR,MAAO,OAAOvzB,KAAKyS,aACvB,CAaAzE,sBAAsBgJ,GAClB,OAAO,IAAIqyF,EAAIryF,EAAKrf,KAAKuxG,GAC7B,CAYAl7F,gBACI,OAAO,IAAIq7F,GAAI,UAAS5oG,QAAQ,KAAM,IAC1C,CAIAuN,aAAa4/D,GACT,OAAIA,aAAiBpzE,YAA+B,iBAAVozE,EAE/B,IAAIy7B,EAAIz7B,GAEa,mBAArBA,EAAM27B,WAEN,IAAIF,EAAIz7B,EAAM27B,cAElB,IACX,CAMAD,QAII,GAHiB,MAAbtpG,KAAK2kG,MAAyC,IAAzB3kG,KAAK2kG,KAAK/1F,aAC/B5O,KAAK2kG,KAAOwE,GAEZnpG,KAAK2kG,KAAK,KAAOyE,EAAS,CAC1B,MAAMjxF,EAAQ,IAAI3d,WAAWwF,KAAK2kG,KAAK/1F,WAAa,GACpDuJ,EAAMrM,KAAKs9F,EAAS,EAAG,GACvBjxF,EAAMtc,IAAImE,KAAK2kG,KAAM,GACrB3kG,KAAK2kG,KAAOxsF,CAChB,CAEA,KAAOnY,KAAK2kG,KAAK/1F,WAAa,GAAK5O,KAAK2kG,KAAK3kG,KAAK2kG,KAAK/1F,WAAa,KAAOw6F,GACvEppG,KAAK2kG,KAAO3kG,KAAK2kG,KAAKrtG,SAAS,GAAI,EAE3C,CAOAkyG,KAAKznG,GACD,MAAM0nG,EAAQzpG,KAAKgX,OACb0yF,EAAQ3nG,EAAIiV,OAClB,IAAK,IAAI1b,EAAI,EAAGA,EAAImuG,EAAMxyG,OAAQqE,IAAK,CACnC,GAAIouG,EAAMzyG,OAASqE,EAAI,EACnB,OAAO,EAEX,MAAMquG,EAAKF,EAAMnuG,GACXsuG,EAAKF,EAAMpuG,GACjB,GAAIquG,EAAKC,EACL,OAAO,EAEN,GAAID,EAAKC,EACV,OAAO,CAEf,CACA,OAAOH,EAAMxyG,OAASyyG,EAAMzyG,MAChC,CAYAmZ,UACI,OAAOi5F,EAAIQ,eAAe7pG,KAAKgX,OAAOle,QAAQsX,UAClD,CAMA05F,aACI,OAAO9pG,KAAKgX,MAChB,CAWA+yF,gBACI,MAAM9xB,EAAKj4E,KAAK8pG,aAChB,OAAO7xB,EAAGA,EAAGhhF,OAAS,EAC1B,CAYA+f,OACI,OAAOhX,KAAKyS,WAAWxT,MAAMiqG,GAAUpwG,MAAM,EACjD,CAYAiK,OACI,OAsJR,SAAuBk1E,GACnB,MAAM1gF,EAAQ0gF,EAAGh5E,MAAM,KACvB,GAAI1H,EAAMN,OAAS,EACf,MAAO,GAEX,OAAOM,EAAMuB,MAAM,GAAI,GAAGnB,KAAK,IACnC,CA5JeqyG,CAAchqG,KAAK+pG,gBAC9B,CAYA1qG,OACI,OAqJR,SAAwB44E,GACpB,MAAM1gF,EAAQ0gF,EAAGh5E,MAAM,KACvB,OAAO1H,EAAMA,EAAMN,OAAS,EAChC,CAxJegzG,CAAejqG,KAAK+pG,gBAC/B,CAaA3wG,SAASirB,GACL,OAAO,IAAIglF,EAAIrpG,KAAKyS,WAAa,IAAM4R,EAC3C,CAYAiC,OACI,IAAI/qB,EAAIyE,KAAKmO,SAASsE,WAKtB,OAJKlX,EAAEkiD,SAASyrD,KACZ3tG,GAAK2tG,GAET3tG,GAAKyE,KAAK+C,OACH,IAAIsmG,EAAI9tG,EACnB,CAYA4S,SACI,MAAM6I,EAAOhX,KAAKgX,OAClB,OAAoB,IAAhBA,EAAK/f,OACE,IAAIoyG,EAAIH,GAEZ,IAAIG,EAAIryF,EAAKle,MAAM,GAAI,GAAGnB,KAAKuxG,GAC1C,CAaA5zD,MAAMvzC,GACF,OAAI/B,KAAKyS,aAAey2F,EACbnnG,EAEFA,EAAI0Q,aAAey2F,EACjBlpG,KAEJ,IAAIqpG,EAAIrpG,KAAKyS,WAAa1Q,EAAI0Q,YAAY,EACrD,CAaAy3F,aAAat8B,GACT,OAAIA,EAAMn7D,aAAezS,KAAKyS,YAGvBm7D,EAAMn7D,WAAW+zB,WAAWxmC,KAAKyS,WAC5C,CAaA03F,cAAcv8B,GACV,OAAIA,EAAMn7D,aAAezS,KAAKyS,YAGvBzS,KAAKyS,WAAW+zB,WAAWonC,EAAMn7D,WAC5C,CAOA23F,aACI,OAA8B,IAAvBpqG,KAAKgX,OAAO/f,MACvB,CAOA6X,UAAU3H,GACN,OAAOkiG,EAAIQ,eAAe,IAAI7pG,KAAK8pG,iBAiC1BjvG,EAjCmDsM,EAAK4I,KAAIhO,GAAOA,EAAI+nG,eAkC7E,GAAKh7F,UAAUjU,MAD1B,IAAiBA,CAhCb,iBC7TJ,MA1CA,SAAgBsD,EAAQ0O,GACpB,GAHsC,MAGlB1O,EAHP3H,OAAOuQ,eAIhB,OAAO,kBACH,UAAW,MAAMQ,KAASpJ,QACZ0O,EAAGtF,WACHA,EAGjB,CANM,GASX,MAAMqgF,GAAW,OAAKzpF,IAChB,MAAEU,EAAK,KAAEwrB,GAASu9D,EAASjiF,OACjC,IAAa,IAAT0kB,EACA,OAAQ,YAAe,CAAhB,GAEX,MAAM7U,EAAM3I,EAAGhO,GAEf,GAAwB,mBAAb2W,EAAIqP,KACX,OAAO,wBACOrP,UACA3W,GAEV,UAAW,MAAM0I,KAASqgF,QACZ/6E,EAAGtF,WACHA,EAGjB,CATM,GAWX,MAAMsgF,EAAOh7E,EACb,OAAO,aACS,IAAR2I,UACM3W,GAEV,IAAK,MAAM0I,KAASqgF,EACZC,EAAKtgF,WACCA,EAGjB,CATM,EAUX,EC1BA,MAhBA,SAAapJ,GACT,GAHsC,MAGlBA,EAHP3H,OAAOuQ,eAIhB,MAAO,WACH,MAAMlM,EAAM,GACZ,UAAW,MAAM0M,KAASpJ,EACtBtD,EAAInD,KAAK6P,GAEb,OAAO1M,CACV,EANM,GAQX,MAAMA,EAAM,GACZ,IAAK,MAAM0M,KAASpJ,EAChBtD,EAAInD,KAAK6P,GAEb,OAAO1M,CACX,ECFA,MAZA,SAAcsD,EAAQgqG,GAClB,OAHsC,MAGlBhqG,EAHP3H,OAAOuQ,eAIT,kBACH,MAAMlM,QAAY,EAAIsD,SACftD,EAAIwpC,KAAK8jE,EACnB,CAHM,GAKJ,YACH,MAAMttG,EAAM,EAAIsD,SACTtD,EAAIwpC,KAAK8jE,EACnB,CAHM,EAIX,ECVO,MAAMkC,UAAqB,KAC9BnqF,SACAE,QACA1e,GACA5B,YAAYogB,EAAUsN,EAAO,CAAC,GAC1BtmB,QACAlH,KAAKkgB,SAAW,GAAGsN,EAAKjf,QAAU,KAAK2R,IACvClgB,KAAKogB,QAAUoN,EAAKpN,SAAW,CACnC,CACAniB,aACI,IACI,MAAMiiB,EAAWlgB,KAAKkgB,SACtBlgB,KAAK0B,SAAW,QAAOwe,EAAUlgB,KAAKogB,QAAS,CAC3CssB,QAAQhrC,GACJA,EAAGof,kBAAkBZ,EACzB,GAER,CACA,MAAOhe,GACH,MAAM,uBAAyBA,EACnC,CACJ,CACAjE,cACI+B,KAAK0B,IAAI4B,OACb,CACArF,UAAU8D,EAAK0R,GACX,GAAe,MAAXzT,KAAK0B,GACL,MAAM,IAAInJ,MAAM,iCAEpB,IAEI,aADMyH,KAAK0B,GAAGI,IAAI9B,KAAKkgB,SAAUzM,EAAK1R,EAAI0Q,YACnC1Q,CACX,CACA,MAAOG,GACH,MAAM,wBAA0BA,EACpC,CACJ,CACAjE,UAAU8D,GACN,GAAe,MAAX/B,KAAK0B,GACL,MAAM,IAAInJ,MAAM,iCAEpB,IAAIkb,EACJ,IACIA,QAAYzT,KAAK0B,GAAGf,IAAIX,KAAKkgB,SAAUne,EAAI0Q,WAC/C,CACA,MAAOvQ,GACH,MAAM,uBAAyBA,EACnC,CACA,QAAY2D,IAAR4N,EACA,MAAM,qBAEV,OAAOA,CACX,CACAxV,UAAU8D,GACN,GAAe,MAAX/B,KAAK0B,GACL,MAAM,IAAInJ,MAAM,kCAEpB,IACI,OAAO2rB,cAAclkB,KAAK0B,GAAG09F,OAAOp/F,KAAKkgB,SAAUne,EAAI0Q,YAC3D,CACA,MAAOvQ,GACH,MAAM,uBAAyBA,EACnC,CACJ,CACAjE,aAAa8D,GACT,GAAe,MAAX/B,KAAK0B,GACL,MAAM,IAAInJ,MAAM,iCAEpB,UACUyH,KAAK0B,GAAGqL,OAAO/M,KAAKkgB,SAAUne,EAAI0Q,WAC5C,CACA,MAAOvQ,GACH,MAAM,wBAA0BA,EACpC,CACJ,CACAqI,QACI,MAAM89F,EAAO,GACPC,EAAO,GACb,MAAO,CACHxmG,IAAIC,EAAKlD,GACLwpG,EAAK3wG,KAAK,CAAEqK,MAAKlD,SACrB,EACAkO,OAAOhL,GACHumG,EAAK5wG,KAAKqK,EACd,EACA2f,OAAQzjB,UACJ,GAAe,MAAX+B,KAAK0B,GACL,MAAM,IAAInJ,MAAM,iCAEpB,MAAM+xG,EAAKtqG,KAAK0B,GAAGsf,YAAYhhB,KAAKkgB,SAAU,aAC9C,IACI,MAAMqqF,EAAMlC,EAAKr7F,QAAO,EAAGjL,SAE6C,MAA7DumG,EAAK5pB,MAAK8rB,GAAUA,EAAO/3F,aAAe1Q,EAAI0Q,eAEpD1C,KAAIjO,GACE7D,gBACGqsG,EAAGjpF,MAAMvf,IAAIA,EAAIjD,MAAOiD,EAAIC,IAAI0Q,WAAW,IAGpD3D,OAAOw5F,EAAKv4F,KAAIhO,GACV9D,gBACGqsG,EAAGjpF,MAAMtU,OAAOhL,EAAI0Q,WAAW,KAGxC3D,QAAO7Q,gBACFqsG,EAAGjgF,IAAI,UAEXvkB,QAAQS,IAAIgkG,EAAIx6F,KAAI9R,MAAOkO,UAAeA,GAAI,IACxD,CACA,MACIm+F,EAAGpyG,OACP,GAGZ,CACA+F,YAAa21B,GACT,IAAIgH,EAAK56B,MAAK,EAAS4zB,GAAG,CAAC7xB,EAAKlD,KACrB,CAAEkD,MAAKlD,YAEdjG,MAAM+S,QAAQioB,EAAE60E,WAChB7tE,EAAKhH,EAAE60E,QAAQ/hF,QAAO,CAACkU,EAAInI,IAAM,EAAOmI,EAAInI,IAAImI,IAEhDhiC,MAAM+S,QAAQioB,EAAE80E,UAChB9tE,EAAKhH,EAAE80E,OAAOhiF,QAAO,CAACkU,EAAInI,IAAM,EAAKmI,EAAInI,IAAImI,UAE1CA,CACX,CACA38B,gBAAiB21B,GACb,IAAIgH,EAAK56B,MAAK,EAAS4zB,GAAI7xB,GAAQA,IAC/BnJ,MAAM+S,QAAQioB,EAAE60E,WAChB7tE,EAAKhH,EAAE60E,QAAQ/hF,QAAO,CAACkU,EAAInI,IAAM,EAAOmI,EAAInI,IAAImI,IAEhDhiC,MAAM+S,QAAQioB,EAAE80E,UAChB9tE,EAAKhH,EAAE80E,OAAOhiF,QAAO,CAACkU,EAAInI,IAAM,EAAKmI,EAAInI,IAAImI,UAE1CA,CACX,CACA38B,SAAgB21B,EAAG62E,GACf,GAAe,MAAXzqG,KAAK0B,GACL,MAAM,IAAInJ,MAAM,iCAEpB,IAAImyG,EAAU,EACVlpF,GAAS,EACb,IAAK,MAAMzf,WAAa/B,KAAK0B,GAAG+gB,WAAWziB,KAAKkgB,UAAW,CACvD,GAAgB,MAAZ0T,EAAErlB,SAAmBxM,EAAI0Q,WAAW+zB,WAAW5S,EAAErlB,QACjD,SAEJ,GAAe,MAAXqlB,EAAEruB,OAAiBmlG,IAAY92E,EAAEruB,MACjC,OAGJ,GADAic,IACgB,MAAZoS,EAAE18B,QAAkBsqB,EAAQoS,EAAE18B,OAC9B,SAEJ,MAAM0Q,EAAI,IAAIyhG,EAAItnG,EAAI0Q,YACtB,IAAI5T,EACJ,IACIA,QAAcmB,KAAKW,IAAIiH,EAC3B,CACA,MAAO1F,GACH,GAAiB,kBAAbA,EAAID,KACJ,MAAMC,EAEV,QACJ,CACa,MAATrD,UAGE4rG,EAAU7iG,EAAG/I,GACnB6rG,IACJ,CACJ,CACAzsG,sBACU,QAAS+B,KAAKkgB,SACxB,wGC1KG,MACMyqF,EAAc,WCCpB,MAAM,EAAU,CAAC/gF,EAAUu+E,IACzB,kBACL,MAAMxsG,QCXKsC,eAAmBE,GAC9B,MAAMtD,EAAM,GACZ,UAAW,MAAM0M,KAASpJ,EACtBtD,EAAInD,KAAK6P,GAEb,OAAO1M,CACX,CDKyB,CAAI+uB,SACjBjuB,EAAO0oC,KAAK8jE,EACrB,CAHM,wCEUF,MAAM,EAIX/9F,OACE,OAAOtE,QAAQE,OAAO,IAAIzN,MAAM,4BAClC,CAKA+K,QACE,OAAOwC,QAAQE,OAAO,IAAIzN,MAAM,6BAClC,CAQAuJ,IAAKC,EAAK0R,EAAKzR,GACb,OAAO8D,QAAQE,OAAO,IAAIzN,MAAM,2BAClC,CAOAoI,IAAKoB,EAAKC,GACR,OAAO8D,QAAQE,OAAO,IAAIzN,MAAM,2BAClC,CAOA4X,IAAKpO,EAAKC,GACR,OAAO8D,QAAQE,OAAO,IAAIzN,MAAM,2BAClC,CAOAwU,OAAQhL,EAAKC,GACX,OAAO8D,QAAQE,OAAO,IAAIzN,MAAM,8BAClC,CAOA0F,cAAiBE,EAAQ6D,EAAU,CAAC,GAClC,UAAW,MAAM,IAAED,EAAG,MAAElD,KAAWV,QAC3B6B,KAAK8B,IAAIC,EAAKlD,EAAOmD,QACrB,CAAED,MAAKlD,QAEjB,CAOAZ,cAAiBE,EAAQ6D,EAAU,CAAC,GAClC,UAAW,MAAMD,KAAO5D,QAChB6B,KAAKW,IAAIoB,EAAKC,EAExB,CAOA/D,iBAAoBE,EAAQ6D,EAAU,CAAC,GACrC,UAAW,MAAMD,KAAO5D,QAChB6B,KAAK+M,OAAOhL,EAAKC,SACjBD,CAEV,CAKAwI,QAEE,IAAI89F,EAAO,GAEPC,EAAO,GAEX,MAAO,CACLxmG,IAAKC,EAAKlD,GACRwpG,EAAK3wG,KAAK,CAAEqK,MAAKlD,SACnB,EAEAkO,OAAQhL,GACNumG,EAAK5wG,KAAKqK,EACZ,EACA2f,OAAQzjB,MAAO+D,UACP,OAAMhC,KAAKuoG,QAAQF,EAAMrmG,IAC/BqmG,EAAO,SACD,OAAMroG,KAAKwoG,WAAWF,EAAMtmG,IAClCsmG,EAAO,EAAC,EAGd,CAUArqG,WAAc21B,EAAG5xB,GACf,MAAM,IAAIzJ,MAAM,2BAClB,CAUA0F,eAAkB21B,EAAG5xB,GACnB,MAAM,IAAIzJ,MAAM,+BAClB,CAMA6qC,MAAOxP,EAAG5xB,GACR,IAAI44B,EAAK56B,KAAKwG,KAAKotB,EAAG5xB,GAgBtB,GAdgB,MAAZ4xB,EAAErlB,SACJqsB,GAAK,OAAOA,GAAKrkB,GACfA,EAAExU,IAAI0Q,WAAW+zB,WAAkC5S,EAAQ,WAI3Dh7B,MAAM+S,QAAQioB,EAAE60E,WAClB7tE,EAAKhH,EAAE60E,QAAQ/hF,QAAO,CAACkU,EAAInI,KAAM,OAAOmI,EAAInI,IAAImI,IAG9ChiC,MAAM+S,QAAQioB,EAAE80E,UAClB9tE,EAAKhH,EAAE80E,OAAOhiF,QAAO,CAACkU,EAAInI,IAAM,EAAQmI,EAAInI,IAAImI,IAGlC,MAAZhH,EAAE18B,OAAgB,CACpB,IAAIoE,EAAI,EACRs/B,GAAK,OAAOA,GAAI,IAAMt/B,KAA8Bs4B,EAAQ,QAC9D,CAMA,OAJe,MAAXA,EAAEruB,QACJq1B,GAAK,OAAKA,EAAIhH,EAAEruB,QAGXq1B,CACT,CAMA+tE,UAAW/0E,EAAG5xB,GACZ,IAAI44B,EAAK56B,KAAK4oG,SAASh1E,EAAG5xB,GAgB1B,GAdgB,MAAZ4xB,EAAErlB,SACJqsB,GAAK,OAAOA,GAAK74B,GACfA,EAAI0Q,WAAW+zB,WAAkC5S,EAAQ,WAIzDh7B,MAAM+S,QAAQioB,EAAE60E,WAClB7tE,EAAKhH,EAAE60E,QAAQ/hF,QAAO,CAACkU,EAAInI,KAAM,OAAOmI,EAAInI,IAAImI,IAG9ChiC,MAAM+S,QAAQioB,EAAE80E,UAClB9tE,EAAKhH,EAAE80E,OAAOhiF,QAAO,CAACkU,EAAInI,IAAM,EAAQmI,EAAInI,IAAImI,IAGlC,MAAZhH,EAAE18B,OAAgB,CACpB,IAAIoE,EAAI,EACRs/B,GAAK,OAAOA,GAAI,IAAMt/B,KAA8Bs4B,EAAQ,QAC9D,CAMA,OAJe,MAAXA,EAAEruB,QACJq1B,GAAK,OAAKA,EAAIhH,EAAEruB,QAGXq1B,CACT,ECrNe,IAAI,IAAI+vE,GACF,IAAI,IJAF,2BKNb,QAAO,8DCEnB,MAAMrsB,EAAY,WAKX,SAASssB,EAAc7vG,GAC5B,OAAO,OAAmBA,EAAK,SACjC,CAOO,SAAS8vG,EAAY9oG,IAGP,iBAARA,GAAoBA,aAAe5K,UAC5C4K,GAAM,OAAqBA,EAAI0Q,aAGjC,MAAMq4F,GAAS,OAAmB/oG,EAAK,aAEvC,MAAO,GAAGu8E,IAAYwsB,GACxB,gBCzBA,MAAM,GAAM,QAAO,8BAWZ,MAAMC,UAAwB,EAYnCjrG,YAAakrG,EAAQC,EAAW52B,EAAQt+B,EAAWm1D,EAAUC,GAG3D,GAFAjkG,SAEK6uC,EACH,MAAM,IAAI,IAAU,oBAAqB,0BAG3C,GAAyB,mBAAdA,EACT,MAAM,IAAI,IAAU,4BAA6B,0BAGnD,GAAwB,mBAAbm1D,EACT,MAAM,IAAI,IAAU,0BAA2B,0BAGjD,GAAIC,GAAkD,mBAAtBA,EAC9B,MAAM,IAAI,IAAU,qCAAsC,0BAG5DnrG,KAAKorG,QAAUJ,EACfhrG,KAAKqrG,WAAaJ,EAClBjrG,KAAKsrG,QAAUj3B,EACfr0E,KAAKurG,WAAax1D,EAClB/1C,KAAKwrG,UAAYN,EACjBlrG,KAAKyrG,yBAA2BN,EAGhCnrG,KAAK0rG,WAAa1rG,KAAK0rG,WAAWtvG,KAAK4D,MACvCA,KAAKorG,QAAQ/rF,iBAAiB,UAAWrf,KAAK0rG,WAChD,CAUAztG,UAAW8D,EAAK0R,EAAKzR,GACnB,KAAMD,aAAevH,YAAa,CAChC,MAAMooD,EAAS,6CAGf,MADA,EAAInsC,MAAMmsC,GACJ,IAAI,IAAUA,EAAQ,4BAC9B,CAEA,KAAMnvC,aAAejZ,YAAa,CAChC,MAAMooD,EAAS,qCAGf,MADA,EAAInsC,MAAMmsC,GACJ,IAAI,IAAUA,EAAQ,6BAC9B,CAEA,MAAM+oD,EAAmBd,EAAW9oG,GAEpC,EAAI,2BAA2B4pG,WAGzB3rG,KAAKorG,QAAQQ,QAAQD,EAAkBl4F,EAC/C,CASAxV,UAAW8D,EAAKC,GACd,KAAMD,aAAevH,YAAa,CAChC,MAAMooD,EAAS,6CAGf,MADA,EAAInsC,MAAMmsC,GACJ,IAAI,IAAUA,EAAQ,4BAC9B,CAEA,MAAM+oD,EAAmBd,EAAW9oG,GAC9BygE,QAAsBxiE,KAAKorG,QAAQS,YAGzC,GAAIrpC,GAAiB5pE,MAAM+S,QAAQ62D,IAAkBA,EAAcjjE,QAAQosG,IAAqB,EAC9F,OAAO3rG,KAAK8rG,UAAU/pG,EAAKC,GAI7B,UACQhC,KAAKorG,QAAQppE,UAAU2pE,EAC/B,CAAE,MAA0BzpG,GAC1B,MAAM0gD,EAAS,0BAA0B+oD,IAGzC,MADA,EAAIl1F,MAAMmsC,GACJ,IAAI,IAAUA,EAAQ,wBAC9B,CAGA,OAFA,EAAI,6BAA6B+oD,KAE1B3rG,KAAK8rG,UAAU/pG,EACxB,CAQAi/B,YAAaj/B,GACX,MAAM4pG,EAAmBd,EAAW9oG,GAEpC,OAAO/B,KAAKorG,QAAQpqE,YAAY2qE,EAClC,CASA1tG,gBAAiB8D,EAAKC,GAEpB,MAAM+pG,EAAa,IAAI,IAAI,IAAMnB,EAAa7oG,IAAM,GACpD,IAAIiqG,EAEJ,IACEA,QAAchsG,KAAKqrG,WAAW1qG,IAAIorG,EAAY/pG,EAChD,CAAE,MAA0BE,GAC1B,GAAiB,kBAAbA,EAAID,KAA0B,CAChC,MAAM2gD,EAAS,gDAAgDmpD,EAAWt5F,aAG1E,MADA,EAAIgE,MAAMmsC,GACJ,IAAI,IAAUA,EAAQ,sCAC9B,CACA,MAAMA,EAAS,4CAA4CmpD,EAAWt5F,aAGtE,MADA,EAAIgE,MAAMmsC,GACJ,IAAI,IAAUA,EAAQ,gBAC9B,CAEA,KAAMopD,aAAiBxxG,YAAa,CAClC,MAAMooD,EAAS,mDAGf,MADA,EAAInsC,MAAMmsC,GACJ,IAAI,IAAUA,EAAQ,8BAC9B,CAEA,OAAOopD,CACT,CAOA/tG,iBAAkB26D,GAChB,MAAM36C,EAAM26C,EAAI97B,OAEhB,GAAiB,WAAb7e,EAAIlb,KAEN,YADA,EAAI0T,MAAM,6EAIZ,MAAM,KAAErE,EAAI,KAAE9C,EAAI,MAAE8zD,GAAUnlD,EAC9B,IAAIlc,EACJ,IACEA,ED3JC,SAAqBqhE,GAC1B,GAAIA,EAAM3jE,UAAU,EAAG6+E,EAAUrnF,UAAYqnF,EAC3C,MAAM,IAAI,IAAU,sCAAuC,0CAG7D,MAAMv8E,EAAMqhE,EAAM3jE,UAAU6+E,EAAUrnF,QAEtC,OAAO,OAAqB8K,EAAK,YACnC,CCmJYkqG,CAAW7oC,EACnB,CAAE,MAA0BlhE,GAE1B,YADA,EAAIuU,MAAMvU,EAEZ,CAKA,GAHA,EAAI,8BAA8BkhE,KAG9BpjE,KAAKsrG,QAAQh0F,OAAOhI,GACtB,EAAI,qDADN,CAKA,GAAItP,KAAKyrG,yBAA0B,CACjC,IAAIj2F,EAEJ,IACEA,QAAYxV,KAAKyrG,yBAAyB1pG,EAC5C,CAAE,MAA0BG,GAE1B,YADA,EAAIuU,MAAM,6CAEZ,CAEA1U,EAAMyT,CACR,CAEA,UACQxV,KAAKksG,6BAA6BnqG,EAAKqQ,EAC/C,CAAE,MAA0BlQ,GAC1B,EAAIuU,MAAMvU,EACZ,CAnBA,CAoBF,CASAjE,mCAAoC8D,EAAKqQ,EAAMpQ,GAC7C,IAAImqG,GAAW,EAEf,IACEA,QAAiBnsG,KAAKosG,UAAUrqG,EAAKqQ,EACvC,CAAE,MAA0BlQ,GAC1B,GAAiB,yBAAbA,EAAID,KACN,MAAMC,CAEV,CAEIiqG,SACInsG,KAAKqsG,aAAatqG,EAAKqQ,EAAMpQ,EAEvC,CAQA/D,sBAAuB8D,EAAKlD,GAC1B,OAAOmB,KAAKurG,WAAWxpG,EAAKlD,EAC9B,CAQAZ,oBAAqB8D,EAAKuqG,GAIxB,OAAe,UAHGtsG,KAAKwrG,UAAUzpG,EAAKuqG,EAIxC,CAQAruG,gBAAiB8D,EAAK0R,GACpB,UACQzT,KAAKusG,gBAAgBxqG,EAAK0R,EAClC,CAAE,MAA0BvR,GAE1B,MAAM0gD,EAAS,8CAGf,MADA,EAAInsC,MAAMmsC,GACJ,IAAI,IAAUA,EAAQ,uBAC9B,CAGA,MAAM4pD,EAAQ,IAAI,IAAIzqG,GACtB,IAAI0qG,EAEJ,IACEA,QAAsBzsG,KAAK8rG,UAAUU,EAAMjD,aAC7C,CAAE,MAA0BrnG,GAE1B,OAAO,CACT,CAGA,QAAI,OAAiBuqG,EAAeh5F,IAK7BzT,KAAK0sG,cAAc3qG,EAAK,CAAC0qG,EAAeh5F,GACjD,CASAxV,mBAAoB8D,EAAKqQ,EAAMpQ,GAE7B,MAAM+pG,EAAa,IAAI,IAAI,IAAMnB,EAAa7oG,IAAM,SAE9C/B,KAAKqrG,WAAWvpG,IAAIiqG,EAAY35F,EAAMpQ,GAC5C,EAAI,cAAc6oG,EAAW9oG,iCAC/B,gJCpUF,MAAM4qG,EAAejuG,OAAOC,OAAO,MACnCguG,EAAmB,KAAI,IACvBA,EAAoB,MAAI,IACxBA,EAAmB,KAAI,IACvBA,EAAmB,KAAI,IACvBA,EAAsB,QAAI,IAC1BA,EAAsB,QAAI,IAC1BA,EAAmB,KAAI,IACvB,MAAMC,EAAuBluG,OAAOC,OAAO,MAC3CD,OAAOyI,KAAKwlG,GAAcvsG,SAAQ2B,IAC9B6qG,EAAqBD,EAAa5qG,IAAQA,CAAG,IAEjD,MAAM8qG,EAAe,CAAE9pG,KAAM,QAASqP,KAAM,gBCXtC06F,EAAiC,mBAAThjF,MACT,oBAATA,MACqC,6BAAzCprB,OAAO7F,UAAU4Z,SAAS1Z,KAAK+wB,MACjCijF,EAA+C,mBAAhB17F,YA4B/B27F,EAAqB,CAAC56F,EAAM/O,KAC9B,MAAM4pG,EAAa,IAAIhiF,WAKvB,OAJAgiF,EAAWliF,OAAS,WAChB,MAAM+hE,EAAUmgB,EAAWp+F,OAAO5P,MAAM,KAAK,GAC7CoE,EAAS,KAAOypF,GAAW,IAC/B,EACOmgB,EAAWC,cAAc96F,EAAK,EAEzC,MA7BqB,EAAGrP,OAAMqP,QAAQ+6F,EAAgB9pG,KAClD,OAAIypG,GAAkB16F,aAAgB0X,KAC9BqjF,EACO9pG,EAAS+O,GAGT46F,EAAmB56F,EAAM/O,GAG/B0pG,IACJ36F,aAAgBf,cAfVW,EAegCI,EAdN,mBAAvBf,YAAYC,OACpBD,YAAYC,OAAOU,GACnBA,GAAOA,EAAIrb,kBAAkB0a,cAa3B87F,EACO9pG,EAAS+O,GAGT46F,EAAmB,IAAIljF,KAAK,CAAC1X,IAAQ/O,GAI7CA,EAASspG,EAAa5pG,IAASqP,GAAQ,KAxBnCJ,KAwBuC,EC7BtD,MAAMka,EAAQ,mEAERkhF,EAA+B,oBAAf5yG,WAA6B,GAAK,IAAIA,WAAW,KACvE,IAAK,IAAIc,EAAI,EAAGA,EAAI4wB,EAAMj1B,OAAQqE,IAC9B8xG,EAAOlhF,EAAM1wB,WAAWF,IAAMA,EAE3B,MCLD,EAA+C,mBAAhB+V,YA4B/Bg8F,EAAqB,CAACj7F,EAAMk7F,KAC9B,GAAI,EAAuB,CACvB,MAAM16B,EDTQ,CAACviE,IACnB,IAA8D/U,EAAUiyG,EAAUC,EAAUC,EAAUC,EAAlGC,EAA+B,IAAhBt9F,EAAOpZ,OAAe+E,EAAMqU,EAAOpZ,OAAWsE,EAAI,EACnC,MAA9B8U,EAAOA,EAAOpZ,OAAS,KACvB02G,IACkC,MAA9Bt9F,EAAOA,EAAOpZ,OAAS,IACvB02G,KAGR,MAAMC,EAAc,IAAIv8F,YAAYs8F,GAAex1F,EAAQ,IAAI3d,WAAWozG,GAC1E,IAAKtyG,EAAI,EAAGA,EAAIU,EAAKV,GAAK,EACtBiyG,EAAWH,EAAO/8F,EAAO7U,WAAWF,IACpCkyG,EAAWJ,EAAO/8F,EAAO7U,WAAWF,EAAI,IACxCmyG,EAAWL,EAAO/8F,EAAO7U,WAAWF,EAAI,IACxCoyG,EAAWN,EAAO/8F,EAAO7U,WAAWF,EAAI,IACxC6c,EAAM5c,KAAQgyG,GAAY,EAAMC,GAAY,EAC5Cr1F,EAAM5c,MAAoB,GAAXiyG,IAAkB,EAAMC,GAAY,EACnDt1F,EAAM5c,MAAoB,EAAXkyG,IAAiB,EAAiB,GAAXC,EAE1C,OAAOE,CAAW,ECTExmG,CAAOgL,GACvB,OAAOy7F,EAAUj7B,EAAS06B,EAC9B,CAEI,MAAO,CAAEj9F,QAAQ,EAAM+B,OAC3B,EAEEy7F,EAAY,CAACz7F,EAAMk7F,IAEZ,SADDA,GAEOl7F,aAAgBf,YAAc,IAAIyY,KAAK,CAAC1X,IAGxCA,EAGnB,MA7CqB,CAAC07F,EAAeR,KACjC,GAA6B,iBAAlBQ,EACP,MAAO,CACH/qG,KAAM,UACNqP,KAAMy7F,EAAUC,EAAeR,IAGvC,MAAMvqG,EAAO+qG,EAAcrtD,OAAO,GAClC,GAAa,MAAT19C,EACA,MAAO,CACHA,KAAM,UACNqP,KAAMi7F,EAAmBS,EAAcruG,UAAU,GAAI6tG,IAI7D,OADmBV,EAAqB7pG,GAIjC+qG,EAAc72G,OAAS,EACxB,CACE8L,KAAM6pG,EAAqB7pG,GAC3BqP,KAAM07F,EAAcruG,UAAU,IAEhC,CACEsD,KAAM6pG,EAAqB7pG,IARxB8pG,CASN,EC1BT,MAAMkB,EAAY52G,OAAOC,aAAa,mBCF/B,MAAM42G,EACW,oBAAT3kF,KACAA,KAEgB,oBAAX0I,OACLA,OAGAk8E,SAAS,cAATA,GCPR,SAASC,EAAKl8F,KAAQ4pC,GACzB,OAAOA,EAAKl1B,QAAO,CAACrgB,EAAKuB,KACjBoK,EAAIjT,eAAe6I,KACnBvB,EAAIuB,GAAKoK,EAAIpK,IAEVvB,IACR,CAAC,EACR,CAEA,MAAM8nG,EAAqB,aACrBC,EAAuB,eACtB,SAASC,EAAsBr8F,EAAK+4D,GACnCA,EAAKujC,iBACLt8F,EAAIu8F,aAAeJ,EAAmB/xG,KAAK,GAC3C4V,EAAIw8F,eAAiBJ,EAAqBhyG,KAAK,KAG/C4V,EAAIu8F,aAAe,kBAA2B,GAC9Cv8F,EAAIw8F,eAAiB,oBAA6B,GAE1D,CClBA,MAAMC,UAAuBl2G,MACzBuH,YAAY27B,EAAQszB,EAAawJ,GAC7BrxD,MAAMu0B,GACNz7B,KAAK+uD,YAAcA,EACnB/uD,KAAKu4D,QAAUA,EACfv4D,KAAK+C,KAAO,gBAChB,EAEG,MAAM2rG,UAAkB,IAO3B5uG,YAAYirE,GACR7jE,QACAlH,KAAKE,UAAW,EAChBmuG,EAAsBruG,KAAM+qE,GAC5B/qE,KAAK+qE,KAAOA,EACZ/qE,KAAKojC,MAAQ2nC,EAAK3nC,MAClBpjC,KAAK2uG,OAAS5jC,EAAK4jC,MACvB,CAUAC,QAAQnzE,EAAQszB,EAAawJ,GAEzB,OADArxD,MAAM2nG,aAAa,QAAS,IAAIJ,EAAehzE,EAAQszB,EAAawJ,IAC7Dv4D,IACX,CAIAoK,OAGI,OAFApK,KAAKquB,WAAa,UAClBruB,KAAK8uG,SACE9uG,IACX,CAIAsD,QAKI,MAJwB,YAApBtD,KAAKquB,YAAgD,SAApBruB,KAAKquB,aACtCruB,KAAK+uG,UACL/uG,KAAKgvG,WAEFhvG,IACX,CAMAsuB,KAAK2gF,GACuB,SAApBjvG,KAAKquB,YACLruB,KAAKoD,MAAM6rG,EAKnB,CAMAC,SACIlvG,KAAKquB,WAAa,OAClBruB,KAAKE,UAAW,EAChBgH,MAAM2nG,aAAa,OACvB,CAOAM,OAAO/8F,GACH,MAAMg9F,EAAS,EAAah9F,EAAMpS,KAAK2uG,OAAOrB,YAC9CttG,KAAKqvG,SAASD,EAClB,CAMAC,SAASD,GACLloG,MAAM2nG,aAAa,SAAUO,EACjC,CAMAJ,QAAQM,GACJtvG,KAAKquB,WAAa,SAClBnnB,MAAM2nG,aAAa,QAASS,EAChC,CAMAC,MAAMC,GAAW,EC9GrB,MAAM9wF,EAAW,mEAAmEzf,MAAM,IAAK,EAAS,GAAI8Q,EAAM,CAAC,EACnH,IAAqB+lC,EAAjBw7B,EAAO,EAAGh2E,EAAI,EAQX,SAAS,EAAOu2B,GACnB,IAAI+0E,EAAU,GACd,GACIA,EAAUloF,EAASmT,EAAM,GAAU+0E,EACnC/0E,EAAM54B,KAAK8kB,MAAM8T,EAAM,SAClBA,EAAM,GACf,OAAO+0E,CACX,CAqBO,SAAS6I,IACZ,MAAMxkC,EAAM,GAAQ,IAAI/xE,MACxB,OAAI+xE,IAAQn1B,GACDw7B,EAAO,EAAGx7B,EAAOm1B,GACrBA,EAAM,IAAM,EAAOqG,IAC9B,CAIA,KAAOh2E,EAAI,EAAQA,IACfyU,EAAI2O,EAASpjB,IAAMA,ECzChB,SAAS,EAAO0W,GACnB,IAAI3W,EAAM,GACV,IAAK,IAAIC,KAAK0W,EACNA,EAAIjT,eAAezD,KACfD,EAAIpE,SACJoE,GAAO,KACXA,GAAOq0G,mBAAmBp0G,GAAK,IAAMo0G,mBAAmB19F,EAAI1W,KAGpE,OAAOD,CACX,CCjBA,IAAIwD,GAAQ,EACZ,IACIA,EAAkC,oBAAnB6uB,gBACX,oBAAqB,IAAIA,cACjC,CACA,MAAOxrB,GAGP,CACO,MAAMytG,EAAU9wG,ECPhB,SAAS+wG,EAAI7kC,GAChB,MAAM8kC,EAAU9kC,EAAK8kC,QAErB,IACI,GAAI,oBAAuBniF,kBAAoBmiF,GAAWF,GACtD,OAAO,IAAIjiF,cAEnB,CACA,MAAOnX,GAAK,CACZ,IAAKs5F,EACD,IACI,OAAO,IAAI,EAAW,CAAC,UAAU/gG,OAAO,UAAUnX,KAAK,OAAM,oBACjE,CACA,MAAO4e,GAAK,CAEpB,CCVA,SAAS5L,IAAU,CACnB,MAAMmlG,EAIK,MAHK,IAAI,EAAe,CAC3BD,SAAS,IAEM3hF,aA8NhB,MAAMzB,UAAgB,IAOzB3sB,YAAY+0C,EAAKk2B,GACb7jE,QACAmnG,EAAsBruG,KAAM+qE,GAC5B/qE,KAAK+qE,KAAOA,EACZ/qE,KAAK2iB,OAASooD,EAAKpoD,QAAU,MAC7B3iB,KAAK60C,IAAMA,EACX70C,KAAK/B,OAAQ,IAAU8sE,EAAK9sE,MAC5B+B,KAAKoS,UAAOvM,IAAcklE,EAAK34D,KAAO24D,EAAK34D,KAAO,KAClDpS,KAAKrB,QACT,CAMAA,SACI,MAAMosE,EAAOmjC,EAAKluG,KAAK+qE,KAAM,QAAS,MAAO,MAAO,aAAc,OAAQ,KAAM,UAAW,qBAAsB,aACjHA,EAAK8kC,UAAY7vG,KAAK+qE,KAAKglC,GAC3BhlC,EAAKilC,UAAYhwG,KAAK+qE,KAAKklC,GAC3B,MAAMxiF,EAAOztB,KAAKytB,IAAM,IAAI,EAAes9C,GAC3C,IACIt9C,EAAIrjB,KAAKpK,KAAK2iB,OAAQ3iB,KAAK60C,IAAK70C,KAAK/B,OACrC,IACI,GAAI+B,KAAK+qE,KAAKmlC,aAAc,CACxBziF,EAAI0iF,uBAAyB1iF,EAAI0iF,uBAAsB,GACvD,IAAK,IAAI70G,KAAK0E,KAAK+qE,KAAKmlC,aAChBlwG,KAAK+qE,KAAKmlC,aAAanxG,eAAezD,IACtCmyB,EAAIU,iBAAiB7yB,EAAG0E,KAAK+qE,KAAKmlC,aAAa50G,GAG3D,CACJ,CACA,MAAOib,GAAK,CACZ,GAAI,SAAWvW,KAAK2iB,OAChB,IACI8K,EAAIU,iBAAiB,eAAgB,2BACzC,CACA,MAAO5X,GAAK,CAEhB,IACIkX,EAAIU,iBAAiB,SAAU,MACnC,CACA,MAAO5X,GAAK,CAER,oBAAqBkX,IACrBA,EAAIQ,gBAAkBjuB,KAAK+qE,KAAK98C,iBAEhCjuB,KAAK+qE,KAAKqlC,iBACV3iF,EAAIiN,QAAU16B,KAAK+qE,KAAKqlC,gBAE5B3iF,EAAIW,mBAAqB,KACjB,IAAMX,EAAIY,aAEV,MAAQZ,EAAInkB,QAAU,OAASmkB,EAAInkB,OACnCtJ,KAAKqwG,SAKLrwG,KAAKuuG,cAAa,KACdvuG,KAAK4uG,QAA8B,iBAAfnhF,EAAInkB,OAAsBmkB,EAAInkB,OAAS,EAAE,GAC9D,GACP,EAEJmkB,EAAIa,KAAKtuB,KAAKoS,KAClB,CACA,MAAOmE,GAOH,YAHAvW,KAAKuuG,cAAa,KACdvuG,KAAK4uG,QAAQr4F,EAAE,GAChB,EAEP,CACwB,oBAAb2gB,WACPl3B,KAAKwhB,MAAQiL,EAAQ6jF,gBACrB7jF,EAAQ8jF,SAASvwG,KAAKwhB,OAASxhB,KAEvC,CAMA4uG,QAAQ1sG,GACJlC,KAAK6uG,aAAa,QAAS3sG,EAAKlC,KAAKytB,KACrCztB,KAAKwwG,SAAQ,EACjB,CAMAA,QAAQC,GACJ,QAAI,IAAuBzwG,KAAKytB,KAAO,OAASztB,KAAKytB,IAArD,CAIA,GADAztB,KAAKytB,IAAIW,mBAAqBzjB,EAC1B8lG,EACA,IACIzwG,KAAKytB,IAAIv1B,OACb,CACA,MAAOqe,GAAK,CAEQ,oBAAb2gB,iBACAzK,EAAQ8jF,SAASvwG,KAAKwhB,OAEjCxhB,KAAKytB,IAAM,IAXX,CAYJ,CAMA4iF,SACI,MAAMj+F,EAAOpS,KAAKytB,IAAIM,aACT,OAAT3b,IACApS,KAAK6uG,aAAa,OAAQz8F,GAC1BpS,KAAK6uG,aAAa,WAClB7uG,KAAKwwG,UAEb,CAMAt4G,QACI8H,KAAKwwG,SACT,EASJ,GAPA/jF,EAAQ6jF,cAAgB,EACxB7jF,EAAQ8jF,SAAW,CAAC,EAMI,oBAAbr5E,SAEP,GAA2B,mBAAhBw5E,YAEPA,YAAY,WAAYC,QAEvB,GAAgC,mBAArBtxF,iBAAiC,CAE7CA,iBADyB,eAAgB,EAAa,WAAa,SAChCsxF,GAAe,EACtD,CAEJ,SAASA,IACL,IAAK,IAAIr1G,KAAKmxB,EAAQ8jF,SACd9jF,EAAQ8jF,SAASxxG,eAAezD,IAChCmxB,EAAQ8jF,SAASj1G,GAAGpD,OAGhC,CC7YO,MAAM2J,EACqC,mBAAZiE,SAAqD,mBAApBA,QAAQC,QAE/DnC,GAAOkC,QAAQC,UAAU8e,KAAKjhB,GAG/B,CAACA,EAAI2qG,IAAiBA,EAAa3qG,EAAI,GAGzCgtG,EAAY,aAAwB,2BCHjD,MAAMC,EAAqC,oBAAdryE,WACI,iBAAtBA,UAAUsyE,SACmB,gBAApCtyE,UAAUsyE,QAAQh+F,cCPf,MAAMi+F,EAAa,CACtBC,UDOG,cAAiBtC,EAOpB5uG,YAAYirE,GACR7jE,MAAM6jE,GACN/qE,KAAKmtG,gBAAkBpiC,EAAKkmC,WAChC,CACI5xG,WACA,MAAO,WACX,CACAyvG,SACI,IAAK9uG,KAAKkxG,QAEN,OAEJ,MAAMr8D,EAAM70C,KAAK60C,MACXs8D,EAAYnxG,KAAK+qE,KAAKomC,UAEtBpmC,EAAO8lC,EACP,CAAC,EACD3C,EAAKluG,KAAK+qE,KAAM,QAAS,oBAAqB,MAAO,MAAO,aAAc,OAAQ,KAAM,UAAW,qBAAsB,eAAgB,kBAAmB,SAAU,aAAc,SAAU,uBAChM/qE,KAAK+qE,KAAKmlC,eACVnlC,EAAKxgD,QAAUvqB,KAAK+qE,KAAKmlC,cAE7B,IACIlwG,KAAK+pE,GACyB8mC,EAIpB,IAAID,EAAU/7D,EAAKs8D,EAAWpmC,GAH9BomC,EACI,IAAIP,EAAU/7D,EAAKs8D,GACnB,IAAIP,EAAU/7D,EAEhC,CACA,MAAO3yC,GACH,OAAOlC,KAAK6uG,aAAa,QAAS3sG,EACtC,CACAlC,KAAK+pE,GAAGujC,WAAattG,KAAK2uG,OAAOrB,YDrCR,cCsCzBttG,KAAKoxG,mBACT,CAMAA,oBACIpxG,KAAK+pE,GAAGsnC,OAAS,KACTrxG,KAAK+qE,KAAKumC,WACVtxG,KAAK+pE,GAAGwnC,QAAQx9D,QAEpB/zC,KAAKkvG,QAAQ,EAEjBlvG,KAAK+pE,GAAGj5B,QAAW0gE,GAAexxG,KAAKgvG,QAAQ,CAC3CjgD,YAAa,8BACbwJ,QAASi5C,IAEbxxG,KAAK+pE,GAAG/1B,UAAarzB,GAAO3gB,KAAKmvG,OAAOxuF,EAAGvO,MAC3CpS,KAAK+pE,GAAGvpD,QAAWjK,GAAMvW,KAAK4uG,QAAQ,kBAAmBr4F,EAC7D,CACAnT,MAAM6rG,GACFjvG,KAAKE,UAAW,EAGhB,IAAK,IAAI5E,EAAI,EAAGA,EAAI2zG,EAAQh4G,OAAQqE,IAAK,CACrC,MAAM8zG,EAASH,EAAQ3zG,GACjBm2G,EAAan2G,IAAM2zG,EAAQh4G,OAAS,EAC1C,EAAam4G,EAAQpvG,KAAKmtG,gBAAiB/6F,IAmBvC,IAGQpS,KAAK+pE,GAAGz7C,KAAKlc,EAKrB,CACA,MAAOmE,GACP,CACIk7F,GAGA5vG,GAAS,KACL7B,KAAKE,UAAW,EAChBF,KAAK6uG,aAAa,QAAQ,GAC3B7uG,KAAKuuG,aACZ,GAER,CACJ,CACAQ,eAC2B,IAAZ/uG,KAAK+pE,KACZ/pE,KAAK+pE,GAAGzmE,QACRtD,KAAK+pE,GAAK,KAElB,CAMAl1B,MACI,IAAIzR,EAAQpjC,KAAKojC,OAAS,CAAC,EAC3B,MAAMhE,EAASp/B,KAAK+qE,KAAKkR,OAAS,MAAQ,KAC1C,IAAIr2D,EAAO,GAEP5lB,KAAK+qE,KAAKnlD,OACR,QAAUwZ,GAAqC,MAA3B/5B,OAAOrF,KAAK+qE,KAAKnlD,OAClC,OAASwZ,GAAqC,KAA3B/5B,OAAOrF,KAAK+qE,KAAKnlD,SACzCA,EAAO,IAAM5lB,KAAK+qE,KAAKnlD,MAGvB5lB,KAAK+qE,KAAK2mC,oBACVtuE,EAAMpjC,KAAK+qE,KAAK4mC,gBAAkBlC,KAGjCzvG,KAAKmtG,iBACN/pE,EAAMwuE,IAAM,GAEhB,MAAMC,EAAe,EAAOzuE,GAE5B,OAAQhE,EACJ,QAF8C,IAArCp/B,KAAK+qE,KAAK+mC,SAASvyG,QAAQ,KAG5B,IAAMS,KAAK+qE,KAAK+mC,SAAW,IAAM9xG,KAAK+qE,KAAK+mC,UACnDlsF,EACA5lB,KAAK+qE,KAAKzkD,MACTurF,EAAa56G,OAAS,IAAM46G,EAAe,GACpD,CAOAX,QACI,QAASN,CACb,GCjKAmB,QHWG,cAAsBrD,EAOzB5uG,YAAYirE,GAGR,GAFA7jE,MAAM6jE,GACN/qE,KAAK+xG,SAAU,EACS,oBAAb7xF,SAA0B,CACjC,MAAM8xF,EAAQ,WAAa9xF,SAAS86D,SACpC,IAAIp1D,EAAO1F,SAAS0F,KAEfA,IACDA,EAAOosF,EAAQ,MAAQ,MAE3BhyG,KAAK+vG,GACoB,oBAAb7vF,UACJ6qD,EAAK+mC,WAAa5xF,SAAS4xF,UAC3BlsF,IAASmlD,EAAKnlD,KACtB5lB,KAAKiwG,GAAKllC,EAAKkR,SAAW+1B,CAC9B,CAIA,MAAMf,EAAclmC,GAAQA,EAAKkmC,YACjCjxG,KAAKmtG,eAAiB2C,IAAYmB,CACtC,CACI5xG,WACA,MAAO,SACX,CAOAyvG,SACI9uG,KAAKiyG,MACT,CAOA1C,MAAMC,GACFxvG,KAAKquB,WAAa,UAClB,MAAMkhF,EAAQ,KACVvvG,KAAKquB,WAAa,SAClBmhF,GAAS,EAEb,GAAIxvG,KAAK+xG,UAAY/xG,KAAKE,SAAU,CAChC,IAAIgyG,EAAQ,EACRlyG,KAAK+xG,UACLG,IACAlyG,KAAK+K,KAAK,gBAAgB,aACpBmnG,GAAS3C,GACf,KAECvvG,KAAKE,WACNgyG,IACAlyG,KAAK+K,KAAK,SAAS,aACbmnG,GAAS3C,GACf,IAER,MAEIA,GAER,CAMA0C,OACIjyG,KAAK+xG,SAAU,EACf/xG,KAAKmyG,SACLnyG,KAAK6uG,aAAa,OACtB,CAMAM,OAAO/8F,GRpFW,EAACggG,EAAgB9E,KACnC,MAAM+E,EAAiBD,EAAenzG,MAAM8uG,GACtCkB,EAAU,GAChB,IAAK,IAAI3zG,EAAI,EAAGA,EAAI+2G,EAAep7G,OAAQqE,IAAK,CAC5C,MAAMg3G,EAAgB,EAAaD,EAAe/2G,GAAIgyG,GAEtD,GADA2B,EAAQv3G,KAAK46G,GACc,UAAvBA,EAAcvvG,KACd,KAER,CACA,OAAOksG,CAAO,EQyFVl6B,CAAc3iE,EAAMpS,KAAK2uG,OAAOrB,YAAYltG,SAd1BgvG,IAMd,GAJI,YAAcpvG,KAAKquB,YAA8B,SAAhB+gF,EAAOrsG,MACxC/C,KAAKkvG,SAGL,UAAYE,EAAOrsG,KAEnB,OADA/C,KAAKgvG,QAAQ,CAAEjgD,YAAa,oCACrB,EAGX/uD,KAAKqvG,SAASD,EAAO,IAKrB,WAAapvG,KAAKquB,aAElBruB,KAAK+xG,SAAU,EACf/xG,KAAK6uG,aAAa,gBACd,SAAW7uG,KAAKquB,YAChBruB,KAAKiyG,OAKjB,CAMAlD,UACI,MAAMzrG,EAAQ,KACVtD,KAAKoD,MAAM,CAAC,CAAEL,KAAM,UAAW,EAE/B,SAAW/C,KAAKquB,WAChB/qB,IAKAtD,KAAK+K,KAAK,OAAQzH,EAE1B,CAOAF,MAAM6rG,GACFjvG,KAAKE,UAAW,ERxJF,EAAC+uG,EAAS5rG,KAE5B,MAAMpM,EAASg4G,EAAQh4G,OACjBo7G,EAAiB,IAAIz5G,MAAM3B,GACjC,IAAIyO,EAAQ,EACZupG,EAAQ7uG,SAAQ,CAACgvG,EAAQ9zG,KAErB,EAAa8zG,GAAQ,GAAOtB,IACxBuE,EAAe/2G,GAAKwyG,IACdpoG,IAAUzO,GACZoM,EAASgvG,EAAe16G,KAAKo2G,GACjC,GACF,GACJ,EQ4IEwE,CAActD,GAAU78F,IACpBpS,KAAKwyG,QAAQpgG,GAAM,KACfpS,KAAKE,UAAW,EAChBF,KAAK6uG,aAAa,QAAQ,GAC5B,GAEV,CAMAh6D,MACI,IAAIzR,EAAQpjC,KAAKojC,OAAS,CAAC,EAC3B,MAAMhE,EAASp/B,KAAK+qE,KAAKkR,OAAS,QAAU,OAC5C,IAAIr2D,EAAO,IAEP,IAAU5lB,KAAK+qE,KAAK2mC,oBACpBtuE,EAAMpjC,KAAK+qE,KAAK4mC,gBAAkBlC,KAEjCzvG,KAAKmtG,gBAAmB/pE,EAAMqvE,MAC/BrvE,EAAMwuE,IAAM,GAGZ5xG,KAAK+qE,KAAKnlD,OACR,UAAYwZ,GAAqC,MAA3B/5B,OAAOrF,KAAK+qE,KAAKnlD,OACpC,SAAWwZ,GAAqC,KAA3B/5B,OAAOrF,KAAK+qE,KAAKnlD,SAC3CA,EAAO,IAAM5lB,KAAK+qE,KAAKnlD,MAE3B,MAAMisF,EAAe,EAAOzuE,GAE5B,OAAQhE,EACJ,QAF8C,IAArCp/B,KAAK+qE,KAAK+mC,SAASvyG,QAAQ,KAG5B,IAAMS,KAAK+qE,KAAK+mC,SAAW,IAAM9xG,KAAK+qE,KAAK+mC,UACnDlsF,EACA5lB,KAAK+qE,KAAKzkD,MACTurF,EAAa56G,OAAS,IAAM46G,EAAe,GACpD,CAOA3wF,QAAQ6pD,EAAO,CAAC,GAEZ,OADArsE,OAAOwL,OAAO6gE,EAAM,CAAEglC,GAAI/vG,KAAK+vG,GAAIE,GAAIjwG,KAAKiwG,IAAMjwG,KAAK+qE,MAChD,IAAIt+C,EAAQzsB,KAAK60C,MAAOk2B,EACnC,CAQAynC,QAAQpgG,EAAMvF,GACV,MAAMyT,EAAMtgB,KAAKkhB,QAAQ,CACrByB,OAAQ,OACRvQ,KAAMA,IAEVkO,EAAImoB,GAAG,UAAW57B,GAClByT,EAAImoB,GAAG,SAAS,CAACiqE,EAAWn6C,KACxBv4D,KAAK4uG,QAAQ,iBAAkB8D,EAAWn6C,EAAQ,GAE1D,CAMA45C,SACI,MAAM7xF,EAAMtgB,KAAKkhB,UACjBZ,EAAImoB,GAAG,OAAQzoC,KAAKmvG,OAAO/yG,KAAK4D,OAChCsgB,EAAImoB,GAAG,SAAS,CAACiqE,EAAWn6C,KACxBv4D,KAAK4uG,QAAQ,iBAAkB8D,EAAWn6C,EAAQ,IAEtDv4D,KAAK2yG,QAAUryF,CACnB,IItNEsV,EAAK,sPACLr+B,EAAQ,CACV,SAAU,WAAY,YAAa,WAAY,OAAQ,WAAY,OAAQ,OAAQ,WAAY,OAAQ,YAAa,OAAQ,QAAS,UAElI,SAAS6rB,EAAM/nB,GAClB,MAAMmjB,EAAMnjB,EAAK0W,EAAI1W,EAAIkE,QAAQ,KAAMgX,EAAIlb,EAAIkE,QAAQ,MAC7C,GAANwS,IAAiB,GAANwE,IACXlb,EAAMA,EAAIoE,UAAU,EAAGsS,GAAK1W,EAAIoE,UAAUsS,EAAGwE,GAAG9V,QAAQ,KAAM,KAAOpF,EAAIoE,UAAU8W,EAAGlb,EAAIpE,SAE9F,IAAIsc,EAAIqiB,EAAGnR,KAAKppB,GAAO,IAAKw5C,EAAM,CAAC,EAAGv5C,EAAI,GAC1C,KAAOA,KACHu5C,EAAIt9C,EAAM+D,IAAMiY,EAAEjY,IAAM,GAU5B,OARU,GAANyW,IAAiB,GAANwE,IACXs+B,EAAI12C,OAASqgB,EACbq2B,EAAI+9D,KAAO/9D,EAAI+9D,KAAKnzG,UAAU,EAAGo1C,EAAI+9D,KAAK37G,OAAS,GAAGwJ,QAAQ,KAAM,KACpEo0C,EAAIg+D,UAAYh+D,EAAIg+D,UAAUpyG,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IAAIA,QAAQ,KAAM,KAC9Eo0C,EAAIi+D,SAAU,GAElBj+D,EAAIk+D,UAIR,SAAmB/gG,EAAKsU,GACpB,MAAMk4B,EAAO,WAAY0a,EAAQ5yC,EAAK7lB,QAAQ+9C,EAAM,KAAKv/C,MAAM,KACvC,KAApBqnB,EAAKxtB,MAAM,EAAG,IAA6B,IAAhBwtB,EAAKrvB,QAChCiiE,EAAM92C,OAAO,EAAG,GAEE,KAAlBkE,EAAKxtB,OAAO,IACZogE,EAAM92C,OAAO82C,EAAMjiE,OAAS,EAAG,GAEnC,OAAOiiE,CACX,CAboB65C,CAAUl+D,EAAKA,EAAU,MACzCA,EAAIm+D,SAaR,SAAkBn+D,EAAKzR,GACnB,MAAMhxB,EAAO,CAAC,EAMd,OALAgxB,EAAM3iC,QAAQ,6BAA6B,SAAUwyG,EAAIC,EAAIC,GACrDD,IACA9gG,EAAK8gG,GAAMC,EAEnB,IACO/gG,CACX,CArBmB4gG,CAASn+D,EAAKA,EAAW,OACjCA,CACX,CCnCO,MAAMu+D,UAAe,IAOxBtzG,YAAY+0C,EAAKk2B,EAAO,CAAC,GACrB7jE,QACAlH,KAAKqzG,YAAc,GACfx+D,GAAO,iBAAoBA,IAC3Bk2B,EAAOl2B,EACPA,EAAM,MAENA,GACAA,EAAMzxB,EAAMyxB,GACZk2B,EAAK+mC,SAAWj9D,EAAI+9D,KACpB7nC,EAAKkR,OAA0B,UAAjBpnC,EAAImmC,UAAyC,QAAjBnmC,EAAImmC,SAC9CjQ,EAAKnlD,KAAOivB,EAAIjvB,KACZivB,EAAIzR,QACJ2nC,EAAK3nC,MAAQyR,EAAIzR,QAEhB2nC,EAAK6nC,OACV7nC,EAAK+mC,SAAW1uF,EAAM2nD,EAAK6nC,MAAMA,MAErCvE,EAAsBruG,KAAM+qE,GAC5B/qE,KAAKi8E,OACD,MAAQlR,EAAKkR,OACPlR,EAAKkR,OACe,oBAAb/7D,UAA4B,WAAaA,SAAS86D,SAC/DjQ,EAAK+mC,WAAa/mC,EAAKnlD,OAEvBmlD,EAAKnlD,KAAO5lB,KAAKi8E,OAAS,MAAQ,MAEtCj8E,KAAK8xG,SACD/mC,EAAK+mC,WACoB,oBAAb5xF,SAA2BA,SAAS4xF,SAAW,aAC/D9xG,KAAK4lB,KACDmlD,EAAKnlD,OACoB,oBAAb1F,UAA4BA,SAAS0F,KACvC1F,SAAS0F,KACT5lB,KAAKi8E,OACD,MACA,MAClBj8E,KAAK+wG,WAAahmC,EAAKgmC,YAAc,CAAC,UAAW,aACjD/wG,KAAKqzG,YAAc,GACnBrzG,KAAKszG,cAAgB,EACrBtzG,KAAK+qE,KAAOrsE,OAAOwL,OAAO,CACtBoc,KAAM,aACNitF,OAAO,EACPtlF,iBAAiB,EACjBye,SAAS,EACTilE,eAAgB,IAChB6B,iBAAiB,EACjBC,kBAAkB,EAClBC,oBAAoB,EACpBC,kBAAmB,CACftiB,UAAW,MAEfuiB,iBAAkB,CAAC,EACnBC,qBAAqB,GACtB9oC,GACH/qE,KAAK+qE,KAAKzkD,KACNtmB,KAAK+qE,KAAKzkD,KAAK7lB,QAAQ,MAAO,KACzBT,KAAK+qE,KAAK0oC,iBAAmB,IAAM,IACb,iBAApBzzG,KAAK+qE,KAAK3nC,QACjBpjC,KAAK+qE,KAAK3nC,MR/Cf,SAAgB0wE,GACnB,IAAIC,EAAM,CAAC,EACPC,EAAQF,EAAG70G,MAAM,KACrB,IAAK,IAAI3D,EAAI,EAAG6tB,EAAI6qF,EAAM/8G,OAAQqE,EAAI6tB,EAAG7tB,IAAK,CAC1C,IAAI8hF,EAAO42B,EAAM14G,GAAG2D,MAAM,KAC1B80G,EAAI/mF,mBAAmBowD,EAAK,KAAOpwD,mBAAmBowD,EAAK,GAC/D,CACA,OAAO22B,CACX,CQuC8B,CAAO/zG,KAAK+qE,KAAK3nC,QAGvCpjC,KAAKpG,GAAK,KACVoG,KAAKi0G,SAAW,KAChBj0G,KAAKk0G,aAAe,KACpBl0G,KAAKm0G,YAAc,KAEnBn0G,KAAKo0G,iBAAmB,KACQ,mBAArB/0F,mBACHrf,KAAK+qE,KAAK8oC,sBAIV7zG,KAAKq0G,0BAA4B,KACzBr0G,KAAKs0G,YAELt0G,KAAKs0G,UAAUz6C,qBACf75D,KAAKs0G,UAAUhxG,QACnB,EAEJ+b,iBAAiB,eAAgBrf,KAAKq0G,2BAA2B,IAE/C,cAAlBr0G,KAAK8xG,WACL9xG,KAAKu0G,qBAAuB,KACxBv0G,KAAKgvG,QAAQ,kBAAmB,CAC5BjgD,YAAa,2BACf,EAEN1vC,iBAAiB,UAAWrf,KAAKu0G,sBAAsB,KAG/Dv0G,KAAKoK,MACT,CAQAoqG,gBAAgBn1G,GACZ,MAAM+jC,EAAQ1kC,OAAOwL,OAAO,CAAC,EAAGlK,KAAK+qE,KAAK3nC,OAE1CA,EAAMqxE,IbtFU,EawFhBrxE,EAAMkxE,UAAYj1G,EAEdW,KAAKpG,KACLwpC,EAAMqvE,IAAMzyG,KAAKpG,IACrB,MAAMmxE,EAAOrsE,OAAOwL,OAAO,CAAC,EAAGlK,KAAK+qE,KAAK6oC,iBAAiBv0G,GAAOW,KAAK+qE,KAAM,CACxE3nC,QACAurE,OAAQ3uG,KACR8xG,SAAU9xG,KAAK8xG,SACf71B,OAAQj8E,KAAKi8E,OACbr2D,KAAM5lB,KAAK4lB,OAEf,OAAO,IAAImrF,EAAW1xG,GAAM0rE,EAChC,CAMA3gE,OACI,IAAIkqG,EACJ,GAAIt0G,KAAK+qE,KAAKyoC,iBACVJ,EAAOsB,wBACmC,IAA1C10G,KAAK+wG,WAAWxxG,QAAQ,aACxB+0G,EAAY,gBAEX,IAAI,IAAMt0G,KAAK+wG,WAAW95G,OAK3B,YAHA+I,KAAKuuG,cAAa,KACdvuG,KAAK6uG,aAAa,QAAS,0BAA0B,GACtD,GAIHyF,EAAYt0G,KAAK+wG,WAAW,EAChC,CACA/wG,KAAKquB,WAAa,UAElB,IACIimF,EAAYt0G,KAAKw0G,gBAAgBF,EACrC,CACA,MAAO/9F,GAGH,OAFAvW,KAAK+wG,WAAW3xG,aAChBY,KAAKoK,MAET,CACAkqG,EAAUlqG,OACVpK,KAAK20G,aAAaL,EACtB,CAMAK,aAAaL,GACLt0G,KAAKs0G,WACLt0G,KAAKs0G,UAAUz6C,qBAGnB75D,KAAKs0G,UAAYA,EAEjBA,EACK7rE,GAAG,QAASzoC,KAAK40G,QAAQx4G,KAAK4D,OAC9ByoC,GAAG,SAAUzoC,KAAKqvG,SAASjzG,KAAK4D,OAChCyoC,GAAG,QAASzoC,KAAK4uG,QAAQxyG,KAAK4D,OAC9ByoC,GAAG,SAAUhN,GAAWz7B,KAAKgvG,QAAQ,kBAAmBvzE,IACjE,CAOAo5E,MAAMx1G,GACF,IAAIi1G,EAAYt0G,KAAKw0G,gBAAgBn1G,GACjCy1G,GAAS,EACb1B,EAAOsB,uBAAwB,EAC/B,MAAMK,EAAkB,KAChBD,IAEJR,EAAUhmF,KAAK,CAAC,CAAEvrB,KAAM,OAAQqP,KAAM,WACtCkiG,EAAUvpG,KAAK,UAAWkT,IACtB,IAAI62F,EAEJ,GAAI,SAAW72F,EAAIlb,MAAQ,UAAYkb,EAAI7L,KAAM,CAG7C,GAFApS,KAAKg1G,WAAY,EACjBh1G,KAAK6uG,aAAa,YAAayF,IAC1BA,EACD,OACJlB,EAAOsB,sBAAwB,cAAgBJ,EAAUj1G,KACzDW,KAAKs0G,UAAU/E,OAAM,KACbuF,GAEA,WAAa90G,KAAKquB,aAEtBmiF,IACAxwG,KAAK20G,aAAaL,GAClBA,EAAUhmF,KAAK,CAAC,CAAEvrB,KAAM,aACxB/C,KAAK6uG,aAAa,UAAWyF,GAC7BA,EAAY,KACZt0G,KAAKg1G,WAAY,EACjBh1G,KAAK2vF,QAAO,GAEpB,KACK,CACD,MAAMztF,EAAM,IAAI3J,MAAM,eAEtB2J,EAAIoyG,UAAYA,EAAUj1G,KAC1BW,KAAK6uG,aAAa,eAAgB3sG,EACtC,KACF,EAEN,SAAS+yG,IACDH,IAGJA,GAAS,EACTtE,IACA8D,EAAUhxG,QACVgxG,EAAY,KAChB,CAEA,MAAM9zF,EAAWte,IACb,MAAMuU,EAAQ,IAAIle,MAAM,gBAAkB2J,GAE1CuU,EAAM69F,UAAYA,EAAUj1G,KAC5B41G,IACAj1G,KAAK6uG,aAAa,eAAgBp4F,EAAM,EAE5C,SAASy+F,IACL10F,EAAQ,mBACZ,CAEA,SAASswB,IACLtwB,EAAQ,gBACZ,CAEA,SAAS20F,EAAUvmE,GACX0lE,GAAa1lE,EAAGvvC,OAASi1G,EAAUj1G,MACnC41G,GAER,CAEA,MAAMzE,EAAU,KACZ8D,EAAU16C,eAAe,OAAQm7C,GACjCT,EAAU16C,eAAe,QAASp5C,GAClC8zF,EAAU16C,eAAe,QAASs7C,GAClCl1G,KAAK85D,IAAI,QAAShpB,GAClB9wC,KAAK85D,IAAI,YAAaq7C,EAAU,EAEpCb,EAAUvpG,KAAK,OAAQgqG,GACvBT,EAAUvpG,KAAK,QAASyV,GACxB8zF,EAAUvpG,KAAK,QAASmqG,GACxBl1G,KAAK+K,KAAK,QAAS+lC,GACnB9wC,KAAK+K,KAAK,YAAaoqG,GACvBb,EAAUlqG,MACd,CAMA8kG,SAOI,GANAlvG,KAAKquB,WAAa,OAClB+kF,EAAOsB,sBAAwB,cAAgB10G,KAAKs0G,UAAUj1G,KAC9DW,KAAK6uG,aAAa,QAClB7uG,KAAK2vF,QAGD,SAAW3vF,KAAKquB,YAAcruB,KAAK+qE,KAAKr+B,QAAS,CACjD,IAAIpxC,EAAI,EACR,MAAM6tB,EAAInpB,KAAKi0G,SAASh9G,OACxB,KAAOqE,EAAI6tB,EAAG7tB,IACV0E,KAAK60G,MAAM70G,KAAKi0G,SAAS34G,GAEjC,CACJ,CAMA+zG,SAASD,GACL,GAAI,YAAcpvG,KAAKquB,YACnB,SAAWruB,KAAKquB,YAChB,YAAcruB,KAAKquB,WAInB,OAHAruB,KAAK6uG,aAAa,SAAUO,GAE5BpvG,KAAK6uG,aAAa,aACVO,EAAOrsG,MACX,IAAK,OACD/C,KAAKo1G,YAAY/oF,KAAKjJ,MAAMgsF,EAAOh9F,OACnC,MACJ,IAAK,OACDpS,KAAKq1G,mBACLr1G,KAAKs1G,WAAW,QAChBt1G,KAAK6uG,aAAa,QAClB7uG,KAAK6uG,aAAa,QAClB,MACJ,IAAK,QACD,MAAM3sG,EAAM,IAAI3J,MAAM,gBAEtB2J,EAAID,KAAOmtG,EAAOh9F,KAClBpS,KAAK4uG,QAAQ1sG,GACb,MACJ,IAAK,UACDlC,KAAK6uG,aAAa,OAAQO,EAAOh9F,MACjCpS,KAAK6uG,aAAa,UAAWO,EAAOh9F,MAMpD,CAOAgjG,YAAYhjG,GACRpS,KAAK6uG,aAAa,YAAaz8F,GAC/BpS,KAAKpG,GAAKwY,EAAKqgG,IACfzyG,KAAKs0G,UAAUlxE,MAAMqvE,IAAMrgG,EAAKqgG,IAChCzyG,KAAKi0G,SAAWj0G,KAAKu1G,eAAenjG,EAAK6hG,UACzCj0G,KAAKk0G,aAAe9hG,EAAK8hG,aACzBl0G,KAAKm0G,YAAc/hG,EAAK+hG,YACxBn0G,KAAKw1G,WAAapjG,EAAKojG,WACvBx1G,KAAKkvG,SAED,WAAalvG,KAAKquB,YAEtBruB,KAAKq1G,kBACT,CAMAA,mBACIr1G,KAAKwuG,eAAexuG,KAAKo0G,kBACzBp0G,KAAKo0G,iBAAmBp0G,KAAKuuG,cAAa,KACtCvuG,KAAKgvG,QAAQ,eAAe,GAC7BhvG,KAAKk0G,aAAel0G,KAAKm0G,aACxBn0G,KAAK+qE,KAAKumC,WACVtxG,KAAKo0G,iBAAiBrgE,OAE9B,CAMA6gE,UACI50G,KAAKqzG,YAAYjxF,OAAO,EAAGpiB,KAAKszG,eAIhCtzG,KAAKszG,cAAgB,EACjB,IAAMtzG,KAAKqzG,YAAYp8G,OACvB+I,KAAK6uG,aAAa,SAGlB7uG,KAAK2vF,OAEb,CAMAA,QACI,GAAI,WAAa3vF,KAAKquB,YAClBruB,KAAKs0G,UAAUp0G,WACdF,KAAKg1G,WACNh1G,KAAKqzG,YAAYp8G,OAAQ,CACzB,MAAMg4G,EAAUjvG,KAAKy1G,qBACrBz1G,KAAKs0G,UAAUhmF,KAAK2gF,GAGpBjvG,KAAKszG,cAAgBrE,EAAQh4G,OAC7B+I,KAAK6uG,aAAa,QACtB,CACJ,CAOA4G,qBAII,KAH+Bz1G,KAAKw1G,YACR,YAAxBx1G,KAAKs0G,UAAUj1G,MACfW,KAAKqzG,YAAYp8G,OAAS,GAE1B,OAAO+I,KAAKqzG,YAEhB,IAAIqC,EAAc,EAClB,IAAK,IAAIp6G,EAAI,EAAGA,EAAI0E,KAAKqzG,YAAYp8G,OAAQqE,IAAK,CAC9C,MAAM8W,EAAOpS,KAAKqzG,YAAY/3G,GAAG8W,KAIjC,GAHIA,IACAsjG,GXxYO,iBADI1jG,EWyYeI,GXlY1C,SAAoB/W,GAChB,IAAI8Z,EAAI,EAAGle,EAAS,EACpB,IAAK,IAAIqE,EAAI,EAAG6tB,EAAI9tB,EAAIpE,OAAQqE,EAAI6tB,EAAG7tB,IACnC6Z,EAAI9Z,EAAIG,WAAWF,GACf6Z,EAAI,IACJle,GAAU,EAELke,EAAI,KACTle,GAAU,EAELke,EAAI,OAAUA,GAAK,MACxBle,GAAU,GAGVqE,IACArE,GAAU,GAGlB,OAAOA,CACX,CAxBe0+G,CAAW3jG,GAGf/Y,KAAK28G,KAPQ,MAOF5jG,EAAIpD,YAAcoD,EAAIva,QWsY5B6D,EAAI,GAAKo6G,EAAc11G,KAAKw1G,WAC5B,OAAOx1G,KAAKqzG,YAAYv6G,MAAM,EAAGwC,GAErCo6G,GAAe,CACnB,CX/YD,IAAoB1jG,EWgZnB,OAAOhS,KAAKqzG,WAChB,CASAjwG,MAAM6a,EAAKjc,EAAS6K,GAEhB,OADA7M,KAAKs1G,WAAW,UAAWr3F,EAAKjc,EAAS6K,GAClC7M,IACX,CACAsuB,KAAKrQ,EAAKjc,EAAS6K,GAEf,OADA7M,KAAKs1G,WAAW,UAAWr3F,EAAKjc,EAAS6K,GAClC7M,IACX,CAUAs1G,WAAWvyG,EAAMqP,EAAMpQ,EAAS6K,GAS5B,GARI,mBAAsBuF,IACtBvF,EAAKuF,EACLA,OAAOvM,GAEP,mBAAsB7D,IACtB6K,EAAK7K,EACLA,EAAU,MAEV,YAAchC,KAAKquB,YAAc,WAAaruB,KAAKquB,WACnD,QAEJrsB,EAAUA,GAAW,CAAC,GACd4hD,UAAW,IAAU5hD,EAAQ4hD,SACrC,MAAMwrD,EAAS,CACXrsG,KAAMA,EACNqP,KAAMA,EACNpQ,QAASA,GAEbhC,KAAK6uG,aAAa,eAAgBO,GAClCpvG,KAAKqzG,YAAY37G,KAAK03G,GAClBviG,GACA7M,KAAK+K,KAAK,QAAS8B,GACvB7M,KAAK2vF,OACT,CAIArsF,QACI,MAAMA,EAAQ,KACVtD,KAAKgvG,QAAQ,gBACbhvG,KAAKs0G,UAAUhxG,OAAO,EAEpBuyG,EAAkB,KACpB71G,KAAK85D,IAAI,UAAW+7C,GACpB71G,KAAK85D,IAAI,eAAgB+7C,GACzBvyG,GAAO,EAELwyG,EAAiB,KAEnB91G,KAAK+K,KAAK,UAAW8qG,GACrB71G,KAAK+K,KAAK,eAAgB8qG,EAAgB,EAqB9C,MAnBI,YAAc71G,KAAKquB,YAAc,SAAWruB,KAAKquB,aACjDruB,KAAKquB,WAAa,UACdruB,KAAKqzG,YAAYp8G,OACjB+I,KAAK+K,KAAK,SAAS,KACX/K,KAAKg1G,UACLc,IAGAxyG,GACJ,IAGCtD,KAAKg1G,UACVc,IAGAxyG,KAGDtD,IACX,CAMA4uG,QAAQ1sG,GACJkxG,EAAOsB,uBAAwB,EAC/B10G,KAAK6uG,aAAa,QAAS3sG,GAC3BlC,KAAKgvG,QAAQ,kBAAmB9sG,EACpC,CAMA8sG,QAAQvzE,EAAQszB,GACR,YAAc/uD,KAAKquB,YACnB,SAAWruB,KAAKquB,YAChB,YAAcruB,KAAKquB,aAEnBruB,KAAKwuG,eAAexuG,KAAKo0G,kBAEzBp0G,KAAKs0G,UAAUz6C,mBAAmB,SAElC75D,KAAKs0G,UAAUhxG,QAEftD,KAAKs0G,UAAUz6C,qBACoB,mBAAxBz6C,sBACPA,oBAAoB,eAAgBpf,KAAKq0G,2BAA2B,GACpEj1F,oBAAoB,UAAWpf,KAAKu0G,sBAAsB,IAG9Dv0G,KAAKquB,WAAa,SAElBruB,KAAKpG,GAAK,KAEVoG,KAAK6uG,aAAa,QAASpzE,EAAQszB,GAGnC/uD,KAAKqzG,YAAc,GACnBrzG,KAAKszG,cAAgB,EAE7B,CAOAiC,eAAetB,GACX,MAAM8B,EAAmB,GACzB,IAAIz6G,EAAI,EACR,MAAM8Y,EAAI6/F,EAASh9G,OACnB,KAAOqE,EAAI8Y,EAAG9Y,KACL0E,KAAK+wG,WAAWxxG,QAAQ00G,EAAS34G,KAClCy6G,EAAiBr+G,KAAKu8G,EAAS34G,IAEvC,OAAOy6G,CACX,EAEJ3C,EAAOp4B,SbliBiB,Ec5BAo4B,EAAOp4B,4HCgCxB,MAAMg7B,EAAsB,CAClCr1G,IAAK,CAAChK,EAAQO,IAAiC,IAArBP,EAAOO,EAAS,GAAeP,EAAOO,EAAS,IAAO,EAAOP,EAAOO,EAAS,IAAO,GAAQP,EAAOO,IAAY,GACzI8E,IAAK,GCfCiC,eAAeg4G,EAAmBl6G,GACxC,KAAMA,aAAiBvB,YAAcuB,aAAiBsV,aACrD,MAAM,IAAI1P,UAAU,+GAA+G5F,OAGpI,MAAMpF,EAASoF,aAAiBvB,WAAauB,EAAQ,IAAIvB,WAAWuB,GAEpE,GAAMpF,GAAQM,OAAS,EAIvB,OAAOi/G,EAAsB,KAAmBv/G,GACjD,CAOA,SAASw/G,EAAOx/G,EAAQ4zB,EAASvoB,GAChCA,EAAU,CACT9K,OAAQ,KACL8K,GAGJ,IAAK,MAAOwf,EAAOiJ,KAAWF,EAAQjjB,UAErC,GAAItF,EAAQ0zC,MAEX,GAAIjrB,KAAYzoB,EAAQ0zC,KAAKl0B,GAAS7qB,EAAO6qB,EAAQxf,EAAQ9K,SAC5D,OAAO,OAEF,GAAIuzB,IAAW9zB,EAAO6qB,EAAQxf,EAAQ9K,QAC5C,OAAO,EAIT,OAAO,CACR,CAEO+G,eAAei4G,EAAsBxU,GAC3C,IACC,OAAO,IAAI0U,GAAiBhzF,MAAMs+E,EACnC,CAAE,MAAOjrF,GACR,KAAMA,aAAiB,MACtB,MAAMA,CAER,CACD,CAEA,MAAM2/F,EACLlF,MAAMzmF,EAAQzoB,GACb,OAAOm0G,EAAOn2G,KAAKrJ,OAAQ8zB,EAAQzoB,EACpC,CAEAq0G,YAAY5rF,EAAQzoB,GACnB,OAAOhC,KAAKkxG,OD7EgBjgG,EC6EIwZ,ED5E1B,IAAIxZ,GAAQlB,KAAIumG,GAAaA,EAAU96G,WAAW,MC4EfwG,GD7EpC,IAAuBiP,CC8E7B,CAEAhT,YAAYyjG,GAcX,GAbA1hG,KAAKrJ,OAAS,EAAA6W,OAAA,MAvEK,WA0Ea3H,IAA5B67F,EAAU6U,SAAS9+G,OACtBiqG,EAAU6U,SAAS9+G,KAAO4N,OAAO6jB,kBAGlClpB,KAAK0hG,UAAYA,QAEXA,EAAU8U,WAAWx2G,KAAKrJ,OAAQ,CAACM,OAAQ,GAAIw/G,WAAW,IAI5Dz2G,KAAKkxG,MAAM,CAAC,GAAM,KACrB,MAAO,CACN74F,IAAK,MACLq+F,KAAM,aAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,MACrB,MAAO,CACN74F,IAAK,MACLq+F,KAAM,0BAIR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,IACrB,MAAO,CACN74F,IAAK,MACLq+F,KAAM,iCAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,KACrB,MAAO,CACN74F,IAAK,MACLq+F,KAAM,4BAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,KAGrB,aAFMxP,EAAU8U,WAAWx2G,KAAKrJ,OAAQ,CAACM,OAAQ,GAAIw/G,WAAW,IAG/Dz2G,KAAKq2G,YAAY,YAAa,CAACn/G,OAAQ,KACpC8I,KAAKq2G,YAAY,SAAU,CAACn/G,OAAQ,KAEhC,CACNmhB,IAAK,MACLq+F,KAAM,mBAID,CACNr+F,IAAK,KACLq+F,KAAM,0BAIR,GACC12G,KAAKkxG,MAAM,CAAC,GAAM,OACflxG,KAAKkxG,MAAM,CAAC,GAAM,MAErB,MAAO,CACN74F,IAAK,IACLq+F,KAAM,0BAIR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,MACrB,MAAO,CACN74F,IAAK,OACLq+F,KAAM,sBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,MACrB,MAAO,CACN74F,IAAK,MACLq+F,KAAM,qBAMR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,IAAM,MAG3B,OADAlxG,KAAK0hG,UAAUiV,OAAO,GACf32G,KAAKojB,MAAMs+E,GAGnB,GAAI1hG,KAAKkxG,MAAM,CAAC,GAAM,GAAM,KAC3B,MAAO,CACN74F,IAAK,MACLq+F,KAAM,aAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,MAC3B,MAAO,CACN74F,IAAK,MACLq+F,KAAM,sBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,IAAM,IAC3B,MAAO,CACN74F,IAAK,KACLq+F,KAAM,oBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,MAC3B,MAAO,CACN74F,IAAK,MACLq+F,KAAM,uBAIR,GAAI12G,KAAKq2G,YAAY,OAAQ,OACtB3U,EAAUiV,OAAO,GACvB,MAAMC,QAAwBlV,EAAUmV,UAAUb,GAClD,OAAItU,EAAUp1C,SAAWsqD,EAAkBlV,EAAU6U,SAAS9+G,KAEtD,CACN4gB,IAAK,MACLq+F,KAAM,qBAIFhV,EAAUiV,OAAOC,GAChBV,EAAsBxU,GAC9B,CAGA,GAAI1hG,KAAKq2G,YAAY,OACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,oBAIR,IACqB,KAAnB12G,KAAKrJ,OAAO,IAAkC,KAAnBqJ,KAAKrJ,OAAO,KACrCqJ,KAAKkxG,MAAM,CAAC,GAAM,IAAO,CAACh6G,OAAQ,IAErC,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,iCAOR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,IAAM,MAC3B,OAAIlxG,KAAKkxG,MAAM,CAAC,KAAO,CAACh6G,OAAQ,IACxB,CACNmhB,IAAK,MACLq+F,KAAM,aAID,CACNr+F,IAAK,MACLq+F,KAAM,cAIR,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,OACLq+F,KAAM,cAIR,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,6BAIR,GAAI12G,KAAKq2G,YAAY,OAAQ,CAACn/G,OAAQ,IACrC,MAAO,CACNmhB,IAAK,OACLq+F,KAAM,cAKR,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,oBAIR,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,cAIR,GAAI12G,KAAKq2G,YAAY,OAAQ,CAACn/G,OAAQ,IACrC,MAAO,CACNmhB,IAAK,OACLq+F,KAAM,cAMR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,EAAK,IAAO,CACvC,IACC,KAAOxP,EAAUp1C,SAAW,GAAKo1C,EAAU6U,SAAS9+G,MAAM,OACnDiqG,EAAUoV,WAAW92G,KAAKrJ,OAAQ,CAACM,OAAQ,KAGjD,MAAM8/G,EAAY,CACjBC,eAAgBh3G,KAAKrJ,OAAOijB,aAAa,IACzCq9F,iBAAkBj3G,KAAKrJ,OAAOijB,aAAa,IAC3Cs9F,eAAgBl3G,KAAKrJ,OAAO8iB,aAAa,IACzC09F,iBAAkBn3G,KAAKrJ,OAAO8iB,aAAa,KAO5C,GAJAs9F,EAAUK,eAAiB1V,EAAUmV,UAAU,IAAI,KAAiBE,EAAUG,eAAgB,gBACxFxV,EAAUiV,OAAOI,EAAUI,kBAGN,yBAAvBJ,EAAUK,SACb,MAAO,CACN/+F,IAAK,MACLq+F,KAAM,2BAIR,GAAIK,EAAUK,SAAS35D,SAAS,UAAYs5D,EAAUK,SAAS35D,SAAS,QAAS,CAEhF,OADas5D,EAAUK,SAASn4G,MAAM,KAAK,IAE1C,IAAK,QAiBL,QACC,MAhBD,IAAK,OACJ,MAAO,CACNoZ,IAAK,OACLq+F,KAAM,2EAER,IAAK,MACJ,MAAO,CACNr+F,IAAK,OACLq+F,KAAM,6EAER,IAAK,KACJ,MAAO,CACNr+F,IAAK,OACLq+F,KAAM,qEAKV,CAEA,GAAIK,EAAUK,SAAS5wE,WAAW,OACjC,MAAO,CACNnuB,IAAK,OACLq+F,KAAM,qEAIR,GAAIK,EAAUK,SAAS5wE,WAAW,QAAUuwE,EAAUK,SAAS35D,SAAS,UACvE,MAAO,CACNplC,IAAK,MACLq+F,KAAM,aAUR,GAA2B,aAAvBK,EAAUK,UAA2BL,EAAUC,iBAAmBD,EAAUE,iBAAkB,CACjG,IAAII,QAAiB3V,EAAUmV,UAAU,IAAI,KAAiBE,EAAUC,eAAgB,UAGxF,OAFAK,EAAWA,EAASppG,OAEZopG,GACP,IAAK,uBACJ,MAAO,CACNh/F,IAAK,OACLq+F,KAAM,wBAER,IAAK,0CACJ,MAAO,CACNr+F,IAAK,MACLq+F,KAAM,2CAER,IAAK,iDACJ,MAAO,CACNr+F,IAAK,MACLq+F,KAAM,kDAER,IAAK,kDACJ,MAAO,CACNr+F,IAAK,MACLq+F,KAAM,mDAIV,CAGA,GAAiC,IAA7BK,EAAUC,eAAsB,CACnC,IAAIM,GAAmB,EAEvB,KAAOA,EAAkB,GAAM5V,EAAUp1C,SAAWo1C,EAAU6U,SAAS9+G,YAChEiqG,EAAU8U,WAAWx2G,KAAKrJ,OAAQ,CAAC8/G,WAAW,IAEpDa,EAAkBt3G,KAAKrJ,OAAO4I,QAAQ,WAAY,EAAG,aAE/CmiG,EAAUiV,OAAOW,GAAmB,EAAIA,EAAkBt3G,KAAKrJ,OAAOM,OAE9E,YACOyqG,EAAUiV,OAAOI,EAAUC,eAEnC,CACD,CAAE,MAAOvgG,GACR,KAAMA,aAAiB,MACtB,MAAMA,CAER,CAEA,MAAO,CACN4B,IAAK,MACLq+F,KAAM,kBAER,CAEA,GAAI12G,KAAKq2G,YAAY,QAAS,OAEvB3U,EAAUiV,OAAO,IACvB,MAAM5zG,EAAO,EAAAyK,OAAA,MAAa,GAI1B,aAHMk0F,EAAUoV,WAAW/zG,GAGvBozG,EAAOpzG,EAAM,CAAC,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,MACpD,CACNsV,IAAK,OACLq+F,KAAM,cAKJP,EAAOpzG,EAAM,CAAC,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,KAC9C,CACNsV,IAAK,MACLq+F,KAAM,aAKJP,EAAOpzG,EAAM,CAAC,EAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC9C,CACNsV,IAAK,MACLq+F,KAAM,aAKJP,EAAOpzG,EAAM,CAAC,IAAM,GAAM,GAAM,GAAM,KAClC,CACNsV,IAAK,MACLq+F,KAAM,aAKJP,EAAOpzG,EAAM,CAAC,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,KAC9C,CACNsV,IAAK,MACLq+F,KAAM,aAKJP,EAAOpzG,EAAM,CAAC,EAAM,IAAM,IAAM,IAAM,GAAM,IAAM,MAC9C,CACNsV,IAAK,MACLq+F,KAAM,aAKD,CACNr+F,IAAK,MACLq+F,KAAM,kBAER,CAEA,GACC12G,KAAKkxG,MAAM,CAAC,GAAM,OACK,IAAnBlxG,KAAKrJ,OAAO,IAAiC,IAAnBqJ,KAAKrJ,OAAO,IAAiC,IAAnBqJ,KAAKrJ,OAAO,MAC7C,IAAnBqJ,KAAKrJ,OAAO,IAAiC,IAAnBqJ,KAAKrJ,OAAO,IAAiC,IAAnBqJ,KAAKrJ,OAAO,IAEpE,MAAO,CACN0hB,IAAK,MACLq+F,KAAM,mBAUR,GACC12G,KAAKq2G,YAAY,OAAQ,CAACn/G,OAAQ,KACH,IAAV,GAAjB8I,KAAKrJ,OAAO,IACf,CAGD,MAAM4gH,EAAav3G,KAAKrJ,OAAO8b,SAAS,SAAU,EAAG,IAAIhS,QAAQ,KAAM,KAAKwN,OAC5E,OAAQspG,GACP,IAAK,OACL,IAAK,OACJ,MAAO,CAACl/F,IAAK,OAAQq+F,KAAM,cAC5B,IAAK,OACJ,MAAO,CAACr+F,IAAK,OAAQq+F,KAAM,cAC5B,IAAK,OACJ,MAAO,CAACr+F,IAAK,OAAQq+F,KAAM,uBAC5B,IAAK,OACL,IAAK,OACJ,MAAO,CAACr+F,IAAK,OAAQq+F,KAAM,cAC5B,IAAK,OACL,IAAK,OACJ,MAAO,CAACr+F,IAAK,OAAQq+F,KAAM,uBAC5B,IAAK,KACJ,MAAO,CAACr+F,IAAK,MAAOq+F,KAAM,mBAC3B,IAAK,MACL,IAAK,OACL,IAAK,OACJ,MAAO,CAACr+F,IAAK,MAAOq+F,KAAM,eAC3B,IAAK,MACJ,MAAO,CAACr+F,IAAK,MAAOq+F,KAAM,aAC3B,IAAK,MACJ,MAAO,CAACr+F,IAAK,MAAOq+F,KAAM,aAC3B,IAAK,MACJ,MAAO,CAACr+F,IAAK,MAAOq+F,KAAM,eAC3B,IAAK,MACJ,MAAO,CAACr+F,IAAK,MAAOq+F,KAAM,aAC3B,IAAK,MACJ,MAAO,CAACr+F,IAAK,MAAOq+F,KAAM,aAC3B,IAAK,MACJ,MAAO,CAACr+F,IAAK,MAAOq+F,KAAM,aAC3B,IAAK,MACJ,MAAO,CAACr+F,IAAK,MAAOq+F,KAAM,aAC3B,IAAK,MACJ,MAAO,CAACr+F,IAAK,MAAOq+F,KAAM,qBAC3B,QACC,OAAIa,EAAW/wE,WAAW,MACrB+wE,EAAW/wE,WAAW,OAClB,CAACnuB,IAAK,MAAOq+F,KAAM,eAGpB,CAACr+F,IAAK,MAAOq+F,KAAM,cAGpB,CAACr+F,IAAK,MAAOq+F,KAAM,aAE7B,CAEA,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,cAIR,GACC12G,KAAKq2G,YAAY,UAEhBr2G,KAAKkxG,MAAM,CAAC,EAAM,EAAM,EAAM,GAAO,CAACh6G,OAAQ,KAC3C8I,KAAKq2G,YAAY,OAAQ,CAACn/G,OAAQ,KAGtC,MAAO,CACNmhB,IAAK,OACLq+F,KAAM,aAIR,GACC12G,KAAKq2G,YAAY,UAEhBr2G,KAAKkxG,MAAM,CAAC,EAAM,EAAM,EAAM,GAAO,CAACh6G,OAAQ,KAC3C8I,KAAKq2G,YAAY,OAAQ,CAACn/G,OAAQ,KAGtC,MAAO,CACNmhB,IAAK,QACLq+F,KAAM,cAIR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,IAAM,IAAM,OAAUlxG,KAAKkxG,MAAM,CAAC,IAAM,IAAM,IAAM,MACzE,MAAO,CACN74F,IAAK,OACLq+F,KAAM,gCAKR,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,eAIR,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,KACLq+F,KAAM,sBAIR,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,OACLq+F,KAAM,gBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,MACjC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,aAIR,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,KACLq+F,KAAM,iBAIR,GAAI12G,KAAKq2G,YAAY,QAAS,CAC7B,UACO3U,EAAUiV,OAAO,MACvB,MAAMa,EAAgB,SAChB7gH,EAAS,EAAA6W,OAAA,MAAavU,KAAKkN,IAAIqxG,EAAe9V,EAAU6U,SAAS9+G,OAIvE,SAHMiqG,EAAUoV,WAAWngH,EAAQ,CAAC8/G,WAAW,IAG3C9/G,EAAOkhB,SAAS,EAAArK,OAAA,KAAY,kBAC/B,MAAO,CACN6K,IAAK,KACLq+F,KAAM,yBAGT,CAAE,MAAOjgG,GAER,KAAMA,aAAiB,MACtB,MAAMA,CAER,CAGA,MAAO,CACN4B,IAAK,MACLq+F,KAAM,kBAER,CAEA,GAAI12G,KAAKkxG,MAAM,CAAC,EAAM,GAAM,IAAM,MACjC,MAAO,CACN74F,IAAK,OACLq+F,KAAM,oBAKR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,KAAQ,CAC7B,MAAMuG,QAAiBz3G,KAAK03G,gBAAe,GAC3C,GAAID,EACH,OAAOA,CAET,CAGA,GAAIz3G,KAAKkxG,MAAM,CAAC,GAAM,KAAQ,CAC7B,MAAMuG,QAAiBz3G,KAAK03G,gBAAe,GAC3C,GAAID,EACH,OAAOA,CAET,CAEA,GAAIz3G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,aAKR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,IAAM,MAAQ,CACzCjzG,eAAe05G,IACd,MAAMC,QAAYlW,EAAUmW,WAAW,MACvC,IAAIniE,EAAO,IACPoiE,EAAK,EAGT,KAAwB,IAAhBF,EAAMliE,IAAwB,IAATA,KAC1BoiE,EACFpiE,IAAS,EAGV,MAAM97C,EAAK,EAAA4T,OAAA,MAAasqG,EAAK,GAE7B,aADMpW,EAAUoV,WAAWl9G,GACpBA,CACR,CAEAqE,eAAe85G,IACd,MAAMn+G,QAAW+9G,IACXK,QAAoBL,IAC1BK,EAAY,IAAM,KAASA,EAAY/gH,OAAS,EAChD,MAAMghH,EAAWh/G,KAAKkN,IAAI,EAAG6xG,EAAY/gH,QACzC,MAAO,CACN2C,GAAIA,EAAGyf,WAAW,EAAGzf,EAAG3C,QACxB+E,IAAKg8G,EAAY3+F,WAAW2+F,EAAY/gH,OAASghH,EAAUA,GAE7D,CAEAh6G,eAAei6G,EAAaxnB,GAC3B,KAAOA,EAAW,GAAG,CACpB,MAAMynB,QAAgBJ,IACtB,GAAmB,QAAfI,EAAQv+G,GAAgB,CAE3B,aADuB8nG,EAAUmV,UAAU,IAAI,KAAiBsB,EAAQn8G,IAAK,WAC7DyE,QAAQ,UAAW,GACpC,OAEMihG,EAAUiV,OAAOwB,EAAQn8G,OAC7B00F,CACH,CACD,CAEA,MAAM96D,QAAWmiF,IAGjB,aAFsBG,EAAatiF,EAAG55B,MAGrC,IAAK,OACJ,MAAO,CACNqc,IAAK,OACLq+F,KAAM,cAGR,IAAK,WACJ,MAAO,CACNr+F,IAAK,MACLq+F,KAAM,oBAGR,QACC,OAEH,CAGA,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,KAAQ,CACzC,GAAIlxG,KAAKkxG,MAAM,CAAC,GAAM,GAAM,IAAO,CAACh6G,OAAQ,IAC3C,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,iBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,IAAO,CAACh6G,OAAQ,IACjD,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,kBAKR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,IAAO,CAACh6G,OAAQ,IACjD,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,cAGT,CAEA,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,SACLq+F,KAAM,yBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,KACjC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,kCAIR,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,yCAIR,GACC12G,KAAKq2G,YAAY,SACdr2G,KAAKq2G,YAAY,QAEpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,qCAIR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,IAAM,IAAM,MACjC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,qBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,IAAM,IAAM,MACjC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,mBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,IAAM,GAAM,MACjC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,oBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,GAAM,GAAM,KACjC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,qBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,KACjC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,8BAIR,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,UACLq+F,KAAM,yBAMR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,GAAM,IACvC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,YAIR,GAAI12G,KAAKq2G,YAAY,SACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,aAIR,GAAI12G,KAAKq2G,YAAY,UACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,mBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,IACjC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,eAIR,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,KACLq+F,KAAM,cAIR,GACC12G,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,KAChC8I,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,KACnC8I,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,KACnC8I,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,KACnC8I,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,KACnC8I,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,KACnC8I,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,KACnC8I,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,KACnC8I,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,KACnC8I,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,KACnC8I,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,KACnC8I,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,IAEtC,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,gCAKR,GAAI12G,KAAKkxG,MAAM,CAAC,EAAM,EAAM,EAAM,MAAQ,CAEzC,GAAIlxG,KAAKkxG,MAAM,CAAC,IAAO,CAACh6G,OAAQ,EAAGw+C,KAAM,CAAC,OACzC,MAAO,CACNr9B,IAAK,MACLq+F,KAAM,cAKR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAO,CAACh6G,OAAQ,EAAGw+C,KAAM,CAAC,OACzC,MAAO,CACNr9B,IAAK,MACLq+F,KAAM,aAGT,CAEA,GAAI12G,KAAKq2G,YAAY,QACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,+BAIR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,IAAM,IAAM,MACjC,MAAO,CACN74F,IAAK,QACLq+F,KAAM,uBAMR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,GAAM,IAAM,GAAM,GAAM,IAC7C,MAAO,CACN74F,IAAK,KACLq+F,KAAM,oBAIR,GAAI12G,KAAKq2G,YAAY,UACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,mBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,IAAM,IAAM,IAAM,GAAM,KAC7C,MAAO,CACN74F,IAAK,KACLq+F,KAAM,+BAIR,GACC12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,IAAM,GAAM,GAAM,MACnB,IAAnBlxG,KAAKrJ,OAAO,IAAiC,IAAnBqJ,KAAKrJ,OAAO,IAE1C,MAAO,CACN0hB,IAAK,MACLq+F,KAAM,gCAIR,GAAI12G,KAAKq2G,YAAY,UACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,aAIR,GAAI12G,KAAKq2G,YAAY,MAAO,CAC3B,MAAMj2F,EAAUpgB,KAAKrJ,OAAO8b,SAAS,SAAU,EAAG,GAClD,GAAI2N,EAAQgqB,MAAM,QAAUhqB,GAAW,KAAQA,GAAW,KACzD,MAAO,CACN/H,IAAK,MACLq+F,KAAM,gBAGT,CAEA,GAAI12G,KAAKq2G,YAAY,UACpB,MAAO,CACNh+F,IAAK,OACLq+F,KAAM,sBAMR,GAAI12G,KAAKq2G,YAAY,WACpB,MAAO,CACNh+F,IAAK,QACLq+F,KAAM,yBAIR,GAAI12G,KAAKq2G,YAAY,WAAY,OAC1B3U,EAAUiV,OAAO,GAEvB,MAAe,wBADMjV,EAAUmV,UAAU,IAAI,KAAiB,GAAI,UAE1D,CACNx+F,IAAK,MACLq+F,KAAM,qBAID,CACNr+F,IAAK,KACLq+F,KAAM,6BAER,CAEA,GAAI12G,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,YAChCwqG,EAAU8U,WAAWx2G,KAAKrJ,OAAQ,CAACM,OAAQ,GAAIw/G,WAAW,IAC5Dz2G,KAAKq2G,YAAY,KAAM,CAACn/G,OAAQ,MACnC,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,gCAOT,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,KAAQ,CAWjEjzG,eAAem6G,IACd,MAAO,CACNnhH,aAAcyqG,EAAUmV,UAAU,MAClC9zG,WAAY2+F,EAAUmV,UAAU,IAAI,KAAiB,EAAG,WAE1D,OAPMnV,EAAUiV,OAAO,GASvB,EAAG,CACF,MAAMr6B,QAAc87B,IACpB,GAAI97B,EAAMrlF,OAAS,EAClB,OAGD,OAAQqlF,EAAMv5E,MACb,IAAK,OACJ,MAAO,CACNsV,IAAK,MACLq+F,KAAM,aAER,IAAK,OACJ,MAAO,CACNr+F,IAAK,OACLq+F,KAAM,cAER,cACOhV,EAAUiV,OAAOr6B,EAAMrlF,OAAS,GAEzC,OAASyqG,EAAUp1C,SAAW,EAAIo1C,EAAU6U,SAAS9+G,MAErD,MAAO,CACN4gB,IAAK,MACLq+F,KAAM,YAER,CAEA,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,EAAM,IACzD,MAAO,CACN74F,IAAK,QACLq+F,KAAM,8BAIR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,IAAM,GAAM,GAAM,EAAM,EAAM,EAAM,IACzD,MAAO,CACN74F,IAAK,MACLq+F,KAAM,qBAKR,GACC12G,KAAKkxG,MAAM,CAAC,IAAM,IAAM,IAAM,KAAO,CAACh6G,OAAQ,KAC3C8I,KAAKkxG,MAAM,CAAC,IAAM,IAAM,GAAM,KAAO,CAACh6G,OAAQ,KAC9C8I,KAAKkxG,MAAM,CAAC,IAAM,IAAM,IAAM,KAAO,CAACh6G,OAAQ,KAC9C8I,KAAKkxG,MAAM,CAAC,IAAM,IAAM,IAAM,KAAO,CAACh6G,OAAQ,IAEjD,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,mBAMR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,GAAM,EAAM,EAAM,EAAM,EAAM,KAC/D,MAAO,CACN74F,IAAK,MACLq+F,KAAM,uBAIR,GAAI12G,KAAKq2G,YAAY,aACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,eAMR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,EAAM,GAAM,EAAM,EAAM,EAAM,IAAM,IAAM,IAAM,MACjF,MAAO,CACN74F,IAAK,MACLq+F,KAAM,yBAKR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,MAAQ,CAC7EjzG,eAAekkF,IACd,MAAMk2B,EAAO,EAAA7qG,OAAA,MAAa,IAE1B,aADMk0F,EAAUoV,WAAWuB,GACpB,CACNz+G,GAAIy+G,EACJ5gH,KAAM4N,aAAaq8F,EAAUmV,UAAU,OAEzC,CAIA,UAFMnV,EAAUiV,OAAO,IAEhBjV,EAAUp1C,SAAW,GAAKo1C,EAAU6U,SAAS9+G,MAAM,CACzD,MAAMgzB,QAAe03D,IACrB,IAAI7N,EAAU7pD,EAAOhzB,KAAO,GAC5B,GAAI0+G,EAAO1rF,EAAO7wB,GAAI,CAAC,IAAM,EAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,EAAM,IAAM,GAAM,GAAM,GAAM,MAAQ,CAExH,MAAM0+G,EAAS,EAAA9qG,OAAA,MAAa,IAG5B,GAFA8mE,SAAiBotB,EAAUoV,WAAWwB,GAElCnC,EAAOmC,EAAQ,CAAC,GAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,IAAM,EAAM,IAAM,GAAM,GAAM,GAAM,KAE7G,MAAO,CACNjgG,IAAK,MACLq+F,KAAM,kBAIR,GAAIP,EAAOmC,EAAQ,CAAC,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,IAAM,EAAM,IAAM,GAAM,GAAM,GAAM,KAE7G,MAAO,CACNjgG,IAAK,MACLq+F,KAAM,kBAIR,KACD,OAEMhV,EAAUiV,OAAOriC,EACxB,CAGA,MAAO,CACNj8D,IAAK,MACLq+F,KAAM,yBAER,CAEA,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAAM,GAAM,GAAM,GAAM,KACjF,MAAO,CACN74F,IAAK,MACLq+F,KAAM,aAIR,IAAK12G,KAAKkxG,MAAM,CAAC,IAAM,GAAM,KAAUlxG,KAAKkxG,MAAM,CAAC,IAAM,GAAM,MAAWlxG,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,IAAO,CAACh6G,OAAQ,IACvH,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,qBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,GAAO,CAACh6G,OAAQ,IACjG,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,4BAIR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,GAAM,IAAM,KACjC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,aAIR,GAAI12G,KAAKkxG,MAAM,CAAC,EAAM,EAAM,EAAM,GAAM,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAAM,KAAQ,OAGnFxP,EAAUiV,OAAO,IAEvB,aADmBjV,EAAUmV,UAAU,IAAI,KAAiB,EAAG,WAE9D,IAAK,OACJ,MAAO,CACNx+F,IAAK,MACLq+F,KAAM,aAER,IAAK,OACJ,MAAO,CACNr+F,IAAK,MACLq+F,KAAM,aAER,IAAK,OACJ,MAAO,CACNr+F,IAAK,MACLq+F,KAAM,aAER,IAAK,OACJ,MAAO,CACNr+F,IAAK,MACLq+F,KAAM,aAER,QACC,OAEH,CAEA,GACC12G,KAAKkxG,MAAM,CAAC,IAAM,MACflxG,KAAKkxG,MAAM,CAAC,EAAM,EAAM,EAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAAM,KAEjF,MAAO,CACN74F,IAAK,MACLq+F,KAAM,aAIR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,MACrB,OAAIlxG,KAAKkxG,MAAM,CAAC,EAAG,GAAI,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,KAAM,CAACh6G,OAAQ,IACxD,CACNmhB,IAAK,MACLq+F,KAAM,wBAIR,EAKD,GACC12G,KAAKkxG,MAAM,CAAC,EAAK,EAAK,EAAK,OACxBlxG,KAAKkxG,MAAM,CAAC,EAAK,EAAK,EAAK,MAE9B,MAAO,CACN74F,IAAK,MACLq+F,KAAM,cAIR,GAAI12G,KAAKkxG,MAAM,CAAC,EAAM,EAAM,EAAM,EAAM,IACvC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,YAIR,GAAI12G,KAAKkxG,MAAM,CAAC,EAAM,EAAM,EAAM,IACjC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,gBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,EAAM,EAAM,EAAM,IACjC,MAAO,CACN74F,IAAK,MACLq+F,KAAM,gBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,MAEzD,MAAO,CACN74F,IAAK,MACLq+F,KAAM,qBASR,SAJMhV,EAAU8U,WAAWx2G,KAAKrJ,OAAQ,CAACM,OAAQgC,KAAKkN,IAAI,IAAKu7F,EAAU6U,SAAS9+G,MAAOg/G,WAAW,IAIhGz2G,KAAKq2G,YAAY,UAAW,CAC/B,GAAIr2G,KAAKq2G,YAAY,QAAS,CAACn/G,OAAQ,IACtC,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,cAIR,GAAI12G,KAAKq2G,YAAY,YAAa,CAACn/G,OAAQ,IAC1C,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,gBAGT,CAGA,GAAI12G,KAAKq2G,YAAY,mBACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,wBAIR,GAAI12G,KAAKq2G,YAAY,oBACpB,MAAO,CACNh+F,IAAK,KACLq+F,KAAM,cAIR,GAAI12G,KAAKq2G,YAAY,uBACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,eAIR,GAAI12G,KAAKkxG,MAAM,CAAC,EAAM,EAAM,EAAM,KAAUlxG,KAAKrJ,OAAOM,QAAU,GAAI,CACrE,MAAMshH,EAAWv4G,KAAKrJ,OAAOijB,aAAa,IAC1C,GAAI2+F,EAAW,IAAMv4G,KAAKrJ,OAAOM,QAAUshH,EAAW,GACrD,IACC,MAAM9tF,EAASzqB,KAAKrJ,OAAOmC,MAAM,GAAIy/G,EAAW,IAAI9lG,WAGpD,GAFa4Z,KAAKjJ,MAAMqH,GAEfwqB,MACR,MAAO,CACN58B,IAAK,OACLq+F,KAAM,qBAGT,CAAE,MAAO,CAEX,CAEA,GAAI12G,KAAKkxG,MAAM,CAAC,EAAM,GAAM,GAAM,GAAM,EAAM,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,EAAM,IAC7F,MAAO,CACN74F,IAAK,MACLq+F,KAAM,mBAIR,GAAI12G,KAAKq2G,YAAY,OAAQ,CAACn/G,OAAQ,KACrC,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,eAKR,GAAI12G,KAAKkxG,MAAM,CAAC,MAAUlxG,KAAKkxG,MAAM,CAAC,IAAO,CAACh6G,OAAQ,MACrD,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,cAKR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAO,CAACh6G,OAAQ,KAAO8I,KAAKkxG,MAAM,CAAC,IAAO,CAACh6G,OAAQ,MAClE,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,cAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAAO,CAACh6G,OAAQ,KACzE,MAAO,CACNmhB,IAAK,OACLq+F,KAAM,kCAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,GAAM,GAAM,IAAO,CAACh6G,OAAQ,MACjD,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,qBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,EAAM,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,IAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,KACjI,MAAO,CACN74F,IAAK,MACLq+F,KAAM,6BAIR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAM,IAAM,IAAM,IAAM,EAAM,EAAM,EAAM,EAAM,IAAM,GAAM,IAAM,IAAM,EAAM,EAAM,EAAM,IACzG,MAAO,CACN74F,IAAK,QACLq+F,KAAM,6BAIR,GACC12G,KAAKkxG,MAAM,CAAC,GAAM,IAAO,CAACh6G,OAAQ,OAEjC8I,KAAKkxG,MAAM,CAAC,EAAM,EAAM,GAAO,CAACh6G,OAAQ,KACrC8I,KAAKkxG,MAAM,CAAC,EAAM,EAAM,GAAO,CAACh6G,OAAQ,KACxC8I,KAAKkxG,MAAM,CAAC,EAAM,EAAM,GAAO,CAACh6G,OAAQ,KAG5C,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,iCAIR,GAAI12G,KAAKkxG,MAAM,CAAC,EAAM,EAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,KACzG,MAAO,CACN74F,IAAK,OACLq+F,KAAM,0BAQR,SAHMhV,EAAU8U,WAAWx2G,KAAKrJ,OAAQ,CAACM,OAAQgC,KAAKkN,IAAI,IAAKu7F,EAAU6U,SAAS9+G,MAAOg/G,WAAW,IDx5C/F,SAAkC9/G,EAAQO,EAAS,GACzD,MAAMshH,EAAUnzG,OAAOoP,SAAS9d,EAAO8b,SAAS,OAAQ,IAAK,KAAKhS,QAAQ,QAAS,IAAIwN,OAAQ,GAC/F,GAAI5I,OAAOif,MAAMk0F,GAChB,OAAO,EAGR,IAAIruB,EAAM,IAEV,IAAK,IAAI3oE,EAAQtqB,EAAQsqB,EAAQtqB,EAAS,IAAKsqB,IAC9C2oE,GAAOxzF,EAAO6qB,GAGf,IAAK,IAAIA,EAAQtqB,EAAS,IAAKsqB,EAAQtqB,EAAS,IAAKsqB,IACpD2oE,GAAOxzF,EAAO6qB,GAGf,OAAOg3F,IAAYruB,CACpB,CC04CMsuB,CAAyBz4G,KAAKrJ,QACjC,MAAO,CACN0hB,IAAK,MACLq+F,KAAM,qBAIR,GAAI12G,KAAKkxG,MAAM,CAAC,IAAM,MACrB,OAAIlxG,KAAKkxG,MAAM,CAAC,GAAI,EAAG,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,GAAI,CAACh6G,OAAQ,IACxD,CACNmhB,IAAK,MACLq+F,KAAM,mBAIJ12G,KAAKkxG,MAAM,CAAC,IAAM,GAAM,GAAM,EAAM,IAAM,EAAM,IAAM,EAAM,IAAM,EAAM,GAAM,EAAM,IAAM,EAAM,GAAM,EAAM,IAAM,EAAM,GAAM,EAAM,GAAM,EAAM,IAAM,EAAM,IAAM,EAAM,IAAM,EAAM,IAAM,GAAO,CAACh6G,OAAQ,IACtM,CACNmhB,IAAK,MACLq+F,KAAM,qCAIR,EAGD,GAAI12G,KAAKq2G,YAAY,+BACpB,MAAO,CACNh+F,IAAK,MACLq+F,KAAM,6BAKR,GAAI12G,KAAKrJ,OAAOM,QAAU,GAAK+I,KAAKkxG,MAAM,CAAC,IAAM,KAAO,CAACh6G,OAAQ,EAAGw+C,KAAM,CAAC,IAAM,OAAS,CACzF,GAAI11C,KAAKkxG,MAAM,CAAC,IAAO,CAACh6G,OAAQ,EAAGw+C,KAAM,CAAC,MAEzC,OAAI11C,KAAKkxG,MAAM,CAAC,GAAO,CAACh6G,OAAQ,EAAGw+C,KAAM,CAAC,KAClC,CACNr9B,IAAK,MACLq+F,KAAM,aAaT,GAAI12G,KAAKkxG,MAAM,CAAC,GAAO,CAACh6G,OAAQ,EAAGw+C,KAAM,CAAC,KACzC,MAAO,CACNr9B,IAAK,MACLq+F,KAAM,cAKR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAO,CAACh6G,OAAQ,EAAGw+C,KAAM,CAAC,KACzC,MAAO,CACNr9B,IAAK,MACLq+F,KAAM,cAKR,GAAI12G,KAAKkxG,MAAM,CAAC,GAAO,CAACh6G,OAAQ,EAAGw+C,KAAM,CAAC,KACzC,MAAO,CACNr9B,IAAK,MACLq+F,KAAM,aAGT,CACD,CAEAz4G,kBAAkBy6G,GACjB,MAAMC,QAAc34G,KAAK0hG,UAAUmV,UAAU6B,EAAY,KAAkB,KAE3E,OADA14G,KAAK0hG,UAAUiV,OAAO,IACdgC,GACP,KAAK,MACJ,MAAO,CACNtgG,IAAK,MACLq+F,KAAM,oBAER,KAAK,MACJ,MAAO,CACNr+F,IAAK,MACLq+F,KAAM,qBAIV,CAEAz4G,kBAAkBy6G,GACjB,MAAME,QAAqB54G,KAAK0hG,UAAUmV,UAAU6B,EAAY,KAAkB,KAClF,IAAK,IAAIjgH,EAAI,EAAGA,EAAImgH,IAAgBngH,EAAG,CACtC,MAAMg/G,QAAiBz3G,KAAK64G,YAAYH,GACxC,GAAIjB,EACH,OAAOA,CAET,CACD,CAEAx5G,qBAAqBy6G,GACpB,MAAMt4F,GAAWs4F,EAAY,KAAkB,KAAiB/3G,IAAIX,KAAKrJ,OAAQ,GAC3EmiH,GAAaJ,EAAY,KAAkB,MAAiB/3G,IAAIX,KAAKrJ,OAAQ,GAEnF,GAAgB,KAAZypB,EAAgB,CAEnB,GAAI04F,GAAa,EAAG,CACnB,GAAI94G,KAAKq2G,YAAY,KAAM,CAACn/G,OAAQ,IACnC,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,qBAIR,GAAIoC,GAAa,IAAM94G,KAAKkxG,MAAM,CAAC,GAAM,EAAM,IAAM,GAAO,CAACh6G,OAAQ,KAAO8I,KAAKkxG,MAAM,CAAC,GAAM,EAAM,GAAM,GAAO,CAACh6G,OAAQ,KACzH,MAAO,CACNmhB,IAAK,MACLq+F,KAAM,oBAGT,OAEM12G,KAAK0hG,UAAUiV,OAAOmC,GAE5B,aADuB94G,KAAK+4G,YAAYL,IACrB,CAClBrgG,IAAK,MACLq+F,KAAM,aAER,CAEA,GAAgB,KAAZt2F,EACH,MAAO,CACN/H,IAAK,MACLq+F,KAAM,aAGT,EAsCkC,IAAIrtG,ICzlDb,CACzB,MACA,MACA,OACA,MACA,OACA,OACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,OACA,MACA,MACA,MACA,KACA,MACA,KACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,MACA,MACA,OACA,OACA,QACA,MACA,MACA,MACA,MACA,MACA,KACA,KACA,SACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,IACA,KACA,MACA,MACA,MACA,QACA,MACA,OACA,OACA,OACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,OACA,MACA,MACA,QACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,QACA,MACA,MACA,MACA,KACA,MACA,KACA,KACA,MACA,OACA,MACA,MACA,MACA,OACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,UACA,QACA,MACA,OACA,QDs8CiC,IAAIA,ICn8Cb,CACxB,aACA,YACA,YACA,aACA,aACA,cACA,oBACA,oBACA,aACA,YACA,qBACA,4BACA,yBACA,uBACA,0BACA,0CACA,iDACA,kDACA,0EACA,4EACA,oEACA,kBACA,oBACA,+BACA,mBACA,sBACA,8BACA,gCACA,6BACA,YACA,aACA,mBACA,aACA,kBACA,gBACA,iBACA,cACA,iBACA,iBACA,yBACA,aACA,aACA,aACA,YACA,aACA,YACA,YACA,kBACA,eACA,YACA,gBACA,YACA,kBACA,oBACA,2BACA,gCACA,kBACA,mBACA,YACA,aACA,gCACA,WACA,WACA,eACA,cACA,yBACA,kBACA,mBACA,wBACA,iCACA,wCACA,oCACA,oBACA,6BACA,oBACA,yBACA,qBACA,oBACA,oBACA,kBACA,aACA,wBACA,YACA,YACA,YACA,YACA,YACA,YACA,aACA,kBACA,iCACA,aACA,sBACA,aACA,sBACA,aACA,YACA,oBACA,mBACA,gBACA,aACA,oBACA,+BACA,cACA,4BACA,4BACA,cACA,yBACA,cACA,aACA,sBACA,mBACA,oBACA,oBACA,wBACA,uBACA,cACA,cACA,2BACA,YACA,aACA,cACA,aACA,aACA,aACA,+BACA,aACA,+BACA,4BACA,qBACA,YACA,8BACA,YACA,YACA,mBACA,YACA,6BACA,gBACA,wBACA,sBACA,oBACA,qBACA,qGCtSM,MAAM2vG,EAAwB,CACjC51F,MAAOiJ,KAAKjJ,MACZ+c,UAAW9T,KAAK8T,gDCKpB,MAAM84E,EAA6Bp6G,GAAUm2C,EAAkBn2C,IAChD,OAAVA,GAAmC,iBAAVA,GAA4C,mBAAfA,EAAMq6G,KAqCjE,MA/B0B,CAAC91E,EAAO+1E,EAAWC,EAAeC,EAAiBL,KACzE,MAAM,MAAE5rF,EAAK,MAAE6nB,GAAUF,EAAa,CAAE3R,QAAO+1E,YAAWC,iBAAiB,GAAIH,GAC/E,GAAmB,IAAfhkE,EAAMx9C,KAAY,CAClB,IAAKmB,MAAM+S,QAAQy3B,GACf,OAAOi2E,EAAel5E,UAAU/S,GAEpC,QAAyB,IAAd+rF,IAA8BvgH,MAAM+S,QAAQwtG,GACnD,MAAM,IAAI5gH,MAAM,uEAGpB,MAAM+7E,EAAUlxC,EAAM1c,QAAO,CAAC4yF,EAAMC,EAAc/3F,KAC9C83F,EAAK5hH,KAAK,CAAE0rC,MAAOm2E,EAAcJ,UAAWA,EAAYA,EAAU33F,QAAS3b,IACpEyzG,IACR,IACH,OAAOD,EAAel5E,UAAUm0C,EACpC,CACA,MACMvnD,EAAO,IADoB,oBAAbrB,SAA2B,EAAeA,UAE9DqB,EAAKvC,OAAO,aAAc6uF,EAAel5E,UAAU/S,IACnD,MAAMrd,EAAM,CAAC,EACb,IAAIzU,EAAI,EASR,OARA25C,EAAM70C,SAAS+0C,IACXplC,IAAMzU,GAAK65C,CAAK,IAEpBpoB,EAAKvC,OAAO,MAAO6uF,EAAel5E,UAAUpwB,IAC5CzU,EAAI,EACJ25C,EAAM70C,SAAQ,CAAC+0C,EAAO/8C,KAClB20B,EAAKvC,OAAO,MAAKlvB,EAAKlD,EAAK,IAExB20B,CAAI,EC3CR,MC6BMysF,EAA2B,CAACC,EAAcviF,KAAawiF,KAChE,MAAOP,EAAWQ,GAAkBD,EACpC,OAAOD,EAAaviF,SACduiF,EACA,CACE9sF,IAAK8sF,EACLviF,SAAUA,EACViiF,YACAQ,iBACAx6F,YAAQtZ,EACX,2BC/BT,MAAM+zG,EAAgB,gCAEtB,SAASC,EAAgBx+G,GACvB,OAAOy+G,EAAgBz+G,EAAIG,WAAW,GACxC,CAEA,MAAMs+G,EAAkB,CACtB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,MACA,MACA,MACA,UACA,MACA,MACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,GACA,GACA,MACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,OACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,G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","sources":["webpack://cyb/./node_modules/@assemblyscript/loader/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/protobufjs/minimal.js","webpack://cyb/./node_modules/abstract-level/abstract-chained-batch.js","webpack://cyb/./node_modules/abstract-level/abstract-iterator.js","webpack://cyb/./node_modules/abstract-level/abstract-level.js","webpack://cyb/./node_modules/abstract-level/index.js","webpack://cyb/./node_modules/abstract-level/lib/abstract-sublevel-iterator.js","webpack://cyb/./node_modules/abstract-level/lib/abstract-sublevel.js","webpack://cyb/./node_modules/abstract-level/lib/common.js","webpack://cyb/./node_modules/abstract-level/lib/default-chained-batch.js","webpack://cyb/./node_modules/abstract-level/lib/default-kv-iterator.js","webpack://cyb/./node_modules/abstract-level/lib/deferred-iterator.js","webpack://cyb/./node_modules/abstract-level/lib/next-tick-browser.js","webpack://cyb/./node_modules/abstract-level/lib/range-options.js","webpack://cyb/./node_modules/abstract-level/node_modules/buffer/index.js","webpack://cyb/./node_modules/any-signal/index.js","webpack://cyb/./node_modules/browser-level/index.js","webpack://cyb/./node_modules/browser-level/iterator.js","webpack://cyb/./node_modules/browser-level/util/clear.js","webpack://cyb/./node_modules/browser-level/util/deserialize.js","webpack://cyb/./node_modules/browser-level/util/key-range.js","webpack://cyb/./node_modules/buffer/index.js","webpack://cyb/./node_modules/bytes/index.js","webpack://cyb/./node_modules/catering/index.js","webpack://cyb/./node_modules/catering/next-tick-browser.js","webpack://cyb/./node_modules/comlink/dist/esm/comlink.mjs","webpack://cyb/./node_modules/cross-fetch/dist/browser-ponyfill.js","webpack://cyb/./node_modules/delay/index.js","webpack://cyb/./node_modules/denque/index.js","webpack://cyb/./node_modules/dexie/dist/modern/dexie.min.mjs","webpack://cyb/./node_modules/dlv/dist/dlv.umd.js","webpack://cyb/./node_modules/event-iterator/lib/dom.js","webpack://cyb/./node_modules/extract-files/public/ReactNativeFile.js","webpack://cyb/./node_modules/extract-files/public/extractFiles.js","webpack://cyb/./node_modules/extract-files/public/isExtractableFile.js","webpack://cyb/./node_modules/fast-fifo/fixed-size.js","webpack://cyb/./node_modules/fast-fifo/index.js","webpack://cyb/./node_modules/fast-xml-parser/src/fxp.js","webpack://cyb/./node_modules/fast-xml-parser/src/util.js","webpack://cyb/./node_modules/fast-xml-parser/src/validator.js","webpack://cyb/./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js","webpack://cyb/./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js","webpack://cyb/./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js","webpack://cyb/./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js","webpack://cyb/./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js","webpack://cyb/./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js","webpack://cyb/./node_modules/fast-xml-parser/src/xmlparser/node2json.js","webpack://cyb/./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js","webpack://cyb/./node_modules/fnv1a/index.js","webpack://cyb/./node_modules/graphql-request/node_modules/form-data/lib/browser.js","webpack://cyb/./node_modules/graphql-tag/lib/index.js","webpack://cyb/./node_modules/graphql/jsutils/devAssert.mjs","webpack://cyb/./node_modules/graphql/jsutils/inspect.mjs","webpack://cyb/./node_modules/graphql/language/ast.mjs","webpack://cyb/./node_modules/graphql/language/blockString.mjs","webpack://cyb/./node_modules/graphql/language/characterClasses.mjs","webpack://cyb/./node_modules/graphql/language/kinds.mjs","webpack://cyb/./node_modules/graphql/jsutils/invariant.mjs","webpack://cyb/./node_modules/graphql/language/location.mjs","webpack://cyb/./node_modules/graphql/language/printLocation.mjs","webpack://cyb/./node_modules/graphql/error/GraphQLError.mjs","webpack://cyb/./node_modules/graphql/jsutils/isObjectLike.mjs","webpack://cyb/./node_modules/graphql/error/syntaxError.mjs","webpack://cyb/./node_modules/graphql/language/directiveLocation.mjs","webpack://cyb/./node_modules/graphql/language/tokenKind.mjs","webpack://cyb/./node_modules/graphql/language/lexer.mjs","webpack://cyb/./node_modules/graphql/jsutils/instanceOf.mjs","webpack://cyb/./node_modules/graphql/language/source.mjs","webpack://cyb/./node_modules/graphql/language/parser.mjs","webpack://cyb/./node_modules/hashlru/index.js","webpack://cyb/./node_modules/helia/node_modules/eventemitter3/index.js","webpack://cyb/./node_modules/helia/node_modules/rate-limiter-flexible/index.js","webpack://cyb/./node_modules/ieee754/index.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/denque/index.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/protobufjs/minimal.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/protobufjs/src/index-minimal.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/protobufjs/src/reader.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/protobufjs/src/reader_buffer.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/protobufjs/src/roots.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/protobufjs/src/rpc.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/protobufjs/src/rpc/service.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/protobufjs/src/util/longbits.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/protobufjs/src/util/minimal.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/protobufjs/src/writer.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/protobufjs/src/writer_buffer.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/protobufjs/minimal.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/protobufjs/src/index-minimal.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/protobufjs/src/reader.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/protobufjs/src/reader_buffer.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/protobufjs/src/roots.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/protobufjs/src/rpc.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/protobufjs/src/rpc/service.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/protobufjs/src/util/longbits.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/protobufjs/src/util/minimal.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/protobufjs/src/writer.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/protobufjs/src/writer_buffer.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/message/rpc.cjs","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/message-cache.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/compute-score.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/constants.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/scoreMetrics.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/shuffle.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/time-cache.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/@libp2p/crypto/dist/src/keys/keys.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/@libp2p/crypto/dist/src/random-bytes.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/@multiformats/multiaddr/node_modules/uint8arrays/dist/src/util/bases.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/get-iterator/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/it-pushable/dist/src/fifo.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/multiformats/src/bytes.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/multiformats/src/cid.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/multiformats/src/hashes/digest.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/multiformats/src/hashes/identity.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/multiformats/vendor/varint.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/multiformats/src/varint.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/uint8arrays/dist/src/util/bases.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/constants.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/crypto/js.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/encoder.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/@libp2p/crypto/dist/src/keys/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/@libp2p/peer-id/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/proto/payload.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/utils.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/logger.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/handshakes/abstract-handshake.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/handshakes/xx.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/handshake-xx.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/noise.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/crypto/streaming.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/metrics.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/dist/src/nonce.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/@libp2p/crypto/dist/src/keys/keys.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/it-pair/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/it-pair/dist/src/duplex.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/multiformats/src/bases/base32.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/multiformats/src/bases/base58.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/multiformats/src/bytes.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/multiformats/src/cid.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/multiformats/src/hashes/digest.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/multiformats/src/hashes/identity.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/multiformats/src/hashes/sha2-browser.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/multiformats/vendor/varint.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/multiformats/src/varint.js","webpack://cyb/./node_modules/@chainsafe/libp2p-noise/node_modules/uint8arrays/dist/src/util/bases.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/node_modules/@libp2p/logger/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/node_modules/abortable-iterator/dist/src/abort-error.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/node_modules/abortable-iterator/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/node_modules/it-pushable/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/dist/src/constants.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/dist/src/config.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/dist/src/frame.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/dist/src/decode.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/dist/src/encode.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/dist/src/stream.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/dist/src/muxer.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/node_modules/get-iterator/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/node_modules/it-foreach/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-yamux/node_modules/it-pushable/dist/src/fifo.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/it-first/dist/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/it-batch/dist/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/it-parallel-batch/dist/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/chunker/fixed-size.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs/dist/src/unixfs.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs/dist/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/src/bytes.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/src/codecs/raw.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/vendor/base-x.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/src/bases/base.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/src/bases/base32.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/src/bases/base58.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/vendor/varint.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/src/varint.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/src/hashes/digest.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/src/cid.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/src/hashes/hasher.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/src/hashes/sha2-browser.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/utils/persist.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/dag-builder/buffer-importer.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/dag-builder/dir.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/dag-builder/file.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/dag-builder/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/dag-builder/validate-chunks.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/layout/balanced.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/dir.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/dir-flat.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/node_modules/@multiformats/murmur3/node_modules/multiformats/src/bytes.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/node_modules/@multiformats/murmur3/node_modules/multiformats/vendor/varint.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/node_modules/@multiformats/murmur3/node_modules/multiformats/src/varint.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/node_modules/@multiformats/murmur3/node_modules/multiformats/src/hashes/digest.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/node_modules/@multiformats/murmur3/node_modules/multiformats/src/hashes/hasher.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/node_modules/@multiformats/murmur3/node_modules/multiformats/vendor/base-x.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/node_modules/@multiformats/murmur3/node_modules/multiformats/src/bases/base.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/node_modules/@multiformats/murmur3/node_modules/multiformats/src/bases/base58.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/node_modules/@multiformats/murmur3/node_modules/multiformats/src/bases/base32.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/node_modules/@multiformats/murmur3/node_modules/multiformats/src/cid.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/node_modules/@multiformats/murmur3/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/dir-sharded.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/flat-to-shard.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/utils/to-path-components.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/tree-builder.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-importer/dist/src/chunker/rabin.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/add.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/it-last/dist/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/src/hashes/identity.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/dist/src/resolvers/dag-cbor.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/dist/src/utils/extract-data-from-block.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/dist/src/utils/validate-offset-and-length.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/dist/src/resolvers/identity.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/dist/src/resolvers/raw.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/node_modules/@multiformats/murmur3/node_modules/multiformats/src/bytes.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/node_modules/@multiformats/murmur3/node_modules/multiformats/vendor/varint.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/node_modules/@multiformats/murmur3/node_modules/multiformats/src/varint.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/node_modules/@multiformats/murmur3/node_modules/multiformats/src/hashes/digest.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/node_modules/@multiformats/murmur3/node_modules/multiformats/src/hashes/hasher.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/node_modules/@multiformats/murmur3/node_modules/multiformats/vendor/base-x.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/node_modules/@multiformats/murmur3/node_modules/multiformats/src/bases/base.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/node_modules/@multiformats/murmur3/node_modules/multiformats/src/bases/base58.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/node_modules/@multiformats/murmur3/node_modules/multiformats/src/bases/base32.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/node_modules/@multiformats/murmur3/node_modules/multiformats/src/cid.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/node_modules/@multiformats/murmur3/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/dist/src/utils/find-cid-in-shard.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/it-filter/dist/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/it-map/dist/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/dist/src/resolvers/unixfs-v1/content/directory.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/dist/src/resolvers/unixfs-v1/content/file.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/dist/src/resolvers/unixfs-v1/content/hamt-sharded-directory.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/dist/src/resolvers/unixfs-v1/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/dist/src/resolvers/index.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/ipfs-unixfs-exporter/dist/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/errors.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/multiformats/src/bases/base64.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/@libp2p/logger/dist/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/utils/consumable-hash.js","webpack://cyb/./node_modules/@helia/unixfs/node_modules/@multiformats/murmur3/src/index.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/utils/hamt-constants.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/utils/persist.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/utils/dir-sharded.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/utils/hamt-utils.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/utils/is-over-shard-threshold.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/utils/add-link.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/utils/cid-to-directory.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/utils/cid-to-pblink.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/utils/resolve.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/cat.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/utils/constants.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/chmod.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/cp.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/ls.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/mkdir.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/utils/remove-link.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/rm.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/stat.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/commands/touch.js","webpack://cyb/./node_modules/@helia/unixfs/dist/src/index.js","webpack://cyb/./node_modules/abortable-iterator/dist/src/abort-error.js","webpack://cyb/./node_modules/abortable-iterator/dist/src/index.js","webpack://cyb/./node_modules/abortable-iterator/node_modules/get-iterator/dist/src/index.js","webpack://cyb/./node_modules/array-shuffle/index.js","webpack://cyb/./node_modules/blockstore-core/dist/src/base.js","webpack://cyb/./node_modules/blockstore-core/dist/src/errors.js","webpack://cyb/./node_modules/blockstore-core/node_modules/multiformats/vendor/varint.js","webpack://cyb/./node_modules/blockstore-core/node_modules/multiformats/src/varint.js","webpack://cyb/./node_modules/blockstore-core/node_modules/multiformats/src/hashes/digest.js","webpack://cyb/./node_modules/blockstore-core/node_modules/multiformats/src/cid.js","webpack://cyb/./node_modules/blockstore-core/dist/src/memory.js","webpack://cyb/./node_modules/blockstore-core/node_modules/multiformats/src/codecs/raw.js","webpack://cyb/./node_modules/blockstore-core/dist/src/index.js","webpack://cyb/./node_modules/blockstore-core/node_modules/multiformats/src/bases/base32.js","webpack://cyb/./node_modules/blockstore-core/node_modules/multiformats/src/bases/base58.js","webpack://cyb/./node_modules/blockstore-core/node_modules/multiformats/src/bytes.js","webpack://cyb/./node_modules/blockstore-idb/node_modules/multiformats/vendor/base-x.js","webpack://cyb/./node_modules/blockstore-idb/node_modules/multiformats/src/bytes.js","webpack://cyb/./node_modules/blockstore-idb/node_modules/multiformats/src/bases/base.js","webpack://cyb/./node_modules/blockstore-idb/node_modules/multiformats/src/bases/base32.js","webpack://cyb/./node_modules/blockstore-idb/node_modules/multiformats/src/bases/base58.js","webpack://cyb/./node_modules/blockstore-idb/node_modules/multiformats/vendor/varint.js","webpack://cyb/./node_modules/blockstore-idb/node_modules/multiformats/src/varint.js","webpack://cyb/./node_modules/blockstore-idb/node_modules/multiformats/src/hashes/digest.js","webpack://cyb/./node_modules/blockstore-idb/node_modules/multiformats/src/cid.js","webpack://cyb/./node_modules/blockstore-idb/dist/src/index.js","webpack://cyb/./node_modules/blockstore-idb/node_modules/multiformats/src/codecs/raw.js","webpack://cyb/./node_modules/browser-readablestream-to-it/dist/src/index.js","webpack://cyb/./node_modules/byte-access/dist/src/index.js","webpack://cyb/./node_modules/cborg/esm/lib/byte-utils.js","webpack://cyb/./node_modules/cborg/esm/lib/common.js","webpack://cyb/./node_modules/cborg/esm/lib/decode.js","webpack://cyb/./node_modules/cborg/esm/lib/encode.js","webpack://cyb/./node_modules/cborg/esm/lib/json/encode.js","webpack://cyb/./node_modules/cborg/esm/lib/json/decode.js","webpack://cyb/./node_modules/cborg/esm/lib/jump.js","webpack://cyb/./node_modules/cborg/esm/lib/token.js","webpack://cyb/./node_modules/dag-jose/lib/utils.js","webpack://cyb/./node_modules/dag-jose/lib/signing.js","webpack://cyb/./node_modules/dag-jose/lib/encryption.js","webpack://cyb/./node_modules/dag-jose/lib/index.js","webpack://cyb/./node_modules/datastore-core/node_modules/it-drain/dist/src/index.js","webpack://cyb/./node_modules/datastore-core/node_modules/it-filter/dist/src/index.js","webpack://cyb/./node_modules/datastore-core/node_modules/it-all/dist/src/index.js","webpack://cyb/./node_modules/datastore-core/node_modules/it-sort/dist/src/index.js","webpack://cyb/./node_modules/datastore-core/node_modules/it-take/dist/src/index.js","webpack://cyb/./node_modules/datastore-core/dist/src/base.js","webpack://cyb/./node_modules/datastore-core/dist/src/errors.js","webpack://cyb/./node_modules/datastore-core/dist/src/memory.js","webpack://cyb/./node_modules/datastore-idb/node_modules/interface-datastore/dist/src/key.js","webpack://cyb/./node_modules/datastore-idb/node_modules/it-filter/dist/src/index.js","webpack://cyb/./node_modules/datastore-idb/node_modules/it-all/dist/src/index.js","webpack://cyb/./node_modules/datastore-idb/node_modules/it-sort/dist/src/index.js","webpack://cyb/./node_modules/datastore-idb/dist/src/index.js","webpack://cyb/./node_modules/datastore-pubsub/node_modules/datastore-core/src/shard.js","webpack://cyb/./node_modules/datastore-pubsub/node_modules/datastore-core/src/utils.js","webpack://cyb/./node_modules/datastore-pubsub/node_modules/it-all/dist/src/index.js","webpack://cyb/./node_modules/datastore-pubsub/node_modules/datastore-core/src/base.js","webpack://cyb/./node_modules/datastore-pubsub/node_modules/datastore-core/src/sharding.js","webpack://cyb/./node_modules/datastore-pubsub/node_modules/datastore-core/src/tiered.js","webpack://cyb/./node_modules/datastore-pubsub/src/utils.js","webpack://cyb/./node_modules/datastore-pubsub/src/index.js","webpack://cyb/./node_modules/engine.io-parser/build/esm/commons.js","webpack://cyb/./node_modules/engine.io-parser/build/esm/encodePacket.browser.js","webpack://cyb/./node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","webpack://cyb/./node_modules/engine.io-parser/build/esm/decodePacket.browser.js","webpack://cyb/./node_modules/engine.io-parser/build/esm/index.js","webpack://cyb/./node_modules/engine.io-client/build/esm/globalThis.browser.js","webpack://cyb/./node_modules/engine.io-client/build/esm/util.js","webpack://cyb/./node_modules/engine.io-client/build/esm/transport.js","webpack://cyb/./node_modules/engine.io-client/build/esm/contrib/yeast.js","webpack://cyb/./node_modules/engine.io-client/build/esm/contrib/parseqs.js","webpack://cyb/./node_modules/engine.io-client/build/esm/contrib/has-cors.js","webpack://cyb/./node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js","webpack://cyb/./node_modules/engine.io-client/build/esm/transports/polling.js","webpack://cyb/./node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js","webpack://cyb/./node_modules/engine.io-client/build/esm/transports/websocket.js","webpack://cyb/./node_modules/engine.io-client/build/esm/transports/index.js","webpack://cyb/./node_modules/engine.io-client/build/esm/contrib/parseuri.js","webpack://cyb/./node_modules/engine.io-client/build/esm/socket.js","webpack://cyb/./node_modules/engine.io-client/build/esm/index.js","webpack://cyb/./node_modules/file-type/util.js","webpack://cyb/./node_modules/file-type/core.js","webpack://cyb/./node_modules/file-type/supported.js","webpack://cyb/./node_modules/graphql-request/build/esm/defaultJsonSerializer.js","webpack://cyb/./node_modules/graphql-request/build/esm/createRequestBody.js","webpack://cyb/./node_modules/graphql-request/build/esm/helpers.js","webpack://cyb/./node_modules/graphql-request/build/esm/parseArgs.js","webpack://cyb/./node_modules/graphql/language/printString.mjs","webpack://cyb/./node_modules/graphql/language/visitor.mjs","webpack://cyb/./node_modules/graphql/language/printer.mjs","webpack://cyb/./node_modules/graphql-request/build/esm/resolveRequestDocument.js","webpack://cyb/./node_modules/graphql-request/build/esm/types.js","webpack://cyb/./node_modules/graphql-request/build/esm/index.js","webpack://cyb/./node_modules/hamt-sharding/dist/src/bucket.js","webpack://cyb/./node_modules/hamt-sharding/dist/src/consumable-buffer.js","webpack://cyb/./node_modules/hamt-sharding/dist/src/consumable-hash.js","webpack://cyb/./node_modules/hamt-sharding/dist/src/index.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/logger/dist/src/index.js","webpack://cyb/./node_modules/ipfs-bitswap/node_modules/multiformats/src/bases/base32.js","webpack://cyb/./node_modules/ipfs-bitswap/node_modules/multiformats/src/cid.js","webpack://cyb/./node_modules/ipfs-bitswap/node_modules/@libp2p/logger/dist/src/index.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/utils/index.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/message/index.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/wantlist/index.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/decision-engine/ledger.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/utils/sorted-map.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/decision-engine/req-queue.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/decision-engine/task-merger.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/decision-engine/index.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/constants.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/network.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/notifications.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/stats/stat.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/stats/index.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/want-manager/msg-queue.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/want-manager/index.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/bitswap.js","webpack://cyb/./node_modules/helia/node_modules/p-queue/dist/priority-queue.js","webpack://cyb/./node_modules/helia/node_modules/p-queue/dist/index.js","webpack://cyb/./node_modules/helia/dist/src/pins.js","webpack://cyb/./node_modules/helia/dist/src/storage.js","webpack://cyb/./node_modules/helia/dist/src/utils/datastore-version.js","webpack://cyb/./node_modules/helia/dist/src/utils/networked-storage.js","webpack://cyb/./node_modules/helia/dist/src/helia.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/@libp2p/peer-id/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/@libp2p/logger/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/message/rpc.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/constants.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/messageIdToString.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/@libp2p/crypto/dist/src/keys/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/types.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/peer-score-params.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/peer-score-thresholds.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/message-deliveries.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/set.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/peer-score.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/tracer.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/metrics.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/buildRawMessage.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/msgIdFn.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/@libp2p/pubsub/dist/src/utils.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/it-pushable/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/abortable-iterator/dist/src/abort-error.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/abortable-iterator/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/stream.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/message/decodeRpc.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/@multiformats/multiaddr/node_modules/uint8arrays/dist/src/to-string.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/@multiformats/multiaddr/dist/src/ip.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/node_modules/@multiformats/multiaddr/dist/src/convert.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/multiaddr.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/index.js","webpack://cyb/./node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/publishConfig.js","webpack://cyb/./node_modules/helia/node_modules/abortable-iterator/dist/src/abort-error.js","webpack://cyb/./node_modules/helia/node_modules/abortable-iterator/dist/src/index.js","webpack://cyb/./node_modules/helia/node_modules/it-pushable/dist/src/index.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/mplex/node_modules/uint8arrays/dist/src/util/bases.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/mplex/node_modules/uint8arrays/dist/src/from-string.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/mplex/node_modules/uint8arrays/dist/src/to-string.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/mplex/dist/src/message-types.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/mplex/dist/src/decode.js","webpack://cyb/./node_modules/helia/node_modules/it-batched-bytes/dist/src/index.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/mplex/dist/src/encode.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/mplex/dist/src/stream.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/mplex/dist/src/mplex.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/mplex/dist/src/index.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/crypto/dist/src/keys/index.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/peer-id/dist/src/index.js","webpack://cyb/./node_modules/helia/node_modules/ipns/dist/src/pb/ipns.js","webpack://cyb/./node_modules/helia/node_modules/ipns/dist/src/utils.js","webpack://cyb/./node_modules/helia/node_modules/ipns/dist/src/selector.js","webpack://cyb/./node_modules/helia/node_modules/ipns/dist/src/validator.js","webpack://cyb/./node_modules/helia/dist/src/utils/bootstrappers.js","webpack://cyb/./node_modules/helia/dist/src/utils/libp2p.js","webpack://cyb/./node_modules/helia/dist/src/utils/libp2p-defaults.browser.js","webpack://cyb/./node_modules/helia/dist/src/index.js","webpack://cyb/./node_modules/helia/dist/src/version.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/crypto/dist/src/keys/keys.js","webpack://cyb/./node_modules/helia/node_modules/@libp2p/peer-id/node_modules/uint8arrays/dist/src/equals.js","webpack://cyb/./node_modules/helia/node_modules/cborg/lib/byte-utils.js","webpack://cyb/./node_modules/helia/node_modules/cborg/lib/common.js","webpack://cyb/./node_modules/helia/node_modules/cborg/lib/decode.js","webpack://cyb/./node_modules/helia/node_modules/cborg/lib/encode.js","webpack://cyb/./node_modules/helia/node_modules/cborg/lib/jump.js","webpack://cyb/./node_modules/helia/node_modules/get-iterator/dist/src/index.js","webpack://cyb/./node_modules/helia/node_modules/ipns/dist/src/errors.js","webpack://cyb/./node_modules/helia/node_modules/it-drain/dist/src/index.js","webpack://cyb/./node_modules/helia/node_modules/it-filter/dist/src/index.js","webpack://cyb/./node_modules/helia/node_modules/it-foreach/dist/src/index.js","webpack://cyb/./node_modules/helia/node_modules/it-pushable/dist/src/fifo.js","webpack://cyb/./node_modules/helia/node_modules/multiformats/src/bases/base32.js","webpack://cyb/./node_modules/helia/node_modules/multiformats/src/bases/base36.js","webpack://cyb/./node_modules/helia/node_modules/multiformats/src/bases/base58.js","webpack://cyb/./node_modules/helia/node_modules/multiformats/src/hashes/identity.js","webpack://cyb/./node_modules/helia/node_modules/multiformats/src/hashes/sha2-browser.js","webpack://cyb/./node_modules/helia/node_modules/p-queue/dist/lower-bound.js","webpack://cyb/./node_modules/idb/build/wrap-idb-value.js","webpack://cyb/./node_modules/idb/build/index.js","webpack://cyb/./node_modules/interface-datastore/dist/src/key.js","webpack://cyb/./node_modules/ip-regex/index.js","webpack://cyb/./node_modules/ipfs-bitswap/dist/src/wantlist/entry.js","webpack://cyb/./node_modules/ipfs-bitswap/node_modules/any-signal/dist/src/index.js","webpack://cyb/./node_modules/ipfs-bitswap/node_modules/it-foreach/dist/src/index.js","webpack://cyb/./node_modules/ipfs-bitswap/node_modules/it-map/dist/src/index.js","webpack://cyb/./node_modules/ipfs-bitswap/node_modules/it-take/dist/src/index.js","webpack://cyb/./node_modules/ipfs-bitswap/node_modules/multiformats/src/bases/base58.js","webpack://cyb/./node_modules/ipfs-bitswap/node_modules/multiformats/src/bytes.js","webpack://cyb/./node_modules/ipfs-bitswap/node_modules/multiformats/src/hashes/digest.js","webpack://cyb/./node_modules/ipfs-bitswap/node_modules/multiformats/vendor/varint.js","webpack://cyb/./node_modules/ipfs-bitswap/node_modules/multiformats/src/varint.js","webpack://cyb/./node_modules/ipfs-core-config/src/config.browser.js","webpack://cyb/./node_modules/ipfs-core-config/src/dns.browser.js","webpack://cyb/./node_modules/ipfs-core-config/src/utils/tlru.js","webpack://cyb/./node_modules/ipfs-core-config/src/init-assets.browser.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/it-pipe/dist/src/index.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/message-cache.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/message/rpc.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/constants.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/shuffle.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/messageIdToString.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/types.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/constants.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/peer-score-params.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/peer-score-thresholds.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/compute-score.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/message-deliveries.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/set.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/peer-score.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/tracer.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/time-cache.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/metrics.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/buildRawMessage.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/msgIdFn.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/score/scoreMetrics.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/uint8-varint/dist/src/index.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/it-length-prefixed/dist/src/encode.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/it-length-prefixed/dist/src/alloc.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/it-length-prefixed/dist/src/decode.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/stream.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/message/decodeRpc.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/multiaddr.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/index.js","webpack://cyb/./node_modules/ipfs-core-config/node_modules/@chainsafe/libp2p-gossipsub/dist/src/utils/publishConfig.js","webpack://cyb/./node_modules/ipfs-core-config/src/libp2p-pubsub-routers.browser.js","webpack://cyb/./node_modules/ipfs-core-config/src/libp2p.browser.js","webpack://cyb/./node_modules/ipfs-core-config/src/preload.browser.js","webpack://cyb/./node_modules/datastore-level/node_modules/datastore-core/src/errors.js","webpack://cyb/./node_modules/datastore-level/node_modules/datastore-core/src/shard.js","webpack://cyb/./node_modules/datastore-level/node_modules/datastore-core/src/utils.js","webpack://cyb/./node_modules/datastore-level/node_modules/it-all/dist/src/index.js","webpack://cyb/./node_modules/datastore-level/node_modules/datastore-core/src/base.js","webpack://cyb/./node_modules/datastore-level/node_modules/datastore-core/src/sharding.js","webpack://cyb/./node_modules/datastore-level/node_modules/datastore-core/src/tiered.js","webpack://cyb/./node_modules/datastore-level/src/index.js","webpack://cyb/./node_modules/blockstore-datastore-adapter/node_modules/blockstore-core/src/base.js","webpack://cyb/./node_modules/blockstore-datastore-adapter/node_modules/it-all/dist/src/index.js","webpack://cyb/./node_modules/blockstore-datastore-adapter/src/index.js","webpack://cyb/./node_modules/ipfs-core-config/src/repo.browser.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/ipfs-unixfs/src/unixfs.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/ipfs-unixfs/src/index.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/it-all/dist/src/index.js","webpack://cyb/./node_modules/ipfs-core-utils/node_modules/it-peekable/dist/src/index.js","webpack://cyb/./node_modules/ipfs-core-utils/src/agent.browser.js","webpack://cyb/./node_modules/ipfs-core-utils/src/files/normalise-candidate-multiple.js","webpack://cyb/./node_modules/ipfs-core-utils/src/files/normalise-content.js","webpack://cyb/./node_modules/blob-to-it/dist/src/index.js","webpack://cyb/./node_modules/ipfs-core-utils/src/files/normalise-input-multiple.js","webpack://cyb/./node_modules/ipfs-core-utils/src/files/normalise-candidate-single.js","webpack://cyb/./node_modules/ipfs-core-utils/src/files/normalise-input-single.js","webpack://cyb/./node_modules/ipfs-core-utils/src/files/utils.js","webpack://cyb/./node_modules/ipfs-core-utils/src/multibases.js","webpack://cyb/./node_modules/ipfs-core-utils/src/multicodecs.js","webpack://cyb/./node_modules/ipfs-core-utils/src/multihashes.js","webpack://cyb/./node_modules/ipfs-core-utils/src/files/normalise-content.browser.js","webpack://cyb/./node_modules/ipfs-core-utils/src/mode-to-string.js","webpack://cyb/./node_modules/ipfs-core-utils/src/multipart-request.browser.js","webpack://cyb/./node_modules/ipfs-core-utils/src/files/normalise-input-multiple.browser.js","webpack://cyb/./node_modules/ipfs-core-utils/src/pins/normalise-input.js","webpack://cyb/./node_modules/ipfs-core-utils/src/to-cid-and-path.js","webpack://cyb/./node_modules/ipfs-core-utils/src/to-url-string.js","webpack://cyb/./node_modules/ipfs-core-utils/src/errors.js","webpack://cyb/./node_modules/ipfs-core-utils/src/with-timeout-option.js"],"sourcesContent":["\"use strict\";\n\n// Runtime header offsets\nconst ID_OFFSET = -8;\nconst SIZE_OFFSET = -4;\n\n// Runtime ids\nconst ARRAYBUFFER_ID = 0;\nconst STRING_ID = 1;\nconst ARRAYBUFFERVIEW_ID = 2;\n\n// Runtime type information\nconst ARRAYBUFFERVIEW = 1 << 0;\nconst ARRAY = 1 << 1;\nconst SET = 1 << 2;\nconst MAP = 1 << 3;\nconst VAL_ALIGN_OFFSET = 5;\nconst VAL_ALIGN = 1 << VAL_ALIGN_OFFSET;\nconst VAL_SIGNED = 1 << 10;\nconst VAL_FLOAT = 1 << 11;\nconst VAL_NULLABLE = 1 << 12;\nconst VAL_MANAGED = 1 << 13;\nconst KEY_ALIGN_OFFSET = 14;\nconst KEY_ALIGN = 1 << KEY_ALIGN_OFFSET;\nconst KEY_SIGNED = 1 << 19;\nconst KEY_FLOAT = 1 << 20;\nconst KEY_NULLABLE = 1 << 21;\nconst KEY_MANAGED = 1 << 22;\n\n// Array(BufferView) layout\nconst ARRAYBUFFERVIEW_BUFFER_OFFSET = 0;\nconst ARRAYBUFFERVIEW_DATASTART_OFFSET = 4;\nconst ARRAYBUFFERVIEW_DATALENGTH_OFFSET = 8;\nconst ARRAYBUFFERVIEW_SIZE = 12;\nconst ARRAY_LENGTH_OFFSET = 12;\nconst ARRAY_SIZE = 16;\n\nconst BIGINT = typeof BigUint64Array !== \"undefined\";\nconst THIS = Symbol();\nconst CHUNKSIZE = 1024;\n\n/** Gets a string from an U32 and an U16 view on a memory. */\nfunction getStringImpl(buffer, ptr) {\n  const U32 = new Uint32Array(buffer);\n  const U16 = new Uint16Array(buffer);\n  var length = U32[(ptr + SIZE_OFFSET) >>> 2] >>> 1;\n  var offset = ptr >>> 1;\n  if (length <= CHUNKSIZE) return String.fromCharCode.apply(String, U16.subarray(offset, offset + length));\n  const parts = [];\n  do {\n    const last = U16[offset + CHUNKSIZE - 1];\n    const size = last >= 0xD800 && last < 0xDC00 ? CHUNKSIZE - 1 : CHUNKSIZE;\n    parts.push(String.fromCharCode.apply(String, U16.subarray(offset, offset += size)));\n    length -= size;\n  } while (length > CHUNKSIZE);\n  return parts.join(\"\") + String.fromCharCode.apply(String, U16.subarray(offset, offset + length));\n}\n\n/** Prepares the base module prior to instantiation. */\nfunction preInstantiate(imports) {\n  const baseModule = {};\n\n  function getString(memory, ptr) {\n    if (!memory) return \"<yet unknown>\";\n    return getStringImpl(memory.buffer, ptr);\n  }\n\n  // add common imports used by stdlib for convenience\n  const env = (imports.env = imports.env || {});\n  env.abort = env.abort || function abort(mesg, file, line, colm) {\n    const memory = baseModule.memory || env.memory; // prefer exported, otherwise try imported\n    throw Error(\"abort: \" + getString(memory, mesg) + \" at \" + getString(memory, file) + \":\" + line + \":\" + colm);\n  }\n  env.trace = env.trace || function trace(mesg, n) {\n    const memory = baseModule.memory || env.memory;\n    console.log(\"trace: \" + getString(memory, mesg) + (n ? \" \" : \"\") + Array.prototype.slice.call(arguments, 2, 2 + n).join(\", \"));\n  }\n  imports.Math = imports.Math || Math;\n  imports.Date = imports.Date || Date;\n\n  return baseModule;\n}\n\n/** Prepares the final module once instantiation is complete. */\nfunction postInstantiate(baseModule, instance) {\n  const rawExports = instance.exports;\n  const memory = rawExports.memory;\n  const table = rawExports.table;\n  const alloc = rawExports[\"__alloc\"];\n  const retain = rawExports[\"__retain\"];\n  const rttiBase = rawExports[\"__rtti_base\"] || ~0; // oob if not present\n\n  /** Gets the runtime type info for the given id. */\n  function getInfo(id) {\n    const U32 = new Uint32Array(memory.buffer);\n    const count = U32[rttiBase >>> 2];\n    if ((id >>>= 0) >= count) throw Error(\"invalid id: \" + id);\n    return U32[(rttiBase + 4 >>> 2) + id * 2];\n  }\n\n  /** Gets the runtime base id for the given id. */\n  function getBase(id) {\n    const U32 = new Uint32Array(memory.buffer);\n    const count = U32[rttiBase >>> 2];\n    if ((id >>>= 0) >= count) throw Error(\"invalid id: \" + id);\n    return U32[(rttiBase + 4 >>> 2) + id * 2 + 1];\n  }\n\n  /** Gets the runtime alignment of a collection's values. */\n  function getValueAlign(info) {\n    return 31 - Math.clz32((info >>> VAL_ALIGN_OFFSET) & 31); // -1 if none\n  }\n\n  /** Gets the runtime alignment of a collection's keys. */\n  function getKeyAlign(info) {\n    return 31 - Math.clz32((info >>> KEY_ALIGN_OFFSET) & 31); // -1 if none\n  }\n\n  /** Allocates a new string in the module's memory and returns its retained pointer. */\n  function __allocString(str) {\n    const length = str.length;\n    const ptr = alloc(length << 1, STRING_ID);\n    const U16 = new Uint16Array(memory.buffer);\n    for (var i = 0, p = ptr >>> 1; i < length; ++i) U16[p + i] = str.charCodeAt(i);\n    return ptr;\n  }\n\n  baseModule.__allocString = __allocString;\n\n  /** Reads a string from the module's memory by its pointer. */\n  function __getString(ptr) {\n    const buffer = memory.buffer;\n    const id = new Uint32Array(buffer)[ptr + ID_OFFSET >>> 2];\n    if (id !== STRING_ID) throw Error(\"not a string: \" + ptr);\n    return getStringImpl(buffer, ptr);\n  }\n\n  baseModule.__getString = __getString;\n\n  /** Gets the view matching the specified alignment, signedness and floatness. */\n  function getView(alignLog2, signed, float) {\n    const buffer = memory.buffer;\n    if (float) {\n      switch (alignLog2) {\n        case 2: return new Float32Array(buffer);\n        case 3: return new Float64Array(buffer);\n      }\n    } else {\n      switch (alignLog2) {\n        case 0: return new (signed ? Int8Array : Uint8Array)(buffer);\n        case 1: return new (signed ? Int16Array : Uint16Array)(buffer);\n        case 2: return new (signed ? Int32Array : Uint32Array)(buffer);\n        case 3: return new (signed ? BigInt64Array : BigUint64Array)(buffer);\n      }\n    }\n    throw Error(\"unsupported align: \" + alignLog2);\n  }\n\n  /** Allocates a new array in the module's memory and returns its retained pointer. */\n  function __allocArray(id, values) {\n    const info = getInfo(id);\n    if (!(info & (ARRAYBUFFERVIEW | ARRAY))) throw Error(\"not an array: \" + id + \" @ \" + info);\n    const align = getValueAlign(info);\n    const length = values.length;\n    const buf = alloc(length << align, ARRAYBUFFER_ID);\n    const arr = alloc(info & ARRAY ? ARRAY_SIZE : ARRAYBUFFERVIEW_SIZE, id);\n    const U32 = new Uint32Array(memory.buffer);\n    U32[arr + ARRAYBUFFERVIEW_BUFFER_OFFSET >>> 2] = retain(buf);\n    U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2] = buf;\n    U32[arr + ARRAYBUFFERVIEW_DATALENGTH_OFFSET >>> 2] = length << align;\n    if (info & ARRAY) U32[arr + ARRAY_LENGTH_OFFSET >>> 2] = length;\n    const view = getView(align, info & VAL_SIGNED, info & VAL_FLOAT);\n    if (info & VAL_MANAGED) {\n      for (let i = 0; i < length; ++i) view[(buf >>> align) + i] = retain(values[i]);\n    } else {\n      view.set(values, buf >>> align);\n    }\n    return arr;\n  }\n\n  baseModule.__allocArray = __allocArray;\n\n  /** Gets a live view on an array's values in the module's memory. Infers the array type from RTTI. */\n  function __getArrayView(arr) {\n    const U32 = new Uint32Array(memory.buffer);\n    const id = U32[arr + ID_OFFSET >>> 2];\n    const info = getInfo(id);\n    if (!(info & ARRAYBUFFERVIEW)) throw Error(\"not an array: \" + id);\n    const align = getValueAlign(info);\n    var buf = U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\n    const length = info & ARRAY\n      ? U32[arr + ARRAY_LENGTH_OFFSET >>> 2]\n      : U32[buf + SIZE_OFFSET >>> 2] >>> align;\n    return getView(align, info & VAL_SIGNED, info & VAL_FLOAT)\n          .subarray(buf >>>= align, buf + length);\n  }\n\n  baseModule.__getArrayView = __getArrayView;\n\n  /** Copies an array's values from the module's memory. Infers the array type from RTTI. */\n  function __getArray(arr) {\n    const input = __getArrayView(arr);\n    const len = input.length;\n    const out = new Array(len);\n    for (let i = 0; i < len; i++) out[i] = input[i];\n    return out;\n  }\n\n  baseModule.__getArray = __getArray;\n\n  /** Copies an ArrayBuffer's value from the module's memory. */\n  function __getArrayBuffer(ptr) {\n    const buffer = memory.buffer;\n    const length = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2];\n    return buffer.slice(ptr, ptr + length);\n  }\n\n  baseModule.__getArrayBuffer = __getArrayBuffer;\n\n  /** Copies a typed array's values from the module's memory. */\n  function getTypedArray(Type, alignLog2, ptr) {\n    return new Type(getTypedArrayView(Type, alignLog2, ptr));\n  }\n\n  /** Gets a live view on a typed array's values in the module's memory. */\n  function getTypedArrayView(Type, alignLog2, ptr) {\n    const buffer = memory.buffer;\n    const U32 = new Uint32Array(buffer);\n    const bufPtr = U32[ptr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\n    return new Type(buffer, bufPtr, U32[bufPtr + SIZE_OFFSET >>> 2] >>> alignLog2);\n  }\n\n  baseModule.__getInt8Array = getTypedArray.bind(null, Int8Array, 0);\n  baseModule.__getInt8ArrayView = getTypedArrayView.bind(null, Int8Array, 0);\n  baseModule.__getUint8Array = getTypedArray.bind(null, Uint8Array, 0);\n  baseModule.__getUint8ArrayView = getTypedArrayView.bind(null, Uint8Array, 0);\n  baseModule.__getUint8ClampedArray = getTypedArray.bind(null, Uint8ClampedArray, 0);\n  baseModule.__getUint8ClampedArrayView = getTypedArrayView.bind(null, Uint8ClampedArray, 0);\n  baseModule.__getInt16Array = getTypedArray.bind(null, Int16Array, 1);\n  baseModule.__getInt16ArrayView = getTypedArrayView.bind(null, Int16Array, 1);\n  baseModule.__getUint16Array = getTypedArray.bind(null, Uint16Array, 1);\n  baseModule.__getUint16ArrayView = getTypedArrayView.bind(null, Uint16Array, 1);\n  baseModule.__getInt32Array = getTypedArray.bind(null, Int32Array, 2);\n  baseModule.__getInt32ArrayView = getTypedArrayView.bind(null, Int32Array, 2);\n  baseModule.__getUint32Array = getTypedArray.bind(null, Uint32Array, 2);\n  baseModule.__getUint32ArrayView = getTypedArrayView.bind(null, Uint32Array, 2);\n  if (BIGINT) {\n    baseModule.__getInt64Array = getTypedArray.bind(null, BigInt64Array, 3);\n    baseModule.__getInt64ArrayView = getTypedArrayView.bind(null, BigInt64Array, 3);\n    baseModule.__getUint64Array = getTypedArray.bind(null, BigUint64Array, 3);\n    baseModule.__getUint64ArrayView = getTypedArrayView.bind(null, BigUint64Array, 3);\n  }\n  baseModule.__getFloat32Array = getTypedArray.bind(null, Float32Array, 2);\n  baseModule.__getFloat32ArrayView = getTypedArrayView.bind(null, Float32Array, 2);\n  baseModule.__getFloat64Array = getTypedArray.bind(null, Float64Array, 3);\n  baseModule.__getFloat64ArrayView = getTypedArrayView.bind(null, Float64Array, 3);\n\n  /** Tests whether an object is an instance of the class represented by the specified base id. */\n  function __instanceof(ptr, baseId) {\n    const U32 = new Uint32Array(memory.buffer);\n    var id = U32[(ptr + ID_OFFSET) >>> 2];\n    if (id <= U32[rttiBase >>> 2]) {\n      do if (id == baseId) return true;\n      while (id = getBase(id));\n    }\n    return false;\n  }\n\n  baseModule.__instanceof = __instanceof;\n\n  // Pull basic exports to baseModule so code in preInstantiate can use them\n  baseModule.memory = baseModule.memory || memory;\n  baseModule.table  = baseModule.table  || table;\n\n  // Demangle exports and provide the usual utility on the prototype\n  return demangle(rawExports, baseModule);\n}\n\nfunction isResponse(o) {\n  return typeof Response !== \"undefined\" && o instanceof Response;\n}\n\n/** Asynchronously instantiates an AssemblyScript module from anything that can be instantiated. */\nasync function instantiate(source, imports) {\n  if (isResponse(source = await source)) return instantiateStreaming(source, imports);\n  return postInstantiate(\n    preInstantiate(imports || (imports = {})),\n    await WebAssembly.instantiate(\n      source instanceof WebAssembly.Module\n        ? source\n        : await WebAssembly.compile(source),\n      imports\n    )\n  );\n}\n\nexports.instantiate = instantiate;\n\n/** Synchronously instantiates an AssemblyScript module from a WebAssembly.Module or binary buffer. */\nfunction instantiateSync(source, imports) {\n  return postInstantiate(\n    preInstantiate(imports || (imports = {})),\n    new WebAssembly.Instance(\n      source instanceof WebAssembly.Module\n        ? source\n        : new WebAssembly.Module(source),\n      imports\n    )\n  )\n}\n\nexports.instantiateSync = instantiateSync;\n\n/** Asynchronously instantiates an AssemblyScript module from a response, i.e. as obtained by `fetch`. */\nasync function instantiateStreaming(source, imports) {\n  if (!WebAssembly.instantiateStreaming) {\n    return instantiate(\n      isResponse(source = await source)\n        ? source.arrayBuffer()\n        : source,\n      imports\n    );\n  }\n  return postInstantiate(\n    preInstantiate(imports || (imports = {})),\n    (await WebAssembly.instantiateStreaming(source, imports)).instance\n  );\n}\n\nexports.instantiateStreaming = instantiateStreaming;\n\n/** Demangles an AssemblyScript module's exports to a friendly object structure. */\nfunction demangle(exports, baseModule) {\n  var module = baseModule ? Object.create(baseModule) : {};\n  var setArgumentsLength = exports[\"__argumentsLength\"]\n    ? function(length) { exports[\"__argumentsLength\"].value = length; }\n    : exports[\"__setArgumentsLength\"] || exports[\"__setargc\"] || function() {};\n  for (let internalName in exports) {\n    if (!Object.prototype.hasOwnProperty.call(exports, internalName)) continue;\n    const elem = exports[internalName];\n    let parts = internalName.split(\".\");\n    let curr = module;\n    while (parts.length > 1) {\n      let part = parts.shift();\n      if (!Object.prototype.hasOwnProperty.call(curr, part)) curr[part] = {};\n      curr = curr[part];\n    }\n    let name = parts[0];\n    let hash = name.indexOf(\"#\");\n    if (hash >= 0) {\n      let className = name.substring(0, hash);\n      let classElem = curr[className];\n      if (typeof classElem === \"undefined\" || !classElem.prototype) {\n        let ctor = function(...args) {\n          return ctor.wrap(ctor.prototype.constructor(0, ...args));\n        };\n        ctor.prototype = {\n          valueOf: function valueOf() {\n            return this[THIS];\n          }\n        };\n        ctor.wrap = function(thisValue) {\n          return Object.create(ctor.prototype, { [THIS]: { value: thisValue, writable: false } });\n        };\n        if (classElem) Object.getOwnPropertyNames(classElem).forEach(name =>\n          Object.defineProperty(ctor, name, Object.getOwnPropertyDescriptor(classElem, name))\n        );\n        curr[className] = ctor;\n      }\n      name = name.substring(hash + 1);\n      curr = curr[className].prototype;\n      if (/^(get|set):/.test(name)) {\n        if (!Object.prototype.hasOwnProperty.call(curr, name = name.substring(4))) {\n          let getter = exports[internalName.replace(\"set:\", \"get:\")];\n          let setter = exports[internalName.replace(\"get:\", \"set:\")];\n          Object.defineProperty(curr, name, {\n            get: function() { return getter(this[THIS]); },\n            set: function(value) { setter(this[THIS], value); },\n            enumerable: true\n          });\n        }\n      } else {\n        if (name === 'constructor') {\n          (curr[name] = (...args) => {\n            setArgumentsLength(args.length);\n            return elem(...args);\n          }).original = elem;\n        } else { // instance method\n          (curr[name] = function(...args) { // !\n            setArgumentsLength(args.length);\n            return elem(this[THIS], ...args);\n          }).original = elem;\n        }\n      }\n    } else {\n      if (/^(get|set):/.test(name)) {\n        if (!Object.prototype.hasOwnProperty.call(curr, name = name.substring(4))) {\n          Object.defineProperty(curr, name, {\n            get: exports[internalName.replace(\"set:\", \"get:\")],\n            set: exports[internalName.replace(\"get:\", \"set:\")],\n            enumerable: true\n          });\n        }\n      } else if (typeof elem === \"function\" && elem !== setArgumentsLength) {\n        (curr[name] = (...args) => {\n          setArgumentsLength(args.length);\n          return elem(...args);\n        }).original = elem;\n      } else {\n        curr[name] = elem;\n      }\n    }\n  }\n  return module;\n}\n\nexports.demangle = demangle;\n","// minimal library entry point.\n\n\"use strict\";\nmodule.exports = require(\"./src/index-minimal\");\n","'use strict'\n\nconst { fromCallback } = require('catering')\nconst ModuleError = require('module-error')\nconst { getCallback, getOptions } = require('./lib/common')\n\nconst kPromise = Symbol('promise')\nconst kStatus = Symbol('status')\nconst kOperations = Symbol('operations')\nconst kFinishClose = Symbol('finishClose')\nconst kCloseCallbacks = Symbol('closeCallbacks')\n\nclass AbstractChainedBatch {\n  constructor (db) {\n    if (typeof db !== 'object' || db === null) {\n      const hint = db === null ? 'null' : typeof db\n      throw new TypeError(`The first argument must be an abstract-level database, received ${hint}`)\n    }\n\n    this[kOperations] = []\n    this[kCloseCallbacks] = []\n    this[kStatus] = 'open'\n    this[kFinishClose] = this[kFinishClose].bind(this)\n\n    this.db = db\n    this.db.attachResource(this)\n    this.nextTick = db.nextTick\n  }\n\n  get length () {\n    return this[kOperations].length\n  }\n\n  put (key, value, options) {\n    if (this[kStatus] !== 'open') {\n      throw new ModuleError('Batch is not open: cannot call put() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      })\n    }\n\n    const err = this.db._checkKey(key) || this.db._checkValue(value)\n    if (err) throw err\n\n    const db = options && options.sublevel != null ? options.sublevel : this.db\n    const original = options\n    const keyEncoding = db.keyEncoding(options && options.keyEncoding)\n    const valueEncoding = db.valueEncoding(options && options.valueEncoding)\n    const keyFormat = keyEncoding.format\n\n    // Forward encoding options\n    options = { ...options, keyEncoding: keyFormat, valueEncoding: valueEncoding.format }\n\n    // Prevent double prefixing\n    if (db !== this.db) {\n      options.sublevel = null\n    }\n\n    const mappedKey = db.prefixKey(keyEncoding.encode(key), keyFormat)\n    const mappedValue = valueEncoding.encode(value)\n\n    this._put(mappedKey, mappedValue, options)\n    this[kOperations].push({ ...original, type: 'put', key, value })\n\n    return this\n  }\n\n  _put (key, value, options) {}\n\n  del (key, options) {\n    if (this[kStatus] !== 'open') {\n      throw new ModuleError('Batch is not open: cannot call del() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      })\n    }\n\n    const err = this.db._checkKey(key)\n    if (err) throw err\n\n    const db = options && options.sublevel != null ? options.sublevel : this.db\n    const original = options\n    const keyEncoding = db.keyEncoding(options && options.keyEncoding)\n    const keyFormat = keyEncoding.format\n\n    // Forward encoding options\n    options = { ...options, keyEncoding: keyFormat }\n\n    // Prevent double prefixing\n    if (db !== this.db) {\n      options.sublevel = null\n    }\n\n    this._del(db.prefixKey(keyEncoding.encode(key), keyFormat), options)\n    this[kOperations].push({ ...original, type: 'del', key })\n\n    return this\n  }\n\n  _del (key, options) {}\n\n  clear () {\n    if (this[kStatus] !== 'open') {\n      throw new ModuleError('Batch is not open: cannot call clear() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      })\n    }\n\n    this._clear()\n    this[kOperations] = []\n\n    return this\n  }\n\n  _clear () {}\n\n  write (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options)\n\n    if (this[kStatus] !== 'open') {\n      this.nextTick(callback, new ModuleError('Batch is not open: cannot call write() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      }))\n    } else if (this.length === 0) {\n      this.close(callback)\n    } else {\n      this[kStatus] = 'writing'\n      this._write(options, (err) => {\n        this[kStatus] = 'closing'\n        this[kCloseCallbacks].push(() => callback(err))\n\n        // Emit after setting 'closing' status, because event may trigger a\n        // db close which in turn triggers (idempotently) closing this batch.\n        if (!err) this.db.emit('batch', this[kOperations])\n\n        this._close(this[kFinishClose])\n      })\n    }\n\n    return callback[kPromise]\n  }\n\n  _write (options, callback) {}\n\n  close (callback) {\n    callback = fromCallback(callback, kPromise)\n\n    if (this[kStatus] === 'closing') {\n      this[kCloseCallbacks].push(callback)\n    } else if (this[kStatus] === 'closed') {\n      this.nextTick(callback)\n    } else {\n      this[kCloseCallbacks].push(callback)\n\n      if (this[kStatus] !== 'writing') {\n        this[kStatus] = 'closing'\n        this._close(this[kFinishClose])\n      }\n    }\n\n    return callback[kPromise]\n  }\n\n  _close (callback) {\n    this.nextTick(callback)\n  }\n\n  [kFinishClose] () {\n    this[kStatus] = 'closed'\n    this.db.detachResource(this)\n\n    const callbacks = this[kCloseCallbacks]\n    this[kCloseCallbacks] = []\n\n    for (const cb of callbacks) {\n      cb()\n    }\n  }\n}\n\nexports.AbstractChainedBatch = AbstractChainedBatch\n","'use strict'\n\nconst { fromCallback } = require('catering')\nconst ModuleError = require('module-error')\nconst { getOptions, getCallback } = require('./lib/common')\n\nconst kPromise = Symbol('promise')\nconst kCallback = Symbol('callback')\nconst kWorking = Symbol('working')\nconst kHandleOne = Symbol('handleOne')\nconst kHandleMany = Symbol('handleMany')\nconst kAutoClose = Symbol('autoClose')\nconst kFinishWork = Symbol('finishWork')\nconst kReturnMany = Symbol('returnMany')\nconst kClosing = Symbol('closing')\nconst kHandleClose = Symbol('handleClose')\nconst kClosed = Symbol('closed')\nconst kCloseCallbacks = Symbol('closeCallbacks')\nconst kKeyEncoding = Symbol('keyEncoding')\nconst kValueEncoding = Symbol('valueEncoding')\nconst kAbortOnClose = Symbol('abortOnClose')\nconst kLegacy = Symbol('legacy')\nconst kKeys = Symbol('keys')\nconst kValues = Symbol('values')\nconst kLimit = Symbol('limit')\nconst kCount = Symbol('count')\n\nconst emptyOptions = Object.freeze({})\nconst noop = () => {}\nlet warnedEnd = false\n\n// This class is an internal utility for common functionality between AbstractIterator,\n// AbstractKeyIterator and AbstractValueIterator. It's not exported.\nclass CommonIterator {\n  constructor (db, options, legacy) {\n    if (typeof db !== 'object' || db === null) {\n      const hint = db === null ? 'null' : typeof db\n      throw new TypeError(`The first argument must be an abstract-level database, received ${hint}`)\n    }\n\n    if (typeof options !== 'object' || options === null) {\n      throw new TypeError('The second argument must be an options object')\n    }\n\n    this[kClosed] = false\n    this[kCloseCallbacks] = []\n    this[kWorking] = false\n    this[kClosing] = false\n    this[kAutoClose] = false\n    this[kCallback] = null\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n    this[kHandleClose] = this[kHandleClose].bind(this)\n    this[kKeyEncoding] = options[kKeyEncoding]\n    this[kValueEncoding] = options[kValueEncoding]\n    this[kLegacy] = legacy\n    this[kLimit] = Number.isInteger(options.limit) && options.limit >= 0 ? options.limit : Infinity\n    this[kCount] = 0\n\n    // Undocumented option to abort pending work on close(). Used by the\n    // many-level module as a temporary solution to a blocked close().\n    // TODO (next major): consider making this the default behavior. Native\n    // implementations should have their own logic to safely close iterators.\n    this[kAbortOnClose] = !!options.abortOnClose\n\n    this.db = db\n    this.db.attachResource(this)\n    this.nextTick = db.nextTick\n  }\n\n  get count () {\n    return this[kCount]\n  }\n\n  get limit () {\n    return this[kLimit]\n  }\n\n  next (callback) {\n    let promise\n\n    if (callback === undefined) {\n      promise = new Promise((resolve, reject) => {\n        callback = (err, key, value) => {\n          if (err) reject(err)\n          else if (!this[kLegacy]) resolve(key)\n          else if (key === undefined && value === undefined) resolve()\n          else resolve([key, value])\n        }\n      })\n    } else if (typeof callback !== 'function') {\n      throw new TypeError('Callback must be a function')\n    }\n\n    if (this[kClosing]) {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call next() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    } else if (this[kWorking]) {\n      this.nextTick(callback, new ModuleError('Iterator is busy: cannot call next() until previous call has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      }))\n    } else {\n      this[kWorking] = true\n      this[kCallback] = callback\n\n      if (this[kCount] >= this[kLimit]) this.nextTick(this[kHandleOne], null)\n      else this._next(this[kHandleOne])\n    }\n\n    return promise\n  }\n\n  _next (callback) {\n    this.nextTick(callback)\n  }\n\n  nextv (size, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, emptyOptions)\n\n    if (!Number.isInteger(size)) {\n      this.nextTick(callback, new TypeError(\"The first argument 'size' must be an integer\"))\n      return callback[kPromise]\n    }\n\n    if (this[kClosing]) {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call nextv() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    } else if (this[kWorking]) {\n      this.nextTick(callback, new ModuleError('Iterator is busy: cannot call nextv() until previous call has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      }))\n    } else {\n      if (size < 1) size = 1\n      if (this[kLimit] < Infinity) size = Math.min(size, this[kLimit] - this[kCount])\n\n      this[kWorking] = true\n      this[kCallback] = callback\n\n      if (size <= 0) this.nextTick(this[kHandleMany], null, [])\n      else this._nextv(size, options, this[kHandleMany])\n    }\n\n    return callback[kPromise]\n  }\n\n  _nextv (size, options, callback) {\n    const acc = []\n    const onnext = (err, key, value) => {\n      if (err) {\n        return callback(err)\n      } else if (this[kLegacy] ? key === undefined && value === undefined : key === undefined) {\n        return callback(null, acc)\n      }\n\n      acc.push(this[kLegacy] ? [key, value] : key)\n\n      if (acc.length === size) {\n        callback(null, acc)\n      } else {\n        this._next(onnext)\n      }\n    }\n\n    this._next(onnext)\n  }\n\n  all (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, emptyOptions)\n\n    if (this[kClosing]) {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call all() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    } else if (this[kWorking]) {\n      this.nextTick(callback, new ModuleError('Iterator is busy: cannot call all() until previous call has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      }))\n    } else {\n      this[kWorking] = true\n      this[kCallback] = callback\n      this[kAutoClose] = true\n\n      if (this[kCount] >= this[kLimit]) this.nextTick(this[kHandleMany], null, [])\n      else this._all(options, this[kHandleMany])\n    }\n\n    return callback[kPromise]\n  }\n\n  _all (options, callback) {\n    // Must count here because we're directly calling _nextv()\n    let count = this[kCount]\n    const acc = []\n\n    const nextv = () => {\n      // Not configurable, because implementations should optimize _all().\n      const size = this[kLimit] < Infinity ? Math.min(1e3, this[kLimit] - count) : 1e3\n\n      if (size <= 0) {\n        this.nextTick(callback, null, acc)\n      } else {\n        this._nextv(size, emptyOptions, onnextv)\n      }\n    }\n\n    const onnextv = (err, items) => {\n      if (err) {\n        callback(err)\n      } else if (items.length === 0) {\n        callback(null, acc)\n      } else {\n        acc.push.apply(acc, items)\n        count += items.length\n        nextv()\n      }\n    }\n\n    nextv()\n  }\n\n  [kFinishWork] () {\n    const cb = this[kCallback]\n\n    // Callback will be null if work was aborted on close\n    if (this[kAbortOnClose] && cb === null) return noop\n\n    this[kWorking] = false\n    this[kCallback] = null\n\n    if (this[kClosing]) this._close(this[kHandleClose])\n\n    return cb\n  }\n\n  [kReturnMany] (cb, err, items) {\n    if (this[kAutoClose]) {\n      this.close(cb.bind(null, err, items))\n    } else {\n      cb(err, items)\n    }\n  }\n\n  seek (target, options) {\n    options = getOptions(options, emptyOptions)\n\n    if (this[kClosing]) {\n      // Don't throw here, to be kind to implementations that wrap\n      // another db and don't necessarily control when the db is closed\n    } else if (this[kWorking]) {\n      throw new ModuleError('Iterator is busy: cannot call seek() until next() has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      })\n    } else {\n      const keyEncoding = this.db.keyEncoding(options.keyEncoding || this[kKeyEncoding])\n      const keyFormat = keyEncoding.format\n\n      if (options.keyEncoding !== keyFormat) {\n        options = { ...options, keyEncoding: keyFormat }\n      }\n\n      const mapped = this.db.prefixKey(keyEncoding.encode(target), keyFormat)\n      this._seek(mapped, options)\n    }\n  }\n\n  _seek (target, options) {\n    throw new ModuleError('Iterator does not support seek()', {\n      code: 'LEVEL_NOT_SUPPORTED'\n    })\n  }\n\n  close (callback) {\n    callback = fromCallback(callback, kPromise)\n\n    if (this[kClosed]) {\n      this.nextTick(callback)\n    } else if (this[kClosing]) {\n      this[kCloseCallbacks].push(callback)\n    } else {\n      this[kClosing] = true\n      this[kCloseCallbacks].push(callback)\n\n      if (!this[kWorking]) {\n        this._close(this[kHandleClose])\n      } else if (this[kAbortOnClose]) {\n        // Don't wait for work to finish. Subsequently ignore the result.\n        const cb = this[kFinishWork]()\n\n        cb(new ModuleError('Aborted on iterator close()', {\n          code: 'LEVEL_ITERATOR_NOT_OPEN'\n        }))\n      }\n    }\n\n    return callback[kPromise]\n  }\n\n  _close (callback) {\n    this.nextTick(callback)\n  }\n\n  [kHandleClose] () {\n    this[kClosed] = true\n    this.db.detachResource(this)\n\n    const callbacks = this[kCloseCallbacks]\n    this[kCloseCallbacks] = []\n\n    for (const cb of callbacks) {\n      cb()\n    }\n  }\n\n  async * [Symbol.asyncIterator] () {\n    try {\n      let item\n\n      while ((item = (await this.next())) !== undefined) {\n        yield item\n      }\n    } finally {\n      if (!this[kClosed]) await this.close()\n    }\n  }\n}\n\n// For backwards compatibility this class is not (yet) called AbstractEntryIterator.\nclass AbstractIterator extends CommonIterator {\n  constructor (db, options) {\n    super(db, options, true)\n    this[kKeys] = options.keys !== false\n    this[kValues] = options.values !== false\n  }\n\n  [kHandleOne] (err, key, value) {\n    const cb = this[kFinishWork]()\n    if (err) return cb(err)\n\n    try {\n      key = this[kKeys] && key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n      value = this[kValues] && value !== undefined ? this[kValueEncoding].decode(value) : undefined\n    } catch (err) {\n      return cb(new IteratorDecodeError('entry', err))\n    }\n\n    if (!(key === undefined && value === undefined)) {\n      this[kCount]++\n    }\n\n    cb(null, key, value)\n  }\n\n  [kHandleMany] (err, entries) {\n    const cb = this[kFinishWork]()\n    if (err) return this[kReturnMany](cb, err)\n\n    try {\n      for (const entry of entries) {\n        const key = entry[0]\n        const value = entry[1]\n\n        entry[0] = this[kKeys] && key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n        entry[1] = this[kValues] && value !== undefined ? this[kValueEncoding].decode(value) : undefined\n      }\n    } catch (err) {\n      return this[kReturnMany](cb, new IteratorDecodeError('entries', err))\n    }\n\n    this[kCount] += entries.length\n    this[kReturnMany](cb, null, entries)\n  }\n\n  end (callback) {\n    if (!warnedEnd && typeof console !== 'undefined') {\n      warnedEnd = true\n      console.warn(new ModuleError(\n        'The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version',\n        { code: 'LEVEL_LEGACY' }\n      ))\n    }\n\n    return this.close(callback)\n  }\n}\n\nclass AbstractKeyIterator extends CommonIterator {\n  constructor (db, options) {\n    super(db, options, false)\n  }\n\n  [kHandleOne] (err, key) {\n    const cb = this[kFinishWork]()\n    if (err) return cb(err)\n\n    try {\n      key = key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n    } catch (err) {\n      return cb(new IteratorDecodeError('key', err))\n    }\n\n    if (key !== undefined) this[kCount]++\n    cb(null, key)\n  }\n\n  [kHandleMany] (err, keys) {\n    const cb = this[kFinishWork]()\n    if (err) return this[kReturnMany](cb, err)\n\n    try {\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i]\n        keys[i] = key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n      }\n    } catch (err) {\n      return this[kReturnMany](cb, new IteratorDecodeError('keys', err))\n    }\n\n    this[kCount] += keys.length\n    this[kReturnMany](cb, null, keys)\n  }\n}\n\nclass AbstractValueIterator extends CommonIterator {\n  constructor (db, options) {\n    super(db, options, false)\n  }\n\n  [kHandleOne] (err, value) {\n    const cb = this[kFinishWork]()\n    if (err) return cb(err)\n\n    try {\n      value = value !== undefined ? this[kValueEncoding].decode(value) : undefined\n    } catch (err) {\n      return cb(new IteratorDecodeError('value', err))\n    }\n\n    if (value !== undefined) this[kCount]++\n    cb(null, value)\n  }\n\n  [kHandleMany] (err, values) {\n    const cb = this[kFinishWork]()\n    if (err) return this[kReturnMany](cb, err)\n\n    try {\n      for (let i = 0; i < values.length; i++) {\n        const value = values[i]\n        values[i] = value !== undefined ? this[kValueEncoding].decode(value) : undefined\n      }\n    } catch (err) {\n      return this[kReturnMany](cb, new IteratorDecodeError('values', err))\n    }\n\n    this[kCount] += values.length\n    this[kReturnMany](cb, null, values)\n  }\n}\n\n// Internal utility, not typed or exported\nclass IteratorDecodeError extends ModuleError {\n  constructor (subject, cause) {\n    super(`Iterator could not decode ${subject}`, {\n      code: 'LEVEL_DECODE_ERROR',\n      cause\n    })\n  }\n}\n\n// To help migrating to abstract-level\nfor (const k of ['_ended property', '_nexting property', '_end method']) {\n  Object.defineProperty(AbstractIterator.prototype, k.split(' ')[0], {\n    get () { throw new ModuleError(`The ${k} has been removed`, { code: 'LEVEL_LEGACY' }) },\n    set () { throw new ModuleError(`The ${k} has been removed`, { code: 'LEVEL_LEGACY' }) }\n  })\n}\n\n// Exposed so that AbstractLevel can set these options\nAbstractIterator.keyEncoding = kKeyEncoding\nAbstractIterator.valueEncoding = kValueEncoding\n\nexports.AbstractIterator = AbstractIterator\nexports.AbstractKeyIterator = AbstractKeyIterator\nexports.AbstractValueIterator = AbstractValueIterator\n","'use strict'\n\nconst { supports } = require('level-supports')\nconst { Transcoder } = require('level-transcoder')\nconst { EventEmitter } = require('events')\nconst { fromCallback } = require('catering')\nconst ModuleError = require('module-error')\nconst { AbstractIterator } = require('./abstract-iterator')\nconst { DefaultKeyIterator, DefaultValueIterator } = require('./lib/default-kv-iterator')\nconst { DeferredIterator, DeferredKeyIterator, DeferredValueIterator } = require('./lib/deferred-iterator')\nconst { DefaultChainedBatch } = require('./lib/default-chained-batch')\nconst { getCallback, getOptions } = require('./lib/common')\nconst rangeOptions = require('./lib/range-options')\n\nconst kPromise = Symbol('promise')\nconst kLanded = Symbol('landed')\nconst kResources = Symbol('resources')\nconst kCloseResources = Symbol('closeResources')\nconst kOperations = Symbol('operations')\nconst kUndefer = Symbol('undefer')\nconst kDeferOpen = Symbol('deferOpen')\nconst kOptions = Symbol('options')\nconst kStatus = Symbol('status')\nconst kDefaultOptions = Symbol('defaultOptions')\nconst kTranscoder = Symbol('transcoder')\nconst kKeyEncoding = Symbol('keyEncoding')\nconst kValueEncoding = Symbol('valueEncoding')\nconst noop = () => {}\n\nclass AbstractLevel extends EventEmitter {\n  constructor (manifest, options) {\n    super()\n\n    if (typeof manifest !== 'object' || manifest === null) {\n      throw new TypeError(\"The first argument 'manifest' must be an object\")\n    }\n\n    options = getOptions(options)\n    const { keyEncoding, valueEncoding, passive, ...forward } = options\n\n    this[kResources] = new Set()\n    this[kOperations] = []\n    this[kDeferOpen] = true\n    this[kOptions] = forward\n    this[kStatus] = 'opening'\n\n    this.supports = supports(manifest, {\n      status: true,\n      promises: true,\n      clear: true,\n      getMany: true,\n      deferredOpen: true,\n\n      // TODO (next major): add seek\n      snapshots: manifest.snapshots !== false,\n      permanence: manifest.permanence !== false,\n\n      // TODO: remove from level-supports because it's always supported\n      keyIterator: true,\n      valueIterator: true,\n      iteratorNextv: true,\n      iteratorAll: true,\n\n      encodings: manifest.encodings || {},\n      events: Object.assign({}, manifest.events, {\n        opening: true,\n        open: true,\n        closing: true,\n        closed: true,\n        put: true,\n        del: true,\n        batch: true,\n        clear: true\n      })\n    })\n\n    this[kTranscoder] = new Transcoder(formats(this))\n    this[kKeyEncoding] = this[kTranscoder].encoding(keyEncoding || 'utf8')\n    this[kValueEncoding] = this[kTranscoder].encoding(valueEncoding || 'utf8')\n\n    // Add custom and transcoder encodings to manifest\n    for (const encoding of this[kTranscoder].encodings()) {\n      if (!this.supports.encodings[encoding.commonName]) {\n        this.supports.encodings[encoding.commonName] = true\n      }\n    }\n\n    this[kDefaultOptions] = {\n      empty: Object.freeze({}),\n      entry: Object.freeze({\n        keyEncoding: this[kKeyEncoding].commonName,\n        valueEncoding: this[kValueEncoding].commonName\n      }),\n      key: Object.freeze({\n        keyEncoding: this[kKeyEncoding].commonName\n      })\n    }\n\n    // Let subclass finish its constructor\n    this.nextTick(() => {\n      if (this[kDeferOpen]) {\n        this.open({ passive: false }, noop)\n      }\n    })\n  }\n\n  get status () {\n    return this[kStatus]\n  }\n\n  keyEncoding (encoding) {\n    return this[kTranscoder].encoding(encoding != null ? encoding : this[kKeyEncoding])\n  }\n\n  valueEncoding (encoding) {\n    return this[kTranscoder].encoding(encoding != null ? encoding : this[kValueEncoding])\n  }\n\n  open (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n\n    options = { ...this[kOptions], ...getOptions(options) }\n\n    options.createIfMissing = options.createIfMissing !== false\n    options.errorIfExists = !!options.errorIfExists\n\n    const maybeOpened = (err) => {\n      if (this[kStatus] === 'closing' || this[kStatus] === 'opening') {\n        // Wait until pending state changes are done\n        this.once(kLanded, err ? () => maybeOpened(err) : maybeOpened)\n      } else if (this[kStatus] !== 'open') {\n        callback(new ModuleError('Database is not open', {\n          code: 'LEVEL_DATABASE_NOT_OPEN',\n          cause: err\n        }))\n      } else {\n        callback()\n      }\n    }\n\n    if (options.passive) {\n      if (this[kStatus] === 'opening') {\n        this.once(kLanded, maybeOpened)\n      } else {\n        this.nextTick(maybeOpened)\n      }\n    } else if (this[kStatus] === 'closed' || this[kDeferOpen]) {\n      this[kDeferOpen] = false\n      this[kStatus] = 'opening'\n      this.emit('opening')\n\n      this._open(options, (err) => {\n        if (err) {\n          this[kStatus] = 'closed'\n\n          // Resources must be safe to close in any db state\n          this[kCloseResources](() => {\n            this.emit(kLanded)\n            maybeOpened(err)\n          })\n\n          this[kUndefer]()\n          return\n        }\n\n        this[kStatus] = 'open'\n        this[kUndefer]()\n        this.emit(kLanded)\n\n        // Only emit public event if pending state changes are done\n        if (this[kStatus] === 'open') this.emit('open')\n\n        // TODO (next major): remove this alias\n        if (this[kStatus] === 'open') this.emit('ready')\n\n        maybeOpened()\n      })\n    } else if (this[kStatus] === 'open') {\n      this.nextTick(maybeOpened)\n    } else {\n      this.once(kLanded, () => this.open(options, callback))\n    }\n\n    return callback[kPromise]\n  }\n\n  _open (options, callback) {\n    this.nextTick(callback)\n  }\n\n  close (callback) {\n    callback = fromCallback(callback, kPromise)\n\n    const maybeClosed = (err) => {\n      if (this[kStatus] === 'opening' || this[kStatus] === 'closing') {\n        // Wait until pending state changes are done\n        this.once(kLanded, err ? maybeClosed(err) : maybeClosed)\n      } else if (this[kStatus] !== 'closed') {\n        callback(new ModuleError('Database is not closed', {\n          code: 'LEVEL_DATABASE_NOT_CLOSED',\n          cause: err\n        }))\n      } else {\n        callback()\n      }\n    }\n\n    if (this[kStatus] === 'open') {\n      this[kStatus] = 'closing'\n      this.emit('closing')\n\n      const cancel = (err) => {\n        this[kStatus] = 'open'\n        this[kUndefer]()\n        this.emit(kLanded)\n        maybeClosed(err)\n      }\n\n      this[kCloseResources](() => {\n        this._close((err) => {\n          if (err) return cancel(err)\n\n          this[kStatus] = 'closed'\n          this[kUndefer]()\n          this.emit(kLanded)\n\n          // Only emit public event if pending state changes are done\n          if (this[kStatus] === 'closed') this.emit('closed')\n\n          maybeClosed()\n        })\n      })\n    } else if (this[kStatus] === 'closed') {\n      this.nextTick(maybeClosed)\n    } else {\n      this.once(kLanded, () => this.close(callback))\n    }\n\n    return callback[kPromise]\n  }\n\n  [kCloseResources] (callback) {\n    if (this[kResources].size === 0) {\n      return this.nextTick(callback)\n    }\n\n    let pending = this[kResources].size\n    let sync = true\n\n    const next = () => {\n      if (--pending === 0) {\n        // We don't have tests for generic resources, so dezalgo\n        if (sync) this.nextTick(callback)\n        else callback()\n      }\n    }\n\n    // In parallel so that all resources know they are closed\n    for (const resource of this[kResources]) {\n      resource.close(next)\n    }\n\n    sync = false\n    this[kResources].clear()\n  }\n\n  _close (callback) {\n    this.nextTick(callback)\n  }\n\n  get (key, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].entry)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.get(key, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    const err = this._checkKey(key)\n\n    if (err) {\n      this.nextTick(callback, err)\n      return callback[kPromise]\n    }\n\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options.valueEncoding)\n    const keyFormat = keyEncoding.format\n    const valueFormat = valueEncoding.format\n\n    // Forward encoding options to the underlying store\n    if (options.keyEncoding !== keyFormat || options.valueEncoding !== valueFormat) {\n      // Avoid spread operator because of https://bugs.chromium.org/p/chromium/issues/detail?id=1204540\n      options = Object.assign({}, options, { keyEncoding: keyFormat, valueEncoding: valueFormat })\n    }\n\n    this._get(this.prefixKey(keyEncoding.encode(key), keyFormat), options, (err, value) => {\n      if (err) {\n        // Normalize not found error for backwards compatibility with abstract-leveldown and level(up)\n        if (err.code === 'LEVEL_NOT_FOUND' || err.notFound || /NotFound/i.test(err)) {\n          if (!err.code) err.code = 'LEVEL_NOT_FOUND' // Preferred way going forward\n          if (!err.notFound) err.notFound = true // Same as level-errors\n          if (!err.status) err.status = 404 // Same as level-errors\n        }\n\n        return callback(err)\n      }\n\n      try {\n        value = valueEncoding.decode(value)\n      } catch (err) {\n        return callback(new ModuleError('Could not decode value', {\n          code: 'LEVEL_DECODE_ERROR',\n          cause: err\n        }))\n      }\n\n      callback(null, value)\n    })\n\n    return callback[kPromise]\n  }\n\n  _get (key, options, callback) {\n    this.nextTick(callback, new Error('NotFound'))\n  }\n\n  getMany (keys, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].entry)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.getMany(keys, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    if (!Array.isArray(keys)) {\n      this.nextTick(callback, new TypeError(\"The first argument 'keys' must be an array\"))\n      return callback[kPromise]\n    }\n\n    if (keys.length === 0) {\n      this.nextTick(callback, null, [])\n      return callback[kPromise]\n    }\n\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options.valueEncoding)\n    const keyFormat = keyEncoding.format\n    const valueFormat = valueEncoding.format\n\n    // Forward encoding options\n    if (options.keyEncoding !== keyFormat || options.valueEncoding !== valueFormat) {\n      options = Object.assign({}, options, { keyEncoding: keyFormat, valueEncoding: valueFormat })\n    }\n\n    const mappedKeys = new Array(keys.length)\n\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i]\n      const err = this._checkKey(key)\n\n      if (err) {\n        this.nextTick(callback, err)\n        return callback[kPromise]\n      }\n\n      mappedKeys[i] = this.prefixKey(keyEncoding.encode(key), keyFormat)\n    }\n\n    this._getMany(mappedKeys, options, (err, values) => {\n      if (err) return callback(err)\n\n      try {\n        for (let i = 0; i < values.length; i++) {\n          if (values[i] !== undefined) {\n            values[i] = valueEncoding.decode(values[i])\n          }\n        }\n      } catch (err) {\n        return callback(new ModuleError(`Could not decode one or more of ${values.length} value(s)`, {\n          code: 'LEVEL_DECODE_ERROR',\n          cause: err\n        }))\n      }\n\n      callback(null, values)\n    })\n\n    return callback[kPromise]\n  }\n\n  _getMany (keys, options, callback) {\n    this.nextTick(callback, null, new Array(keys.length).fill(undefined))\n  }\n\n  put (key, value, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].entry)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.put(key, value, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    const err = this._checkKey(key) || this._checkValue(value)\n\n    if (err) {\n      this.nextTick(callback, err)\n      return callback[kPromise]\n    }\n\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options.valueEncoding)\n    const keyFormat = keyEncoding.format\n    const valueFormat = valueEncoding.format\n\n    // Forward encoding options\n    if (options.keyEncoding !== keyFormat || options.valueEncoding !== valueFormat) {\n      options = Object.assign({}, options, { keyEncoding: keyFormat, valueEncoding: valueFormat })\n    }\n\n    const mappedKey = this.prefixKey(keyEncoding.encode(key), keyFormat)\n    const mappedValue = valueEncoding.encode(value)\n\n    this._put(mappedKey, mappedValue, options, (err) => {\n      if (err) return callback(err)\n      this.emit('put', key, value)\n      callback()\n    })\n\n    return callback[kPromise]\n  }\n\n  _put (key, value, options, callback) {\n    this.nextTick(callback)\n  }\n\n  del (key, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].key)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.del(key, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    const err = this._checkKey(key)\n\n    if (err) {\n      this.nextTick(callback, err)\n      return callback[kPromise]\n    }\n\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n    const keyFormat = keyEncoding.format\n\n    // Forward encoding options\n    if (options.keyEncoding !== keyFormat) {\n      options = Object.assign({}, options, { keyEncoding: keyFormat })\n    }\n\n    this._del(this.prefixKey(keyEncoding.encode(key), keyFormat), options, (err) => {\n      if (err) return callback(err)\n      this.emit('del', key)\n      callback()\n    })\n\n    return callback[kPromise]\n  }\n\n  _del (key, options, callback) {\n    this.nextTick(callback)\n  }\n\n  batch (operations, options, callback) {\n    if (!arguments.length) {\n      if (this[kStatus] === 'opening') return new DefaultChainedBatch(this)\n      if (this[kStatus] !== 'open') {\n        throw new ModuleError('Database is not open', {\n          code: 'LEVEL_DATABASE_NOT_OPEN'\n        })\n      }\n      return this._chainedBatch()\n    }\n\n    if (typeof operations === 'function') callback = operations\n    else callback = getCallback(options, callback)\n\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].empty)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.batch(operations, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    if (!Array.isArray(operations)) {\n      this.nextTick(callback, new TypeError(\"The first argument 'operations' must be an array\"))\n      return callback[kPromise]\n    }\n\n    if (operations.length === 0) {\n      this.nextTick(callback)\n      return callback[kPromise]\n    }\n\n    const mapped = new Array(operations.length)\n    const { keyEncoding: ke, valueEncoding: ve, ...forward } = options\n\n    for (let i = 0; i < operations.length; i++) {\n      if (typeof operations[i] !== 'object' || operations[i] === null) {\n        this.nextTick(callback, new TypeError('A batch operation must be an object'))\n        return callback[kPromise]\n      }\n\n      const op = Object.assign({}, operations[i])\n\n      if (op.type !== 'put' && op.type !== 'del') {\n        this.nextTick(callback, new TypeError(\"A batch operation must have a type property that is 'put' or 'del'\"))\n        return callback[kPromise]\n      }\n\n      const err = this._checkKey(op.key)\n\n      if (err) {\n        this.nextTick(callback, err)\n        return callback[kPromise]\n      }\n\n      const db = op.sublevel != null ? op.sublevel : this\n      const keyEncoding = db.keyEncoding(op.keyEncoding || ke)\n      const keyFormat = keyEncoding.format\n\n      op.key = db.prefixKey(keyEncoding.encode(op.key), keyFormat)\n      op.keyEncoding = keyFormat\n\n      if (op.type === 'put') {\n        const valueErr = this._checkValue(op.value)\n\n        if (valueErr) {\n          this.nextTick(callback, valueErr)\n          return callback[kPromise]\n        }\n\n        const valueEncoding = db.valueEncoding(op.valueEncoding || ve)\n\n        op.value = valueEncoding.encode(op.value)\n        op.valueEncoding = valueEncoding.format\n      }\n\n      // Prevent double prefixing\n      if (db !== this) {\n        op.sublevel = null\n      }\n\n      mapped[i] = op\n    }\n\n    this._batch(mapped, forward, (err) => {\n      if (err) return callback(err)\n      this.emit('batch', operations)\n      callback()\n    })\n\n    return callback[kPromise]\n  }\n\n  _batch (operations, options, callback) {\n    this.nextTick(callback)\n  }\n\n  sublevel (name, options) {\n    return this._sublevel(name, AbstractSublevel.defaults(options))\n  }\n\n  _sublevel (name, options) {\n    return new AbstractSublevel(this, name, options)\n  }\n\n  prefixKey (key, keyFormat) {\n    return key\n  }\n\n  clear (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].empty)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.clear(options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    const original = options\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n\n    options = rangeOptions(options, keyEncoding)\n    options.keyEncoding = keyEncoding.format\n\n    if (options.limit === 0) {\n      this.nextTick(callback)\n    } else {\n      this._clear(options, (err) => {\n        if (err) return callback(err)\n        this.emit('clear', original)\n        callback()\n      })\n    }\n\n    return callback[kPromise]\n  }\n\n  _clear (options, callback) {\n    this.nextTick(callback)\n  }\n\n  iterator (options) {\n    const keyEncoding = this.keyEncoding(options && options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options && options.valueEncoding)\n\n    options = rangeOptions(options, keyEncoding)\n    options.keys = options.keys !== false\n    options.values = options.values !== false\n\n    // We need the original encoding options in AbstractIterator in order to decode data\n    options[AbstractIterator.keyEncoding] = keyEncoding\n    options[AbstractIterator.valueEncoding] = valueEncoding\n\n    // Forward encoding options to private API\n    options.keyEncoding = keyEncoding.format\n    options.valueEncoding = valueEncoding.format\n\n    if (this[kStatus] === 'opening') {\n      return new DeferredIterator(this, options)\n    } else if (this[kStatus] !== 'open') {\n      throw new ModuleError('Database is not open', {\n        code: 'LEVEL_DATABASE_NOT_OPEN'\n      })\n    }\n\n    return this._iterator(options)\n  }\n\n  _iterator (options) {\n    return new AbstractIterator(this, options)\n  }\n\n  keys (options) {\n    // Also include valueEncoding (though unused) because we may fallback to _iterator()\n    const keyEncoding = this.keyEncoding(options && options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options && options.valueEncoding)\n\n    options = rangeOptions(options, keyEncoding)\n\n    // We need the original encoding options in AbstractKeyIterator in order to decode data\n    options[AbstractIterator.keyEncoding] = keyEncoding\n    options[AbstractIterator.valueEncoding] = valueEncoding\n\n    // Forward encoding options to private API\n    options.keyEncoding = keyEncoding.format\n    options.valueEncoding = valueEncoding.format\n\n    if (this[kStatus] === 'opening') {\n      return new DeferredKeyIterator(this, options)\n    } else if (this[kStatus] !== 'open') {\n      throw new ModuleError('Database is not open', {\n        code: 'LEVEL_DATABASE_NOT_OPEN'\n      })\n    }\n\n    return this._keys(options)\n  }\n\n  _keys (options) {\n    return new DefaultKeyIterator(this, options)\n  }\n\n  values (options) {\n    const keyEncoding = this.keyEncoding(options && options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options && options.valueEncoding)\n\n    options = rangeOptions(options, keyEncoding)\n\n    // We need the original encoding options in AbstractValueIterator in order to decode data\n    options[AbstractIterator.keyEncoding] = keyEncoding\n    options[AbstractIterator.valueEncoding] = valueEncoding\n\n    // Forward encoding options to private API\n    options.keyEncoding = keyEncoding.format\n    options.valueEncoding = valueEncoding.format\n\n    if (this[kStatus] === 'opening') {\n      return new DeferredValueIterator(this, options)\n    } else if (this[kStatus] !== 'open') {\n      throw new ModuleError('Database is not open', {\n        code: 'LEVEL_DATABASE_NOT_OPEN'\n      })\n    }\n\n    return this._values(options)\n  }\n\n  _values (options) {\n    return new DefaultValueIterator(this, options)\n  }\n\n  defer (fn) {\n    if (typeof fn !== 'function') {\n      throw new TypeError('The first argument must be a function')\n    }\n\n    this[kOperations].push(fn)\n  }\n\n  [kUndefer] () {\n    if (this[kOperations].length === 0) {\n      return\n    }\n\n    const operations = this[kOperations]\n    this[kOperations] = []\n\n    for (const op of operations) {\n      op()\n    }\n  }\n\n  // TODO: docs and types\n  attachResource (resource) {\n    if (typeof resource !== 'object' || resource === null ||\n      typeof resource.close !== 'function') {\n      throw new TypeError('The first argument must be a resource object')\n    }\n\n    this[kResources].add(resource)\n  }\n\n  // TODO: docs and types\n  detachResource (resource) {\n    this[kResources].delete(resource)\n  }\n\n  _chainedBatch () {\n    return new DefaultChainedBatch(this)\n  }\n\n  _checkKey (key) {\n    if (key === null || key === undefined) {\n      return new ModuleError('Key cannot be null or undefined', {\n        code: 'LEVEL_INVALID_KEY'\n      })\n    }\n  }\n\n  _checkValue (value) {\n    if (value === null || value === undefined) {\n      return new ModuleError('Value cannot be null or undefined', {\n        code: 'LEVEL_INVALID_VALUE'\n      })\n    }\n  }\n}\n\n// Expose browser-compatible nextTick for dependents\n// TODO: after we drop node 10, also use queueMicrotask in node\nAbstractLevel.prototype.nextTick = require('./lib/next-tick')\n\nconst { AbstractSublevel } = require('./lib/abstract-sublevel')({ AbstractLevel })\n\nexports.AbstractLevel = AbstractLevel\nexports.AbstractSublevel = AbstractSublevel\n\nconst maybeError = function (db, callback) {\n  if (db[kStatus] !== 'open') {\n    db.nextTick(callback, new ModuleError('Database is not open', {\n      code: 'LEVEL_DATABASE_NOT_OPEN'\n    }))\n    return true\n  }\n\n  return false\n}\n\nconst formats = function (db) {\n  return Object.keys(db.supports.encodings)\n    .filter(k => !!db.supports.encodings[k])\n}\n","'use strict'\n\nexports.AbstractLevel = require('./abstract-level').AbstractLevel\nexports.AbstractSublevel = require('./abstract-level').AbstractSublevel\nexports.AbstractIterator = require('./abstract-iterator').AbstractIterator\nexports.AbstractKeyIterator = require('./abstract-iterator').AbstractKeyIterator\nexports.AbstractValueIterator = require('./abstract-iterator').AbstractValueIterator\nexports.AbstractChainedBatch = require('./abstract-chained-batch').AbstractChainedBatch\n","'use strict'\n\nconst { AbstractIterator, AbstractKeyIterator, AbstractValueIterator } = require('../abstract-iterator')\n\nconst kUnfix = Symbol('unfix')\nconst kIterator = Symbol('iterator')\nconst kHandleOne = Symbol('handleOne')\nconst kHandleMany = Symbol('handleMany')\nconst kCallback = Symbol('callback')\n\n// TODO: unfix natively if db supports it\nclass AbstractSublevelIterator extends AbstractIterator {\n  constructor (db, options, iterator, unfix) {\n    super(db, options)\n\n    this[kIterator] = iterator\n    this[kUnfix] = unfix\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n    this[kCallback] = null\n  }\n\n  [kHandleOne] (err, key, value) {\n    const callback = this[kCallback]\n    if (err) return callback(err)\n    if (key !== undefined) key = this[kUnfix](key)\n    callback(err, key, value)\n  }\n\n  [kHandleMany] (err, entries) {\n    const callback = this[kCallback]\n    if (err) return callback(err)\n\n    for (const entry of entries) {\n      const key = entry[0]\n      if (key !== undefined) entry[0] = this[kUnfix](key)\n    }\n\n    callback(err, entries)\n  }\n}\n\nclass AbstractSublevelKeyIterator extends AbstractKeyIterator {\n  constructor (db, options, iterator, unfix) {\n    super(db, options)\n\n    this[kIterator] = iterator\n    this[kUnfix] = unfix\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n    this[kCallback] = null\n  }\n\n  [kHandleOne] (err, key) {\n    const callback = this[kCallback]\n    if (err) return callback(err)\n    if (key !== undefined) key = this[kUnfix](key)\n    callback(err, key)\n  }\n\n  [kHandleMany] (err, keys) {\n    const callback = this[kCallback]\n    if (err) return callback(err)\n\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i]\n      if (key !== undefined) keys[i] = this[kUnfix](key)\n    }\n\n    callback(err, keys)\n  }\n}\n\nclass AbstractSublevelValueIterator extends AbstractValueIterator {\n  constructor (db, options, iterator) {\n    super(db, options)\n    this[kIterator] = iterator\n  }\n}\n\nfor (const Iterator of [AbstractSublevelIterator, AbstractSublevelKeyIterator]) {\n  Iterator.prototype._next = function (callback) {\n    this[kCallback] = callback\n    this[kIterator].next(this[kHandleOne])\n  }\n\n  Iterator.prototype._nextv = function (size, options, callback) {\n    this[kCallback] = callback\n    this[kIterator].nextv(size, options, this[kHandleMany])\n  }\n\n  Iterator.prototype._all = function (options, callback) {\n    this[kCallback] = callback\n    this[kIterator].all(options, this[kHandleMany])\n  }\n}\n\nfor (const Iterator of [AbstractSublevelValueIterator]) {\n  Iterator.prototype._next = function (callback) {\n    this[kIterator].next(callback)\n  }\n\n  Iterator.prototype._nextv = function (size, options, callback) {\n    this[kIterator].nextv(size, options, callback)\n  }\n\n  Iterator.prototype._all = function (options, callback) {\n    this[kIterator].all(options, callback)\n  }\n}\n\nfor (const Iterator of [AbstractSublevelIterator, AbstractSublevelKeyIterator, AbstractSublevelValueIterator]) {\n  Iterator.prototype._seek = function (target, options) {\n    this[kIterator].seek(target, options)\n  }\n\n  Iterator.prototype._close = function (callback) {\n    this[kIterator].close(callback)\n  }\n}\n\nexports.AbstractSublevelIterator = AbstractSublevelIterator\nexports.AbstractSublevelKeyIterator = AbstractSublevelKeyIterator\nexports.AbstractSublevelValueIterator = AbstractSublevelValueIterator\n","'use strict'\n\nconst ModuleError = require('module-error')\nconst { Buffer } = require('buffer') || {}\nconst {\n  AbstractSublevelIterator,\n  AbstractSublevelKeyIterator,\n  AbstractSublevelValueIterator\n} = require('./abstract-sublevel-iterator')\n\nconst kPrefix = Symbol('prefix')\nconst kUpperBound = Symbol('upperBound')\nconst kPrefixRange = Symbol('prefixRange')\nconst kParent = Symbol('parent')\nconst kUnfix = Symbol('unfix')\n\nconst textEncoder = new TextEncoder()\nconst defaults = { separator: '!' }\n\n// Wrapped to avoid circular dependency\nmodule.exports = function ({ AbstractLevel }) {\n  class AbstractSublevel extends AbstractLevel {\n    static defaults (options) {\n      // To help migrating from subleveldown to abstract-level\n      if (typeof options === 'string') {\n        throw new ModuleError('The subleveldown string shorthand for { separator } has been removed', {\n          code: 'LEVEL_LEGACY'\n        })\n      } else if (options && options.open) {\n        throw new ModuleError('The subleveldown open option has been removed', {\n          code: 'LEVEL_LEGACY'\n        })\n      }\n\n      if (options == null) {\n        return defaults\n      } else if (!options.separator) {\n        return { ...options, separator: '!' }\n      } else {\n        return options\n      }\n    }\n\n    // TODO: add autoClose option, which if true, does parent.attachResource(this)\n    constructor (db, name, options) {\n      // Don't forward AbstractSublevel options to AbstractLevel\n      const { separator, manifest, ...forward } = AbstractSublevel.defaults(options)\n      name = trim(name, separator)\n\n      // Reserve one character between separator and name to give us an upper bound\n      const reserved = separator.charCodeAt(0) + 1\n      const parent = db[kParent] || db\n\n      // Keys should sort like ['!a!', '!a!!a!', '!a\"', '!aa!', '!b!'].\n      // Use ASCII for consistent length between string, Buffer and Uint8Array\n      if (!textEncoder.encode(name).every(x => x > reserved && x < 127)) {\n        throw new ModuleError(`Prefix must use bytes > ${reserved} < ${127}`, {\n          code: 'LEVEL_INVALID_PREFIX'\n        })\n      }\n\n      super(mergeManifests(parent, manifest), forward)\n\n      const prefix = (db.prefix || '') + separator + name + separator\n      const upperBound = prefix.slice(0, -1) + String.fromCharCode(reserved)\n\n      this[kParent] = parent\n      this[kPrefix] = new MultiFormat(prefix)\n      this[kUpperBound] = new MultiFormat(upperBound)\n      this[kUnfix] = new Unfixer()\n\n      this.nextTick = parent.nextTick\n    }\n\n    prefixKey (key, keyFormat) {\n      if (keyFormat === 'utf8') {\n        return this[kPrefix].utf8 + key\n      } else if (key.byteLength === 0) {\n        // Fast path for empty key (no copy)\n        return this[kPrefix][keyFormat]\n      } else if (keyFormat === 'view') {\n        const view = this[kPrefix].view\n        const result = new Uint8Array(view.byteLength + key.byteLength)\n\n        result.set(view, 0)\n        result.set(key, view.byteLength)\n\n        return result\n      } else {\n        const buffer = this[kPrefix].buffer\n        return Buffer.concat([buffer, key], buffer.byteLength + key.byteLength)\n      }\n    }\n\n    // Not exposed for now.\n    [kPrefixRange] (range, keyFormat) {\n      if (range.gte !== undefined) {\n        range.gte = this.prefixKey(range.gte, keyFormat)\n      } else if (range.gt !== undefined) {\n        range.gt = this.prefixKey(range.gt, keyFormat)\n      } else {\n        range.gte = this[kPrefix][keyFormat]\n      }\n\n      if (range.lte !== undefined) {\n        range.lte = this.prefixKey(range.lte, keyFormat)\n      } else if (range.lt !== undefined) {\n        range.lt = this.prefixKey(range.lt, keyFormat)\n      } else {\n        range.lte = this[kUpperBound][keyFormat]\n      }\n    }\n\n    get prefix () {\n      return this[kPrefix].utf8\n    }\n\n    get db () {\n      return this[kParent]\n    }\n\n    _open (options, callback) {\n      // The parent db must open itself or be (re)opened by the user because\n      // a sublevel should not initiate state changes on the rest of the db.\n      this[kParent].open({ passive: true }, callback)\n    }\n\n    _put (key, value, options, callback) {\n      this[kParent].put(key, value, options, callback)\n    }\n\n    _get (key, options, callback) {\n      this[kParent].get(key, options, callback)\n    }\n\n    _getMany (keys, options, callback) {\n      this[kParent].getMany(keys, options, callback)\n    }\n\n    _del (key, options, callback) {\n      this[kParent].del(key, options, callback)\n    }\n\n    _batch (operations, options, callback) {\n      this[kParent].batch(operations, options, callback)\n    }\n\n    _clear (options, callback) {\n      // TODO (refactor): move to AbstractLevel\n      this[kPrefixRange](options, options.keyEncoding)\n      this[kParent].clear(options, callback)\n    }\n\n    _iterator (options) {\n      // TODO (refactor): move to AbstractLevel\n      this[kPrefixRange](options, options.keyEncoding)\n      const iterator = this[kParent].iterator(options)\n      const unfix = this[kUnfix].get(this[kPrefix].utf8.length, options.keyEncoding)\n      return new AbstractSublevelIterator(this, options, iterator, unfix)\n    }\n\n    _keys (options) {\n      this[kPrefixRange](options, options.keyEncoding)\n      const iterator = this[kParent].keys(options)\n      const unfix = this[kUnfix].get(this[kPrefix].utf8.length, options.keyEncoding)\n      return new AbstractSublevelKeyIterator(this, options, iterator, unfix)\n    }\n\n    _values (options) {\n      this[kPrefixRange](options, options.keyEncoding)\n      const iterator = this[kParent].values(options)\n      return new AbstractSublevelValueIterator(this, options, iterator)\n    }\n  }\n\n  return { AbstractSublevel }\n}\n\nconst mergeManifests = function (parent, manifest) {\n  return {\n    // Inherit manifest of parent db\n    ...parent.supports,\n\n    // Disable unsupported features\n    createIfMissing: false,\n    errorIfExists: false,\n\n    // Unset additional events because we're not forwarding them\n    events: {},\n\n    // Unset additional methods (like approximateSize) which we can't support here unless\n    // the AbstractSublevel class is overridden by an implementation of `abstract-level`.\n    additionalMethods: {},\n\n    // Inherit manifest of custom AbstractSublevel subclass. Such a class is not\n    // allowed to override encodings.\n    ...manifest,\n\n    encodings: {\n      utf8: supportsEncoding(parent, 'utf8'),\n      buffer: supportsEncoding(parent, 'buffer'),\n      view: supportsEncoding(parent, 'view')\n    }\n  }\n}\n\nconst supportsEncoding = function (parent, encoding) {\n  // Prefer a non-transcoded encoding for optimal performance\n  return parent.supports.encodings[encoding]\n    ? parent.keyEncoding(encoding).name === encoding\n    : false\n}\n\nclass MultiFormat {\n  constructor (key) {\n    this.utf8 = key\n    this.view = textEncoder.encode(key)\n    this.buffer = Buffer ? Buffer.from(this.view.buffer, 0, this.view.byteLength) : {}\n  }\n}\n\nclass Unfixer {\n  constructor () {\n    this.cache = new Map()\n  }\n\n  get (prefixLength, keyFormat) {\n    let unfix = this.cache.get(keyFormat)\n\n    if (unfix === undefined) {\n      if (keyFormat === 'view') {\n        unfix = function (prefixLength, key) {\n          // Avoid Uint8Array#slice() because it copies\n          return key.subarray(prefixLength)\n        }.bind(null, prefixLength)\n      } else {\n        unfix = function (prefixLength, key) {\n          // Avoid Buffer#subarray() because it's slow\n          return key.slice(prefixLength)\n        }.bind(null, prefixLength)\n      }\n\n      this.cache.set(keyFormat, unfix)\n    }\n\n    return unfix\n  }\n}\n\nconst trim = function (str, char) {\n  let start = 0\n  let end = str.length\n\n  while (start < end && str[start] === char) start++\n  while (end > start && str[end - 1] === char) end--\n\n  return str.slice(start, end)\n}\n","'use strict'\n\nexports.getCallback = function (options, callback) {\n  return typeof options === 'function' ? options : callback\n}\n\nexports.getOptions = function (options, def) {\n  if (typeof options === 'object' && options !== null) {\n    return options\n  }\n\n  if (def !== undefined) {\n    return def\n  }\n\n  return {}\n}\n","'use strict'\n\nconst { AbstractChainedBatch } = require('../abstract-chained-batch')\nconst ModuleError = require('module-error')\nconst kEncoded = Symbol('encoded')\n\n// Functional default for chained batch, with support of deferred open\nclass DefaultChainedBatch extends AbstractChainedBatch {\n  constructor (db) {\n    super(db)\n    this[kEncoded] = []\n  }\n\n  _put (key, value, options) {\n    this[kEncoded].push({ ...options, type: 'put', key, value })\n  }\n\n  _del (key, options) {\n    this[kEncoded].push({ ...options, type: 'del', key })\n  }\n\n  _clear () {\n    this[kEncoded] = []\n  }\n\n  // Assumes this[kEncoded] cannot change after write()\n  _write (options, callback) {\n    if (this.db.status === 'opening') {\n      this.db.defer(() => this._write(options, callback))\n    } else if (this.db.status === 'open') {\n      if (this[kEncoded].length === 0) this.nextTick(callback)\n      else this.db._batch(this[kEncoded], options, callback)\n    } else {\n      this.nextTick(callback, new ModuleError('Batch is not open: cannot call write() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      }))\n    }\n  }\n}\n\nexports.DefaultChainedBatch = DefaultChainedBatch\n","'use strict'\n\nconst { AbstractKeyIterator, AbstractValueIterator } = require('../abstract-iterator')\n\nconst kIterator = Symbol('iterator')\nconst kCallback = Symbol('callback')\nconst kHandleOne = Symbol('handleOne')\nconst kHandleMany = Symbol('handleMany')\n\nclass DefaultKeyIterator extends AbstractKeyIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kIterator] = db.iterator({ ...options, keys: true, values: false })\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n  }\n}\n\nclass DefaultValueIterator extends AbstractValueIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kIterator] = db.iterator({ ...options, keys: false, values: true })\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n  }\n}\n\nfor (const Iterator of [DefaultKeyIterator, DefaultValueIterator]) {\n  const keys = Iterator === DefaultKeyIterator\n  const mapEntry = keys ? (entry) => entry[0] : (entry) => entry[1]\n\n  Iterator.prototype._next = function (callback) {\n    this[kCallback] = callback\n    this[kIterator].next(this[kHandleOne])\n  }\n\n  Iterator.prototype[kHandleOne] = function (err, key, value) {\n    const callback = this[kCallback]\n    if (err) callback(err)\n    else callback(null, keys ? key : value)\n  }\n\n  Iterator.prototype._nextv = function (size, options, callback) {\n    this[kCallback] = callback\n    this[kIterator].nextv(size, options, this[kHandleMany])\n  }\n\n  Iterator.prototype._all = function (options, callback) {\n    this[kCallback] = callback\n    this[kIterator].all(options, this[kHandleMany])\n  }\n\n  Iterator.prototype[kHandleMany] = function (err, entries) {\n    const callback = this[kCallback]\n    if (err) callback(err)\n    else callback(null, entries.map(mapEntry))\n  }\n\n  Iterator.prototype._seek = function (target, options) {\n    this[kIterator].seek(target, options)\n  }\n\n  Iterator.prototype._close = function (callback) {\n    this[kIterator].close(callback)\n  }\n}\n\n// Internal utilities, should be typed as AbstractKeyIterator and AbstractValueIterator\nexports.DefaultKeyIterator = DefaultKeyIterator\nexports.DefaultValueIterator = DefaultValueIterator\n","'use strict'\n\nconst { AbstractIterator, AbstractKeyIterator, AbstractValueIterator } = require('../abstract-iterator')\nconst ModuleError = require('module-error')\n\nconst kNut = Symbol('nut')\nconst kUndefer = Symbol('undefer')\nconst kFactory = Symbol('factory')\n\nclass DeferredIterator extends AbstractIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kNut] = null\n    this[kFactory] = () => db.iterator(options)\n\n    this.db.defer(() => this[kUndefer]())\n  }\n}\n\nclass DeferredKeyIterator extends AbstractKeyIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kNut] = null\n    this[kFactory] = () => db.keys(options)\n\n    this.db.defer(() => this[kUndefer]())\n  }\n}\n\nclass DeferredValueIterator extends AbstractValueIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kNut] = null\n    this[kFactory] = () => db.values(options)\n\n    this.db.defer(() => this[kUndefer]())\n  }\n}\n\nfor (const Iterator of [DeferredIterator, DeferredKeyIterator, DeferredValueIterator]) {\n  Iterator.prototype[kUndefer] = function () {\n    if (this.db.status === 'open') {\n      this[kNut] = this[kFactory]()\n    }\n  }\n\n  Iterator.prototype._next = function (callback) {\n    if (this[kNut] !== null) {\n      this[kNut].next(callback)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._next(callback))\n    } else {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call next() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    }\n  }\n\n  Iterator.prototype._nextv = function (size, options, callback) {\n    if (this[kNut] !== null) {\n      this[kNut].nextv(size, options, callback)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._nextv(size, options, callback))\n    } else {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call nextv() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    }\n  }\n\n  Iterator.prototype._all = function (options, callback) {\n    if (this[kNut] !== null) {\n      this[kNut].all(callback)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._all(options, callback))\n    } else {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call all() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    }\n  }\n\n  Iterator.prototype._seek = function (target, options) {\n    if (this[kNut] !== null) {\n      // TODO: explain why we need _seek() rather than seek() here\n      this[kNut]._seek(target, options)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._seek(target, options))\n    }\n  }\n\n  Iterator.prototype._close = function (callback) {\n    if (this[kNut] !== null) {\n      this[kNut].close(callback)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._close(callback))\n    } else {\n      this.nextTick(callback)\n    }\n  }\n}\n\nexports.DeferredIterator = DeferredIterator\nexports.DeferredKeyIterator = DeferredKeyIterator\nexports.DeferredValueIterator = DeferredValueIterator\n","'use strict'\n\nconst queueMicrotask = require('queue-microtask')\n\nmodule.exports = function (fn, ...args) {\n  if (args.length === 0) {\n    queueMicrotask(fn)\n  } else {\n    queueMicrotask(() => fn(...args))\n  }\n}\n","'use strict'\n\nconst ModuleError = require('module-error')\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nconst rangeOptions = new Set(['lt', 'lte', 'gt', 'gte'])\n\nmodule.exports = function (options, keyEncoding) {\n  const result = {}\n\n  for (const k in options) {\n    if (!hasOwnProperty.call(options, k)) continue\n    if (k === 'keyEncoding' || k === 'valueEncoding') continue\n\n    if (k === 'start' || k === 'end') {\n      throw new ModuleError(`The legacy range option '${k}' has been removed`, {\n        code: 'LEVEL_LEGACY'\n      })\n    } else if (k === 'encoding') {\n      // To help migrating to abstract-level\n      throw new ModuleError(\"The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead\", {\n        code: 'LEVEL_LEGACY'\n      })\n    }\n\n    if (rangeOptions.has(k)) {\n      // Note that we don't reject nullish and empty options here. While\n      // those types are invalid as keys, they are valid as range options.\n      result[k] = keyEncoding.encode(options[k])\n    } else {\n      result[k] = options[k]\n    }\n  }\n\n  result.reverse = !!result.reverse\n  result.limit = Number.isInteger(result.limit) && result.limit >= 0 ? result.limit : -1\n\n  return result\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","/**\n * Takes an array of AbortSignals and returns a single signal.\n * If any signals are aborted, the returned signal will be aborted.\n * @param {Array<AbortSignal>} signals\n * @returns {AbortSignal}\n */\nfunction anySignal (signals) {\n  const controller = new globalThis.AbortController()\n\n  function onAbort () {\n    controller.abort()\n\n    for (const signal of signals) {\n      if (!signal || !signal.removeEventListener) continue\n      signal.removeEventListener('abort', onAbort)\n    }\n  }\n\n  for (const signal of signals) {\n    if (!signal || !signal.addEventListener) continue\n    if (signal.aborted) {\n      onAbort()\n      break\n    }\n    signal.addEventListener('abort', onAbort)\n  }\n\n  return controller.signal\n}\n\nmodule.exports = anySignal\nmodule.exports.anySignal = anySignal\n","/* global indexedDB */\n\n'use strict'\n\nconst { AbstractLevel } = require('abstract-level')\nconst ModuleError = require('module-error')\nconst parallel = require('run-parallel-limit')\nconst { fromCallback } = require('catering')\nconst { Iterator } = require('./iterator')\nconst deserialize = require('./util/deserialize')\nconst clear = require('./util/clear')\nconst createKeyRange = require('./util/key-range')\n\n// Keep as-is for compatibility with existing level-js databases\nconst DEFAULT_PREFIX = 'level-js-'\n\nconst kIDB = Symbol('idb')\nconst kNamePrefix = Symbol('namePrefix')\nconst kLocation = Symbol('location')\nconst kVersion = Symbol('version')\nconst kStore = Symbol('store')\nconst kOnComplete = Symbol('onComplete')\nconst kPromise = Symbol('promise')\n\nclass BrowserLevel extends AbstractLevel {\n  constructor (location, options, _) {\n    // To help migrating to abstract-level\n    if (typeof options === 'function' || typeof _ === 'function') {\n      throw new ModuleError('The levelup-style callback argument has been removed', {\n        code: 'LEVEL_LEGACY'\n      })\n    }\n\n    const { prefix, version, ...forward } = options || {}\n\n    super({\n      encodings: { view: true },\n      snapshots: false,\n      createIfMissing: false,\n      errorIfExists: false,\n      seek: true\n    }, forward)\n\n    if (typeof location !== 'string') {\n      throw new Error('constructor requires a location string argument')\n    }\n\n    // TODO (next major): remove default prefix\n    this[kLocation] = location\n    this[kNamePrefix] = prefix == null ? DEFAULT_PREFIX : prefix\n    this[kVersion] = parseInt(version || 1, 10)\n    this[kIDB] = null\n  }\n\n  get location () {\n    return this[kLocation]\n  }\n\n  get namePrefix () {\n    return this[kNamePrefix]\n  }\n\n  get version () {\n    return this[kVersion]\n  }\n\n  // Exposed for backwards compat and unit tests\n  get db () {\n    return this[kIDB]\n  }\n\n  get type () {\n    return 'browser-level'\n  }\n\n  _open (options, callback) {\n    const req = indexedDB.open(this[kNamePrefix] + this[kLocation], this[kVersion])\n\n    req.onerror = function () {\n      callback(req.error || new Error('unknown error'))\n    }\n\n    req.onsuccess = () => {\n      this[kIDB] = req.result\n      callback()\n    }\n\n    req.onupgradeneeded = (ev) => {\n      const db = ev.target.result\n\n      if (!db.objectStoreNames.contains(this[kLocation])) {\n        db.createObjectStore(this[kLocation])\n      }\n    }\n  }\n\n  [kStore] (mode) {\n    const transaction = this[kIDB].transaction([this[kLocation]], mode)\n    return transaction.objectStore(this[kLocation])\n  }\n\n  [kOnComplete] (request, callback) {\n    const transaction = request.transaction\n\n    // Take advantage of the fact that a non-canceled request error aborts\n    // the transaction. I.e. no need to listen for \"request.onerror\".\n    transaction.onabort = function () {\n      callback(transaction.error || new Error('aborted by user'))\n    }\n\n    transaction.oncomplete = function () {\n      callback(null, request.result)\n    }\n  }\n\n  _get (key, options, callback) {\n    const store = this[kStore]('readonly')\n    let req\n\n    try {\n      req = store.get(key)\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, function (err, value) {\n      if (err) return callback(err)\n\n      if (value === undefined) {\n        return callback(new ModuleError('Entry not found', {\n          code: 'LEVEL_NOT_FOUND'\n        }))\n      }\n\n      callback(null, deserialize(value))\n    })\n  }\n\n  _getMany (keys, options, callback) {\n    const store = this[kStore]('readonly')\n    const tasks = keys.map((key) => (next) => {\n      let request\n\n      try {\n        request = store.get(key)\n      } catch (err) {\n        return next(err)\n      }\n\n      request.onsuccess = () => {\n        const value = request.result\n        next(null, value === undefined ? value : deserialize(value))\n      }\n\n      request.onerror = (ev) => {\n        ev.stopPropagation()\n        next(request.error)\n      }\n    })\n\n    parallel(tasks, 16, callback)\n  }\n\n  _del (key, options, callback) {\n    const store = this[kStore]('readwrite')\n    let req\n\n    try {\n      req = store.delete(key)\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, callback)\n  }\n\n  _put (key, value, options, callback) {\n    const store = this[kStore]('readwrite')\n    let req\n\n    try {\n      // Will throw a DataError or DataCloneError if the environment\n      // does not support serializing the key or value respectively.\n      req = store.put(value, key)\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, callback)\n  }\n\n  // TODO: implement key and value iterators\n  _iterator (options) {\n    return new Iterator(this, this[kLocation], options)\n  }\n\n  _batch (operations, options, callback) {\n    const store = this[kStore]('readwrite')\n    const transaction = store.transaction\n    let index = 0\n    let error\n\n    transaction.onabort = function () {\n      callback(error || transaction.error || new Error('aborted by user'))\n    }\n\n    transaction.oncomplete = function () {\n      callback()\n    }\n\n    // Wait for a request to complete before making the next, saving CPU.\n    function loop () {\n      const op = operations[index++]\n      const key = op.key\n\n      let req\n\n      try {\n        req = op.type === 'del' ? store.delete(key) : store.put(op.value, key)\n      } catch (err) {\n        error = err\n        transaction.abort()\n        return\n      }\n\n      if (index < operations.length) {\n        req.onsuccess = loop\n      } else if (typeof transaction.commit === 'function') {\n        // Commit now instead of waiting for auto-commit\n        transaction.commit()\n      }\n    }\n\n    loop()\n  }\n\n  _clear (options, callback) {\n    let keyRange\n    let req\n\n    try {\n      keyRange = createKeyRange(options)\n    } catch (e) {\n      // The lower key is greater than the upper key.\n      // IndexedDB throws an error, but we'll just do nothing.\n      return this.nextTick(callback)\n    }\n\n    if (options.limit >= 0) {\n      // IDBObjectStore#delete(range) doesn't have such an option.\n      // Fall back to cursor-based implementation.\n      return clear(this, this[kLocation], keyRange, options, callback)\n    }\n\n    try {\n      const store = this[kStore]('readwrite')\n      req = keyRange ? store.delete(keyRange) : store.clear()\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, callback)\n  }\n\n  _close (callback) {\n    this[kIDB].close()\n    this.nextTick(callback)\n  }\n}\n\nBrowserLevel.destroy = function (location, prefix, callback) {\n  if (typeof prefix === 'function') {\n    callback = prefix\n    prefix = DEFAULT_PREFIX\n  }\n\n  callback = fromCallback(callback, kPromise)\n  const request = indexedDB.deleteDatabase(prefix + location)\n\n  request.onsuccess = function () {\n    callback()\n  }\n\n  request.onerror = function (err) {\n    callback(err)\n  }\n\n  return callback[kPromise]\n}\n\nexports.BrowserLevel = BrowserLevel\n","'use strict'\n\nconst { AbstractIterator } = require('abstract-level')\nconst createKeyRange = require('./util/key-range')\nconst deserialize = require('./util/deserialize')\n\nconst kCache = Symbol('cache')\nconst kFinished = Symbol('finished')\nconst kOptions = Symbol('options')\nconst kCurrentOptions = Symbol('currentOptions')\nconst kPosition = Symbol('position')\nconst kLocation = Symbol('location')\nconst kFirst = Symbol('first')\nconst emptyOptions = {}\n\nclass Iterator extends AbstractIterator {\n  constructor (db, location, options) {\n    super(db, options)\n\n    this[kCache] = []\n    this[kFinished] = this.limit === 0\n    this[kOptions] = options\n    this[kCurrentOptions] = { ...options }\n    this[kPosition] = undefined\n    this[kLocation] = location\n    this[kFirst] = true\n  }\n\n  // Note: if called by _all() then size can be Infinity. This is an internal\n  // detail; by design AbstractIterator.nextv() does not support Infinity.\n  _nextv (size, options, callback) {\n    this[kFirst] = false\n\n    if (this[kFinished]) {\n      return this.nextTick(callback, null, [])\n    } else if (this[kCache].length > 0) {\n      // TODO: mixing next and nextv is not covered by test suite\n      size = Math.min(size, this[kCache].length)\n      return this.nextTick(callback, null, this[kCache].splice(0, size))\n    }\n\n    // Adjust range by what we already visited\n    if (this[kPosition] !== undefined) {\n      if (this[kOptions].reverse) {\n        this[kCurrentOptions].lt = this[kPosition]\n        this[kCurrentOptions].lte = undefined\n      } else {\n        this[kCurrentOptions].gt = this[kPosition]\n        this[kCurrentOptions].gte = undefined\n      }\n    }\n\n    let keyRange\n\n    try {\n      keyRange = createKeyRange(this[kCurrentOptions])\n    } catch (_) {\n      // The lower key is greater than the upper key.\n      // IndexedDB throws an error, but we'll just return 0 results.\n      this[kFinished] = true\n      return this.nextTick(callback, null, [])\n    }\n\n    const transaction = this.db.db.transaction([this[kLocation]], 'readonly')\n    const store = transaction.objectStore(this[kLocation])\n    const entries = []\n\n    if (!this[kOptions].reverse) {\n      let keys\n      let values\n\n      const complete = () => {\n        // Wait for both requests to complete\n        if (keys === undefined || values === undefined) return\n\n        const length = Math.max(keys.length, values.length)\n\n        if (length === 0 || size === Infinity) {\n          this[kFinished] = true\n        } else {\n          this[kPosition] = keys[length - 1]\n        }\n\n        // Resize\n        entries.length = length\n\n        // Merge keys and values\n        for (let i = 0; i < length; i++) {\n          const key = keys[i]\n          const value = values[i]\n\n          entries[i] = [\n            this[kOptions].keys && key !== undefined ? deserialize(key) : undefined,\n            this[kOptions].values && value !== undefined ? deserialize(value) : undefined\n          ]\n        }\n\n        maybeCommit(transaction)\n      }\n\n      // If keys were not requested and size is Infinity, we don't have to keep\n      // track of position and can thus skip getting keys.\n      if (this[kOptions].keys || size < Infinity) {\n        store.getAllKeys(keyRange, size < Infinity ? size : undefined).onsuccess = (ev) => {\n          keys = ev.target.result\n          complete()\n        }\n      } else {\n        keys = []\n        this.nextTick(complete)\n      }\n\n      if (this[kOptions].values) {\n        store.getAll(keyRange, size < Infinity ? size : undefined).onsuccess = (ev) => {\n          values = ev.target.result\n          complete()\n        }\n      } else {\n        values = []\n        this.nextTick(complete)\n      }\n    } else {\n      // Can't use getAll() in reverse, so use a slower cursor that yields one item at a time\n      // TODO: test if all target browsers support openKeyCursor\n      const method = !this[kOptions].values && store.openKeyCursor ? 'openKeyCursor' : 'openCursor'\n\n      store[method](keyRange, 'prev').onsuccess = (ev) => {\n        const cursor = ev.target.result\n\n        if (cursor) {\n          const { key, value } = cursor\n          this[kPosition] = key\n\n          entries.push([\n            this[kOptions].keys && key !== undefined ? deserialize(key) : undefined,\n            this[kOptions].values && value !== undefined ? deserialize(value) : undefined\n          ])\n\n          if (entries.length < size) {\n            cursor.continue()\n          } else {\n            maybeCommit(transaction)\n          }\n        } else {\n          this[kFinished] = true\n        }\n      }\n    }\n\n    // If an error occurs (on the request), the transaction will abort.\n    transaction.onabort = () => {\n      callback(transaction.error || new Error('aborted by user'))\n      callback = null\n    }\n\n    transaction.oncomplete = () => {\n      callback(null, entries)\n      callback = null\n    }\n  }\n\n  _next (callback) {\n    if (this[kCache].length > 0) {\n      const [key, value] = this[kCache].shift()\n      this.nextTick(callback, null, key, value)\n    } else if (this[kFinished]) {\n      this.nextTick(callback)\n    } else {\n      let size = Math.min(100, this.limit - this.count)\n\n      if (this[kFirst]) {\n        // It's common to only want one entry initially or after a seek()\n        this[kFirst] = false\n        size = 1\n      }\n\n      this._nextv(size, emptyOptions, (err, entries) => {\n        if (err) return callback(err)\n        this[kCache] = entries\n        this._next(callback)\n      })\n    }\n  }\n\n  _all (options, callback) {\n    this[kFirst] = false\n\n    // TODO: mixing next and all is not covered by test suite\n    const cache = this[kCache].splice(0, this[kCache].length)\n    const size = this.limit - this.count - cache.length\n\n    if (size <= 0) {\n      return this.nextTick(callback, null, cache)\n    }\n\n    this._nextv(size, emptyOptions, (err, entries) => {\n      if (err) return callback(err)\n      if (cache.length > 0) entries = cache.concat(entries)\n      callback(null, entries)\n    })\n  }\n\n  _seek (target, options) {\n    this[kFirst] = true\n    this[kCache] = []\n    this[kFinished] = false\n    this[kPosition] = undefined\n\n    // TODO: not covered by test suite\n    this[kCurrentOptions] = { ...this[kOptions] }\n\n    let keyRange\n\n    try {\n      keyRange = createKeyRange(this[kOptions])\n    } catch (_) {\n      this[kFinished] = true\n      return\n    }\n\n    if (keyRange !== null && !keyRange.includes(target)) {\n      this[kFinished] = true\n    } else if (this[kOptions].reverse) {\n      this[kCurrentOptions].lte = target\n    } else {\n      this[kCurrentOptions].gte = target\n    }\n  }\n}\n\nexports.Iterator = Iterator\n\nfunction maybeCommit (transaction) {\n  // Commit (meaning close) now instead of waiting for auto-commit\n  if (typeof transaction.commit === 'function') {\n    transaction.commit()\n  }\n}\n","'use strict'\n\nmodule.exports = function clear (db, location, keyRange, options, callback) {\n  if (options.limit === 0) return db.nextTick(callback)\n\n  const transaction = db.db.transaction([location], 'readwrite')\n  const store = transaction.objectStore(location)\n  let count = 0\n\n  transaction.oncomplete = function () {\n    callback()\n  }\n\n  transaction.onabort = function () {\n    callback(transaction.error || new Error('aborted by user'))\n  }\n\n  // A key cursor is faster (skips reading values) but not supported by IE\n  // TODO: we no longer support IE. Test others\n  const method = store.openKeyCursor ? 'openKeyCursor' : 'openCursor'\n  const direction = options.reverse ? 'prev' : 'next'\n\n  store[method](keyRange, direction).onsuccess = function (ev) {\n    const cursor = ev.target.result\n\n    if (cursor) {\n      // Wait for a request to complete before continuing, saving CPU.\n      store.delete(cursor.key).onsuccess = function () {\n        if (options.limit <= 0 || ++count < options.limit) {\n          cursor.continue()\n        }\n      }\n    }\n  }\n}\n","'use strict'\n\nconst textEncoder = new TextEncoder()\n\nmodule.exports = function (data) {\n  if (data instanceof Uint8Array) {\n    return data\n  } else if (data instanceof ArrayBuffer) {\n    return new Uint8Array(data)\n  } else {\n    // Non-binary data stored with an old version (level-js < 5.0.0)\n    return textEncoder.encode(data)\n  }\n}\n","/* global IDBKeyRange */\n\n'use strict'\n\nmodule.exports = function createKeyRange (options) {\n  const lower = options.gte !== undefined ? options.gte : options.gt !== undefined ? options.gt : undefined\n  const upper = options.lte !== undefined ? options.lte : options.lt !== undefined ? options.lt : undefined\n  const lowerExclusive = options.gte === undefined\n  const upperExclusive = options.lte === undefined\n\n  if (lower !== undefined && upper !== undefined) {\n    return IDBKeyRange.bound(lower, upper, lowerExclusive, upperExclusive)\n  } else if (lower !== undefined) {\n    return IDBKeyRange.lowerBound(lower, lowerExclusive)\n  } else if (upper !== undefined) {\n    return IDBKeyRange.upperBound(upper, upperExclusive)\n  } else {\n    return null\n  }\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    var proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    var copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        Buffer.from(buf).copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (var i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nvar hexSliceLookupTable = (function () {\n  var alphabet = '0123456789abcdef'\n  var table = new Array(256)\n  for (var i = 0; i < 16; ++i) {\n    var i16 = i * 16\n    for (var j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n","/*!\n * bytes\n * Copyright(c) 2012-2014 TJ Holowaychuk\n * Copyright(c) 2015 Jed Watson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = bytes;\nmodule.exports.format = format;\nmodule.exports.parse = parse;\n\n/**\n * Module variables.\n * @private\n */\n\nvar formatThousandsRegExp = /\\B(?=(\\d{3})+(?!\\d))/g;\n\nvar formatDecimalsRegExp = /(?:\\.0*|(\\.[^0]+)0+)$/;\n\nvar map = {\n  b:  1,\n  kb: 1 << 10,\n  mb: 1 << 20,\n  gb: 1 << 30,\n  tb: Math.pow(1024, 4),\n  pb: Math.pow(1024, 5),\n};\n\nvar parseRegExp = /^((-|\\+)?(\\d+(?:\\.\\d+)?)) *(kb|mb|gb|tb|pb)$/i;\n\n/**\n * Convert the given value in bytes into a string or parse to string to an integer in bytes.\n *\n * @param {string|number} value\n * @param {{\n *  case: [string],\n *  decimalPlaces: [number]\n *  fixedDecimals: [boolean]\n *  thousandsSeparator: [string]\n *  unitSeparator: [string]\n *  }} [options] bytes options.\n *\n * @returns {string|number|null}\n */\n\nfunction bytes(value, options) {\n  if (typeof value === 'string') {\n    return parse(value);\n  }\n\n  if (typeof value === 'number') {\n    return format(value, options);\n  }\n\n  return null;\n}\n\n/**\n * Format the given value in bytes into a string.\n *\n * If the value is negative, it is kept as such. If it is a float,\n * it is rounded.\n *\n * @param {number} value\n * @param {object} [options]\n * @param {number} [options.decimalPlaces=2]\n * @param {number} [options.fixedDecimals=false]\n * @param {string} [options.thousandsSeparator=]\n * @param {string} [options.unit=]\n * @param {string} [options.unitSeparator=]\n *\n * @returns {string|null}\n * @public\n */\n\nfunction format(value, options) {\n  if (!Number.isFinite(value)) {\n    return null;\n  }\n\n  var mag = Math.abs(value);\n  var thousandsSeparator = (options && options.thousandsSeparator) || '';\n  var unitSeparator = (options && options.unitSeparator) || '';\n  var decimalPlaces = (options && options.decimalPlaces !== undefined) ? options.decimalPlaces : 2;\n  var fixedDecimals = Boolean(options && options.fixedDecimals);\n  var unit = (options && options.unit) || '';\n\n  if (!unit || !map[unit.toLowerCase()]) {\n    if (mag >= map.pb) {\n      unit = 'PB';\n    } else if (mag >= map.tb) {\n      unit = 'TB';\n    } else if (mag >= map.gb) {\n      unit = 'GB';\n    } else if (mag >= map.mb) {\n      unit = 'MB';\n    } else if (mag >= map.kb) {\n      unit = 'KB';\n    } else {\n      unit = 'B';\n    }\n  }\n\n  var val = value / map[unit.toLowerCase()];\n  var str = val.toFixed(decimalPlaces);\n\n  if (!fixedDecimals) {\n    str = str.replace(formatDecimalsRegExp, '$1');\n  }\n\n  if (thousandsSeparator) {\n    str = str.split('.').map(function (s, i) {\n      return i === 0\n        ? s.replace(formatThousandsRegExp, thousandsSeparator)\n        : s\n    }).join('.');\n  }\n\n  return str + unitSeparator + unit;\n}\n\n/**\n * Parse the string value into an integer in bytes.\n *\n * If no unit is given, it is assumed the value is in bytes.\n *\n * @param {number|string} val\n *\n * @returns {number|null}\n * @public\n */\n\nfunction parse(val) {\n  if (typeof val === 'number' && !isNaN(val)) {\n    return val;\n  }\n\n  if (typeof val !== 'string') {\n    return null;\n  }\n\n  // Test if the string passed is valid\n  var results = parseRegExp.exec(val);\n  var floatValue;\n  var unit = 'b';\n\n  if (!results) {\n    // Nothing could be extracted from the given string\n    floatValue = parseInt(val, 10);\n    unit = 'b'\n  } else {\n    // Retrieve the value and the unit\n    floatValue = parseFloat(results[1]);\n    unit = results[4].toLowerCase();\n  }\n\n  if (isNaN(floatValue)) {\n    return null;\n  }\n\n  return Math.floor(map[unit] * floatValue);\n}\n","'use strict'\n\nvar nextTick = require('./next-tick')\n\nexports.fromCallback = function (callback, symbol) {\n  if (callback === undefined) {\n    var promise = new Promise(function (resolve, reject) {\n      callback = function (err, res) {\n        if (err) reject(err)\n        else resolve(res)\n      }\n    })\n\n    callback[symbol !== undefined ? symbol : 'promise'] = promise\n  } else if (typeof callback !== 'function') {\n    throw new TypeError('Callback must be a function')\n  }\n\n  return callback\n}\n\nexports.fromPromise = function (promise, callback) {\n  if (callback === undefined) return promise\n\n  promise\n    .then(function (res) { nextTick(() => callback(null, res)) })\n    .catch(function (err) { nextTick(() => callback(err)) })\n}\n","module.exports = typeof queueMicrotask === 'function' ? queueMicrotask : (fn) => Promise.resolve().then(fn)\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nconst proxyMarker = Symbol(\"Comlink.proxy\");\nconst createEndpoint = Symbol(\"Comlink.endpoint\");\nconst releaseProxy = Symbol(\"Comlink.releaseProxy\");\nconst finalizer = Symbol(\"Comlink.finalizer\");\nconst throwMarker = Symbol(\"Comlink.thrown\");\nconst isObject = (val) => (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler = {\n    canHandle: (val) => isObject(val) && val[proxyMarker],\n    serialize(obj) {\n        const { port1, port2 } = new MessageChannel();\n        expose(obj, port1);\n        return [port2, [port2]];\n    },\n    deserialize(port) {\n        port.start();\n        return wrap(port);\n    },\n};\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler = {\n    canHandle: (value) => isObject(value) && throwMarker in value,\n    serialize({ value }) {\n        let serialized;\n        if (value instanceof Error) {\n            serialized = {\n                isError: true,\n                value: {\n                    message: value.message,\n                    name: value.name,\n                    stack: value.stack,\n                },\n            };\n        }\n        else {\n            serialized = { isError: false, value };\n        }\n        return [serialized, []];\n    },\n    deserialize(serialized) {\n        if (serialized.isError) {\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\n        }\n        throw serialized.value;\n    },\n};\n/**\n * Allows customizing the serialization of certain values.\n */\nconst transferHandlers = new Map([\n    [\"proxy\", proxyTransferHandler],\n    [\"throw\", throwTransferHandler],\n]);\nfunction isAllowedOrigin(allowedOrigins, origin) {\n    for (const allowedOrigin of allowedOrigins) {\n        if (origin === allowedOrigin || allowedOrigin === \"*\") {\n            return true;\n        }\n        if (allowedOrigin instanceof RegExp && allowedOrigin.test(origin)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction expose(obj, ep = globalThis, allowedOrigins = [\"*\"]) {\n    ep.addEventListener(\"message\", function callback(ev) {\n        if (!ev || !ev.data) {\n            return;\n        }\n        if (!isAllowedOrigin(allowedOrigins, ev.origin)) {\n            console.warn(`Invalid origin '${ev.origin}' for comlink proxy`);\n            return;\n        }\n        const { id, type, path } = Object.assign({ path: [] }, ev.data);\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n        let returnValue;\n        try {\n            const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n            const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n            switch (type) {\n                case \"GET\" /* MessageType.GET */:\n                    {\n                        returnValue = rawValue;\n                    }\n                    break;\n                case \"SET\" /* MessageType.SET */:\n                    {\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n                        returnValue = true;\n                    }\n                    break;\n                case \"APPLY\" /* MessageType.APPLY */:\n                    {\n                        returnValue = rawValue.apply(parent, argumentList);\n                    }\n                    break;\n                case \"CONSTRUCT\" /* MessageType.CONSTRUCT */:\n                    {\n                        const value = new rawValue(...argumentList);\n                        returnValue = proxy(value);\n                    }\n                    break;\n                case \"ENDPOINT\" /* MessageType.ENDPOINT */:\n                    {\n                        const { port1, port2 } = new MessageChannel();\n                        expose(obj, port2);\n                        returnValue = transfer(port1, [port1]);\n                    }\n                    break;\n                case \"RELEASE\" /* MessageType.RELEASE */:\n                    {\n                        returnValue = undefined;\n                    }\n                    break;\n                default:\n                    return;\n            }\n        }\n        catch (value) {\n            returnValue = { value, [throwMarker]: 0 };\n        }\n        Promise.resolve(returnValue)\n            .catch((value) => {\n            return { value, [throwMarker]: 0 };\n        })\n            .then((returnValue) => {\n            const [wireValue, transferables] = toWireValue(returnValue);\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n            if (type === \"RELEASE\" /* MessageType.RELEASE */) {\n                // detach and deactive after sending release response above.\n                ep.removeEventListener(\"message\", callback);\n                closeEndPoint(ep);\n                if (finalizer in obj && typeof obj[finalizer] === \"function\") {\n                    obj[finalizer]();\n                }\n            }\n        })\n            .catch((error) => {\n            // Send Serialization Error To Caller\n            const [wireValue, transferables] = toWireValue({\n                value: new TypeError(\"Unserializable return value\"),\n                [throwMarker]: 0,\n            });\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n        });\n    });\n    if (ep.start) {\n        ep.start();\n    }\n}\nfunction isMessagePort(endpoint) {\n    return endpoint.constructor.name === \"MessagePort\";\n}\nfunction closeEndPoint(endpoint) {\n    if (isMessagePort(endpoint))\n        endpoint.close();\n}\nfunction wrap(ep, target) {\n    return createProxy(ep, [], target);\n}\nfunction throwIfProxyReleased(isReleased) {\n    if (isReleased) {\n        throw new Error(\"Proxy has been released and is not useable\");\n    }\n}\nfunction releaseEndpoint(ep) {\n    return requestResponseMessage(ep, {\n        type: \"RELEASE\" /* MessageType.RELEASE */,\n    }).then(() => {\n        closeEndPoint(ep);\n    });\n}\nconst proxyCounter = new WeakMap();\nconst proxyFinalizers = \"FinalizationRegistry\" in globalThis &&\n    new FinalizationRegistry((ep) => {\n        const newCount = (proxyCounter.get(ep) || 0) - 1;\n        proxyCounter.set(ep, newCount);\n        if (newCount === 0) {\n            releaseEndpoint(ep);\n        }\n    });\nfunction registerProxy(proxy, ep) {\n    const newCount = (proxyCounter.get(ep) || 0) + 1;\n    proxyCounter.set(ep, newCount);\n    if (proxyFinalizers) {\n        proxyFinalizers.register(proxy, ep, proxy);\n    }\n}\nfunction unregisterProxy(proxy) {\n    if (proxyFinalizers) {\n        proxyFinalizers.unregister(proxy);\n    }\n}\nfunction createProxy(ep, path = [], target = function () { }) {\n    let isProxyReleased = false;\n    const proxy = new Proxy(target, {\n        get(_target, prop) {\n            throwIfProxyReleased(isProxyReleased);\n            if (prop === releaseProxy) {\n                return () => {\n                    unregisterProxy(proxy);\n                    releaseEndpoint(ep);\n                    isProxyReleased = true;\n                };\n            }\n            if (prop === \"then\") {\n                if (path.length === 0) {\n                    return { then: () => proxy };\n                }\n                const r = requestResponseMessage(ep, {\n                    type: \"GET\" /* MessageType.GET */,\n                    path: path.map((p) => p.toString()),\n                }).then(fromWireValue);\n                return r.then.bind(r);\n            }\n            return createProxy(ep, [...path, prop]);\n        },\n        set(_target, prop, rawValue) {\n            throwIfProxyReleased(isProxyReleased);\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n            // boolean. To show good will, we return true asynchronously \\_()_/\n            const [value, transferables] = toWireValue(rawValue);\n            return requestResponseMessage(ep, {\n                type: \"SET\" /* MessageType.SET */,\n                path: [...path, prop].map((p) => p.toString()),\n                value,\n            }, transferables).then(fromWireValue);\n        },\n        apply(_target, _thisArg, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const last = path[path.length - 1];\n            if (last === createEndpoint) {\n                return requestResponseMessage(ep, {\n                    type: \"ENDPOINT\" /* MessageType.ENDPOINT */,\n                }).then(fromWireValue);\n            }\n            // We just pretend that `bind()` didnt happen.\n            if (last === \"bind\") {\n                return createProxy(ep, path.slice(0, -1));\n            }\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, {\n                type: \"APPLY\" /* MessageType.APPLY */,\n                path: path.map((p) => p.toString()),\n                argumentList,\n            }, transferables).then(fromWireValue);\n        },\n        construct(_target, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, {\n                type: \"CONSTRUCT\" /* MessageType.CONSTRUCT */,\n                path: path.map((p) => p.toString()),\n                argumentList,\n            }, transferables).then(fromWireValue);\n        },\n    });\n    registerProxy(proxy, ep);\n    return proxy;\n}\nfunction myFlat(arr) {\n    return Array.prototype.concat.apply([], arr);\n}\nfunction processArguments(argumentList) {\n    const processed = argumentList.map(toWireValue);\n    return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\nconst transferCache = new WeakMap();\nfunction transfer(obj, transfers) {\n    transferCache.set(obj, transfers);\n    return obj;\n}\nfunction proxy(obj) {\n    return Object.assign(obj, { [proxyMarker]: true });\n}\nfunction windowEndpoint(w, context = globalThis, targetOrigin = \"*\") {\n    return {\n        postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\n        addEventListener: context.addEventListener.bind(context),\n        removeEventListener: context.removeEventListener.bind(context),\n    };\n}\nfunction toWireValue(value) {\n    for (const [name, handler] of transferHandlers) {\n        if (handler.canHandle(value)) {\n            const [serializedValue, transferables] = handler.serialize(value);\n            return [\n                {\n                    type: \"HANDLER\" /* WireValueType.HANDLER */,\n                    name,\n                    value: serializedValue,\n                },\n                transferables,\n            ];\n        }\n    }\n    return [\n        {\n            type: \"RAW\" /* WireValueType.RAW */,\n            value,\n        },\n        transferCache.get(value) || [],\n    ];\n}\nfunction fromWireValue(value) {\n    switch (value.type) {\n        case \"HANDLER\" /* WireValueType.HANDLER */:\n            return transferHandlers.get(value.name).deserialize(value.value);\n        case \"RAW\" /* WireValueType.RAW */:\n            return value.value;\n    }\n}\nfunction requestResponseMessage(ep, msg, transfers) {\n    return new Promise((resolve) => {\n        const id = generateUUID();\n        ep.addEventListener(\"message\", function l(ev) {\n            if (!ev.data || !ev.data.id || ev.data.id !== id) {\n                return;\n            }\n            ep.removeEventListener(\"message\", l);\n            resolve(ev.data);\n        });\n        if (ep.start) {\n            ep.start();\n        }\n        ep.postMessage(Object.assign({ id }, msg), transfers);\n    });\n}\nfunction generateUUID() {\n    return new Array(4)\n        .fill(0)\n        .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n        .join(\"-\");\n}\n\nexport { createEndpoint, expose, finalizer, proxy, proxyMarker, releaseProxy, transfer, transferHandlers, windowEndpoint, wrap };\n//# sourceMappingURL=comlink.mjs.map\n","var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","'use strict';\n\n// From https://github.com/sindresorhus/random-int/blob/c37741b56f76b9160b0b63dae4e9c64875128146/index.js#L13-L15\nconst randomInteger = (minimum, maximum) => Math.floor((Math.random() * (maximum - minimum + 1)) + minimum);\n\nconst createAbortError = () => {\n\tconst error = new Error('Delay aborted');\n\terror.name = 'AbortError';\n\treturn error;\n};\n\nconst createDelay = ({clearTimeout: defaultClear, setTimeout: set, willResolve}) => (ms, {value, signal} = {}) => {\n\tif (signal && signal.aborted) {\n\t\treturn Promise.reject(createAbortError());\n\t}\n\n\tlet timeoutId;\n\tlet settle;\n\tlet rejectFn;\n\tconst clear = defaultClear || clearTimeout;\n\n\tconst signalListener = () => {\n\t\tclear(timeoutId);\n\t\trejectFn(createAbortError());\n\t};\n\n\tconst cleanup = () => {\n\t\tif (signal) {\n\t\t\tsignal.removeEventListener('abort', signalListener);\n\t\t}\n\t};\n\n\tconst delayPromise = new Promise((resolve, reject) => {\n\t\tsettle = () => {\n\t\t\tcleanup();\n\t\t\tif (willResolve) {\n\t\t\t\tresolve(value);\n\t\t\t} else {\n\t\t\t\treject(value);\n\t\t\t}\n\t\t};\n\n\t\trejectFn = reject;\n\t\ttimeoutId = (set || setTimeout)(settle, ms);\n\t});\n\n\tif (signal) {\n\t\tsignal.addEventListener('abort', signalListener, {once: true});\n\t}\n\n\tdelayPromise.clear = () => {\n\t\tclear(timeoutId);\n\t\ttimeoutId = null;\n\t\tsettle();\n\t};\n\n\treturn delayPromise;\n};\n\nconst createWithTimers = clearAndSet => {\n\tconst delay = createDelay({...clearAndSet, willResolve: true});\n\tdelay.reject = createDelay({...clearAndSet, willResolve: false});\n\tdelay.range = (minimum, maximum, options) => delay(randomInteger(minimum, maximum), options);\n\treturn delay;\n};\n\nconst delay = createWithTimers();\ndelay.createWithTimers = createWithTimers;\n\nmodule.exports = delay;\n// TODO: Remove this for the next major release\nmodule.exports.default = delay;\n","'use strict';\n\n/**\n * Custom implementation of a double ended queue.\n */\nfunction Denque(array, options) {\n  var options = options || {};\n  this._capacity = options.capacity;\n\n  this._head = 0;\n  this._tail = 0;\n\n  if (Array.isArray(array)) {\n    this._fromArray(array);\n  } else {\n    this._capacityMask = 0x3;\n    this._list = new Array(4);\n  }\n}\n\n/**\n * --------------\n *  PUBLIC API\n * -------------\n */\n\n/**\n * Returns the item at the specified index from the list.\n * 0 is the first element, 1 is the second, and so on...\n * Elements at negative values are that many from the end: -1 is one before the end\n * (the last element), -2 is two before the end (one before last), etc.\n * @param index\n * @returns {*}\n */\nDenque.prototype.peekAt = function peekAt(index) {\n  var i = index;\n  // expect a number or return undefined\n  if ((i !== (i | 0))) {\n    return void 0;\n  }\n  var len = this.size();\n  if (i >= len || i < -len) return undefined;\n  if (i < 0) i += len;\n  i = (this._head + i) & this._capacityMask;\n  return this._list[i];\n};\n\n/**\n * Alias for peekAt()\n * @param i\n * @returns {*}\n */\nDenque.prototype.get = function get(i) {\n  return this.peekAt(i);\n};\n\n/**\n * Returns the first item in the list without removing it.\n * @returns {*}\n */\nDenque.prototype.peek = function peek() {\n  if (this._head === this._tail) return undefined;\n  return this._list[this._head];\n};\n\n/**\n * Alias for peek()\n * @returns {*}\n */\nDenque.prototype.peekFront = function peekFront() {\n  return this.peek();\n};\n\n/**\n * Returns the item that is at the back of the queue without removing it.\n * Uses peekAt(-1)\n */\nDenque.prototype.peekBack = function peekBack() {\n  return this.peekAt(-1);\n};\n\n/**\n * Returns the current length of the queue\n * @return {Number}\n */\nObject.defineProperty(Denque.prototype, 'length', {\n  get: function length() {\n    return this.size();\n  }\n});\n\n/**\n * Return the number of items on the list, or 0 if empty.\n * @returns {number}\n */\nDenque.prototype.size = function size() {\n  if (this._head === this._tail) return 0;\n  if (this._head < this._tail) return this._tail - this._head;\n  else return this._capacityMask + 1 - (this._head - this._tail);\n};\n\n/**\n * Add an item at the beginning of the list.\n * @param item\n */\nDenque.prototype.unshift = function unshift(item) {\n  if (arguments.length === 0) return this.size();\n  var len = this._list.length;\n  this._head = (this._head - 1 + len) & this._capacityMask;\n  this._list[this._head] = item;\n  if (this._tail === this._head) this._growArray();\n  if (this._capacity && this.size() > this._capacity) this.pop();\n  if (this._head < this._tail) return this._tail - this._head;\n  else return this._capacityMask + 1 - (this._head - this._tail);\n};\n\n/**\n * Remove and return the first item on the list,\n * Returns undefined if the list is empty.\n * @returns {*}\n */\nDenque.prototype.shift = function shift() {\n  var head = this._head;\n  if (head === this._tail) return undefined;\n  var item = this._list[head];\n  this._list[head] = undefined;\n  this._head = (head + 1) & this._capacityMask;\n  if (head < 2 && this._tail > 10000 && this._tail <= this._list.length >>> 2) this._shrinkArray();\n  return item;\n};\n\n/**\n * Add an item to the bottom of the list.\n * @param item\n */\nDenque.prototype.push = function push(item) {\n  if (arguments.length === 0) return this.size();\n  var tail = this._tail;\n  this._list[tail] = item;\n  this._tail = (tail + 1) & this._capacityMask;\n  if (this._tail === this._head) {\n    this._growArray();\n  }\n  if (this._capacity && this.size() > this._capacity) {\n    this.shift();\n  }\n  if (this._head < this._tail) return this._tail - this._head;\n  else return this._capacityMask + 1 - (this._head - this._tail);\n};\n\n/**\n * Remove and return the last item on the list.\n * Returns undefined if the list is empty.\n * @returns {*}\n */\nDenque.prototype.pop = function pop() {\n  var tail = this._tail;\n  if (tail === this._head) return undefined;\n  var len = this._list.length;\n  this._tail = (tail - 1 + len) & this._capacityMask;\n  var item = this._list[this._tail];\n  this._list[this._tail] = undefined;\n  if (this._head < 2 && tail > 10000 && tail <= len >>> 2) this._shrinkArray();\n  return item;\n};\n\n/**\n * Remove and return the item at the specified index from the list.\n * Returns undefined if the list is empty.\n * @param index\n * @returns {*}\n */\nDenque.prototype.removeOne = function removeOne(index) {\n  var i = index;\n  // expect a number or return undefined\n  if ((i !== (i | 0))) {\n    return void 0;\n  }\n  if (this._head === this._tail) return void 0;\n  var size = this.size();\n  var len = this._list.length;\n  if (i >= size || i < -size) return void 0;\n  if (i < 0) i += size;\n  i = (this._head + i) & this._capacityMask;\n  var item = this._list[i];\n  var k;\n  if (index < size / 2) {\n    for (k = index; k > 0; k--) {\n      this._list[i] = this._list[i = (i - 1 + len) & this._capacityMask];\n    }\n    this._list[i] = void 0;\n    this._head = (this._head + 1 + len) & this._capacityMask;\n  } else {\n    for (k = size - 1 - index; k > 0; k--) {\n      this._list[i] = this._list[i = (i + 1 + len) & this._capacityMask];\n    }\n    this._list[i] = void 0;\n    this._tail = (this._tail - 1 + len) & this._capacityMask;\n  }\n  return item;\n};\n\n/**\n * Remove number of items from the specified index from the list.\n * Returns array of removed items.\n * Returns undefined if the list is empty.\n * @param index\n * @param count\n * @returns {array}\n */\nDenque.prototype.remove = function remove(index, count) {\n  var i = index;\n  var removed;\n  var del_count = count;\n  // expect a number or return undefined\n  if ((i !== (i | 0))) {\n    return void 0;\n  }\n  if (this._head === this._tail) return void 0;\n  var size = this.size();\n  var len = this._list.length;\n  if (i >= size || i < -size || count < 1) return void 0;\n  if (i < 0) i += size;\n  if (count === 1 || !count) {\n    removed = new Array(1);\n    removed[0] = this.removeOne(i);\n    return removed;\n  }\n  if (i === 0 && i + count >= size) {\n    removed = this.toArray();\n    this.clear();\n    return removed;\n  }\n  if (i + count > size) count = size - i;\n  var k;\n  removed = new Array(count);\n  for (k = 0; k < count; k++) {\n    removed[k] = this._list[(this._head + i + k) & this._capacityMask];\n  }\n  i = (this._head + i) & this._capacityMask;\n  if (index + count === size) {\n    this._tail = (this._tail - count + len) & this._capacityMask;\n    for (k = count; k > 0; k--) {\n      this._list[i = (i + 1 + len) & this._capacityMask] = void 0;\n    }\n    return removed;\n  }\n  if (index === 0) {\n    this._head = (this._head + count + len) & this._capacityMask;\n    for (k = count - 1; k > 0; k--) {\n      this._list[i = (i + 1 + len) & this._capacityMask] = void 0;\n    }\n    return removed;\n  }\n  if (i < size / 2) {\n    this._head = (this._head + index + count + len) & this._capacityMask;\n    for (k = index; k > 0; k--) {\n      this.unshift(this._list[i = (i - 1 + len) & this._capacityMask]);\n    }\n    i = (this._head - 1 + len) & this._capacityMask;\n    while (del_count > 0) {\n      this._list[i = (i - 1 + len) & this._capacityMask] = void 0;\n      del_count--;\n    }\n    if (index < 0) this._tail = i;\n  } else {\n    this._tail = i;\n    i = (i + count + len) & this._capacityMask;\n    for (k = size - (count + index); k > 0; k--) {\n      this.push(this._list[i++]);\n    }\n    i = this._tail;\n    while (del_count > 0) {\n      this._list[i = (i + 1 + len) & this._capacityMask] = void 0;\n      del_count--;\n    }\n  }\n  if (this._head < 2 && this._tail > 10000 && this._tail <= len >>> 2) this._shrinkArray();\n  return removed;\n};\n\n/**\n * Native splice implementation.\n * Remove number of items from the specified index from the list and/or add new elements.\n * Returns array of removed items or empty array if count == 0.\n * Returns undefined if the list is empty.\n *\n * @param index\n * @param count\n * @param {...*} [elements]\n * @returns {array}\n */\nDenque.prototype.splice = function splice(index, count) {\n  var i = index;\n  // expect a number or return undefined\n  if ((i !== (i | 0))) {\n    return void 0;\n  }\n  var size = this.size();\n  if (i < 0) i += size;\n  if (i > size) return void 0;\n  if (arguments.length > 2) {\n    var k;\n    var temp;\n    var removed;\n    var arg_len = arguments.length;\n    var len = this._list.length;\n    var arguments_index = 2;\n    if (!size || i < size / 2) {\n      temp = new Array(i);\n      for (k = 0; k < i; k++) {\n        temp[k] = this._list[(this._head + k) & this._capacityMask];\n      }\n      if (count === 0) {\n        removed = [];\n        if (i > 0) {\n          this._head = (this._head + i + len) & this._capacityMask;\n        }\n      } else {\n        removed = this.remove(i, count);\n        this._head = (this._head + i + len) & this._capacityMask;\n      }\n      while (arg_len > arguments_index) {\n        this.unshift(arguments[--arg_len]);\n      }\n      for (k = i; k > 0; k--) {\n        this.unshift(temp[k - 1]);\n      }\n    } else {\n      temp = new Array(size - (i + count));\n      var leng = temp.length;\n      for (k = 0; k < leng; k++) {\n        temp[k] = this._list[(this._head + i + count + k) & this._capacityMask];\n      }\n      if (count === 0) {\n        removed = [];\n        if (i != size) {\n          this._tail = (this._head + i + len) & this._capacityMask;\n        }\n      } else {\n        removed = this.remove(i, count);\n        this._tail = (this._tail - leng + len) & this._capacityMask;\n      }\n      while (arguments_index < arg_len) {\n        this.push(arguments[arguments_index++]);\n      }\n      for (k = 0; k < leng; k++) {\n        this.push(temp[k]);\n      }\n    }\n    return removed;\n  } else {\n    return this.remove(i, count);\n  }\n};\n\n/**\n * Soft clear - does not reset capacity.\n */\nDenque.prototype.clear = function clear() {\n  this._list = new Array(this._list.length);\n  this._head = 0;\n  this._tail = 0;\n};\n\n/**\n * Returns true or false whether the list is empty.\n * @returns {boolean}\n */\nDenque.prototype.isEmpty = function isEmpty() {\n  return this._head === this._tail;\n};\n\n/**\n * Returns an array of all queue items.\n * @returns {Array}\n */\nDenque.prototype.toArray = function toArray() {\n  return this._copyArray(false);\n};\n\n/**\n * -------------\n *   INTERNALS\n * -------------\n */\n\n/**\n * Fills the queue with items from an array\n * For use in the constructor\n * @param array\n * @private\n */\nDenque.prototype._fromArray = function _fromArray(array) {\n  var length = array.length;\n  var capacity = this._nextPowerOf2(length);\n\n  this._list = new Array(capacity);\n  this._capacityMask = capacity - 1;\n  this._tail = length;\n\n  for (var i = 0; i < length; i++) this._list[i] = array[i];\n};\n\n/**\n *\n * @param fullCopy\n * @param size Initialize the array with a specific size. Will default to the current list size\n * @returns {Array}\n * @private\n */\nDenque.prototype._copyArray = function _copyArray(fullCopy, size) {\n  var src = this._list;\n  var capacity = src.length;\n  var length = this.length;\n  size = size | length;\n\n  // No prealloc requested and the buffer is contiguous\n  if (size == length && this._head < this._tail) {\n    // Simply do a fast slice copy\n    return this._list.slice(this._head, this._tail);\n  }\n\n  var dest = new Array(size);\n\n  var k = 0;\n  var i;\n  if (fullCopy || this._head > this._tail) {\n    for (i = this._head; i < capacity; i++) dest[k++] = src[i];\n    for (i = 0; i < this._tail; i++) dest[k++] = src[i];\n  } else {\n    for (i = this._head; i < this._tail; i++) dest[k++] = src[i];\n  }\n\n  return dest;\n}\n\n/**\n * Grows the internal list array.\n * @private\n */\nDenque.prototype._growArray = function _growArray() {\n  if (this._head != 0) {\n    // double array size and copy existing data, head to end, then beginning to tail.\n    var newList = this._copyArray(true, this._list.length << 1);\n\n    this._tail = this._list.length;\n    this._head = 0;\n\n    this._list = newList;\n  } else {\n    this._tail = this._list.length;\n    this._list.length <<= 1;\n  }\n\n  this._capacityMask = (this._capacityMask << 1) | 1;\n};\n\n/**\n * Shrinks the internal list array.\n * @private\n */\nDenque.prototype._shrinkArray = function _shrinkArray() {\n  this._list.length >>>= 1;\n  this._capacityMask >>>= 1;\n};\n\n/**\n * Find the next power of 2, at least 4\n * @private\n * @param {number} num \n * @returns {number}\n */\nDenque.prototype._nextPowerOf2 = function _nextPowerOf2(num) {\n  var log2 = Math.log(num) / Math.log(2);\n  var nextPow2 = 1 << (log2 + 1);\n\n  return Math.max(nextPow2, 4);\n}\n\nmodule.exports = Denque;\n","const e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:global,t=Object.keys,n=Array.isArray;function r(e,n){return\"object\"!=typeof n||t(n).forEach((function(t){e[t]=n[t]})),e}\"undefined\"==typeof Promise||e.Promise||(e.Promise=Promise);const s=Object.getPrototypeOf,i={}.hasOwnProperty;function o(e,t){return i.call(e,t)}function a(e,n){\"function\"==typeof n&&(n=n(s(e))),(\"undefined\"==typeof Reflect?t:Reflect.ownKeys)(n).forEach((t=>{l(e,t,n[t])}))}const u=Object.defineProperty;function l(e,t,n,s){u(e,t,r(n&&o(n,\"get\")&&\"function\"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},s))}function c(e){return{from:function(t){return e.prototype=Object.create(t.prototype),l(e.prototype,\"constructor\",e),{extend:a.bind(null,e.prototype)}}}}const h=Object.getOwnPropertyDescriptor;function d(e,t){let n;return h(e,t)||(n=s(e))&&d(n,t)}const f=[].slice;function p(e,t,n){return f.call(e,t,n)}function y(e,t){return t(e)}function m(e){if(!e)throw new Error(\"Assertion Failed\")}function v(t){e.setImmediate?setImmediate(t):setTimeout(t,0)}function g(e,t){return e.reduce(((e,n,r)=>{var s=t(n,r);return s&&(e[s[0]]=s[1]),e}),{})}function b(e,t){if(o(e,t))return e[t];if(!t)return e;if(\"string\"!=typeof t){for(var n=[],r=0,s=t.length;r<s;++r){var i=b(e,t[r]);n.push(i)}return n}var a=t.indexOf(\".\");if(-1!==a){var u=e[t.substr(0,a)];return void 0===u?void 0:b(u,t.substr(a+1))}}function _(e,t,r){if(e&&void 0!==t&&(!(\"isFrozen\"in Object)||!Object.isFrozen(e)))if(\"string\"!=typeof t&&\"length\"in t){m(\"string\"!=typeof r&&\"length\"in r);for(var s=0,i=t.length;s<i;++s)_(e,t[s],r[s])}else{var a=t.indexOf(\".\");if(-1!==a){var u=t.substr(0,a),l=t.substr(a+1);if(\"\"===l)void 0===r?n(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=r;else{var c=e[u];c&&o(e,u)||(c=e[u]={}),_(c,l,r)}}else void 0===r?n(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function w(e){var t={};for(var n in e)o(e,n)&&(t[n]=e[n]);return t}const x=[].concat;function k(e){return x.apply([],e)}const E=\"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\".split(\",\").concat(k([8,16,32,64].map((e=>[\"Int\",\"Uint\",\"Float\"].map((t=>t+e+\"Array\")))))).filter((t=>e[t])),P=E.map((t=>e[t]));g(E,(e=>[e,!0]));let K=null;function O(e){K=\"undefined\"!=typeof WeakMap&&new WeakMap;const t=S(e);return K=null,t}function S(e){if(!e||\"object\"!=typeof e)return e;let t=K&&K.get(e);if(t)return t;if(n(e)){t=[],K&&K.set(e,t);for(var r=0,i=e.length;r<i;++r)t.push(S(e[r]))}else if(P.indexOf(e.constructor)>=0)t=e;else{const n=s(e);for(var a in t=n===Object.prototype?{}:Object.create(n),K&&K.set(e,t),e)o(e,a)&&(t[a]=S(e[a]))}return t}const{toString:A}={};function C(e){return A.call(e).slice(8,-1)}const j=\"undefined\"!=typeof Symbol?Symbol.iterator:\"@@iterator\",D=\"symbol\"==typeof j?function(e){var t;return null!=e&&(t=e[j])&&t.apply(e)}:function(){return null},I={};function B(e){var t,r,s,i;if(1===arguments.length){if(n(e))return e.slice();if(this===I&&\"string\"==typeof e)return[e];if(i=D(e)){for(r=[];!(s=i.next()).done;)r.push(s.value);return r}if(null==e)return[e];if(\"number\"==typeof(t=e.length)){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}const T=\"undefined\"!=typeof Symbol?e=>\"AsyncFunction\"===e[Symbol.toStringTag]:()=>!1;var R=\"undefined\"!=typeof location&&/^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);function F(e,t){R=e,M=t}var M=()=>!0;const N=!new Error(\"\").stack;function q(){if(N)try{throw q.arguments,new Error}catch(e){return e}return new Error}function $(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split(\"\\n\").length),n.split(\"\\n\").slice(t).filter(M).map((e=>\"\\n\"+e)).join(\"\")):\"\"}var U=[\"Unknown\",\"Constraint\",\"Data\",\"TransactionInactive\",\"ReadOnly\",\"Version\",\"NotFound\",\"InvalidState\",\"InvalidAccess\",\"Abort\",\"Timeout\",\"QuotaExceeded\",\"Syntax\",\"DataClone\"],L=[\"Modify\",\"Bulk\",\"OpenFailed\",\"VersionChange\",\"Schema\",\"Upgrade\",\"InvalidTable\",\"MissingAPI\",\"NoSuchDatabase\",\"InvalidArgument\",\"SubTransaction\",\"Unsupported\",\"Internal\",\"DatabaseClosed\",\"PrematureCommit\",\"ForeignAwait\"].concat(U),V={VersionChanged:\"Database version changed by other database connection\",DatabaseClosed:\"Database has been closed\",Abort:\"Transaction aborted\",TransactionInactive:\"Transaction has already completed or failed\",MissingAPI:\"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"};function W(e,t){this._e=q(),this.name=e,this.message=t}function Y(e,t){return e+\". Errors: \"+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join(\"\\n\")}function z(e,t,n,r){this._e=q(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Y(e,t)}function G(e,t){this._e=q(),this.name=\"BulkError\",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=Y(e,t)}c(W).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+\": \"+this.message+$(this._e,2))}},toString:function(){return this.name+\": \"+this.message}}),c(z).from(W),c(G).from(W);var H=L.reduce(((e,t)=>(e[t]=t+\"Error\",e)),{});const Q=W;var X=L.reduce(((e,t)=>{var n=t+\"Error\";function r(e,r){this._e=q(),this.name=n,e?\"string\"==typeof e?(this.message=`${e}${r?\"\\n \"+r:\"\"}`,this.inner=r||null):\"object\"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=V[t]||n,this.inner=null)}return c(r).from(Q),e[t]=r,e}),{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var J=U.reduce(((e,t)=>(e[t+\"Error\"]=X[t],e)),{});var Z=L.reduce(((e,t)=>(-1===[\"Syntax\",\"Type\",\"Range\"].indexOf(t)&&(e[t+\"Error\"]=X[t]),e)),{});function ee(){}function te(e){return e}function ne(e,t){return null==e||e===te?t:function(n){return t(e(n))}}function re(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function se(e,t){return e===ee?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?re(r,this.onsuccess):r),s&&(this.onerror=this.onerror?re(s,this.onerror):s),void 0!==i?i:n}}function ie(e,t){return e===ee?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?re(n,this.onsuccess):n),r&&(this.onerror=this.onerror?re(r,this.onerror):r)}}function oe(e,t){return e===ee?t:function(n){var s=e.apply(this,arguments);r(n,s);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?re(i,this.onsuccess):i),o&&(this.onerror=this.onerror?re(o,this.onerror):o),void 0===s?void 0===a?void 0:a:r(s,a)}}function ae(e,t){return e===ee?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ue(e,t){return e===ee?t:function(){var n=e.apply(this,arguments);if(n&&\"function\"==typeof n.then){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then((function(){return t.apply(r,i)}))}return t.apply(this,arguments)}}Z.ModifyError=z,Z.DexieError=W,Z.BulkError=G;var le={};const[ce,he,de]=\"undefined\"==typeof Promise?[]:(()=>{let e=Promise.resolve();if(\"undefined\"==typeof crypto||!crypto.subtle)return[e,s(e),e];const t=crypto.subtle.digest(\"SHA-512\",new Uint8Array([0]));return[t,s(t),e]})(),fe=he&&he.then,pe=ce&&ce.constructor,ye=!!de;var me=!1,ve=de?()=>{de.then(qe)}:e.setImmediate?setImmediate.bind(null,qe):e.MutationObserver?()=>{var e=document.createElement(\"div\");new MutationObserver((()=>{qe(),e=null})).observe(e,{attributes:!0}),e.setAttribute(\"i\",\"1\")}:()=>{setTimeout(qe,0)},ge=function(e,t){Oe.push([e,t]),_e&&(ve(),_e=!1)},be=!0,_e=!0,we=[],xe=[],ke=null,Ee=te,Pe={id:\"global\",global:!0,ref:0,unhandleds:[],onunhandled:ct,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{ct(e[0],e[1])}catch(e){}}))}},Ke=Pe,Oe=[],Se=0,Ae=[];function Ce(e){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");this._listeners=[],this.onuncatched=ee,this._lib=!1;var t=this._PSD=Ke;if(R&&(this._stackHolder=q(),this._prev=null,this._numPrev=0),\"function\"!=typeof e){if(e!==le)throw new TypeError(\"Not a function\");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Be(this,this._value))}this._state=null,this._value=null,++t.ref,Ie(this,e)}const je={get:function(){var e=Ke,t=Qe;function n(n,r){var s=!e.global&&(e!==Ke||t!==Qe);const i=s&&!et();var o=new Ce(((t,o)=>{Re(this,new De(ut(n,e,s,i),ut(r,e,s,i),t,o,e))}));return R&&Ne(o,this),o}return n.prototype=le,n},set:function(e){l(this,\"then\",e&&e.prototype===le?je:{get:function(){return e},set:je.set})}};function De(e,t,n,r,s){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=s}function Ie(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError(\"A promise cannot be resolved with itself.\");var n=e._lib&&$e();t&&\"function\"==typeof t.then?Ie(e,((e,n)=>{t instanceof Ce?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Te(e)),n&&Ue()}}),Be.bind(null,e))}catch(t){Be(e,t)}}function Be(e,t){if(xe.push(t),null===e._state){var n=e._lib&&$e();t=Ee(t),e._state=!1,e._value=t,R&&null!==t&&\"object\"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((()=>{var n=d(t,\"stack\");t._promise=e,l(t,\"stack\",{get:()=>me?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){we.some((t=>t._value===e._value))||we.push(e)}(e),Te(e),n&&Ue()}}function Te(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Re(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),0===Se&&(++Se,ge((()=>{0==--Se&&Le()}),[]))}function Re(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Se,ge(Fe,[n,e,t])}else e._listeners.push(t)}function Fe(e,t,n){try{ke=t;var r,s=t._value;t._state?r=e(s):(xe.length&&(xe=[]),r=e(s),-1===xe.indexOf(s)&&function(e){var t=we.length;for(;t;)if(we[--t]._value===e._value)return void we.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{ke=null,0==--Se&&Le(),--n.psd.ref||n.psd.finalize()}}function Me(e,t,n){if(t.length===n)return t;var r=\"\";if(!1===e._state){var s,i,o=e._value;null!=o?(s=o.name||\"Error\",i=o.message||o,r=$(o,0)):(s=o,i=\"\"),t.push(s+(i?\": \"+i:\"\")+r)}return R&&((r=$(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Me(e._prev,t,n)),t}function Ne(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function qe(){$e()&&Ue()}function $e(){var e=be;return be=!1,_e=!1,e}function Ue(){var e,t,n;do{for(;Oe.length>0;)for(e=Oe,Oe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Oe.length>0);be=!0,_e=!0}function Le(){var e=we;we=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Ae.slice(0),n=t.length;n;)t[--n]()}function Ve(e){return new Ce(le,!1,e)}function We(e,t){var n=Ke;return function(){var r=$e(),s=Ke;try{return st(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{st(s,!1),r&&Ue()}}}a(Ce.prototype,{then:je,_then:function(e,t){Re(this,new De(null,null,e,t,Ke))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return\"function\"==typeof t?this.then(null,(e=>e instanceof t?n(e):Ve(e))):this.then(null,(e=>e&&e.name===t?n(e):Ve(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),Ve(t))))},stack:{get:function(){if(this._stack)return this._stack;try{me=!0;var e=Me(this,[],20).join(\"\\nFrom previous: \");return null!==this._state&&(this._stack=e),e}finally{me=!1}}},timeout:function(e,t){return e<1/0?new Ce(((n,r)=>{var s=setTimeout((()=>r(new X.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,s))})):this}}),\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&l(Ce.prototype,Symbol.toStringTag,\"Dexie.Promise\"),Pe.env=it(),a(Ce,{all:function(){var e=B.apply(null,arguments).map(tt);return new Ce((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((s,i)=>Ce.resolve(s).then((n=>{e[i]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof Ce)return e;if(e&&\"function\"==typeof e.then)return new Ce(((t,n)=>{e.then(t,n)}));var t=new Ce(le,!0,e);return Ne(t,ke),t},reject:Ve,race:function(){var e=B.apply(null,arguments).map(tt);return new Ce(((t,n)=>{e.map((e=>Ce.resolve(e).then(t,n)))}))},PSD:{get:()=>Ke,set:e=>Ke=e},totalEchoes:{get:()=>Qe},newPSD:Je,usePSD:ot,scheduler:{get:()=>ge,set:e=>{ge=e}},rejectionMapper:{get:()=>Ee,set:e=>{Ee=e}},follow:(e,t)=>new Ce(((n,r)=>Je(((t,n)=>{var r=Ke;r.unhandleds=[],r.onunhandled=n,r.finalize=re((function(){!function(e){function t(){e(),Ae.splice(Ae.indexOf(t),1)}Ae.push(t),++Se,ge((()=>{0==--Se&&Le()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),pe&&(pe.allSettled&&l(Ce,\"allSettled\",(function(){const e=B.apply(null,arguments).map(tt);return new Ce((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,s)=>Ce.resolve(e).then((e=>r[s]={status:\"fulfilled\",value:e}),(e=>r[s]={status:\"rejected\",reason:e})).then((()=>--n||t(r)))))}))})),pe.any&&\"undefined\"!=typeof AggregateError&&l(Ce,\"any\",(function(){const e=B.apply(null,arguments).map(tt);return new Ce(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const s=new Array(r);e.forEach(((e,i)=>Ce.resolve(e).then((e=>t(e)),(e=>{s[i]=e,--r||n(new AggregateError(s))}))))}))})));const Ye={awaits:0,echoes:0,id:0};var ze=0,Ge=[],He=0,Qe=0,Xe=0;function Je(e,t,n,s){var i=Ke,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Xe;var a=Pe.env;o.env=ye?{Promise:Ce,PromiseProp:{value:Ce,configurable:!0,writable:!0},all:Ce.all,race:Ce.race,allSettled:Ce.allSettled,any:Ce.any,resolve:Ce.resolve,reject:Ce.reject,nthen:lt(a.nthen,o),gthen:lt(a.gthen,o)}:{},t&&r(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=ot(o,e,n,s);return 0===o.ref&&o.finalize(),u}function Ze(){return Ye.id||(Ye.id=++ze),++Ye.awaits,Ye.echoes+=100,Ye.id}function et(){return!!Ye.awaits&&(0==--Ye.awaits&&(Ye.id=0),Ye.echoes=100*Ye.awaits,!0)}function tt(e){return Ye.echoes&&e&&e.constructor===pe?(Ze(),e.then((e=>(et(),e)),(e=>(et(),ht(e))))):e}function nt(e){++Qe,Ye.echoes&&0!=--Ye.echoes||(Ye.echoes=Ye.id=0),Ge.push(Ke),st(e,!0)}function rt(){var e=Ge[Ge.length-1];Ge.pop(),st(e,!1)}function st(t,n){var r=Ke;if((n?!Ye.echoes||He++&&t===Ke:!He||--He&&t===Ke)||at(n?nt.bind(null,t):rt),t!==Ke&&(Ke=t,r===Pe&&(Pe.env=it()),ye)){var s=Pe.env.Promise,i=t.env;he.then=i.nthen,s.prototype.then=i.gthen,(r.global||t.global)&&(Object.defineProperty(e,\"Promise\",i.PromiseProp),s.all=i.all,s.race=i.race,s.resolve=i.resolve,s.reject=i.reject,i.allSettled&&(s.allSettled=i.allSettled),i.any&&(s.any=i.any))}}function it(){var t=e.Promise;return ye?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(e,\"Promise\"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:he.then,gthen:t.prototype.then}:{}}function ot(e,t,n,r,s){var i=Ke;try{return st(e,!0),t(n,r,s)}finally{st(i,!1)}}function at(e){fe.call(ce,e)}function ut(e,t,n,r){return\"function\"!=typeof e?e:function(){var s=Ke;n&&Ze(),st(t,!0);try{return e.apply(this,arguments)}finally{st(s,!1),r&&at(et)}}}function lt(e,t){return function(n,r){return e.call(this,ut(n,t),ut(r,t))}}-1===(\"\"+fe).indexOf(\"[native code]\")&&(Ze=et=ee);function ct(t,n){var s;try{s=n.onuncatched(t)}catch(e){}if(!1!==s)try{var i,o={promise:n,reason:t};if(e.document&&document.createEvent?((i=document.createEvent(\"Event\")).initEvent(\"unhandledrejection\",!0,!0),r(i,o)):e.CustomEvent&&r(i=new CustomEvent(\"unhandledrejection\",{detail:o}),o),i&&e.dispatchEvent&&(dispatchEvent(i),!e.PromiseRejectionEvent&&e.onunhandledrejection))try{e.onunhandledrejection(i)}catch(e){}R&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch(e){}}var ht=Ce.reject;function dt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Ke.letThrough||e._vip)){var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===H.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn(\"Dexie: Need to reopen db\"),e._close(),e.open().then((()=>dt(e,t,n,r)))):ht(s)}return s._promise(t,((e,t)=>Je((()=>(Ke.trans=s,r(e,t,s)))))).then((e=>s._completion.then((()=>e))))}if(e._state.openComplete)return ht(new X.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ht(new X.DatabaseClosed);e.open().catch(ee)}return e._state.dbReadyPromise.then((()=>dt(e,t,n,r)))}const ft=String.fromCharCode(65535),pt=\"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\",yt=[],mt=\"undefined\"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),vt=mt,gt=mt,bt=e=>!/(dexie\\.js|dexie\\.min\\.js)/.test(e);function _t(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const wt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xt(e){return\"string\"!=typeof e||/\\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=O(t))[e],t)}class kt{_trans(e,t,n){const r=this._tx||Ke.trans,s=this.name;function i(e,n,r){if(!r.schema[s])throw new X.NotFound(\"Table \"+s+\" not part of transaction\");return t(r.idbtrans,r)}const o=$e();try{return r&&r.db===this.db?r===Ke.trans?r._promise(e,i,n):Je((()=>r._promise(e,i,n)),{trans:r,transless:Ke.transless||Ke}):dt(this.db,e,[this.name],i)}finally{o&&Ue()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans(\"readonly\",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if(\"string\"==typeof e)return new this.db.WhereClause(this,e);if(n(e))return new this.db.WhereClause(this,`[${e.join(\"+\")}]`);const r=t(e);if(1===r.length)return this.where(r[0]).equals(e[r[0]]);const s=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&r.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>r.indexOf(e)>=0))))[0];if(s&&this.db._maxKey!==ft)return this.where(s.name).equals(s.keyPath.map((t=>e[t])));!s&&R&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${r.join(\"+\")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function a(e,t){try{return 0===o.cmp(e,t)}catch(e){return!1}}const[u,l]=r.reduce((([t,r],s)=>{const o=i[s],u=e[s];return[t||o,t||!o?_t(r,o&&o.multi?e=>{const t=b(e,s);return n(t)&&t.some((e=>a(u,e)))}:e=>a(u,b(e,s))):r]}),[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(l):s?this.filter(l):this.where(r).equals(\"\")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,n(e)?`[${e.join(\"+\")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(o(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook(\"reading\",t),e}defineClass(){return this.mapToClass((function(e){r(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=xt(r)(e)),this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"add\",keys:null!=t?[t]:null,values:[s]}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(e){}return t}))}update(e,r){if(\"object\"!=typeof e||n(e))return this.where(\":id\").equals(e).modify(r);{const n=b(e,this.schema.primKey.keyPath);if(void 0===n)return ht(new X.InvalidArgument(\"Given object does not contain its primary key\"));try{\"function\"!=typeof r?t(r).forEach((t=>{_(e,t,r[t])})):r(e,{value:e,primKey:n})}catch(e){}return this.where(\":id\").equals(n).modify(r)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=xt(r)(e)),this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"put\",values:[s],keys:null!=t?[t]:null}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(e){}return t}))}delete(e){return this._trans(\"readwrite\",(t=>this.core.mutate({trans:t,type:\"delete\",keys:[e]}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):void 0))}clear(){return this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"deleteRange\",range:wt}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans(\"readonly\",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans(\"readwrite\",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new X.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");if(r&&r.length!==e.length)throw new X.InvalidArgument(\"Arguments objects and keys must have the same length\");const o=e.length;let a=i&&n?e.map(xt(i)):e;return this.core.mutate({trans:t,type:\"add\",keys:r,values:a,wantResults:s}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return s?t:n;throw new G(`${this.name}.bulkAdd(): ${e} of ${o} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans(\"readwrite\",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new X.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");if(r&&r.length!==e.length)throw new X.InvalidArgument(\"Arguments objects and keys must have the same length\");const o=e.length;let a=i&&n?e.map(xt(i)):e;return this.core.mutate({trans:t,type:\"put\",keys:r,values:a,wantResults:s}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return s?t:n;throw new G(`${this.name}.bulkPut(): ${e} of ${o} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans(\"readwrite\",(t=>this.core.mutate({trans:t,type:\"delete\",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new G(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function Et(e){var r={},s=function(t,n){if(n){for(var s=arguments.length,i=new Array(s-1);--s;)i[s-1]=arguments[s];return r[t].subscribe.apply(null,i),e}if(\"string\"==typeof t)return r[t]};s.addEventType=a;for(var i=1,o=arguments.length;i<o;++i)a(arguments[i]);return s;function a(e,t,n){if(\"object\"==typeof e)return u(e);t||(t=ae),n||(n=ee);var i={subscribers:[],fire:n,subscribe:function(e){-1===i.subscribers.indexOf(e)&&(i.subscribers.push(e),i.fire=t(i.fire,e))},unsubscribe:function(e){i.subscribers=i.subscribers.filter((function(t){return t!==e})),i.fire=i.subscribers.reduce(t,n)}};return r[e]=s[e]=i,i}function u(e){t(e).forEach((function(t){var r=e[t];if(n(r))a(t,e[t][0],e[t][1]);else{if(\"asap\"!==r)throw new X.InvalidArgument(\"Invalid event config\");var s=a(t,te,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];s.subscribers.forEach((function(e){v((function(){e.apply(null,t)}))}))}))}}))}}function Pt(e,t){return c(t).from({prototype:e}),t}function Kt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ot(e,t){e.filter=_t(e.filter,t)}function St(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>_t(r(),t()):t,e.justLimit=n&&!r}function At(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new X.Schema(\"KeyPath \"+e.index+\" on object store \"+t.name+\" is not indexed\");return n}function Ct(e,t,n){const r=At(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:\"prev\"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function jt(e,t,n,r){const s=e.replayFilter?_t(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},a=(e,n,r)=>{if(!s||s(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var a=n.primaryKey,u=\"\"+a;\"[object ArrayBuffer]\"===u&&(u=\"\"+new Uint8Array(a)),o(i,u)||(i[u]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),Dt(Ct(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Dt(Ct(e,r,n),_t(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function Dt(e,t,n,r){var s=We(r?(e,t,s)=>n(r(e),t,s):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=ee}),(t=>{e.fail(t),n=ee}))||s(e.value,e,(e=>n=e)),n()}))}))}function It(e,t){try{const n=Bt(e),r=Bt(t);if(n!==r)return\"Array\"===n?1:\"Array\"===r?-1:\"binary\"===n?1:\"binary\"===r?-1:\"string\"===n?1:\"string\"===r?-1:\"Date\"===n?1:\"Date\"!==r?NaN:-1;switch(n){case\"number\":case\"Date\":case\"string\":return e>t?1:e<t?-1:0;case\"binary\":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n<s;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return n===r?0:n<r?-1:1}(Tt(e),Tt(t));case\"Array\":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n<s;++n){const r=It(e[n],t[n]);if(0!==r)return r}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Bt(e){const t=typeof e;if(\"object\"!==t)return t;if(ArrayBuffer.isView(e))return\"binary\";const n=C(e);return\"ArrayBuffer\"===n?\"binary\":n}function Tt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Rt{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,ht.bind(null,n.error)):n.table._trans(\"readonly\",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,ht.bind(null,t.error)):t.table._trans(\"readwrite\",e,\"locked\")}_addAlgorithm(e){var t=this._ctx;t.algorithm=_t(t.algorithm,e)}_iterate(e,t){return jt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&r(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>jt(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Kt(t,!0))return n.count({trans:e,query:{index:At(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return jt(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(\".\").reverse(),r=n[0],s=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var o=\"next\"===this._ctx.dir?1:-1;function a(e,t){var n=i(e,s),r=i(t,s);return n<r?-o:n>r?o:0}return this.toArray((function(e){return e.sort(a)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if(\"next\"===t.dir&&Kt(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=At(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return jt(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Kt(t)?St(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):St(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),St(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return Ot(this._ctx,(function(n,r,s){return!e(n.value)||(r(s),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return Ot(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=_t(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=\"prev\"===this._ctx.dir?\"next\":\"prev\",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique=\"unique\",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if(\"next\"===t.dir&&Kt(t,!0)&&t.limit>0)return this._read((e=>{var n=At(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique=\"unique\",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ot(this._ctx,(function(e){var t=e.primaryKey.toString(),r=o(n,t);return n[t]=!0,!r})),this}modify(e){var n=this._ctx;return this._write((r=>{var s;if(\"function\"==typeof e)s=e;else{var i=t(e),o=i.length;s=function(t){for(var n=!1,r=0;r<o;++r){var s=i[r],a=e[s];b(t,s)!==a&&(_(t,s,a),n=!0)}return n}}const a=n.table.core,{outbound:u,extractKey:l}=a.schema.primaryKey,c=this.db._options.modifyChunkSize||200,h=[];let d=0;const f=[],p=(e,n)=>{const{failures:r,numFailures:s}=n;d+=e-s;for(let e of t(r))h.push(r[e])};return this.clone().primaryKeys().then((t=>{const i=o=>{const h=Math.min(c,t.length-o);return a.getMany({trans:r,keys:t.slice(o,o+h),cache:\"immutable\"}).then((d=>{const f=[],y=[],m=u?[]:null,v=[];for(let e=0;e<h;++e){const n=d[e],r={value:O(n),primKey:t[o+e]};!1!==s.call(r,r.value,r)&&(null==r.value?v.push(t[o+e]):u||0===It(l(n),l(r.value))?(y.push(r.value),u&&m.push(t[o+e])):(v.push(t[o+e]),f.push(r.value)))}const g=Kt(n)&&n.limit===1/0&&(\"function\"!=typeof e||e===Ft)&&{index:n.index,range:n.range};return Promise.resolve(f.length>0&&a.mutate({trans:r,type:\"add\",values:f}).then((e=>{for(let t in e.failures)v.splice(parseInt(t),1);p(f.length,e)}))).then((()=>(y.length>0||g&&\"object\"==typeof e)&&a.mutate({trans:r,type:\"put\",keys:m,values:y,criteria:g,changeSpec:\"function\"!=typeof e&&e}).then((e=>p(y.length,e))))).then((()=>(v.length>0||g&&e===Ft)&&a.mutate({trans:r,type:\"delete\",keys:v,criteria:g}).then((e=>p(v.length,e))))).then((()=>t.length>o+h&&i(o+c)))}))};return i(0).then((()=>{if(h.length>0)throw new z(\"Error modifying one or more objects\",h,d,f);return t.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Kt(e)&&(e.isPrimKey&&!gt||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,s=t;return e.table.core.count({trans:n,query:{index:r,range:s}}).then((t=>e.table.core.mutate({trans:n,type:\"deleteRange\",range:s}).then((({failures:e,lastResult:n,results:r,numFailures:s})=>{if(s)throw new z(\"Could not delete some values\",Object.keys(e).map((t=>e[t])),t-s);return t-s}))))})):this.modify(Ft)}}const Ft=(e,t)=>t.value=null;function Mt(e,t){return e<t?-1:e===t?0:1}function Nt(e,t){return e>t?-1:e===t?0:1}function qt(e,t,n){var r=e instanceof Yt?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function $t(e){return new e.Collection(e,(()=>Wt(\"\"))).limit(0)}function Ut(e,t,n,r,s,i){for(var o=Math.min(e.length,r.length),a=-1,u=0;u<o;++u){var l=t[u];if(l!==r[u])return s(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):s(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;s(e[u],l)<0&&(a=u)}return o<r.length&&\"next\"===i?e+n.substr(e.length):o<e.length&&\"prev\"===i?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function Lt(e,t,n,r){var s,i,o,a,u,l,c,h=n.length;if(!n.every((e=>\"string\"==typeof e)))return qt(e,\"String expected.\");function d(e){s=function(e){return\"next\"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),i=function(e){return\"next\"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),o=\"next\"===e?Mt:Nt;var t=n.map((function(e){return{lower:i(e),upper:s(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),l=e,c=\"next\"===e?\"\":r}d(\"next\");var f=new e.Collection(e,(()=>Vt(a[0],u[h-1]+r)));f._ondirectionchange=function(e){d(e)};var p=0;return f._addAlgorithm((function(e,n,r){var s=e.key;if(\"string\"!=typeof s)return!1;var d=i(s);if(t(d,u,p))return!0;for(var f=null,y=p;y<h;++y){var m=Ut(s,d,a[y],u[y],o,l);null===m&&null===f?p=y+1:(null===f||o(f,m)>0)&&(f=m)}return n(null!==f?function(){e.continue(f+c)}:r),!1})),f}function Vt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Wt(e){return{type:1,lower:e,upper:e}}class Yt{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?$t(this):new this.Collection(this,(()=>Vt(e,t,!n,!r)))}catch(e){return qt(this,pt)}}equals(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Wt(e)))}above(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Vt(e,void 0,!0)))}aboveOrEqual(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Vt(e,void 0,!1)))}below(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Vt(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Vt(void 0,e)))}startsWith(e){return\"string\"!=typeof e?qt(this,\"String expected.\"):this.between(e,e+ft,!0,!0)}startsWithIgnoreCase(e){return\"\"===e?this.startsWith(e):Lt(this,((e,t)=>0===e.indexOf(t[0])),[e],ft)}equalsIgnoreCase(e){return Lt(this,((e,t)=>e===t[0]),[e],\"\")}anyOfIgnoreCase(){var e=B.apply(I,arguments);return 0===e.length?$t(this):Lt(this,((e,t)=>-1!==t.indexOf(e)),e,\"\")}startsWithAnyOfIgnoreCase(){var e=B.apply(I,arguments);return 0===e.length?$t(this):Lt(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,ft)}anyOf(){const e=B.apply(I,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return qt(this,pt)}if(0===e.length)return $t(this);const n=new this.Collection(this,(()=>Vt(e[0],e[e.length-1])));n._ondirectionchange=n=>{t=\"next\"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,s,i)=>{const o=n.key;for(;t(o,e[r])>0;)if(++r,r===e.length)return s(i),!1;return 0===t(o,e[r])||(s((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[-(1/0),e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=B.apply(I,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return qt(this,pt)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-(1/0),t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,s=this._descending,i=this._min,o=this._max;if(0===e.length)return $t(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return qt(this,\"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\",X.InvalidArgument);const a=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers;let l,c=r;function h(e,t){return c(e[0],t[0])}try{l=e.reduce((function(e,t){let r=0,s=e.length;for(;r<s;++r){const s=e[r];if(n(t[0],s[1])<0&&n(t[1],s[0])>0){s[0]=i(s[0],t[0]),s[1]=o(s[1],t[1]);break}}return r===s&&e.push(t),e}),[]),l.sort(h)}catch(e){return qt(this,pt)}let d=0;const f=u?e=>r(e,l[d][1])>0:e=>r(e,l[d][1])>=0,p=a?e=>s(e,l[d][0])>0:e=>s(e,l[d][0])>=0;let y=f;const m=new this.Collection(this,(()=>Vt(l[0][0],l[l.length-1][1],!a,!u)));return m._ondirectionchange=e=>{\"next\"===e?(y=f,c=r):(y=p,c=s),l.sort(h)},m._addAlgorithm(((e,t,n)=>{for(var s=e.key;y(s);)if(++d,d===l.length)return t(n),!1;return!!function(e){return!f(e)&&!p(e)}(s)||(0===this._cmp(s,l[d][1])||0===this._cmp(s,l[d][0])||t((()=>{c===r?e.continue(l[d][0]):e.continue(l[d][1])})),!1)})),m}startsWithAnyOf(){const e=B.apply(I,arguments);return e.every((e=>\"string\"==typeof e))?0===e.length?$t(this):this.inAnyRange(e.map((e=>[e,e+ft]))):qt(this,\"startsWithAnyOf() only works with strings\")}}function zt(e){return We((function(t){return Gt(t),e(t.target.error),!1}))}function Gt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Ht=Et(null,\"storagemutated\");class Qt{_lock(){return m(!Ke.global),++this._reculock,1!==this._reculock||Ke.global||(Ke.lockOwnerFor=this),this}_unlock(){if(m(!Ke.global),0==--this._reculock)for(Ke.global||(Ke.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ot(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Ke.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(m(!this.idbtrans),!e&&!t)switch(n&&n.name){case\"DatabaseClosedError\":throw new X.DatabaseClosed(n);case\"MissingAPIError\":throw new X.MissingAPI(n.message,n);default:throw new X.OpenFailed(n)}if(!this.active)throw new X.TransactionInactive;return m(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=We((t=>{Gt(t),this._reject(e.error)})),e.onabort=We((t=>{Gt(t),this.active&&this._reject(new X.Abort(e.error)),this.active=!1,this.on(\"abort\").fire(t)})),e.oncomplete=We((()=>{this.active=!1,this._resolve(),\"mutatedParts\"in e&&Ht.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if(\"readwrite\"===e&&\"readwrite\"!==this.mode)return ht(new X.ReadOnly(\"Transaction is readonly\"));if(!this.active)return ht(new X.TransactionInactive);if(this._locked())return new Ce(((r,s)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,s)},Ke])}));if(n)return Je((()=>{var e=new Ce(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new Ce(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=Ce.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var s=t._waitingFor;return new Ce(((e,r)=>{n.then((n=>t._waitingQueue.push(We(e.bind(null,n)))),(e=>t._waitingQueue.push(We(r.bind(null,e))))).finally((()=>{t._waitingFor===s&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(o(t,e))return t[e];const n=this.schema[e];if(!n)throw new X.NotFound(\"Table \"+e+\" not part of transaction\");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function Xt(e,t,n,r,s,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:s,compound:i,src:(n&&!o?\"&\":\"\")+(r?\"*\":\"\")+(s?\"++\":\"\")+Jt(t)}}function Jt(e){return\"string\"==typeof e?e:e?\"[\"+[].join.call(e,\"+\")+\"]\":\"\"}function Zt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:g(n,(e=>[e.name,e]))}}let en=e=>{try{return e.only([[]]),en=()=>[[]],[[]]}catch(e){return en=()=>ft,ft}};function tn(e){return null==e?()=>{}:\"string\"==typeof e?function(e){return 1===e.split(\".\").length?t=>t[e]:t=>b(t,e)}(e):t=>b(t,e)}function nn(e){return[].slice.call(e)}let rn=0;function sn(e){return null==e?\":id\":\"string\"==typeof e?e:`[${e.join(\"+\")}]`}function on(e,t,r){function s(e){if(3===e.type)return null;if(4===e.type)throw new Error(\"Cannot convert never type to IDBKeyRange\");const{lower:n,upper:r,lowerOpen:s,upperOpen:i}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!i):void 0===r?t.lowerBound(n,!!s):t.bound(n,r,!!s,!!i)}const{schema:i,hasGetAll:o}=function(e,t){const r=nn(e.objectStoreNames);return{schema:{name:e.name,tables:r.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:r}=e,s=n(t),i=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:s,keyPath:t,autoIncrement:r,unique:!0,extractKey:tn(t)},indexes:nn(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:r,multiEntry:s,keyPath:i}=e,a={name:t,compound:n(i),keyPath:i,unique:r,multiEntry:s,extractKey:tn(i)};return o[sn(i)]=a,a})),getIndexByKeyPath:e=>o[sn(e)]};return o[\":id\"]=a.primaryKey,null!=t&&(o[sn(t)]=a.primaryKey),a}))},hasGetAll:r.length>0&&\"getAll\"in t.objectStore(r[0])&&!(\"undefined\"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]<604)}}(e,r),a=i.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:r,values:i,range:o}){return new Promise(((a,u)=>{a=We(a);const l=e.objectStore(t),c=null==l.keyPath,h=\"put\"===n||\"add\"===n;if(!h&&\"delete\"!==n&&\"deleteRange\"!==n)throw new Error(\"Invalid operation type: \"+n);const{length:d}=r||i||{length:1};if(r&&i&&r.length!==i.length)throw new Error(\"Given keys array must have same length as given values array.\");if(0===d)return a({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const p=[],y=[];let m=0;const v=e=>{++m,Gt(e)};if(\"deleteRange\"===n){if(4===o.type)return a({numFailures:m,failures:y,results:[],lastResult:void 0});3===o.type?p.push(f=l.clear()):p.push(f=l.delete(s(o)))}else{const[e,t]=h?c?[i,r]:[i,null]:[r,null];if(h)for(let r=0;r<d;++r)p.push(f=t&&void 0!==t[r]?l[n](e[r],t[r]):l[n](e[r])),f.onerror=v;else for(let t=0;t<d;++t)p.push(f=l[n](e[t])),f.onerror=v}const g=e=>{const t=e.target.result;p.forEach(((e,t)=>null!=e.error&&(y[t]=e.error))),a({numFailures:m,failures:y,results:\"delete\"===n?r:p.map((e=>e.result)),lastResult:t})};f.onerror=e=>{v(e),g(e)},f.onsuccess=g}))},getMany:({trans:e,keys:n})=>new Promise(((r,s)=>{r=We(r);const i=e.objectStore(t),o=n.length,a=new Array(o);let u,l=0,c=0;const h=e=>{const t=e.target;a[t._pos]=t.result,++c===l&&r(a)},d=zt(s);for(let e=0;e<o;++e)null!=n[e]&&(u=i.get(n[e]),u._pos=e,u.onsuccess=h,u.onerror=d,++l);0===l&&r(a)})),get:({trans:e,key:n})=>new Promise(((r,s)=>{r=We(r);const i=e.objectStore(t).get(n);i.onsuccess=e=>r(e.target.result),i.onerror=zt(s)})),query:function(e){return n=>new Promise(((r,i)=>{r=We(r);const{trans:o,values:a,limit:u,query:l}=n,c=u===1/0?void 0:u,{index:h,range:d}=l,f=o.objectStore(t),p=h.isPrimaryKey?f:f.index(h.name),y=s(d);if(0===u)return r({result:[]});if(e){const e=a?p.getAll(y,c):p.getAllKeys(y,c);e.onsuccess=e=>r({result:e.target.result}),e.onerror=zt(i)}else{let e=0;const t=a||!(\"openKeyCursor\"in p)?p.openCursor(y):p.openKeyCursor(y),n=[];t.onsuccess=s=>{const i=t.result;return i?(n.push(a?i.value:i.primaryKey),++e===u?r({result:n}):void i.continue()):r({result:n})},t.onerror=zt(i)}}))}(o),openCursor:function({trans:e,values:n,query:r,reverse:i,unique:o}){return new Promise(((a,u)=>{a=We(a);const{index:l,range:c}=r,h=e.objectStore(t),d=l.isPrimaryKey?h:h.index(l.name),f=i?o?\"prevunique\":\"prev\":o?\"nextunique\":\"next\",p=n||!(\"openKeyCursor\"in d)?d.openCursor(s(c),f):d.openKeyCursor(s(c),f);p.onerror=zt(u),p.onsuccess=We((t=>{const n=p.result;if(!n)return void a(null);n.___id=++rn,n.done=!1;const r=n.continue.bind(n);let s=n.continuePrimaryKey;s&&(s=s.bind(n));const i=n.advance.bind(n),o=()=>{throw new Error(\"Cursor not stopped\")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error(\"Cursor not started\")},n.fail=We(u),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=We(e),p.onerror=zt(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=o,e(t)}})),a=()=>{if(p.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error(\"Cursor behind last entry\")},n.stop()};return p.onsuccess=We((e=>{p.onsuccess=a,a()})),n.continue=r,n.continuePrimaryKey=s,n.advance=i,a(),t},a(n)}),u)}))},count({query:e,trans:n}){const{index:r,range:i}=e;return new Promise(((e,o)=>{const a=n.objectStore(t),u=r.isPrimaryKey?a:a.index(r.name),l=s(i),c=l?u.count(l):u.count();c.onsuccess=We((t=>e(t.target.result))),c.onerror=zt(o)}))}}}(e))),u={};return a.forEach((e=>u[e.name]=e)),{stack:\"dbcore\",transaction:e.transaction.bind(e),table(e){if(!u[e])throw new Error(`Table '${e}' not found`);return u[e]},MIN_KEY:-1/0,MAX_KEY:en(t),schema:i}}function an({_novip:e},t){const n=t.db,r=function(e,t,{IDBKeyRange:n,indexedDB:r},s){const i=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(on(t,n,s),e.dbcore);return{dbcore:i}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function un({_novip:e},t,n,r){n.forEach((n=>{const s=r[n];t.forEach((t=>{const r=d(t,n);(!r||\"value\"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?l(t,n,{get(){return this.table(n)},set(e){u(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,s))}))}))}function ln({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function cn(e,t){return e._cfg.version-t._cfg.version}function hn(e,n,r,s){const i=e._dbSchema,o=e._createTransaction(\"readwrite\",e._storeNames,i);o.create(r),o._completion.catch(s);const a=o._reject.bind(o),u=Ke.transless||Ke;Je((()=>{Ke.trans=o,Ke.transless=u,0===n?(t(i).forEach((e=>{fn(r,e,i[e].primKey,i[e].indexes)})),an(e,r),Ce.follow((()=>e.on.populate.fire(o))).catch(a)):function({_novip:e},n,r,s){const i=[],o=e._versions;let a=e._dbSchema=yn(e,e.idbdb,s),u=!1;function l(){return i.length?Ce.resolve(i.shift()(r.idbtrans)).then(l):Ce.resolve()}return o.filter((e=>e._cfg.version>=n)).forEach((o=>{i.push((()=>{const i=a,l=o._cfg.dbschema;mn(e,i,s),mn(e,l,s),a=e._dbSchema=l;const c=dn(i,l);c.add.forEach((e=>{fn(s,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((e=>{if(e.recreate)throw new X.Upgrade(\"Not yet support for changing primary key\");{const t=s.objectStore(e.name);e.add.forEach((e=>pn(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),pn(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const h=o._cfg.contentUpgrade;if(h&&o._cfg.version>n){an(e,s),r._memoizedTables={},u=!0;let n=w(l);c.del.forEach((e=>{n[e]=i[e]})),ln(e,[e.Transaction.prototype]),un(e,[e.Transaction.prototype],t(n),n),r.schema=n;const o=T(h);let a;o&&Ze();const d=Ce.follow((()=>{if(a=h(r),a&&o){var e=et.bind(null,null);a.then(e,e)}}));return a&&\"function\"==typeof a.then?Ce.resolve(a):d.then((()=>a))}})),i.push((t=>{if(!u||!vt){!function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(o._cfg.dbschema,t)}ln(e,[e.Transaction.prototype]),un(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),r.schema=e._dbSchema}))})),l().then((()=>{var e,n;n=s,t(e=a).forEach((t=>{n.db.objectStoreNames.contains(t)||fn(n,t,e[t].primKey,e[t].indexes)}))}))}(e,n,o,r).catch(a)}))}function dn(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const s=e[r],i=t[r];if(s){const e={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(\"\"+(s.primKey.keyPath||\"\")!=\"\"+(i.primKey.keyPath||\"\")||s.primKey.auto!==i.primKey.auto&&!mt)e.recreate=!0,n.change.push(e);else{const t=s.idxByName,r=i.idxByName;let o;for(o in t)r[o]||e.del.push(o);for(o in r){const n=t[o],s=r[o];n?n.src!==s.src&&e.change.push(s):e.add.push(s)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,i])}return n}function fn(e,t,n,r){const s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>pn(s,e))),s}function pn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function yn(e,t,n){const r={};return p(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let s=t.keyPath;const i=Xt(Jt(s),s||\"\",!1,!1,!!t.autoIncrement,s&&\"string\"!=typeof s,!0),o=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);s=n.keyPath;var a=Xt(n.name,s,!!n.unique,!!n.multiEntry,!1,s&&\"string\"!=typeof s,!1);o.push(a)}r[e]=Zt(e,i,o)})),r}function mn({_novip:t},n,r){const s=r.db.objectStoreNames;for(let e=0;e<s.length;++e){const i=s[e],o=r.objectStore(i);t._hasGetAll=\"getAll\"in o;for(let e=0;e<o.indexNames.length;++e){const t=o.indexNames[e],r=o.index(t).keyPath,s=\"string\"==typeof r?r:\"[\"+p(r).join(\"+\")+\"]\";if(n[i]){const e=n[i].idxByName[s];e&&(e.name=t,delete n[i].idxByName[s],n[i].idxByName[t]=e)}}}\"undefined\"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]<604&&(t._hasGetAll=!1)}class vn{_parseStoresSpec(e,r){t(e).forEach((t=>{if(null!==e[t]){var s=e[t].split(\",\").map(((e,t)=>{const r=(e=e.trim()).replace(/([&*]|\\+\\+)/g,\"\"),s=/^\\[/.test(r)?r.match(/^\\[(.*)\\]$/)[1].split(\"+\"):r;return Xt(r,s||null,/\\&/.test(e),/\\*/.test(e),/\\+\\+/.test(e),n(s),0===t)})),i=s.shift();if(i.multi)throw new X.Schema(\"Primary key cannot be multi-valued\");s.forEach((e=>{if(e.auto)throw new X.Schema(\"Only primary key can be marked as autoIncrement (++)\");if(!e.keyPath)throw new X.Schema(\"Index must have a name and cannot be an empty string\")})),r[t]=Zt(t,i,s)}}))}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,e):e;const s=n._versions,i={};let o={};return s.forEach((e=>{r(i,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(i,o)})),n._dbSchema=o,ln(n,[n._allTables,n,n.Transaction.prototype]),un(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],t(o),o),n._storeNames=t(o),this}upgrade(e){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||ee,e),this}}function gn(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new $n(\"__dbnames\",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:\"name\"})),n.table(\"dbnames\")}function bn(e){return e&&\"function\"==typeof e.databases}function _n(e){return Je((function(){return Ke.letThrough=!0,e()}))}function wn(){var e;return!navigator.userAgentData&&/Safari\\//.test(navigator.userAgent)&&!/Chrom(e|ium)\\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function xn(e){const n=e._state,{indexedDB:r}=e._deps;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then((()=>n.dbOpenError?ht(n.dbOpenError):e));R&&(n.openCanceller._stackHolder=q()),n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;const s=n.openCanceller;function i(){if(n.openCanceller!==s)throw new X.DatabaseClosed(\"db.open() was cancelled\")}let o=n.dbReadyResolve,a=null,u=!1;return Ce.race([s,(\"undefined\"==typeof navigator?Ce.resolve():wn()).then((()=>new Ce(((s,o)=>{if(i(),!r)throw new X.MissingAPI;const l=e.name,c=n.autoSchema?r.open(l):r.open(l,Math.round(10*e.verno));if(!c)throw new X.MissingAPI;c.onerror=zt(o),c.onblocked=We(e._fireOnBlocked),c.onupgradeneeded=We((t=>{if(a=c.transaction,n.autoSchema&&!e._options.allowEmptyDB){c.onerror=Gt,a.abort(),c.result.close();const e=r.deleteDatabase(l);e.onsuccess=e.onerror=We((()=>{o(new X.NoSuchDatabase(`Database ${l} doesnt exist`))}))}else{a.onerror=zt(o);var s=t.oldVersion>Math.pow(2,62)?0:t.oldVersion;u=s<1,e._novip.idbdb=c.result,hn(e,s/10,a,o)}}),o),c.onsuccess=We((()=>{a=null;const r=e._novip.idbdb=c.result,i=p(r.objectStoreNames);if(i.length>0)try{const s=r.transaction(1===(o=i).length?o[0]:o,\"readonly\");n.autoSchema?function({_novip:e},n,r){e.verno=n.version/10;const s=e._dbSchema=yn(0,n,r);e._storeNames=p(n.objectStoreNames,0),un(e,[e._allTables],t(s),s)}(e,r,s):(mn(e,e._dbSchema,s),function(e,t){const n=dn(yn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,s)||console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\")),an(e,s)}catch(e){}var o;yt.push(e),r.onversionchange=We((t=>{n.vcFired=!0,e.on(\"versionchange\").fire(t)})),r.onclose=We((t=>{e.on(\"close\").fire(t)})),u&&function({indexedDB:e,IDBKeyRange:t},n){!bn(e)&&\"__dbnames\"!==n&&gn(e,t).put({name:n}).catch(ee)}(e._deps,l),s()}),o)}))))]).then((()=>(i(),n.onReadyBeingFired=[],Ce.resolve(_n((()=>e.on.ready.fire(e.vip)))).then((function t(){if(n.onReadyBeingFired.length>0){let r=n.onReadyBeingFired.reduce(ue,ee);return n.onReadyBeingFired=[],Ce.resolve(_n((()=>r(e.vip)))).then(t)}}))))).finally((()=>{n.onReadyBeingFired=null,n.isBeingOpened=!1})).then((()=>e)).catch((t=>{n.dbOpenError=t;try{a&&a.abort()}catch(e){}return s===n.openCanceller&&e._close(),ht(t)})).finally((()=>{n.openComplete=!0,o()}))}function kn(e){var t=t=>e.next(t),r=i(t),s=i((t=>e.throw(t)));function i(e){return t=>{var i=e(t),o=i.value;return i.done?o:o&&\"function\"==typeof o.then?o.then(r,s):n(o)?Promise.all(o).then(r,s):r(o)}}return i(t)()}function En(e,t,n){var r=arguments.length;if(r<2)throw new X.InvalidArgument(\"Too few arguments\");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];n=s.pop();var i=k(s);return[e,i,n]}function Pn(e,t,n,r,s){return Ce.resolve().then((()=>{const i=Ke.transless||Ke,o=e._createTransaction(t,n,e._dbSchema,r),a={trans:o,transless:i};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===H.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn(\"Dexie: Need to reopen db\"),e._close(),e.open().then((()=>Pn(e,t,n,null,s)))):ht(r)}const u=T(s);let l;u&&Ze();const c=Ce.follow((()=>{if(l=s.call(o,o),l)if(u){var e=et.bind(null,null);l.then(e,e)}else\"function\"==typeof l.next&&\"function\"==typeof l.throw&&(l=kn(l))}),a);return(l&&\"function\"==typeof l.then?Ce.resolve(l).then((e=>o.active?e:ht(new X.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")))):c.then((()=>l))).then((e=>(r&&o._resolve(),o._completion.then((()=>e))))).catch((e=>(o._reject(e),ht(e))))}))}function Kn(e,t,r){const s=n(e)?e.slice():[e];for(let e=0;e<r;++e)s.push(t);return s}const On={stack:\"dbcore\",name:\"VirtualIndexMiddleware\",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,s={},i=[];function o(e,t,n){const r=sn(e),a=s[r]=s[r]||[],u=null==e?0:\"string\"==typeof e?1:e.length,l=t>0,c={...n,isVirtual:l,keyTail:t,keyLength:u,extractKey:tn(e),unique:!l&&n.unique};if(a.push(c),c.isPrimaryKey||i.push(c),u>1){o(2===u?e[0]:e.slice(0,u-1),t+1,n)}return a.sort(((e,t)=>e.keyTail-t.keyTail)),c}const a=o(r.primaryKey.keyPath,0,r.primaryKey);s[\":id\"]=[a];for(const e of r.indexes)o(e.keyPath,0,e);function u(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,s=n.keyTail,{type:1===r.type?2:r.type,lower:Kn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,s),lowerOpen:!0,upper:Kn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,s),upperOpen:!0})}}:t;var r,s}const l={...n,schema:{...r,primaryKey:a,indexes:i,getIndexByKeyPath:function(e){const t=s[sn(e)];return t&&t[0]}},count:e=>n.count(u(e)),query:e=>n.query(u(e)),openCursor(t){const{keyTail:r,isVirtual:s,keyLength:i}=t.query.index;if(!s)return n.openCursor(t);return n.openCursor(u(t)).then((n=>n&&function(n){const s=Object.create(n,{continue:{value:function(s){null!=s?n.continue(Kn(s,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,s){n.continuePrimaryKey(Kn(t,e.MAX_KEY,r),s)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:()=>n.value}});return s}(n)))}};return l}}}};function Sn(e,n,r,s){return r=r||{},s=s||\"\",t(e).forEach((t=>{if(o(n,t)){var i=e[t],a=n[t];if(\"object\"==typeof i&&\"object\"==typeof a&&i&&a){const e=C(i);e!==C(a)?r[s+t]=n[t]:\"Object\"===e?Sn(i,a,r,s+t+\".\"):i!==a&&(r[s+t]=n[t])}else i!==a&&(r[s+t]=n[t])}else r[s+t]=void 0})),t(n).forEach((t=>{o(e,t)||(r[s+t]=n[t])})),r}const An={stack:\"dbcore\",name:\"HooksMiddleware\",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,s={...n,mutate(e){const s=Ke.trans,{deleting:i,creating:a,updating:u}=s.table(t).hook;switch(e.type){case\"add\":if(a.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"put\":if(a.fire===ee&&u.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"delete\":if(i.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"deleteRange\":if(i.fire===ee)break;return s._promise(\"readwrite\",(()=>function(e){return c(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function l(e){const t=Ke.trans,s=e.keys||function(e,t){return\"delete\"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!s)throw new Error(\"Keys missing\");return\"delete\"!==(e=\"add\"===e.type||\"put\"===e.type?{...e,keys:s}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return\"add\"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:\"immutable\"})}(n,e,s).then((l=>{const c=s.map(((n,s)=>{const c=l[s],h={onerror:null,onsuccess:null};if(\"delete\"===e.type)i.fire.call(h,n,c,t);else if(\"add\"===e.type||void 0===c){const i=a.fire.call(h,n,e.values[s],t);null==n&&null!=i&&(n=i,e.keys[s]=n,r.outbound||_(e.values[s],r.keyPath,n))}else{const r=Sn(c,e.values[s]),i=u.fire.call(h,r,n,c,t);if(i){const t=e.values[s];Object.keys(i).forEach((e=>{o(t,e)?t[e]=i[e]:_(t,e,i[e])}))}}return h}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:i})=>{for(let r=0;r<s.length;++r){const i=n?n[r]:s[r],o=c[r];null==i?o.onerror&&o.onerror(t[r]):o.onsuccess&&o.onsuccess(\"put\"===e.type&&l[r]?e.values[r]:i)}return{failures:t,results:n,numFailures:r,lastResult:i}})).catch((e=>(c.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function c(e,t,s){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:s}).then((({result:n})=>l({type:\"delete\",keys:n,trans:e}).then((r=>r.numFailures>0?Promise.reject(r.failures[0]):n.length<s?{failures:[],numFailures:0,lastResult:void 0}:c(e,{...t,lower:n[n.length-1],lowerOpen:!0},s)))))}}};return s}})};function Cn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let s=0,i=0;s<t.keys.length&&i<e.length;++s)0===It(t.keys[s],e[i])&&(r.push(n?O(t.values[s]):t.values[s]),++i);return r.length===e.length?r:null}catch(e){return null}}const jn={stack:\"dbcore\",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=Cn(e.keys,e.trans._cache,\"clone\"===e.cache);return t?Ce.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:\"clone\"===e.cache?O(t):t},t)))},mutate:e=>(\"add\"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function Dn(e){return!(\"from\"in e)}const In=function(e,t){if(!this){const t=new In;return e&&\"d\"in e&&r(t,e),t}r(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Bn(e,t,n){const s=It(t,n);if(isNaN(s))return;if(s>0)throw RangeError();if(Dn(e))return r(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(It(n,e.from)<0)return i?Bn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Mn(e);if(It(t,e.to)>0)return o?Bn(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Mn(e);It(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),It(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const a=!e.r;i&&!e.l&&Tn(e,i),o&&a&&Tn(e,o)}function Tn(e,t){Dn(t)||function e(t,{from:n,to:r,l:s,r:i}){Bn(t,n,r),s&&e(t,s),i&&e(t,i)}(e,t)}function Rn(e,t){const n=Fn(t);let r=n.next();if(r.done)return!1;let s=r.value;const i=Fn(e);let o=i.next(s.from),a=o.value;for(;!r.done&&!o.done;){if(It(a.from,s.to)<=0&&It(a.to,s.from)>=0)return!0;It(s.from,a.from)<0?s=(r=n.next(a.from)).value:a=(o=i.next(s.from)).value}return!1}function Fn(e){let t=Dn(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&It(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||It(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Mn(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),s=r>1?\"r\":r<-1?\"l\":\"\";if(s){const t=\"r\"===s?\"l\":\"r\",n={...e},r=e[s];e.from=r.from,e.to=r.to,e[s]=r[s],n[s]=r[t],e[t]=n,n.d=Nn(n)}e.d=Nn(e)}function Nn({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}a(In.prototype,{add(e){return Tn(this,e),this},addKey(e){return Bn(this,e,e),this},addKeys(e){return e.forEach((e=>Bn(this,e,e))),this},[j](){return Fn(this)}});const qn={stack:\"dbcore\",level:0,create:e=>{const r=e.schema.name,s=new In(e.MIN_KEY,e.MAX_KEY);return{...e,table:i=>{const o=e.table(i),{schema:a}=o,{primaryKey:u}=a,{extractKey:l,outbound:c}=u,h={...o,mutate:e=>{const t=e.trans,u=t.mutatedParts||(t.mutatedParts={}),l=e=>{const t=`idb://${r}/${i}/${e}`;return u[t]||(u[t]=new In)},c=l(\"\"),h=l(\":dels\"),{type:d}=e;let[f,p]=\"deleteRange\"===e.type?[e.range]:\"delete\"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const y=e.trans._cache;return o.mutate(e).then((e=>{if(n(f)){\"delete\"!==d&&(f=e.results),c.addKeys(f);const t=Cn(f,y);t||\"add\"===d||h.addKeys(f),(t||p)&&function(e,t,r,s){function i(t){const i=e(t.name||\"\");function o(e){return null!=e?t.extractKey(e):null}const a=e=>t.multiEntry&&n(e)?e.forEach((e=>i.addKey(e))):i.addKey(e);(r||s).forEach(((e,t)=>{const n=r&&o(r[t]),i=s&&o(s[t]);0!==It(n,i)&&(null!=n&&a(n),null!=i&&a(i))}))}t.indexes.forEach(i)}(l,a,t,p)}else if(f){const e={from:f.lower,to:f.upper};h.add(e),c.add(e)}else c.add(s),h.add(s),a.indexes.forEach((e=>l(e.name).add(s)));return e}))}},d=({query:{index:t,range:n}})=>{var r,s;return[t,new In(null!==(r=n.lower)&&void 0!==r?r:e.MIN_KEY,null!==(s=n.upper)&&void 0!==s?s:e.MAX_KEY)]},f={get:e=>[u,new In(e.key)],getMany:e=>[u,(new In).addKeys(e.keys)],count:d,query:d,openCursor:d};return t(f).forEach((e=>{h[e]=function(t){const{subscr:n}=Ke;if(n){const a=e=>{const t=`idb://${r}/${i}/${e}`;return n[t]||(n[t]=new In)},u=a(\"\"),h=a(\":dels\"),[d,p]=f[e](t);if(a(d.name||\"\").add(p),!d.isPrimaryKey){if(\"count\"!==e){const n=\"query\"===e&&c&&t.values&&o.query({...t,values:!1});return o[e].apply(this,arguments).then((r=>{if(\"query\"===e){if(c&&t.values)return n.then((({result:e})=>(u.addKeys(e),r)));const e=t.values?r.result.map(l):r.result;t.values?u.addKeys(e):h.addKeys(e)}else if(\"openCursor\"===e){const e=r,n=t.values;return e&&Object.create(e,{key:{get:()=>(h.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return h.addKey(t),t}},value:{get:()=>(n&&u.addKey(e.primaryKey),e.value)}})}return r}))}h.add(s)}}return o[e].apply(this,arguments)}})),h}}}};class $n{constructor(e,t){this._middlewares={},this.verno=0;const n=$n.dependencies;this._options=t={addons:$n.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var i;s.dbReadyPromise=new Ce((e=>{s.dbReadyResolve=e})),s.openCanceller=new Ce(((e,t)=>{s.cancelOpen=t})),this._state=s,this.name=e,this.on=Et(this,\"populate\",\"blocked\",\"versionchange\",\"close\",{ready:[ue,ee]}),this.on.ready.subscribe=y(this.on.ready.subscribe,(e=>(t,n)=>{$n.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||Ce.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(i=this,Pt(Rt.prototype,(function(e,t){this.db=i;let n=wt,r=null;if(t)try{n=t()}catch(e){r=e}const s=e._ctx,o=s.table,a=o.hook.reading.fire;this._ctx={table:o,index:s.index,isPrimKey:!s.index||o.schema.primKey.keyPath&&s.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:\"next\",unique:\"\",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:s.or,valueMapper:a!==te?a:null}}))),this.Table=function(e){return Pt(kt.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Et(null,{creating:[se,ee],reading:[ne,te],updating:[oe,ee],deleting:[ie,ee]})}))}(this),this.Transaction=function(e){return Pt(Qt.prototype,(function(t,n,r,s,i){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=Et(this,\"complete\",\"error\",\"abort\"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ce(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),ht(e)}))}))}(this),this.Version=function(e){return Pt(vn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Pt(Yt.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:\":id\"===n?null:n,or:r};const s=e._deps.indexedDB;if(!s)throw new X.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=(e,t)=>s.cmp(t,e),this._max=(e,t)=>s.cmp(e,t)>0?e:t,this._min=(e,t)=>s.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on(\"versionchange\",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on(\"blocked\",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=en(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on(\"blocked\").fire(e),yt.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on(\"versionchange\").fire(e)))},this.use(On),this.use(An),this.use(qn),this.use(jn),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new X.Type(\"Given version is not a positive number\");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema(\"Cannot add version when database is open\");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(cn),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Ke.letThrough||this._vip)?e():new Ce(((e,t)=>{if(this._state.openComplete)return t(new X.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new X.DatabaseClosed);this.open().catch(ee)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:t,level:null==n?10:n,name:r}),s.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return xn(this)}_close(){const e=this._state,t=yt.indexOf(this);if(t>=0&&yt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Ce((t=>{e.dbReadyResolve=t})),e.openCanceller=new Ce(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new X.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Ce(((n,r)=>{const s=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=We((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!bn(e)&&\"__dbnames\"!==n&&gn(e,t).delete(n).catch(ee)}(this._deps,this.name),n()})),e.onerror=zt(r),e.onblocked=this._fireOnBlocked};if(e)throw new X.InvalidArgument(\"Arguments not allowed in db.delete()\");t.isBeingOpened?t.dbReadyPromise.then(s):s()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&\"DatabaseClosed\"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return t(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=En.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=Ke.trans;r&&r.db===this&&-1===e.indexOf(\"!\")||(r=null);const s=-1!==e.indexOf(\"?\");let i,o;e=e.replace(\"!\",\"\").replace(\"?\",\"\");try{if(o=t.map((e=>{var t=e instanceof this.Table?e.name:e;if(\"string\"!=typeof t)throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");return t})),\"r\"==e||\"readonly\"===e)i=\"readonly\";else{if(\"rw\"!=e&&\"readwrite\"!=e)throw new X.InvalidArgument(\"Invalid transaction mode: \"+e);i=\"readwrite\"}if(r){if(\"readonly\"===r.mode&&\"readwrite\"===i){if(!s)throw new X.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");r=null}r&&o.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!s)throw new X.SubTransaction(\"Table \"+e+\" not included in parent transaction.\");r=null}})),s&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):ht(e)}const a=Pn.bind(null,this,i,o,r,n);return r?r._promise(i,a,\"lock\"):Ke.trans?ot(Ke.transless,(()=>this._whenReady(a))):this._whenReady(a)}table(e){if(!o(this._allTables,e))throw new X.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Un=\"undefined\"!=typeof Symbol&&\"observable\"in Symbol?Symbol.observable:\"@@observable\";class Ln{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&\"function\"!=typeof e?e:{next:e,error:t,complete:n})}[Un](){return this}}function Vn(e,n){return t(n).forEach((t=>{Tn(e[t]||(e[t]=new In),n[t])})),e}function Wn(e){return new Ln((n=>{const r=T(e);let s=!1,i={},o={};const a={get closed(){return s},unsubscribe:()=>{s=!0,Ht.storagemutated.unsubscribe(h)}};n.start&&n.start(a);let u=!1,l=!1;function c(){return t(o).some((e=>i[e]&&Rn(i[e],o[e])))}const h=e=>{Vn(i,e),c()&&d()},d=()=>{if(u||s)return;i={};const t={},f=function(t){r&&Ze();const n=()=>Je(e,{subscr:t,trans:null}),s=Ke.trans?ot(Ke.transless,n):n();return r&&s.then(et,et),s}(t);l||(Ht(\"storagemutated\",h),l=!0),u=!0,Promise.resolve(f).then((e=>{u=!1,s||(c()?d():(i={},o=t,n.next&&n.next(e)))}),(e=>{u=!1,n.error&&n.error(e),a.unsubscribe()}))};return d(),a}))}let Yn;try{Yn={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch(e){Yn={indexedDB:null,IDBKeyRange:null}}const zn=$n;function Gn(e){let t=Hn;try{Hn=!0,Ht.storagemutated.fire(e)}finally{Hn=t}}a(zn,{...Z,delete:e=>new zn(e,{addons:[]}).delete(),exists:e=>new zn(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch(\"NoSuchDatabaseError\",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return bn(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>\"__dbnames\"!==e)))):gn(e,t).toCollection().primaryKeys()}(zn.dependencies).then(e)}catch(e){return ht(new X.MissingAPI)}},defineClass:()=>function(e){r(this,e)},ignoreTransaction:e=>Ke.trans?ot(Ke.transless,e):e(),vip:_n,async:function(e){return function(){try{var t=kn(e.apply(this,arguments));return t&&\"function\"==typeof t.then?t:Ce.resolve(t)}catch(e){return ht(e)}}},spawn:function(e,t,n){try{var r=kn(e.apply(n,t||[]));return r&&\"function\"==typeof r.then?r:Ce.resolve(r)}catch(e){return ht(e)}},currentTransaction:{get:()=>Ke.trans||null},waitFor:function(e,t){const n=Ce.resolve(\"function\"==typeof e?zn.ignoreTransaction(e):e).timeout(t||6e4);return Ke.trans?Ke.trans.waitFor(n):n},Promise:Ce,debug:{get:()=>R,set:e=>{F(e,\"dexie\"===e?()=>!0:bt)}},derive:c,extend:r,props:a,override:y,Events:Et,on:Ht,liveQuery:Wn,extendObservabilitySet:Vn,getByKeyPath:b,setByKeyPath:_,delByKeyPath:function(e,t){\"string\"==typeof t?_(e,t,void 0):\"length\"in t&&[].map.call(t,(function(t){_(e,t,void 0)}))},shallowClone:w,deepClone:O,getObjectDiff:Sn,cmp:It,asap:v,minKey:-(1/0),addons:[],connections:yt,errnames:H,dependencies:Yn,semVer:\"3.2.3\",version:\"3.2.3\".split(\".\").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),zn.maxKey=en(zn.dependencies.IDBKeyRange),\"undefined\"!=typeof dispatchEvent&&\"undefined\"!=typeof addEventListener&&(Ht(\"storagemutated\",(e=>{if(!Hn){let t;mt?(t=document.createEvent(\"CustomEvent\"),t.initCustomEvent(\"x-storagemutated-1\",!0,!0,e)):t=new CustomEvent(\"x-storagemutated-1\",{detail:e}),Hn=!0,dispatchEvent(t),Hn=!1}})),addEventListener(\"x-storagemutated-1\",(({detail:e})=>{Hn||Gn(e)})));let Hn=!1;if(\"undefined\"!=typeof BroadcastChannel){const e=new BroadcastChannel(\"x-storagemutated-1\");\"function\"==typeof e.unref&&e.unref(),Ht(\"storagemutated\",(t=>{Hn||e.postMessage(t)})),e.onmessage=e=>{e.data&&Gn(e.data)}}else if(\"undefined\"!=typeof self&&\"undefined\"!=typeof navigator){Ht(\"storagemutated\",(e=>{try{Hn||(\"undefined\"!=typeof localStorage&&localStorage.setItem(\"x-storagemutated-1\",JSON.stringify({trig:Math.random(),changedParts:e})),\"object\"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:\"x-storagemutated-1\",changedParts:e}))))}catch(e){}})),\"undefined\"!=typeof addEventListener&&addEventListener(\"storage\",(e=>{if(\"x-storagemutated-1\"===e.key){const t=JSON.parse(e.newValue);t&&Gn(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener(\"message\",(function({data:e}){e&&\"x-storagemutated-1\"===e.type&&Gn(e.changedParts)}))}Ce.rejectionMapper=function(e,t){if(!e||e instanceof W||e instanceof TypeError||e instanceof SyntaxError||!e.name||!J[e.name])return e;var n=new J[e.name](t||e.message,e);return\"stack\"in e&&l(n,\"stack\",{get:function(){return this.inner.stack}}),n},F(R,bt);export{$n as Dexie,In as RangeSet,$n as default,Wn as liveQuery,Tn as mergeRanges,Rn as rangesOverlap};","!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=function(t,n,e,i,o){for(n=n.split?n.split(\".\"):n,i=0;i<n.length;i++)t=t?t[n[i]]:o;return t===o?e:t}:\"function\"==typeof define&&define.amd?define(function(){return function(t,n,e,i,o){for(n=n.split?n.split(\".\"):n,i=0;i<n.length;i++)t=t?t[n[i]]:o;return t===o?e:t}}):t.dlv=function(t,n,e,i,o){for(n=n.split?n.split(\".\"):n,i=0;i<n.length;i++)t=t?t[n[i]]:o;return t===o?e:t}}(this);\n//# sourceMappingURL=dlv.umd.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst event_iterator_1 = require(\"./event-iterator\");\nexports.EventIterator = event_iterator_1.EventIterator;\nfunction subscribe(event, options, evOptions) {\n    return new event_iterator_1.EventIterator(({ push }) => {\n        this.addEventListener(event, push, options);\n        return () => this.removeEventListener(event, push, options);\n    }, evOptions);\n}\nexports.subscribe = subscribe;\nexports.default = event_iterator_1.EventIterator;\n","'use strict';\n\nmodule.exports = function ReactNativeFile(_ref) {\n  var uri = _ref.uri,\n    name = _ref.name,\n    type = _ref.type;\n  this.uri = uri;\n  this.name = name;\n  this.type = type;\n};\n","'use strict';\n\nvar defaultIsExtractableFile = require('./isExtractableFile');\n\nmodule.exports = function extractFiles(value, path, isExtractableFile) {\n  if (path === void 0) {\n    path = '';\n  }\n\n  if (isExtractableFile === void 0) {\n    isExtractableFile = defaultIsExtractableFile;\n  }\n\n  var clone;\n  var files = new Map();\n\n  function addFile(paths, file) {\n    var storedPaths = files.get(file);\n    if (storedPaths) storedPaths.push.apply(storedPaths, paths);\n    else files.set(file, paths);\n  }\n\n  if (isExtractableFile(value)) {\n    clone = null;\n    addFile([path], value);\n  } else {\n    var prefix = path ? path + '.' : '';\n    if (typeof FileList !== 'undefined' && value instanceof FileList)\n      clone = Array.prototype.map.call(value, function (file, i) {\n        addFile(['' + prefix + i], file);\n        return null;\n      });\n    else if (Array.isArray(value))\n      clone = value.map(function (child, i) {\n        var result = extractFiles(child, '' + prefix + i, isExtractableFile);\n        result.files.forEach(addFile);\n        return result.clone;\n      });\n    else if (value && value.constructor === Object) {\n      clone = {};\n\n      for (var i in value) {\n        var result = extractFiles(value[i], '' + prefix + i, isExtractableFile);\n        result.files.forEach(addFile);\n        clone[i] = result.clone;\n      }\n    } else clone = value;\n  }\n\n  return {\n    clone: clone,\n    files: files,\n  };\n};\n","'use strict';\n\nvar ReactNativeFile = require('./ReactNativeFile');\n\nmodule.exports = function isExtractableFile(value) {\n  return (\n    (typeof File !== 'undefined' && value instanceof File) ||\n    (typeof Blob !== 'undefined' && value instanceof Blob) ||\n    value instanceof ReactNativeFile\n  );\n};\n","module.exports = class FixedFIFO {\n  constructor (hwm) {\n    if (!(hwm > 0) || ((hwm - 1) & hwm) !== 0) throw new Error('Max size for a FixedFIFO should be a power of two')\n    this.buffer = new Array(hwm)\n    this.mask = hwm - 1\n    this.top = 0\n    this.btm = 0\n    this.next = null\n  }\n\n  push (data) {\n    if (this.buffer[this.top] !== undefined) return false\n    this.buffer[this.top] = data\n    this.top = (this.top + 1) & this.mask\n    return true\n  }\n\n  shift () {\n    const last = this.buffer[this.btm]\n    if (last === undefined) return undefined\n    this.buffer[this.btm] = undefined\n    this.btm = (this.btm + 1) & this.mask\n    return last\n  }\n\n  peek () {\n    return this.buffer[this.btm]\n  }\n\n  isEmpty () {\n    return this.buffer[this.btm] === undefined\n  }\n}\n","const FixedFIFO = require('./fixed-size')\n\nmodule.exports = class FastFIFO {\n  constructor (hwm) {\n    this.hwm = hwm || 16\n    this.head = new FixedFIFO(this.hwm)\n    this.tail = this.head\n  }\n\n  push (val) {\n    if (!this.head.push(val)) {\n      const prev = this.head\n      this.head = prev.next = new FixedFIFO(2 * this.head.buffer.length)\n      this.head.push(val)\n    }\n  }\n\n  shift () {\n    const val = this.tail.shift()\n    if (val === undefined && this.tail.next) {\n      const next = this.tail.next\n      this.tail.next = null\n      this.tail = next\n      return this.tail.shift()\n    }\n    return val\n  }\n\n  peek () {\n    return this.tail.peek()\n  }\n\n  isEmpty () {\n    return this.head.isEmpty()\n  }\n}\n","'use strict';\n\nconst validator = require('./validator');\nconst XMLParser = require('./xmlparser/XMLParser');\nconst XMLBuilder = require('./xmlbuilder/json2xml');\n\nmodule.exports = {\n  XMLParser: XMLParser,\n  XMLValidator: validator,\n  XMLBuilder: XMLBuilder\n}","'use strict';\n\nconst nameStartChar = ':A-Za-z_\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD';\nconst nameChar = nameStartChar + '\\\\-.\\\\d\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040';\nconst nameRegexp = '[' + nameStartChar + '][' + nameChar + ']*'\nconst regexName = new RegExp('^' + nameRegexp + '$');\n\nconst getAllMatches = function(string, regex) {\n  const matches = [];\n  let match = regex.exec(string);\n  while (match) {\n    const allmatches = [];\n    allmatches.startIndex = regex.lastIndex - match[0].length;\n    const len = match.length;\n    for (let index = 0; index < len; index++) {\n      allmatches.push(match[index]);\n    }\n    matches.push(allmatches);\n    match = regex.exec(string);\n  }\n  return matches;\n};\n\nconst isName = function(string) {\n  const match = regexName.exec(string);\n  return !(match === null || typeof match === 'undefined');\n};\n\nexports.isExist = function(v) {\n  return typeof v !== 'undefined';\n};\n\nexports.isEmptyObject = function(obj) {\n  return Object.keys(obj).length === 0;\n};\n\n/**\n * Copy all the properties of a into b.\n * @param {*} target\n * @param {*} a\n */\nexports.merge = function(target, a, arrayMode) {\n  if (a) {\n    const keys = Object.keys(a); // will return an array of own properties\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      if (arrayMode === 'strict') {\n        target[keys[i]] = [ a[keys[i]] ];\n      } else {\n        target[keys[i]] = a[keys[i]];\n      }\n    }\n  }\n};\n/* exports.merge =function (b,a){\n  return Object.assign(b,a);\n} */\n\nexports.getValue = function(v) {\n  if (exports.isExist(v)) {\n    return v;\n  } else {\n    return '';\n  }\n};\n\n// const fakeCall = function(a) {return a;};\n// const fakeCallNoReturn = function() {};\n\nexports.isName = isName;\nexports.getAllMatches = getAllMatches;\nexports.nameRegexp = nameRegexp;\n","'use strict';\n\nconst util = require('./util');\n\nconst defaultOptions = {\n  allowBooleanAttributes: false, //A tag can have attributes without any value\n  unpairedTags: []\n};\n\n//const tagsPattern = new RegExp(\"<\\\\/?([\\\\w:\\\\-_\\.]+)\\\\s*\\/?>\",\"g\");\nexports.validate = function (xmlData, options) {\n  options = Object.assign({}, defaultOptions, options);\n\n  //xmlData = xmlData.replace(/(\\r\\n|\\n|\\r)/gm,\"\");//make it single line\n  //xmlData = xmlData.replace(/(^\\s*<\\?xml.*?\\?>)/g,\"\");//Remove XML starting tag\n  //xmlData = xmlData.replace(/(<!DOCTYPE[\\s\\w\\\"\\.\\/\\-\\:]+(\\[.*\\])*\\s*>)/g,\"\");//Remove DOCTYPE\n  const tags = [];\n  let tagFound = false;\n\n  //indicates that the root tag has been closed (aka. depth 0 has been reached)\n  let reachedRoot = false;\n\n  if (xmlData[0] === '\\ufeff') {\n    // check for byte order mark (BOM)\n    xmlData = xmlData.substr(1);\n  }\n  \n  for (let i = 0; i < xmlData.length; i++) {\n\n    if (xmlData[i] === '<' && xmlData[i+1] === '?') {\n      i+=2;\n      i = readPI(xmlData,i);\n      if (i.err) return i;\n    }else if (xmlData[i] === '<') {\n      //starting of tag\n      //read until you reach to '>' avoiding any '>' in attribute value\n      let tagStartPos = i;\n      i++;\n      \n      if (xmlData[i] === '!') {\n        i = readCommentAndCDATA(xmlData, i);\n        continue;\n      } else {\n        let closingTag = false;\n        if (xmlData[i] === '/') {\n          //closing tag\n          closingTag = true;\n          i++;\n        }\n        //read tagname\n        let tagName = '';\n        for (; i < xmlData.length &&\n          xmlData[i] !== '>' &&\n          xmlData[i] !== ' ' &&\n          xmlData[i] !== '\\t' &&\n          xmlData[i] !== '\\n' &&\n          xmlData[i] !== '\\r'; i++\n        ) {\n          tagName += xmlData[i];\n        }\n        tagName = tagName.trim();\n        //console.log(tagName);\n\n        if (tagName[tagName.length - 1] === '/') {\n          //self closing tag without attributes\n          tagName = tagName.substring(0, tagName.length - 1);\n          //continue;\n          i--;\n        }\n        if (!validateTagName(tagName)) {\n          let msg;\n          if (tagName.trim().length === 0) {\n            msg = \"Invalid space after '<'.\";\n          } else {\n            msg = \"Tag '\"+tagName+\"' is an invalid name.\";\n          }\n          return getErrorObject('InvalidTag', msg, getLineNumberForPosition(xmlData, i));\n        }\n\n        const result = readAttributeStr(xmlData, i);\n        if (result === false) {\n          return getErrorObject('InvalidAttr', \"Attributes for '\"+tagName+\"' have open quote.\", getLineNumberForPosition(xmlData, i));\n        }\n        let attrStr = result.value;\n        i = result.index;\n\n        if (attrStr[attrStr.length - 1] === '/') {\n          //self closing tag\n          const attrStrStart = i - attrStr.length;\n          attrStr = attrStr.substring(0, attrStr.length - 1);\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid === true) {\n            tagFound = true;\n            //continue; //text may presents after self closing tag\n          } else {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, attrStrStart + isValid.err.line));\n          }\n        } else if (closingTag) {\n          if (!result.tagClosed) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' doesn't have proper closing.\", getLineNumberForPosition(xmlData, i));\n          } else if (attrStr.trim().length > 0) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' can't have attributes or invalid starting.\", getLineNumberForPosition(xmlData, tagStartPos));\n          } else {\n            const otg = tags.pop();\n            if (tagName !== otg.tagName) {\n              let openPos = getLineNumberForPosition(xmlData, otg.tagStartPos);\n              return getErrorObject('InvalidTag',\n                \"Expected closing tag '\"+otg.tagName+\"' (opened in line \"+openPos.line+\", col \"+openPos.col+\") instead of closing tag '\"+tagName+\"'.\",\n                getLineNumberForPosition(xmlData, tagStartPos));\n            }\n\n            //when there are no more tags, we reached the root level.\n            if (tags.length == 0) {\n              reachedRoot = true;\n            }\n          }\n        } else {\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid !== true) {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, i - attrStr.length + isValid.err.line));\n          }\n\n          //if the root level has been reached before ...\n          if (reachedRoot === true) {\n            return getErrorObject('InvalidXml', 'Multiple possible root nodes found.', getLineNumberForPosition(xmlData, i));\n          } else if(options.unpairedTags.indexOf(tagName) !== -1){\n            //don't push into stack\n          } else {\n            tags.push({tagName, tagStartPos});\n          }\n          tagFound = true;\n        }\n\n        //skip tag text value\n        //It may include comments and CDATA value\n        for (i++; i < xmlData.length; i++) {\n          if (xmlData[i] === '<') {\n            if (xmlData[i + 1] === '!') {\n              //comment or CADATA\n              i++;\n              i = readCommentAndCDATA(xmlData, i);\n              continue;\n            } else if (xmlData[i+1] === '?') {\n              i = readPI(xmlData, ++i);\n              if (i.err) return i;\n            } else{\n              break;\n            }\n          } else if (xmlData[i] === '&') {\n            const afterAmp = validateAmpersand(xmlData, i);\n            if (afterAmp == -1)\n              return getErrorObject('InvalidChar', \"char '&' is not expected.\", getLineNumberForPosition(xmlData, i));\n            i = afterAmp;\n          }else{\n            if (reachedRoot === true && !isWhiteSpace(xmlData[i])) {\n              return getErrorObject('InvalidXml', \"Extra text at the end\", getLineNumberForPosition(xmlData, i));\n            }\n          }\n        } //end of reading tag text value\n        if (xmlData[i] === '<') {\n          i--;\n        }\n      }\n    } else {\n      if ( isWhiteSpace(xmlData[i])) {\n        continue;\n      }\n      return getErrorObject('InvalidChar', \"char '\"+xmlData[i]+\"' is not expected.\", getLineNumberForPosition(xmlData, i));\n    }\n  }\n\n  if (!tagFound) {\n    return getErrorObject('InvalidXml', 'Start tag expected.', 1);\n  }else if (tags.length == 1) {\n      return getErrorObject('InvalidTag', \"Unclosed tag '\"+tags[0].tagName+\"'.\", getLineNumberForPosition(xmlData, tags[0].tagStartPos));\n  }else if (tags.length > 0) {\n      return getErrorObject('InvalidXml', \"Invalid '\"+\n          JSON.stringify(tags.map(t => t.tagName), null, 4).replace(/\\r?\\n/g, '')+\n          \"' found.\", {line: 1, col: 1});\n  }\n\n  return true;\n};\n\nfunction isWhiteSpace(char){\n  return char === ' ' || char === '\\t' || char === '\\n'  || char === '\\r';\n}\n/**\n * Read Processing insstructions and skip\n * @param {*} xmlData\n * @param {*} i\n */\nfunction readPI(xmlData, i) {\n  const start = i;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] == '?' || xmlData[i] == ' ') {\n      //tagname\n      const tagname = xmlData.substr(start, i - start);\n      if (i > 5 && tagname === 'xml') {\n        return getErrorObject('InvalidXml', 'XML declaration allowed only at the start of the document.', getLineNumberForPosition(xmlData, i));\n      } else if (xmlData[i] == '?' && xmlData[i + 1] == '>') {\n        //check if valid attribut string\n        i++;\n        break;\n      } else {\n        continue;\n      }\n    }\n  }\n  return i;\n}\n\nfunction readCommentAndCDATA(xmlData, i) {\n  if (xmlData.length > i + 5 && xmlData[i + 1] === '-' && xmlData[i + 2] === '-') {\n    //comment\n    for (i += 3; i < xmlData.length; i++) {\n      if (xmlData[i] === '-' && xmlData[i + 1] === '-' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  } else if (\n    xmlData.length > i + 8 &&\n    xmlData[i + 1] === 'D' &&\n    xmlData[i + 2] === 'O' &&\n    xmlData[i + 3] === 'C' &&\n    xmlData[i + 4] === 'T' &&\n    xmlData[i + 5] === 'Y' &&\n    xmlData[i + 6] === 'P' &&\n    xmlData[i + 7] === 'E'\n  ) {\n    let angleBracketsCount = 1;\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === '<') {\n        angleBracketsCount++;\n      } else if (xmlData[i] === '>') {\n        angleBracketsCount--;\n        if (angleBracketsCount === 0) {\n          break;\n        }\n      }\n    }\n  } else if (\n    xmlData.length > i + 9 &&\n    xmlData[i + 1] === '[' &&\n    xmlData[i + 2] === 'C' &&\n    xmlData[i + 3] === 'D' &&\n    xmlData[i + 4] === 'A' &&\n    xmlData[i + 5] === 'T' &&\n    xmlData[i + 6] === 'A' &&\n    xmlData[i + 7] === '['\n  ) {\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === ']' && xmlData[i + 1] === ']' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  }\n\n  return i;\n}\n\nconst doubleQuote = '\"';\nconst singleQuote = \"'\";\n\n/**\n * Keep reading xmlData until '<' is found outside the attribute value.\n * @param {string} xmlData\n * @param {number} i\n */\nfunction readAttributeStr(xmlData, i) {\n  let attrStr = '';\n  let startChar = '';\n  let tagClosed = false;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === doubleQuote || xmlData[i] === singleQuote) {\n      if (startChar === '') {\n        startChar = xmlData[i];\n      } else if (startChar !== xmlData[i]) {\n        //if vaue is enclosed with double quote then single quotes are allowed inside the value and vice versa\n      } else {\n        startChar = '';\n      }\n    } else if (xmlData[i] === '>') {\n      if (startChar === '') {\n        tagClosed = true;\n        break;\n      }\n    }\n    attrStr += xmlData[i];\n  }\n  if (startChar !== '') {\n    return false;\n  }\n\n  return {\n    value: attrStr,\n    index: i,\n    tagClosed: tagClosed\n  };\n}\n\n/**\n * Select all the attributes whether valid or invalid.\n */\nconst validAttrStrRegxp = new RegExp('(\\\\s*)([^\\\\s=]+)(\\\\s*=)?(\\\\s*([\\'\"])(([\\\\s\\\\S])*?)\\\\5)?', 'g');\n\n//attr, =\"sd\", a=\"amit's\", a=\"sd\"b=\"saf\", ab  cd=\"\"\n\nfunction validateAttributeString(attrStr, options) {\n  //console.log(\"start:\"+attrStr+\":end\");\n\n  //if(attrStr.trim().length === 0) return true; //empty string\n\n  const matches = util.getAllMatches(attrStr, validAttrStrRegxp);\n  const attrNames = {};\n\n  for (let i = 0; i < matches.length; i++) {\n    if (matches[i][1].length === 0) {\n      //nospace before attribute name: a=\"sd\"b=\"saf\"\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' has no space in starting.\", getPositionFromMatch(matches[i]))\n    } else if (matches[i][3] !== undefined && matches[i][4] === undefined) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' is without value.\", getPositionFromMatch(matches[i]));\n    } else if (matches[i][3] === undefined && !options.allowBooleanAttributes) {\n      //independent attribute: ab\n      return getErrorObject('InvalidAttr', \"boolean attribute '\"+matches[i][2]+\"' is not allowed.\", getPositionFromMatch(matches[i]));\n    }\n    /* else if(matches[i][6] === undefined){//attribute without value: ab=\n                    return { err: { code:\"InvalidAttr\",msg:\"attribute \" + matches[i][2] + \" has no value assigned.\"}};\n                } */\n    const attrName = matches[i][2];\n    if (!validateAttrName(attrName)) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is an invalid name.\", getPositionFromMatch(matches[i]));\n    }\n    if (!attrNames.hasOwnProperty(attrName)) {\n      //check for duplicate attribute.\n      attrNames[attrName] = 1;\n    } else {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is repeated.\", getPositionFromMatch(matches[i]));\n    }\n  }\n\n  return true;\n}\n\nfunction validateNumberAmpersand(xmlData, i) {\n  let re = /\\d/;\n  if (xmlData[i] === 'x') {\n    i++;\n    re = /[\\da-fA-F]/;\n  }\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === ';')\n      return i;\n    if (!xmlData[i].match(re))\n      break;\n  }\n  return -1;\n}\n\nfunction validateAmpersand(xmlData, i) {\n  // https://www.w3.org/TR/xml/#dt-charref\n  i++;\n  if (xmlData[i] === ';')\n    return -1;\n  if (xmlData[i] === '#') {\n    i++;\n    return validateNumberAmpersand(xmlData, i);\n  }\n  let count = 0;\n  for (; i < xmlData.length; i++, count++) {\n    if (xmlData[i].match(/\\w/) && count < 20)\n      continue;\n    if (xmlData[i] === ';')\n      break;\n    return -1;\n  }\n  return i;\n}\n\nfunction getErrorObject(code, message, lineNumber) {\n  return {\n    err: {\n      code: code,\n      msg: message,\n      line: lineNumber.line || lineNumber,\n      col: lineNumber.col,\n    },\n  };\n}\n\nfunction validateAttrName(attrName) {\n  return util.isName(attrName);\n}\n\n// const startsWithXML = /^xml/i;\n\nfunction validateTagName(tagname) {\n  return util.isName(tagname) /* && !tagname.match(startsWithXML) */;\n}\n\n//this function returns the line number for the character at the given index\nfunction getLineNumberForPosition(xmlData, index) {\n  const lines = xmlData.substring(0, index).split(/\\r?\\n/);\n  return {\n    line: lines.length,\n\n    // column number is last line's length + 1, because column numbering starts at 1:\n    col: lines[lines.length - 1].length + 1\n  };\n}\n\n//this function returns the position of the first character of match within attrStr\nfunction getPositionFromMatch(match) {\n  return match.startIndex + match[1].length;\n}\n","'use strict';\n//parse Empty Node as self closing node\nconst buildFromOrderedJs = require('./orderedJs2Xml');\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attributesGroupName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  cdataPropName: false,\n  format: false,\n  indentBy: '  ',\n  suppressEmptyNode: false,\n  suppressUnpairedNode: true,\n  suppressBooleanAttributes: true,\n  tagValueProcessor: function(key, a) {\n    return a;\n  },\n  attributeValueProcessor: function(attrName, a) {\n    return a;\n  },\n  preserveOrder: false,\n  commentPropName: false,\n  unpairedTags: [],\n  entities: [\n    { regex: new RegExp(\"&\", \"g\"), val: \"&amp;\" },//it must be on top\n    { regex: new RegExp(\">\", \"g\"), val: \"&gt;\" },\n    { regex: new RegExp(\"<\", \"g\"), val: \"&lt;\" },\n    { regex: new RegExp(\"\\'\", \"g\"), val: \"&apos;\" },\n    { regex: new RegExp(\"\\\"\", \"g\"), val: \"&quot;\" }\n  ],\n  processEntities: true,\n  stopNodes: [],\n  // transformTagName: false,\n  // transformAttributeName: false,\n  oneListGroup: false\n};\n\nfunction Builder(options) {\n  this.options = Object.assign({}, defaultOptions, options);\n  if (this.options.ignoreAttributes || this.options.attributesGroupName) {\n    this.isAttribute = function(/*a*/) {\n      return false;\n    };\n  } else {\n    this.attrPrefixLen = this.options.attributeNamePrefix.length;\n    this.isAttribute = isAttribute;\n  }\n\n  this.processTextOrObjNode = processTextOrObjNode\n\n  if (this.options.format) {\n    this.indentate = indentate;\n    this.tagEndChar = '>\\n';\n    this.newLine = '\\n';\n  } else {\n    this.indentate = function() {\n      return '';\n    };\n    this.tagEndChar = '>';\n    this.newLine = '';\n  }\n}\n\nBuilder.prototype.build = function(jObj) {\n  if(this.options.preserveOrder){\n    return buildFromOrderedJs(jObj, this.options);\n  }else {\n    if(Array.isArray(jObj) && this.options.arrayNodeName && this.options.arrayNodeName.length > 1){\n      jObj = {\n        [this.options.arrayNodeName] : jObj\n      }\n    }\n    return this.j2x(jObj, 0).val;\n  }\n};\n\nBuilder.prototype.j2x = function(jObj, level) {\n  let attrStr = '';\n  let val = '';\n  for (let key in jObj) {\n    if (typeof jObj[key] === 'undefined') {\n      // supress undefined node\n    } else if (jObj[key] === null) {\n      if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n      else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n      // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n    } else if (jObj[key] instanceof Date) {\n      val += this.buildTextValNode(jObj[key], key, '', level);\n    } else if (typeof jObj[key] !== 'object') {\n      //premitive type\n      const attr = this.isAttribute(key);\n      if (attr) {\n        attrStr += this.buildAttrPairStr(attr, '' + jObj[key]);\n      }else {\n        //tag value\n        if (key === this.options.textNodeName) {\n          let newval = this.options.tagValueProcessor(key, '' + jObj[key]);\n          val += this.replaceEntitiesValue(newval);\n        } else {\n          val += this.buildTextValNode(jObj[key], key, '', level);\n        }\n      }\n    } else if (Array.isArray(jObj[key])) {\n      //repeated nodes\n      const arrLen = jObj[key].length;\n      let listTagVal = \"\";\n      for (let j = 0; j < arrLen; j++) {\n        const item = jObj[key][j];\n        if (typeof item === 'undefined') {\n          // supress undefined node\n        } else if (item === null) {\n          if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n          else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n          // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n        } else if (typeof item === 'object') {\n          if(this.options.oneListGroup ){\n            listTagVal += this.j2x(item, level + 1).val;\n          }else{\n            listTagVal += this.processTextOrObjNode(item, key, level)\n          }\n        } else {\n          listTagVal += this.buildTextValNode(item, key, '', level);\n        }\n      }\n      if(this.options.oneListGroup){\n        listTagVal = this.buildObjectNode(listTagVal, key, '', level);\n      }\n      val += listTagVal;\n    } else {\n      //nested node\n      if (this.options.attributesGroupName && key === this.options.attributesGroupName) {\n        const Ks = Object.keys(jObj[key]);\n        const L = Ks.length;\n        for (let j = 0; j < L; j++) {\n          attrStr += this.buildAttrPairStr(Ks[j], '' + jObj[key][Ks[j]]);\n        }\n      } else {\n        val += this.processTextOrObjNode(jObj[key], key, level)\n      }\n    }\n  }\n  return {attrStr: attrStr, val: val};\n};\n\nBuilder.prototype.buildAttrPairStr = function(attrName, val){\n  val = this.options.attributeValueProcessor(attrName, '' + val);\n  val = this.replaceEntitiesValue(val);\n  if (this.options.suppressBooleanAttributes && val === \"true\") {\n    return ' ' + attrName;\n  } else return ' ' + attrName + '=\"' + val + '\"';\n}\n\nfunction processTextOrObjNode (object, key, level) {\n  const result = this.j2x(object, level + 1);\n  if (object[this.options.textNodeName] !== undefined && Object.keys(object).length === 1) {\n    return this.buildTextValNode(object[this.options.textNodeName], key, result.attrStr, level);\n  } else {\n    return this.buildObjectNode(result.val, key, result.attrStr, level);\n  }\n}\n\nBuilder.prototype.buildObjectNode = function(val, key, attrStr, level) {\n  if(val === \"\"){\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }\n  }else{\n\n    let tagEndExp = '</' + key + this.tagEndChar;\n    let piClosingChar = \"\";\n    \n    if(key[0] === \"?\") {\n      piClosingChar = \"?\";\n      tagEndExp = \"\";\n    }\n  \n    if (attrStr && val.indexOf('<') === -1) {\n      return ( this.indentate(level) + '<' +  key + attrStr + piClosingChar + '>' + val + tagEndExp );\n    } else if (this.options.commentPropName !== false && key === this.options.commentPropName && piClosingChar.length === 0) {\n      return this.indentate(level) + `<!--${val}-->` + this.newLine;\n    }else {\n      return (\n        this.indentate(level) + '<' + key + attrStr + piClosingChar + this.tagEndChar +\n        val +\n        this.indentate(level) + tagEndExp    );\n    }\n  }\n}\n\nBuilder.prototype.closeTag = function(key){\n  let closeTag = \"\";\n  if(this.options.unpairedTags.indexOf(key) !== -1){ //unpaired\n    if(!this.options.suppressUnpairedNode) closeTag = \"/\"\n  }else if(this.options.suppressEmptyNode){ //empty\n    closeTag = \"/\";\n  }else{\n    closeTag = `></${key}`\n  }\n  return closeTag;\n}\n\nfunction buildEmptyObjNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildObjectNode(val, key, attrStr, level);\n  } else {\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return  this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n      // return this.buildTagStr(level,key, attrStr);\n    }\n  }\n}\n\nBuilder.prototype.buildTextValNode = function(val, key, attrStr, level) {\n  if (this.options.cdataPropName !== false && key === this.options.cdataPropName) {\n    return this.indentate(level) + `<![CDATA[${val}]]>` +  this.newLine;\n  }else if (this.options.commentPropName !== false && key === this.options.commentPropName) {\n    return this.indentate(level) + `<!--${val}-->` +  this.newLine;\n  }else if(key[0] === \"?\") {//PI tag\n    return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar; \n  }else{\n    let textValue = this.options.tagValueProcessor(key, val);\n    textValue = this.replaceEntitiesValue(textValue);\n  \n    if( textValue === ''){\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }else{\n      return this.indentate(level) + '<' + key + attrStr + '>' +\n         textValue +\n        '</' + key + this.tagEndChar;\n    }\n  }\n}\n\nBuilder.prototype.replaceEntitiesValue = function(textValue){\n  if(textValue && textValue.length > 0 && this.options.processEntities){\n    for (let i=0; i<this.options.entities.length; i++) {\n      const entity = this.options.entities[i];\n      textValue = textValue.replace(entity.regex, entity.val);\n    }\n  }\n  return textValue;\n}\n\nfunction indentate(level) {\n  return this.options.indentBy.repeat(level);\n}\n\nfunction isAttribute(name /*, options*/) {\n  if (name.startsWith(this.options.attributeNamePrefix)) {\n    return name.substr(this.attrPrefixLen);\n  } else {\n    return false;\n  }\n}\n\nmodule.exports = Builder;\n","const EOL = \"\\n\";\n\n/**\n * \n * @param {array} jArray \n * @param {any} options \n * @returns \n */\nfunction toXml(jArray, options) {\n    let indentation = \"\";\n    if (options.format && options.indentBy.length > 0) {\n        indentation = EOL;\n    }\n    return arrToStr(jArray, options, \"\", indentation);\n}\n\nfunction arrToStr(arr, options, jPath, indentation) {\n    let xmlStr = \"\";\n    let isPreviousElementTag = false;\n\n    for (let i = 0; i < arr.length; i++) {\n        const tagObj = arr[i];\n        const tagName = propName(tagObj);\n        let newJPath = \"\";\n        if (jPath.length === 0) newJPath = tagName\n        else newJPath = `${jPath}.${tagName}`;\n\n        if (tagName === options.textNodeName) {\n            let tagText = tagObj[tagName];\n            if (!isStopNode(newJPath, options)) {\n                tagText = options.tagValueProcessor(tagName, tagText);\n                tagText = replaceEntitiesValue(tagText, options);\n            }\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += tagText;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.cdataPropName) {\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += `<![CDATA[${tagObj[tagName][0][options.textNodeName]}]]>`;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.commentPropName) {\n            xmlStr += indentation + `<!--${tagObj[tagName][0][options.textNodeName]}-->`;\n            isPreviousElementTag = true;\n            continue;\n        } else if (tagName[0] === \"?\") {\n            const attStr = attr_to_str(tagObj[\":@\"], options);\n            const tempInd = tagName === \"?xml\" ? \"\" : indentation;\n            let piTextNodeName = tagObj[tagName][0][options.textNodeName];\n            piTextNodeName = piTextNodeName.length !== 0 ? \" \" + piTextNodeName : \"\"; //remove extra spacing\n            xmlStr += tempInd + `<${tagName}${piTextNodeName}${attStr}?>`;\n            isPreviousElementTag = true;\n            continue;\n        }\n        let newIdentation = indentation;\n        if (newIdentation !== \"\") {\n            newIdentation += options.indentBy;\n        }\n        const attStr = attr_to_str(tagObj[\":@\"], options);\n        const tagStart = indentation + `<${tagName}${attStr}`;\n        const tagValue = arrToStr(tagObj[tagName], options, newJPath, newIdentation);\n        if (options.unpairedTags.indexOf(tagName) !== -1) {\n            if (options.suppressUnpairedNode) xmlStr += tagStart + \">\";\n            else xmlStr += tagStart + \"/>\";\n        } else if ((!tagValue || tagValue.length === 0) && options.suppressEmptyNode) {\n            xmlStr += tagStart + \"/>\";\n        } else if (tagValue && tagValue.endsWith(\">\")) {\n            xmlStr += tagStart + `>${tagValue}${indentation}</${tagName}>`;\n        } else {\n            xmlStr += tagStart + \">\";\n            if (tagValue && indentation !== \"\" && (tagValue.includes(\"/>\") || tagValue.includes(\"</\"))) {\n                xmlStr += indentation + options.indentBy + tagValue + indentation;\n            } else {\n                xmlStr += tagValue;\n            }\n            xmlStr += `</${tagName}>`;\n        }\n        isPreviousElementTag = true;\n    }\n\n    return xmlStr;\n}\n\nfunction propName(obj) {\n    const keys = Object.keys(obj);\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if (key !== \":@\") return key;\n    }\n}\n\nfunction attr_to_str(attrMap, options) {\n    let attrStr = \"\";\n    if (attrMap && !options.ignoreAttributes) {\n        for (let attr in attrMap) {\n            let attrVal = options.attributeValueProcessor(attr, attrMap[attr]);\n            attrVal = replaceEntitiesValue(attrVal, options);\n            if (attrVal === true && options.suppressBooleanAttributes) {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}`;\n            } else {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}=\"${attrVal}\"`;\n            }\n        }\n    }\n    return attrStr;\n}\n\nfunction isStopNode(jPath, options) {\n    jPath = jPath.substr(0, jPath.length - options.textNodeName.length - 1);\n    let tagName = jPath.substr(jPath.lastIndexOf(\".\") + 1);\n    for (let index in options.stopNodes) {\n        if (options.stopNodes[index] === jPath || options.stopNodes[index] === \"*.\" + tagName) return true;\n    }\n    return false;\n}\n\nfunction replaceEntitiesValue(textValue, options) {\n    if (textValue && textValue.length > 0 && options.processEntities) {\n        for (let i = 0; i < options.entities.length; i++) {\n            const entity = options.entities[i];\n            textValue = textValue.replace(entity.regex, entity.val);\n        }\n    }\n    return textValue;\n}\nmodule.exports = toXml;\n","const util = require('../util');\n\n//TODO: handle comments\nfunction readDocType(xmlData, i){\n    \n    const entities = {};\n    if( xmlData[i + 3] === 'O' &&\n         xmlData[i + 4] === 'C' &&\n         xmlData[i + 5] === 'T' &&\n         xmlData[i + 6] === 'Y' &&\n         xmlData[i + 7] === 'P' &&\n         xmlData[i + 8] === 'E')\n    {    \n        i = i+9;\n        let angleBracketsCount = 1;\n        let hasBody = false, comment = false;\n        let exp = \"\";\n        for(;i<xmlData.length;i++){\n            if (xmlData[i] === '<' && !comment) { //Determine the tag type\n                if( hasBody && isEntity(xmlData, i)){\n                    i += 7; \n                    [entityName, val,i] = readEntityExp(xmlData,i+1);\n                    if(val.indexOf(\"&\") === -1) //Parameter entities are not supported\n                        entities[ validateEntityName(entityName) ] = {\n                            regx : RegExp( `&${entityName};`,\"g\"),\n                            val: val\n                        };\n                }\n                else if( hasBody && isElement(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isAttlist(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isNotation(xmlData, i)) i += 9;//Not supported\n                else if( isComment)                         comment = true;\n                else                                        throw new Error(\"Invalid DOCTYPE\");\n\n                angleBracketsCount++;\n                exp = \"\";\n            } else if (xmlData[i] === '>') { //Read tag content\n                if(comment){\n                    if( xmlData[i - 1] === \"-\" && xmlData[i - 2] === \"-\"){\n                        comment = false;\n                        angleBracketsCount--;\n                    }\n                }else{\n                    angleBracketsCount--;\n                }\n                if (angleBracketsCount === 0) {\n                  break;\n                }\n            }else if( xmlData[i] === '['){\n                hasBody = true;\n            }else{\n                exp += xmlData[i];\n            }\n        }\n        if(angleBracketsCount !== 0){\n            throw new Error(`Unclosed DOCTYPE`);\n        }\n    }else{\n        throw new Error(`Invalid Tag instead of DOCTYPE`);\n    }\n    return {entities, i};\n}\n\nfunction readEntityExp(xmlData,i){\n    //External entities are not supported\n    //    <!ENTITY ext SYSTEM \"http://normal-website.com\" >\n\n    //Parameter entities are not supported\n    //    <!ENTITY entityname \"&anotherElement;\">\n\n    //Internal entities are supported\n    //    <!ENTITY entityname \"replacement text\">\n    \n    //read EntityName\n    let entityName = \"\";\n    for (; i < xmlData.length && (xmlData[i] !== \"'\" && xmlData[i] !== '\"' ); i++) {\n        // if(xmlData[i] === \" \") continue;\n        // else \n        entityName += xmlData[i];\n    }\n    entityName = entityName.trim();\n    if(entityName.indexOf(\" \") !== -1) throw new Error(\"External entites are not supported\");\n\n    //read Entity Value\n    const startChar = xmlData[i++];\n    let val = \"\"\n    for (; i < xmlData.length && xmlData[i] !== startChar ; i++) {\n        val += xmlData[i];\n    }\n    return [entityName, val, i];\n}\n\nfunction isComment(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === '-' &&\n    xmlData[i+3] === '-') return true\n    return false\n}\nfunction isEntity(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'N' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'I' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'Y') return true\n    return false\n}\nfunction isElement(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'L' &&\n    xmlData[i+4] === 'E' &&\n    xmlData[i+5] === 'M' &&\n    xmlData[i+6] === 'E' &&\n    xmlData[i+7] === 'N' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\n\nfunction isAttlist(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'A' &&\n    xmlData[i+3] === 'T' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'L' &&\n    xmlData[i+6] === 'I' &&\n    xmlData[i+7] === 'S' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\nfunction isNotation(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'N' &&\n    xmlData[i+3] === 'O' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'A' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'I' &&\n    xmlData[i+8] === 'O' &&\n    xmlData[i+9] === 'N') return true\n    return false\n}\n\nfunction validateEntityName(name){\n    if (util.isName(name))\n\treturn name;\n    else\n        throw new Error(`Invalid entity name ${name}`);\n}\n\nmodule.exports = readDocType;\n","\nconst defaultOptions = {\n    preserveOrder: false,\n    attributeNamePrefix: '@_',\n    attributesGroupName: false,\n    textNodeName: '#text',\n    ignoreAttributes: true,\n    removeNSPrefix: false, // remove NS from tag name or attribute name if true\n    allowBooleanAttributes: false, //a tag can have attributes without any value\n    //ignoreRootElement : false,\n    parseTagValue: true,\n    parseAttributeValue: false,\n    trimValues: true, //Trim string values of tag and attributes\n    cdataPropName: false,\n    numberParseOptions: {\n      hex: true,\n      leadingZeros: true,\n      eNotation: true\n    },\n    tagValueProcessor: function(tagName, val) {\n      return val;\n    },\n    attributeValueProcessor: function(attrName, val) {\n      return val;\n    },\n    stopNodes: [], //nested tags will not be parsed even for errors\n    alwaysCreateTextNode: false,\n    isArray: () => false,\n    commentPropName: false,\n    unpairedTags: [],\n    processEntities: true,\n    htmlEntities: false,\n    ignoreDeclaration: false,\n    ignorePiTags: false,\n    transformTagName: false,\n    transformAttributeName: false,\n    updateTag: function(tagName, jPath, attrs){\n      return tagName\n    },\n    // skipEmptyListItem: false\n};\n   \nconst buildOptions = function(options) {\n    return Object.assign({}, defaultOptions, options);\n};\n\nexports.buildOptions = buildOptions;\nexports.defaultOptions = defaultOptions;","'use strict';\n///@ts-check\n\nconst util = require('../util');\nconst xmlNode = require('./xmlNode');\nconst readDocType = require(\"./DocTypeReader\");\nconst toNumber = require(\"strnum\");\n\nconst regx =\n  '<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\\\/)(NAME)\\\\s*>))([^<]*)'\n  .replace(/NAME/g, util.nameRegexp);\n\n//const tagsRegx = new RegExp(\"<(\\\\/?[\\\\w:\\\\-\\._]+)([^>]*)>(\\\\s*\"+cdataRegx+\")*([^<]+)?\",\"g\");\n//const tagsRegx = new RegExp(\"<(\\\\/?)((\\\\w*:)?([\\\\w:\\\\-\\._]+))([^>]*)>([^<]*)(\"+cdataRegx+\"([^<]*))*([^<]+)?\",\"g\");\n\nclass OrderedObjParser{\n  constructor(options){\n    this.options = options;\n    this.currentNode = null;\n    this.tagsNodeStack = [];\n    this.docTypeEntities = {};\n    this.lastEntities = {\n      \"apos\" : { regex: /&(apos|#39|#x27);/g, val : \"'\"},\n      \"gt\" : { regex: /&(gt|#62|#x3E);/g, val : \">\"},\n      \"lt\" : { regex: /&(lt|#60|#x3C);/g, val : \"<\"},\n      \"quot\" : { regex: /&(quot|#34|#x22);/g, val : \"\\\"\"},\n    };\n    this.ampEntity = { regex: /&(amp|#38|#x26);/g, val : \"&\"};\n    this.htmlEntities = {\n      \"space\": { regex: /&(nbsp|#160);/g, val: \" \" },\n      // \"lt\" : { regex: /&(lt|#60);/g, val: \"<\" },\n      // \"gt\" : { regex: /&(gt|#62);/g, val: \">\" },\n      // \"amp\" : { regex: /&(amp|#38);/g, val: \"&\" },\n      // \"quot\" : { regex: /&(quot|#34);/g, val: \"\\\"\" },\n      // \"apos\" : { regex: /&(apos|#39);/g, val: \"'\" },\n      \"cent\" : { regex: /&(cent|#162);/g, val: \"\" },\n      \"pound\" : { regex: /&(pound|#163);/g, val: \"\" },\n      \"yen\" : { regex: /&(yen|#165);/g, val: \"\" },\n      \"euro\" : { regex: /&(euro|#8364);/g, val: \"\" },\n      \"copyright\" : { regex: /&(copy|#169);/g, val: \"\" },\n      \"reg\" : { regex: /&(reg|#174);/g, val: \"\" },\n      \"inr\" : { regex: /&(inr|#8377);/g, val: \"\" },\n    };\n    this.addExternalEntities = addExternalEntities;\n    this.parseXml = parseXml;\n    this.parseTextData = parseTextData;\n    this.resolveNameSpace = resolveNameSpace;\n    this.buildAttributesMap = buildAttributesMap;\n    this.isItStopNode = isItStopNode;\n    this.replaceEntitiesValue = replaceEntitiesValue;\n    this.readStopNodeData = readStopNodeData;\n    this.saveTextToParentTag = saveTextToParentTag;\n    this.addChild = addChild;\n  }\n\n}\n\nfunction addExternalEntities(externalEntities){\n  const entKeys = Object.keys(externalEntities);\n  for (let i = 0; i < entKeys.length; i++) {\n    const ent = entKeys[i];\n    this.lastEntities[ent] = {\n       regex: new RegExp(\"&\"+ent+\";\",\"g\"),\n       val : externalEntities[ent]\n    }\n  }\n}\n\n/**\n * @param {string} val\n * @param {string} tagName\n * @param {string} jPath\n * @param {boolean} dontTrim\n * @param {boolean} hasAttributes\n * @param {boolean} isLeafNode\n * @param {boolean} escapeEntities\n */\nfunction parseTextData(val, tagName, jPath, dontTrim, hasAttributes, isLeafNode, escapeEntities) {\n  if (val !== undefined) {\n    if (this.options.trimValues && !dontTrim) {\n      val = val.trim();\n    }\n    if(val.length > 0){\n      if(!escapeEntities) val = this.replaceEntitiesValue(val);\n      \n      const newval = this.options.tagValueProcessor(tagName, val, jPath, hasAttributes, isLeafNode);\n      if(newval === null || newval === undefined){\n        //don't parse\n        return val;\n      }else if(typeof newval !== typeof val || newval !== val){\n        //overwrite\n        return newval;\n      }else if(this.options.trimValues){\n        return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n      }else{\n        const trimmedVal = val.trim();\n        if(trimmedVal === val){\n          return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n        }else{\n          return val;\n        }\n      }\n    }\n  }\n}\n\nfunction resolveNameSpace(tagname) {\n  if (this.options.removeNSPrefix) {\n    const tags = tagname.split(':');\n    const prefix = tagname.charAt(0) === '/' ? '/' : '';\n    if (tags[0] === 'xmlns') {\n      return '';\n    }\n    if (tags.length === 2) {\n      tagname = prefix + tags[1];\n    }\n  }\n  return tagname;\n}\n\n//TODO: change regex to capture NS\n//const attrsRegx = new RegExp(\"([\\\\w\\\\-\\\\.\\\\:]+)\\\\s*=\\\\s*(['\\\"])((.|\\n)*?)\\\\2\",\"gm\");\nconst attrsRegx = new RegExp('([^\\\\s=]+)\\\\s*(=\\\\s*([\\'\"])([\\\\s\\\\S]*?)\\\\3)?', 'gm');\n\nfunction buildAttributesMap(attrStr, jPath, tagName) {\n  if (!this.options.ignoreAttributes && typeof attrStr === 'string') {\n    // attrStr = attrStr.replace(/\\r?\\n/g, ' ');\n    //attrStr = attrStr || attrStr.trim();\n\n    const matches = util.getAllMatches(attrStr, attrsRegx);\n    const len = matches.length; //don't make it inline\n    const attrs = {};\n    for (let i = 0; i < len; i++) {\n      const attrName = this.resolveNameSpace(matches[i][1]);\n      let oldVal = matches[i][4];\n      let aName = this.options.attributeNamePrefix + attrName;\n      if (attrName.length) {\n        if (this.options.transformAttributeName) {\n          aName = this.options.transformAttributeName(aName);\n        }\n        if(aName === \"__proto__\") aName  = \"#__proto__\";\n        if (oldVal !== undefined) {\n          if (this.options.trimValues) {\n            oldVal = oldVal.trim();\n          }\n          oldVal = this.replaceEntitiesValue(oldVal);\n          const newVal = this.options.attributeValueProcessor(attrName, oldVal, jPath);\n          if(newVal === null || newVal === undefined){\n            //don't parse\n            attrs[aName] = oldVal;\n          }else if(typeof newVal !== typeof oldVal || newVal !== oldVal){\n            //overwrite\n            attrs[aName] = newVal;\n          }else{\n            //parse\n            attrs[aName] = parseValue(\n              oldVal,\n              this.options.parseAttributeValue,\n              this.options.numberParseOptions\n            );\n          }\n        } else if (this.options.allowBooleanAttributes) {\n          attrs[aName] = true;\n        }\n      }\n    }\n    if (!Object.keys(attrs).length) {\n      return;\n    }\n    if (this.options.attributesGroupName) {\n      const attrCollection = {};\n      attrCollection[this.options.attributesGroupName] = attrs;\n      return attrCollection;\n    }\n    return attrs\n  }\n}\n\nconst parseXml = function(xmlData) {\n  xmlData = xmlData.replace(/\\r\\n?/g, \"\\n\"); //TODO: remove this line\n  const xmlObj = new xmlNode('!xml');\n  let currentNode = xmlObj;\n  let textData = \"\";\n  let jPath = \"\";\n  for(let i=0; i< xmlData.length; i++){//for each char in XML data\n    const ch = xmlData[i];\n    if(ch === '<'){\n      // const nextIndex = i+1;\n      // const _2ndChar = xmlData[nextIndex];\n      if( xmlData[i+1] === '/') {//Closing Tag\n        const closeIndex = findClosingIndex(xmlData, \">\", i, \"Closing Tag is not closed.\")\n        let tagName = xmlData.substring(i+2,closeIndex).trim();\n\n        if(this.options.removeNSPrefix){\n          const colonIndex = tagName.indexOf(\":\");\n          if(colonIndex !== -1){\n            tagName = tagName.substr(colonIndex+1);\n          }\n        }\n\n        if(this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n\n        if(currentNode){\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        }\n\n        //check if last tag of nested tag was unpaired tag\n        const lastTagName = jPath.substring(jPath.lastIndexOf(\".\")+1);\n        if(tagName && this.options.unpairedTags.indexOf(tagName) !== -1 ){\n          throw new Error(`Unpaired tag can not be used as closing tag: </${tagName}>`);\n        }\n        let propIndex = 0\n        if(lastTagName && this.options.unpairedTags.indexOf(lastTagName) !== -1 ){\n          propIndex = jPath.lastIndexOf('.', jPath.lastIndexOf('.')-1)\n          this.tagsNodeStack.pop();\n        }else{\n          propIndex = jPath.lastIndexOf(\".\");\n        }\n        jPath = jPath.substring(0, propIndex);\n\n        currentNode = this.tagsNodeStack.pop();//avoid recursion, set the parent tag scope\n        textData = \"\";\n        i = closeIndex;\n      } else if( xmlData[i+1] === '?') {\n\n        let tagData = readTagExp(xmlData,i, false, \"?>\");\n        if(!tagData) throw new Error(\"Pi Tag is not closed.\");\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        if( (this.options.ignoreDeclaration && tagData.tagName === \"?xml\") || this.options.ignorePiTags){\n\n        }else{\n  \n          const childNode = new xmlNode(tagData.tagName);\n          childNode.add(this.options.textNodeName, \"\");\n          \n          if(tagData.tagName !== tagData.tagExp && tagData.attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagData.tagExp, jPath, tagData.tagName);\n          }\n          this.addChild(currentNode, childNode, jPath)\n\n        }\n\n\n        i = tagData.closeIndex + 1;\n      } else if(xmlData.substr(i + 1, 3) === '!--') {\n        const endIndex = findClosingIndex(xmlData, \"-->\", i+4, \"Comment is not closed.\")\n        if(this.options.commentPropName){\n          const comment = xmlData.substring(i + 4, endIndex - 2);\n\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n          currentNode.add(this.options.commentPropName, [ { [this.options.textNodeName] : comment } ]);\n        }\n        i = endIndex;\n      } else if( xmlData.substr(i + 1, 2) === '!D') {\n        const result = readDocType(xmlData, i);\n        this.docTypeEntities = result.entities;\n        i = result.i;\n      }else if(xmlData.substr(i + 1, 2) === '![') {\n        const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"CDATA is not closed.\") - 2;\n        const tagExp = xmlData.substring(i + 9,closeIndex);\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n        //cdata should be set even if it is 0 length string\n        if(this.options.cdataPropName){\n          // let val = this.parseTextData(tagExp, this.options.cdataPropName, jPath + \".\" + this.options.cdataPropName, true, false, true);\n          // if(!val) val = \"\";\n          currentNode.add(this.options.cdataPropName, [ { [this.options.textNodeName] : tagExp } ]);\n        }else{\n          let val = this.parseTextData(tagExp, currentNode.tagname, jPath, true, false, true);\n          if(val == undefined) val = \"\";\n          currentNode.add(this.options.textNodeName, val);\n        }\n        \n        i = closeIndex + 2;\n      }else {//Opening tag\n        let result = readTagExp(xmlData,i, this.options.removeNSPrefix);\n        let tagName= result.tagName;\n        let tagExp = result.tagExp;\n        let attrExpPresent = result.attrExpPresent;\n        let closeIndex = result.closeIndex;\n\n        if (this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n        \n        //save text as child node\n        if (currentNode && textData) {\n          if(currentNode.tagname !== '!xml'){\n            //when nested tag is found\n            textData = this.saveTextToParentTag(textData, currentNode, jPath, false);\n          }\n        }\n\n        //check if last tag was unpaired tag\n        const lastTag = currentNode;\n        if(lastTag && this.options.unpairedTags.indexOf(lastTag.tagname) !== -1 ){\n          currentNode = this.tagsNodeStack.pop();\n          jPath = jPath.substring(0, jPath.lastIndexOf(\".\"));\n        }\n        if(tagName !== xmlObj.tagname){\n          jPath += jPath ? \".\" + tagName : tagName;\n        }\n        if (this.isItStopNode(this.options.stopNodes, jPath, tagName)) { //TODO: namespace\n          let tagContent = \"\";\n          //self-closing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            i = result.closeIndex;\n          }\n          //unpaired tag\n          else if(this.options.unpairedTags.indexOf(tagName) !== -1){\n            i = result.closeIndex;\n          }\n          //normal tag\n          else{\n            //read until closing tag is found\n            const result = this.readStopNodeData(xmlData, tagName, closeIndex + 1);\n            if(!result) throw new Error(`Unexpected end of ${tagName}`);\n            i = result.i;\n            tagContent = result.tagContent;\n          }\n\n          const childNode = new xmlNode(tagName);\n          if(tagName !== tagExp && attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n          }\n          if(tagContent) {\n            tagContent = this.parseTextData(tagContent, tagName, jPath, true, attrExpPresent, true, true);\n          }\n          \n          jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          childNode.add(this.options.textNodeName, tagContent);\n          \n          this.addChild(currentNode, childNode, jPath)\n        }else{\n  //selfClosing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            if(tagName[tagName.length - 1] === \"/\"){ //remove trailing '/'\n              tagName = tagName.substr(0, tagName.length - 1);\n              tagExp = tagName;\n            }else{\n              tagExp = tagExp.substr(0, tagExp.length - 1);\n            }\n            \n            if(this.options.transformTagName) {\n              tagName = this.options.transformTagName(tagName);\n            }\n\n            const childNode = new xmlNode(tagName);\n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          }\n    //opening tag\n          else{\n            const childNode = new xmlNode( tagName);\n            this.tagsNodeStack.push(currentNode);\n            \n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            currentNode = childNode;\n          }\n          textData = \"\";\n          i = closeIndex;\n        }\n      }\n    }else{\n      textData += xmlData[i];\n    }\n  }\n  return xmlObj.child;\n}\n\nfunction addChild(currentNode, childNode, jPath){\n  const result = this.options.updateTag(childNode.tagname, jPath, childNode[\":@\"])\n  if(result === false){\n  }else if(typeof result === \"string\"){\n    childNode.tagname = result\n    currentNode.addChild(childNode);\n  }else{\n    currentNode.addChild(childNode);\n  }\n}\n\nconst replaceEntitiesValue = function(val){\n\n  if(this.options.processEntities){\n    for(let entityName in this.docTypeEntities){\n      const entity = this.docTypeEntities[entityName];\n      val = val.replace( entity.regx, entity.val);\n    }\n    for(let entityName in this.lastEntities){\n      const entity = this.lastEntities[entityName];\n      val = val.replace( entity.regex, entity.val);\n    }\n    if(this.options.htmlEntities){\n      for(let entityName in this.htmlEntities){\n        const entity = this.htmlEntities[entityName];\n        val = val.replace( entity.regex, entity.val);\n      }\n    }\n    val = val.replace( this.ampEntity.regex, this.ampEntity.val);\n  }\n  return val;\n}\nfunction saveTextToParentTag(textData, currentNode, jPath, isLeafNode) {\n  if (textData) { //store previously collected data as textNode\n    if(isLeafNode === undefined) isLeafNode = Object.keys(currentNode.child).length === 0\n    \n    textData = this.parseTextData(textData,\n      currentNode.tagname,\n      jPath,\n      false,\n      currentNode[\":@\"] ? Object.keys(currentNode[\":@\"]).length !== 0 : false,\n      isLeafNode);\n\n    if (textData !== undefined && textData !== \"\")\n      currentNode.add(this.options.textNodeName, textData);\n    textData = \"\";\n  }\n  return textData;\n}\n\n//TODO: use jPath to simplify the logic\n/**\n * \n * @param {string[]} stopNodes \n * @param {string} jPath\n * @param {string} currentTagName \n */\nfunction isItStopNode(stopNodes, jPath, currentTagName){\n  const allNodesExp = \"*.\" + currentTagName;\n  for (const stopNodePath in stopNodes) {\n    const stopNodeExp = stopNodes[stopNodePath];\n    if( allNodesExp === stopNodeExp || jPath === stopNodeExp  ) return true;\n  }\n  return false;\n}\n\n/**\n * Returns the tag Expression and where it is ending handling single-double quotes situation\n * @param {string} xmlData \n * @param {number} i starting index\n * @returns \n */\nfunction tagExpWithClosingIndex(xmlData, i, closingChar = \">\"){\n  let attrBoundary;\n  let tagExp = \"\";\n  for (let index = i; index < xmlData.length; index++) {\n    let ch = xmlData[index];\n    if (attrBoundary) {\n        if (ch === attrBoundary) attrBoundary = \"\";//reset\n    } else if (ch === '\"' || ch === \"'\") {\n        attrBoundary = ch;\n    } else if (ch === closingChar[0]) {\n      if(closingChar[1]){\n        if(xmlData[index + 1] === closingChar[1]){\n          return {\n            data: tagExp,\n            index: index\n          }\n        }\n      }else{\n        return {\n          data: tagExp,\n          index: index\n        }\n      }\n    } else if (ch === '\\t') {\n      ch = \" \"\n    }\n    tagExp += ch;\n  }\n}\n\nfunction findClosingIndex(xmlData, str, i, errMsg){\n  const closingIndex = xmlData.indexOf(str, i);\n  if(closingIndex === -1){\n    throw new Error(errMsg)\n  }else{\n    return closingIndex + str.length - 1;\n  }\n}\n\nfunction readTagExp(xmlData,i, removeNSPrefix, closingChar = \">\"){\n  const result = tagExpWithClosingIndex(xmlData, i+1, closingChar);\n  if(!result) return;\n  let tagExp = result.data;\n  const closeIndex = result.index;\n  const separatorIndex = tagExp.search(/\\s/);\n  let tagName = tagExp;\n  let attrExpPresent = true;\n  if(separatorIndex !== -1){//separate tag name and attributes expression\n    tagName = tagExp.substr(0, separatorIndex).replace(/\\s\\s*$/, '');\n    tagExp = tagExp.substr(separatorIndex + 1);\n  }\n\n  if(removeNSPrefix){\n    const colonIndex = tagName.indexOf(\":\");\n    if(colonIndex !== -1){\n      tagName = tagName.substr(colonIndex+1);\n      attrExpPresent = tagName !== result.data.substr(colonIndex + 1);\n    }\n  }\n\n  return {\n    tagName: tagName,\n    tagExp: tagExp,\n    closeIndex: closeIndex,\n    attrExpPresent: attrExpPresent,\n  }\n}\n/**\n * find paired tag for a stop node\n * @param {string} xmlData \n * @param {string} tagName \n * @param {number} i \n */\nfunction readStopNodeData(xmlData, tagName, i){\n  const startIndex = i;\n  // Starting at 1 since we already have an open tag\n  let openTagCount = 1;\n\n  for (; i < xmlData.length; i++) {\n    if( xmlData[i] === \"<\"){ \n      if (xmlData[i+1] === \"/\") {//close tag\n          const closeIndex = findClosingIndex(xmlData, \">\", i, `${tagName} is not closed`);\n          let closeTagName = xmlData.substring(i+2,closeIndex).trim();\n          if(closeTagName === tagName){\n            openTagCount--;\n            if (openTagCount === 0) {\n              return {\n                tagContent: xmlData.substring(startIndex, i),\n                i : closeIndex\n              }\n            }\n          }\n          i=closeIndex;\n        } else if(xmlData[i+1] === '?') { \n          const closeIndex = findClosingIndex(xmlData, \"?>\", i+1, \"StopNode is not closed.\")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 3) === '!--') { \n          const closeIndex = findClosingIndex(xmlData, \"-->\", i+3, \"StopNode is not closed.\")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 2) === '![') { \n          const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"StopNode is not closed.\") - 2;\n          i=closeIndex;\n        } else {\n          const tagData = readTagExp(xmlData, i, '>')\n\n          if (tagData) {\n            const openTagName = tagData && tagData.tagName;\n            if (openTagName === tagName && tagData.tagExp[tagData.tagExp.length-1] !== \"/\") {\n              openTagCount++;\n            }\n            i=tagData.closeIndex;\n          }\n        }\n      }\n  }//end for loop\n}\n\nfunction parseValue(val, shouldParse, options) {\n  if (shouldParse && typeof val === 'string') {\n    //console.log(options)\n    const newval = val.trim();\n    if(newval === 'true' ) return true;\n    else if(newval === 'false' ) return false;\n    else return toNumber(val, options);\n  } else {\n    if (util.isExist(val)) {\n      return val;\n    } else {\n      return '';\n    }\n  }\n}\n\n\nmodule.exports = OrderedObjParser;\n","const { buildOptions} = require(\"./OptionsBuilder\");\nconst OrderedObjParser = require(\"./OrderedObjParser\");\nconst { prettify} = require(\"./node2json\");\nconst validator = require('../validator');\n\nclass XMLParser{\n    \n    constructor(options){\n        this.externalEntities = {};\n        this.options = buildOptions(options);\n        \n    }\n    /**\n     * Parse XML dats to JS object \n     * @param {string|Buffer} xmlData \n     * @param {boolean|Object} validationOption \n     */\n    parse(xmlData,validationOption){\n        if(typeof xmlData === \"string\"){\n        }else if( xmlData.toString){\n            xmlData = xmlData.toString();\n        }else{\n            throw new Error(\"XML data is accepted in String or Bytes[] form.\")\n        }\n        if( validationOption){\n            if(validationOption === true) validationOption = {}; //validate with default options\n            \n            const result = validator.validate(xmlData, validationOption);\n            if (result !== true) {\n              throw Error( `${result.err.msg}:${result.err.line}:${result.err.col}` )\n            }\n          }\n        const orderedObjParser = new OrderedObjParser(this.options);\n        orderedObjParser.addExternalEntities(this.externalEntities);\n        const orderedResult = orderedObjParser.parseXml(xmlData);\n        if(this.options.preserveOrder || orderedResult === undefined) return orderedResult;\n        else return prettify(orderedResult, this.options);\n    }\n\n    /**\n     * Add Entity which is not by default supported by this library\n     * @param {string} key \n     * @param {string} value \n     */\n    addEntity(key, value){\n        if(value.indexOf(\"&\") !== -1){\n            throw new Error(\"Entity value can't have '&'\")\n        }else if(key.indexOf(\"&\") !== -1 || key.indexOf(\";\") !== -1){\n            throw new Error(\"An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'\")\n        }else if(value === \"&\"){\n            throw new Error(\"An entity with value '&' is not permitted\");\n        }else{\n            this.externalEntities[key] = value;\n        }\n    }\n}\n\nmodule.exports = XMLParser;","'use strict';\n\n/**\n * \n * @param {array} node \n * @param {any} options \n * @returns \n */\nfunction prettify(node, options){\n  return compress( node, options);\n}\n\n/**\n * \n * @param {array} arr \n * @param {object} options \n * @param {string} jPath \n * @returns object\n */\nfunction compress(arr, options, jPath){\n  let text;\n  const compressedObj = {};\n  for (let i = 0; i < arr.length; i++) {\n    const tagObj = arr[i];\n    const property = propName(tagObj);\n    let newJpath = \"\";\n    if(jPath === undefined) newJpath = property;\n    else newJpath = jPath + \".\" + property;\n\n    if(property === options.textNodeName){\n      if(text === undefined) text = tagObj[property];\n      else text += \"\" + tagObj[property];\n    }else if(property === undefined){\n      continue;\n    }else if(tagObj[property]){\n      \n      let val = compress(tagObj[property], options, newJpath);\n      const isLeaf = isLeafTag(val, options);\n\n      if(tagObj[\":@\"]){\n        assignAttributes( val, tagObj[\":@\"], newJpath, options);\n      }else if(Object.keys(val).length === 1 && val[options.textNodeName] !== undefined && !options.alwaysCreateTextNode){\n        val = val[options.textNodeName];\n      }else if(Object.keys(val).length === 0){\n        if(options.alwaysCreateTextNode) val[options.textNodeName] = \"\";\n        else val = \"\";\n      }\n\n      if(compressedObj[property] !== undefined && compressedObj.hasOwnProperty(property)) {\n        if(!Array.isArray(compressedObj[property])) {\n            compressedObj[property] = [ compressedObj[property] ];\n        }\n        compressedObj[property].push(val);\n      }else{\n        //TODO: if a node is not an array, then check if it should be an array\n        //also determine if it is a leaf node\n        if (options.isArray(property, newJpath, isLeaf )) {\n          compressedObj[property] = [val];\n        }else{\n          compressedObj[property] = val;\n        }\n      }\n    }\n    \n  }\n  // if(text && text.length > 0) compressedObj[options.textNodeName] = text;\n  if(typeof text === \"string\"){\n    if(text.length > 0) compressedObj[options.textNodeName] = text;\n  }else if(text !== undefined) compressedObj[options.textNodeName] = text;\n  return compressedObj;\n}\n\nfunction propName(obj){\n  const keys = Object.keys(obj);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    if(key !== \":@\") return key;\n  }\n}\n\nfunction assignAttributes(obj, attrMap, jpath, options){\n  if (attrMap) {\n    const keys = Object.keys(attrMap);\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      const atrrName = keys[i];\n      if (options.isArray(atrrName, jpath + \".\" + atrrName, true, true)) {\n        obj[atrrName] = [ attrMap[atrrName] ];\n      } else {\n        obj[atrrName] = attrMap[atrrName];\n      }\n    }\n  }\n}\n\nfunction isLeafTag(obj, options){\n  const { textNodeName } = options;\n  const propCount = Object.keys(obj).length;\n  \n  if (propCount === 0) {\n    return true;\n  }\n\n  if (\n    propCount === 1 &&\n    (obj[textNodeName] || typeof obj[textNodeName] === \"boolean\" || obj[textNodeName] === 0)\n  ) {\n    return true;\n  }\n\n  return false;\n}\nexports.prettify = prettify;\n","'use strict';\n\nclass XmlNode{\n  constructor(tagname) {\n    this.tagname = tagname;\n    this.child = []; //nested tags, text, cdata, comments in order\n    this[\":@\"] = {}; //attributes map\n  }\n  add(key,val){\n    // this.child.push( {name : key, val: val, isCdata: isCdata });\n    if(key === \"__proto__\") key = \"#__proto__\";\n    this.child.push( {[key]: val });\n  }\n  addChild(node) {\n    if(node.tagname === \"__proto__\") node.tagname = \"#__proto__\";\n    if(node[\":@\"] && Object.keys(node[\":@\"]).length > 0){\n      this.child.push( { [node.tagname]: node.child, [\":@\"]: node[\":@\"] });\n    }else{\n      this.child.push( { [node.tagname]: node.child });\n    }\n  };\n};\n\n\nmodule.exports = XmlNode;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * FNV-1a hash generation init value.\n * It's exposed, because this allows user to override it.\n * More info: https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function#FNV_hash_parameters\n *\n * @type {number}\n */\nhash.BASE = 0x811c9dc5;\n/**\n * Generates 32 bit FNV-1a hash from the given string.\n * As explained here: http://isthe.com/chongo/tech/comp/fnv/\n *\n * @param s {string} String to generate hash from.\n * @param [h] {number} FNV-1a hash generation init value.\n * @returns {number} The result integer hash.\n */\nfunction hash(s, h = hash.BASE) {\n    const l = s.length;\n    for (let i = 0; i < l; i++) {\n        h ^= s.charCodeAt(i);\n        h += (h << 1) + (h << 4) + (h << 7) + (h << 8) + (h << 24);\n    }\n    return h >>> 0;\n}\nexports.default = hash;\nmodule.exports = hash;\n","/* eslint-env browser */\nmodule.exports = typeof self == 'object' ? self.FormData : window.FormData;\n","import { __assign } from \"tslib\";\nimport { parse } from 'graphql';\nvar docCache = new Map();\nvar fragmentSourceMap = new Map();\nvar printFragmentWarnings = true;\nvar experimentalFragmentVariables = false;\nfunction normalize(string) {\n    return string.replace(/[\\s,]+/g, ' ').trim();\n}\nfunction cacheKeyFromLoc(loc) {\n    return normalize(loc.source.body.substring(loc.start, loc.end));\n}\nfunction processFragments(ast) {\n    var seenKeys = new Set();\n    var definitions = [];\n    ast.definitions.forEach(function (fragmentDefinition) {\n        if (fragmentDefinition.kind === 'FragmentDefinition') {\n            var fragmentName = fragmentDefinition.name.value;\n            var sourceKey = cacheKeyFromLoc(fragmentDefinition.loc);\n            var sourceKeySet = fragmentSourceMap.get(fragmentName);\n            if (sourceKeySet && !sourceKeySet.has(sourceKey)) {\n                if (printFragmentWarnings) {\n                    console.warn(\"Warning: fragment with name \" + fragmentName + \" already exists.\\n\"\n                        + \"graphql-tag enforces all fragment names across your application to be unique; read more about\\n\"\n                        + \"this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names\");\n                }\n            }\n            else if (!sourceKeySet) {\n                fragmentSourceMap.set(fragmentName, sourceKeySet = new Set);\n            }\n            sourceKeySet.add(sourceKey);\n            if (!seenKeys.has(sourceKey)) {\n                seenKeys.add(sourceKey);\n                definitions.push(fragmentDefinition);\n            }\n        }\n        else {\n            definitions.push(fragmentDefinition);\n        }\n    });\n    return __assign(__assign({}, ast), { definitions: definitions });\n}\nfunction stripLoc(doc) {\n    var workSet = new Set(doc.definitions);\n    workSet.forEach(function (node) {\n        if (node.loc)\n            delete node.loc;\n        Object.keys(node).forEach(function (key) {\n            var value = node[key];\n            if (value && typeof value === 'object') {\n                workSet.add(value);\n            }\n        });\n    });\n    var loc = doc.loc;\n    if (loc) {\n        delete loc.startToken;\n        delete loc.endToken;\n    }\n    return doc;\n}\nfunction parseDocument(source) {\n    var cacheKey = normalize(source);\n    if (!docCache.has(cacheKey)) {\n        var parsed = parse(source, {\n            experimentalFragmentVariables: experimentalFragmentVariables,\n            allowLegacyFragmentVariables: experimentalFragmentVariables\n        });\n        if (!parsed || parsed.kind !== 'Document') {\n            throw new Error('Not a valid GraphQL document.');\n        }\n        docCache.set(cacheKey, stripLoc(processFragments(parsed)));\n    }\n    return docCache.get(cacheKey);\n}\nexport function gql(literals) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (typeof literals === 'string') {\n        literals = [literals];\n    }\n    var result = literals[0];\n    args.forEach(function (arg, i) {\n        if (arg && arg.kind === 'Document') {\n            result += arg.loc.source.body;\n        }\n        else {\n            result += arg;\n        }\n        result += literals[i + 1];\n    });\n    return parseDocument(result);\n}\nexport function resetCaches() {\n    docCache.clear();\n    fragmentSourceMap.clear();\n}\nexport function disableFragmentWarnings() {\n    printFragmentWarnings = false;\n}\nexport function enableExperimentalFragmentVariables() {\n    experimentalFragmentVariables = true;\n}\nexport function disableExperimentalFragmentVariables() {\n    experimentalFragmentVariables = false;\n}\nvar extras = {\n    gql: gql,\n    resetCaches: resetCaches,\n    disableFragmentWarnings: disableFragmentWarnings,\n    enableExperimentalFragmentVariables: enableExperimentalFragmentVariables,\n    disableExperimentalFragmentVariables: disableExperimentalFragmentVariables\n};\n(function (gql_1) {\n    gql_1.gql = extras.gql, gql_1.resetCaches = extras.resetCaches, gql_1.disableFragmentWarnings = extras.disableFragmentWarnings, gql_1.enableExperimentalFragmentVariables = extras.enableExperimentalFragmentVariables, gql_1.disableExperimentalFragmentVariables = extras.disableExperimentalFragmentVariables;\n})(gql || (gql = {}));\ngql[\"default\"] = gql;\nexport default gql;\n//# sourceMappingURL=index.js.map","export function devAssert(condition, message) {\n  const booleanCondition = Boolean(condition);\n\n  if (!booleanCondition) {\n    throw new Error(message);\n  }\n}\n","const MAX_ARRAY_LENGTH = 10;\nconst MAX_RECURSIVE_DEPTH = 2;\n/**\n * Used to print values in error messages.\n */\n\nexport function inspect(value) {\n  return formatValue(value, []);\n}\n\nfunction formatValue(value, seenValues) {\n  switch (typeof value) {\n    case 'string':\n      return JSON.stringify(value);\n\n    case 'function':\n      return value.name ? `[function ${value.name}]` : '[function]';\n\n    case 'object':\n      return formatObjectValue(value, seenValues);\n\n    default:\n      return String(value);\n  }\n}\n\nfunction formatObjectValue(value, previouslySeenValues) {\n  if (value === null) {\n    return 'null';\n  }\n\n  if (previouslySeenValues.includes(value)) {\n    return '[Circular]';\n  }\n\n  const seenValues = [...previouslySeenValues, value];\n\n  if (isJSONable(value)) {\n    const jsonValue = value.toJSON(); // check for infinite recursion\n\n    if (jsonValue !== value) {\n      return typeof jsonValue === 'string'\n        ? jsonValue\n        : formatValue(jsonValue, seenValues);\n    }\n  } else if (Array.isArray(value)) {\n    return formatArray(value, seenValues);\n  }\n\n  return formatObject(value, seenValues);\n}\n\nfunction isJSONable(value) {\n  return typeof value.toJSON === 'function';\n}\n\nfunction formatObject(object, seenValues) {\n  const entries = Object.entries(object);\n\n  if (entries.length === 0) {\n    return '{}';\n  }\n\n  if (seenValues.length > MAX_RECURSIVE_DEPTH) {\n    return '[' + getObjectTag(object) + ']';\n  }\n\n  const properties = entries.map(\n    ([key, value]) => key + ': ' + formatValue(value, seenValues),\n  );\n  return '{ ' + properties.join(', ') + ' }';\n}\n\nfunction formatArray(array, seenValues) {\n  if (array.length === 0) {\n    return '[]';\n  }\n\n  if (seenValues.length > MAX_RECURSIVE_DEPTH) {\n    return '[Array]';\n  }\n\n  const len = Math.min(MAX_ARRAY_LENGTH, array.length);\n  const remaining = array.length - len;\n  const items = [];\n\n  for (let i = 0; i < len; ++i) {\n    items.push(formatValue(array[i], seenValues));\n  }\n\n  if (remaining === 1) {\n    items.push('... 1 more item');\n  } else if (remaining > 1) {\n    items.push(`... ${remaining} more items`);\n  }\n\n  return '[' + items.join(', ') + ']';\n}\n\nfunction getObjectTag(object) {\n  const tag = Object.prototype.toString\n    .call(object)\n    .replace(/^\\[object /, '')\n    .replace(/]$/, '');\n\n  if (tag === 'Object' && typeof object.constructor === 'function') {\n    const name = object.constructor.name;\n\n    if (typeof name === 'string' && name !== '') {\n      return name;\n    }\n  }\n\n  return tag;\n}\n","/**\n * Contains a range of UTF-8 character offsets and token references that\n * identify the region of the source from which the AST derived.\n */\nexport class Location {\n  /**\n   * The character offset at which this Node begins.\n   */\n\n  /**\n   * The character offset at which this Node ends.\n   */\n\n  /**\n   * The Token at which this Node begins.\n   */\n\n  /**\n   * The Token at which this Node ends.\n   */\n\n  /**\n   * The Source document the AST represents.\n   */\n  constructor(startToken, endToken, source) {\n    this.start = startToken.start;\n    this.end = endToken.end;\n    this.startToken = startToken;\n    this.endToken = endToken;\n    this.source = source;\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'Location';\n  }\n\n  toJSON() {\n    return {\n      start: this.start,\n      end: this.end,\n    };\n  }\n}\n/**\n * Represents a range of characters represented by a lexical token\n * within a Source.\n */\n\nexport class Token {\n  /**\n   * The kind of Token.\n   */\n\n  /**\n   * The character offset at which this Node begins.\n   */\n\n  /**\n   * The character offset at which this Node ends.\n   */\n\n  /**\n   * The 1-indexed line number on which this Token appears.\n   */\n\n  /**\n   * The 1-indexed column number at which this Token begins.\n   */\n\n  /**\n   * For non-punctuation tokens, represents the interpreted value of the token.\n   *\n   * Note: is undefined for punctuation tokens, but typed as string for\n   * convenience in the parser.\n   */\n\n  /**\n   * Tokens exist as nodes in a double-linked-list amongst all tokens\n   * including ignored tokens. <SOF> is always the first node and <EOF>\n   * the last.\n   */\n  constructor(kind, start, end, line, column, value) {\n    this.kind = kind;\n    this.start = start;\n    this.end = end;\n    this.line = line;\n    this.column = column; // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n    this.value = value;\n    this.prev = null;\n    this.next = null;\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'Token';\n  }\n\n  toJSON() {\n    return {\n      kind: this.kind,\n      value: this.value,\n      line: this.line,\n      column: this.column,\n    };\n  }\n}\n/**\n * The list of all possible AST node types.\n */\n\n/**\n * @internal\n */\nexport const QueryDocumentKeys = {\n  Name: [],\n  Document: ['definitions'],\n  OperationDefinition: [\n    'name',\n    'variableDefinitions',\n    'directives',\n    'selectionSet',\n  ],\n  VariableDefinition: ['variable', 'type', 'defaultValue', 'directives'],\n  Variable: ['name'],\n  SelectionSet: ['selections'],\n  Field: ['alias', 'name', 'arguments', 'directives', 'selectionSet'],\n  Argument: ['name', 'value'],\n  FragmentSpread: ['name', 'directives'],\n  InlineFragment: ['typeCondition', 'directives', 'selectionSet'],\n  FragmentDefinition: [\n    'name', // Note: fragment variable definitions are deprecated and will removed in v17.0.0\n    'variableDefinitions',\n    'typeCondition',\n    'directives',\n    'selectionSet',\n  ],\n  IntValue: [],\n  FloatValue: [],\n  StringValue: [],\n  BooleanValue: [],\n  NullValue: [],\n  EnumValue: [],\n  ListValue: ['values'],\n  ObjectValue: ['fields'],\n  ObjectField: ['name', 'value'],\n  Directive: ['name', 'arguments'],\n  NamedType: ['name'],\n  ListType: ['type'],\n  NonNullType: ['type'],\n  SchemaDefinition: ['description', 'directives', 'operationTypes'],\n  OperationTypeDefinition: ['type'],\n  ScalarTypeDefinition: ['description', 'name', 'directives'],\n  ObjectTypeDefinition: [\n    'description',\n    'name',\n    'interfaces',\n    'directives',\n    'fields',\n  ],\n  FieldDefinition: ['description', 'name', 'arguments', 'type', 'directives'],\n  InputValueDefinition: [\n    'description',\n    'name',\n    'type',\n    'defaultValue',\n    'directives',\n  ],\n  InterfaceTypeDefinition: [\n    'description',\n    'name',\n    'interfaces',\n    'directives',\n    'fields',\n  ],\n  UnionTypeDefinition: ['description', 'name', 'directives', 'types'],\n  EnumTypeDefinition: ['description', 'name', 'directives', 'values'],\n  EnumValueDefinition: ['description', 'name', 'directives'],\n  InputObjectTypeDefinition: ['description', 'name', 'directives', 'fields'],\n  DirectiveDefinition: ['description', 'name', 'arguments', 'locations'],\n  SchemaExtension: ['directives', 'operationTypes'],\n  ScalarTypeExtension: ['name', 'directives'],\n  ObjectTypeExtension: ['name', 'interfaces', 'directives', 'fields'],\n  InterfaceTypeExtension: ['name', 'interfaces', 'directives', 'fields'],\n  UnionTypeExtension: ['name', 'directives', 'types'],\n  EnumTypeExtension: ['name', 'directives', 'values'],\n  InputObjectTypeExtension: ['name', 'directives', 'fields'],\n};\nconst kindValues = new Set(Object.keys(QueryDocumentKeys));\n/**\n * @internal\n */\n\nexport function isNode(maybeNode) {\n  const maybeKind =\n    maybeNode === null || maybeNode === void 0 ? void 0 : maybeNode.kind;\n  return typeof maybeKind === 'string' && kindValues.has(maybeKind);\n}\n/** Name */\n\nvar OperationTypeNode;\n\n(function (OperationTypeNode) {\n  OperationTypeNode['QUERY'] = 'query';\n  OperationTypeNode['MUTATION'] = 'mutation';\n  OperationTypeNode['SUBSCRIPTION'] = 'subscription';\n})(OperationTypeNode || (OperationTypeNode = {}));\n\nexport { OperationTypeNode };\n","import { isWhiteSpace } from './characterClasses.mjs';\n/**\n * Produces the value of a block string from its parsed raw value, similar to\n * CoffeeScript's block string, Python's docstring trim or Ruby's strip_heredoc.\n *\n * This implements the GraphQL spec's BlockStringValue() static algorithm.\n *\n * @internal\n */\n\nexport function dedentBlockStringLines(lines) {\n  var _firstNonEmptyLine2;\n\n  let commonIndent = Number.MAX_SAFE_INTEGER;\n  let firstNonEmptyLine = null;\n  let lastNonEmptyLine = -1;\n\n  for (let i = 0; i < lines.length; ++i) {\n    var _firstNonEmptyLine;\n\n    const line = lines[i];\n    const indent = leadingWhitespace(line);\n\n    if (indent === line.length) {\n      continue; // skip empty lines\n    }\n\n    firstNonEmptyLine =\n      (_firstNonEmptyLine = firstNonEmptyLine) !== null &&\n      _firstNonEmptyLine !== void 0\n        ? _firstNonEmptyLine\n        : i;\n    lastNonEmptyLine = i;\n\n    if (i !== 0 && indent < commonIndent) {\n      commonIndent = indent;\n    }\n  }\n\n  return lines // Remove common indentation from all lines but first.\n    .map((line, i) => (i === 0 ? line : line.slice(commonIndent))) // Remove leading and trailing blank lines.\n    .slice(\n      (_firstNonEmptyLine2 = firstNonEmptyLine) !== null &&\n        _firstNonEmptyLine2 !== void 0\n        ? _firstNonEmptyLine2\n        : 0,\n      lastNonEmptyLine + 1,\n    );\n}\n\nfunction leadingWhitespace(str) {\n  let i = 0;\n\n  while (i < str.length && isWhiteSpace(str.charCodeAt(i))) {\n    ++i;\n  }\n\n  return i;\n}\n/**\n * @internal\n */\n\nexport function isPrintableAsBlockString(value) {\n  if (value === '') {\n    return true; // empty string is printable\n  }\n\n  let isEmptyLine = true;\n  let hasIndent = false;\n  let hasCommonIndent = true;\n  let seenNonEmptyLine = false;\n\n  for (let i = 0; i < value.length; ++i) {\n    switch (value.codePointAt(i)) {\n      case 0x0000:\n      case 0x0001:\n      case 0x0002:\n      case 0x0003:\n      case 0x0004:\n      case 0x0005:\n      case 0x0006:\n      case 0x0007:\n      case 0x0008:\n      case 0x000b:\n      case 0x000c:\n      case 0x000e:\n      case 0x000f:\n        return false;\n      // Has non-printable characters\n\n      case 0x000d:\n        //  \\r\n        return false;\n      // Has \\r or \\r\\n which will be replaced as \\n\n\n      case 10:\n        //  \\n\n        if (isEmptyLine && !seenNonEmptyLine) {\n          return false; // Has leading new line\n        }\n\n        seenNonEmptyLine = true;\n        isEmptyLine = true;\n        hasIndent = false;\n        break;\n\n      case 9: //   \\t\n\n      case 32:\n        //  <space>\n        hasIndent || (hasIndent = isEmptyLine);\n        break;\n\n      default:\n        hasCommonIndent && (hasCommonIndent = hasIndent);\n        isEmptyLine = false;\n    }\n  }\n\n  if (isEmptyLine) {\n    return false; // Has trailing empty lines\n  }\n\n  if (hasCommonIndent && seenNonEmptyLine) {\n    return false; // Has internal indent\n  }\n\n  return true;\n}\n/**\n * Print a block string in the indented block form by adding a leading and\n * trailing blank line. However, if a block string starts with whitespace and is\n * a single-line, adding a leading blank line would strip that whitespace.\n *\n * @internal\n */\n\nexport function printBlockString(value, options) {\n  const escapedValue = value.replace(/\"\"\"/g, '\\\\\"\"\"'); // Expand a block string's raw value into independent lines.\n\n  const lines = escapedValue.split(/\\r\\n|[\\n\\r]/g);\n  const isSingleLine = lines.length === 1; // If common indentation is found we can fix some of those cases by adding leading new line\n\n  const forceLeadingNewLine =\n    lines.length > 1 &&\n    lines\n      .slice(1)\n      .every((line) => line.length === 0 || isWhiteSpace(line.charCodeAt(0))); // Trailing triple quotes just looks confusing but doesn't force trailing new line\n\n  const hasTrailingTripleQuotes = escapedValue.endsWith('\\\\\"\"\"'); // Trailing quote (single or double) or slash forces trailing new line\n\n  const hasTrailingQuote = value.endsWith('\"') && !hasTrailingTripleQuotes;\n  const hasTrailingSlash = value.endsWith('\\\\');\n  const forceTrailingNewline = hasTrailingQuote || hasTrailingSlash;\n  const printAsMultipleLines =\n    !(options !== null && options !== void 0 && options.minimize) && // add leading and trailing new lines only if it improves readability\n    (!isSingleLine ||\n      value.length > 70 ||\n      forceTrailingNewline ||\n      forceLeadingNewLine ||\n      hasTrailingTripleQuotes);\n  let result = ''; // Format a multi-line block quote to account for leading space.\n\n  const skipLeadingNewLine = isSingleLine && isWhiteSpace(value.charCodeAt(0));\n\n  if ((printAsMultipleLines && !skipLeadingNewLine) || forceLeadingNewLine) {\n    result += '\\n';\n  }\n\n  result += escapedValue;\n\n  if (printAsMultipleLines || forceTrailingNewline) {\n    result += '\\n';\n  }\n\n  return '\"\"\"' + result + '\"\"\"';\n}\n","/**\n * ```\n * WhiteSpace ::\n *   - \"Horizontal Tab (U+0009)\"\n *   - \"Space (U+0020)\"\n * ```\n * @internal\n */\nexport function isWhiteSpace(code) {\n  return code === 0x0009 || code === 0x0020;\n}\n/**\n * ```\n * Digit :: one of\n *   - `0` `1` `2` `3` `4` `5` `6` `7` `8` `9`\n * ```\n * @internal\n */\n\nexport function isDigit(code) {\n  return code >= 0x0030 && code <= 0x0039;\n}\n/**\n * ```\n * Letter :: one of\n *   - `A` `B` `C` `D` `E` `F` `G` `H` `I` `J` `K` `L` `M`\n *   - `N` `O` `P` `Q` `R` `S` `T` `U` `V` `W` `X` `Y` `Z`\n *   - `a` `b` `c` `d` `e` `f` `g` `h` `i` `j` `k` `l` `m`\n *   - `n` `o` `p` `q` `r` `s` `t` `u` `v` `w` `x` `y` `z`\n * ```\n * @internal\n */\n\nexport function isLetter(code) {\n  return (\n    (code >= 0x0061 && code <= 0x007a) || // A-Z\n    (code >= 0x0041 && code <= 0x005a) // a-z\n  );\n}\n/**\n * ```\n * NameStart ::\n *   - Letter\n *   - `_`\n * ```\n * @internal\n */\n\nexport function isNameStart(code) {\n  return isLetter(code) || code === 0x005f;\n}\n/**\n * ```\n * NameContinue ::\n *   - Letter\n *   - Digit\n *   - `_`\n * ```\n * @internal\n */\n\nexport function isNameContinue(code) {\n  return isLetter(code) || isDigit(code) || code === 0x005f;\n}\n","/**\n * The set of allowed kind values for AST nodes.\n */\nvar Kind;\n\n(function (Kind) {\n  Kind['NAME'] = 'Name';\n  Kind['DOCUMENT'] = 'Document';\n  Kind['OPERATION_DEFINITION'] = 'OperationDefinition';\n  Kind['VARIABLE_DEFINITION'] = 'VariableDefinition';\n  Kind['SELECTION_SET'] = 'SelectionSet';\n  Kind['FIELD'] = 'Field';\n  Kind['ARGUMENT'] = 'Argument';\n  Kind['FRAGMENT_SPREAD'] = 'FragmentSpread';\n  Kind['INLINE_FRAGMENT'] = 'InlineFragment';\n  Kind['FRAGMENT_DEFINITION'] = 'FragmentDefinition';\n  Kind['VARIABLE'] = 'Variable';\n  Kind['INT'] = 'IntValue';\n  Kind['FLOAT'] = 'FloatValue';\n  Kind['STRING'] = 'StringValue';\n  Kind['BOOLEAN'] = 'BooleanValue';\n  Kind['NULL'] = 'NullValue';\n  Kind['ENUM'] = 'EnumValue';\n  Kind['LIST'] = 'ListValue';\n  Kind['OBJECT'] = 'ObjectValue';\n  Kind['OBJECT_FIELD'] = 'ObjectField';\n  Kind['DIRECTIVE'] = 'Directive';\n  Kind['NAMED_TYPE'] = 'NamedType';\n  Kind['LIST_TYPE'] = 'ListType';\n  Kind['NON_NULL_TYPE'] = 'NonNullType';\n  Kind['SCHEMA_DEFINITION'] = 'SchemaDefinition';\n  Kind['OPERATION_TYPE_DEFINITION'] = 'OperationTypeDefinition';\n  Kind['SCALAR_TYPE_DEFINITION'] = 'ScalarTypeDefinition';\n  Kind['OBJECT_TYPE_DEFINITION'] = 'ObjectTypeDefinition';\n  Kind['FIELD_DEFINITION'] = 'FieldDefinition';\n  Kind['INPUT_VALUE_DEFINITION'] = 'InputValueDefinition';\n  Kind['INTERFACE_TYPE_DEFINITION'] = 'InterfaceTypeDefinition';\n  Kind['UNION_TYPE_DEFINITION'] = 'UnionTypeDefinition';\n  Kind['ENUM_TYPE_DEFINITION'] = 'EnumTypeDefinition';\n  Kind['ENUM_VALUE_DEFINITION'] = 'EnumValueDefinition';\n  Kind['INPUT_OBJECT_TYPE_DEFINITION'] = 'InputObjectTypeDefinition';\n  Kind['DIRECTIVE_DEFINITION'] = 'DirectiveDefinition';\n  Kind['SCHEMA_EXTENSION'] = 'SchemaExtension';\n  Kind['SCALAR_TYPE_EXTENSION'] = 'ScalarTypeExtension';\n  Kind['OBJECT_TYPE_EXTENSION'] = 'ObjectTypeExtension';\n  Kind['INTERFACE_TYPE_EXTENSION'] = 'InterfaceTypeExtension';\n  Kind['UNION_TYPE_EXTENSION'] = 'UnionTypeExtension';\n  Kind['ENUM_TYPE_EXTENSION'] = 'EnumTypeExtension';\n  Kind['INPUT_OBJECT_TYPE_EXTENSION'] = 'InputObjectTypeExtension';\n})(Kind || (Kind = {}));\n\nexport { Kind };\n/**\n * The enum type representing the possible kind values of AST nodes.\n *\n * @deprecated Please use `Kind`. Will be remove in v17.\n */\n","export function invariant(condition, message) {\n  const booleanCondition = Boolean(condition);\n\n  if (!booleanCondition) {\n    throw new Error(\n      message != null ? message : 'Unexpected invariant triggered.',\n    );\n  }\n}\n","import { invariant } from '../jsutils/invariant.mjs';\nconst LineRegExp = /\\r\\n|[\\n\\r]/g;\n/**\n * Represents a location in a Source.\n */\n\n/**\n * Takes a Source and a UTF-8 character offset, and returns the corresponding\n * line and column as a SourceLocation.\n */\nexport function getLocation(source, position) {\n  let lastLineStart = 0;\n  let line = 1;\n\n  for (const match of source.body.matchAll(LineRegExp)) {\n    typeof match.index === 'number' || invariant(false);\n\n    if (match.index >= position) {\n      break;\n    }\n\n    lastLineStart = match.index + match[0].length;\n    line += 1;\n  }\n\n  return {\n    line,\n    column: position + 1 - lastLineStart,\n  };\n}\n","import { getLocation } from './location.mjs';\n\n/**\n * Render a helpful description of the location in the GraphQL Source document.\n */\nexport function printLocation(location) {\n  return printSourceLocation(\n    location.source,\n    getLocation(location.source, location.start),\n  );\n}\n/**\n * Render a helpful description of the location in the GraphQL Source document.\n */\n\nexport function printSourceLocation(source, sourceLocation) {\n  const firstLineColumnOffset = source.locationOffset.column - 1;\n  const body = ''.padStart(firstLineColumnOffset) + source.body;\n  const lineIndex = sourceLocation.line - 1;\n  const lineOffset = source.locationOffset.line - 1;\n  const lineNum = sourceLocation.line + lineOffset;\n  const columnOffset = sourceLocation.line === 1 ? firstLineColumnOffset : 0;\n  const columnNum = sourceLocation.column + columnOffset;\n  const locationStr = `${source.name}:${lineNum}:${columnNum}\\n`;\n  const lines = body.split(/\\r\\n|[\\n\\r]/g);\n  const locationLine = lines[lineIndex]; // Special case for minified documents\n\n  if (locationLine.length > 120) {\n    const subLineIndex = Math.floor(columnNum / 80);\n    const subLineColumnNum = columnNum % 80;\n    const subLines = [];\n\n    for (let i = 0; i < locationLine.length; i += 80) {\n      subLines.push(locationLine.slice(i, i + 80));\n    }\n\n    return (\n      locationStr +\n      printPrefixedLines([\n        [`${lineNum} |`, subLines[0]],\n        ...subLines.slice(1, subLineIndex + 1).map((subLine) => ['|', subLine]),\n        ['|', '^'.padStart(subLineColumnNum)],\n        ['|', subLines[subLineIndex + 1]],\n      ])\n    );\n  }\n\n  return (\n    locationStr +\n    printPrefixedLines([\n      // Lines specified like this: [\"prefix\", \"string\"],\n      [`${lineNum - 1} |`, lines[lineIndex - 1]],\n      [`${lineNum} |`, locationLine],\n      ['|', '^'.padStart(columnNum)],\n      [`${lineNum + 1} |`, lines[lineIndex + 1]],\n    ])\n  );\n}\n\nfunction printPrefixedLines(lines) {\n  const existingLines = lines.filter(([_, line]) => line !== undefined);\n  const padLen = Math.max(...existingLines.map(([prefix]) => prefix.length));\n  return existingLines\n    .map(([prefix, line]) => prefix.padStart(padLen) + (line ? ' ' + line : ''))\n    .join('\\n');\n}\n","import { isObjectLike } from '../jsutils/isObjectLike.mjs';\nimport { getLocation } from '../language/location.mjs';\nimport {\n  printLocation,\n  printSourceLocation,\n} from '../language/printLocation.mjs';\n\nfunction toNormalizedOptions(args) {\n  const firstArg = args[0];\n\n  if (firstArg == null || 'kind' in firstArg || 'length' in firstArg) {\n    return {\n      nodes: firstArg,\n      source: args[1],\n      positions: args[2],\n      path: args[3],\n      originalError: args[4],\n      extensions: args[5],\n    };\n  }\n\n  return firstArg;\n}\n/**\n * A GraphQLError describes an Error found during the parse, validate, or\n * execute phases of performing a GraphQL operation. In addition to a message\n * and stack trace, it also includes information about the locations in a\n * GraphQL document and/or execution result that correspond to the Error.\n */\n\nexport class GraphQLError extends Error {\n  /**\n   * An array of `{ line, column }` locations within the source GraphQL document\n   * which correspond to this error.\n   *\n   * Errors during validation often contain multiple locations, for example to\n   * point out two things with the same name. Errors during execution include a\n   * single location, the field which produced the error.\n   *\n   * Enumerable, and appears in the result of JSON.stringify().\n   */\n\n  /**\n   * An array describing the JSON-path into the execution response which\n   * corresponds to this error. Only included for errors during execution.\n   *\n   * Enumerable, and appears in the result of JSON.stringify().\n   */\n\n  /**\n   * An array of GraphQL AST Nodes corresponding to this error.\n   */\n\n  /**\n   * The source GraphQL document for the first location of this error.\n   *\n   * Note that if this Error represents more than one node, the source may not\n   * represent nodes after the first node.\n   */\n\n  /**\n   * An array of character offsets within the source GraphQL document\n   * which correspond to this error.\n   */\n\n  /**\n   * The original error thrown from a field resolver during execution.\n   */\n\n  /**\n   * Extension fields to add to the formatted error.\n   */\n\n  /**\n   * @deprecated Please use the `GraphQLErrorOptions` constructor overload instead.\n   */\n  constructor(message, ...rawArgs) {\n    var _this$nodes, _nodeLocations$, _ref;\n\n    const { nodes, source, positions, path, originalError, extensions } =\n      toNormalizedOptions(rawArgs);\n    super(message);\n    this.name = 'GraphQLError';\n    this.path = path !== null && path !== void 0 ? path : undefined;\n    this.originalError =\n      originalError !== null && originalError !== void 0\n        ? originalError\n        : undefined; // Compute list of blame nodes.\n\n    this.nodes = undefinedIfEmpty(\n      Array.isArray(nodes) ? nodes : nodes ? [nodes] : undefined,\n    );\n    const nodeLocations = undefinedIfEmpty(\n      (_this$nodes = this.nodes) === null || _this$nodes === void 0\n        ? void 0\n        : _this$nodes.map((node) => node.loc).filter((loc) => loc != null),\n    ); // Compute locations in the source for the given nodes/positions.\n\n    this.source =\n      source !== null && source !== void 0\n        ? source\n        : nodeLocations === null || nodeLocations === void 0\n        ? void 0\n        : (_nodeLocations$ = nodeLocations[0]) === null ||\n          _nodeLocations$ === void 0\n        ? void 0\n        : _nodeLocations$.source;\n    this.positions =\n      positions !== null && positions !== void 0\n        ? positions\n        : nodeLocations === null || nodeLocations === void 0\n        ? void 0\n        : nodeLocations.map((loc) => loc.start);\n    this.locations =\n      positions && source\n        ? positions.map((pos) => getLocation(source, pos))\n        : nodeLocations === null || nodeLocations === void 0\n        ? void 0\n        : nodeLocations.map((loc) => getLocation(loc.source, loc.start));\n    const originalExtensions = isObjectLike(\n      originalError === null || originalError === void 0\n        ? void 0\n        : originalError.extensions,\n    )\n      ? originalError === null || originalError === void 0\n        ? void 0\n        : originalError.extensions\n      : undefined;\n    this.extensions =\n      (_ref =\n        extensions !== null && extensions !== void 0\n          ? extensions\n          : originalExtensions) !== null && _ref !== void 0\n        ? _ref\n        : Object.create(null); // Only properties prescribed by the spec should be enumerable.\n    // Keep the rest as non-enumerable.\n\n    Object.defineProperties(this, {\n      message: {\n        writable: true,\n        enumerable: true,\n      },\n      name: {\n        enumerable: false,\n      },\n      nodes: {\n        enumerable: false,\n      },\n      source: {\n        enumerable: false,\n      },\n      positions: {\n        enumerable: false,\n      },\n      originalError: {\n        enumerable: false,\n      },\n    }); // Include (non-enumerable) stack trace.\n\n    /* c8 ignore start */\n    // FIXME: https://github.com/graphql/graphql-js/issues/2317\n\n    if (\n      originalError !== null &&\n      originalError !== void 0 &&\n      originalError.stack\n    ) {\n      Object.defineProperty(this, 'stack', {\n        value: originalError.stack,\n        writable: true,\n        configurable: true,\n      });\n    } else if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, GraphQLError);\n    } else {\n      Object.defineProperty(this, 'stack', {\n        value: Error().stack,\n        writable: true,\n        configurable: true,\n      });\n    }\n    /* c8 ignore stop */\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'GraphQLError';\n  }\n\n  toString() {\n    let output = this.message;\n\n    if (this.nodes) {\n      for (const node of this.nodes) {\n        if (node.loc) {\n          output += '\\n\\n' + printLocation(node.loc);\n        }\n      }\n    } else if (this.source && this.locations) {\n      for (const location of this.locations) {\n        output += '\\n\\n' + printSourceLocation(this.source, location);\n      }\n    }\n\n    return output;\n  }\n\n  toJSON() {\n    const formattedError = {\n      message: this.message,\n    };\n\n    if (this.locations != null) {\n      formattedError.locations = this.locations;\n    }\n\n    if (this.path != null) {\n      formattedError.path = this.path;\n    }\n\n    if (this.extensions != null && Object.keys(this.extensions).length > 0) {\n      formattedError.extensions = this.extensions;\n    }\n\n    return formattedError;\n  }\n}\n\nfunction undefinedIfEmpty(array) {\n  return array === undefined || array.length === 0 ? undefined : array;\n}\n/**\n * See: https://spec.graphql.org/draft/#sec-Errors\n */\n\n/**\n * Prints a GraphQLError to a string, representing useful location information\n * about the error's position in the source.\n *\n * @deprecated Please use `error.toString` instead. Will be removed in v17\n */\nexport function printError(error) {\n  return error.toString();\n}\n/**\n * Given a GraphQLError, format it according to the rules described by the\n * Response Format, Errors section of the GraphQL Specification.\n *\n * @deprecated Please use `error.toJSON` instead. Will be removed in v17\n */\n\nexport function formatError(error) {\n  return error.toJSON();\n}\n","/**\n * Return true if `value` is object-like. A value is object-like if it's not\n * `null` and has a `typeof` result of \"object\".\n */\nexport function isObjectLike(value) {\n  return typeof value == 'object' && value !== null;\n}\n","import { GraphQLError } from './GraphQLError.mjs';\n/**\n * Produces a GraphQLError representing a syntax error, containing useful\n * descriptive information about the syntax error's position in the source.\n */\n\nexport function syntaxError(source, position, description) {\n  return new GraphQLError(`Syntax Error: ${description}`, {\n    source,\n    positions: [position],\n  });\n}\n","/**\n * The set of allowed directive location values.\n */\nvar DirectiveLocation;\n\n(function (DirectiveLocation) {\n  DirectiveLocation['QUERY'] = 'QUERY';\n  DirectiveLocation['MUTATION'] = 'MUTATION';\n  DirectiveLocation['SUBSCRIPTION'] = 'SUBSCRIPTION';\n  DirectiveLocation['FIELD'] = 'FIELD';\n  DirectiveLocation['FRAGMENT_DEFINITION'] = 'FRAGMENT_DEFINITION';\n  DirectiveLocation['FRAGMENT_SPREAD'] = 'FRAGMENT_SPREAD';\n  DirectiveLocation['INLINE_FRAGMENT'] = 'INLINE_FRAGMENT';\n  DirectiveLocation['VARIABLE_DEFINITION'] = 'VARIABLE_DEFINITION';\n  DirectiveLocation['SCHEMA'] = 'SCHEMA';\n  DirectiveLocation['SCALAR'] = 'SCALAR';\n  DirectiveLocation['OBJECT'] = 'OBJECT';\n  DirectiveLocation['FIELD_DEFINITION'] = 'FIELD_DEFINITION';\n  DirectiveLocation['ARGUMENT_DEFINITION'] = 'ARGUMENT_DEFINITION';\n  DirectiveLocation['INTERFACE'] = 'INTERFACE';\n  DirectiveLocation['UNION'] = 'UNION';\n  DirectiveLocation['ENUM'] = 'ENUM';\n  DirectiveLocation['ENUM_VALUE'] = 'ENUM_VALUE';\n  DirectiveLocation['INPUT_OBJECT'] = 'INPUT_OBJECT';\n  DirectiveLocation['INPUT_FIELD_DEFINITION'] = 'INPUT_FIELD_DEFINITION';\n})(DirectiveLocation || (DirectiveLocation = {}));\n\nexport { DirectiveLocation };\n/**\n * The enum type representing the directive location values.\n *\n * @deprecated Please use `DirectiveLocation`. Will be remove in v17.\n */\n","/**\n * An exported enum describing the different kinds of tokens that the\n * lexer emits.\n */\nvar TokenKind;\n\n(function (TokenKind) {\n  TokenKind['SOF'] = '<SOF>';\n  TokenKind['EOF'] = '<EOF>';\n  TokenKind['BANG'] = '!';\n  TokenKind['DOLLAR'] = '$';\n  TokenKind['AMP'] = '&';\n  TokenKind['PAREN_L'] = '(';\n  TokenKind['PAREN_R'] = ')';\n  TokenKind['SPREAD'] = '...';\n  TokenKind['COLON'] = ':';\n  TokenKind['EQUALS'] = '=';\n  TokenKind['AT'] = '@';\n  TokenKind['BRACKET_L'] = '[';\n  TokenKind['BRACKET_R'] = ']';\n  TokenKind['BRACE_L'] = '{';\n  TokenKind['PIPE'] = '|';\n  TokenKind['BRACE_R'] = '}';\n  TokenKind['NAME'] = 'Name';\n  TokenKind['INT'] = 'Int';\n  TokenKind['FLOAT'] = 'Float';\n  TokenKind['STRING'] = 'String';\n  TokenKind['BLOCK_STRING'] = 'BlockString';\n  TokenKind['COMMENT'] = 'Comment';\n})(TokenKind || (TokenKind = {}));\n\nexport { TokenKind };\n/**\n * The enum type representing the token kinds values.\n *\n * @deprecated Please use `TokenKind`. Will be remove in v17.\n */\n","import { syntaxError } from '../error/syntaxError.mjs';\nimport { Token } from './ast.mjs';\nimport { dedentBlockStringLines } from './blockString.mjs';\nimport { isDigit, isNameContinue, isNameStart } from './characterClasses.mjs';\nimport { TokenKind } from './tokenKind.mjs';\n/**\n * Given a Source object, creates a Lexer for that source.\n * A Lexer is a stateful stream generator in that every time\n * it is advanced, it returns the next token in the Source. Assuming the\n * source lexes, the final Token emitted by the lexer will be of kind\n * EOF, after which the lexer will repeatedly return the same EOF token\n * whenever called.\n */\n\nexport class Lexer {\n  /**\n   * The previously focused non-ignored token.\n   */\n\n  /**\n   * The currently focused non-ignored token.\n   */\n\n  /**\n   * The (1-indexed) line containing the current token.\n   */\n\n  /**\n   * The character offset at which the current line begins.\n   */\n  constructor(source) {\n    const startOfFileToken = new Token(TokenKind.SOF, 0, 0, 0, 0);\n    this.source = source;\n    this.lastToken = startOfFileToken;\n    this.token = startOfFileToken;\n    this.line = 1;\n    this.lineStart = 0;\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'Lexer';\n  }\n  /**\n   * Advances the token stream to the next non-ignored token.\n   */\n\n  advance() {\n    this.lastToken = this.token;\n    const token = (this.token = this.lookahead());\n    return token;\n  }\n  /**\n   * Looks ahead and returns the next non-ignored token, but does not change\n   * the state of Lexer.\n   */\n\n  lookahead() {\n    let token = this.token;\n\n    if (token.kind !== TokenKind.EOF) {\n      do {\n        if (token.next) {\n          token = token.next;\n        } else {\n          // Read the next token and form a link in the token linked-list.\n          const nextToken = readNextToken(this, token.end); // @ts-expect-error next is only mutable during parsing.\n\n          token.next = nextToken; // @ts-expect-error prev is only mutable during parsing.\n\n          nextToken.prev = token;\n          token = nextToken;\n        }\n      } while (token.kind === TokenKind.COMMENT);\n    }\n\n    return token;\n  }\n}\n/**\n * @internal\n */\n\nexport function isPunctuatorTokenKind(kind) {\n  return (\n    kind === TokenKind.BANG ||\n    kind === TokenKind.DOLLAR ||\n    kind === TokenKind.AMP ||\n    kind === TokenKind.PAREN_L ||\n    kind === TokenKind.PAREN_R ||\n    kind === TokenKind.SPREAD ||\n    kind === TokenKind.COLON ||\n    kind === TokenKind.EQUALS ||\n    kind === TokenKind.AT ||\n    kind === TokenKind.BRACKET_L ||\n    kind === TokenKind.BRACKET_R ||\n    kind === TokenKind.BRACE_L ||\n    kind === TokenKind.PIPE ||\n    kind === TokenKind.BRACE_R\n  );\n}\n/**\n * A Unicode scalar value is any Unicode code point except surrogate code\n * points. In other words, the inclusive ranges of values 0x0000 to 0xD7FF and\n * 0xE000 to 0x10FFFF.\n *\n * SourceCharacter ::\n *   - \"Any Unicode scalar value\"\n */\n\nfunction isUnicodeScalarValue(code) {\n  return (\n    (code >= 0x0000 && code <= 0xd7ff) || (code >= 0xe000 && code <= 0x10ffff)\n  );\n}\n/**\n * The GraphQL specification defines source text as a sequence of unicode scalar\n * values (which Unicode defines to exclude surrogate code points). However\n * JavaScript defines strings as a sequence of UTF-16 code units which may\n * include surrogates. A surrogate pair is a valid source character as it\n * encodes a supplementary code point (above U+FFFF), but unpaired surrogate\n * code points are not valid source characters.\n */\n\nfunction isSupplementaryCodePoint(body, location) {\n  return (\n    isLeadingSurrogate(body.charCodeAt(location)) &&\n    isTrailingSurrogate(body.charCodeAt(location + 1))\n  );\n}\n\nfunction isLeadingSurrogate(code) {\n  return code >= 0xd800 && code <= 0xdbff;\n}\n\nfunction isTrailingSurrogate(code) {\n  return code >= 0xdc00 && code <= 0xdfff;\n}\n/**\n * Prints the code point (or end of file reference) at a given location in a\n * source for use in error messages.\n *\n * Printable ASCII is printed quoted, while other points are printed in Unicode\n * code point form (ie. U+1234).\n */\n\nfunction printCodePointAt(lexer, location) {\n  const code = lexer.source.body.codePointAt(location);\n\n  if (code === undefined) {\n    return TokenKind.EOF;\n  } else if (code >= 0x0020 && code <= 0x007e) {\n    // Printable ASCII\n    const char = String.fromCodePoint(code);\n    return char === '\"' ? \"'\\\"'\" : `\"${char}\"`;\n  } // Unicode code point\n\n  return 'U+' + code.toString(16).toUpperCase().padStart(4, '0');\n}\n/**\n * Create a token with line and column location information.\n */\n\nfunction createToken(lexer, kind, start, end, value) {\n  const line = lexer.line;\n  const col = 1 + start - lexer.lineStart;\n  return new Token(kind, start, end, line, col, value);\n}\n/**\n * Gets the next token from the source starting at the given position.\n *\n * This skips over whitespace until it finds the next lexable token, then lexes\n * punctuators immediately or calls the appropriate helper function for more\n * complicated tokens.\n */\n\nfunction readNextToken(lexer, start) {\n  const body = lexer.source.body;\n  const bodyLength = body.length;\n  let position = start;\n\n  while (position < bodyLength) {\n    const code = body.charCodeAt(position); // SourceCharacter\n\n    switch (code) {\n      // Ignored ::\n      //   - UnicodeBOM\n      //   - WhiteSpace\n      //   - LineTerminator\n      //   - Comment\n      //   - Comma\n      //\n      // UnicodeBOM :: \"Byte Order Mark (U+FEFF)\"\n      //\n      // WhiteSpace ::\n      //   - \"Horizontal Tab (U+0009)\"\n      //   - \"Space (U+0020)\"\n      //\n      // Comma :: ,\n      case 0xfeff: // <BOM>\n\n      case 0x0009: // \\t\n\n      case 0x0020: // <space>\n\n      case 0x002c:\n        // ,\n        ++position;\n        continue;\n      // LineTerminator ::\n      //   - \"New Line (U+000A)\"\n      //   - \"Carriage Return (U+000D)\" [lookahead != \"New Line (U+000A)\"]\n      //   - \"Carriage Return (U+000D)\" \"New Line (U+000A)\"\n\n      case 0x000a:\n        // \\n\n        ++position;\n        ++lexer.line;\n        lexer.lineStart = position;\n        continue;\n\n      case 0x000d:\n        // \\r\n        if (body.charCodeAt(position + 1) === 0x000a) {\n          position += 2;\n        } else {\n          ++position;\n        }\n\n        ++lexer.line;\n        lexer.lineStart = position;\n        continue;\n      // Comment\n\n      case 0x0023:\n        // #\n        return readComment(lexer, position);\n      // Token ::\n      //   - Punctuator\n      //   - Name\n      //   - IntValue\n      //   - FloatValue\n      //   - StringValue\n      //\n      // Punctuator :: one of ! $ & ( ) ... : = @ [ ] { | }\n\n      case 0x0021:\n        // !\n        return createToken(lexer, TokenKind.BANG, position, position + 1);\n\n      case 0x0024:\n        // $\n        return createToken(lexer, TokenKind.DOLLAR, position, position + 1);\n\n      case 0x0026:\n        // &\n        return createToken(lexer, TokenKind.AMP, position, position + 1);\n\n      case 0x0028:\n        // (\n        return createToken(lexer, TokenKind.PAREN_L, position, position + 1);\n\n      case 0x0029:\n        // )\n        return createToken(lexer, TokenKind.PAREN_R, position, position + 1);\n\n      case 0x002e:\n        // .\n        if (\n          body.charCodeAt(position + 1) === 0x002e &&\n          body.charCodeAt(position + 2) === 0x002e\n        ) {\n          return createToken(lexer, TokenKind.SPREAD, position, position + 3);\n        }\n\n        break;\n\n      case 0x003a:\n        // :\n        return createToken(lexer, TokenKind.COLON, position, position + 1);\n\n      case 0x003d:\n        // =\n        return createToken(lexer, TokenKind.EQUALS, position, position + 1);\n\n      case 0x0040:\n        // @\n        return createToken(lexer, TokenKind.AT, position, position + 1);\n\n      case 0x005b:\n        // [\n        return createToken(lexer, TokenKind.BRACKET_L, position, position + 1);\n\n      case 0x005d:\n        // ]\n        return createToken(lexer, TokenKind.BRACKET_R, position, position + 1);\n\n      case 0x007b:\n        // {\n        return createToken(lexer, TokenKind.BRACE_L, position, position + 1);\n\n      case 0x007c:\n        // |\n        return createToken(lexer, TokenKind.PIPE, position, position + 1);\n\n      case 0x007d:\n        // }\n        return createToken(lexer, TokenKind.BRACE_R, position, position + 1);\n      // StringValue\n\n      case 0x0022:\n        // \"\n        if (\n          body.charCodeAt(position + 1) === 0x0022 &&\n          body.charCodeAt(position + 2) === 0x0022\n        ) {\n          return readBlockString(lexer, position);\n        }\n\n        return readString(lexer, position);\n    } // IntValue | FloatValue (Digit | -)\n\n    if (isDigit(code) || code === 0x002d) {\n      return readNumber(lexer, position, code);\n    } // Name\n\n    if (isNameStart(code)) {\n      return readName(lexer, position);\n    }\n\n    throw syntaxError(\n      lexer.source,\n      position,\n      code === 0x0027\n        ? 'Unexpected single quote character (\\'), did you mean to use a double quote (\")?'\n        : isUnicodeScalarValue(code) || isSupplementaryCodePoint(body, position)\n        ? `Unexpected character: ${printCodePointAt(lexer, position)}.`\n        : `Invalid character: ${printCodePointAt(lexer, position)}.`,\n    );\n  }\n\n  return createToken(lexer, TokenKind.EOF, bodyLength, bodyLength);\n}\n/**\n * Reads a comment token from the source file.\n *\n * ```\n * Comment :: # CommentChar* [lookahead != CommentChar]\n *\n * CommentChar :: SourceCharacter but not LineTerminator\n * ```\n */\n\nfunction readComment(lexer, start) {\n  const body = lexer.source.body;\n  const bodyLength = body.length;\n  let position = start + 1;\n\n  while (position < bodyLength) {\n    const code = body.charCodeAt(position); // LineTerminator (\\n | \\r)\n\n    if (code === 0x000a || code === 0x000d) {\n      break;\n    } // SourceCharacter\n\n    if (isUnicodeScalarValue(code)) {\n      ++position;\n    } else if (isSupplementaryCodePoint(body, position)) {\n      position += 2;\n    } else {\n      break;\n    }\n  }\n\n  return createToken(\n    lexer,\n    TokenKind.COMMENT,\n    start,\n    position,\n    body.slice(start + 1, position),\n  );\n}\n/**\n * Reads a number token from the source file, either a FloatValue or an IntValue\n * depending on whether a FractionalPart or ExponentPart is encountered.\n *\n * ```\n * IntValue :: IntegerPart [lookahead != {Digit, `.`, NameStart}]\n *\n * IntegerPart ::\n *   - NegativeSign? 0\n *   - NegativeSign? NonZeroDigit Digit*\n *\n * NegativeSign :: -\n *\n * NonZeroDigit :: Digit but not `0`\n *\n * FloatValue ::\n *   - IntegerPart FractionalPart ExponentPart [lookahead != {Digit, `.`, NameStart}]\n *   - IntegerPart FractionalPart [lookahead != {Digit, `.`, NameStart}]\n *   - IntegerPart ExponentPart [lookahead != {Digit, `.`, NameStart}]\n *\n * FractionalPart :: . Digit+\n *\n * ExponentPart :: ExponentIndicator Sign? Digit+\n *\n * ExponentIndicator :: one of `e` `E`\n *\n * Sign :: one of + -\n * ```\n */\n\nfunction readNumber(lexer, start, firstCode) {\n  const body = lexer.source.body;\n  let position = start;\n  let code = firstCode;\n  let isFloat = false; // NegativeSign (-)\n\n  if (code === 0x002d) {\n    code = body.charCodeAt(++position);\n  } // Zero (0)\n\n  if (code === 0x0030) {\n    code = body.charCodeAt(++position);\n\n    if (isDigit(code)) {\n      throw syntaxError(\n        lexer.source,\n        position,\n        `Invalid number, unexpected digit after 0: ${printCodePointAt(\n          lexer,\n          position,\n        )}.`,\n      );\n    }\n  } else {\n    position = readDigits(lexer, position, code);\n    code = body.charCodeAt(position);\n  } // Full stop (.)\n\n  if (code === 0x002e) {\n    isFloat = true;\n    code = body.charCodeAt(++position);\n    position = readDigits(lexer, position, code);\n    code = body.charCodeAt(position);\n  } // E e\n\n  if (code === 0x0045 || code === 0x0065) {\n    isFloat = true;\n    code = body.charCodeAt(++position); // + -\n\n    if (code === 0x002b || code === 0x002d) {\n      code = body.charCodeAt(++position);\n    }\n\n    position = readDigits(lexer, position, code);\n    code = body.charCodeAt(position);\n  } // Numbers cannot be followed by . or NameStart\n\n  if (code === 0x002e || isNameStart(code)) {\n    throw syntaxError(\n      lexer.source,\n      position,\n      `Invalid number, expected digit but got: ${printCodePointAt(\n        lexer,\n        position,\n      )}.`,\n    );\n  }\n\n  return createToken(\n    lexer,\n    isFloat ? TokenKind.FLOAT : TokenKind.INT,\n    start,\n    position,\n    body.slice(start, position),\n  );\n}\n/**\n * Returns the new position in the source after reading one or more digits.\n */\n\nfunction readDigits(lexer, start, firstCode) {\n  if (!isDigit(firstCode)) {\n    throw syntaxError(\n      lexer.source,\n      start,\n      `Invalid number, expected digit but got: ${printCodePointAt(\n        lexer,\n        start,\n      )}.`,\n    );\n  }\n\n  const body = lexer.source.body;\n  let position = start + 1; // +1 to skip first firstCode\n\n  while (isDigit(body.charCodeAt(position))) {\n    ++position;\n  }\n\n  return position;\n}\n/**\n * Reads a single-quote string token from the source file.\n *\n * ```\n * StringValue ::\n *   - `\"\"` [lookahead != `\"`]\n *   - `\"` StringCharacter+ `\"`\n *\n * StringCharacter ::\n *   - SourceCharacter but not `\"` or `\\` or LineTerminator\n *   - `\\u` EscapedUnicode\n *   - `\\` EscapedCharacter\n *\n * EscapedUnicode ::\n *   - `{` HexDigit+ `}`\n *   - HexDigit HexDigit HexDigit HexDigit\n *\n * EscapedCharacter :: one of `\"` `\\` `/` `b` `f` `n` `r` `t`\n * ```\n */\n\nfunction readString(lexer, start) {\n  const body = lexer.source.body;\n  const bodyLength = body.length;\n  let position = start + 1;\n  let chunkStart = position;\n  let value = '';\n\n  while (position < bodyLength) {\n    const code = body.charCodeAt(position); // Closing Quote (\")\n\n    if (code === 0x0022) {\n      value += body.slice(chunkStart, position);\n      return createToken(lexer, TokenKind.STRING, start, position + 1, value);\n    } // Escape Sequence (\\)\n\n    if (code === 0x005c) {\n      value += body.slice(chunkStart, position);\n      const escape =\n        body.charCodeAt(position + 1) === 0x0075 // u\n          ? body.charCodeAt(position + 2) === 0x007b // {\n            ? readEscapedUnicodeVariableWidth(lexer, position)\n            : readEscapedUnicodeFixedWidth(lexer, position)\n          : readEscapedCharacter(lexer, position);\n      value += escape.value;\n      position += escape.size;\n      chunkStart = position;\n      continue;\n    } // LineTerminator (\\n | \\r)\n\n    if (code === 0x000a || code === 0x000d) {\n      break;\n    } // SourceCharacter\n\n    if (isUnicodeScalarValue(code)) {\n      ++position;\n    } else if (isSupplementaryCodePoint(body, position)) {\n      position += 2;\n    } else {\n      throw syntaxError(\n        lexer.source,\n        position,\n        `Invalid character within String: ${printCodePointAt(\n          lexer,\n          position,\n        )}.`,\n      );\n    }\n  }\n\n  throw syntaxError(lexer.source, position, 'Unterminated string.');\n} // The string value and lexed size of an escape sequence.\n\nfunction readEscapedUnicodeVariableWidth(lexer, position) {\n  const body = lexer.source.body;\n  let point = 0;\n  let size = 3; // Cannot be larger than 12 chars (\\u{00000000}).\n\n  while (size < 12) {\n    const code = body.charCodeAt(position + size++); // Closing Brace (})\n\n    if (code === 0x007d) {\n      // Must be at least 5 chars (\\u{0}) and encode a Unicode scalar value.\n      if (size < 5 || !isUnicodeScalarValue(point)) {\n        break;\n      }\n\n      return {\n        value: String.fromCodePoint(point),\n        size,\n      };\n    } // Append this hex digit to the code point.\n\n    point = (point << 4) | readHexDigit(code);\n\n    if (point < 0) {\n      break;\n    }\n  }\n\n  throw syntaxError(\n    lexer.source,\n    position,\n    `Invalid Unicode escape sequence: \"${body.slice(\n      position,\n      position + size,\n    )}\".`,\n  );\n}\n\nfunction readEscapedUnicodeFixedWidth(lexer, position) {\n  const body = lexer.source.body;\n  const code = read16BitHexCode(body, position + 2);\n\n  if (isUnicodeScalarValue(code)) {\n    return {\n      value: String.fromCodePoint(code),\n      size: 6,\n    };\n  } // GraphQL allows JSON-style surrogate pair escape sequences, but only when\n  // a valid pair is formed.\n\n  if (isLeadingSurrogate(code)) {\n    // \\u\n    if (\n      body.charCodeAt(position + 6) === 0x005c &&\n      body.charCodeAt(position + 7) === 0x0075\n    ) {\n      const trailingCode = read16BitHexCode(body, position + 8);\n\n      if (isTrailingSurrogate(trailingCode)) {\n        // JavaScript defines strings as a sequence of UTF-16 code units and\n        // encodes Unicode code points above U+FFFF using a surrogate pair of\n        // code units. Since this is a surrogate pair escape sequence, just\n        // include both codes into the JavaScript string value. Had JavaScript\n        // not been internally based on UTF-16, then this surrogate pair would\n        // be decoded to retrieve the supplementary code point.\n        return {\n          value: String.fromCodePoint(code, trailingCode),\n          size: 12,\n        };\n      }\n    }\n  }\n\n  throw syntaxError(\n    lexer.source,\n    position,\n    `Invalid Unicode escape sequence: \"${body.slice(position, position + 6)}\".`,\n  );\n}\n/**\n * Reads four hexadecimal characters and returns the positive integer that 16bit\n * hexadecimal string represents. For example, \"000f\" will return 15, and \"dead\"\n * will return 57005.\n *\n * Returns a negative number if any char was not a valid hexadecimal digit.\n */\n\nfunction read16BitHexCode(body, position) {\n  // readHexDigit() returns -1 on error. ORing a negative value with any other\n  // value always produces a negative value.\n  return (\n    (readHexDigit(body.charCodeAt(position)) << 12) |\n    (readHexDigit(body.charCodeAt(position + 1)) << 8) |\n    (readHexDigit(body.charCodeAt(position + 2)) << 4) |\n    readHexDigit(body.charCodeAt(position + 3))\n  );\n}\n/**\n * Reads a hexadecimal character and returns its positive integer value (0-15).\n *\n * '0' becomes 0, '9' becomes 9\n * 'A' becomes 10, 'F' becomes 15\n * 'a' becomes 10, 'f' becomes 15\n *\n * Returns -1 if the provided character code was not a valid hexadecimal digit.\n *\n * HexDigit :: one of\n *   - `0` `1` `2` `3` `4` `5` `6` `7` `8` `9`\n *   - `A` `B` `C` `D` `E` `F`\n *   - `a` `b` `c` `d` `e` `f`\n */\n\nfunction readHexDigit(code) {\n  return code >= 0x0030 && code <= 0x0039 // 0-9\n    ? code - 0x0030\n    : code >= 0x0041 && code <= 0x0046 // A-F\n    ? code - 0x0037\n    : code >= 0x0061 && code <= 0x0066 // a-f\n    ? code - 0x0057\n    : -1;\n}\n/**\n * | Escaped Character | Code Point | Character Name               |\n * | ----------------- | ---------- | ---------------------------- |\n * | `\"`               | U+0022     | double quote                 |\n * | `\\`               | U+005C     | reverse solidus (back slash) |\n * | `/`               | U+002F     | solidus (forward slash)      |\n * | `b`               | U+0008     | backspace                    |\n * | `f`               | U+000C     | form feed                    |\n * | `n`               | U+000A     | line feed (new line)         |\n * | `r`               | U+000D     | carriage return              |\n * | `t`               | U+0009     | horizontal tab               |\n */\n\nfunction readEscapedCharacter(lexer, position) {\n  const body = lexer.source.body;\n  const code = body.charCodeAt(position + 1);\n\n  switch (code) {\n    case 0x0022:\n      // \"\n      return {\n        value: '\\u0022',\n        size: 2,\n      };\n\n    case 0x005c:\n      // \\\n      return {\n        value: '\\u005c',\n        size: 2,\n      };\n\n    case 0x002f:\n      // /\n      return {\n        value: '\\u002f',\n        size: 2,\n      };\n\n    case 0x0062:\n      // b\n      return {\n        value: '\\u0008',\n        size: 2,\n      };\n\n    case 0x0066:\n      // f\n      return {\n        value: '\\u000c',\n        size: 2,\n      };\n\n    case 0x006e:\n      // n\n      return {\n        value: '\\u000a',\n        size: 2,\n      };\n\n    case 0x0072:\n      // r\n      return {\n        value: '\\u000d',\n        size: 2,\n      };\n\n    case 0x0074:\n      // t\n      return {\n        value: '\\u0009',\n        size: 2,\n      };\n  }\n\n  throw syntaxError(\n    lexer.source,\n    position,\n    `Invalid character escape sequence: \"${body.slice(\n      position,\n      position + 2,\n    )}\".`,\n  );\n}\n/**\n * Reads a block string token from the source file.\n *\n * ```\n * StringValue ::\n *   - `\"\"\"` BlockStringCharacter* `\"\"\"`\n *\n * BlockStringCharacter ::\n *   - SourceCharacter but not `\"\"\"` or `\\\"\"\"`\n *   - `\\\"\"\"`\n * ```\n */\n\nfunction readBlockString(lexer, start) {\n  const body = lexer.source.body;\n  const bodyLength = body.length;\n  let lineStart = lexer.lineStart;\n  let position = start + 3;\n  let chunkStart = position;\n  let currentLine = '';\n  const blockLines = [];\n\n  while (position < bodyLength) {\n    const code = body.charCodeAt(position); // Closing Triple-Quote (\"\"\")\n\n    if (\n      code === 0x0022 &&\n      body.charCodeAt(position + 1) === 0x0022 &&\n      body.charCodeAt(position + 2) === 0x0022\n    ) {\n      currentLine += body.slice(chunkStart, position);\n      blockLines.push(currentLine);\n      const token = createToken(\n        lexer,\n        TokenKind.BLOCK_STRING,\n        start,\n        position + 3, // Return a string of the lines joined with U+000A.\n        dedentBlockStringLines(blockLines).join('\\n'),\n      );\n      lexer.line += blockLines.length - 1;\n      lexer.lineStart = lineStart;\n      return token;\n    } // Escaped Triple-Quote (\\\"\"\")\n\n    if (\n      code === 0x005c &&\n      body.charCodeAt(position + 1) === 0x0022 &&\n      body.charCodeAt(position + 2) === 0x0022 &&\n      body.charCodeAt(position + 3) === 0x0022\n    ) {\n      currentLine += body.slice(chunkStart, position);\n      chunkStart = position + 1; // skip only slash\n\n      position += 4;\n      continue;\n    } // LineTerminator\n\n    if (code === 0x000a || code === 0x000d) {\n      currentLine += body.slice(chunkStart, position);\n      blockLines.push(currentLine);\n\n      if (code === 0x000d && body.charCodeAt(position + 1) === 0x000a) {\n        position += 2;\n      } else {\n        ++position;\n      }\n\n      currentLine = '';\n      chunkStart = position;\n      lineStart = position;\n      continue;\n    } // SourceCharacter\n\n    if (isUnicodeScalarValue(code)) {\n      ++position;\n    } else if (isSupplementaryCodePoint(body, position)) {\n      position += 2;\n    } else {\n      throw syntaxError(\n        lexer.source,\n        position,\n        `Invalid character within String: ${printCodePointAt(\n          lexer,\n          position,\n        )}.`,\n      );\n    }\n  }\n\n  throw syntaxError(lexer.source, position, 'Unterminated string.');\n}\n/**\n * Reads an alphanumeric + underscore name from the source.\n *\n * ```\n * Name ::\n *   - NameStart NameContinue* [lookahead != NameContinue]\n * ```\n */\n\nfunction readName(lexer, start) {\n  const body = lexer.source.body;\n  const bodyLength = body.length;\n  let position = start + 1;\n\n  while (position < bodyLength) {\n    const code = body.charCodeAt(position);\n\n    if (isNameContinue(code)) {\n      ++position;\n    } else {\n      break;\n    }\n  }\n\n  return createToken(\n    lexer,\n    TokenKind.NAME,\n    start,\n    position,\n    body.slice(start, position),\n  );\n}\n","import { inspect } from './inspect.mjs';\n/**\n * A replacement for instanceof which includes an error warning when multi-realm\n * constructors are detected.\n * See: https://expressjs.com/en/advanced/best-practice-performance.html#set-node_env-to-production\n * See: https://webpack.js.org/guides/production/\n */\n\nexport const instanceOf =\n  /* c8 ignore next 6 */\n  // FIXME: https://github.com/graphql/graphql-js/issues/2317\n  globalThis.process && globalThis.process.env.NODE_ENV === 'production'\n    ? function instanceOf(value, constructor) {\n        return value instanceof constructor;\n      }\n    : function instanceOf(value, constructor) {\n        if (value instanceof constructor) {\n          return true;\n        }\n\n        if (typeof value === 'object' && value !== null) {\n          var _value$constructor;\n\n          // Prefer Symbol.toStringTag since it is immune to minification.\n          const className = constructor.prototype[Symbol.toStringTag];\n          const valueClassName = // We still need to support constructor's name to detect conflicts with older versions of this library.\n            Symbol.toStringTag in value // @ts-expect-error TS bug see, https://github.com/microsoft/TypeScript/issues/38009\n              ? value[Symbol.toStringTag]\n              : (_value$constructor = value.constructor) === null ||\n                _value$constructor === void 0\n              ? void 0\n              : _value$constructor.name;\n\n          if (className === valueClassName) {\n            const stringifiedValue = inspect(value);\n            throw new Error(`Cannot use ${className} \"${stringifiedValue}\" from another module or realm.\n\nEnsure that there is only one instance of \"graphql\" in the node_modules\ndirectory. If different versions of \"graphql\" are the dependencies of other\nrelied on modules, use \"resolutions\" to ensure only one version is installed.\n\nhttps://yarnpkg.com/en/docs/selective-version-resolutions\n\nDuplicate \"graphql\" modules cannot be used at the same time since different\nversions may have different capabilities and behavior. The data from one\nversion used in the function from another could produce confusing and\nspurious results.`);\n          }\n        }\n\n        return false;\n      };\n","import { devAssert } from '../jsutils/devAssert.mjs';\nimport { inspect } from '../jsutils/inspect.mjs';\nimport { instanceOf } from '../jsutils/instanceOf.mjs';\n\n/**\n * A representation of source input to GraphQL. The `name` and `locationOffset` parameters are\n * optional, but they are useful for clients who store GraphQL documents in source files.\n * For example, if the GraphQL input starts at line 40 in a file named `Foo.graphql`, it might\n * be useful for `name` to be `\"Foo.graphql\"` and location to be `{ line: 40, column: 1 }`.\n * The `line` and `column` properties in `locationOffset` are 1-indexed.\n */\nexport class Source {\n  constructor(\n    body,\n    name = 'GraphQL request',\n    locationOffset = {\n      line: 1,\n      column: 1,\n    },\n  ) {\n    typeof body === 'string' ||\n      devAssert(false, `Body must be a string. Received: ${inspect(body)}.`);\n    this.body = body;\n    this.name = name;\n    this.locationOffset = locationOffset;\n    this.locationOffset.line > 0 ||\n      devAssert(\n        false,\n        'line in locationOffset is 1-indexed and must be positive.',\n      );\n    this.locationOffset.column > 0 ||\n      devAssert(\n        false,\n        'column in locationOffset is 1-indexed and must be positive.',\n      );\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'Source';\n  }\n}\n/**\n * Test if the given value is a Source object.\n *\n * @internal\n */\n\nexport function isSource(source) {\n  return instanceOf(source, Source);\n}\n","import { syntaxError } from '../error/syntaxError.mjs';\nimport { Location, OperationTypeNode } from './ast.mjs';\nimport { DirectiveLocation } from './directiveLocation.mjs';\nimport { Kind } from './kinds.mjs';\nimport { isPunctuatorTokenKind, Lexer } from './lexer.mjs';\nimport { isSource, Source } from './source.mjs';\nimport { TokenKind } from './tokenKind.mjs';\n/**\n * Configuration options to control parser behavior\n */\n\n/**\n * Given a GraphQL source, parses it into a Document.\n * Throws GraphQLError if a syntax error is encountered.\n */\nexport function parse(source, options) {\n  const parser = new Parser(source, options);\n  return parser.parseDocument();\n}\n/**\n * Given a string containing a GraphQL value (ex. `[42]`), parse the AST for\n * that value.\n * Throws GraphQLError if a syntax error is encountered.\n *\n * This is useful within tools that operate upon GraphQL Values directly and\n * in isolation of complete GraphQL documents.\n *\n * Consider providing the results to the utility function: valueFromAST().\n */\n\nexport function parseValue(source, options) {\n  const parser = new Parser(source, options);\n  parser.expectToken(TokenKind.SOF);\n  const value = parser.parseValueLiteral(false);\n  parser.expectToken(TokenKind.EOF);\n  return value;\n}\n/**\n * Similar to parseValue(), but raises a parse error if it encounters a\n * variable. The return type will be a constant value.\n */\n\nexport function parseConstValue(source, options) {\n  const parser = new Parser(source, options);\n  parser.expectToken(TokenKind.SOF);\n  const value = parser.parseConstValueLiteral();\n  parser.expectToken(TokenKind.EOF);\n  return value;\n}\n/**\n * Given a string containing a GraphQL Type (ex. `[Int!]`), parse the AST for\n * that type.\n * Throws GraphQLError if a syntax error is encountered.\n *\n * This is useful within tools that operate upon GraphQL Types directly and\n * in isolation of complete GraphQL documents.\n *\n * Consider providing the results to the utility function: typeFromAST().\n */\n\nexport function parseType(source, options) {\n  const parser = new Parser(source, options);\n  parser.expectToken(TokenKind.SOF);\n  const type = parser.parseTypeReference();\n  parser.expectToken(TokenKind.EOF);\n  return type;\n}\n/**\n * This class is exported only to assist people in implementing their own parsers\n * without duplicating too much code and should be used only as last resort for cases\n * such as experimental syntax or if certain features could not be contributed upstream.\n *\n * It is still part of the internal API and is versioned, so any changes to it are never\n * considered breaking changes. If you still need to support multiple versions of the\n * library, please use the `versionInfo` variable for version detection.\n *\n * @internal\n */\n\nexport class Parser {\n  constructor(source, options = {}) {\n    const sourceObj = isSource(source) ? source : new Source(source);\n    this._lexer = new Lexer(sourceObj);\n    this._options = options;\n    this._tokenCounter = 0;\n  }\n  /**\n   * Converts a name lex token into a name parse node.\n   */\n\n  parseName() {\n    const token = this.expectToken(TokenKind.NAME);\n    return this.node(token, {\n      kind: Kind.NAME,\n      value: token.value,\n    });\n  } // Implements the parsing rules in the Document section.\n\n  /**\n   * Document : Definition+\n   */\n\n  parseDocument() {\n    return this.node(this._lexer.token, {\n      kind: Kind.DOCUMENT,\n      definitions: this.many(\n        TokenKind.SOF,\n        this.parseDefinition,\n        TokenKind.EOF,\n      ),\n    });\n  }\n  /**\n   * Definition :\n   *   - ExecutableDefinition\n   *   - TypeSystemDefinition\n   *   - TypeSystemExtension\n   *\n   * ExecutableDefinition :\n   *   - OperationDefinition\n   *   - FragmentDefinition\n   *\n   * TypeSystemDefinition :\n   *   - SchemaDefinition\n   *   - TypeDefinition\n   *   - DirectiveDefinition\n   *\n   * TypeDefinition :\n   *   - ScalarTypeDefinition\n   *   - ObjectTypeDefinition\n   *   - InterfaceTypeDefinition\n   *   - UnionTypeDefinition\n   *   - EnumTypeDefinition\n   *   - InputObjectTypeDefinition\n   */\n\n  parseDefinition() {\n    if (this.peek(TokenKind.BRACE_L)) {\n      return this.parseOperationDefinition();\n    } // Many definitions begin with a description and require a lookahead.\n\n    const hasDescription = this.peekDescription();\n    const keywordToken = hasDescription\n      ? this._lexer.lookahead()\n      : this._lexer.token;\n\n    if (keywordToken.kind === TokenKind.NAME) {\n      switch (keywordToken.value) {\n        case 'schema':\n          return this.parseSchemaDefinition();\n\n        case 'scalar':\n          return this.parseScalarTypeDefinition();\n\n        case 'type':\n          return this.parseObjectTypeDefinition();\n\n        case 'interface':\n          return this.parseInterfaceTypeDefinition();\n\n        case 'union':\n          return this.parseUnionTypeDefinition();\n\n        case 'enum':\n          return this.parseEnumTypeDefinition();\n\n        case 'input':\n          return this.parseInputObjectTypeDefinition();\n\n        case 'directive':\n          return this.parseDirectiveDefinition();\n      }\n\n      if (hasDescription) {\n        throw syntaxError(\n          this._lexer.source,\n          this._lexer.token.start,\n          'Unexpected description, descriptions are supported only on type definitions.',\n        );\n      }\n\n      switch (keywordToken.value) {\n        case 'query':\n        case 'mutation':\n        case 'subscription':\n          return this.parseOperationDefinition();\n\n        case 'fragment':\n          return this.parseFragmentDefinition();\n\n        case 'extend':\n          return this.parseTypeSystemExtension();\n      }\n    }\n\n    throw this.unexpected(keywordToken);\n  } // Implements the parsing rules in the Operations section.\n\n  /**\n   * OperationDefinition :\n   *  - SelectionSet\n   *  - OperationType Name? VariableDefinitions? Directives? SelectionSet\n   */\n\n  parseOperationDefinition() {\n    const start = this._lexer.token;\n\n    if (this.peek(TokenKind.BRACE_L)) {\n      return this.node(start, {\n        kind: Kind.OPERATION_DEFINITION,\n        operation: OperationTypeNode.QUERY,\n        name: undefined,\n        variableDefinitions: [],\n        directives: [],\n        selectionSet: this.parseSelectionSet(),\n      });\n    }\n\n    const operation = this.parseOperationType();\n    let name;\n\n    if (this.peek(TokenKind.NAME)) {\n      name = this.parseName();\n    }\n\n    return this.node(start, {\n      kind: Kind.OPERATION_DEFINITION,\n      operation,\n      name,\n      variableDefinitions: this.parseVariableDefinitions(),\n      directives: this.parseDirectives(false),\n      selectionSet: this.parseSelectionSet(),\n    });\n  }\n  /**\n   * OperationType : one of query mutation subscription\n   */\n\n  parseOperationType() {\n    const operationToken = this.expectToken(TokenKind.NAME);\n\n    switch (operationToken.value) {\n      case 'query':\n        return OperationTypeNode.QUERY;\n\n      case 'mutation':\n        return OperationTypeNode.MUTATION;\n\n      case 'subscription':\n        return OperationTypeNode.SUBSCRIPTION;\n    }\n\n    throw this.unexpected(operationToken);\n  }\n  /**\n   * VariableDefinitions : ( VariableDefinition+ )\n   */\n\n  parseVariableDefinitions() {\n    return this.optionalMany(\n      TokenKind.PAREN_L,\n      this.parseVariableDefinition,\n      TokenKind.PAREN_R,\n    );\n  }\n  /**\n   * VariableDefinition : Variable : Type DefaultValue? Directives[Const]?\n   */\n\n  parseVariableDefinition() {\n    return this.node(this._lexer.token, {\n      kind: Kind.VARIABLE_DEFINITION,\n      variable: this.parseVariable(),\n      type: (this.expectToken(TokenKind.COLON), this.parseTypeReference()),\n      defaultValue: this.expectOptionalToken(TokenKind.EQUALS)\n        ? this.parseConstValueLiteral()\n        : undefined,\n      directives: this.parseConstDirectives(),\n    });\n  }\n  /**\n   * Variable : $ Name\n   */\n\n  parseVariable() {\n    const start = this._lexer.token;\n    this.expectToken(TokenKind.DOLLAR);\n    return this.node(start, {\n      kind: Kind.VARIABLE,\n      name: this.parseName(),\n    });\n  }\n  /**\n   * ```\n   * SelectionSet : { Selection+ }\n   * ```\n   */\n\n  parseSelectionSet() {\n    return this.node(this._lexer.token, {\n      kind: Kind.SELECTION_SET,\n      selections: this.many(\n        TokenKind.BRACE_L,\n        this.parseSelection,\n        TokenKind.BRACE_R,\n      ),\n    });\n  }\n  /**\n   * Selection :\n   *   - Field\n   *   - FragmentSpread\n   *   - InlineFragment\n   */\n\n  parseSelection() {\n    return this.peek(TokenKind.SPREAD)\n      ? this.parseFragment()\n      : this.parseField();\n  }\n  /**\n   * Field : Alias? Name Arguments? Directives? SelectionSet?\n   *\n   * Alias : Name :\n   */\n\n  parseField() {\n    const start = this._lexer.token;\n    const nameOrAlias = this.parseName();\n    let alias;\n    let name;\n\n    if (this.expectOptionalToken(TokenKind.COLON)) {\n      alias = nameOrAlias;\n      name = this.parseName();\n    } else {\n      name = nameOrAlias;\n    }\n\n    return this.node(start, {\n      kind: Kind.FIELD,\n      alias,\n      name,\n      arguments: this.parseArguments(false),\n      directives: this.parseDirectives(false),\n      selectionSet: this.peek(TokenKind.BRACE_L)\n        ? this.parseSelectionSet()\n        : undefined,\n    });\n  }\n  /**\n   * Arguments[Const] : ( Argument[?Const]+ )\n   */\n\n  parseArguments(isConst) {\n    const item = isConst ? this.parseConstArgument : this.parseArgument;\n    return this.optionalMany(TokenKind.PAREN_L, item, TokenKind.PAREN_R);\n  }\n  /**\n   * Argument[Const] : Name : Value[?Const]\n   */\n\n  parseArgument(isConst = false) {\n    const start = this._lexer.token;\n    const name = this.parseName();\n    this.expectToken(TokenKind.COLON);\n    return this.node(start, {\n      kind: Kind.ARGUMENT,\n      name,\n      value: this.parseValueLiteral(isConst),\n    });\n  }\n\n  parseConstArgument() {\n    return this.parseArgument(true);\n  } // Implements the parsing rules in the Fragments section.\n\n  /**\n   * Corresponds to both FragmentSpread and InlineFragment in the spec.\n   *\n   * FragmentSpread : ... FragmentName Directives?\n   *\n   * InlineFragment : ... TypeCondition? Directives? SelectionSet\n   */\n\n  parseFragment() {\n    const start = this._lexer.token;\n    this.expectToken(TokenKind.SPREAD);\n    const hasTypeCondition = this.expectOptionalKeyword('on');\n\n    if (!hasTypeCondition && this.peek(TokenKind.NAME)) {\n      return this.node(start, {\n        kind: Kind.FRAGMENT_SPREAD,\n        name: this.parseFragmentName(),\n        directives: this.parseDirectives(false),\n      });\n    }\n\n    return this.node(start, {\n      kind: Kind.INLINE_FRAGMENT,\n      typeCondition: hasTypeCondition ? this.parseNamedType() : undefined,\n      directives: this.parseDirectives(false),\n      selectionSet: this.parseSelectionSet(),\n    });\n  }\n  /**\n   * FragmentDefinition :\n   *   - fragment FragmentName on TypeCondition Directives? SelectionSet\n   *\n   * TypeCondition : NamedType\n   */\n\n  parseFragmentDefinition() {\n    const start = this._lexer.token;\n    this.expectKeyword('fragment'); // Legacy support for defining variables within fragments changes\n    // the grammar of FragmentDefinition:\n    //   - fragment FragmentName VariableDefinitions? on TypeCondition Directives? SelectionSet\n\n    if (this._options.allowLegacyFragmentVariables === true) {\n      return this.node(start, {\n        kind: Kind.FRAGMENT_DEFINITION,\n        name: this.parseFragmentName(),\n        variableDefinitions: this.parseVariableDefinitions(),\n        typeCondition: (this.expectKeyword('on'), this.parseNamedType()),\n        directives: this.parseDirectives(false),\n        selectionSet: this.parseSelectionSet(),\n      });\n    }\n\n    return this.node(start, {\n      kind: Kind.FRAGMENT_DEFINITION,\n      name: this.parseFragmentName(),\n      typeCondition: (this.expectKeyword('on'), this.parseNamedType()),\n      directives: this.parseDirectives(false),\n      selectionSet: this.parseSelectionSet(),\n    });\n  }\n  /**\n   * FragmentName : Name but not `on`\n   */\n\n  parseFragmentName() {\n    if (this._lexer.token.value === 'on') {\n      throw this.unexpected();\n    }\n\n    return this.parseName();\n  } // Implements the parsing rules in the Values section.\n\n  /**\n   * Value[Const] :\n   *   - [~Const] Variable\n   *   - IntValue\n   *   - FloatValue\n   *   - StringValue\n   *   - BooleanValue\n   *   - NullValue\n   *   - EnumValue\n   *   - ListValue[?Const]\n   *   - ObjectValue[?Const]\n   *\n   * BooleanValue : one of `true` `false`\n   *\n   * NullValue : `null`\n   *\n   * EnumValue : Name but not `true`, `false` or `null`\n   */\n\n  parseValueLiteral(isConst) {\n    const token = this._lexer.token;\n\n    switch (token.kind) {\n      case TokenKind.BRACKET_L:\n        return this.parseList(isConst);\n\n      case TokenKind.BRACE_L:\n        return this.parseObject(isConst);\n\n      case TokenKind.INT:\n        this.advanceLexer();\n        return this.node(token, {\n          kind: Kind.INT,\n          value: token.value,\n        });\n\n      case TokenKind.FLOAT:\n        this.advanceLexer();\n        return this.node(token, {\n          kind: Kind.FLOAT,\n          value: token.value,\n        });\n\n      case TokenKind.STRING:\n      case TokenKind.BLOCK_STRING:\n        return this.parseStringLiteral();\n\n      case TokenKind.NAME:\n        this.advanceLexer();\n\n        switch (token.value) {\n          case 'true':\n            return this.node(token, {\n              kind: Kind.BOOLEAN,\n              value: true,\n            });\n\n          case 'false':\n            return this.node(token, {\n              kind: Kind.BOOLEAN,\n              value: false,\n            });\n\n          case 'null':\n            return this.node(token, {\n              kind: Kind.NULL,\n            });\n\n          default:\n            return this.node(token, {\n              kind: Kind.ENUM,\n              value: token.value,\n            });\n        }\n\n      case TokenKind.DOLLAR:\n        if (isConst) {\n          this.expectToken(TokenKind.DOLLAR);\n\n          if (this._lexer.token.kind === TokenKind.NAME) {\n            const varName = this._lexer.token.value;\n            throw syntaxError(\n              this._lexer.source,\n              token.start,\n              `Unexpected variable \"$${varName}\" in constant value.`,\n            );\n          } else {\n            throw this.unexpected(token);\n          }\n        }\n\n        return this.parseVariable();\n\n      default:\n        throw this.unexpected();\n    }\n  }\n\n  parseConstValueLiteral() {\n    return this.parseValueLiteral(true);\n  }\n\n  parseStringLiteral() {\n    const token = this._lexer.token;\n    this.advanceLexer();\n    return this.node(token, {\n      kind: Kind.STRING,\n      value: token.value,\n      block: token.kind === TokenKind.BLOCK_STRING,\n    });\n  }\n  /**\n   * ListValue[Const] :\n   *   - [ ]\n   *   - [ Value[?Const]+ ]\n   */\n\n  parseList(isConst) {\n    const item = () => this.parseValueLiteral(isConst);\n\n    return this.node(this._lexer.token, {\n      kind: Kind.LIST,\n      values: this.any(TokenKind.BRACKET_L, item, TokenKind.BRACKET_R),\n    });\n  }\n  /**\n   * ```\n   * ObjectValue[Const] :\n   *   - { }\n   *   - { ObjectField[?Const]+ }\n   * ```\n   */\n\n  parseObject(isConst) {\n    const item = () => this.parseObjectField(isConst);\n\n    return this.node(this._lexer.token, {\n      kind: Kind.OBJECT,\n      fields: this.any(TokenKind.BRACE_L, item, TokenKind.BRACE_R),\n    });\n  }\n  /**\n   * ObjectField[Const] : Name : Value[?Const]\n   */\n\n  parseObjectField(isConst) {\n    const start = this._lexer.token;\n    const name = this.parseName();\n    this.expectToken(TokenKind.COLON);\n    return this.node(start, {\n      kind: Kind.OBJECT_FIELD,\n      name,\n      value: this.parseValueLiteral(isConst),\n    });\n  } // Implements the parsing rules in the Directives section.\n\n  /**\n   * Directives[Const] : Directive[?Const]+\n   */\n\n  parseDirectives(isConst) {\n    const directives = [];\n\n    while (this.peek(TokenKind.AT)) {\n      directives.push(this.parseDirective(isConst));\n    }\n\n    return directives;\n  }\n\n  parseConstDirectives() {\n    return this.parseDirectives(true);\n  }\n  /**\n   * ```\n   * Directive[Const] : @ Name Arguments[?Const]?\n   * ```\n   */\n\n  parseDirective(isConst) {\n    const start = this._lexer.token;\n    this.expectToken(TokenKind.AT);\n    return this.node(start, {\n      kind: Kind.DIRECTIVE,\n      name: this.parseName(),\n      arguments: this.parseArguments(isConst),\n    });\n  } // Implements the parsing rules in the Types section.\n\n  /**\n   * Type :\n   *   - NamedType\n   *   - ListType\n   *   - NonNullType\n   */\n\n  parseTypeReference() {\n    const start = this._lexer.token;\n    let type;\n\n    if (this.expectOptionalToken(TokenKind.BRACKET_L)) {\n      const innerType = this.parseTypeReference();\n      this.expectToken(TokenKind.BRACKET_R);\n      type = this.node(start, {\n        kind: Kind.LIST_TYPE,\n        type: innerType,\n      });\n    } else {\n      type = this.parseNamedType();\n    }\n\n    if (this.expectOptionalToken(TokenKind.BANG)) {\n      return this.node(start, {\n        kind: Kind.NON_NULL_TYPE,\n        type,\n      });\n    }\n\n    return type;\n  }\n  /**\n   * NamedType : Name\n   */\n\n  parseNamedType() {\n    return this.node(this._lexer.token, {\n      kind: Kind.NAMED_TYPE,\n      name: this.parseName(),\n    });\n  } // Implements the parsing rules in the Type Definition section.\n\n  peekDescription() {\n    return this.peek(TokenKind.STRING) || this.peek(TokenKind.BLOCK_STRING);\n  }\n  /**\n   * Description : StringValue\n   */\n\n  parseDescription() {\n    if (this.peekDescription()) {\n      return this.parseStringLiteral();\n    }\n  }\n  /**\n   * ```\n   * SchemaDefinition : Description? schema Directives[Const]? { OperationTypeDefinition+ }\n   * ```\n   */\n\n  parseSchemaDefinition() {\n    const start = this._lexer.token;\n    const description = this.parseDescription();\n    this.expectKeyword('schema');\n    const directives = this.parseConstDirectives();\n    const operationTypes = this.many(\n      TokenKind.BRACE_L,\n      this.parseOperationTypeDefinition,\n      TokenKind.BRACE_R,\n    );\n    return this.node(start, {\n      kind: Kind.SCHEMA_DEFINITION,\n      description,\n      directives,\n      operationTypes,\n    });\n  }\n  /**\n   * OperationTypeDefinition : OperationType : NamedType\n   */\n\n  parseOperationTypeDefinition() {\n    const start = this._lexer.token;\n    const operation = this.parseOperationType();\n    this.expectToken(TokenKind.COLON);\n    const type = this.parseNamedType();\n    return this.node(start, {\n      kind: Kind.OPERATION_TYPE_DEFINITION,\n      operation,\n      type,\n    });\n  }\n  /**\n   * ScalarTypeDefinition : Description? scalar Name Directives[Const]?\n   */\n\n  parseScalarTypeDefinition() {\n    const start = this._lexer.token;\n    const description = this.parseDescription();\n    this.expectKeyword('scalar');\n    const name = this.parseName();\n    const directives = this.parseConstDirectives();\n    return this.node(start, {\n      kind: Kind.SCALAR_TYPE_DEFINITION,\n      description,\n      name,\n      directives,\n    });\n  }\n  /**\n   * ObjectTypeDefinition :\n   *   Description?\n   *   type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition?\n   */\n\n  parseObjectTypeDefinition() {\n    const start = this._lexer.token;\n    const description = this.parseDescription();\n    this.expectKeyword('type');\n    const name = this.parseName();\n    const interfaces = this.parseImplementsInterfaces();\n    const directives = this.parseConstDirectives();\n    const fields = this.parseFieldsDefinition();\n    return this.node(start, {\n      kind: Kind.OBJECT_TYPE_DEFINITION,\n      description,\n      name,\n      interfaces,\n      directives,\n      fields,\n    });\n  }\n  /**\n   * ImplementsInterfaces :\n   *   - implements `&`? NamedType\n   *   - ImplementsInterfaces & NamedType\n   */\n\n  parseImplementsInterfaces() {\n    return this.expectOptionalKeyword('implements')\n      ? this.delimitedMany(TokenKind.AMP, this.parseNamedType)\n      : [];\n  }\n  /**\n   * ```\n   * FieldsDefinition : { FieldDefinition+ }\n   * ```\n   */\n\n  parseFieldsDefinition() {\n    return this.optionalMany(\n      TokenKind.BRACE_L,\n      this.parseFieldDefinition,\n      TokenKind.BRACE_R,\n    );\n  }\n  /**\n   * FieldDefinition :\n   *   - Description? Name ArgumentsDefinition? : Type Directives[Const]?\n   */\n\n  parseFieldDefinition() {\n    const start = this._lexer.token;\n    const description = this.parseDescription();\n    const name = this.parseName();\n    const args = this.parseArgumentDefs();\n    this.expectToken(TokenKind.COLON);\n    const type = this.parseTypeReference();\n    const directives = this.parseConstDirectives();\n    return this.node(start, {\n      kind: Kind.FIELD_DEFINITION,\n      description,\n      name,\n      arguments: args,\n      type,\n      directives,\n    });\n  }\n  /**\n   * ArgumentsDefinition : ( InputValueDefinition+ )\n   */\n\n  parseArgumentDefs() {\n    return this.optionalMany(\n      TokenKind.PAREN_L,\n      this.parseInputValueDef,\n      TokenKind.PAREN_R,\n    );\n  }\n  /**\n   * InputValueDefinition :\n   *   - Description? Name : Type DefaultValue? Directives[Const]?\n   */\n\n  parseInputValueDef() {\n    const start = this._lexer.token;\n    const description = this.parseDescription();\n    const name = this.parseName();\n    this.expectToken(TokenKind.COLON);\n    const type = this.parseTypeReference();\n    let defaultValue;\n\n    if (this.expectOptionalToken(TokenKind.EQUALS)) {\n      defaultValue = this.parseConstValueLiteral();\n    }\n\n    const directives = this.parseConstDirectives();\n    return this.node(start, {\n      kind: Kind.INPUT_VALUE_DEFINITION,\n      description,\n      name,\n      type,\n      defaultValue,\n      directives,\n    });\n  }\n  /**\n   * InterfaceTypeDefinition :\n   *   - Description? interface Name Directives[Const]? FieldsDefinition?\n   */\n\n  parseInterfaceTypeDefinition() {\n    const start = this._lexer.token;\n    const description = this.parseDescription();\n    this.expectKeyword('interface');\n    const name = this.parseName();\n    const interfaces = this.parseImplementsInterfaces();\n    const directives = this.parseConstDirectives();\n    const fields = this.parseFieldsDefinition();\n    return this.node(start, {\n      kind: Kind.INTERFACE_TYPE_DEFINITION,\n      description,\n      name,\n      interfaces,\n      directives,\n      fields,\n    });\n  }\n  /**\n   * UnionTypeDefinition :\n   *   - Description? union Name Directives[Const]? UnionMemberTypes?\n   */\n\n  parseUnionTypeDefinition() {\n    const start = this._lexer.token;\n    const description = this.parseDescription();\n    this.expectKeyword('union');\n    const name = this.parseName();\n    const directives = this.parseConstDirectives();\n    const types = this.parseUnionMemberTypes();\n    return this.node(start, {\n      kind: Kind.UNION_TYPE_DEFINITION,\n      description,\n      name,\n      directives,\n      types,\n    });\n  }\n  /**\n   * UnionMemberTypes :\n   *   - = `|`? NamedType\n   *   - UnionMemberTypes | NamedType\n   */\n\n  parseUnionMemberTypes() {\n    return this.expectOptionalToken(TokenKind.EQUALS)\n      ? this.delimitedMany(TokenKind.PIPE, this.parseNamedType)\n      : [];\n  }\n  /**\n   * EnumTypeDefinition :\n   *   - Description? enum Name Directives[Const]? EnumValuesDefinition?\n   */\n\n  parseEnumTypeDefinition() {\n    const start = this._lexer.token;\n    const description = this.parseDescription();\n    this.expectKeyword('enum');\n    const name = this.parseName();\n    const directives = this.parseConstDirectives();\n    const values = this.parseEnumValuesDefinition();\n    return this.node(start, {\n      kind: Kind.ENUM_TYPE_DEFINITION,\n      description,\n      name,\n      directives,\n      values,\n    });\n  }\n  /**\n   * ```\n   * EnumValuesDefinition : { EnumValueDefinition+ }\n   * ```\n   */\n\n  parseEnumValuesDefinition() {\n    return this.optionalMany(\n      TokenKind.BRACE_L,\n      this.parseEnumValueDefinition,\n      TokenKind.BRACE_R,\n    );\n  }\n  /**\n   * EnumValueDefinition : Description? EnumValue Directives[Const]?\n   */\n\n  parseEnumValueDefinition() {\n    const start = this._lexer.token;\n    const description = this.parseDescription();\n    const name = this.parseEnumValueName();\n    const directives = this.parseConstDirectives();\n    return this.node(start, {\n      kind: Kind.ENUM_VALUE_DEFINITION,\n      description,\n      name,\n      directives,\n    });\n  }\n  /**\n   * EnumValue : Name but not `true`, `false` or `null`\n   */\n\n  parseEnumValueName() {\n    if (\n      this._lexer.token.value === 'true' ||\n      this._lexer.token.value === 'false' ||\n      this._lexer.token.value === 'null'\n    ) {\n      throw syntaxError(\n        this._lexer.source,\n        this._lexer.token.start,\n        `${getTokenDesc(\n          this._lexer.token,\n        )} is reserved and cannot be used for an enum value.`,\n      );\n    }\n\n    return this.parseName();\n  }\n  /**\n   * InputObjectTypeDefinition :\n   *   - Description? input Name Directives[Const]? InputFieldsDefinition?\n   */\n\n  parseInputObjectTypeDefinition() {\n    const start = this._lexer.token;\n    const description = this.parseDescription();\n    this.expectKeyword('input');\n    const name = this.parseName();\n    const directives = this.parseConstDirectives();\n    const fields = this.parseInputFieldsDefinition();\n    return this.node(start, {\n      kind: Kind.INPUT_OBJECT_TYPE_DEFINITION,\n      description,\n      name,\n      directives,\n      fields,\n    });\n  }\n  /**\n   * ```\n   * InputFieldsDefinition : { InputValueDefinition+ }\n   * ```\n   */\n\n  parseInputFieldsDefinition() {\n    return this.optionalMany(\n      TokenKind.BRACE_L,\n      this.parseInputValueDef,\n      TokenKind.BRACE_R,\n    );\n  }\n  /**\n   * TypeSystemExtension :\n   *   - SchemaExtension\n   *   - TypeExtension\n   *\n   * TypeExtension :\n   *   - ScalarTypeExtension\n   *   - ObjectTypeExtension\n   *   - InterfaceTypeExtension\n   *   - UnionTypeExtension\n   *   - EnumTypeExtension\n   *   - InputObjectTypeDefinition\n   */\n\n  parseTypeSystemExtension() {\n    const keywordToken = this._lexer.lookahead();\n\n    if (keywordToken.kind === TokenKind.NAME) {\n      switch (keywordToken.value) {\n        case 'schema':\n          return this.parseSchemaExtension();\n\n        case 'scalar':\n          return this.parseScalarTypeExtension();\n\n        case 'type':\n          return this.parseObjectTypeExtension();\n\n        case 'interface':\n          return this.parseInterfaceTypeExtension();\n\n        case 'union':\n          return this.parseUnionTypeExtension();\n\n        case 'enum':\n          return this.parseEnumTypeExtension();\n\n        case 'input':\n          return this.parseInputObjectTypeExtension();\n      }\n    }\n\n    throw this.unexpected(keywordToken);\n  }\n  /**\n   * ```\n   * SchemaExtension :\n   *  - extend schema Directives[Const]? { OperationTypeDefinition+ }\n   *  - extend schema Directives[Const]\n   * ```\n   */\n\n  parseSchemaExtension() {\n    const start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('schema');\n    const directives = this.parseConstDirectives();\n    const operationTypes = this.optionalMany(\n      TokenKind.BRACE_L,\n      this.parseOperationTypeDefinition,\n      TokenKind.BRACE_R,\n    );\n\n    if (directives.length === 0 && operationTypes.length === 0) {\n      throw this.unexpected();\n    }\n\n    return this.node(start, {\n      kind: Kind.SCHEMA_EXTENSION,\n      directives,\n      operationTypes,\n    });\n  }\n  /**\n   * ScalarTypeExtension :\n   *   - extend scalar Name Directives[Const]\n   */\n\n  parseScalarTypeExtension() {\n    const start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('scalar');\n    const name = this.parseName();\n    const directives = this.parseConstDirectives();\n\n    if (directives.length === 0) {\n      throw this.unexpected();\n    }\n\n    return this.node(start, {\n      kind: Kind.SCALAR_TYPE_EXTENSION,\n      name,\n      directives,\n    });\n  }\n  /**\n   * ObjectTypeExtension :\n   *  - extend type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition\n   *  - extend type Name ImplementsInterfaces? Directives[Const]\n   *  - extend type Name ImplementsInterfaces\n   */\n\n  parseObjectTypeExtension() {\n    const start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('type');\n    const name = this.parseName();\n    const interfaces = this.parseImplementsInterfaces();\n    const directives = this.parseConstDirectives();\n    const fields = this.parseFieldsDefinition();\n\n    if (\n      interfaces.length === 0 &&\n      directives.length === 0 &&\n      fields.length === 0\n    ) {\n      throw this.unexpected();\n    }\n\n    return this.node(start, {\n      kind: Kind.OBJECT_TYPE_EXTENSION,\n      name,\n      interfaces,\n      directives,\n      fields,\n    });\n  }\n  /**\n   * InterfaceTypeExtension :\n   *  - extend interface Name ImplementsInterfaces? Directives[Const]? FieldsDefinition\n   *  - extend interface Name ImplementsInterfaces? Directives[Const]\n   *  - extend interface Name ImplementsInterfaces\n   */\n\n  parseInterfaceTypeExtension() {\n    const start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('interface');\n    const name = this.parseName();\n    const interfaces = this.parseImplementsInterfaces();\n    const directives = this.parseConstDirectives();\n    const fields = this.parseFieldsDefinition();\n\n    if (\n      interfaces.length === 0 &&\n      directives.length === 0 &&\n      fields.length === 0\n    ) {\n      throw this.unexpected();\n    }\n\n    return this.node(start, {\n      kind: Kind.INTERFACE_TYPE_EXTENSION,\n      name,\n      interfaces,\n      directives,\n      fields,\n    });\n  }\n  /**\n   * UnionTypeExtension :\n   *   - extend union Name Directives[Const]? UnionMemberTypes\n   *   - extend union Name Directives[Const]\n   */\n\n  parseUnionTypeExtension() {\n    const start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('union');\n    const name = this.parseName();\n    const directives = this.parseConstDirectives();\n    const types = this.parseUnionMemberTypes();\n\n    if (directives.length === 0 && types.length === 0) {\n      throw this.unexpected();\n    }\n\n    return this.node(start, {\n      kind: Kind.UNION_TYPE_EXTENSION,\n      name,\n      directives,\n      types,\n    });\n  }\n  /**\n   * EnumTypeExtension :\n   *   - extend enum Name Directives[Const]? EnumValuesDefinition\n   *   - extend enum Name Directives[Const]\n   */\n\n  parseEnumTypeExtension() {\n    const start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('enum');\n    const name = this.parseName();\n    const directives = this.parseConstDirectives();\n    const values = this.parseEnumValuesDefinition();\n\n    if (directives.length === 0 && values.length === 0) {\n      throw this.unexpected();\n    }\n\n    return this.node(start, {\n      kind: Kind.ENUM_TYPE_EXTENSION,\n      name,\n      directives,\n      values,\n    });\n  }\n  /**\n   * InputObjectTypeExtension :\n   *   - extend input Name Directives[Const]? InputFieldsDefinition\n   *   - extend input Name Directives[Const]\n   */\n\n  parseInputObjectTypeExtension() {\n    const start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('input');\n    const name = this.parseName();\n    const directives = this.parseConstDirectives();\n    const fields = this.parseInputFieldsDefinition();\n\n    if (directives.length === 0 && fields.length === 0) {\n      throw this.unexpected();\n    }\n\n    return this.node(start, {\n      kind: Kind.INPUT_OBJECT_TYPE_EXTENSION,\n      name,\n      directives,\n      fields,\n    });\n  }\n  /**\n   * ```\n   * DirectiveDefinition :\n   *   - Description? directive @ Name ArgumentsDefinition? `repeatable`? on DirectiveLocations\n   * ```\n   */\n\n  parseDirectiveDefinition() {\n    const start = this._lexer.token;\n    const description = this.parseDescription();\n    this.expectKeyword('directive');\n    this.expectToken(TokenKind.AT);\n    const name = this.parseName();\n    const args = this.parseArgumentDefs();\n    const repeatable = this.expectOptionalKeyword('repeatable');\n    this.expectKeyword('on');\n    const locations = this.parseDirectiveLocations();\n    return this.node(start, {\n      kind: Kind.DIRECTIVE_DEFINITION,\n      description,\n      name,\n      arguments: args,\n      repeatable,\n      locations,\n    });\n  }\n  /**\n   * DirectiveLocations :\n   *   - `|`? DirectiveLocation\n   *   - DirectiveLocations | DirectiveLocation\n   */\n\n  parseDirectiveLocations() {\n    return this.delimitedMany(TokenKind.PIPE, this.parseDirectiveLocation);\n  }\n  /*\n   * DirectiveLocation :\n   *   - ExecutableDirectiveLocation\n   *   - TypeSystemDirectiveLocation\n   *\n   * ExecutableDirectiveLocation : one of\n   *   `QUERY`\n   *   `MUTATION`\n   *   `SUBSCRIPTION`\n   *   `FIELD`\n   *   `FRAGMENT_DEFINITION`\n   *   `FRAGMENT_SPREAD`\n   *   `INLINE_FRAGMENT`\n   *\n   * TypeSystemDirectiveLocation : one of\n   *   `SCHEMA`\n   *   `SCALAR`\n   *   `OBJECT`\n   *   `FIELD_DEFINITION`\n   *   `ARGUMENT_DEFINITION`\n   *   `INTERFACE`\n   *   `UNION`\n   *   `ENUM`\n   *   `ENUM_VALUE`\n   *   `INPUT_OBJECT`\n   *   `INPUT_FIELD_DEFINITION`\n   */\n\n  parseDirectiveLocation() {\n    const start = this._lexer.token;\n    const name = this.parseName();\n\n    if (Object.prototype.hasOwnProperty.call(DirectiveLocation, name.value)) {\n      return name;\n    }\n\n    throw this.unexpected(start);\n  } // Core parsing utility functions\n\n  /**\n   * Returns a node that, if configured to do so, sets a \"loc\" field as a\n   * location object, used to identify the place in the source that created a\n   * given parsed object.\n   */\n\n  node(startToken, node) {\n    if (this._options.noLocation !== true) {\n      node.loc = new Location(\n        startToken,\n        this._lexer.lastToken,\n        this._lexer.source,\n      );\n    }\n\n    return node;\n  }\n  /**\n   * Determines if the next token is of a given kind\n   */\n\n  peek(kind) {\n    return this._lexer.token.kind === kind;\n  }\n  /**\n   * If the next token is of the given kind, return that token after advancing the lexer.\n   * Otherwise, do not change the parser state and throw an error.\n   */\n\n  expectToken(kind) {\n    const token = this._lexer.token;\n\n    if (token.kind === kind) {\n      this.advanceLexer();\n      return token;\n    }\n\n    throw syntaxError(\n      this._lexer.source,\n      token.start,\n      `Expected ${getTokenKindDesc(kind)}, found ${getTokenDesc(token)}.`,\n    );\n  }\n  /**\n   * If the next token is of the given kind, return \"true\" after advancing the lexer.\n   * Otherwise, do not change the parser state and return \"false\".\n   */\n\n  expectOptionalToken(kind) {\n    const token = this._lexer.token;\n\n    if (token.kind === kind) {\n      this.advanceLexer();\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * If the next token is a given keyword, advance the lexer.\n   * Otherwise, do not change the parser state and throw an error.\n   */\n\n  expectKeyword(value) {\n    const token = this._lexer.token;\n\n    if (token.kind === TokenKind.NAME && token.value === value) {\n      this.advanceLexer();\n    } else {\n      throw syntaxError(\n        this._lexer.source,\n        token.start,\n        `Expected \"${value}\", found ${getTokenDesc(token)}.`,\n      );\n    }\n  }\n  /**\n   * If the next token is a given keyword, return \"true\" after advancing the lexer.\n   * Otherwise, do not change the parser state and return \"false\".\n   */\n\n  expectOptionalKeyword(value) {\n    const token = this._lexer.token;\n\n    if (token.kind === TokenKind.NAME && token.value === value) {\n      this.advanceLexer();\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * Helper function for creating an error when an unexpected lexed token is encountered.\n   */\n\n  unexpected(atToken) {\n    const token =\n      atToken !== null && atToken !== void 0 ? atToken : this._lexer.token;\n    return syntaxError(\n      this._lexer.source,\n      token.start,\n      `Unexpected ${getTokenDesc(token)}.`,\n    );\n  }\n  /**\n   * Returns a possibly empty list of parse nodes, determined by the parseFn.\n   * This list begins with a lex token of openKind and ends with a lex token of closeKind.\n   * Advances the parser to the next lex token after the closing token.\n   */\n\n  any(openKind, parseFn, closeKind) {\n    this.expectToken(openKind);\n    const nodes = [];\n\n    while (!this.expectOptionalToken(closeKind)) {\n      nodes.push(parseFn.call(this));\n    }\n\n    return nodes;\n  }\n  /**\n   * Returns a list of parse nodes, determined by the parseFn.\n   * It can be empty only if open token is missing otherwise it will always return non-empty list\n   * that begins with a lex token of openKind and ends with a lex token of closeKind.\n   * Advances the parser to the next lex token after the closing token.\n   */\n\n  optionalMany(openKind, parseFn, closeKind) {\n    if (this.expectOptionalToken(openKind)) {\n      const nodes = [];\n\n      do {\n        nodes.push(parseFn.call(this));\n      } while (!this.expectOptionalToken(closeKind));\n\n      return nodes;\n    }\n\n    return [];\n  }\n  /**\n   * Returns a non-empty list of parse nodes, determined by the parseFn.\n   * This list begins with a lex token of openKind and ends with a lex token of closeKind.\n   * Advances the parser to the next lex token after the closing token.\n   */\n\n  many(openKind, parseFn, closeKind) {\n    this.expectToken(openKind);\n    const nodes = [];\n\n    do {\n      nodes.push(parseFn.call(this));\n    } while (!this.expectOptionalToken(closeKind));\n\n    return nodes;\n  }\n  /**\n   * Returns a non-empty list of parse nodes, determined by the parseFn.\n   * This list may begin with a lex token of delimiterKind followed by items separated by lex tokens of tokenKind.\n   * Advances the parser to the next lex token after last item in the list.\n   */\n\n  delimitedMany(delimiterKind, parseFn) {\n    this.expectOptionalToken(delimiterKind);\n    const nodes = [];\n\n    do {\n      nodes.push(parseFn.call(this));\n    } while (this.expectOptionalToken(delimiterKind));\n\n    return nodes;\n  }\n\n  advanceLexer() {\n    const { maxTokens } = this._options;\n\n    const token = this._lexer.advance();\n\n    if (maxTokens !== undefined && token.kind !== TokenKind.EOF) {\n      ++this._tokenCounter;\n\n      if (this._tokenCounter > maxTokens) {\n        throw syntaxError(\n          this._lexer.source,\n          token.start,\n          `Document contains more that ${maxTokens} tokens. Parsing aborted.`,\n        );\n      }\n    }\n  }\n}\n/**\n * A helper function to describe a token as a string for debugging.\n */\n\nfunction getTokenDesc(token) {\n  const value = token.value;\n  return getTokenKindDesc(token.kind) + (value != null ? ` \"${value}\"` : '');\n}\n/**\n * A helper function to describe a token kind as a string for debugging.\n */\n\nfunction getTokenKindDesc(kind) {\n  return isPunctuatorTokenKind(kind) ? `\"${kind}\"` : kind;\n}\n","module.exports = function (max) {\n\n  if (!max) throw Error('hashlru must have a max value, of type number, greater than 0')\n\n  var size = 0, cache = Object.create(null), _cache = Object.create(null)\n\n  function update (key, value) {\n    cache[key] = value\n    size ++\n    if(size >= max) {\n      size = 0\n      _cache = cache\n      cache = Object.create(null)\n    }\n  }\n\n  return {\n    has: function (key) {\n      return cache[key] !== undefined || _cache[key] !== undefined\n    },\n    remove: function (key) {\n      if(cache[key] !== undefined)\n        cache[key] = undefined\n      if(_cache[key] !== undefined)\n        _cache[key] = undefined\n    },\n    get: function (key) {\n      var v = cache[key]\n      if(v !== undefined) return v\n      if((v = _cache[key]) !== undefined) {\n        update(key, v)\n        return v\n      }\n    },\n    set: function (key, value) {\n      if(cache[key] !== undefined) cache[key] = value\n      else update(key, value)\n    },\n    clear: function () {\n      cache = Object.create(null)\n      _cache = Object.create(null)\n    }\n  }\n}\n\n\n\n\n\n\n\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","const RateLimiterRedis = require('./lib/RateLimiterRedis');\nconst RateLimiterMongo = require('./lib/RateLimiterMongo');\nconst RateLimiterMySQL = require('./lib/RateLimiterMySQL');\nconst RateLimiterPostgres = require('./lib/RateLimiterPostgres');\nconst {RateLimiterClusterMaster, RateLimiterClusterMasterPM2, RateLimiterCluster} = require('./lib/RateLimiterCluster');\nconst RateLimiterMemory = require('./lib/RateLimiterMemory');\nconst RateLimiterMemcache = require('./lib/RateLimiterMemcache');\nconst RLWrapperBlackAndWhite = require('./lib/RLWrapperBlackAndWhite');\nconst RateLimiterUnion = require('./lib/RateLimiterUnion');\nconst RateLimiterQueue = require('./lib/RateLimiterQueue');\nconst BurstyRateLimiter = require('./lib/BurstyRateLimiter');\nconst RateLimiterRes = require('./lib/RateLimiterRes');\n\nmodule.exports = {\n  RateLimiterRedis,\n  RateLimiterMongo,\n  RateLimiterMySQL,\n  RateLimiterPostgres,\n  RateLimiterMemory,\n  RateLimiterMemcache,\n  RateLimiterClusterMaster,\n  RateLimiterClusterMasterPM2,\n  RateLimiterCluster,\n  RLWrapperBlackAndWhite,\n  RateLimiterUnion,\n  RateLimiterQueue,\n  BurstyRateLimiter,\n  RateLimiterRes,\n};\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","'use strict';\n\n/**\n * Custom implementation of a double ended queue.\n */\nfunction Denque(array, options) {\n  var options = options || {};\n\n  this._head = 0;\n  this._tail = 0;\n  this._capacity = options.capacity;\n  this._capacityMask = 0x3;\n  this._list = new Array(4);\n  if (Array.isArray(array)) {\n    this._fromArray(array);\n  }\n}\n\n/**\n * -------------\n *  PUBLIC API\n * -------------\n */\n\n/**\n * Returns the item at the specified index from the list.\n * 0 is the first element, 1 is the second, and so on...\n * Elements at negative values are that many from the end: -1 is one before the end\n * (the last element), -2 is two before the end (one before last), etc.\n * @param index\n * @returns {*}\n */\nDenque.prototype.peekAt = function peekAt(index) {\n  var i = index;\n  // expect a number or return undefined\n  if ((i !== (i | 0))) {\n    return void 0;\n  }\n  var len = this.size();\n  if (i >= len || i < -len) return undefined;\n  if (i < 0) i += len;\n  i = (this._head + i) & this._capacityMask;\n  return this._list[i];\n};\n\n/**\n * Alias for peekAt()\n * @param i\n * @returns {*}\n */\nDenque.prototype.get = function get(i) {\n  return this.peekAt(i);\n};\n\n/**\n * Returns the first item in the list without removing it.\n * @returns {*}\n */\nDenque.prototype.peek = function peek() {\n  if (this._head === this._tail) return undefined;\n  return this._list[this._head];\n};\n\n/**\n * Alias for peek()\n * @returns {*}\n */\nDenque.prototype.peekFront = function peekFront() {\n  return this.peek();\n};\n\n/**\n * Returns the item that is at the back of the queue without removing it.\n * Uses peekAt(-1)\n */\nDenque.prototype.peekBack = function peekBack() {\n  return this.peekAt(-1);\n};\n\n/**\n * Returns the current length of the queue\n * @return {Number}\n */\nObject.defineProperty(Denque.prototype, 'length', {\n  get: function length() {\n    return this.size();\n  }\n});\n\n/**\n * Return the number of items on the list, or 0 if empty.\n * @returns {number}\n */\nDenque.prototype.size = function size() {\n  if (this._head === this._tail) return 0;\n  if (this._head < this._tail) return this._tail - this._head;\n  else return this._capacityMask + 1 - (this._head - this._tail);\n};\n\n/**\n * Add an item at the beginning of the list.\n * @param item\n */\nDenque.prototype.unshift = function unshift(item) {\n  if (item === undefined) return this.size();\n  var len = this._list.length;\n  this._head = (this._head - 1 + len) & this._capacityMask;\n  this._list[this._head] = item;\n  if (this._tail === this._head) this._growArray();\n  if (this._capacity && this.size() > this._capacity) this.pop();\n  if (this._head < this._tail) return this._tail - this._head;\n  else return this._capacityMask + 1 - (this._head - this._tail);\n};\n\n/**\n * Remove and return the first item on the list,\n * Returns undefined if the list is empty.\n * @returns {*}\n */\nDenque.prototype.shift = function shift() {\n  var head = this._head;\n  if (head === this._tail) return undefined;\n  var item = this._list[head];\n  this._list[head] = undefined;\n  this._head = (head + 1) & this._capacityMask;\n  if (head < 2 && this._tail > 10000 && this._tail <= this._list.length >>> 2) this._shrinkArray();\n  return item;\n};\n\n/**\n * Add an item to the bottom of the list.\n * @param item\n */\nDenque.prototype.push = function push(item) {\n  if (item === undefined) return this.size();\n  var tail = this._tail;\n  this._list[tail] = item;\n  this._tail = (tail + 1) & this._capacityMask;\n  if (this._tail === this._head) {\n    this._growArray();\n  }\n  if (this._capacity && this.size() > this._capacity) {\n    this.shift();\n  }\n  if (this._head < this._tail) return this._tail - this._head;\n  else return this._capacityMask + 1 - (this._head - this._tail);\n};\n\n/**\n * Remove and return the last item on the list.\n * Returns undefined if the list is empty.\n * @returns {*}\n */\nDenque.prototype.pop = function pop() {\n  var tail = this._tail;\n  if (tail === this._head) return undefined;\n  var len = this._list.length;\n  this._tail = (tail - 1 + len) & this._capacityMask;\n  var item = this._list[this._tail];\n  this._list[this._tail] = undefined;\n  if (this._head < 2 && tail > 10000 && tail <= len >>> 2) this._shrinkArray();\n  return item;\n};\n\n/**\n * Remove and return the item at the specified index from the list.\n * Returns undefined if the list is empty.\n * @param index\n * @returns {*}\n */\nDenque.prototype.removeOne = function removeOne(index) {\n  var i = index;\n  // expect a number or return undefined\n  if ((i !== (i | 0))) {\n    return void 0;\n  }\n  if (this._head === this._tail) return void 0;\n  var size = this.size();\n  var len = this._list.length;\n  if (i >= size || i < -size) return void 0;\n  if (i < 0) i += size;\n  i = (this._head + i) & this._capacityMask;\n  var item = this._list[i];\n  var k;\n  if (index < size / 2) {\n    for (k = index; k > 0; k--) {\n      this._list[i] = this._list[i = (i - 1 + len) & this._capacityMask];\n    }\n    this._list[i] = void 0;\n    this._head = (this._head + 1 + len) & this._capacityMask;\n  } else {\n    for (k = size - 1 - index; k > 0; k--) {\n      this._list[i] = this._list[i = ( i + 1 + len) & this._capacityMask];\n    }\n    this._list[i] = void 0;\n    this._tail = (this._tail - 1 + len) & this._capacityMask;\n  }\n  return item;\n};\n\n/**\n * Remove number of items from the specified index from the list.\n * Returns array of removed items.\n * Returns undefined if the list is empty.\n * @param index\n * @param count\n * @returns {array}\n */\nDenque.prototype.remove = function remove(index, count) {\n  var i = index;\n  var removed;\n  var del_count = count;\n  // expect a number or return undefined\n  if ((i !== (i | 0))) {\n    return void 0;\n  }\n  if (this._head === this._tail) return void 0;\n  var size = this.size();\n  var len = this._list.length;\n  if (i >= size || i < -size || count < 1) return void 0;\n  if (i < 0) i += size;\n  if (count === 1 || !count) {\n    removed = new Array(1);\n    removed[0] = this.removeOne(i);\n    return removed;\n  }\n  if (i === 0 && i + count >= size) {\n    removed = this.toArray();\n    this.clear();\n    return removed;\n  }\n  if (i + count > size) count = size - i;\n  var k;\n  removed = new Array(count);\n  for (k = 0; k < count; k++) {\n    removed[k] = this._list[(this._head + i + k) & this._capacityMask];\n  }\n  i = (this._head + i) & this._capacityMask;\n  if (index + count === size) {\n    this._tail = (this._tail - count + len) & this._capacityMask;\n    for (k = count; k > 0; k--) {\n      this._list[i = (i + 1 + len) & this._capacityMask] = void 0;\n    }\n    return removed;\n  }\n  if (index === 0) {\n    this._head = (this._head + count + len) & this._capacityMask;\n    for (k = count - 1; k > 0; k--) {\n      this._list[i = (i + 1 + len) & this._capacityMask] = void 0;\n    }\n    return removed;\n  }\n  if (i < size / 2) {\n    this._head = (this._head + index + count + len) & this._capacityMask;\n    for (k = index; k > 0; k--) {\n      this.unshift(this._list[i = (i - 1 + len) & this._capacityMask]);\n    }\n    i = (this._head - 1 + len) & this._capacityMask;\n    while (del_count > 0) {\n      this._list[i = (i - 1 + len) & this._capacityMask] = void 0;\n      del_count--;\n    }\n    if (index < 0) this._tail = i;\n  } else {\n    this._tail = i;\n    i = (i + count + len) & this._capacityMask;\n    for (k = size - (count + index); k > 0; k--) {\n      this.push(this._list[i++]);\n    }\n    i = this._tail;\n    while (del_count > 0) {\n      this._list[i = (i + 1 + len) & this._capacityMask] = void 0;\n      del_count--;\n    }\n  }\n  if (this._head < 2 && this._tail > 10000 && this._tail <= len >>> 2) this._shrinkArray();\n  return removed;\n};\n\n/**\n * Native splice implementation.\n * Remove number of items from the specified index from the list and/or add new elements.\n * Returns array of removed items or empty array if count == 0.\n * Returns undefined if the list is empty.\n *\n * @param index\n * @param count\n * @param {...*} [elements]\n * @returns {array}\n */\nDenque.prototype.splice = function splice(index, count) {\n  var i = index;\n  // expect a number or return undefined\n  if ((i !== (i | 0))) {\n    return void 0;\n  }\n  var size = this.size();\n  if (i < 0) i += size;\n  if (i > size) return void 0;\n  if (arguments.length > 2) {\n    var k;\n    var temp;\n    var removed;\n    var arg_len = arguments.length;\n    var len = this._list.length;\n    var arguments_index = 2;\n    if (!size || i < size / 2) {\n      temp = new Array(i);\n      for (k = 0; k < i; k++) {\n        temp[k] = this._list[(this._head + k) & this._capacityMask];\n      }\n      if (count === 0) {\n        removed = [];\n        if (i > 0) {\n          this._head = (this._head + i + len) & this._capacityMask;\n        }\n      } else {\n        removed = this.remove(i, count);\n        this._head = (this._head + i + len) & this._capacityMask;\n      }\n      while (arg_len > arguments_index) {\n        this.unshift(arguments[--arg_len]);\n      }\n      for (k = i; k > 0; k--) {\n        this.unshift(temp[k - 1]);\n      }\n    } else {\n      temp = new Array(size - (i + count));\n      var leng = temp.length;\n      for (k = 0; k < leng; k++) {\n        temp[k] = this._list[(this._head + i + count + k) & this._capacityMask];\n      }\n      if (count === 0) {\n        removed = [];\n        if (i != size) {\n          this._tail = (this._head + i + len) & this._capacityMask;\n        }\n      } else {\n        removed = this.remove(i, count);\n        this._tail = (this._tail - leng + len) & this._capacityMask;\n      }\n      while (arguments_index < arg_len) {\n        this.push(arguments[arguments_index++]);\n      }\n      for (k = 0; k < leng; k++) {\n        this.push(temp[k]);\n      }\n    }\n    return removed;\n  } else {\n    return this.remove(i, count);\n  }\n};\n\n/**\n * Soft clear - does not reset capacity.\n */\nDenque.prototype.clear = function clear() {\n  this._head = 0;\n  this._tail = 0;\n};\n\n/**\n * Returns true or false whether the list is empty.\n * @returns {boolean}\n */\nDenque.prototype.isEmpty = function isEmpty() {\n  return this._head === this._tail;\n};\n\n/**\n * Returns an array of all queue items.\n * @returns {Array}\n */\nDenque.prototype.toArray = function toArray() {\n  return this._copyArray(false);\n};\n\n/**\n * -------------\n *   INTERNALS\n * -------------\n */\n\n/**\n * Fills the queue with items from an array\n * For use in the constructor\n * @param array\n * @private\n */\nDenque.prototype._fromArray = function _fromArray(array) {\n  for (var i = 0; i < array.length; i++) this.push(array[i]);\n};\n\n/**\n *\n * @param fullCopy\n * @returns {Array}\n * @private\n */\nDenque.prototype._copyArray = function _copyArray(fullCopy) {\n  var newArray = [];\n  var list = this._list;\n  var len = list.length;\n  var i;\n  if (fullCopy || this._head > this._tail) {\n    for (i = this._head; i < len; i++) newArray.push(list[i]);\n    for (i = 0; i < this._tail; i++) newArray.push(list[i]);\n  } else {\n    for (i = this._head; i < this._tail; i++) newArray.push(list[i]);\n  }\n  return newArray;\n};\n\n/**\n * Grows the internal list array.\n * @private\n */\nDenque.prototype._growArray = function _growArray() {\n  if (this._head) {\n    // copy existing data, head to end, then beginning to tail.\n    this._list = this._copyArray(true);\n    this._head = 0;\n  }\n\n  // head is at 0 and array is now full, safe to extend\n  this._tail = this._list.length;\n\n  this._list.length <<= 1;\n  this._capacityMask = (this._capacityMask << 1) | 1;\n};\n\n/**\n * Shrinks the internal list array.\n * @private\n */\nDenque.prototype._shrinkArray = function _shrinkArray() {\n  this._list.length >>>= 1;\n  this._capacityMask >>>= 1;\n};\n\n\nmodule.exports = Denque;\n","// minimal library entry point.\n\n\"use strict\";\nmodule.exports = require(\"./src/index-minimal\");\n","\"use strict\";\nvar protobuf = exports;\n\n/**\n * Build type, one of `\"full\"`, `\"light\"` or `\"minimal\"`.\n * @name build\n * @type {string}\n * @const\n */\nprotobuf.build = \"minimal\";\n\n// Serialization\nprotobuf.Writer       = require(\"./writer\");\nprotobuf.BufferWriter = require(\"./writer_buffer\");\nprotobuf.Reader       = require(\"./reader\");\nprotobuf.BufferReader = require(\"./reader_buffer\");\n\n// Utility\nprotobuf.util         = require(\"./util/minimal\");\nprotobuf.rpc          = require(\"./rpc\");\nprotobuf.roots        = require(\"./roots\");\nprotobuf.configure    = configure;\n\n/* istanbul ignore next */\n/**\n * Reconfigures the library according to the environment.\n * @returns {undefined}\n */\nfunction configure() {\n    protobuf.util._configure();\n    protobuf.Writer._configure(protobuf.BufferWriter);\n    protobuf.Reader._configure(protobuf.BufferReader);\n}\n\n// Set up buffer utility according to the environment\nconfigure();\n","\"use strict\";\nmodule.exports = Reader;\n\nvar util      = require(\"./util/minimal\");\n\nvar BufferReader; // cyclic\n\nvar LongBits  = util.LongBits,\n    utf8      = util.utf8;\n\n/* istanbul ignore next */\nfunction indexOutOfRange(reader, writeLength) {\n    return RangeError(\"index out of range: \" + reader.pos + \" + \" + (writeLength || 1) + \" > \" + reader.len);\n}\n\n/**\n * Constructs a new reader instance using the specified buffer.\n * @classdesc Wire format reader using `Uint8Array` if available, otherwise `Array`.\n * @constructor\n * @param {Uint8Array} buffer Buffer to read from\n */\nfunction Reader(buffer) {\n\n    /**\n     * Read buffer.\n     * @type {Uint8Array}\n     */\n    this.buf = buffer;\n\n    /**\n     * Read buffer position.\n     * @type {number}\n     */\n    this.pos = 0;\n\n    /**\n     * Read buffer length.\n     * @type {number}\n     */\n    this.len = buffer.length;\n}\n\nvar create_array = typeof Uint8Array !== \"undefined\"\n    ? function create_typed_array(buffer) {\n        if (buffer instanceof Uint8Array || Array.isArray(buffer))\n            return new Reader(buffer);\n        throw Error(\"illegal buffer\");\n    }\n    /* istanbul ignore next */\n    : function create_array(buffer) {\n        if (Array.isArray(buffer))\n            return new Reader(buffer);\n        throw Error(\"illegal buffer\");\n    };\n\nvar create = function create() {\n    return util.Buffer\n        ? function create_buffer_setup(buffer) {\n            return (Reader.create = function create_buffer(buffer) {\n                return util.Buffer.isBuffer(buffer)\n                    ? new BufferReader(buffer)\n                    /* istanbul ignore next */\n                    : create_array(buffer);\n            })(buffer);\n        }\n        /* istanbul ignore next */\n        : create_array;\n};\n\n/**\n * Creates a new reader using the specified buffer.\n * @function\n * @param {Uint8Array|Buffer} buffer Buffer to read from\n * @returns {Reader|BufferReader} A {@link BufferReader} if `buffer` is a Buffer, otherwise a {@link Reader}\n * @throws {Error} If `buffer` is not a valid buffer\n */\nReader.create = create();\n\nReader.prototype._slice = util.Array.prototype.subarray || /* istanbul ignore next */ util.Array.prototype.slice;\n\n/**\n * Reads a varint as an unsigned 32 bit value.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.uint32 = (function read_uint32_setup() {\n    var value = 4294967295; // optimizer type-hint, tends to deopt otherwise (?!)\n    return function read_uint32() {\n        value = (         this.buf[this.pos] & 127       ) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) <<  7) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) << 14) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) << 21) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] &  15) << 28) >>> 0; if (this.buf[this.pos++] < 128) return value;\n\n        /* istanbul ignore if */\n        if ((this.pos += 5) > this.len) {\n            this.pos = this.len;\n            throw indexOutOfRange(this, 10);\n        }\n        return value;\n    };\n})();\n\n/**\n * Reads a varint as a signed 32 bit value.\n * @returns {number} Value read\n */\nReader.prototype.int32 = function read_int32() {\n    return this.uint32() | 0;\n};\n\n/**\n * Reads a zig-zag encoded varint as a signed 32 bit value.\n * @returns {number} Value read\n */\nReader.prototype.sint32 = function read_sint32() {\n    var value = this.uint32();\n    return value >>> 1 ^ -(value & 1) | 0;\n};\n\n/* eslint-disable no-invalid-this */\n\nfunction readLongVarint() {\n    // tends to deopt with local vars for octet etc.\n    var bits = new LongBits(0, 0);\n    var i = 0;\n    if (this.len - this.pos > 4) { // fast route (lo)\n        for (; i < 4; ++i) {\n            // 1st..4th\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n        // 5th\n        bits.lo = (bits.lo | (this.buf[this.pos] & 127) << 28) >>> 0;\n        bits.hi = (bits.hi | (this.buf[this.pos] & 127) >>  4) >>> 0;\n        if (this.buf[this.pos++] < 128)\n            return bits;\n        i = 0;\n    } else {\n        for (; i < 3; ++i) {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n            // 1st..3th\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n        // 4th\n        bits.lo = (bits.lo | (this.buf[this.pos++] & 127) << i * 7) >>> 0;\n        return bits;\n    }\n    if (this.len - this.pos > 4) { // fast route (hi)\n        for (; i < 5; ++i) {\n            // 6th..10th\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n    } else {\n        for (; i < 5; ++i) {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n            // 6th..10th\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n    }\n    /* istanbul ignore next */\n    throw Error(\"invalid varint encoding\");\n}\n\n/* eslint-enable no-invalid-this */\n\n/**\n * Reads a varint as a signed 64 bit value.\n * @name Reader#int64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a varint as an unsigned 64 bit value.\n * @name Reader#uint64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a zig-zag encoded varint as a signed 64 bit value.\n * @name Reader#sint64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a varint as a boolean.\n * @returns {boolean} Value read\n */\nReader.prototype.bool = function read_bool() {\n    return this.uint32() !== 0;\n};\n\nfunction readFixed32_end(buf, end) { // note that this uses `end`, not `pos`\n    return (buf[end - 4]\n          | buf[end - 3] << 8\n          | buf[end - 2] << 16\n          | buf[end - 1] << 24) >>> 0;\n}\n\n/**\n * Reads fixed 32 bits as an unsigned 32 bit integer.\n * @returns {number} Value read\n */\nReader.prototype.fixed32 = function read_fixed32() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    return readFixed32_end(this.buf, this.pos += 4);\n};\n\n/**\n * Reads fixed 32 bits as a signed 32 bit integer.\n * @returns {number} Value read\n */\nReader.prototype.sfixed32 = function read_sfixed32() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    return readFixed32_end(this.buf, this.pos += 4) | 0;\n};\n\n/* eslint-disable no-invalid-this */\n\nfunction readFixed64(/* this: Reader */) {\n\n    /* istanbul ignore if */\n    if (this.pos + 8 > this.len)\n        throw indexOutOfRange(this, 8);\n\n    return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));\n}\n\n/* eslint-enable no-invalid-this */\n\n/**\n * Reads fixed 64 bits.\n * @name Reader#fixed64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads zig-zag encoded fixed 64 bits.\n * @name Reader#sfixed64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a float (32 bit) as a number.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.float = function read_float() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    var value = util.float.readFloatLE(this.buf, this.pos);\n    this.pos += 4;\n    return value;\n};\n\n/**\n * Reads a double (64 bit float) as a number.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.double = function read_double() {\n\n    /* istanbul ignore if */\n    if (this.pos + 8 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    var value = util.float.readDoubleLE(this.buf, this.pos);\n    this.pos += 8;\n    return value;\n};\n\n/**\n * Reads a sequence of bytes preceeded by its length as a varint.\n * @returns {Uint8Array} Value read\n */\nReader.prototype.bytes = function read_bytes() {\n    var length = this.uint32(),\n        start  = this.pos,\n        end    = this.pos + length;\n\n    /* istanbul ignore if */\n    if (end > this.len)\n        throw indexOutOfRange(this, length);\n\n    this.pos += length;\n    if (Array.isArray(this.buf)) // plain array\n        return this.buf.slice(start, end);\n    return start === end // fix for IE 10/Win8 and others' subarray returning array of size 1\n        ? new this.buf.constructor(0)\n        : this._slice.call(this.buf, start, end);\n};\n\n/**\n * Reads a string preceeded by its byte length as a varint.\n * @returns {string} Value read\n */\nReader.prototype.string = function read_string() {\n    var bytes = this.bytes();\n    return utf8.read(bytes, 0, bytes.length);\n};\n\n/**\n * Skips the specified number of bytes if specified, otherwise skips a varint.\n * @param {number} [length] Length if known, otherwise a varint is assumed\n * @returns {Reader} `this`\n */\nReader.prototype.skip = function skip(length) {\n    if (typeof length === \"number\") {\n        /* istanbul ignore if */\n        if (this.pos + length > this.len)\n            throw indexOutOfRange(this, length);\n        this.pos += length;\n    } else {\n        do {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n        } while (this.buf[this.pos++] & 128);\n    }\n    return this;\n};\n\n/**\n * Skips the next element of the specified wire type.\n * @param {number} wireType Wire type received\n * @returns {Reader} `this`\n */\nReader.prototype.skipType = function(wireType) {\n    switch (wireType) {\n        case 0:\n            this.skip();\n            break;\n        case 1:\n            this.skip(8);\n            break;\n        case 2:\n            this.skip(this.uint32());\n            break;\n        case 3:\n            while ((wireType = this.uint32() & 7) !== 4) {\n                this.skipType(wireType);\n            }\n            break;\n        case 5:\n            this.skip(4);\n            break;\n\n        /* istanbul ignore next */\n        default:\n            throw Error(\"invalid wire type \" + wireType + \" at offset \" + this.pos);\n    }\n    return this;\n};\n\nReader._configure = function(BufferReader_) {\n    BufferReader = BufferReader_;\n    Reader.create = create();\n    BufferReader._configure();\n\n    var fn = util.Long ? \"toLong\" : /* istanbul ignore next */ \"toNumber\";\n    util.merge(Reader.prototype, {\n\n        int64: function read_int64() {\n            return readLongVarint.call(this)[fn](false);\n        },\n\n        uint64: function read_uint64() {\n            return readLongVarint.call(this)[fn](true);\n        },\n\n        sint64: function read_sint64() {\n            return readLongVarint.call(this).zzDecode()[fn](false);\n        },\n\n        fixed64: function read_fixed64() {\n            return readFixed64.call(this)[fn](true);\n        },\n\n        sfixed64: function read_sfixed64() {\n            return readFixed64.call(this)[fn](false);\n        }\n\n    });\n};\n","\"use strict\";\nmodule.exports = BufferReader;\n\n// extends Reader\nvar Reader = require(\"./reader\");\n(BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;\n\nvar util = require(\"./util/minimal\");\n\n/**\n * Constructs a new buffer reader instance.\n * @classdesc Wire format reader using node buffers.\n * @extends Reader\n * @constructor\n * @param {Buffer} buffer Buffer to read from\n */\nfunction BufferReader(buffer) {\n    Reader.call(this, buffer);\n\n    /**\n     * Read buffer.\n     * @name BufferReader#buf\n     * @type {Buffer}\n     */\n}\n\nBufferReader._configure = function () {\n    /* istanbul ignore else */\n    if (util.Buffer)\n        BufferReader.prototype._slice = util.Buffer.prototype.slice;\n};\n\n\n/**\n * @override\n */\nBufferReader.prototype.string = function read_string_buffer() {\n    var len = this.uint32(); // modifies pos\n    return this.buf.utf8Slice\n        ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + len, this.len))\n        : this.buf.toString(\"utf-8\", this.pos, this.pos = Math.min(this.pos + len, this.len));\n};\n\n/**\n * Reads a sequence of bytes preceeded by its length as a varint.\n * @name BufferReader#bytes\n * @function\n * @returns {Buffer} Value read\n */\n\nBufferReader._configure();\n","\"use strict\";\nmodule.exports = {};\n\n/**\n * Named roots.\n * This is where pbjs stores generated structures (the option `-r, --root` specifies a name).\n * Can also be used manually to make roots available accross modules.\n * @name roots\n * @type {Object.<string,Root>}\n * @example\n * // pbjs -r myroot -o compiled.js ...\n *\n * // in another module:\n * require(\"./compiled.js\");\n *\n * // in any subsequent module:\n * var root = protobuf.roots[\"myroot\"];\n */\n","\"use strict\";\n\n/**\n * Streaming RPC helpers.\n * @namespace\n */\nvar rpc = exports;\n\n/**\n * RPC implementation passed to {@link Service#create} performing a service request on network level, i.e. by utilizing http requests or websockets.\n * @typedef RPCImpl\n * @type {function}\n * @param {Method|rpc.ServiceMethod<Message<{}>,Message<{}>>} method Reflected or static method being called\n * @param {Uint8Array} requestData Request data\n * @param {RPCImplCallback} callback Callback function\n * @returns {undefined}\n * @example\n * function rpcImpl(method, requestData, callback) {\n *     if (protobuf.util.lcFirst(method.name) !== \"myMethod\") // compatible with static code\n *         throw Error(\"no such method\");\n *     asynchronouslyObtainAResponse(requestData, function(err, responseData) {\n *         callback(err, responseData);\n *     });\n * }\n */\n\n/**\n * Node-style callback as used by {@link RPCImpl}.\n * @typedef RPCImplCallback\n * @type {function}\n * @param {Error|null} error Error, if any, otherwise `null`\n * @param {Uint8Array|null} [response] Response data or `null` to signal end of stream, if there hasn't been an error\n * @returns {undefined}\n */\n\nrpc.Service = require(\"./rpc/service\");\n","\"use strict\";\nmodule.exports = Service;\n\nvar util = require(\"../util/minimal\");\n\n// Extends EventEmitter\n(Service.prototype = Object.create(util.EventEmitter.prototype)).constructor = Service;\n\n/**\n * A service method callback as used by {@link rpc.ServiceMethod|ServiceMethod}.\n *\n * Differs from {@link RPCImplCallback} in that it is an actual callback of a service method which may not return `response = null`.\n * @typedef rpc.ServiceMethodCallback\n * @template TRes extends Message<TRes>\n * @type {function}\n * @param {Error|null} error Error, if any\n * @param {TRes} [response] Response message\n * @returns {undefined}\n */\n\n/**\n * A service method part of a {@link rpc.Service} as created by {@link Service.create}.\n * @typedef rpc.ServiceMethod\n * @template TReq extends Message<TReq>\n * @template TRes extends Message<TRes>\n * @type {function}\n * @param {TReq|Properties<TReq>} request Request message or plain object\n * @param {rpc.ServiceMethodCallback<TRes>} [callback] Node-style callback called with the error, if any, and the response message\n * @returns {Promise<Message<TRes>>} Promise if `callback` has been omitted, otherwise `undefined`\n */\n\n/**\n * Constructs a new RPC service instance.\n * @classdesc An RPC service as returned by {@link Service#create}.\n * @exports rpc.Service\n * @extends util.EventEmitter\n * @constructor\n * @param {RPCImpl} rpcImpl RPC implementation\n * @param {boolean} [requestDelimited=false] Whether requests are length-delimited\n * @param {boolean} [responseDelimited=false] Whether responses are length-delimited\n */\nfunction Service(rpcImpl, requestDelimited, responseDelimited) {\n\n    if (typeof rpcImpl !== \"function\")\n        throw TypeError(\"rpcImpl must be a function\");\n\n    util.EventEmitter.call(this);\n\n    /**\n     * RPC implementation. Becomes `null` once the service is ended.\n     * @type {RPCImpl|null}\n     */\n    this.rpcImpl = rpcImpl;\n\n    /**\n     * Whether requests are length-delimited.\n     * @type {boolean}\n     */\n    this.requestDelimited = Boolean(requestDelimited);\n\n    /**\n     * Whether responses are length-delimited.\n     * @type {boolean}\n     */\n    this.responseDelimited = Boolean(responseDelimited);\n}\n\n/**\n * Calls a service method through {@link rpc.Service#rpcImpl|rpcImpl}.\n * @param {Method|rpc.ServiceMethod<TReq,TRes>} method Reflected or static method\n * @param {Constructor<TReq>} requestCtor Request constructor\n * @param {Constructor<TRes>} responseCtor Response constructor\n * @param {TReq|Properties<TReq>} request Request message or plain object\n * @param {rpc.ServiceMethodCallback<TRes>} callback Service callback\n * @returns {undefined}\n * @template TReq extends Message<TReq>\n * @template TRes extends Message<TRes>\n */\nService.prototype.rpcCall = function rpcCall(method, requestCtor, responseCtor, request, callback) {\n\n    if (!request)\n        throw TypeError(\"request must be specified\");\n\n    var self = this;\n    if (!callback)\n        return util.asPromise(rpcCall, self, method, requestCtor, responseCtor, request);\n\n    if (!self.rpcImpl) {\n        setTimeout(function() { callback(Error(\"already ended\")); }, 0);\n        return undefined;\n    }\n\n    try {\n        return self.rpcImpl(\n            method,\n            requestCtor[self.requestDelimited ? \"encodeDelimited\" : \"encode\"](request).finish(),\n            function rpcCallback(err, response) {\n\n                if (err) {\n                    self.emit(\"error\", err, method);\n                    return callback(err);\n                }\n\n                if (response === null) {\n                    self.end(/* endedByRPC */ true);\n                    return undefined;\n                }\n\n                if (!(response instanceof responseCtor)) {\n                    try {\n                        response = responseCtor[self.responseDelimited ? \"decodeDelimited\" : \"decode\"](response);\n                    } catch (err) {\n                        self.emit(\"error\", err, method);\n                        return callback(err);\n                    }\n                }\n\n                self.emit(\"data\", response, method);\n                return callback(null, response);\n            }\n        );\n    } catch (err) {\n        self.emit(\"error\", err, method);\n        setTimeout(function() { callback(err); }, 0);\n        return undefined;\n    }\n};\n\n/**\n * Ends this service and emits the `end` event.\n * @param {boolean} [endedByRPC=false] Whether the service has been ended by the RPC implementation.\n * @returns {rpc.Service} `this`\n */\nService.prototype.end = function end(endedByRPC) {\n    if (this.rpcImpl) {\n        if (!endedByRPC) // signal end to rpcImpl\n            this.rpcImpl(null, null, null);\n        this.rpcImpl = null;\n        this.emit(\"end\").off();\n    }\n    return this;\n};\n","\"use strict\";\nmodule.exports = LongBits;\n\nvar util = require(\"../util/minimal\");\n\n/**\n * Constructs new long bits.\n * @classdesc Helper class for working with the low and high bits of a 64 bit value.\n * @memberof util\n * @constructor\n * @param {number} lo Low 32 bits, unsigned\n * @param {number} hi High 32 bits, unsigned\n */\nfunction LongBits(lo, hi) {\n\n    // note that the casts below are theoretically unnecessary as of today, but older statically\n    // generated converter code might still call the ctor with signed 32bits. kept for compat.\n\n    /**\n     * Low bits.\n     * @type {number}\n     */\n    this.lo = lo >>> 0;\n\n    /**\n     * High bits.\n     * @type {number}\n     */\n    this.hi = hi >>> 0;\n}\n\n/**\n * Zero bits.\n * @memberof util.LongBits\n * @type {util.LongBits}\n */\nvar zero = LongBits.zero = new LongBits(0, 0);\n\nzero.toNumber = function() { return 0; };\nzero.zzEncode = zero.zzDecode = function() { return this; };\nzero.length = function() { return 1; };\n\n/**\n * Zero hash.\n * @memberof util.LongBits\n * @type {string}\n */\nvar zeroHash = LongBits.zeroHash = \"\\0\\0\\0\\0\\0\\0\\0\\0\";\n\n/**\n * Constructs new long bits from the specified number.\n * @param {number} value Value\n * @returns {util.LongBits} Instance\n */\nLongBits.fromNumber = function fromNumber(value) {\n    if (value === 0)\n        return zero;\n    var sign = value < 0;\n    if (sign)\n        value = -value;\n    var lo = value >>> 0,\n        hi = (value - lo) / 4294967296 >>> 0;\n    if (sign) {\n        hi = ~hi >>> 0;\n        lo = ~lo >>> 0;\n        if (++lo > 4294967295) {\n            lo = 0;\n            if (++hi > 4294967295)\n                hi = 0;\n        }\n    }\n    return new LongBits(lo, hi);\n};\n\n/**\n * Constructs new long bits from a number, long or string.\n * @param {Long|number|string} value Value\n * @returns {util.LongBits} Instance\n */\nLongBits.from = function from(value) {\n    if (typeof value === \"number\")\n        return LongBits.fromNumber(value);\n    if (util.isString(value)) {\n        /* istanbul ignore else */\n        if (util.Long)\n            value = util.Long.fromString(value);\n        else\n            return LongBits.fromNumber(parseInt(value, 10));\n    }\n    return value.low || value.high ? new LongBits(value.low >>> 0, value.high >>> 0) : zero;\n};\n\n/**\n * Converts this long bits to a possibly unsafe JavaScript number.\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {number} Possibly unsafe number\n */\nLongBits.prototype.toNumber = function toNumber(unsigned) {\n    if (!unsigned && this.hi >>> 31) {\n        var lo = ~this.lo + 1 >>> 0,\n            hi = ~this.hi     >>> 0;\n        if (!lo)\n            hi = hi + 1 >>> 0;\n        return -(lo + hi * 4294967296);\n    }\n    return this.lo + this.hi * 4294967296;\n};\n\n/**\n * Converts this long bits to a long.\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {Long} Long\n */\nLongBits.prototype.toLong = function toLong(unsigned) {\n    return util.Long\n        ? new util.Long(this.lo | 0, this.hi | 0, Boolean(unsigned))\n        /* istanbul ignore next */\n        : { low: this.lo | 0, high: this.hi | 0, unsigned: Boolean(unsigned) };\n};\n\nvar charCodeAt = String.prototype.charCodeAt;\n\n/**\n * Constructs new long bits from the specified 8 characters long hash.\n * @param {string} hash Hash\n * @returns {util.LongBits} Bits\n */\nLongBits.fromHash = function fromHash(hash) {\n    if (hash === zeroHash)\n        return zero;\n    return new LongBits(\n        ( charCodeAt.call(hash, 0)\n        | charCodeAt.call(hash, 1) << 8\n        | charCodeAt.call(hash, 2) << 16\n        | charCodeAt.call(hash, 3) << 24) >>> 0\n    ,\n        ( charCodeAt.call(hash, 4)\n        | charCodeAt.call(hash, 5) << 8\n        | charCodeAt.call(hash, 6) << 16\n        | charCodeAt.call(hash, 7) << 24) >>> 0\n    );\n};\n\n/**\n * Converts this long bits to a 8 characters long hash.\n * @returns {string} Hash\n */\nLongBits.prototype.toHash = function toHash() {\n    return String.fromCharCode(\n        this.lo        & 255,\n        this.lo >>> 8  & 255,\n        this.lo >>> 16 & 255,\n        this.lo >>> 24      ,\n        this.hi        & 255,\n        this.hi >>> 8  & 255,\n        this.hi >>> 16 & 255,\n        this.hi >>> 24\n    );\n};\n\n/**\n * Zig-zag encodes this long bits.\n * @returns {util.LongBits} `this`\n */\nLongBits.prototype.zzEncode = function zzEncode() {\n    var mask =   this.hi >> 31;\n    this.hi  = ((this.hi << 1 | this.lo >>> 31) ^ mask) >>> 0;\n    this.lo  = ( this.lo << 1                   ^ mask) >>> 0;\n    return this;\n};\n\n/**\n * Zig-zag decodes this long bits.\n * @returns {util.LongBits} `this`\n */\nLongBits.prototype.zzDecode = function zzDecode() {\n    var mask = -(this.lo & 1);\n    this.lo  = ((this.lo >>> 1 | this.hi << 31) ^ mask) >>> 0;\n    this.hi  = ( this.hi >>> 1                  ^ mask) >>> 0;\n    return this;\n};\n\n/**\n * Calculates the length of this longbits when encoded as a varint.\n * @returns {number} Length\n */\nLongBits.prototype.length = function length() {\n    var part0 =  this.lo,\n        part1 = (this.lo >>> 28 | this.hi << 4) >>> 0,\n        part2 =  this.hi >>> 24;\n    return part2 === 0\n         ? part1 === 0\n           ? part0 < 16384\n             ? part0 < 128 ? 1 : 2\n             : part0 < 2097152 ? 3 : 4\n           : part1 < 16384\n             ? part1 < 128 ? 5 : 6\n             : part1 < 2097152 ? 7 : 8\n         : part2 < 128 ? 9 : 10;\n};\n","\"use strict\";\nvar util = exports;\n\n// used to return a Promise where callback is omitted\nutil.asPromise = require(\"@protobufjs/aspromise\");\n\n// converts to / from base64 encoded strings\nutil.base64 = require(\"@protobufjs/base64\");\n\n// base class of rpc.Service\nutil.EventEmitter = require(\"@protobufjs/eventemitter\");\n\n// float handling accross browsers\nutil.float = require(\"@protobufjs/float\");\n\n// requires modules optionally and hides the call from bundlers\nutil.inquire = require(\"@protobufjs/inquire\");\n\n// converts to / from utf8 encoded strings\nutil.utf8 = require(\"@protobufjs/utf8\");\n\n// provides a node-like buffer pool in the browser\nutil.pool = require(\"@protobufjs/pool\");\n\n// utility to work with the low and high bits of a 64 bit value\nutil.LongBits = require(\"./longbits\");\n\n/**\n * Whether running within node or not.\n * @memberof util\n * @type {boolean}\n */\nutil.isNode = Boolean(typeof global !== \"undefined\"\n                   && global\n                   && global.process\n                   && global.process.versions\n                   && global.process.versions.node);\n\n/**\n * Global object reference.\n * @memberof util\n * @type {Object}\n */\nutil.global = util.isNode && global\n           || typeof window !== \"undefined\" && window\n           || typeof self   !== \"undefined\" && self\n           || this; // eslint-disable-line no-invalid-this\n\n/**\n * An immuable empty array.\n * @memberof util\n * @type {Array.<*>}\n * @const\n */\nutil.emptyArray = Object.freeze ? Object.freeze([]) : /* istanbul ignore next */ []; // used on prototypes\n\n/**\n * An immutable empty object.\n * @type {Object}\n * @const\n */\nutil.emptyObject = Object.freeze ? Object.freeze({}) : /* istanbul ignore next */ {}; // used on prototypes\n\n/**\n * Tests if the specified value is an integer.\n * @function\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is an integer\n */\nutil.isInteger = Number.isInteger || /* istanbul ignore next */ function isInteger(value) {\n    return typeof value === \"number\" && isFinite(value) && Math.floor(value) === value;\n};\n\n/**\n * Tests if the specified value is a string.\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is a string\n */\nutil.isString = function isString(value) {\n    return typeof value === \"string\" || value instanceof String;\n};\n\n/**\n * Tests if the specified value is a non-null object.\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is a non-null object\n */\nutil.isObject = function isObject(value) {\n    return value && typeof value === \"object\";\n};\n\n/**\n * Checks if a property on a message is considered to be present.\n * This is an alias of {@link util.isSet}.\n * @function\n * @param {Object} obj Plain object or message instance\n * @param {string} prop Property name\n * @returns {boolean} `true` if considered to be present, otherwise `false`\n */\nutil.isset =\n\n/**\n * Checks if a property on a message is considered to be present.\n * @param {Object} obj Plain object or message instance\n * @param {string} prop Property name\n * @returns {boolean} `true` if considered to be present, otherwise `false`\n */\nutil.isSet = function isSet(obj, prop) {\n    var value = obj[prop];\n    if (value != null && obj.hasOwnProperty(prop)) // eslint-disable-line eqeqeq, no-prototype-builtins\n        return typeof value !== \"object\" || (Array.isArray(value) ? value.length : Object.keys(value).length) > 0;\n    return false;\n};\n\n/**\n * Any compatible Buffer instance.\n * This is a minimal stand-alone definition of a Buffer instance. The actual type is that exported by node's typings.\n * @interface Buffer\n * @extends Uint8Array\n */\n\n/**\n * Node's Buffer class if available.\n * @type {Constructor<Buffer>}\n */\nutil.Buffer = (function() {\n    try {\n        var Buffer = util.inquire(\"buffer\").Buffer;\n        // refuse to use non-node buffers if not explicitly assigned (perf reasons):\n        return Buffer.prototype.utf8Write ? Buffer : /* istanbul ignore next */ null;\n    } catch (e) {\n        /* istanbul ignore next */\n        return null;\n    }\n})();\n\n// Internal alias of or polyfull for Buffer.from.\nutil._Buffer_from = null;\n\n// Internal alias of or polyfill for Buffer.allocUnsafe.\nutil._Buffer_allocUnsafe = null;\n\n/**\n * Creates a new buffer of whatever type supported by the environment.\n * @param {number|number[]} [sizeOrArray=0] Buffer size or number array\n * @returns {Uint8Array|Buffer} Buffer\n */\nutil.newBuffer = function newBuffer(sizeOrArray) {\n    /* istanbul ignore next */\n    return typeof sizeOrArray === \"number\"\n        ? util.Buffer\n            ? util._Buffer_allocUnsafe(sizeOrArray)\n            : new util.Array(sizeOrArray)\n        : util.Buffer\n            ? util._Buffer_from(sizeOrArray)\n            : typeof Uint8Array === \"undefined\"\n                ? sizeOrArray\n                : new Uint8Array(sizeOrArray);\n};\n\n/**\n * Array implementation used in the browser. `Uint8Array` if supported, otherwise `Array`.\n * @type {Constructor<Uint8Array>}\n */\nutil.Array = typeof Uint8Array !== \"undefined\" ? Uint8Array /* istanbul ignore next */ : Array;\n\n/**\n * Any compatible Long instance.\n * This is a minimal stand-alone definition of a Long instance. The actual type is that exported by long.js.\n * @interface Long\n * @property {number} low Low bits\n * @property {number} high High bits\n * @property {boolean} unsigned Whether unsigned or not\n */\n\n/**\n * Long.js's Long class if available.\n * @type {Constructor<Long>}\n */\nutil.Long = /* istanbul ignore next */ util.global.dcodeIO && /* istanbul ignore next */ util.global.dcodeIO.Long\n         || /* istanbul ignore next */ util.global.Long\n         || util.inquire(\"long\");\n\n/**\n * Regular expression used to verify 2 bit (`bool`) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key2Re = /^true|false|0|1$/;\n\n/**\n * Regular expression used to verify 32 bit (`int32` etc.) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key32Re = /^-?(?:0|[1-9][0-9]*)$/;\n\n/**\n * Regular expression used to verify 64 bit (`int64` etc.) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key64Re = /^(?:[\\\\x00-\\\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;\n\n/**\n * Converts a number or long to an 8 characters long hash string.\n * @param {Long|number} value Value to convert\n * @returns {string} Hash\n */\nutil.longToHash = function longToHash(value) {\n    return value\n        ? util.LongBits.from(value).toHash()\n        : util.LongBits.zeroHash;\n};\n\n/**\n * Converts an 8 characters long hash string to a long or number.\n * @param {string} hash Hash\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {Long|number} Original value\n */\nutil.longFromHash = function longFromHash(hash, unsigned) {\n    var bits = util.LongBits.fromHash(hash);\n    if (util.Long)\n        return util.Long.fromBits(bits.lo, bits.hi, unsigned);\n    return bits.toNumber(Boolean(unsigned));\n};\n\n/**\n * Merges the properties of the source object into the destination object.\n * @memberof util\n * @param {Object.<string,*>} dst Destination object\n * @param {Object.<string,*>} src Source object\n * @param {boolean} [ifNotSet=false] Merges only if the key is not already set\n * @returns {Object.<string,*>} Destination object\n */\nfunction merge(dst, src, ifNotSet) { // used by converters\n    for (var keys = Object.keys(src), i = 0; i < keys.length; ++i)\n        if (dst[keys[i]] === undefined || !ifNotSet)\n            dst[keys[i]] = src[keys[i]];\n    return dst;\n}\n\nutil.merge = merge;\n\n/**\n * Converts the first character of a string to lower case.\n * @param {string} str String to convert\n * @returns {string} Converted string\n */\nutil.lcFirst = function lcFirst(str) {\n    return str.charAt(0).toLowerCase() + str.substring(1);\n};\n\n/**\n * Creates a custom error constructor.\n * @memberof util\n * @param {string} name Error name\n * @returns {Constructor<Error>} Custom error constructor\n */\nfunction newError(name) {\n\n    function CustomError(message, properties) {\n\n        if (!(this instanceof CustomError))\n            return new CustomError(message, properties);\n\n        // Error.call(this, message);\n        // ^ just returns a new error instance because the ctor can be called as a function\n\n        Object.defineProperty(this, \"message\", { get: function() { return message; } });\n\n        /* istanbul ignore next */\n        if (Error.captureStackTrace) // node\n            Error.captureStackTrace(this, CustomError);\n        else\n            Object.defineProperty(this, \"stack\", { value: new Error().stack || \"\" });\n\n        if (properties)\n            merge(this, properties);\n    }\n\n    (CustomError.prototype = Object.create(Error.prototype)).constructor = CustomError;\n\n    Object.defineProperty(CustomError.prototype, \"name\", { get: function() { return name; } });\n\n    CustomError.prototype.toString = function toString() {\n        return this.name + \": \" + this.message;\n    };\n\n    return CustomError;\n}\n\nutil.newError = newError;\n\n/**\n * Constructs a new protocol error.\n * @classdesc Error subclass indicating a protocol specifc error.\n * @memberof util\n * @extends Error\n * @template T extends Message<T>\n * @constructor\n * @param {string} message Error message\n * @param {Object.<string,*>} [properties] Additional properties\n * @example\n * try {\n *     MyMessage.decode(someBuffer); // throws if required fields are missing\n * } catch (e) {\n *     if (e instanceof ProtocolError && e.instance)\n *         console.log(\"decoded so far: \" + JSON.stringify(e.instance));\n * }\n */\nutil.ProtocolError = newError(\"ProtocolError\");\n\n/**\n * So far decoded message instance.\n * @name util.ProtocolError#instance\n * @type {Message<T>}\n */\n\n/**\n * A OneOf getter as returned by {@link util.oneOfGetter}.\n * @typedef OneOfGetter\n * @type {function}\n * @returns {string|undefined} Set field name, if any\n */\n\n/**\n * Builds a getter for a oneof's present field name.\n * @param {string[]} fieldNames Field names\n * @returns {OneOfGetter} Unbound getter\n */\nutil.oneOfGetter = function getOneOf(fieldNames) {\n    var fieldMap = {};\n    for (var i = 0; i < fieldNames.length; ++i)\n        fieldMap[fieldNames[i]] = 1;\n\n    /**\n     * @returns {string|undefined} Set field name, if any\n     * @this Object\n     * @ignore\n     */\n    return function() { // eslint-disable-line consistent-return\n        for (var keys = Object.keys(this), i = keys.length - 1; i > -1; --i)\n            if (fieldMap[keys[i]] === 1 && this[keys[i]] !== undefined && this[keys[i]] !== null)\n                return keys[i];\n    };\n};\n\n/**\n * A OneOf setter as returned by {@link util.oneOfSetter}.\n * @typedef OneOfSetter\n * @type {function}\n * @param {string|undefined} value Field name\n * @returns {undefined}\n */\n\n/**\n * Builds a setter for a oneof's present field name.\n * @param {string[]} fieldNames Field names\n * @returns {OneOfSetter} Unbound setter\n */\nutil.oneOfSetter = function setOneOf(fieldNames) {\n\n    /**\n     * @param {string} name Field name\n     * @returns {undefined}\n     * @this Object\n     * @ignore\n     */\n    return function(name) {\n        for (var i = 0; i < fieldNames.length; ++i)\n            if (fieldNames[i] !== name)\n                delete this[fieldNames[i]];\n    };\n};\n\n/**\n * Default conversion options used for {@link Message#toJSON} implementations.\n *\n * These options are close to proto3's JSON mapping with the exception that internal types like Any are handled just like messages. More precisely:\n *\n * - Longs become strings\n * - Enums become string keys\n * - Bytes become base64 encoded strings\n * - (Sub-)Messages become plain objects\n * - Maps become plain objects with all string keys\n * - Repeated fields become arrays\n * - NaN and Infinity for float and double fields become strings\n *\n * @type {IConversionOptions}\n * @see https://developers.google.com/protocol-buffers/docs/proto3?hl=en#json\n */\nutil.toJSONOptions = {\n    longs: String,\n    enums: String,\n    bytes: String,\n    json: true\n};\n\n// Sets up buffer utility according to the environment (called in index-minimal)\nutil._configure = function() {\n    var Buffer = util.Buffer;\n    /* istanbul ignore if */\n    if (!Buffer) {\n        util._Buffer_from = util._Buffer_allocUnsafe = null;\n        return;\n    }\n    // because node 4.x buffers are incompatible & immutable\n    // see: https://github.com/dcodeIO/protobuf.js/pull/665\n    util._Buffer_from = Buffer.from !== Uint8Array.from && Buffer.from ||\n        /* istanbul ignore next */\n        function Buffer_from(value, encoding) {\n            return new Buffer(value, encoding);\n        };\n    util._Buffer_allocUnsafe = Buffer.allocUnsafe ||\n        /* istanbul ignore next */\n        function Buffer_allocUnsafe(size) {\n            return new Buffer(size);\n        };\n};\n","\"use strict\";\nmodule.exports = Writer;\n\nvar util      = require(\"./util/minimal\");\n\nvar BufferWriter; // cyclic\n\nvar LongBits  = util.LongBits,\n    base64    = util.base64,\n    utf8      = util.utf8;\n\n/**\n * Constructs a new writer operation instance.\n * @classdesc Scheduled writer operation.\n * @constructor\n * @param {function(*, Uint8Array, number)} fn Function to call\n * @param {number} len Value byte length\n * @param {*} val Value to write\n * @ignore\n */\nfunction Op(fn, len, val) {\n\n    /**\n     * Function to call.\n     * @type {function(Uint8Array, number, *)}\n     */\n    this.fn = fn;\n\n    /**\n     * Value byte length.\n     * @type {number}\n     */\n    this.len = len;\n\n    /**\n     * Next operation.\n     * @type {Writer.Op|undefined}\n     */\n    this.next = undefined;\n\n    /**\n     * Value to write.\n     * @type {*}\n     */\n    this.val = val; // type varies\n}\n\n/* istanbul ignore next */\nfunction noop() {} // eslint-disable-line no-empty-function\n\n/**\n * Constructs a new writer state instance.\n * @classdesc Copied writer state.\n * @memberof Writer\n * @constructor\n * @param {Writer} writer Writer to copy state from\n * @ignore\n */\nfunction State(writer) {\n\n    /**\n     * Current head.\n     * @type {Writer.Op}\n     */\n    this.head = writer.head;\n\n    /**\n     * Current tail.\n     * @type {Writer.Op}\n     */\n    this.tail = writer.tail;\n\n    /**\n     * Current buffer length.\n     * @type {number}\n     */\n    this.len = writer.len;\n\n    /**\n     * Next state.\n     * @type {State|null}\n     */\n    this.next = writer.states;\n}\n\n/**\n * Constructs a new writer instance.\n * @classdesc Wire format writer using `Uint8Array` if available, otherwise `Array`.\n * @constructor\n */\nfunction Writer() {\n\n    /**\n     * Current length.\n     * @type {number}\n     */\n    this.len = 0;\n\n    /**\n     * Operations head.\n     * @type {Object}\n     */\n    this.head = new Op(noop, 0, 0);\n\n    /**\n     * Operations tail\n     * @type {Object}\n     */\n    this.tail = this.head;\n\n    /**\n     * Linked forked states.\n     * @type {Object|null}\n     */\n    this.states = null;\n\n    // When a value is written, the writer calculates its byte length and puts it into a linked\n    // list of operations to perform when finish() is called. This both allows us to allocate\n    // buffers of the exact required size and reduces the amount of work we have to do compared\n    // to first calculating over objects and then encoding over objects. In our case, the encoding\n    // part is just a linked list walk calling operations with already prepared values.\n}\n\nvar create = function create() {\n    return util.Buffer\n        ? function create_buffer_setup() {\n            return (Writer.create = function create_buffer() {\n                return new BufferWriter();\n            })();\n        }\n        /* istanbul ignore next */\n        : function create_array() {\n            return new Writer();\n        };\n};\n\n/**\n * Creates a new writer.\n * @function\n * @returns {BufferWriter|Writer} A {@link BufferWriter} when Buffers are supported, otherwise a {@link Writer}\n */\nWriter.create = create();\n\n/**\n * Allocates a buffer of the specified size.\n * @param {number} size Buffer size\n * @returns {Uint8Array} Buffer\n */\nWriter.alloc = function alloc(size) {\n    return new util.Array(size);\n};\n\n// Use Uint8Array buffer pool in the browser, just like node does with buffers\n/* istanbul ignore else */\nif (util.Array !== Array)\n    Writer.alloc = util.pool(Writer.alloc, util.Array.prototype.subarray);\n\n/**\n * Pushes a new operation to the queue.\n * @param {function(Uint8Array, number, *)} fn Function to call\n * @param {number} len Value byte length\n * @param {number} val Value to write\n * @returns {Writer} `this`\n * @private\n */\nWriter.prototype._push = function push(fn, len, val) {\n    this.tail = this.tail.next = new Op(fn, len, val);\n    this.len += len;\n    return this;\n};\n\nfunction writeByte(val, buf, pos) {\n    buf[pos] = val & 255;\n}\n\nfunction writeVarint32(val, buf, pos) {\n    while (val > 127) {\n        buf[pos++] = val & 127 | 128;\n        val >>>= 7;\n    }\n    buf[pos] = val;\n}\n\n/**\n * Constructs a new varint writer operation instance.\n * @classdesc Scheduled varint writer operation.\n * @extends Op\n * @constructor\n * @param {number} len Value byte length\n * @param {number} val Value to write\n * @ignore\n */\nfunction VarintOp(len, val) {\n    this.len = len;\n    this.next = undefined;\n    this.val = val;\n}\n\nVarintOp.prototype = Object.create(Op.prototype);\nVarintOp.prototype.fn = writeVarint32;\n\n/**\n * Writes an unsigned 32 bit value as a varint.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.uint32 = function write_uint32(value) {\n    // here, the call to this.push has been inlined and a varint specific Op subclass is used.\n    // uint32 is by far the most frequently used operation and benefits significantly from this.\n    this.len += (this.tail = this.tail.next = new VarintOp(\n        (value = value >>> 0)\n                < 128       ? 1\n        : value < 16384     ? 2\n        : value < 2097152   ? 3\n        : value < 268435456 ? 4\n        :                     5,\n    value)).len;\n    return this;\n};\n\n/**\n * Writes a signed 32 bit value as a varint.\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.int32 = function write_int32(value) {\n    return value < 0\n        ? this._push(writeVarint64, 10, LongBits.fromNumber(value)) // 10 bytes per spec\n        : this.uint32(value);\n};\n\n/**\n * Writes a 32 bit value as a varint, zig-zag encoded.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.sint32 = function write_sint32(value) {\n    return this.uint32((value << 1 ^ value >> 31) >>> 0);\n};\n\nfunction writeVarint64(val, buf, pos) {\n    while (val.hi) {\n        buf[pos++] = val.lo & 127 | 128;\n        val.lo = (val.lo >>> 7 | val.hi << 25) >>> 0;\n        val.hi >>>= 7;\n    }\n    while (val.lo > 127) {\n        buf[pos++] = val.lo & 127 | 128;\n        val.lo = val.lo >>> 7;\n    }\n    buf[pos++] = val.lo;\n}\n\n/**\n * Writes an unsigned 64 bit value as a varint.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.uint64 = function write_uint64(value) {\n    var bits = LongBits.from(value);\n    return this._push(writeVarint64, bits.length(), bits);\n};\n\n/**\n * Writes a signed 64 bit value as a varint.\n * @function\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.int64 = Writer.prototype.uint64;\n\n/**\n * Writes a signed 64 bit value as a varint, zig-zag encoded.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.sint64 = function write_sint64(value) {\n    var bits = LongBits.from(value).zzEncode();\n    return this._push(writeVarint64, bits.length(), bits);\n};\n\n/**\n * Writes a boolish value as a varint.\n * @param {boolean} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.bool = function write_bool(value) {\n    return this._push(writeByte, 1, value ? 1 : 0);\n};\n\nfunction writeFixed32(val, buf, pos) {\n    buf[pos    ] =  val         & 255;\n    buf[pos + 1] =  val >>> 8   & 255;\n    buf[pos + 2] =  val >>> 16  & 255;\n    buf[pos + 3] =  val >>> 24;\n}\n\n/**\n * Writes an unsigned 32 bit value as fixed 32 bits.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.fixed32 = function write_fixed32(value) {\n    return this._push(writeFixed32, 4, value >>> 0);\n};\n\n/**\n * Writes a signed 32 bit value as fixed 32 bits.\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.sfixed32 = Writer.prototype.fixed32;\n\n/**\n * Writes an unsigned 64 bit value as fixed 64 bits.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.fixed64 = function write_fixed64(value) {\n    var bits = LongBits.from(value);\n    return this._push(writeFixed32, 4, bits.lo)._push(writeFixed32, 4, bits.hi);\n};\n\n/**\n * Writes a signed 64 bit value as fixed 64 bits.\n * @function\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.sfixed64 = Writer.prototype.fixed64;\n\n/**\n * Writes a float (32 bit).\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.float = function write_float(value) {\n    return this._push(util.float.writeFloatLE, 4, value);\n};\n\n/**\n * Writes a double (64 bit float).\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.double = function write_double(value) {\n    return this._push(util.float.writeDoubleLE, 8, value);\n};\n\nvar writeBytes = util.Array.prototype.set\n    ? function writeBytes_set(val, buf, pos) {\n        buf.set(val, pos); // also works for plain array values\n    }\n    /* istanbul ignore next */\n    : function writeBytes_for(val, buf, pos) {\n        for (var i = 0; i < val.length; ++i)\n            buf[pos + i] = val[i];\n    };\n\n/**\n * Writes a sequence of bytes.\n * @param {Uint8Array|string} value Buffer or base64 encoded string to write\n * @returns {Writer} `this`\n */\nWriter.prototype.bytes = function write_bytes(value) {\n    var len = value.length >>> 0;\n    if (!len)\n        return this._push(writeByte, 1, 0);\n    if (util.isString(value)) {\n        var buf = Writer.alloc(len = base64.length(value));\n        base64.decode(value, buf, 0);\n        value = buf;\n    }\n    return this.uint32(len)._push(writeBytes, len, value);\n};\n\n/**\n * Writes a string.\n * @param {string} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.string = function write_string(value) {\n    var len = utf8.length(value);\n    return len\n        ? this.uint32(len)._push(utf8.write, len, value)\n        : this._push(writeByte, 1, 0);\n};\n\n/**\n * Forks this writer's state by pushing it to a stack.\n * Calling {@link Writer#reset|reset} or {@link Writer#ldelim|ldelim} resets the writer to the previous state.\n * @returns {Writer} `this`\n */\nWriter.prototype.fork = function fork() {\n    this.states = new State(this);\n    this.head = this.tail = new Op(noop, 0, 0);\n    this.len = 0;\n    return this;\n};\n\n/**\n * Resets this instance to the last state.\n * @returns {Writer} `this`\n */\nWriter.prototype.reset = function reset() {\n    if (this.states) {\n        this.head   = this.states.head;\n        this.tail   = this.states.tail;\n        this.len    = this.states.len;\n        this.states = this.states.next;\n    } else {\n        this.head = this.tail = new Op(noop, 0, 0);\n        this.len  = 0;\n    }\n    return this;\n};\n\n/**\n * Resets to the last state and appends the fork state's current write length as a varint followed by its operations.\n * @returns {Writer} `this`\n */\nWriter.prototype.ldelim = function ldelim() {\n    var head = this.head,\n        tail = this.tail,\n        len  = this.len;\n    this.reset().uint32(len);\n    if (len) {\n        this.tail.next = head.next; // skip noop\n        this.tail = tail;\n        this.len += len;\n    }\n    return this;\n};\n\n/**\n * Finishes the write operation.\n * @returns {Uint8Array} Finished buffer\n */\nWriter.prototype.finish = function finish() {\n    var head = this.head.next, // skip noop\n        buf  = this.constructor.alloc(this.len),\n        pos  = 0;\n    while (head) {\n        head.fn(head.val, buf, pos);\n        pos += head.len;\n        head = head.next;\n    }\n    // this.head = this.tail = null;\n    return buf;\n};\n\nWriter._configure = function(BufferWriter_) {\n    BufferWriter = BufferWriter_;\n    Writer.create = create();\n    BufferWriter._configure();\n};\n","\"use strict\";\nmodule.exports = BufferWriter;\n\n// extends Writer\nvar Writer = require(\"./writer\");\n(BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;\n\nvar util = require(\"./util/minimal\");\n\n/**\n * Constructs a new buffer writer instance.\n * @classdesc Wire format writer using node buffers.\n * @extends Writer\n * @constructor\n */\nfunction BufferWriter() {\n    Writer.call(this);\n}\n\nBufferWriter._configure = function () {\n    /**\n     * Allocates a buffer of the specified size.\n     * @function\n     * @param {number} size Buffer size\n     * @returns {Buffer} Buffer\n     */\n    BufferWriter.alloc = util._Buffer_allocUnsafe;\n\n    BufferWriter.writeBytesBuffer = util.Buffer && util.Buffer.prototype instanceof Uint8Array && util.Buffer.prototype.set.name === \"set\"\n        ? function writeBytesBuffer_set(val, buf, pos) {\n          buf.set(val, pos); // faster than copy (requires node >= 4 where Buffers extend Uint8Array and set is properly inherited)\n          // also works for plain array values\n        }\n        /* istanbul ignore next */\n        : function writeBytesBuffer_copy(val, buf, pos) {\n          if (val.copy) // Buffer values\n            val.copy(buf, pos, 0, val.length);\n          else for (var i = 0; i < val.length;) // plain array values\n            buf[pos++] = val[i++];\n        };\n};\n\n\n/**\n * @override\n */\nBufferWriter.prototype.bytes = function write_bytes_buffer(value) {\n    if (util.isString(value))\n        value = util._Buffer_from(value, \"base64\");\n    var len = value.length >>> 0;\n    this.uint32(len);\n    if (len)\n        this._push(BufferWriter.writeBytesBuffer, len, value);\n    return this;\n};\n\nfunction writeStringBuffer(val, buf, pos) {\n    if (val.length < 40) // plain js is faster for short strings (probably due to redundant assertions)\n        util.utf8.write(val, buf, pos);\n    else if (buf.utf8Write)\n        buf.utf8Write(val, pos);\n    else\n        buf.write(val, pos);\n}\n\n/**\n * @override\n */\nBufferWriter.prototype.string = function write_string_buffer(value) {\n    var len = util.Buffer.byteLength(value);\n    this.uint32(len);\n    if (len)\n        this._push(writeStringBuffer, len, value);\n    return this;\n};\n\n\n/**\n * Finishes the write operation.\n * @name BufferWriter#finish\n * @function\n * @returns {Buffer} Finished buffer\n */\n\nBufferWriter._configure();\n","// minimal library entry point.\n\n\"use strict\";\nmodule.exports = require(\"./src/index-minimal\");\n","\"use strict\";\nvar protobuf = exports;\n\n/**\n * Build type, one of `\"full\"`, `\"light\"` or `\"minimal\"`.\n * @name build\n * @type {string}\n * @const\n */\nprotobuf.build = \"minimal\";\n\n// Serialization\nprotobuf.Writer       = require(\"./writer\");\nprotobuf.BufferWriter = require(\"./writer_buffer\");\nprotobuf.Reader       = require(\"./reader\");\nprotobuf.BufferReader = require(\"./reader_buffer\");\n\n// Utility\nprotobuf.util         = require(\"./util/minimal\");\nprotobuf.rpc          = require(\"./rpc\");\nprotobuf.roots        = require(\"./roots\");\nprotobuf.configure    = configure;\n\n/* istanbul ignore next */\n/**\n * Reconfigures the library according to the environment.\n * @returns {undefined}\n */\nfunction configure() {\n    protobuf.util._configure();\n    protobuf.Writer._configure(protobuf.BufferWriter);\n    protobuf.Reader._configure(protobuf.BufferReader);\n}\n\n// Set up buffer utility according to the environment\nconfigure();\n","\"use strict\";\nmodule.exports = Reader;\n\nvar util      = require(\"./util/minimal\");\n\nvar BufferReader; // cyclic\n\nvar LongBits  = util.LongBits,\n    utf8      = util.utf8;\n\n/* istanbul ignore next */\nfunction indexOutOfRange(reader, writeLength) {\n    return RangeError(\"index out of range: \" + reader.pos + \" + \" + (writeLength || 1) + \" > \" + reader.len);\n}\n\n/**\n * Constructs a new reader instance using the specified buffer.\n * @classdesc Wire format reader using `Uint8Array` if available, otherwise `Array`.\n * @constructor\n * @param {Uint8Array} buffer Buffer to read from\n */\nfunction Reader(buffer) {\n\n    /**\n     * Read buffer.\n     * @type {Uint8Array}\n     */\n    this.buf = buffer;\n\n    /**\n     * Read buffer position.\n     * @type {number}\n     */\n    this.pos = 0;\n\n    /**\n     * Read buffer length.\n     * @type {number}\n     */\n    this.len = buffer.length;\n}\n\nvar create_array = typeof Uint8Array !== \"undefined\"\n    ? function create_typed_array(buffer) {\n        if (buffer instanceof Uint8Array || Array.isArray(buffer))\n            return new Reader(buffer);\n        throw Error(\"illegal buffer\");\n    }\n    /* istanbul ignore next */\n    : function create_array(buffer) {\n        if (Array.isArray(buffer))\n            return new Reader(buffer);\n        throw Error(\"illegal buffer\");\n    };\n\nvar create = function create() {\n    return util.Buffer\n        ? function create_buffer_setup(buffer) {\n            return (Reader.create = function create_buffer(buffer) {\n                return util.Buffer.isBuffer(buffer)\n                    ? new BufferReader(buffer)\n                    /* istanbul ignore next */\n                    : create_array(buffer);\n            })(buffer);\n        }\n        /* istanbul ignore next */\n        : create_array;\n};\n\n/**\n * Creates a new reader using the specified buffer.\n * @function\n * @param {Uint8Array|Buffer} buffer Buffer to read from\n * @returns {Reader|BufferReader} A {@link BufferReader} if `buffer` is a Buffer, otherwise a {@link Reader}\n * @throws {Error} If `buffer` is not a valid buffer\n */\nReader.create = create();\n\nReader.prototype._slice = util.Array.prototype.subarray || /* istanbul ignore next */ util.Array.prototype.slice;\n\n/**\n * Reads a varint as an unsigned 32 bit value.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.uint32 = (function read_uint32_setup() {\n    var value = 4294967295; // optimizer type-hint, tends to deopt otherwise (?!)\n    return function read_uint32() {\n        value = (         this.buf[this.pos] & 127       ) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) <<  7) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) << 14) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) << 21) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] &  15) << 28) >>> 0; if (this.buf[this.pos++] < 128) return value;\n\n        /* istanbul ignore if */\n        if ((this.pos += 5) > this.len) {\n            this.pos = this.len;\n            throw indexOutOfRange(this, 10);\n        }\n        return value;\n    };\n})();\n\n/**\n * Reads a varint as a signed 32 bit value.\n * @returns {number} Value read\n */\nReader.prototype.int32 = function read_int32() {\n    return this.uint32() | 0;\n};\n\n/**\n * Reads a zig-zag encoded varint as a signed 32 bit value.\n * @returns {number} Value read\n */\nReader.prototype.sint32 = function read_sint32() {\n    var value = this.uint32();\n    return value >>> 1 ^ -(value & 1) | 0;\n};\n\n/* eslint-disable no-invalid-this */\n\nfunction readLongVarint() {\n    // tends to deopt with local vars for octet etc.\n    var bits = new LongBits(0, 0);\n    var i = 0;\n    if (this.len - this.pos > 4) { // fast route (lo)\n        for (; i < 4; ++i) {\n            // 1st..4th\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n        // 5th\n        bits.lo = (bits.lo | (this.buf[this.pos] & 127) << 28) >>> 0;\n        bits.hi = (bits.hi | (this.buf[this.pos] & 127) >>  4) >>> 0;\n        if (this.buf[this.pos++] < 128)\n            return bits;\n        i = 0;\n    } else {\n        for (; i < 3; ++i) {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n            // 1st..3th\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n        // 4th\n        bits.lo = (bits.lo | (this.buf[this.pos++] & 127) << i * 7) >>> 0;\n        return bits;\n    }\n    if (this.len - this.pos > 4) { // fast route (hi)\n        for (; i < 5; ++i) {\n            // 6th..10th\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n    } else {\n        for (; i < 5; ++i) {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n            // 6th..10th\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n    }\n    /* istanbul ignore next */\n    throw Error(\"invalid varint encoding\");\n}\n\n/* eslint-enable no-invalid-this */\n\n/**\n * Reads a varint as a signed 64 bit value.\n * @name Reader#int64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a varint as an unsigned 64 bit value.\n * @name Reader#uint64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a zig-zag encoded varint as a signed 64 bit value.\n * @name Reader#sint64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a varint as a boolean.\n * @returns {boolean} Value read\n */\nReader.prototype.bool = function read_bool() {\n    return this.uint32() !== 0;\n};\n\nfunction readFixed32_end(buf, end) { // note that this uses `end`, not `pos`\n    return (buf[end - 4]\n          | buf[end - 3] << 8\n          | buf[end - 2] << 16\n          | buf[end - 1] << 24) >>> 0;\n}\n\n/**\n * Reads fixed 32 bits as an unsigned 32 bit integer.\n * @returns {number} Value read\n */\nReader.prototype.fixed32 = function read_fixed32() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    return readFixed32_end(this.buf, this.pos += 4);\n};\n\n/**\n * Reads fixed 32 bits as a signed 32 bit integer.\n * @returns {number} Value read\n */\nReader.prototype.sfixed32 = function read_sfixed32() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    return readFixed32_end(this.buf, this.pos += 4) | 0;\n};\n\n/* eslint-disable no-invalid-this */\n\nfunction readFixed64(/* this: Reader */) {\n\n    /* istanbul ignore if */\n    if (this.pos + 8 > this.len)\n        throw indexOutOfRange(this, 8);\n\n    return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));\n}\n\n/* eslint-enable no-invalid-this */\n\n/**\n * Reads fixed 64 bits.\n * @name Reader#fixed64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads zig-zag encoded fixed 64 bits.\n * @name Reader#sfixed64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a float (32 bit) as a number.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.float = function read_float() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    var value = util.float.readFloatLE(this.buf, this.pos);\n    this.pos += 4;\n    return value;\n};\n\n/**\n * Reads a double (64 bit float) as a number.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.double = function read_double() {\n\n    /* istanbul ignore if */\n    if (this.pos + 8 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    var value = util.float.readDoubleLE(this.buf, this.pos);\n    this.pos += 8;\n    return value;\n};\n\n/**\n * Reads a sequence of bytes preceeded by its length as a varint.\n * @returns {Uint8Array} Value read\n */\nReader.prototype.bytes = function read_bytes() {\n    var length = this.uint32(),\n        start  = this.pos,\n        end    = this.pos + length;\n\n    /* istanbul ignore if */\n    if (end > this.len)\n        throw indexOutOfRange(this, length);\n\n    this.pos += length;\n    if (Array.isArray(this.buf)) // plain array\n        return this.buf.slice(start, end);\n    return start === end // fix for IE 10/Win8 and others' subarray returning array of size 1\n        ? new this.buf.constructor(0)\n        : this._slice.call(this.buf, start, end);\n};\n\n/**\n * Reads a string preceeded by its byte length as a varint.\n * @returns {string} Value read\n */\nReader.prototype.string = function read_string() {\n    var bytes = this.bytes();\n    return utf8.read(bytes, 0, bytes.length);\n};\n\n/**\n * Skips the specified number of bytes if specified, otherwise skips a varint.\n * @param {number} [length] Length if known, otherwise a varint is assumed\n * @returns {Reader} `this`\n */\nReader.prototype.skip = function skip(length) {\n    if (typeof length === \"number\") {\n        /* istanbul ignore if */\n        if (this.pos + length > this.len)\n            throw indexOutOfRange(this, length);\n        this.pos += length;\n    } else {\n        do {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n        } while (this.buf[this.pos++] & 128);\n    }\n    return this;\n};\n\n/**\n * Skips the next element of the specified wire type.\n * @param {number} wireType Wire type received\n * @returns {Reader} `this`\n */\nReader.prototype.skipType = function(wireType) {\n    switch (wireType) {\n        case 0:\n            this.skip();\n            break;\n        case 1:\n            this.skip(8);\n            break;\n        case 2:\n            this.skip(this.uint32());\n            break;\n        case 3:\n            while ((wireType = this.uint32() & 7) !== 4) {\n                this.skipType(wireType);\n            }\n            break;\n        case 5:\n            this.skip(4);\n            break;\n\n        /* istanbul ignore next */\n        default:\n            throw Error(\"invalid wire type \" + wireType + \" at offset \" + this.pos);\n    }\n    return this;\n};\n\nReader._configure = function(BufferReader_) {\n    BufferReader = BufferReader_;\n    Reader.create = create();\n    BufferReader._configure();\n\n    var fn = util.Long ? \"toLong\" : /* istanbul ignore next */ \"toNumber\";\n    util.merge(Reader.prototype, {\n\n        int64: function read_int64() {\n            return readLongVarint.call(this)[fn](false);\n        },\n\n        uint64: function read_uint64() {\n            return readLongVarint.call(this)[fn](true);\n        },\n\n        sint64: function read_sint64() {\n            return readLongVarint.call(this).zzDecode()[fn](false);\n        },\n\n        fixed64: function read_fixed64() {\n            return readFixed64.call(this)[fn](true);\n        },\n\n        sfixed64: function read_sfixed64() {\n            return readFixed64.call(this)[fn](false);\n        }\n\n    });\n};\n","\"use strict\";\nmodule.exports = BufferReader;\n\n// extends Reader\nvar Reader = require(\"./reader\");\n(BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;\n\nvar util = require(\"./util/minimal\");\n\n/**\n * Constructs a new buffer reader instance.\n * @classdesc Wire format reader using node buffers.\n * @extends Reader\n * @constructor\n * @param {Buffer} buffer Buffer to read from\n */\nfunction BufferReader(buffer) {\n    Reader.call(this, buffer);\n\n    /**\n     * Read buffer.\n     * @name BufferReader#buf\n     * @type {Buffer}\n     */\n}\n\nBufferReader._configure = function () {\n    /* istanbul ignore else */\n    if (util.Buffer)\n        BufferReader.prototype._slice = util.Buffer.prototype.slice;\n};\n\n\n/**\n * @override\n */\nBufferReader.prototype.string = function read_string_buffer() {\n    var len = this.uint32(); // modifies pos\n    return this.buf.utf8Slice\n        ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + len, this.len))\n        : this.buf.toString(\"utf-8\", this.pos, this.pos = Math.min(this.pos + len, this.len));\n};\n\n/**\n * Reads a sequence of bytes preceeded by its length as a varint.\n * @name BufferReader#bytes\n * @function\n * @returns {Buffer} Value read\n */\n\nBufferReader._configure();\n","\"use strict\";\nmodule.exports = {};\n\n/**\n * Named roots.\n * This is where pbjs stores generated structures (the option `-r, --root` specifies a name).\n * Can also be used manually to make roots available across modules.\n * @name roots\n * @type {Object.<string,Root>}\n * @example\n * // pbjs -r myroot -o compiled.js ...\n *\n * // in another module:\n * require(\"./compiled.js\");\n *\n * // in any subsequent module:\n * var root = protobuf.roots[\"myroot\"];\n */\n","\"use strict\";\n\n/**\n * Streaming RPC helpers.\n * @namespace\n */\nvar rpc = exports;\n\n/**\n * RPC implementation passed to {@link Service#create} performing a service request on network level, i.e. by utilizing http requests or websockets.\n * @typedef RPCImpl\n * @type {function}\n * @param {Method|rpc.ServiceMethod<Message<{}>,Message<{}>>} method Reflected or static method being called\n * @param {Uint8Array} requestData Request data\n * @param {RPCImplCallback} callback Callback function\n * @returns {undefined}\n * @example\n * function rpcImpl(method, requestData, callback) {\n *     if (protobuf.util.lcFirst(method.name) !== \"myMethod\") // compatible with static code\n *         throw Error(\"no such method\");\n *     asynchronouslyObtainAResponse(requestData, function(err, responseData) {\n *         callback(err, responseData);\n *     });\n * }\n */\n\n/**\n * Node-style callback as used by {@link RPCImpl}.\n * @typedef RPCImplCallback\n * @type {function}\n * @param {Error|null} error Error, if any, otherwise `null`\n * @param {Uint8Array|null} [response] Response data or `null` to signal end of stream, if there hasn't been an error\n * @returns {undefined}\n */\n\nrpc.Service = require(\"./rpc/service\");\n","\"use strict\";\nmodule.exports = Service;\n\nvar util = require(\"../util/minimal\");\n\n// Extends EventEmitter\n(Service.prototype = Object.create(util.EventEmitter.prototype)).constructor = Service;\n\n/**\n * A service method callback as used by {@link rpc.ServiceMethod|ServiceMethod}.\n *\n * Differs from {@link RPCImplCallback} in that it is an actual callback of a service method which may not return `response = null`.\n * @typedef rpc.ServiceMethodCallback\n * @template TRes extends Message<TRes>\n * @type {function}\n * @param {Error|null} error Error, if any\n * @param {TRes} [response] Response message\n * @returns {undefined}\n */\n\n/**\n * A service method part of a {@link rpc.Service} as created by {@link Service.create}.\n * @typedef rpc.ServiceMethod\n * @template TReq extends Message<TReq>\n * @template TRes extends Message<TRes>\n * @type {function}\n * @param {TReq|Properties<TReq>} request Request message or plain object\n * @param {rpc.ServiceMethodCallback<TRes>} [callback] Node-style callback called with the error, if any, and the response message\n * @returns {Promise<Message<TRes>>} Promise if `callback` has been omitted, otherwise `undefined`\n */\n\n/**\n * Constructs a new RPC service instance.\n * @classdesc An RPC service as returned by {@link Service#create}.\n * @exports rpc.Service\n * @extends util.EventEmitter\n * @constructor\n * @param {RPCImpl} rpcImpl RPC implementation\n * @param {boolean} [requestDelimited=false] Whether requests are length-delimited\n * @param {boolean} [responseDelimited=false] Whether responses are length-delimited\n */\nfunction Service(rpcImpl, requestDelimited, responseDelimited) {\n\n    if (typeof rpcImpl !== \"function\")\n        throw TypeError(\"rpcImpl must be a function\");\n\n    util.EventEmitter.call(this);\n\n    /**\n     * RPC implementation. Becomes `null` once the service is ended.\n     * @type {RPCImpl|null}\n     */\n    this.rpcImpl = rpcImpl;\n\n    /**\n     * Whether requests are length-delimited.\n     * @type {boolean}\n     */\n    this.requestDelimited = Boolean(requestDelimited);\n\n    /**\n     * Whether responses are length-delimited.\n     * @type {boolean}\n     */\n    this.responseDelimited = Boolean(responseDelimited);\n}\n\n/**\n * Calls a service method through {@link rpc.Service#rpcImpl|rpcImpl}.\n * @param {Method|rpc.ServiceMethod<TReq,TRes>} method Reflected or static method\n * @param {Constructor<TReq>} requestCtor Request constructor\n * @param {Constructor<TRes>} responseCtor Response constructor\n * @param {TReq|Properties<TReq>} request Request message or plain object\n * @param {rpc.ServiceMethodCallback<TRes>} callback Service callback\n * @returns {undefined}\n * @template TReq extends Message<TReq>\n * @template TRes extends Message<TRes>\n */\nService.prototype.rpcCall = function rpcCall(method, requestCtor, responseCtor, request, callback) {\n\n    if (!request)\n        throw TypeError(\"request must be specified\");\n\n    var self = this;\n    if (!callback)\n        return util.asPromise(rpcCall, self, method, requestCtor, responseCtor, request);\n\n    if (!self.rpcImpl) {\n        setTimeout(function() { callback(Error(\"already ended\")); }, 0);\n        return undefined;\n    }\n\n    try {\n        return self.rpcImpl(\n            method,\n            requestCtor[self.requestDelimited ? \"encodeDelimited\" : \"encode\"](request).finish(),\n            function rpcCallback(err, response) {\n\n                if (err) {\n                    self.emit(\"error\", err, method);\n                    return callback(err);\n                }\n\n                if (response === null) {\n                    self.end(/* endedByRPC */ true);\n                    return undefined;\n                }\n\n                if (!(response instanceof responseCtor)) {\n                    try {\n                        response = responseCtor[self.responseDelimited ? \"decodeDelimited\" : \"decode\"](response);\n                    } catch (err) {\n                        self.emit(\"error\", err, method);\n                        return callback(err);\n                    }\n                }\n\n                self.emit(\"data\", response, method);\n                return callback(null, response);\n            }\n        );\n    } catch (err) {\n        self.emit(\"error\", err, method);\n        setTimeout(function() { callback(err); }, 0);\n        return undefined;\n    }\n};\n\n/**\n * Ends this service and emits the `end` event.\n * @param {boolean} [endedByRPC=false] Whether the service has been ended by the RPC implementation.\n * @returns {rpc.Service} `this`\n */\nService.prototype.end = function end(endedByRPC) {\n    if (this.rpcImpl) {\n        if (!endedByRPC) // signal end to rpcImpl\n            this.rpcImpl(null, null, null);\n        this.rpcImpl = null;\n        this.emit(\"end\").off();\n    }\n    return this;\n};\n","\"use strict\";\nmodule.exports = LongBits;\n\nvar util = require(\"../util/minimal\");\n\n/**\n * Constructs new long bits.\n * @classdesc Helper class for working with the low and high bits of a 64 bit value.\n * @memberof util\n * @constructor\n * @param {number} lo Low 32 bits, unsigned\n * @param {number} hi High 32 bits, unsigned\n */\nfunction LongBits(lo, hi) {\n\n    // note that the casts below are theoretically unnecessary as of today, but older statically\n    // generated converter code might still call the ctor with signed 32bits. kept for compat.\n\n    /**\n     * Low bits.\n     * @type {number}\n     */\n    this.lo = lo >>> 0;\n\n    /**\n     * High bits.\n     * @type {number}\n     */\n    this.hi = hi >>> 0;\n}\n\n/**\n * Zero bits.\n * @memberof util.LongBits\n * @type {util.LongBits}\n */\nvar zero = LongBits.zero = new LongBits(0, 0);\n\nzero.toNumber = function() { return 0; };\nzero.zzEncode = zero.zzDecode = function() { return this; };\nzero.length = function() { return 1; };\n\n/**\n * Zero hash.\n * @memberof util.LongBits\n * @type {string}\n */\nvar zeroHash = LongBits.zeroHash = \"\\0\\0\\0\\0\\0\\0\\0\\0\";\n\n/**\n * Constructs new long bits from the specified number.\n * @param {number} value Value\n * @returns {util.LongBits} Instance\n */\nLongBits.fromNumber = function fromNumber(value) {\n    if (value === 0)\n        return zero;\n    var sign = value < 0;\n    if (sign)\n        value = -value;\n    var lo = value >>> 0,\n        hi = (value - lo) / 4294967296 >>> 0;\n    if (sign) {\n        hi = ~hi >>> 0;\n        lo = ~lo >>> 0;\n        if (++lo > 4294967295) {\n            lo = 0;\n            if (++hi > 4294967295)\n                hi = 0;\n        }\n    }\n    return new LongBits(lo, hi);\n};\n\n/**\n * Constructs new long bits from a number, long or string.\n * @param {Long|number|string} value Value\n * @returns {util.LongBits} Instance\n */\nLongBits.from = function from(value) {\n    if (typeof value === \"number\")\n        return LongBits.fromNumber(value);\n    if (util.isString(value)) {\n        /* istanbul ignore else */\n        if (util.Long)\n            value = util.Long.fromString(value);\n        else\n            return LongBits.fromNumber(parseInt(value, 10));\n    }\n    return value.low || value.high ? new LongBits(value.low >>> 0, value.high >>> 0) : zero;\n};\n\n/**\n * Converts this long bits to a possibly unsafe JavaScript number.\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {number} Possibly unsafe number\n */\nLongBits.prototype.toNumber = function toNumber(unsigned) {\n    if (!unsigned && this.hi >>> 31) {\n        var lo = ~this.lo + 1 >>> 0,\n            hi = ~this.hi     >>> 0;\n        if (!lo)\n            hi = hi + 1 >>> 0;\n        return -(lo + hi * 4294967296);\n    }\n    return this.lo + this.hi * 4294967296;\n};\n\n/**\n * Converts this long bits to a long.\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {Long} Long\n */\nLongBits.prototype.toLong = function toLong(unsigned) {\n    return util.Long\n        ? new util.Long(this.lo | 0, this.hi | 0, Boolean(unsigned))\n        /* istanbul ignore next */\n        : { low: this.lo | 0, high: this.hi | 0, unsigned: Boolean(unsigned) };\n};\n\nvar charCodeAt = String.prototype.charCodeAt;\n\n/**\n * Constructs new long bits from the specified 8 characters long hash.\n * @param {string} hash Hash\n * @returns {util.LongBits} Bits\n */\nLongBits.fromHash = function fromHash(hash) {\n    if (hash === zeroHash)\n        return zero;\n    return new LongBits(\n        ( charCodeAt.call(hash, 0)\n        | charCodeAt.call(hash, 1) << 8\n        | charCodeAt.call(hash, 2) << 16\n        | charCodeAt.call(hash, 3) << 24) >>> 0\n    ,\n        ( charCodeAt.call(hash, 4)\n        | charCodeAt.call(hash, 5) << 8\n        | charCodeAt.call(hash, 6) << 16\n        | charCodeAt.call(hash, 7) << 24) >>> 0\n    );\n};\n\n/**\n * Converts this long bits to a 8 characters long hash.\n * @returns {string} Hash\n */\nLongBits.prototype.toHash = function toHash() {\n    return String.fromCharCode(\n        this.lo        & 255,\n        this.lo >>> 8  & 255,\n        this.lo >>> 16 & 255,\n        this.lo >>> 24      ,\n        this.hi        & 255,\n        this.hi >>> 8  & 255,\n        this.hi >>> 16 & 255,\n        this.hi >>> 24\n    );\n};\n\n/**\n * Zig-zag encodes this long bits.\n * @returns {util.LongBits} `this`\n */\nLongBits.prototype.zzEncode = function zzEncode() {\n    var mask =   this.hi >> 31;\n    this.hi  = ((this.hi << 1 | this.lo >>> 31) ^ mask) >>> 0;\n    this.lo  = ( this.lo << 1                   ^ mask) >>> 0;\n    return this;\n};\n\n/**\n * Zig-zag decodes this long bits.\n * @returns {util.LongBits} `this`\n */\nLongBits.prototype.zzDecode = function zzDecode() {\n    var mask = -(this.lo & 1);\n    this.lo  = ((this.lo >>> 1 | this.hi << 31) ^ mask) >>> 0;\n    this.hi  = ( this.hi >>> 1                  ^ mask) >>> 0;\n    return this;\n};\n\n/**\n * Calculates the length of this longbits when encoded as a varint.\n * @returns {number} Length\n */\nLongBits.prototype.length = function length() {\n    var part0 =  this.lo,\n        part1 = (this.lo >>> 28 | this.hi << 4) >>> 0,\n        part2 =  this.hi >>> 24;\n    return part2 === 0\n         ? part1 === 0\n           ? part0 < 16384\n             ? part0 < 128 ? 1 : 2\n             : part0 < 2097152 ? 3 : 4\n           : part1 < 16384\n             ? part1 < 128 ? 5 : 6\n             : part1 < 2097152 ? 7 : 8\n         : part2 < 128 ? 9 : 10;\n};\n","\"use strict\";\nvar util = exports;\n\n// used to return a Promise where callback is omitted\nutil.asPromise = require(\"@protobufjs/aspromise\");\n\n// converts to / from base64 encoded strings\nutil.base64 = require(\"@protobufjs/base64\");\n\n// base class of rpc.Service\nutil.EventEmitter = require(\"@protobufjs/eventemitter\");\n\n// float handling accross browsers\nutil.float = require(\"@protobufjs/float\");\n\n// requires modules optionally and hides the call from bundlers\nutil.inquire = require(\"@protobufjs/inquire\");\n\n// converts to / from utf8 encoded strings\nutil.utf8 = require(\"@protobufjs/utf8\");\n\n// provides a node-like buffer pool in the browser\nutil.pool = require(\"@protobufjs/pool\");\n\n// utility to work with the low and high bits of a 64 bit value\nutil.LongBits = require(\"./longbits\");\n\n/**\n * Whether running within node or not.\n * @memberof util\n * @type {boolean}\n */\nutil.isNode = Boolean(typeof global !== \"undefined\"\n                   && global\n                   && global.process\n                   && global.process.versions\n                   && global.process.versions.node);\n\n/**\n * Global object reference.\n * @memberof util\n * @type {Object}\n */\nutil.global = util.isNode && global\n           || typeof window !== \"undefined\" && window\n           || typeof self   !== \"undefined\" && self\n           || this; // eslint-disable-line no-invalid-this\n\n/**\n * An immuable empty array.\n * @memberof util\n * @type {Array.<*>}\n * @const\n */\nutil.emptyArray = Object.freeze ? Object.freeze([]) : /* istanbul ignore next */ []; // used on prototypes\n\n/**\n * An immutable empty object.\n * @type {Object}\n * @const\n */\nutil.emptyObject = Object.freeze ? Object.freeze({}) : /* istanbul ignore next */ {}; // used on prototypes\n\n/**\n * Tests if the specified value is an integer.\n * @function\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is an integer\n */\nutil.isInteger = Number.isInteger || /* istanbul ignore next */ function isInteger(value) {\n    return typeof value === \"number\" && isFinite(value) && Math.floor(value) === value;\n};\n\n/**\n * Tests if the specified value is a string.\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is a string\n */\nutil.isString = function isString(value) {\n    return typeof value === \"string\" || value instanceof String;\n};\n\n/**\n * Tests if the specified value is a non-null object.\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is a non-null object\n */\nutil.isObject = function isObject(value) {\n    return value && typeof value === \"object\";\n};\n\n/**\n * Checks if a property on a message is considered to be present.\n * This is an alias of {@link util.isSet}.\n * @function\n * @param {Object} obj Plain object or message instance\n * @param {string} prop Property name\n * @returns {boolean} `true` if considered to be present, otherwise `false`\n */\nutil.isset =\n\n/**\n * Checks if a property on a message is considered to be present.\n * @param {Object} obj Plain object or message instance\n * @param {string} prop Property name\n * @returns {boolean} `true` if considered to be present, otherwise `false`\n */\nutil.isSet = function isSet(obj, prop) {\n    var value = obj[prop];\n    if (value != null && obj.hasOwnProperty(prop)) // eslint-disable-line eqeqeq, no-prototype-builtins\n        return typeof value !== \"object\" || (Array.isArray(value) ? value.length : Object.keys(value).length) > 0;\n    return false;\n};\n\n/**\n * Any compatible Buffer instance.\n * This is a minimal stand-alone definition of a Buffer instance. The actual type is that exported by node's typings.\n * @interface Buffer\n * @extends Uint8Array\n */\n\n/**\n * Node's Buffer class if available.\n * @type {Constructor<Buffer>}\n */\nutil.Buffer = (function() {\n    try {\n        var Buffer = util.inquire(\"buffer\").Buffer;\n        // refuse to use non-node buffers if not explicitly assigned (perf reasons):\n        return Buffer.prototype.utf8Write ? Buffer : /* istanbul ignore next */ null;\n    } catch (e) {\n        /* istanbul ignore next */\n        return null;\n    }\n})();\n\n// Internal alias of or polyfull for Buffer.from.\nutil._Buffer_from = null;\n\n// Internal alias of or polyfill for Buffer.allocUnsafe.\nutil._Buffer_allocUnsafe = null;\n\n/**\n * Creates a new buffer of whatever type supported by the environment.\n * @param {number|number[]} [sizeOrArray=0] Buffer size or number array\n * @returns {Uint8Array|Buffer} Buffer\n */\nutil.newBuffer = function newBuffer(sizeOrArray) {\n    /* istanbul ignore next */\n    return typeof sizeOrArray === \"number\"\n        ? util.Buffer\n            ? util._Buffer_allocUnsafe(sizeOrArray)\n            : new util.Array(sizeOrArray)\n        : util.Buffer\n            ? util._Buffer_from(sizeOrArray)\n            : typeof Uint8Array === \"undefined\"\n                ? sizeOrArray\n                : new Uint8Array(sizeOrArray);\n};\n\n/**\n * Array implementation used in the browser. `Uint8Array` if supported, otherwise `Array`.\n * @type {Constructor<Uint8Array>}\n */\nutil.Array = typeof Uint8Array !== \"undefined\" ? Uint8Array /* istanbul ignore next */ : Array;\n\n/**\n * Any compatible Long instance.\n * This is a minimal stand-alone definition of a Long instance. The actual type is that exported by long.js.\n * @interface Long\n * @property {number} low Low bits\n * @property {number} high High bits\n * @property {boolean} unsigned Whether unsigned or not\n */\n\n/**\n * Long.js's Long class if available.\n * @type {Constructor<Long>}\n */\nutil.Long = /* istanbul ignore next */ util.global.dcodeIO && /* istanbul ignore next */ util.global.dcodeIO.Long\n         || /* istanbul ignore next */ util.global.Long\n         || util.inquire(\"long\");\n\n/**\n * Regular expression used to verify 2 bit (`bool`) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key2Re = /^true|false|0|1$/;\n\n/**\n * Regular expression used to verify 32 bit (`int32` etc.) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key32Re = /^-?(?:0|[1-9][0-9]*)$/;\n\n/**\n * Regular expression used to verify 64 bit (`int64` etc.) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key64Re = /^(?:[\\\\x00-\\\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;\n\n/**\n * Converts a number or long to an 8 characters long hash string.\n * @param {Long|number} value Value to convert\n * @returns {string} Hash\n */\nutil.longToHash = function longToHash(value) {\n    return value\n        ? util.LongBits.from(value).toHash()\n        : util.LongBits.zeroHash;\n};\n\n/**\n * Converts an 8 characters long hash string to a long or number.\n * @param {string} hash Hash\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {Long|number} Original value\n */\nutil.longFromHash = function longFromHash(hash, unsigned) {\n    var bits = util.LongBits.fromHash(hash);\n    if (util.Long)\n        return util.Long.fromBits(bits.lo, bits.hi, unsigned);\n    return bits.toNumber(Boolean(unsigned));\n};\n\n/**\n * Merges the properties of the source object into the destination object.\n * @memberof util\n * @param {Object.<string,*>} dst Destination object\n * @param {Object.<string,*>} src Source object\n * @param {boolean} [ifNotSet=false] Merges only if the key is not already set\n * @returns {Object.<string,*>} Destination object\n */\nfunction merge(dst, src, ifNotSet) { // used by converters\n    for (var keys = Object.keys(src), i = 0; i < keys.length; ++i)\n        if (dst[keys[i]] === undefined || !ifNotSet)\n            dst[keys[i]] = src[keys[i]];\n    return dst;\n}\n\nutil.merge = merge;\n\n/**\n * Converts the first character of a string to lower case.\n * @param {string} str String to convert\n * @returns {string} Converted string\n */\nutil.lcFirst = function lcFirst(str) {\n    return str.charAt(0).toLowerCase() + str.substring(1);\n};\n\n/**\n * Creates a custom error constructor.\n * @memberof util\n * @param {string} name Error name\n * @returns {Constructor<Error>} Custom error constructor\n */\nfunction newError(name) {\n\n    function CustomError(message, properties) {\n\n        if (!(this instanceof CustomError))\n            return new CustomError(message, properties);\n\n        // Error.call(this, message);\n        // ^ just returns a new error instance because the ctor can be called as a function\n\n        Object.defineProperty(this, \"message\", { get: function() { return message; } });\n\n        /* istanbul ignore next */\n        if (Error.captureStackTrace) // node\n            Error.captureStackTrace(this, CustomError);\n        else\n            Object.defineProperty(this, \"stack\", { value: new Error().stack || \"\" });\n\n        if (properties)\n            merge(this, properties);\n    }\n\n    CustomError.prototype = Object.create(Error.prototype, {\n        constructor: {\n            value: CustomError,\n            writable: true,\n            enumerable: false,\n            configurable: true,\n        },\n        name: {\n            get: function get() { return name; },\n            set: undefined,\n            enumerable: false,\n            // configurable: false would accurately preserve the behavior of\n            // the original, but I'm guessing that was not intentional.\n            // For an actual error subclass, this property would\n            // be configurable.\n            configurable: true,\n        },\n        toString: {\n            value: function value() { return this.name + \": \" + this.message; },\n            writable: true,\n            enumerable: false,\n            configurable: true,\n        },\n    });\n\n    return CustomError;\n}\n\nutil.newError = newError;\n\n/**\n * Constructs a new protocol error.\n * @classdesc Error subclass indicating a protocol specifc error.\n * @memberof util\n * @extends Error\n * @template T extends Message<T>\n * @constructor\n * @param {string} message Error message\n * @param {Object.<string,*>} [properties] Additional properties\n * @example\n * try {\n *     MyMessage.decode(someBuffer); // throws if required fields are missing\n * } catch (e) {\n *     if (e instanceof ProtocolError && e.instance)\n *         console.log(\"decoded so far: \" + JSON.stringify(e.instance));\n * }\n */\nutil.ProtocolError = newError(\"ProtocolError\");\n\n/**\n * So far decoded message instance.\n * @name util.ProtocolError#instance\n * @type {Message<T>}\n */\n\n/**\n * A OneOf getter as returned by {@link util.oneOfGetter}.\n * @typedef OneOfGetter\n * @type {function}\n * @returns {string|undefined} Set field name, if any\n */\n\n/**\n * Builds a getter for a oneof's present field name.\n * @param {string[]} fieldNames Field names\n * @returns {OneOfGetter} Unbound getter\n */\nutil.oneOfGetter = function getOneOf(fieldNames) {\n    var fieldMap = {};\n    for (var i = 0; i < fieldNames.length; ++i)\n        fieldMap[fieldNames[i]] = 1;\n\n    /**\n     * @returns {string|undefined} Set field name, if any\n     * @this Object\n     * @ignore\n     */\n    return function() { // eslint-disable-line consistent-return\n        for (var keys = Object.keys(this), i = keys.length - 1; i > -1; --i)\n            if (fieldMap[keys[i]] === 1 && this[keys[i]] !== undefined && this[keys[i]] !== null)\n                return keys[i];\n    };\n};\n\n/**\n * A OneOf setter as returned by {@link util.oneOfSetter}.\n * @typedef OneOfSetter\n * @type {function}\n * @param {string|undefined} value Field name\n * @returns {undefined}\n */\n\n/**\n * Builds a setter for a oneof's present field name.\n * @param {string[]} fieldNames Field names\n * @returns {OneOfSetter} Unbound setter\n */\nutil.oneOfSetter = function setOneOf(fieldNames) {\n\n    /**\n     * @param {string} name Field name\n     * @returns {undefined}\n     * @this Object\n     * @ignore\n     */\n    return function(name) {\n        for (var i = 0; i < fieldNames.length; ++i)\n            if (fieldNames[i] !== name)\n                delete this[fieldNames[i]];\n    };\n};\n\n/**\n * Default conversion options used for {@link Message#toJSON} implementations.\n *\n * These options are close to proto3's JSON mapping with the exception that internal types like Any are handled just like messages. More precisely:\n *\n * - Longs become strings\n * - Enums become string keys\n * - Bytes become base64 encoded strings\n * - (Sub-)Messages become plain objects\n * - Maps become plain objects with all string keys\n * - Repeated fields become arrays\n * - NaN and Infinity for float and double fields become strings\n *\n * @type {IConversionOptions}\n * @see https://developers.google.com/protocol-buffers/docs/proto3?hl=en#json\n */\nutil.toJSONOptions = {\n    longs: String,\n    enums: String,\n    bytes: String,\n    json: true\n};\n\n// Sets up buffer utility according to the environment (called in index-minimal)\nutil._configure = function() {\n    var Buffer = util.Buffer;\n    /* istanbul ignore if */\n    if (!Buffer) {\n        util._Buffer_from = util._Buffer_allocUnsafe = null;\n        return;\n    }\n    // because node 4.x buffers are incompatible & immutable\n    // see: https://github.com/dcodeIO/protobuf.js/pull/665\n    util._Buffer_from = Buffer.from !== Uint8Array.from && Buffer.from ||\n        /* istanbul ignore next */\n        function Buffer_from(value, encoding) {\n            return new Buffer(value, encoding);\n        };\n    util._Buffer_allocUnsafe = Buffer.allocUnsafe ||\n        /* istanbul ignore next */\n        function Buffer_allocUnsafe(size) {\n            return new Buffer(size);\n        };\n};\n","\"use strict\";\nmodule.exports = Writer;\n\nvar util      = require(\"./util/minimal\");\n\nvar BufferWriter; // cyclic\n\nvar LongBits  = util.LongBits,\n    base64    = util.base64,\n    utf8      = util.utf8;\n\n/**\n * Constructs a new writer operation instance.\n * @classdesc Scheduled writer operation.\n * @constructor\n * @param {function(*, Uint8Array, number)} fn Function to call\n * @param {number} len Value byte length\n * @param {*} val Value to write\n * @ignore\n */\nfunction Op(fn, len, val) {\n\n    /**\n     * Function to call.\n     * @type {function(Uint8Array, number, *)}\n     */\n    this.fn = fn;\n\n    /**\n     * Value byte length.\n     * @type {number}\n     */\n    this.len = len;\n\n    /**\n     * Next operation.\n     * @type {Writer.Op|undefined}\n     */\n    this.next = undefined;\n\n    /**\n     * Value to write.\n     * @type {*}\n     */\n    this.val = val; // type varies\n}\n\n/* istanbul ignore next */\nfunction noop() {} // eslint-disable-line no-empty-function\n\n/**\n * Constructs a new writer state instance.\n * @classdesc Copied writer state.\n * @memberof Writer\n * @constructor\n * @param {Writer} writer Writer to copy state from\n * @ignore\n */\nfunction State(writer) {\n\n    /**\n     * Current head.\n     * @type {Writer.Op}\n     */\n    this.head = writer.head;\n\n    /**\n     * Current tail.\n     * @type {Writer.Op}\n     */\n    this.tail = writer.tail;\n\n    /**\n     * Current buffer length.\n     * @type {number}\n     */\n    this.len = writer.len;\n\n    /**\n     * Next state.\n     * @type {State|null}\n     */\n    this.next = writer.states;\n}\n\n/**\n * Constructs a new writer instance.\n * @classdesc Wire format writer using `Uint8Array` if available, otherwise `Array`.\n * @constructor\n */\nfunction Writer() {\n\n    /**\n     * Current length.\n     * @type {number}\n     */\n    this.len = 0;\n\n    /**\n     * Operations head.\n     * @type {Object}\n     */\n    this.head = new Op(noop, 0, 0);\n\n    /**\n     * Operations tail\n     * @type {Object}\n     */\n    this.tail = this.head;\n\n    /**\n     * Linked forked states.\n     * @type {Object|null}\n     */\n    this.states = null;\n\n    // When a value is written, the writer calculates its byte length and puts it into a linked\n    // list of operations to perform when finish() is called. This both allows us to allocate\n    // buffers of the exact required size and reduces the amount of work we have to do compared\n    // to first calculating over objects and then encoding over objects. In our case, the encoding\n    // part is just a linked list walk calling operations with already prepared values.\n}\n\nvar create = function create() {\n    return util.Buffer\n        ? function create_buffer_setup() {\n            return (Writer.create = function create_buffer() {\n                return new BufferWriter();\n            })();\n        }\n        /* istanbul ignore next */\n        : function create_array() {\n            return new Writer();\n        };\n};\n\n/**\n * Creates a new writer.\n * @function\n * @returns {BufferWriter|Writer} A {@link BufferWriter} when Buffers are supported, otherwise a {@link Writer}\n */\nWriter.create = create();\n\n/**\n * Allocates a buffer of the specified size.\n * @param {number} size Buffer size\n * @returns {Uint8Array} Buffer\n */\nWriter.alloc = function alloc(size) {\n    return new util.Array(size);\n};\n\n// Use Uint8Array buffer pool in the browser, just like node does with buffers\n/* istanbul ignore else */\nif (util.Array !== Array)\n    Writer.alloc = util.pool(Writer.alloc, util.Array.prototype.subarray);\n\n/**\n * Pushes a new operation to the queue.\n * @param {function(Uint8Array, number, *)} fn Function to call\n * @param {number} len Value byte length\n * @param {number} val Value to write\n * @returns {Writer} `this`\n * @private\n */\nWriter.prototype._push = function push(fn, len, val) {\n    this.tail = this.tail.next = new Op(fn, len, val);\n    this.len += len;\n    return this;\n};\n\nfunction writeByte(val, buf, pos) {\n    buf[pos] = val & 255;\n}\n\nfunction writeVarint32(val, buf, pos) {\n    while (val > 127) {\n        buf[pos++] = val & 127 | 128;\n        val >>>= 7;\n    }\n    buf[pos] = val;\n}\n\n/**\n * Constructs a new varint writer operation instance.\n * @classdesc Scheduled varint writer operation.\n * @extends Op\n * @constructor\n * @param {number} len Value byte length\n * @param {number} val Value to write\n * @ignore\n */\nfunction VarintOp(len, val) {\n    this.len = len;\n    this.next = undefined;\n    this.val = val;\n}\n\nVarintOp.prototype = Object.create(Op.prototype);\nVarintOp.prototype.fn = writeVarint32;\n\n/**\n * Writes an unsigned 32 bit value as a varint.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.uint32 = function write_uint32(value) {\n    // here, the call to this.push has been inlined and a varint specific Op subclass is used.\n    // uint32 is by far the most frequently used operation and benefits significantly from this.\n    this.len += (this.tail = this.tail.next = new VarintOp(\n        (value = value >>> 0)\n                < 128       ? 1\n        : value < 16384     ? 2\n        : value < 2097152   ? 3\n        : value < 268435456 ? 4\n        :                     5,\n    value)).len;\n    return this;\n};\n\n/**\n * Writes a signed 32 bit value as a varint.\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.int32 = function write_int32(value) {\n    return value < 0\n        ? this._push(writeVarint64, 10, LongBits.fromNumber(value)) // 10 bytes per spec\n        : this.uint32(value);\n};\n\n/**\n * Writes a 32 bit value as a varint, zig-zag encoded.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.sint32 = function write_sint32(value) {\n    return this.uint32((value << 1 ^ value >> 31) >>> 0);\n};\n\nfunction writeVarint64(val, buf, pos) {\n    while (val.hi) {\n        buf[pos++] = val.lo & 127 | 128;\n        val.lo = (val.lo >>> 7 | val.hi << 25) >>> 0;\n        val.hi >>>= 7;\n    }\n    while (val.lo > 127) {\n        buf[pos++] = val.lo & 127 | 128;\n        val.lo = val.lo >>> 7;\n    }\n    buf[pos++] = val.lo;\n}\n\n/**\n * Writes an unsigned 64 bit value as a varint.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.uint64 = function write_uint64(value) {\n    var bits = LongBits.from(value);\n    return this._push(writeVarint64, bits.length(), bits);\n};\n\n/**\n * Writes a signed 64 bit value as a varint.\n * @function\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.int64 = Writer.prototype.uint64;\n\n/**\n * Writes a signed 64 bit value as a varint, zig-zag encoded.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.sint64 = function write_sint64(value) {\n    var bits = LongBits.from(value).zzEncode();\n    return this._push(writeVarint64, bits.length(), bits);\n};\n\n/**\n * Writes a boolish value as a varint.\n * @param {boolean} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.bool = function write_bool(value) {\n    return this._push(writeByte, 1, value ? 1 : 0);\n};\n\nfunction writeFixed32(val, buf, pos) {\n    buf[pos    ] =  val         & 255;\n    buf[pos + 1] =  val >>> 8   & 255;\n    buf[pos + 2] =  val >>> 16  & 255;\n    buf[pos + 3] =  val >>> 24;\n}\n\n/**\n * Writes an unsigned 32 bit value as fixed 32 bits.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.fixed32 = function write_fixed32(value) {\n    return this._push(writeFixed32, 4, value >>> 0);\n};\n\n/**\n * Writes a signed 32 bit value as fixed 32 bits.\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.sfixed32 = Writer.prototype.fixed32;\n\n/**\n * Writes an unsigned 64 bit value as fixed 64 bits.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.fixed64 = function write_fixed64(value) {\n    var bits = LongBits.from(value);\n    return this._push(writeFixed32, 4, bits.lo)._push(writeFixed32, 4, bits.hi);\n};\n\n/**\n * Writes a signed 64 bit value as fixed 64 bits.\n * @function\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.sfixed64 = Writer.prototype.fixed64;\n\n/**\n * Writes a float (32 bit).\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.float = function write_float(value) {\n    return this._push(util.float.writeFloatLE, 4, value);\n};\n\n/**\n * Writes a double (64 bit float).\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.double = function write_double(value) {\n    return this._push(util.float.writeDoubleLE, 8, value);\n};\n\nvar writeBytes = util.Array.prototype.set\n    ? function writeBytes_set(val, buf, pos) {\n        buf.set(val, pos); // also works for plain array values\n    }\n    /* istanbul ignore next */\n    : function writeBytes_for(val, buf, pos) {\n        for (var i = 0; i < val.length; ++i)\n            buf[pos + i] = val[i];\n    };\n\n/**\n * Writes a sequence of bytes.\n * @param {Uint8Array|string} value Buffer or base64 encoded string to write\n * @returns {Writer} `this`\n */\nWriter.prototype.bytes = function write_bytes(value) {\n    var len = value.length >>> 0;\n    if (!len)\n        return this._push(writeByte, 1, 0);\n    if (util.isString(value)) {\n        var buf = Writer.alloc(len = base64.length(value));\n        base64.decode(value, buf, 0);\n        value = buf;\n    }\n    return this.uint32(len)._push(writeBytes, len, value);\n};\n\n/**\n * Writes a string.\n * @param {string} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.string = function write_string(value) {\n    var len = utf8.length(value);\n    return len\n        ? this.uint32(len)._push(utf8.write, len, value)\n        : this._push(writeByte, 1, 0);\n};\n\n/**\n * Forks this writer's state by pushing it to a stack.\n * Calling {@link Writer#reset|reset} or {@link Writer#ldelim|ldelim} resets the writer to the previous state.\n * @returns {Writer} `this`\n */\nWriter.prototype.fork = function fork() {\n    this.states = new State(this);\n    this.head = this.tail = new Op(noop, 0, 0);\n    this.len = 0;\n    return this;\n};\n\n/**\n * Resets this instance to the last state.\n * @returns {Writer} `this`\n */\nWriter.prototype.reset = function reset() {\n    if (this.states) {\n        this.head   = this.states.head;\n        this.tail   = this.states.tail;\n        this.len    = this.states.len;\n        this.states = this.states.next;\n    } else {\n        this.head = this.tail = new Op(noop, 0, 0);\n        this.len  = 0;\n    }\n    return this;\n};\n\n/**\n * Resets to the last state and appends the fork state's current write length as a varint followed by its operations.\n * @returns {Writer} `this`\n */\nWriter.prototype.ldelim = function ldelim() {\n    var head = this.head,\n        tail = this.tail,\n        len  = this.len;\n    this.reset().uint32(len);\n    if (len) {\n        this.tail.next = head.next; // skip noop\n        this.tail = tail;\n        this.len += len;\n    }\n    return this;\n};\n\n/**\n * Finishes the write operation.\n * @returns {Uint8Array} Finished buffer\n */\nWriter.prototype.finish = function finish() {\n    var head = this.head.next, // skip noop\n        buf  = this.constructor.alloc(this.len),\n        pos  = 0;\n    while (head) {\n        head.fn(head.val, buf, pos);\n        pos += head.len;\n        head = head.next;\n    }\n    // this.head = this.tail = null;\n    return buf;\n};\n\nWriter._configure = function(BufferWriter_) {\n    BufferWriter = BufferWriter_;\n    Writer.create = create();\n    BufferWriter._configure();\n};\n","\"use strict\";\nmodule.exports = BufferWriter;\n\n// extends Writer\nvar Writer = require(\"./writer\");\n(BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;\n\nvar util = require(\"./util/minimal\");\n\n/**\n * Constructs a new buffer writer instance.\n * @classdesc Wire format writer using node buffers.\n * @extends Writer\n * @constructor\n */\nfunction BufferWriter() {\n    Writer.call(this);\n}\n\nBufferWriter._configure = function () {\n    /**\n     * Allocates a buffer of the specified size.\n     * @function\n     * @param {number} size Buffer size\n     * @returns {Buffer} Buffer\n     */\n    BufferWriter.alloc = util._Buffer_allocUnsafe;\n\n    BufferWriter.writeBytesBuffer = util.Buffer && util.Buffer.prototype instanceof Uint8Array && util.Buffer.prototype.set.name === \"set\"\n        ? function writeBytesBuffer_set(val, buf, pos) {\n          buf.set(val, pos); // faster than copy (requires node >= 4 where Buffers extend Uint8Array and set is properly inherited)\n          // also works for plain array values\n        }\n        /* istanbul ignore next */\n        : function writeBytesBuffer_copy(val, buf, pos) {\n          if (val.copy) // Buffer values\n            val.copy(buf, pos, 0, val.length);\n          else for (var i = 0; i < val.length;) // plain array values\n            buf[pos++] = val[i++];\n        };\n};\n\n\n/**\n * @override\n */\nBufferWriter.prototype.bytes = function write_bytes_buffer(value) {\n    if (util.isString(value))\n        value = util._Buffer_from(value, \"base64\");\n    var len = value.length >>> 0;\n    this.uint32(len);\n    if (len)\n        this._push(BufferWriter.writeBytesBuffer, len, value);\n    return this;\n};\n\nfunction writeStringBuffer(val, buf, pos) {\n    if (val.length < 40) // plain js is faster for short strings (probably due to redundant assertions)\n        util.utf8.write(val, buf, pos);\n    else if (buf.utf8Write)\n        buf.utf8Write(val, pos);\n    else\n        buf.write(val, pos);\n}\n\n/**\n * @override\n */\nBufferWriter.prototype.string = function write_string_buffer(value) {\n    var len = util.Buffer.byteLength(value);\n    this.uint32(len);\n    if (len)\n        this._push(writeStringBuffer, len, value);\n    return this;\n};\n\n\n/**\n * Finishes the write operation.\n * @name BufferWriter#finish\n * @function\n * @returns {Buffer} Finished buffer\n */\n\nBufferWriter._configure();\n","// @ts-nocheck\n/*eslint-disable*/\n(function(global, factory) { /* global define, require, module */\n\n    /* AMD */ if (typeof define === 'function' && define.amd)\n        define([\"protobufjs/minimal\"], factory);\n\n    /* CommonJS */ else if (typeof require === 'function' && typeof module === 'object' && module && module.exports)\n        module.exports = factory(require(\"protobufjs/minimal\"));\n\n})(this, function($protobuf) {\n    \"use strict\";\n\n    // Common aliases\n    var $Reader = $protobuf.Reader, $Writer = $protobuf.Writer, $util = $protobuf.util;\n\n    // Exported root namespace\n    var $root = $protobuf.roots[\"default\"] || ($protobuf.roots[\"default\"] = {});\n\n    $root.RPC = (function() {\n\n        /**\n         * Properties of a RPC.\n         * @exports IRPC\n         * @interface IRPC\n         * @property {Array.<RPC.ISubOpts>|null} [subscriptions] RPC subscriptions\n         * @property {Array.<RPC.IMessage>|null} [messages] RPC messages\n         * @property {RPC.IControlMessage|null} [control] RPC control\n         */\n\n        /**\n         * Constructs a new RPC.\n         * @exports RPC\n         * @classdesc Represents a RPC.\n         * @implements IRPC\n         * @constructor\n         * @param {IRPC=} [p] Properties to set\n         */\n        function RPC(p) {\n            this.subscriptions = [];\n            this.messages = [];\n            if (p)\n                for (var ks = Object.keys(p), i = 0; i < ks.length; ++i)\n                    if (p[ks[i]] != null)\n                        this[ks[i]] = p[ks[i]];\n        }\n\n        /**\n         * RPC subscriptions.\n         * @member {Array.<RPC.ISubOpts>} subscriptions\n         * @memberof RPC\n         * @instance\n         */\n        RPC.prototype.subscriptions = $util.emptyArray;\n\n        /**\n         * RPC messages.\n         * @member {Array.<RPC.IMessage>} messages\n         * @memberof RPC\n         * @instance\n         */\n        RPC.prototype.messages = $util.emptyArray;\n\n        /**\n         * RPC control.\n         * @member {RPC.IControlMessage|null|undefined} control\n         * @memberof RPC\n         * @instance\n         */\n        RPC.prototype.control = null;\n\n        // OneOf field names bound to virtual getters and setters\n        var $oneOfFields;\n\n        /**\n         * RPC _control.\n         * @member {\"control\"|undefined} _control\n         * @memberof RPC\n         * @instance\n         */\n        Object.defineProperty(RPC.prototype, \"_control\", {\n            get: $util.oneOfGetter($oneOfFields = [\"control\"]),\n            set: $util.oneOfSetter($oneOfFields)\n        });\n\n        /**\n         * Encodes the specified RPC message. Does not implicitly {@link RPC.verify|verify} messages.\n         * @function encode\n         * @memberof RPC\n         * @static\n         * @param {IRPC} m RPC message or plain object to encode\n         * @param {$protobuf.Writer} [w] Writer to encode to\n         * @returns {$protobuf.Writer} Writer\n         */\n        RPC.encode = function encode(m, w) {\n            if (!w)\n                w = $Writer.create();\n            if (m.subscriptions != null && m.subscriptions.length) {\n                for (var i = 0; i < m.subscriptions.length; ++i)\n                    $root.RPC.SubOpts.encode(m.subscriptions[i], w.uint32(10).fork()).ldelim();\n            }\n            if (m.messages != null && m.messages.length) {\n                for (var i = 0; i < m.messages.length; ++i)\n                    $root.RPC.Message.encode(m.messages[i], w.uint32(18).fork()).ldelim();\n            }\n            if (m.control != null && Object.hasOwnProperty.call(m, \"control\"))\n                $root.RPC.ControlMessage.encode(m.control, w.uint32(26).fork()).ldelim();\n            return w;\n        };\n\n        /**\n         * Decodes a RPC message from the specified reader or buffer.\n         * @function decode\n         * @memberof RPC\n         * @static\n         * @param {$protobuf.Reader|Uint8Array} r Reader or buffer to decode from\n         * @param {number} [l] Message length if known beforehand\n         * @returns {RPC} RPC\n         * @throws {Error} If the payload is not a reader or valid buffer\n         * @throws {$protobuf.util.ProtocolError} If required fields are missing\n         */\n        RPC.decode = function decode(r, l) {\n            if (!(r instanceof $Reader))\n                r = $Reader.create(r);\n            var c = l === undefined ? r.len : r.pos + l, m = new $root.RPC();\n            while (r.pos < c) {\n                var t = r.uint32();\n                switch (t >>> 3) {\n                case 1:\n                    if (!(m.subscriptions && m.subscriptions.length))\n                        m.subscriptions = [];\n                    m.subscriptions.push($root.RPC.SubOpts.decode(r, r.uint32()));\n                    break;\n                case 2:\n                    if (!(m.messages && m.messages.length))\n                        m.messages = [];\n                    m.messages.push($root.RPC.Message.decode(r, r.uint32()));\n                    break;\n                case 3:\n                    m.control = $root.RPC.ControlMessage.decode(r, r.uint32());\n                    break;\n                default:\n                    r.skipType(t & 7);\n                    break;\n                }\n            }\n            return m;\n        };\n\n        /**\n         * Creates a RPC message from a plain object. Also converts values to their respective internal types.\n         * @function fromObject\n         * @memberof RPC\n         * @static\n         * @param {Object.<string,*>} d Plain object\n         * @returns {RPC} RPC\n         */\n        RPC.fromObject = function fromObject(d) {\n            if (d instanceof $root.RPC)\n                return d;\n            var m = new $root.RPC();\n            if (d.subscriptions) {\n                if (!Array.isArray(d.subscriptions))\n                    throw TypeError(\".RPC.subscriptions: array expected\");\n                m.subscriptions = [];\n                for (var i = 0; i < d.subscriptions.length; ++i) {\n                    if (typeof d.subscriptions[i] !== \"object\")\n                        throw TypeError(\".RPC.subscriptions: object expected\");\n                    m.subscriptions[i] = $root.RPC.SubOpts.fromObject(d.subscriptions[i]);\n                }\n            }\n            if (d.messages) {\n                if (!Array.isArray(d.messages))\n                    throw TypeError(\".RPC.messages: array expected\");\n                m.messages = [];\n                for (var i = 0; i < d.messages.length; ++i) {\n                    if (typeof d.messages[i] !== \"object\")\n                        throw TypeError(\".RPC.messages: object expected\");\n                    m.messages[i] = $root.RPC.Message.fromObject(d.messages[i]);\n                }\n            }\n            if (d.control != null) {\n                if (typeof d.control !== \"object\")\n                    throw TypeError(\".RPC.control: object expected\");\n                m.control = $root.RPC.ControlMessage.fromObject(d.control);\n            }\n            return m;\n        };\n\n        /**\n         * Creates a plain object from a RPC message. Also converts values to other types if specified.\n         * @function toObject\n         * @memberof RPC\n         * @static\n         * @param {RPC} m RPC\n         * @param {$protobuf.IConversionOptions} [o] Conversion options\n         * @returns {Object.<string,*>} Plain object\n         */\n        RPC.toObject = function toObject(m, o) {\n            if (!o)\n                o = {};\n            var d = {};\n            if (o.arrays || o.defaults) {\n                d.subscriptions = [];\n                d.messages = [];\n            }\n            if (m.subscriptions && m.subscriptions.length) {\n                d.subscriptions = [];\n                for (var j = 0; j < m.subscriptions.length; ++j) {\n                    d.subscriptions[j] = $root.RPC.SubOpts.toObject(m.subscriptions[j], o);\n                }\n            }\n            if (m.messages && m.messages.length) {\n                d.messages = [];\n                for (var j = 0; j < m.messages.length; ++j) {\n                    d.messages[j] = $root.RPC.Message.toObject(m.messages[j], o);\n                }\n            }\n            if (m.control != null && m.hasOwnProperty(\"control\")) {\n                d.control = $root.RPC.ControlMessage.toObject(m.control, o);\n                if (o.oneofs)\n                    d._control = \"control\";\n            }\n            return d;\n        };\n\n        /**\n         * Converts this RPC to JSON.\n         * @function toJSON\n         * @memberof RPC\n         * @instance\n         * @returns {Object.<string,*>} JSON object\n         */\n        RPC.prototype.toJSON = function toJSON() {\n            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n        };\n\n        RPC.SubOpts = (function() {\n\n            /**\n             * Properties of a SubOpts.\n             * @memberof RPC\n             * @interface ISubOpts\n             * @property {boolean|null} [subscribe] SubOpts subscribe\n             * @property {string|null} [topic] SubOpts topic\n             */\n\n            /**\n             * Constructs a new SubOpts.\n             * @memberof RPC\n             * @classdesc Represents a SubOpts.\n             * @implements ISubOpts\n             * @constructor\n             * @param {RPC.ISubOpts=} [p] Properties to set\n             */\n            function SubOpts(p) {\n                if (p)\n                    for (var ks = Object.keys(p), i = 0; i < ks.length; ++i)\n                        if (p[ks[i]] != null)\n                            this[ks[i]] = p[ks[i]];\n            }\n\n            /**\n             * SubOpts subscribe.\n             * @member {boolean|null|undefined} subscribe\n             * @memberof RPC.SubOpts\n             * @instance\n             */\n            SubOpts.prototype.subscribe = null;\n\n            /**\n             * SubOpts topic.\n             * @member {string|null|undefined} topic\n             * @memberof RPC.SubOpts\n             * @instance\n             */\n            SubOpts.prototype.topic = null;\n\n            // OneOf field names bound to virtual getters and setters\n            var $oneOfFields;\n\n            /**\n             * SubOpts _subscribe.\n             * @member {\"subscribe\"|undefined} _subscribe\n             * @memberof RPC.SubOpts\n             * @instance\n             */\n            Object.defineProperty(SubOpts.prototype, \"_subscribe\", {\n                get: $util.oneOfGetter($oneOfFields = [\"subscribe\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * SubOpts _topic.\n             * @member {\"topic\"|undefined} _topic\n             * @memberof RPC.SubOpts\n             * @instance\n             */\n            Object.defineProperty(SubOpts.prototype, \"_topic\", {\n                get: $util.oneOfGetter($oneOfFields = [\"topic\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * Encodes the specified SubOpts message. Does not implicitly {@link RPC.SubOpts.verify|verify} messages.\n             * @function encode\n             * @memberof RPC.SubOpts\n             * @static\n             * @param {RPC.ISubOpts} m SubOpts message or plain object to encode\n             * @param {$protobuf.Writer} [w] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            SubOpts.encode = function encode(m, w) {\n                if (!w)\n                    w = $Writer.create();\n                if (m.subscribe != null && Object.hasOwnProperty.call(m, \"subscribe\"))\n                    w.uint32(8).bool(m.subscribe);\n                if (m.topic != null && Object.hasOwnProperty.call(m, \"topic\"))\n                    w.uint32(18).string(m.topic);\n                return w;\n            };\n\n            /**\n             * Decodes a SubOpts message from the specified reader or buffer.\n             * @function decode\n             * @memberof RPC.SubOpts\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} r Reader or buffer to decode from\n             * @param {number} [l] Message length if known beforehand\n             * @returns {RPC.SubOpts} SubOpts\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            SubOpts.decode = function decode(r, l) {\n                if (!(r instanceof $Reader))\n                    r = $Reader.create(r);\n                var c = l === undefined ? r.len : r.pos + l, m = new $root.RPC.SubOpts();\n                while (r.pos < c) {\n                    var t = r.uint32();\n                    switch (t >>> 3) {\n                    case 1:\n                        m.subscribe = r.bool();\n                        break;\n                    case 2:\n                        m.topic = r.string();\n                        break;\n                    default:\n                        r.skipType(t & 7);\n                        break;\n                    }\n                }\n                return m;\n            };\n\n            /**\n             * Creates a SubOpts message from a plain object. Also converts values to their respective internal types.\n             * @function fromObject\n             * @memberof RPC.SubOpts\n             * @static\n             * @param {Object.<string,*>} d Plain object\n             * @returns {RPC.SubOpts} SubOpts\n             */\n            SubOpts.fromObject = function fromObject(d) {\n                if (d instanceof $root.RPC.SubOpts)\n                    return d;\n                var m = new $root.RPC.SubOpts();\n                if (d.subscribe != null) {\n                    m.subscribe = Boolean(d.subscribe);\n                }\n                if (d.topic != null) {\n                    m.topic = String(d.topic);\n                }\n                return m;\n            };\n\n            /**\n             * Creates a plain object from a SubOpts message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof RPC.SubOpts\n             * @static\n             * @param {RPC.SubOpts} m SubOpts\n             * @param {$protobuf.IConversionOptions} [o] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            SubOpts.toObject = function toObject(m, o) {\n                if (!o)\n                    o = {};\n                var d = {};\n                if (m.subscribe != null && m.hasOwnProperty(\"subscribe\")) {\n                    d.subscribe = m.subscribe;\n                    if (o.oneofs)\n                        d._subscribe = \"subscribe\";\n                }\n                if (m.topic != null && m.hasOwnProperty(\"topic\")) {\n                    d.topic = m.topic;\n                    if (o.oneofs)\n                        d._topic = \"topic\";\n                }\n                return d;\n            };\n\n            /**\n             * Converts this SubOpts to JSON.\n             * @function toJSON\n             * @memberof RPC.SubOpts\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            SubOpts.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return SubOpts;\n        })();\n\n        RPC.Message = (function() {\n\n            /**\n             * Properties of a Message.\n             * @memberof RPC\n             * @interface IMessage\n             * @property {Uint8Array|null} [from] Message from\n             * @property {Uint8Array|null} [data] Message data\n             * @property {Uint8Array|null} [seqno] Message seqno\n             * @property {string} topic Message topic\n             * @property {Uint8Array|null} [signature] Message signature\n             * @property {Uint8Array|null} [key] Message key\n             */\n\n            /**\n             * Constructs a new Message.\n             * @memberof RPC\n             * @classdesc Represents a Message.\n             * @implements IMessage\n             * @constructor\n             * @param {RPC.IMessage=} [p] Properties to set\n             */\n            function Message(p) {\n                if (p)\n                    for (var ks = Object.keys(p), i = 0; i < ks.length; ++i)\n                        if (p[ks[i]] != null)\n                            this[ks[i]] = p[ks[i]];\n            }\n\n            /**\n             * Message from.\n             * @member {Uint8Array|null|undefined} from\n             * @memberof RPC.Message\n             * @instance\n             */\n            Message.prototype.from = null;\n\n            /**\n             * Message data.\n             * @member {Uint8Array|null|undefined} data\n             * @memberof RPC.Message\n             * @instance\n             */\n            Message.prototype.data = null;\n\n            /**\n             * Message seqno.\n             * @member {Uint8Array|null|undefined} seqno\n             * @memberof RPC.Message\n             * @instance\n             */\n            Message.prototype.seqno = null;\n\n            /**\n             * Message topic.\n             * @member {string} topic\n             * @memberof RPC.Message\n             * @instance\n             */\n            Message.prototype.topic = \"\";\n\n            /**\n             * Message signature.\n             * @member {Uint8Array|null|undefined} signature\n             * @memberof RPC.Message\n             * @instance\n             */\n            Message.prototype.signature = null;\n\n            /**\n             * Message key.\n             * @member {Uint8Array|null|undefined} key\n             * @memberof RPC.Message\n             * @instance\n             */\n            Message.prototype.key = null;\n\n            // OneOf field names bound to virtual getters and setters\n            var $oneOfFields;\n\n            /**\n             * Message _from.\n             * @member {\"from\"|undefined} _from\n             * @memberof RPC.Message\n             * @instance\n             */\n            Object.defineProperty(Message.prototype, \"_from\", {\n                get: $util.oneOfGetter($oneOfFields = [\"from\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * Message _data.\n             * @member {\"data\"|undefined} _data\n             * @memberof RPC.Message\n             * @instance\n             */\n            Object.defineProperty(Message.prototype, \"_data\", {\n                get: $util.oneOfGetter($oneOfFields = [\"data\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * Message _seqno.\n             * @member {\"seqno\"|undefined} _seqno\n             * @memberof RPC.Message\n             * @instance\n             */\n            Object.defineProperty(Message.prototype, \"_seqno\", {\n                get: $util.oneOfGetter($oneOfFields = [\"seqno\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * Message _signature.\n             * @member {\"signature\"|undefined} _signature\n             * @memberof RPC.Message\n             * @instance\n             */\n            Object.defineProperty(Message.prototype, \"_signature\", {\n                get: $util.oneOfGetter($oneOfFields = [\"signature\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * Message _key.\n             * @member {\"key\"|undefined} _key\n             * @memberof RPC.Message\n             * @instance\n             */\n            Object.defineProperty(Message.prototype, \"_key\", {\n                get: $util.oneOfGetter($oneOfFields = [\"key\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * Encodes the specified Message message. Does not implicitly {@link RPC.Message.verify|verify} messages.\n             * @function encode\n             * @memberof RPC.Message\n             * @static\n             * @param {RPC.IMessage} m Message message or plain object to encode\n             * @param {$protobuf.Writer} [w] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            Message.encode = function encode(m, w) {\n                if (!w)\n                    w = $Writer.create();\n                if (m.from != null && Object.hasOwnProperty.call(m, \"from\"))\n                    w.uint32(10).bytes(m.from);\n                if (m.data != null && Object.hasOwnProperty.call(m, \"data\"))\n                    w.uint32(18).bytes(m.data);\n                if (m.seqno != null && Object.hasOwnProperty.call(m, \"seqno\"))\n                    w.uint32(26).bytes(m.seqno);\n                w.uint32(34).string(m.topic);\n                if (m.signature != null && Object.hasOwnProperty.call(m, \"signature\"))\n                    w.uint32(42).bytes(m.signature);\n                if (m.key != null && Object.hasOwnProperty.call(m, \"key\"))\n                    w.uint32(50).bytes(m.key);\n                return w;\n            };\n\n            /**\n             * Decodes a Message message from the specified reader or buffer.\n             * @function decode\n             * @memberof RPC.Message\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} r Reader or buffer to decode from\n             * @param {number} [l] Message length if known beforehand\n             * @returns {RPC.Message} Message\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            Message.decode = function decode(r, l) {\n                if (!(r instanceof $Reader))\n                    r = $Reader.create(r);\n                var c = l === undefined ? r.len : r.pos + l, m = new $root.RPC.Message();\n                while (r.pos < c) {\n                    var t = r.uint32();\n                    switch (t >>> 3) {\n                    case 1:\n                        m.from = r.bytes();\n                        break;\n                    case 2:\n                        m.data = r.bytes();\n                        break;\n                    case 3:\n                        m.seqno = r.bytes();\n                        break;\n                    case 4:\n                        m.topic = r.string();\n                        break;\n                    case 5:\n                        m.signature = r.bytes();\n                        break;\n                    case 6:\n                        m.key = r.bytes();\n                        break;\n                    default:\n                        r.skipType(t & 7);\n                        break;\n                    }\n                }\n                if (!m.hasOwnProperty(\"topic\"))\n                    throw $util.ProtocolError(\"missing required 'topic'\", { instance: m });\n                return m;\n            };\n\n            /**\n             * Creates a Message message from a plain object. Also converts values to their respective internal types.\n             * @function fromObject\n             * @memberof RPC.Message\n             * @static\n             * @param {Object.<string,*>} d Plain object\n             * @returns {RPC.Message} Message\n             */\n            Message.fromObject = function fromObject(d) {\n                if (d instanceof $root.RPC.Message)\n                    return d;\n                var m = new $root.RPC.Message();\n                if (d.from != null) {\n                    if (typeof d.from === \"string\")\n                        $util.base64.decode(d.from, m.from = $util.newBuffer($util.base64.length(d.from)), 0);\n                    else if (d.from.length)\n                        m.from = d.from;\n                }\n                if (d.data != null) {\n                    if (typeof d.data === \"string\")\n                        $util.base64.decode(d.data, m.data = $util.newBuffer($util.base64.length(d.data)), 0);\n                    else if (d.data.length)\n                        m.data = d.data;\n                }\n                if (d.seqno != null) {\n                    if (typeof d.seqno === \"string\")\n                        $util.base64.decode(d.seqno, m.seqno = $util.newBuffer($util.base64.length(d.seqno)), 0);\n                    else if (d.seqno.length)\n                        m.seqno = d.seqno;\n                }\n                if (d.topic != null) {\n                    m.topic = String(d.topic);\n                }\n                if (d.signature != null) {\n                    if (typeof d.signature === \"string\")\n                        $util.base64.decode(d.signature, m.signature = $util.newBuffer($util.base64.length(d.signature)), 0);\n                    else if (d.signature.length)\n                        m.signature = d.signature;\n                }\n                if (d.key != null) {\n                    if (typeof d.key === \"string\")\n                        $util.base64.decode(d.key, m.key = $util.newBuffer($util.base64.length(d.key)), 0);\n                    else if (d.key.length)\n                        m.key = d.key;\n                }\n                return m;\n            };\n\n            /**\n             * Creates a plain object from a Message message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof RPC.Message\n             * @static\n             * @param {RPC.Message} m Message\n             * @param {$protobuf.IConversionOptions} [o] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            Message.toObject = function toObject(m, o) {\n                if (!o)\n                    o = {};\n                var d = {};\n                if (o.defaults) {\n                    d.topic = \"\";\n                }\n                if (m.from != null && m.hasOwnProperty(\"from\")) {\n                    d.from = o.bytes === String ? $util.base64.encode(m.from, 0, m.from.length) : o.bytes === Array ? Array.prototype.slice.call(m.from) : m.from;\n                    if (o.oneofs)\n                        d._from = \"from\";\n                }\n                if (m.data != null && m.hasOwnProperty(\"data\")) {\n                    d.data = o.bytes === String ? $util.base64.encode(m.data, 0, m.data.length) : o.bytes === Array ? Array.prototype.slice.call(m.data) : m.data;\n                    if (o.oneofs)\n                        d._data = \"data\";\n                }\n                if (m.seqno != null && m.hasOwnProperty(\"seqno\")) {\n                    d.seqno = o.bytes === String ? $util.base64.encode(m.seqno, 0, m.seqno.length) : o.bytes === Array ? Array.prototype.slice.call(m.seqno) : m.seqno;\n                    if (o.oneofs)\n                        d._seqno = \"seqno\";\n                }\n                if (m.topic != null && m.hasOwnProperty(\"topic\")) {\n                    d.topic = m.topic;\n                }\n                if (m.signature != null && m.hasOwnProperty(\"signature\")) {\n                    d.signature = o.bytes === String ? $util.base64.encode(m.signature, 0, m.signature.length) : o.bytes === Array ? Array.prototype.slice.call(m.signature) : m.signature;\n                    if (o.oneofs)\n                        d._signature = \"signature\";\n                }\n                if (m.key != null && m.hasOwnProperty(\"key\")) {\n                    d.key = o.bytes === String ? $util.base64.encode(m.key, 0, m.key.length) : o.bytes === Array ? Array.prototype.slice.call(m.key) : m.key;\n                    if (o.oneofs)\n                        d._key = \"key\";\n                }\n                return d;\n            };\n\n            /**\n             * Converts this Message to JSON.\n             * @function toJSON\n             * @memberof RPC.Message\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            Message.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return Message;\n        })();\n\n        RPC.ControlMessage = (function() {\n\n            /**\n             * Properties of a ControlMessage.\n             * @memberof RPC\n             * @interface IControlMessage\n             * @property {Array.<RPC.IControlIHave>|null} [ihave] ControlMessage ihave\n             * @property {Array.<RPC.IControlIWant>|null} [iwant] ControlMessage iwant\n             * @property {Array.<RPC.IControlGraft>|null} [graft] ControlMessage graft\n             * @property {Array.<RPC.IControlPrune>|null} [prune] ControlMessage prune\n             */\n\n            /**\n             * Constructs a new ControlMessage.\n             * @memberof RPC\n             * @classdesc Represents a ControlMessage.\n             * @implements IControlMessage\n             * @constructor\n             * @param {RPC.IControlMessage=} [p] Properties to set\n             */\n            function ControlMessage(p) {\n                this.ihave = [];\n                this.iwant = [];\n                this.graft = [];\n                this.prune = [];\n                if (p)\n                    for (var ks = Object.keys(p), i = 0; i < ks.length; ++i)\n                        if (p[ks[i]] != null)\n                            this[ks[i]] = p[ks[i]];\n            }\n\n            /**\n             * ControlMessage ihave.\n             * @member {Array.<RPC.IControlIHave>} ihave\n             * @memberof RPC.ControlMessage\n             * @instance\n             */\n            ControlMessage.prototype.ihave = $util.emptyArray;\n\n            /**\n             * ControlMessage iwant.\n             * @member {Array.<RPC.IControlIWant>} iwant\n             * @memberof RPC.ControlMessage\n             * @instance\n             */\n            ControlMessage.prototype.iwant = $util.emptyArray;\n\n            /**\n             * ControlMessage graft.\n             * @member {Array.<RPC.IControlGraft>} graft\n             * @memberof RPC.ControlMessage\n             * @instance\n             */\n            ControlMessage.prototype.graft = $util.emptyArray;\n\n            /**\n             * ControlMessage prune.\n             * @member {Array.<RPC.IControlPrune>} prune\n             * @memberof RPC.ControlMessage\n             * @instance\n             */\n            ControlMessage.prototype.prune = $util.emptyArray;\n\n            /**\n             * Encodes the specified ControlMessage message. Does not implicitly {@link RPC.ControlMessage.verify|verify} messages.\n             * @function encode\n             * @memberof RPC.ControlMessage\n             * @static\n             * @param {RPC.IControlMessage} m ControlMessage message or plain object to encode\n             * @param {$protobuf.Writer} [w] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ControlMessage.encode = function encode(m, w) {\n                if (!w)\n                    w = $Writer.create();\n                if (m.ihave != null && m.ihave.length) {\n                    for (var i = 0; i < m.ihave.length; ++i)\n                        $root.RPC.ControlIHave.encode(m.ihave[i], w.uint32(10).fork()).ldelim();\n                }\n                if (m.iwant != null && m.iwant.length) {\n                    for (var i = 0; i < m.iwant.length; ++i)\n                        $root.RPC.ControlIWant.encode(m.iwant[i], w.uint32(18).fork()).ldelim();\n                }\n                if (m.graft != null && m.graft.length) {\n                    for (var i = 0; i < m.graft.length; ++i)\n                        $root.RPC.ControlGraft.encode(m.graft[i], w.uint32(26).fork()).ldelim();\n                }\n                if (m.prune != null && m.prune.length) {\n                    for (var i = 0; i < m.prune.length; ++i)\n                        $root.RPC.ControlPrune.encode(m.prune[i], w.uint32(34).fork()).ldelim();\n                }\n                return w;\n            };\n\n            /**\n             * Decodes a ControlMessage message from the specified reader or buffer.\n             * @function decode\n             * @memberof RPC.ControlMessage\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} r Reader or buffer to decode from\n             * @param {number} [l] Message length if known beforehand\n             * @returns {RPC.ControlMessage} ControlMessage\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ControlMessage.decode = function decode(r, l) {\n                if (!(r instanceof $Reader))\n                    r = $Reader.create(r);\n                var c = l === undefined ? r.len : r.pos + l, m = new $root.RPC.ControlMessage();\n                while (r.pos < c) {\n                    var t = r.uint32();\n                    switch (t >>> 3) {\n                    case 1:\n                        if (!(m.ihave && m.ihave.length))\n                            m.ihave = [];\n                        m.ihave.push($root.RPC.ControlIHave.decode(r, r.uint32()));\n                        break;\n                    case 2:\n                        if (!(m.iwant && m.iwant.length))\n                            m.iwant = [];\n                        m.iwant.push($root.RPC.ControlIWant.decode(r, r.uint32()));\n                        break;\n                    case 3:\n                        if (!(m.graft && m.graft.length))\n                            m.graft = [];\n                        m.graft.push($root.RPC.ControlGraft.decode(r, r.uint32()));\n                        break;\n                    case 4:\n                        if (!(m.prune && m.prune.length))\n                            m.prune = [];\n                        m.prune.push($root.RPC.ControlPrune.decode(r, r.uint32()));\n                        break;\n                    default:\n                        r.skipType(t & 7);\n                        break;\n                    }\n                }\n                return m;\n            };\n\n            /**\n             * Creates a ControlMessage message from a plain object. Also converts values to their respective internal types.\n             * @function fromObject\n             * @memberof RPC.ControlMessage\n             * @static\n             * @param {Object.<string,*>} d Plain object\n             * @returns {RPC.ControlMessage} ControlMessage\n             */\n            ControlMessage.fromObject = function fromObject(d) {\n                if (d instanceof $root.RPC.ControlMessage)\n                    return d;\n                var m = new $root.RPC.ControlMessage();\n                if (d.ihave) {\n                    if (!Array.isArray(d.ihave))\n                        throw TypeError(\".RPC.ControlMessage.ihave: array expected\");\n                    m.ihave = [];\n                    for (var i = 0; i < d.ihave.length; ++i) {\n                        if (typeof d.ihave[i] !== \"object\")\n                            throw TypeError(\".RPC.ControlMessage.ihave: object expected\");\n                        m.ihave[i] = $root.RPC.ControlIHave.fromObject(d.ihave[i]);\n                    }\n                }\n                if (d.iwant) {\n                    if (!Array.isArray(d.iwant))\n                        throw TypeError(\".RPC.ControlMessage.iwant: array expected\");\n                    m.iwant = [];\n                    for (var i = 0; i < d.iwant.length; ++i) {\n                        if (typeof d.iwant[i] !== \"object\")\n                            throw TypeError(\".RPC.ControlMessage.iwant: object expected\");\n                        m.iwant[i] = $root.RPC.ControlIWant.fromObject(d.iwant[i]);\n                    }\n                }\n                if (d.graft) {\n                    if (!Array.isArray(d.graft))\n                        throw TypeError(\".RPC.ControlMessage.graft: array expected\");\n                    m.graft = [];\n                    for (var i = 0; i < d.graft.length; ++i) {\n                        if (typeof d.graft[i] !== \"object\")\n                            throw TypeError(\".RPC.ControlMessage.graft: object expected\");\n                        m.graft[i] = $root.RPC.ControlGraft.fromObject(d.graft[i]);\n                    }\n                }\n                if (d.prune) {\n                    if (!Array.isArray(d.prune))\n                        throw TypeError(\".RPC.ControlMessage.prune: array expected\");\n                    m.prune = [];\n                    for (var i = 0; i < d.prune.length; ++i) {\n                        if (typeof d.prune[i] !== \"object\")\n                            throw TypeError(\".RPC.ControlMessage.prune: object expected\");\n                        m.prune[i] = $root.RPC.ControlPrune.fromObject(d.prune[i]);\n                    }\n                }\n                return m;\n            };\n\n            /**\n             * Creates a plain object from a ControlMessage message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof RPC.ControlMessage\n             * @static\n             * @param {RPC.ControlMessage} m ControlMessage\n             * @param {$protobuf.IConversionOptions} [o] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            ControlMessage.toObject = function toObject(m, o) {\n                if (!o)\n                    o = {};\n                var d = {};\n                if (o.arrays || o.defaults) {\n                    d.ihave = [];\n                    d.iwant = [];\n                    d.graft = [];\n                    d.prune = [];\n                }\n                if (m.ihave && m.ihave.length) {\n                    d.ihave = [];\n                    for (var j = 0; j < m.ihave.length; ++j) {\n                        d.ihave[j] = $root.RPC.ControlIHave.toObject(m.ihave[j], o);\n                    }\n                }\n                if (m.iwant && m.iwant.length) {\n                    d.iwant = [];\n                    for (var j = 0; j < m.iwant.length; ++j) {\n                        d.iwant[j] = $root.RPC.ControlIWant.toObject(m.iwant[j], o);\n                    }\n                }\n                if (m.graft && m.graft.length) {\n                    d.graft = [];\n                    for (var j = 0; j < m.graft.length; ++j) {\n                        d.graft[j] = $root.RPC.ControlGraft.toObject(m.graft[j], o);\n                    }\n                }\n                if (m.prune && m.prune.length) {\n                    d.prune = [];\n                    for (var j = 0; j < m.prune.length; ++j) {\n                        d.prune[j] = $root.RPC.ControlPrune.toObject(m.prune[j], o);\n                    }\n                }\n                return d;\n            };\n\n            /**\n             * Converts this ControlMessage to JSON.\n             * @function toJSON\n             * @memberof RPC.ControlMessage\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            ControlMessage.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return ControlMessage;\n        })();\n\n        RPC.ControlIHave = (function() {\n\n            /**\n             * Properties of a ControlIHave.\n             * @memberof RPC\n             * @interface IControlIHave\n             * @property {string|null} [topicID] ControlIHave topicID\n             * @property {Array.<Uint8Array>|null} [messageIDs] ControlIHave messageIDs\n             */\n\n            /**\n             * Constructs a new ControlIHave.\n             * @memberof RPC\n             * @classdesc Represents a ControlIHave.\n             * @implements IControlIHave\n             * @constructor\n             * @param {RPC.IControlIHave=} [p] Properties to set\n             */\n            function ControlIHave(p) {\n                this.messageIDs = [];\n                if (p)\n                    for (var ks = Object.keys(p), i = 0; i < ks.length; ++i)\n                        if (p[ks[i]] != null)\n                            this[ks[i]] = p[ks[i]];\n            }\n\n            /**\n             * ControlIHave topicID.\n             * @member {string|null|undefined} topicID\n             * @memberof RPC.ControlIHave\n             * @instance\n             */\n            ControlIHave.prototype.topicID = null;\n\n            /**\n             * ControlIHave messageIDs.\n             * @member {Array.<Uint8Array>} messageIDs\n             * @memberof RPC.ControlIHave\n             * @instance\n             */\n            ControlIHave.prototype.messageIDs = $util.emptyArray;\n\n            // OneOf field names bound to virtual getters and setters\n            var $oneOfFields;\n\n            /**\n             * ControlIHave _topicID.\n             * @member {\"topicID\"|undefined} _topicID\n             * @memberof RPC.ControlIHave\n             * @instance\n             */\n            Object.defineProperty(ControlIHave.prototype, \"_topicID\", {\n                get: $util.oneOfGetter($oneOfFields = [\"topicID\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * Encodes the specified ControlIHave message. Does not implicitly {@link RPC.ControlIHave.verify|verify} messages.\n             * @function encode\n             * @memberof RPC.ControlIHave\n             * @static\n             * @param {RPC.IControlIHave} m ControlIHave message or plain object to encode\n             * @param {$protobuf.Writer} [w] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ControlIHave.encode = function encode(m, w) {\n                if (!w)\n                    w = $Writer.create();\n                if (m.topicID != null && Object.hasOwnProperty.call(m, \"topicID\"))\n                    w.uint32(10).string(m.topicID);\n                if (m.messageIDs != null && m.messageIDs.length) {\n                    for (var i = 0; i < m.messageIDs.length; ++i)\n                        w.uint32(18).bytes(m.messageIDs[i]);\n                }\n                return w;\n            };\n\n            /**\n             * Decodes a ControlIHave message from the specified reader or buffer.\n             * @function decode\n             * @memberof RPC.ControlIHave\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} r Reader or buffer to decode from\n             * @param {number} [l] Message length if known beforehand\n             * @returns {RPC.ControlIHave} ControlIHave\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ControlIHave.decode = function decode(r, l) {\n                if (!(r instanceof $Reader))\n                    r = $Reader.create(r);\n                var c = l === undefined ? r.len : r.pos + l, m = new $root.RPC.ControlIHave();\n                while (r.pos < c) {\n                    var t = r.uint32();\n                    switch (t >>> 3) {\n                    case 1:\n                        m.topicID = r.string();\n                        break;\n                    case 2:\n                        if (!(m.messageIDs && m.messageIDs.length))\n                            m.messageIDs = [];\n                        m.messageIDs.push(r.bytes());\n                        break;\n                    default:\n                        r.skipType(t & 7);\n                        break;\n                    }\n                }\n                return m;\n            };\n\n            /**\n             * Creates a ControlIHave message from a plain object. Also converts values to their respective internal types.\n             * @function fromObject\n             * @memberof RPC.ControlIHave\n             * @static\n             * @param {Object.<string,*>} d Plain object\n             * @returns {RPC.ControlIHave} ControlIHave\n             */\n            ControlIHave.fromObject = function fromObject(d) {\n                if (d instanceof $root.RPC.ControlIHave)\n                    return d;\n                var m = new $root.RPC.ControlIHave();\n                if (d.topicID != null) {\n                    m.topicID = String(d.topicID);\n                }\n                if (d.messageIDs) {\n                    if (!Array.isArray(d.messageIDs))\n                        throw TypeError(\".RPC.ControlIHave.messageIDs: array expected\");\n                    m.messageIDs = [];\n                    for (var i = 0; i < d.messageIDs.length; ++i) {\n                        if (typeof d.messageIDs[i] === \"string\")\n                            $util.base64.decode(d.messageIDs[i], m.messageIDs[i] = $util.newBuffer($util.base64.length(d.messageIDs[i])), 0);\n                        else if (d.messageIDs[i].length)\n                            m.messageIDs[i] = d.messageIDs[i];\n                    }\n                }\n                return m;\n            };\n\n            /**\n             * Creates a plain object from a ControlIHave message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof RPC.ControlIHave\n             * @static\n             * @param {RPC.ControlIHave} m ControlIHave\n             * @param {$protobuf.IConversionOptions} [o] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            ControlIHave.toObject = function toObject(m, o) {\n                if (!o)\n                    o = {};\n                var d = {};\n                if (o.arrays || o.defaults) {\n                    d.messageIDs = [];\n                }\n                if (m.topicID != null && m.hasOwnProperty(\"topicID\")) {\n                    d.topicID = m.topicID;\n                    if (o.oneofs)\n                        d._topicID = \"topicID\";\n                }\n                if (m.messageIDs && m.messageIDs.length) {\n                    d.messageIDs = [];\n                    for (var j = 0; j < m.messageIDs.length; ++j) {\n                        d.messageIDs[j] = o.bytes === String ? $util.base64.encode(m.messageIDs[j], 0, m.messageIDs[j].length) : o.bytes === Array ? Array.prototype.slice.call(m.messageIDs[j]) : m.messageIDs[j];\n                    }\n                }\n                return d;\n            };\n\n            /**\n             * Converts this ControlIHave to JSON.\n             * @function toJSON\n             * @memberof RPC.ControlIHave\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            ControlIHave.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return ControlIHave;\n        })();\n\n        RPC.ControlIWant = (function() {\n\n            /**\n             * Properties of a ControlIWant.\n             * @memberof RPC\n             * @interface IControlIWant\n             * @property {Array.<Uint8Array>|null} [messageIDs] ControlIWant messageIDs\n             */\n\n            /**\n             * Constructs a new ControlIWant.\n             * @memberof RPC\n             * @classdesc Represents a ControlIWant.\n             * @implements IControlIWant\n             * @constructor\n             * @param {RPC.IControlIWant=} [p] Properties to set\n             */\n            function ControlIWant(p) {\n                this.messageIDs = [];\n                if (p)\n                    for (var ks = Object.keys(p), i = 0; i < ks.length; ++i)\n                        if (p[ks[i]] != null)\n                            this[ks[i]] = p[ks[i]];\n            }\n\n            /**\n             * ControlIWant messageIDs.\n             * @member {Array.<Uint8Array>} messageIDs\n             * @memberof RPC.ControlIWant\n             * @instance\n             */\n            ControlIWant.prototype.messageIDs = $util.emptyArray;\n\n            /**\n             * Encodes the specified ControlIWant message. Does not implicitly {@link RPC.ControlIWant.verify|verify} messages.\n             * @function encode\n             * @memberof RPC.ControlIWant\n             * @static\n             * @param {RPC.IControlIWant} m ControlIWant message or plain object to encode\n             * @param {$protobuf.Writer} [w] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ControlIWant.encode = function encode(m, w) {\n                if (!w)\n                    w = $Writer.create();\n                if (m.messageIDs != null && m.messageIDs.length) {\n                    for (var i = 0; i < m.messageIDs.length; ++i)\n                        w.uint32(10).bytes(m.messageIDs[i]);\n                }\n                return w;\n            };\n\n            /**\n             * Decodes a ControlIWant message from the specified reader or buffer.\n             * @function decode\n             * @memberof RPC.ControlIWant\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} r Reader or buffer to decode from\n             * @param {number} [l] Message length if known beforehand\n             * @returns {RPC.ControlIWant} ControlIWant\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ControlIWant.decode = function decode(r, l) {\n                if (!(r instanceof $Reader))\n                    r = $Reader.create(r);\n                var c = l === undefined ? r.len : r.pos + l, m = new $root.RPC.ControlIWant();\n                while (r.pos < c) {\n                    var t = r.uint32();\n                    switch (t >>> 3) {\n                    case 1:\n                        if (!(m.messageIDs && m.messageIDs.length))\n                            m.messageIDs = [];\n                        m.messageIDs.push(r.bytes());\n                        break;\n                    default:\n                        r.skipType(t & 7);\n                        break;\n                    }\n                }\n                return m;\n            };\n\n            /**\n             * Creates a ControlIWant message from a plain object. Also converts values to their respective internal types.\n             * @function fromObject\n             * @memberof RPC.ControlIWant\n             * @static\n             * @param {Object.<string,*>} d Plain object\n             * @returns {RPC.ControlIWant} ControlIWant\n             */\n            ControlIWant.fromObject = function fromObject(d) {\n                if (d instanceof $root.RPC.ControlIWant)\n                    return d;\n                var m = new $root.RPC.ControlIWant();\n                if (d.messageIDs) {\n                    if (!Array.isArray(d.messageIDs))\n                        throw TypeError(\".RPC.ControlIWant.messageIDs: array expected\");\n                    m.messageIDs = [];\n                    for (var i = 0; i < d.messageIDs.length; ++i) {\n                        if (typeof d.messageIDs[i] === \"string\")\n                            $util.base64.decode(d.messageIDs[i], m.messageIDs[i] = $util.newBuffer($util.base64.length(d.messageIDs[i])), 0);\n                        else if (d.messageIDs[i].length)\n                            m.messageIDs[i] = d.messageIDs[i];\n                    }\n                }\n                return m;\n            };\n\n            /**\n             * Creates a plain object from a ControlIWant message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof RPC.ControlIWant\n             * @static\n             * @param {RPC.ControlIWant} m ControlIWant\n             * @param {$protobuf.IConversionOptions} [o] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            ControlIWant.toObject = function toObject(m, o) {\n                if (!o)\n                    o = {};\n                var d = {};\n                if (o.arrays || o.defaults) {\n                    d.messageIDs = [];\n                }\n                if (m.messageIDs && m.messageIDs.length) {\n                    d.messageIDs = [];\n                    for (var j = 0; j < m.messageIDs.length; ++j) {\n                        d.messageIDs[j] = o.bytes === String ? $util.base64.encode(m.messageIDs[j], 0, m.messageIDs[j].length) : o.bytes === Array ? Array.prototype.slice.call(m.messageIDs[j]) : m.messageIDs[j];\n                    }\n                }\n                return d;\n            };\n\n            /**\n             * Converts this ControlIWant to JSON.\n             * @function toJSON\n             * @memberof RPC.ControlIWant\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            ControlIWant.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return ControlIWant;\n        })();\n\n        RPC.ControlGraft = (function() {\n\n            /**\n             * Properties of a ControlGraft.\n             * @memberof RPC\n             * @interface IControlGraft\n             * @property {string|null} [topicID] ControlGraft topicID\n             */\n\n            /**\n             * Constructs a new ControlGraft.\n             * @memberof RPC\n             * @classdesc Represents a ControlGraft.\n             * @implements IControlGraft\n             * @constructor\n             * @param {RPC.IControlGraft=} [p] Properties to set\n             */\n            function ControlGraft(p) {\n                if (p)\n                    for (var ks = Object.keys(p), i = 0; i < ks.length; ++i)\n                        if (p[ks[i]] != null)\n                            this[ks[i]] = p[ks[i]];\n            }\n\n            /**\n             * ControlGraft topicID.\n             * @member {string|null|undefined} topicID\n             * @memberof RPC.ControlGraft\n             * @instance\n             */\n            ControlGraft.prototype.topicID = null;\n\n            // OneOf field names bound to virtual getters and setters\n            var $oneOfFields;\n\n            /**\n             * ControlGraft _topicID.\n             * @member {\"topicID\"|undefined} _topicID\n             * @memberof RPC.ControlGraft\n             * @instance\n             */\n            Object.defineProperty(ControlGraft.prototype, \"_topicID\", {\n                get: $util.oneOfGetter($oneOfFields = [\"topicID\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * Encodes the specified ControlGraft message. Does not implicitly {@link RPC.ControlGraft.verify|verify} messages.\n             * @function encode\n             * @memberof RPC.ControlGraft\n             * @static\n             * @param {RPC.IControlGraft} m ControlGraft message or plain object to encode\n             * @param {$protobuf.Writer} [w] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ControlGraft.encode = function encode(m, w) {\n                if (!w)\n                    w = $Writer.create();\n                if (m.topicID != null && Object.hasOwnProperty.call(m, \"topicID\"))\n                    w.uint32(10).string(m.topicID);\n                return w;\n            };\n\n            /**\n             * Decodes a ControlGraft message from the specified reader or buffer.\n             * @function decode\n             * @memberof RPC.ControlGraft\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} r Reader or buffer to decode from\n             * @param {number} [l] Message length if known beforehand\n             * @returns {RPC.ControlGraft} ControlGraft\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ControlGraft.decode = function decode(r, l) {\n                if (!(r instanceof $Reader))\n                    r = $Reader.create(r);\n                var c = l === undefined ? r.len : r.pos + l, m = new $root.RPC.ControlGraft();\n                while (r.pos < c) {\n                    var t = r.uint32();\n                    switch (t >>> 3) {\n                    case 1:\n                        m.topicID = r.string();\n                        break;\n                    default:\n                        r.skipType(t & 7);\n                        break;\n                    }\n                }\n                return m;\n            };\n\n            /**\n             * Creates a ControlGraft message from a plain object. Also converts values to their respective internal types.\n             * @function fromObject\n             * @memberof RPC.ControlGraft\n             * @static\n             * @param {Object.<string,*>} d Plain object\n             * @returns {RPC.ControlGraft} ControlGraft\n             */\n            ControlGraft.fromObject = function fromObject(d) {\n                if (d instanceof $root.RPC.ControlGraft)\n                    return d;\n                var m = new $root.RPC.ControlGraft();\n                if (d.topicID != null) {\n                    m.topicID = String(d.topicID);\n                }\n                return m;\n            };\n\n            /**\n             * Creates a plain object from a ControlGraft message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof RPC.ControlGraft\n             * @static\n             * @param {RPC.ControlGraft} m ControlGraft\n             * @param {$protobuf.IConversionOptions} [o] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            ControlGraft.toObject = function toObject(m, o) {\n                if (!o)\n                    o = {};\n                var d = {};\n                if (m.topicID != null && m.hasOwnProperty(\"topicID\")) {\n                    d.topicID = m.topicID;\n                    if (o.oneofs)\n                        d._topicID = \"topicID\";\n                }\n                return d;\n            };\n\n            /**\n             * Converts this ControlGraft to JSON.\n             * @function toJSON\n             * @memberof RPC.ControlGraft\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            ControlGraft.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return ControlGraft;\n        })();\n\n        RPC.ControlPrune = (function() {\n\n            /**\n             * Properties of a ControlPrune.\n             * @memberof RPC\n             * @interface IControlPrune\n             * @property {string|null} [topicID] ControlPrune topicID\n             * @property {Array.<RPC.IPeerInfo>|null} [peers] ControlPrune peers\n             * @property {number|null} [backoff] ControlPrune backoff\n             */\n\n            /**\n             * Constructs a new ControlPrune.\n             * @memberof RPC\n             * @classdesc Represents a ControlPrune.\n             * @implements IControlPrune\n             * @constructor\n             * @param {RPC.IControlPrune=} [p] Properties to set\n             */\n            function ControlPrune(p) {\n                this.peers = [];\n                if (p)\n                    for (var ks = Object.keys(p), i = 0; i < ks.length; ++i)\n                        if (p[ks[i]] != null)\n                            this[ks[i]] = p[ks[i]];\n            }\n\n            /**\n             * ControlPrune topicID.\n             * @member {string|null|undefined} topicID\n             * @memberof RPC.ControlPrune\n             * @instance\n             */\n            ControlPrune.prototype.topicID = null;\n\n            /**\n             * ControlPrune peers.\n             * @member {Array.<RPC.IPeerInfo>} peers\n             * @memberof RPC.ControlPrune\n             * @instance\n             */\n            ControlPrune.prototype.peers = $util.emptyArray;\n\n            /**\n             * ControlPrune backoff.\n             * @member {number|null|undefined} backoff\n             * @memberof RPC.ControlPrune\n             * @instance\n             */\n            ControlPrune.prototype.backoff = null;\n\n            // OneOf field names bound to virtual getters and setters\n            var $oneOfFields;\n\n            /**\n             * ControlPrune _topicID.\n             * @member {\"topicID\"|undefined} _topicID\n             * @memberof RPC.ControlPrune\n             * @instance\n             */\n            Object.defineProperty(ControlPrune.prototype, \"_topicID\", {\n                get: $util.oneOfGetter($oneOfFields = [\"topicID\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * ControlPrune _backoff.\n             * @member {\"backoff\"|undefined} _backoff\n             * @memberof RPC.ControlPrune\n             * @instance\n             */\n            Object.defineProperty(ControlPrune.prototype, \"_backoff\", {\n                get: $util.oneOfGetter($oneOfFields = [\"backoff\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * Encodes the specified ControlPrune message. Does not implicitly {@link RPC.ControlPrune.verify|verify} messages.\n             * @function encode\n             * @memberof RPC.ControlPrune\n             * @static\n             * @param {RPC.IControlPrune} m ControlPrune message or plain object to encode\n             * @param {$protobuf.Writer} [w] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            ControlPrune.encode = function encode(m, w) {\n                if (!w)\n                    w = $Writer.create();\n                if (m.topicID != null && Object.hasOwnProperty.call(m, \"topicID\"))\n                    w.uint32(10).string(m.topicID);\n                if (m.peers != null && m.peers.length) {\n                    for (var i = 0; i < m.peers.length; ++i)\n                        $root.RPC.PeerInfo.encode(m.peers[i], w.uint32(18).fork()).ldelim();\n                }\n                if (m.backoff != null && Object.hasOwnProperty.call(m, \"backoff\"))\n                    w.uint32(24).uint64(m.backoff);\n                return w;\n            };\n\n            /**\n             * Decodes a ControlPrune message from the specified reader or buffer.\n             * @function decode\n             * @memberof RPC.ControlPrune\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} r Reader or buffer to decode from\n             * @param {number} [l] Message length if known beforehand\n             * @returns {RPC.ControlPrune} ControlPrune\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            ControlPrune.decode = function decode(r, l) {\n                if (!(r instanceof $Reader))\n                    r = $Reader.create(r);\n                var c = l === undefined ? r.len : r.pos + l, m = new $root.RPC.ControlPrune();\n                while (r.pos < c) {\n                    var t = r.uint32();\n                    switch (t >>> 3) {\n                    case 1:\n                        m.topicID = r.string();\n                        break;\n                    case 2:\n                        if (!(m.peers && m.peers.length))\n                            m.peers = [];\n                        m.peers.push($root.RPC.PeerInfo.decode(r, r.uint32()));\n                        break;\n                    case 3:\n                        m.backoff = r.uint64();\n                        break;\n                    default:\n                        r.skipType(t & 7);\n                        break;\n                    }\n                }\n                return m;\n            };\n\n            /**\n             * Creates a ControlPrune message from a plain object. Also converts values to their respective internal types.\n             * @function fromObject\n             * @memberof RPC.ControlPrune\n             * @static\n             * @param {Object.<string,*>} d Plain object\n             * @returns {RPC.ControlPrune} ControlPrune\n             */\n            ControlPrune.fromObject = function fromObject(d) {\n                if (d instanceof $root.RPC.ControlPrune)\n                    return d;\n                var m = new $root.RPC.ControlPrune();\n                if (d.topicID != null) {\n                    m.topicID = String(d.topicID);\n                }\n                if (d.peers) {\n                    if (!Array.isArray(d.peers))\n                        throw TypeError(\".RPC.ControlPrune.peers: array expected\");\n                    m.peers = [];\n                    for (var i = 0; i < d.peers.length; ++i) {\n                        if (typeof d.peers[i] !== \"object\")\n                            throw TypeError(\".RPC.ControlPrune.peers: object expected\");\n                        m.peers[i] = $root.RPC.PeerInfo.fromObject(d.peers[i]);\n                    }\n                }\n                if (d.backoff != null) {\n                    if ($util.Long)\n                        (m.backoff = $util.Long.fromValue(d.backoff)).unsigned = true;\n                    else if (typeof d.backoff === \"string\")\n                        m.backoff = parseInt(d.backoff, 10);\n                    else if (typeof d.backoff === \"number\")\n                        m.backoff = d.backoff;\n                    else if (typeof d.backoff === \"object\")\n                        m.backoff = new $util.LongBits(d.backoff.low >>> 0, d.backoff.high >>> 0).toNumber(true);\n                }\n                return m;\n            };\n\n            /**\n             * Creates a plain object from a ControlPrune message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof RPC.ControlPrune\n             * @static\n             * @param {RPC.ControlPrune} m ControlPrune\n             * @param {$protobuf.IConversionOptions} [o] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            ControlPrune.toObject = function toObject(m, o) {\n                if (!o)\n                    o = {};\n                var d = {};\n                if (o.arrays || o.defaults) {\n                    d.peers = [];\n                }\n                if (m.topicID != null && m.hasOwnProperty(\"topicID\")) {\n                    d.topicID = m.topicID;\n                    if (o.oneofs)\n                        d._topicID = \"topicID\";\n                }\n                if (m.peers && m.peers.length) {\n                    d.peers = [];\n                    for (var j = 0; j < m.peers.length; ++j) {\n                        d.peers[j] = $root.RPC.PeerInfo.toObject(m.peers[j], o);\n                    }\n                }\n                if (m.backoff != null && m.hasOwnProperty(\"backoff\")) {\n                    if (typeof m.backoff === \"number\")\n                        d.backoff = o.longs === String ? String(m.backoff) : m.backoff;\n                    else\n                        d.backoff = o.longs === String ? $util.Long.prototype.toString.call(m.backoff) : o.longs === Number ? new $util.LongBits(m.backoff.low >>> 0, m.backoff.high >>> 0).toNumber(true) : m.backoff;\n                    if (o.oneofs)\n                        d._backoff = \"backoff\";\n                }\n                return d;\n            };\n\n            /**\n             * Converts this ControlPrune to JSON.\n             * @function toJSON\n             * @memberof RPC.ControlPrune\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            ControlPrune.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return ControlPrune;\n        })();\n\n        RPC.PeerInfo = (function() {\n\n            /**\n             * Properties of a PeerInfo.\n             * @memberof RPC\n             * @interface IPeerInfo\n             * @property {Uint8Array|null} [peerID] PeerInfo peerID\n             * @property {Uint8Array|null} [signedPeerRecord] PeerInfo signedPeerRecord\n             */\n\n            /**\n             * Constructs a new PeerInfo.\n             * @memberof RPC\n             * @classdesc Represents a PeerInfo.\n             * @implements IPeerInfo\n             * @constructor\n             * @param {RPC.IPeerInfo=} [p] Properties to set\n             */\n            function PeerInfo(p) {\n                if (p)\n                    for (var ks = Object.keys(p), i = 0; i < ks.length; ++i)\n                        if (p[ks[i]] != null)\n                            this[ks[i]] = p[ks[i]];\n            }\n\n            /**\n             * PeerInfo peerID.\n             * @member {Uint8Array|null|undefined} peerID\n             * @memberof RPC.PeerInfo\n             * @instance\n             */\n            PeerInfo.prototype.peerID = null;\n\n            /**\n             * PeerInfo signedPeerRecord.\n             * @member {Uint8Array|null|undefined} signedPeerRecord\n             * @memberof RPC.PeerInfo\n             * @instance\n             */\n            PeerInfo.prototype.signedPeerRecord = null;\n\n            // OneOf field names bound to virtual getters and setters\n            var $oneOfFields;\n\n            /**\n             * PeerInfo _peerID.\n             * @member {\"peerID\"|undefined} _peerID\n             * @memberof RPC.PeerInfo\n             * @instance\n             */\n            Object.defineProperty(PeerInfo.prototype, \"_peerID\", {\n                get: $util.oneOfGetter($oneOfFields = [\"peerID\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * PeerInfo _signedPeerRecord.\n             * @member {\"signedPeerRecord\"|undefined} _signedPeerRecord\n             * @memberof RPC.PeerInfo\n             * @instance\n             */\n            Object.defineProperty(PeerInfo.prototype, \"_signedPeerRecord\", {\n                get: $util.oneOfGetter($oneOfFields = [\"signedPeerRecord\"]),\n                set: $util.oneOfSetter($oneOfFields)\n            });\n\n            /**\n             * Encodes the specified PeerInfo message. Does not implicitly {@link RPC.PeerInfo.verify|verify} messages.\n             * @function encode\n             * @memberof RPC.PeerInfo\n             * @static\n             * @param {RPC.IPeerInfo} m PeerInfo message or plain object to encode\n             * @param {$protobuf.Writer} [w] Writer to encode to\n             * @returns {$protobuf.Writer} Writer\n             */\n            PeerInfo.encode = function encode(m, w) {\n                if (!w)\n                    w = $Writer.create();\n                if (m.peerID != null && Object.hasOwnProperty.call(m, \"peerID\"))\n                    w.uint32(10).bytes(m.peerID);\n                if (m.signedPeerRecord != null && Object.hasOwnProperty.call(m, \"signedPeerRecord\"))\n                    w.uint32(18).bytes(m.signedPeerRecord);\n                return w;\n            };\n\n            /**\n             * Decodes a PeerInfo message from the specified reader or buffer.\n             * @function decode\n             * @memberof RPC.PeerInfo\n             * @static\n             * @param {$protobuf.Reader|Uint8Array} r Reader or buffer to decode from\n             * @param {number} [l] Message length if known beforehand\n             * @returns {RPC.PeerInfo} PeerInfo\n             * @throws {Error} If the payload is not a reader or valid buffer\n             * @throws {$protobuf.util.ProtocolError} If required fields are missing\n             */\n            PeerInfo.decode = function decode(r, l) {\n                if (!(r instanceof $Reader))\n                    r = $Reader.create(r);\n                var c = l === undefined ? r.len : r.pos + l, m = new $root.RPC.PeerInfo();\n                while (r.pos < c) {\n                    var t = r.uint32();\n                    switch (t >>> 3) {\n                    case 1:\n                        m.peerID = r.bytes();\n                        break;\n                    case 2:\n                        m.signedPeerRecord = r.bytes();\n                        break;\n                    default:\n                        r.skipType(t & 7);\n                        break;\n                    }\n                }\n                return m;\n            };\n\n            /**\n             * Creates a PeerInfo message from a plain object. Also converts values to their respective internal types.\n             * @function fromObject\n             * @memberof RPC.PeerInfo\n             * @static\n             * @param {Object.<string,*>} d Plain object\n             * @returns {RPC.PeerInfo} PeerInfo\n             */\n            PeerInfo.fromObject = function fromObject(d) {\n                if (d instanceof $root.RPC.PeerInfo)\n                    return d;\n                var m = new $root.RPC.PeerInfo();\n                if (d.peerID != null) {\n                    if (typeof d.peerID === \"string\")\n                        $util.base64.decode(d.peerID, m.peerID = $util.newBuffer($util.base64.length(d.peerID)), 0);\n                    else if (d.peerID.length)\n                        m.peerID = d.peerID;\n                }\n                if (d.signedPeerRecord != null) {\n                    if (typeof d.signedPeerRecord === \"string\")\n                        $util.base64.decode(d.signedPeerRecord, m.signedPeerRecord = $util.newBuffer($util.base64.length(d.signedPeerRecord)), 0);\n                    else if (d.signedPeerRecord.length)\n                        m.signedPeerRecord = d.signedPeerRecord;\n                }\n                return m;\n            };\n\n            /**\n             * Creates a plain object from a PeerInfo message. Also converts values to other types if specified.\n             * @function toObject\n             * @memberof RPC.PeerInfo\n             * @static\n             * @param {RPC.PeerInfo} m PeerInfo\n             * @param {$protobuf.IConversionOptions} [o] Conversion options\n             * @returns {Object.<string,*>} Plain object\n             */\n            PeerInfo.toObject = function toObject(m, o) {\n                if (!o)\n                    o = {};\n                var d = {};\n                if (m.peerID != null && m.hasOwnProperty(\"peerID\")) {\n                    d.peerID = o.bytes === String ? $util.base64.encode(m.peerID, 0, m.peerID.length) : o.bytes === Array ? Array.prototype.slice.call(m.peerID) : m.peerID;\n                    if (o.oneofs)\n                        d._peerID = \"peerID\";\n                }\n                if (m.signedPeerRecord != null && m.hasOwnProperty(\"signedPeerRecord\")) {\n                    d.signedPeerRecord = o.bytes === String ? $util.base64.encode(m.signedPeerRecord, 0, m.signedPeerRecord.length) : o.bytes === Array ? Array.prototype.slice.call(m.signedPeerRecord) : m.signedPeerRecord;\n                    if (o.oneofs)\n                        d._signedPeerRecord = \"signedPeerRecord\";\n                }\n                return d;\n            };\n\n            /**\n             * Converts this PeerInfo to JSON.\n             * @function toJSON\n             * @memberof RPC.PeerInfo\n             * @instance\n             * @returns {Object.<string,*>} JSON object\n             */\n            PeerInfo.prototype.toJSON = function toJSON() {\n                return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n            };\n\n            return PeerInfo;\n        })();\n\n        return RPC;\n    })();\n\n    return $root;\n});\n","export class MessageCache {\n    gossip;\n    msgs = new Map();\n    msgIdToStrFn;\n    history = [];\n    /** Track with accounting of messages in the mcache that are not yet validated */\n    notValidatedCount = 0;\n    /**\n     * Holds history of messages in timebounded history arrays\n     */\n    constructor(\n    /**\n     * The number of indices in the cache history used for gossiping. That means that a message\n     * won't get gossiped anymore when shift got called `gossip` many times after inserting the\n     * message in the cache.\n     */\n    gossip, historyCapacity, msgIdToStrFn) {\n        this.gossip = gossip;\n        this.msgIdToStrFn = msgIdToStrFn;\n        for (let i = 0; i < historyCapacity; i++) {\n            this.history[i] = [];\n        }\n    }\n    get size() {\n        return this.msgs.size;\n    }\n    /**\n     * Adds a message to the current window and the cache\n     * Returns true if the message is not known and is inserted in the cache\n     */\n    put(messageId, msg, validated = false) {\n        const { msgIdStr } = messageId;\n        // Don't add duplicate entries to the cache.\n        if (this.msgs.has(msgIdStr)) {\n            return false;\n        }\n        this.msgs.set(msgIdStr, {\n            message: msg,\n            validated,\n            originatingPeers: new Set(),\n            iwantCounts: new Map()\n        });\n        this.history[0].push({ ...messageId, topic: msg.topic });\n        if (!validated) {\n            this.notValidatedCount++;\n        }\n        return true;\n    }\n    observeDuplicate(msgId, fromPeerIdStr) {\n        const entry = this.msgs.get(msgId);\n        if (entry &&\n            // if the message is already validated, we don't need to store extra peers sending us\n            // duplicates as the message has already been forwarded\n            !entry.validated) {\n            entry.originatingPeers.add(fromPeerIdStr);\n        }\n    }\n    /**\n     * Retrieves a message from the cache by its ID, if it is still present\n     */\n    get(msgId) {\n        return this.msgs.get(this.msgIdToStrFn(msgId))?.message;\n    }\n    /**\n     * Increases the iwant count for the given message by one and returns the message together\n     * with the iwant if the message exists.\n     */\n    getWithIWantCount(msgIdStr, p) {\n        const msg = this.msgs.get(msgIdStr);\n        if (!msg) {\n            return null;\n        }\n        const count = (msg.iwantCounts.get(p) ?? 0) + 1;\n        msg.iwantCounts.set(p, count);\n        return { msg: msg.message, count };\n    }\n    /**\n     * Retrieves a list of message IDs for a set of topics\n     */\n    getGossipIDs(topics) {\n        const msgIdsByTopic = new Map();\n        for (let i = 0; i < this.gossip; i++) {\n            this.history[i].forEach((entry) => {\n                const msg = this.msgs.get(entry.msgIdStr);\n                if (msg && msg.validated && topics.has(entry.topic)) {\n                    let msgIds = msgIdsByTopic.get(entry.topic);\n                    if (!msgIds) {\n                        msgIds = [];\n                        msgIdsByTopic.set(entry.topic, msgIds);\n                    }\n                    msgIds.push(entry.msgId);\n                }\n            });\n        }\n        return msgIdsByTopic;\n    }\n    /**\n     * Gets a message with msgId and tags it as validated.\n     * This function also returns the known peers that have sent us this message. This is used to\n     * prevent us sending redundant messages to peers who have already propagated it.\n     */\n    validate(msgId) {\n        const entry = this.msgs.get(msgId);\n        if (!entry) {\n            return null;\n        }\n        if (!entry.validated) {\n            this.notValidatedCount--;\n        }\n        const { message, originatingPeers } = entry;\n        entry.validated = true;\n        // Clear the known peers list (after a message is validated, it is forwarded and we no\n        // longer need to store the originating peers).\n        entry.originatingPeers = new Set();\n        return { message, originatingPeers };\n    }\n    /**\n     * Shifts the current window, discarding messages older than this.history.length of the cache\n     */\n    shift() {\n        const lastCacheEntries = this.history[this.history.length - 1];\n        lastCacheEntries.forEach((cacheEntry) => {\n            const entry = this.msgs.get(cacheEntry.msgIdStr);\n            if (entry) {\n                this.msgs.delete(cacheEntry.msgIdStr);\n                if (!entry.validated) {\n                    this.notValidatedCount--;\n                }\n            }\n        });\n        this.history.pop();\n        this.history.unshift([]);\n    }\n    remove(msgId) {\n        const entry = this.msgs.get(msgId);\n        if (!entry) {\n            return null;\n        }\n        // Keep the message on the history vector, it will be dropped on a shift()\n        this.msgs.delete(msgId);\n        return entry;\n    }\n}\n//# sourceMappingURL=message-cache.js.map","export function computeScore(peer, pstats, params, peerIPs) {\n    let score = 0;\n    // topic stores\n    Object.entries(pstats.topics).forEach(([topic, tstats]) => {\n        // the topic parameters\n        const topicParams = params.topics[topic];\n        if (topicParams === undefined) {\n            // we are not scoring this topic\n            return;\n        }\n        let topicScore = 0;\n        // P1: time in Mesh\n        if (tstats.inMesh) {\n            let p1 = tstats.meshTime / topicParams.timeInMeshQuantum;\n            if (p1 > topicParams.timeInMeshCap) {\n                p1 = topicParams.timeInMeshCap;\n            }\n            topicScore += p1 * topicParams.timeInMeshWeight;\n        }\n        // P2: first message deliveries\n        let p2 = tstats.firstMessageDeliveries;\n        if (p2 > topicParams.firstMessageDeliveriesCap) {\n            p2 = topicParams.firstMessageDeliveriesCap;\n        }\n        topicScore += p2 * topicParams.firstMessageDeliveriesWeight;\n        // P3: mesh message deliveries\n        if (tstats.meshMessageDeliveriesActive &&\n            tstats.meshMessageDeliveries < topicParams.meshMessageDeliveriesThreshold) {\n            const deficit = topicParams.meshMessageDeliveriesThreshold - tstats.meshMessageDeliveries;\n            const p3 = deficit * deficit;\n            topicScore += p3 * topicParams.meshMessageDeliveriesWeight;\n        }\n        // P3b:\n        // NOTE: the weight of P3b is negative (validated in validateTopicScoreParams) so this detracts\n        const p3b = tstats.meshFailurePenalty;\n        topicScore += p3b * topicParams.meshFailurePenaltyWeight;\n        // P4: invalid messages\n        // NOTE: the weight of P4 is negative (validated in validateTopicScoreParams) so this detracts\n        const p4 = tstats.invalidMessageDeliveries * tstats.invalidMessageDeliveries;\n        topicScore += p4 * topicParams.invalidMessageDeliveriesWeight;\n        // update score, mixing with topic weight\n        score += topicScore * topicParams.topicWeight;\n    });\n    // apply the topic score cap, if any\n    if (params.topicScoreCap > 0 && score > params.topicScoreCap) {\n        score = params.topicScoreCap;\n    }\n    // P5: application-specific score\n    const p5 = params.appSpecificScore(peer);\n    score += p5 * params.appSpecificWeight;\n    // P6: IP colocation factor\n    pstats.knownIPs.forEach((ip) => {\n        if (params.IPColocationFactorWhitelist.has(ip)) {\n            return;\n        }\n        // P6 has a cliff (IPColocationFactorThreshold)\n        // It's only applied if at least that many peers are connected to us from that source IP addr.\n        // It is quadratic, and the weight is negative (validated in validatePeerScoreParams)\n        const peersInIP = peerIPs.get(ip);\n        const numPeersInIP = peersInIP ? peersInIP.size : 0;\n        if (numPeersInIP > params.IPColocationFactorThreshold) {\n            const surplus = numPeersInIP - params.IPColocationFactorThreshold;\n            const p6 = surplus * surplus;\n            score += p6 * params.IPColocationFactorWeight;\n        }\n    });\n    // P7: behavioural pattern penalty\n    if (pstats.behaviourPenalty > params.behaviourPenaltyThreshold) {\n        const excess = pstats.behaviourPenalty - params.behaviourPenaltyThreshold;\n        const p7 = excess * excess;\n        score += p7 * params.behaviourPenaltyWeight;\n    }\n    return score;\n}\n//# sourceMappingURL=compute-score.js.map","export const ERR_INVALID_PEER_SCORE_PARAMS = 'ERR_INVALID_PEER_SCORE_PARAMS';\nexport const ERR_INVALID_PEER_SCORE_THRESHOLDS = 'ERR_INVALID_PEER_SCORE_THRESHOLDS';\n//# sourceMappingURL=constants.js.map","export function computeScoreWeights(peer, pstats, params, peerIPs, topicStrToLabel) {\n    let score = 0;\n    const byTopic = new Map();\n    // topic stores\n    Object.entries(pstats.topics).forEach(([topic, tstats]) => {\n        // the topic parameters\n        // Aggregate by known topicLabel or throw to 'unknown'. This prevent too high cardinality\n        const topicLabel = topicStrToLabel.get(topic) ?? 'unknown';\n        const topicParams = params.topics[topic];\n        if (topicParams === undefined) {\n            // we are not scoring this topic\n            return;\n        }\n        let topicScores = byTopic.get(topicLabel);\n        if (!topicScores) {\n            topicScores = {\n                p1w: 0,\n                p2w: 0,\n                p3w: 0,\n                p3bw: 0,\n                p4w: 0\n            };\n            byTopic.set(topicLabel, topicScores);\n        }\n        let p1w = 0;\n        let p2w = 0;\n        let p3w = 0;\n        let p3bw = 0;\n        let p4w = 0;\n        // P1: time in Mesh\n        if (tstats.inMesh) {\n            const p1 = Math.max(tstats.meshTime / topicParams.timeInMeshQuantum, topicParams.timeInMeshCap);\n            p1w += p1 * topicParams.timeInMeshWeight;\n        }\n        // P2: first message deliveries\n        let p2 = tstats.firstMessageDeliveries;\n        if (p2 > topicParams.firstMessageDeliveriesCap) {\n            p2 = topicParams.firstMessageDeliveriesCap;\n        }\n        p2w += p2 * topicParams.firstMessageDeliveriesWeight;\n        // P3: mesh message deliveries\n        if (tstats.meshMessageDeliveriesActive &&\n            tstats.meshMessageDeliveries < topicParams.meshMessageDeliveriesThreshold) {\n            const deficit = topicParams.meshMessageDeliveriesThreshold - tstats.meshMessageDeliveries;\n            const p3 = deficit * deficit;\n            p3w += p3 * topicParams.meshMessageDeliveriesWeight;\n        }\n        // P3b:\n        // NOTE: the weight of P3b is negative (validated in validateTopicScoreParams) so this detracts\n        const p3b = tstats.meshFailurePenalty;\n        p3bw += p3b * topicParams.meshFailurePenaltyWeight;\n        // P4: invalid messages\n        // NOTE: the weight of P4 is negative (validated in validateTopicScoreParams) so this detracts\n        const p4 = tstats.invalidMessageDeliveries * tstats.invalidMessageDeliveries;\n        p4w += p4 * topicParams.invalidMessageDeliveriesWeight;\n        // update score, mixing with topic weight\n        score += (p1w + p2w + p3w + p3bw + p4w) * topicParams.topicWeight;\n        topicScores.p1w += p1w;\n        topicScores.p2w += p2w;\n        topicScores.p3w += p3w;\n        topicScores.p3bw += p3bw;\n        topicScores.p4w += p4w;\n    });\n    // apply the topic score cap, if any\n    if (params.topicScoreCap > 0 && score > params.topicScoreCap) {\n        score = params.topicScoreCap;\n        // Proportionally apply cap to all individual contributions\n        const capF = params.topicScoreCap / score;\n        for (const ws of byTopic.values()) {\n            ws.p1w *= capF;\n            ws.p2w *= capF;\n            ws.p3w *= capF;\n            ws.p3bw *= capF;\n            ws.p4w *= capF;\n        }\n    }\n    let p5w = 0;\n    let p6w = 0;\n    let p7w = 0;\n    // P5: application-specific score\n    const p5 = params.appSpecificScore(peer);\n    p5w += p5 * params.appSpecificWeight;\n    // P6: IP colocation factor\n    pstats.knownIPs.forEach((ip) => {\n        if (params.IPColocationFactorWhitelist.has(ip)) {\n            return;\n        }\n        // P6 has a cliff (IPColocationFactorThreshold)\n        // It's only applied if at least that many peers are connected to us from that source IP addr.\n        // It is quadratic, and the weight is negative (validated in validatePeerScoreParams)\n        const peersInIP = peerIPs.get(ip);\n        const numPeersInIP = peersInIP ? peersInIP.size : 0;\n        if (numPeersInIP > params.IPColocationFactorThreshold) {\n            const surplus = numPeersInIP - params.IPColocationFactorThreshold;\n            const p6 = surplus * surplus;\n            p6w += p6 * params.IPColocationFactorWeight;\n        }\n    });\n    // P7: behavioural pattern penalty\n    const p7 = pstats.behaviourPenalty * pstats.behaviourPenalty;\n    p7w += p7 * params.behaviourPenaltyWeight;\n    score += p5w + p6w + p7w;\n    return {\n        byTopic,\n        p5w,\n        p6w,\n        p7w,\n        score\n    };\n}\nexport function computeAllPeersScoreWeights(peerIdStrs, peerStats, params, peerIPs, topicStrToLabel) {\n    const sw = {\n        byTopic: new Map(),\n        p5w: [],\n        p6w: [],\n        p7w: [],\n        score: []\n    };\n    for (const peerIdStr of peerIdStrs) {\n        const pstats = peerStats.get(peerIdStr);\n        if (pstats) {\n            const swPeer = computeScoreWeights(peerIdStr, pstats, params, peerIPs, topicStrToLabel);\n            for (const [topic, swPeerTopic] of swPeer.byTopic) {\n                let swTopic = sw.byTopic.get(topic);\n                if (!swTopic) {\n                    swTopic = {\n                        p1w: [],\n                        p2w: [],\n                        p3w: [],\n                        p3bw: [],\n                        p4w: []\n                    };\n                    sw.byTopic.set(topic, swTopic);\n                }\n                swTopic.p1w.push(swPeerTopic.p1w);\n                swTopic.p2w.push(swPeerTopic.p2w);\n                swTopic.p3w.push(swPeerTopic.p3w);\n                swTopic.p3bw.push(swPeerTopic.p3bw);\n                swTopic.p4w.push(swPeerTopic.p4w);\n            }\n            sw.p5w.push(swPeer.p5w);\n            sw.p6w.push(swPeer.p6w);\n            sw.p7w.push(swPeer.p7w);\n            sw.score.push(swPeer.score);\n        }\n        else {\n            sw.p5w.push(0);\n            sw.p6w.push(0);\n            sw.p7w.push(0);\n            sw.score.push(0);\n        }\n    }\n    return sw;\n}\n//# sourceMappingURL=scoreMetrics.js.map","/**\n * Pseudo-randomly shuffles an array\n *\n * Mutates the input array\n */\nexport function shuffle(arr) {\n    if (arr.length <= 1) {\n        return arr;\n    }\n    const randInt = () => {\n        return Math.floor(Math.random() * Math.floor(arr.length));\n    };\n    for (let i = 0; i < arr.length; i++) {\n        const j = randInt();\n        const tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n    return arr;\n}\n//# sourceMappingURL=shuffle.js.map","/**\n * This is similar to https://github.com/daviddias/time-cache/blob/master/src/index.js\n * for our own need, we don't use lodash throttle to improve performance.\n * This gives 4x - 5x performance gain compared to npm TimeCache\n */\nexport class SimpleTimeCache {\n    entries = new Map();\n    validityMs;\n    constructor(opts) {\n        this.validityMs = opts.validityMs;\n        // allow negative validityMs so that this does not cache anything, spec test compliance.spec.js\n        // sends duplicate messages and expect peer to receive all. Application likely uses positive validityMs\n    }\n    get size() {\n        return this.entries.size;\n    }\n    /** Returns true if there was a key collision and the entry is dropped */\n    put(key, value) {\n        if (this.entries.has(key)) {\n            // Key collisions break insertion order in the entries cache, which break prune logic.\n            // prune relies on each iterated entry to have strictly ascending validUntilMs, else it\n            // won't prune expired entries and SimpleTimeCache will grow unexpectedly.\n            // As of Oct 2022 NodeJS v16, inserting the same key twice with different value does not\n            // change the key position in the iterator stream. A unit test asserts this behaviour.\n            return true;\n        }\n        this.entries.set(key, { value, validUntilMs: Date.now() + this.validityMs });\n        return false;\n    }\n    prune() {\n        const now = Date.now();\n        for (const [k, v] of this.entries.entries()) {\n            if (v.validUntilMs < now) {\n                this.entries.delete(k);\n            }\n            else {\n                // Entries are inserted with strictly ascending validUntilMs.\n                // Stop early to save iterations\n                break;\n            }\n        }\n    }\n    has(key) {\n        return this.entries.has(key);\n    }\n    get(key) {\n        const value = this.entries.get(key);\n        return value && value.validUntilMs >= Date.now() ? value.value : undefined;\n    }\n    clear() {\n        this.entries.clear();\n    }\n}\n//# sourceMappingURL=time-cache.js.map","/* eslint-disable import/export */\n/* eslint-disable complexity */\n/* eslint-disable @typescript-eslint/no-namespace */\n/* eslint-disable @typescript-eslint/no-unnecessary-boolean-literal-compare */\n/* eslint-disable @typescript-eslint/no-empty-interface */\nimport { enumeration, encodeMessage, decodeMessage, message } from 'protons-runtime';\nexport var KeyType;\n(function (KeyType) {\n    KeyType[\"RSA\"] = \"RSA\";\n    KeyType[\"Ed25519\"] = \"Ed25519\";\n    KeyType[\"Secp256k1\"] = \"Secp256k1\";\n})(KeyType || (KeyType = {}));\nvar __KeyTypeValues;\n(function (__KeyTypeValues) {\n    __KeyTypeValues[__KeyTypeValues[\"RSA\"] = 0] = \"RSA\";\n    __KeyTypeValues[__KeyTypeValues[\"Ed25519\"] = 1] = \"Ed25519\";\n    __KeyTypeValues[__KeyTypeValues[\"Secp256k1\"] = 2] = \"Secp256k1\";\n})(__KeyTypeValues || (__KeyTypeValues = {}));\n(function (KeyType) {\n    KeyType.codec = () => {\n        return enumeration(__KeyTypeValues);\n    };\n})(KeyType || (KeyType = {}));\nexport var PublicKey;\n(function (PublicKey) {\n    let _codec;\n    PublicKey.codec = () => {\n        if (_codec == null) {\n            _codec = message((obj, w, opts = {}) => {\n                if (opts.lengthDelimited !== false) {\n                    w.fork();\n                }\n                if (obj.Type != null) {\n                    w.uint32(8);\n                    KeyType.codec().encode(obj.Type, w);\n                }\n                if (obj.Data != null) {\n                    w.uint32(18);\n                    w.bytes(obj.Data);\n                }\n                if (opts.lengthDelimited !== false) {\n                    w.ldelim();\n                }\n            }, (reader, length) => {\n                const obj = {};\n                const end = length == null ? reader.len : reader.pos + length;\n                while (reader.pos < end) {\n                    const tag = reader.uint32();\n                    switch (tag >>> 3) {\n                        case 1:\n                            obj.Type = KeyType.codec().decode(reader);\n                            break;\n                        case 2:\n                            obj.Data = reader.bytes();\n                            break;\n                        default:\n                            reader.skipType(tag & 7);\n                            break;\n                    }\n                }\n                return obj;\n            });\n        }\n        return _codec;\n    };\n    PublicKey.encode = (obj) => {\n        return encodeMessage(obj, PublicKey.codec());\n    };\n    PublicKey.decode = (buf) => {\n        return decodeMessage(buf, PublicKey.codec());\n    };\n})(PublicKey || (PublicKey = {}));\nexport var PrivateKey;\n(function (PrivateKey) {\n    let _codec;\n    PrivateKey.codec = () => {\n        if (_codec == null) {\n            _codec = message((obj, w, opts = {}) => {\n                if (opts.lengthDelimited !== false) {\n                    w.fork();\n                }\n                if (obj.Type != null) {\n                    w.uint32(8);\n                    KeyType.codec().encode(obj.Type, w);\n                }\n                if (obj.Data != null) {\n                    w.uint32(18);\n                    w.bytes(obj.Data);\n                }\n                if (opts.lengthDelimited !== false) {\n                    w.ldelim();\n                }\n            }, (reader, length) => {\n                const obj = {};\n                const end = length == null ? reader.len : reader.pos + length;\n                while (reader.pos < end) {\n                    const tag = reader.uint32();\n                    switch (tag >>> 3) {\n                        case 1:\n                            obj.Type = KeyType.codec().decode(reader);\n                            break;\n                        case 2:\n                            obj.Data = reader.bytes();\n                            break;\n                        default:\n                            reader.skipType(tag & 7);\n                            break;\n                    }\n                }\n                return obj;\n            });\n        }\n        return _codec;\n    };\n    PrivateKey.encode = (obj) => {\n        return encodeMessage(obj, PrivateKey.codec());\n    };\n    PrivateKey.decode = (buf) => {\n        return decodeMessage(buf, PrivateKey.codec());\n    };\n})(PrivateKey || (PrivateKey = {}));\n//# sourceMappingURL=keys.js.map","import { CodeError } from '@libp2p/interface/errors';\nimport { randomBytes as randB } from '@noble/hashes/utils';\nexport default function randomBytes(length) {\n    if (isNaN(length) || length <= 0) {\n        throw new CodeError('random bytes length must be a Number bigger than 0', 'ERR_INVALID_LENGTH');\n    }\n    return randB(length);\n}\n//# sourceMappingURL=random-bytes.js.map","import { bases } from 'multiformats/basics';\nimport { allocUnsafe } from '../alloc.js';\nfunction createCodec(name, prefix, encode, decode) {\n    return {\n        name,\n        prefix,\n        encoder: {\n            name,\n            prefix,\n            encode\n        },\n        decoder: {\n            decode\n        }\n    };\n}\nconst string = createCodec('utf8', 'u', (buf) => {\n    const decoder = new TextDecoder('utf8');\n    return 'u' + decoder.decode(buf);\n}, (str) => {\n    const encoder = new TextEncoder();\n    return encoder.encode(str.substring(1));\n});\nconst ascii = createCodec('ascii', 'a', (buf) => {\n    let string = 'a';\n    for (let i = 0; i < buf.length; i++) {\n        string += String.fromCharCode(buf[i]);\n    }\n    return string;\n}, (str) => {\n    str = str.substring(1);\n    const buf = allocUnsafe(str.length);\n    for (let i = 0; i < str.length; i++) {\n        buf[i] = str.charCodeAt(i);\n    }\n    return buf;\n});\nconst BASES = {\n    utf8: string,\n    'utf-8': string,\n    hex: bases.base16,\n    latin1: ascii,\n    ascii: ascii,\n    binary: ascii,\n    ...bases\n};\nexport default BASES;\n//# sourceMappingURL=bases.js.map","export function getIterator(obj) {\n    if (obj != null) {\n        if (typeof obj[Symbol.iterator] === 'function') {\n            return obj[Symbol.iterator]();\n        }\n        if (typeof obj[Symbol.asyncIterator] === 'function') {\n            return obj[Symbol.asyncIterator]();\n        }\n        if (typeof obj.next === 'function') {\n            return obj; // probably an iterator\n        }\n    }\n    throw new Error('argument is not an iterator or iterable');\n}\n//# sourceMappingURL=index.js.map","// ported from https://www.npmjs.com/package/fast-fifo\nclass FixedFIFO {\n    buffer;\n    mask;\n    top;\n    btm;\n    next;\n    constructor(hwm) {\n        if (!(hwm > 0) || ((hwm - 1) & hwm) !== 0) {\n            throw new Error('Max size for a FixedFIFO should be a power of two');\n        }\n        this.buffer = new Array(hwm);\n        this.mask = hwm - 1;\n        this.top = 0;\n        this.btm = 0;\n        this.next = null;\n    }\n    push(data) {\n        if (this.buffer[this.top] !== undefined) {\n            return false;\n        }\n        this.buffer[this.top] = data;\n        this.top = (this.top + 1) & this.mask;\n        return true;\n    }\n    shift() {\n        const last = this.buffer[this.btm];\n        if (last === undefined) {\n            return undefined;\n        }\n        this.buffer[this.btm] = undefined;\n        this.btm = (this.btm + 1) & this.mask;\n        return last;\n    }\n    isEmpty() {\n        return this.buffer[this.btm] === undefined;\n    }\n}\nexport class FIFO {\n    size;\n    hwm;\n    head;\n    tail;\n    constructor(options = {}) {\n        this.hwm = options.splitLimit ?? 16;\n        this.head = new FixedFIFO(this.hwm);\n        this.tail = this.head;\n        this.size = 0;\n    }\n    calculateSize(obj) {\n        if (obj?.byteLength != null) {\n            return obj.byteLength;\n        }\n        return 1;\n    }\n    push(val) {\n        if (val?.value != null) {\n            this.size += this.calculateSize(val.value);\n        }\n        if (!this.head.push(val)) {\n            const prev = this.head;\n            this.head = prev.next = new FixedFIFO(2 * this.head.buffer.length);\n            this.head.push(val);\n        }\n    }\n    shift() {\n        let val = this.tail.shift();\n        if (val === undefined && (this.tail.next != null)) {\n            const next = this.tail.next;\n            this.tail.next = null;\n            this.tail = next;\n            val = this.tail.shift();\n        }\n        if (val?.value != null) {\n            this.size -= this.calculateSize(val.value);\n        }\n        return val;\n    }\n    isEmpty() {\n        return this.head.isEmpty();\n    }\n}\n//# sourceMappingURL=fifo.js.map","const empty = new Uint8Array(0)\n\n/**\n * @param {Uint8Array} d\n */\nconst toHex = d => d.reduce((hex, byte) => hex + byte.toString(16).padStart(2, '0'), '')\n\n/**\n * @param {string} hex\n */\nconst fromHex = hex => {\n  const hexes = hex.match(/../g)\n  return hexes ? new Uint8Array(hexes.map(b => parseInt(b, 16))) : empty\n}\n\n/**\n * @param {Uint8Array} aa\n * @param {Uint8Array} bb\n */\nconst equals = (aa, bb) => {\n  if (aa === bb) return true\n  if (aa.byteLength !== bb.byteLength) {\n    return false\n  }\n\n  for (let ii = 0; ii < aa.byteLength; ii++) {\n    if (aa[ii] !== bb[ii]) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * @param {ArrayBufferView|ArrayBuffer|Uint8Array} o\n * @returns {Uint8Array}\n */\nconst coerce = o => {\n  if (o instanceof Uint8Array && o.constructor.name === 'Uint8Array') return o\n  if (o instanceof ArrayBuffer) return new Uint8Array(o)\n  if (ArrayBuffer.isView(o)) {\n    return new Uint8Array(o.buffer, o.byteOffset, o.byteLength)\n  }\n  throw new Error('Unknown type, must be binary type')\n}\n\n/**\n * @param {any} o\n * @returns {o is ArrayBuffer|ArrayBufferView}\n */\nconst isBinary = o =>\n  o instanceof ArrayBuffer || ArrayBuffer.isView(o)\n\n/**\n * @param {string} str\n * @returns {Uint8Array}\n */\nconst fromString = str => (new TextEncoder()).encode(str)\n\n/**\n * @param {Uint8Array} b\n * @returns {string}\n */\nconst toString = b => (new TextDecoder()).decode(b)\n\nexport { equals, coerce, isBinary, fromHex, toHex, fromString, toString, empty }\n","import { base32 } from './bases/base32.js'\nimport { base58btc } from './bases/base58.js'\nimport { coerce } from './bytes.js'\nimport * as Digest from './hashes/digest.js'\n// Linter can see that API is used in types.\n// eslint-disable-next-line\nimport * as API from \"./link/interface.js\"\nimport * as varint from './varint.js'\n\n// This way TS will also expose all the types from module\nexport * from './link/interface.js'\n\n/**\n * @template {API.Link<unknown, number, number, API.Version>} T\n * @template {string} Prefix\n * @param {T} link\n * @param {API.MultibaseEncoder<Prefix>} [base]\n * @returns {API.ToString<T, Prefix>}\n */\nexport const format = (link, base) => {\n  const { bytes, version } = link\n  switch (version) {\n    case 0:\n      return toStringV0(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<\"z\">} */ (base) || base58btc.encoder\n      )\n    default:\n      return toStringV1(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<Prefix>} */ (base || base32.encoder)\n      )\n  }\n}\n\n/**\n * @template {API.UnknownLink} Link\n * @param {Link} link\n * @returns {API.LinkJSON<Link>}\n */\nexport const toJSON = (link) => ({\n  '/': format(link)\n})\n\n/**\n * @template {API.UnknownLink} Link\n * @param {API.LinkJSON<Link>} json\n */\nexport const fromJSON = (json) =>\n  CID.parse(json['/'])\n\n/** @type {WeakMap<API.UnknownLink, Map<string, string>>} */\nconst cache = new WeakMap()\n\n/**\n * @param {API.UnknownLink} cid\n * @returns {Map<string, string>}\n */\nconst baseCache = cid => {\n  const baseCache = cache.get(cid)\n  if (baseCache == null) {\n    const baseCache = new Map()\n    cache.set(cid, baseCache)\n    return baseCache\n  }\n  return baseCache\n}\n\n/**\n * @template {unknown} [Data=unknown]\n * @template {number} [Format=number]\n * @template {number} [Alg=number]\n * @template {API.Version} [Version=API.Version]\n * @implements {API.Link<Data, Format, Alg, Version>}\n */\n\nexport class CID {\n  /**\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} multihash - (Multi)hash of the of the content.\n   * @param {Uint8Array} bytes\n   */\n  constructor (version, code, multihash, bytes) {\n    /** @readonly */\n    this.code = code\n    /** @readonly */\n    this.version = version\n    /** @readonly */\n    this.multihash = multihash\n    /** @readonly */\n    this.bytes = bytes\n\n    // flag to serializers that this is a CID and\n    // should be treated specially\n    /** @readonly */\n    this['/'] = bytes\n  }\n\n  /**\n   * Signalling `cid.asCID === cid` has been replaced with `cid['/'] === cid.bytes`\n   * please either use `CID.asCID(cid)` or switch to new signalling mechanism\n   *\n   * @deprecated\n   */\n  get asCID () {\n    return this\n  }\n\n  // ArrayBufferView\n  get byteOffset () {\n    return this.bytes.byteOffset\n  }\n\n  // ArrayBufferView\n  get byteLength () {\n    return this.bytes.byteLength\n  }\n\n  /**\n   * @returns {CID<Data, API.DAG_PB, API.SHA_256, 0>}\n   */\n  toV0 () {\n    switch (this.version) {\n      case 0: {\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (this)\n      }\n      case 1: {\n        const { code, multihash } = this\n\n        if (code !== DAG_PB_CODE) {\n          throw new Error('Cannot convert a non dag-pb CID to CIDv0')\n        }\n\n        // sha2-256\n        if (multihash.code !== SHA_256_CODE) {\n          throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0')\n        }\n\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (\n          CID.createV0(\n            /** @type {API.MultihashDigest<API.SHA_256>} */ (multihash)\n          )\n        )\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 0. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @returns {CID<Data, Format, Alg, 1>}\n   */\n  toV1 () {\n    switch (this.version) {\n      case 0: {\n        const { code, digest } = this.multihash\n        const multihash = Digest.create(code, digest)\n        return /** @type {CID<Data, Format, Alg, 1>} */ (\n          CID.createV1(this.code, multihash)\n        )\n      }\n      case 1: {\n        return /** @type {CID<Data, Format, Alg, 1>} */ (this)\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 1. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @param {unknown} other\n   * @returns {other is CID<Data, Format, Alg, Version>}\n   */\n  equals (other) {\n    return CID.equals(this, other)\n  }\n\n  /**\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {API.Link<Data, Format, Alg, Version>} self\n   * @param {unknown} other\n   * @returns {other is CID}\n   */\n  static equals (self, other) {\n    const unknown =\n      /** @type {{code?:unknown, version?:unknown, multihash?:unknown}} */ (\n        other\n      )\n    return (\n      unknown &&\n      self.code === unknown.code &&\n      self.version === unknown.version &&\n      Digest.equals(self.multihash, unknown.multihash)\n    )\n  }\n\n  /**\n   * @param {API.MultibaseEncoder<string>} [base]\n   * @returns {string}\n   */\n  toString (base) {\n    return format(this, base)\n  }\n\n  /**\n   * @returns {API.LinkJSON<this>}\n   */\n  toJSON () {\n    return { '/': format(this) }\n  }\n\n  link () {\n    return this\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'CID'\n  }\n\n  // Legacy\n\n  [Symbol.for('nodejs.util.inspect.custom')] () {\n    return `CID(${this.toString()})`\n  }\n\n  /**\n   * Takes any input `value` and returns a `CID` instance if it was\n   * a `CID` otherwise returns `null`. If `value` is instanceof `CID`\n   * it will return value back. If `value` is not instance of this CID\n   * class, but is compatible CID it will return new instance of this\n   * `CID` class. Otherwise returns null.\n   *\n   * This allows two different incompatible versions of CID library to\n   * co-exist and interop as long as binary interface is compatible.\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @template {unknown} U\n   * @param {API.Link<Data, Format, Alg, Version>|U} input\n   * @returns {CID<Data, Format, Alg, Version>|null}\n   */\n  static asCID (input) {\n    if (input == null) {\n      return null\n    }\n\n    const value = /** @type {any} */ (input)\n    if (value instanceof CID) {\n      // If value is instance of CID then we're all set.\n      return value\n    } else if ((value['/'] != null && value['/'] === value.bytes) || value.asCID === value) {\n      // If value isn't instance of this CID class but `this.asCID === this` or\n      // `value['/'] === value.bytes` is true it is CID instance coming from a\n      // different implementation (diff version or duplicate). In that case we\n      // rebase it to this `CID` implementation so caller is guaranteed to get\n      // instance with expected API.\n      const { version, code, multihash, bytes } = value\n      return new CID(\n        version,\n        code,\n        /** @type {API.MultihashDigest<Alg>} */ (multihash),\n        bytes || encodeCID(version, code, multihash.bytes)\n      )\n    } else if (value[cidSymbol] === true) {\n      // If value is a CID from older implementation that used to be tagged via\n      // symbol we still rebase it to the this `CID` implementation by\n      // delegating that to a constructor.\n      const { version, multihash, code } = value\n      const digest =\n        /** @type {API.MultihashDigest<Alg>} */\n        (Digest.decode(multihash))\n      return CID.create(version, code, digest)\n    } else {\n      // Otherwise value is not a CID (or an incompatible version of it) in\n      // which case we return `null`.\n      return null\n    }\n  }\n\n  /**\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} digest - (Multi)hash of the of the content.\n   * @returns {CID<Data, Format, Alg, Version>}\n   */\n  static create (version, code, digest) {\n    if (typeof code !== 'number') {\n      throw new Error('String codecs are no longer supported')\n    }\n\n    if (!(digest.bytes instanceof Uint8Array)) {\n      throw new Error('Invalid digest')\n    }\n\n    switch (version) {\n      case 0: {\n        if (code !== DAG_PB_CODE) {\n          throw new Error(\n            `Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`\n          )\n        } else {\n          return new CID(version, code, digest, digest.bytes)\n        }\n      }\n      case 1: {\n        const bytes = encodeCID(version, code, digest.bytes)\n        return new CID(version, code, digest, bytes)\n      }\n      default: {\n        throw new Error('Invalid version')\n      }\n    }\n  }\n\n  /**\n   * Simplified version of `create` for CIDv0.\n   *\n   * @template {unknown} [T=unknown]\n   * @param {API.MultihashDigest<typeof SHA_256_CODE>} digest - Multihash.\n   * @returns {CID<T, typeof DAG_PB_CODE, typeof SHA_256_CODE, 0>}\n   */\n  static createV0 (digest) {\n    return CID.create(0, DAG_PB_CODE, digest)\n  }\n\n  /**\n   * Simplified version of `create` for CIDv1.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @param {Code} code - Content encoding format code.\n   * @param {API.MultihashDigest<Alg>} digest - Miltihash of the content.\n   * @returns {CID<Data, Code, Alg, 1>}\n   */\n  static createV1 (code, digest) {\n    return CID.create(1, code, digest)\n  }\n\n  /**\n   * Decoded a CID from its binary representation. The byte array must contain\n   * only the CID with no additional bytes.\n   *\n   * An error will be thrown if the bytes provided do not contain a valid\n   * binary representation of a CID.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ByteView<API.Link<Data, Code, Alg, Ver>>} bytes\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static decode (bytes) {\n    const [cid, remainder] = CID.decodeFirst(bytes)\n    if (remainder.length) {\n      throw new Error('Incorrect length')\n    }\n    return cid\n  }\n\n  /**\n   * Decoded a CID from its binary representation at the beginning of a byte\n   * array.\n   *\n   * Returns an array with the first element containing the CID and the second\n   * element containing the remainder of the original byte array. The remainder\n   * will be a zero-length byte array if the provided bytes only contained a\n   * binary CID representation.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} bytes\n   * @returns {[CID<T, C, A, V>, Uint8Array]}\n   */\n  static decodeFirst (bytes) {\n    const specs = CID.inspectBytes(bytes)\n    const prefixSize = specs.size - specs.multihashSize\n    const multihashBytes = coerce(\n      bytes.subarray(prefixSize, prefixSize + specs.multihashSize)\n    )\n    if (multihashBytes.byteLength !== specs.multihashSize) {\n      throw new Error('Incorrect length')\n    }\n    const digestBytes = multihashBytes.subarray(\n      specs.multihashSize - specs.digestSize\n    )\n    const digest = new Digest.Digest(\n      specs.multihashCode,\n      specs.digestSize,\n      digestBytes,\n      multihashBytes\n    )\n    const cid =\n      specs.version === 0\n        ? CID.createV0(/** @type {API.MultihashDigest<API.SHA_256>} */ (digest))\n        : CID.createV1(specs.codec, digest)\n    return [/** @type {CID<T, C, A, V>} */(cid), bytes.subarray(specs.size)]\n  }\n\n  /**\n   * Inspect the initial bytes of a CID to determine its properties.\n   *\n   * Involves decoding up to 4 varints. Typically this will require only 4 to 6\n   * bytes but for larger multicodec code values and larger multihash digest\n   * lengths these varints can be quite large. It is recommended that at least\n   * 10 bytes be made available in the `initialBytes` argument for a complete\n   * inspection.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} initialBytes\n   * @returns {{ version:V, codec:C, multihashCode:A, digestSize:number, multihashSize:number, size:number }}\n   */\n  static inspectBytes (initialBytes) {\n    let offset = 0\n    const next = () => {\n      const [i, length] = varint.decode(initialBytes.subarray(offset))\n      offset += length\n      return i\n    }\n\n    let version = /** @type {V} */ (next())\n    let codec = /** @type {C} */ (DAG_PB_CODE)\n    if (/** @type {number} */(version) === 18) {\n      // CIDv0\n      version = /** @type {V} */ (0)\n      offset = 0\n    } else {\n      codec = /** @type {C} */ (next())\n    }\n\n    if (version !== 0 && version !== 1) {\n      throw new RangeError(`Invalid CID version ${version}`)\n    }\n\n    const prefixSize = offset\n    const multihashCode = /** @type {A} */ (next()) // multihash code\n    const digestSize = next() // multihash length\n    const size = offset + digestSize\n    const multihashSize = size - prefixSize\n\n    return { version, codec, multihashCode, digestSize, multihashSize, size }\n  }\n\n  /**\n   * Takes cid in a string representation and creates an instance. If `base`\n   * decoder is not provided will use a default from the configuration. It will\n   * throw an error if encoding of the CID is not compatible with supplied (or\n   * a default decoder).\n   *\n   * @template {string} Prefix\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n   * @param {API.MultibaseDecoder<Prefix>} [base]\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static parse (source, base) {\n    const [prefix, bytes] = parseCIDtoBytes(source, base)\n\n    const cid = CID.decode(bytes)\n\n    if (cid.version === 0 && source[0] !== 'Q') {\n      throw Error('Version 0 CID string must not include multibase prefix')\n    }\n\n    // Cache string representation to avoid computing it on `this.toString()`\n    baseCache(cid).set(prefix, source)\n\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @template {unknown} Data\n * @template {number} Code\n * @template {number} Alg\n * @template {API.Version} Ver\n * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n * @param {API.MultibaseDecoder<Prefix>} [base]\n * @returns {[Prefix, API.ByteView<API.Link<Data, Code, Alg, Ver>>]}\n */\nconst parseCIDtoBytes = (source, base) => {\n  switch (source[0]) {\n    // CIDv0 is parsed differently\n    case 'Q': {\n      const decoder = base || base58btc\n      return [\n        /** @type {Prefix} */ (base58btc.prefix),\n        decoder.decode(`${base58btc.prefix}${source}`)\n      ]\n    }\n    case base58btc.prefix: {\n      const decoder = base || base58btc\n      return [/** @type {Prefix} */(base58btc.prefix), decoder.decode(source)]\n    }\n    case base32.prefix: {\n      const decoder = base || base32\n      return [/** @type {Prefix} */(base32.prefix), decoder.decode(source)]\n    }\n    default: {\n      if (base == null) {\n        throw Error(\n          'To parse non base32 or base58btc encoded CID multibase decoder must be provided'\n        )\n      }\n      return [/** @type {Prefix} */(source[0]), base.decode(source)]\n    }\n  }\n}\n\n/**\n *\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<'z'>} base\n */\nconst toStringV0 = (bytes, cache, base) => {\n  const { prefix } = base\n  if (prefix !== base58btc.prefix) {\n    throw Error(`Cannot string encode V0 in ${base.name} encoding`)\n  }\n\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes).slice(1)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<Prefix>} base\n */\nconst toStringV1 = (bytes, cache, base) => {\n  const { prefix } = base\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\nconst DAG_PB_CODE = 0x70\nconst SHA_256_CODE = 0x12\n\n/**\n * @param {API.Version} version\n * @param {number} code\n * @param {Uint8Array} multihash\n * @returns {Uint8Array}\n */\nconst encodeCID = (version, code, multihash) => {\n  const codeOffset = varint.encodingLength(version)\n  const hashOffset = codeOffset + varint.encodingLength(code)\n  const bytes = new Uint8Array(hashOffset + multihash.byteLength)\n  varint.encodeTo(version, bytes, 0)\n  varint.encodeTo(code, bytes, codeOffset)\n  bytes.set(multihash, hashOffset)\n  return bytes\n}\n\nconst cidSymbol = Symbol.for('@ipld/js-cid/CID')\n","import { coerce, equals as equalBytes } from '../bytes.js'\nimport * as varint from '../varint.js'\n\n/**\n * Creates a multihash digest.\n *\n * @template {number} Code\n * @param {Code} code\n * @param {Uint8Array} digest\n */\nexport const create = (code, digest) => {\n  const size = digest.byteLength\n  const sizeOffset = varint.encodingLength(code)\n  const digestOffset = sizeOffset + varint.encodingLength(size)\n\n  const bytes = new Uint8Array(digestOffset + size)\n  varint.encodeTo(code, bytes, 0)\n  varint.encodeTo(size, bytes, sizeOffset)\n  bytes.set(digest, digestOffset)\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * Turns bytes representation of multihash digest into an instance.\n *\n * @param {Uint8Array} multihash\n * @returns {MultihashDigest}\n */\nexport const decode = (multihash) => {\n  const bytes = coerce(multihash)\n  const [code, sizeOffset] = varint.decode(bytes)\n  const [size, digestOffset] = varint.decode(bytes.subarray(sizeOffset))\n  const digest = bytes.subarray(sizeOffset + digestOffset)\n\n  if (digest.byteLength !== size) {\n    throw new Error('Incorrect length')\n  }\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * @param {MultihashDigest} a\n * @param {unknown} b\n * @returns {b is MultihashDigest}\n */\nexport const equals = (a, b) => {\n  if (a === b) {\n    return true\n  } else {\n    const data = /** @type {{code?:unknown, size?:unknown, bytes?:unknown}} */(b)\n\n    return (\n      a.code === data.code &&\n      a.size === data.size &&\n      data.bytes instanceof Uint8Array &&\n      equalBytes(a.bytes, data.bytes)\n    )\n  }\n}\n\n/**\n * @typedef {import('./interface.js').MultihashDigest} MultihashDigest\n */\n\n/**\n * Represents a multihash digest which carries information about the\n * hashing algorithm and an actual hash digest.\n *\n * @template {number} Code\n * @template {number} Size\n * @class\n * @implements {MultihashDigest}\n */\nexport class Digest {\n  /**\n   * Creates a multihash digest.\n   *\n   * @param {Code} code\n   * @param {Size} size\n   * @param {Uint8Array} digest\n   * @param {Uint8Array} bytes\n   */\n  constructor (code, size, digest, bytes) {\n    this.code = code\n    this.size = size\n    this.digest = digest\n    this.bytes = bytes\n  }\n}\n","import { coerce } from '../bytes.js'\nimport * as Digest from './digest.js'\n\nconst code = 0x0\nconst name = 'identity'\n\n/** @type {(input:Uint8Array) => Uint8Array} */\nconst encode = coerce\n\n/**\n * @param {Uint8Array} input\n * @returns {Digest.Digest<typeof code, number>}\n */\nconst digest = (input) => Digest.create(code, encode(input))\n\nexport const identity = { code, name, encode, digest }\n","var encode_1 = encode;\n\nvar MSB = 0x80\n  , REST = 0x7F\n  , MSBALL = ~REST\n  , INT = Math.pow(2, 31);\n\nfunction encode(num, out, offset) {\n  out = out || [];\n  offset = offset || 0;\n  var oldOffset = offset;\n\n  while(num >= INT) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num /= 128;\n  }\n  while(num & MSBALL) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num >>>= 7;\n  }\n  out[offset] = num | 0;\n  \n  encode.bytes = offset - oldOffset + 1;\n  \n  return out\n}\n\nvar decode = read;\n\nvar MSB$1 = 0x80\n  , REST$1 = 0x7F;\n\nfunction read(buf, offset) {\n  var res    = 0\n    , offset = offset || 0\n    , shift  = 0\n    , counter = offset\n    , b\n    , l = buf.length;\n\n  do {\n    if (counter >= l) {\n      read.bytes = 0;\n      throw new RangeError('Could not decode varint')\n    }\n    b = buf[counter++];\n    res += shift < 28\n      ? (b & REST$1) << shift\n      : (b & REST$1) * Math.pow(2, shift);\n    shift += 7;\n  } while (b >= MSB$1)\n\n  read.bytes = counter - offset;\n\n  return res\n}\n\nvar N1 = Math.pow(2,  7);\nvar N2 = Math.pow(2, 14);\nvar N3 = Math.pow(2, 21);\nvar N4 = Math.pow(2, 28);\nvar N5 = Math.pow(2, 35);\nvar N6 = Math.pow(2, 42);\nvar N7 = Math.pow(2, 49);\nvar N8 = Math.pow(2, 56);\nvar N9 = Math.pow(2, 63);\n\nvar length = function (value) {\n  return (\n    value < N1 ? 1\n  : value < N2 ? 2\n  : value < N3 ? 3\n  : value < N4 ? 4\n  : value < N5 ? 5\n  : value < N6 ? 6\n  : value < N7 ? 7\n  : value < N8 ? 8\n  : value < N9 ? 9\n  :              10\n  )\n};\n\nvar varint = {\n    encode: encode_1\n  , decode: decode\n  , encodingLength: length\n};\n\nvar _brrp_varint = varint;\n\nexport default _brrp_varint;\n","import varint from '../vendor/varint.js'\n\n/**\n * @param {Uint8Array} data\n * @param {number} [offset=0]\n * @returns {[number, number]}\n */\nexport const decode = (data, offset = 0) => {\n  const code = varint.decode(data, offset)\n  return [code, varint.decode.bytes]\n}\n\n/**\n * @param {number} int\n * @param {Uint8Array} target\n * @param {number} [offset=0]\n */\nexport const encodeTo = (int, target, offset = 0) => {\n  varint.encode(int, target, offset)\n  return target\n}\n\n/**\n * @param {number} int\n * @returns {number}\n */\nexport const encodingLength = (int) => {\n  return varint.encodingLength(int)\n}\n","import { bases } from 'multiformats/basics';\nimport { allocUnsafe } from '../alloc.js';\nfunction createCodec(name, prefix, encode, decode) {\n    return {\n        name,\n        prefix,\n        encoder: {\n            name,\n            prefix,\n            encode\n        },\n        decoder: {\n            decode\n        }\n    };\n}\nconst string = createCodec('utf8', 'u', (buf) => {\n    const decoder = new TextDecoder('utf8');\n    return 'u' + decoder.decode(buf);\n}, (str) => {\n    const encoder = new TextEncoder();\n    return encoder.encode(str.substring(1));\n});\nconst ascii = createCodec('ascii', 'a', (buf) => {\n    let string = 'a';\n    for (let i = 0; i < buf.length; i++) {\n        string += String.fromCharCode(buf[i]);\n    }\n    return string;\n}, (str) => {\n    str = str.substring(1);\n    const buf = allocUnsafe(str.length);\n    for (let i = 0; i < str.length; i++) {\n        buf[i] = str.charCodeAt(i);\n    }\n    return buf;\n});\nconst BASES = {\n    utf8: string,\n    'utf-8': string,\n    hex: bases.base16,\n    latin1: ascii,\n    ascii,\n    binary: ascii,\n    ...bases\n};\nexport default BASES;\n//# sourceMappingURL=bases.js.map","export const NOISE_MSG_MAX_LENGTH_BYTES = 65535;\nexport const NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG = NOISE_MSG_MAX_LENGTH_BYTES - 16;\nexport const DUMP_SESSION_KEYS = Boolean(globalThis.process?.env?.DUMP_SESSION_KEYS);\n//# sourceMappingURL=constants.js.map","import { chacha20poly1305 } from '@noble/ciphers/chacha';\nimport { x25519 } from '@noble/curves/ed25519';\nimport { extract, expand } from '@noble/hashes/hkdf';\nimport { sha256 } from '@noble/hashes/sha256';\nexport const pureJsCrypto = {\n    hashSHA256(data) {\n        return sha256(data);\n    },\n    getHKDF(ck, ikm) {\n        const prk = extract(sha256, ikm, ck);\n        const okmU8Array = expand(sha256, prk, undefined, 96);\n        const okm = okmU8Array;\n        const k1 = okm.subarray(0, 32);\n        const k2 = okm.subarray(32, 64);\n        const k3 = okm.subarray(64, 96);\n        return [k1, k2, k3];\n    },\n    generateX25519KeyPair() {\n        const secretKey = x25519.utils.randomPrivateKey();\n        const publicKey = x25519.getPublicKey(secretKey);\n        return {\n            publicKey,\n            privateKey: secretKey\n        };\n    },\n    generateX25519KeyPairFromSeed(seed) {\n        const publicKey = x25519.getPublicKey(seed);\n        return {\n            publicKey,\n            privateKey: seed\n        };\n    },\n    generateX25519SharedKey(privateKey, publicKey) {\n        return x25519.getSharedSecret(privateKey, publicKey);\n    },\n    chaCha20Poly1305Encrypt(plaintext, nonce, ad, k) {\n        return chacha20poly1305(k, nonce, ad).encrypt(plaintext);\n    },\n    chaCha20Poly1305Decrypt(ciphertext, nonce, ad, k, dst) {\n        return chacha20poly1305(k, nonce, ad).decrypt(ciphertext, dst);\n    }\n};\n//# sourceMappingURL=js.js.map","import { concat as uint8ArrayConcat } from 'uint8arrays/concat';\nconst allocUnsafe = (len) => {\n    if (globalThis.Buffer) {\n        return globalThis.Buffer.allocUnsafe(len);\n    }\n    return new Uint8Array(len);\n};\nexport const uint16BEEncode = (value) => {\n    const target = allocUnsafe(2);\n    new DataView(target.buffer, target.byteOffset, target.byteLength).setUint16(0, value, false);\n    return target;\n};\nuint16BEEncode.bytes = 2;\nexport const uint16BEDecode = (data) => {\n    if (data.length < 2)\n        throw RangeError('Could not decode int16BE');\n    if (data instanceof Uint8Array) {\n        return new DataView(data.buffer, data.byteOffset, data.byteLength).getUint16(0, false);\n    }\n    return data.getUint16(0);\n};\nuint16BEDecode.bytes = 2;\n// Note: IK and XX encoder usage is opposite (XX uses in stages encode0 where IK uses encode1)\nexport function encode0(message) {\n    return uint8ArrayConcat([message.ne, message.ciphertext], message.ne.length + message.ciphertext.length);\n}\nexport function encode1(message) {\n    return uint8ArrayConcat([message.ne, message.ns, message.ciphertext], message.ne.length + message.ns.length + message.ciphertext.length);\n}\nexport function encode2(message) {\n    return uint8ArrayConcat([message.ns, message.ciphertext], message.ns.length + message.ciphertext.length);\n}\nexport function decode0(input) {\n    if (input.length < 32) {\n        throw new Error('Cannot decode stage 0 MessageBuffer: length less than 32 bytes.');\n    }\n    return {\n        ne: input.subarray(0, 32),\n        ciphertext: input.subarray(32, input.length),\n        ns: new Uint8Array(0)\n    };\n}\nexport function decode1(input) {\n    if (input.length < 80) {\n        throw new Error('Cannot decode stage 1 MessageBuffer: length less than 80 bytes.');\n    }\n    return {\n        ne: input.subarray(0, 32),\n        ns: input.subarray(32, 80),\n        ciphertext: input.subarray(80, input.length)\n    };\n}\nexport function decode2(input) {\n    if (input.length < 48) {\n        throw new Error('Cannot decode stage 2 MessageBuffer: length less than 48 bytes.');\n    }\n    return {\n        ne: new Uint8Array(0),\n        ns: input.subarray(0, 48),\n        ciphertext: input.subarray(48, input.length)\n    };\n}\n//# sourceMappingURL=encoder.js.map","import 'node-forge/lib/asn1.js';\nimport 'node-forge/lib/pbe.js';\nimport { CodeError } from '@libp2p/interface/errors';\n// @ts-expect-error types are missing\nimport forge from 'node-forge/lib/forge.js';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport * as Ed25519 from './ed25519-class.js';\nimport generateEphemeralKeyPair from './ephemeral-keys.js';\nimport { importer } from './importer.js';\nimport { keyStretcher } from './key-stretcher.js';\nimport * as keysPBM from './keys.js';\nimport * as RSA from './rsa-class.js';\nimport * as Secp256k1 from './secp256k1-class.js';\nexport { keyStretcher };\nexport { generateEphemeralKeyPair };\nexport { keysPBM };\nexport const supportedKeys = {\n    rsa: RSA,\n    ed25519: Ed25519,\n    secp256k1: Secp256k1\n};\nfunction unsupportedKey(type) {\n    const supported = Object.keys(supportedKeys).join(' / ');\n    return new CodeError(`invalid or unsupported key type ${type}. Must be ${supported}`, 'ERR_UNSUPPORTED_KEY_TYPE');\n}\nfunction typeToKey(type) {\n    type = type.toLowerCase();\n    if (type === 'rsa' || type === 'ed25519' || type === 'secp256k1') {\n        return supportedKeys[type];\n    }\n    throw unsupportedKey(type);\n}\n// Generates a keypair of the given type and bitsize\nexport async function generateKeyPair(type, bits) {\n    return typeToKey(type).generateKeyPair(bits ?? 2048);\n}\n// Generates a keypair of the given type and bitsize\n// seed is a 32 byte uint8array\nexport async function generateKeyPairFromSeed(type, seed, bits) {\n    if (type.toLowerCase() !== 'ed25519') {\n        throw new CodeError('Seed key derivation is unimplemented for RSA or secp256k1', 'ERR_UNSUPPORTED_KEY_DERIVATION_TYPE');\n    }\n    return Ed25519.generateKeyPairFromSeed(seed);\n}\n// Converts a protobuf serialized public key into its\n// representative object\nexport function unmarshalPublicKey(buf) {\n    const decoded = keysPBM.PublicKey.decode(buf);\n    const data = decoded.Data ?? new Uint8Array();\n    switch (decoded.Type) {\n        case keysPBM.KeyType.RSA:\n            return supportedKeys.rsa.unmarshalRsaPublicKey(data);\n        case keysPBM.KeyType.Ed25519:\n            return supportedKeys.ed25519.unmarshalEd25519PublicKey(data);\n        case keysPBM.KeyType.Secp256k1:\n            return supportedKeys.secp256k1.unmarshalSecp256k1PublicKey(data);\n        default:\n            throw unsupportedKey(decoded.Type ?? 'unknown');\n    }\n}\n// Converts a public key object into a protobuf serialized public key\nexport function marshalPublicKey(key, type) {\n    type = (type ?? 'rsa').toLowerCase();\n    typeToKey(type); // check type\n    return key.bytes;\n}\n// Converts a protobuf serialized private key into its\n// representative object\nexport async function unmarshalPrivateKey(buf) {\n    const decoded = keysPBM.PrivateKey.decode(buf);\n    const data = decoded.Data ?? new Uint8Array();\n    switch (decoded.Type) {\n        case keysPBM.KeyType.RSA:\n            return supportedKeys.rsa.unmarshalRsaPrivateKey(data);\n        case keysPBM.KeyType.Ed25519:\n            return supportedKeys.ed25519.unmarshalEd25519PrivateKey(data);\n        case keysPBM.KeyType.Secp256k1:\n            return supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey(data);\n        default:\n            throw unsupportedKey(decoded.Type ?? 'RSA');\n    }\n}\n// Converts a private key object into a protobuf serialized private key\nexport function marshalPrivateKey(key, type) {\n    type = (type ?? 'rsa').toLowerCase();\n    typeToKey(type); // check type\n    return key.bytes;\n}\n/**\n *\n * @param {string} encryptedKey\n * @param {string} password\n */\nexport async function importKey(encryptedKey, password) {\n    try {\n        const key = await importer(encryptedKey, password);\n        return await unmarshalPrivateKey(key);\n    }\n    catch (_) {\n        // Ignore and try the old pem decrypt\n    }\n    // Only rsa supports pem right now\n    const key = forge.pki.decryptRsaPrivateKey(encryptedKey, password);\n    if (key === null) {\n        throw new CodeError('Cannot read the key, most likely the password is wrong or not a RSA key', 'ERR_CANNOT_DECRYPT_PEM');\n    }\n    let der = forge.asn1.toDer(forge.pki.privateKeyToAsn1(key));\n    der = uint8ArrayFromString(der.getBytes(), 'ascii');\n    return supportedKeys.rsa.unmarshalRsaPrivateKey(der);\n}\n//# sourceMappingURL=index.js.map","import { CodeError } from '@libp2p/interface/errors';\nimport { symbol } from '@libp2p/interface/peer-id';\nimport { base58btc } from 'multiformats/bases/base58';\nimport { bases } from 'multiformats/basics';\nimport { CID } from 'multiformats/cid';\nimport * as Digest from 'multiformats/hashes/digest';\nimport { identity } from 'multiformats/hashes/identity';\nimport { sha256 } from 'multiformats/hashes/sha2';\nimport { equals as uint8ArrayEquals } from 'uint8arrays/equals';\nconst inspect = Symbol.for('nodejs.util.inspect.custom');\nconst baseDecoder = Object\n    .values(bases)\n    .map(codec => codec.decoder)\n    // @ts-expect-error https://github.com/multiformats/js-multiformats/issues/141\n    .reduce((acc, curr) => acc.or(curr), bases.identity.decoder);\n// these values are from https://github.com/multiformats/multicodec/blob/master/table.csv\nconst LIBP2P_KEY_CODE = 0x72;\nconst MARSHALLED_ED225519_PUBLIC_KEY_LENGTH = 36;\nconst MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH = 37;\nclass PeerIdImpl {\n    type;\n    multihash;\n    privateKey;\n    publicKey;\n    string;\n    constructor(init) {\n        this.type = init.type;\n        this.multihash = init.multihash;\n        this.privateKey = init.privateKey;\n        // mark string cache as non-enumerable\n        Object.defineProperty(this, 'string', {\n            enumerable: false,\n            writable: true\n        });\n    }\n    get [Symbol.toStringTag]() {\n        return `PeerId(${this.toString()})`;\n    }\n    [symbol] = true;\n    toString() {\n        if (this.string == null) {\n            this.string = base58btc.encode(this.multihash.bytes).slice(1);\n        }\n        return this.string;\n    }\n    // return self-describing String representation\n    // in default format from RFC 0001: https://github.com/libp2p/specs/pull/209\n    toCID() {\n        return CID.createV1(LIBP2P_KEY_CODE, this.multihash);\n    }\n    toBytes() {\n        return this.multihash.bytes;\n    }\n    /**\n     * Returns Multiaddr as a JSON string\n     */\n    toJSON() {\n        return this.toString();\n    }\n    /**\n     * Checks the equality of `this` peer against a given PeerId\n     */\n    equals(id) {\n        if (id instanceof Uint8Array) {\n            return uint8ArrayEquals(this.multihash.bytes, id);\n        }\n        else if (typeof id === 'string') {\n            return peerIdFromString(id).equals(this);\n        }\n        else if (id?.multihash?.bytes != null) {\n            return uint8ArrayEquals(this.multihash.bytes, id.multihash.bytes);\n        }\n        else {\n            throw new Error('not valid Id');\n        }\n    }\n    /**\n     * Returns PeerId as a human-readable string\n     * https://nodejs.org/api/util.html#utilinspectcustom\n     *\n     * @example\n     * ```js\n     * import { peerIdFromString } from '@libp2p/peer-id'\n     *\n     * console.info(peerIdFromString('QmFoo'))\n     * // 'PeerId(QmFoo)'\n     * ```\n     */\n    [inspect]() {\n        return `PeerId(${this.toString()})`;\n    }\n}\nclass RSAPeerIdImpl extends PeerIdImpl {\n    type = 'RSA';\n    publicKey;\n    constructor(init) {\n        super({ ...init, type: 'RSA' });\n        this.publicKey = init.publicKey;\n    }\n}\nclass Ed25519PeerIdImpl extends PeerIdImpl {\n    type = 'Ed25519';\n    publicKey;\n    constructor(init) {\n        super({ ...init, type: 'Ed25519' });\n        this.publicKey = init.multihash.digest;\n    }\n}\nclass Secp256k1PeerIdImpl extends PeerIdImpl {\n    type = 'secp256k1';\n    publicKey;\n    constructor(init) {\n        super({ ...init, type: 'secp256k1' });\n        this.publicKey = init.multihash.digest;\n    }\n}\nexport function createPeerId(init) {\n    if (init.type === 'RSA') {\n        return new RSAPeerIdImpl(init);\n    }\n    if (init.type === 'Ed25519') {\n        return new Ed25519PeerIdImpl(init);\n    }\n    if (init.type === 'secp256k1') {\n        return new Secp256k1PeerIdImpl(init);\n    }\n    throw new CodeError('Type must be \"RSA\", \"Ed25519\" or \"secp256k1\"', 'ERR_INVALID_PARAMETERS');\n}\nexport function peerIdFromPeerId(other) {\n    if (other.type === 'RSA') {\n        return new RSAPeerIdImpl(other);\n    }\n    if (other.type === 'Ed25519') {\n        return new Ed25519PeerIdImpl(other);\n    }\n    if (other.type === 'secp256k1') {\n        return new Secp256k1PeerIdImpl(other);\n    }\n    throw new CodeError('Not a PeerId', 'ERR_INVALID_PARAMETERS');\n}\nexport function peerIdFromString(str, decoder) {\n    decoder = decoder ?? baseDecoder;\n    if (str.charAt(0) === '1' || str.charAt(0) === 'Q') {\n        // identity hash ed25519/secp256k1 key or sha2-256 hash of\n        // rsa public key - base58btc encoded either way\n        const multihash = Digest.decode(base58btc.decode(`z${str}`));\n        if (str.startsWith('12D')) {\n            return new Ed25519PeerIdImpl({ multihash });\n        }\n        else if (str.startsWith('16U')) {\n            return new Secp256k1PeerIdImpl({ multihash });\n        }\n        else {\n            return new RSAPeerIdImpl({ multihash });\n        }\n    }\n    return peerIdFromBytes(baseDecoder.decode(str));\n}\nexport function peerIdFromBytes(buf) {\n    try {\n        const multihash = Digest.decode(buf);\n        if (multihash.code === identity.code) {\n            if (multihash.digest.length === MARSHALLED_ED225519_PUBLIC_KEY_LENGTH) {\n                return new Ed25519PeerIdImpl({ multihash });\n            }\n            else if (multihash.digest.length === MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH) {\n                return new Secp256k1PeerIdImpl({ multihash });\n            }\n        }\n        if (multihash.code === sha256.code) {\n            return new RSAPeerIdImpl({ multihash });\n        }\n    }\n    catch {\n        return peerIdFromCID(CID.decode(buf));\n    }\n    throw new Error('Supplied PeerID CID is invalid');\n}\nexport function peerIdFromCID(cid) {\n    if (cid == null || cid.multihash == null || cid.version == null || (cid.version === 1 && cid.code !== LIBP2P_KEY_CODE)) {\n        throw new Error('Supplied PeerID CID is invalid');\n    }\n    const multihash = cid.multihash;\n    if (multihash.code === sha256.code) {\n        return new RSAPeerIdImpl({ multihash: cid.multihash });\n    }\n    else if (multihash.code === identity.code) {\n        if (multihash.digest.length === MARSHALLED_ED225519_PUBLIC_KEY_LENGTH) {\n            return new Ed25519PeerIdImpl({ multihash: cid.multihash });\n        }\n        else if (multihash.digest.length === MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH) {\n            return new Secp256k1PeerIdImpl({ multihash: cid.multihash });\n        }\n    }\n    throw new Error('Supplied PeerID CID is invalid');\n}\n/**\n * @param publicKey - A marshalled public key\n * @param privateKey - A marshalled private key\n */\nexport async function peerIdFromKeys(publicKey, privateKey) {\n    if (publicKey.length === MARSHALLED_ED225519_PUBLIC_KEY_LENGTH) {\n        return new Ed25519PeerIdImpl({ multihash: Digest.create(identity.code, publicKey), privateKey });\n    }\n    if (publicKey.length === MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH) {\n        return new Secp256k1PeerIdImpl({ multihash: Digest.create(identity.code, publicKey), privateKey });\n    }\n    return new RSAPeerIdImpl({ multihash: await sha256.digest(publicKey), publicKey, privateKey });\n}\n//# sourceMappingURL=index.js.map","/* eslint-disable import/export */\n/* eslint-disable complexity */\n/* eslint-disable @typescript-eslint/no-namespace */\n/* eslint-disable @typescript-eslint/no-unnecessary-boolean-literal-compare */\n/* eslint-disable @typescript-eslint/no-empty-interface */\nimport { encodeMessage, decodeMessage, message } from 'protons-runtime';\nexport var NoiseExtensions;\n(function (NoiseExtensions) {\n    let _codec;\n    NoiseExtensions.codec = () => {\n        if (_codec == null) {\n            _codec = message((obj, w, opts = {}) => {\n                if (opts.lengthDelimited !== false) {\n                    w.fork();\n                }\n                if (obj.webtransportCerthashes != null) {\n                    for (const value of obj.webtransportCerthashes) {\n                        w.uint32(10);\n                        w.bytes(value);\n                    }\n                }\n                if (opts.lengthDelimited !== false) {\n                    w.ldelim();\n                }\n            }, (reader, length) => {\n                const obj = {\n                    webtransportCerthashes: []\n                };\n                const end = length == null ? reader.len : reader.pos + length;\n                while (reader.pos < end) {\n                    const tag = reader.uint32();\n                    switch (tag >>> 3) {\n                        case 1:\n                            obj.webtransportCerthashes.push(reader.bytes());\n                            break;\n                        default:\n                            reader.skipType(tag & 7);\n                            break;\n                    }\n                }\n                return obj;\n            });\n        }\n        return _codec;\n    };\n    NoiseExtensions.encode = (obj) => {\n        return encodeMessage(obj, NoiseExtensions.codec());\n    };\n    NoiseExtensions.decode = (buf) => {\n        return decodeMessage(buf, NoiseExtensions.codec());\n    };\n})(NoiseExtensions || (NoiseExtensions = {}));\nexport var NoiseHandshakePayload;\n(function (NoiseHandshakePayload) {\n    let _codec;\n    NoiseHandshakePayload.codec = () => {\n        if (_codec == null) {\n            _codec = message((obj, w, opts = {}) => {\n                if (opts.lengthDelimited !== false) {\n                    w.fork();\n                }\n                if (opts.writeDefaults === true || (obj.identityKey != null && obj.identityKey.byteLength > 0)) {\n                    w.uint32(10);\n                    w.bytes(obj.identityKey ?? new Uint8Array(0));\n                }\n                if (opts.writeDefaults === true || (obj.identitySig != null && obj.identitySig.byteLength > 0)) {\n                    w.uint32(18);\n                    w.bytes(obj.identitySig ?? new Uint8Array(0));\n                }\n                if (obj.extensions != null) {\n                    w.uint32(34);\n                    NoiseExtensions.codec().encode(obj.extensions, w, {\n                        writeDefaults: false\n                    });\n                }\n                if (opts.lengthDelimited !== false) {\n                    w.ldelim();\n                }\n            }, (reader, length) => {\n                const obj = {\n                    identityKey: new Uint8Array(0),\n                    identitySig: new Uint8Array(0)\n                };\n                const end = length == null ? reader.len : reader.pos + length;\n                while (reader.pos < end) {\n                    const tag = reader.uint32();\n                    switch (tag >>> 3) {\n                        case 1:\n                            obj.identityKey = reader.bytes();\n                            break;\n                        case 2:\n                            obj.identitySig = reader.bytes();\n                            break;\n                        case 4:\n                            obj.extensions = NoiseExtensions.codec().decode(reader, reader.uint32());\n                            break;\n                        default:\n                            reader.skipType(tag & 7);\n                            break;\n                    }\n                }\n                return obj;\n            });\n        }\n        return _codec;\n    };\n    NoiseHandshakePayload.encode = (obj) => {\n        return encodeMessage(obj, NoiseHandshakePayload.codec());\n    };\n    NoiseHandshakePayload.decode = (buf) => {\n        return decodeMessage(buf, NoiseHandshakePayload.codec());\n    };\n})(NoiseHandshakePayload || (NoiseHandshakePayload = {}));\n//# sourceMappingURL=payload.js.map","import { unmarshalPublicKey, unmarshalPrivateKey } from '@libp2p/crypto/keys';\nimport { peerIdFromKeys } from '@libp2p/peer-id';\nimport { concat as uint8ArrayConcat } from 'uint8arrays/concat';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport { NoiseHandshakePayload } from './proto/payload.js';\nexport async function getPayload(localPeer, staticPublicKey, extensions) {\n    const signedPayload = await signPayload(localPeer, getHandshakePayload(staticPublicKey));\n    if (localPeer.publicKey == null) {\n        throw new Error('PublicKey was missing from local PeerId');\n    }\n    return createHandshakePayload(localPeer.publicKey, signedPayload, extensions);\n}\nexport function createHandshakePayload(libp2pPublicKey, signedPayload, extensions) {\n    return NoiseHandshakePayload.encode({\n        identityKey: libp2pPublicKey,\n        identitySig: signedPayload,\n        extensions: extensions ?? { webtransportCerthashes: [] }\n    }).subarray();\n}\nexport async function signPayload(peerId, payload) {\n    if (peerId.privateKey == null) {\n        throw new Error('PrivateKey was missing from PeerId');\n    }\n    const privateKey = await unmarshalPrivateKey(peerId.privateKey);\n    return privateKey.sign(payload);\n}\nexport async function getPeerIdFromPayload(payload) {\n    return peerIdFromKeys(payload.identityKey);\n}\nexport function decodePayload(payload) {\n    return NoiseHandshakePayload.decode(payload);\n}\nexport function getHandshakePayload(publicKey) {\n    const prefix = uint8ArrayFromString('noise-libp2p-static-key:');\n    return uint8ArrayConcat([prefix, publicKey], prefix.length + publicKey.length);\n}\n/**\n * Verifies signed payload, throws on any irregularities.\n *\n * @param {bytes} noiseStaticKey - owner's noise static key\n * @param {bytes} payload - decoded payload\n * @param {PeerId} remotePeer - owner's libp2p peer ID\n * @returns {Promise<PeerId>} - peer ID of payload owner\n */\nexport async function verifySignedPayload(noiseStaticKey, payload, remotePeer) {\n    // Unmarshaling from PublicKey protobuf\n    const payloadPeerId = await peerIdFromKeys(payload.identityKey);\n    if (!payloadPeerId.equals(remotePeer)) {\n        throw new Error(`Payload identity key ${payloadPeerId.toString()} does not match expected remote peer ${remotePeer.toString()}`);\n    }\n    const generatedPayload = getHandshakePayload(noiseStaticKey);\n    if (payloadPeerId.publicKey == null) {\n        throw new Error('PublicKey was missing from PeerId');\n    }\n    if (payload.identitySig == null) {\n        throw new Error('Signature was missing from message');\n    }\n    const publicKey = unmarshalPublicKey(payloadPeerId.publicKey);\n    const valid = await publicKey.verify(generatedPayload, payload.identitySig);\n    if (!valid) {\n        throw new Error(\"Static key doesn't match to peer that signed payload!\");\n    }\n    return payloadPeerId;\n}\nexport function isValidPublicKey(pk) {\n    if (!(pk instanceof Uint8Array)) {\n        return false;\n    }\n    if (pk.length !== 32) {\n        return false;\n    }\n    return true;\n}\n//# sourceMappingURL=utils.js.map","import { logger } from '@libp2p/logger';\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string';\nimport { DUMP_SESSION_KEYS } from './constants.js';\nconst log = logger('libp2p:noise');\nexport { log as logger };\nlet keyLogger;\nif (DUMP_SESSION_KEYS) {\n    keyLogger = log;\n}\nelse {\n    keyLogger = Object.assign(() => { }, {\n        enabled: false,\n        trace: () => { },\n        error: () => { }\n    });\n}\nexport function logLocalStaticKeys(s) {\n    keyLogger(`LOCAL_STATIC_PUBLIC_KEY ${uint8ArrayToString(s.publicKey, 'hex')}`);\n    keyLogger(`LOCAL_STATIC_PRIVATE_KEY ${uint8ArrayToString(s.privateKey, 'hex')}`);\n}\nexport function logLocalEphemeralKeys(e) {\n    if (e) {\n        keyLogger(`LOCAL_PUBLIC_EPHEMERAL_KEY ${uint8ArrayToString(e.publicKey, 'hex')}`);\n        keyLogger(`LOCAL_PRIVATE_EPHEMERAL_KEY ${uint8ArrayToString(e.privateKey, 'hex')}`);\n    }\n    else {\n        keyLogger('Missing local ephemeral keys.');\n    }\n}\nexport function logRemoteStaticKey(rs) {\n    keyLogger(`REMOTE_STATIC_PUBLIC_KEY ${uint8ArrayToString(rs, 'hex')}`);\n}\nexport function logRemoteEphemeralKey(re) {\n    keyLogger(`REMOTE_EPHEMERAL_PUBLIC_KEY ${uint8ArrayToString(re, 'hex')}`);\n}\nexport function logCipherState(session) {\n    if (session.cs1 && session.cs2) {\n        keyLogger(`CIPHER_STATE_1 ${session.cs1.n.getUint64()} ${uint8ArrayToString(session.cs1.k, 'hex')}`);\n        keyLogger(`CIPHER_STATE_2 ${session.cs2.n.getUint64()} ${uint8ArrayToString(session.cs2.k, 'hex')}`);\n    }\n    else {\n        keyLogger('Missing cipher state.');\n    }\n}\n//# sourceMappingURL=logger.js.map","import { fromString as uint8ArrayFromString } from 'uint8arrays';\nimport { concat as uint8ArrayConcat } from 'uint8arrays/concat';\nimport { equals as uint8ArrayEquals } from 'uint8arrays/equals';\nimport { logger } from '../logger.js';\nimport { Nonce } from '../nonce.js';\nexport class AbstractHandshake {\n    crypto;\n    constructor(crypto) {\n        this.crypto = crypto;\n    }\n    encryptWithAd(cs, ad, plaintext) {\n        const e = this.encrypt(cs.k, cs.n, ad, plaintext);\n        cs.n.increment();\n        return e;\n    }\n    decryptWithAd(cs, ad, ciphertext, dst) {\n        const { plaintext, valid } = this.decrypt(cs.k, cs.n, ad, ciphertext, dst);\n        if (valid)\n            cs.n.increment();\n        return { plaintext, valid };\n    }\n    // Cipher state related\n    hasKey(cs) {\n        return !this.isEmptyKey(cs.k);\n    }\n    createEmptyKey() {\n        return new Uint8Array(32);\n    }\n    isEmptyKey(k) {\n        const emptyKey = this.createEmptyKey();\n        return uint8ArrayEquals(emptyKey, k);\n    }\n    encrypt(k, n, ad, plaintext) {\n        n.assertValue();\n        return this.crypto.chaCha20Poly1305Encrypt(plaintext, n.getBytes(), ad, k);\n    }\n    encryptAndHash(ss, plaintext) {\n        let ciphertext;\n        if (this.hasKey(ss.cs)) {\n            ciphertext = this.encryptWithAd(ss.cs, ss.h, plaintext);\n        }\n        else {\n            ciphertext = plaintext;\n        }\n        this.mixHash(ss, ciphertext);\n        return ciphertext;\n    }\n    decrypt(k, n, ad, ciphertext, dst) {\n        n.assertValue();\n        const encryptedMessage = this.crypto.chaCha20Poly1305Decrypt(ciphertext, n.getBytes(), ad, k, dst);\n        if (encryptedMessage) {\n            return {\n                plaintext: encryptedMessage,\n                valid: true\n            };\n        }\n        else {\n            return {\n                plaintext: new Uint8Array(0),\n                valid: false\n            };\n        }\n    }\n    decryptAndHash(ss, ciphertext) {\n        let plaintext;\n        let valid = true;\n        if (this.hasKey(ss.cs)) {\n            ({ plaintext, valid } = this.decryptWithAd(ss.cs, ss.h, ciphertext));\n        }\n        else {\n            plaintext = ciphertext;\n        }\n        this.mixHash(ss, ciphertext);\n        return { plaintext, valid };\n    }\n    dh(privateKey, publicKey) {\n        try {\n            const derivedU8 = this.crypto.generateX25519SharedKey(privateKey, publicKey);\n            if (derivedU8.length === 32) {\n                return derivedU8;\n            }\n            return derivedU8.subarray(0, 32);\n        }\n        catch (e) {\n            const err = e;\n            logger.error(err);\n            return new Uint8Array(32);\n        }\n    }\n    mixHash(ss, data) {\n        ss.h = this.getHash(ss.h, data);\n    }\n    getHash(a, b) {\n        const u = this.crypto.hashSHA256(uint8ArrayConcat([a, b], a.length + b.length));\n        return u;\n    }\n    mixKey(ss, ikm) {\n        const [ck, tempK] = this.crypto.getHKDF(ss.ck, ikm);\n        ss.cs = this.initializeKey(tempK);\n        ss.ck = ck;\n    }\n    initializeKey(k) {\n        return { k, n: new Nonce() };\n    }\n    // Symmetric state related\n    initializeSymmetric(protocolName) {\n        const protocolNameBytes = uint8ArrayFromString(protocolName, 'utf-8');\n        const h = this.hashProtocolName(protocolNameBytes);\n        const ck = h;\n        const key = this.createEmptyKey();\n        const cs = this.initializeKey(key);\n        return { cs, ck, h };\n    }\n    hashProtocolName(protocolName) {\n        if (protocolName.length <= 32) {\n            const h = new Uint8Array(32);\n            h.set(protocolName);\n            return h;\n        }\n        else {\n            return this.getHash(protocolName, new Uint8Array(0));\n        }\n    }\n    split(ss) {\n        const [tempk1, tempk2] = this.crypto.getHKDF(ss.ck, new Uint8Array(0));\n        const cs1 = this.initializeKey(tempk1);\n        const cs2 = this.initializeKey(tempk2);\n        return { cs1, cs2 };\n    }\n    writeMessageRegular(cs, payload) {\n        const ciphertext = this.encryptWithAd(cs, new Uint8Array(0), payload);\n        const ne = this.createEmptyKey();\n        const ns = new Uint8Array(0);\n        return { ne, ns, ciphertext };\n    }\n    readMessageRegular(cs, message) {\n        return this.decryptWithAd(cs, new Uint8Array(0), message.ciphertext);\n    }\n}\n//# sourceMappingURL=abstract-handshake.js.map","import { isValidPublicKey } from '../utils.js';\nimport { AbstractHandshake } from './abstract-handshake.js';\nexport class XX extends AbstractHandshake {\n    initializeInitiator(prologue, s, rs, psk) {\n        const name = 'Noise_XX_25519_ChaChaPoly_SHA256';\n        const ss = this.initializeSymmetric(name);\n        this.mixHash(ss, prologue);\n        const re = new Uint8Array(32);\n        return { ss, s, rs, psk, re };\n    }\n    initializeResponder(prologue, s, rs, psk) {\n        const name = 'Noise_XX_25519_ChaChaPoly_SHA256';\n        const ss = this.initializeSymmetric(name);\n        this.mixHash(ss, prologue);\n        const re = new Uint8Array(32);\n        return { ss, s, rs, psk, re };\n    }\n    writeMessageA(hs, payload, e) {\n        const ns = new Uint8Array(0);\n        if (e !== undefined) {\n            hs.e = e;\n        }\n        else {\n            hs.e = this.crypto.generateX25519KeyPair();\n        }\n        const ne = hs.e.publicKey;\n        this.mixHash(hs.ss, ne);\n        const ciphertext = this.encryptAndHash(hs.ss, payload);\n        return { ne, ns, ciphertext };\n    }\n    writeMessageB(hs, payload) {\n        hs.e = this.crypto.generateX25519KeyPair();\n        const ne = hs.e.publicKey;\n        this.mixHash(hs.ss, ne);\n        this.mixKey(hs.ss, this.dh(hs.e.privateKey, hs.re));\n        const spk = hs.s.publicKey;\n        const ns = this.encryptAndHash(hs.ss, spk);\n        this.mixKey(hs.ss, this.dh(hs.s.privateKey, hs.re));\n        const ciphertext = this.encryptAndHash(hs.ss, payload);\n        return { ne, ns, ciphertext };\n    }\n    writeMessageC(hs, payload) {\n        const spk = hs.s.publicKey;\n        const ns = this.encryptAndHash(hs.ss, spk);\n        this.mixKey(hs.ss, this.dh(hs.s.privateKey, hs.re));\n        const ciphertext = this.encryptAndHash(hs.ss, payload);\n        const ne = this.createEmptyKey();\n        const messageBuffer = { ne, ns, ciphertext };\n        const { cs1, cs2 } = this.split(hs.ss);\n        return { h: hs.ss.h, messageBuffer, cs1, cs2 };\n    }\n    readMessageA(hs, message) {\n        if (isValidPublicKey(message.ne)) {\n            hs.re = message.ne;\n        }\n        this.mixHash(hs.ss, hs.re);\n        return this.decryptAndHash(hs.ss, message.ciphertext);\n    }\n    readMessageB(hs, message) {\n        if (isValidPublicKey(message.ne)) {\n            hs.re = message.ne;\n        }\n        this.mixHash(hs.ss, hs.re);\n        if (!hs.e) {\n            throw new Error('Handshake state `e` param is missing.');\n        }\n        this.mixKey(hs.ss, this.dh(hs.e.privateKey, hs.re));\n        const { plaintext: ns, valid: valid1 } = this.decryptAndHash(hs.ss, message.ns);\n        if (valid1 && isValidPublicKey(ns)) {\n            hs.rs = ns;\n        }\n        this.mixKey(hs.ss, this.dh(hs.e.privateKey, hs.rs));\n        const { plaintext, valid: valid2 } = this.decryptAndHash(hs.ss, message.ciphertext);\n        return { plaintext, valid: (valid1 && valid2) };\n    }\n    readMessageC(hs, message) {\n        const { plaintext: ns, valid: valid1 } = this.decryptAndHash(hs.ss, message.ns);\n        if (valid1 && isValidPublicKey(ns)) {\n            hs.rs = ns;\n        }\n        if (!hs.e) {\n            throw new Error('Handshake state `e` param is missing.');\n        }\n        this.mixKey(hs.ss, this.dh(hs.e.privateKey, hs.rs));\n        const { plaintext, valid: valid2 } = this.decryptAndHash(hs.ss, message.ciphertext);\n        const { cs1, cs2 } = this.split(hs.ss);\n        return { h: hs.ss.h, plaintext, valid: (valid1 && valid2), cs1, cs2 };\n    }\n    initSession(initiator, prologue, s) {\n        const psk = this.createEmptyKey();\n        const rs = new Uint8Array(32); // no static key yet\n        let hs;\n        if (initiator) {\n            hs = this.initializeInitiator(prologue, s, rs, psk);\n        }\n        else {\n            hs = this.initializeResponder(prologue, s, rs, psk);\n        }\n        return {\n            hs,\n            i: initiator,\n            mc: 0\n        };\n    }\n    sendMessage(session, message, ephemeral) {\n        let messageBuffer;\n        if (session.mc === 0) {\n            messageBuffer = this.writeMessageA(session.hs, message, ephemeral);\n        }\n        else if (session.mc === 1) {\n            messageBuffer = this.writeMessageB(session.hs, message);\n        }\n        else if (session.mc === 2) {\n            const { h, messageBuffer: resultingBuffer, cs1, cs2 } = this.writeMessageC(session.hs, message);\n            messageBuffer = resultingBuffer;\n            session.h = h;\n            session.cs1 = cs1;\n            session.cs2 = cs2;\n        }\n        else if (session.mc > 2) {\n            if (session.i) {\n                if (!session.cs1) {\n                    throw new Error('CS1 (cipher state) is not defined');\n                }\n                messageBuffer = this.writeMessageRegular(session.cs1, message);\n            }\n            else {\n                if (!session.cs2) {\n                    throw new Error('CS2 (cipher state) is not defined');\n                }\n                messageBuffer = this.writeMessageRegular(session.cs2, message);\n            }\n        }\n        else {\n            throw new Error('Session invalid.');\n        }\n        session.mc++;\n        return messageBuffer;\n    }\n    recvMessage(session, message) {\n        let plaintext = new Uint8Array(0);\n        let valid = false;\n        if (session.mc === 0) {\n            ({ plaintext, valid } = this.readMessageA(session.hs, message));\n        }\n        else if (session.mc === 1) {\n            ({ plaintext, valid } = this.readMessageB(session.hs, message));\n        }\n        else if (session.mc === 2) {\n            const { h, plaintext: resultingPlaintext, valid: resultingValid, cs1, cs2 } = this.readMessageC(session.hs, message);\n            plaintext = resultingPlaintext;\n            valid = resultingValid;\n            session.h = h;\n            session.cs1 = cs1;\n            session.cs2 = cs2;\n        }\n        session.mc++;\n        return { plaintext, valid };\n    }\n}\n//# sourceMappingURL=xx.js.map","import { InvalidCryptoExchangeError, UnexpectedPeerError } from '@libp2p/interface/errors';\nimport { decode0, decode1, decode2, encode0, encode1, encode2 } from './encoder.js';\nimport { XX } from './handshakes/xx.js';\nimport { logger, logLocalStaticKeys, logLocalEphemeralKeys, logRemoteEphemeralKey, logRemoteStaticKey, logCipherState } from './logger.js';\nimport { decodePayload, getPeerIdFromPayload, verifySignedPayload } from './utils.js';\nexport class XXHandshake {\n    isInitiator;\n    session;\n    remotePeer;\n    remoteExtensions = { webtransportCerthashes: [] };\n    payload;\n    connection;\n    xx;\n    staticKeypair;\n    prologue;\n    constructor(isInitiator, payload, prologue, crypto, staticKeypair, connection, remotePeer, handshake) {\n        this.isInitiator = isInitiator;\n        this.payload = payload;\n        this.prologue = prologue;\n        this.staticKeypair = staticKeypair;\n        this.connection = connection;\n        if (remotePeer) {\n            this.remotePeer = remotePeer;\n        }\n        this.xx = handshake ?? new XX(crypto);\n        this.session = this.xx.initSession(this.isInitiator, this.prologue, this.staticKeypair);\n    }\n    // stage 0\n    async propose() {\n        logLocalStaticKeys(this.session.hs.s);\n        if (this.isInitiator) {\n            logger.trace('Stage 0 - Initiator starting to send first message.');\n            const messageBuffer = this.xx.sendMessage(this.session, new Uint8Array(0));\n            await this.connection.write(encode0(messageBuffer));\n            logger.trace('Stage 0 - Initiator finished sending first message.');\n            logLocalEphemeralKeys(this.session.hs.e);\n        }\n        else {\n            logger.trace('Stage 0 - Responder waiting to receive first message...');\n            const receivedMessageBuffer = decode0((await this.connection.read()).subarray());\n            const { valid } = this.xx.recvMessage(this.session, receivedMessageBuffer);\n            if (!valid) {\n                throw new InvalidCryptoExchangeError('xx handshake stage 0 validation fail');\n            }\n            logger.trace('Stage 0 - Responder received first message.');\n            logRemoteEphemeralKey(this.session.hs.re);\n        }\n    }\n    // stage 1\n    async exchange() {\n        if (this.isInitiator) {\n            logger.trace('Stage 1 - Initiator waiting to receive first message from responder...');\n            const receivedMessageBuffer = decode1((await this.connection.read()).subarray());\n            const { plaintext, valid } = this.xx.recvMessage(this.session, receivedMessageBuffer);\n            if (!valid) {\n                throw new InvalidCryptoExchangeError('xx handshake stage 1 validation fail');\n            }\n            logger.trace('Stage 1 - Initiator received the message.');\n            logRemoteEphemeralKey(this.session.hs.re);\n            logRemoteStaticKey(this.session.hs.rs);\n            logger.trace(\"Initiator going to check remote's signature...\");\n            try {\n                const decodedPayload = decodePayload(plaintext);\n                this.remotePeer = this.remotePeer || await getPeerIdFromPayload(decodedPayload);\n                await verifySignedPayload(this.session.hs.rs, decodedPayload, this.remotePeer);\n                this.setRemoteNoiseExtension(decodedPayload.extensions);\n            }\n            catch (e) {\n                const err = e;\n                throw new UnexpectedPeerError(`Error occurred while verifying signed payload: ${err.message}`);\n            }\n            logger.trace('All good with the signature!');\n        }\n        else {\n            logger.trace('Stage 1 - Responder sending out first message with signed payload and static key.');\n            const messageBuffer = this.xx.sendMessage(this.session, this.payload);\n            await this.connection.write(encode1(messageBuffer));\n            logger.trace('Stage 1 - Responder sent the second handshake message with signed payload.');\n            logLocalEphemeralKeys(this.session.hs.e);\n        }\n    }\n    // stage 2\n    async finish() {\n        if (this.isInitiator) {\n            logger.trace('Stage 2 - Initiator sending third handshake message.');\n            const messageBuffer = this.xx.sendMessage(this.session, this.payload);\n            await this.connection.write(encode2(messageBuffer));\n            logger.trace('Stage 2 - Initiator sent message with signed payload.');\n        }\n        else {\n            logger.trace('Stage 2 - Responder waiting for third handshake message...');\n            const receivedMessageBuffer = decode2((await this.connection.read()).subarray());\n            const { plaintext, valid } = this.xx.recvMessage(this.session, receivedMessageBuffer);\n            if (!valid) {\n                throw new InvalidCryptoExchangeError('xx handshake stage 2 validation fail');\n            }\n            logger.trace('Stage 2 - Responder received the message, finished handshake.');\n            try {\n                const decodedPayload = decodePayload(plaintext);\n                this.remotePeer = this.remotePeer || await getPeerIdFromPayload(decodedPayload);\n                await verifySignedPayload(this.session.hs.rs, decodedPayload, this.remotePeer);\n                this.setRemoteNoiseExtension(decodedPayload.extensions);\n            }\n            catch (e) {\n                const err = e;\n                throw new UnexpectedPeerError(`Error occurred while verifying signed payload: ${err.message}`);\n            }\n        }\n        logCipherState(this.session);\n    }\n    encrypt(plaintext, session) {\n        const cs = this.getCS(session);\n        return this.xx.encryptWithAd(cs, new Uint8Array(0), plaintext);\n    }\n    decrypt(ciphertext, session, dst) {\n        const cs = this.getCS(session, false);\n        return this.xx.decryptWithAd(cs, new Uint8Array(0), ciphertext, dst);\n    }\n    getRemoteStaticKey() {\n        return this.session.hs.rs;\n    }\n    getCS(session, encryption = true) {\n        if (!session.cs1 || !session.cs2) {\n            throw new InvalidCryptoExchangeError('Handshake not completed properly, cipher state does not exist.');\n        }\n        if (this.isInitiator) {\n            return encryption ? session.cs1 : session.cs2;\n        }\n        else {\n            return encryption ? session.cs2 : session.cs1;\n        }\n    }\n    setRemoteNoiseExtension(e) {\n        if (e) {\n            this.remoteExtensions = e;\n        }\n    }\n}\n//# sourceMappingURL=handshake-xx.js.map","import { decode } from 'it-length-prefixed';\nimport { lpStream } from 'it-length-prefixed-stream';\nimport { duplexPair } from 'it-pair/duplex';\nimport { pipe } from 'it-pipe';\nimport { NOISE_MSG_MAX_LENGTH_BYTES } from './constants.js';\nimport { pureJsCrypto } from './crypto/js.js';\nimport { decryptStream, encryptStream } from './crypto/streaming.js';\nimport { uint16BEDecode, uint16BEEncode } from './encoder.js';\nimport { XXHandshake } from './handshake-xx.js';\nimport { registerMetrics } from './metrics.js';\nimport { getPayload } from './utils.js';\nexport class Noise {\n    protocol = '/noise';\n    crypto;\n    prologue;\n    staticKeys;\n    extensions;\n    metrics;\n    constructor(init = {}) {\n        const { staticNoiseKey, extensions, crypto, prologueBytes, metrics } = init;\n        this.crypto = crypto ?? pureJsCrypto;\n        this.extensions = extensions;\n        this.metrics = metrics ? registerMetrics(metrics) : undefined;\n        if (staticNoiseKey) {\n            // accepts x25519 private key of length 32\n            this.staticKeys = this.crypto.generateX25519KeyPairFromSeed(staticNoiseKey);\n        }\n        else {\n            this.staticKeys = this.crypto.generateX25519KeyPair();\n        }\n        this.prologue = prologueBytes ?? new Uint8Array(0);\n    }\n    /**\n     * Encrypt outgoing data to the remote party (handshake as initiator)\n     *\n     * @param {PeerId} localPeer - PeerId of the receiving peer\n     * @param {Duplex<AsyncGenerator<Uint8Array>, AsyncIterable<Uint8Array>, Promise<void>>} connection - streaming iterable duplex that will be encrypted\n     * @param {PeerId} remotePeer - PeerId of the remote peer. Used to validate the integrity of the remote peer.\n     * @returns {Promise<SecuredConnection>}\n     */\n    async secureOutbound(localPeer, connection, remotePeer) {\n        const wrappedConnection = lpStream(connection, {\n            lengthEncoder: uint16BEEncode,\n            lengthDecoder: uint16BEDecode,\n            maxDataLength: NOISE_MSG_MAX_LENGTH_BYTES\n        });\n        const handshake = await this.performHandshake({\n            connection: wrappedConnection,\n            isInitiator: true,\n            localPeer,\n            remotePeer\n        });\n        const conn = await this.createSecureConnection(wrappedConnection, handshake);\n        return {\n            conn,\n            remoteExtensions: handshake.remoteExtensions,\n            remotePeer: handshake.remotePeer\n        };\n    }\n    /**\n     * Decrypt incoming data (handshake as responder).\n     *\n     * @param {PeerId} localPeer - PeerId of the receiving peer.\n     * @param {Duplex<AsyncGenerator<Uint8Array>, AsyncIterable<Uint8Array>, Promise<void>>} connection - streaming iterable duplex that will be encryption.\n     * @param {PeerId} remotePeer - optional PeerId of the initiating peer, if known. This may only exist during transport upgrades.\n     * @returns {Promise<SecuredConnection>}\n     */\n    async secureInbound(localPeer, connection, remotePeer) {\n        const wrappedConnection = lpStream(connection, {\n            lengthEncoder: uint16BEEncode,\n            lengthDecoder: uint16BEDecode,\n            maxDataLength: NOISE_MSG_MAX_LENGTH_BYTES\n        });\n        const handshake = await this.performHandshake({\n            connection: wrappedConnection,\n            isInitiator: false,\n            localPeer,\n            remotePeer\n        });\n        const conn = await this.createSecureConnection(wrappedConnection, handshake);\n        return {\n            conn,\n            remotePeer: handshake.remotePeer,\n            remoteExtensions: handshake.remoteExtensions\n        };\n    }\n    /**\n     * If Noise pipes supported, tries IK handshake first with XX as fallback if it fails.\n     * If noise pipes disabled or remote peer static key is unknown, use XX.\n     *\n     * @param {HandshakeParams} params\n     */\n    async performHandshake(params) {\n        const payload = await getPayload(params.localPeer, this.staticKeys.publicKey, this.extensions);\n        // run XX handshake\n        return this.performXXHandshake(params, payload);\n    }\n    async performXXHandshake(params, payload) {\n        const { isInitiator, remotePeer, connection } = params;\n        const handshake = new XXHandshake(isInitiator, payload, this.prologue, this.crypto, this.staticKeys, connection, remotePeer);\n        try {\n            await handshake.propose();\n            await handshake.exchange();\n            await handshake.finish();\n            this.metrics?.xxHandshakeSuccesses.increment();\n        }\n        catch (e) {\n            this.metrics?.xxHandshakeErrors.increment();\n            if (e instanceof Error) {\n                e.message = `Error occurred during XX handshake: ${e.message}`;\n                throw e;\n            }\n        }\n        return handshake;\n    }\n    async createSecureConnection(connection, handshake) {\n        // Create encryption box/unbox wrapper\n        const [secure, user] = duplexPair();\n        const network = connection.unwrap();\n        await pipe(secure, // write to wrapper\n        encryptStream(handshake, this.metrics), // encrypt data + prefix with message length\n        network, // send to the remote peer\n        (source) => decode(source, { lengthDecoder: uint16BEDecode }), // read message length prefix\n        decryptStream(handshake, this.metrics), // decrypt the incoming data\n        secure // pipe to the wrapper\n        );\n        return user;\n    }\n}\n//# sourceMappingURL=noise.js.map","import { NOISE_MSG_MAX_LENGTH_BYTES, NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG } from '../constants.js';\nimport { uint16BEEncode } from '../encoder.js';\nconst CHACHA_TAG_LENGTH = 16;\n// Returns generator that encrypts payload from the user\nexport function encryptStream(handshake, metrics) {\n    return async function* (source) {\n        for await (const chunk of source) {\n            for (let i = 0; i < chunk.length; i += NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG) {\n                let end = i + NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG;\n                if (end > chunk.length) {\n                    end = chunk.length;\n                }\n                const data = handshake.encrypt(chunk.subarray(i, end), handshake.session);\n                metrics?.encryptedPackets.increment();\n                yield uint16BEEncode(data.byteLength);\n                yield data;\n            }\n        }\n    };\n}\n// Decrypt received payload to the user\nexport function decryptStream(handshake, metrics) {\n    return async function* (source) {\n        for await (const chunk of source) {\n            for (let i = 0; i < chunk.length; i += NOISE_MSG_MAX_LENGTH_BYTES) {\n                let end = i + NOISE_MSG_MAX_LENGTH_BYTES;\n                if (end > chunk.length) {\n                    end = chunk.length;\n                }\n                if (end - CHACHA_TAG_LENGTH < i) {\n                    throw new Error('Invalid chunk');\n                }\n                const encrypted = chunk.subarray(i, end);\n                // memory allocation is not cheap so reuse the encrypted Uint8Array\n                // see https://github.com/ChainSafe/js-libp2p-noise/pull/242#issue-1422126164\n                // this is ok because chacha20 reads bytes one by one and don't reread after that\n                // it's also tested in https://github.com/ChainSafe/as-chacha20poly1305/pull/1/files#diff-25252846b58979dcaf4e41d47b3eadd7e4f335e7fb98da6c049b1f9cd011f381R48\n                const dst = chunk.subarray(i, end - CHACHA_TAG_LENGTH);\n                const { plaintext: decrypted, valid } = handshake.decrypt(encrypted, handshake.session, dst);\n                if (!valid) {\n                    metrics?.decryptErrors.increment();\n                    throw new Error('Failed to validate decrypted chunk');\n                }\n                metrics?.decryptedPackets.increment();\n                yield decrypted;\n            }\n        }\n    };\n}\n//# sourceMappingURL=streaming.js.map","import { Noise } from './noise.js';\nexport { pureJsCrypto } from './crypto/js.js';\nexport function noise(init = {}) {\n    return () => new Noise(init);\n}\n//# sourceMappingURL=index.js.map","export function registerMetrics(metrics) {\n    return {\n        xxHandshakeSuccesses: metrics.registerCounter('libp2p_noise_xxhandshake_successes_total', {\n            help: 'Total count of noise xxHandshakes successes_'\n        }),\n        xxHandshakeErrors: metrics.registerCounter('libp2p_noise_xxhandshake_error_total', {\n            help: 'Total count of noise xxHandshakes errors'\n        }),\n        encryptedPackets: metrics.registerCounter('libp2p_noise_encrypted_packets_total', {\n            help: 'Total count of noise encrypted packets successfully'\n        }),\n        decryptedPackets: metrics.registerCounter('libp2p_noise_decrypted_packets_total', {\n            help: 'Total count of noise decrypted packets'\n        }),\n        decryptErrors: metrics.registerCounter('libp2p_noise_decrypt_errors_total', {\n            help: 'Total count of noise decrypt errors'\n        })\n    };\n}\n//# sourceMappingURL=metrics.js.map","export const MIN_NONCE = 0;\n// For performance reasons, the nonce is represented as a JS `number`\n// Although JS `number` can safely represent integers up to 2 ** 53 - 1, we choose to only use\n// 4 bytes to store the data for performance reason.\n// This is a slight deviation from the noise spec, which describes the max nonce as 2 ** 64 - 2\n// The effect is that this implementation will need a new handshake to be performed after fewer messages are exchanged than other implementations with full uint64 nonces.\n// this MAX_NONCE is still a large number of messages, so the practical effect of this is negligible.\nexport const MAX_NONCE = 0xffffffff;\nconst ERR_MAX_NONCE = 'Cipherstate has reached maximum n, a new handshake must be performed';\n/**\n * The nonce is an uint that's increased over time.\n * Maintaining different representations help improve performance.\n */\nexport class Nonce {\n    n;\n    bytes;\n    view;\n    constructor(n = MIN_NONCE) {\n        this.n = n;\n        this.bytes = new Uint8Array(12);\n        this.view = new DataView(this.bytes.buffer, this.bytes.byteOffset, this.bytes.byteLength);\n        this.view.setUint32(4, n, true);\n    }\n    increment() {\n        this.n++;\n        // Even though we're treating the nonce as 8 bytes, RFC7539 specifies 12 bytes for a nonce.\n        this.view.setUint32(4, this.n, true);\n    }\n    getBytes() {\n        return this.bytes;\n    }\n    getUint64() {\n        return this.n;\n    }\n    assertValue() {\n        if (this.n > MAX_NONCE) {\n            throw new Error(ERR_MAX_NONCE);\n        }\n    }\n}\n//# sourceMappingURL=nonce.js.map","/* eslint-disable import/export */\n/* eslint-disable complexity */\n/* eslint-disable @typescript-eslint/no-namespace */\n/* eslint-disable @typescript-eslint/no-unnecessary-boolean-literal-compare */\n/* eslint-disable @typescript-eslint/no-empty-interface */\nimport { enumeration, encodeMessage, decodeMessage, message } from 'protons-runtime';\nexport var KeyType;\n(function (KeyType) {\n    KeyType[\"RSA\"] = \"RSA\";\n    KeyType[\"Ed25519\"] = \"Ed25519\";\n    KeyType[\"Secp256k1\"] = \"Secp256k1\";\n})(KeyType || (KeyType = {}));\nvar __KeyTypeValues;\n(function (__KeyTypeValues) {\n    __KeyTypeValues[__KeyTypeValues[\"RSA\"] = 0] = \"RSA\";\n    __KeyTypeValues[__KeyTypeValues[\"Ed25519\"] = 1] = \"Ed25519\";\n    __KeyTypeValues[__KeyTypeValues[\"Secp256k1\"] = 2] = \"Secp256k1\";\n})(__KeyTypeValues || (__KeyTypeValues = {}));\n(function (KeyType) {\n    KeyType.codec = () => {\n        return enumeration(__KeyTypeValues);\n    };\n})(KeyType || (KeyType = {}));\nexport var PublicKey;\n(function (PublicKey) {\n    let _codec;\n    PublicKey.codec = () => {\n        if (_codec == null) {\n            _codec = message((obj, w, opts = {}) => {\n                if (opts.lengthDelimited !== false) {\n                    w.fork();\n                }\n                if (obj.Type != null) {\n                    w.uint32(8);\n                    KeyType.codec().encode(obj.Type, w);\n                }\n                if (obj.Data != null) {\n                    w.uint32(18);\n                    w.bytes(obj.Data);\n                }\n                if (opts.lengthDelimited !== false) {\n                    w.ldelim();\n                }\n            }, (reader, length) => {\n                const obj = {};\n                const end = length == null ? reader.len : reader.pos + length;\n                while (reader.pos < end) {\n                    const tag = reader.uint32();\n                    switch (tag >>> 3) {\n                        case 1:\n                            obj.Type = KeyType.codec().decode(reader);\n                            break;\n                        case 2:\n                            obj.Data = reader.bytes();\n                            break;\n                        default:\n                            reader.skipType(tag & 7);\n                            break;\n                    }\n                }\n                return obj;\n            });\n        }\n        return _codec;\n    };\n    PublicKey.encode = (obj) => {\n        return encodeMessage(obj, PublicKey.codec());\n    };\n    PublicKey.decode = (buf) => {\n        return decodeMessage(buf, PublicKey.codec());\n    };\n})(PublicKey || (PublicKey = {}));\nexport var PrivateKey;\n(function (PrivateKey) {\n    let _codec;\n    PrivateKey.codec = () => {\n        if (_codec == null) {\n            _codec = message((obj, w, opts = {}) => {\n                if (opts.lengthDelimited !== false) {\n                    w.fork();\n                }\n                if (obj.Type != null) {\n                    w.uint32(8);\n                    KeyType.codec().encode(obj.Type, w);\n                }\n                if (obj.Data != null) {\n                    w.uint32(18);\n                    w.bytes(obj.Data);\n                }\n                if (opts.lengthDelimited !== false) {\n                    w.ldelim();\n                }\n            }, (reader, length) => {\n                const obj = {};\n                const end = length == null ? reader.len : reader.pos + length;\n                while (reader.pos < end) {\n                    const tag = reader.uint32();\n                    switch (tag >>> 3) {\n                        case 1:\n                            obj.Type = KeyType.codec().decode(reader);\n                            break;\n                        case 2:\n                            obj.Data = reader.bytes();\n                            break;\n                        default:\n                            reader.skipType(tag & 7);\n                            break;\n                    }\n                }\n                return obj;\n            });\n        }\n        return _codec;\n    };\n    PrivateKey.encode = (obj) => {\n        return encodeMessage(obj, PrivateKey.codec());\n    };\n    PrivateKey.decode = (buf) => {\n        return decodeMessage(buf, PrivateKey.codec());\n    };\n})(PrivateKey || (PrivateKey = {}));\n//# sourceMappingURL=keys.js.map","import defer from 'p-defer';\n/**\n * A pair of streams where one drains from the other\n */\nexport function pair() {\n    const deferred = defer();\n    let piped = false;\n    return {\n        sink: async (source) => {\n            if (piped) {\n                throw new Error('already piped');\n            }\n            piped = true;\n            deferred.resolve(source);\n        },\n        source: (async function* () {\n            const source = await deferred.promise;\n            yield* source;\n        }())\n    };\n}\n//# sourceMappingURL=index.js.map","import { pair } from './index.js';\n/**\n * Two duplex streams that are attached to each other\n */\nexport function duplexPair() {\n    const a = pair();\n    const b = pair();\n    return [\n        {\n            source: a.source,\n            sink: b.sink\n        },\n        {\n            source: b.source,\n            sink: a.sink\n        }\n    ];\n}\n//# sourceMappingURL=duplex.js.map","import { rfc4648 } from './base.js'\n\nexport const base32 = rfc4648({\n  prefix: 'b',\n  name: 'base32',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567',\n  bitsPerChar: 5\n})\n\nexport const base32upper = rfc4648({\n  prefix: 'B',\n  name: 'base32upper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n  bitsPerChar: 5\n})\n\nexport const base32pad = rfc4648({\n  prefix: 'c',\n  name: 'base32pad',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567=',\n  bitsPerChar: 5\n})\n\nexport const base32padupper = rfc4648({\n  prefix: 'C',\n  name: 'base32padupper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=',\n  bitsPerChar: 5\n})\n\nexport const base32hex = rfc4648({\n  prefix: 'v',\n  name: 'base32hex',\n  alphabet: '0123456789abcdefghijklmnopqrstuv',\n  bitsPerChar: 5\n})\n\nexport const base32hexupper = rfc4648({\n  prefix: 'V',\n  name: 'base32hexupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV',\n  bitsPerChar: 5\n})\n\nexport const base32hexpad = rfc4648({\n  prefix: 't',\n  name: 'base32hexpad',\n  alphabet: '0123456789abcdefghijklmnopqrstuv=',\n  bitsPerChar: 5\n})\n\nexport const base32hexpadupper = rfc4648({\n  prefix: 'T',\n  name: 'base32hexpadupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV=',\n  bitsPerChar: 5\n})\n\nexport const base32z = rfc4648({\n  prefix: 'h',\n  name: 'base32z',\n  alphabet: 'ybndrfg8ejkmcpqxot1uwisza345h769',\n  bitsPerChar: 5\n})\n","import { baseX } from './base.js'\n\nexport const base58btc = baseX({\n  name: 'base58btc',\n  prefix: 'z',\n  alphabet: '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n})\n\nexport const base58flickr = baseX({\n  name: 'base58flickr',\n  prefix: 'Z',\n  alphabet: '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n})\n","const empty = new Uint8Array(0)\n\n/**\n * @param {Uint8Array} d\n */\nconst toHex = d => d.reduce((hex, byte) => hex + byte.toString(16).padStart(2, '0'), '')\n\n/**\n * @param {string} hex\n */\nconst fromHex = hex => {\n  const hexes = hex.match(/../g)\n  return hexes ? new Uint8Array(hexes.map(b => parseInt(b, 16))) : empty\n}\n\n/**\n * @param {Uint8Array} aa\n * @param {Uint8Array} bb\n */\nconst equals = (aa, bb) => {\n  if (aa === bb) return true\n  if (aa.byteLength !== bb.byteLength) {\n    return false\n  }\n\n  for (let ii = 0; ii < aa.byteLength; ii++) {\n    if (aa[ii] !== bb[ii]) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * @param {ArrayBufferView|ArrayBuffer|Uint8Array} o\n * @returns {Uint8Array}\n */\nconst coerce = o => {\n  if (o instanceof Uint8Array && o.constructor.name === 'Uint8Array') return o\n  if (o instanceof ArrayBuffer) return new Uint8Array(o)\n  if (ArrayBuffer.isView(o)) {\n    return new Uint8Array(o.buffer, o.byteOffset, o.byteLength)\n  }\n  throw new Error('Unknown type, must be binary type')\n}\n\n/**\n * @param {any} o\n * @returns {o is ArrayBuffer|ArrayBufferView}\n */\nconst isBinary = o =>\n  o instanceof ArrayBuffer || ArrayBuffer.isView(o)\n\n/**\n * @param {string} str\n * @returns {Uint8Array}\n */\nconst fromString = str => (new TextEncoder()).encode(str)\n\n/**\n * @param {Uint8Array} b\n * @returns {string}\n */\nconst toString = b => (new TextDecoder()).decode(b)\n\nexport { equals, coerce, isBinary, fromHex, toHex, fromString, toString, empty }\n","import { base32 } from './bases/base32.js'\nimport { base58btc } from './bases/base58.js'\nimport { coerce } from './bytes.js'\nimport * as Digest from './hashes/digest.js'\n// Linter can see that API is used in types.\n// eslint-disable-next-line\nimport * as API from \"./link/interface.js\"\nimport * as varint from './varint.js'\n\n// This way TS will also expose all the types from module\nexport * from './link/interface.js'\n\n/**\n * @template {API.Link<unknown, number, number, API.Version>} T\n * @template {string} Prefix\n * @param {T} link\n * @param {API.MultibaseEncoder<Prefix>} [base]\n * @returns {API.ToString<T, Prefix>}\n */\nexport const format = (link, base) => {\n  const { bytes, version } = link\n  switch (version) {\n    case 0:\n      return toStringV0(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<\"z\">} */ (base) || base58btc.encoder\n      )\n    default:\n      return toStringV1(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<Prefix>} */ (base || base32.encoder)\n      )\n  }\n}\n\n/**\n * @template {API.UnknownLink} Link\n * @param {Link} link\n * @returns {API.LinkJSON<Link>}\n */\nexport const toJSON = (link) => ({\n  '/': format(link)\n})\n\n/**\n * @template {API.UnknownLink} Link\n * @param {API.LinkJSON<Link>} json\n */\nexport const fromJSON = (json) =>\n  CID.parse(json['/'])\n\n/** @type {WeakMap<API.UnknownLink, Map<string, string>>} */\nconst cache = new WeakMap()\n\n/**\n * @param {API.UnknownLink} cid\n * @returns {Map<string, string>}\n */\nconst baseCache = cid => {\n  const baseCache = cache.get(cid)\n  if (baseCache == null) {\n    const baseCache = new Map()\n    cache.set(cid, baseCache)\n    return baseCache\n  }\n  return baseCache\n}\n\n/**\n * @template {unknown} [Data=unknown]\n * @template {number} [Format=number]\n * @template {number} [Alg=number]\n * @template {API.Version} [Version=API.Version]\n * @implements {API.Link<Data, Format, Alg, Version>}\n */\n\nexport class CID {\n  /**\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} multihash - (Multi)hash of the of the content.\n   * @param {Uint8Array} bytes\n   */\n  constructor (version, code, multihash, bytes) {\n    /** @readonly */\n    this.code = code\n    /** @readonly */\n    this.version = version\n    /** @readonly */\n    this.multihash = multihash\n    /** @readonly */\n    this.bytes = bytes\n\n    // flag to serializers that this is a CID and\n    // should be treated specially\n    /** @readonly */\n    this['/'] = bytes\n  }\n\n  /**\n   * Signalling `cid.asCID === cid` has been replaced with `cid['/'] === cid.bytes`\n   * please either use `CID.asCID(cid)` or switch to new signalling mechanism\n   *\n   * @deprecated\n   */\n  get asCID () {\n    return this\n  }\n\n  // ArrayBufferView\n  get byteOffset () {\n    return this.bytes.byteOffset\n  }\n\n  // ArrayBufferView\n  get byteLength () {\n    return this.bytes.byteLength\n  }\n\n  /**\n   * @returns {CID<Data, API.DAG_PB, API.SHA_256, 0>}\n   */\n  toV0 () {\n    switch (this.version) {\n      case 0: {\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (this)\n      }\n      case 1: {\n        const { code, multihash } = this\n\n        if (code !== DAG_PB_CODE) {\n          throw new Error('Cannot convert a non dag-pb CID to CIDv0')\n        }\n\n        // sha2-256\n        if (multihash.code !== SHA_256_CODE) {\n          throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0')\n        }\n\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (\n          CID.createV0(\n            /** @type {API.MultihashDigest<API.SHA_256>} */ (multihash)\n          )\n        )\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 0. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @returns {CID<Data, Format, Alg, 1>}\n   */\n  toV1 () {\n    switch (this.version) {\n      case 0: {\n        const { code, digest } = this.multihash\n        const multihash = Digest.create(code, digest)\n        return /** @type {CID<Data, Format, Alg, 1>} */ (\n          CID.createV1(this.code, multihash)\n        )\n      }\n      case 1: {\n        return /** @type {CID<Data, Format, Alg, 1>} */ (this)\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 1. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @param {unknown} other\n   * @returns {other is CID<Data, Format, Alg, Version>}\n   */\n  equals (other) {\n    return CID.equals(this, other)\n  }\n\n  /**\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {API.Link<Data, Format, Alg, Version>} self\n   * @param {unknown} other\n   * @returns {other is CID}\n   */\n  static equals (self, other) {\n    const unknown =\n      /** @type {{code?:unknown, version?:unknown, multihash?:unknown}} */ (\n        other\n      )\n    return (\n      unknown &&\n      self.code === unknown.code &&\n      self.version === unknown.version &&\n      Digest.equals(self.multihash, unknown.multihash)\n    )\n  }\n\n  /**\n   * @param {API.MultibaseEncoder<string>} [base]\n   * @returns {string}\n   */\n  toString (base) {\n    return format(this, base)\n  }\n\n  /**\n   * @returns {API.LinkJSON<this>}\n   */\n  toJSON () {\n    return { '/': format(this) }\n  }\n\n  link () {\n    return this\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'CID'\n  }\n\n  // Legacy\n\n  [Symbol.for('nodejs.util.inspect.custom')] () {\n    return `CID(${this.toString()})`\n  }\n\n  /**\n   * Takes any input `value` and returns a `CID` instance if it was\n   * a `CID` otherwise returns `null`. If `value` is instanceof `CID`\n   * it will return value back. If `value` is not instance of this CID\n   * class, but is compatible CID it will return new instance of this\n   * `CID` class. Otherwise returns null.\n   *\n   * This allows two different incompatible versions of CID library to\n   * co-exist and interop as long as binary interface is compatible.\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @template {unknown} U\n   * @param {API.Link<Data, Format, Alg, Version>|U} input\n   * @returns {CID<Data, Format, Alg, Version>|null}\n   */\n  static asCID (input) {\n    if (input == null) {\n      return null\n    }\n\n    const value = /** @type {any} */ (input)\n    if (value instanceof CID) {\n      // If value is instance of CID then we're all set.\n      return value\n    } else if ((value['/'] != null && value['/'] === value.bytes) || value.asCID === value) {\n      // If value isn't instance of this CID class but `this.asCID === this` or\n      // `value['/'] === value.bytes` is true it is CID instance coming from a\n      // different implementation (diff version or duplicate). In that case we\n      // rebase it to this `CID` implementation so caller is guaranteed to get\n      // instance with expected API.\n      const { version, code, multihash, bytes } = value\n      return new CID(\n        version,\n        code,\n        /** @type {API.MultihashDigest<Alg>} */ (multihash),\n        bytes || encodeCID(version, code, multihash.bytes)\n      )\n    } else if (value[cidSymbol] === true) {\n      // If value is a CID from older implementation that used to be tagged via\n      // symbol we still rebase it to the this `CID` implementation by\n      // delegating that to a constructor.\n      const { version, multihash, code } = value\n      const digest =\n        /** @type {API.MultihashDigest<Alg>} */\n        (Digest.decode(multihash))\n      return CID.create(version, code, digest)\n    } else {\n      // Otherwise value is not a CID (or an incompatible version of it) in\n      // which case we return `null`.\n      return null\n    }\n  }\n\n  /**\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} digest - (Multi)hash of the of the content.\n   * @returns {CID<Data, Format, Alg, Version>}\n   */\n  static create (version, code, digest) {\n    if (typeof code !== 'number') {\n      throw new Error('String codecs are no longer supported')\n    }\n\n    if (!(digest.bytes instanceof Uint8Array)) {\n      throw new Error('Invalid digest')\n    }\n\n    switch (version) {\n      case 0: {\n        if (code !== DAG_PB_CODE) {\n          throw new Error(\n            `Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`\n          )\n        } else {\n          return new CID(version, code, digest, digest.bytes)\n        }\n      }\n      case 1: {\n        const bytes = encodeCID(version, code, digest.bytes)\n        return new CID(version, code, digest, bytes)\n      }\n      default: {\n        throw new Error('Invalid version')\n      }\n    }\n  }\n\n  /**\n   * Simplified version of `create` for CIDv0.\n   *\n   * @template {unknown} [T=unknown]\n   * @param {API.MultihashDigest<typeof SHA_256_CODE>} digest - Multihash.\n   * @returns {CID<T, typeof DAG_PB_CODE, typeof SHA_256_CODE, 0>}\n   */\n  static createV0 (digest) {\n    return CID.create(0, DAG_PB_CODE, digest)\n  }\n\n  /**\n   * Simplified version of `create` for CIDv1.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @param {Code} code - Content encoding format code.\n   * @param {API.MultihashDigest<Alg>} digest - Miltihash of the content.\n   * @returns {CID<Data, Code, Alg, 1>}\n   */\n  static createV1 (code, digest) {\n    return CID.create(1, code, digest)\n  }\n\n  /**\n   * Decoded a CID from its binary representation. The byte array must contain\n   * only the CID with no additional bytes.\n   *\n   * An error will be thrown if the bytes provided do not contain a valid\n   * binary representation of a CID.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ByteView<API.Link<Data, Code, Alg, Ver>>} bytes\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static decode (bytes) {\n    const [cid, remainder] = CID.decodeFirst(bytes)\n    if (remainder.length) {\n      throw new Error('Incorrect length')\n    }\n    return cid\n  }\n\n  /**\n   * Decoded a CID from its binary representation at the beginning of a byte\n   * array.\n   *\n   * Returns an array with the first element containing the CID and the second\n   * element containing the remainder of the original byte array. The remainder\n   * will be a zero-length byte array if the provided bytes only contained a\n   * binary CID representation.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} bytes\n   * @returns {[CID<T, C, A, V>, Uint8Array]}\n   */\n  static decodeFirst (bytes) {\n    const specs = CID.inspectBytes(bytes)\n    const prefixSize = specs.size - specs.multihashSize\n    const multihashBytes = coerce(\n      bytes.subarray(prefixSize, prefixSize + specs.multihashSize)\n    )\n    if (multihashBytes.byteLength !== specs.multihashSize) {\n      throw new Error('Incorrect length')\n    }\n    const digestBytes = multihashBytes.subarray(\n      specs.multihashSize - specs.digestSize\n    )\n    const digest = new Digest.Digest(\n      specs.multihashCode,\n      specs.digestSize,\n      digestBytes,\n      multihashBytes\n    )\n    const cid =\n      specs.version === 0\n        ? CID.createV0(/** @type {API.MultihashDigest<API.SHA_256>} */ (digest))\n        : CID.createV1(specs.codec, digest)\n    return [/** @type {CID<T, C, A, V>} */(cid), bytes.subarray(specs.size)]\n  }\n\n  /**\n   * Inspect the initial bytes of a CID to determine its properties.\n   *\n   * Involves decoding up to 4 varints. Typically this will require only 4 to 6\n   * bytes but for larger multicodec code values and larger multihash digest\n   * lengths these varints can be quite large. It is recommended that at least\n   * 10 bytes be made available in the `initialBytes` argument for a complete\n   * inspection.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} initialBytes\n   * @returns {{ version:V, codec:C, multihashCode:A, digestSize:number, multihashSize:number, size:number }}\n   */\n  static inspectBytes (initialBytes) {\n    let offset = 0\n    const next = () => {\n      const [i, length] = varint.decode(initialBytes.subarray(offset))\n      offset += length\n      return i\n    }\n\n    let version = /** @type {V} */ (next())\n    let codec = /** @type {C} */ (DAG_PB_CODE)\n    if (/** @type {number} */(version) === 18) {\n      // CIDv0\n      version = /** @type {V} */ (0)\n      offset = 0\n    } else {\n      codec = /** @type {C} */ (next())\n    }\n\n    if (version !== 0 && version !== 1) {\n      throw new RangeError(`Invalid CID version ${version}`)\n    }\n\n    const prefixSize = offset\n    const multihashCode = /** @type {A} */ (next()) // multihash code\n    const digestSize = next() // multihash length\n    const size = offset + digestSize\n    const multihashSize = size - prefixSize\n\n    return { version, codec, multihashCode, digestSize, multihashSize, size }\n  }\n\n  /**\n   * Takes cid in a string representation and creates an instance. If `base`\n   * decoder is not provided will use a default from the configuration. It will\n   * throw an error if encoding of the CID is not compatible with supplied (or\n   * a default decoder).\n   *\n   * @template {string} Prefix\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n   * @param {API.MultibaseDecoder<Prefix>} [base]\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static parse (source, base) {\n    const [prefix, bytes] = parseCIDtoBytes(source, base)\n\n    const cid = CID.decode(bytes)\n\n    if (cid.version === 0 && source[0] !== 'Q') {\n      throw Error('Version 0 CID string must not include multibase prefix')\n    }\n\n    // Cache string representation to avoid computing it on `this.toString()`\n    baseCache(cid).set(prefix, source)\n\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @template {unknown} Data\n * @template {number} Code\n * @template {number} Alg\n * @template {API.Version} Ver\n * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n * @param {API.MultibaseDecoder<Prefix>} [base]\n * @returns {[Prefix, API.ByteView<API.Link<Data, Code, Alg, Ver>>]}\n */\nconst parseCIDtoBytes = (source, base) => {\n  switch (source[0]) {\n    // CIDv0 is parsed differently\n    case 'Q': {\n      const decoder = base || base58btc\n      return [\n        /** @type {Prefix} */ (base58btc.prefix),\n        decoder.decode(`${base58btc.prefix}${source}`)\n      ]\n    }\n    case base58btc.prefix: {\n      const decoder = base || base58btc\n      return [/** @type {Prefix} */(base58btc.prefix), decoder.decode(source)]\n    }\n    case base32.prefix: {\n      const decoder = base || base32\n      return [/** @type {Prefix} */(base32.prefix), decoder.decode(source)]\n    }\n    default: {\n      if (base == null) {\n        throw Error(\n          'To parse non base32 or base58btc encoded CID multibase decoder must be provided'\n        )\n      }\n      return [/** @type {Prefix} */(source[0]), base.decode(source)]\n    }\n  }\n}\n\n/**\n *\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<'z'>} base\n */\nconst toStringV0 = (bytes, cache, base) => {\n  const { prefix } = base\n  if (prefix !== base58btc.prefix) {\n    throw Error(`Cannot string encode V0 in ${base.name} encoding`)\n  }\n\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes).slice(1)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<Prefix>} base\n */\nconst toStringV1 = (bytes, cache, base) => {\n  const { prefix } = base\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\nconst DAG_PB_CODE = 0x70\nconst SHA_256_CODE = 0x12\n\n/**\n * @param {API.Version} version\n * @param {number} code\n * @param {Uint8Array} multihash\n * @returns {Uint8Array}\n */\nconst encodeCID = (version, code, multihash) => {\n  const codeOffset = varint.encodingLength(version)\n  const hashOffset = codeOffset + varint.encodingLength(code)\n  const bytes = new Uint8Array(hashOffset + multihash.byteLength)\n  varint.encodeTo(version, bytes, 0)\n  varint.encodeTo(code, bytes, codeOffset)\n  bytes.set(multihash, hashOffset)\n  return bytes\n}\n\nconst cidSymbol = Symbol.for('@ipld/js-cid/CID')\n","import { coerce, equals as equalBytes } from '../bytes.js'\nimport * as varint from '../varint.js'\n\n/**\n * Creates a multihash digest.\n *\n * @template {number} Code\n * @param {Code} code\n * @param {Uint8Array} digest\n */\nexport const create = (code, digest) => {\n  const size = digest.byteLength\n  const sizeOffset = varint.encodingLength(code)\n  const digestOffset = sizeOffset + varint.encodingLength(size)\n\n  const bytes = new Uint8Array(digestOffset + size)\n  varint.encodeTo(code, bytes, 0)\n  varint.encodeTo(size, bytes, sizeOffset)\n  bytes.set(digest, digestOffset)\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * Turns bytes representation of multihash digest into an instance.\n *\n * @param {Uint8Array} multihash\n * @returns {MultihashDigest}\n */\nexport const decode = (multihash) => {\n  const bytes = coerce(multihash)\n  const [code, sizeOffset] = varint.decode(bytes)\n  const [size, digestOffset] = varint.decode(bytes.subarray(sizeOffset))\n  const digest = bytes.subarray(sizeOffset + digestOffset)\n\n  if (digest.byteLength !== size) {\n    throw new Error('Incorrect length')\n  }\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * @param {MultihashDigest} a\n * @param {unknown} b\n * @returns {b is MultihashDigest}\n */\nexport const equals = (a, b) => {\n  if (a === b) {\n    return true\n  } else {\n    const data = /** @type {{code?:unknown, size?:unknown, bytes?:unknown}} */(b)\n\n    return (\n      a.code === data.code &&\n      a.size === data.size &&\n      data.bytes instanceof Uint8Array &&\n      equalBytes(a.bytes, data.bytes)\n    )\n  }\n}\n\n/**\n * @typedef {import('./interface.js').MultihashDigest} MultihashDigest\n */\n\n/**\n * Represents a multihash digest which carries information about the\n * hashing algorithm and an actual hash digest.\n *\n * @template {number} Code\n * @template {number} Size\n * @class\n * @implements {MultihashDigest}\n */\nexport class Digest {\n  /**\n   * Creates a multihash digest.\n   *\n   * @param {Code} code\n   * @param {Size} size\n   * @param {Uint8Array} digest\n   * @param {Uint8Array} bytes\n   */\n  constructor (code, size, digest, bytes) {\n    this.code = code\n    this.size = size\n    this.digest = digest\n    this.bytes = bytes\n  }\n}\n","import { coerce } from '../bytes.js'\nimport * as Digest from './digest.js'\n\nconst code = 0x0\nconst name = 'identity'\n\n/** @type {(input:Uint8Array) => Uint8Array} */\nconst encode = coerce\n\n/**\n * @param {Uint8Array} input\n * @returns {Digest.Digest<typeof code, number>}\n */\nconst digest = (input) => Digest.create(code, encode(input))\n\nexport const identity = { code, name, encode, digest }\n","/* global crypto */\n\nimport { from } from './hasher.js'\n\n/**\n * @param {AlgorithmIdentifier} name\n */\nconst sha = name =>\n  /**\n   * @param {Uint8Array} data\n   */\n  async data => new Uint8Array(await crypto.subtle.digest(name, data))\n\nexport const sha256 = from({\n  name: 'sha2-256',\n  code: 0x12,\n  encode: sha('SHA-256')\n})\n\nexport const sha512 = from({\n  name: 'sha2-512',\n  code: 0x13,\n  encode: sha('SHA-512')\n})\n","var encode_1 = encode;\n\nvar MSB = 0x80\n  , REST = 0x7F\n  , MSBALL = ~REST\n  , INT = Math.pow(2, 31);\n\nfunction encode(num, out, offset) {\n  out = out || [];\n  offset = offset || 0;\n  var oldOffset = offset;\n\n  while(num >= INT) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num /= 128;\n  }\n  while(num & MSBALL) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num >>>= 7;\n  }\n  out[offset] = num | 0;\n  \n  encode.bytes = offset - oldOffset + 1;\n  \n  return out\n}\n\nvar decode = read;\n\nvar MSB$1 = 0x80\n  , REST$1 = 0x7F;\n\nfunction read(buf, offset) {\n  var res    = 0\n    , offset = offset || 0\n    , shift  = 0\n    , counter = offset\n    , b\n    , l = buf.length;\n\n  do {\n    if (counter >= l) {\n      read.bytes = 0;\n      throw new RangeError('Could not decode varint')\n    }\n    b = buf[counter++];\n    res += shift < 28\n      ? (b & REST$1) << shift\n      : (b & REST$1) * Math.pow(2, shift);\n    shift += 7;\n  } while (b >= MSB$1)\n\n  read.bytes = counter - offset;\n\n  return res\n}\n\nvar N1 = Math.pow(2,  7);\nvar N2 = Math.pow(2, 14);\nvar N3 = Math.pow(2, 21);\nvar N4 = Math.pow(2, 28);\nvar N5 = Math.pow(2, 35);\nvar N6 = Math.pow(2, 42);\nvar N7 = Math.pow(2, 49);\nvar N8 = Math.pow(2, 56);\nvar N9 = Math.pow(2, 63);\n\nvar length = function (value) {\n  return (\n    value < N1 ? 1\n  : value < N2 ? 2\n  : value < N3 ? 3\n  : value < N4 ? 4\n  : value < N5 ? 5\n  : value < N6 ? 6\n  : value < N7 ? 7\n  : value < N8 ? 8\n  : value < N9 ? 9\n  :              10\n  )\n};\n\nvar varint = {\n    encode: encode_1\n  , decode: decode\n  , encodingLength: length\n};\n\nvar _brrp_varint = varint;\n\nexport default _brrp_varint;\n","import varint from '../vendor/varint.js'\n\n/**\n * @param {Uint8Array} data\n * @param {number} [offset=0]\n * @returns {[number, number]}\n */\nexport const decode = (data, offset = 0) => {\n  const code = varint.decode(data, offset)\n  return [code, varint.decode.bytes]\n}\n\n/**\n * @param {number} int\n * @param {Uint8Array} target\n * @param {number} [offset=0]\n */\nexport const encodeTo = (int, target, offset = 0) => {\n  varint.encode(int, target, offset)\n  return target\n}\n\n/**\n * @param {number} int\n * @returns {number}\n */\nexport const encodingLength = (int) => {\n  return varint.encodingLength(int)\n}\n","import { bases } from 'multiformats/basics';\nimport { allocUnsafe } from '../alloc.js';\nfunction createCodec(name, prefix, encode, decode) {\n    return {\n        name,\n        prefix,\n        encoder: {\n            name,\n            prefix,\n            encode\n        },\n        decoder: {\n            decode\n        }\n    };\n}\nconst string = createCodec('utf8', 'u', (buf) => {\n    const decoder = new TextDecoder('utf8');\n    return 'u' + decoder.decode(buf);\n}, (str) => {\n    const encoder = new TextEncoder();\n    return encoder.encode(str.substring(1));\n});\nconst ascii = createCodec('ascii', 'a', (buf) => {\n    let string = 'a';\n    for (let i = 0; i < buf.length; i++) {\n        string += String.fromCharCode(buf[i]);\n    }\n    return string;\n}, (str) => {\n    str = str.substring(1);\n    const buf = allocUnsafe(str.length);\n    for (let i = 0; i < str.length; i++) {\n        buf[i] = str.charCodeAt(i);\n    }\n    return buf;\n});\nconst BASES = {\n    utf8: string,\n    'utf-8': string,\n    hex: bases.base16,\n    latin1: ascii,\n    ascii,\n    binary: ascii,\n    ...bases\n};\nexport default BASES;\n//# sourceMappingURL=bases.js.map","import debug from 'debug';\nimport { base32 } from 'multiformats/bases/base32';\nimport { base58btc } from 'multiformats/bases/base58';\nimport { base64 } from 'multiformats/bases/base64';\n// Add a formatter for converting to a base58 string\ndebug.formatters.b = (v) => {\n    return v == null ? 'undefined' : base58btc.baseEncode(v);\n};\n// Add a formatter for converting to a base32 string\ndebug.formatters.t = (v) => {\n    return v == null ? 'undefined' : base32.baseEncode(v);\n};\n// Add a formatter for converting to a base64 string\ndebug.formatters.m = (v) => {\n    return v == null ? 'undefined' : base64.baseEncode(v);\n};\n// Add a formatter for stringifying peer ids\ndebug.formatters.p = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying CIDs\ndebug.formatters.c = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying Datastore keys\ndebug.formatters.k = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying Multiaddrs\ndebug.formatters.a = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\nfunction createDisabledLogger(namespace) {\n    const logger = () => { };\n    logger.enabled = false;\n    logger.color = '';\n    logger.diff = 0;\n    logger.log = () => { };\n    logger.namespace = namespace;\n    logger.destroy = () => true;\n    logger.extend = () => logger;\n    return logger;\n}\nexport function logger(name) {\n    // trace logging is a no-op by default\n    let trace = createDisabledLogger(`${name}:trace`);\n    // look at all the debug names and see if trace logging has explicitly been enabled\n    if (debug.enabled(`${name}:trace`) && debug.names.map(r => r.toString()).find(n => n.includes(':trace')) != null) {\n        trace = debug(`${name}:trace`);\n    }\n    return Object.assign(debug(name), {\n        error: debug(`${name}:error`),\n        trace\n    });\n}\nexport function disable() {\n    debug.disable();\n}\nexport function enable(namespaces) {\n    debug.enable(namespaces);\n}\nexport function enabled(namespaces) {\n    return debug.enabled(namespaces);\n}\n//# sourceMappingURL=index.js.map","export class AbortError extends Error {\n    constructor(message, code) {\n        super(message ?? 'The operation was aborted');\n        this.type = 'aborted';\n        this.code = code ?? 'ABORT_ERR';\n    }\n}\n//# sourceMappingURL=abort-error.js.map","/**\n * @packageDocumentation\n *\n * @example\n *\n * ```js\n * import { abortableSource } from 'abortable-iterator'\n *\n * async function main () {\n *   // An example function that creates an async iterator that yields an increasing\n *   // number every x milliseconds and NEVER ENDS!\n *   const asyncCounter = async function * (start, delay) {\n *     let i = start\n *     while (true) {\n *       yield new Promise(resolve => setTimeout(() => resolve(i++), delay))\n *     }\n *   }\n *\n *   // Create a counter that'll yield numbers from 0 upwards every second\n *   const everySecond = asyncCounter(0, 1000)\n *\n *   // Make everySecond abortable!\n *   const controller = new AbortController()\n *   const abortableEverySecond = abortableSource(everySecond, controller.signal)\n *\n *   // Abort after 5 seconds\n *   setTimeout(() => controller.abort(), 5000)\n *\n *   try {\n *     // Start the iteration, which will throw after 5 seconds when it is aborted\n *     for await (const n of abortableEverySecond) {\n *       console.log(n)\n *     }\n *   } catch (err) {\n *     if (err.code === 'ERR_ABORTED') {\n *       // Expected - all ok :D\n *     } else {\n *       throw err\n *     }\n *   }\n * }\n *\n * main()\n * ```\n */\nimport { AbortError } from './abort-error.js';\nimport { getIterator } from 'get-iterator';\n/**\n * Wrap an iterator to make it abortable, allow cleanup when aborted via onAbort\n */\nexport function abortableSource(source, signal, options) {\n    const opts = options ?? {};\n    const iterator = getIterator(source);\n    async function* abortable() {\n        let nextAbortHandler;\n        const abortHandler = () => {\n            if (nextAbortHandler != null)\n                nextAbortHandler();\n        };\n        signal.addEventListener('abort', abortHandler);\n        while (true) {\n            let result;\n            try {\n                if (signal.aborted) {\n                    const { abortMessage, abortCode } = opts;\n                    throw new AbortError(abortMessage, abortCode);\n                }\n                const abort = new Promise((resolve, reject) => {\n                    nextAbortHandler = () => {\n                        const { abortMessage, abortCode } = opts;\n                        reject(new AbortError(abortMessage, abortCode));\n                    };\n                });\n                // Race the iterator and the abort signals\n                result = await Promise.race([abort, iterator.next()]);\n                nextAbortHandler = null;\n            }\n            catch (err) {\n                signal.removeEventListener('abort', abortHandler);\n                // Might not have been aborted by a known signal\n                const isKnownAborter = err.type === 'aborted' && signal.aborted;\n                if (isKnownAborter && (opts.onAbort != null)) {\n                    // Do any custom abort handling for the iterator\n                    opts.onAbort(source);\n                }\n                // End the iterator if it is a generator\n                if (typeof iterator.return === 'function') {\n                    try {\n                        const p = iterator.return();\n                        if (p instanceof Promise) { // eslint-disable-line max-depth\n                            p.catch(err => {\n                                if (opts.onReturnError != null) {\n                                    opts.onReturnError(err);\n                                }\n                            });\n                        }\n                    }\n                    catch (err) {\n                        if (opts.onReturnError != null) { // eslint-disable-line max-depth\n                            opts.onReturnError(err);\n                        }\n                    }\n                }\n                if (isKnownAborter && opts.returnOnAbort === true) {\n                    return;\n                }\n                throw err;\n            }\n            if (result.done === true) {\n                break;\n            }\n            yield result.value;\n        }\n        signal.removeEventListener('abort', abortHandler);\n    }\n    return abortable();\n}\nexport function abortableSink(sink, signal, options) {\n    return (source) => sink(abortableSource(source, signal, options));\n}\nexport function abortableDuplex(duplex, signal, options) {\n    return {\n        sink: abortableSink(duplex.sink, signal, {\n            ...options,\n            onAbort: undefined\n        }),\n        source: abortableSource(duplex.source, signal, options)\n    };\n}\nexport { AbortError };\nexport { abortableSink as abortableTransform };\n//# sourceMappingURL=index.js.map","/**\n * @packageDocumentation\n *\n * An iterable that you can push values into.\n *\n * @example\n *\n * ```js\n * import { pushable } from 'it-pushable'\n *\n * const source = pushable()\n *\n * setTimeout(() => source.push('hello'), 100)\n * setTimeout(() => source.push('world'), 200)\n * setTimeout(() => source.end(), 300)\n *\n * const start = Date.now()\n *\n * for await (const value of source) {\n *   console.log(`got \"${value}\" after ${Date.now() - start}ms`)\n * }\n * console.log(`done after ${Date.now() - start}ms`)\n *\n * // Output:\n * // got \"hello\" after 105ms\n * // got \"world\" after 207ms\n * // done after 309ms\n * ```\n *\n * @example\n *\n * ```js\n * import { pushableV } from 'it-pushable'\n * import all from 'it-all'\n *\n * const source = pushableV()\n *\n * source.push(1)\n * source.push(2)\n * source.push(3)\n * source.end()\n *\n * console.info(await all(source))\n *\n * // Output:\n * // [ [1, 2, 3] ]\n * ```\n */\nimport deferred from 'p-defer';\nimport { FIFO } from './fifo.js';\nexport class AbortError extends Error {\n    type;\n    code;\n    constructor(message, code) {\n        super(message ?? 'The operation was aborted');\n        this.type = 'aborted';\n        this.code = code ?? 'ABORT_ERR';\n    }\n}\nexport function pushable(options = {}) {\n    const getNext = (buffer) => {\n        const next = buffer.shift();\n        if (next == null) {\n            return { done: true };\n        }\n        if (next.error != null) {\n            throw next.error;\n        }\n        return {\n            done: next.done === true,\n            // @ts-expect-error if done is false, value will be present\n            value: next.value\n        };\n    };\n    return _pushable(getNext, options);\n}\nexport function pushableV(options = {}) {\n    const getNext = (buffer) => {\n        let next;\n        const values = [];\n        while (!buffer.isEmpty()) {\n            next = buffer.shift();\n            if (next == null) {\n                break;\n            }\n            if (next.error != null) {\n                throw next.error;\n            }\n            if (next.done === false) {\n                // @ts-expect-error if done is false value should be pushed\n                values.push(next.value);\n            }\n        }\n        if (next == null) {\n            return { done: true };\n        }\n        return {\n            done: next.done === true,\n            value: values\n        };\n    };\n    return _pushable(getNext, options);\n}\nfunction _pushable(getNext, options) {\n    options = options ?? {};\n    let onEnd = options.onEnd;\n    let buffer = new FIFO();\n    let pushable;\n    let onNext;\n    let ended;\n    let drain = deferred();\n    const waitNext = async () => {\n        try {\n            if (!buffer.isEmpty()) {\n                return getNext(buffer);\n            }\n            if (ended) {\n                return { done: true };\n            }\n            return await new Promise((resolve, reject) => {\n                onNext = (next) => {\n                    onNext = null;\n                    buffer.push(next);\n                    try {\n                        resolve(getNext(buffer));\n                    }\n                    catch (err) {\n                        reject(err);\n                    }\n                    return pushable;\n                };\n            });\n        }\n        finally {\n            if (buffer.isEmpty()) {\n                // settle promise in the microtask queue to give consumers a chance to\n                // await after calling .push\n                queueMicrotask(() => {\n                    drain.resolve();\n                    drain = deferred();\n                });\n            }\n        }\n    };\n    const bufferNext = (next) => {\n        if (onNext != null) {\n            return onNext(next);\n        }\n        buffer.push(next);\n        return pushable;\n    };\n    const bufferError = (err) => {\n        buffer = new FIFO();\n        if (onNext != null) {\n            return onNext({ error: err });\n        }\n        buffer.push({ error: err });\n        return pushable;\n    };\n    const push = (value) => {\n        if (ended) {\n            return pushable;\n        }\n        // @ts-expect-error `byteLength` is not declared on PushType\n        if (options?.objectMode !== true && value?.byteLength == null) {\n            throw new Error('objectMode was not true but tried to push non-Uint8Array value');\n        }\n        return bufferNext({ done: false, value });\n    };\n    const end = (err) => {\n        if (ended)\n            return pushable;\n        ended = true;\n        return (err != null) ? bufferError(err) : bufferNext({ done: true });\n    };\n    const _return = () => {\n        buffer = new FIFO();\n        end();\n        return { done: true };\n    };\n    const _throw = (err) => {\n        end(err);\n        return { done: true };\n    };\n    pushable = {\n        [Symbol.asyncIterator]() { return this; },\n        next: waitNext,\n        return: _return,\n        throw: _throw,\n        push,\n        end,\n        get readableLength() {\n            return buffer.size;\n        },\n        onEmpty: async (options) => {\n            const signal = options?.signal;\n            signal?.throwIfAborted();\n            if (buffer.isEmpty()) {\n                return;\n            }\n            let cancel;\n            let listener;\n            if (signal != null) {\n                cancel = new Promise((resolve, reject) => {\n                    listener = () => {\n                        reject(new AbortError());\n                    };\n                    signal.addEventListener('abort', listener);\n                });\n            }\n            try {\n                await Promise.race([\n                    drain.promise,\n                    cancel\n                ]);\n            }\n            finally {\n                if (listener != null && signal != null) {\n                    signal?.removeEventListener('abort', listener);\n                }\n            }\n        }\n    };\n    if (onEnd == null) {\n        return pushable;\n    }\n    const _pushable = pushable;\n    pushable = {\n        [Symbol.asyncIterator]() { return this; },\n        next() {\n            return _pushable.next();\n        },\n        throw(err) {\n            _pushable.throw(err);\n            if (onEnd != null) {\n                onEnd(err);\n                onEnd = undefined;\n            }\n            return { done: true };\n        },\n        return() {\n            _pushable.return();\n            if (onEnd != null) {\n                onEnd();\n                onEnd = undefined;\n            }\n            return { done: true };\n        },\n        push,\n        end(err) {\n            _pushable.end(err);\n            if (onEnd != null) {\n                onEnd(err);\n                onEnd = undefined;\n            }\n            return pushable;\n        },\n        get readableLength() {\n            return _pushable.readableLength;\n        }\n    };\n    return pushable;\n}\n//# sourceMappingURL=index.js.map","// Protocol violation errors\nexport const ERR_INVALID_FRAME = 'ERR_INVALID_FRAME';\nexport const ERR_UNREQUESTED_PING = 'ERR_UNREQUESTED_PING';\nexport const ERR_NOT_MATCHING_PING = 'ERR_NOT_MATCHING_PING';\nexport const ERR_STREAM_ALREADY_EXISTS = 'ERR_STREAM_ALREADY_EXISTS';\nexport const ERR_DECODE_INVALID_VERSION = 'ERR_DECODE_INVALID_VERSION';\nexport const ERR_BOTH_CLIENTS = 'ERR_BOTH_CLIENTS';\nexport const ERR_RECV_WINDOW_EXCEEDED = 'ERR_RECV_WINDOW_EXCEEDED';\nexport const PROTOCOL_ERRORS = new Set([\n    ERR_INVALID_FRAME,\n    ERR_UNREQUESTED_PING,\n    ERR_NOT_MATCHING_PING,\n    ERR_STREAM_ALREADY_EXISTS,\n    ERR_DECODE_INVALID_VERSION,\n    ERR_BOTH_CLIENTS,\n    ERR_RECV_WINDOW_EXCEEDED\n]);\n// local errors\nexport const ERR_INVALID_CONFIG = 'ERR_INVALID_CONFIG';\nexport const ERR_MUXER_LOCAL_CLOSED = 'ERR_MUXER_LOCAL_CLOSED';\nexport const ERR_MUXER_REMOTE_CLOSED = 'ERR_MUXER_REMOTE_CLOSED';\nexport const ERR_STREAM_RESET = 'ERR_STREAM_RESET';\nexport const ERR_STREAM_ABORT = 'ERR_STREAM_ABORT';\nexport const ERR_MAX_OUTBOUND_STREAMS_EXCEEDED = 'ERROR_MAX_OUTBOUND_STREAMS_EXCEEDED';\nexport const ERR_DECODE_IN_PROGRESS = 'ERR_DECODE_IN_PROGRESS';\n/**\n * INITIAL_STREAM_WINDOW is the initial stream window size.\n *\n * Not an implementation choice, this is defined in the specification\n */\nexport const INITIAL_STREAM_WINDOW = 256 * 1024;\n/**\n * Default max stream window\n */\nexport const MAX_STREAM_WINDOW = 16 * 1024 * 1024;\n//# sourceMappingURL=constants.js.map","import { CodeError } from '@libp2p/interface/errors';\nimport { logger } from '@libp2p/logger';\nimport { ERR_INVALID_CONFIG, INITIAL_STREAM_WINDOW, MAX_STREAM_WINDOW } from './constants.js';\nexport const defaultConfig = {\n    log: logger('libp2p:yamux'),\n    enableKeepAlive: true,\n    keepAliveInterval: 30000,\n    maxInboundStreams: 1000,\n    maxOutboundStreams: 1000,\n    initialStreamWindowSize: INITIAL_STREAM_WINDOW,\n    maxStreamWindowSize: MAX_STREAM_WINDOW,\n    maxMessageSize: 64 * 1024\n};\nexport function verifyConfig(config) {\n    if (config.keepAliveInterval <= 0) {\n        throw new CodeError('keep-alive interval must be positive', ERR_INVALID_CONFIG);\n    }\n    if (config.maxInboundStreams < 0) {\n        throw new CodeError('max inbound streams must be larger or equal 0', ERR_INVALID_CONFIG);\n    }\n    if (config.maxOutboundStreams < 0) {\n        throw new CodeError('max outbound streams must be larger or equal 0', ERR_INVALID_CONFIG);\n    }\n    if (config.initialStreamWindowSize < INITIAL_STREAM_WINDOW) {\n        throw new CodeError('InitialStreamWindowSize must be larger or equal 256 kB', ERR_INVALID_CONFIG);\n    }\n    if (config.maxStreamWindowSize < config.initialStreamWindowSize) {\n        throw new CodeError('MaxStreamWindowSize must be larger than the InitialStreamWindowSize', ERR_INVALID_CONFIG);\n    }\n    if (config.maxStreamWindowSize > 2 ** 32 - 1) {\n        throw new CodeError('MaxStreamWindowSize must be less than equal MAX_UINT32', ERR_INVALID_CONFIG);\n    }\n    if (config.maxMessageSize < 1024) {\n        throw new CodeError('MaxMessageSize must be greater than a kilobyte', ERR_INVALID_CONFIG);\n    }\n}\n//# sourceMappingURL=config.js.map","export var FrameType;\n(function (FrameType) {\n    /** Used to transmit data. May transmit zero length payloads depending on the flags. */\n    FrameType[FrameType[\"Data\"] = 0] = \"Data\";\n    /** Used to updated the senders receive window size. This is used to implement per-session flow control. */\n    FrameType[FrameType[\"WindowUpdate\"] = 1] = \"WindowUpdate\";\n    /** Used to measure RTT. It can also be used to heart-beat and do keep-alives over TCP. */\n    FrameType[FrameType[\"Ping\"] = 2] = \"Ping\";\n    /** Used to close a session. */\n    FrameType[FrameType[\"GoAway\"] = 3] = \"GoAway\";\n})(FrameType || (FrameType = {}));\nexport var Flag;\n(function (Flag) {\n    /** Signals the start of a new stream. May be sent with a data or window update message. Also sent with a ping to indicate outbound. */\n    Flag[Flag[\"SYN\"] = 1] = \"SYN\";\n    /** Acknowledges the start of a new stream. May be sent with a data or window update message. Also sent with a ping to indicate response. */\n    Flag[Flag[\"ACK\"] = 2] = \"ACK\";\n    /** Performs a half-close of a stream. May be sent with a data message or window update. */\n    Flag[Flag[\"FIN\"] = 4] = \"FIN\";\n    /** Reset a stream immediately. May be sent with a data or window update message. */\n    Flag[Flag[\"RST\"] = 8] = \"RST\";\n})(Flag || (Flag = {}));\nconst flagCodes = Object.values(Flag).filter((x) => typeof x !== 'string');\nexport const YAMUX_VERSION = 0;\nexport var GoAwayCode;\n(function (GoAwayCode) {\n    GoAwayCode[GoAwayCode[\"NormalTermination\"] = 0] = \"NormalTermination\";\n    GoAwayCode[GoAwayCode[\"ProtocolError\"] = 1] = \"ProtocolError\";\n    GoAwayCode[GoAwayCode[\"InternalError\"] = 2] = \"InternalError\";\n})(GoAwayCode || (GoAwayCode = {}));\nexport const HEADER_LENGTH = 12;\nexport function stringifyHeader(header) {\n    const flags = flagCodes.filter(f => (header.flag & f) === f).map(f => Flag[f]).join('|');\n    return `streamID=${header.streamID} type=${FrameType[header.type]} flag=${flags} length=${header.length}`;\n}\n//# sourceMappingURL=frame.js.map","import { CodeError } from '@libp2p/interface/errors';\nimport { Uint8ArrayList } from 'uint8arraylist';\nimport { ERR_DECODE_INVALID_VERSION, ERR_DECODE_IN_PROGRESS } from './constants.js';\nimport { FrameType, HEADER_LENGTH, YAMUX_VERSION } from './frame.js';\n// used to bitshift in decoding\n// native bitshift can overflow into a negative number, so we bitshift by multiplying by a power of 2\nconst twoPow24 = 2 ** 24;\n/**\n * Decode a header from the front of a buffer\n *\n * @param data - Assumed to have enough bytes for a header\n */\nexport function decodeHeader(data) {\n    if (data[0] !== YAMUX_VERSION) {\n        throw new CodeError('Invalid frame version', ERR_DECODE_INVALID_VERSION);\n    }\n    return {\n        type: data[1],\n        flag: (data[2] << 8) + data[3],\n        streamID: (data[4] * twoPow24) + (data[5] << 16) + (data[6] << 8) + data[7],\n        length: (data[8] * twoPow24) + (data[9] << 16) + (data[10] << 8) + data[11]\n    };\n}\n/**\n * Decodes yamux frames from a source\n */\nexport class Decoder {\n    source;\n    /** Buffer for in-progress frames */\n    buffer;\n    /** Used to sanity check against decoding while in an inconsistent state */\n    frameInProgress;\n    constructor(source) {\n        // Normally, when entering a for-await loop with an iterable/async iterable, the only ways to exit the loop are:\n        // 1. exhaust the iterable\n        // 2. throw an error - slow, undesirable if there's not actually an error\n        // 3. break or return - calls the iterable's `return` method, finalizing the iterable, no more iteration possible\n        //\n        // In this case, we want to enter (and exit) a for-await loop per chunked data frame and continue processing the iterable.\n        // To do this, we strip the `return` method from the iterator and can now `break` early and continue iterating.\n        // Exiting the main for-await is still possible via 1. and 2.\n        this.source = returnlessSource(source);\n        this.buffer = new Uint8ArrayList();\n        this.frameInProgress = false;\n    }\n    /**\n     * Emits frames from the decoder source.\n     *\n     * Note: If `readData` is emitted, it _must_ be called before the next iteration\n     * Otherwise an error is thrown\n     */\n    async *emitFrames() {\n        for await (const chunk of this.source) {\n            this.buffer.append(chunk);\n            // Loop to consume as many bytes from the buffer as possible\n            // Eg: when a single chunk contains several frames\n            while (true) {\n                const header = this.readHeader();\n                if (header === undefined) {\n                    break;\n                }\n                const { type, length } = header;\n                if (type === FrameType.Data) {\n                    // This is a data frame, the frame body must still be read\n                    // `readData` must be called before the next iteration here\n                    this.frameInProgress = true;\n                    yield {\n                        header,\n                        readData: this.readBytes.bind(this, length)\n                    };\n                }\n                else {\n                    yield { header };\n                }\n            }\n        }\n    }\n    readHeader() {\n        // Sanity check to ensure a header isn't read when another frame is partially decoded\n        // In practice this shouldn't happen\n        if (this.frameInProgress) {\n            throw new CodeError('decoding frame already in progress', ERR_DECODE_IN_PROGRESS);\n        }\n        if (this.buffer.length < HEADER_LENGTH) {\n            // not enough data yet\n            return;\n        }\n        const header = decodeHeader(this.buffer.subarray(0, HEADER_LENGTH));\n        this.buffer.consume(HEADER_LENGTH);\n        return header;\n    }\n    async readBytes(length) {\n        if (this.buffer.length < length) {\n            for await (const chunk of this.source) {\n                this.buffer.append(chunk);\n                if (this.buffer.length >= length) {\n                    // see note above, the iterator is not `return`ed here\n                    break;\n                }\n            }\n        }\n        const out = this.buffer.sublist(0, length);\n        this.buffer.consume(length);\n        // The next frame can now be decoded\n        this.frameInProgress = false;\n        return out;\n    }\n}\n/**\n * Strip the `return` method from a `Source`\n */\nexport function returnlessSource(source) {\n    if (source[Symbol.iterator] !== undefined) {\n        const iterator = source[Symbol.iterator]();\n        iterator.return = undefined;\n        return {\n            [Symbol.iterator]() { return iterator; }\n        };\n    }\n    else if (source[Symbol.asyncIterator] !== undefined) {\n        const iterator = source[Symbol.asyncIterator]();\n        iterator.return = undefined;\n        return {\n            [Symbol.asyncIterator]() { return iterator; }\n        };\n    }\n    else {\n        throw new Error('a source must be either an iterable or an async iterable');\n    }\n}\n//# sourceMappingURL=decode.js.map","import { HEADER_LENGTH } from './frame.js';\nexport function encodeHeader(header) {\n    const frame = new Uint8Array(HEADER_LENGTH);\n    // always assume version 0\n    // frameView.setUint8(0, header.version)\n    frame[1] = header.type;\n    frame[2] = header.flag >>> 8;\n    frame[3] = header.flag;\n    frame[4] = header.streamID >>> 24;\n    frame[5] = header.streamID >>> 16;\n    frame[6] = header.streamID >>> 8;\n    frame[7] = header.streamID;\n    frame[8] = header.length >>> 24;\n    frame[9] = header.length >>> 16;\n    frame[10] = header.length >>> 8;\n    frame[11] = header.length;\n    return frame;\n}\n//# sourceMappingURL=encode.js.map","import { CodeError } from '@libp2p/interface/errors';\nimport { AbstractStream } from '@libp2p/interface/stream-muxer/stream';\nimport each from 'it-foreach';\nimport { ERR_RECV_WINDOW_EXCEEDED, ERR_STREAM_ABORT, INITIAL_STREAM_WINDOW } from './constants.js';\nimport { Flag, FrameType, HEADER_LENGTH } from './frame.js';\nexport var StreamState;\n(function (StreamState) {\n    StreamState[StreamState[\"Init\"] = 0] = \"Init\";\n    StreamState[StreamState[\"SYNSent\"] = 1] = \"SYNSent\";\n    StreamState[StreamState[\"SYNReceived\"] = 2] = \"SYNReceived\";\n    StreamState[StreamState[\"Established\"] = 3] = \"Established\";\n    StreamState[StreamState[\"Finished\"] = 4] = \"Finished\";\n})(StreamState || (StreamState = {}));\n/** YamuxStream is used to represent a logical stream within a session */\nexport class YamuxStream extends AbstractStream {\n    name;\n    state;\n    config;\n    _id;\n    /** The number of available bytes to send */\n    sendWindowCapacity;\n    /** Callback to notify that the sendWindowCapacity has been updated */\n    sendWindowCapacityUpdate;\n    /** The number of bytes available to receive in a full window */\n    recvWindow;\n    /** The number of available bytes to receive */\n    recvWindowCapacity;\n    /**\n     * An 'epoch' is the time it takes to process and read data\n     *\n     * Used in conjunction with RTT to determine whether to increase the recvWindow\n     */\n    epochStart;\n    getRTT;\n    sendFrame;\n    constructor(init) {\n        super({\n            ...init,\n            onEnd: (err) => {\n                this.state = StreamState.Finished;\n                init.onEnd?.(err);\n            }\n        });\n        this.config = init.config;\n        this._id = parseInt(init.id, 10);\n        this.name = init.name;\n        this.state = init.state;\n        this.sendWindowCapacity = INITIAL_STREAM_WINDOW;\n        this.recvWindow = this.config.initialStreamWindowSize;\n        this.recvWindowCapacity = this.recvWindow;\n        this.epochStart = Date.now();\n        this.getRTT = init.getRTT;\n        this.sendFrame = init.sendFrame;\n        this.source = each(this.source, () => {\n            this.sendWindowUpdate();\n        });\n    }\n    /**\n     * Send a message to the remote muxer informing them a new stream is being\n     * opened.\n     *\n     * This is a noop for Yamux because the first window update is sent when\n     * .newStream is called on the muxer which opens the stream on the remote.\n     */\n    async sendNewStream() {\n    }\n    /**\n     * Send a data message to the remote muxer\n     */\n    async sendData(buf, options = {}) {\n        buf = buf.sublist();\n        // send in chunks, waiting for window updates\n        while (buf.byteLength !== 0) {\n            // wait for the send window to refill\n            if (this.sendWindowCapacity === 0) {\n                await this.waitForSendWindowCapacity(options);\n            }\n            // check we didn't close while waiting for send window capacity\n            if (this.status !== 'open') {\n                return;\n            }\n            // send as much as we can\n            const toSend = Math.min(this.sendWindowCapacity, this.config.maxMessageSize - HEADER_LENGTH, buf.length);\n            const flags = this.getSendFlags();\n            this.sendFrame({\n                type: FrameType.Data,\n                flag: flags,\n                streamID: this._id,\n                length: toSend\n            }, buf.subarray(0, toSend));\n            this.sendWindowCapacity -= toSend;\n            buf.consume(toSend);\n        }\n    }\n    /**\n     * Send a reset message to the remote muxer\n     */\n    async sendReset() {\n        this.sendFrame({\n            type: FrameType.WindowUpdate,\n            flag: Flag.RST,\n            streamID: this._id,\n            length: 0\n        });\n    }\n    /**\n     * Send a message to the remote muxer, informing them no more data messages\n     * will be sent by this end of the stream\n     */\n    async sendCloseWrite() {\n        const flags = this.getSendFlags() | Flag.FIN;\n        this.sendFrame({\n            type: FrameType.WindowUpdate,\n            flag: flags,\n            streamID: this._id,\n            length: 0\n        });\n    }\n    /**\n     * Send a message to the remote muxer, informing them no more data messages\n     * will be read by this end of the stream\n     */\n    async sendCloseRead() {\n    }\n    /**\n     * Wait for the send window to be non-zero\n     *\n     * Will throw with ERR_STREAM_ABORT if the stream gets aborted\n     */\n    async waitForSendWindowCapacity(options = {}) {\n        if (this.sendWindowCapacity > 0) {\n            return;\n        }\n        let resolve;\n        let reject;\n        const abort = () => {\n            if (this.status === 'open') {\n                reject(new CodeError('stream aborted', ERR_STREAM_ABORT));\n            }\n            else {\n                // the stream was closed already, ignore the failure to send\n                resolve();\n            }\n        };\n        options.signal?.addEventListener('abort', abort);\n        try {\n            await new Promise((_resolve, _reject) => {\n                this.sendWindowCapacityUpdate = () => {\n                    _resolve();\n                };\n                reject = _reject;\n                resolve = _resolve;\n            });\n        }\n        finally {\n            options.signal?.removeEventListener('abort', abort);\n        }\n    }\n    /**\n     * handleWindowUpdate is called when the stream receives a window update frame\n     */\n    handleWindowUpdate(header) {\n        this.log?.trace('stream received window update id=%s', this._id);\n        this.processFlags(header.flag);\n        // increase send window\n        const available = this.sendWindowCapacity;\n        this.sendWindowCapacity += header.length;\n        // if the update increments a 0 availability, notify the stream that sending can resume\n        if (available === 0 && header.length > 0) {\n            this.sendWindowCapacityUpdate?.();\n        }\n    }\n    /**\n     * handleData is called when the stream receives a data frame\n     */\n    async handleData(header, readData) {\n        this.log?.trace('stream received data id=%s', this._id);\n        this.processFlags(header.flag);\n        // check that our recv window is not exceeded\n        if (this.recvWindowCapacity < header.length) {\n            throw new CodeError('receive window exceeded', ERR_RECV_WINDOW_EXCEEDED, { available: this.recvWindowCapacity, recv: header.length });\n        }\n        const data = await readData();\n        this.recvWindowCapacity -= header.length;\n        this.sourcePush(data);\n    }\n    /**\n     * processFlags is used to update the state of the stream based on set flags, if any.\n     */\n    processFlags(flags) {\n        if ((flags & Flag.ACK) === Flag.ACK) {\n            if (this.state === StreamState.SYNSent) {\n                this.state = StreamState.Established;\n            }\n        }\n        if ((flags & Flag.FIN) === Flag.FIN) {\n            this.remoteCloseWrite();\n        }\n        if ((flags & Flag.RST) === Flag.RST) {\n            this.reset();\n        }\n    }\n    /**\n     * getSendFlags determines any flags that are appropriate\n     * based on the current stream state.\n     *\n     * The state is updated as a side-effect.\n     */\n    getSendFlags() {\n        switch (this.state) {\n            case StreamState.Init:\n                this.state = StreamState.SYNSent;\n                return Flag.SYN;\n            case StreamState.SYNReceived:\n                this.state = StreamState.Established;\n                return Flag.ACK;\n            default:\n                return 0;\n        }\n    }\n    /**\n     * potentially sends a window update enabling further writes to take place.\n     */\n    sendWindowUpdate() {\n        // determine the flags if any\n        const flags = this.getSendFlags();\n        // If the stream has already been established\n        // and we've processed data within the time it takes for 4 round trips\n        // then we (up to) double the recvWindow\n        const now = Date.now();\n        const rtt = this.getRTT();\n        if (flags === 0 && rtt > 0 && now - this.epochStart < rtt * 4) {\n            // we've already validated that maxStreamWindowSize can't be more than MAX_UINT32\n            this.recvWindow = Math.min(this.recvWindow * 2, this.config.maxStreamWindowSize);\n        }\n        if (this.recvWindowCapacity >= this.recvWindow && flags === 0) {\n            // a window update isn't needed\n            return;\n        }\n        // update the receive window\n        const delta = this.recvWindow - this.recvWindowCapacity;\n        this.recvWindowCapacity = this.recvWindow;\n        // update the epoch start\n        this.epochStart = now;\n        // send window update\n        this.sendFrame({\n            type: FrameType.WindowUpdate,\n            flag: flags,\n            streamID: this._id,\n            length: delta\n        });\n    }\n}\n//# sourceMappingURL=stream.js.map","import { CodeError } from '@libp2p/interface/errors';\nimport { logger } from '@libp2p/logger';\nimport { abortableSource } from 'abortable-iterator';\nimport { pipe } from 'it-pipe';\nimport { pushable } from 'it-pushable';\nimport { defaultConfig, verifyConfig } from './config.js';\nimport { ERR_BOTH_CLIENTS, ERR_INVALID_FRAME, ERR_MAX_OUTBOUND_STREAMS_EXCEEDED, ERR_MUXER_LOCAL_CLOSED, ERR_MUXER_REMOTE_CLOSED, ERR_NOT_MATCHING_PING, ERR_STREAM_ALREADY_EXISTS, ERR_UNREQUESTED_PING, PROTOCOL_ERRORS } from './constants.js';\nimport { Decoder } from './decode.js';\nimport { encodeHeader } from './encode.js';\nimport { Flag, FrameType, GoAwayCode, stringifyHeader } from './frame.js';\nimport { StreamState, YamuxStream } from './stream.js';\nconst YAMUX_PROTOCOL_ID = '/yamux/1.0.0';\nconst CLOSE_TIMEOUT = 500;\nexport class Yamux {\n    protocol = YAMUX_PROTOCOL_ID;\n    _init;\n    constructor(init = {}) {\n        this._init = init;\n    }\n    createStreamMuxer(init) {\n        return new YamuxMuxer({\n            ...this._init,\n            ...init\n        });\n    }\n}\nexport class YamuxMuxer {\n    protocol = YAMUX_PROTOCOL_ID;\n    source;\n    sink;\n    config;\n    log;\n    /** Used to close the muxer from either the sink or source */\n    closeController;\n    /** The next stream id to be used when initiating a new stream */\n    nextStreamID;\n    /** Primary stream mapping, streamID => stream */\n    _streams;\n    /** The next ping id to be used when pinging */\n    nextPingID;\n    /** Tracking info for the currently active ping */\n    activePing;\n    /** Round trip time */\n    rtt;\n    /** True if client, false if server */\n    client;\n    localGoAway;\n    remoteGoAway;\n    /** Number of tracked inbound streams */\n    numInboundStreams;\n    /** Number of tracked outbound streams */\n    numOutboundStreams;\n    onIncomingStream;\n    onStreamEnd;\n    constructor(init) {\n        this.client = init.direction === 'outbound';\n        this.config = { ...defaultConfig, ...init };\n        this.log = this.config.log;\n        verifyConfig(this.config);\n        this.closeController = new AbortController();\n        this.onIncomingStream = init.onIncomingStream;\n        this.onStreamEnd = init.onStreamEnd;\n        this._streams = new Map();\n        this.source = pushable({\n            onEnd: () => {\n                this.log?.trace('muxer source ended');\n                this._streams.forEach(stream => {\n                    stream.destroy();\n                });\n            }\n        });\n        this.sink = async (source) => {\n            source = abortableSource(source, this.closeController.signal, { returnOnAbort: true });\n            let reason, error;\n            try {\n                const decoder = new Decoder(source);\n                await pipe(decoder.emitFrames.bind(decoder), async (source) => {\n                    for await (const { header, readData } of source) {\n                        await this.handleFrame(header, readData);\n                    }\n                });\n                reason = GoAwayCode.NormalTermination;\n            }\n            catch (err) {\n                // either a protocol or internal error\n                const errCode = err.code;\n                if (PROTOCOL_ERRORS.has(errCode)) {\n                    this.log?.error('protocol error in sink', err);\n                    reason = GoAwayCode.ProtocolError;\n                }\n                else {\n                    this.log?.error('internal error in sink', err);\n                    reason = GoAwayCode.InternalError;\n                }\n                error = err;\n            }\n            this.log?.trace('muxer sink ended');\n            if (error != null) {\n                this.abort(error, reason);\n            }\n            else {\n                await this.close({ reason });\n            }\n        };\n        this.numInboundStreams = 0;\n        this.numOutboundStreams = 0;\n        // client uses odd streamIDs, server uses even streamIDs\n        this.nextStreamID = this.client ? 1 : 2;\n        this.nextPingID = 0;\n        this.rtt = 0;\n        this.log?.trace('muxer created');\n        if (this.config.enableKeepAlive) {\n            this.keepAliveLoop().catch(e => this.log?.error('keepalive error: %s', e));\n        }\n    }\n    get streams() {\n        return Array.from(this._streams.values());\n    }\n    newStream(name) {\n        if (this.remoteGoAway !== undefined) {\n            throw new CodeError('muxer closed remotely', ERR_MUXER_REMOTE_CLOSED);\n        }\n        if (this.localGoAway !== undefined) {\n            throw new CodeError('muxer closed locally', ERR_MUXER_LOCAL_CLOSED);\n        }\n        const id = this.nextStreamID;\n        this.nextStreamID += 2;\n        // check against our configured maximum number of outbound streams\n        if (this.numOutboundStreams >= this.config.maxOutboundStreams) {\n            throw new CodeError('max outbound streams exceeded', ERR_MAX_OUTBOUND_STREAMS_EXCEEDED);\n        }\n        this.log?.trace('new outgoing stream id=%s', id);\n        const stream = this._newStream(id, name, StreamState.Init, 'outbound');\n        this._streams.set(id, stream);\n        this.numOutboundStreams++;\n        // send a window update to open the stream on the receiver end\n        stream.sendWindowUpdate();\n        return stream;\n    }\n    /**\n     * Initiate a ping and wait for a response\n     *\n     * Note: only a single ping will be initiated at a time.\n     * If a ping is already in progress, a new ping will not be initiated.\n     *\n     * @returns the round-trip-time in milliseconds\n     */\n    async ping() {\n        if (this.remoteGoAway !== undefined) {\n            throw new CodeError('muxer closed remotely', ERR_MUXER_REMOTE_CLOSED);\n        }\n        if (this.localGoAway !== undefined) {\n            throw new CodeError('muxer closed locally', ERR_MUXER_LOCAL_CLOSED);\n        }\n        // An active ping does not yet exist, handle the process here\n        if (this.activePing === undefined) {\n            // create active ping\n            let _resolve = () => { };\n            this.activePing = {\n                id: this.nextPingID++,\n                // this promise awaits resolution or the close controller aborting\n                promise: new Promise((resolve, reject) => {\n                    const closed = () => {\n                        reject(new CodeError('muxer closed locally', ERR_MUXER_LOCAL_CLOSED));\n                    };\n                    this.closeController.signal.addEventListener('abort', closed, { once: true });\n                    _resolve = () => {\n                        this.closeController.signal.removeEventListener('abort', closed);\n                        resolve();\n                    };\n                }),\n                resolve: _resolve\n            };\n            // send ping\n            const start = Date.now();\n            this.sendPing(this.activePing.id);\n            // await pong\n            try {\n                await this.activePing.promise;\n            }\n            finally {\n                // clean-up active ping\n                delete this.activePing;\n            }\n            // update rtt\n            const end = Date.now();\n            this.rtt = end - start;\n        }\n        else {\n            // an active ping is already in progress, piggyback off that\n            await this.activePing.promise;\n        }\n        return this.rtt;\n    }\n    /**\n     * Get the ping round trip time\n     *\n     * Note: Will return 0 if no successful ping has yet been completed\n     *\n     * @returns the round-trip-time in milliseconds\n     */\n    getRTT() {\n        return this.rtt;\n    }\n    /**\n     * Close the muxer\n     */\n    async close(options = {}) {\n        if (this.closeController.signal.aborted) {\n            // already closed\n            return;\n        }\n        const reason = options?.reason ?? GoAwayCode.NormalTermination;\n        this.log?.trace('muxer close reason=%s', reason);\n        options.signal = options.signal ?? AbortSignal.timeout(CLOSE_TIMEOUT);\n        try {\n            await Promise.all([...this._streams.values()].map(async (s) => s.close(options)));\n            // send reason to the other side, allow the other side to close gracefully\n            this.sendGoAway(reason);\n            this._closeMuxer();\n        }\n        catch (err) {\n            this.abort(err);\n        }\n    }\n    abort(err, reason) {\n        if (this.closeController.signal.aborted) {\n            // already closed\n            return;\n        }\n        reason = reason ?? GoAwayCode.InternalError;\n        // If reason was provided, use that, otherwise use the presence of `err` to determine the reason\n        this.log?.error('muxer abort reason=%s error=%s', reason, err);\n        // Abort all underlying streams\n        for (const stream of this._streams.values()) {\n            stream.abort(err);\n        }\n        // send reason to the other side, allow the other side to close gracefully\n        this.sendGoAway(reason);\n        this._closeMuxer();\n    }\n    isClosed() {\n        return this.closeController.signal.aborted;\n    }\n    /**\n     * Called when either the local or remote shuts down the muxer\n     */\n    _closeMuxer() {\n        // stop the sink and any other processes\n        this.closeController.abort();\n        // stop the source\n        this.source.end();\n    }\n    /** Create a new stream */\n    _newStream(id, name, state, direction) {\n        if (this._streams.get(id) != null) {\n            throw new CodeError('Stream already exists', ERR_STREAM_ALREADY_EXISTS, { id });\n        }\n        const stream = new YamuxStream({\n            id: id.toString(),\n            name,\n            state,\n            direction,\n            sendFrame: this.sendFrame.bind(this),\n            onEnd: () => {\n                this.closeStream(id);\n                this.onStreamEnd?.(stream);\n            },\n            log: logger(`libp2p:yamux:${direction}:${id}`),\n            config: this.config,\n            getRTT: this.getRTT.bind(this)\n        });\n        return stream;\n    }\n    /**\n     * closeStream is used to close a stream once both sides have\n     * issued a close.\n     */\n    closeStream(id) {\n        if (this.client === (id % 2 === 0)) {\n            this.numInboundStreams--;\n        }\n        else {\n            this.numOutboundStreams--;\n        }\n        this._streams.delete(id);\n    }\n    async keepAliveLoop() {\n        const abortPromise = new Promise((_resolve, reject) => { this.closeController.signal.addEventListener('abort', reject, { once: true }); });\n        this.log?.trace('muxer keepalive enabled interval=%s', this.config.keepAliveInterval);\n        while (true) {\n            let timeoutId;\n            try {\n                await Promise.race([\n                    abortPromise,\n                    new Promise((resolve) => {\n                        timeoutId = setTimeout(resolve, this.config.keepAliveInterval);\n                    })\n                ]);\n                this.ping().catch(e => this.log?.error('ping error: %s', e));\n            }\n            catch (e) {\n                // closed\n                clearInterval(timeoutId);\n                return;\n            }\n        }\n    }\n    async handleFrame(header, readData) {\n        const { streamID, type, length } = header;\n        this.log?.trace('received frame %s', stringifyHeader(header));\n        if (streamID === 0) {\n            switch (type) {\n                case FrameType.Ping:\n                    {\n                        this.handlePing(header);\n                        return;\n                    }\n                case FrameType.GoAway:\n                    {\n                        this.handleGoAway(length);\n                        return;\n                    }\n                default:\n                    // Invalid state\n                    throw new CodeError('Invalid frame type', ERR_INVALID_FRAME, { header });\n            }\n        }\n        else {\n            switch (header.type) {\n                case FrameType.Data:\n                case FrameType.WindowUpdate:\n                    {\n                        await this.handleStreamMessage(header, readData);\n                        return;\n                    }\n                default:\n                    // Invalid state\n                    throw new CodeError('Invalid frame type', ERR_INVALID_FRAME, { header });\n            }\n        }\n    }\n    handlePing(header) {\n        // If the ping  is initiated by the sender, send a response\n        if (header.flag === Flag.SYN) {\n            this.log?.trace('received ping request pingId=%s', header.length);\n            this.sendPing(header.length, Flag.ACK);\n        }\n        else if (header.flag === Flag.ACK) {\n            this.log?.trace('received ping response pingId=%s', header.length);\n            this.handlePingResponse(header.length);\n        }\n        else {\n            // Invalid state\n            throw new CodeError('Invalid frame flag', ERR_INVALID_FRAME, { header });\n        }\n    }\n    handlePingResponse(pingId) {\n        if (this.activePing === undefined) {\n            // this ping was not requested\n            throw new CodeError('ping not requested', ERR_UNREQUESTED_PING);\n        }\n        if (this.activePing.id !== pingId) {\n            // this ping doesn't match our active ping request\n            throw new CodeError('ping doesn\\'t match our id', ERR_NOT_MATCHING_PING);\n        }\n        // valid ping response\n        this.activePing.resolve();\n    }\n    handleGoAway(reason) {\n        this.log?.trace('received GoAway reason=%s', GoAwayCode[reason] ?? 'unknown');\n        this.remoteGoAway = reason;\n        // If the other side is friendly, they would have already closed all streams before sending a GoAway\n        // In case they weren't, reset all streams\n        for (const stream of this._streams.values()) {\n            stream.reset();\n        }\n        this._closeMuxer();\n    }\n    async handleStreamMessage(header, readData) {\n        const { streamID, flag, type } = header;\n        if ((flag & Flag.SYN) === Flag.SYN) {\n            this.incomingStream(streamID);\n        }\n        const stream = this._streams.get(streamID);\n        if (stream === undefined) {\n            if (type === FrameType.Data) {\n                this.log?.('discarding data for stream id=%s', streamID);\n                if (readData === undefined) {\n                    throw new Error('unreachable');\n                }\n                await readData();\n            }\n            else {\n                this.log?.('frame for missing stream id=%s', streamID);\n            }\n            return;\n        }\n        switch (type) {\n            case FrameType.WindowUpdate: {\n                stream.handleWindowUpdate(header);\n                return;\n            }\n            case FrameType.Data: {\n                if (readData === undefined) {\n                    throw new Error('unreachable');\n                }\n                await stream.handleData(header, readData);\n                return;\n            }\n            default:\n                throw new Error('unreachable');\n        }\n    }\n    incomingStream(id) {\n        if (this.client !== (id % 2 === 0)) {\n            throw new CodeError('both endpoints are clients', ERR_BOTH_CLIENTS);\n        }\n        if (this._streams.has(id)) {\n            return;\n        }\n        this.log?.trace('new incoming stream id=%s', id);\n        if (this.localGoAway !== undefined) {\n            // reject (reset) immediately if we are doing a go away\n            this.sendFrame({\n                type: FrameType.WindowUpdate,\n                flag: Flag.RST,\n                streamID: id,\n                length: 0\n            });\n            return;\n        }\n        // check against our configured maximum number of inbound streams\n        if (this.numInboundStreams >= this.config.maxInboundStreams) {\n            this.log?.('maxIncomingStreams exceeded, forcing stream reset');\n            this.sendFrame({\n                type: FrameType.WindowUpdate,\n                flag: Flag.RST,\n                streamID: id,\n                length: 0\n            });\n            return;\n        }\n        // allocate a new stream\n        const stream = this._newStream(id, undefined, StreamState.SYNReceived, 'inbound');\n        this.numInboundStreams++;\n        // the stream should now be tracked\n        this._streams.set(id, stream);\n        this.onIncomingStream?.(stream);\n    }\n    sendFrame(header, data) {\n        this.log?.trace('sending frame %s', stringifyHeader(header));\n        if (header.type === FrameType.Data) {\n            if (data === undefined) {\n                throw new CodeError('invalid frame', ERR_INVALID_FRAME);\n            }\n            this.source.push(encodeHeader(header));\n            this.source.push(data);\n        }\n        else {\n            this.source.push(encodeHeader(header));\n        }\n    }\n    sendPing(pingId, flag = Flag.SYN) {\n        if (flag === Flag.SYN) {\n            this.log?.trace('sending ping request pingId=%s', pingId);\n        }\n        else {\n            this.log?.trace('sending ping response pingId=%s', pingId);\n        }\n        this.sendFrame({\n            type: FrameType.Ping,\n            flag,\n            streamID: 0,\n            length: pingId\n        });\n    }\n    sendGoAway(reason = GoAwayCode.NormalTermination) {\n        this.log?.('sending GoAway reason=%s', GoAwayCode[reason]);\n        this.localGoAway = reason;\n        this.sendFrame({\n            type: FrameType.GoAway,\n            flag: 0,\n            streamID: 0,\n            length: reason\n        });\n    }\n}\n//# sourceMappingURL=muxer.js.map","import { Yamux } from './muxer.js';\nexport { GoAwayCode } from './frame.js';\nexport function yamux(init = {}) {\n    return () => new Yamux(init);\n}\n//# sourceMappingURL=index.js.map","export function getIterator(obj) {\n    if (obj != null) {\n        if (typeof obj[Symbol.iterator] === 'function') {\n            return obj[Symbol.iterator]();\n        }\n        if (typeof obj[Symbol.asyncIterator] === 'function') {\n            return obj[Symbol.asyncIterator]();\n        }\n        if (typeof obj.next === 'function') {\n            return obj; // probably an iterator\n        }\n    }\n    throw new Error('argument is not an iterator or iterable');\n}\n//# sourceMappingURL=index.js.map","import peek from 'it-peekable';\nfunction isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction forEach(source, fn) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            for await (const thing of source) {\n                await fn(thing);\n                yield thing;\n            }\n        })();\n    }\n    // if fn function returns a promise we have to return an async generator\n    const peekable = peek(source);\n    const { value, done } = peekable.next();\n    if (done === true) {\n        return (function* () { }());\n    }\n    const res = fn(value);\n    if (typeof res?.then === 'function') {\n        return (async function* () {\n            yield value;\n            for await (const val of peekable) {\n                await fn(val);\n                yield val;\n            }\n        })();\n    }\n    const func = fn;\n    return (function* () {\n        yield value;\n        for (const val of peekable) {\n            func(val);\n            yield val;\n        }\n    })();\n}\nexport default forEach;\n//# sourceMappingURL=index.js.map","// ported from https://www.npmjs.com/package/fast-fifo\nclass FixedFIFO {\n    buffer;\n    mask;\n    top;\n    btm;\n    next;\n    constructor(hwm) {\n        if (!(hwm > 0) || ((hwm - 1) & hwm) !== 0) {\n            throw new Error('Max size for a FixedFIFO should be a power of two');\n        }\n        this.buffer = new Array(hwm);\n        this.mask = hwm - 1;\n        this.top = 0;\n        this.btm = 0;\n        this.next = null;\n    }\n    push(data) {\n        if (this.buffer[this.top] !== undefined) {\n            return false;\n        }\n        this.buffer[this.top] = data;\n        this.top = (this.top + 1) & this.mask;\n        return true;\n    }\n    shift() {\n        const last = this.buffer[this.btm];\n        if (last === undefined) {\n            return undefined;\n        }\n        this.buffer[this.btm] = undefined;\n        this.btm = (this.btm + 1) & this.mask;\n        return last;\n    }\n    isEmpty() {\n        return this.buffer[this.btm] === undefined;\n    }\n}\nexport class FIFO {\n    size;\n    hwm;\n    head;\n    tail;\n    constructor(options = {}) {\n        this.hwm = options.splitLimit ?? 16;\n        this.head = new FixedFIFO(this.hwm);\n        this.tail = this.head;\n        this.size = 0;\n    }\n    calculateSize(obj) {\n        if (obj?.byteLength != null) {\n            return obj.byteLength;\n        }\n        return 1;\n    }\n    push(val) {\n        if (val?.value != null) {\n            this.size += this.calculateSize(val.value);\n        }\n        if (!this.head.push(val)) {\n            const prev = this.head;\n            this.head = prev.next = new FixedFIFO(2 * this.head.buffer.length);\n            this.head.push(val);\n        }\n    }\n    shift() {\n        let val = this.tail.shift();\n        if (val === undefined && (this.tail.next != null)) {\n            const next = this.tail.next;\n            this.tail.next = null;\n            this.tail = next;\n            val = this.tail.shift();\n        }\n        if (val?.value != null) {\n            this.size -= this.calculateSize(val.value);\n        }\n        return val;\n    }\n    isEmpty() {\n        return this.head.isEmpty();\n    }\n}\n//# sourceMappingURL=fifo.js.map","function isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction first(source) {\n    if (isAsyncIterable(source)) {\n        return (async () => {\n            for await (const entry of source) { // eslint-disable-line no-unreachable-loop\n                return entry;\n            }\n            return undefined;\n        })();\n    }\n    for (const entry of source) { // eslint-disable-line no-unreachable-loop\n        return entry;\n    }\n    return undefined;\n}\nexport default first;\n//# sourceMappingURL=index.js.map","function isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction batch(source, size = 1) {\n    size = Number(size);\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            let things = [];\n            if (size < 1) {\n                size = 1;\n            }\n            if (size !== Math.round(size)) {\n                throw new Error('Batch size must be an integer');\n            }\n            for await (const thing of source) {\n                things.push(thing);\n                while (things.length >= size) {\n                    yield things.slice(0, size);\n                    things = things.slice(size);\n                }\n            }\n            while (things.length > 0) {\n                yield things.slice(0, size);\n                things = things.slice(size);\n            }\n        }());\n    }\n    return (function* () {\n        let things = [];\n        if (size < 1) {\n            size = 1;\n        }\n        if (size !== Math.round(size)) {\n            throw new Error('Batch size must be an integer');\n        }\n        for (const thing of source) {\n            things.push(thing);\n            while (things.length >= size) {\n                yield things.slice(0, size);\n                things = things.slice(size);\n            }\n        }\n        while (things.length > 0) {\n            yield things.slice(0, size);\n            things = things.slice(size);\n        }\n    }());\n}\nexport default batch;\n//# sourceMappingURL=index.js.map","import batch from 'it-batch';\n/**\n * Takes an (async) iterator that emits promise-returning functions,\n * invokes them in parallel and emits the results as they become available but\n * in the same order as the input\n */\nexport default async function* parallelBatch(source, size = 1) {\n    for await (const tasks of batch(source, size)) {\n        const things = tasks.map(async (p) => {\n            return p().then(value => ({ ok: true, value }), err => ({ ok: false, err }));\n        });\n        for (let i = 0; i < things.length; i++) {\n            const result = await things[i];\n            if (result.ok) {\n                yield result.value;\n            }\n            else {\n                throw result.err;\n            }\n        }\n    }\n}\n//# sourceMappingURL=index.js.map","import { Uint8ArrayList } from 'uint8arraylist';\nconst DEFAULT_CHUNK_SIZE = 262144;\nexport const fixedSize = (options = {}) => {\n    const chunkSize = options.chunkSize ?? DEFAULT_CHUNK_SIZE;\n    return async function* fixedSizeChunker(source) {\n        let list = new Uint8ArrayList();\n        let currentLength = 0;\n        let emitted = false;\n        for await (const buffer of source) {\n            list.append(buffer);\n            currentLength += buffer.length;\n            while (currentLength >= chunkSize) {\n                yield list.slice(0, chunkSize);\n                emitted = true;\n                // throw away consumed bytes\n                if (chunkSize === list.length) {\n                    list = new Uint8ArrayList();\n                    currentLength = 0;\n                }\n                else {\n                    const newBl = new Uint8ArrayList();\n                    newBl.append(list.sublist(chunkSize));\n                    list = newBl;\n                    // update our offset\n                    currentLength -= chunkSize;\n                }\n            }\n        }\n        if (!emitted || currentLength > 0) {\n            // return any remaining bytes\n            yield list.subarray(0, currentLength);\n        }\n    };\n};\n//# sourceMappingURL=fixed-size.js.map","/* eslint-disable import/export */\n/* eslint-disable complexity */\n/* eslint-disable @typescript-eslint/no-namespace */\n/* eslint-disable @typescript-eslint/no-unnecessary-boolean-literal-compare */\n/* eslint-disable @typescript-eslint/no-empty-interface */\nimport { enumeration, encodeMessage, decodeMessage, message } from 'protons-runtime';\nexport var Data;\n(function (Data) {\n    let DataType;\n    (function (DataType) {\n        DataType[\"Raw\"] = \"Raw\";\n        DataType[\"Directory\"] = \"Directory\";\n        DataType[\"File\"] = \"File\";\n        DataType[\"Metadata\"] = \"Metadata\";\n        DataType[\"Symlink\"] = \"Symlink\";\n        DataType[\"HAMTShard\"] = \"HAMTShard\";\n    })(DataType = Data.DataType || (Data.DataType = {}));\n    let __DataTypeValues;\n    (function (__DataTypeValues) {\n        __DataTypeValues[__DataTypeValues[\"Raw\"] = 0] = \"Raw\";\n        __DataTypeValues[__DataTypeValues[\"Directory\"] = 1] = \"Directory\";\n        __DataTypeValues[__DataTypeValues[\"File\"] = 2] = \"File\";\n        __DataTypeValues[__DataTypeValues[\"Metadata\"] = 3] = \"Metadata\";\n        __DataTypeValues[__DataTypeValues[\"Symlink\"] = 4] = \"Symlink\";\n        __DataTypeValues[__DataTypeValues[\"HAMTShard\"] = 5] = \"HAMTShard\";\n    })(__DataTypeValues || (__DataTypeValues = {}));\n    (function (DataType) {\n        DataType.codec = () => {\n            return enumeration(__DataTypeValues);\n        };\n    })(DataType = Data.DataType || (Data.DataType = {}));\n    let _codec;\n    Data.codec = () => {\n        if (_codec == null) {\n            _codec = message((obj, w, opts = {}) => {\n                if (opts.lengthDelimited !== false) {\n                    w.fork();\n                }\n                if (obj.Type != null) {\n                    w.uint32(8);\n                    Data.DataType.codec().encode(obj.Type, w);\n                }\n                if (obj.Data != null) {\n                    w.uint32(18);\n                    w.bytes(obj.Data);\n                }\n                if (obj.filesize != null) {\n                    w.uint32(24);\n                    w.uint64(obj.filesize);\n                }\n                if (obj.blocksizes != null) {\n                    for (const value of obj.blocksizes) {\n                        w.uint32(32);\n                        w.uint64(value);\n                    }\n                }\n                if (obj.hashType != null) {\n                    w.uint32(40);\n                    w.uint64(obj.hashType);\n                }\n                if (obj.fanout != null) {\n                    w.uint32(48);\n                    w.uint64(obj.fanout);\n                }\n                if (obj.mode != null) {\n                    w.uint32(56);\n                    w.uint32(obj.mode);\n                }\n                if (obj.mtime != null) {\n                    w.uint32(66);\n                    UnixTime.codec().encode(obj.mtime, w);\n                }\n                if (opts.lengthDelimited !== false) {\n                    w.ldelim();\n                }\n            }, (reader, length) => {\n                const obj = {\n                    blocksizes: []\n                };\n                const end = length == null ? reader.len : reader.pos + length;\n                while (reader.pos < end) {\n                    const tag = reader.uint32();\n                    switch (tag >>> 3) {\n                        case 1:\n                            obj.Type = Data.DataType.codec().decode(reader);\n                            break;\n                        case 2:\n                            obj.Data = reader.bytes();\n                            break;\n                        case 3:\n                            obj.filesize = reader.uint64();\n                            break;\n                        case 4:\n                            obj.blocksizes.push(reader.uint64());\n                            break;\n                        case 5:\n                            obj.hashType = reader.uint64();\n                            break;\n                        case 6:\n                            obj.fanout = reader.uint64();\n                            break;\n                        case 7:\n                            obj.mode = reader.uint32();\n                            break;\n                        case 8:\n                            obj.mtime = UnixTime.codec().decode(reader, reader.uint32());\n                            break;\n                        default:\n                            reader.skipType(tag & 7);\n                            break;\n                    }\n                }\n                return obj;\n            });\n        }\n        return _codec;\n    };\n    Data.encode = (obj) => {\n        return encodeMessage(obj, Data.codec());\n    };\n    Data.decode = (buf) => {\n        return decodeMessage(buf, Data.codec());\n    };\n})(Data || (Data = {}));\nexport var UnixTime;\n(function (UnixTime) {\n    let _codec;\n    UnixTime.codec = () => {\n        if (_codec == null) {\n            _codec = message((obj, w, opts = {}) => {\n                if (opts.lengthDelimited !== false) {\n                    w.fork();\n                }\n                if (obj.Seconds != null) {\n                    w.uint32(8);\n                    w.int64(obj.Seconds);\n                }\n                if (obj.FractionalNanoseconds != null) {\n                    w.uint32(21);\n                    w.fixed32(obj.FractionalNanoseconds);\n                }\n                if (opts.lengthDelimited !== false) {\n                    w.ldelim();\n                }\n            }, (reader, length) => {\n                const obj = {};\n                const end = length == null ? reader.len : reader.pos + length;\n                while (reader.pos < end) {\n                    const tag = reader.uint32();\n                    switch (tag >>> 3) {\n                        case 1:\n                            obj.Seconds = reader.int64();\n                            break;\n                        case 2:\n                            obj.FractionalNanoseconds = reader.fixed32();\n                            break;\n                        default:\n                            reader.skipType(tag & 7);\n                            break;\n                    }\n                }\n                return obj;\n            });\n        }\n        return _codec;\n    };\n    UnixTime.encode = (obj) => {\n        return encodeMessage(obj, UnixTime.codec());\n    };\n    UnixTime.decode = (buf) => {\n        return decodeMessage(buf, UnixTime.codec());\n    };\n})(UnixTime || (UnixTime = {}));\nexport var Metadata;\n(function (Metadata) {\n    let _codec;\n    Metadata.codec = () => {\n        if (_codec == null) {\n            _codec = message((obj, w, opts = {}) => {\n                if (opts.lengthDelimited !== false) {\n                    w.fork();\n                }\n                if (obj.MimeType != null) {\n                    w.uint32(10);\n                    w.string(obj.MimeType);\n                }\n                if (opts.lengthDelimited !== false) {\n                    w.ldelim();\n                }\n            }, (reader, length) => {\n                const obj = {};\n                const end = length == null ? reader.len : reader.pos + length;\n                while (reader.pos < end) {\n                    const tag = reader.uint32();\n                    switch (tag >>> 3) {\n                        case 1:\n                            obj.MimeType = reader.string();\n                            break;\n                        default:\n                            reader.skipType(tag & 7);\n                            break;\n                    }\n                }\n                return obj;\n            });\n        }\n        return _codec;\n    };\n    Metadata.encode = (obj) => {\n        return encodeMessage(obj, Metadata.codec());\n    };\n    Metadata.decode = (buf) => {\n        return decodeMessage(buf, Metadata.codec());\n    };\n})(Metadata || (Metadata = {}));\n//# sourceMappingURL=unixfs.js.map","import errcode from 'err-code';\nimport { Data as PBData } from './unixfs.js';\nconst types = {\n    Raw: 'raw',\n    Directory: 'directory',\n    File: 'file',\n    Metadata: 'metadata',\n    Symlink: 'symlink',\n    HAMTShard: 'hamt-sharded-directory'\n};\nconst dirTypes = [\n    'directory',\n    'hamt-sharded-directory'\n];\nconst DEFAULT_FILE_MODE = parseInt('0644', 8);\nconst DEFAULT_DIRECTORY_MODE = parseInt('0755', 8);\nclass UnixFS {\n    /**\n     * Decode from protobuf https://github.com/ipfs/specs/blob/master/UNIXFS.md\n     */\n    static unmarshal(marshaled) {\n        const message = PBData.decode(marshaled);\n        const data = new UnixFS({\n            type: types[message.Type != null ? message.Type.toString() : 'File'],\n            data: message.Data,\n            blockSizes: message.blocksizes,\n            mode: message.mode,\n            mtime: message.mtime != null\n                ? {\n                    secs: message.mtime.Seconds ?? 0n,\n                    nsecs: message.mtime.FractionalNanoseconds\n                }\n                : undefined,\n            fanout: message.fanout\n        });\n        // make sure we honour the original mode\n        data._originalMode = message.mode ?? 0;\n        return data;\n    }\n    type;\n    data;\n    blockSizes;\n    hashType;\n    fanout;\n    mtime;\n    _mode;\n    _originalMode;\n    constructor(options = {\n        type: 'file'\n    }) {\n        const { type, data, blockSizes, hashType, fanout, mtime, mode } = options;\n        if (type != null && !Object.values(types).includes(type)) {\n            throw errcode(new Error('Type: ' + type + ' is not valid'), 'ERR_INVALID_TYPE');\n        }\n        this.type = type ?? 'file';\n        this.data = data;\n        this.hashType = hashType;\n        this.fanout = fanout;\n        this.blockSizes = blockSizes ?? [];\n        this._originalMode = 0;\n        this.mode = mode;\n        this.mtime = mtime;\n    }\n    set mode(mode) {\n        if (mode == null) {\n            this._mode = this.isDirectory() ? DEFAULT_DIRECTORY_MODE : DEFAULT_FILE_MODE;\n        }\n        else {\n            this._mode = (mode & 0xFFF);\n        }\n    }\n    get mode() {\n        return this._mode;\n    }\n    isDirectory() {\n        return dirTypes.includes(this.type);\n    }\n    addBlockSize(size) {\n        this.blockSizes.push(size);\n    }\n    removeBlockSize(index) {\n        this.blockSizes.splice(index, 1);\n    }\n    /**\n     * Returns `0n` for directories or `data.length + sum(blockSizes)` for everything else\n     */\n    fileSize() {\n        if (this.isDirectory()) {\n            // dirs don't have file size\n            return 0n;\n        }\n        let sum = 0n;\n        this.blockSizes.forEach((size) => {\n            sum += size;\n        });\n        if (this.data != null) {\n            sum += BigInt(this.data.length);\n        }\n        return sum;\n    }\n    /**\n     * encode to protobuf Uint8Array\n     */\n    marshal() {\n        let type;\n        switch (this.type) {\n            case 'raw':\n                type = PBData.DataType.Raw;\n                break;\n            case 'directory':\n                type = PBData.DataType.Directory;\n                break;\n            case 'file':\n                type = PBData.DataType.File;\n                break;\n            case 'metadata':\n                type = PBData.DataType.Metadata;\n                break;\n            case 'symlink':\n                type = PBData.DataType.Symlink;\n                break;\n            case 'hamt-sharded-directory':\n                type = PBData.DataType.HAMTShard;\n                break;\n            default:\n                throw errcode(new Error(`Type: ${type} is not valid`), 'ERR_INVALID_TYPE');\n        }\n        let data = this.data;\n        if (this.data == null || this.data.length === 0) {\n            data = undefined;\n        }\n        let mode;\n        if (this.mode != null) {\n            mode = (this._originalMode & 0xFFFFF000) | (this.mode ?? 0);\n            if (mode === DEFAULT_FILE_MODE && !this.isDirectory()) {\n                mode = undefined;\n            }\n            if (mode === DEFAULT_DIRECTORY_MODE && this.isDirectory()) {\n                mode = undefined;\n            }\n        }\n        let mtime;\n        if (this.mtime != null) {\n            mtime = {\n                Seconds: this.mtime.secs,\n                FractionalNanoseconds: this.mtime.nsecs\n            };\n        }\n        return PBData.encode({\n            Type: type,\n            Data: data,\n            filesize: this.isDirectory() ? undefined : this.fileSize(),\n            blocksizes: this.blockSizes,\n            hashType: this.hashType,\n            fanout: this.fanout,\n            mode,\n            mtime\n        });\n    }\n}\nexport { UnixFS };\n//# sourceMappingURL=index.js.map","const empty = new Uint8Array(0)\n\n/**\n * @param {Uint8Array} d\n */\nconst toHex = d => d.reduce((hex, byte) => hex + byte.toString(16).padStart(2, '0'), '')\n\n/**\n * @param {string} hex\n */\nconst fromHex = hex => {\n  const hexes = hex.match(/../g)\n  return hexes ? new Uint8Array(hexes.map(b => parseInt(b, 16))) : empty\n}\n\n/**\n * @param {Uint8Array} aa\n * @param {Uint8Array} bb\n */\nconst equals = (aa, bb) => {\n  if (aa === bb) return true\n  if (aa.byteLength !== bb.byteLength) {\n    return false\n  }\n\n  for (let ii = 0; ii < aa.byteLength; ii++) {\n    if (aa[ii] !== bb[ii]) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * @param {ArrayBufferView|ArrayBuffer|Uint8Array} o\n * @returns {Uint8Array}\n */\nconst coerce = o => {\n  if (o instanceof Uint8Array && o.constructor.name === 'Uint8Array') return o\n  if (o instanceof ArrayBuffer) return new Uint8Array(o)\n  if (ArrayBuffer.isView(o)) {\n    return new Uint8Array(o.buffer, o.byteOffset, o.byteLength)\n  }\n  throw new Error('Unknown type, must be binary type')\n}\n\n/**\n * @param {any} o\n * @returns {o is ArrayBuffer|ArrayBufferView}\n */\nconst isBinary = o =>\n  o instanceof ArrayBuffer || ArrayBuffer.isView(o)\n\n/**\n * @param {string} str\n * @returns {Uint8Array}\n */\nconst fromString = str => (new TextEncoder()).encode(str)\n\n/**\n * @param {Uint8Array} b\n * @returns {string}\n */\nconst toString = b => (new TextDecoder()).decode(b)\n\nexport { equals, coerce, isBinary, fromHex, toHex, fromString, toString, empty }\n","// @ts-check\n\nimport { coerce } from '../bytes.js'\n\n/**\n * @template T\n * @typedef {import('./interface.js').ByteView<T>} ByteView\n */\n\nexport const name = 'raw'\nexport const code = 0x55\n\n/**\n * @param {Uint8Array} node\n * @returns {ByteView<Uint8Array>}\n */\nexport const encode = (node) => coerce(node)\n\n/**\n * @param {ByteView<Uint8Array>} data\n * @returns {Uint8Array}\n */\nexport const decode = (data) => coerce(data)\n","// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\nfunction base (ALPHABET, name) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256);\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255;\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i);\n    var xc = x.charCodeAt(0);\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i;\n  }\n  var BASE = ALPHABET.length;\n  var LEADER = ALPHABET.charAt(0);\n  var FACTOR = Math.log(BASE) / Math.log(256); // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE); // log(256) / log(BASE), rounded up\n  function encode (source) {\n    if (source instanceof Uint8Array) ; else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength);\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source);\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0;\n    var length = 0;\n    var pbegin = 0;\n    var pend = source.length;\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++;\n      zeroes++;\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0;\n    var b58 = new Uint8Array(size);\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin];\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0;\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0;\n        b58[it1] = (carry % BASE) >>> 0;\n        carry = (carry / BASE) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      pbegin++;\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length;\n    while (it2 !== size && b58[it2] === 0) {\n      it2++;\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes);\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]); }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    var psz = 0;\n        // Skip leading spaces.\n    if (source[psz] === ' ') { return }\n        // Skip and count leading '1's.\n    var zeroes = 0;\n    var length = 0;\n    while (source[psz] === LEADER) {\n      zeroes++;\n      psz++;\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0; // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size);\n        // Process the characters.\n    while (source[psz]) {\n            // Decode character\n      var carry = BASE_MAP[source.charCodeAt(psz)];\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0;\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0;\n        b256[it3] = (carry % 256) >>> 0;\n        carry = (carry / 256) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      psz++;\n    }\n        // Skip trailing spaces.\n    if (source[psz] === ' ') { return }\n        // Skip leading zeroes in b256.\n    var it4 = size - length;\n    while (it4 !== size && b256[it4] === 0) {\n      it4++;\n    }\n    var vch = new Uint8Array(zeroes + (size - it4));\n    var j = zeroes;\n    while (it4 !== size) {\n      vch[j++] = b256[it4++];\n    }\n    return vch\n  }\n  function decode (string) {\n    var buffer = decodeUnsafe(string);\n    if (buffer) { return buffer }\n    throw new Error(`Non-${name} character`)\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nvar src = base;\n\nvar _brrp__multiformats_scope_baseX = src;\n\nexport default _brrp__multiformats_scope_baseX;\n","import basex from '../../vendor/base-x.js'\nimport { coerce } from '../bytes.js'\n// Linter can't see that API is used in types.\n// eslint-disable-next-line\nimport * as API from './interface.js'\n\n/**\n * Class represents both BaseEncoder and MultibaseEncoder meaning it\n * can be used to encode to multibase or base encode without multibase\n * prefix.\n *\n * @class\n * @template {string} Base\n * @template {string} Prefix\n * @implements {API.MultibaseEncoder<Prefix>}\n * @implements {API.BaseEncoder}\n */\nclass Encoder {\n  /**\n   * @param {Base} name\n   * @param {Prefix} prefix\n   * @param {(bytes:Uint8Array) => string} baseEncode\n   */\n  constructor (name, prefix, baseEncode) {\n    this.name = name\n    this.prefix = prefix\n    this.baseEncode = baseEncode\n  }\n\n  /**\n   * @param {Uint8Array} bytes\n   * @returns {API.Multibase<Prefix>}\n   */\n  encode (bytes) {\n    if (bytes instanceof Uint8Array) {\n      return `${this.prefix}${this.baseEncode(bytes)}`\n    } else {\n      throw Error('Unknown type, must be binary type')\n    }\n  }\n}\n\n/**\n * @template {string} Prefix\n */\n/**\n * Class represents both BaseDecoder and MultibaseDecoder so it could be used\n * to decode multibases (with matching prefix) or just base decode strings\n * with corresponding base encoding.\n *\n * @class\n * @template {string} Base\n * @template {string} Prefix\n * @implements {API.MultibaseDecoder<Prefix>}\n * @implements {API.UnibaseDecoder<Prefix>}\n * @implements {API.BaseDecoder}\n */\nclass Decoder {\n  /**\n   * @param {Base} name\n   * @param {Prefix} prefix\n   * @param {(text:string) => Uint8Array} baseDecode\n   */\n  constructor (name, prefix, baseDecode) {\n    this.name = name\n    this.prefix = prefix\n    /* c8 ignore next 3 */\n    if (prefix.codePointAt(0) === undefined) {\n      throw new Error('Invalid prefix character')\n    }\n    /** @private */\n    this.prefixCodePoint = /** @type {number} */ (prefix.codePointAt(0))\n    this.baseDecode = baseDecode\n  }\n\n  /**\n   * @param {string} text\n   */\n  decode (text) {\n    if (typeof text === 'string') {\n      if (text.codePointAt(0) !== this.prefixCodePoint) {\n        throw Error(`Unable to decode multibase string ${JSON.stringify(text)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)\n      }\n      return this.baseDecode(text.slice(this.prefix.length))\n    } else {\n      throw Error('Can only multibase decode strings')\n    }\n  }\n\n  /**\n   * @template {string} OtherPrefix\n   * @param {API.UnibaseDecoder<OtherPrefix>|ComposedDecoder<OtherPrefix>} decoder\n   * @returns {ComposedDecoder<Prefix|OtherPrefix>}\n   */\n  or (decoder) {\n    return or(this, decoder)\n  }\n}\n\n/**\n * @template {string} Prefix\n * @typedef {Record<Prefix, API.UnibaseDecoder<Prefix>>} Decoders\n */\n\n/**\n * @template {string} Prefix\n * @implements {API.MultibaseDecoder<Prefix>}\n * @implements {API.CombobaseDecoder<Prefix>}\n */\nclass ComposedDecoder {\n  /**\n   * @param {Decoders<Prefix>} decoders\n   */\n  constructor (decoders) {\n    this.decoders = decoders\n  }\n\n  /**\n   * @template {string} OtherPrefix\n   * @param {API.UnibaseDecoder<OtherPrefix>|ComposedDecoder<OtherPrefix>} decoder\n   * @returns {ComposedDecoder<Prefix|OtherPrefix>}\n   */\n  or (decoder) {\n    return or(this, decoder)\n  }\n\n  /**\n   * @param {string} input\n   * @returns {Uint8Array}\n   */\n  decode (input) {\n    const prefix = /** @type {Prefix} */ (input[0])\n    const decoder = this.decoders[prefix]\n    if (decoder) {\n      return decoder.decode(input)\n    } else {\n      throw RangeError(`Unable to decode multibase string ${JSON.stringify(input)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)\n    }\n  }\n}\n\n/**\n * @template {string} L\n * @template {string} R\n * @param {API.UnibaseDecoder<L>|API.CombobaseDecoder<L>} left\n * @param {API.UnibaseDecoder<R>|API.CombobaseDecoder<R>} right\n * @returns {ComposedDecoder<L|R>}\n */\nexport const or = (left, right) => new ComposedDecoder(/** @type {Decoders<L|R>} */({\n  ...(left.decoders || { [/** @type API.UnibaseDecoder<L> */(left).prefix]: left }),\n  ...(right.decoders || { [/** @type API.UnibaseDecoder<R> */(right).prefix]: right })\n}))\n\n/**\n * @class\n * @template {string} Base\n * @template {string} Prefix\n * @implements {API.MultibaseCodec<Prefix>}\n * @implements {API.MultibaseEncoder<Prefix>}\n * @implements {API.MultibaseDecoder<Prefix>}\n * @implements {API.BaseCodec}\n * @implements {API.BaseEncoder}\n * @implements {API.BaseDecoder}\n */\nexport class Codec {\n  /**\n   * @param {Base} name\n   * @param {Prefix} prefix\n   * @param {(bytes:Uint8Array) => string} baseEncode\n   * @param {(text:string) => Uint8Array} baseDecode\n   */\n  constructor (name, prefix, baseEncode, baseDecode) {\n    this.name = name\n    this.prefix = prefix\n    this.baseEncode = baseEncode\n    this.baseDecode = baseDecode\n    this.encoder = new Encoder(name, prefix, baseEncode)\n    this.decoder = new Decoder(name, prefix, baseDecode)\n  }\n\n  /**\n   * @param {Uint8Array} input\n   */\n  encode (input) {\n    return this.encoder.encode(input)\n  }\n\n  /**\n   * @param {string} input\n   */\n  decode (input) {\n    return this.decoder.decode(input)\n  }\n}\n\n/**\n * @template {string} Base\n * @template {string} Prefix\n * @param {object} options\n * @param {Base} options.name\n * @param {Prefix} options.prefix\n * @param {(bytes:Uint8Array) => string} options.encode\n * @param {(input:string) => Uint8Array} options.decode\n * @returns {Codec<Base, Prefix>}\n */\nexport const from = ({ name, prefix, encode, decode }) =>\n  new Codec(name, prefix, encode, decode)\n\n/**\n * @template {string} Base\n * @template {string} Prefix\n * @param {object} options\n * @param {Base} options.name\n * @param {Prefix} options.prefix\n * @param {string} options.alphabet\n * @returns {Codec<Base, Prefix>}\n */\nexport const baseX = ({ prefix, name, alphabet }) => {\n  const { encode, decode } = basex(alphabet, name)\n  return from({\n    prefix,\n    name,\n    encode,\n    /**\n     * @param {string} text\n     */\n    decode: text => coerce(decode(text))\n  })\n}\n\n/**\n * @param {string} string\n * @param {string} alphabet\n * @param {number} bitsPerChar\n * @param {string} name\n * @returns {Uint8Array}\n */\nconst decode = (string, alphabet, bitsPerChar, name) => {\n  // Build the character lookup table:\n  /** @type {Record<string, number>} */\n  const codes = {}\n  for (let i = 0; i < alphabet.length; ++i) {\n    codes[alphabet[i]] = i\n  }\n\n  // Count the padding bytes:\n  let end = string.length\n  while (string[end - 1] === '=') {\n    --end\n  }\n\n  // Allocate the output:\n  const out = new Uint8Array((end * bitsPerChar / 8) | 0)\n\n  // Parse the data:\n  let bits = 0 // Number of bits currently in the buffer\n  let buffer = 0 // Bits waiting to be written out, MSB first\n  let written = 0 // Next byte to write\n  for (let i = 0; i < end; ++i) {\n    // Read one character from the string:\n    const value = codes[string[i]]\n    if (value === undefined) {\n      throw new SyntaxError(`Non-${name} character`)\n    }\n\n    // Append the bits to the buffer:\n    buffer = (buffer << bitsPerChar) | value\n    bits += bitsPerChar\n\n    // Write out some bits if the buffer has a byte's worth:\n    if (bits >= 8) {\n      bits -= 8\n      out[written++] = 0xff & (buffer >> bits)\n    }\n  }\n\n  // Verify that we have received just enough bits:\n  if (bits >= bitsPerChar || 0xff & (buffer << (8 - bits))) {\n    throw new SyntaxError('Unexpected end of data')\n  }\n\n  return out\n}\n\n/**\n * @param {Uint8Array} data\n * @param {string} alphabet\n * @param {number} bitsPerChar\n * @returns {string}\n */\nconst encode = (data, alphabet, bitsPerChar) => {\n  const pad = alphabet[alphabet.length - 1] === '='\n  const mask = (1 << bitsPerChar) - 1\n  let out = ''\n\n  let bits = 0 // Number of bits currently in the buffer\n  let buffer = 0 // Bits waiting to be written out, MSB first\n  for (let i = 0; i < data.length; ++i) {\n    // Slurp data into the buffer:\n    buffer = (buffer << 8) | data[i]\n    bits += 8\n\n    // Write out as much as we can:\n    while (bits > bitsPerChar) {\n      bits -= bitsPerChar\n      out += alphabet[mask & (buffer >> bits)]\n    }\n  }\n\n  // Partial character:\n  if (bits) {\n    out += alphabet[mask & (buffer << (bitsPerChar - bits))]\n  }\n\n  // Add padding characters until we hit a byte boundary:\n  if (pad) {\n    while ((out.length * bitsPerChar) & 7) {\n      out += '='\n    }\n  }\n\n  return out\n}\n\n/**\n * RFC4648 Factory\n *\n * @template {string} Base\n * @template {string} Prefix\n * @param {object} options\n * @param {Base} options.name\n * @param {Prefix} options.prefix\n * @param {string} options.alphabet\n * @param {number} options.bitsPerChar\n */\nexport const rfc4648 = ({ name, prefix, bitsPerChar, alphabet }) => {\n  return from({\n    prefix,\n    name,\n    encode (input) {\n      return encode(input, alphabet, bitsPerChar)\n    },\n    decode (input) {\n      return decode(input, alphabet, bitsPerChar, name)\n    }\n  })\n}\n","import { rfc4648 } from './base.js'\n\nexport const base32 = rfc4648({\n  prefix: 'b',\n  name: 'base32',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567',\n  bitsPerChar: 5\n})\n\nexport const base32upper = rfc4648({\n  prefix: 'B',\n  name: 'base32upper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n  bitsPerChar: 5\n})\n\nexport const base32pad = rfc4648({\n  prefix: 'c',\n  name: 'base32pad',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567=',\n  bitsPerChar: 5\n})\n\nexport const base32padupper = rfc4648({\n  prefix: 'C',\n  name: 'base32padupper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=',\n  bitsPerChar: 5\n})\n\nexport const base32hex = rfc4648({\n  prefix: 'v',\n  name: 'base32hex',\n  alphabet: '0123456789abcdefghijklmnopqrstuv',\n  bitsPerChar: 5\n})\n\nexport const base32hexupper = rfc4648({\n  prefix: 'V',\n  name: 'base32hexupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV',\n  bitsPerChar: 5\n})\n\nexport const base32hexpad = rfc4648({\n  prefix: 't',\n  name: 'base32hexpad',\n  alphabet: '0123456789abcdefghijklmnopqrstuv=',\n  bitsPerChar: 5\n})\n\nexport const base32hexpadupper = rfc4648({\n  prefix: 'T',\n  name: 'base32hexpadupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV=',\n  bitsPerChar: 5\n})\n\nexport const base32z = rfc4648({\n  prefix: 'h',\n  name: 'base32z',\n  alphabet: 'ybndrfg8ejkmcpqxot1uwisza345h769',\n  bitsPerChar: 5\n})\n","import { baseX } from './base.js'\n\nexport const base58btc = baseX({\n  name: 'base58btc',\n  prefix: 'z',\n  alphabet: '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n})\n\nexport const base58flickr = baseX({\n  name: 'base58flickr',\n  prefix: 'Z',\n  alphabet: '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n})\n","var encode_1 = encode;\n\nvar MSB = 0x80\n  , REST = 0x7F\n  , MSBALL = ~REST\n  , INT = Math.pow(2, 31);\n\nfunction encode(num, out, offset) {\n  out = out || [];\n  offset = offset || 0;\n  var oldOffset = offset;\n\n  while(num >= INT) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num /= 128;\n  }\n  while(num & MSBALL) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num >>>= 7;\n  }\n  out[offset] = num | 0;\n  \n  encode.bytes = offset - oldOffset + 1;\n  \n  return out\n}\n\nvar decode = read;\n\nvar MSB$1 = 0x80\n  , REST$1 = 0x7F;\n\nfunction read(buf, offset) {\n  var res    = 0\n    , offset = offset || 0\n    , shift  = 0\n    , counter = offset\n    , b\n    , l = buf.length;\n\n  do {\n    if (counter >= l) {\n      read.bytes = 0;\n      throw new RangeError('Could not decode varint')\n    }\n    b = buf[counter++];\n    res += shift < 28\n      ? (b & REST$1) << shift\n      : (b & REST$1) * Math.pow(2, shift);\n    shift += 7;\n  } while (b >= MSB$1)\n\n  read.bytes = counter - offset;\n\n  return res\n}\n\nvar N1 = Math.pow(2,  7);\nvar N2 = Math.pow(2, 14);\nvar N3 = Math.pow(2, 21);\nvar N4 = Math.pow(2, 28);\nvar N5 = Math.pow(2, 35);\nvar N6 = Math.pow(2, 42);\nvar N7 = Math.pow(2, 49);\nvar N8 = Math.pow(2, 56);\nvar N9 = Math.pow(2, 63);\n\nvar length = function (value) {\n  return (\n    value < N1 ? 1\n  : value < N2 ? 2\n  : value < N3 ? 3\n  : value < N4 ? 4\n  : value < N5 ? 5\n  : value < N6 ? 6\n  : value < N7 ? 7\n  : value < N8 ? 8\n  : value < N9 ? 9\n  :              10\n  )\n};\n\nvar varint = {\n    encode: encode_1\n  , decode: decode\n  , encodingLength: length\n};\n\nvar _brrp_varint = varint;\n\nexport default _brrp_varint;\n","import varint from '../vendor/varint.js'\n\n/**\n * @param {Uint8Array} data\n * @param {number} [offset=0]\n * @returns {[number, number]}\n */\nexport const decode = (data, offset = 0) => {\n  const code = varint.decode(data, offset)\n  return [code, varint.decode.bytes]\n}\n\n/**\n * @param {number} int\n * @param {Uint8Array} target\n * @param {number} [offset=0]\n */\nexport const encodeTo = (int, target, offset = 0) => {\n  varint.encode(int, target, offset)\n  return target\n}\n\n/**\n * @param {number} int\n * @returns {number}\n */\nexport const encodingLength = (int) => {\n  return varint.encodingLength(int)\n}\n","import { coerce, equals as equalBytes } from '../bytes.js'\nimport * as varint from '../varint.js'\n\n/**\n * Creates a multihash digest.\n *\n * @template {number} Code\n * @param {Code} code\n * @param {Uint8Array} digest\n */\nexport const create = (code, digest) => {\n  const size = digest.byteLength\n  const sizeOffset = varint.encodingLength(code)\n  const digestOffset = sizeOffset + varint.encodingLength(size)\n\n  const bytes = new Uint8Array(digestOffset + size)\n  varint.encodeTo(code, bytes, 0)\n  varint.encodeTo(size, bytes, sizeOffset)\n  bytes.set(digest, digestOffset)\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * Turns bytes representation of multihash digest into an instance.\n *\n * @param {Uint8Array} multihash\n * @returns {MultihashDigest}\n */\nexport const decode = (multihash) => {\n  const bytes = coerce(multihash)\n  const [code, sizeOffset] = varint.decode(bytes)\n  const [size, digestOffset] = varint.decode(bytes.subarray(sizeOffset))\n  const digest = bytes.subarray(sizeOffset + digestOffset)\n\n  if (digest.byteLength !== size) {\n    throw new Error('Incorrect length')\n  }\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * @param {MultihashDigest} a\n * @param {unknown} b\n * @returns {b is MultihashDigest}\n */\nexport const equals = (a, b) => {\n  if (a === b) {\n    return true\n  } else {\n    const data = /** @type {{code?:unknown, size?:unknown, bytes?:unknown}} */(b)\n\n    return (\n      a.code === data.code &&\n      a.size === data.size &&\n      data.bytes instanceof Uint8Array &&\n      equalBytes(a.bytes, data.bytes)\n    )\n  }\n}\n\n/**\n * @typedef {import('./interface.js').MultihashDigest} MultihashDigest\n */\n\n/**\n * Represents a multihash digest which carries information about the\n * hashing algorithm and an actual hash digest.\n *\n * @template {number} Code\n * @template {number} Size\n * @class\n * @implements {MultihashDigest}\n */\nexport class Digest {\n  /**\n   * Creates a multihash digest.\n   *\n   * @param {Code} code\n   * @param {Size} size\n   * @param {Uint8Array} digest\n   * @param {Uint8Array} bytes\n   */\n  constructor (code, size, digest, bytes) {\n    this.code = code\n    this.size = size\n    this.digest = digest\n    this.bytes = bytes\n  }\n}\n","import { base32 } from './bases/base32.js'\nimport { base58btc } from './bases/base58.js'\nimport { coerce } from './bytes.js'\nimport * as Digest from './hashes/digest.js'\n// Linter can see that API is used in types.\n// eslint-disable-next-line\nimport * as API from \"./link/interface.js\"\nimport * as varint from './varint.js'\n\n// This way TS will also expose all the types from module\nexport * from './link/interface.js'\n\n/**\n * @template {API.Link<unknown, number, number, API.Version>} T\n * @template {string} Prefix\n * @param {T} link\n * @param {API.MultibaseEncoder<Prefix>} [base]\n * @returns {API.ToString<T, Prefix>}\n */\nexport const format = (link, base) => {\n  const { bytes, version } = link\n  switch (version) {\n    case 0:\n      return toStringV0(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<\"z\">} */ (base) || base58btc.encoder\n      )\n    default:\n      return toStringV1(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<Prefix>} */ (base || base32.encoder)\n      )\n  }\n}\n\n/**\n * @template {API.UnknownLink} Link\n * @param {Link} link\n * @returns {API.LinkJSON<Link>}\n */\nexport const toJSON = (link) => ({\n  '/': format(link)\n})\n\n/**\n * @template {API.UnknownLink} Link\n * @param {API.LinkJSON<Link>} json\n */\nexport const fromJSON = (json) =>\n  CID.parse(json['/'])\n\n/** @type {WeakMap<API.UnknownLink, Map<string, string>>} */\nconst cache = new WeakMap()\n\n/**\n * @param {API.UnknownLink} cid\n * @returns {Map<string, string>}\n */\nconst baseCache = cid => {\n  const baseCache = cache.get(cid)\n  if (baseCache == null) {\n    const baseCache = new Map()\n    cache.set(cid, baseCache)\n    return baseCache\n  }\n  return baseCache\n}\n\n/**\n * @template {unknown} [Data=unknown]\n * @template {number} [Format=number]\n * @template {number} [Alg=number]\n * @template {API.Version} [Version=API.Version]\n * @implements {API.Link<Data, Format, Alg, Version>}\n */\n\nexport class CID {\n  /**\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} multihash - (Multi)hash of the of the content.\n   * @param {Uint8Array} bytes\n   */\n  constructor (version, code, multihash, bytes) {\n    /** @readonly */\n    this.code = code\n    /** @readonly */\n    this.version = version\n    /** @readonly */\n    this.multihash = multihash\n    /** @readonly */\n    this.bytes = bytes\n\n    // flag to serializers that this is a CID and\n    // should be treated specially\n    /** @readonly */\n    this['/'] = bytes\n  }\n\n  /**\n   * Signalling `cid.asCID === cid` has been replaced with `cid['/'] === cid.bytes`\n   * please either use `CID.asCID(cid)` or switch to new signalling mechanism\n   *\n   * @deprecated\n   */\n  get asCID () {\n    return this\n  }\n\n  // ArrayBufferView\n  get byteOffset () {\n    return this.bytes.byteOffset\n  }\n\n  // ArrayBufferView\n  get byteLength () {\n    return this.bytes.byteLength\n  }\n\n  /**\n   * @returns {CID<Data, API.DAG_PB, API.SHA_256, 0>}\n   */\n  toV0 () {\n    switch (this.version) {\n      case 0: {\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (this)\n      }\n      case 1: {\n        const { code, multihash } = this\n\n        if (code !== DAG_PB_CODE) {\n          throw new Error('Cannot convert a non dag-pb CID to CIDv0')\n        }\n\n        // sha2-256\n        if (multihash.code !== SHA_256_CODE) {\n          throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0')\n        }\n\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (\n          CID.createV0(\n            /** @type {API.MultihashDigest<API.SHA_256>} */ (multihash)\n          )\n        )\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 0. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @returns {CID<Data, Format, Alg, 1>}\n   */\n  toV1 () {\n    switch (this.version) {\n      case 0: {\n        const { code, digest } = this.multihash\n        const multihash = Digest.create(code, digest)\n        return /** @type {CID<Data, Format, Alg, 1>} */ (\n          CID.createV1(this.code, multihash)\n        )\n      }\n      case 1: {\n        return /** @type {CID<Data, Format, Alg, 1>} */ (this)\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 1. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @param {unknown} other\n   * @returns {other is CID<Data, Format, Alg, Version>}\n   */\n  equals (other) {\n    return CID.equals(this, other)\n  }\n\n  /**\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {API.Link<Data, Format, Alg, Version>} self\n   * @param {unknown} other\n   * @returns {other is CID}\n   */\n  static equals (self, other) {\n    const unknown =\n      /** @type {{code?:unknown, version?:unknown, multihash?:unknown}} */ (\n        other\n      )\n    return (\n      unknown &&\n      self.code === unknown.code &&\n      self.version === unknown.version &&\n      Digest.equals(self.multihash, unknown.multihash)\n    )\n  }\n\n  /**\n   * @param {API.MultibaseEncoder<string>} [base]\n   * @returns {string}\n   */\n  toString (base) {\n    return format(this, base)\n  }\n\n  /**\n   * @returns {API.LinkJSON<this>}\n   */\n  toJSON () {\n    return { '/': format(this) }\n  }\n\n  link () {\n    return this\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'CID'\n  }\n\n  // Legacy\n\n  [Symbol.for('nodejs.util.inspect.custom')] () {\n    return `CID(${this.toString()})`\n  }\n\n  /**\n   * Takes any input `value` and returns a `CID` instance if it was\n   * a `CID` otherwise returns `null`. If `value` is instanceof `CID`\n   * it will return value back. If `value` is not instance of this CID\n   * class, but is compatible CID it will return new instance of this\n   * `CID` class. Otherwise returns null.\n   *\n   * This allows two different incompatible versions of CID library to\n   * co-exist and interop as long as binary interface is compatible.\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @template {unknown} U\n   * @param {API.Link<Data, Format, Alg, Version>|U} input\n   * @returns {CID<Data, Format, Alg, Version>|null}\n   */\n  static asCID (input) {\n    if (input == null) {\n      return null\n    }\n\n    const value = /** @type {any} */ (input)\n    if (value instanceof CID) {\n      // If value is instance of CID then we're all set.\n      return value\n    } else if ((value['/'] != null && value['/'] === value.bytes) || value.asCID === value) {\n      // If value isn't instance of this CID class but `this.asCID === this` or\n      // `value['/'] === value.bytes` is true it is CID instance coming from a\n      // different implementation (diff version or duplicate). In that case we\n      // rebase it to this `CID` implementation so caller is guaranteed to get\n      // instance with expected API.\n      const { version, code, multihash, bytes } = value\n      return new CID(\n        version,\n        code,\n        /** @type {API.MultihashDigest<Alg>} */ (multihash),\n        bytes || encodeCID(version, code, multihash.bytes)\n      )\n    } else if (value[cidSymbol] === true) {\n      // If value is a CID from older implementation that used to be tagged via\n      // symbol we still rebase it to the this `CID` implementation by\n      // delegating that to a constructor.\n      const { version, multihash, code } = value\n      const digest =\n        /** @type {API.MultihashDigest<Alg>} */\n        (Digest.decode(multihash))\n      return CID.create(version, code, digest)\n    } else {\n      // Otherwise value is not a CID (or an incompatible version of it) in\n      // which case we return `null`.\n      return null\n    }\n  }\n\n  /**\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} digest - (Multi)hash of the of the content.\n   * @returns {CID<Data, Format, Alg, Version>}\n   */\n  static create (version, code, digest) {\n    if (typeof code !== 'number') {\n      throw new Error('String codecs are no longer supported')\n    }\n\n    if (!(digest.bytes instanceof Uint8Array)) {\n      throw new Error('Invalid digest')\n    }\n\n    switch (version) {\n      case 0: {\n        if (code !== DAG_PB_CODE) {\n          throw new Error(\n            `Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`\n          )\n        } else {\n          return new CID(version, code, digest, digest.bytes)\n        }\n      }\n      case 1: {\n        const bytes = encodeCID(version, code, digest.bytes)\n        return new CID(version, code, digest, bytes)\n      }\n      default: {\n        throw new Error('Invalid version')\n      }\n    }\n  }\n\n  /**\n   * Simplified version of `create` for CIDv0.\n   *\n   * @template {unknown} [T=unknown]\n   * @param {API.MultihashDigest<typeof SHA_256_CODE>} digest - Multihash.\n   * @returns {CID<T, typeof DAG_PB_CODE, typeof SHA_256_CODE, 0>}\n   */\n  static createV0 (digest) {\n    return CID.create(0, DAG_PB_CODE, digest)\n  }\n\n  /**\n   * Simplified version of `create` for CIDv1.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @param {Code} code - Content encoding format code.\n   * @param {API.MultihashDigest<Alg>} digest - Miltihash of the content.\n   * @returns {CID<Data, Code, Alg, 1>}\n   */\n  static createV1 (code, digest) {\n    return CID.create(1, code, digest)\n  }\n\n  /**\n   * Decoded a CID from its binary representation. The byte array must contain\n   * only the CID with no additional bytes.\n   *\n   * An error will be thrown if the bytes provided do not contain a valid\n   * binary representation of a CID.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ByteView<API.Link<Data, Code, Alg, Ver>>} bytes\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static decode (bytes) {\n    const [cid, remainder] = CID.decodeFirst(bytes)\n    if (remainder.length) {\n      throw new Error('Incorrect length')\n    }\n    return cid\n  }\n\n  /**\n   * Decoded a CID from its binary representation at the beginning of a byte\n   * array.\n   *\n   * Returns an array with the first element containing the CID and the second\n   * element containing the remainder of the original byte array. The remainder\n   * will be a zero-length byte array if the provided bytes only contained a\n   * binary CID representation.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} bytes\n   * @returns {[CID<T, C, A, V>, Uint8Array]}\n   */\n  static decodeFirst (bytes) {\n    const specs = CID.inspectBytes(bytes)\n    const prefixSize = specs.size - specs.multihashSize\n    const multihashBytes = coerce(\n      bytes.subarray(prefixSize, prefixSize + specs.multihashSize)\n    )\n    if (multihashBytes.byteLength !== specs.multihashSize) {\n      throw new Error('Incorrect length')\n    }\n    const digestBytes = multihashBytes.subarray(\n      specs.multihashSize - specs.digestSize\n    )\n    const digest = new Digest.Digest(\n      specs.multihashCode,\n      specs.digestSize,\n      digestBytes,\n      multihashBytes\n    )\n    const cid =\n      specs.version === 0\n        ? CID.createV0(/** @type {API.MultihashDigest<API.SHA_256>} */ (digest))\n        : CID.createV1(specs.codec, digest)\n    return [/** @type {CID<T, C, A, V>} */(cid), bytes.subarray(specs.size)]\n  }\n\n  /**\n   * Inspect the initial bytes of a CID to determine its properties.\n   *\n   * Involves decoding up to 4 varints. Typically this will require only 4 to 6\n   * bytes but for larger multicodec code values and larger multihash digest\n   * lengths these varints can be quite large. It is recommended that at least\n   * 10 bytes be made available in the `initialBytes` argument for a complete\n   * inspection.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} initialBytes\n   * @returns {{ version:V, codec:C, multihashCode:A, digestSize:number, multihashSize:number, size:number }}\n   */\n  static inspectBytes (initialBytes) {\n    let offset = 0\n    const next = () => {\n      const [i, length] = varint.decode(initialBytes.subarray(offset))\n      offset += length\n      return i\n    }\n\n    let version = /** @type {V} */ (next())\n    let codec = /** @type {C} */ (DAG_PB_CODE)\n    if (/** @type {number} */(version) === 18) {\n      // CIDv0\n      version = /** @type {V} */ (0)\n      offset = 0\n    } else {\n      codec = /** @type {C} */ (next())\n    }\n\n    if (version !== 0 && version !== 1) {\n      throw new RangeError(`Invalid CID version ${version}`)\n    }\n\n    const prefixSize = offset\n    const multihashCode = /** @type {A} */ (next()) // multihash code\n    const digestSize = next() // multihash length\n    const size = offset + digestSize\n    const multihashSize = size - prefixSize\n\n    return { version, codec, multihashCode, digestSize, multihashSize, size }\n  }\n\n  /**\n   * Takes cid in a string representation and creates an instance. If `base`\n   * decoder is not provided will use a default from the configuration. It will\n   * throw an error if encoding of the CID is not compatible with supplied (or\n   * a default decoder).\n   *\n   * @template {string} Prefix\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n   * @param {API.MultibaseDecoder<Prefix>} [base]\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static parse (source, base) {\n    const [prefix, bytes] = parseCIDtoBytes(source, base)\n\n    const cid = CID.decode(bytes)\n\n    if (cid.version === 0 && source[0] !== 'Q') {\n      throw Error('Version 0 CID string must not include multibase prefix')\n    }\n\n    // Cache string representation to avoid computing it on `this.toString()`\n    baseCache(cid).set(prefix, source)\n\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @template {unknown} Data\n * @template {number} Code\n * @template {number} Alg\n * @template {API.Version} Ver\n * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n * @param {API.MultibaseDecoder<Prefix>} [base]\n * @returns {[Prefix, API.ByteView<API.Link<Data, Code, Alg, Ver>>]}\n */\nconst parseCIDtoBytes = (source, base) => {\n  switch (source[0]) {\n    // CIDv0 is parsed differently\n    case 'Q': {\n      const decoder = base || base58btc\n      return [\n        /** @type {Prefix} */ (base58btc.prefix),\n        decoder.decode(`${base58btc.prefix}${source}`)\n      ]\n    }\n    case base58btc.prefix: {\n      const decoder = base || base58btc\n      return [/** @type {Prefix} */(base58btc.prefix), decoder.decode(source)]\n    }\n    case base32.prefix: {\n      const decoder = base || base32\n      return [/** @type {Prefix} */(base32.prefix), decoder.decode(source)]\n    }\n    default: {\n      if (base == null) {\n        throw Error(\n          'To parse non base32 or base58btc encoded CID multibase decoder must be provided'\n        )\n      }\n      return [/** @type {Prefix} */(source[0]), base.decode(source)]\n    }\n  }\n}\n\n/**\n *\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<'z'>} base\n */\nconst toStringV0 = (bytes, cache, base) => {\n  const { prefix } = base\n  if (prefix !== base58btc.prefix) {\n    throw Error(`Cannot string encode V0 in ${base.name} encoding`)\n  }\n\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes).slice(1)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<Prefix>} base\n */\nconst toStringV1 = (bytes, cache, base) => {\n  const { prefix } = base\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\nconst DAG_PB_CODE = 0x70\nconst SHA_256_CODE = 0x12\n\n/**\n * @param {API.Version} version\n * @param {number} code\n * @param {Uint8Array} multihash\n * @returns {Uint8Array}\n */\nconst encodeCID = (version, code, multihash) => {\n  const codeOffset = varint.encodingLength(version)\n  const hashOffset = codeOffset + varint.encodingLength(code)\n  const bytes = new Uint8Array(hashOffset + multihash.byteLength)\n  varint.encodeTo(version, bytes, 0)\n  varint.encodeTo(code, bytes, codeOffset)\n  bytes.set(multihash, hashOffset)\n  return bytes\n}\n\nconst cidSymbol = Symbol.for('@ipld/js-cid/CID')\n","import * as Digest from './digest.js'\n\n/**\n * @template {string} Name\n * @template {number} Code\n * @param {object} options\n * @param {Name} options.name\n * @param {Code} options.code\n * @param {(input: Uint8Array) => Await<Uint8Array>} options.encode\n */\nexport const from = ({ name, code, encode }) => new Hasher(name, code, encode)\n\n/**\n * Hasher represents a hashing algorithm implementation that produces as\n * `MultihashDigest`.\n *\n * @template {string} Name\n * @template {number} Code\n * @class\n * @implements {MultihashHasher<Code>}\n */\nexport class Hasher {\n  /**\n   *\n   * @param {Name} name\n   * @param {Code} code\n   * @param {(input: Uint8Array) => Await<Uint8Array>} encode\n   */\n  constructor (name, code, encode) {\n    this.name = name\n    this.code = code\n    this.encode = encode\n  }\n\n  /**\n   * @param {Uint8Array} input\n   * @returns {Await<Digest.Digest<Code, number>>}\n   */\n  digest (input) {\n    if (input instanceof Uint8Array) {\n      const result = this.encode(input)\n      return result instanceof Uint8Array\n        ? Digest.create(this.code, result)\n        /* c8 ignore next 1 */\n        : result.then(digest => Digest.create(this.code, digest))\n    } else {\n      throw Error('Unknown type, must be binary type')\n      /* c8 ignore next 1 */\n    }\n  }\n}\n\n/**\n * @template {number} Alg\n * @typedef {import('./interface.js').MultihashHasher} MultihashHasher\n */\n\n/**\n * @template T\n * @typedef {Promise<T>|T} Await\n */\n","/* global crypto */\n\nimport { from } from './hasher.js'\n\n/**\n * @param {AlgorithmIdentifier} name\n */\nconst sha = name =>\n  /**\n   * @param {Uint8Array} data\n   */\n  async data => new Uint8Array(await crypto.subtle.digest(name, data))\n\nexport const sha256 = from({\n  name: 'sha2-256',\n  code: 0x12,\n  encode: sha('SHA-256')\n})\n\nexport const sha512 = from({\n  name: 'sha2-512',\n  code: 0x13,\n  encode: sha('SHA-512')\n})\n","import * as dagPb from '@ipld/dag-pb';\nimport { CID } from 'multiformats/cid';\nimport { sha256 } from 'multiformats/hashes/sha2';\nexport const persist = async (buffer, blockstore, options) => {\n    if (options.codec == null) {\n        options.codec = dagPb;\n    }\n    const multihash = await sha256.digest(buffer);\n    const cid = CID.create(options.cidVersion, options.codec.code, multihash);\n    await blockstore.put(cid, buffer, options);\n    return cid;\n};\n//# sourceMappingURL=persist.js.map","import * as dagPb from '@ipld/dag-pb';\nimport { UnixFS } from 'ipfs-unixfs';\nimport * as raw from 'multiformats/codecs/raw';\nimport { CustomProgressEvent } from 'progress-events';\nimport { persist } from '../utils/persist.js';\nexport function defaultBufferImporter(options) {\n    return async function* bufferImporter(file, blockstore) {\n        let bytesWritten = 0n;\n        for await (let block of file.content) {\n            yield async () => {\n                let unixfs;\n                const opts = {\n                    codec: dagPb,\n                    cidVersion: options.cidVersion,\n                    onProgress: options.onProgress\n                };\n                if (options.rawLeaves) {\n                    opts.codec = raw;\n                    opts.cidVersion = 1;\n                }\n                else {\n                    unixfs = new UnixFS({\n                        type: options.leafType,\n                        data: block\n                    });\n                    block = dagPb.encode({\n                        Data: unixfs.marshal(),\n                        Links: []\n                    });\n                }\n                const cid = await persist(block, blockstore, opts);\n                bytesWritten += BigInt(block.byteLength);\n                options.onProgress?.(new CustomProgressEvent('unixfs:importer:progress:file:write', {\n                    bytesWritten,\n                    cid,\n                    path: file.path\n                }));\n                return {\n                    cid,\n                    unixfs,\n                    size: BigInt(block.length),\n                    block\n                };\n            };\n        }\n    };\n}\n//# sourceMappingURL=buffer-importer.js.map","import { encode, prepare } from '@ipld/dag-pb';\nimport { UnixFS } from 'ipfs-unixfs';\nimport { persist } from '../utils/persist.js';\nexport const dirBuilder = async (dir, blockstore, options) => {\n    const unixfs = new UnixFS({\n        type: 'directory',\n        mtime: dir.mtime,\n        mode: dir.mode\n    });\n    const block = encode(prepare({ Data: unixfs.marshal() }));\n    const cid = await persist(block, blockstore, options);\n    const path = dir.path;\n    return {\n        cid,\n        path,\n        unixfs,\n        size: BigInt(block.length),\n        originalPath: dir.originalPath,\n        block\n    };\n};\n//# sourceMappingURL=dir.js.map","import { encode, prepare } from '@ipld/dag-pb';\nimport { UnixFS } from 'ipfs-unixfs';\nimport parallelBatch from 'it-parallel-batch';\nimport * as rawCodec from 'multiformats/codecs/raw';\nimport { CustomProgressEvent } from 'progress-events';\nimport { persist } from '../utils/persist.js';\nasync function* buildFileBatch(file, blockstore, options) {\n    let count = -1;\n    let previous;\n    for await (const entry of parallelBatch(options.bufferImporter(file, blockstore), options.blockWriteConcurrency)) {\n        count++;\n        if (count === 0) {\n            // cache the first entry if case there aren't any more\n            previous = {\n                ...entry,\n                single: true\n            };\n            continue;\n        }\n        else if (count === 1 && (previous != null)) {\n            // we have the second block of a multiple block import so yield the first\n            yield {\n                ...previous,\n                block: undefined,\n                single: undefined\n            };\n            previous = undefined;\n        }\n        // yield the second or later block of a multiple block import\n        yield {\n            ...entry,\n            block: undefined\n        };\n    }\n    if (previous != null) {\n        yield previous;\n    }\n}\nfunction isSingleBlockImport(result) {\n    return result.single === true;\n}\nconst reduce = (file, blockstore, options) => {\n    const reducer = async function (leaves) {\n        if (leaves.length === 1 && isSingleBlockImport(leaves[0]) && options.reduceSingleLeafToSelf) {\n            const leaf = leaves[0];\n            let node = leaf.block;\n            if (isSingleBlockImport(leaf) && (file.mtime !== undefined || file.mode !== undefined)) {\n                // only one leaf node which is a raw leaf - we have metadata so convert it into a\n                // UnixFS entry otherwise we'll have nowhere to store the metadata\n                leaf.unixfs = new UnixFS({\n                    type: 'file',\n                    mtime: file.mtime,\n                    mode: file.mode,\n                    data: leaf.block\n                });\n                node = { Data: leaf.unixfs.marshal(), Links: [] };\n                leaf.block = encode(prepare(node));\n                leaf.cid = await persist(leaf.block, blockstore, {\n                    ...options,\n                    cidVersion: options.cidVersion\n                });\n                leaf.size = BigInt(leaf.block.length);\n            }\n            options.onProgress?.(new CustomProgressEvent('unixfs:importer:progress:file:layout', {\n                cid: leaf.cid,\n                path: leaf.originalPath\n            }));\n            return {\n                cid: leaf.cid,\n                path: file.path,\n                unixfs: leaf.unixfs,\n                size: leaf.size,\n                originalPath: leaf.originalPath\n            };\n        }\n        // create a parent node and add all the leaves\n        const f = new UnixFS({\n            type: 'file',\n            mtime: file.mtime,\n            mode: file.mode\n        });\n        const links = leaves\n            .filter(leaf => {\n            if (leaf.cid.code === rawCodec.code && leaf.size > 0) {\n                return true;\n            }\n            if ((leaf.unixfs != null) && (leaf.unixfs.data == null) && leaf.unixfs.fileSize() > 0n) {\n                return true;\n            }\n            return Boolean(leaf.unixfs?.data?.length);\n        })\n            .map((leaf) => {\n            if (leaf.cid.code === rawCodec.code) {\n                // node is a leaf buffer\n                f.addBlockSize(leaf.size);\n                return {\n                    Name: '',\n                    Tsize: Number(leaf.size),\n                    Hash: leaf.cid\n                };\n            }\n            if ((leaf.unixfs == null) || (leaf.unixfs.data == null)) {\n                // node is an intermediate node\n                f.addBlockSize(leaf.unixfs?.fileSize() ?? 0n);\n            }\n            else {\n                // node is a unixfs 'file' leaf node\n                f.addBlockSize(BigInt(leaf.unixfs.data.length));\n            }\n            return {\n                Name: '',\n                Tsize: Number(leaf.size),\n                Hash: leaf.cid\n            };\n        });\n        const node = {\n            Data: f.marshal(),\n            Links: links\n        };\n        const block = encode(prepare(node));\n        const cid = await persist(block, blockstore, options);\n        options.onProgress?.(new CustomProgressEvent('unixfs:importer:progress:file:layout', {\n            cid,\n            path: file.originalPath\n        }));\n        return {\n            cid,\n            path: file.path,\n            unixfs: f,\n            size: BigInt(block.length + node.Links.reduce((acc, curr) => acc + (curr.Tsize ?? 0), 0)),\n            originalPath: file.originalPath,\n            block\n        };\n    };\n    return reducer;\n};\nexport const fileBuilder = async (file, block, options) => {\n    return options.layout(buildFileBatch(file, block, options), reduce(file, block, options));\n};\n//# sourceMappingURL=file.js.map","import errCode from 'err-code';\nimport { CustomProgressEvent } from 'progress-events';\nimport { dirBuilder } from './dir.js';\nimport { fileBuilder } from './file.js';\nfunction isIterable(thing) {\n    return Symbol.iterator in thing;\n}\nfunction isAsyncIterable(thing) {\n    return Symbol.asyncIterator in thing;\n}\nfunction contentAsAsyncIterable(content) {\n    try {\n        if (content instanceof Uint8Array) {\n            return (async function* () {\n                yield content;\n            }());\n        }\n        else if (isIterable(content)) {\n            return (async function* () {\n                yield* content;\n            }());\n        }\n        else if (isAsyncIterable(content)) {\n            return content;\n        }\n    }\n    catch {\n        throw errCode(new Error('Content was invalid'), 'ERR_INVALID_CONTENT');\n    }\n    throw errCode(new Error('Content was invalid'), 'ERR_INVALID_CONTENT');\n}\nexport function defaultDagBuilder(options) {\n    return async function* dagBuilder(source, blockstore) {\n        for await (const entry of source) {\n            let originalPath;\n            if (entry.path != null) {\n                originalPath = entry.path;\n                entry.path = entry.path\n                    .split('/')\n                    .filter(path => path != null && path !== '.')\n                    .join('/');\n            }\n            if (isFileCandidate(entry)) {\n                const file = {\n                    path: entry.path,\n                    mtime: entry.mtime,\n                    mode: entry.mode,\n                    content: (async function* () {\n                        let bytesRead = 0n;\n                        for await (const chunk of options.chunker(options.chunkValidator(contentAsAsyncIterable(entry.content)))) {\n                            const currentChunkSize = BigInt(chunk.byteLength);\n                            bytesRead += currentChunkSize;\n                            options.onProgress?.(new CustomProgressEvent('unixfs:importer:progress:file:read', {\n                                bytesRead,\n                                chunkSize: currentChunkSize,\n                                path: entry.path\n                            }));\n                            yield chunk;\n                        }\n                    })(),\n                    originalPath\n                };\n                yield async () => fileBuilder(file, blockstore, options);\n            }\n            else if (entry.path != null) {\n                const dir = {\n                    path: entry.path,\n                    mtime: entry.mtime,\n                    mode: entry.mode,\n                    originalPath\n                };\n                yield async () => dirBuilder(dir, blockstore, options);\n            }\n            else {\n                throw new Error('Import candidate must have content or path or both');\n            }\n        }\n    };\n}\nfunction isFileCandidate(entry) {\n    return entry.content != null;\n}\n//# sourceMappingURL=index.js.map","import errCode from 'err-code';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nexport const defaultChunkValidator = () => {\n    return async function* validateChunks(source) {\n        for await (const content of source) {\n            if (content.length === undefined) {\n                throw errCode(new Error('Content was invalid'), 'ERR_INVALID_CONTENT');\n            }\n            if (typeof content === 'string' || content instanceof String) {\n                yield uint8ArrayFromString(content.toString());\n            }\n            else if (Array.isArray(content)) {\n                yield Uint8Array.from(content);\n            }\n            else if (content instanceof Uint8Array) {\n                yield content;\n            }\n            else {\n                throw errCode(new Error('Content was invalid'), 'ERR_INVALID_CONTENT');\n            }\n        }\n    };\n};\n//# sourceMappingURL=validate-chunks.js.map","import batch from 'it-batch';\nconst DEFAULT_MAX_CHILDREN_PER_NODE = 174;\nexport function balanced(options) {\n    const maxChildrenPerNode = options?.maxChildrenPerNode ?? DEFAULT_MAX_CHILDREN_PER_NODE;\n    return async function balancedLayout(source, reduce) {\n        const roots = [];\n        for await (const chunked of batch(source, maxChildrenPerNode)) {\n            roots.push(await reduce(chunked));\n        }\n        if (roots.length > 1) {\n            return balancedLayout(roots, reduce);\n        }\n        return roots[0];\n    };\n}\n//# sourceMappingURL=balanced.js.map","import { CID } from 'multiformats/cid';\nexport class Dir {\n    options;\n    root;\n    dir;\n    path;\n    dirty;\n    flat;\n    parent;\n    parentKey;\n    unixfs;\n    mode;\n    mtime;\n    cid;\n    size;\n    nodeSize;\n    constructor(props, options) {\n        this.options = options ?? {};\n        this.root = props.root;\n        this.dir = props.dir;\n        this.path = props.path;\n        this.dirty = props.dirty;\n        this.flat = props.flat;\n        this.parent = props.parent;\n        this.parentKey = props.parentKey;\n        this.unixfs = props.unixfs;\n        this.mode = props.mode;\n        this.mtime = props.mtime;\n    }\n}\n// we use these to calculate the node size to use as a check for whether a directory\n// should be sharded or not. Since CIDs have a constant length and We're only\n// interested in the data length and not the actual content identifier we can use\n// any old CID instead of having to hash the data which is expensive.\nexport const CID_V0 = CID.parse('QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn');\nexport const CID_V1 = CID.parse('zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi');\n//# sourceMappingURL=dir.js.map","import { encode, prepare } from '@ipld/dag-pb';\nimport { UnixFS } from 'ipfs-unixfs';\nimport { Dir, CID_V0, CID_V1 } from './dir.js';\nimport { persist } from './utils/persist.js';\nexport class DirFlat extends Dir {\n    _children;\n    constructor(props, options) {\n        super(props, options);\n        this._children = new Map();\n    }\n    async put(name, value) {\n        this.cid = undefined;\n        this.size = undefined;\n        this.nodeSize = undefined;\n        this._children.set(name, value);\n    }\n    async get(name) {\n        return Promise.resolve(this._children.get(name));\n    }\n    childCount() {\n        return this._children.size;\n    }\n    directChildrenCount() {\n        return this.childCount();\n    }\n    onlyChild() {\n        return this._children.values().next().value;\n    }\n    async *eachChildSeries() {\n        for (const [key, child] of this._children.entries()) {\n            yield {\n                key,\n                child\n            };\n        }\n    }\n    estimateNodeSize() {\n        if (this.nodeSize !== undefined) {\n            return this.nodeSize;\n        }\n        this.nodeSize = 0;\n        // estimate size only based on DAGLink name and CID byte lengths\n        // https://github.com/ipfs/go-unixfsnode/blob/37b47f1f917f1b2f54c207682f38886e49896ef9/data/builder/directory.go#L81-L96\n        for (const [name, child] of this._children.entries()) {\n            if (child.size != null && (child.cid != null)) {\n                this.nodeSize += name.length + (this.options.cidVersion === 1 ? CID_V1.bytes.byteLength : CID_V0.bytes.byteLength);\n            }\n        }\n        return this.nodeSize;\n    }\n    async *flush(block) {\n        const links = [];\n        for (const [name, child] of this._children.entries()) {\n            let result = child;\n            if (child instanceof Dir) {\n                for await (const entry of child.flush(block)) {\n                    result = entry;\n                    yield entry;\n                }\n            }\n            if (result.size != null && (result.cid != null)) {\n                links.push({\n                    Name: name,\n                    Tsize: Number(result.size),\n                    Hash: result.cid\n                });\n            }\n        }\n        const unixfs = new UnixFS({\n            type: 'directory',\n            mtime: this.mtime,\n            mode: this.mode\n        });\n        const node = { Data: unixfs.marshal(), Links: links };\n        const buffer = encode(prepare(node));\n        const cid = await persist(buffer, block, this.options);\n        const size = buffer.length + node.Links.reduce(\n        /**\n         * @param {number} acc\n         * @param {PBLink} curr\n         */\n        (acc, curr) => acc + (curr.Tsize == null ? 0 : curr.Tsize), 0);\n        this.cid = cid;\n        this.size = size;\n        yield {\n            cid,\n            unixfs,\n            path: this.path,\n            size: BigInt(size)\n        };\n    }\n}\n//# sourceMappingURL=dir-flat.js.map","const empty = new Uint8Array(0)\n\n/**\n * @param {Uint8Array} d\n */\nconst toHex = d => d.reduce((hex, byte) => hex + byte.toString(16).padStart(2, '0'), '')\n\n/**\n * @param {string} hex\n */\nconst fromHex = hex => {\n  const hexes = hex.match(/../g)\n  return hexes ? new Uint8Array(hexes.map(b => parseInt(b, 16))) : empty\n}\n\n/**\n * @param {Uint8Array} aa\n * @param {Uint8Array} bb\n */\nconst equals = (aa, bb) => {\n  if (aa === bb) return true\n  if (aa.byteLength !== bb.byteLength) {\n    return false\n  }\n\n  for (let ii = 0; ii < aa.byteLength; ii++) {\n    if (aa[ii] !== bb[ii]) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * @param {ArrayBufferView|ArrayBuffer|Uint8Array} o\n * @returns {Uint8Array}\n */\nconst coerce = o => {\n  if (o instanceof Uint8Array && o.constructor.name === 'Uint8Array') return o\n  if (o instanceof ArrayBuffer) return new Uint8Array(o)\n  if (ArrayBuffer.isView(o)) {\n    return new Uint8Array(o.buffer, o.byteOffset, o.byteLength)\n  }\n  throw new Error('Unknown type, must be binary type')\n}\n\n/**\n * @param {any} o\n * @returns {o is ArrayBuffer|ArrayBufferView}\n */\nconst isBinary = o =>\n  o instanceof ArrayBuffer || ArrayBuffer.isView(o)\n\n/**\n * @param {string} str\n * @returns {Uint8Array}\n */\nconst fromString = str => (new TextEncoder()).encode(str)\n\n/**\n * @param {Uint8Array} b\n * @returns {string}\n */\nconst toString = b => (new TextDecoder()).decode(b)\n\nexport { equals, coerce, isBinary, fromHex, toHex, fromString, toString, empty }\n","var encode_1 = encode;\n\nvar MSB = 0x80\n  , REST = 0x7F\n  , MSBALL = ~REST\n  , INT = Math.pow(2, 31);\n\nfunction encode(num, out, offset) {\n  out = out || [];\n  offset = offset || 0;\n  var oldOffset = offset;\n\n  while(num >= INT) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num /= 128;\n  }\n  while(num & MSBALL) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num >>>= 7;\n  }\n  out[offset] = num | 0;\n  \n  encode.bytes = offset - oldOffset + 1;\n  \n  return out\n}\n\nvar decode = read;\n\nvar MSB$1 = 0x80\n  , REST$1 = 0x7F;\n\nfunction read(buf, offset) {\n  var res    = 0\n    , offset = offset || 0\n    , shift  = 0\n    , counter = offset\n    , b\n    , l = buf.length;\n\n  do {\n    if (counter >= l) {\n      read.bytes = 0;\n      throw new RangeError('Could not decode varint')\n    }\n    b = buf[counter++];\n    res += shift < 28\n      ? (b & REST$1) << shift\n      : (b & REST$1) * Math.pow(2, shift);\n    shift += 7;\n  } while (b >= MSB$1)\n\n  read.bytes = counter - offset;\n\n  return res\n}\n\nvar N1 = Math.pow(2,  7);\nvar N2 = Math.pow(2, 14);\nvar N3 = Math.pow(2, 21);\nvar N4 = Math.pow(2, 28);\nvar N5 = Math.pow(2, 35);\nvar N6 = Math.pow(2, 42);\nvar N7 = Math.pow(2, 49);\nvar N8 = Math.pow(2, 56);\nvar N9 = Math.pow(2, 63);\n\nvar length = function (value) {\n  return (\n    value < N1 ? 1\n  : value < N2 ? 2\n  : value < N3 ? 3\n  : value < N4 ? 4\n  : value < N5 ? 5\n  : value < N6 ? 6\n  : value < N7 ? 7\n  : value < N8 ? 8\n  : value < N9 ? 9\n  :              10\n  )\n};\n\nvar varint = {\n    encode: encode_1\n  , decode: decode\n  , encodingLength: length\n};\n\nvar _brrp_varint = varint;\n\nexport default _brrp_varint;\n","import varint from '../vendor/varint.js'\n\n/**\n * @param {Uint8Array} data\n * @param {number} [offset=0]\n * @returns {[number, number]}\n */\nexport const decode = (data, offset = 0) => {\n  const code = varint.decode(data, offset)\n  return [code, varint.decode.bytes]\n}\n\n/**\n * @param {number} int\n * @param {Uint8Array} target\n * @param {number} [offset=0]\n */\nexport const encodeTo = (int, target, offset = 0) => {\n  varint.encode(int, target, offset)\n  return target\n}\n\n/**\n * @param {number} int\n * @returns {number}\n */\nexport const encodingLength = (int) => {\n  return varint.encodingLength(int)\n}\n","import { coerce, equals as equalBytes } from '../bytes.js'\nimport * as varint from '../varint.js'\n\n/**\n * Creates a multihash digest.\n *\n * @template {number} Code\n * @param {Code} code\n * @param {Uint8Array} digest\n */\nexport const create = (code, digest) => {\n  const size = digest.byteLength\n  const sizeOffset = varint.encodingLength(code)\n  const digestOffset = sizeOffset + varint.encodingLength(size)\n\n  const bytes = new Uint8Array(digestOffset + size)\n  varint.encodeTo(code, bytes, 0)\n  varint.encodeTo(size, bytes, sizeOffset)\n  bytes.set(digest, digestOffset)\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * Turns bytes representation of multihash digest into an instance.\n *\n * @param {Uint8Array} multihash\n * @returns {MultihashDigest}\n */\nexport const decode = (multihash) => {\n  const bytes = coerce(multihash)\n  const [code, sizeOffset] = varint.decode(bytes)\n  const [size, digestOffset] = varint.decode(bytes.subarray(sizeOffset))\n  const digest = bytes.subarray(sizeOffset + digestOffset)\n\n  if (digest.byteLength !== size) {\n    throw new Error('Incorrect length')\n  }\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * @param {MultihashDigest} a\n * @param {unknown} b\n * @returns {b is MultihashDigest}\n */\nexport const equals = (a, b) => {\n  if (a === b) {\n    return true\n  } else {\n    const data = /** @type {{code?:unknown, size?:unknown, bytes?:unknown}} */(b)\n\n    return (\n      a.code === data.code &&\n      a.size === data.size &&\n      data.bytes instanceof Uint8Array &&\n      equalBytes(a.bytes, data.bytes)\n    )\n  }\n}\n\n/**\n * @typedef {import('./interface.js').MultihashDigest} MultihashDigest\n */\n\n/**\n * Represents a multihash digest which carries information about the\n * hashing algorithm and an actual hash digest.\n *\n * @template {number} Code\n * @template {number} Size\n * @class\n * @implements {MultihashDigest}\n */\nexport class Digest {\n  /**\n   * Creates a multihash digest.\n   *\n   * @param {Code} code\n   * @param {Size} size\n   * @param {Uint8Array} digest\n   * @param {Uint8Array} bytes\n   */\n  constructor (code, size, digest, bytes) {\n    this.code = code\n    this.size = size\n    this.digest = digest\n    this.bytes = bytes\n  }\n}\n","import * as Digest from './digest.js'\n\n/**\n * @template {string} Name\n * @template {number} Code\n * @param {object} options\n * @param {Name} options.name\n * @param {Code} options.code\n * @param {(input: Uint8Array) => Await<Uint8Array>} options.encode\n */\nexport const from = ({ name, code, encode }) => new Hasher(name, code, encode)\n\n/**\n * Hasher represents a hashing algorithm implementation that produces as\n * `MultihashDigest`.\n *\n * @template {string} Name\n * @template {number} Code\n * @class\n * @implements {MultihashHasher<Code>}\n */\nexport class Hasher {\n  /**\n   *\n   * @param {Name} name\n   * @param {Code} code\n   * @param {(input: Uint8Array) => Await<Uint8Array>} encode\n   */\n  constructor (name, code, encode) {\n    this.name = name\n    this.code = code\n    this.encode = encode\n  }\n\n  /**\n   * @param {Uint8Array} input\n   * @returns {Await<Digest.Digest<Code, number>>}\n   */\n  digest (input) {\n    if (input instanceof Uint8Array) {\n      const result = this.encode(input)\n      return result instanceof Uint8Array\n        ? Digest.create(this.code, result)\n        /* c8 ignore next 1 */\n        : result.then(digest => Digest.create(this.code, digest))\n    } else {\n      throw Error('Unknown type, must be binary type')\n      /* c8 ignore next 1 */\n    }\n  }\n}\n\n/**\n * @template {number} Alg\n * @typedef {import('./interface.js').MultihashHasher} MultihashHasher\n */\n\n/**\n * @template T\n * @typedef {Promise<T>|T} Await\n */\n","// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\nfunction base (ALPHABET, name) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256);\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255;\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i);\n    var xc = x.charCodeAt(0);\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i;\n  }\n  var BASE = ALPHABET.length;\n  var LEADER = ALPHABET.charAt(0);\n  var FACTOR = Math.log(BASE) / Math.log(256); // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE); // log(256) / log(BASE), rounded up\n  function encode (source) {\n    if (source instanceof Uint8Array) ; else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength);\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source);\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0;\n    var length = 0;\n    var pbegin = 0;\n    var pend = source.length;\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++;\n      zeroes++;\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0;\n    var b58 = new Uint8Array(size);\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin];\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0;\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0;\n        b58[it1] = (carry % BASE) >>> 0;\n        carry = (carry / BASE) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      pbegin++;\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length;\n    while (it2 !== size && b58[it2] === 0) {\n      it2++;\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes);\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]); }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    var psz = 0;\n        // Skip leading spaces.\n    if (source[psz] === ' ') { return }\n        // Skip and count leading '1's.\n    var zeroes = 0;\n    var length = 0;\n    while (source[psz] === LEADER) {\n      zeroes++;\n      psz++;\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0; // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size);\n        // Process the characters.\n    while (source[psz]) {\n            // Decode character\n      var carry = BASE_MAP[source.charCodeAt(psz)];\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0;\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0;\n        b256[it3] = (carry % 256) >>> 0;\n        carry = (carry / 256) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      psz++;\n    }\n        // Skip trailing spaces.\n    if (source[psz] === ' ') { return }\n        // Skip leading zeroes in b256.\n    var it4 = size - length;\n    while (it4 !== size && b256[it4] === 0) {\n      it4++;\n    }\n    var vch = new Uint8Array(zeroes + (size - it4));\n    var j = zeroes;\n    while (it4 !== size) {\n      vch[j++] = b256[it4++];\n    }\n    return vch\n  }\n  function decode (string) {\n    var buffer = decodeUnsafe(string);\n    if (buffer) { return buffer }\n    throw new Error(`Non-${name} character`)\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nvar src = base;\n\nvar _brrp__multiformats_scope_baseX = src;\n\nexport default _brrp__multiformats_scope_baseX;\n","import basex from '../../vendor/base-x.js'\nimport { coerce } from '../bytes.js'\n// Linter can't see that API is used in types.\n// eslint-disable-next-line\nimport * as API from './interface.js'\n\n/**\n * Class represents both BaseEncoder and MultibaseEncoder meaning it\n * can be used to encode to multibase or base encode without multibase\n * prefix.\n *\n * @class\n * @template {string} Base\n * @template {string} Prefix\n * @implements {API.MultibaseEncoder<Prefix>}\n * @implements {API.BaseEncoder}\n */\nclass Encoder {\n  /**\n   * @param {Base} name\n   * @param {Prefix} prefix\n   * @param {(bytes:Uint8Array) => string} baseEncode\n   */\n  constructor (name, prefix, baseEncode) {\n    this.name = name\n    this.prefix = prefix\n    this.baseEncode = baseEncode\n  }\n\n  /**\n   * @param {Uint8Array} bytes\n   * @returns {API.Multibase<Prefix>}\n   */\n  encode (bytes) {\n    if (bytes instanceof Uint8Array) {\n      return `${this.prefix}${this.baseEncode(bytes)}`\n    } else {\n      throw Error('Unknown type, must be binary type')\n    }\n  }\n}\n\n/**\n * @template {string} Prefix\n */\n/**\n * Class represents both BaseDecoder and MultibaseDecoder so it could be used\n * to decode multibases (with matching prefix) or just base decode strings\n * with corresponding base encoding.\n *\n * @class\n * @template {string} Base\n * @template {string} Prefix\n * @implements {API.MultibaseDecoder<Prefix>}\n * @implements {API.UnibaseDecoder<Prefix>}\n * @implements {API.BaseDecoder}\n */\nclass Decoder {\n  /**\n   * @param {Base} name\n   * @param {Prefix} prefix\n   * @param {(text:string) => Uint8Array} baseDecode\n   */\n  constructor (name, prefix, baseDecode) {\n    this.name = name\n    this.prefix = prefix\n    /* c8 ignore next 3 */\n    if (prefix.codePointAt(0) === undefined) {\n      throw new Error('Invalid prefix character')\n    }\n    /** @private */\n    this.prefixCodePoint = /** @type {number} */ (prefix.codePointAt(0))\n    this.baseDecode = baseDecode\n  }\n\n  /**\n   * @param {string} text\n   */\n  decode (text) {\n    if (typeof text === 'string') {\n      if (text.codePointAt(0) !== this.prefixCodePoint) {\n        throw Error(`Unable to decode multibase string ${JSON.stringify(text)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)\n      }\n      return this.baseDecode(text.slice(this.prefix.length))\n    } else {\n      throw Error('Can only multibase decode strings')\n    }\n  }\n\n  /**\n   * @template {string} OtherPrefix\n   * @param {API.UnibaseDecoder<OtherPrefix>|ComposedDecoder<OtherPrefix>} decoder\n   * @returns {ComposedDecoder<Prefix|OtherPrefix>}\n   */\n  or (decoder) {\n    return or(this, decoder)\n  }\n}\n\n/**\n * @template {string} Prefix\n * @typedef {Record<Prefix, API.UnibaseDecoder<Prefix>>} Decoders\n */\n\n/**\n * @template {string} Prefix\n * @implements {API.MultibaseDecoder<Prefix>}\n * @implements {API.CombobaseDecoder<Prefix>}\n */\nclass ComposedDecoder {\n  /**\n   * @param {Decoders<Prefix>} decoders\n   */\n  constructor (decoders) {\n    this.decoders = decoders\n  }\n\n  /**\n   * @template {string} OtherPrefix\n   * @param {API.UnibaseDecoder<OtherPrefix>|ComposedDecoder<OtherPrefix>} decoder\n   * @returns {ComposedDecoder<Prefix|OtherPrefix>}\n   */\n  or (decoder) {\n    return or(this, decoder)\n  }\n\n  /**\n   * @param {string} input\n   * @returns {Uint8Array}\n   */\n  decode (input) {\n    const prefix = /** @type {Prefix} */ (input[0])\n    const decoder = this.decoders[prefix]\n    if (decoder) {\n      return decoder.decode(input)\n    } else {\n      throw RangeError(`Unable to decode multibase string ${JSON.stringify(input)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)\n    }\n  }\n}\n\n/**\n * @template {string} L\n * @template {string} R\n * @param {API.UnibaseDecoder<L>|API.CombobaseDecoder<L>} left\n * @param {API.UnibaseDecoder<R>|API.CombobaseDecoder<R>} right\n * @returns {ComposedDecoder<L|R>}\n */\nexport const or = (left, right) => new ComposedDecoder(/** @type {Decoders<L|R>} */({\n  ...(left.decoders || { [/** @type API.UnibaseDecoder<L> */(left).prefix]: left }),\n  ...(right.decoders || { [/** @type API.UnibaseDecoder<R> */(right).prefix]: right })\n}))\n\n/**\n * @class\n * @template {string} Base\n * @template {string} Prefix\n * @implements {API.MultibaseCodec<Prefix>}\n * @implements {API.MultibaseEncoder<Prefix>}\n * @implements {API.MultibaseDecoder<Prefix>}\n * @implements {API.BaseCodec}\n * @implements {API.BaseEncoder}\n * @implements {API.BaseDecoder}\n */\nexport class Codec {\n  /**\n   * @param {Base} name\n   * @param {Prefix} prefix\n   * @param {(bytes:Uint8Array) => string} baseEncode\n   * @param {(text:string) => Uint8Array} baseDecode\n   */\n  constructor (name, prefix, baseEncode, baseDecode) {\n    this.name = name\n    this.prefix = prefix\n    this.baseEncode = baseEncode\n    this.baseDecode = baseDecode\n    this.encoder = new Encoder(name, prefix, baseEncode)\n    this.decoder = new Decoder(name, prefix, baseDecode)\n  }\n\n  /**\n   * @param {Uint8Array} input\n   */\n  encode (input) {\n    return this.encoder.encode(input)\n  }\n\n  /**\n   * @param {string} input\n   */\n  decode (input) {\n    return this.decoder.decode(input)\n  }\n}\n\n/**\n * @template {string} Base\n * @template {string} Prefix\n * @param {object} options\n * @param {Base} options.name\n * @param {Prefix} options.prefix\n * @param {(bytes:Uint8Array) => string} options.encode\n * @param {(input:string) => Uint8Array} options.decode\n * @returns {Codec<Base, Prefix>}\n */\nexport const from = ({ name, prefix, encode, decode }) =>\n  new Codec(name, prefix, encode, decode)\n\n/**\n * @template {string} Base\n * @template {string} Prefix\n * @param {object} options\n * @param {Base} options.name\n * @param {Prefix} options.prefix\n * @param {string} options.alphabet\n * @returns {Codec<Base, Prefix>}\n */\nexport const baseX = ({ prefix, name, alphabet }) => {\n  const { encode, decode } = basex(alphabet, name)\n  return from({\n    prefix,\n    name,\n    encode,\n    /**\n     * @param {string} text\n     */\n    decode: text => coerce(decode(text))\n  })\n}\n\n/**\n * @param {string} string\n * @param {string} alphabet\n * @param {number} bitsPerChar\n * @param {string} name\n * @returns {Uint8Array}\n */\nconst decode = (string, alphabet, bitsPerChar, name) => {\n  // Build the character lookup table:\n  /** @type {Record<string, number>} */\n  const codes = {}\n  for (let i = 0; i < alphabet.length; ++i) {\n    codes[alphabet[i]] = i\n  }\n\n  // Count the padding bytes:\n  let end = string.length\n  while (string[end - 1] === '=') {\n    --end\n  }\n\n  // Allocate the output:\n  const out = new Uint8Array((end * bitsPerChar / 8) | 0)\n\n  // Parse the data:\n  let bits = 0 // Number of bits currently in the buffer\n  let buffer = 0 // Bits waiting to be written out, MSB first\n  let written = 0 // Next byte to write\n  for (let i = 0; i < end; ++i) {\n    // Read one character from the string:\n    const value = codes[string[i]]\n    if (value === undefined) {\n      throw new SyntaxError(`Non-${name} character`)\n    }\n\n    // Append the bits to the buffer:\n    buffer = (buffer << bitsPerChar) | value\n    bits += bitsPerChar\n\n    // Write out some bits if the buffer has a byte's worth:\n    if (bits >= 8) {\n      bits -= 8\n      out[written++] = 0xff & (buffer >> bits)\n    }\n  }\n\n  // Verify that we have received just enough bits:\n  if (bits >= bitsPerChar || 0xff & (buffer << (8 - bits))) {\n    throw new SyntaxError('Unexpected end of data')\n  }\n\n  return out\n}\n\n/**\n * @param {Uint8Array} data\n * @param {string} alphabet\n * @param {number} bitsPerChar\n * @returns {string}\n */\nconst encode = (data, alphabet, bitsPerChar) => {\n  const pad = alphabet[alphabet.length - 1] === '='\n  const mask = (1 << bitsPerChar) - 1\n  let out = ''\n\n  let bits = 0 // Number of bits currently in the buffer\n  let buffer = 0 // Bits waiting to be written out, MSB first\n  for (let i = 0; i < data.length; ++i) {\n    // Slurp data into the buffer:\n    buffer = (buffer << 8) | data[i]\n    bits += 8\n\n    // Write out as much as we can:\n    while (bits > bitsPerChar) {\n      bits -= bitsPerChar\n      out += alphabet[mask & (buffer >> bits)]\n    }\n  }\n\n  // Partial character:\n  if (bits) {\n    out += alphabet[mask & (buffer << (bitsPerChar - bits))]\n  }\n\n  // Add padding characters until we hit a byte boundary:\n  if (pad) {\n    while ((out.length * bitsPerChar) & 7) {\n      out += '='\n    }\n  }\n\n  return out\n}\n\n/**\n * RFC4648 Factory\n *\n * @template {string} Base\n * @template {string} Prefix\n * @param {object} options\n * @param {Base} options.name\n * @param {Prefix} options.prefix\n * @param {string} options.alphabet\n * @param {number} options.bitsPerChar\n */\nexport const rfc4648 = ({ name, prefix, bitsPerChar, alphabet }) => {\n  return from({\n    prefix,\n    name,\n    encode (input) {\n      return encode(input, alphabet, bitsPerChar)\n    },\n    decode (input) {\n      return decode(input, alphabet, bitsPerChar, name)\n    }\n  })\n}\n","import { baseX } from './base.js'\n\nexport const base58btc = baseX({\n  name: 'base58btc',\n  prefix: 'z',\n  alphabet: '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n})\n\nexport const base58flickr = baseX({\n  name: 'base58flickr',\n  prefix: 'Z',\n  alphabet: '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n})\n","import { rfc4648 } from './base.js'\n\nexport const base32 = rfc4648({\n  prefix: 'b',\n  name: 'base32',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567',\n  bitsPerChar: 5\n})\n\nexport const base32upper = rfc4648({\n  prefix: 'B',\n  name: 'base32upper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n  bitsPerChar: 5\n})\n\nexport const base32pad = rfc4648({\n  prefix: 'c',\n  name: 'base32pad',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567=',\n  bitsPerChar: 5\n})\n\nexport const base32padupper = rfc4648({\n  prefix: 'C',\n  name: 'base32padupper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=',\n  bitsPerChar: 5\n})\n\nexport const base32hex = rfc4648({\n  prefix: 'v',\n  name: 'base32hex',\n  alphabet: '0123456789abcdefghijklmnopqrstuv',\n  bitsPerChar: 5\n})\n\nexport const base32hexupper = rfc4648({\n  prefix: 'V',\n  name: 'base32hexupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV',\n  bitsPerChar: 5\n})\n\nexport const base32hexpad = rfc4648({\n  prefix: 't',\n  name: 'base32hexpad',\n  alphabet: '0123456789abcdefghijklmnopqrstuv=',\n  bitsPerChar: 5\n})\n\nexport const base32hexpadupper = rfc4648({\n  prefix: 'T',\n  name: 'base32hexpadupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV=',\n  bitsPerChar: 5\n})\n\nexport const base32z = rfc4648({\n  prefix: 'h',\n  name: 'base32z',\n  alphabet: 'ybndrfg8ejkmcpqxot1uwisza345h769',\n  bitsPerChar: 5\n})\n","import * as varint from './varint.js'\nimport * as Digest from './hashes/digest.js'\nimport { base58btc } from './bases/base58.js'\nimport { base32 } from './bases/base32.js'\nimport { coerce } from './bytes.js'\n// Linter can see that API is used in types.\n// eslint-disable-next-line\nimport * as API from \"./link/interface.js\"\n\n// This way TS will also expose all the types from module\nexport * from './link/interface.js'\n\n/**\n * @template {API.Link<unknown, number, number, API.Version>} T\n * @template {string} Prefix\n * @param {T} link\n * @param {API.MultibaseEncoder<Prefix>} [base]\n * @returns {API.ToString<T, Prefix>}\n */\nexport const format = (link, base) => {\n  const { bytes, version } = link\n  switch (version) {\n    case 0:\n      return toStringV0(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<\"z\">} */ (base) || base58btc.encoder\n      )\n    default:\n      return toStringV1(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<Prefix>} */ (base || base32.encoder)\n      )\n  }\n}\n\n/**\n * @template {API.UnknownLink} Link\n * @param {Link} link\n * @returns {API.LinkJSON<Link>}\n */\nexport const toJSON = (link) => ({\n  '/': format(link)\n})\n\n/**\n * @template {API.UnknownLink} Link\n * @param {API.LinkJSON<Link>} json\n */\nexport const fromJSON = (json) =>\n  CID.parse(json['/'])\n\n/** @type {WeakMap<API.UnknownLink, Map<string, string>>} */\nconst cache = new WeakMap()\n\n/**\n * @param {API.UnknownLink} cid\n * @returns {Map<string, string>}\n */\nconst baseCache = cid => {\n  const baseCache = cache.get(cid)\n  if (baseCache == null) {\n    const baseCache = new Map()\n    cache.set(cid, baseCache)\n    return baseCache\n  }\n  return baseCache\n}\n\n/**\n * @template {unknown} [Data=unknown]\n * @template {number} [Format=number]\n * @template {number} [Alg=number]\n * @template {API.Version} [Version=API.Version]\n * @implements {API.Link<Data, Format, Alg, Version>}\n */\n\nexport class CID {\n  /**\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} multihash - (Multi)hash of the of the content.\n   * @param {Uint8Array} bytes\n   *\n   */\n  constructor (version, code, multihash, bytes) {\n    /** @readonly */\n    this.code = code\n    /** @readonly */\n    this.version = version\n    /** @readonly */\n    this.multihash = multihash\n    /** @readonly */\n    this.bytes = bytes\n\n    // flag to serializers that this is a CID and\n    // should be treated specially\n    /** @readonly */\n    this['/'] = bytes\n  }\n\n  /**\n   * Signalling `cid.asCID === cid` has been replaced with `cid['/'] === cid.bytes`\n   * please either use `CID.asCID(cid)` or switch to new signalling mechanism\n   *\n   * @deprecated\n   */\n  get asCID () {\n    return this\n  }\n\n  // ArrayBufferView\n  get byteOffset () {\n    return this.bytes.byteOffset\n  }\n\n  // ArrayBufferView\n  get byteLength () {\n    return this.bytes.byteLength\n  }\n\n  /**\n   * @returns {CID<Data, API.DAG_PB, API.SHA_256, 0>}\n   */\n  toV0 () {\n    switch (this.version) {\n      case 0: {\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (this)\n      }\n      case 1: {\n        const { code, multihash } = this\n\n        if (code !== DAG_PB_CODE) {\n          throw new Error('Cannot convert a non dag-pb CID to CIDv0')\n        }\n\n        // sha2-256\n        if (multihash.code !== SHA_256_CODE) {\n          throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0')\n        }\n\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (\n          CID.createV0(\n            /** @type {API.MultihashDigest<API.SHA_256>} */ (multihash)\n          )\n        )\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 0. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @returns {CID<Data, Format, Alg, 1>}\n   */\n  toV1 () {\n    switch (this.version) {\n      case 0: {\n        const { code, digest } = this.multihash\n        const multihash = Digest.create(code, digest)\n        return /** @type {CID<Data, Format, Alg, 1>} */ (\n          CID.createV1(this.code, multihash)\n        )\n      }\n      case 1: {\n        return /** @type {CID<Data, Format, Alg, 1>} */ (this)\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 1. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @param {unknown} other\n   * @returns {other is CID<Data, Format, Alg, Version>}\n   */\n  equals (other) {\n    return CID.equals(this, other)\n  }\n\n  /**\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {API.Link<Data, Format, Alg, Version>} self\n   * @param {unknown} other\n   * @returns {other is CID}\n   */\n  static equals (self, other) {\n    const unknown =\n      /** @type {{code?:unknown, version?:unknown, multihash?:unknown}} */ (\n        other\n      )\n    return (\n      unknown &&\n      self.code === unknown.code &&\n      self.version === unknown.version &&\n      Digest.equals(self.multihash, unknown.multihash)\n    )\n  }\n\n  /**\n   * @param {API.MultibaseEncoder<string>} [base]\n   * @returns {string}\n   */\n  toString (base) {\n    return format(this, base)\n  }\n\n  toJSON () {\n    return { '/': format(this) }\n  }\n\n  link () {\n    return this\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'CID'\n  }\n\n  // Legacy\n\n  [Symbol.for('nodejs.util.inspect.custom')] () {\n    return `CID(${this.toString()})`\n  }\n\n  /**\n   * Takes any input `value` and returns a `CID` instance if it was\n   * a `CID` otherwise returns `null`. If `value` is instanceof `CID`\n   * it will return value back. If `value` is not instance of this CID\n   * class, but is compatible CID it will return new instance of this\n   * `CID` class. Otherwise returns null.\n   *\n   * This allows two different incompatible versions of CID library to\n   * co-exist and interop as long as binary interface is compatible.\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @template {unknown} U\n   * @param {API.Link<Data, Format, Alg, Version>|U} input\n   * @returns {CID<Data, Format, Alg, Version>|null}\n   */\n  static asCID (input) {\n    if (input == null) {\n      return null\n    }\n\n    const value = /** @type {any} */ (input)\n    if (value instanceof CID) {\n      // If value is instance of CID then we're all set.\n      return value\n    } else if ((value['/'] != null && value['/'] === value.bytes) || value.asCID === value) {\n      // If value isn't instance of this CID class but `this.asCID === this` or\n      // `value['/'] === value.bytes` is true it is CID instance coming from a\n      // different implementation (diff version or duplicate). In that case we\n      // rebase it to this `CID` implementation so caller is guaranteed to get\n      // instance with expected API.\n      const { version, code, multihash, bytes } = value\n      return new CID(\n        version,\n        code,\n        /** @type {API.MultihashDigest<Alg>} */ (multihash),\n        bytes || encodeCID(version, code, multihash.bytes)\n      )\n    } else if (value[cidSymbol] === true) {\n      // If value is a CID from older implementation that used to be tagged via\n      // symbol we still rebase it to the this `CID` implementation by\n      // delegating that to a constructor.\n      const { version, multihash, code } = value\n      const digest =\n        /** @type {API.MultihashDigest<Alg>} */\n        (Digest.decode(multihash))\n      return CID.create(version, code, digest)\n    } else {\n      // Otherwise value is not a CID (or an incompatible version of it) in\n      // which case we return `null`.\n      return null\n    }\n  }\n\n  /**\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} digest - (Multi)hash of the of the content.\n   * @returns {CID<Data, Format, Alg, Version>}\n   */\n  static create (version, code, digest) {\n    if (typeof code !== 'number') {\n      throw new Error('String codecs are no longer supported')\n    }\n\n    if (!(digest.bytes instanceof Uint8Array)) {\n      throw new Error('Invalid digest')\n    }\n\n    switch (version) {\n      case 0: {\n        if (code !== DAG_PB_CODE) {\n          throw new Error(\n            `Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`\n          )\n        } else {\n          return new CID(version, code, digest, digest.bytes)\n        }\n      }\n      case 1: {\n        const bytes = encodeCID(version, code, digest.bytes)\n        return new CID(version, code, digest, bytes)\n      }\n      default: {\n        throw new Error('Invalid version')\n      }\n    }\n  }\n\n  /**\n   * Simplified version of `create` for CIDv0.\n   *\n   * @template {unknown} [T=unknown]\n   * @param {API.MultihashDigest<typeof SHA_256_CODE>} digest - Multihash.\n   * @returns {CID<T, typeof DAG_PB_CODE, typeof SHA_256_CODE, 0>}\n   */\n  static createV0 (digest) {\n    return CID.create(0, DAG_PB_CODE, digest)\n  }\n\n  /**\n   * Simplified version of `create` for CIDv1.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @param {Code} code - Content encoding format code.\n   * @param {API.MultihashDigest<Alg>} digest - Miltihash of the content.\n   * @returns {CID<Data, Code, Alg, 1>}\n   */\n  static createV1 (code, digest) {\n    return CID.create(1, code, digest)\n  }\n\n  /**\n   * Decoded a CID from its binary representation. The byte array must contain\n   * only the CID with no additional bytes.\n   *\n   * An error will be thrown if the bytes provided do not contain a valid\n   * binary representation of a CID.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ByteView<API.Link<Data, Code, Alg, Ver>>} bytes\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static decode (bytes) {\n    const [cid, remainder] = CID.decodeFirst(bytes)\n    if (remainder.length) {\n      throw new Error('Incorrect length')\n    }\n    return cid\n  }\n\n  /**\n   * Decoded a CID from its binary representation at the beginning of a byte\n   * array.\n   *\n   * Returns an array with the first element containing the CID and the second\n   * element containing the remainder of the original byte array. The remainder\n   * will be a zero-length byte array if the provided bytes only contained a\n   * binary CID representation.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} bytes\n   * @returns {[CID<T, C, A, V>, Uint8Array]}\n   */\n  static decodeFirst (bytes) {\n    const specs = CID.inspectBytes(bytes)\n    const prefixSize = specs.size - specs.multihashSize\n    const multihashBytes = coerce(\n      bytes.subarray(prefixSize, prefixSize + specs.multihashSize)\n    )\n    if (multihashBytes.byteLength !== specs.multihashSize) {\n      throw new Error('Incorrect length')\n    }\n    const digestBytes = multihashBytes.subarray(\n      specs.multihashSize - specs.digestSize\n    )\n    const digest = new Digest.Digest(\n      specs.multihashCode,\n      specs.digestSize,\n      digestBytes,\n      multihashBytes\n    )\n    const cid =\n      specs.version === 0\n        ? CID.createV0(/** @type {API.MultihashDigest<API.SHA_256>} */ (digest))\n        : CID.createV1(specs.codec, digest)\n    return [/** @type {CID<T, C, A, V>} */(cid), bytes.subarray(specs.size)]\n  }\n\n  /**\n   * Inspect the initial bytes of a CID to determine its properties.\n   *\n   * Involves decoding up to 4 varints. Typically this will require only 4 to 6\n   * bytes but for larger multicodec code values and larger multihash digest\n   * lengths these varints can be quite large. It is recommended that at least\n   * 10 bytes be made available in the `initialBytes` argument for a complete\n   * inspection.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} initialBytes\n   * @returns {{ version:V, codec:C, multihashCode:A, digestSize:number, multihashSize:number, size:number }}\n   */\n  static inspectBytes (initialBytes) {\n    let offset = 0\n    const next = () => {\n      const [i, length] = varint.decode(initialBytes.subarray(offset))\n      offset += length\n      return i\n    }\n\n    let version = /** @type {V} */ (next())\n    let codec = /** @type {C} */ (DAG_PB_CODE)\n    if (/** @type {number} */(version) === 18) {\n      // CIDv0\n      version = /** @type {V} */ (0)\n      offset = 0\n    } else {\n      codec = /** @type {C} */ (next())\n    }\n\n    if (version !== 0 && version !== 1) {\n      throw new RangeError(`Invalid CID version ${version}`)\n    }\n\n    const prefixSize = offset\n    const multihashCode = /** @type {A} */ (next()) // multihash code\n    const digestSize = next() // multihash length\n    const size = offset + digestSize\n    const multihashSize = size - prefixSize\n\n    return { version, codec, multihashCode, digestSize, multihashSize, size }\n  }\n\n  /**\n   * Takes cid in a string representation and creates an instance. If `base`\n   * decoder is not provided will use a default from the configuration. It will\n   * throw an error if encoding of the CID is not compatible with supplied (or\n   * a default decoder).\n   *\n   * @template {string} Prefix\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n   * @param {API.MultibaseDecoder<Prefix>} [base]\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static parse (source, base) {\n    const [prefix, bytes] = parseCIDtoBytes(source, base)\n\n    const cid = CID.decode(bytes)\n\n    if (cid.version === 0 && source[0] !== 'Q') {\n      throw Error('Version 0 CID string must not include multibase prefix')\n    }\n\n    // Cache string representation to avoid computing it on `this.toString()`\n    baseCache(cid).set(prefix, source)\n\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @template {unknown} Data\n * @template {number} Code\n * @template {number} Alg\n * @template {API.Version} Ver\n * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n * @param {API.MultibaseDecoder<Prefix>} [base]\n * @returns {[Prefix, API.ByteView<API.Link<Data, Code, Alg, Ver>>]}\n */\nconst parseCIDtoBytes = (source, base) => {\n  switch (source[0]) {\n    // CIDv0 is parsed differently\n    case 'Q': {\n      const decoder = base || base58btc\n      return [\n        /** @type {Prefix} */ (base58btc.prefix),\n        decoder.decode(`${base58btc.prefix}${source}`)\n      ]\n    }\n    case base58btc.prefix: {\n      const decoder = base || base58btc\n      return [/** @type {Prefix} */(base58btc.prefix), decoder.decode(source)]\n    }\n    case base32.prefix: {\n      const decoder = base || base32\n      return [/** @type {Prefix} */(base32.prefix), decoder.decode(source)]\n    }\n    default: {\n      if (base == null) {\n        throw Error(\n          'To parse non base32 or base58btc encoded CID multibase decoder must be provided'\n        )\n      }\n      return [/** @type {Prefix} */(source[0]), base.decode(source)]\n    }\n  }\n}\n\n/**\n *\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<'z'>} base\n */\nconst toStringV0 = (bytes, cache, base) => {\n  const { prefix } = base\n  if (prefix !== base58btc.prefix) {\n    throw Error(`Cannot string encode V0 in ${base.name} encoding`)\n  }\n\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes).slice(1)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<Prefix>} base\n */\nconst toStringV1 = (bytes, cache, base) => {\n  const { prefix } = base\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\nconst DAG_PB_CODE = 0x70\nconst SHA_256_CODE = 0x12\n\n/**\n * @param {API.Version} version\n * @param {number} code\n * @param {Uint8Array} multihash\n * @returns {Uint8Array}\n */\nconst encodeCID = (version, code, multihash) => {\n  const codeOffset = varint.encodingLength(version)\n  const hashOffset = codeOffset + varint.encodingLength(code)\n  const bytes = new Uint8Array(hashOffset + multihash.byteLength)\n  varint.encodeTo(version, bytes, 0)\n  varint.encodeTo(code, bytes, codeOffset)\n  bytes.set(multihash, hashOffset)\n  return bytes\n}\n\nconst cidSymbol = Symbol.for('@ipld/js-cid/CID')\n","import { from } from 'multiformats/hashes/hasher'\nimport { bytes } from 'multiformats'\n// @ts-expect-error no types\nimport mur from 'murmurhash3js-revisited'\n\n/**\n * @param {number} number\n * @returns {Uint8Array}\n */\nfunction fromNumberTo32BitBuf (number) {\n  const bytes = new Array(4)\n  for (let i = 0; i < 4; i++) {\n    bytes[i] = number & 0xff\n    number = number >> 8\n  }\n  return new Uint8Array(bytes)\n}\n\nexport const murmur332 = from({\n  name: 'murmur3-32',\n  code: 0x23,\n  encode: (input) => fromNumberTo32BitBuf(mur.x86.hash32(input))\n})\n\nexport const murmur3128 = from({\n  name: 'murmur3-128',\n  code: 0x22,\n  encode: (input) => bytes.fromHex(mur.x64.hash128(input))\n})\n\n// A special-use 0x22 that truncates 64 bits, specifically for use in the UnixFS HAMT\nexport const murmur364 = from({\n  name: 'murmur3-x64-64',\n  code: 0x22,\n  encode: (input) => bytes.fromHex(mur.x64.hash128(input)).subarray(0, 8)\n})\n","import { encode, prepare } from '@ipld/dag-pb';\nimport { murmur3128 } from '@multiformats/murmur3';\nimport { createHAMT, Bucket } from 'hamt-sharding';\nimport { UnixFS } from 'ipfs-unixfs';\nimport { Dir, CID_V0, CID_V1 } from './dir.js';\nimport { persist } from './utils/persist.js';\nasync function hamtHashFn(buf) {\n    return (await murmur3128.encode(buf))\n        // Murmur3 outputs 128 bit but, accidentally, IPFS Go's\n        // implementation only uses the first 64, so we must do the same\n        // for parity..\n        .slice(0, 8)\n        // Invert buffer because that's how Go impl does it\n        .reverse();\n}\nconst HAMT_HASH_CODE = BigInt(0x22);\nconst DEFAULT_FANOUT_BITS = 8;\nclass DirSharded extends Dir {\n    _bucket;\n    constructor(props, options) {\n        super(props, options);\n        this._bucket = createHAMT({\n            hashFn: hamtHashFn,\n            bits: options.shardFanoutBits ?? DEFAULT_FANOUT_BITS\n        });\n    }\n    async put(name, value) {\n        this.cid = undefined;\n        this.size = undefined;\n        this.nodeSize = undefined;\n        await this._bucket.put(name, value);\n    }\n    async get(name) {\n        return this._bucket.get(name);\n    }\n    childCount() {\n        return this._bucket.leafCount();\n    }\n    directChildrenCount() {\n        return this._bucket.childrenCount();\n    }\n    onlyChild() {\n        return this._bucket.onlyChild();\n    }\n    async *eachChildSeries() {\n        for await (const { key, value } of this._bucket.eachLeafSeries()) {\n            yield {\n                key,\n                child: value\n            };\n        }\n    }\n    estimateNodeSize() {\n        if (this.nodeSize !== undefined) {\n            return this.nodeSize;\n        }\n        this.nodeSize = calculateSize(this._bucket, this, this.options);\n        return this.nodeSize;\n    }\n    async *flush(blockstore) {\n        for await (const entry of flush(this._bucket, blockstore, this, this.options)) {\n            yield {\n                ...entry,\n                path: this.path\n            };\n        }\n    }\n}\nexport default DirSharded;\nasync function* flush(bucket, blockstore, shardRoot, options) {\n    const children = bucket._children;\n    const padLength = (bucket.tableSize() - 1).toString(16).length;\n    const links = [];\n    let childrenSize = 0n;\n    for (let i = 0; i < children.length; i++) {\n        const child = children.get(i);\n        if (child == null) {\n            continue;\n        }\n        const labelPrefix = i.toString(16).toUpperCase().padStart(padLength, '0');\n        if (child instanceof Bucket) {\n            let shard;\n            for await (const subShard of flush(child, blockstore, null, options)) {\n                shard = subShard;\n            }\n            if (shard == null) {\n                throw new Error('Could not flush sharded directory, no subshard found');\n            }\n            links.push({\n                Name: labelPrefix,\n                Tsize: Number(shard.size),\n                Hash: shard.cid\n            });\n            childrenSize += shard.size;\n        }\n        else if (isDir(child.value)) {\n            const dir = child.value;\n            let flushedDir;\n            for await (const entry of dir.flush(blockstore)) {\n                flushedDir = entry;\n                yield flushedDir;\n            }\n            if (flushedDir == null) {\n                throw new Error('Did not flush dir');\n            }\n            const label = labelPrefix + child.key;\n            links.push({\n                Name: label,\n                Tsize: Number(flushedDir.size),\n                Hash: flushedDir.cid\n            });\n            childrenSize += flushedDir.size;\n        }\n        else {\n            const value = child.value;\n            if (value.cid == null) {\n                continue;\n            }\n            const label = labelPrefix + child.key;\n            const size = value.size;\n            links.push({\n                Name: label,\n                Tsize: Number(size),\n                Hash: value.cid\n            });\n            childrenSize += BigInt(size ?? 0);\n        }\n    }\n    // go-ipfs uses little endian, that's why we have to\n    // reverse the bit field before storing it\n    const data = Uint8Array.from(children.bitField().reverse());\n    const dir = new UnixFS({\n        type: 'hamt-sharded-directory',\n        data,\n        fanout: BigInt(bucket.tableSize()),\n        hashType: HAMT_HASH_CODE,\n        mtime: shardRoot?.mtime,\n        mode: shardRoot?.mode\n    });\n    const node = {\n        Data: dir.marshal(),\n        Links: links\n    };\n    const buffer = encode(prepare(node));\n    const cid = await persist(buffer, blockstore, options);\n    const size = BigInt(buffer.byteLength) + childrenSize;\n    yield {\n        cid,\n        unixfs: dir,\n        size\n    };\n}\nfunction isDir(obj) {\n    return typeof obj.flush === 'function';\n}\nfunction calculateSize(bucket, shardRoot, options) {\n    const children = bucket._children;\n    const padLength = (bucket.tableSize() - 1).toString(16).length;\n    const links = [];\n    for (let i = 0; i < children.length; i++) {\n        const child = children.get(i);\n        if (child == null) {\n            continue;\n        }\n        const labelPrefix = i.toString(16).toUpperCase().padStart(padLength, '0');\n        if (child instanceof Bucket) {\n            const size = calculateSize(child, null, options);\n            links.push({\n                Name: labelPrefix,\n                Tsize: Number(size),\n                Hash: options.cidVersion === 0 ? CID_V0 : CID_V1\n            });\n        }\n        else if (typeof child.value.flush === 'function') {\n            const dir = child.value;\n            const size = dir.nodeSize();\n            links.push({\n                Name: labelPrefix + child.key,\n                Tsize: Number(size),\n                Hash: options.cidVersion === 0 ? CID_V0 : CID_V1\n            });\n        }\n        else {\n            const value = child.value;\n            if (value.cid == null) {\n                continue;\n            }\n            const label = labelPrefix + child.key;\n            const size = value.size;\n            links.push({\n                Name: label,\n                Tsize: Number(size),\n                Hash: value.cid\n            });\n        }\n    }\n    // go-ipfs uses little endian, that's why we have to\n    // reverse the bit field before storing it\n    const data = Uint8Array.from(children.bitField().reverse());\n    const dir = new UnixFS({\n        type: 'hamt-sharded-directory',\n        data,\n        fanout: BigInt(bucket.tableSize()),\n        hashType: HAMT_HASH_CODE,\n        mtime: shardRoot?.mtime,\n        mode: shardRoot?.mode\n    });\n    const buffer = encode(prepare({\n        Data: dir.marshal(),\n        Links: links\n    }));\n    return buffer.length;\n}\n//# sourceMappingURL=dir-sharded.js.map","import { DirFlat } from './dir-flat.js';\nimport DirSharded, {} from './dir-sharded.js';\nexport async function flatToShard(child, dir, threshold, options) {\n    let newDir = dir;\n    if (dir instanceof DirFlat && dir.estimateNodeSize() > threshold) {\n        newDir = await convertToShard(dir, options);\n    }\n    const parent = newDir.parent;\n    if (parent != null) {\n        if (newDir !== dir) {\n            if (child != null) {\n                child.parent = newDir;\n            }\n            if (newDir.parentKey == null) {\n                throw new Error('No parent key found');\n            }\n            await parent.put(newDir.parentKey, newDir);\n        }\n        return flatToShard(newDir, parent, threshold, options);\n    }\n    return newDir;\n}\nasync function convertToShard(oldDir, options) {\n    const newDir = new DirSharded({\n        root: oldDir.root,\n        dir: true,\n        parent: oldDir.parent,\n        parentKey: oldDir.parentKey,\n        path: oldDir.path,\n        dirty: oldDir.dirty,\n        flat: false,\n        mtime: oldDir.mtime,\n        mode: oldDir.mode\n    }, options);\n    for await (const { key, child } of oldDir.eachChildSeries()) {\n        await newDir.put(key, child);\n    }\n    return newDir;\n}\n//# sourceMappingURL=flat-to-shard.js.map","export const toPathComponents = (path = '') => {\n    // split on / unless escaped with \\\n    return path.split(/(?<!\\\\)\\//).filter(Boolean);\n};\n//# sourceMappingURL=to-path-components.js.map","import { DirFlat } from './dir-flat.js';\nimport { Dir } from './dir.js';\nimport { flatToShard } from './flat-to-shard.js';\nimport { toPathComponents } from './utils/to-path-components.js';\nasync function addToTree(elem, tree, options) {\n    const pathElems = toPathComponents(elem.path ?? '');\n    const lastIndex = pathElems.length - 1;\n    let parent = tree;\n    let currentPath = '';\n    for (let i = 0; i < pathElems.length; i++) {\n        const pathElem = pathElems[i];\n        currentPath += `${currentPath !== '' ? '/' : ''}${pathElem}`;\n        const last = (i === lastIndex);\n        parent.dirty = true;\n        parent.cid = undefined;\n        parent.size = undefined;\n        if (last) {\n            await parent.put(pathElem, elem);\n            tree = await flatToShard(null, parent, options.shardSplitThresholdBytes, options);\n        }\n        else {\n            let dir = await parent.get(pathElem);\n            if ((dir == null) || !(dir instanceof Dir)) {\n                dir = new DirFlat({\n                    root: false,\n                    dir: true,\n                    parent,\n                    parentKey: pathElem,\n                    path: currentPath,\n                    dirty: true,\n                    flat: true,\n                    mtime: dir?.unixfs?.mtime,\n                    mode: dir?.unixfs?.mode\n                }, options);\n            }\n            await parent.put(pathElem, dir);\n            parent = dir;\n        }\n    }\n    return tree;\n}\nasync function* flushAndYield(tree, blockstore) {\n    if (!(tree instanceof Dir)) {\n        if (tree.unixfs?.isDirectory() === true) {\n            yield tree;\n        }\n        return;\n    }\n    yield* tree.flush(blockstore);\n}\nexport function defaultTreeBuilder(options) {\n    return async function* treeBuilder(source, block) {\n        let tree = new DirFlat({\n            root: true,\n            dir: true,\n            path: '',\n            dirty: true,\n            flat: true\n        }, options);\n        let rootDir;\n        let singleRoot = false;\n        for await (const entry of source) {\n            if (entry == null) {\n                continue;\n            }\n            // if all paths are from the same root directory, we should\n            // wrap them all in that root directory\n            const dir = `${entry.originalPath ?? ''}`.split('/')[0];\n            if (dir != null && dir !== '') {\n                if (rootDir == null) {\n                    rootDir = dir;\n                    singleRoot = true;\n                }\n                else if (rootDir !== dir) {\n                    singleRoot = false;\n                }\n            }\n            tree = await addToTree(entry, tree, options);\n            if (entry.unixfs == null || !entry.unixfs.isDirectory()) {\n                yield entry;\n            }\n        }\n        if (options.wrapWithDirectory || (singleRoot && tree.childCount() > 1)) {\n            yield* flushAndYield(tree, block);\n        }\n        else {\n            for await (const unwrapped of tree.eachChildSeries()) {\n                if (unwrapped == null) {\n                    continue;\n                }\n                yield* flushAndYield(unwrapped.child, block);\n            }\n        }\n    };\n}\n//# sourceMappingURL=tree-builder.js.map","import errcode from 'err-code';\nimport first from 'it-first';\nimport parallelBatch from 'it-parallel-batch';\nimport { fixedSize } from './chunker/fixed-size.js';\nimport { defaultBufferImporter } from './dag-builder/buffer-importer.js';\nimport { defaultDagBuilder } from './dag-builder/index.js';\nimport { defaultChunkValidator } from './dag-builder/validate-chunks.js';\nimport { balanced } from './layout/index.js';\nimport { defaultTreeBuilder } from './tree-builder.js';\n/**\n * The importer creates UnixFS DAGs and stores the blocks that make\n * them up in the passed blockstore.\n *\n * @example\n *\n * ```typescript\n * import { importer } from 'ipfs-unixfs-importer'\n * import { MemoryBlockstore } from 'blockstore-core'\n *\n * // store blocks in memory, other blockstores are available\n * const blockstore = new MemoryBlockstore()\n *\n * const input = [{\n *   path: './foo.txt',\n *   content: Uint8Array.from([0, 1, 2, 3, 4])\n * }, {\n *   path: './bar.txt',\n *   content: Uint8Array.from([0, 1, 2, 3, 4])\n * }]\n *\n * for await (const entry of importer(input, blockstore)) {\n *   console.info(entry)\n *   // { cid: CID(), ... }\n * }\n * ```\n */\nexport async function* importer(source, blockstore, options = {}) {\n    let candidates;\n    if (Symbol.asyncIterator in source || Symbol.iterator in source) {\n        candidates = source;\n    }\n    else {\n        candidates = [source];\n    }\n    const wrapWithDirectory = options.wrapWithDirectory ?? false;\n    const shardSplitThresholdBytes = options.shardSplitThresholdBytes ?? 262144;\n    const shardFanoutBits = options.shardFanoutBits ?? 8;\n    const cidVersion = options.cidVersion ?? 1;\n    const rawLeaves = options.rawLeaves ?? true;\n    const leafType = options.leafType ?? 'file';\n    const fileImportConcurrency = options.fileImportConcurrency ?? 50;\n    const blockWriteConcurrency = options.blockWriteConcurrency ?? 10;\n    const reduceSingleLeafToSelf = options.reduceSingleLeafToSelf ?? true;\n    const chunker = options.chunker ?? fixedSize();\n    const chunkValidator = options.chunkValidator ?? defaultChunkValidator();\n    const buildDag = options.dagBuilder ?? defaultDagBuilder({\n        chunker,\n        chunkValidator,\n        wrapWithDirectory,\n        layout: options.layout ?? balanced(),\n        bufferImporter: options.bufferImporter ?? defaultBufferImporter({\n            cidVersion,\n            rawLeaves,\n            leafType,\n            onProgress: options.onProgress\n        }),\n        blockWriteConcurrency,\n        reduceSingleLeafToSelf,\n        cidVersion,\n        onProgress: options.onProgress\n    });\n    const buildTree = options.treeBuilder ?? defaultTreeBuilder({\n        wrapWithDirectory,\n        shardSplitThresholdBytes,\n        shardFanoutBits,\n        cidVersion,\n        onProgress: options.onProgress\n    });\n    for await (const entry of buildTree(parallelBatch(buildDag(candidates, blockstore), fileImportConcurrency), blockstore)) {\n        yield {\n            cid: entry.cid,\n            path: entry.path,\n            unixfs: entry.unixfs,\n            size: entry.size\n        };\n    }\n}\n/**\n * `importFile` is similar to `importer` except it accepts a single\n * `FileCandidate` and returns a promise of a single `ImportResult`\n * instead of a stream of results.\n *\n * @example\n *\n * ```typescript\n * import { importFile } from 'ipfs-unixfs-importer'\n * import { MemoryBlockstore } from 'blockstore-core'\n *\n * // store blocks in memory, other blockstores are available\n * const blockstore = new MemoryBlockstore()\n *\n * const input: FileCandidate = {\n *   path: './foo.txt',\n *   content: Uint8Array.from([0, 1, 2, 3, 4])\n * }\n *\n * const entry = await importFile(input, blockstore)\n * ```\n */\nexport async function importFile(content, blockstore, options = {}) {\n    const result = await first(importer([content], blockstore, options));\n    if (result == null) {\n        throw errcode(new Error('Nothing imported'), 'ERR_INVALID_PARAMS');\n    }\n    return result;\n}\n/**\n * `importDir` is similar to `importer` except it accepts a single\n * `DirectoryCandidate` and returns a promise of a single `ImportResult`\n * instead of a stream of results.\n *\n * @example\n *\n * ```typescript\n * import { importDirectory } from 'ipfs-unixfs-importer'\n * import { MemoryBlockstore } from 'blockstore-core'\n *\n * // store blocks in memory, other blockstores are available\n * const blockstore = new MemoryBlockstore()\n *\n * const input: DirectoryCandidate = {\n *   path: './foo.txt'\n * }\n *\n * const entry = await importDirectory(input, blockstore)\n * ```\n */\nexport async function importDirectory(content, blockstore, options = {}) {\n    const result = await first(importer([content], blockstore, options));\n    if (result == null) {\n        throw errcode(new Error('Nothing imported'), 'ERR_INVALID_PARAMS');\n    }\n    return result;\n}\n/**\n * `importBytes` accepts a single Uint8Array and returns a promise\n * of a single `ImportResult`.\n *\n * @example\n *\n * ```typescript\n * import { importBytes } from 'ipfs-unixfs-importer'\n * import { MemoryBlockstore } from 'blockstore-core'\n *\n * // store blocks in memory, other blockstores are available\n * const blockstore = new MemoryBlockstore()\n *\n * const input = Uint8Array.from([0, 1, 2, 3, 4])\n *\n * const entry = await importBytes(input, blockstore)\n * ```\n */\nexport async function importBytes(buf, blockstore, options = {}) {\n    return importFile({\n        content: buf\n    }, blockstore, options);\n}\n/**\n * `importByteStream` accepts a single stream of Uint8Arrays and\n * returns a promise of a single `ImportResult`.\n *\n * @example\n *\n * ```typescript\n * import { importByteStream } from 'ipfs-unixfs-importer'\n * import { MemoryBlockstore } from 'blockstore-core'\n *\n * // store blocks in memory, other blockstores are available\n * const blockstore = new MemoryBlockstore()\n *\n * const input = [\n *   Uint8Array.from([0, 1, 2, 3, 4]),\n *   Uint8Array.from([5, 6, 7, 8, 9])\n * ]\n *\n * const entry = await importByteStream(input, blockstore)\n * ```\n */\nexport async function importByteStream(bufs, blockstore, options = {}) {\n    return importFile({\n        content: bufs\n    }, blockstore, options);\n}\n//# sourceMappingURL=index.js.map","import errcode from 'err-code';\n// @ts-expect-error no types\nimport { create } from 'rabin-wasm';\nimport { Uint8ArrayList } from 'uint8arraylist';\nconst DEFAULT_MIN_CHUNK_SIZE = 262144;\nconst DEFAULT_MAX_CHUNK_SIZE = 262144;\nconst DEFAULT_AVG_CHUNK_SIZE = 262144;\nconst DEFAULT_WINDOW = 16;\nasync function* chunker(source, r) {\n    const buffers = new Uint8ArrayList();\n    for await (const chunk of source) {\n        buffers.append(chunk);\n        const sizes = r.fingerprint(chunk);\n        for (let i = 0; i < sizes.length; i++) {\n            const size = sizes[i];\n            const buf = buffers.slice(0, size);\n            buffers.consume(size);\n            yield buf;\n        }\n    }\n    if (buffers.length > 0) {\n        yield buffers.subarray(0);\n    }\n}\nexport const rabin = (options = {}) => {\n    let min = options.minChunkSize ?? DEFAULT_MIN_CHUNK_SIZE;\n    let max = options.maxChunkSize ?? DEFAULT_MAX_CHUNK_SIZE;\n    let avg = options.avgChunkSize ?? DEFAULT_AVG_CHUNK_SIZE;\n    const window = options.window ?? DEFAULT_WINDOW;\n    // if only avg was passed, calculate min/max from that\n    if (options.avgChunkSize != null && options.minChunkSize == null && options.maxChunkSize == null) {\n        min = avg / 3;\n        max = avg + (avg / 2);\n    }\n    const isInvalidChunkSizes = [min, avg, max].some((size) => size == null || isNaN(size));\n    if (isInvalidChunkSizes) {\n        if (options.avgChunkSize != null) {\n            throw errcode(new Error('please specify a valid average chunk size number'), 'ERR_INVALID_AVG_CHUNK_SIZE');\n        }\n        throw errcode(new Error('please specify valid numbers for (min|max|avg)ChunkSize'), 'ERR_INVALID_CHUNK_SIZE');\n    }\n    // validate min/max/avg in the same way as go\n    if (min < 16) {\n        throw errcode(new Error('rabin min must be greater than 16'), 'ERR_INVALID_MIN_CHUNK_SIZE');\n    }\n    if (max < min) {\n        max = min;\n    }\n    if (avg < min) {\n        avg = min;\n    }\n    const sizepow = Math.floor(Math.log2(avg));\n    return async function* rabinChunker(source) {\n        const r = await create(sizepow, min, max, window);\n        for await (const chunk of chunker(source, r)) {\n            yield chunk;\n        }\n    };\n};\n//# sourceMappingURL=rabin.js.map","import { importBytes, importByteStream, importDirectory, importer, importFile } from 'ipfs-unixfs-importer';\nimport { fixedSize } from 'ipfs-unixfs-importer/chunker';\nimport { balanced } from 'ipfs-unixfs-importer/layout';\n/**\n * Default importer settings match Filecoin\n */\nconst defaultImporterSettings = {\n    cidVersion: 1,\n    rawLeaves: true,\n    layout: balanced({\n        maxChildrenPerNode: 1024\n    }),\n    chunker: fixedSize({\n        chunkSize: 1048576\n    })\n};\nexport async function* addAll(source, blockstore, options = {}) {\n    yield* importer(source, blockstore, {\n        ...defaultImporterSettings,\n        ...options\n    });\n}\nexport async function addBytes(bytes, blockstore, options = {}) {\n    const { cid } = await importBytes(bytes, blockstore, {\n        ...defaultImporterSettings,\n        ...options\n    });\n    return cid;\n}\nexport async function addByteStream(bytes, blockstore, options = {}) {\n    const { cid } = await importByteStream(bytes, blockstore, {\n        ...defaultImporterSettings,\n        ...options\n    });\n    return cid;\n}\nexport async function addFile(file, blockstore, options = {}) {\n    const { cid } = await importFile(file, blockstore, {\n        ...defaultImporterSettings,\n        ...options\n    });\n    return cid;\n}\nexport async function addDirectory(dir, blockstore, options = {}) {\n    const { cid } = await importDirectory({\n        ...dir,\n        path: dir.path ?? '-'\n    }, blockstore, {\n        ...defaultImporterSettings,\n        ...options\n    });\n    return cid;\n}\n//# sourceMappingURL=add.js.map","function isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction last(source) {\n    if (isAsyncIterable(source)) {\n        return (async () => {\n            let res;\n            for await (const entry of source) {\n                res = entry;\n            }\n            return res;\n        })();\n    }\n    let res;\n    for (const entry of source) {\n        res = entry;\n    }\n    return res;\n}\nexport default last;\n//# sourceMappingURL=index.js.map","import { coerce } from '../bytes.js'\nimport * as Digest from './digest.js'\n\nconst code = 0x0\nconst name = 'identity'\n\n/** @type {(input:Uint8Array) => Uint8Array} */\nconst encode = coerce\n\n/**\n * @param {Uint8Array} input\n * @returns {Digest.Digest<typeof code, number>}\n */\nconst digest = (input) => Digest.create(code, encode(input))\n\nexport const identity = { code, name, encode, digest }\n","import * as dagCbor from '@ipld/dag-cbor';\nimport errCode from 'err-code';\nimport { CID } from 'multiformats/cid';\nconst resolve = async (cid, name, path, toResolve, resolve, depth, blockstore, options) => {\n    const block = await blockstore.get(cid, options);\n    const object = dagCbor.decode(block);\n    let subObject = object;\n    let subPath = path;\n    while (toResolve.length > 0) {\n        const prop = toResolve[0];\n        if (prop in subObject) {\n            // remove the bit of the path we have resolved\n            toResolve.shift();\n            subPath = `${subPath}/${prop}`;\n            const subObjectCid = CID.asCID(subObject[prop]);\n            if (subObjectCid != null) {\n                return {\n                    entry: {\n                        type: 'object',\n                        name,\n                        path,\n                        cid,\n                        node: block,\n                        depth,\n                        size: BigInt(block.length),\n                        content: async function* () {\n                            yield object;\n                        }\n                    },\n                    next: {\n                        cid: subObjectCid,\n                        name: prop,\n                        path: subPath,\n                        toResolve\n                    }\n                };\n            }\n            subObject = subObject[prop];\n        }\n        else {\n            // cannot resolve further\n            throw errCode(new Error(`No property named ${prop} found in cbor node ${cid}`), 'ERR_NO_PROP');\n        }\n    }\n    return {\n        entry: {\n            type: 'object',\n            name,\n            path,\n            cid,\n            node: block,\n            depth,\n            size: BigInt(block.length),\n            content: async function* () {\n                yield object;\n            }\n        }\n    };\n};\nexport default resolve;\n//# sourceMappingURL=dag-cbor.js.map","function extractDataFromBlock(block, blockStart, requestedStart, requestedEnd) {\n    const blockLength = BigInt(block.length);\n    const blockEnd = BigInt(blockStart + blockLength);\n    if (requestedStart >= blockEnd || requestedEnd < blockStart) {\n        // If we are looking for a byte range that is starts after the start of the block,\n        // return an empty block.  This can happen when internal nodes contain data\n        return new Uint8Array(0);\n    }\n    if (requestedEnd >= blockStart && requestedEnd < blockEnd) {\n        // If the end byte is in the current block, truncate the block to the end byte\n        block = block.subarray(0, Number(requestedEnd - blockStart));\n    }\n    if (requestedStart >= blockStart && requestedStart < blockEnd) {\n        // If the start byte is in the current block, skip to the start byte\n        block = block.subarray(Number(requestedStart - blockStart));\n    }\n    return block;\n}\nexport default extractDataFromBlock;\n//# sourceMappingURL=extract-data-from-block.js.map","import errCode from 'err-code';\nconst validateOffsetAndLength = (size, offset = 0, length = size) => {\n    const fileSize = BigInt(size);\n    const start = BigInt(offset ?? 0);\n    let end = BigInt(length);\n    if (end !== fileSize) {\n        end = start + end;\n    }\n    if (end > fileSize) {\n        end = fileSize;\n    }\n    if (start < 0n) {\n        throw errCode(new Error('Offset must be greater than or equal to 0'), 'ERR_INVALID_PARAMS');\n    }\n    if (start > fileSize) {\n        throw errCode(new Error('Offset must be less than the file size'), 'ERR_INVALID_PARAMS');\n    }\n    if (end < 0n) {\n        throw errCode(new Error('Length must be greater than or equal to 0'), 'ERR_INVALID_PARAMS');\n    }\n    if (end > fileSize) {\n        throw errCode(new Error('Length must be less than the file size'), 'ERR_INVALID_PARAMS');\n    }\n    return {\n        start,\n        end\n    };\n};\nexport default validateOffsetAndLength;\n//# sourceMappingURL=validate-offset-and-length.js.map","import errCode from 'err-code';\nimport * as mh from 'multiformats/hashes/digest';\nimport { CustomProgressEvent } from 'progress-events';\nimport extractDataFromBlock from '../utils/extract-data-from-block.js';\nimport validateOffsetAndLength from '../utils/validate-offset-and-length.js';\nconst rawContent = (node) => {\n    async function* contentGenerator(options = {}) {\n        const { start, end } = validateOffsetAndLength(node.length, options.offset, options.length);\n        const buf = extractDataFromBlock(node, 0n, start, end);\n        options.onProgress?.(new CustomProgressEvent('unixfs:exporter:progress:identity', {\n            bytesRead: BigInt(buf.byteLength),\n            totalBytes: end - start,\n            fileSize: BigInt(node.byteLength)\n        }));\n        yield buf;\n    }\n    return contentGenerator;\n};\nconst resolve = async (cid, name, path, toResolve, resolve, depth, blockstore, options) => {\n    if (toResolve.length > 0) {\n        throw errCode(new Error(`No link named ${path} found in raw node ${cid}`), 'ERR_NOT_FOUND');\n    }\n    const buf = mh.decode(cid.multihash.bytes);\n    return {\n        entry: {\n            type: 'identity',\n            name,\n            path,\n            cid,\n            content: rawContent(buf.digest),\n            depth,\n            size: BigInt(buf.digest.length),\n            node: buf.digest\n        }\n    };\n};\nexport default resolve;\n//# sourceMappingURL=identity.js.map","import errCode from 'err-code';\nimport { CustomProgressEvent } from 'progress-events';\nimport extractDataFromBlock from '../utils/extract-data-from-block.js';\nimport validateOffsetAndLength from '../utils/validate-offset-and-length.js';\nconst rawContent = (node) => {\n    async function* contentGenerator(options = {}) {\n        const { start, end } = validateOffsetAndLength(node.length, options.offset, options.length);\n        const buf = extractDataFromBlock(node, 0n, start, end);\n        options.onProgress?.(new CustomProgressEvent('unixfs:exporter:progress:raw', {\n            bytesRead: BigInt(buf.byteLength),\n            totalBytes: end - start,\n            fileSize: BigInt(node.byteLength)\n        }));\n        yield buf;\n    }\n    return contentGenerator;\n};\nconst resolve = async (cid, name, path, toResolve, resolve, depth, blockstore, options) => {\n    if (toResolve.length > 0) {\n        throw errCode(new Error(`No link named ${path} found in raw node ${cid}`), 'ERR_NOT_FOUND');\n    }\n    const block = await blockstore.get(cid, options);\n    return {\n        entry: {\n            type: 'raw',\n            name,\n            path,\n            cid,\n            content: rawContent(block),\n            depth,\n            size: BigInt(block.length),\n            node: block\n        }\n    };\n};\nexport default resolve;\n//# sourceMappingURL=raw.js.map","const empty = new Uint8Array(0)\n\n/**\n * @param {Uint8Array} d\n */\nconst toHex = d => d.reduce((hex, byte) => hex + byte.toString(16).padStart(2, '0'), '')\n\n/**\n * @param {string} hex\n */\nconst fromHex = hex => {\n  const hexes = hex.match(/../g)\n  return hexes ? new Uint8Array(hexes.map(b => parseInt(b, 16))) : empty\n}\n\n/**\n * @param {Uint8Array} aa\n * @param {Uint8Array} bb\n */\nconst equals = (aa, bb) => {\n  if (aa === bb) return true\n  if (aa.byteLength !== bb.byteLength) {\n    return false\n  }\n\n  for (let ii = 0; ii < aa.byteLength; ii++) {\n    if (aa[ii] !== bb[ii]) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * @param {ArrayBufferView|ArrayBuffer|Uint8Array} o\n * @returns {Uint8Array}\n */\nconst coerce = o => {\n  if (o instanceof Uint8Array && o.constructor.name === 'Uint8Array') return o\n  if (o instanceof ArrayBuffer) return new Uint8Array(o)\n  if (ArrayBuffer.isView(o)) {\n    return new Uint8Array(o.buffer, o.byteOffset, o.byteLength)\n  }\n  throw new Error('Unknown type, must be binary type')\n}\n\n/**\n * @param {any} o\n * @returns {o is ArrayBuffer|ArrayBufferView}\n */\nconst isBinary = o =>\n  o instanceof ArrayBuffer || ArrayBuffer.isView(o)\n\n/**\n * @param {string} str\n * @returns {Uint8Array}\n */\nconst fromString = str => (new TextEncoder()).encode(str)\n\n/**\n * @param {Uint8Array} b\n * @returns {string}\n */\nconst toString = b => (new TextDecoder()).decode(b)\n\nexport { equals, coerce, isBinary, fromHex, toHex, fromString, toString, empty }\n","var encode_1 = encode;\n\nvar MSB = 0x80\n  , REST = 0x7F\n  , MSBALL = ~REST\n  , INT = Math.pow(2, 31);\n\nfunction encode(num, out, offset) {\n  out = out || [];\n  offset = offset || 0;\n  var oldOffset = offset;\n\n  while(num >= INT) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num /= 128;\n  }\n  while(num & MSBALL) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num >>>= 7;\n  }\n  out[offset] = num | 0;\n  \n  encode.bytes = offset - oldOffset + 1;\n  \n  return out\n}\n\nvar decode = read;\n\nvar MSB$1 = 0x80\n  , REST$1 = 0x7F;\n\nfunction read(buf, offset) {\n  var res    = 0\n    , offset = offset || 0\n    , shift  = 0\n    , counter = offset\n    , b\n    , l = buf.length;\n\n  do {\n    if (counter >= l) {\n      read.bytes = 0;\n      throw new RangeError('Could not decode varint')\n    }\n    b = buf[counter++];\n    res += shift < 28\n      ? (b & REST$1) << shift\n      : (b & REST$1) * Math.pow(2, shift);\n    shift += 7;\n  } while (b >= MSB$1)\n\n  read.bytes = counter - offset;\n\n  return res\n}\n\nvar N1 = Math.pow(2,  7);\nvar N2 = Math.pow(2, 14);\nvar N3 = Math.pow(2, 21);\nvar N4 = Math.pow(2, 28);\nvar N5 = Math.pow(2, 35);\nvar N6 = Math.pow(2, 42);\nvar N7 = Math.pow(2, 49);\nvar N8 = Math.pow(2, 56);\nvar N9 = Math.pow(2, 63);\n\nvar length = function (value) {\n  return (\n    value < N1 ? 1\n  : value < N2 ? 2\n  : value < N3 ? 3\n  : value < N4 ? 4\n  : value < N5 ? 5\n  : value < N6 ? 6\n  : value < N7 ? 7\n  : value < N8 ? 8\n  : value < N9 ? 9\n  :              10\n  )\n};\n\nvar varint = {\n    encode: encode_1\n  , decode: decode\n  , encodingLength: length\n};\n\nvar _brrp_varint = varint;\n\nexport default _brrp_varint;\n","import varint from '../vendor/varint.js'\n\n/**\n * @param {Uint8Array} data\n * @param {number} [offset=0]\n * @returns {[number, number]}\n */\nexport const decode = (data, offset = 0) => {\n  const code = varint.decode(data, offset)\n  return [code, varint.decode.bytes]\n}\n\n/**\n * @param {number} int\n * @param {Uint8Array} target\n * @param {number} [offset=0]\n */\nexport const encodeTo = (int, target, offset = 0) => {\n  varint.encode(int, target, offset)\n  return target\n}\n\n/**\n * @param {number} int\n * @returns {number}\n */\nexport const encodingLength = (int) => {\n  return varint.encodingLength(int)\n}\n","import { coerce, equals as equalBytes } from '../bytes.js'\nimport * as varint from '../varint.js'\n\n/**\n * Creates a multihash digest.\n *\n * @template {number} Code\n * @param {Code} code\n * @param {Uint8Array} digest\n */\nexport const create = (code, digest) => {\n  const size = digest.byteLength\n  const sizeOffset = varint.encodingLength(code)\n  const digestOffset = sizeOffset + varint.encodingLength(size)\n\n  const bytes = new Uint8Array(digestOffset + size)\n  varint.encodeTo(code, bytes, 0)\n  varint.encodeTo(size, bytes, sizeOffset)\n  bytes.set(digest, digestOffset)\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * Turns bytes representation of multihash digest into an instance.\n *\n * @param {Uint8Array} multihash\n * @returns {MultihashDigest}\n */\nexport const decode = (multihash) => {\n  const bytes = coerce(multihash)\n  const [code, sizeOffset] = varint.decode(bytes)\n  const [size, digestOffset] = varint.decode(bytes.subarray(sizeOffset))\n  const digest = bytes.subarray(sizeOffset + digestOffset)\n\n  if (digest.byteLength !== size) {\n    throw new Error('Incorrect length')\n  }\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * @param {MultihashDigest} a\n * @param {unknown} b\n * @returns {b is MultihashDigest}\n */\nexport const equals = (a, b) => {\n  if (a === b) {\n    return true\n  } else {\n    const data = /** @type {{code?:unknown, size?:unknown, bytes?:unknown}} */(b)\n\n    return (\n      a.code === data.code &&\n      a.size === data.size &&\n      data.bytes instanceof Uint8Array &&\n      equalBytes(a.bytes, data.bytes)\n    )\n  }\n}\n\n/**\n * @typedef {import('./interface.js').MultihashDigest} MultihashDigest\n */\n\n/**\n * Represents a multihash digest which carries information about the\n * hashing algorithm and an actual hash digest.\n *\n * @template {number} Code\n * @template {number} Size\n * @class\n * @implements {MultihashDigest}\n */\nexport class Digest {\n  /**\n   * Creates a multihash digest.\n   *\n   * @param {Code} code\n   * @param {Size} size\n   * @param {Uint8Array} digest\n   * @param {Uint8Array} bytes\n   */\n  constructor (code, size, digest, bytes) {\n    this.code = code\n    this.size = size\n    this.digest = digest\n    this.bytes = bytes\n  }\n}\n","import * as Digest from './digest.js'\n\n/**\n * @template {string} Name\n * @template {number} Code\n * @param {object} options\n * @param {Name} options.name\n * @param {Code} options.code\n * @param {(input: Uint8Array) => Await<Uint8Array>} options.encode\n */\nexport const from = ({ name, code, encode }) => new Hasher(name, code, encode)\n\n/**\n * Hasher represents a hashing algorithm implementation that produces as\n * `MultihashDigest`.\n *\n * @template {string} Name\n * @template {number} Code\n * @class\n * @implements {MultihashHasher<Code>}\n */\nexport class Hasher {\n  /**\n   *\n   * @param {Name} name\n   * @param {Code} code\n   * @param {(input: Uint8Array) => Await<Uint8Array>} encode\n   */\n  constructor (name, code, encode) {\n    this.name = name\n    this.code = code\n    this.encode = encode\n  }\n\n  /**\n   * @param {Uint8Array} input\n   * @returns {Await<Digest.Digest<Code, number>>}\n   */\n  digest (input) {\n    if (input instanceof Uint8Array) {\n      const result = this.encode(input)\n      return result instanceof Uint8Array\n        ? Digest.create(this.code, result)\n        /* c8 ignore next 1 */\n        : result.then(digest => Digest.create(this.code, digest))\n    } else {\n      throw Error('Unknown type, must be binary type')\n      /* c8 ignore next 1 */\n    }\n  }\n}\n\n/**\n * @template {number} Alg\n * @typedef {import('./interface.js').MultihashHasher} MultihashHasher\n */\n\n/**\n * @template T\n * @typedef {Promise<T>|T} Await\n */\n","// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\nfunction base (ALPHABET, name) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256);\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255;\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i);\n    var xc = x.charCodeAt(0);\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i;\n  }\n  var BASE = ALPHABET.length;\n  var LEADER = ALPHABET.charAt(0);\n  var FACTOR = Math.log(BASE) / Math.log(256); // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE); // log(256) / log(BASE), rounded up\n  function encode (source) {\n    if (source instanceof Uint8Array) ; else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength);\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source);\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0;\n    var length = 0;\n    var pbegin = 0;\n    var pend = source.length;\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++;\n      zeroes++;\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0;\n    var b58 = new Uint8Array(size);\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin];\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0;\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0;\n        b58[it1] = (carry % BASE) >>> 0;\n        carry = (carry / BASE) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      pbegin++;\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length;\n    while (it2 !== size && b58[it2] === 0) {\n      it2++;\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes);\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]); }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    var psz = 0;\n        // Skip leading spaces.\n    if (source[psz] === ' ') { return }\n        // Skip and count leading '1's.\n    var zeroes = 0;\n    var length = 0;\n    while (source[psz] === LEADER) {\n      zeroes++;\n      psz++;\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0; // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size);\n        // Process the characters.\n    while (source[psz]) {\n            // Decode character\n      var carry = BASE_MAP[source.charCodeAt(psz)];\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0;\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0;\n        b256[it3] = (carry % 256) >>> 0;\n        carry = (carry / 256) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      psz++;\n    }\n        // Skip trailing spaces.\n    if (source[psz] === ' ') { return }\n        // Skip leading zeroes in b256.\n    var it4 = size - length;\n    while (it4 !== size && b256[it4] === 0) {\n      it4++;\n    }\n    var vch = new Uint8Array(zeroes + (size - it4));\n    var j = zeroes;\n    while (it4 !== size) {\n      vch[j++] = b256[it4++];\n    }\n    return vch\n  }\n  function decode (string) {\n    var buffer = decodeUnsafe(string);\n    if (buffer) { return buffer }\n    throw new Error(`Non-${name} character`)\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nvar src = base;\n\nvar _brrp__multiformats_scope_baseX = src;\n\nexport default _brrp__multiformats_scope_baseX;\n","import basex from '../../vendor/base-x.js'\nimport { coerce } from '../bytes.js'\n// Linter can't see that API is used in types.\n// eslint-disable-next-line\nimport * as API from './interface.js'\n\n/**\n * Class represents both BaseEncoder and MultibaseEncoder meaning it\n * can be used to encode to multibase or base encode without multibase\n * prefix.\n *\n * @class\n * @template {string} Base\n * @template {string} Prefix\n * @implements {API.MultibaseEncoder<Prefix>}\n * @implements {API.BaseEncoder}\n */\nclass Encoder {\n  /**\n   * @param {Base} name\n   * @param {Prefix} prefix\n   * @param {(bytes:Uint8Array) => string} baseEncode\n   */\n  constructor (name, prefix, baseEncode) {\n    this.name = name\n    this.prefix = prefix\n    this.baseEncode = baseEncode\n  }\n\n  /**\n   * @param {Uint8Array} bytes\n   * @returns {API.Multibase<Prefix>}\n   */\n  encode (bytes) {\n    if (bytes instanceof Uint8Array) {\n      return `${this.prefix}${this.baseEncode(bytes)}`\n    } else {\n      throw Error('Unknown type, must be binary type')\n    }\n  }\n}\n\n/**\n * @template {string} Prefix\n */\n/**\n * Class represents both BaseDecoder and MultibaseDecoder so it could be used\n * to decode multibases (with matching prefix) or just base decode strings\n * with corresponding base encoding.\n *\n * @class\n * @template {string} Base\n * @template {string} Prefix\n * @implements {API.MultibaseDecoder<Prefix>}\n * @implements {API.UnibaseDecoder<Prefix>}\n * @implements {API.BaseDecoder}\n */\nclass Decoder {\n  /**\n   * @param {Base} name\n   * @param {Prefix} prefix\n   * @param {(text:string) => Uint8Array} baseDecode\n   */\n  constructor (name, prefix, baseDecode) {\n    this.name = name\n    this.prefix = prefix\n    /* c8 ignore next 3 */\n    if (prefix.codePointAt(0) === undefined) {\n      throw new Error('Invalid prefix character')\n    }\n    /** @private */\n    this.prefixCodePoint = /** @type {number} */ (prefix.codePointAt(0))\n    this.baseDecode = baseDecode\n  }\n\n  /**\n   * @param {string} text\n   */\n  decode (text) {\n    if (typeof text === 'string') {\n      if (text.codePointAt(0) !== this.prefixCodePoint) {\n        throw Error(`Unable to decode multibase string ${JSON.stringify(text)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)\n      }\n      return this.baseDecode(text.slice(this.prefix.length))\n    } else {\n      throw Error('Can only multibase decode strings')\n    }\n  }\n\n  /**\n   * @template {string} OtherPrefix\n   * @param {API.UnibaseDecoder<OtherPrefix>|ComposedDecoder<OtherPrefix>} decoder\n   * @returns {ComposedDecoder<Prefix|OtherPrefix>}\n   */\n  or (decoder) {\n    return or(this, decoder)\n  }\n}\n\n/**\n * @template {string} Prefix\n * @typedef {Record<Prefix, API.UnibaseDecoder<Prefix>>} Decoders\n */\n\n/**\n * @template {string} Prefix\n * @implements {API.MultibaseDecoder<Prefix>}\n * @implements {API.CombobaseDecoder<Prefix>}\n */\nclass ComposedDecoder {\n  /**\n   * @param {Decoders<Prefix>} decoders\n   */\n  constructor (decoders) {\n    this.decoders = decoders\n  }\n\n  /**\n   * @template {string} OtherPrefix\n   * @param {API.UnibaseDecoder<OtherPrefix>|ComposedDecoder<OtherPrefix>} decoder\n   * @returns {ComposedDecoder<Prefix|OtherPrefix>}\n   */\n  or (decoder) {\n    return or(this, decoder)\n  }\n\n  /**\n   * @param {string} input\n   * @returns {Uint8Array}\n   */\n  decode (input) {\n    const prefix = /** @type {Prefix} */ (input[0])\n    const decoder = this.decoders[prefix]\n    if (decoder) {\n      return decoder.decode(input)\n    } else {\n      throw RangeError(`Unable to decode multibase string ${JSON.stringify(input)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)\n    }\n  }\n}\n\n/**\n * @template {string} L\n * @template {string} R\n * @param {API.UnibaseDecoder<L>|API.CombobaseDecoder<L>} left\n * @param {API.UnibaseDecoder<R>|API.CombobaseDecoder<R>} right\n * @returns {ComposedDecoder<L|R>}\n */\nexport const or = (left, right) => new ComposedDecoder(/** @type {Decoders<L|R>} */({\n  ...(left.decoders || { [/** @type API.UnibaseDecoder<L> */(left).prefix]: left }),\n  ...(right.decoders || { [/** @type API.UnibaseDecoder<R> */(right).prefix]: right })\n}))\n\n/**\n * @class\n * @template {string} Base\n * @template {string} Prefix\n * @implements {API.MultibaseCodec<Prefix>}\n * @implements {API.MultibaseEncoder<Prefix>}\n * @implements {API.MultibaseDecoder<Prefix>}\n * @implements {API.BaseCodec}\n * @implements {API.BaseEncoder}\n * @implements {API.BaseDecoder}\n */\nexport class Codec {\n  /**\n   * @param {Base} name\n   * @param {Prefix} prefix\n   * @param {(bytes:Uint8Array) => string} baseEncode\n   * @param {(text:string) => Uint8Array} baseDecode\n   */\n  constructor (name, prefix, baseEncode, baseDecode) {\n    this.name = name\n    this.prefix = prefix\n    this.baseEncode = baseEncode\n    this.baseDecode = baseDecode\n    this.encoder = new Encoder(name, prefix, baseEncode)\n    this.decoder = new Decoder(name, prefix, baseDecode)\n  }\n\n  /**\n   * @param {Uint8Array} input\n   */\n  encode (input) {\n    return this.encoder.encode(input)\n  }\n\n  /**\n   * @param {string} input\n   */\n  decode (input) {\n    return this.decoder.decode(input)\n  }\n}\n\n/**\n * @template {string} Base\n * @template {string} Prefix\n * @param {object} options\n * @param {Base} options.name\n * @param {Prefix} options.prefix\n * @param {(bytes:Uint8Array) => string} options.encode\n * @param {(input:string) => Uint8Array} options.decode\n * @returns {Codec<Base, Prefix>}\n */\nexport const from = ({ name, prefix, encode, decode }) =>\n  new Codec(name, prefix, encode, decode)\n\n/**\n * @template {string} Base\n * @template {string} Prefix\n * @param {object} options\n * @param {Base} options.name\n * @param {Prefix} options.prefix\n * @param {string} options.alphabet\n * @returns {Codec<Base, Prefix>}\n */\nexport const baseX = ({ prefix, name, alphabet }) => {\n  const { encode, decode } = basex(alphabet, name)\n  return from({\n    prefix,\n    name,\n    encode,\n    /**\n     * @param {string} text\n     */\n    decode: text => coerce(decode(text))\n  })\n}\n\n/**\n * @param {string} string\n * @param {string} alphabet\n * @param {number} bitsPerChar\n * @param {string} name\n * @returns {Uint8Array}\n */\nconst decode = (string, alphabet, bitsPerChar, name) => {\n  // Build the character lookup table:\n  /** @type {Record<string, number>} */\n  const codes = {}\n  for (let i = 0; i < alphabet.length; ++i) {\n    codes[alphabet[i]] = i\n  }\n\n  // Count the padding bytes:\n  let end = string.length\n  while (string[end - 1] === '=') {\n    --end\n  }\n\n  // Allocate the output:\n  const out = new Uint8Array((end * bitsPerChar / 8) | 0)\n\n  // Parse the data:\n  let bits = 0 // Number of bits currently in the buffer\n  let buffer = 0 // Bits waiting to be written out, MSB first\n  let written = 0 // Next byte to write\n  for (let i = 0; i < end; ++i) {\n    // Read one character from the string:\n    const value = codes[string[i]]\n    if (value === undefined) {\n      throw new SyntaxError(`Non-${name} character`)\n    }\n\n    // Append the bits to the buffer:\n    buffer = (buffer << bitsPerChar) | value\n    bits += bitsPerChar\n\n    // Write out some bits if the buffer has a byte's worth:\n    if (bits >= 8) {\n      bits -= 8\n      out[written++] = 0xff & (buffer >> bits)\n    }\n  }\n\n  // Verify that we have received just enough bits:\n  if (bits >= bitsPerChar || 0xff & (buffer << (8 - bits))) {\n    throw new SyntaxError('Unexpected end of data')\n  }\n\n  return out\n}\n\n/**\n * @param {Uint8Array} data\n * @param {string} alphabet\n * @param {number} bitsPerChar\n * @returns {string}\n */\nconst encode = (data, alphabet, bitsPerChar) => {\n  const pad = alphabet[alphabet.length - 1] === '='\n  const mask = (1 << bitsPerChar) - 1\n  let out = ''\n\n  let bits = 0 // Number of bits currently in the buffer\n  let buffer = 0 // Bits waiting to be written out, MSB first\n  for (let i = 0; i < data.length; ++i) {\n    // Slurp data into the buffer:\n    buffer = (buffer << 8) | data[i]\n    bits += 8\n\n    // Write out as much as we can:\n    while (bits > bitsPerChar) {\n      bits -= bitsPerChar\n      out += alphabet[mask & (buffer >> bits)]\n    }\n  }\n\n  // Partial character:\n  if (bits) {\n    out += alphabet[mask & (buffer << (bitsPerChar - bits))]\n  }\n\n  // Add padding characters until we hit a byte boundary:\n  if (pad) {\n    while ((out.length * bitsPerChar) & 7) {\n      out += '='\n    }\n  }\n\n  return out\n}\n\n/**\n * RFC4648 Factory\n *\n * @template {string} Base\n * @template {string} Prefix\n * @param {object} options\n * @param {Base} options.name\n * @param {Prefix} options.prefix\n * @param {string} options.alphabet\n * @param {number} options.bitsPerChar\n */\nexport const rfc4648 = ({ name, prefix, bitsPerChar, alphabet }) => {\n  return from({\n    prefix,\n    name,\n    encode (input) {\n      return encode(input, alphabet, bitsPerChar)\n    },\n    decode (input) {\n      return decode(input, alphabet, bitsPerChar, name)\n    }\n  })\n}\n","import { baseX } from './base.js'\n\nexport const base58btc = baseX({\n  name: 'base58btc',\n  prefix: 'z',\n  alphabet: '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n})\n\nexport const base58flickr = baseX({\n  name: 'base58flickr',\n  prefix: 'Z',\n  alphabet: '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n})\n","import { rfc4648 } from './base.js'\n\nexport const base32 = rfc4648({\n  prefix: 'b',\n  name: 'base32',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567',\n  bitsPerChar: 5\n})\n\nexport const base32upper = rfc4648({\n  prefix: 'B',\n  name: 'base32upper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n  bitsPerChar: 5\n})\n\nexport const base32pad = rfc4648({\n  prefix: 'c',\n  name: 'base32pad',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567=',\n  bitsPerChar: 5\n})\n\nexport const base32padupper = rfc4648({\n  prefix: 'C',\n  name: 'base32padupper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=',\n  bitsPerChar: 5\n})\n\nexport const base32hex = rfc4648({\n  prefix: 'v',\n  name: 'base32hex',\n  alphabet: '0123456789abcdefghijklmnopqrstuv',\n  bitsPerChar: 5\n})\n\nexport const base32hexupper = rfc4648({\n  prefix: 'V',\n  name: 'base32hexupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV',\n  bitsPerChar: 5\n})\n\nexport const base32hexpad = rfc4648({\n  prefix: 't',\n  name: 'base32hexpad',\n  alphabet: '0123456789abcdefghijklmnopqrstuv=',\n  bitsPerChar: 5\n})\n\nexport const base32hexpadupper = rfc4648({\n  prefix: 'T',\n  name: 'base32hexpadupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV=',\n  bitsPerChar: 5\n})\n\nexport const base32z = rfc4648({\n  prefix: 'h',\n  name: 'base32z',\n  alphabet: 'ybndrfg8ejkmcpqxot1uwisza345h769',\n  bitsPerChar: 5\n})\n","import * as varint from './varint.js'\nimport * as Digest from './hashes/digest.js'\nimport { base58btc } from './bases/base58.js'\nimport { base32 } from './bases/base32.js'\nimport { coerce } from './bytes.js'\n// Linter can see that API is used in types.\n// eslint-disable-next-line\nimport * as API from \"./link/interface.js\"\n\n// This way TS will also expose all the types from module\nexport * from './link/interface.js'\n\n/**\n * @template {API.Link<unknown, number, number, API.Version>} T\n * @template {string} Prefix\n * @param {T} link\n * @param {API.MultibaseEncoder<Prefix>} [base]\n * @returns {API.ToString<T, Prefix>}\n */\nexport const format = (link, base) => {\n  const { bytes, version } = link\n  switch (version) {\n    case 0:\n      return toStringV0(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<\"z\">} */ (base) || base58btc.encoder\n      )\n    default:\n      return toStringV1(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<Prefix>} */ (base || base32.encoder)\n      )\n  }\n}\n\n/**\n * @template {API.UnknownLink} Link\n * @param {Link} link\n * @returns {API.LinkJSON<Link>}\n */\nexport const toJSON = (link) => ({\n  '/': format(link)\n})\n\n/**\n * @template {API.UnknownLink} Link\n * @param {API.LinkJSON<Link>} json\n */\nexport const fromJSON = (json) =>\n  CID.parse(json['/'])\n\n/** @type {WeakMap<API.UnknownLink, Map<string, string>>} */\nconst cache = new WeakMap()\n\n/**\n * @param {API.UnknownLink} cid\n * @returns {Map<string, string>}\n */\nconst baseCache = cid => {\n  const baseCache = cache.get(cid)\n  if (baseCache == null) {\n    const baseCache = new Map()\n    cache.set(cid, baseCache)\n    return baseCache\n  }\n  return baseCache\n}\n\n/**\n * @template {unknown} [Data=unknown]\n * @template {number} [Format=number]\n * @template {number} [Alg=number]\n * @template {API.Version} [Version=API.Version]\n * @implements {API.Link<Data, Format, Alg, Version>}\n */\n\nexport class CID {\n  /**\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} multihash - (Multi)hash of the of the content.\n   * @param {Uint8Array} bytes\n   *\n   */\n  constructor (version, code, multihash, bytes) {\n    /** @readonly */\n    this.code = code\n    /** @readonly */\n    this.version = version\n    /** @readonly */\n    this.multihash = multihash\n    /** @readonly */\n    this.bytes = bytes\n\n    // flag to serializers that this is a CID and\n    // should be treated specially\n    /** @readonly */\n    this['/'] = bytes\n  }\n\n  /**\n   * Signalling `cid.asCID === cid` has been replaced with `cid['/'] === cid.bytes`\n   * please either use `CID.asCID(cid)` or switch to new signalling mechanism\n   *\n   * @deprecated\n   */\n  get asCID () {\n    return this\n  }\n\n  // ArrayBufferView\n  get byteOffset () {\n    return this.bytes.byteOffset\n  }\n\n  // ArrayBufferView\n  get byteLength () {\n    return this.bytes.byteLength\n  }\n\n  /**\n   * @returns {CID<Data, API.DAG_PB, API.SHA_256, 0>}\n   */\n  toV0 () {\n    switch (this.version) {\n      case 0: {\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (this)\n      }\n      case 1: {\n        const { code, multihash } = this\n\n        if (code !== DAG_PB_CODE) {\n          throw new Error('Cannot convert a non dag-pb CID to CIDv0')\n        }\n\n        // sha2-256\n        if (multihash.code !== SHA_256_CODE) {\n          throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0')\n        }\n\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (\n          CID.createV0(\n            /** @type {API.MultihashDigest<API.SHA_256>} */ (multihash)\n          )\n        )\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 0. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @returns {CID<Data, Format, Alg, 1>}\n   */\n  toV1 () {\n    switch (this.version) {\n      case 0: {\n        const { code, digest } = this.multihash\n        const multihash = Digest.create(code, digest)\n        return /** @type {CID<Data, Format, Alg, 1>} */ (\n          CID.createV1(this.code, multihash)\n        )\n      }\n      case 1: {\n        return /** @type {CID<Data, Format, Alg, 1>} */ (this)\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 1. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @param {unknown} other\n   * @returns {other is CID<Data, Format, Alg, Version>}\n   */\n  equals (other) {\n    return CID.equals(this, other)\n  }\n\n  /**\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {API.Link<Data, Format, Alg, Version>} self\n   * @param {unknown} other\n   * @returns {other is CID}\n   */\n  static equals (self, other) {\n    const unknown =\n      /** @type {{code?:unknown, version?:unknown, multihash?:unknown}} */ (\n        other\n      )\n    return (\n      unknown &&\n      self.code === unknown.code &&\n      self.version === unknown.version &&\n      Digest.equals(self.multihash, unknown.multihash)\n    )\n  }\n\n  /**\n   * @param {API.MultibaseEncoder<string>} [base]\n   * @returns {string}\n   */\n  toString (base) {\n    return format(this, base)\n  }\n\n  toJSON () {\n    return { '/': format(this) }\n  }\n\n  link () {\n    return this\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'CID'\n  }\n\n  // Legacy\n\n  [Symbol.for('nodejs.util.inspect.custom')] () {\n    return `CID(${this.toString()})`\n  }\n\n  /**\n   * Takes any input `value` and returns a `CID` instance if it was\n   * a `CID` otherwise returns `null`. If `value` is instanceof `CID`\n   * it will return value back. If `value` is not instance of this CID\n   * class, but is compatible CID it will return new instance of this\n   * `CID` class. Otherwise returns null.\n   *\n   * This allows two different incompatible versions of CID library to\n   * co-exist and interop as long as binary interface is compatible.\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @template {unknown} U\n   * @param {API.Link<Data, Format, Alg, Version>|U} input\n   * @returns {CID<Data, Format, Alg, Version>|null}\n   */\n  static asCID (input) {\n    if (input == null) {\n      return null\n    }\n\n    const value = /** @type {any} */ (input)\n    if (value instanceof CID) {\n      // If value is instance of CID then we're all set.\n      return value\n    } else if ((value['/'] != null && value['/'] === value.bytes) || value.asCID === value) {\n      // If value isn't instance of this CID class but `this.asCID === this` or\n      // `value['/'] === value.bytes` is true it is CID instance coming from a\n      // different implementation (diff version or duplicate). In that case we\n      // rebase it to this `CID` implementation so caller is guaranteed to get\n      // instance with expected API.\n      const { version, code, multihash, bytes } = value\n      return new CID(\n        version,\n        code,\n        /** @type {API.MultihashDigest<Alg>} */ (multihash),\n        bytes || encodeCID(version, code, multihash.bytes)\n      )\n    } else if (value[cidSymbol] === true) {\n      // If value is a CID from older implementation that used to be tagged via\n      // symbol we still rebase it to the this `CID` implementation by\n      // delegating that to a constructor.\n      const { version, multihash, code } = value\n      const digest =\n        /** @type {API.MultihashDigest<Alg>} */\n        (Digest.decode(multihash))\n      return CID.create(version, code, digest)\n    } else {\n      // Otherwise value is not a CID (or an incompatible version of it) in\n      // which case we return `null`.\n      return null\n    }\n  }\n\n  /**\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} digest - (Multi)hash of the of the content.\n   * @returns {CID<Data, Format, Alg, Version>}\n   */\n  static create (version, code, digest) {\n    if (typeof code !== 'number') {\n      throw new Error('String codecs are no longer supported')\n    }\n\n    if (!(digest.bytes instanceof Uint8Array)) {\n      throw new Error('Invalid digest')\n    }\n\n    switch (version) {\n      case 0: {\n        if (code !== DAG_PB_CODE) {\n          throw new Error(\n            `Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`\n          )\n        } else {\n          return new CID(version, code, digest, digest.bytes)\n        }\n      }\n      case 1: {\n        const bytes = encodeCID(version, code, digest.bytes)\n        return new CID(version, code, digest, bytes)\n      }\n      default: {\n        throw new Error('Invalid version')\n      }\n    }\n  }\n\n  /**\n   * Simplified version of `create` for CIDv0.\n   *\n   * @template {unknown} [T=unknown]\n   * @param {API.MultihashDigest<typeof SHA_256_CODE>} digest - Multihash.\n   * @returns {CID<T, typeof DAG_PB_CODE, typeof SHA_256_CODE, 0>}\n   */\n  static createV0 (digest) {\n    return CID.create(0, DAG_PB_CODE, digest)\n  }\n\n  /**\n   * Simplified version of `create` for CIDv1.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @param {Code} code - Content encoding format code.\n   * @param {API.MultihashDigest<Alg>} digest - Miltihash of the content.\n   * @returns {CID<Data, Code, Alg, 1>}\n   */\n  static createV1 (code, digest) {\n    return CID.create(1, code, digest)\n  }\n\n  /**\n   * Decoded a CID from its binary representation. The byte array must contain\n   * only the CID with no additional bytes.\n   *\n   * An error will be thrown if the bytes provided do not contain a valid\n   * binary representation of a CID.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ByteView<API.Link<Data, Code, Alg, Ver>>} bytes\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static decode (bytes) {\n    const [cid, remainder] = CID.decodeFirst(bytes)\n    if (remainder.length) {\n      throw new Error('Incorrect length')\n    }\n    return cid\n  }\n\n  /**\n   * Decoded a CID from its binary representation at the beginning of a byte\n   * array.\n   *\n   * Returns an array with the first element containing the CID and the second\n   * element containing the remainder of the original byte array. The remainder\n   * will be a zero-length byte array if the provided bytes only contained a\n   * binary CID representation.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} bytes\n   * @returns {[CID<T, C, A, V>, Uint8Array]}\n   */\n  static decodeFirst (bytes) {\n    const specs = CID.inspectBytes(bytes)\n    const prefixSize = specs.size - specs.multihashSize\n    const multihashBytes = coerce(\n      bytes.subarray(prefixSize, prefixSize + specs.multihashSize)\n    )\n    if (multihashBytes.byteLength !== specs.multihashSize) {\n      throw new Error('Incorrect length')\n    }\n    const digestBytes = multihashBytes.subarray(\n      specs.multihashSize - specs.digestSize\n    )\n    const digest = new Digest.Digest(\n      specs.multihashCode,\n      specs.digestSize,\n      digestBytes,\n      multihashBytes\n    )\n    const cid =\n      specs.version === 0\n        ? CID.createV0(/** @type {API.MultihashDigest<API.SHA_256>} */ (digest))\n        : CID.createV1(specs.codec, digest)\n    return [/** @type {CID<T, C, A, V>} */(cid), bytes.subarray(specs.size)]\n  }\n\n  /**\n   * Inspect the initial bytes of a CID to determine its properties.\n   *\n   * Involves decoding up to 4 varints. Typically this will require only 4 to 6\n   * bytes but for larger multicodec code values and larger multihash digest\n   * lengths these varints can be quite large. It is recommended that at least\n   * 10 bytes be made available in the `initialBytes` argument for a complete\n   * inspection.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} initialBytes\n   * @returns {{ version:V, codec:C, multihashCode:A, digestSize:number, multihashSize:number, size:number }}\n   */\n  static inspectBytes (initialBytes) {\n    let offset = 0\n    const next = () => {\n      const [i, length] = varint.decode(initialBytes.subarray(offset))\n      offset += length\n      return i\n    }\n\n    let version = /** @type {V} */ (next())\n    let codec = /** @type {C} */ (DAG_PB_CODE)\n    if (/** @type {number} */(version) === 18) {\n      // CIDv0\n      version = /** @type {V} */ (0)\n      offset = 0\n    } else {\n      codec = /** @type {C} */ (next())\n    }\n\n    if (version !== 0 && version !== 1) {\n      throw new RangeError(`Invalid CID version ${version}`)\n    }\n\n    const prefixSize = offset\n    const multihashCode = /** @type {A} */ (next()) // multihash code\n    const digestSize = next() // multihash length\n    const size = offset + digestSize\n    const multihashSize = size - prefixSize\n\n    return { version, codec, multihashCode, digestSize, multihashSize, size }\n  }\n\n  /**\n   * Takes cid in a string representation and creates an instance. If `base`\n   * decoder is not provided will use a default from the configuration. It will\n   * throw an error if encoding of the CID is not compatible with supplied (or\n   * a default decoder).\n   *\n   * @template {string} Prefix\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n   * @param {API.MultibaseDecoder<Prefix>} [base]\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static parse (source, base) {\n    const [prefix, bytes] = parseCIDtoBytes(source, base)\n\n    const cid = CID.decode(bytes)\n\n    if (cid.version === 0 && source[0] !== 'Q') {\n      throw Error('Version 0 CID string must not include multibase prefix')\n    }\n\n    // Cache string representation to avoid computing it on `this.toString()`\n    baseCache(cid).set(prefix, source)\n\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @template {unknown} Data\n * @template {number} Code\n * @template {number} Alg\n * @template {API.Version} Ver\n * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n * @param {API.MultibaseDecoder<Prefix>} [base]\n * @returns {[Prefix, API.ByteView<API.Link<Data, Code, Alg, Ver>>]}\n */\nconst parseCIDtoBytes = (source, base) => {\n  switch (source[0]) {\n    // CIDv0 is parsed differently\n    case 'Q': {\n      const decoder = base || base58btc\n      return [\n        /** @type {Prefix} */ (base58btc.prefix),\n        decoder.decode(`${base58btc.prefix}${source}`)\n      ]\n    }\n    case base58btc.prefix: {\n      const decoder = base || base58btc\n      return [/** @type {Prefix} */(base58btc.prefix), decoder.decode(source)]\n    }\n    case base32.prefix: {\n      const decoder = base || base32\n      return [/** @type {Prefix} */(base32.prefix), decoder.decode(source)]\n    }\n    default: {\n      if (base == null) {\n        throw Error(\n          'To parse non base32 or base58btc encoded CID multibase decoder must be provided'\n        )\n      }\n      return [/** @type {Prefix} */(source[0]), base.decode(source)]\n    }\n  }\n}\n\n/**\n *\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<'z'>} base\n */\nconst toStringV0 = (bytes, cache, base) => {\n  const { prefix } = base\n  if (prefix !== base58btc.prefix) {\n    throw Error(`Cannot string encode V0 in ${base.name} encoding`)\n  }\n\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes).slice(1)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<Prefix>} base\n */\nconst toStringV1 = (bytes, cache, base) => {\n  const { prefix } = base\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\nconst DAG_PB_CODE = 0x70\nconst SHA_256_CODE = 0x12\n\n/**\n * @param {API.Version} version\n * @param {number} code\n * @param {Uint8Array} multihash\n * @returns {Uint8Array}\n */\nconst encodeCID = (version, code, multihash) => {\n  const codeOffset = varint.encodingLength(version)\n  const hashOffset = codeOffset + varint.encodingLength(code)\n  const bytes = new Uint8Array(hashOffset + multihash.byteLength)\n  varint.encodeTo(version, bytes, 0)\n  varint.encodeTo(code, bytes, codeOffset)\n  bytes.set(multihash, hashOffset)\n  return bytes\n}\n\nconst cidSymbol = Symbol.for('@ipld/js-cid/CID')\n","import { from } from 'multiformats/hashes/hasher'\nimport { bytes } from 'multiformats'\n// @ts-expect-error no types\nimport mur from 'murmurhash3js-revisited'\n\n/**\n * @param {number} number\n * @returns {Uint8Array}\n */\nfunction fromNumberTo32BitBuf (number) {\n  const bytes = new Array(4)\n  for (let i = 0; i < 4; i++) {\n    bytes[i] = number & 0xff\n    number = number >> 8\n  }\n  return new Uint8Array(bytes)\n}\n\nexport const murmur332 = from({\n  name: 'murmur3-32',\n  code: 0x23,\n  encode: (input) => fromNumberTo32BitBuf(mur.x86.hash32(input))\n})\n\nexport const murmur3128 = from({\n  name: 'murmur3-128',\n  code: 0x22,\n  encode: (input) => bytes.fromHex(mur.x64.hash128(input))\n})\n\n// A special-use 0x22 that truncates 64 bits, specifically for use in the UnixFS HAMT\nexport const murmur364 = from({\n  name: 'murmur3-x64-64',\n  code: 0x22,\n  encode: (input) => bytes.fromHex(mur.x64.hash128(input)).subarray(0, 8)\n})\n","import { decode } from '@ipld/dag-pb';\nimport { murmur3128 } from '@multiformats/murmur3';\nimport errCode from 'err-code';\nimport { Bucket, createHAMT } from 'hamt-sharding';\nimport { UnixFS } from 'ipfs-unixfs';\n// FIXME: this is copy/pasted from ipfs-unixfs-importer/src/options.js\nconst hashFn = async function (buf) {\n    return (await murmur3128.encode(buf))\n        // Murmur3 outputs 128 bit but, accidentally, IPFS Go's\n        // implementation only uses the first 64, so we must do the same\n        // for parity..\n        .slice(0, 8)\n        // Invert buffer because that's how Go impl does it\n        .reverse();\n};\nconst addLinksToHamtBucket = async (links, bucket, rootBucket) => {\n    const padLength = (bucket.tableSize() - 1).toString(16).length;\n    await Promise.all(links.map(async (link) => {\n        if (link.Name == null) {\n            // TODO(@rvagg): what do? this is technically possible\n            throw new Error('Unexpected Link without a Name');\n        }\n        if (link.Name.length === padLength) {\n            const pos = parseInt(link.Name, 16);\n            bucket._putObjectAt(pos, new Bucket({\n                hash: rootBucket._options.hash,\n                bits: rootBucket._options.bits\n            }, bucket, pos));\n            return;\n        }\n        await rootBucket.put(link.Name.substring(2), true);\n    }));\n};\nconst toPrefix = (position, padLength) => {\n    return position\n        .toString(16)\n        .toUpperCase()\n        .padStart(padLength, '0')\n        .substring(0, padLength);\n};\nconst toBucketPath = (position) => {\n    let bucket = position.bucket;\n    const path = [];\n    while (bucket._parent != null) {\n        path.push(bucket);\n        bucket = bucket._parent;\n    }\n    path.push(bucket);\n    return path.reverse();\n};\nconst findShardCid = async (node, name, blockstore, context, options) => {\n    if (context == null) {\n        if (node.Data == null) {\n            throw errCode(new Error('no data in PBNode'), 'ERR_NOT_UNIXFS');\n        }\n        let dir;\n        try {\n            dir = UnixFS.unmarshal(node.Data);\n        }\n        catch (err) {\n            throw errCode(err, 'ERR_NOT_UNIXFS');\n        }\n        if (dir.type !== 'hamt-sharded-directory') {\n            throw errCode(new Error('not a HAMT'), 'ERR_NOT_UNIXFS');\n        }\n        if (dir.fanout == null) {\n            throw errCode(new Error('missing fanout'), 'ERR_NOT_UNIXFS');\n        }\n        const rootBucket = createHAMT({\n            hashFn,\n            bits: Math.log2(Number(dir.fanout))\n        });\n        context = {\n            rootBucket,\n            hamtDepth: 1,\n            lastBucket: rootBucket\n        };\n    }\n    const padLength = (context.lastBucket.tableSize() - 1).toString(16).length;\n    await addLinksToHamtBucket(node.Links, context.lastBucket, context.rootBucket);\n    const position = await context.rootBucket._findNewBucketAndPos(name);\n    let prefix = toPrefix(position.pos, padLength);\n    const bucketPath = toBucketPath(position);\n    if (bucketPath.length > context.hamtDepth) {\n        context.lastBucket = bucketPath[context.hamtDepth];\n        prefix = toPrefix(context.lastBucket._posAtParent, padLength);\n    }\n    const link = node.Links.find(link => {\n        if (link.Name == null) {\n            return false;\n        }\n        const entryPrefix = link.Name.substring(0, padLength);\n        const entryName = link.Name.substring(padLength);\n        if (entryPrefix !== prefix) {\n            // not the entry or subshard we're looking for\n            return false;\n        }\n        if (entryName !== '' && entryName !== name) {\n            // not the entry we're looking for\n            return false;\n        }\n        return true;\n    });\n    if (link == null) {\n        return;\n    }\n    if (link.Name != null && link.Name.substring(padLength) === name) {\n        return link.Hash;\n    }\n    context.hamtDepth++;\n    const block = await blockstore.get(link.Hash, options);\n    node = decode(block);\n    return findShardCid(node, name, blockstore, context, options);\n};\nexport default findShardCid;\n//# sourceMappingURL=find-cid-in-shard.js.map","import peek from 'it-peekable';\nfunction isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction filter(source, fn) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            for await (const entry of source) {\n                if (await fn(entry)) {\n                    yield entry;\n                }\n            }\n        })();\n    }\n    // if mapping function returns a promise we have to return an async generator\n    const peekable = peek(source);\n    const { value, done } = peekable.next();\n    if (done === true) {\n        return (function* () { }());\n    }\n    const res = fn(value);\n    // @ts-expect-error .then is not present on O\n    if (typeof res.then === 'function') {\n        return (async function* () {\n            if (await res) {\n                yield value;\n            }\n            for await (const entry of peekable) {\n                if (await fn(entry)) {\n                    yield entry;\n                }\n            }\n        })();\n    }\n    const func = fn;\n    return (function* () {\n        if (res === true) {\n            yield value;\n        }\n        for (const entry of peekable) {\n            if (func(entry)) {\n                yield entry;\n            }\n        }\n    })();\n}\nexport default filter;\n//# sourceMappingURL=index.js.map","import peek from 'it-peekable';\nfunction isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction map(source, func) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            for await (const val of source) {\n                yield func(val);\n            }\n        })();\n    }\n    // if mapping function returns a promise we have to return an async generator\n    const peekable = peek(source);\n    const { value, done } = peekable.next();\n    if (done === true) {\n        return (function* () { }());\n    }\n    const res = func(value);\n    // @ts-expect-error .then is not present on O\n    if (typeof res.then === 'function') {\n        return (async function* () {\n            yield await res;\n            for await (const val of peekable) {\n                yield func(val);\n            }\n        })();\n    }\n    const fn = func;\n    return (function* () {\n        yield res;\n        for (const val of peekable) {\n            yield fn(val);\n        }\n    })();\n}\nexport default map;\n//# sourceMappingURL=index.js.map","import filter from 'it-filter';\nimport map from 'it-map';\nimport parallel from 'it-parallel';\nimport { pipe } from 'it-pipe';\nimport { CustomProgressEvent } from 'progress-events';\nconst directoryContent = (cid, node, unixfs, path, resolve, depth, blockstore) => {\n    async function* yieldDirectoryContent(options = {}) {\n        const offset = options.offset ?? 0;\n        const length = options.length ?? node.Links.length;\n        const links = node.Links.slice(offset, length);\n        options.onProgress?.(new CustomProgressEvent('unixfs:exporter:walk:directory', {\n            cid\n        }));\n        yield* pipe(links, source => map(source, link => {\n            return async () => {\n                const linkName = link.Name ?? '';\n                const linkPath = `${path}/${linkName}`;\n                const result = await resolve(link.Hash, linkName, linkPath, [], depth + 1, blockstore, options);\n                return result.entry;\n            };\n        }), source => parallel(source, { ordered: true }), source => filter(source, entry => entry != null));\n    }\n    return yieldDirectoryContent;\n};\nexport default directoryContent;\n//# sourceMappingURL=directory.js.map","import * as dagPb from '@ipld/dag-pb';\nimport errCode from 'err-code';\nimport { UnixFS } from 'ipfs-unixfs';\nimport map from 'it-map';\nimport parallel from 'it-parallel';\nimport { pipe } from 'it-pipe';\nimport { pushable } from 'it-pushable';\nimport * as raw from 'multiformats/codecs/raw';\nimport PQueue from 'p-queue';\nimport { CustomProgressEvent } from 'progress-events';\nimport extractDataFromBlock from '../../../utils/extract-data-from-block.js';\nimport validateOffsetAndLength from '../../../utils/validate-offset-and-length.js';\nasync function walkDAG(blockstore, node, queue, streamPosition, start, end, options) {\n    // a `raw` node\n    if (node instanceof Uint8Array) {\n        const buf = extractDataFromBlock(node, streamPosition, start, end);\n        queue.push(buf);\n        return;\n    }\n    if (node.Data == null) {\n        throw errCode(new Error('no data in PBNode'), 'ERR_NOT_UNIXFS');\n    }\n    let file;\n    try {\n        file = UnixFS.unmarshal(node.Data);\n    }\n    catch (err) {\n        throw errCode(err, 'ERR_NOT_UNIXFS');\n    }\n    // might be a unixfs `raw` node or have data on intermediate nodes\n    if (file.data != null) {\n        const data = file.data;\n        const buf = extractDataFromBlock(data, streamPosition, start, end);\n        queue.push(buf);\n        streamPosition += BigInt(buf.byteLength);\n    }\n    const childOps = [];\n    if (node.Links.length !== file.blockSizes.length) {\n        throw errCode(new Error('Inconsistent block sizes and dag links'), 'ERR_NOT_UNIXFS');\n    }\n    for (let i = 0; i < node.Links.length; i++) {\n        const childLink = node.Links[i];\n        const childStart = streamPosition; // inclusive\n        const childEnd = childStart + file.blockSizes[i]; // exclusive\n        if ((start >= childStart && start < childEnd) || // child has offset byte\n            (end >= childStart && end <= childEnd) || // child has end byte\n            (start < childStart && end > childEnd)) { // child is between offset and end bytes\n            childOps.push({\n                link: childLink,\n                blockStart: streamPosition\n            });\n        }\n        streamPosition = childEnd;\n        if (streamPosition > end) {\n            break;\n        }\n    }\n    await pipe(childOps, (source) => map(source, (op) => {\n        return async () => {\n            const block = await blockstore.get(op.link.Hash, options);\n            return {\n                ...op,\n                block\n            };\n        };\n    }), (source) => parallel(source, {\n        ordered: true\n    }), async (source) => {\n        for await (const { link, block, blockStart } of source) {\n            let child;\n            switch (link.Hash.code) {\n                case dagPb.code:\n                    child = dagPb.decode(block);\n                    break;\n                case raw.code:\n                    child = block;\n                    break;\n                default:\n                    queue.end(errCode(new Error(`Unsupported codec: ${link.Hash.code}`), 'ERR_NOT_UNIXFS'));\n                    return;\n            }\n            // create a queue for this child - we use a queue instead of recursion\n            // to avoid overflowing the stack\n            const childQueue = new PQueue({\n                concurrency: 1\n            });\n            // if any of the child jobs error, end the read queue with the error\n            childQueue.on('error', error => {\n                queue.end(error);\n            });\n            // if the job rejects the 'error' event will be emitted on the child queue\n            void childQueue.add(async () => {\n                options.onProgress?.(new CustomProgressEvent('unixfs:exporter:walk:file', {\n                    cid: link.Hash\n                }));\n                await walkDAG(blockstore, child, queue, blockStart, start, end, options);\n            });\n            // wait for this child to complete before moving on to the next\n            await childQueue.onIdle();\n        }\n    });\n    if (streamPosition >= end) {\n        queue.end();\n    }\n}\nconst fileContent = (cid, node, unixfs, path, resolve, depth, blockstore) => {\n    async function* yieldFileContent(options = {}) {\n        const fileSize = unixfs.fileSize();\n        if (fileSize === undefined) {\n            throw new Error('File was a directory');\n        }\n        const { start, end } = validateOffsetAndLength(fileSize, options.offset, options.length);\n        if (end === 0n) {\n            return;\n        }\n        let read = 0n;\n        const wanted = end - start;\n        const queue = pushable();\n        options.onProgress?.(new CustomProgressEvent('unixfs:exporter:walk:file', {\n            cid\n        }));\n        void walkDAG(blockstore, node, queue, 0n, start, end, options)\n            .catch(err => {\n            queue.end(err);\n        });\n        for await (const buf of queue) {\n            if (buf == null) {\n                continue;\n            }\n            read += BigInt(buf.byteLength);\n            if (read > wanted) {\n                queue.end();\n                throw errCode(new Error('Read too many bytes - the file size reported by the UnixFS data in the root node may be incorrect'), 'ERR_OVER_READ');\n            }\n            if (read === wanted) {\n                queue.end();\n            }\n            options.onProgress?.(new CustomProgressEvent('unixfs:exporter:progress:unixfs:file', {\n                bytesRead: read,\n                totalBytes: wanted,\n                fileSize\n            }));\n            yield buf;\n        }\n        if (read < wanted) {\n            throw errCode(new Error('Traversed entire DAG but did not read enough bytes'), 'ERR_UNDER_READ');\n        }\n    }\n    return yieldFileContent;\n};\nexport default fileContent;\n//# sourceMappingURL=file.js.map","import { decode } from '@ipld/dag-pb';\nimport errCode from 'err-code';\nimport { UnixFS } from 'ipfs-unixfs';\nimport map from 'it-map';\nimport parallel from 'it-parallel';\nimport { pipe } from 'it-pipe';\nimport { CustomProgressEvent } from 'progress-events';\nconst hamtShardedDirectoryContent = (cid, node, unixfs, path, resolve, depth, blockstore) => {\n    function yieldHamtDirectoryContent(options = {}) {\n        options.onProgress?.(new CustomProgressEvent('unixfs:exporter:walk:hamt-sharded-directory', {\n            cid\n        }));\n        return listDirectory(node, path, resolve, depth, blockstore, options);\n    }\n    return yieldHamtDirectoryContent;\n};\nasync function* listDirectory(node, path, resolve, depth, blockstore, options) {\n    const links = node.Links;\n    if (node.Data == null) {\n        throw errCode(new Error('no data in PBNode'), 'ERR_NOT_UNIXFS');\n    }\n    let dir;\n    try {\n        dir = UnixFS.unmarshal(node.Data);\n    }\n    catch (err) {\n        throw errCode(err, 'ERR_NOT_UNIXFS');\n    }\n    if (dir.fanout == null) {\n        throw errCode(new Error('missing fanout'), 'ERR_NOT_UNIXFS');\n    }\n    const padLength = (dir.fanout - 1n).toString(16).length;\n    const results = pipe(links, source => map(source, link => {\n        return async () => {\n            const name = link.Name != null ? link.Name.substring(padLength) : null;\n            if (name != null && name !== '') {\n                const result = await resolve(link.Hash, name, `${path}/${name}`, [], depth + 1, blockstore, options);\n                return { entries: result.entry == null ? [] : [result.entry] };\n            }\n            else {\n                // descend into subshard\n                const block = await blockstore.get(link.Hash, options);\n                node = decode(block);\n                options.onProgress?.(new CustomProgressEvent('unixfs:exporter:walk:hamt-sharded-directory', {\n                    cid: link.Hash\n                }));\n                return { entries: listDirectory(node, path, resolve, depth, blockstore, options) };\n            }\n        };\n    }), source => parallel(source, { ordered: true }));\n    for await (const { entries } of results) {\n        yield* entries;\n    }\n}\nexport default hamtShardedDirectoryContent;\n//# sourceMappingURL=hamt-sharded-directory.js.map","import { decode } from '@ipld/dag-pb';\nimport errCode from 'err-code';\nimport { UnixFS } from 'ipfs-unixfs';\nimport findShardCid from '../../utils/find-cid-in-shard.js';\nimport contentDirectory from './content/directory.js';\nimport contentFile from './content/file.js';\nimport contentHamtShardedDirectory from './content/hamt-sharded-directory.js';\nconst findLinkCid = (node, name) => {\n    const link = node.Links.find(link => link.Name === name);\n    return link?.Hash;\n};\nconst contentExporters = {\n    raw: contentFile,\n    file: contentFile,\n    directory: contentDirectory,\n    'hamt-sharded-directory': contentHamtShardedDirectory,\n    metadata: (cid, node, unixfs, path, resolve, depth, blockstore) => {\n        return () => [];\n    },\n    symlink: (cid, node, unixfs, path, resolve, depth, blockstore) => {\n        return () => [];\n    }\n};\n// @ts-expect-error types are wrong\nconst unixFsResolver = async (cid, name, path, toResolve, resolve, depth, blockstore, options) => {\n    const block = await blockstore.get(cid, options);\n    const node = decode(block);\n    let unixfs;\n    let next;\n    if (name == null) {\n        name = cid.toString();\n    }\n    if (node.Data == null) {\n        throw errCode(new Error('no data in PBNode'), 'ERR_NOT_UNIXFS');\n    }\n    try {\n        unixfs = UnixFS.unmarshal(node.Data);\n    }\n    catch (err) {\n        // non-UnixFS dag-pb node? It could happen.\n        throw errCode(err, 'ERR_NOT_UNIXFS');\n    }\n    if (path == null) {\n        path = name;\n    }\n    if (toResolve.length > 0) {\n        let linkCid;\n        if (unixfs?.type === 'hamt-sharded-directory') {\n            // special case - unixfs v1 hamt shards\n            linkCid = await findShardCid(node, toResolve[0], blockstore);\n        }\n        else {\n            linkCid = findLinkCid(node, toResolve[0]);\n        }\n        if (linkCid == null) {\n            throw errCode(new Error('file does not exist'), 'ERR_NOT_FOUND');\n        }\n        // remove the path component we have resolved\n        const nextName = toResolve.shift();\n        const nextPath = `${path}/${nextName}`;\n        next = {\n            cid: linkCid,\n            toResolve,\n            name: nextName ?? '',\n            path: nextPath\n        };\n    }\n    const content = contentExporters[unixfs.type](cid, node, unixfs, path, resolve, depth, blockstore);\n    if (content == null) {\n        throw errCode(new Error('could not find content exporter'), 'ERR_NOT_FOUND');\n    }\n    if (unixfs.isDirectory()) {\n        return {\n            entry: {\n                type: 'directory',\n                name,\n                path,\n                cid,\n                content,\n                unixfs,\n                depth,\n                node,\n                size: unixfs.fileSize()\n            },\n            next\n        };\n    }\n    return {\n        entry: {\n            type: 'file',\n            name,\n            path,\n            cid,\n            content,\n            unixfs,\n            depth,\n            node,\n            size: unixfs.fileSize()\n        },\n        next\n    };\n};\nexport default unixFsResolver;\n//# sourceMappingURL=index.js.map","import * as dagCbor from '@ipld/dag-cbor';\nimport * as dagPb from '@ipld/dag-pb';\nimport errCode from 'err-code';\nimport * as raw from 'multiformats/codecs/raw';\nimport { identity } from 'multiformats/hashes/identity';\nimport dagCborResolver from './dag-cbor.js';\nimport identifyResolver from './identity.js';\nimport rawResolver from './raw.js';\nimport dagPbResolver from './unixfs-v1/index.js';\nconst resolvers = {\n    [dagPb.code]: dagPbResolver,\n    [raw.code]: rawResolver,\n    [dagCbor.code]: dagCborResolver,\n    [identity.code]: identifyResolver\n};\nconst resolve = async (cid, name, path, toResolve, depth, blockstore, options) => {\n    const resolver = resolvers[cid.code];\n    if (resolver == null) {\n        throw errCode(new Error(`No resolver for code ${cid.code}`), 'ERR_NO_RESOLVER');\n    }\n    return resolver(cid, name, path, toResolve, resolve, depth, blockstore, options);\n};\nexport default resolve;\n//# sourceMappingURL=index.js.map","import errCode from 'err-code';\nimport last from 'it-last';\nimport { CID } from 'multiformats/cid';\nimport resolve from './resolvers/index.js';\nconst toPathComponents = (path = '') => {\n    // split on / unless escaped with \\\n    return (path\n        .trim()\n        .match(/([^\\\\^/]|\\\\\\/)+/g) ?? [])\n        .filter(Boolean);\n};\nconst cidAndRest = (path) => {\n    if (path instanceof Uint8Array) {\n        return {\n            cid: CID.decode(path),\n            toResolve: []\n        };\n    }\n    const cid = CID.asCID(path);\n    if (cid != null) {\n        return {\n            cid,\n            toResolve: []\n        };\n    }\n    if (typeof path === 'string') {\n        if (path.indexOf('/ipfs/') === 0) {\n            path = path.substring(6);\n        }\n        const output = toPathComponents(path);\n        return {\n            cid: CID.parse(output[0]),\n            toResolve: output.slice(1)\n        };\n    }\n    throw errCode(new Error(`Unknown path type ${path}`), 'ERR_BAD_PATH');\n};\nexport async function* walkPath(path, blockstore, options = {}) {\n    let { cid, toResolve } = cidAndRest(path);\n    let name = cid.toString();\n    let entryPath = name;\n    const startingDepth = toResolve.length;\n    while (true) {\n        const result = await resolve(cid, name, entryPath, toResolve, startingDepth, blockstore, options);\n        if (result.entry == null && result.next == null) {\n            throw errCode(new Error(`Could not resolve ${path}`), 'ERR_NOT_FOUND');\n        }\n        if (result.entry != null) {\n            yield result.entry;\n        }\n        if (result.next == null) {\n            return;\n        }\n        // resolve further parts\n        toResolve = result.next.toResolve;\n        cid = result.next.cid;\n        name = result.next.name;\n        entryPath = result.next.path;\n    }\n}\nexport async function exporter(path, blockstore, options = {}) {\n    const result = await last(walkPath(path, blockstore, options));\n    if (result == null) {\n        throw errCode(new Error(`Could not resolve ${path}`), 'ERR_NOT_FOUND');\n    }\n    return result;\n}\nexport async function* recursive(path, blockstore, options = {}) {\n    const node = await exporter(path, blockstore, options);\n    if (node == null) {\n        return;\n    }\n    yield node;\n    if (node.type === 'directory') {\n        for await (const child of recurse(node, options)) {\n            yield child;\n        }\n    }\n    async function* recurse(node, options) {\n        for await (const file of node.content(options)) {\n            yield file;\n            if (file instanceof Uint8Array) {\n                continue;\n            }\n            if (file.type === 'directory') {\n                yield* recurse(file, options);\n            }\n        }\n    }\n}\n//# sourceMappingURL=index.js.map","export class UnixFSError extends Error {\n    name;\n    code;\n    constructor(message, name, code) {\n        super(message);\n        this.name = name;\n        this.code = code;\n    }\n}\nexport class NotUnixFSError extends UnixFSError {\n    constructor(message = 'not a Unixfs node') {\n        super(message, 'NotUnixFSError', 'ERR_NOT_UNIXFS');\n    }\n}\nexport class InvalidPBNodeError extends UnixFSError {\n    constructor(message = 'invalid PBNode') {\n        super(message, 'InvalidPBNodeError', 'ERR_INVALID_PBNODE');\n    }\n}\nexport class UnknownError extends UnixFSError {\n    constructor(message = 'unknown error') {\n        super(message, 'InvalidPBNodeError', 'ERR_UNKNOWN_ERROR');\n    }\n}\nexport class AlreadyExistsError extends UnixFSError {\n    constructor(message = 'path already exists') {\n        super(message, 'AlreadyExistsError', 'ERR_ALREADY_EXISTS');\n    }\n}\nexport class DoesNotExistError extends UnixFSError {\n    constructor(message = 'path does not exist') {\n        super(message, 'DoesNotExistError', 'ERR_DOES_NOT_EXIST');\n    }\n}\nexport class NoContentError extends UnixFSError {\n    constructor(message = 'no content') {\n        super(message, 'NoContentError', 'ERR_NO_CONTENT');\n    }\n}\nexport class NotAFileError extends UnixFSError {\n    constructor(message = 'not a file') {\n        super(message, 'NotAFileError', 'ERR_NOT_A_FILE');\n    }\n}\nexport class NotADirectoryError extends UnixFSError {\n    constructor(message = 'not a directory') {\n        super(message, 'NotADirectoryError', 'ERR_NOT_A_DIRECTORY');\n    }\n}\nexport class InvalidParametersError extends UnixFSError {\n    constructor(message = 'invalid parameters') {\n        super(message, 'InvalidParametersError', 'ERR_INVALID_PARAMETERS');\n    }\n}\n//# sourceMappingURL=errors.js.map","// @ts-check\n\nimport { rfc4648 } from './base.js'\n\nexport const base64 = rfc4648({\n  prefix: 'm',\n  name: 'base64',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n  bitsPerChar: 6\n})\n\nexport const base64pad = rfc4648({\n  prefix: 'M',\n  name: 'base64pad',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\n  bitsPerChar: 6\n})\n\nexport const base64url = rfc4648({\n  prefix: 'u',\n  name: 'base64url',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_',\n  bitsPerChar: 6\n})\n\nexport const base64urlpad = rfc4648({\n  prefix: 'U',\n  name: 'base64urlpad',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=',\n  bitsPerChar: 6\n})\n","import debug from 'debug';\nimport { base32 } from 'multiformats/bases/base32';\nimport { base58btc } from 'multiformats/bases/base58';\nimport { base64 } from 'multiformats/bases/base64';\n// Add a formatter for converting to a base58 string\ndebug.formatters.b = (v) => {\n    return v == null ? 'undefined' : base58btc.baseEncode(v);\n};\n// Add a formatter for converting to a base32 string\ndebug.formatters.t = (v) => {\n    return v == null ? 'undefined' : base32.baseEncode(v);\n};\n// Add a formatter for converting to a base64 string\ndebug.formatters.m = (v) => {\n    return v == null ? 'undefined' : base64.baseEncode(v);\n};\n// Add a formatter for stringifying peer ids\ndebug.formatters.p = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying CIDs\ndebug.formatters.c = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying Datastore keys\ndebug.formatters.k = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying Multiaddrs\ndebug.formatters.a = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\nfunction createDisabledLogger(namespace) {\n    const logger = () => { };\n    logger.enabled = false;\n    logger.color = '';\n    logger.diff = 0;\n    logger.log = () => { };\n    logger.namespace = namespace;\n    logger.destroy = () => true;\n    logger.extend = () => logger;\n    return logger;\n}\nexport function logger(name) {\n    // trace logging is a no-op by default\n    let trace = createDisabledLogger(`${name}:trace`);\n    // look at all the debug names and see if trace logging has explicitly been enabled\n    if (debug.enabled(`${name}:trace`) && debug.names.map(r => r.toString()).find(n => n.includes(':trace')) != null) {\n        trace = debug(`${name}:trace`);\n    }\n    return Object.assign(debug(name), {\n        error: debug(`${name}:error`),\n        trace\n    });\n}\nexport function disable() {\n    debug.disable();\n}\nexport function enable(namespaces) {\n    debug.enable(namespaces);\n}\nexport function enabled(namespaces) {\n    return debug.enabled(namespaces);\n}\n//# sourceMappingURL=index.js.map","import { concat as uint8ArrayConcat } from 'uint8arrays/concat';\nexport function wrapHash(hashFn) {\n    function hashing(value) {\n        if (value instanceof InfiniteHash) {\n            // already a hash. return it\n            return value;\n        }\n        else {\n            return new InfiniteHash(value, hashFn);\n        }\n    }\n    return hashing;\n}\nexport class InfiniteHash {\n    _value;\n    _hashFn;\n    _depth;\n    _availableBits;\n    _currentBufferIndex;\n    _buffers;\n    constructor(value, hashFn) {\n        if (!(value instanceof Uint8Array)) {\n            throw new Error('can only hash Uint8Arrays');\n        }\n        this._value = value;\n        this._hashFn = hashFn;\n        this._depth = -1;\n        this._availableBits = 0;\n        this._currentBufferIndex = 0;\n        this._buffers = [];\n    }\n    async take(bits) {\n        let pendingBits = bits;\n        while (this._availableBits < pendingBits) {\n            await this._produceMoreBits();\n        }\n        let result = 0;\n        while (pendingBits > 0) {\n            const hash = this._buffers[this._currentBufferIndex];\n            const available = Math.min(hash.availableBits(), pendingBits);\n            const took = hash.take(available);\n            result = (result << available) + took;\n            pendingBits -= available;\n            this._availableBits -= available;\n            if (hash.availableBits() === 0) {\n                this._currentBufferIndex++;\n            }\n        }\n        return result;\n    }\n    untake(bits) {\n        let pendingBits = bits;\n        while (pendingBits > 0) {\n            const hash = this._buffers[this._currentBufferIndex];\n            const availableForUntake = Math.min(hash.totalBits() - hash.availableBits(), pendingBits);\n            hash.untake(availableForUntake);\n            pendingBits -= availableForUntake;\n            this._availableBits += availableForUntake;\n            if (this._currentBufferIndex > 0 && hash.totalBits() === hash.availableBits()) {\n                this._depth--;\n                this._currentBufferIndex--;\n            }\n        }\n    }\n    async _produceMoreBits() {\n        this._depth++;\n        const value = this._depth > 0 ? uint8ArrayConcat([this._value, Uint8Array.from([this._depth])]) : this._value;\n        const hashValue = await this._hashFn(value);\n        const buffer = new ConsumableBuffer(hashValue);\n        this._buffers.push(buffer);\n        this._availableBits += buffer.availableBits();\n    }\n}\nconst START_MASKS = [\n    0b11111111,\n    0b11111110,\n    0b11111100,\n    0b11111000,\n    0b11110000,\n    0b11100000,\n    0b11000000,\n    0b10000000\n];\nconst STOP_MASKS = [\n    0b00000001,\n    0b00000011,\n    0b00000111,\n    0b00001111,\n    0b00011111,\n    0b00111111,\n    0b01111111,\n    0b11111111\n];\nexport class ConsumableBuffer {\n    _value;\n    _currentBytePos;\n    _currentBitPos;\n    constructor(value) {\n        this._value = value;\n        this._currentBytePos = value.length - 1;\n        this._currentBitPos = 7;\n    }\n    availableBits() {\n        return this._currentBitPos + 1 + this._currentBytePos * 8;\n    }\n    totalBits() {\n        return this._value.length * 8;\n    }\n    take(bits) {\n        let pendingBits = bits;\n        let result = 0;\n        while (pendingBits > 0 && this._haveBits()) {\n            const byte = this._value[this._currentBytePos];\n            const availableBits = this._currentBitPos + 1;\n            const taking = Math.min(availableBits, pendingBits);\n            const value = byteBitsToInt(byte, availableBits - taking, taking);\n            result = (result << taking) + value;\n            pendingBits -= taking;\n            this._currentBitPos -= taking;\n            if (this._currentBitPos < 0) {\n                this._currentBitPos = 7;\n                this._currentBytePos--;\n            }\n        }\n        return result;\n    }\n    untake(bits) {\n        this._currentBitPos += bits;\n        while (this._currentBitPos > 7) {\n            this._currentBitPos -= 8;\n            this._currentBytePos += 1;\n        }\n    }\n    _haveBits() {\n        return this._currentBytePos >= 0;\n    }\n}\nfunction byteBitsToInt(byte, start, length) {\n    const mask = maskFor(start, length);\n    return (byte & mask) >>> start;\n}\nfunction maskFor(start, length) {\n    return START_MASKS[start] & STOP_MASKS[Math.min(length + start - 1, 7)];\n}\n//# sourceMappingURL=consumable-hash.js.map","import { bytes } from 'multiformats'\nimport { from } from 'multiformats/hashes/hasher'\n// @ts-expect-error no types\nimport mur from 'murmurhash3js-revisited'\n\n/**\n * @param {number} number\n * @returns {Uint8Array}\n */\nfunction fromNumberTo32BitBuf (number) {\n  const bytes = new Array(4)\n  for (let i = 0; i < 4; i++) {\n    bytes[i] = number & 0xff\n    number = number >> 8\n  }\n  return new Uint8Array(bytes)\n}\n\nexport const murmur332 = from({\n  name: 'murmur3-32',\n  code: 0x23,\n  encode: (input) => fromNumberTo32BitBuf(mur.x86.hash32(input))\n})\n\nexport const murmur3128 = from({\n  name: 'murmur3-128',\n  code: 0x22,\n  encode: (input) => bytes.fromHex(mur.x64.hash128(input))\n})\n\n// A special-use 0x22 that truncates 64 bits, specifically for use in the UnixFS HAMT\nexport const murmur364 = from({\n  name: 'murmur3-x64-64',\n  code: 0x22,\n  encode: (input) => bytes.fromHex(mur.x64.hash128(input)).subarray(0, 8)\n})\n","import { murmur3128 } from '@multiformats/murmur3';\nexport const hamtHashCode = BigInt(murmur3128.code);\nexport const hamtBucketBits = 8;\nexport async function hamtHashFn(buf) {\n    return (await murmur3128.encode(buf))\n        // Murmur3 outputs 128 bit but, accidentally, IPFS Go's\n        // implementation only uses the first 64, so we must do the same\n        // for parity..\n        .subarray(0, 8)\n        // Invert buffer because that's how Go impl does it\n        .reverse();\n}\n//# sourceMappingURL=hamt-constants.js.map","import * as dagPb from '@ipld/dag-pb';\nimport { CID } from 'multiformats/cid';\nimport { sha256 } from 'multiformats/hashes/sha2';\nexport const persist = async (buffer, blockstore, options) => {\n    if (options.codec == null) {\n        options.codec = dagPb;\n    }\n    const multihash = await sha256.digest(buffer);\n    const cid = CID.create(options.cidVersion, options.codec.code, multihash);\n    await blockstore.put(cid, buffer, {\n        ...options,\n        signal: options.signal\n    });\n    return cid;\n};\n//# sourceMappingURL=persist.js.map","import { encode, prepare } from '@ipld/dag-pb';\nimport { createHAMT, Bucket } from 'hamt-sharding';\nimport { UnixFS } from 'ipfs-unixfs';\nimport { CID } from 'multiformats/cid';\nimport { hamtHashCode, hamtHashFn } from './hamt-constants.js';\nimport { persist } from './persist.js';\nclass Dir {\n    options;\n    root;\n    dir;\n    path;\n    dirty;\n    flat;\n    parent;\n    parentKey;\n    unixfs;\n    mode;\n    mtime;\n    cid;\n    size;\n    nodeSize;\n    constructor(props, options) {\n        this.options = options ?? {};\n        this.root = props.root;\n        this.dir = props.dir;\n        this.path = props.path;\n        this.dirty = props.dirty;\n        this.flat = props.flat;\n        this.parent = props.parent;\n        this.parentKey = props.parentKey;\n        this.unixfs = props.unixfs;\n        this.mode = props.mode;\n        this.mtime = props.mtime;\n    }\n}\nexport class DirSharded extends Dir {\n    _bucket;\n    constructor(props, options) {\n        super(props, options);\n        this._bucket = createHAMT({\n            hashFn: hamtHashFn,\n            bits: 8\n        });\n    }\n    async put(name, value) {\n        this.cid = undefined;\n        this.size = undefined;\n        this.nodeSize = undefined;\n        await this._bucket.put(name, value);\n    }\n    async get(name) {\n        return this._bucket.get(name);\n    }\n    childCount() {\n        return this._bucket.leafCount();\n    }\n    directChildrenCount() {\n        return this._bucket.childrenCount();\n    }\n    onlyChild() {\n        return this._bucket.onlyChild();\n    }\n    async *eachChildSeries() {\n        for await (const { key, value } of this._bucket.eachLeafSeries()) {\n            yield {\n                key,\n                child: value\n            };\n        }\n    }\n    estimateNodeSize() {\n        if (this.nodeSize !== undefined) {\n            return this.nodeSize;\n        }\n        this.nodeSize = calculateSize(this._bucket, this, this.options);\n        return this.nodeSize;\n    }\n    async *flush(blockstore) {\n        for await (const entry of flush(this._bucket, blockstore, this, this.options)) {\n            yield {\n                ...entry,\n                path: this.path\n            };\n        }\n    }\n}\nasync function* flush(bucket, blockstore, shardRoot, options) {\n    const children = bucket._children;\n    const links = [];\n    let childrenSize = 0n;\n    for (let i = 0; i < children.length; i++) {\n        const child = children.get(i);\n        if (child == null) {\n            continue;\n        }\n        const labelPrefix = i.toString(16).toUpperCase().padStart(2, '0');\n        if (child instanceof Bucket) {\n            let shard;\n            for await (const subShard of flush(child, blockstore, null, options)) {\n                shard = subShard;\n            }\n            if (shard == null) {\n                throw new Error('Could not flush sharded directory, no subshard found');\n            }\n            links.push({\n                Name: labelPrefix,\n                Tsize: Number(shard.size),\n                Hash: shard.cid\n            });\n            childrenSize += shard.size;\n        }\n        else if (isDir(child.value)) {\n            const dir = child.value;\n            let flushedDir;\n            for await (const entry of dir.flush(blockstore)) {\n                flushedDir = entry;\n                yield flushedDir;\n            }\n            if (flushedDir == null) {\n                throw new Error('Did not flush dir');\n            }\n            const label = labelPrefix + child.key;\n            links.push({\n                Name: label,\n                Tsize: Number(flushedDir.size),\n                Hash: flushedDir.cid\n            });\n            childrenSize += flushedDir.size;\n        }\n        else {\n            const value = child.value;\n            if (value.cid == null) {\n                continue;\n            }\n            const label = labelPrefix + child.key;\n            const size = value.size;\n            links.push({\n                Name: label,\n                Tsize: Number(size),\n                Hash: value.cid\n            });\n            childrenSize += BigInt(size ?? 0);\n        }\n    }\n    // go-ipfs uses little endian, that's why we have to\n    // reverse the bit field before storing it\n    const data = Uint8Array.from(children.bitField().reverse());\n    const dir = new UnixFS({\n        type: 'hamt-sharded-directory',\n        data,\n        fanout: BigInt(bucket.tableSize()),\n        hashType: hamtHashCode,\n        mtime: shardRoot?.mtime,\n        mode: shardRoot?.mode\n    });\n    const node = {\n        Data: dir.marshal(),\n        Links: links\n    };\n    const buffer = encode(prepare(node));\n    const cid = await persist(buffer, blockstore, options);\n    const size = BigInt(buffer.byteLength) + childrenSize;\n    yield {\n        cid,\n        unixfs: dir,\n        size\n    };\n}\nfunction isDir(obj) {\n    return typeof obj.flush === 'function';\n}\nfunction calculateSize(bucket, shardRoot, options) {\n    const children = bucket._children;\n    const links = [];\n    for (let i = 0; i < children.length; i++) {\n        const child = children.get(i);\n        if (child == null) {\n            continue;\n        }\n        const labelPrefix = i.toString(16).toUpperCase().padStart(2, '0');\n        if (child instanceof Bucket) {\n            const size = calculateSize(child, null, options);\n            links.push({\n                Name: labelPrefix,\n                Tsize: Number(size),\n                Hash: options.cidVersion === 0 ? CID_V0 : CID_V1\n            });\n        }\n        else if (typeof child.value.flush === 'function') {\n            const dir = child.value;\n            const size = dir.nodeSize();\n            links.push({\n                Name: labelPrefix + child.key,\n                Tsize: Number(size),\n                Hash: options.cidVersion === 0 ? CID_V0 : CID_V1\n            });\n        }\n        else {\n            const value = child.value;\n            if (value.cid == null) {\n                continue;\n            }\n            const label = labelPrefix + child.key;\n            const size = value.size;\n            links.push({\n                Name: label,\n                Tsize: Number(size),\n                Hash: value.cid\n            });\n        }\n    }\n    // go-ipfs uses little endian, that's why we have to\n    // reverse the bit field before storing it\n    const data = Uint8Array.from(children.bitField().reverse());\n    const dir = new UnixFS({\n        type: 'hamt-sharded-directory',\n        data,\n        fanout: BigInt(bucket.tableSize()),\n        hashType: hamtHashCode,\n        mtime: shardRoot?.mtime,\n        mode: shardRoot?.mode\n    });\n    const buffer = encode(prepare({\n        Data: dir.marshal(),\n        Links: links\n    }));\n    return buffer.length;\n}\n// we use these to calculate the node size to use as a check for whether a directory\n// should be sharded or not. Since CIDs have a constant length and We're only\n// interested in the data length and not the actual content identifier we can use\n// any old CID instead of having to hash the data which is expensive.\nexport const CID_V0 = CID.parse('QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn');\nexport const CID_V1 = CID.parse('zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi');\n//# sourceMappingURL=dir-sharded.js.map","import * as dagPB from '@ipld/dag-pb';\nimport { logger } from '@libp2p/logger';\nimport { UnixFS } from 'ipfs-unixfs';\nimport last from 'it-last';\n// @ts-expect-error no types\nimport SparseArray from 'sparse-array';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport { wrapHash } from './consumable-hash.js';\nimport { DirSharded } from './dir-sharded.js';\nimport { hamtHashCode, hamtHashFn, hamtBucketBits } from './hamt-constants.js';\nimport { persist } from './persist.js';\nconst log = logger('helia:unixfs:commands:utils:hamt-utils');\nexport const toPrefix = (position) => {\n    return position\n        .toString(16)\n        .toUpperCase()\n        .padStart(2, '0')\n        .substring(0, 2);\n};\nexport const createShard = async (blockstore, contents, options) => {\n    const shard = new DirSharded({\n        root: true,\n        dir: true,\n        parent: undefined,\n        parentKey: undefined,\n        path: '',\n        dirty: true,\n        flat: false,\n        mtime: options.mtime,\n        mode: options.mode\n    }, options);\n    for (let i = 0; i < contents.length; i++) {\n        await shard._bucket.put(contents[i].name, {\n            size: contents[i].size,\n            cid: contents[i].cid\n        });\n    }\n    const res = await last(shard.flush(blockstore));\n    if (res == null) {\n        throw new Error('Flushing shard yielded no result');\n    }\n    return res;\n};\nexport const updateShardedDirectory = async (path, blockstore, options) => {\n    // persist any metadata on the shard root\n    const shardRoot = UnixFS.unmarshal(path[0].node.Data ?? new Uint8Array(0));\n    // this is always the same\n    const fanout = BigInt(Math.pow(2, hamtBucketBits));\n    // start from the leaf and ascend to the root\n    path.reverse();\n    let cid;\n    let node;\n    for (let i = 0; i < path.length; i++) {\n        const isRoot = i === path.length - 1;\n        const segment = path[i];\n        // go-ipfs uses little endian, that's why we have to\n        // reverse the bit field before storing it\n        const data = Uint8Array.from(segment.children.bitField().reverse());\n        const dir = new UnixFS({\n            type: 'hamt-sharded-directory',\n            data,\n            fanout,\n            hashType: hamtHashCode\n        });\n        if (isRoot) {\n            dir.mtime = shardRoot.mtime;\n            dir.mode = shardRoot.mode;\n        }\n        node = {\n            Data: dir.marshal(),\n            Links: segment.node.Links\n        };\n        const block = dagPB.encode(dagPB.prepare(node));\n        cid = await persist(block, blockstore, options);\n        if (!isRoot) {\n            // update link in parent sub-shard\n            const nextSegment = path[i + 1];\n            if (nextSegment == null) {\n                throw new Error('Was not operating on shard root but also had no parent?');\n            }\n            log('updating link in parent sub-shard with prefix %s', nextSegment.prefix);\n            nextSegment.node.Links = nextSegment.node.Links.filter(l => l.Name !== nextSegment.prefix);\n            nextSegment.node.Links.push({\n                Name: nextSegment.prefix,\n                Hash: cid,\n                Tsize: segment.node.Links.reduce((acc, curr) => acc + (curr.Tsize ?? 0), block.byteLength)\n            });\n        }\n    }\n    if (cid == null || node == null) {\n        throw new Error('Noting persisted');\n    }\n    return { cid, node };\n};\nexport const recreateShardedDirectory = async (cid, fileName, blockstore, options) => {\n    const wrapped = wrapHash(hamtHashFn);\n    const hash = wrapped(uint8ArrayFromString(fileName));\n    const path = [];\n    // descend the HAMT, loading each layer as we head towards the target child\n    while (true) {\n        const block = await blockstore.get(cid, options);\n        const node = dagPB.decode(block);\n        const children = new SparseArray();\n        const index = await hash.take(hamtBucketBits);\n        const prefix = toPrefix(index);\n        path.push({\n            prefix,\n            children,\n            node\n        });\n        let childLink;\n        // update sparsearray child layout - the bitfield is used as the data field for the\n        // intermediate DAG node so this is required to generate consistent hashes\n        for (const link of node.Links) {\n            const linkName = link.Name ?? '';\n            if (linkName.length < 2) {\n                throw new Error('Invalid HAMT - link name was too short');\n            }\n            const position = parseInt(linkName.substring(0, 2), 16);\n            children.set(position, true);\n            // we found the child we are looking for\n            if (linkName.startsWith(prefix)) {\n                childLink = link;\n            }\n        }\n        if (childLink == null) {\n            log('no link found with prefix %s for %s', prefix, fileName);\n            // hash.untake(hamtBucketBits)\n            break;\n        }\n        const linkName = childLink.Name ?? '';\n        if (linkName.length < 2) {\n            throw new Error('Invalid HAMT - link name was too short');\n        }\n        if (linkName.length === 2) {\n            // found sub-shard\n            cid = childLink.Hash;\n            log('descend into sub-shard with prefix %s', linkName);\n            continue;\n        }\n        break;\n    }\n    return { path, hash };\n};\n//# sourceMappingURL=hamt-utils.js.map","import * as dagPb from '@ipld/dag-pb';\nimport { UnixFS } from 'ipfs-unixfs';\nimport { CID_V0, CID_V1 } from './dir-sharded.js';\n/**\n * Estimate node size only based on DAGLink name and CID byte lengths\n * https://github.com/ipfs/go-unixfsnode/blob/37b47f1f917f1b2f54c207682f38886e49896ef9/data/builder/directory.go#L81-L96\n *\n * If the node is a hamt sharded directory the calculation is based on if it was a regular directory.\n */\nexport async function isOverShardThreshold(node, blockstore, threshold, options) {\n    if (node.Data == null) {\n        throw new Error('DagPB node had no data');\n    }\n    const unixfs = UnixFS.unmarshal(node.Data);\n    let size;\n    if (unixfs.type === 'directory') {\n        size = estimateNodeSize(node);\n    }\n    else if (unixfs.type === 'hamt-sharded-directory') {\n        size = await estimateShardSize(node, 0, threshold, blockstore, options);\n    }\n    else {\n        throw new Error('Can only estimate the size of directories or shards');\n    }\n    return size > threshold;\n}\nfunction estimateNodeSize(node) {\n    let size = 0;\n    // estimate size only based on DAGLink name and CID byte lengths\n    // https://github.com/ipfs/go-unixfsnode/blob/37b47f1f917f1b2f54c207682f38886e49896ef9/data/builder/directory.go#L81-L96\n    for (const link of node.Links) {\n        size += (link.Name ?? '').length;\n        size += link.Hash.version === 1 ? CID_V1.bytes.byteLength : CID_V0.bytes.byteLength;\n    }\n    return size;\n}\nasync function estimateShardSize(node, current, max, blockstore, options) {\n    if (current > max) {\n        return max;\n    }\n    if (node.Data == null) {\n        return current;\n    }\n    const unixfs = UnixFS.unmarshal(node.Data);\n    if (!unixfs.isDirectory()) {\n        return current;\n    }\n    for (const link of node.Links) {\n        let name = link.Name ?? '';\n        // remove hamt hash prefix from name\n        name = name.substring(2);\n        current += name.length;\n        current += link.Hash.bytes.byteLength;\n        if (link.Hash.code === dagPb.code) {\n            const block = await blockstore.get(link.Hash, options);\n            const node = dagPb.decode(block);\n            current += await estimateShardSize(node, current, max, blockstore, options);\n        }\n    }\n    return current;\n}\n//# sourceMappingURL=is-over-shard-threshold.js.map","import * as dagPB from '@ipld/dag-pb';\nimport { logger } from '@libp2p/logger';\nimport { UnixFS } from 'ipfs-unixfs';\nimport { CID } from 'multiformats/cid';\nimport { sha256 } from 'multiformats/hashes/sha2';\n// @ts-expect-error no types\nimport SparseArray from 'sparse-array';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport { AlreadyExistsError, InvalidParametersError, InvalidPBNodeError } from '../../errors.js';\nimport { wrapHash } from './consumable-hash.js';\nimport { hamtBucketBits, hamtHashFn } from './hamt-constants.js';\nimport { createShard, recreateShardedDirectory, toPrefix, updateShardedDirectory } from './hamt-utils.js';\nimport { isOverShardThreshold } from './is-over-shard-threshold.js';\nconst log = logger('helia:unixfs:components:utils:add-link');\nexport async function addLink(parent, child, blockstore, options) {\n    if (parent.node.Data == null) {\n        throw new InvalidParametersError('Invalid parent passed to addLink');\n    }\n    const meta = UnixFS.unmarshal(parent.node.Data);\n    if (meta.type === 'hamt-sharded-directory') {\n        log('adding link to sharded directory');\n        return addToShardedDirectory(parent, child, blockstore, options);\n    }\n    log(`adding ${child.Name} (${child.Hash}) to regular directory`);\n    const result = await addToDirectory(parent, child, blockstore, options);\n    if (await isOverShardThreshold(result.node, blockstore, options.shardSplitThresholdBytes, options)) {\n        log('converting directory to sharded directory');\n        const converted = await convertToShardedDirectory(result, blockstore);\n        result.cid = converted.cid;\n        result.node = dagPB.decode(await blockstore.get(converted.cid, options));\n    }\n    return result;\n}\nconst convertToShardedDirectory = async (parent, blockstore) => {\n    if (parent.node.Data == null) {\n        throw new InvalidParametersError('Invalid parent passed to convertToShardedDirectory');\n    }\n    const unixfs = UnixFS.unmarshal(parent.node.Data);\n    const result = await createShard(blockstore, parent.node.Links.map(link => ({\n        name: (link.Name ?? ''),\n        size: BigInt(link.Tsize ?? 0),\n        cid: link.Hash\n    })), {\n        mode: unixfs.mode,\n        mtime: unixfs.mtime,\n        cidVersion: parent.cid.version\n    });\n    log(`converted directory to sharded directory ${result.cid}`);\n    return result;\n};\nconst addToDirectory = async (parent, child, blockstore, options) => {\n    // Remove existing link if it exists\n    const parentLinks = parent.node.Links.filter((link) => {\n        const matches = link.Name === child.Name;\n        if (matches && !options.allowOverwriting) {\n            throw new AlreadyExistsError();\n        }\n        return !matches;\n    });\n    parentLinks.push(child);\n    if (parent.node.Data == null) {\n        throw new InvalidPBNodeError('Parent node with no data passed to addToDirectory');\n    }\n    const node = UnixFS.unmarshal(parent.node.Data);\n    let data;\n    if (node.mtime != null) {\n        // Update mtime if previously set\n        const ms = Date.now();\n        const secs = Math.floor(ms / 1000);\n        node.mtime = {\n            secs: BigInt(secs),\n            nsecs: (ms - (secs * 1000)) * 1000\n        };\n        data = node.marshal();\n    }\n    else {\n        data = parent.node.Data;\n    }\n    parent.node = dagPB.prepare({\n        Data: data,\n        Links: parentLinks\n    });\n    // Persist the new parent PbNode\n    const buf = dagPB.encode(parent.node);\n    const hash = await sha256.digest(buf);\n    const cid = CID.create(parent.cid.version, dagPB.code, hash);\n    await blockstore.put(cid, buf);\n    return {\n        node: parent.node,\n        cid\n    };\n};\nconst addToShardedDirectory = async (parent, child, blockstore, options) => {\n    const { path, hash } = await recreateShardedDirectory(parent.cid, child.Name, blockstore, options);\n    const finalSegment = path[path.length - 1];\n    if (finalSegment == null) {\n        throw new Error('Invalid HAMT, could not generate path');\n    }\n    // find the next prefix\n    // const index = await hash.take(hamtBucketBits)\n    const prefix = finalSegment.prefix;\n    const index = parseInt(prefix, 16);\n    log('next prefix for %s is %s', child.Name, prefix);\n    const linkName = `${prefix}${child.Name}`;\n    const existingLink = finalSegment.node.Links.find(l => (l.Name ?? '').startsWith(prefix));\n    if (existingLink != null) {\n        log('link %s was present in shard', linkName);\n        // link is already present in shard\n        if (existingLink.Name === linkName) {\n            // file with same name is already present in shard\n            if (!options.allowOverwriting) {\n                throw new AlreadyExistsError();\n            }\n            log('overwriting %s in subshard', child.Name);\n            finalSegment.node.Links = finalSegment.node.Links.filter(l => l.Name !== linkName);\n            finalSegment.node.Links.push({\n                Name: linkName,\n                Hash: child.Hash,\n                Tsize: child.Tsize\n            });\n        }\n        else if (existingLink.Name?.length === 2) {\n            throw new Error('Existing link was subshard?!');\n        }\n        else {\n            // conflict, add a new HAMT segment\n            log('prefix %s already exists, creating new subshard', prefix);\n            // find the sibling we are going to replace\n            const index = finalSegment.node.Links.findIndex(l => l.Name?.startsWith(prefix));\n            const sibling = finalSegment.node.Links.splice(index, 1)[0];\n            // give the sibling a new HAMT prefix\n            const siblingName = (sibling.Name ?? '').substring(2);\n            const wrapped = wrapHash(hamtHashFn);\n            const siblingHash = wrapped(uint8ArrayFromString(siblingName));\n            // discard hash bits until we reach the subshard depth\n            for (let i = 0; i < path.length; i++) {\n                await siblingHash.take(hamtBucketBits);\n            }\n            while (true) {\n                const siblingIndex = await siblingHash.take(hamtBucketBits);\n                const siblingPrefix = toPrefix(siblingIndex);\n                sibling.Name = `${siblingPrefix}${siblingName}`;\n                // calculate the target file's HAMT prefix in the new sub-shard\n                const newIndex = await hash.take(hamtBucketBits);\n                const newPrefix = toPrefix(newIndex);\n                if (siblingPrefix === newPrefix) {\n                    // the two sibling names have caused another conflict - add an intermediate node to\n                    // the HAMT and try again\n                    // create the child locations\n                    const children = new SparseArray();\n                    children.set(newIndex, true);\n                    path.push({\n                        prefix: newPrefix,\n                        children,\n                        node: {\n                            Links: []\n                        }\n                    });\n                    continue;\n                }\n                // create the child locations\n                const children = new SparseArray();\n                children.set(newIndex, true);\n                children.set(siblingIndex, true);\n                // add our new segment\n                path.push({\n                    prefix,\n                    children,\n                    node: {\n                        Links: [\n                            sibling, {\n                                Name: `${newPrefix}${child.Name}`,\n                                Hash: child.Hash,\n                                Tsize: child.Tsize\n                            }\n                        ]\n                    }\n                });\n                break;\n            }\n        }\n    }\n    else {\n        log('link %s was not present in sub-shard', linkName);\n        // add new link to shard\n        child.Name = linkName;\n        finalSegment.node.Links.push(child);\n        finalSegment.children.set(index, true);\n        log('adding %s to existing sub-shard', linkName);\n    }\n    return updateShardedDirectory(path, blockstore, options);\n};\n//# sourceMappingURL=add-link.js.map","import { exporter } from 'ipfs-unixfs-exporter';\nimport { NotADirectoryError } from '../../errors.js';\nexport async function cidToDirectory(cid, blockstore, options = {}) {\n    const entry = await exporter(cid, blockstore, options);\n    if (entry.type !== 'directory') {\n        throw new NotADirectoryError(`${cid.toString()} was not a UnixFS directory`);\n    }\n    return {\n        cid,\n        node: entry.node\n    };\n}\n//# sourceMappingURL=cid-to-directory.js.map","import * as dagPb from '@ipld/dag-pb';\nimport { exporter } from 'ipfs-unixfs-exporter';\nimport { NotUnixFSError } from '../../errors.js';\nexport async function cidToPBLink(cid, name, blockstore, options) {\n    const sourceEntry = await exporter(cid, blockstore, options);\n    if (sourceEntry.type !== 'directory' && sourceEntry.type !== 'file' && sourceEntry.type !== 'raw') {\n        throw new NotUnixFSError(`${cid.toString()} was not a UnixFS node`);\n    }\n    return {\n        Name: name,\n        Tsize: sourceEntry.node instanceof Uint8Array ? sourceEntry.node.byteLength : dagNodeTsize(sourceEntry.node),\n        Hash: cid\n    };\n}\nfunction dagNodeTsize(node) {\n    const linkSizes = node.Links.reduce((acc, curr) => acc + (curr.Tsize ?? 0), 0);\n    return dagPb.encode(node).byteLength + linkSizes;\n}\n//# sourceMappingURL=cid-to-pblink.js.map","import { logger } from '@libp2p/logger';\nimport { exporter } from 'ipfs-unixfs-exporter';\nimport { DoesNotExistError, InvalidParametersError } from '../../errors.js';\nimport { addLink } from './add-link.js';\nimport { cidToDirectory } from './cid-to-directory.js';\nimport { cidToPBLink } from './cid-to-pblink.js';\nconst log = logger('helia:unixfs:components:utils:resolve');\nexport async function resolve(cid, path, blockstore, options) {\n    if (path == null || path === '') {\n        return { cid };\n    }\n    log('resolve \"%s\" under %c', path, cid);\n    const parts = path.split('/').filter(Boolean);\n    const segments = [{\n            name: '',\n            cid,\n            size: 0n\n        }];\n    for (let i = 0; i < parts.length; i++) {\n        const part = parts[i];\n        const result = await exporter(cid, blockstore, options);\n        log('resolving \"%s\"', part, result);\n        if (result.type === 'file') {\n            if (i < parts.length - 1) {\n                throw new InvalidParametersError('Path was invalid');\n            }\n            cid = result.cid;\n        }\n        else if (result.type === 'directory') {\n            let dirCid;\n            for await (const entry of result.content()) {\n                if (entry.name === part) {\n                    dirCid = entry.cid;\n                    break;\n                }\n            }\n            if (dirCid == null) {\n                throw new DoesNotExistError('Could not find path in directory');\n            }\n            cid = dirCid;\n            segments.push({\n                name: part,\n                cid,\n                size: result.size\n            });\n        }\n        else {\n            throw new InvalidParametersError('Could not resolve path');\n        }\n    }\n    log('resolved %s to %c', path, cid);\n    return {\n        cid,\n        path,\n        segments\n    };\n}\n/**\n * Where we have descended into a DAG to update a child node, ascend up the DAG creating\n * new hashes and blocks for the changed content\n */\nexport async function updatePathCids(cid, result, blockstore, options) {\n    if (result.segments == null || result.segments.length === 0) {\n        return cid;\n    }\n    let child = result.segments.pop();\n    if (child == null) {\n        throw new Error('Insufficient segments');\n    }\n    child.cid = cid;\n    result.segments.reverse();\n    for (const parent of result.segments) {\n        const [directory, pblink] = await Promise.all([\n            cidToDirectory(parent.cid, blockstore, options),\n            cidToPBLink(child.cid, child.name, blockstore, options)\n        ]);\n        const result = await addLink(directory, pblink, blockstore, {\n            ...options,\n            allowOverwriting: true,\n            cidVersion: cid.version\n        });\n        cid = result.cid;\n        parent.cid = cid;\n        child = parent;\n    }\n    return cid;\n}\n//# sourceMappingURL=resolve.js.map","import { exporter } from 'ipfs-unixfs-exporter';\nimport mergeOpts from 'merge-options';\nimport { NoContentError, NotAFileError } from '../errors.js';\nimport { resolve } from './utils/resolve.js';\nconst mergeOptions = mergeOpts.bind({ ignoreUndefined: true });\nconst defaultOptions = {};\nexport async function* cat(cid, blockstore, options = {}) {\n    const opts = mergeOptions(defaultOptions, options);\n    const resolved = await resolve(cid, opts.path, blockstore, opts);\n    const result = await exporter(resolved.cid, blockstore, opts);\n    if (result.type !== 'file' && result.type !== 'raw') {\n        throw new NotAFileError();\n    }\n    if (result.content == null) {\n        throw new NoContentError();\n    }\n    yield* result.content(opts);\n}\n//# sourceMappingURL=cat.js.map","export const SHARD_SPLIT_THRESHOLD_BYTES = 262144;\n//# sourceMappingURL=constants.js.map","import * as dagPB from '@ipld/dag-pb';\nimport { logger } from '@libp2p/logger';\nimport { UnixFS } from 'ipfs-unixfs';\nimport { recursive } from 'ipfs-unixfs-exporter';\nimport { importer } from 'ipfs-unixfs-importer';\nimport last from 'it-last';\nimport { pipe } from 'it-pipe';\nimport mergeOpts from 'merge-options';\nimport { CID } from 'multiformats/cid';\nimport * as raw from 'multiformats/codecs/raw';\nimport { sha256 } from 'multiformats/hashes/sha2';\nimport { InvalidPBNodeError, NotUnixFSError, UnknownError } from '../errors.js';\nimport { SHARD_SPLIT_THRESHOLD_BYTES } from './utils/constants.js';\nimport { persist } from './utils/persist.js';\nimport { resolve, updatePathCids } from './utils/resolve.js';\nconst mergeOptions = mergeOpts.bind({ ignoreUndefined: true });\nconst log = logger('helia:unixfs:chmod');\nconst defaultOptions = {\n    recursive: false,\n    shardSplitThresholdBytes: SHARD_SPLIT_THRESHOLD_BYTES\n};\nexport async function chmod(cid, mode, blockstore, options = {}) {\n    const opts = mergeOptions(defaultOptions, options);\n    const resolved = await resolve(cid, opts.path, blockstore, options);\n    log('chmod %c %d', resolved.cid, mode);\n    if (opts.recursive) {\n        // recursively export from root CID, change perms of each entry then reimport\n        // but do not reimport files, only manipulate dag-pb nodes\n        const root = await pipe(async function* () {\n            for await (const entry of recursive(resolved.cid, blockstore, options)) {\n                let metadata;\n                let links = [];\n                if (entry.type === 'raw') {\n                    // convert to UnixFS\n                    metadata = new UnixFS({ type: 'file', data: entry.node });\n                }\n                else if (entry.type === 'file' || entry.type === 'directory') {\n                    metadata = entry.unixfs;\n                    links = entry.node.Links;\n                }\n                else {\n                    throw new NotUnixFSError();\n                }\n                metadata.mode = mode;\n                const node = {\n                    Data: metadata.marshal(),\n                    Links: links\n                };\n                yield {\n                    path: entry.path,\n                    content: node\n                };\n            }\n        }, \n        // @ts-expect-error cannot combine progress types\n        (source) => importer(source, blockstore, {\n            ...opts,\n            dagBuilder: async function* (source, block) {\n                for await (const entry of source) {\n                    yield async function () {\n                        // @ts-expect-error cannot derive type\n                        const node = entry.content;\n                        const buf = dagPB.encode(node);\n                        const updatedCid = await persist(buf, block, {\n                            ...opts,\n                            cidVersion: cid.version\n                        });\n                        if (node.Data == null) {\n                            throw new InvalidPBNodeError(`${updatedCid} had no data`);\n                        }\n                        const unixfs = UnixFS.unmarshal(node.Data);\n                        return {\n                            cid: updatedCid,\n                            size: BigInt(buf.length),\n                            path: entry.path,\n                            unixfs\n                        };\n                    };\n                }\n            }\n        }), async (nodes) => last(nodes));\n        if (root == null) {\n            throw new UnknownError(`Could not chmod ${resolved.cid.toString()}`);\n        }\n        return updatePathCids(root.cid, resolved, blockstore, opts);\n    }\n    const block = await blockstore.get(resolved.cid, options);\n    let metadata;\n    let links = [];\n    if (resolved.cid.code === raw.code) {\n        // convert to UnixFS\n        metadata = new UnixFS({ type: 'file', data: block });\n    }\n    else {\n        const node = dagPB.decode(block);\n        if (node.Data == null) {\n            throw new InvalidPBNodeError(`${resolved.cid.toString()} had no data`);\n        }\n        links = node.Links;\n        metadata = UnixFS.unmarshal(node.Data);\n    }\n    metadata.mode = mode;\n    const updatedBlock = dagPB.encode({\n        Data: metadata.marshal(),\n        Links: links\n    });\n    const hash = await sha256.digest(updatedBlock);\n    const updatedCid = CID.create(resolved.cid.version, dagPB.code, hash);\n    await blockstore.put(updatedCid, updatedBlock);\n    return updatePathCids(updatedCid, resolved, blockstore, opts);\n}\n//# sourceMappingURL=chmod.js.map","import { logger } from '@libp2p/logger';\nimport mergeOpts from 'merge-options';\nimport { InvalidParametersError } from '../errors.js';\nimport { addLink } from './utils/add-link.js';\nimport { cidToDirectory } from './utils/cid-to-directory.js';\nimport { cidToPBLink } from './utils/cid-to-pblink.js';\nimport { SHARD_SPLIT_THRESHOLD_BYTES } from './utils/constants.js';\nconst mergeOptions = mergeOpts.bind({ ignoreUndefined: true });\nconst log = logger('helia:unixfs:cp');\nconst defaultOptions = {\n    force: false,\n    shardSplitThresholdBytes: SHARD_SPLIT_THRESHOLD_BYTES\n};\nexport async function cp(source, target, name, blockstore, options = {}) {\n    const opts = mergeOptions(defaultOptions, options);\n    if (name.includes('/')) {\n        throw new InvalidParametersError('Name must not have slashes');\n    }\n    const [directory, pblink] = await Promise.all([\n        cidToDirectory(target, blockstore, opts),\n        cidToPBLink(source, name, blockstore, opts)\n    ]);\n    log('Adding %c as \"%s\" to %c', source, name, target);\n    const result = await addLink(directory, pblink, blockstore, {\n        allowOverwriting: opts.force,\n        cidVersion: target.version,\n        ...opts\n    });\n    return result.cid;\n}\n//# sourceMappingURL=cp.js.map","import { exporter } from 'ipfs-unixfs-exporter';\nimport mergeOpts from 'merge-options';\nimport { NoContentError, NotADirectoryError } from '../errors.js';\nimport { resolve } from './utils/resolve.js';\nconst mergeOptions = mergeOpts.bind({ ignoreUndefined: true });\nconst defaultOptions = {};\nexport async function* ls(cid, blockstore, options = {}) {\n    const opts = mergeOptions(defaultOptions, options);\n    const resolved = await resolve(cid, opts.path, blockstore, opts);\n    const result = await exporter(resolved.cid, blockstore);\n    if (result.type === 'file' || result.type === 'raw') {\n        yield result;\n        return;\n    }\n    if (result.content == null) {\n        throw new NoContentError();\n    }\n    if (result.type !== 'directory') {\n        throw new NotADirectoryError();\n    }\n    yield* result.content({\n        offset: options.offset,\n        length: options.length\n    });\n}\n//# sourceMappingURL=ls.js.map","import * as dagPB from '@ipld/dag-pb';\nimport { logger } from '@libp2p/logger';\nimport { UnixFS } from 'ipfs-unixfs';\nimport { exporter } from 'ipfs-unixfs-exporter';\nimport mergeOpts from 'merge-options';\nimport { CID } from 'multiformats/cid';\nimport { sha256 } from 'multiformats/hashes/sha2';\nimport { InvalidParametersError, NotADirectoryError } from '../errors.js';\nimport { addLink } from './utils/add-link.js';\nimport { cidToDirectory } from './utils/cid-to-directory.js';\nimport { cidToPBLink } from './utils/cid-to-pblink.js';\nimport { SHARD_SPLIT_THRESHOLD_BYTES } from './utils/constants.js';\nconst mergeOptions = mergeOpts.bind({ ignoreUndefined: true });\nconst log = logger('helia:unixfs:mkdir');\nconst defaultOptions = {\n    cidVersion: 1,\n    force: false,\n    shardSplitThresholdBytes: SHARD_SPLIT_THRESHOLD_BYTES\n};\nexport async function mkdir(parentCid, dirname, blockstore, options = {}) {\n    const opts = mergeOptions(defaultOptions, options);\n    if (dirname.includes('/')) {\n        throw new InvalidParametersError('Path must not have slashes');\n    }\n    const entry = await exporter(parentCid, blockstore, options);\n    if (entry.type !== 'directory') {\n        throw new NotADirectoryError(`${parentCid.toString()} was not a UnixFS directory`);\n    }\n    log('creating %s', dirname);\n    const metadata = new UnixFS({\n        type: 'directory',\n        mode: opts.mode,\n        mtime: opts.mtime\n    });\n    // Persist the new parent PBNode\n    const node = {\n        Data: metadata.marshal(),\n        Links: []\n    };\n    const buf = dagPB.encode(node);\n    const hash = await sha256.digest(buf);\n    const emptyDirCid = CID.create(opts.cidVersion, dagPB.code, hash);\n    await blockstore.put(emptyDirCid, buf);\n    const [directory, pblink] = await Promise.all([\n        cidToDirectory(parentCid, blockstore, opts),\n        cidToPBLink(emptyDirCid, dirname, blockstore, opts)\n    ]);\n    log('adding empty dir called %s to %c', dirname, parentCid);\n    const result = await addLink(directory, pblink, blockstore, {\n        ...opts,\n        allowOverwriting: opts.force\n    });\n    return result.cid;\n}\n//# sourceMappingURL=mkdir.js.map","import * as dagPB from '@ipld/dag-pb';\nimport { logger } from '@libp2p/logger';\nimport { UnixFS } from 'ipfs-unixfs';\nimport { exporter } from 'ipfs-unixfs-exporter';\nimport { InvalidParametersError, InvalidPBNodeError } from '../../errors.js';\nimport { recreateShardedDirectory, updateShardedDirectory } from './hamt-utils.js';\nimport { isOverShardThreshold } from './is-over-shard-threshold.js';\nimport { persist } from './persist.js';\nconst log = logger('helia:unixfs:utils:remove-link');\nexport async function removeLink(parent, name, blockstore, options) {\n    if (parent.node.Data == null) {\n        throw new InvalidPBNodeError('Parent node had no data');\n    }\n    const meta = UnixFS.unmarshal(parent.node.Data);\n    if (meta.type === 'hamt-sharded-directory') {\n        log(`removing ${name} from sharded directory`);\n        const result = await removeFromShardedDirectory(parent, name, blockstore, options);\n        if (!(await isOverShardThreshold(result.node, blockstore, options.shardSplitThresholdBytes, options))) {\n            log('converting shard to flat directory %c', parent.cid);\n            return convertToFlatDirectory(result, blockstore, options);\n        }\n        return result;\n    }\n    log(`removing link ${name} regular directory`);\n    return removeFromDirectory(parent, name, blockstore, options);\n}\nconst removeFromDirectory = async (parent, name, blockstore, options) => {\n    // Remove existing link if it exists\n    parent.node.Links = parent.node.Links.filter((link) => {\n        return link.Name !== name;\n    });\n    const parentBlock = dagPB.encode(parent.node);\n    const parentCid = await persist(parentBlock, blockstore, {\n        ...options,\n        cidVersion: parent.cid.version\n    });\n    log(`Updated regular directory ${parentCid}`);\n    return {\n        node: parent.node,\n        cid: parentCid\n    };\n};\nconst removeFromShardedDirectory = async (parent, name, blockstore, options) => {\n    const { path } = await recreateShardedDirectory(parent.cid, name, blockstore, options);\n    const finalSegment = path[path.length - 1];\n    if (finalSegment == null) {\n        throw new Error('Invalid HAMT, could not generate path');\n    }\n    const linkName = finalSegment.node.Links.filter(l => (l.Name ?? '').substring(2) === name).map(l => l.Name).pop();\n    if (linkName == null) {\n        throw new Error('File not found');\n    }\n    const prefix = linkName.substring(0, 2);\n    const index = parseInt(prefix, 16);\n    // remove the file from the shard\n    finalSegment.node.Links = finalSegment.node.Links.filter(link => link.Name !== linkName);\n    finalSegment.children.unset(index);\n    if (finalSegment.node.Links.length === 1) {\n        // replace the subshard with the last remaining file in the parent\n        while (true) {\n            if (path.length === 1) {\n                break;\n            }\n            const segment = path[path.length - 1];\n            if (segment == null || segment.node.Links.length > 1) {\n                break;\n            }\n            // remove final segment\n            path.pop();\n            const nextSegment = path[path.length - 1];\n            if (nextSegment == null) {\n                break;\n            }\n            const link = segment.node.Links[0];\n            nextSegment.node.Links = nextSegment.node.Links.filter(l => !(l.Name ?? '').startsWith(nextSegment.prefix));\n            nextSegment.node.Links.push({\n                Hash: link.Hash,\n                Name: `${nextSegment.prefix}${(link.Name ?? '').substring(2)}`,\n                Tsize: link.Tsize\n            });\n        }\n    }\n    return updateShardedDirectory(path, blockstore, options);\n};\nconst convertToFlatDirectory = async (parent, blockstore, options) => {\n    if (parent.node.Data == null) {\n        throw new InvalidParametersError('Invalid parent passed to convertToFlatDirectory');\n    }\n    const rootNode = {\n        Links: []\n    };\n    const dir = await exporter(parent.cid, blockstore);\n    if (dir.type !== 'directory') {\n        throw new Error('Unexpected node type');\n    }\n    for await (const entry of dir.content()) {\n        let tsize = 0;\n        if (entry.node instanceof Uint8Array) {\n            tsize = entry.node.byteLength;\n        }\n        else {\n            tsize = dagPB.encode(entry.node).length;\n        }\n        rootNode.Links.push({\n            Hash: entry.cid,\n            Name: entry.name,\n            Tsize: tsize\n        });\n    }\n    // copy mode/mtime over if set\n    const oldUnixfs = UnixFS.unmarshal(parent.node.Data);\n    rootNode.Data = new UnixFS({ type: 'directory', mode: oldUnixfs.mode, mtime: oldUnixfs.mtime }).marshal();\n    const block = dagPB.encode(dagPB.prepare(rootNode));\n    const cid = await persist(block, blockstore, {\n        codec: dagPB,\n        cidVersion: parent.cid.version,\n        signal: options.signal\n    });\n    return {\n        cid,\n        node: rootNode\n    };\n};\n//# sourceMappingURL=remove-link.js.map","import { logger } from '@libp2p/logger';\nimport mergeOpts from 'merge-options';\nimport { InvalidParametersError } from '../errors.js';\nimport { cidToDirectory } from './utils/cid-to-directory.js';\nimport { SHARD_SPLIT_THRESHOLD_BYTES } from './utils/constants.js';\nimport { removeLink } from './utils/remove-link.js';\nconst mergeOptions = mergeOpts.bind({ ignoreUndefined: true });\nconst log = logger('helia:unixfs:rm');\nconst defaultOptions = {\n    shardSplitThresholdBytes: SHARD_SPLIT_THRESHOLD_BYTES\n};\nexport async function rm(target, name, blockstore, options = {}) {\n    const opts = mergeOptions(defaultOptions, options);\n    if (name.includes('/')) {\n        throw new InvalidParametersError('Name must not have slashes');\n    }\n    const directory = await cidToDirectory(target, blockstore, opts);\n    log('Removing %s from %c', name, target);\n    const result = await removeLink(directory, name, blockstore, {\n        ...opts,\n        cidVersion: target.version\n    });\n    return result.cid;\n}\n//# sourceMappingURL=rm.js.map","import * as dagPb from '@ipld/dag-pb';\nimport { logger } from '@libp2p/logger';\nimport { UnixFS } from 'ipfs-unixfs';\nimport { exporter } from 'ipfs-unixfs-exporter';\nimport mergeOpts from 'merge-options';\nimport * as raw from 'multiformats/codecs/raw';\nimport { InvalidPBNodeError, NotUnixFSError, UnknownError } from '../errors.js';\nimport { resolve } from './utils/resolve.js';\nconst mergeOptions = mergeOpts.bind({ ignoreUndefined: true });\nconst log = logger('helia:unixfs:stat');\nconst defaultOptions = {};\nexport async function stat(cid, blockstore, options = {}) {\n    const opts = mergeOptions(defaultOptions, options);\n    const resolved = await resolve(cid, options.path, blockstore, opts);\n    log('stat %c', resolved.cid);\n    const result = await exporter(resolved.cid, blockstore, opts);\n    if (result.type !== 'file' && result.type !== 'directory' && result.type !== 'raw') {\n        throw new NotUnixFSError();\n    }\n    let fileSize = 0n;\n    let dagSize = 0n;\n    let localFileSize = 0n;\n    let localDagSize = 0n;\n    let blocks = 0;\n    let mode;\n    let mtime;\n    const type = result.type;\n    let unixfs;\n    if (result.type === 'raw') {\n        fileSize = BigInt(result.node.byteLength);\n        dagSize = BigInt(result.node.byteLength);\n        localFileSize = BigInt(result.node.byteLength);\n        localDagSize = BigInt(result.node.byteLength);\n        blocks = 1;\n    }\n    if (result.type === 'directory') {\n        fileSize = 0n;\n        dagSize = BigInt(result.unixfs.marshal().byteLength);\n        localFileSize = 0n;\n        localDagSize = dagSize;\n        blocks = 1;\n        mode = result.unixfs.mode;\n        mtime = result.unixfs.mtime;\n        unixfs = result.unixfs;\n    }\n    if (result.type === 'file') {\n        const results = await inspectDag(resolved.cid, blockstore, opts);\n        fileSize = result.unixfs.fileSize();\n        dagSize = BigInt((result.node.Data?.byteLength ?? 0) + result.node.Links.reduce((acc, curr) => acc + (curr.Tsize ?? 0), 0));\n        localFileSize = BigInt(results.localFileSize);\n        localDagSize = BigInt(results.localDagSize);\n        blocks = results.blocks;\n        mode = result.unixfs.mode;\n        mtime = result.unixfs.mtime;\n        unixfs = result.unixfs;\n    }\n    return {\n        cid: resolved.cid,\n        mode,\n        mtime,\n        fileSize,\n        dagSize,\n        localFileSize,\n        localDagSize,\n        blocks,\n        type,\n        unixfs\n    };\n}\nasync function inspectDag(cid, blockstore, options) {\n    const results = {\n        localFileSize: 0,\n        localDagSize: 0,\n        blocks: 0\n    };\n    if (await blockstore.has(cid, options)) {\n        const block = await blockstore.get(cid, options);\n        results.blocks++;\n        results.localDagSize += block.byteLength;\n        if (cid.code === raw.code) {\n            results.localFileSize += block.byteLength;\n        }\n        else if (cid.code === dagPb.code) {\n            const pbNode = dagPb.decode(block);\n            if (pbNode.Links.length > 0) {\n                // intermediate node\n                for (const link of pbNode.Links) {\n                    const linkResult = await inspectDag(link.Hash, blockstore, options);\n                    results.localFileSize += linkResult.localFileSize;\n                    results.localDagSize += linkResult.localDagSize;\n                    results.blocks += linkResult.blocks;\n                }\n            }\n            else {\n                // leaf node\n                if (pbNode.Data == null) {\n                    throw new InvalidPBNodeError(`PBNode ${cid.toString()} had no data`);\n                }\n                const unixfs = UnixFS.unmarshal(pbNode.Data);\n                if (unixfs.data == null) {\n                    throw new InvalidPBNodeError(`UnixFS node ${cid.toString()} had no data`);\n                }\n                results.localFileSize += unixfs.data.byteLength ?? 0;\n            }\n        }\n        else {\n            throw new UnknownError(`${cid.toString()} was neither DAG_PB nor RAW`);\n        }\n    }\n    return results;\n}\n//# sourceMappingURL=stat.js.map","import * as dagPB from '@ipld/dag-pb';\nimport { logger } from '@libp2p/logger';\nimport { UnixFS } from 'ipfs-unixfs';\nimport { recursive } from 'ipfs-unixfs-exporter';\nimport { importer } from 'ipfs-unixfs-importer';\nimport last from 'it-last';\nimport { pipe } from 'it-pipe';\nimport mergeOpts from 'merge-options';\nimport { CID } from 'multiformats/cid';\nimport * as raw from 'multiformats/codecs/raw';\nimport { sha256 } from 'multiformats/hashes/sha2';\nimport { InvalidPBNodeError, NotUnixFSError, UnknownError } from '../errors.js';\nimport { SHARD_SPLIT_THRESHOLD_BYTES } from './utils/constants.js';\nimport { persist } from './utils/persist.js';\nimport { resolve, updatePathCids } from './utils/resolve.js';\nconst mergeOptions = mergeOpts.bind({ ignoreUndefined: true });\nconst log = logger('helia:unixfs:touch');\nconst defaultOptions = {\n    recursive: false,\n    shardSplitThresholdBytes: SHARD_SPLIT_THRESHOLD_BYTES\n};\nexport async function touch(cid, blockstore, options = {}) {\n    const opts = mergeOptions(defaultOptions, options);\n    const resolved = await resolve(cid, opts.path, blockstore, opts);\n    const mtime = opts.mtime ?? {\n        secs: BigInt(Math.round(Date.now() / 1000)),\n        nsecs: 0\n    };\n    log('touch %c %o', resolved.cid, mtime);\n    if (opts.recursive) {\n        // recursively export from root CID, change perms of each entry then reimport\n        // but do not reimport files, only manipulate dag-pb nodes\n        const root = await pipe(async function* () {\n            for await (const entry of recursive(resolved.cid, blockstore)) {\n                let metadata;\n                let links;\n                if (entry.type === 'raw') {\n                    metadata = new UnixFS({ data: entry.node });\n                    links = [];\n                }\n                else if (entry.type === 'file' || entry.type === 'directory') {\n                    metadata = entry.unixfs;\n                    links = entry.node.Links;\n                }\n                else {\n                    throw new NotUnixFSError();\n                }\n                metadata.mtime = mtime;\n                const node = {\n                    Data: metadata.marshal(),\n                    Links: links\n                };\n                yield {\n                    path: entry.path,\n                    content: node\n                };\n            }\n        }, \n        // @ts-expect-error blockstore types are incompatible\n        (source) => importer(source, blockstore, {\n            ...opts,\n            dagBuilder: async function* (source, block) {\n                for await (const entry of source) {\n                    yield async function () {\n                        // @ts-expect-error cannot derive type\n                        const node = entry.content;\n                        const buf = dagPB.encode(node);\n                        const updatedCid = await persist(buf, block, {\n                            ...opts,\n                            cidVersion: cid.version\n                        });\n                        if (node.Data == null) {\n                            throw new InvalidPBNodeError(`${updatedCid} had no data`);\n                        }\n                        const unixfs = UnixFS.unmarshal(node.Data);\n                        return {\n                            cid: updatedCid,\n                            size: BigInt(buf.length),\n                            path: entry.path,\n                            unixfs\n                        };\n                    };\n                }\n            }\n        }), async (nodes) => last(nodes));\n        if (root == null) {\n            throw new UnknownError(`Could not chmod ${resolved.cid.toString()}`);\n        }\n        return updatePathCids(root.cid, resolved, blockstore, opts);\n    }\n    const block = await blockstore.get(resolved.cid, options);\n    let metadata;\n    let links = [];\n    if (resolved.cid.code === raw.code) {\n        metadata = new UnixFS({ data: block });\n    }\n    else {\n        const node = dagPB.decode(block);\n        links = node.Links;\n        if (node.Data == null) {\n            throw new InvalidPBNodeError(`${resolved.cid.toString()} had no data`);\n        }\n        metadata = UnixFS.unmarshal(node.Data);\n    }\n    metadata.mtime = mtime;\n    const updatedBlock = dagPB.encode({\n        Data: metadata.marshal(),\n        Links: links\n    });\n    const hash = await sha256.digest(updatedBlock);\n    const updatedCid = CID.create(resolved.cid.version, dagPB.code, hash);\n    await blockstore.put(updatedCid, updatedBlock);\n    return updatePathCids(updatedCid, resolved, blockstore, opts);\n}\n//# sourceMappingURL=touch.js.map","/**\n * @packageDocumentation\n *\n * `@helia/unixfs` is an implementation of a {@link https://github.com/ipfs/specs/blob/main/UNIXFS.md UnixFS filesystem} compatible with {@link https://github.com/ipfs/helia Helia}.\n *\n * See the {@link UnixFS UnixFS interface} for all available operations.\n *\n * @example\n *\n * ```typescript\n * import { createHelia } from 'helia'\n * import { unixfs } from '@helia/unixfs'\n *\n * const helia = createHelia({\n *   // ... helia config\n * })\n * const fs = unixfs(helia)\n *\n * // create an empty dir and a file, then add the file to the dir\n * const emptyDirCid = await fs.addDirectory()\n * const fileCid = await fs.addBytes(Uint8Array.from([0, 1, 2, 3]))\n * const updateDirCid = await fs.cp(fileCid, emptyDirCid, 'foo.txt')\n *\n * // or doing the same thing as a stream\n * for await (const entry of fs.addAll([{\n *   path: 'foo.txt',\n *   content: Uint8Array.from([0, 1, 2, 3])\n * }])) {\n *   console.info(entry)\n * }\n * ```\n *\n * @example\n *\n * Recursively adding a directory (Node.js-compatibly environments only):\n *\n * ```typescript\n * import { globSource } from '@helia/unixfs'\n *\n * for await (const entry of fs.addAll(globSource('path/to/containing/dir', 'glob-pattern'))) {\n *   console.info(entry)\n * }\n * ```\n */\nimport { addAll, addBytes, addByteStream, addDirectory, addFile } from './commands/add.js';\nimport { cat } from './commands/cat.js';\nimport { chmod } from './commands/chmod.js';\nimport { cp } from './commands/cp.js';\nimport { ls } from './commands/ls.js';\nimport { mkdir } from './commands/mkdir.js';\nimport { rm } from './commands/rm.js';\nimport { stat } from './commands/stat.js';\nimport { touch } from './commands/touch.js';\nclass DefaultUnixFS {\n    components;\n    constructor(components) {\n        this.components = components;\n    }\n    async *addAll(source, options = {}) {\n        yield* addAll(source, this.components.blockstore, options);\n    }\n    async addBytes(bytes, options = {}) {\n        return addBytes(bytes, this.components.blockstore, options);\n    }\n    async addByteStream(bytes, options = {}) {\n        return addByteStream(bytes, this.components.blockstore, options);\n    }\n    async addFile(file, options = {}) {\n        return addFile(file, this.components.blockstore, options);\n    }\n    async addDirectory(dir = {}, options = {}) {\n        return addDirectory(dir, this.components.blockstore, options);\n    }\n    async *cat(cid, options = {}) {\n        yield* cat(cid, this.components.blockstore, options);\n    }\n    async chmod(cid, mode, options = {}) {\n        return chmod(cid, mode, this.components.blockstore, options);\n    }\n    async cp(source, target, name, options = {}) {\n        return cp(source, target, name, this.components.blockstore, options);\n    }\n    async *ls(cid, options = {}) {\n        yield* ls(cid, this.components.blockstore, options);\n    }\n    async mkdir(cid, dirname, options = {}) {\n        return mkdir(cid, dirname, this.components.blockstore, options);\n    }\n    async rm(cid, path, options = {}) {\n        return rm(cid, path, this.components.blockstore, options);\n    }\n    async stat(cid, options = {}) {\n        return stat(cid, this.components.blockstore, options);\n    }\n    async touch(cid, options = {}) {\n        return touch(cid, this.components.blockstore, options);\n    }\n}\n/**\n * Create a {@link UnixFS} instance for use with {@link https://github.com/ipfs/helia Helia}\n */\nexport function unixfs(helia) {\n    return new DefaultUnixFS(helia);\n}\nexport { globSource } from './utils/glob-source.js';\nexport { urlSource } from './utils/url-source.js';\n//# sourceMappingURL=index.js.map","export class AbortError extends Error {\n    constructor(message, code) {\n        super(message ?? 'The operation was aborted');\n        this.type = 'aborted';\n        this.code = code ?? 'ABORT_ERR';\n    }\n}\n//# sourceMappingURL=abort-error.js.map","import { AbortError } from './abort-error.js';\nimport { getIterator } from 'get-iterator';\n// Wrap an iterator to make it abortable, allow cleanup when aborted via onAbort\nexport function abortableSource(source, signal, options) {\n    const opts = options ?? {};\n    const iterator = getIterator(source);\n    async function* abortable() {\n        let nextAbortHandler;\n        const abortHandler = () => {\n            if (nextAbortHandler != null)\n                nextAbortHandler();\n        };\n        signal.addEventListener('abort', abortHandler);\n        while (true) {\n            let result;\n            try {\n                if (signal.aborted) {\n                    const { abortMessage, abortCode } = opts;\n                    throw new AbortError(abortMessage, abortCode);\n                }\n                const abort = new Promise((resolve, reject) => {\n                    nextAbortHandler = () => {\n                        const { abortMessage, abortCode } = opts;\n                        reject(new AbortError(abortMessage, abortCode));\n                    };\n                });\n                // Race the iterator and the abort signals\n                result = await Promise.race([abort, iterator.next()]);\n                nextAbortHandler = null;\n            }\n            catch (err) {\n                signal.removeEventListener('abort', abortHandler);\n                // Might not have been aborted by a known signal\n                const isKnownAborter = err.type === 'aborted' && signal.aborted;\n                if (isKnownAborter && (opts.onAbort != null)) {\n                    // Do any custom abort handling for the iterator\n                    await opts.onAbort(source);\n                }\n                // End the iterator if it is a generator\n                if (typeof iterator.return === 'function') {\n                    try {\n                        const p = iterator.return();\n                        if (p instanceof Promise) { // eslint-disable-line max-depth\n                            p.catch(err => {\n                                if (opts.onReturnError != null) {\n                                    opts.onReturnError(err);\n                                }\n                            });\n                        }\n                    }\n                    catch (err) {\n                        if (opts.onReturnError != null) { // eslint-disable-line max-depth\n                            opts.onReturnError(err);\n                        }\n                    }\n                }\n                if (isKnownAborter && opts.returnOnAbort === true) {\n                    return;\n                }\n                throw err;\n            }\n            if (result.done === true) {\n                break;\n            }\n            yield result.value;\n        }\n        signal.removeEventListener('abort', abortHandler);\n    }\n    return abortable();\n}\nexport function abortableSink(sink, signal, options) {\n    return (source) => sink(abortableSource(source, signal, options));\n}\nexport function abortableDuplex(duplex, signal, options) {\n    return {\n        sink: abortableSink(duplex.sink, signal, {\n            ...options,\n            onAbort: undefined\n        }),\n        source: abortableSource(duplex.source, signal, options)\n    };\n}\nexport { AbortError };\nexport { abortableSink as abortableTransform };\n//# sourceMappingURL=index.js.map","export function getIterator(obj) {\n    if (obj != null) {\n        if (typeof obj[Symbol.iterator] === 'function') {\n            return obj[Symbol.iterator]();\n        }\n        if (typeof obj[Symbol.asyncIterator] === 'function') {\n            return obj[Symbol.asyncIterator]();\n        }\n        if (typeof obj.next === 'function') {\n            return obj; // probably an iterator\n        }\n    }\n    throw new Error('argument is not an iterator or iterable');\n}\n//# sourceMappingURL=index.js.map","export default function arrayShuffle(array) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new TypeError(`Expected an array, got ${typeof array}`);\n\t}\n\n\tarray = [...array];\n\n\tfor (let index = array.length - 1; index > 0; index--) {\n\t\tconst newIndex = Math.floor(Math.random() * (index + 1));\n\t\t[array[index], array[newIndex]] = [array[newIndex], array[index]];\n\t}\n\n\treturn array;\n}\n","export class BaseBlockstore {\n    has(key, options) {\n        return Promise.reject(new Error('.has is not implemented'));\n    }\n    put(key, val, options) {\n        return Promise.reject(new Error('.put is not implemented'));\n    }\n    async *putMany(source, options) {\n        for await (const { cid, block } of source) {\n            await this.put(cid, block, options);\n            yield cid;\n        }\n    }\n    get(key, options) {\n        return Promise.reject(new Error('.get is not implemented'));\n    }\n    async *getMany(source, options) {\n        for await (const key of source) {\n            yield {\n                cid: key,\n                block: await this.get(key, options)\n            };\n        }\n    }\n    async delete(key, options) {\n        await Promise.reject(new Error('.delete is not implemented'));\n    }\n    async *deleteMany(source, options) {\n        for await (const key of source) {\n            await this.delete(key, options);\n            yield key;\n        }\n    }\n    /**\n     * Extending classes should override `query` or implement this method\n     */\n    async *getAll(options) {\n        throw new Error('.getAll is not implemented');\n    }\n}\n//# sourceMappingURL=base.js.map","import errCode from 'err-code';\nexport function openFailedError(err) {\n    err = err ?? new Error('Open failed');\n    return errCode(err, 'ERR_OPEN_FAILED');\n}\nexport function closeFailedError(err) {\n    err = err ?? new Error('Close failed');\n    return errCode(err, 'ERR_CLOSE_FAILED');\n}\nexport function putFailedError(err) {\n    err = err ?? new Error('Put failed');\n    return errCode(err, 'ERR_PUT_FAILED');\n}\nexport function getFailedError(err) {\n    err = err ?? new Error('Get failed');\n    return errCode(err, 'ERR_GET_FAILED');\n}\nexport function deleteFailedError(err) {\n    err = err ?? new Error('Delete failed');\n    return errCode(err, 'ERR_DELETE_FAILED');\n}\nexport function hasFailedError(err) {\n    err = err ?? new Error('Has failed');\n    return errCode(err, 'ERR_HAS_FAILED');\n}\nexport function notFoundError(err) {\n    err = err ?? new Error('Not Found');\n    return errCode(err, 'ERR_NOT_FOUND');\n}\nexport function abortedError(err) {\n    err = err ?? new Error('Aborted');\n    return errCode(err, 'ERR_ABORTED');\n}\n//# sourceMappingURL=errors.js.map","var encode_1 = encode;\n\nvar MSB = 0x80\n  , REST = 0x7F\n  , MSBALL = ~REST\n  , INT = Math.pow(2, 31);\n\nfunction encode(num, out, offset) {\n  out = out || [];\n  offset = offset || 0;\n  var oldOffset = offset;\n\n  while(num >= INT) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num /= 128;\n  }\n  while(num & MSBALL) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num >>>= 7;\n  }\n  out[offset] = num | 0;\n  \n  encode.bytes = offset - oldOffset + 1;\n  \n  return out\n}\n\nvar decode = read;\n\nvar MSB$1 = 0x80\n  , REST$1 = 0x7F;\n\nfunction read(buf, offset) {\n  var res    = 0\n    , offset = offset || 0\n    , shift  = 0\n    , counter = offset\n    , b\n    , l = buf.length;\n\n  do {\n    if (counter >= l) {\n      read.bytes = 0;\n      throw new RangeError('Could not decode varint')\n    }\n    b = buf[counter++];\n    res += shift < 28\n      ? (b & REST$1) << shift\n      : (b & REST$1) * Math.pow(2, shift);\n    shift += 7;\n  } while (b >= MSB$1)\n\n  read.bytes = counter - offset;\n\n  return res\n}\n\nvar N1 = Math.pow(2,  7);\nvar N2 = Math.pow(2, 14);\nvar N3 = Math.pow(2, 21);\nvar N4 = Math.pow(2, 28);\nvar N5 = Math.pow(2, 35);\nvar N6 = Math.pow(2, 42);\nvar N7 = Math.pow(2, 49);\nvar N8 = Math.pow(2, 56);\nvar N9 = Math.pow(2, 63);\n\nvar length = function (value) {\n  return (\n    value < N1 ? 1\n  : value < N2 ? 2\n  : value < N3 ? 3\n  : value < N4 ? 4\n  : value < N5 ? 5\n  : value < N6 ? 6\n  : value < N7 ? 7\n  : value < N8 ? 8\n  : value < N9 ? 9\n  :              10\n  )\n};\n\nvar varint = {\n    encode: encode_1\n  , decode: decode\n  , encodingLength: length\n};\n\nvar _brrp_varint = varint;\n\nexport default _brrp_varint;\n","import varint from '../vendor/varint.js'\n\n/**\n * @param {Uint8Array} data\n * @param {number} [offset=0]\n * @returns {[number, number]}\n */\nexport const decode = (data, offset = 0) => {\n  const code = varint.decode(data, offset)\n  return [code, varint.decode.bytes]\n}\n\n/**\n * @param {number} int\n * @param {Uint8Array} target\n * @param {number} [offset=0]\n */\nexport const encodeTo = (int, target, offset = 0) => {\n  varint.encode(int, target, offset)\n  return target\n}\n\n/**\n * @param {number} int\n * @returns {number}\n */\nexport const encodingLength = (int) => {\n  return varint.encodingLength(int)\n}\n","import { coerce, equals as equalBytes } from '../bytes.js'\nimport * as varint from '../varint.js'\n\n/**\n * Creates a multihash digest.\n *\n * @template {number} Code\n * @param {Code} code\n * @param {Uint8Array} digest\n */\nexport const create = (code, digest) => {\n  const size = digest.byteLength\n  const sizeOffset = varint.encodingLength(code)\n  const digestOffset = sizeOffset + varint.encodingLength(size)\n\n  const bytes = new Uint8Array(digestOffset + size)\n  varint.encodeTo(code, bytes, 0)\n  varint.encodeTo(size, bytes, sizeOffset)\n  bytes.set(digest, digestOffset)\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * Turns bytes representation of multihash digest into an instance.\n *\n * @param {Uint8Array} multihash\n * @returns {MultihashDigest}\n */\nexport const decode = (multihash) => {\n  const bytes = coerce(multihash)\n  const [code, sizeOffset] = varint.decode(bytes)\n  const [size, digestOffset] = varint.decode(bytes.subarray(sizeOffset))\n  const digest = bytes.subarray(sizeOffset + digestOffset)\n\n  if (digest.byteLength !== size) {\n    throw new Error('Incorrect length')\n  }\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * @param {MultihashDigest} a\n * @param {unknown} b\n * @returns {b is MultihashDigest}\n */\nexport const equals = (a, b) => {\n  if (a === b) {\n    return true\n  } else {\n    const data = /** @type {{code?:unknown, size?:unknown, bytes?:unknown}} */(b)\n\n    return (\n      a.code === data.code &&\n      a.size === data.size &&\n      data.bytes instanceof Uint8Array &&\n      equalBytes(a.bytes, data.bytes)\n    )\n  }\n}\n\n/**\n * @typedef {import('./interface.js').MultihashDigest} MultihashDigest\n */\n\n/**\n * Represents a multihash digest which carries information about the\n * hashing algorithm and an actual hash digest.\n *\n * @template {number} Code\n * @template {number} Size\n * @class\n * @implements {MultihashDigest}\n */\nexport class Digest {\n  /**\n   * Creates a multihash digest.\n   *\n   * @param {Code} code\n   * @param {Size} size\n   * @param {Uint8Array} digest\n   * @param {Uint8Array} bytes\n   */\n  constructor (code, size, digest, bytes) {\n    this.code = code\n    this.size = size\n    this.digest = digest\n    this.bytes = bytes\n  }\n}\n","import { base32 } from './bases/base32.js'\nimport { base58btc } from './bases/base58.js'\nimport { coerce } from './bytes.js'\nimport * as Digest from './hashes/digest.js'\n// Linter can see that API is used in types.\n// eslint-disable-next-line\nimport * as API from \"./link/interface.js\"\nimport * as varint from './varint.js'\n\n// This way TS will also expose all the types from module\nexport * from './link/interface.js'\n\n/**\n * @template {API.Link<unknown, number, number, API.Version>} T\n * @template {string} Prefix\n * @param {T} link\n * @param {API.MultibaseEncoder<Prefix>} [base]\n * @returns {API.ToString<T, Prefix>}\n */\nexport const format = (link, base) => {\n  const { bytes, version } = link\n  switch (version) {\n    case 0:\n      return toStringV0(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<\"z\">} */ (base) || base58btc.encoder\n      )\n    default:\n      return toStringV1(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<Prefix>} */ (base || base32.encoder)\n      )\n  }\n}\n\n/**\n * @template {API.UnknownLink} Link\n * @param {Link} link\n * @returns {API.LinkJSON<Link>}\n */\nexport const toJSON = (link) => ({\n  '/': format(link)\n})\n\n/**\n * @template {API.UnknownLink} Link\n * @param {API.LinkJSON<Link>} json\n */\nexport const fromJSON = (json) =>\n  CID.parse(json['/'])\n\n/** @type {WeakMap<API.UnknownLink, Map<string, string>>} */\nconst cache = new WeakMap()\n\n/**\n * @param {API.UnknownLink} cid\n * @returns {Map<string, string>}\n */\nconst baseCache = cid => {\n  const baseCache = cache.get(cid)\n  if (baseCache == null) {\n    const baseCache = new Map()\n    cache.set(cid, baseCache)\n    return baseCache\n  }\n  return baseCache\n}\n\n/**\n * @template {unknown} [Data=unknown]\n * @template {number} [Format=number]\n * @template {number} [Alg=number]\n * @template {API.Version} [Version=API.Version]\n * @implements {API.Link<Data, Format, Alg, Version>}\n */\n\nexport class CID {\n  /**\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} multihash - (Multi)hash of the of the content.\n   * @param {Uint8Array} bytes\n   */\n  constructor (version, code, multihash, bytes) {\n    /** @readonly */\n    this.code = code\n    /** @readonly */\n    this.version = version\n    /** @readonly */\n    this.multihash = multihash\n    /** @readonly */\n    this.bytes = bytes\n\n    // flag to serializers that this is a CID and\n    // should be treated specially\n    /** @readonly */\n    this['/'] = bytes\n  }\n\n  /**\n   * Signalling `cid.asCID === cid` has been replaced with `cid['/'] === cid.bytes`\n   * please either use `CID.asCID(cid)` or switch to new signalling mechanism\n   *\n   * @deprecated\n   */\n  get asCID () {\n    return this\n  }\n\n  // ArrayBufferView\n  get byteOffset () {\n    return this.bytes.byteOffset\n  }\n\n  // ArrayBufferView\n  get byteLength () {\n    return this.bytes.byteLength\n  }\n\n  /**\n   * @returns {CID<Data, API.DAG_PB, API.SHA_256, 0>}\n   */\n  toV0 () {\n    switch (this.version) {\n      case 0: {\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (this)\n      }\n      case 1: {\n        const { code, multihash } = this\n\n        if (code !== DAG_PB_CODE) {\n          throw new Error('Cannot convert a non dag-pb CID to CIDv0')\n        }\n\n        // sha2-256\n        if (multihash.code !== SHA_256_CODE) {\n          throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0')\n        }\n\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (\n          CID.createV0(\n            /** @type {API.MultihashDigest<API.SHA_256>} */ (multihash)\n          )\n        )\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 0. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @returns {CID<Data, Format, Alg, 1>}\n   */\n  toV1 () {\n    switch (this.version) {\n      case 0: {\n        const { code, digest } = this.multihash\n        const multihash = Digest.create(code, digest)\n        return /** @type {CID<Data, Format, Alg, 1>} */ (\n          CID.createV1(this.code, multihash)\n        )\n      }\n      case 1: {\n        return /** @type {CID<Data, Format, Alg, 1>} */ (this)\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 1. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @param {unknown} other\n   * @returns {other is CID<Data, Format, Alg, Version>}\n   */\n  equals (other) {\n    return CID.equals(this, other)\n  }\n\n  /**\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {API.Link<Data, Format, Alg, Version>} self\n   * @param {unknown} other\n   * @returns {other is CID}\n   */\n  static equals (self, other) {\n    const unknown =\n      /** @type {{code?:unknown, version?:unknown, multihash?:unknown}} */ (\n        other\n      )\n    return (\n      unknown &&\n      self.code === unknown.code &&\n      self.version === unknown.version &&\n      Digest.equals(self.multihash, unknown.multihash)\n    )\n  }\n\n  /**\n   * @param {API.MultibaseEncoder<string>} [base]\n   * @returns {string}\n   */\n  toString (base) {\n    return format(this, base)\n  }\n\n  /**\n   * @returns {API.LinkJSON<this>}\n   */\n  toJSON () {\n    return { '/': format(this) }\n  }\n\n  link () {\n    return this\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'CID'\n  }\n\n  // Legacy\n\n  [Symbol.for('nodejs.util.inspect.custom')] () {\n    return `CID(${this.toString()})`\n  }\n\n  /**\n   * Takes any input `value` and returns a `CID` instance if it was\n   * a `CID` otherwise returns `null`. If `value` is instanceof `CID`\n   * it will return value back. If `value` is not instance of this CID\n   * class, but is compatible CID it will return new instance of this\n   * `CID` class. Otherwise returns null.\n   *\n   * This allows two different incompatible versions of CID library to\n   * co-exist and interop as long as binary interface is compatible.\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @template {unknown} U\n   * @param {API.Link<Data, Format, Alg, Version>|U} input\n   * @returns {CID<Data, Format, Alg, Version>|null}\n   */\n  static asCID (input) {\n    if (input == null) {\n      return null\n    }\n\n    const value = /** @type {any} */ (input)\n    if (value instanceof CID) {\n      // If value is instance of CID then we're all set.\n      return value\n    } else if ((value['/'] != null && value['/'] === value.bytes) || value.asCID === value) {\n      // If value isn't instance of this CID class but `this.asCID === this` or\n      // `value['/'] === value.bytes` is true it is CID instance coming from a\n      // different implementation (diff version or duplicate). In that case we\n      // rebase it to this `CID` implementation so caller is guaranteed to get\n      // instance with expected API.\n      const { version, code, multihash, bytes } = value\n      return new CID(\n        version,\n        code,\n        /** @type {API.MultihashDigest<Alg>} */ (multihash),\n        bytes || encodeCID(version, code, multihash.bytes)\n      )\n    } else if (value[cidSymbol] === true) {\n      // If value is a CID from older implementation that used to be tagged via\n      // symbol we still rebase it to the this `CID` implementation by\n      // delegating that to a constructor.\n      const { version, multihash, code } = value\n      const digest =\n        /** @type {API.MultihashDigest<Alg>} */\n        (Digest.decode(multihash))\n      return CID.create(version, code, digest)\n    } else {\n      // Otherwise value is not a CID (or an incompatible version of it) in\n      // which case we return `null`.\n      return null\n    }\n  }\n\n  /**\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} digest - (Multi)hash of the of the content.\n   * @returns {CID<Data, Format, Alg, Version>}\n   */\n  static create (version, code, digest) {\n    if (typeof code !== 'number') {\n      throw new Error('String codecs are no longer supported')\n    }\n\n    if (!(digest.bytes instanceof Uint8Array)) {\n      throw new Error('Invalid digest')\n    }\n\n    switch (version) {\n      case 0: {\n        if (code !== DAG_PB_CODE) {\n          throw new Error(\n            `Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`\n          )\n        } else {\n          return new CID(version, code, digest, digest.bytes)\n        }\n      }\n      case 1: {\n        const bytes = encodeCID(version, code, digest.bytes)\n        return new CID(version, code, digest, bytes)\n      }\n      default: {\n        throw new Error('Invalid version')\n      }\n    }\n  }\n\n  /**\n   * Simplified version of `create` for CIDv0.\n   *\n   * @template {unknown} [T=unknown]\n   * @param {API.MultihashDigest<typeof SHA_256_CODE>} digest - Multihash.\n   * @returns {CID<T, typeof DAG_PB_CODE, typeof SHA_256_CODE, 0>}\n   */\n  static createV0 (digest) {\n    return CID.create(0, DAG_PB_CODE, digest)\n  }\n\n  /**\n   * Simplified version of `create` for CIDv1.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @param {Code} code - Content encoding format code.\n   * @param {API.MultihashDigest<Alg>} digest - Miltihash of the content.\n   * @returns {CID<Data, Code, Alg, 1>}\n   */\n  static createV1 (code, digest) {\n    return CID.create(1, code, digest)\n  }\n\n  /**\n   * Decoded a CID from its binary representation. The byte array must contain\n   * only the CID with no additional bytes.\n   *\n   * An error will be thrown if the bytes provided do not contain a valid\n   * binary representation of a CID.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ByteView<API.Link<Data, Code, Alg, Ver>>} bytes\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static decode (bytes) {\n    const [cid, remainder] = CID.decodeFirst(bytes)\n    if (remainder.length) {\n      throw new Error('Incorrect length')\n    }\n    return cid\n  }\n\n  /**\n   * Decoded a CID from its binary representation at the beginning of a byte\n   * array.\n   *\n   * Returns an array with the first element containing the CID and the second\n   * element containing the remainder of the original byte array. The remainder\n   * will be a zero-length byte array if the provided bytes only contained a\n   * binary CID representation.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} bytes\n   * @returns {[CID<T, C, A, V>, Uint8Array]}\n   */\n  static decodeFirst (bytes) {\n    const specs = CID.inspectBytes(bytes)\n    const prefixSize = specs.size - specs.multihashSize\n    const multihashBytes = coerce(\n      bytes.subarray(prefixSize, prefixSize + specs.multihashSize)\n    )\n    if (multihashBytes.byteLength !== specs.multihashSize) {\n      throw new Error('Incorrect length')\n    }\n    const digestBytes = multihashBytes.subarray(\n      specs.multihashSize - specs.digestSize\n    )\n    const digest = new Digest.Digest(\n      specs.multihashCode,\n      specs.digestSize,\n      digestBytes,\n      multihashBytes\n    )\n    const cid =\n      specs.version === 0\n        ? CID.createV0(/** @type {API.MultihashDigest<API.SHA_256>} */ (digest))\n        : CID.createV1(specs.codec, digest)\n    return [/** @type {CID<T, C, A, V>} */(cid), bytes.subarray(specs.size)]\n  }\n\n  /**\n   * Inspect the initial bytes of a CID to determine its properties.\n   *\n   * Involves decoding up to 4 varints. Typically this will require only 4 to 6\n   * bytes but for larger multicodec code values and larger multihash digest\n   * lengths these varints can be quite large. It is recommended that at least\n   * 10 bytes be made available in the `initialBytes` argument for a complete\n   * inspection.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} initialBytes\n   * @returns {{ version:V, codec:C, multihashCode:A, digestSize:number, multihashSize:number, size:number }}\n   */\n  static inspectBytes (initialBytes) {\n    let offset = 0\n    const next = () => {\n      const [i, length] = varint.decode(initialBytes.subarray(offset))\n      offset += length\n      return i\n    }\n\n    let version = /** @type {V} */ (next())\n    let codec = /** @type {C} */ (DAG_PB_CODE)\n    if (/** @type {number} */(version) === 18) {\n      // CIDv0\n      version = /** @type {V} */ (0)\n      offset = 0\n    } else {\n      codec = /** @type {C} */ (next())\n    }\n\n    if (version !== 0 && version !== 1) {\n      throw new RangeError(`Invalid CID version ${version}`)\n    }\n\n    const prefixSize = offset\n    const multihashCode = /** @type {A} */ (next()) // multihash code\n    const digestSize = next() // multihash length\n    const size = offset + digestSize\n    const multihashSize = size - prefixSize\n\n    return { version, codec, multihashCode, digestSize, multihashSize, size }\n  }\n\n  /**\n   * Takes cid in a string representation and creates an instance. If `base`\n   * decoder is not provided will use a default from the configuration. It will\n   * throw an error if encoding of the CID is not compatible with supplied (or\n   * a default decoder).\n   *\n   * @template {string} Prefix\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n   * @param {API.MultibaseDecoder<Prefix>} [base]\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static parse (source, base) {\n    const [prefix, bytes] = parseCIDtoBytes(source, base)\n\n    const cid = CID.decode(bytes)\n\n    if (cid.version === 0 && source[0] !== 'Q') {\n      throw Error('Version 0 CID string must not include multibase prefix')\n    }\n\n    // Cache string representation to avoid computing it on `this.toString()`\n    baseCache(cid).set(prefix, source)\n\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @template {unknown} Data\n * @template {number} Code\n * @template {number} Alg\n * @template {API.Version} Ver\n * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n * @param {API.MultibaseDecoder<Prefix>} [base]\n * @returns {[Prefix, API.ByteView<API.Link<Data, Code, Alg, Ver>>]}\n */\nconst parseCIDtoBytes = (source, base) => {\n  switch (source[0]) {\n    // CIDv0 is parsed differently\n    case 'Q': {\n      const decoder = base || base58btc\n      return [\n        /** @type {Prefix} */ (base58btc.prefix),\n        decoder.decode(`${base58btc.prefix}${source}`)\n      ]\n    }\n    case base58btc.prefix: {\n      const decoder = base || base58btc\n      return [/** @type {Prefix} */(base58btc.prefix), decoder.decode(source)]\n    }\n    case base32.prefix: {\n      const decoder = base || base32\n      return [/** @type {Prefix} */(base32.prefix), decoder.decode(source)]\n    }\n    default: {\n      if (base == null) {\n        throw Error(\n          'To parse non base32 or base58btc encoded CID multibase decoder must be provided'\n        )\n      }\n      return [/** @type {Prefix} */(source[0]), base.decode(source)]\n    }\n  }\n}\n\n/**\n *\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<'z'>} base\n */\nconst toStringV0 = (bytes, cache, base) => {\n  const { prefix } = base\n  if (prefix !== base58btc.prefix) {\n    throw Error(`Cannot string encode V0 in ${base.name} encoding`)\n  }\n\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes).slice(1)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<Prefix>} base\n */\nconst toStringV1 = (bytes, cache, base) => {\n  const { prefix } = base\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\nconst DAG_PB_CODE = 0x70\nconst SHA_256_CODE = 0x12\n\n/**\n * @param {API.Version} version\n * @param {number} code\n * @param {Uint8Array} multihash\n * @returns {Uint8Array}\n */\nconst encodeCID = (version, code, multihash) => {\n  const codeOffset = varint.encodingLength(version)\n  const hashOffset = codeOffset + varint.encodingLength(code)\n  const bytes = new Uint8Array(hashOffset + multihash.byteLength)\n  varint.encodeTo(version, bytes, 0)\n  varint.encodeTo(code, bytes, codeOffset)\n  bytes.set(multihash, hashOffset)\n  return bytes\n}\n\nconst cidSymbol = Symbol.for('@ipld/js-cid/CID')\n","import { base32 } from 'multiformats/bases/base32';\nimport { CID } from 'multiformats/cid';\nimport * as raw from 'multiformats/codecs/raw';\nimport * as Digest from 'multiformats/hashes/digest';\nimport { BaseBlockstore } from './base.js';\nimport * as Errors from './errors.js';\nexport class MemoryBlockstore extends BaseBlockstore {\n    data;\n    constructor() {\n        super();\n        this.data = new Map();\n    }\n    put(key, val) {\n        this.data.set(base32.encode(key.multihash.bytes), val);\n        return key;\n    }\n    get(key) {\n        const buf = this.data.get(base32.encode(key.multihash.bytes));\n        if (buf == null) {\n            throw Errors.notFoundError();\n        }\n        return buf;\n    }\n    has(key) {\n        return this.data.has(base32.encode(key.multihash.bytes));\n    }\n    async delete(key) {\n        this.data.delete(base32.encode(key.multihash.bytes));\n    }\n    async *getAll() {\n        for (const [key, value] of this.data.entries()) {\n            yield {\n                cid: CID.createV1(raw.code, Digest.decode(base32.decode(key))),\n                block: value\n            };\n        }\n    }\n}\n//# sourceMappingURL=memory.js.map","// @ts-check\n\nimport { coerce } from '../bytes.js'\n\n/**\n * @template T\n * @typedef {import('./interface.js').ByteView<T>} ByteView\n */\n\nexport const name = 'raw'\nexport const code = 0x55\n\n/**\n * @param {Uint8Array} node\n * @returns {ByteView<Uint8Array>}\n */\nexport const encode = (node) => coerce(node)\n\n/**\n * @param {ByteView<Uint8Array>} data\n * @returns {Uint8Array}\n */\nexport const decode = (data) => coerce(data)\n","import * as ErrorsImport from './errors.js';\nexport { BaseBlockstore } from './base.js';\nexport { MemoryBlockstore } from './memory.js';\nexport { BlackHoleBlockstore } from './black-hole.js';\nexport { TieredBlockstore } from './tiered.js';\nexport const Errors = {\n    ...ErrorsImport\n};\n//# sourceMappingURL=index.js.map","import { rfc4648 } from './base.js'\n\nexport const base32 = rfc4648({\n  prefix: 'b',\n  name: 'base32',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567',\n  bitsPerChar: 5\n})\n\nexport const base32upper = rfc4648({\n  prefix: 'B',\n  name: 'base32upper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n  bitsPerChar: 5\n})\n\nexport const base32pad = rfc4648({\n  prefix: 'c',\n  name: 'base32pad',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567=',\n  bitsPerChar: 5\n})\n\nexport const base32padupper = rfc4648({\n  prefix: 'C',\n  name: 'base32padupper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=',\n  bitsPerChar: 5\n})\n\nexport const base32hex = rfc4648({\n  prefix: 'v',\n  name: 'base32hex',\n  alphabet: '0123456789abcdefghijklmnopqrstuv',\n  bitsPerChar: 5\n})\n\nexport const base32hexupper = rfc4648({\n  prefix: 'V',\n  name: 'base32hexupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV',\n  bitsPerChar: 5\n})\n\nexport const base32hexpad = rfc4648({\n  prefix: 't',\n  name: 'base32hexpad',\n  alphabet: '0123456789abcdefghijklmnopqrstuv=',\n  bitsPerChar: 5\n})\n\nexport const base32hexpadupper = rfc4648({\n  prefix: 'T',\n  name: 'base32hexpadupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV=',\n  bitsPerChar: 5\n})\n\nexport const base32z = rfc4648({\n  prefix: 'h',\n  name: 'base32z',\n  alphabet: 'ybndrfg8ejkmcpqxot1uwisza345h769',\n  bitsPerChar: 5\n})\n","import { baseX } from './base.js'\n\nexport const base58btc = baseX({\n  name: 'base58btc',\n  prefix: 'z',\n  alphabet: '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n})\n\nexport const base58flickr = baseX({\n  name: 'base58flickr',\n  prefix: 'Z',\n  alphabet: '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n})\n","const empty = new Uint8Array(0)\n\n/**\n * @param {Uint8Array} d\n */\nconst toHex = d => d.reduce((hex, byte) => hex + byte.toString(16).padStart(2, '0'), '')\n\n/**\n * @param {string} hex\n */\nconst fromHex = hex => {\n  const hexes = hex.match(/../g)\n  return hexes ? new Uint8Array(hexes.map(b => parseInt(b, 16))) : empty\n}\n\n/**\n * @param {Uint8Array} aa\n * @param {Uint8Array} bb\n */\nconst equals = (aa, bb) => {\n  if (aa === bb) return true\n  if (aa.byteLength !== bb.byteLength) {\n    return false\n  }\n\n  for (let ii = 0; ii < aa.byteLength; ii++) {\n    if (aa[ii] !== bb[ii]) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * @param {ArrayBufferView|ArrayBuffer|Uint8Array} o\n * @returns {Uint8Array}\n */\nconst coerce = o => {\n  if (o instanceof Uint8Array && o.constructor.name === 'Uint8Array') return o\n  if (o instanceof ArrayBuffer) return new Uint8Array(o)\n  if (ArrayBuffer.isView(o)) {\n    return new Uint8Array(o.buffer, o.byteOffset, o.byteLength)\n  }\n  throw new Error('Unknown type, must be binary type')\n}\n\n/**\n * @param {any} o\n * @returns {o is ArrayBuffer|ArrayBufferView}\n */\nconst isBinary = o =>\n  o instanceof ArrayBuffer || ArrayBuffer.isView(o)\n\n/**\n * @param {string} str\n * @returns {Uint8Array}\n */\nconst fromString = str => (new TextEncoder()).encode(str)\n\n/**\n * @param {Uint8Array} b\n * @returns {string}\n */\nconst toString = b => (new TextDecoder()).decode(b)\n\nexport { equals, coerce, isBinary, fromHex, toHex, fromString, toString, empty }\n","// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\nfunction base (ALPHABET, name) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256);\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255;\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i);\n    var xc = x.charCodeAt(0);\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i;\n  }\n  var BASE = ALPHABET.length;\n  var LEADER = ALPHABET.charAt(0);\n  var FACTOR = Math.log(BASE) / Math.log(256); // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE); // log(256) / log(BASE), rounded up\n  function encode (source) {\n    if (source instanceof Uint8Array) ; else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength);\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source);\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0;\n    var length = 0;\n    var pbegin = 0;\n    var pend = source.length;\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++;\n      zeroes++;\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0;\n    var b58 = new Uint8Array(size);\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin];\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0;\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0;\n        b58[it1] = (carry % BASE) >>> 0;\n        carry = (carry / BASE) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      pbegin++;\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length;\n    while (it2 !== size && b58[it2] === 0) {\n      it2++;\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes);\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]); }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    var psz = 0;\n        // Skip leading spaces.\n    if (source[psz] === ' ') { return }\n        // Skip and count leading '1's.\n    var zeroes = 0;\n    var length = 0;\n    while (source[psz] === LEADER) {\n      zeroes++;\n      psz++;\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0; // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size);\n        // Process the characters.\n    while (source[psz]) {\n            // Decode character\n      var carry = BASE_MAP[source.charCodeAt(psz)];\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0;\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0;\n        b256[it3] = (carry % 256) >>> 0;\n        carry = (carry / 256) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      psz++;\n    }\n        // Skip trailing spaces.\n    if (source[psz] === ' ') { return }\n        // Skip leading zeroes in b256.\n    var it4 = size - length;\n    while (it4 !== size && b256[it4] === 0) {\n      it4++;\n    }\n    var vch = new Uint8Array(zeroes + (size - it4));\n    var j = zeroes;\n    while (it4 !== size) {\n      vch[j++] = b256[it4++];\n    }\n    return vch\n  }\n  function decode (string) {\n    var buffer = decodeUnsafe(string);\n    if (buffer) { return buffer }\n    throw new Error(`Non-${name} character`)\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nvar src = base;\n\nvar _brrp__multiformats_scope_baseX = src;\n\nexport default _brrp__multiformats_scope_baseX;\n","const empty = new Uint8Array(0)\n\n/**\n * @param {Uint8Array} d\n */\nconst toHex = d => d.reduce((hex, byte) => hex + byte.toString(16).padStart(2, '0'), '')\n\n/**\n * @param {string} hex\n */\nconst fromHex = hex => {\n  const hexes = hex.match(/../g)\n  return hexes ? new Uint8Array(hexes.map(b => parseInt(b, 16))) : empty\n}\n\n/**\n * @param {Uint8Array} aa\n * @param {Uint8Array} bb\n */\nconst equals = (aa, bb) => {\n  if (aa === bb) return true\n  if (aa.byteLength !== bb.byteLength) {\n    return false\n  }\n\n  for (let ii = 0; ii < aa.byteLength; ii++) {\n    if (aa[ii] !== bb[ii]) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * @param {ArrayBufferView|ArrayBuffer|Uint8Array} o\n * @returns {Uint8Array}\n */\nconst coerce = o => {\n  if (o instanceof Uint8Array && o.constructor.name === 'Uint8Array') return o\n  if (o instanceof ArrayBuffer) return new Uint8Array(o)\n  if (ArrayBuffer.isView(o)) {\n    return new Uint8Array(o.buffer, o.byteOffset, o.byteLength)\n  }\n  throw new Error('Unknown type, must be binary type')\n}\n\n/**\n * @param {any} o\n * @returns {o is ArrayBuffer|ArrayBufferView}\n */\nconst isBinary = o =>\n  o instanceof ArrayBuffer || ArrayBuffer.isView(o)\n\n/**\n * @param {string} str\n * @returns {Uint8Array}\n */\nconst fromString = str => (new TextEncoder()).encode(str)\n\n/**\n * @param {Uint8Array} b\n * @returns {string}\n */\nconst toString = b => (new TextDecoder()).decode(b)\n\nexport { equals, coerce, isBinary, fromHex, toHex, fromString, toString, empty }\n","import basex from '../../vendor/base-x.js'\nimport { coerce } from '../bytes.js'\n// Linter can't see that API is used in types.\n// eslint-disable-next-line\nimport * as API from './interface.js'\n\n/**\n * Class represents both BaseEncoder and MultibaseEncoder meaning it\n * can be used to encode to multibase or base encode without multibase\n * prefix.\n *\n * @class\n * @template {string} Base\n * @template {string} Prefix\n * @implements {API.MultibaseEncoder<Prefix>}\n * @implements {API.BaseEncoder}\n */\nclass Encoder {\n  /**\n   * @param {Base} name\n   * @param {Prefix} prefix\n   * @param {(bytes:Uint8Array) => string} baseEncode\n   */\n  constructor (name, prefix, baseEncode) {\n    this.name = name\n    this.prefix = prefix\n    this.baseEncode = baseEncode\n  }\n\n  /**\n   * @param {Uint8Array} bytes\n   * @returns {API.Multibase<Prefix>}\n   */\n  encode (bytes) {\n    if (bytes instanceof Uint8Array) {\n      return `${this.prefix}${this.baseEncode(bytes)}`\n    } else {\n      throw Error('Unknown type, must be binary type')\n    }\n  }\n}\n\n/**\n * @template {string} Prefix\n */\n/**\n * Class represents both BaseDecoder and MultibaseDecoder so it could be used\n * to decode multibases (with matching prefix) or just base decode strings\n * with corresponding base encoding.\n *\n * @class\n * @template {string} Base\n * @template {string} Prefix\n * @implements {API.MultibaseDecoder<Prefix>}\n * @implements {API.UnibaseDecoder<Prefix>}\n * @implements {API.BaseDecoder}\n */\nclass Decoder {\n  /**\n   * @param {Base} name\n   * @param {Prefix} prefix\n   * @param {(text:string) => Uint8Array} baseDecode\n   */\n  constructor (name, prefix, baseDecode) {\n    this.name = name\n    this.prefix = prefix\n    /* c8 ignore next 3 */\n    if (prefix.codePointAt(0) === undefined) {\n      throw new Error('Invalid prefix character')\n    }\n    /** @private */\n    this.prefixCodePoint = /** @type {number} */ (prefix.codePointAt(0))\n    this.baseDecode = baseDecode\n  }\n\n  /**\n   * @param {string} text\n   */\n  decode (text) {\n    if (typeof text === 'string') {\n      if (text.codePointAt(0) !== this.prefixCodePoint) {\n        throw Error(`Unable to decode multibase string ${JSON.stringify(text)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)\n      }\n      return this.baseDecode(text.slice(this.prefix.length))\n    } else {\n      throw Error('Can only multibase decode strings')\n    }\n  }\n\n  /**\n   * @template {string} OtherPrefix\n   * @param {API.UnibaseDecoder<OtherPrefix>|ComposedDecoder<OtherPrefix>} decoder\n   * @returns {ComposedDecoder<Prefix|OtherPrefix>}\n   */\n  or (decoder) {\n    return or(this, decoder)\n  }\n}\n\n/**\n * @template {string} Prefix\n * @typedef {Record<Prefix, API.UnibaseDecoder<Prefix>>} Decoders\n */\n\n/**\n * @template {string} Prefix\n * @implements {API.MultibaseDecoder<Prefix>}\n * @implements {API.CombobaseDecoder<Prefix>}\n */\nclass ComposedDecoder {\n  /**\n   * @param {Decoders<Prefix>} decoders\n   */\n  constructor (decoders) {\n    this.decoders = decoders\n  }\n\n  /**\n   * @template {string} OtherPrefix\n   * @param {API.UnibaseDecoder<OtherPrefix>|ComposedDecoder<OtherPrefix>} decoder\n   * @returns {ComposedDecoder<Prefix|OtherPrefix>}\n   */\n  or (decoder) {\n    return or(this, decoder)\n  }\n\n  /**\n   * @param {string} input\n   * @returns {Uint8Array}\n   */\n  decode (input) {\n    const prefix = /** @type {Prefix} */ (input[0])\n    const decoder = this.decoders[prefix]\n    if (decoder) {\n      return decoder.decode(input)\n    } else {\n      throw RangeError(`Unable to decode multibase string ${JSON.stringify(input)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)\n    }\n  }\n}\n\n/**\n * @template {string} L\n * @template {string} R\n * @param {API.UnibaseDecoder<L>|API.CombobaseDecoder<L>} left\n * @param {API.UnibaseDecoder<R>|API.CombobaseDecoder<R>} right\n * @returns {ComposedDecoder<L|R>}\n */\nexport const or = (left, right) => new ComposedDecoder(/** @type {Decoders<L|R>} */({\n  ...(left.decoders || { [/** @type API.UnibaseDecoder<L> */(left).prefix]: left }),\n  ...(right.decoders || { [/** @type API.UnibaseDecoder<R> */(right).prefix]: right })\n}))\n\n/**\n * @class\n * @template {string} Base\n * @template {string} Prefix\n * @implements {API.MultibaseCodec<Prefix>}\n * @implements {API.MultibaseEncoder<Prefix>}\n * @implements {API.MultibaseDecoder<Prefix>}\n * @implements {API.BaseCodec}\n * @implements {API.BaseEncoder}\n * @implements {API.BaseDecoder}\n */\nexport class Codec {\n  /**\n   * @param {Base} name\n   * @param {Prefix} prefix\n   * @param {(bytes:Uint8Array) => string} baseEncode\n   * @param {(text:string) => Uint8Array} baseDecode\n   */\n  constructor (name, prefix, baseEncode, baseDecode) {\n    this.name = name\n    this.prefix = prefix\n    this.baseEncode = baseEncode\n    this.baseDecode = baseDecode\n    this.encoder = new Encoder(name, prefix, baseEncode)\n    this.decoder = new Decoder(name, prefix, baseDecode)\n  }\n\n  /**\n   * @param {Uint8Array} input\n   */\n  encode (input) {\n    return this.encoder.encode(input)\n  }\n\n  /**\n   * @param {string} input\n   */\n  decode (input) {\n    return this.decoder.decode(input)\n  }\n}\n\n/**\n * @template {string} Base\n * @template {string} Prefix\n * @param {object} options\n * @param {Base} options.name\n * @param {Prefix} options.prefix\n * @param {(bytes:Uint8Array) => string} options.encode\n * @param {(input:string) => Uint8Array} options.decode\n * @returns {Codec<Base, Prefix>}\n */\nexport const from = ({ name, prefix, encode, decode }) =>\n  new Codec(name, prefix, encode, decode)\n\n/**\n * @template {string} Base\n * @template {string} Prefix\n * @param {object} options\n * @param {Base} options.name\n * @param {Prefix} options.prefix\n * @param {string} options.alphabet\n * @returns {Codec<Base, Prefix>}\n */\nexport const baseX = ({ prefix, name, alphabet }) => {\n  const { encode, decode } = basex(alphabet, name)\n  return from({\n    prefix,\n    name,\n    encode,\n    /**\n     * @param {string} text\n     */\n    decode: text => coerce(decode(text))\n  })\n}\n\n/**\n * @param {string} string\n * @param {string} alphabet\n * @param {number} bitsPerChar\n * @param {string} name\n * @returns {Uint8Array}\n */\nconst decode = (string, alphabet, bitsPerChar, name) => {\n  // Build the character lookup table:\n  /** @type {Record<string, number>} */\n  const codes = {}\n  for (let i = 0; i < alphabet.length; ++i) {\n    codes[alphabet[i]] = i\n  }\n\n  // Count the padding bytes:\n  let end = string.length\n  while (string[end - 1] === '=') {\n    --end\n  }\n\n  // Allocate the output:\n  const out = new Uint8Array((end * bitsPerChar / 8) | 0)\n\n  // Parse the data:\n  let bits = 0 // Number of bits currently in the buffer\n  let buffer = 0 // Bits waiting to be written out, MSB first\n  let written = 0 // Next byte to write\n  for (let i = 0; i < end; ++i) {\n    // Read one character from the string:\n    const value = codes[string[i]]\n    if (value === undefined) {\n      throw new SyntaxError(`Non-${name} character`)\n    }\n\n    // Append the bits to the buffer:\n    buffer = (buffer << bitsPerChar) | value\n    bits += bitsPerChar\n\n    // Write out some bits if the buffer has a byte's worth:\n    if (bits >= 8) {\n      bits -= 8\n      out[written++] = 0xff & (buffer >> bits)\n    }\n  }\n\n  // Verify that we have received just enough bits:\n  if (bits >= bitsPerChar || 0xff & (buffer << (8 - bits))) {\n    throw new SyntaxError('Unexpected end of data')\n  }\n\n  return out\n}\n\n/**\n * @param {Uint8Array} data\n * @param {string} alphabet\n * @param {number} bitsPerChar\n * @returns {string}\n */\nconst encode = (data, alphabet, bitsPerChar) => {\n  const pad = alphabet[alphabet.length - 1] === '='\n  const mask = (1 << bitsPerChar) - 1\n  let out = ''\n\n  let bits = 0 // Number of bits currently in the buffer\n  let buffer = 0 // Bits waiting to be written out, MSB first\n  for (let i = 0; i < data.length; ++i) {\n    // Slurp data into the buffer:\n    buffer = (buffer << 8) | data[i]\n    bits += 8\n\n    // Write out as much as we can:\n    while (bits > bitsPerChar) {\n      bits -= bitsPerChar\n      out += alphabet[mask & (buffer >> bits)]\n    }\n  }\n\n  // Partial character:\n  if (bits) {\n    out += alphabet[mask & (buffer << (bitsPerChar - bits))]\n  }\n\n  // Add padding characters until we hit a byte boundary:\n  if (pad) {\n    while ((out.length * bitsPerChar) & 7) {\n      out += '='\n    }\n  }\n\n  return out\n}\n\n/**\n * RFC4648 Factory\n *\n * @template {string} Base\n * @template {string} Prefix\n * @param {object} options\n * @param {Base} options.name\n * @param {Prefix} options.prefix\n * @param {string} options.alphabet\n * @param {number} options.bitsPerChar\n */\nexport const rfc4648 = ({ name, prefix, bitsPerChar, alphabet }) => {\n  return from({\n    prefix,\n    name,\n    encode (input) {\n      return encode(input, alphabet, bitsPerChar)\n    },\n    decode (input) {\n      return decode(input, alphabet, bitsPerChar, name)\n    }\n  })\n}\n","import { rfc4648 } from './base.js'\n\nexport const base32 = rfc4648({\n  prefix: 'b',\n  name: 'base32',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567',\n  bitsPerChar: 5\n})\n\nexport const base32upper = rfc4648({\n  prefix: 'B',\n  name: 'base32upper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n  bitsPerChar: 5\n})\n\nexport const base32pad = rfc4648({\n  prefix: 'c',\n  name: 'base32pad',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567=',\n  bitsPerChar: 5\n})\n\nexport const base32padupper = rfc4648({\n  prefix: 'C',\n  name: 'base32padupper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=',\n  bitsPerChar: 5\n})\n\nexport const base32hex = rfc4648({\n  prefix: 'v',\n  name: 'base32hex',\n  alphabet: '0123456789abcdefghijklmnopqrstuv',\n  bitsPerChar: 5\n})\n\nexport const base32hexupper = rfc4648({\n  prefix: 'V',\n  name: 'base32hexupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV',\n  bitsPerChar: 5\n})\n\nexport const base32hexpad = rfc4648({\n  prefix: 't',\n  name: 'base32hexpad',\n  alphabet: '0123456789abcdefghijklmnopqrstuv=',\n  bitsPerChar: 5\n})\n\nexport const base32hexpadupper = rfc4648({\n  prefix: 'T',\n  name: 'base32hexpadupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV=',\n  bitsPerChar: 5\n})\n\nexport const base32z = rfc4648({\n  prefix: 'h',\n  name: 'base32z',\n  alphabet: 'ybndrfg8ejkmcpqxot1uwisza345h769',\n  bitsPerChar: 5\n})\n","import { baseX } from './base.js'\n\nexport const base58btc = baseX({\n  name: 'base58btc',\n  prefix: 'z',\n  alphabet: '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n})\n\nexport const base58flickr = baseX({\n  name: 'base58flickr',\n  prefix: 'Z',\n  alphabet: '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n})\n","var encode_1 = encode;\n\nvar MSB = 0x80\n  , REST = 0x7F\n  , MSBALL = ~REST\n  , INT = Math.pow(2, 31);\n\nfunction encode(num, out, offset) {\n  out = out || [];\n  offset = offset || 0;\n  var oldOffset = offset;\n\n  while(num >= INT) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num /= 128;\n  }\n  while(num & MSBALL) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num >>>= 7;\n  }\n  out[offset] = num | 0;\n  \n  encode.bytes = offset - oldOffset + 1;\n  \n  return out\n}\n\nvar decode = read;\n\nvar MSB$1 = 0x80\n  , REST$1 = 0x7F;\n\nfunction read(buf, offset) {\n  var res    = 0\n    , offset = offset || 0\n    , shift  = 0\n    , counter = offset\n    , b\n    , l = buf.length;\n\n  do {\n    if (counter >= l) {\n      read.bytes = 0;\n      throw new RangeError('Could not decode varint')\n    }\n    b = buf[counter++];\n    res += shift < 28\n      ? (b & REST$1) << shift\n      : (b & REST$1) * Math.pow(2, shift);\n    shift += 7;\n  } while (b >= MSB$1)\n\n  read.bytes = counter - offset;\n\n  return res\n}\n\nvar N1 = Math.pow(2,  7);\nvar N2 = Math.pow(2, 14);\nvar N3 = Math.pow(2, 21);\nvar N4 = Math.pow(2, 28);\nvar N5 = Math.pow(2, 35);\nvar N6 = Math.pow(2, 42);\nvar N7 = Math.pow(2, 49);\nvar N8 = Math.pow(2, 56);\nvar N9 = Math.pow(2, 63);\n\nvar length = function (value) {\n  return (\n    value < N1 ? 1\n  : value < N2 ? 2\n  : value < N3 ? 3\n  : value < N4 ? 4\n  : value < N5 ? 5\n  : value < N6 ? 6\n  : value < N7 ? 7\n  : value < N8 ? 8\n  : value < N9 ? 9\n  :              10\n  )\n};\n\nvar varint = {\n    encode: encode_1\n  , decode: decode\n  , encodingLength: length\n};\n\nvar _brrp_varint = varint;\n\nexport default _brrp_varint;\n","import varint from '../vendor/varint.js'\n\n/**\n * @param {Uint8Array} data\n * @param {number} [offset=0]\n * @returns {[number, number]}\n */\nexport const decode = (data, offset = 0) => {\n  const code = varint.decode(data, offset)\n  return [code, varint.decode.bytes]\n}\n\n/**\n * @param {number} int\n * @param {Uint8Array} target\n * @param {number} [offset=0]\n */\nexport const encodeTo = (int, target, offset = 0) => {\n  varint.encode(int, target, offset)\n  return target\n}\n\n/**\n * @param {number} int\n * @returns {number}\n */\nexport const encodingLength = (int) => {\n  return varint.encodingLength(int)\n}\n","import { coerce, equals as equalBytes } from '../bytes.js'\nimport * as varint from '../varint.js'\n\n/**\n * Creates a multihash digest.\n *\n * @template {number} Code\n * @param {Code} code\n * @param {Uint8Array} digest\n */\nexport const create = (code, digest) => {\n  const size = digest.byteLength\n  const sizeOffset = varint.encodingLength(code)\n  const digestOffset = sizeOffset + varint.encodingLength(size)\n\n  const bytes = new Uint8Array(digestOffset + size)\n  varint.encodeTo(code, bytes, 0)\n  varint.encodeTo(size, bytes, sizeOffset)\n  bytes.set(digest, digestOffset)\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * Turns bytes representation of multihash digest into an instance.\n *\n * @param {Uint8Array} multihash\n * @returns {MultihashDigest}\n */\nexport const decode = (multihash) => {\n  const bytes = coerce(multihash)\n  const [code, sizeOffset] = varint.decode(bytes)\n  const [size, digestOffset] = varint.decode(bytes.subarray(sizeOffset))\n  const digest = bytes.subarray(sizeOffset + digestOffset)\n\n  if (digest.byteLength !== size) {\n    throw new Error('Incorrect length')\n  }\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * @param {MultihashDigest} a\n * @param {unknown} b\n * @returns {b is MultihashDigest}\n */\nexport const equals = (a, b) => {\n  if (a === b) {\n    return true\n  } else {\n    const data = /** @type {{code?:unknown, size?:unknown, bytes?:unknown}} */(b)\n\n    return (\n      a.code === data.code &&\n      a.size === data.size &&\n      data.bytes instanceof Uint8Array &&\n      equalBytes(a.bytes, data.bytes)\n    )\n  }\n}\n\n/**\n * @typedef {import('./interface.js').MultihashDigest} MultihashDigest\n */\n\n/**\n * Represents a multihash digest which carries information about the\n * hashing algorithm and an actual hash digest.\n *\n * @template {number} Code\n * @template {number} Size\n * @class\n * @implements {MultihashDigest}\n */\nexport class Digest {\n  /**\n   * Creates a multihash digest.\n   *\n   * @param {Code} code\n   * @param {Size} size\n   * @param {Uint8Array} digest\n   * @param {Uint8Array} bytes\n   */\n  constructor (code, size, digest, bytes) {\n    this.code = code\n    this.size = size\n    this.digest = digest\n    this.bytes = bytes\n  }\n}\n","import { base32 } from './bases/base32.js'\nimport { base58btc } from './bases/base58.js'\nimport { coerce } from './bytes.js'\nimport * as Digest from './hashes/digest.js'\n// Linter can see that API is used in types.\n// eslint-disable-next-line\nimport * as API from \"./link/interface.js\"\nimport * as varint from './varint.js'\n\n// This way TS will also expose all the types from module\nexport * from './link/interface.js'\n\n/**\n * @template {API.Link<unknown, number, number, API.Version>} T\n * @template {string} Prefix\n * @param {T} link\n * @param {API.MultibaseEncoder<Prefix>} [base]\n * @returns {API.ToString<T, Prefix>}\n */\nexport const format = (link, base) => {\n  const { bytes, version } = link\n  switch (version) {\n    case 0:\n      return toStringV0(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<\"z\">} */ (base) || base58btc.encoder\n      )\n    default:\n      return toStringV1(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<Prefix>} */ (base || base32.encoder)\n      )\n  }\n}\n\n/**\n * @template {API.UnknownLink} Link\n * @param {Link} link\n * @returns {API.LinkJSON<Link>}\n */\nexport const toJSON = (link) => ({\n  '/': format(link)\n})\n\n/**\n * @template {API.UnknownLink} Link\n * @param {API.LinkJSON<Link>} json\n */\nexport const fromJSON = (json) =>\n  CID.parse(json['/'])\n\n/** @type {WeakMap<API.UnknownLink, Map<string, string>>} */\nconst cache = new WeakMap()\n\n/**\n * @param {API.UnknownLink} cid\n * @returns {Map<string, string>}\n */\nconst baseCache = cid => {\n  const baseCache = cache.get(cid)\n  if (baseCache == null) {\n    const baseCache = new Map()\n    cache.set(cid, baseCache)\n    return baseCache\n  }\n  return baseCache\n}\n\n/**\n * @template {unknown} [Data=unknown]\n * @template {number} [Format=number]\n * @template {number} [Alg=number]\n * @template {API.Version} [Version=API.Version]\n * @implements {API.Link<Data, Format, Alg, Version>}\n */\n\nexport class CID {\n  /**\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} multihash - (Multi)hash of the of the content.\n   * @param {Uint8Array} bytes\n   */\n  constructor (version, code, multihash, bytes) {\n    /** @readonly */\n    this.code = code\n    /** @readonly */\n    this.version = version\n    /** @readonly */\n    this.multihash = multihash\n    /** @readonly */\n    this.bytes = bytes\n\n    // flag to serializers that this is a CID and\n    // should be treated specially\n    /** @readonly */\n    this['/'] = bytes\n  }\n\n  /**\n   * Signalling `cid.asCID === cid` has been replaced with `cid['/'] === cid.bytes`\n   * please either use `CID.asCID(cid)` or switch to new signalling mechanism\n   *\n   * @deprecated\n   */\n  get asCID () {\n    return this\n  }\n\n  // ArrayBufferView\n  get byteOffset () {\n    return this.bytes.byteOffset\n  }\n\n  // ArrayBufferView\n  get byteLength () {\n    return this.bytes.byteLength\n  }\n\n  /**\n   * @returns {CID<Data, API.DAG_PB, API.SHA_256, 0>}\n   */\n  toV0 () {\n    switch (this.version) {\n      case 0: {\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (this)\n      }\n      case 1: {\n        const { code, multihash } = this\n\n        if (code !== DAG_PB_CODE) {\n          throw new Error('Cannot convert a non dag-pb CID to CIDv0')\n        }\n\n        // sha2-256\n        if (multihash.code !== SHA_256_CODE) {\n          throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0')\n        }\n\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (\n          CID.createV0(\n            /** @type {API.MultihashDigest<API.SHA_256>} */ (multihash)\n          )\n        )\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 0. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @returns {CID<Data, Format, Alg, 1>}\n   */\n  toV1 () {\n    switch (this.version) {\n      case 0: {\n        const { code, digest } = this.multihash\n        const multihash = Digest.create(code, digest)\n        return /** @type {CID<Data, Format, Alg, 1>} */ (\n          CID.createV1(this.code, multihash)\n        )\n      }\n      case 1: {\n        return /** @type {CID<Data, Format, Alg, 1>} */ (this)\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 1. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @param {unknown} other\n   * @returns {other is CID<Data, Format, Alg, Version>}\n   */\n  equals (other) {\n    return CID.equals(this, other)\n  }\n\n  /**\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {API.Link<Data, Format, Alg, Version>} self\n   * @param {unknown} other\n   * @returns {other is CID}\n   */\n  static equals (self, other) {\n    const unknown =\n      /** @type {{code?:unknown, version?:unknown, multihash?:unknown}} */ (\n        other\n      )\n    return (\n      unknown &&\n      self.code === unknown.code &&\n      self.version === unknown.version &&\n      Digest.equals(self.multihash, unknown.multihash)\n    )\n  }\n\n  /**\n   * @param {API.MultibaseEncoder<string>} [base]\n   * @returns {string}\n   */\n  toString (base) {\n    return format(this, base)\n  }\n\n  /**\n   * @returns {API.LinkJSON<this>}\n   */\n  toJSON () {\n    return { '/': format(this) }\n  }\n\n  link () {\n    return this\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'CID'\n  }\n\n  // Legacy\n\n  [Symbol.for('nodejs.util.inspect.custom')] () {\n    return `CID(${this.toString()})`\n  }\n\n  /**\n   * Takes any input `value` and returns a `CID` instance if it was\n   * a `CID` otherwise returns `null`. If `value` is instanceof `CID`\n   * it will return value back. If `value` is not instance of this CID\n   * class, but is compatible CID it will return new instance of this\n   * `CID` class. Otherwise returns null.\n   *\n   * This allows two different incompatible versions of CID library to\n   * co-exist and interop as long as binary interface is compatible.\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @template {unknown} U\n   * @param {API.Link<Data, Format, Alg, Version>|U} input\n   * @returns {CID<Data, Format, Alg, Version>|null}\n   */\n  static asCID (input) {\n    if (input == null) {\n      return null\n    }\n\n    const value = /** @type {any} */ (input)\n    if (value instanceof CID) {\n      // If value is instance of CID then we're all set.\n      return value\n    } else if ((value['/'] != null && value['/'] === value.bytes) || value.asCID === value) {\n      // If value isn't instance of this CID class but `this.asCID === this` or\n      // `value['/'] === value.bytes` is true it is CID instance coming from a\n      // different implementation (diff version or duplicate). In that case we\n      // rebase it to this `CID` implementation so caller is guaranteed to get\n      // instance with expected API.\n      const { version, code, multihash, bytes } = value\n      return new CID(\n        version,\n        code,\n        /** @type {API.MultihashDigest<Alg>} */ (multihash),\n        bytes || encodeCID(version, code, multihash.bytes)\n      )\n    } else if (value[cidSymbol] === true) {\n      // If value is a CID from older implementation that used to be tagged via\n      // symbol we still rebase it to the this `CID` implementation by\n      // delegating that to a constructor.\n      const { version, multihash, code } = value\n      const digest =\n        /** @type {API.MultihashDigest<Alg>} */\n        (Digest.decode(multihash))\n      return CID.create(version, code, digest)\n    } else {\n      // Otherwise value is not a CID (or an incompatible version of it) in\n      // which case we return `null`.\n      return null\n    }\n  }\n\n  /**\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} digest - (Multi)hash of the of the content.\n   * @returns {CID<Data, Format, Alg, Version>}\n   */\n  static create (version, code, digest) {\n    if (typeof code !== 'number') {\n      throw new Error('String codecs are no longer supported')\n    }\n\n    if (!(digest.bytes instanceof Uint8Array)) {\n      throw new Error('Invalid digest')\n    }\n\n    switch (version) {\n      case 0: {\n        if (code !== DAG_PB_CODE) {\n          throw new Error(\n            `Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`\n          )\n        } else {\n          return new CID(version, code, digest, digest.bytes)\n        }\n      }\n      case 1: {\n        const bytes = encodeCID(version, code, digest.bytes)\n        return new CID(version, code, digest, bytes)\n      }\n      default: {\n        throw new Error('Invalid version')\n      }\n    }\n  }\n\n  /**\n   * Simplified version of `create` for CIDv0.\n   *\n   * @template {unknown} [T=unknown]\n   * @param {API.MultihashDigest<typeof SHA_256_CODE>} digest - Multihash.\n   * @returns {CID<T, typeof DAG_PB_CODE, typeof SHA_256_CODE, 0>}\n   */\n  static createV0 (digest) {\n    return CID.create(0, DAG_PB_CODE, digest)\n  }\n\n  /**\n   * Simplified version of `create` for CIDv1.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @param {Code} code - Content encoding format code.\n   * @param {API.MultihashDigest<Alg>} digest - Miltihash of the content.\n   * @returns {CID<Data, Code, Alg, 1>}\n   */\n  static createV1 (code, digest) {\n    return CID.create(1, code, digest)\n  }\n\n  /**\n   * Decoded a CID from its binary representation. The byte array must contain\n   * only the CID with no additional bytes.\n   *\n   * An error will be thrown if the bytes provided do not contain a valid\n   * binary representation of a CID.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ByteView<API.Link<Data, Code, Alg, Ver>>} bytes\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static decode (bytes) {\n    const [cid, remainder] = CID.decodeFirst(bytes)\n    if (remainder.length) {\n      throw new Error('Incorrect length')\n    }\n    return cid\n  }\n\n  /**\n   * Decoded a CID from its binary representation at the beginning of a byte\n   * array.\n   *\n   * Returns an array with the first element containing the CID and the second\n   * element containing the remainder of the original byte array. The remainder\n   * will be a zero-length byte array if the provided bytes only contained a\n   * binary CID representation.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} bytes\n   * @returns {[CID<T, C, A, V>, Uint8Array]}\n   */\n  static decodeFirst (bytes) {\n    const specs = CID.inspectBytes(bytes)\n    const prefixSize = specs.size - specs.multihashSize\n    const multihashBytes = coerce(\n      bytes.subarray(prefixSize, prefixSize + specs.multihashSize)\n    )\n    if (multihashBytes.byteLength !== specs.multihashSize) {\n      throw new Error('Incorrect length')\n    }\n    const digestBytes = multihashBytes.subarray(\n      specs.multihashSize - specs.digestSize\n    )\n    const digest = new Digest.Digest(\n      specs.multihashCode,\n      specs.digestSize,\n      digestBytes,\n      multihashBytes\n    )\n    const cid =\n      specs.version === 0\n        ? CID.createV0(/** @type {API.MultihashDigest<API.SHA_256>} */ (digest))\n        : CID.createV1(specs.codec, digest)\n    return [/** @type {CID<T, C, A, V>} */(cid), bytes.subarray(specs.size)]\n  }\n\n  /**\n   * Inspect the initial bytes of a CID to determine its properties.\n   *\n   * Involves decoding up to 4 varints. Typically this will require only 4 to 6\n   * bytes but for larger multicodec code values and larger multihash digest\n   * lengths these varints can be quite large. It is recommended that at least\n   * 10 bytes be made available in the `initialBytes` argument for a complete\n   * inspection.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} initialBytes\n   * @returns {{ version:V, codec:C, multihashCode:A, digestSize:number, multihashSize:number, size:number }}\n   */\n  static inspectBytes (initialBytes) {\n    let offset = 0\n    const next = () => {\n      const [i, length] = varint.decode(initialBytes.subarray(offset))\n      offset += length\n      return i\n    }\n\n    let version = /** @type {V} */ (next())\n    let codec = /** @type {C} */ (DAG_PB_CODE)\n    if (/** @type {number} */(version) === 18) {\n      // CIDv0\n      version = /** @type {V} */ (0)\n      offset = 0\n    } else {\n      codec = /** @type {C} */ (next())\n    }\n\n    if (version !== 0 && version !== 1) {\n      throw new RangeError(`Invalid CID version ${version}`)\n    }\n\n    const prefixSize = offset\n    const multihashCode = /** @type {A} */ (next()) // multihash code\n    const digestSize = next() // multihash length\n    const size = offset + digestSize\n    const multihashSize = size - prefixSize\n\n    return { version, codec, multihashCode, digestSize, multihashSize, size }\n  }\n\n  /**\n   * Takes cid in a string representation and creates an instance. If `base`\n   * decoder is not provided will use a default from the configuration. It will\n   * throw an error if encoding of the CID is not compatible with supplied (or\n   * a default decoder).\n   *\n   * @template {string} Prefix\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n   * @param {API.MultibaseDecoder<Prefix>} [base]\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static parse (source, base) {\n    const [prefix, bytes] = parseCIDtoBytes(source, base)\n\n    const cid = CID.decode(bytes)\n\n    if (cid.version === 0 && source[0] !== 'Q') {\n      throw Error('Version 0 CID string must not include multibase prefix')\n    }\n\n    // Cache string representation to avoid computing it on `this.toString()`\n    baseCache(cid).set(prefix, source)\n\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @template {unknown} Data\n * @template {number} Code\n * @template {number} Alg\n * @template {API.Version} Ver\n * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n * @param {API.MultibaseDecoder<Prefix>} [base]\n * @returns {[Prefix, API.ByteView<API.Link<Data, Code, Alg, Ver>>]}\n */\nconst parseCIDtoBytes = (source, base) => {\n  switch (source[0]) {\n    // CIDv0 is parsed differently\n    case 'Q': {\n      const decoder = base || base58btc\n      return [\n        /** @type {Prefix} */ (base58btc.prefix),\n        decoder.decode(`${base58btc.prefix}${source}`)\n      ]\n    }\n    case base58btc.prefix: {\n      const decoder = base || base58btc\n      return [/** @type {Prefix} */(base58btc.prefix), decoder.decode(source)]\n    }\n    case base32.prefix: {\n      const decoder = base || base32\n      return [/** @type {Prefix} */(base32.prefix), decoder.decode(source)]\n    }\n    default: {\n      if (base == null) {\n        throw Error(\n          'To parse non base32 or base58btc encoded CID multibase decoder must be provided'\n        )\n      }\n      return [/** @type {Prefix} */(source[0]), base.decode(source)]\n    }\n  }\n}\n\n/**\n *\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<'z'>} base\n */\nconst toStringV0 = (bytes, cache, base) => {\n  const { prefix } = base\n  if (prefix !== base58btc.prefix) {\n    throw Error(`Cannot string encode V0 in ${base.name} encoding`)\n  }\n\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes).slice(1)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<Prefix>} base\n */\nconst toStringV1 = (bytes, cache, base) => {\n  const { prefix } = base\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\nconst DAG_PB_CODE = 0x70\nconst SHA_256_CODE = 0x12\n\n/**\n * @param {API.Version} version\n * @param {number} code\n * @param {Uint8Array} multihash\n * @returns {Uint8Array}\n */\nconst encodeCID = (version, code, multihash) => {\n  const codeOffset = varint.encodingLength(version)\n  const hashOffset = codeOffset + varint.encodingLength(code)\n  const bytes = new Uint8Array(hashOffset + multihash.byteLength)\n  varint.encodeTo(version, bytes, 0)\n  varint.encodeTo(code, bytes, codeOffset)\n  bytes.set(multihash, hashOffset)\n  return bytes\n}\n\nconst cidSymbol = Symbol.for('@ipld/js-cid/CID')\n","import { BaseBlockstore, Errors } from 'blockstore-core';\nimport { openDB, deleteDB } from 'idb';\nimport { base32upper } from 'multiformats/bases/base32';\nimport { CID } from 'multiformats/cid';\nimport * as raw from 'multiformats/codecs/raw';\nimport * as Digest from 'multiformats/hashes/digest';\nexport class IDBBlockstore extends BaseBlockstore {\n    location;\n    version;\n    db;\n    base;\n    constructor(location, init = {}) {\n        super();\n        this.location = `${init.prefix ?? ''}${location}`;\n        this.version = init.version ?? 1;\n        // this.transactionQueue = new PQueue({ concurrency: 1 })\n        this.base = init.base ?? base32upper;\n    }\n    #encode(cid) {\n        return `/${this.base.encoder.encode(cid.multihash.bytes)}`;\n    }\n    #decode(key) {\n        return CID.createV1(raw.code, Digest.decode(this.base.decoder.decode(key.substring(1))));\n    }\n    async open() {\n        try {\n            const location = this.location;\n            this.db = await openDB(location, this.version, {\n                upgrade(db) {\n                    db.createObjectStore(location);\n                }\n            });\n        }\n        catch (err) {\n            throw Errors.openFailedError(err);\n        }\n    }\n    async close() {\n        this.db?.close();\n    }\n    async put(key, val) {\n        if (this.db == null) {\n            throw new Error('Blockstore needs to be opened.');\n        }\n        try {\n            await this.db.put(this.location, val, this.#encode(key));\n            return key;\n        }\n        catch (err) {\n            throw Errors.putFailedError(err);\n        }\n    }\n    async get(key) {\n        if (this.db == null) {\n            throw new Error('Blockstore needs to be opened.');\n        }\n        let val;\n        try {\n            val = await this.db.get(this.location, this.#encode(key));\n        }\n        catch (err) {\n            throw Errors.putFailedError(err);\n        }\n        if (val === undefined) {\n            throw Errors.notFoundError();\n        }\n        return val;\n    }\n    async delete(key) {\n        if (this.db == null) {\n            throw new Error('Blockstore needs to be opened.');\n        }\n        try {\n            await this.db.delete(this.location, this.#encode(key));\n        }\n        catch (err) {\n            throw Errors.putFailedError(err);\n        }\n    }\n    async has(key) {\n        if (this.db == null) {\n            throw new Error('Blockstore needs to be opened.');\n        }\n        try {\n            return Boolean(await this.db.getKey(this.location, this.#encode(key)));\n        }\n        catch (err) {\n            throw Errors.putFailedError(err);\n        }\n    }\n    async *getAll(options) {\n        if (this.db == null) {\n            throw new Error('Blockstore needs to be opened.');\n        }\n        for (const key of await this.db.getAllKeys(this.location)) {\n            const cid = this.#decode(key.toString()); // eslint-disable-line @typescript-eslint/no-base-to-string\n            const block = await this.get(cid);\n            yield { cid, block };\n        }\n    }\n    async destroy() {\n        await deleteDB(this.location);\n    }\n}\n//# sourceMappingURL=index.js.map","// @ts-check\n\nimport { coerce } from '../bytes.js'\n\n/**\n * @template T\n * @typedef {import('./interface.js').ByteView<T>} ByteView\n */\n\nexport const name = 'raw'\nexport const code = 0x55\n\n/**\n * @param {Uint8Array} node\n * @returns {ByteView<Uint8Array>}\n */\nexport const encode = (node) => coerce(node)\n\n/**\n * @param {ByteView<Uint8Array>} data\n * @returns {Uint8Array}\n */\nexport const decode = (data) => coerce(data)\n","/**\n * Turns a browser readable stream into an async iterable. Async iteration over\n * returned iterable will lock give stream, preventing any other consumer from\n * acquiring a reader. The lock will be released if iteration loop is broken. To\n * prevent stream cancelling optional `{ preventCancel: true }` could be passed\n * as a second argument.\n */\nexport default async function* browserReadableStreamToIt(stream, options = {}) {\n    const reader = stream.getReader();\n    try {\n        while (true) {\n            const result = await reader.read();\n            if (result.done) {\n                return;\n            }\n            yield result.value;\n        }\n    }\n    finally {\n        if (options.preventCancel !== true) {\n            await reader.cancel();\n        }\n        reader.releaseLock();\n    }\n}\n//# sourceMappingURL=index.js.map","export default function accessor(buf) {\n    if (buf instanceof Uint8Array) {\n        return {\n            get(index) {\n                return buf[index];\n            },\n            set(index, value) {\n                buf[index] = value;\n            }\n        };\n    }\n    return {\n        get(index) {\n            return buf.get(index);\n        },\n        set(index, value) {\n            buf.set(index, value);\n        }\n    };\n}\n//# sourceMappingURL=index.js.map","export const useBuffer = globalThis.process && !globalThis.process.browser && globalThis.Buffer && typeof globalThis.Buffer.isBuffer === 'function';\nconst textDecoder = new TextDecoder();\nconst textEncoder = new TextEncoder();\nfunction isBuffer(buf) {\n  return useBuffer && globalThis.Buffer.isBuffer(buf);\n}\nexport function asU8A(buf) {\n  if (!(buf instanceof Uint8Array)) {\n    return Uint8Array.from(buf);\n  }\n  return isBuffer(buf) ? new Uint8Array(buf.buffer, buf.byteOffset, buf.byteLength) : buf;\n}\nexport const toString = useBuffer ? (bytes, start, end) => {\n  return end - start > 64 ? globalThis.Buffer.from(bytes.subarray(start, end)).toString('utf8') : utf8Slice(bytes, start, end);\n} : (bytes, start, end) => {\n  return end - start > 64 ? textDecoder.decode(bytes.subarray(start, end)) : utf8Slice(bytes, start, end);\n};\nexport const fromString = useBuffer ? string => {\n  return string.length > 64 ? globalThis.Buffer.from(string) : utf8ToBytes(string);\n} : string => {\n  return string.length > 64 ? textEncoder.encode(string) : utf8ToBytes(string);\n};\nexport const fromArray = arr => {\n  return Uint8Array.from(arr);\n};\nexport const slice = useBuffer ? (bytes, start, end) => {\n  if (isBuffer(bytes)) {\n    return new Uint8Array(bytes.subarray(start, end));\n  }\n  return bytes.slice(start, end);\n} : (bytes, start, end) => {\n  return bytes.slice(start, end);\n};\nexport const concat = useBuffer ? (chunks, length) => {\n  chunks = chunks.map(c => c instanceof Uint8Array ? c : globalThis.Buffer.from(c));\n  return asU8A(globalThis.Buffer.concat(chunks, length));\n} : (chunks, length) => {\n  const out = new Uint8Array(length);\n  let off = 0;\n  for (let b of chunks) {\n    if (off + b.length > out.length) {\n      b = b.subarray(0, out.length - off);\n    }\n    out.set(b, off);\n    off += b.length;\n  }\n  return out;\n};\nexport const alloc = useBuffer ? size => {\n  return globalThis.Buffer.allocUnsafe(size);\n} : size => {\n  return new Uint8Array(size);\n};\nexport const toHex = useBuffer ? d => {\n  if (typeof d === 'string') {\n    return d;\n  }\n  return globalThis.Buffer.from(toBytes(d)).toString('hex');\n} : d => {\n  if (typeof d === 'string') {\n    return d;\n  }\n  return Array.prototype.reduce.call(toBytes(d), (p, c) => `${ p }${ c.toString(16).padStart(2, '0') }`, '');\n};\nexport const fromHex = useBuffer ? hex => {\n  if (hex instanceof Uint8Array) {\n    return hex;\n  }\n  return globalThis.Buffer.from(hex, 'hex');\n} : hex => {\n  if (hex instanceof Uint8Array) {\n    return hex;\n  }\n  if (!hex.length) {\n    return new Uint8Array(0);\n  }\n  return new Uint8Array(hex.split('').map((c, i, d) => i % 2 === 0 ? `0x${ c }${ d[i + 1] }` : '').filter(Boolean).map(e => parseInt(e, 16)));\n};\nfunction toBytes(obj) {\n  if (obj instanceof Uint8Array && obj.constructor.name === 'Uint8Array') {\n    return obj;\n  }\n  if (obj instanceof ArrayBuffer) {\n    return new Uint8Array(obj);\n  }\n  if (ArrayBuffer.isView(obj)) {\n    return new Uint8Array(obj.buffer, obj.byteOffset, obj.byteLength);\n  }\n  throw new Error('Unknown type, must be binary type');\n}\nexport function compare(b1, b2) {\n  if (isBuffer(b1) && isBuffer(b2)) {\n    return b1.compare(b2);\n  }\n  for (let i = 0; i < b1.length; i++) {\n    if (b1[i] === b2[i]) {\n      continue;\n    }\n    return b1[i] < b2[i] ? -1 : 1;\n  }\n  return 0;\n}\nfunction utf8ToBytes(string, units = Infinity) {\n  let codePoint;\n  const length = string.length;\n  let leadSurrogate = null;\n  const bytes = [];\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i);\n    if (codePoint > 55295 && codePoint < 57344) {\n      if (!leadSurrogate) {\n        if (codePoint > 56319) {\n          if ((units -= 3) > -1)\n            bytes.push(239, 191, 189);\n          continue;\n        } else if (i + 1 === length) {\n          if ((units -= 3) > -1)\n            bytes.push(239, 191, 189);\n          continue;\n        }\n        leadSurrogate = codePoint;\n        continue;\n      }\n      if (codePoint < 56320) {\n        if ((units -= 3) > -1)\n          bytes.push(239, 191, 189);\n        leadSurrogate = codePoint;\n        continue;\n      }\n      codePoint = (leadSurrogate - 55296 << 10 | codePoint - 56320) + 65536;\n    } else if (leadSurrogate) {\n      if ((units -= 3) > -1)\n        bytes.push(239, 191, 189);\n    }\n    leadSurrogate = null;\n    if (codePoint < 128) {\n      if ((units -= 1) < 0)\n        break;\n      bytes.push(codePoint);\n    } else if (codePoint < 2048) {\n      if ((units -= 2) < 0)\n        break;\n      bytes.push(codePoint >> 6 | 192, codePoint & 63 | 128);\n    } else if (codePoint < 65536) {\n      if ((units -= 3) < 0)\n        break;\n      bytes.push(codePoint >> 12 | 224, codePoint >> 6 & 63 | 128, codePoint & 63 | 128);\n    } else if (codePoint < 1114112) {\n      if ((units -= 4) < 0)\n        break;\n      bytes.push(codePoint >> 18 | 240, codePoint >> 12 & 63 | 128, codePoint >> 6 & 63 | 128, codePoint & 63 | 128);\n    } else {\n      throw new Error('Invalid code point');\n    }\n  }\n  return bytes;\n}\nfunction utf8Slice(buf, offset, end) {\n  const res = [];\n  while (offset < end) {\n    const firstByte = buf[offset];\n    let codePoint = null;\n    let bytesPerSequence = firstByte > 239 ? 4 : firstByte > 223 ? 3 : firstByte > 191 ? 2 : 1;\n    if (offset + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint;\n      switch (bytesPerSequence) {\n      case 1:\n        if (firstByte < 128) {\n          codePoint = firstByte;\n        }\n        break;\n      case 2:\n        secondByte = buf[offset + 1];\n        if ((secondByte & 192) === 128) {\n          tempCodePoint = (firstByte & 31) << 6 | secondByte & 63;\n          if (tempCodePoint > 127) {\n            codePoint = tempCodePoint;\n          }\n        }\n        break;\n      case 3:\n        secondByte = buf[offset + 1];\n        thirdByte = buf[offset + 2];\n        if ((secondByte & 192) === 128 && (thirdByte & 192) === 128) {\n          tempCodePoint = (firstByte & 15) << 12 | (secondByte & 63) << 6 | thirdByte & 63;\n          if (tempCodePoint > 2047 && (tempCodePoint < 55296 || tempCodePoint > 57343)) {\n            codePoint = tempCodePoint;\n          }\n        }\n        break;\n      case 4:\n        secondByte = buf[offset + 1];\n        thirdByte = buf[offset + 2];\n        fourthByte = buf[offset + 3];\n        if ((secondByte & 192) === 128 && (thirdByte & 192) === 128 && (fourthByte & 192) === 128) {\n          tempCodePoint = (firstByte & 15) << 18 | (secondByte & 63) << 12 | (thirdByte & 63) << 6 | fourthByte & 63;\n          if (tempCodePoint > 65535 && tempCodePoint < 1114112) {\n            codePoint = tempCodePoint;\n          }\n        }\n      }\n    }\n    if (codePoint === null) {\n      codePoint = 65533;\n      bytesPerSequence = 1;\n    } else if (codePoint > 65535) {\n      codePoint -= 65536;\n      res.push(codePoint >>> 10 & 1023 | 55296);\n      codePoint = 56320 | codePoint & 1023;\n    }\n    res.push(codePoint);\n    offset += bytesPerSequence;\n  }\n  return decodeCodePointsArray(res);\n}\nconst MAX_ARGUMENTS_LENGTH = 4096;\nexport function decodeCodePointsArray(codePoints) {\n  const len = codePoints.length;\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints);\n  }\n  let res = '';\n  let i = 0;\n  while (i < len) {\n    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n  return res;\n}","const decodeErrPrefix = 'CBOR decode error:';\nconst encodeErrPrefix = 'CBOR encode error:';\nconst uintMinorPrefixBytes = [];\nuintMinorPrefixBytes[23] = 1;\nuintMinorPrefixBytes[24] = 2;\nuintMinorPrefixBytes[25] = 3;\nuintMinorPrefixBytes[26] = 5;\nuintMinorPrefixBytes[27] = 9;\nfunction assertEnoughData(data, pos, need) {\n  if (data.length - pos < need) {\n    throw new Error(`${ decodeErrPrefix } not enough data for type`);\n  }\n}\nexport {\n  decodeErrPrefix,\n  encodeErrPrefix,\n  uintMinorPrefixBytes,\n  assertEnoughData\n};","import { decodeErrPrefix } from './common.js';\nimport { Type } from './token.js';\nimport {\n  jump,\n  quick\n} from './jump.js';\nconst defaultDecodeOptions = {\n  strict: false,\n  allowIndefinite: true,\n  allowUndefined: true,\n  allowBigInt: true\n};\nclass Tokeniser {\n  constructor(data, options = {}) {\n    this.pos = 0;\n    this.data = data;\n    this.options = options;\n  }\n  done() {\n    return this.pos >= this.data.length;\n  }\n  next() {\n    const byt = this.data[this.pos];\n    let token = quick[byt];\n    if (token === undefined) {\n      const decoder = jump[byt];\n      if (!decoder) {\n        throw new Error(`${ decodeErrPrefix } no decoder for major type ${ byt >>> 5 } (byte 0x${ byt.toString(16).padStart(2, '0') })`);\n      }\n      const minor = byt & 31;\n      token = decoder(this.data, this.pos, minor, this.options);\n    }\n    this.pos += token.encodedLength;\n    return token;\n  }\n}\nconst DONE = Symbol.for('DONE');\nconst BREAK = Symbol.for('BREAK');\nfunction tokenToArray(token, tokeniser, options) {\n  const arr = [];\n  for (let i = 0; i < token.value; i++) {\n    const value = tokensToObject(tokeniser, options);\n    if (value === BREAK) {\n      if (token.value === Infinity) {\n        break;\n      }\n      throw new Error(`${ decodeErrPrefix } got unexpected break to lengthed array`);\n    }\n    if (value === DONE) {\n      throw new Error(`${ decodeErrPrefix } found array but not enough entries (got ${ i }, expected ${ token.value })`);\n    }\n    arr[i] = value;\n  }\n  return arr;\n}\nfunction tokenToMap(token, tokeniser, options) {\n  const useMaps = options.useMaps === true;\n  const obj = useMaps ? undefined : {};\n  const m = useMaps ? new Map() : undefined;\n  for (let i = 0; i < token.value; i++) {\n    const key = tokensToObject(tokeniser, options);\n    if (key === BREAK) {\n      if (token.value === Infinity) {\n        break;\n      }\n      throw new Error(`${ decodeErrPrefix } got unexpected break to lengthed map`);\n    }\n    if (key === DONE) {\n      throw new Error(`${ decodeErrPrefix } found map but not enough entries (got ${ i } [no key], expected ${ token.value })`);\n    }\n    if (useMaps !== true && typeof key !== 'string') {\n      throw new Error(`${ decodeErrPrefix } non-string keys not supported (got ${ typeof key })`);\n    }\n    if (options.rejectDuplicateMapKeys === true) {\n      if (useMaps && m.has(key) || !useMaps && key in obj) {\n        throw new Error(`${ decodeErrPrefix } found repeat map key \"${ key }\"`);\n      }\n    }\n    const value = tokensToObject(tokeniser, options);\n    if (value === DONE) {\n      throw new Error(`${ decodeErrPrefix } found map but not enough entries (got ${ i } [no value], expected ${ token.value })`);\n    }\n    if (useMaps) {\n      m.set(key, value);\n    } else {\n      obj[key] = value;\n    }\n  }\n  return useMaps ? m : obj;\n}\nfunction tokensToObject(tokeniser, options) {\n  if (tokeniser.done()) {\n    return DONE;\n  }\n  const token = tokeniser.next();\n  if (token.type === Type.break) {\n    return BREAK;\n  }\n  if (token.type.terminal) {\n    return token.value;\n  }\n  if (token.type === Type.array) {\n    return tokenToArray(token, tokeniser, options);\n  }\n  if (token.type === Type.map) {\n    return tokenToMap(token, tokeniser, options);\n  }\n  if (token.type === Type.tag) {\n    if (options.tags && typeof options.tags[token.value] === 'function') {\n      const tagged = tokensToObject(tokeniser, options);\n      return options.tags[token.value](tagged);\n    }\n    throw new Error(`${ decodeErrPrefix } tag not supported (${ token.value })`);\n  }\n  throw new Error('unsupported');\n}\nfunction decode(data, options) {\n  if (!(data instanceof Uint8Array)) {\n    throw new Error(`${ decodeErrPrefix } data to decode must be a Uint8Array`);\n  }\n  options = Object.assign({}, defaultDecodeOptions, options);\n  const tokeniser = options.tokenizer || new Tokeniser(data, options);\n  const decoded = tokensToObject(tokeniser, options);\n  if (decoded === DONE) {\n    throw new Error(`${ decodeErrPrefix } did not find any content to decode`);\n  }\n  if (decoded === BREAK) {\n    throw new Error(`${ decodeErrPrefix } got unexpected break`);\n  }\n  if (!tokeniser.done()) {\n    throw new Error(`${ decodeErrPrefix } too many terminals, data makes no sense`);\n  }\n  return decoded;\n}\nexport {\n  Tokeniser,\n  tokensToObject,\n  decode\n};","import { is } from './is.js';\nimport {\n  Token,\n  Type\n} from './token.js';\nimport { Bl } from './bl.js';\nimport { encodeErrPrefix } from './common.js';\nimport { quickEncodeToken } from './jump.js';\nimport { asU8A } from './byte-utils.js';\nimport { encodeUint } from './0uint.js';\nimport { encodeNegint } from './1negint.js';\nimport { encodeBytes } from './2bytes.js';\nimport { encodeString } from './3string.js';\nimport { encodeArray } from './4array.js';\nimport { encodeMap } from './5map.js';\nimport { encodeTag } from './6tag.js';\nimport { encodeFloat } from './7float.js';\nconst defaultEncodeOptions = {\n  float64: false,\n  mapSorter,\n  quickEncodeToken\n};\nexport function makeCborEncoders() {\n  const encoders = [];\n  encoders[Type.uint.major] = encodeUint;\n  encoders[Type.negint.major] = encodeNegint;\n  encoders[Type.bytes.major] = encodeBytes;\n  encoders[Type.string.major] = encodeString;\n  encoders[Type.array.major] = encodeArray;\n  encoders[Type.map.major] = encodeMap;\n  encoders[Type.tag.major] = encodeTag;\n  encoders[Type.float.major] = encodeFloat;\n  return encoders;\n}\nconst cborEncoders = makeCborEncoders();\nconst buf = new Bl();\nclass Ref {\n  constructor(obj, parent) {\n    this.obj = obj;\n    this.parent = parent;\n  }\n  includes(obj) {\n    let p = this;\n    do {\n      if (p.obj === obj) {\n        return true;\n      }\n    } while (p = p.parent);\n    return false;\n  }\n  static createCheck(stack, obj) {\n    if (stack && stack.includes(obj)) {\n      throw new Error(`${ encodeErrPrefix } object contains circular references`);\n    }\n    return new Ref(obj, stack);\n  }\n}\nconst simpleTokens = {\n  null: new Token(Type.null, null),\n  undefined: new Token(Type.undefined, undefined),\n  true: new Token(Type.true, true),\n  false: new Token(Type.false, false),\n  emptyArray: new Token(Type.array, 0),\n  emptyMap: new Token(Type.map, 0)\n};\nconst typeEncoders = {\n  number(obj, _typ, _options, _refStack) {\n    if (!Number.isInteger(obj) || !Number.isSafeInteger(obj)) {\n      return new Token(Type.float, obj);\n    } else if (obj >= 0) {\n      return new Token(Type.uint, obj);\n    } else {\n      return new Token(Type.negint, obj);\n    }\n  },\n  bigint(obj, _typ, _options, _refStack) {\n    if (obj >= BigInt(0)) {\n      return new Token(Type.uint, obj);\n    } else {\n      return new Token(Type.negint, obj);\n    }\n  },\n  Uint8Array(obj, _typ, _options, _refStack) {\n    return new Token(Type.bytes, obj);\n  },\n  string(obj, _typ, _options, _refStack) {\n    return new Token(Type.string, obj);\n  },\n  boolean(obj, _typ, _options, _refStack) {\n    return obj ? simpleTokens.true : simpleTokens.false;\n  },\n  null(_obj, _typ, _options, _refStack) {\n    return simpleTokens.null;\n  },\n  undefined(_obj, _typ, _options, _refStack) {\n    return simpleTokens.undefined;\n  },\n  ArrayBuffer(obj, _typ, _options, _refStack) {\n    return new Token(Type.bytes, new Uint8Array(obj));\n  },\n  DataView(obj, _typ, _options, _refStack) {\n    return new Token(Type.bytes, new Uint8Array(obj.buffer, obj.byteOffset, obj.byteLength));\n  },\n  Array(obj, _typ, options, refStack) {\n    if (!obj.length) {\n      if (options.addBreakTokens === true) {\n        return [\n          simpleTokens.emptyArray,\n          new Token(Type.break)\n        ];\n      }\n      return simpleTokens.emptyArray;\n    }\n    refStack = Ref.createCheck(refStack, obj);\n    const entries = [];\n    let i = 0;\n    for (const e of obj) {\n      entries[i++] = objectToTokens(e, options, refStack);\n    }\n    if (options.addBreakTokens) {\n      return [\n        new Token(Type.array, obj.length),\n        entries,\n        new Token(Type.break)\n      ];\n    }\n    return [\n      new Token(Type.array, obj.length),\n      entries\n    ];\n  },\n  Object(obj, typ, options, refStack) {\n    const isMap = typ !== 'Object';\n    const keys = isMap ? obj.keys() : Object.keys(obj);\n    const length = isMap ? obj.size : keys.length;\n    if (!length) {\n      if (options.addBreakTokens === true) {\n        return [\n          simpleTokens.emptyMap,\n          new Token(Type.break)\n        ];\n      }\n      return simpleTokens.emptyMap;\n    }\n    refStack = Ref.createCheck(refStack, obj);\n    const entries = [];\n    let i = 0;\n    for (const key of keys) {\n      entries[i++] = [\n        objectToTokens(key, options, refStack),\n        objectToTokens(isMap ? obj.get(key) : obj[key], options, refStack)\n      ];\n    }\n    sortMapEntries(entries, options);\n    if (options.addBreakTokens) {\n      return [\n        new Token(Type.map, length),\n        entries,\n        new Token(Type.break)\n      ];\n    }\n    return [\n      new Token(Type.map, length),\n      entries\n    ];\n  }\n};\ntypeEncoders.Map = typeEncoders.Object;\ntypeEncoders.Buffer = typeEncoders.Uint8Array;\nfor (const typ of 'Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64'.split(' ')) {\n  typeEncoders[`${ typ }Array`] = typeEncoders.DataView;\n}\nfunction objectToTokens(obj, options = {}, refStack) {\n  const typ = is(obj);\n  const customTypeEncoder = options && options.typeEncoders && options.typeEncoders[typ] || typeEncoders[typ];\n  if (typeof customTypeEncoder === 'function') {\n    const tokens = customTypeEncoder(obj, typ, options, refStack);\n    if (tokens != null) {\n      return tokens;\n    }\n  }\n  const typeEncoder = typeEncoders[typ];\n  if (!typeEncoder) {\n    throw new Error(`${ encodeErrPrefix } unsupported type: ${ typ }`);\n  }\n  return typeEncoder(obj, typ, options, refStack);\n}\nfunction sortMapEntries(entries, options) {\n  if (options.mapSorter) {\n    entries.sort(options.mapSorter);\n  }\n}\nfunction mapSorter(e1, e2) {\n  const keyToken1 = Array.isArray(e1[0]) ? e1[0][0] : e1[0];\n  const keyToken2 = Array.isArray(e2[0]) ? e2[0][0] : e2[0];\n  if (keyToken1.type !== keyToken2.type) {\n    return keyToken1.type.compare(keyToken2.type);\n  }\n  const major = keyToken1.type.major;\n  const tcmp = cborEncoders[major].compareTokens(keyToken1, keyToken2);\n  if (tcmp === 0) {\n    console.warn('WARNING: complex key types used, CBOR key sorting guarantees are gone');\n  }\n  return tcmp;\n}\nfunction tokensToEncoded(buf, tokens, encoders, options) {\n  if (Array.isArray(tokens)) {\n    for (const token of tokens) {\n      tokensToEncoded(buf, token, encoders, options);\n    }\n  } else {\n    encoders[tokens.type.major](buf, tokens, options);\n  }\n}\nfunction encodeCustom(data, encoders, options) {\n  const tokens = objectToTokens(data, options);\n  if (!Array.isArray(tokens) && options.quickEncodeToken) {\n    const quickBytes = options.quickEncodeToken(tokens);\n    if (quickBytes) {\n      return quickBytes;\n    }\n    const encoder = encoders[tokens.type.major];\n    if (encoder.encodedSize) {\n      const size = encoder.encodedSize(tokens, options);\n      const buf = new Bl(size);\n      encoder(buf, tokens, options);\n      if (buf.chunks.length !== 1) {\n        throw new Error(`Unexpected error: pre-calculated length for ${ tokens } was wrong`);\n      }\n      return asU8A(buf.chunks[0]);\n    }\n  }\n  buf.reset();\n  tokensToEncoded(buf, tokens, encoders, options);\n  return buf.toBytes(true);\n}\nfunction encode(data, options) {\n  options = Object.assign({}, defaultEncodeOptions, options);\n  return encodeCustom(data, cborEncoders, options);\n}\nexport {\n  objectToTokens,\n  encode,\n  encodeCustom,\n  Ref\n};","import { Type } from '../token.js';\nimport { encodeCustom } from '../encode.js';\nimport { encodeErrPrefix } from '../common.js';\nimport {\n  asU8A,\n  fromString\n} from '../byte-utils.js';\nclass JSONEncoder extends Array {\n  constructor() {\n    super();\n    this.inRecursive = [];\n  }\n  prefix(buf) {\n    const recurs = this.inRecursive[this.inRecursive.length - 1];\n    if (recurs) {\n      if (recurs.type === Type.array) {\n        recurs.elements++;\n        if (recurs.elements !== 1) {\n          buf.push([44]);\n        }\n      }\n      if (recurs.type === Type.map) {\n        recurs.elements++;\n        if (recurs.elements !== 1) {\n          if (recurs.elements % 2 === 1) {\n            buf.push([44]);\n          } else {\n            buf.push([58]);\n          }\n        }\n      }\n    }\n  }\n  [Type.uint.major](buf, token) {\n    this.prefix(buf);\n    const is = String(token.value);\n    const isa = [];\n    for (let i = 0; i < is.length; i++) {\n      isa[i] = is.charCodeAt(i);\n    }\n    buf.push(isa);\n  }\n  [Type.negint.major](buf, token) {\n    this[Type.uint.major](buf, token);\n  }\n  [Type.bytes.major](_buf, _token) {\n    throw new Error(`${ encodeErrPrefix } unsupported type: Uint8Array`);\n  }\n  [Type.string.major](buf, token) {\n    this.prefix(buf);\n    const byts = fromString(JSON.stringify(token.value));\n    buf.push(byts.length > 32 ? asU8A(byts) : byts);\n  }\n  [Type.array.major](buf, _token) {\n    this.prefix(buf);\n    this.inRecursive.push({\n      type: Type.array,\n      elements: 0\n    });\n    buf.push([91]);\n  }\n  [Type.map.major](buf, _token) {\n    this.prefix(buf);\n    this.inRecursive.push({\n      type: Type.map,\n      elements: 0\n    });\n    buf.push([123]);\n  }\n  [Type.tag.major](_buf, _token) {\n  }\n  [Type.float.major](buf, token) {\n    if (token.type.name === 'break') {\n      const recurs = this.inRecursive.pop();\n      if (recurs) {\n        if (recurs.type === Type.array) {\n          buf.push([93]);\n        } else if (recurs.type === Type.map) {\n          buf.push([125]);\n        } else {\n          throw new Error('Unexpected recursive type; this should not happen!');\n        }\n        return;\n      }\n      throw new Error('Unexpected break; this should not happen!');\n    }\n    if (token.value === undefined) {\n      throw new Error(`${ encodeErrPrefix } unsupported type: undefined`);\n    }\n    this.prefix(buf);\n    if (token.type.name === 'true') {\n      buf.push([\n        116,\n        114,\n        117,\n        101\n      ]);\n      return;\n    } else if (token.type.name === 'false') {\n      buf.push([\n        102,\n        97,\n        108,\n        115,\n        101\n      ]);\n      return;\n    } else if (token.type.name === 'null') {\n      buf.push([\n        110,\n        117,\n        108,\n        108\n      ]);\n      return;\n    }\n    const is = String(token.value);\n    const isa = [];\n    let dp = false;\n    for (let i = 0; i < is.length; i++) {\n      isa[i] = is.charCodeAt(i);\n      if (!dp && (isa[i] === 46 || isa[i] === 101 || isa[i] === 69)) {\n        dp = true;\n      }\n    }\n    if (!dp) {\n      isa.push(46);\n      isa.push(48);\n    }\n    buf.push(isa);\n  }\n}\nfunction mapSorter(e1, e2) {\n  if (Array.isArray(e1[0]) || Array.isArray(e2[0])) {\n    throw new Error(`${ encodeErrPrefix } complex map keys are not supported`);\n  }\n  const keyToken1 = e1[0];\n  const keyToken2 = e2[0];\n  if (keyToken1.type !== Type.string || keyToken2.type !== Type.string) {\n    throw new Error(`${ encodeErrPrefix } non-string map keys are not supported`);\n  }\n  if (keyToken1 < keyToken2) {\n    return -1;\n  }\n  if (keyToken1 > keyToken2) {\n    return 1;\n  }\n  throw new Error(`${ encodeErrPrefix } unexpected duplicate map keys, this is not supported`);\n}\nconst defaultEncodeOptions = {\n  addBreakTokens: true,\n  mapSorter\n};\nfunction encode(data, options) {\n  options = Object.assign({}, defaultEncodeOptions, options);\n  return encodeCustom(data, new JSONEncoder(), options);\n}\nexport {\n  encode\n};","import { decode as _decode } from '../decode.js';\nimport {\n  Token,\n  Type\n} from '../token.js';\nimport { decodeCodePointsArray } from '../byte-utils.js';\nimport { decodeErrPrefix } from '../common.js';\nclass Tokenizer {\n  constructor(data, options = {}) {\n    this.pos = 0;\n    this.data = data;\n    this.options = options;\n    this.modeStack = ['value'];\n    this.lastToken = '';\n  }\n  done() {\n    return this.pos >= this.data.length;\n  }\n  ch() {\n    return this.data[this.pos];\n  }\n  currentMode() {\n    return this.modeStack[this.modeStack.length - 1];\n  }\n  skipWhitespace() {\n    let c = this.ch();\n    while (c === 32 || c === 9 || c === 13 || c === 10) {\n      c = this.data[++this.pos];\n    }\n  }\n  expect(str) {\n    if (this.data.length - this.pos < str.length) {\n      throw new Error(`${ decodeErrPrefix } unexpected end of input at position ${ this.pos }`);\n    }\n    for (let i = 0; i < str.length; i++) {\n      if (this.data[this.pos++] !== str[i]) {\n        throw new Error(`${ decodeErrPrefix } unexpected token at position ${ this.pos }, expected to find '${ String.fromCharCode(...str) }'`);\n      }\n    }\n  }\n  parseNumber() {\n    const startPos = this.pos;\n    let negative = false;\n    let float = false;\n    const swallow = chars => {\n      while (!this.done()) {\n        const ch = this.ch();\n        if (chars.includes(ch)) {\n          this.pos++;\n        } else {\n          break;\n        }\n      }\n    };\n    if (this.ch() === 45) {\n      negative = true;\n      this.pos++;\n    }\n    if (this.ch() === 48) {\n      this.pos++;\n      if (this.ch() === 46) {\n        this.pos++;\n        float = true;\n      } else {\n        return new Token(Type.uint, 0, this.pos - startPos);\n      }\n    }\n    swallow([\n      48,\n      49,\n      50,\n      51,\n      52,\n      53,\n      54,\n      55,\n      56,\n      57\n    ]);\n    if (negative && this.pos === startPos + 1) {\n      throw new Error(`${ decodeErrPrefix } unexpected token at position ${ this.pos }`);\n    }\n    if (!this.done() && this.ch() === 46) {\n      if (float) {\n        throw new Error(`${ decodeErrPrefix } unexpected token at position ${ this.pos }`);\n      }\n      float = true;\n      this.pos++;\n      swallow([\n        48,\n        49,\n        50,\n        51,\n        52,\n        53,\n        54,\n        55,\n        56,\n        57\n      ]);\n    }\n    if (!this.done() && (this.ch() === 101 || this.ch() === 69)) {\n      float = true;\n      this.pos++;\n      if (!this.done() && (this.ch() === 43 || this.ch() === 45)) {\n        this.pos++;\n      }\n      swallow([\n        48,\n        49,\n        50,\n        51,\n        52,\n        53,\n        54,\n        55,\n        56,\n        57\n      ]);\n    }\n    const numStr = String.fromCharCode.apply(null, this.data.subarray(startPos, this.pos));\n    const num = parseFloat(numStr);\n    if (float) {\n      return new Token(Type.float, num, this.pos - startPos);\n    }\n    if (this.options.allowBigInt !== true || Number.isSafeInteger(num)) {\n      return new Token(num >= 0 ? Type.uint : Type.negint, num, this.pos - startPos);\n    }\n    return new Token(num >= 0 ? Type.uint : Type.negint, BigInt(numStr), this.pos - startPos);\n  }\n  parseString() {\n    if (this.ch() !== 34) {\n      throw new Error(`${ decodeErrPrefix } unexpected character at position ${ this.pos }; this shouldn't happen`);\n    }\n    this.pos++;\n    for (let i = this.pos, l = 0; i < this.data.length && l < 65536; i++, l++) {\n      const ch = this.data[i];\n      if (ch === 92 || ch < 32 || ch >= 128) {\n        break;\n      }\n      if (ch === 34) {\n        const str = String.fromCharCode.apply(null, this.data.subarray(this.pos, i));\n        this.pos = i + 1;\n        return new Token(Type.string, str, l);\n      }\n    }\n    const startPos = this.pos;\n    const chars = [];\n    const readu4 = () => {\n      if (this.pos + 4 >= this.data.length) {\n        throw new Error(`${ decodeErrPrefix } unexpected end of unicode escape sequence at position ${ this.pos }`);\n      }\n      let u4 = 0;\n      for (let i = 0; i < 4; i++) {\n        let ch = this.ch();\n        if (ch >= 48 && ch <= 57) {\n          ch -= 48;\n        } else if (ch >= 97 && ch <= 102) {\n          ch = ch - 97 + 10;\n        } else if (ch >= 65 && ch <= 70) {\n          ch = ch - 65 + 10;\n        } else {\n          throw new Error(`${ decodeErrPrefix } unexpected unicode escape character at position ${ this.pos }`);\n        }\n        u4 = u4 * 16 + ch;\n        this.pos++;\n      }\n      return u4;\n    };\n    const readUtf8Char = () => {\n      const firstByte = this.ch();\n      let codePoint = null;\n      let bytesPerSequence = firstByte > 239 ? 4 : firstByte > 223 ? 3 : firstByte > 191 ? 2 : 1;\n      if (this.pos + bytesPerSequence > this.data.length) {\n        throw new Error(`${ decodeErrPrefix } unexpected unicode sequence at position ${ this.pos }`);\n      }\n      let secondByte, thirdByte, fourthByte, tempCodePoint;\n      switch (bytesPerSequence) {\n      case 1:\n        if (firstByte < 128) {\n          codePoint = firstByte;\n        }\n        break;\n      case 2:\n        secondByte = this.data[this.pos + 1];\n        if ((secondByte & 192) === 128) {\n          tempCodePoint = (firstByte & 31) << 6 | secondByte & 63;\n          if (tempCodePoint > 127) {\n            codePoint = tempCodePoint;\n          }\n        }\n        break;\n      case 3:\n        secondByte = this.data[this.pos + 1];\n        thirdByte = this.data[this.pos + 2];\n        if ((secondByte & 192) === 128 && (thirdByte & 192) === 128) {\n          tempCodePoint = (firstByte & 15) << 12 | (secondByte & 63) << 6 | thirdByte & 63;\n          if (tempCodePoint > 2047 && (tempCodePoint < 55296 || tempCodePoint > 57343)) {\n            codePoint = tempCodePoint;\n          }\n        }\n        break;\n      case 4:\n        secondByte = this.data[this.pos + 1];\n        thirdByte = this.data[this.pos + 2];\n        fourthByte = this.data[this.pos + 3];\n        if ((secondByte & 192) === 128 && (thirdByte & 192) === 128 && (fourthByte & 192) === 128) {\n          tempCodePoint = (firstByte & 15) << 18 | (secondByte & 63) << 12 | (thirdByte & 63) << 6 | fourthByte & 63;\n          if (tempCodePoint > 65535 && tempCodePoint < 1114112) {\n            codePoint = tempCodePoint;\n          }\n        }\n      }\n      if (codePoint === null) {\n        codePoint = 65533;\n        bytesPerSequence = 1;\n      } else if (codePoint > 65535) {\n        codePoint -= 65536;\n        chars.push(codePoint >>> 10 & 1023 | 55296);\n        codePoint = 56320 | codePoint & 1023;\n      }\n      chars.push(codePoint);\n      this.pos += bytesPerSequence;\n    };\n    while (!this.done()) {\n      const ch = this.ch();\n      let ch1;\n      switch (ch) {\n      case 92:\n        this.pos++;\n        if (this.done()) {\n          throw new Error(`${ decodeErrPrefix } unexpected string termination at position ${ this.pos }`);\n        }\n        ch1 = this.ch();\n        this.pos++;\n        switch (ch1) {\n        case 34:\n        case 39:\n        case 92:\n        case 47:\n          chars.push(ch1);\n          break;\n        case 98:\n          chars.push(8);\n          break;\n        case 116:\n          chars.push(9);\n          break;\n        case 110:\n          chars.push(10);\n          break;\n        case 102:\n          chars.push(12);\n          break;\n        case 114:\n          chars.push(13);\n          break;\n        case 117:\n          chars.push(readu4());\n          break;\n        default:\n          throw new Error(`${ decodeErrPrefix } unexpected string escape character at position ${ this.pos }`);\n        }\n        break;\n      case 34:\n        this.pos++;\n        return new Token(Type.string, decodeCodePointsArray(chars), this.pos - startPos);\n      default:\n        if (ch < 32) {\n          throw new Error(`${ decodeErrPrefix } invalid control character at position ${ this.pos }`);\n        } else if (ch < 128) {\n          chars.push(ch);\n          this.pos++;\n        } else {\n          readUtf8Char();\n        }\n      }\n    }\n    throw new Error(`${ decodeErrPrefix } unexpected end of string at position ${ this.pos }`);\n  }\n  parseValue() {\n    switch (this.ch()) {\n    case 123:\n      this.modeStack.push('obj-start');\n      this.pos++;\n      return new Token(Type.map, Infinity, 1);\n    case 91:\n      this.modeStack.push('array-start');\n      this.pos++;\n      return new Token(Type.array, Infinity, 1);\n    case 34: {\n        return this.parseString();\n      }\n    case 110:\n      this.expect([\n        110,\n        117,\n        108,\n        108\n      ]);\n      return new Token(Type.null, null, 4);\n    case 102:\n      this.expect([\n        102,\n        97,\n        108,\n        115,\n        101\n      ]);\n      return new Token(Type.false, false, 5);\n    case 116:\n      this.expect([\n        116,\n        114,\n        117,\n        101\n      ]);\n      return new Token(Type.true, true, 4);\n    case 45:\n    case 48:\n    case 49:\n    case 50:\n    case 51:\n    case 52:\n    case 53:\n    case 54:\n    case 55:\n    case 56:\n    case 57:\n      return this.parseNumber();\n    default:\n      throw new Error(`${ decodeErrPrefix } unexpected character at position ${ this.pos }`);\n    }\n  }\n  next() {\n    this.skipWhitespace();\n    switch (this.currentMode()) {\n    case 'value':\n      this.modeStack.pop();\n      return this.parseValue();\n    case 'array-value': {\n        this.modeStack.pop();\n        if (this.ch() === 93) {\n          this.pos++;\n          this.skipWhitespace();\n          return new Token(Type.break, undefined, 1);\n        }\n        if (this.ch() !== 44) {\n          throw new Error(`${ decodeErrPrefix } unexpected character at position ${ this.pos }, was expecting array delimiter but found '${ String.fromCharCode(this.ch()) }'`);\n        }\n        this.pos++;\n        this.modeStack.push('array-value');\n        this.skipWhitespace();\n        return this.parseValue();\n      }\n    case 'array-start': {\n        this.modeStack.pop();\n        if (this.ch() === 93) {\n          this.pos++;\n          this.skipWhitespace();\n          return new Token(Type.break, undefined, 1);\n        }\n        this.modeStack.push('array-value');\n        this.skipWhitespace();\n        return this.parseValue();\n      }\n    case 'obj-key':\n      if (this.ch() === 125) {\n        this.modeStack.pop();\n        this.pos++;\n        this.skipWhitespace();\n        return new Token(Type.break, undefined, 1);\n      }\n      if (this.ch() !== 44) {\n        throw new Error(`${ decodeErrPrefix } unexpected character at position ${ this.pos }, was expecting object delimiter but found '${ String.fromCharCode(this.ch()) }'`);\n      }\n      this.pos++;\n      this.skipWhitespace();\n    case 'obj-start': {\n        this.modeStack.pop();\n        if (this.ch() === 125) {\n          this.pos++;\n          this.skipWhitespace();\n          return new Token(Type.break, undefined, 1);\n        }\n        const token = this.parseString();\n        this.skipWhitespace();\n        if (this.ch() !== 58) {\n          throw new Error(`${ decodeErrPrefix } unexpected character at position ${ this.pos }, was expecting key/value delimiter ':' but found '${ String.fromCharCode(this.ch()) }'`);\n        }\n        this.pos++;\n        this.modeStack.push('obj-value');\n        return token;\n      }\n    case 'obj-value': {\n        this.modeStack.pop();\n        this.modeStack.push('obj-key');\n        this.skipWhitespace();\n        return this.parseValue();\n      }\n    default:\n      throw new Error(`${ decodeErrPrefix } unexpected parse state at position ${ this.pos }; this shouldn't happen`);\n    }\n  }\n}\nfunction decode(data, options) {\n  options = Object.assign({ tokenizer: new Tokenizer(data, options) }, options);\n  return _decode(data, options);\n}\nexport {\n  decode,\n  Tokenizer\n};","import {\n  Token,\n  Type\n} from './token.js';\nimport * as uint from './0uint.js';\nimport * as negint from './1negint.js';\nimport * as bytes from './2bytes.js';\nimport * as string from './3string.js';\nimport * as array from './4array.js';\nimport * as map from './5map.js';\nimport * as tag from './6tag.js';\nimport * as float from './7float.js';\nimport { decodeErrPrefix } from './common.js';\nimport { fromArray } from './byte-utils.js';\nfunction invalidMinor(data, pos, minor) {\n  throw new Error(`${ decodeErrPrefix } encountered invalid minor (${ minor }) for major ${ data[pos] >>> 5 }`);\n}\nfunction errorer(msg) {\n  return () => {\n    throw new Error(`${ decodeErrPrefix } ${ msg }`);\n  };\n}\nexport const jump = [];\nfor (let i = 0; i <= 23; i++) {\n  jump[i] = invalidMinor;\n}\njump[24] = uint.decodeUint8;\njump[25] = uint.decodeUint16;\njump[26] = uint.decodeUint32;\njump[27] = uint.decodeUint64;\njump[28] = invalidMinor;\njump[29] = invalidMinor;\njump[30] = invalidMinor;\njump[31] = invalidMinor;\nfor (let i = 32; i <= 55; i++) {\n  jump[i] = invalidMinor;\n}\njump[56] = negint.decodeNegint8;\njump[57] = negint.decodeNegint16;\njump[58] = negint.decodeNegint32;\njump[59] = negint.decodeNegint64;\njump[60] = invalidMinor;\njump[61] = invalidMinor;\njump[62] = invalidMinor;\njump[63] = invalidMinor;\nfor (let i = 64; i <= 87; i++) {\n  jump[i] = bytes.decodeBytesCompact;\n}\njump[88] = bytes.decodeBytes8;\njump[89] = bytes.decodeBytes16;\njump[90] = bytes.decodeBytes32;\njump[91] = bytes.decodeBytes64;\njump[92] = invalidMinor;\njump[93] = invalidMinor;\njump[94] = invalidMinor;\njump[95] = errorer('indefinite length bytes/strings are not supported');\nfor (let i = 96; i <= 119; i++) {\n  jump[i] = string.decodeStringCompact;\n}\njump[120] = string.decodeString8;\njump[121] = string.decodeString16;\njump[122] = string.decodeString32;\njump[123] = string.decodeString64;\njump[124] = invalidMinor;\njump[125] = invalidMinor;\njump[126] = invalidMinor;\njump[127] = errorer('indefinite length bytes/strings are not supported');\nfor (let i = 128; i <= 151; i++) {\n  jump[i] = array.decodeArrayCompact;\n}\njump[152] = array.decodeArray8;\njump[153] = array.decodeArray16;\njump[154] = array.decodeArray32;\njump[155] = array.decodeArray64;\njump[156] = invalidMinor;\njump[157] = invalidMinor;\njump[158] = invalidMinor;\njump[159] = array.decodeArrayIndefinite;\nfor (let i = 160; i <= 183; i++) {\n  jump[i] = map.decodeMapCompact;\n}\njump[184] = map.decodeMap8;\njump[185] = map.decodeMap16;\njump[186] = map.decodeMap32;\njump[187] = map.decodeMap64;\njump[188] = invalidMinor;\njump[189] = invalidMinor;\njump[190] = invalidMinor;\njump[191] = map.decodeMapIndefinite;\nfor (let i = 192; i <= 215; i++) {\n  jump[i] = tag.decodeTagCompact;\n}\njump[216] = tag.decodeTag8;\njump[217] = tag.decodeTag16;\njump[218] = tag.decodeTag32;\njump[219] = tag.decodeTag64;\njump[220] = invalidMinor;\njump[221] = invalidMinor;\njump[222] = invalidMinor;\njump[223] = invalidMinor;\nfor (let i = 224; i <= 243; i++) {\n  jump[i] = errorer('simple values are not supported');\n}\njump[244] = invalidMinor;\njump[245] = invalidMinor;\njump[246] = invalidMinor;\njump[247] = float.decodeUndefined;\njump[248] = errorer('simple values are not supported');\njump[249] = float.decodeFloat16;\njump[250] = float.decodeFloat32;\njump[251] = float.decodeFloat64;\njump[252] = invalidMinor;\njump[253] = invalidMinor;\njump[254] = invalidMinor;\njump[255] = float.decodeBreak;\nexport const quick = [];\nfor (let i = 0; i < 24; i++) {\n  quick[i] = new Token(Type.uint, i, 1);\n}\nfor (let i = -1; i >= -24; i--) {\n  quick[31 - i] = new Token(Type.negint, i, 1);\n}\nquick[64] = new Token(Type.bytes, new Uint8Array(0), 1);\nquick[96] = new Token(Type.string, '', 1);\nquick[128] = new Token(Type.array, 0, 1);\nquick[160] = new Token(Type.map, 0, 1);\nquick[244] = new Token(Type.false, false, 1);\nquick[245] = new Token(Type.true, true, 1);\nquick[246] = new Token(Type.null, null, 1);\nexport function quickEncodeToken(token) {\n  switch (token.type) {\n  case Type.false:\n    return fromArray([244]);\n  case Type.true:\n    return fromArray([245]);\n  case Type.null:\n    return fromArray([246]);\n  case Type.bytes:\n    if (!token.value.length) {\n      return fromArray([64]);\n    }\n    return;\n  case Type.string:\n    if (token.value === '') {\n      return fromArray([96]);\n    }\n    return;\n  case Type.array:\n    if (token.value === 0) {\n      return fromArray([128]);\n    }\n    return;\n  case Type.map:\n    if (token.value === 0) {\n      return fromArray([160]);\n    }\n    return;\n  case Type.uint:\n    if (token.value < 24) {\n      return fromArray([Number(token.value)]);\n    }\n    return;\n  case Type.negint:\n    if (token.value >= -24) {\n      return fromArray([31 - Number(token.value)]);\n    }\n  }\n}","class Type {\n  constructor(major, name, terminal) {\n    this.major = major;\n    this.majorEncoded = major << 5;\n    this.name = name;\n    this.terminal = terminal;\n  }\n  toString() {\n    return `Type[${ this.major }].${ this.name }`;\n  }\n  compare(typ) {\n    return this.major < typ.major ? -1 : this.major > typ.major ? 1 : 0;\n  }\n}\nType.uint = new Type(0, 'uint', true);\nType.negint = new Type(1, 'negint', true);\nType.bytes = new Type(2, 'bytes', true);\nType.string = new Type(3, 'string', true);\nType.array = new Type(4, 'array', false);\nType.map = new Type(5, 'map', false);\nType.tag = new Type(6, 'tag', false);\nType.float = new Type(7, 'float', true);\nType.false = new Type(7, 'false', true);\nType.true = new Type(7, 'true', true);\nType.null = new Type(7, 'null', true);\nType.undefined = new Type(7, 'undefined', true);\nType.break = new Type(7, 'break', true);\nclass Token {\n  constructor(type, value, encodedLength) {\n    this.type = type;\n    this.value = value;\n    this.encodedLength = encodedLength;\n    this.encodedBytes = undefined;\n    this.byteValue = undefined;\n  }\n  toString() {\n    return `Token[${ this.type }].${ this.value }`;\n  }\n}\nexport {\n  Type,\n  Token\n};","import { base64url } from 'multiformats/bases/base64';\nexport function toBase64url(b) {\n    return base64url.encode(b).slice(1);\n}\nexport function fromBase64url(s) {\n    return base64url.decode(`u${s}`);\n}\n//# sourceMappingURL=utils.js.map","import { fromBase64url, toBase64url } from './utils.js';\nimport { CID } from 'multiformats/cid';\nexport function fromSplit(split) {\n    const [protectedHeader, payload, signature] = split;\n    return {\n        payload,\n        signatures: [{ protected: protectedHeader, signature }],\n        link: CID.decode(fromBase64url(payload)),\n    };\n}\nfunction encodeSignature(signature) {\n    const encoded = {\n        signature: fromBase64url(signature.signature),\n    };\n    if (signature.header)\n        encoded.header = signature.header;\n    if (signature.protected)\n        encoded.protected = fromBase64url(signature.protected);\n    return encoded;\n}\nexport function encode(jws) {\n    const payload = fromBase64url(jws.payload);\n    try {\n        CID.decode(payload);\n    }\n    catch (e) {\n        throw new Error('Not a valid DagJWS');\n    }\n    return {\n        payload,\n        signatures: jws.signatures.map(encodeSignature),\n    };\n}\nfunction decodeSignature(encoded) {\n    const sign = {\n        signature: toBase64url(encoded.signature),\n    };\n    if (encoded.header)\n        sign.header = encoded.header;\n    if (encoded.protected)\n        sign.protected = toBase64url(encoded.protected);\n    return sign;\n}\nexport function decode(encoded) {\n    const decoded = {\n        payload: toBase64url(encoded.payload),\n        signatures: encoded.signatures.map(decodeSignature),\n    };\n    decoded.link = CID.decode(new Uint8Array(encoded.payload));\n    return decoded;\n}\n//# sourceMappingURL=signing.js.map","import { fromBase64url, toBase64url } from './utils.js';\nexport function fromSplit(split) {\n    const [protectedHeader, encrypted_key, iv, ciphertext, tag] = split;\n    const jwe = {\n        ciphertext,\n        iv,\n        protected: protectedHeader,\n        tag,\n    };\n    if (encrypted_key)\n        jwe.recipients = [{ encrypted_key }];\n    return jwe;\n}\nfunction encodeRecipient(recipient) {\n    const encRec = {};\n    if (recipient.encrypted_key)\n        encRec.encrypted_key = fromBase64url(recipient.encrypted_key);\n    if (recipient.header)\n        encRec.header = recipient.header;\n    return encRec;\n}\nexport function encode(jwe) {\n    const encJwe = {\n        ciphertext: fromBase64url(jwe.ciphertext),\n        protected: fromBase64url(jwe.protected),\n        iv: fromBase64url(jwe.iv),\n        tag: fromBase64url(jwe.tag),\n    };\n    if (jwe.aad)\n        encJwe.aad = fromBase64url(jwe.aad);\n    if (jwe.recipients)\n        encJwe.recipients = jwe.recipients.map(encodeRecipient);\n    if (jwe.unprotected)\n        encJwe.unprotected = jwe.unprotected;\n    return encJwe;\n}\nfunction decodeRecipient(encoded) {\n    const recipient = {};\n    if (encoded.encrypted_key)\n        recipient.encrypted_key = toBase64url(encoded.encrypted_key);\n    if (encoded.header)\n        recipient.header = encoded.header;\n    return recipient;\n}\nexport function decode(encoded) {\n    const jwe = {\n        ciphertext: toBase64url(encoded.ciphertext),\n        protected: toBase64url(encoded.protected),\n        iv: toBase64url(encoded.iv),\n        tag: toBase64url(encoded.tag),\n    };\n    if (encoded.aad)\n        jwe.aad = toBase64url(encoded.aad);\n    if (encoded.recipients)\n        jwe.recipients = encoded.recipients.map(decodeRecipient);\n    if (encoded.unprotected)\n        jwe.unprotected = encoded.unprotected;\n    return jwe;\n}\n//# sourceMappingURL=encryption.js.map","import * as signing from './signing.js';\nimport * as encryption from './encryption.js';\nimport * as cbor from '@ipld/dag-cbor';\nexport const name = 'dag-jose';\nexport const code = 133;\nfunction isDagJWS(jose) {\n    return ('payload' in jose &&\n        typeof jose.payload === 'string' &&\n        'signatures' in jose &&\n        Array.isArray(jose.signatures));\n}\nfunction isEncodedJWS(jose) {\n    return ('payload' in jose &&\n        jose.payload instanceof Uint8Array &&\n        'signatures' in jose &&\n        Array.isArray(jose.signatures));\n}\nfunction isEncodedJWE(jose) {\n    return ('ciphertext' in jose &&\n        jose.ciphertext instanceof Uint8Array &&\n        'iv' in jose &&\n        jose.iv instanceof Uint8Array &&\n        'protected' in jose &&\n        jose.protected instanceof Uint8Array &&\n        'tag' in jose &&\n        jose.tag instanceof Uint8Array);\n}\nfunction isDagJWE(jose) {\n    return ('ciphertext' in jose &&\n        typeof jose.ciphertext === 'string' &&\n        'iv' in jose &&\n        typeof jose.iv === 'string' &&\n        'protected' in jose &&\n        typeof jose.protected === 'string' &&\n        'tag' in jose &&\n        typeof jose.tag === 'string');\n}\nexport function toGeneral(jose) {\n    if (typeof jose === 'string') {\n        const split = jose.split('.');\n        if (split.length === 3) {\n            return signing.fromSplit(split);\n        }\n        else if (split.length === 5) {\n            return encryption.fromSplit(split);\n        }\n        throw new Error('Not a valid JOSE string');\n    }\n    if (isDagJWS(jose) || isDagJWE(jose)) {\n        return jose;\n    }\n    throw new Error('Not a valid unencoded JOSE object');\n}\nexport function encode(obj) {\n    if (typeof obj === 'string') {\n        obj = toGeneral(obj);\n    }\n    let encodedJose;\n    if (isDagJWS(obj)) {\n        encodedJose = signing.encode(obj);\n    }\n    else if (isDagJWE(obj)) {\n        encodedJose = encryption.encode(obj);\n    }\n    else {\n        throw new Error('Not a valid JOSE object');\n    }\n    return new Uint8Array(cbor.encode(encodedJose));\n}\nexport function decode(data) {\n    let encoded;\n    try {\n        encoded = cbor.decode(data);\n    }\n    catch (e) {\n        throw new Error('Not a valid DAG-JOSE object');\n    }\n    if (isEncodedJWS(encoded)) {\n        return signing.decode(encoded);\n    }\n    else if (isEncodedJWE(encoded)) {\n        return encryption.decode(encoded);\n    }\n    else {\n        throw new Error('Not a valid DAG-JOSE object');\n    }\n}\n//# sourceMappingURL=index.js.map","function isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction drain(source) {\n    if (isAsyncIterable(source)) {\n        return (async () => {\n            for await (const _ of source) { } // eslint-disable-line no-unused-vars,no-empty,@typescript-eslint/no-unused-vars\n        })();\n    }\n    else {\n        for (const _ of source) { } // eslint-disable-line no-unused-vars,no-empty,@typescript-eslint/no-unused-vars\n    }\n}\nexport default drain;\n//# sourceMappingURL=index.js.map","import peek from 'it-peekable';\nfunction isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction filter(source, fn) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            for await (const entry of source) {\n                if (await fn(entry)) {\n                    yield entry;\n                }\n            }\n        })();\n    }\n    // if mapping function returns a promise we have to return an async generator\n    const peekable = peek(source);\n    const { value, done } = peekable.next();\n    if (done === true) {\n        return (function* () { }());\n    }\n    const res = fn(value);\n    // @ts-expect-error .then is not present on O\n    if (typeof res.then === 'function') {\n        return (async function* () {\n            if (await res) {\n                yield value;\n            }\n            for await (const entry of peekable) {\n                if (await fn(entry)) {\n                    yield entry;\n                }\n            }\n        })();\n    }\n    const func = fn;\n    return (function* () {\n        if (res === true) {\n            yield value;\n        }\n        for (const entry of peekable) {\n            if (func(entry)) {\n                yield entry;\n            }\n        }\n    })();\n}\nexport default filter;\n//# sourceMappingURL=index.js.map","function isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction all(source) {\n    if (isAsyncIterable(source)) {\n        return (async () => {\n            const arr = [];\n            for await (const entry of source) {\n                arr.push(entry);\n            }\n            return arr;\n        })();\n    }\n    const arr = [];\n    for (const entry of source) {\n        arr.push(entry);\n    }\n    return arr;\n}\nexport default all;\n//# sourceMappingURL=index.js.map","import all from 'it-all';\nfunction isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction sort(source, sorter) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            const arr = await all(source);\n            yield* arr.sort(sorter);\n        })();\n    }\n    return (function* () {\n        const arr = all(source);\n        yield* arr.sort(sorter);\n    })();\n}\nexport default sort;\n//# sourceMappingURL=index.js.map","function isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction take(source, limit) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            let items = 0;\n            if (limit < 1) {\n                return;\n            }\n            for await (const entry of source) {\n                yield entry;\n                items++;\n                if (items === limit) {\n                    return;\n                }\n            }\n        })();\n    }\n    return (function* () {\n        let items = 0;\n        if (limit < 1) {\n            return;\n        }\n        for (const entry of source) {\n            yield entry;\n            items++;\n            if (items === limit) {\n                return;\n            }\n        }\n    })();\n}\nexport default take;\n//# sourceMappingURL=index.js.map","import drain from 'it-drain';\nimport filter from 'it-filter';\nimport sort from 'it-sort';\nimport take from 'it-take';\nexport class BaseDatastore {\n    put(key, val, options) {\n        return Promise.reject(new Error('.put is not implemented'));\n    }\n    get(key, options) {\n        return Promise.reject(new Error('.get is not implemented'));\n    }\n    has(key, options) {\n        return Promise.reject(new Error('.has is not implemented'));\n    }\n    delete(key, options) {\n        return Promise.reject(new Error('.delete is not implemented'));\n    }\n    async *putMany(source, options = {}) {\n        for await (const { key, value } of source) {\n            await this.put(key, value, options);\n            yield key;\n        }\n    }\n    async *getMany(source, options = {}) {\n        for await (const key of source) {\n            yield {\n                key,\n                value: await this.get(key, options)\n            };\n        }\n    }\n    async *deleteMany(source, options = {}) {\n        for await (const key of source) {\n            await this.delete(key, options);\n            yield key;\n        }\n    }\n    batch() {\n        let puts = [];\n        let dels = [];\n        return {\n            put(key, value) {\n                puts.push({ key, value });\n            },\n            delete(key) {\n                dels.push(key);\n            },\n            commit: async (options) => {\n                await drain(this.putMany(puts, options));\n                puts = [];\n                await drain(this.deleteMany(dels, options));\n                dels = [];\n            }\n        };\n    }\n    /**\n     * Extending classes should override `query` or implement this method\n     */\n    // eslint-disable-next-line require-yield\n    async *_all(q, options) {\n        throw new Error('._all is not implemented');\n    }\n    /**\n     * Extending classes should override `queryKeys` or implement this method\n     */\n    // eslint-disable-next-line require-yield\n    async *_allKeys(q, options) {\n        throw new Error('._allKeys is not implemented');\n    }\n    query(q, options) {\n        let it = this._all(q, options);\n        if (q.prefix != null) {\n            const prefix = q.prefix;\n            it = filter(it, (e) => e.key.toString().startsWith(prefix));\n        }\n        if (Array.isArray(q.filters)) {\n            it = q.filters.reduce((it, f) => filter(it, f), it);\n        }\n        if (Array.isArray(q.orders)) {\n            it = q.orders.reduce((it, f) => sort(it, f), it);\n        }\n        if (q.offset != null) {\n            let i = 0;\n            const offset = q.offset;\n            it = filter(it, () => i++ >= offset);\n        }\n        if (q.limit != null) {\n            it = take(it, q.limit);\n        }\n        return it;\n    }\n    queryKeys(q, options) {\n        let it = this._allKeys(q, options);\n        if (q.prefix != null) {\n            const prefix = q.prefix;\n            it = filter(it, (key) => key.toString().startsWith(prefix));\n        }\n        if (Array.isArray(q.filters)) {\n            it = q.filters.reduce((it, f) => filter(it, f), it);\n        }\n        if (Array.isArray(q.orders)) {\n            it = q.orders.reduce((it, f) => sort(it, f), it);\n        }\n        if (q.offset != null) {\n            const offset = q.offset;\n            let i = 0;\n            it = filter(it, () => i++ >= offset);\n        }\n        if (q.limit != null) {\n            it = take(it, q.limit);\n        }\n        return it;\n    }\n}\n//# sourceMappingURL=base.js.map","import errCode from 'err-code';\nexport function dbOpenFailedError(err) {\n    err = err ?? new Error('Cannot open database');\n    return errCode(err, 'ERR_DB_OPEN_FAILED');\n}\nexport function dbDeleteFailedError(err) {\n    err = err ?? new Error('Delete failed');\n    return errCode(err, 'ERR_DB_DELETE_FAILED');\n}\nexport function dbWriteFailedError(err) {\n    err = err ?? new Error('Write failed');\n    return errCode(err, 'ERR_DB_WRITE_FAILED');\n}\nexport function dbReadFailedError(err) {\n    err = err ?? new Error('Read failed');\n    return errCode(err, 'ERR_DB_READ_FAILED');\n}\nexport function notFoundError(err) {\n    err = err ?? new Error('Not Found');\n    return errCode(err, 'ERR_NOT_FOUND');\n}\nexport function abortedError(err) {\n    err = err ?? new Error('Aborted');\n    return errCode(err, 'ERR_ABORTED');\n}\n//# sourceMappingURL=errors.js.map","import { Key } from 'interface-datastore/key';\nimport { BaseDatastore } from './base.js';\nimport * as Errors from './errors.js';\nexport class MemoryDatastore extends BaseDatastore {\n    data;\n    constructor() {\n        super();\n        this.data = new Map();\n    }\n    put(key, val) {\n        this.data.set(key.toString(), val);\n        return key;\n    }\n    get(key) {\n        const result = this.data.get(key.toString());\n        if (result == null) {\n            throw Errors.notFoundError();\n        }\n        return result;\n    }\n    has(key) {\n        return this.data.has(key.toString());\n    }\n    delete(key) {\n        this.data.delete(key.toString());\n    }\n    *_all() {\n        for (const [key, value] of this.data.entries()) {\n            yield { key: new Key(key), value };\n        }\n    }\n    *_allKeys() {\n        for (const key of this.data.keys()) {\n            yield new Key(key);\n        }\n    }\n}\n//# sourceMappingURL=memory.js.map","import { nanoid } from 'nanoid';\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nconst pathSepS = '/';\nconst pathSepB = new TextEncoder().encode(pathSepS);\nconst pathSep = pathSepB[0];\n/**\n * A Key represents the unique identifier of an object.\n * Our Key scheme is inspired by file systems and Google App Engine key model.\n * Keys are meant to be unique across a system. Keys are hierarchical,\n * incorporating more and more specific namespaces. Thus keys can be deemed\n * 'children' or 'ancestors' of other keys:\n * - `new Key('/Comedy')`\n * - `new Key('/Comedy/MontyPython')`\n * Also, every namespace can be parametrized to embed relevant object\n * information. For example, the Key `name` (most specific namespace) could\n * include the object type:\n * - `new Key('/Comedy/MontyPython/Actor:JohnCleese')`\n * - `new Key('/Comedy/MontyPython/Sketch:CheeseShop')`\n * - `new Key('/Comedy/MontyPython/Sketch:CheeseShop/Character:Mousebender')`\n *\n */\nexport class Key {\n    /**\n     * @param {string | Uint8Array} s\n     * @param {boolean} [clean]\n     */\n    constructor(s, clean) {\n        if (typeof s === 'string') {\n            this._buf = uint8ArrayFromString(s);\n        }\n        else if (s instanceof Uint8Array) {\n            this._buf = s;\n        }\n        else {\n            throw new Error('Invalid key, should be String of Uint8Array');\n        }\n        if (clean == null) {\n            clean = true;\n        }\n        if (clean) {\n            this.clean();\n        }\n        if (this._buf.byteLength === 0 || this._buf[0] !== pathSep) {\n            throw new Error('Invalid key');\n        }\n    }\n    /**\n     * Convert to the string representation\n     *\n     * @param {import('uint8arrays/to-string').SupportedEncodings} [encoding='utf8'] - The encoding to use.\n     * @returns {string}\n     */\n    toString(encoding = 'utf8') {\n        return uint8ArrayToString(this._buf, encoding);\n    }\n    /**\n     * Return the Uint8Array representation of the key\n     *\n     * @returns {Uint8Array}\n     */\n    uint8Array() {\n        return this._buf;\n    }\n    /**\n     * Return string representation of the key\n     *\n     * @returns {string}\n     */\n    get [Symbol.toStringTag]() {\n        return `Key(${this.toString()})`;\n    }\n    /**\n     * Constructs a key out of a namespace array.\n     *\n     * @param {Array<string>} list - The array of namespaces\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * Key.withNamespaces(['one', 'two'])\n     * // => Key('/one/two')\n     * ```\n     */\n    static withNamespaces(list) {\n        return new Key(list.join(pathSepS));\n    }\n    /**\n     * Returns a randomly (uuid) generated key.\n     *\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * Key.random()\n     * // => Key('/f98719ea086343f7b71f32ea9d9d521d')\n     * ```\n     */\n    static random() {\n        return new Key(nanoid().replace(/-/g, ''));\n    }\n    /**\n     * @param {*} other\n     */\n    static asKey(other) {\n        if (other instanceof Uint8Array || typeof other === 'string') {\n            // we can create a key from this\n            return new Key(other);\n        }\n        if (typeof other.uint8Array === 'function') {\n            // this is an older version or may have crossed the esm/cjs boundary\n            return new Key(other.uint8Array());\n        }\n        return null;\n    }\n    /**\n     * Cleanup the current key\n     *\n     * @returns {void}\n     */\n    clean() {\n        if (this._buf == null || this._buf.byteLength === 0) {\n            this._buf = pathSepB;\n        }\n        if (this._buf[0] !== pathSep) {\n            const bytes = new Uint8Array(this._buf.byteLength + 1);\n            bytes.fill(pathSep, 0, 1);\n            bytes.set(this._buf, 1);\n            this._buf = bytes;\n        }\n        // normalize does not remove trailing slashes\n        while (this._buf.byteLength > 1 && this._buf[this._buf.byteLength - 1] === pathSep) {\n            this._buf = this._buf.subarray(0, -1);\n        }\n    }\n    /**\n     * Check if the given key is sorted lower than ourself.\n     *\n     * @param {Key} key - The other Key to check against\n     * @returns {boolean}\n     */\n    less(key) {\n        const list1 = this.list();\n        const list2 = key.list();\n        for (let i = 0; i < list1.length; i++) {\n            if (list2.length < i + 1) {\n                return false;\n            }\n            const c1 = list1[i];\n            const c2 = list2[i];\n            if (c1 < c2) {\n                return true;\n            }\n            else if (c1 > c2) {\n                return false;\n            }\n        }\n        return list1.length < list2.length;\n    }\n    /**\n     * Returns the key with all parts in reversed order.\n     *\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor:JohnCleese').reverse()\n     * // => Key('/Actor:JohnCleese/MontyPython/Comedy')\n     * ```\n     */\n    reverse() {\n        return Key.withNamespaces(this.list().slice().reverse());\n    }\n    /**\n     * Returns the `namespaces` making up this Key.\n     *\n     * @returns {Array<string>}\n     */\n    namespaces() {\n        return this.list();\n    }\n    /** Returns the \"base\" namespace of this key.\n     *\n     * @returns {string}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor:JohnCleese').baseNamespace()\n     * // => 'Actor:JohnCleese'\n     * ```\n     */\n    baseNamespace() {\n        const ns = this.namespaces();\n        return ns[ns.length - 1];\n    }\n    /**\n     * Returns the `list` representation of this key.\n     *\n     * @returns {Array<string>}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor:JohnCleese').list()\n     * // => ['Comedy', 'MontyPythong', 'Actor:JohnCleese']\n     * ```\n     */\n    list() {\n        return this.toString().split(pathSepS).slice(1);\n    }\n    /**\n     * Returns the \"type\" of this key (value of last namespace).\n     *\n     * @returns {string}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor:JohnCleese').type()\n     * // => 'Actor'\n     * ```\n     */\n    type() {\n        return namespaceType(this.baseNamespace());\n    }\n    /**\n     * Returns the \"name\" of this key (field of last namespace).\n     *\n     * @returns {string}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor:JohnCleese').name()\n     * // => 'JohnCleese'\n     * ```\n     */\n    name() {\n        return namespaceValue(this.baseNamespace());\n    }\n    /**\n     * Returns an \"instance\" of this type key (appends value to namespace).\n     *\n     * @param {string} s - The string to append.\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor').instance('JohnClesse')\n     * // => Key('/Comedy/MontyPython/Actor:JohnCleese')\n     * ```\n     */\n    instance(s) {\n        return new Key(this.toString() + ':' + s);\n    }\n    /**\n     * Returns the \"path\" of this key (parent + type).\n     *\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor:JohnCleese').path()\n     * // => Key('/Comedy/MontyPython/Actor')\n     * ```\n     */\n    path() {\n        let p = this.parent().toString();\n        if (!p.endsWith(pathSepS)) {\n            p += pathSepS;\n        }\n        p += this.type();\n        return new Key(p);\n    }\n    /**\n     * Returns the `parent` Key of this Key.\n     *\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * new Key(\"/Comedy/MontyPython/Actor:JohnCleese\").parent()\n     * // => Key(\"/Comedy/MontyPython\")\n     * ```\n     */\n    parent() {\n        const list = this.list();\n        if (list.length === 1) {\n            return new Key(pathSepS);\n        }\n        return new Key(list.slice(0, -1).join(pathSepS));\n    }\n    /**\n     * Returns the `child` Key of this Key.\n     *\n     * @param {Key} key - The child Key to add\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython').child(new Key('Actor:JohnCleese'))\n     * // => Key('/Comedy/MontyPython/Actor:JohnCleese')\n     * ```\n     */\n    child(key) {\n        if (this.toString() === pathSepS) {\n            return key;\n        }\n        else if (key.toString() === pathSepS) {\n            return this;\n        }\n        return new Key(this.toString() + key.toString(), false);\n    }\n    /**\n     * Returns whether this key is a prefix of `other`\n     *\n     * @param {Key} other - The other key to test against\n     * @returns {boolean}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy').isAncestorOf('/Comedy/MontyPython')\n     * // => true\n     * ```\n     */\n    isAncestorOf(other) {\n        if (other.toString() === this.toString()) {\n            return false;\n        }\n        return other.toString().startsWith(this.toString());\n    }\n    /**\n     * Returns whether this key is a contains another as prefix.\n     *\n     * @param {Key} other - The other Key to test against\n     * @returns {boolean}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython').isDecendantOf('/Comedy')\n     * // => true\n     * ```\n     */\n    isDecendantOf(other) {\n        if (other.toString() === this.toString()) {\n            return false;\n        }\n        return this.toString().startsWith(other.toString());\n    }\n    /**\n     * Checks if this key has only one namespace.\n     *\n     * @returns {boolean}\n     *\n     */\n    isTopLevel() {\n        return this.list().length === 1;\n    }\n    /**\n     * Concats one or more Keys into one new Key.\n     *\n     * @param {Array<Key>} keys - The array of keys to concatenate\n     * @returns {Key}\n     */\n    concat(...keys) {\n        return Key.withNamespaces([...this.namespaces(), ...flatten(keys.map(key => key.namespaces()))]);\n    }\n}\n/**\n * The first component of a namespace. `foo` in `foo:bar`\n *\n * @param {string} ns\n * @returns {string}\n */\nfunction namespaceType(ns) {\n    const parts = ns.split(':');\n    if (parts.length < 2) {\n        return '';\n    }\n    return parts.slice(0, -1).join(':');\n}\n/**\n * The last component of a namespace, `baz` in `foo:bar:baz`.\n *\n * @param {string} ns\n * @returns {string}\n */\nfunction namespaceValue(ns) {\n    const parts = ns.split(':');\n    return parts[parts.length - 1];\n}\n/**\n * Flatten array of arrays (only one level)\n *\n * @template T\n * @param {Array<any>} arr\n * @returns {T[]}\n */\nfunction flatten(arr) {\n    return ([]).concat(...arr);\n}\n//# sourceMappingURL=key.js.map","import peek from 'it-peekable';\nfunction isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction filter(source, fn) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            for await (const entry of source) {\n                if (await fn(entry)) {\n                    yield entry;\n                }\n            }\n        })();\n    }\n    // if mapping function returns a promise we have to return an async generator\n    const peekable = peek(source);\n    const { value, done } = peekable.next();\n    if (done === true) {\n        return (function* () { }());\n    }\n    const res = fn(value);\n    // @ts-expect-error .then is not present on O\n    if (typeof res.then === 'function') {\n        return (async function* () {\n            if (await res) {\n                yield value;\n            }\n            for await (const entry of peekable) {\n                if (await fn(entry)) {\n                    yield entry;\n                }\n            }\n        })();\n    }\n    const func = fn;\n    return (function* () {\n        if (res === true) {\n            yield value;\n        }\n        for (const entry of peekable) {\n            if (func(entry)) {\n                yield entry;\n            }\n        }\n    })();\n}\nexport default filter;\n//# sourceMappingURL=index.js.map","function isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction all(source) {\n    if (isAsyncIterable(source)) {\n        return (async () => {\n            const arr = [];\n            for await (const entry of source) {\n                arr.push(entry);\n            }\n            return arr;\n        })();\n    }\n    const arr = [];\n    for (const entry of source) {\n        arr.push(entry);\n    }\n    return arr;\n}\nexport default all;\n//# sourceMappingURL=index.js.map","import all from 'it-all';\nfunction isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction sort(source, sorter) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            const arr = await all(source);\n            yield* arr.sort(sorter);\n        })();\n    }\n    return (function* () {\n        const arr = all(source);\n        yield* arr.sort(sorter);\n    })();\n}\nexport default sort;\n//# sourceMappingURL=index.js.map","import { Errors, BaseDatastore } from 'datastore-core';\nimport { openDB, deleteDB } from 'idb';\nimport { Key } from 'interface-datastore';\nimport filter from 'it-filter';\nimport sort from 'it-sort';\nexport class IDBDatastore extends BaseDatastore {\n    location;\n    version;\n    db;\n    constructor(location, init = {}) {\n        super();\n        this.location = `${init.prefix ?? ''}${location}`;\n        this.version = init.version ?? 1;\n    }\n    async open() {\n        try {\n            const location = this.location;\n            this.db = await openDB(location, this.version, {\n                upgrade(db) {\n                    db.createObjectStore(location);\n                }\n            });\n        }\n        catch (err) {\n            throw Errors.dbOpenFailedError(err);\n        }\n    }\n    async close() {\n        this.db?.close();\n    }\n    async put(key, val) {\n        if (this.db == null) {\n            throw new Error('Datastore needs to be opened.');\n        }\n        try {\n            await this.db.put(this.location, val, key.toString());\n            return key;\n        }\n        catch (err) {\n            throw Errors.dbWriteFailedError(err);\n        }\n    }\n    async get(key) {\n        if (this.db == null) {\n            throw new Error('Datastore needs to be opened.');\n        }\n        let val;\n        try {\n            val = await this.db.get(this.location, key.toString());\n        }\n        catch (err) {\n            throw Errors.dbReadFailedError(err);\n        }\n        if (val === undefined) {\n            throw Errors.notFoundError();\n        }\n        return val;\n    }\n    async has(key) {\n        if (this.db == null) {\n            throw new Error('Blockstore needs to be opened.');\n        }\n        try {\n            return Boolean(await this.db.getKey(this.location, key.toString()));\n        }\n        catch (err) {\n            throw Errors.dbReadFailedError(err);\n        }\n    }\n    async delete(key) {\n        if (this.db == null) {\n            throw new Error('Datastore needs to be opened.');\n        }\n        try {\n            await this.db.delete(this.location, key.toString());\n        }\n        catch (err) {\n            throw Errors.dbWriteFailedError(err);\n        }\n    }\n    batch() {\n        const puts = [];\n        const dels = [];\n        return {\n            put(key, value) {\n                puts.push({ key, value });\n            },\n            delete(key) {\n                dels.push(key);\n            },\n            commit: async () => {\n                if (this.db == null) {\n                    throw new Error('Datastore needs to be opened.');\n                }\n                const tx = this.db.transaction(this.location, 'readwrite');\n                try {\n                    const ops = puts.filter(({ key }) => {\n                        // don't put a key we are about to delete\n                        return dels.find(delKey => delKey.toString() === key.toString()) == null;\n                    })\n                        .map(put => {\n                        return async () => {\n                            await tx.store.put(put.value, put.key.toString());\n                        };\n                    })\n                        .concat(dels.map(key => {\n                        return async () => {\n                            await tx.store.delete(key.toString());\n                        };\n                    }))\n                        .concat(async () => {\n                        await tx.done;\n                    });\n                    await Promise.all(ops.map(async (op) => { await op(); }));\n                }\n                catch {\n                    tx.abort();\n                }\n            }\n        };\n    }\n    async *query(q) {\n        let it = this.#queryIt(q, (key, value) => {\n            return { key, value };\n        });\n        if (Array.isArray(q.filters)) {\n            it = q.filters.reduce((it, f) => filter(it, f), it);\n        }\n        if (Array.isArray(q.orders)) {\n            it = q.orders.reduce((it, f) => sort(it, f), it);\n        }\n        yield* it;\n    }\n    async *queryKeys(q) {\n        let it = this.#queryIt(q, (key) => key);\n        if (Array.isArray(q.filters)) {\n            it = q.filters.reduce((it, f) => filter(it, f), it);\n        }\n        if (Array.isArray(q.orders)) {\n            it = q.orders.reduce((it, f) => sort(it, f), it);\n        }\n        yield* it;\n    }\n    async *#queryIt(q, transform) {\n        if (this.db == null) {\n            throw new Error('Datastore needs to be opened.');\n        }\n        let yielded = 0;\n        let index = -1;\n        for (const key of await this.db.getAllKeys(this.location)) {\n            if (q.prefix != null && !key.toString().startsWith(q.prefix)) { // eslint-disable-line @typescript-eslint/no-base-to-string\n                continue;\n            }\n            if (q.limit != null && yielded === q.limit) {\n                return;\n            }\n            index++;\n            if (q.offset != null && index < q.offset) {\n                continue;\n            }\n            const k = new Key(key.toString()); // eslint-disable-line @typescript-eslint/no-base-to-string\n            let value;\n            try {\n                value = await this.get(k);\n            }\n            catch (err) {\n                if (err.code !== 'ERR_NOT_FOUND') {\n                    throw err;\n                }\n                continue;\n            }\n            if (value == null) {\n                continue;\n            }\n            yield transform(k, value);\n            yielded++;\n        }\n    }\n    async destroy() {\n        await deleteDB(this.location);\n    }\n}\n//# sourceMappingURL=index.js.map","import { Key } from 'interface-datastore/key'\n// @ts-expect-error readme is unused\n// eslint-disable-next-line no-unused-vars\nimport readme from './shard-readme.js'\n\n/**\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('./types').Shard} Shard\n */\n\nexport const PREFIX = '/repo/flatfs/shard/'\nexport const SHARDING_FN = 'SHARDING'\nexport const README_FN = '_README'\n\n/**\n * @implements {Shard}\n */\nexport class ShardBase {\n  /**\n   * @param {any} param\n   */\n  constructor (param) {\n    this.param = param\n    this.name = 'base'\n    this._padding = ''\n  }\n\n  /**\n   * @param {string} s\n   */\n  fun (s) {\n    return 'implement me'\n  }\n\n  toString () {\n    return `${PREFIX}v1/${this.name}/${this.param}`\n  }\n}\n/**\n * @implements {Shard}\n */\nexport class Prefix extends ShardBase {\n  /**\n   * @param {number} prefixLen\n   */\n  constructor (prefixLen) {\n    super(prefixLen)\n    this._padding = ''.padStart(prefixLen, '_')\n    this.name = 'prefix'\n  }\n\n  /**\n   * @param {string} noslash\n   */\n  fun (noslash) {\n    return (noslash + this._padding).slice(0, this.param)\n  }\n}\n\nexport class Suffix extends ShardBase {\n  /**\n   * @param {number} suffixLen\n   */\n  constructor (suffixLen) {\n    super(suffixLen)\n    this._padding = ''.padStart(suffixLen, '_')\n    this.name = 'suffix'\n  }\n\n  /**\n   * @param {string} noslash\n   */\n  fun (noslash) {\n    const s = this._padding + noslash\n    return s.slice(s.length - this.param)\n  }\n}\n\nexport class NextToLast extends ShardBase {\n  /**\n   * @param {number} suffixLen\n   */\n  constructor (suffixLen) {\n    super(suffixLen)\n    this._padding = ''.padStart(suffixLen + 1, '_')\n    this.name = 'next-to-last'\n  }\n\n  /**\n   * @param {string} noslash\n   */\n  fun (noslash) {\n    const s = this._padding + noslash\n    const offset = s.length - this.param - 1\n    return s.slice(offset, offset + this.param)\n  }\n}\n\n/**\n * Convert a given string to the matching sharding function.\n *\n * @param {string} str\n * @returns {Shard}\n */\nexport function parseShardFun (str) {\n  str = str.trim()\n\n  if (str.length === 0) {\n    throw new Error('empty shard string')\n  }\n\n  if (!str.startsWith(PREFIX)) {\n    throw new Error(`invalid or no path prefix: ${str}`)\n  }\n\n  const parts = str.slice(PREFIX.length).split('/')\n  const version = parts[0]\n\n  if (version !== 'v1') {\n    throw new Error(`expect 'v1' version, got '${version}'`)\n  }\n\n  const name = parts[1]\n\n  if (!parts[2]) {\n    throw new Error('missing param')\n  }\n\n  const param = parseInt(parts[2], 10)\n\n  switch (name) {\n    case 'prefix':\n      return new Prefix(param)\n    case 'suffix':\n      return new Suffix(param)\n    case 'next-to-last':\n      return new NextToLast(param)\n    default:\n      throw new Error(`unkown sharding function: ${name}`)\n  }\n}\n\n/**\n * @param {string | Uint8Array} path\n * @param {Datastore} store\n */\nexport const readShardFun = async (path, store) => {\n  const key = new Key(path).child(new Key(SHARDING_FN))\n  // @ts-ignore\n  const get = typeof store.getRaw === 'function' ? store.getRaw.bind(store) : store.get.bind(store)\n  const res = await get(key)\n  return parseShardFun(new TextDecoder().decode(res || '').trim())\n}\n\nexport { default as readme } from './shard-readme.js'\n","\nimport all from 'it-all'\n\n/**\n * Collect all values from the iterable and sort them using\n * the passed sorter function\n *\n * @template T\n * @param {AsyncIterable<T> | Iterable<T>} iterable\n * @param {(a: T, b: T) => -1 | 0 | 1} sorter\n * @returns {AsyncIterable<T>}\n */\nexport const sortAll = (iterable, sorter) => {\n  return (async function * () {\n    const values = await all(iterable)\n    yield * values.sort(sorter)\n  })()\n}\n\n/**\n * @param {string} s\n * @param {string} r\n */\nexport const replaceStartWith = (s, r) => {\n  const matcher = new RegExp('^' + r)\n  return s.replace(matcher, '')\n}\n","/**\n * Collects all values from an (async) iterable and returns them as an array\n */\nexport default async function all(source) {\n    const arr = [];\n    for await (const entry of source) {\n        arr.push(entry);\n    }\n    return arr;\n}\n//# sourceMappingURL=index.js.map","import { sortAll } from './utils.js'\nimport drain from 'it-drain'\nimport filter from 'it-filter'\nimport take from 'it-take'\n\n/**\n * @typedef {import('interface-store').Options} Options\n * @typedef {import('interface-datastore').Key} Key\n * @typedef {import('interface-datastore').Pair} Pair\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('interface-datastore').Query} Query\n * @typedef {import('interface-datastore').KeyQuery} KeyQuery\n * @typedef {import('interface-datastore').Batch} Batch\n */\n\n/**\n * @template O\n * @typedef {import('interface-store').AwaitIterable<O>} AwaitIterable\n */\n\n/**\n * @implements {Datastore}\n */\nexport class BaseDatastore {\n  /**\n   * @returns {Promise<void>}\n   */\n  open () {\n    return Promise.reject(new Error('.open is not implemented'))\n  }\n\n  /**\n   * @returns {Promise<void>}\n   */\n  close () {\n    return Promise.reject(new Error('.close is not implemented'))\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Uint8Array} val\n   * @param {Options} [options]\n   * @returns {Promise<void>}\n   */\n  put (key, val, options) {\n    return Promise.reject(new Error('.put is not implemented'))\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   * @returns {Promise<Uint8Array>}\n   */\n  get (key, options) {\n    return Promise.reject(new Error('.get is not implemented'))\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   * @returns {Promise<boolean>}\n   */\n  has (key, options) {\n    return Promise.reject(new Error('.has is not implemented'))\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   * @returns {Promise<void>}\n   */\n  delete (key, options) {\n    return Promise.reject(new Error('.delete is not implemented'))\n  }\n\n  /**\n   * @param {AwaitIterable<Pair>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Pair>}\n   */\n  async * putMany (source, options = {}) {\n    for await (const { key, value } of source) {\n      await this.put(key, value, options)\n      yield { key, value }\n    }\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Uint8Array>}\n   */\n  async * getMany (source, options = {}) {\n    for await (const key of source) {\n      yield this.get(key, options)\n    }\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Key>}\n   */\n  async * deleteMany (source, options = {}) {\n    for await (const key of source) {\n      await this.delete(key, options)\n      yield key\n    }\n  }\n\n  /**\n   * @returns {Batch}\n   */\n  batch () {\n    /** @type {Pair[]} */\n    let puts = []\n    /** @type {Key[]} */\n    let dels = []\n\n    return {\n      put (key, value) {\n        puts.push({ key, value })\n      },\n\n      delete (key) {\n        dels.push(key)\n      },\n      commit: async (options) => {\n        await drain(this.putMany(puts, options))\n        puts = []\n        await drain(this.deleteMany(dels, options))\n        dels = []\n      }\n    }\n  }\n\n  /**\n   * Extending classes should override `query` or implement this method\n   *\n   * @param {Query} q\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Pair>}\n   */\n  // eslint-disable-next-line require-yield\n  async * _all (q, options) {\n    throw new Error('._all is not implemented')\n  }\n\n  /**\n   * Extending classes should override `queryKeys` or implement this method\n   *\n   * @param {KeyQuery} q\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Key>}\n   */\n  // eslint-disable-next-line require-yield\n  async * _allKeys (q, options) {\n    throw new Error('._allKeys is not implemented')\n  }\n\n  /**\n   * @param {Query} q\n   * @param {Options} [options]\n   */\n  query (q, options) {\n    let it = this._all(q, options)\n\n    if (q.prefix != null) {\n      it = filter(it, (e) =>\n        e.key.toString().startsWith(/** @type {string} */ (q.prefix))\n      )\n    }\n\n    if (Array.isArray(q.filters)) {\n      it = q.filters.reduce((it, f) => filter(it, f), it)\n    }\n\n    if (Array.isArray(q.orders)) {\n      it = q.orders.reduce((it, f) => sortAll(it, f), it)\n    }\n\n    if (q.offset != null) {\n      let i = 0\n      it = filter(it, () => i++ >= /** @type {number} */ (q.offset))\n    }\n\n    if (q.limit != null) {\n      it = take(it, q.limit)\n    }\n\n    return it\n  }\n\n  /**\n   * @param {KeyQuery} q\n   * @param {Options} [options]\n   */\n  queryKeys (q, options) {\n    let it = this._allKeys(q, options)\n\n    if (q.prefix != null) {\n      it = filter(it, (key) =>\n        key.toString().startsWith(/** @type {string} */ (q.prefix))\n      )\n    }\n\n    if (Array.isArray(q.filters)) {\n      it = q.filters.reduce((it, f) => filter(it, f), it)\n    }\n\n    if (Array.isArray(q.orders)) {\n      it = q.orders.reduce((it, f) => sortAll(it, f), it)\n    }\n\n    if (q.offset != null) {\n      let i = 0\n      it = filter(it, () => i++ >= /** @type {number} */ (q.offset))\n    }\n\n    if (q.limit != null) {\n      it = take(it, q.limit)\n    }\n\n    return it\n  }\n}\n","import { Key } from 'interface-datastore'\nimport {\n  readShardFun,\n  SHARDING_FN,\n  README_FN,\n  readme\n} from './shard.js'\nimport { BaseDatastore } from './base.js'\nimport { KeyTransformDatastore } from './keytransform.js'\nimport * as Errors from './errors.js'\n\nconst shardKey = new Key(SHARDING_FN)\nconst shardReadmeKey = new Key(README_FN)\n/**\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('interface-datastore').Options} Options\n * @typedef {import('interface-datastore').Batch} Batch\n * @typedef {import('interface-datastore').Query} Query\n * @typedef {import('interface-datastore').QueryFilter} QueryFilter\n * @typedef {import('interface-datastore').QueryOrder} QueryOrder\n * @typedef {import('interface-datastore').KeyQuery} KeyQuery\n * @typedef {import('interface-datastore').KeyQueryFilter} KeyQueryFilter\n * @typedef {import('interface-datastore').KeyQueryOrder} KeyQueryOrder\n * @typedef {import('interface-datastore').Pair} Pair\n * @typedef {import('./types').Shard} Shard\n *\n */\n/**\n * @template TValue\n * @typedef {import('interface-store').Await<TValue> } Await\n */\n\n/**\n * @template TEntry\n * @typedef {import('interface-store').AwaitIterable<TEntry>} AwaitIterable\n */\n\n/**\n * Backend independent abstraction of go-ds-flatfs.\n *\n * Wraps another datastore such that all values are stored\n * sharded according to the given sharding function.\n */\nexport class ShardingDatastore extends BaseDatastore {\n  /**\n   * @param {Datastore} store\n   * @param {Shard} shard\n   */\n  constructor (store, shard) {\n    super()\n\n    this.child = new KeyTransformDatastore(store, {\n      convert: this._convertKey.bind(this),\n      invert: this._invertKey.bind(this)\n    })\n    this.shard = shard\n  }\n\n  async open () {\n    await this.child.open()\n\n    this.shard = await ShardingDatastore.create(this.child, this.shard)\n  }\n\n  /**\n   * @param {Key} key\n   */\n  _convertKey (key) {\n    const s = key.toString()\n    if (s === shardKey.toString() || s === shardReadmeKey.toString()) {\n      return key\n    }\n\n    const parent = new Key(this.shard.fun(s))\n    return parent.child(key)\n  }\n\n  /**\n   * @param {Key} key\n   */\n  _invertKey (key) {\n    const s = key.toString()\n    if (s === shardKey.toString() || s === shardReadmeKey.toString()) {\n      return key\n    }\n    return Key.withNamespaces(key.list().slice(1))\n  }\n\n  /**\n   * @deprecated\n   * @param {Datastore} store\n   * @param {Shard} shard\n   */\n  static async createOrOpen (store, shard) {\n    try {\n      await ShardingDatastore.create(store, shard)\n    } catch (/** @type {any} */ err) {\n      if (err && err.message !== 'datastore exists') throw err\n    }\n    return ShardingDatastore.open(store)\n  }\n\n  /**\n   * @deprecated\n   * @param {Datastore} store\n   */\n  static async open (store) {\n    const shard = await readShardFun('/', store)\n    return new ShardingDatastore(store, shard)\n  }\n\n  /**\n   * @param {Datastore} store\n   * @param {Shard} shard\n   */\n  static async create (store, shard) {\n    const hasShard = await store.has(shardKey)\n    if (!hasShard && !shard) {\n      throw Errors.dbOpenFailedError(Error('Shard is required when datastore doesn\\'t have a shard key already.'))\n    }\n    if (!hasShard) {\n      // @ts-ignore i have no idea what putRaw is or saw any implementation\n      const put = typeof store.putRaw === 'function' ? store.putRaw.bind(store) : store.put.bind(store)\n      await Promise.all([\n        put(shardKey, new TextEncoder().encode(shard.toString() + '\\n')),\n        put(shardReadmeKey, new TextEncoder().encode(readme))\n      ])\n\n      return shard\n    }\n\n    // test shards\n    const diskShard = await readShardFun('/', store)\n    const a = (diskShard || '').toString()\n    const b = shard.toString()\n    if (a !== b) {\n      throw new Error(`specified fun ${b} does not match repo shard fun ${a}`)\n    }\n    return diskShard\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Uint8Array} val\n   * @param {Options} [options]\n   */\n  put (key, val, options) {\n    return this.child.put(key, val, options)\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  get (key, options) {\n    return this.child.get(key, options)\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  has (key, options) {\n    return this.child.has(key, options)\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  delete (key, options) {\n    return this.child.delete(key, options)\n  }\n\n  /**\n   * @param {AwaitIterable<Pair>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Pair>}\n   */\n  async * putMany (source, options = {}) {\n    yield * this.child.putMany(source, options)\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Uint8Array>}\n   */\n  async * getMany (source, options = {}) {\n    yield * this.child.getMany(source, options)\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Key>}\n   */\n  async * deleteMany (source, options = {}) {\n    yield * this.child.deleteMany(source, options)\n  }\n\n  batch () {\n    return this.child.batch()\n  }\n\n  /**\n   * @param {Query} q\n   * @param {Options} [options]\n   */\n  query (q, options) {\n    /** @type {Query} */\n    const tq = {\n      ...q,\n      filters: [\n        /** @type {QueryFilter} */\n        ({ key }) => key.toString() !== shardKey.toString(),\n        /** @type {QueryFilter} */\n        ({ key }) => key.toString() !== shardReadmeKey.toString()\n      ].concat(q.filters || [])\n    }\n\n    return this.child.query(tq, options)\n  }\n\n  /**\n   * @param {KeyQuery} q\n   * @param {Options} [options]\n   */\n  queryKeys (q, options) {\n    /** @type {KeyQuery} */\n    const tq = {\n      ...q,\n      filters: [\n        /** @type {KeyQueryFilter} */\n        key => key.toString() !== shardKey.toString(),\n        /** @type {KeyQueryFilter} */\n        key => key.toString() !== shardReadmeKey.toString()\n      ].concat(q.filters || [])\n    }\n\n    return this.child.queryKeys(tq, options)\n  }\n\n  close () {\n    return this.child.close()\n  }\n}\n","import { BaseDatastore } from './base.js'\nimport * as Errors from './errors.js'\nimport { logger } from '@libp2p/logger'\nimport { pushable } from 'it-pushable'\nimport drain from 'it-drain'\n\nconst log = logger('datastore:core:tiered')\n\n/**\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('interface-datastore').Options} Options\n * @typedef {import('interface-datastore').Batch} Batch\n * @typedef {import('interface-datastore').Query} Query\n * @typedef {import('interface-datastore').KeyQuery} KeyQuery\n * @typedef {import('interface-datastore').Key} Key\n * @typedef {import('interface-datastore').Pair} Pair\n */\n\n/**\n * @template TEntry\n * @typedef {import('interface-store').AwaitIterable<TEntry>} AwaitIterable\n */\n\n/**\n * A datastore that can combine multiple stores. Puts and deletes\n * will write through to all datastores. Has and get will\n * try each store sequentially. Query will always try the\n * last one first.\n *\n */\nexport class TieredDatastore extends BaseDatastore {\n  /**\n   * @param {Datastore[]} stores\n   */\n  constructor (stores) {\n    super()\n\n    this.stores = stores.slice()\n  }\n\n  async open () {\n    try {\n      await Promise.all(this.stores.map((store) => store.open()))\n    } catch (/** @type {any} */ err) {\n      throw Errors.dbOpenFailedError(err)\n    }\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Uint8Array} value\n   * @param {Options} [options]\n   */\n  async put (key, value, options) {\n    try {\n      await Promise.all(this.stores.map(store => store.put(key, value, options)))\n    } catch (/** @type {any} */ err) {\n      throw Errors.dbWriteFailedError(err)\n    }\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  async get (key, options) {\n    for (const store of this.stores) {\n      try {\n        const res = await store.get(key, options)\n        if (res) return res\n      } catch (err) {\n        log.error(err)\n      }\n    }\n    throw Errors.notFoundError()\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  async has (key, options) {\n    for (const s of this.stores) {\n      if (await s.has(key, options)) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  async delete (key, options) {\n    try {\n      await Promise.all(this.stores.map(store => store.delete(key, options)))\n    } catch (/** @type {any} */ err) {\n      throw Errors.dbDeleteFailedError(err)\n    }\n  }\n\n  /**\n   * @param {AwaitIterable<Pair>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Pair>}\n   */\n  async * putMany (source, options = {}) {\n    let error\n    const pushables = this.stores.map(store => {\n      const source = pushable({\n        objectMode: true\n      })\n\n      drain(store.putMany(source, options))\n        .catch(err => {\n          // store threw while putting, make sure we bubble the error up\n          error = err\n        })\n\n      return source\n    })\n\n    try {\n      for await (const pair of source) {\n        if (error) {\n          throw error\n        }\n\n        pushables.forEach(p => p.push(pair))\n\n        yield pair\n      }\n    } finally {\n      pushables.forEach(p => p.end())\n    }\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Key>}\n   */\n  async * deleteMany (source, options = {}) {\n    let error\n    const pushables = this.stores.map(store => {\n      const source = pushable({\n        objectMode: true\n      })\n\n      drain(store.deleteMany(source, options))\n        .catch(err => {\n          // store threw while deleting, make sure we bubble the error up\n          error = err\n        })\n\n      return source\n    })\n\n    try {\n      for await (const key of source) {\n        if (error) {\n          throw error\n        }\n\n        pushables.forEach(p => p.push(key))\n\n        yield key\n      }\n    } finally {\n      pushables.forEach(p => p.end())\n    }\n  }\n\n  async close () {\n    await Promise.all(this.stores.map(store => store.close()))\n  }\n\n  /**\n   * @returns {Batch}\n   */\n  batch () {\n    const batches = this.stores.map(store => store.batch())\n\n    return {\n      put: (key, value) => {\n        batches.forEach(b => b.put(key, value))\n      },\n      delete: (key) => {\n        batches.forEach(b => b.delete(key))\n      },\n      commit: async (options) => {\n        for (const batch of batches) {\n          await batch.commit(options)\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {Query} q\n   * @param {Options} [options]\n   */\n  query (q, options) {\n    return this.stores[this.stores.length - 1].query(q, options)\n  }\n\n  /**\n   * @param {KeyQuery} q\n   * @param {Options} [options]\n   */\n  queryKeys (q, options) {\n    return this.stores[this.stores.length - 1].queryKeys(q, options)\n  }\n}\n","import { CodeError } from '@libp2p/interfaces/errors'\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string'\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string'\n\n/**\n * @typedef {import('interface-datastore').Key} Key\n */\n\nconst namespace = '/record/'\n\n/**\n * @param {Uint8Array} buf\n */\nexport function encodeBase32 (buf) {\n  return uint8ArrayToString(buf, 'base32')\n}\n\n/**\n * converts a binary record key to a pubsub topic key\n *\n * @param {Uint8Array | string} key\n */\nexport function keyToTopic (key) {\n  // Record-store keys are arbitrary binary. However, pubsub requires UTF-8 string topic IDs\n  // Encodes to \"/record/base64url(key)\"\n  if (typeof key === 'string' || key instanceof String) {\n    key = uint8ArrayFromString(key.toString())\n  }\n\n  const b64url = uint8ArrayToString(key, 'base64url')\n\n  return `${namespace}${b64url}`\n}\n\n/**\n * converts a pubsub topic key to a binary record key\n *\n * @param {string} topic\n */\nexport function topicToKey (topic) {\n  if (topic.substring(0, namespace.length) !== namespace) {\n    throw new CodeError('topic received is not from a record', 'ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE')\n  }\n\n  const key = topic.substring(namespace.length)\n\n  return uint8ArrayFromString(key, 'base64url')\n}\n","import { Key } from 'interface-datastore'\nimport { BaseDatastore } from 'datastore-core'\nimport { encodeBase32, keyToTopic, topicToKey } from './utils.js'\nimport { equals as uint8ArrayEquals } from 'uint8arrays/equals'\nimport { CodeError } from '@libp2p/interfaces/errors'\nimport { logger } from '@libp2p/logger'\n\nconst log = logger('datastore-pubsub:publisher')\n\n/**\n * @typedef {import('@libp2p/interface-peer-id').PeerId} PeerId\n * @typedef {import('./types').SubscriptionKeyFn} SubscriptionKeyFn\n * @typedef {import('@libp2p/interface-pubsub').Message} PubSubMessage\n * @typedef {import('@libp2p/interfaces').AbortOptions} AbortOptions\n */\n\n// DatastorePubsub is responsible for providing an api for pubsub to be used as a datastore with\n// [TieredDatastore]{@link https://github.com/ipfs/js-datastore-core/blob/master/src/tiered.js}\nexport class PubSubDatastore extends BaseDatastore {\n  /**\n   * Creates an instance of DatastorePubsub.\n   *\n   * @param {import('@libp2p/interface-pubsub').PubSub} pubsub - pubsub implementation\n   * @param {import('interface-datastore').Datastore} datastore - datastore instance\n   * @param {PeerId} peerId - peer-id instance\n   * @param {import('@libp2p/interface-dht').ValidateFn} validator - validator function\n   * @param {import('@libp2p/interface-dht').SelectFn} selector - selector function\n   * @param {SubscriptionKeyFn} [subscriptionKeyFn] - function to manipulate the key topic received before processing it\n   * @memberof DatastorePubsub\n   */\n  constructor (pubsub, datastore, peerId, validator, selector, subscriptionKeyFn) {\n    super()\n\n    if (!validator) {\n      throw new CodeError('missing validator', 'ERR_INVALID_PARAMETERS')\n    }\n\n    if (typeof validator !== 'function') {\n      throw new CodeError('missing validate function', 'ERR_INVALID_PARAMETERS')\n    }\n\n    if (typeof selector !== 'function') {\n      throw new CodeError('missing select function', 'ERR_INVALID_PARAMETERS')\n    }\n\n    if (subscriptionKeyFn && typeof subscriptionKeyFn !== 'function') {\n      throw new CodeError('invalid subscriptionKeyFn received', 'ERR_INVALID_PARAMETERS')\n    }\n\n    this._pubsub = pubsub\n    this._datastore = datastore\n    this._peerId = peerId\n    this._validator = validator\n    this._selector = selector\n    this._handleSubscriptionKeyFn = subscriptionKeyFn\n\n    // Bind _onMessage function, which is called by pubsub.\n    this._onMessage = this._onMessage.bind(this)\n    this._pubsub.addEventListener('message', this._onMessage)\n  }\n\n  /**\n   * Publishes a value through pubsub.\n   *\n   * @param {Uint8Array} key - identifier of the value to be published.\n   * @param {Uint8Array} val - value to be propagated.\n   * @param {AbortOptions} [options]\n   */\n  // @ts-ignore Datastores take keys as Keys, this one takes Uint8Arrays\n  async put (key, val, options) {\n    if (!(key instanceof Uint8Array)) {\n      const errMsg = 'datastore key does not have a valid format'\n\n      log.error(errMsg)\n      throw new CodeError(errMsg, 'ERR_INVALID_DATASTORE_KEY')\n    }\n\n    if (!(val instanceof Uint8Array)) {\n      const errMsg = 'received value is not a Uint8Array'\n\n      log.error(errMsg)\n      throw new CodeError(errMsg, 'ERR_INVALID_VALUE_RECEIVED')\n    }\n\n    const stringifiedTopic = keyToTopic(key)\n\n    log(`publish value for topic ${stringifiedTopic}`)\n\n    // Publish record to pubsub\n    await this._pubsub.publish(stringifiedTopic, val)\n  }\n\n  /**\n   * Try to subscribe a topic with Pubsub and returns the local value if available.\n   *\n   * @param {Uint8Array} key - identifier of the value to be subscribed.\n   * @param {AbortOptions} [options]\n   */\n  // @ts-ignore Datastores take keys as Keys, this one takes Uint8Arrays\n  async get (key, options) {\n    if (!(key instanceof Uint8Array)) {\n      const errMsg = 'datastore key does not have a valid format'\n\n      log.error(errMsg)\n      throw new CodeError(errMsg, 'ERR_INVALID_DATASTORE_KEY')\n    }\n\n    const stringifiedTopic = keyToTopic(key)\n    const subscriptions = await this._pubsub.getTopics()\n\n    // If already subscribed, just try to get it\n    if (subscriptions && Array.isArray(subscriptions) && subscriptions.indexOf(stringifiedTopic) > -1) {\n      return this._getLocal(key, options)\n    }\n\n    // subscribe\n    try {\n      await this._pubsub.subscribe(stringifiedTopic)\n    } catch (/** @type {any} */ err) {\n      const errMsg = `cannot subscribe topic ${stringifiedTopic}`\n\n      log.error(errMsg)\n      throw new CodeError(errMsg, 'ERR_SUBSCRIBING_TOPIC')\n    }\n    log(`subscribed values for key ${stringifiedTopic}`)\n\n    return this._getLocal(key)\n  }\n\n  /**\n   * Unsubscribe topic.\n   *\n   * @param {Uint8Array} key - identifier of the value to unsubscribe.\n   * @returns {void}\n   */\n  unsubscribe (key) {\n    const stringifiedTopic = keyToTopic(key)\n\n    return this._pubsub.unsubscribe(stringifiedTopic)\n  }\n\n  /**\n   * Get record from local datastore\n   *\n   * @private\n   * @param {Uint8Array} key\n   * @param {AbortOptions} [options]\n   */\n  async _getLocal (key, options) {\n    // encode key - base32(/ipns/{cid})\n    const routingKey = new Key('/' + encodeBase32(key), false)\n    let dsVal\n\n    try {\n      dsVal = await this._datastore.get(routingKey, options)\n    } catch (/** @type {any} */ err) {\n      if (err.code !== 'ERR_NOT_FOUND') {\n        const errMsg = `unexpected error getting the ipns record for ${routingKey.toString()}`\n\n        log.error(errMsg)\n        throw new CodeError(errMsg, 'ERR_UNEXPECTED_ERROR_GETTING_RECORD')\n      }\n      const errMsg = `local record requested was not found for ${routingKey.toString()}`\n\n      log.error(errMsg)\n      throw new CodeError(errMsg, 'ERR_NOT_FOUND')\n    }\n\n    if (!(dsVal instanceof Uint8Array)) {\n      const errMsg = 'found record that we couldn\\'t convert to a value'\n\n      log.error(errMsg)\n      throw new CodeError(errMsg, 'ERR_INVALID_RECORD_RECEIVED')\n    }\n\n    return dsVal\n  }\n\n  /**\n   * handles pubsub subscription messages\n   *\n   * @param {CustomEvent<PubSubMessage>} evt\n   */\n  async _onMessage (evt) {\n    const msg = evt.detail\n\n    if (msg.type !== 'signed') {\n      log.error('unsigned message received, this module can only work with signed messages')\n      return\n    }\n\n    const { data, from, topic } = msg\n    let key\n    try {\n      key = topicToKey(topic)\n    } catch (/** @type {any} */ err) {\n      log.error(err)\n      return\n    }\n\n    log(`message received for topic ${topic}`)\n\n    // Stop if the message is from the peer (it already stored it while publishing to pubsub)\n    if (this._peerId.equals(from)) {\n      log('message discarded as it is from the same peer')\n      return\n    }\n\n    if (this._handleSubscriptionKeyFn) {\n      let res\n\n      try {\n        res = await this._handleSubscriptionKeyFn(key)\n      } catch (/** @type {any} */ err) {\n        log.error('message discarded by the subscriptionKeyFn')\n        return\n      }\n\n      key = res\n    }\n\n    try {\n      await this._storeIfSubscriptionIsBetter(key, data)\n    } catch (/** @type {any} */ err) {\n      log.error(err)\n    }\n  }\n\n  /**\n   * Store the received record if it is better than the current stored\n   *\n   * @param {Uint8Array} key\n   * @param {Uint8Array} data\n   * @param {AbortOptions} [options]\n   */\n  async _storeIfSubscriptionIsBetter (key, data, options) {\n    let isBetter = false\n\n    try {\n      isBetter = await this._isBetter(key, data)\n    } catch (/** @type {any} */ err) {\n      if (err.code !== 'ERR_NOT_VALID_RECORD') {\n        throw err\n      }\n    }\n\n    if (isBetter) {\n      await this._storeRecord(key, data, options)\n    }\n  }\n\n  /**\n   * Validate record according to the received validation function\n   *\n   * @param {Uint8Array} key\n   * @param {Uint8Array} value\n   */\n  async _validateRecord (key, value) { // eslint-disable-line require-await\n    return this._validator(key, value)\n  }\n\n  /**\n   * Select the best record according to the received select function\n   *\n   * @param {Uint8Array} key\n   * @param {Uint8Array[]} records\n   */\n  async _selectRecord (key, records) {\n    const res = await this._selector(key, records)\n\n    // If the selected was the first (0), it should be stored (true)\n    return res === 0\n  }\n\n  /**\n   * Verify if the record received through pubsub is valid and better than the one currently stored\n   *\n   * @param {Uint8Array} key\n   * @param {Uint8Array} val\n   */\n  async _isBetter (key, val) {\n    try {\n      await this._validateRecord(key, val)\n    } catch (/** @type {any} */ err) {\n      // If not valid, it is not better than the one currently available\n      const errMsg = 'record received through pubsub is not valid'\n\n      log.error(errMsg)\n      throw new CodeError(errMsg, 'ERR_NOT_VALID_RECORD')\n    }\n\n    // Get Local record\n    const dsKey = new Key(key)\n    let currentRecord\n\n    try {\n      currentRecord = await this._getLocal(dsKey.uint8Array())\n    } catch (/** @type {any} */ err) {\n      // if the old one is invalid, the new one is *always* better\n      return true\n    }\n\n    // if the same record, do not need to store\n    if (uint8ArrayEquals(currentRecord, val)) {\n      return false\n    }\n\n    // verify if the received record should replace the current one\n    return this._selectRecord(key, [currentRecord, val])\n  }\n\n  /**\n   * add record to datastore\n   *\n   * @param {Uint8Array} key\n   * @param {Uint8Array} data\n   * @param {AbortOptions} [options]\n   */\n  async _storeRecord (key, data, options) {\n    // encode key - base32(/ipns/{cid})\n    const routingKey = new Key('/' + encodeBase32(key), false)\n\n    await this._datastore.put(routingKey, data, options)\n    log(`record for ${keyToTopic(key)} was stored in the datastore`)\n  }\n}\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nexport default encodePacket;\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType)\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1)\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type]\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            return data instanceof ArrayBuffer ? new Blob([data]) : data;\n        case \"arraybuffer\":\n        default:\n            return data; // assuming the data is already an ArrayBuffer\n    }\n};\nexport default decodePacket;\n","import encodePacket from \"./encodePacket.js\";\nimport decodePacket from \"./decodePacket.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, encodedPacket => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload };\n","export const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\n","import { globalThisShim as globalThis } from \"./globalThis.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nclass TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n}\n","// imported from https://github.com/unshiftio/yeast\n'use strict';\nconst alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''), length = 64, map = {};\nlet seed = 0, i = 0, prev;\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nexport function encode(num) {\n    let encoded = '';\n    do {\n        encoded = alphabet[num % length] + encoded;\n        num = Math.floor(num / length);\n    } while (num > 0);\n    return encoded;\n}\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nexport function decode(str) {\n    let decoded = 0;\n    for (i = 0; i < str.length; i++) {\n        decoded = decoded * length + map[str.charAt(i)];\n    }\n    return decoded;\n}\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nexport function yeast() {\n    const now = encode(+new Date());\n    if (now !== prev)\n        return seed = 0, prev = now;\n    return now + '.' + encode(seed++);\n}\n//\n// Map each character to its index.\n//\nfor (; i < length; i++)\n    map[alphabet[i]] = i;\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","// browser shim for xmlhttprequest module\nimport { hasCORS } from \"../contrib/has-cors.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nexport function XHR(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { encode } from \"../contrib/parseqs.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nimport { XHR as XMLHttpRequest } from \"./xmlhttprequest.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nfunction empty() { }\nconst hasXHR2 = (function () {\n    const xhr = new XMLHttpRequest({\n        xdomain: false,\n    });\n    return null != xhr.responseType;\n})();\nexport class Polling extends Transport {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        this.polling = false;\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n            this.xs = opts.secure !== isSSL;\n        }\n        /**\n         * XHR supports binary\n         */\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this.polling || !this.writable) {\n            let total = 0;\n            if (this.polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    poll() {\n        this.polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this.polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this.poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        let query = this.query || {};\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        let port = \"\";\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        // avoid port if default for schema\n        if (this.opts.port &&\n            ((\"https\" === schema && Number(this.opts.port) !== 443) ||\n                (\"http\" === schema && Number(this.opts.port) !== 80))) {\n            port = \":\" + this.opts.port;\n        }\n        const encodedQuery = encode(query);\n        const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return (schema +\n            \"://\" +\n            (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n            port +\n            this.opts.path +\n            (encodedQuery.length ? \"?\" + encodedQuery : \"\"));\n    }\n    /**\n     * Creates a request.\n     *\n     * @param {String} method\n     * @private\n     */\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);\n        return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(uri, opts) {\n        super();\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.method = opts.method || \"GET\";\n        this.uri = uri;\n        this.async = false !== opts.async;\n        this.data = undefined !== opts.data ? opts.data : null;\n        this.create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    create() {\n        const opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        opts.xscheme = !!this.opts.xs;\n        const xhr = (this.xhr = new XMLHttpRequest(opts));\n        try {\n            xhr.open(this.method, this.uri, this.async);\n            try {\n                if (this.opts.extraHeaders) {\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this.opts.extraHeaders) {\n                        if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this.method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this.opts.withCredentials;\n            }\n            if (this.opts.requestTimeout) {\n                xhr.timeout = this.opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this.onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this.data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this.onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this.index = Request.requestsCount++;\n            Request.requests[this.index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    onError(err) {\n        this.emitReserved(\"error\", err, this.xhr);\n        this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n            return;\n        }\n        this.xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this.xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this.index];\n        }\n        this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    onLoad() {\n        const data = this.xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this.cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this.cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\n","import { globalThisShim as globalThis } from \"../globalThis.js\";\nexport const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const WebSocket = globalThis.WebSocket || globalThis.MozWebSocket;\nexport const usingBrowserWebSocket = true;\nexport const defaultBinaryType = \"arraybuffer\";\n","import { Transport } from \"../transport.js\";\nimport { encode } from \"../contrib/parseqs.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { pick } from \"../util.js\";\nimport { defaultBinaryType, nextTick, usingBrowserWebSocket, WebSocket, } from \"./websocket-constructor.js\";\nimport { encodePacket } from \"engine.io-parser\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class WS extends Transport {\n    /**\n     * WebSocket transport constructor.\n     *\n     * @param {Object} opts - connection options\n     * @protected\n     */\n    constructor(opts) {\n        super(opts);\n        this.supportsBinary = !opts.forceBase64;\n    }\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        if (!this.check()) {\n            // let probe timeout\n            return;\n        }\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws =\n                usingBrowserWebSocket && !isReactNative\n                    ? protocols\n                        ? new WebSocket(uri, protocols)\n                        : new WebSocket(uri)\n                    : new WebSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // always create a new object (GH-437)\n                const opts = {};\n                if (!usingBrowserWebSocket) {\n                    if (packet.options) {\n                        opts.compress = packet.options.compress;\n                    }\n                    if (this.opts.perMessageDeflate) {\n                        const len = \n                        // @ts-ignore\n                        \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n                        if (len < this.opts.perMessageDeflate.threshold) {\n                            opts.compress = false;\n                        }\n                    }\n                }\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    if (usingBrowserWebSocket) {\n                        // TypeError is thrown when passing the second argument on Safari\n                        this.ws.send(data);\n                    }\n                    else {\n                        this.ws.send(data, opts);\n                    }\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        let query = this.query || {};\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        let port = \"\";\n        // avoid port if default for schema\n        if (this.opts.port &&\n            ((\"wss\" === schema && Number(this.opts.port) !== 443) ||\n                (\"ws\" === schema && Number(this.opts.port) !== 80))) {\n            port = \":\" + this.opts.port;\n        }\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        const encodedQuery = encode(query);\n        const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return (schema +\n            \"://\" +\n            (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n            port +\n            this.opts.path +\n            (encodedQuery.length ? \"?\" + encodedQuery : \"\"));\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @private\n     */\n    check() {\n        return !!WebSocket;\n    }\n}\n","import { Polling } from \"./polling.js\";\nimport { WS } from \"./websocket.js\";\nexport const transports = {\n    websocket: WS,\n    polling: Polling,\n};\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nexport class Socket extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts = {}) {\n        super();\n        this.writeBuffer = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            uri = parse(uri);\n            opts.hostname = uri.host;\n            opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n            opts.port = uri.port;\n            if (uri.query)\n                opts.query = uri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = opts.transports || [\"polling\", \"websocket\"];\n        this.writeBuffer = [];\n        this.prevBufferLen = 0;\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: true,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        // set on handshake\n        this.id = null;\n        this.upgrades = null;\n        this.pingInterval = null;\n        this.pingTimeout = null;\n        // set on heartbeat\n        this.pingTimeoutTimer = null;\n        if (typeof addEventListener === \"function\") {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this.beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this.offlineEventListener = () => {\n                    this.onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                addEventListener(\"offline\", this.offlineEventListener, false);\n            }\n        }\n        this.open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts.transportOptions[name], this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        });\n        return new transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    open() {\n        let transport;\n        if (this.opts.rememberUpgrade &&\n            Socket.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1) {\n            transport = \"websocket\";\n        }\n        else if (0 === this.transports.length) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        else {\n            transport = this.transports[0];\n        }\n        this.readyState = \"opening\";\n        // Retry with the next transport if the transport is disabled (jsonp: false)\n        try {\n            transport = this.createTransport(transport);\n        }\n        catch (e) {\n            this.transports.shift();\n            this.open();\n            return;\n        }\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this.onDrain.bind(this))\n            .on(\"packet\", this.onPacket.bind(this))\n            .on(\"error\", this.onError.bind(this))\n            .on(\"close\", (reason) => this.onClose(\"transport close\", reason));\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        Socket.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        transport.open();\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n        // we check for `readyState` in case an `open`\n        // listener already closed the socket\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            let i = 0;\n            const l = this.upgrades.length;\n            for (; i < l; i++) {\n                this.probe(this.upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this.resetPingTimeout();\n                    this.sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this.onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    resetPingTimeout() {\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(() => {\n            this.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n        if (this.opts.autoUnref) {\n            this.pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this.prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this.getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this.prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    getWritablePackets() {\n        const shouldCheckPayloadSize = this.maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this.maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this.onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    onError(err) {\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this.pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (typeof removeEventListener === \"function\") {\n                removeEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n                removeEventListener(\"offline\", this.offlineEventListener, false);\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this.prevBufferLen = 0;\n        }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        let i = 0;\n        const j = upgrades.length;\n        for (; i < j; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\nSocket.protocol = protocol;\n","import { Socket } from \"./socket.js\";\nexport { Socket };\nexport const protocol = Socket.protocol;\nexport { Transport } from \"./transport.js\";\nexport { transports } from \"./transports/index.js\";\nexport { installTimerFunctions } from \"./util.js\";\nexport { parse } from \"./contrib/parseuri.js\";\nexport { nextTick } from \"./transports/websocket-constructor.js\";\n","export function stringToBytes(string) {\n\treturn [...string].map(character => character.charCodeAt(0)); // eslint-disable-line unicorn/prefer-code-point\n}\n\n/**\nChecks whether the TAR checksum is valid.\n\n@param {Buffer} buffer - The TAR header `[offset ... offset + 512]`.\n@param {number} offset - TAR header offset.\n@returns {boolean} `true` if the TAR checksum is valid, otherwise `false`.\n*/\nexport function tarHeaderChecksumMatches(buffer, offset = 0) {\n\tconst readSum = Number.parseInt(buffer.toString('utf8', 148, 154).replace(/\\0.*$/, '').trim(), 8); // Read sum in header\n\tif (Number.isNaN(readSum)) {\n\t\treturn false;\n\t}\n\n\tlet sum = 8 * 0x20; // Initialize signed bit sum\n\n\tfor (let index = offset; index < offset + 148; index++) {\n\t\tsum += buffer[index];\n\t}\n\n\tfor (let index = offset + 156; index < offset + 512; index++) {\n\t\tsum += buffer[index];\n\t}\n\n\treturn readSum === sum;\n}\n\n/**\nID3 UINT32 sync-safe tokenizer token.\n28 bits (representing up to 256MB) integer, the msb is 0 to avoid \"false syncsignals\".\n*/\nexport const uint32SyncSafeToken = {\n\tget: (buffer, offset) => (buffer[offset + 3] & 0x7F) | ((buffer[offset + 2]) << 7) | ((buffer[offset + 1]) << 14) | ((buffer[offset]) << 21),\n\tlen: 4,\n};\n","import {Buffer} from 'node:buffer';\nimport * as Token from 'token-types';\nimport * as strtok3 from 'strtok3/core'; // eslint-disable-line n/file-extension-in-import\nimport {\n\tstringToBytes,\n\ttarHeaderChecksumMatches,\n\tuint32SyncSafeToken,\n} from './util.js';\nimport {extensions, mimeTypes} from './supported.js';\n\nconst minimumBytes = 4100; // A fair amount of file-types are detectable within this range.\n\nexport async function fileTypeFromStream(stream) {\n\tconst tokenizer = await strtok3.fromStream(stream);\n\ttry {\n\t\treturn await fileTypeFromTokenizer(tokenizer);\n\t} finally {\n\t\tawait tokenizer.close();\n\t}\n}\n\nexport async function fileTypeFromBuffer(input) {\n\tif (!(input instanceof Uint8Array || input instanceof ArrayBuffer)) {\n\t\tthrow new TypeError(`Expected the \\`input\\` argument to be of type \\`Uint8Array\\` or \\`Buffer\\` or \\`ArrayBuffer\\`, got \\`${typeof input}\\``);\n\t}\n\n\tconst buffer = input instanceof Uint8Array ? input : new Uint8Array(input);\n\n\tif (!(buffer?.length > 1)) {\n\t\treturn;\n\t}\n\n\treturn fileTypeFromTokenizer(strtok3.fromBuffer(buffer));\n}\n\nexport async function fileTypeFromBlob(blob) {\n\tconst buffer = await blob.arrayBuffer();\n\treturn fileTypeFromBuffer(new Uint8Array(buffer));\n}\n\nfunction _check(buffer, headers, options) {\n\toptions = {\n\t\toffset: 0,\n\t\t...options,\n\t};\n\n\tfor (const [index, header] of headers.entries()) {\n\t\t// If a bitmask is set\n\t\tif (options.mask) {\n\t\t\t// If header doesn't equal `buf` with bits masked off\n\t\t\tif (header !== (options.mask[index] & buffer[index + options.offset])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if (header !== buffer[index + options.offset]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nexport async function fileTypeFromTokenizer(tokenizer) {\n\ttry {\n\t\treturn new FileTypeParser().parse(tokenizer);\n\t} catch (error) {\n\t\tif (!(error instanceof strtok3.EndOfStreamError)) {\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n\nclass FileTypeParser {\n\tcheck(header, options) {\n\t\treturn _check(this.buffer, header, options);\n\t}\n\n\tcheckString(header, options) {\n\t\treturn this.check(stringToBytes(header), options);\n\t}\n\n\tasync parse(tokenizer) {\n\t\tthis.buffer = Buffer.alloc(minimumBytes);\n\n\t\t// Keep reading until EOF if the file size is unknown.\n\t\tif (tokenizer.fileInfo.size === undefined) {\n\t\t\ttokenizer.fileInfo.size = Number.MAX_SAFE_INTEGER;\n\t\t}\n\n\t\tthis.tokenizer = tokenizer;\n\n\t\tawait tokenizer.peekBuffer(this.buffer, {length: 12, mayBeLess: true});\n\n\t\t// -- 2-byte signatures --\n\n\t\tif (this.check([0x42, 0x4D])) {\n\t\t\treturn {\n\t\t\t\text: 'bmp',\n\t\t\t\tmime: 'image/bmp',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x0B, 0x77])) {\n\t\t\treturn {\n\t\t\t\text: 'ac3',\n\t\t\t\tmime: 'audio/vnd.dolby.dd-raw',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x78, 0x01])) {\n\t\t\treturn {\n\t\t\t\text: 'dmg',\n\t\t\t\tmime: 'application/x-apple-diskimage',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x4D, 0x5A])) {\n\t\t\treturn {\n\t\t\t\text: 'exe',\n\t\t\t\tmime: 'application/x-msdownload',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x25, 0x21])) {\n\t\t\tawait tokenizer.peekBuffer(this.buffer, {length: 24, mayBeLess: true});\n\n\t\t\tif (\n\t\t\t\tthis.checkString('PS-Adobe-', {offset: 2})\n\t\t\t\t&& this.checkString(' EPSF-', {offset: 14})\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'eps',\n\t\t\t\t\tmime: 'application/eps',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\text: 'ps',\n\t\t\t\tmime: 'application/postscript',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.check([0x1F, 0xA0])\n\t\t\t|| this.check([0x1F, 0x9D])\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'Z',\n\t\t\t\tmime: 'application/x-compress',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xC7, 0x71])) {\n\t\t\treturn {\n\t\t\t\text: 'cpio',\n\t\t\t\tmime: 'application/x-cpio',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x60, 0xEA])) {\n\t\t\treturn {\n\t\t\t\text: 'arj',\n\t\t\t\tmime: 'application/x-arj',\n\t\t\t};\n\t\t}\n\n\t\t// -- 3-byte signatures --\n\n\t\tif (this.check([0xEF, 0xBB, 0xBF])) { // UTF-8-BOM\n\t\t\t// Strip off UTF-8-BOM\n\t\t\tthis.tokenizer.ignore(3);\n\t\t\treturn this.parse(tokenizer);\n\t\t}\n\n\t\tif (this.check([0x47, 0x49, 0x46])) {\n\t\t\treturn {\n\t\t\t\text: 'gif',\n\t\t\t\tmime: 'image/gif',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x49, 0x49, 0xBC])) {\n\t\t\treturn {\n\t\t\t\text: 'jxr',\n\t\t\t\tmime: 'image/vnd.ms-photo',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x1F, 0x8B, 0x8])) {\n\t\t\treturn {\n\t\t\t\text: 'gz',\n\t\t\t\tmime: 'application/gzip',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x42, 0x5A, 0x68])) {\n\t\t\treturn {\n\t\t\t\text: 'bz2',\n\t\t\t\tmime: 'application/x-bzip2',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('ID3')) {\n\t\t\tawait tokenizer.ignore(6); // Skip ID3 header until the header size\n\t\t\tconst id3HeaderLength = await tokenizer.readToken(uint32SyncSafeToken);\n\t\t\tif (tokenizer.position + id3HeaderLength > tokenizer.fileInfo.size) {\n\t\t\t\t// Guess file type based on ID3 header for backward compatibility\n\t\t\t\treturn {\n\t\t\t\t\text: 'mp3',\n\t\t\t\t\tmime: 'audio/mpeg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tawait tokenizer.ignore(id3HeaderLength);\n\t\t\treturn fileTypeFromTokenizer(tokenizer); // Skip ID3 header, recursion\n\t\t}\n\n\t\t// Musepack, SV7\n\t\tif (this.checkString('MP+')) {\n\t\t\treturn {\n\t\t\t\text: 'mpc',\n\t\t\t\tmime: 'audio/x-musepack',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\t(this.buffer[0] === 0x43 || this.buffer[0] === 0x46)\n\t\t\t&& this.check([0x57, 0x53], {offset: 1})\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'swf',\n\t\t\t\tmime: 'application/x-shockwave-flash',\n\t\t\t};\n\t\t}\n\n\t\t// -- 4-byte signatures --\n\n\t\t// Requires a sample size of 4 bytes\n\t\tif (this.check([0xFF, 0xD8, 0xFF])) {\n\t\t\tif (this.check([0xF7], {offset: 3})) { // JPG7/SOF55, indicating a ISO/IEC 14495 / JPEG-LS file\n\t\t\t\treturn {\n\t\t\t\t\text: 'jls',\n\t\t\t\t\tmime: 'image/jls',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\text: 'jpg',\n\t\t\t\tmime: 'image/jpeg',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('FLIF')) {\n\t\t\treturn {\n\t\t\t\text: 'flif',\n\t\t\t\tmime: 'image/flif',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('8BPS')) {\n\t\t\treturn {\n\t\t\t\text: 'psd',\n\t\t\t\tmime: 'image/vnd.adobe.photoshop',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('WEBP', {offset: 8})) {\n\t\t\treturn {\n\t\t\t\text: 'webp',\n\t\t\t\tmime: 'image/webp',\n\t\t\t};\n\t\t}\n\n\t\t// Musepack, SV8\n\t\tif (this.checkString('MPCK')) {\n\t\t\treturn {\n\t\t\t\text: 'mpc',\n\t\t\t\tmime: 'audio/x-musepack',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('FORM')) {\n\t\t\treturn {\n\t\t\t\text: 'aif',\n\t\t\t\tmime: 'audio/aiff',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('icns', {offset: 0})) {\n\t\t\treturn {\n\t\t\t\text: 'icns',\n\t\t\t\tmime: 'image/icns',\n\t\t\t};\n\t\t}\n\n\t\t// Zip-based file formats\n\t\t// Need to be before the `zip` check\n\t\tif (this.check([0x50, 0x4B, 0x3, 0x4])) { // Local file header signature\n\t\t\ttry {\n\t\t\t\twhile (tokenizer.position + 30 < tokenizer.fileInfo.size) {\n\t\t\t\t\tawait tokenizer.readBuffer(this.buffer, {length: 30});\n\n\t\t\t\t\t// https://en.wikipedia.org/wiki/Zip_(file_format)#File_headers\n\t\t\t\t\tconst zipHeader = {\n\t\t\t\t\t\tcompressedSize: this.buffer.readUInt32LE(18),\n\t\t\t\t\t\tuncompressedSize: this.buffer.readUInt32LE(22),\n\t\t\t\t\t\tfilenameLength: this.buffer.readUInt16LE(26),\n\t\t\t\t\t\textraFieldLength: this.buffer.readUInt16LE(28),\n\t\t\t\t\t};\n\n\t\t\t\t\tzipHeader.filename = await tokenizer.readToken(new Token.StringType(zipHeader.filenameLength, 'utf-8'));\n\t\t\t\t\tawait tokenizer.ignore(zipHeader.extraFieldLength);\n\n\t\t\t\t\t// Assumes signed `.xpi` from addons.mozilla.org\n\t\t\t\t\tif (zipHeader.filename === 'META-INF/mozilla.rsa') {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'xpi',\n\t\t\t\t\t\t\tmime: 'application/x-xpinstall',\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (zipHeader.filename.endsWith('.rels') || zipHeader.filename.endsWith('.xml')) {\n\t\t\t\t\t\tconst type = zipHeader.filename.split('/')[0];\n\t\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\t\tcase '_rels':\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'word':\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\text: 'docx',\n\t\t\t\t\t\t\t\t\tmime: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcase 'ppt':\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\text: 'pptx',\n\t\t\t\t\t\t\t\t\tmime: 'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcase 'xl':\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\text: 'xlsx',\n\t\t\t\t\t\t\t\t\tmime: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (zipHeader.filename.startsWith('xl/')) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'xlsx',\n\t\t\t\t\t\t\tmime: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (zipHeader.filename.startsWith('3D/') && zipHeader.filename.endsWith('.model')) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: '3mf',\n\t\t\t\t\t\t\tmime: 'model/3mf',\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\t// The docx, xlsx and pptx file types extend the Office Open XML file format:\n\t\t\t\t\t// https://en.wikipedia.org/wiki/Office_Open_XML_file_formats\n\t\t\t\t\t// We look for:\n\t\t\t\t\t// - one entry named '[Content_Types].xml' or '_rels/.rels',\n\t\t\t\t\t// - one entry indicating specific type of file.\n\t\t\t\t\t// MS Office, OpenOffice and LibreOffice may put the parts in different order, so the check should not rely on it.\n\t\t\t\t\tif (zipHeader.filename === 'mimetype' && zipHeader.compressedSize === zipHeader.uncompressedSize) {\n\t\t\t\t\t\tlet mimeType = await tokenizer.readToken(new Token.StringType(zipHeader.compressedSize, 'utf-8'));\n\t\t\t\t\t\tmimeType = mimeType.trim();\n\n\t\t\t\t\t\tswitch (mimeType) {\n\t\t\t\t\t\t\tcase 'application/epub+zip':\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\text: 'epub',\n\t\t\t\t\t\t\t\t\tmime: 'application/epub+zip',\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcase 'application/vnd.oasis.opendocument.text':\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\text: 'odt',\n\t\t\t\t\t\t\t\t\tmime: 'application/vnd.oasis.opendocument.text',\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcase 'application/vnd.oasis.opendocument.spreadsheet':\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\text: 'ods',\n\t\t\t\t\t\t\t\t\tmime: 'application/vnd.oasis.opendocument.spreadsheet',\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcase 'application/vnd.oasis.opendocument.presentation':\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\text: 'odp',\n\t\t\t\t\t\t\t\t\tmime: 'application/vnd.oasis.opendocument.presentation',\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Try to find next header manually when current one is corrupted\n\t\t\t\t\tif (zipHeader.compressedSize === 0) {\n\t\t\t\t\t\tlet nextHeaderIndex = -1;\n\n\t\t\t\t\t\twhile (nextHeaderIndex < 0 && (tokenizer.position < tokenizer.fileInfo.size)) {\n\t\t\t\t\t\t\tawait tokenizer.peekBuffer(this.buffer, {mayBeLess: true});\n\n\t\t\t\t\t\t\tnextHeaderIndex = this.buffer.indexOf('504B0304', 0, 'hex');\n\t\t\t\t\t\t\t// Move position to the next header if found, skip the whole buffer otherwise\n\t\t\t\t\t\t\tawait tokenizer.ignore(nextHeaderIndex >= 0 ? nextHeaderIndex : this.buffer.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait tokenizer.ignore(zipHeader.compressedSize);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (!(error instanceof strtok3.EndOfStreamError)) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\text: 'zip',\n\t\t\t\tmime: 'application/zip',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('OggS')) {\n\t\t\t// This is an OGG container\n\t\t\tawait tokenizer.ignore(28);\n\t\t\tconst type = Buffer.alloc(8);\n\t\t\tawait tokenizer.readBuffer(type);\n\n\t\t\t// Needs to be before `ogg` check\n\t\t\tif (_check(type, [0x4F, 0x70, 0x75, 0x73, 0x48, 0x65, 0x61, 0x64])) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'opus',\n\t\t\t\t\tmime: 'audio/opus',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If ' theora' in header.\n\t\t\tif (_check(type, [0x80, 0x74, 0x68, 0x65, 0x6F, 0x72, 0x61])) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'ogv',\n\t\t\t\t\tmime: 'video/ogg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If '\\x01video' in header.\n\t\t\tif (_check(type, [0x01, 0x76, 0x69, 0x64, 0x65, 0x6F, 0x00])) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'ogm',\n\t\t\t\t\tmime: 'video/ogg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If ' FLAC' in header  https://xiph.org/flac/faq.html\n\t\t\tif (_check(type, [0x7F, 0x46, 0x4C, 0x41, 0x43])) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'oga',\n\t\t\t\t\tmime: 'audio/ogg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// 'Speex  ' in header https://en.wikipedia.org/wiki/Speex\n\t\t\tif (_check(type, [0x53, 0x70, 0x65, 0x65, 0x78, 0x20, 0x20])) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'spx',\n\t\t\t\t\tmime: 'audio/ogg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If '\\x01vorbis' in header\n\t\t\tif (_check(type, [0x01, 0x76, 0x6F, 0x72, 0x62, 0x69, 0x73])) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'ogg',\n\t\t\t\t\tmime: 'audio/ogg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Default OGG container https://www.iana.org/assignments/media-types/application/ogg\n\t\t\treturn {\n\t\t\t\text: 'ogx',\n\t\t\t\tmime: 'application/ogg',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.check([0x50, 0x4B])\n\t\t\t&& (this.buffer[2] === 0x3 || this.buffer[2] === 0x5 || this.buffer[2] === 0x7)\n\t\t\t&& (this.buffer[3] === 0x4 || this.buffer[3] === 0x6 || this.buffer[3] === 0x8)\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'zip',\n\t\t\t\tmime: 'application/zip',\n\t\t\t};\n\t\t}\n\n\t\t//\n\n\t\t// File Type Box (https://en.wikipedia.org/wiki/ISO_base_media_file_format)\n\t\t// It's not required to be first, but it's recommended to be. Almost all ISO base media files start with `ftyp` box.\n\t\t// `ftyp` box must contain a brand major identifier, which must consist of ISO 8859-1 printable characters.\n\t\t// Here we check for 8859-1 printable characters (for simplicity, it's a mask which also catches one non-printable character).\n\t\tif (\n\t\t\tthis.checkString('ftyp', {offset: 4})\n\t\t\t&& (this.buffer[8] & 0x60) !== 0x00 // Brand major, first character ASCII?\n\t\t) {\n\t\t\t// They all can have MIME `video/mp4` except `application/mp4` special-case which is hard to detect.\n\t\t\t// For some cases, we're specific, everything else falls to `video/mp4` with `mp4` extension.\n\t\t\tconst brandMajor = this.buffer.toString('binary', 8, 12).replace('\\0', ' ').trim();\n\t\t\tswitch (brandMajor) {\n\t\t\t\tcase 'avif':\n\t\t\t\tcase 'avis':\n\t\t\t\t\treturn {ext: 'avif', mime: 'image/avif'};\n\t\t\t\tcase 'mif1':\n\t\t\t\t\treturn {ext: 'heic', mime: 'image/heif'};\n\t\t\t\tcase 'msf1':\n\t\t\t\t\treturn {ext: 'heic', mime: 'image/heif-sequence'};\n\t\t\t\tcase 'heic':\n\t\t\t\tcase 'heix':\n\t\t\t\t\treturn {ext: 'heic', mime: 'image/heic'};\n\t\t\t\tcase 'hevc':\n\t\t\t\tcase 'hevx':\n\t\t\t\t\treturn {ext: 'heic', mime: 'image/heic-sequence'};\n\t\t\t\tcase 'qt':\n\t\t\t\t\treturn {ext: 'mov', mime: 'video/quicktime'};\n\t\t\t\tcase 'M4V':\n\t\t\t\tcase 'M4VH':\n\t\t\t\tcase 'M4VP':\n\t\t\t\t\treturn {ext: 'm4v', mime: 'video/x-m4v'};\n\t\t\t\tcase 'M4P':\n\t\t\t\t\treturn {ext: 'm4p', mime: 'video/mp4'};\n\t\t\t\tcase 'M4B':\n\t\t\t\t\treturn {ext: 'm4b', mime: 'audio/mp4'};\n\t\t\t\tcase 'M4A':\n\t\t\t\t\treturn {ext: 'm4a', mime: 'audio/x-m4a'};\n\t\t\t\tcase 'F4V':\n\t\t\t\t\treturn {ext: 'f4v', mime: 'video/mp4'};\n\t\t\t\tcase 'F4P':\n\t\t\t\t\treturn {ext: 'f4p', mime: 'video/mp4'};\n\t\t\t\tcase 'F4A':\n\t\t\t\t\treturn {ext: 'f4a', mime: 'audio/mp4'};\n\t\t\t\tcase 'F4B':\n\t\t\t\t\treturn {ext: 'f4b', mime: 'audio/mp4'};\n\t\t\t\tcase 'crx':\n\t\t\t\t\treturn {ext: 'cr3', mime: 'image/x-canon-cr3'};\n\t\t\t\tdefault:\n\t\t\t\t\tif (brandMajor.startsWith('3g')) {\n\t\t\t\t\t\tif (brandMajor.startsWith('3g2')) {\n\t\t\t\t\t\t\treturn {ext: '3g2', mime: 'video/3gpp2'};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {ext: '3gp', mime: 'video/3gpp'};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {ext: 'mp4', mime: 'video/mp4'};\n\t\t\t}\n\t\t}\n\n\t\tif (this.checkString('MThd')) {\n\t\t\treturn {\n\t\t\t\text: 'mid',\n\t\t\t\tmime: 'audio/midi',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.checkString('wOFF')\n\t\t\t&& (\n\t\t\t\tthis.check([0x00, 0x01, 0x00, 0x00], {offset: 4})\n\t\t\t\t|| this.checkString('OTTO', {offset: 4})\n\t\t\t)\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'woff',\n\t\t\t\tmime: 'font/woff',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.checkString('wOF2')\n\t\t\t&& (\n\t\t\t\tthis.check([0x00, 0x01, 0x00, 0x00], {offset: 4})\n\t\t\t\t|| this.checkString('OTTO', {offset: 4})\n\t\t\t)\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'woff2',\n\t\t\t\tmime: 'font/woff2',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xD4, 0xC3, 0xB2, 0xA1]) || this.check([0xA1, 0xB2, 0xC3, 0xD4])) {\n\t\t\treturn {\n\t\t\t\text: 'pcap',\n\t\t\t\tmime: 'application/vnd.tcpdump.pcap',\n\t\t\t};\n\t\t}\n\n\t\t// Sony DSD Stream File (DSF)\n\t\tif (this.checkString('DSD ')) {\n\t\t\treturn {\n\t\t\t\text: 'dsf',\n\t\t\t\tmime: 'audio/x-dsf', // Non-standard\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('LZIP')) {\n\t\t\treturn {\n\t\t\t\text: 'lz',\n\t\t\t\tmime: 'application/x-lzip',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('fLaC')) {\n\t\t\treturn {\n\t\t\t\text: 'flac',\n\t\t\t\tmime: 'audio/x-flac',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x42, 0x50, 0x47, 0xFB])) {\n\t\t\treturn {\n\t\t\t\text: 'bpg',\n\t\t\t\tmime: 'image/bpg',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('wvpk')) {\n\t\t\treturn {\n\t\t\t\text: 'wv',\n\t\t\t\tmime: 'audio/wavpack',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('%PDF')) {\n\t\t\ttry {\n\t\t\t\tawait tokenizer.ignore(1350);\n\t\t\t\tconst maxBufferSize = 10 * 1024 * 1024;\n\t\t\t\tconst buffer = Buffer.alloc(Math.min(maxBufferSize, tokenizer.fileInfo.size));\n\t\t\t\tawait tokenizer.readBuffer(buffer, {mayBeLess: true});\n\n\t\t\t\t// Check if this is an Adobe Illustrator file\n\t\t\t\tif (buffer.includes(Buffer.from('AIPrivateData'))) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'ai',\n\t\t\t\t\t\tmime: 'application/postscript',\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\t// Swallow end of stream error if file is too small for the Adobe AI check\n\t\t\t\tif (!(error instanceof strtok3.EndOfStreamError)) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Assume this is just a normal PDF\n\t\t\treturn {\n\t\t\t\text: 'pdf',\n\t\t\t\tmime: 'application/pdf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x00, 0x61, 0x73, 0x6D])) {\n\t\t\treturn {\n\t\t\t\text: 'wasm',\n\t\t\t\tmime: 'application/wasm',\n\t\t\t};\n\t\t}\n\n\t\t// TIFF, little-endian type\n\t\tif (this.check([0x49, 0x49])) {\n\t\t\tconst fileType = await this.readTiffHeader(false);\n\t\t\tif (fileType) {\n\t\t\t\treturn fileType;\n\t\t\t}\n\t\t}\n\n\t\t// TIFF, big-endian type\n\t\tif (this.check([0x4D, 0x4D])) {\n\t\t\tconst fileType = await this.readTiffHeader(true);\n\t\t\tif (fileType) {\n\t\t\t\treturn fileType;\n\t\t\t}\n\t\t}\n\n\t\tif (this.checkString('MAC ')) {\n\t\t\treturn {\n\t\t\t\text: 'ape',\n\t\t\t\tmime: 'audio/ape',\n\t\t\t};\n\t\t}\n\n\t\t// https://github.com/threatstack/libmagic/blob/master/magic/Magdir/matroska\n\t\tif (this.check([0x1A, 0x45, 0xDF, 0xA3])) { // Root element: EBML\n\t\t\tasync function readField() {\n\t\t\t\tconst msb = await tokenizer.peekNumber(Token.UINT8);\n\t\t\t\tlet mask = 0x80;\n\t\t\t\tlet ic = 0; // 0 = A, 1 = B, 2 = C, 3\n\t\t\t\t// = D\n\n\t\t\t\twhile ((msb & mask) === 0 && mask !== 0) {\n\t\t\t\t\t++ic;\n\t\t\t\t\tmask >>= 1;\n\t\t\t\t}\n\n\t\t\t\tconst id = Buffer.alloc(ic + 1);\n\t\t\t\tawait tokenizer.readBuffer(id);\n\t\t\t\treturn id;\n\t\t\t}\n\n\t\t\tasync function readElement() {\n\t\t\t\tconst id = await readField();\n\t\t\t\tconst lengthField = await readField();\n\t\t\t\tlengthField[0] ^= 0x80 >> (lengthField.length - 1);\n\t\t\t\tconst nrLength = Math.min(6, lengthField.length); // JavaScript can max read 6 bytes integer\n\t\t\t\treturn {\n\t\t\t\t\tid: id.readUIntBE(0, id.length),\n\t\t\t\t\tlen: lengthField.readUIntBE(lengthField.length - nrLength, nrLength),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tasync function readChildren(children) {\n\t\t\t\twhile (children > 0) {\n\t\t\t\t\tconst element = await readElement();\n\t\t\t\t\tif (element.id === 0x42_82) {\n\t\t\t\t\t\tconst rawValue = await tokenizer.readToken(new Token.StringType(element.len, 'utf-8'));\n\t\t\t\t\t\treturn rawValue.replace(/\\00.*$/g, ''); // Return DocType\n\t\t\t\t\t}\n\n\t\t\t\t\tawait tokenizer.ignore(element.len); // ignore payload\n\t\t\t\t\t--children;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst re = await readElement();\n\t\t\tconst docType = await readChildren(re.len);\n\n\t\t\tswitch (docType) {\n\t\t\t\tcase 'webm':\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'webm',\n\t\t\t\t\t\tmime: 'video/webm',\n\t\t\t\t\t};\n\n\t\t\t\tcase 'matroska':\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'mkv',\n\t\t\t\t\t\tmime: 'video/x-matroska',\n\t\t\t\t\t};\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// RIFF file format which might be AVI, WAV, QCP, etc\n\t\tif (this.check([0x52, 0x49, 0x46, 0x46])) {\n\t\t\tif (this.check([0x41, 0x56, 0x49], {offset: 8})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'avi',\n\t\t\t\t\tmime: 'video/vnd.avi',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (this.check([0x57, 0x41, 0x56, 0x45], {offset: 8})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'wav',\n\t\t\t\t\tmime: 'audio/vnd.wave',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// QLCM, QCP file\n\t\t\tif (this.check([0x51, 0x4C, 0x43, 0x4D], {offset: 8})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'qcp',\n\t\t\t\t\tmime: 'audio/qcelp',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (this.checkString('SQLi')) {\n\t\t\treturn {\n\t\t\t\text: 'sqlite',\n\t\t\t\tmime: 'application/x-sqlite3',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x4E, 0x45, 0x53, 0x1A])) {\n\t\t\treturn {\n\t\t\t\text: 'nes',\n\t\t\t\tmime: 'application/x-nintendo-nes-rom',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('Cr24')) {\n\t\t\treturn {\n\t\t\t\text: 'crx',\n\t\t\t\tmime: 'application/x-google-chrome-extension',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.checkString('MSCF')\n\t\t\t|| this.checkString('ISc(')\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'cab',\n\t\t\t\tmime: 'application/vnd.ms-cab-compressed',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xED, 0xAB, 0xEE, 0xDB])) {\n\t\t\treturn {\n\t\t\t\text: 'rpm',\n\t\t\t\tmime: 'application/x-rpm',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xC5, 0xD0, 0xD3, 0xC6])) {\n\t\t\treturn {\n\t\t\t\text: 'eps',\n\t\t\t\tmime: 'application/eps',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x28, 0xB5, 0x2F, 0xFD])) {\n\t\t\treturn {\n\t\t\t\text: 'zst',\n\t\t\t\tmime: 'application/zstd',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x7F, 0x45, 0x4C, 0x46])) {\n\t\t\treturn {\n\t\t\t\text: 'elf',\n\t\t\t\tmime: 'application/x-elf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x21, 0x42, 0x44, 0x4E])) {\n\t\t\treturn {\n\t\t\t\text: 'pst',\n\t\t\t\tmime: 'application/vnd.ms-outlook',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('PAR1')) {\n\t\t\treturn {\n\t\t\t\text: 'parquet',\n\t\t\t\tmime: 'application/x-parquet',\n\t\t\t};\n\t\t}\n\n\t\t// -- 5-byte signatures --\n\n\t\tif (this.check([0x4F, 0x54, 0x54, 0x4F, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'otf',\n\t\t\t\tmime: 'font/otf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('#!AMR')) {\n\t\t\treturn {\n\t\t\t\text: 'amr',\n\t\t\t\tmime: 'audio/amr',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('{\\\\rtf')) {\n\t\t\treturn {\n\t\t\t\text: 'rtf',\n\t\t\t\tmime: 'application/rtf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x46, 0x4C, 0x56, 0x01])) {\n\t\t\treturn {\n\t\t\t\text: 'flv',\n\t\t\t\tmime: 'video/x-flv',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('IMPM')) {\n\t\t\treturn {\n\t\t\t\text: 'it',\n\t\t\t\tmime: 'audio/x-it',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.checkString('-lh0-', {offset: 2})\n\t\t\t|| this.checkString('-lh1-', {offset: 2})\n\t\t\t|| this.checkString('-lh2-', {offset: 2})\n\t\t\t|| this.checkString('-lh3-', {offset: 2})\n\t\t\t|| this.checkString('-lh4-', {offset: 2})\n\t\t\t|| this.checkString('-lh5-', {offset: 2})\n\t\t\t|| this.checkString('-lh6-', {offset: 2})\n\t\t\t|| this.checkString('-lh7-', {offset: 2})\n\t\t\t|| this.checkString('-lzs-', {offset: 2})\n\t\t\t|| this.checkString('-lz4-', {offset: 2})\n\t\t\t|| this.checkString('-lz5-', {offset: 2})\n\t\t\t|| this.checkString('-lhd-', {offset: 2})\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'lzh',\n\t\t\t\tmime: 'application/x-lzh-compressed',\n\t\t\t};\n\t\t}\n\n\t\t// MPEG program stream (PS or MPEG-PS)\n\t\tif (this.check([0x00, 0x00, 0x01, 0xBA])) {\n\t\t\t//  MPEG-PS, MPEG-1 Part 1\n\t\t\tif (this.check([0x21], {offset: 4, mask: [0xF1]})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'mpg', // May also be .ps, .mpeg\n\t\t\t\t\tmime: 'video/MP1S',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// MPEG-PS, MPEG-2 Part 1\n\t\t\tif (this.check([0x44], {offset: 4, mask: [0xC4]})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'mpg', // May also be .mpg, .m2p, .vob or .sub\n\t\t\t\t\tmime: 'video/MP2P',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (this.checkString('ITSF')) {\n\t\t\treturn {\n\t\t\t\text: 'chm',\n\t\t\t\tmime: 'application/vnd.ms-htmlhelp',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xCA, 0xFE, 0xBA, 0xBE])) {\n\t\t\treturn {\n\t\t\t\text: 'class',\n\t\t\t\tmime: 'application/java-vm',\n\t\t\t};\n\t\t}\n\n\t\t// -- 6-byte signatures --\n\n\t\tif (this.check([0xFD, 0x37, 0x7A, 0x58, 0x5A, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'xz',\n\t\t\t\tmime: 'application/x-xz',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('<?xml ')) {\n\t\t\treturn {\n\t\t\t\text: 'xml',\n\t\t\t\tmime: 'application/xml',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x37, 0x7A, 0xBC, 0xAF, 0x27, 0x1C])) {\n\t\t\treturn {\n\t\t\t\text: '7z',\n\t\t\t\tmime: 'application/x-7z-compressed',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.check([0x52, 0x61, 0x72, 0x21, 0x1A, 0x7])\n\t\t\t&& (this.buffer[6] === 0x0 || this.buffer[6] === 0x1)\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'rar',\n\t\t\t\tmime: 'application/x-rar-compressed',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('solid ')) {\n\t\t\treturn {\n\t\t\t\text: 'stl',\n\t\t\t\tmime: 'model/stl',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('AC')) {\n\t\t\tconst version = this.buffer.toString('binary', 2, 6);\n\t\t\tif (version.match('^d*') && version >= 1000 && version <= 1050) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'dwg',\n\t\t\t\t\tmime: 'image/vnd.dwg',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (this.checkString('070707')) {\n\t\t\treturn {\n\t\t\t\text: 'cpio',\n\t\t\t\tmime: 'application/x-cpio',\n\t\t\t};\n\t\t}\n\n\t\t// -- 7-byte signatures --\n\n\t\tif (this.checkString('BLENDER')) {\n\t\t\treturn {\n\t\t\t\text: 'blend',\n\t\t\t\tmime: 'application/x-blender',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('!<arch>')) {\n\t\t\tawait tokenizer.ignore(8);\n\t\t\tconst string = await tokenizer.readToken(new Token.StringType(13, 'ascii'));\n\t\t\tif (string === 'debian-binary') {\n\t\t\t\treturn {\n\t\t\t\t\text: 'deb',\n\t\t\t\t\tmime: 'application/x-deb',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\text: 'ar',\n\t\t\t\tmime: 'application/x-unix-archive',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('**ACE', {offset: 7})) {\n\t\t\tawait tokenizer.peekBuffer(this.buffer, {length: 14, mayBeLess: true});\n\t\t\tif (this.checkString('**', {offset: 12})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'ace',\n\t\t\t\t\tmime: 'application/x-ace-compressed',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t// -- 8-byte signatures --\n\n\t\tif (this.check([0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A])) {\n\t\t\t// APNG format (https://wiki.mozilla.org/APNG_Specification)\n\t\t\t// 1. Find the first IDAT (image data) chunk (49 44 41 54)\n\t\t\t// 2. Check if there is an \"acTL\" chunk before the IDAT one (61 63 54 4C)\n\n\t\t\t// Offset calculated as follows:\n\t\t\t// - 8 bytes: PNG signature\n\t\t\t// - 4 (length) + 4 (chunk type) + 13 (chunk data) + 4 (CRC): IHDR chunk\n\n\t\t\tawait tokenizer.ignore(8); // ignore PNG signature\n\n\t\t\tasync function readChunkHeader() {\n\t\t\t\treturn {\n\t\t\t\t\tlength: await tokenizer.readToken(Token.INT32_BE),\n\t\t\t\t\ttype: await tokenizer.readToken(new Token.StringType(4, 'binary')),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdo {\n\t\t\t\tconst chunk = await readChunkHeader();\n\t\t\t\tif (chunk.length < 0) {\n\t\t\t\t\treturn; // Invalid chunk length\n\t\t\t\t}\n\n\t\t\t\tswitch (chunk.type) {\n\t\t\t\t\tcase 'IDAT':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'png',\n\t\t\t\t\t\t\tmime: 'image/png',\n\t\t\t\t\t\t};\n\t\t\t\t\tcase 'acTL':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'apng',\n\t\t\t\t\t\t\tmime: 'image/apng',\n\t\t\t\t\t\t};\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tawait tokenizer.ignore(chunk.length + 4); // Ignore chunk-data + CRC\n\t\t\t\t}\n\t\t\t} while (tokenizer.position + 8 < tokenizer.fileInfo.size);\n\n\t\t\treturn {\n\t\t\t\text: 'png',\n\t\t\t\tmime: 'image/png',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x41, 0x52, 0x52, 0x4F, 0x57, 0x31, 0x00, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'arrow',\n\t\t\t\tmime: 'application/x-apache-arrow',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x67, 0x6C, 0x54, 0x46, 0x02, 0x00, 0x00, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'glb',\n\t\t\t\tmime: 'model/gltf-binary',\n\t\t\t};\n\t\t}\n\n\t\t// `mov` format variants\n\t\tif (\n\t\t\tthis.check([0x66, 0x72, 0x65, 0x65], {offset: 4}) // `free`\n\t\t\t|| this.check([0x6D, 0x64, 0x61, 0x74], {offset: 4}) // `mdat` MJPEG\n\t\t\t|| this.check([0x6D, 0x6F, 0x6F, 0x76], {offset: 4}) // `moov`\n\t\t\t|| this.check([0x77, 0x69, 0x64, 0x65], {offset: 4}) // `wide`\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'mov',\n\t\t\t\tmime: 'video/quicktime',\n\t\t\t};\n\t\t}\n\n\t\t// -- 9-byte signatures --\n\n\t\tif (this.check([0x49, 0x49, 0x52, 0x4F, 0x08, 0x00, 0x00, 0x00, 0x18])) {\n\t\t\treturn {\n\t\t\t\text: 'orf',\n\t\t\t\tmime: 'image/x-olympus-orf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('gimp xcf ')) {\n\t\t\treturn {\n\t\t\t\text: 'xcf',\n\t\t\t\tmime: 'image/x-xcf',\n\t\t\t};\n\t\t}\n\n\t\t// -- 12-byte signatures --\n\n\t\tif (this.check([0x49, 0x49, 0x55, 0x00, 0x18, 0x00, 0x00, 0x00, 0x88, 0xE7, 0x74, 0xD8])) {\n\t\t\treturn {\n\t\t\t\text: 'rw2',\n\t\t\t\tmime: 'image/x-panasonic-rw2',\n\t\t\t};\n\t\t}\n\n\t\t// ASF_Header_Object first 80 bytes\n\t\tif (this.check([0x30, 0x26, 0xB2, 0x75, 0x8E, 0x66, 0xCF, 0x11, 0xA6, 0xD9])) {\n\t\t\tasync function readHeader() {\n\t\t\t\tconst guid = Buffer.alloc(16);\n\t\t\t\tawait tokenizer.readBuffer(guid);\n\t\t\t\treturn {\n\t\t\t\t\tid: guid,\n\t\t\t\t\tsize: Number(await tokenizer.readToken(Token.UINT64_LE)),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tawait tokenizer.ignore(30);\n\t\t\t// Search for header should be in first 1KB of file.\n\t\t\twhile (tokenizer.position + 24 < tokenizer.fileInfo.size) {\n\t\t\t\tconst header = await readHeader();\n\t\t\t\tlet payload = header.size - 24;\n\t\t\t\tif (_check(header.id, [0x91, 0x07, 0xDC, 0xB7, 0xB7, 0xA9, 0xCF, 0x11, 0x8E, 0xE6, 0x00, 0xC0, 0x0C, 0x20, 0x53, 0x65])) {\n\t\t\t\t\t// Sync on Stream-Properties-Object (B7DC0791-A9B7-11CF-8EE6-00C00C205365)\n\t\t\t\t\tconst typeId = Buffer.alloc(16);\n\t\t\t\t\tpayload -= await tokenizer.readBuffer(typeId);\n\n\t\t\t\t\tif (_check(typeId, [0x40, 0x9E, 0x69, 0xF8, 0x4D, 0x5B, 0xCF, 0x11, 0xA8, 0xFD, 0x00, 0x80, 0x5F, 0x5C, 0x44, 0x2B])) {\n\t\t\t\t\t\t// Found audio:\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'asf',\n\t\t\t\t\t\t\tmime: 'audio/x-ms-asf',\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_check(typeId, [0xC0, 0xEF, 0x19, 0xBC, 0x4D, 0x5B, 0xCF, 0x11, 0xA8, 0xFD, 0x00, 0x80, 0x5F, 0x5C, 0x44, 0x2B])) {\n\t\t\t\t\t\t// Found video:\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'asf',\n\t\t\t\t\t\t\tmime: 'video/x-ms-asf',\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tawait tokenizer.ignore(payload);\n\t\t\t}\n\n\t\t\t// Default to ASF generic extension\n\t\t\treturn {\n\t\t\t\text: 'asf',\n\t\t\t\tmime: 'application/vnd.ms-asf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xAB, 0x4B, 0x54, 0x58, 0x20, 0x31, 0x31, 0xBB, 0x0D, 0x0A, 0x1A, 0x0A])) {\n\t\t\treturn {\n\t\t\t\text: 'ktx',\n\t\t\t\tmime: 'image/ktx',\n\t\t\t};\n\t\t}\n\n\t\tif ((this.check([0x7E, 0x10, 0x04]) || this.check([0x7E, 0x18, 0x04])) && this.check([0x30, 0x4D, 0x49, 0x45], {offset: 4})) {\n\t\t\treturn {\n\t\t\t\text: 'mie',\n\t\t\t\tmime: 'application/x-mie',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x27, 0x0A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], {offset: 2})) {\n\t\t\treturn {\n\t\t\t\text: 'shp',\n\t\t\t\tmime: 'application/x-esri-shape',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xFF, 0x4F, 0xFF, 0x51])) {\n\t\t\treturn {\n\t\t\t\text: 'j2c',\n\t\t\t\tmime: 'image/j2c',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x00, 0x00, 0x00, 0x0C, 0x6A, 0x50, 0x20, 0x20, 0x0D, 0x0A, 0x87, 0x0A])) {\n\t\t\t// JPEG-2000 family\n\n\t\t\tawait tokenizer.ignore(20);\n\t\t\tconst type = await tokenizer.readToken(new Token.StringType(4, 'ascii'));\n\t\t\tswitch (type) {\n\t\t\t\tcase 'jp2 ':\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'jp2',\n\t\t\t\t\t\tmime: 'image/jp2',\n\t\t\t\t\t};\n\t\t\t\tcase 'jpx ':\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'jpx',\n\t\t\t\t\t\tmime: 'image/jpx',\n\t\t\t\t\t};\n\t\t\t\tcase 'jpm ':\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'jpm',\n\t\t\t\t\t\tmime: 'image/jpm',\n\t\t\t\t\t};\n\t\t\t\tcase 'mjp2':\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'mj2',\n\t\t\t\t\t\tmime: 'image/mj2',\n\t\t\t\t\t};\n\t\t\t\tdefault:\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tthis.check([0xFF, 0x0A])\n\t\t\t|| this.check([0x00, 0x00, 0x00, 0x0C, 0x4A, 0x58, 0x4C, 0x20, 0x0D, 0x0A, 0x87, 0x0A])\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'jxl',\n\t\t\t\tmime: 'image/jxl',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xFE, 0xFF])) { // UTF-16-BOM-LE\n\t\t\tif (this.check([0, 60, 0, 63, 0, 120, 0, 109, 0, 108], {offset: 2})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'xml',\n\t\t\t\t\tmime: 'application/xml',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn undefined; // Some unknown text based format\n\t\t}\n\n\t\t// -- Unsafe signatures --\n\n\t\tif (\n\t\t\tthis.check([0x0, 0x0, 0x1, 0xBA])\n\t\t\t|| this.check([0x0, 0x0, 0x1, 0xB3])\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'mpg',\n\t\t\t\tmime: 'video/mpeg',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x00, 0x01, 0x00, 0x00, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'ttf',\n\t\t\t\tmime: 'font/ttf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x00, 0x00, 0x01, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'ico',\n\t\t\t\tmime: 'image/x-icon',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x00, 0x00, 0x02, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'cur',\n\t\t\t\tmime: 'image/x-icon',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1])) {\n\t\t\t// Detected Microsoft Compound File Binary File (MS-CFB) Format.\n\t\t\treturn {\n\t\t\t\text: 'cfb',\n\t\t\t\tmime: 'application/x-cfb',\n\t\t\t};\n\t\t}\n\n\t\t// Increase sample size from 12 to 256.\n\t\tawait tokenizer.peekBuffer(this.buffer, {length: Math.min(256, tokenizer.fileInfo.size), mayBeLess: true});\n\n\t\t// -- 15-byte signatures --\n\n\t\tif (this.checkString('BEGIN:')) {\n\t\t\tif (this.checkString('VCARD', {offset: 6})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'vcf',\n\t\t\t\t\tmime: 'text/vcard',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (this.checkString('VCALENDAR', {offset: 6})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'ics',\n\t\t\t\t\tmime: 'text/calendar',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t// `raf` is here just to keep all the raw image detectors together.\n\t\tif (this.checkString('FUJIFILMCCD-RAW')) {\n\t\t\treturn {\n\t\t\t\text: 'raf',\n\t\t\t\tmime: 'image/x-fujifilm-raf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('Extended Module:')) {\n\t\t\treturn {\n\t\t\t\text: 'xm',\n\t\t\t\tmime: 'audio/x-xm',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('Creative Voice File')) {\n\t\t\treturn {\n\t\t\t\text: 'voc',\n\t\t\t\tmime: 'audio/x-voc',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x04, 0x00, 0x00, 0x00]) && this.buffer.length >= 16) { // Rough & quick check Pickle/ASAR\n\t\t\tconst jsonSize = this.buffer.readUInt32LE(12);\n\t\t\tif (jsonSize > 12 && this.buffer.length >= jsonSize + 16) {\n\t\t\t\ttry {\n\t\t\t\t\tconst header = this.buffer.slice(16, jsonSize + 16).toString();\n\t\t\t\t\tconst json = JSON.parse(header);\n\t\t\t\t\t// Check if Pickle is ASAR\n\t\t\t\t\tif (json.files) { // Final check, assuring Pickle/ASAR format\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\text: 'asar',\n\t\t\t\t\t\t\tmime: 'application/x-asar',\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t} catch {}\n\t\t\t}\n\t\t}\n\n\t\tif (this.check([0x06, 0x0E, 0x2B, 0x34, 0x02, 0x05, 0x01, 0x01, 0x0D, 0x01, 0x02, 0x01, 0x01, 0x02])) {\n\t\t\treturn {\n\t\t\t\text: 'mxf',\n\t\t\t\tmime: 'application/mxf',\n\t\t\t};\n\t\t}\n\n\t\tif (this.checkString('SCRM', {offset: 44})) {\n\t\t\treturn {\n\t\t\t\text: 's3m',\n\t\t\t\tmime: 'audio/x-s3m',\n\t\t\t};\n\t\t}\n\n\t\t// Raw MPEG-2 transport stream (188-byte packets)\n\t\tif (this.check([0x47]) && this.check([0x47], {offset: 188})) {\n\t\t\treturn {\n\t\t\t\text: 'mts',\n\t\t\t\tmime: 'video/mp2t',\n\t\t\t};\n\t\t}\n\n\t\t// Blu-ray Disc Audio-Video (BDAV) MPEG-2 transport stream has 4-byte TP_extra_header before each 188-byte packet\n\t\tif (this.check([0x47], {offset: 4}) && this.check([0x47], {offset: 196})) {\n\t\t\treturn {\n\t\t\t\text: 'mts',\n\t\t\t\tmime: 'video/mp2t',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x42, 0x4F, 0x4F, 0x4B, 0x4D, 0x4F, 0x42, 0x49], {offset: 60})) {\n\t\t\treturn {\n\t\t\t\text: 'mobi',\n\t\t\t\tmime: 'application/x-mobipocket-ebook',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x44, 0x49, 0x43, 0x4D], {offset: 128})) {\n\t\t\treturn {\n\t\t\t\text: 'dcm',\n\t\t\t\tmime: 'application/dicom',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x4C, 0x00, 0x00, 0x00, 0x01, 0x14, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x46])) {\n\t\t\treturn {\n\t\t\t\text: 'lnk',\n\t\t\t\tmime: 'application/x.ms.shortcut', // Invented by us\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x62, 0x6F, 0x6F, 0x6B, 0x00, 0x00, 0x00, 0x00, 0x6D, 0x61, 0x72, 0x6B, 0x00, 0x00, 0x00, 0x00])) {\n\t\t\treturn {\n\t\t\t\text: 'alias',\n\t\t\t\tmime: 'application/x.apple.alias', // Invented by us\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tthis.check([0x4C, 0x50], {offset: 34})\n\t\t\t&& (\n\t\t\t\tthis.check([0x00, 0x00, 0x01], {offset: 8})\n\t\t\t\t|| this.check([0x01, 0x00, 0x02], {offset: 8})\n\t\t\t\t|| this.check([0x02, 0x00, 0x02], {offset: 8})\n\t\t\t)\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'eot',\n\t\t\t\tmime: 'application/vnd.ms-fontobject',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0x06, 0x06, 0xED, 0xF5, 0xD8, 0x1D, 0x46, 0xE5, 0xBD, 0x31, 0xEF, 0xE7, 0xFE, 0x74, 0xB7, 0x1D])) {\n\t\t\treturn {\n\t\t\t\text: 'indd',\n\t\t\t\tmime: 'application/x-indesign',\n\t\t\t};\n\t\t}\n\n\t\t// Increase sample size from 256 to 512\n\t\tawait tokenizer.peekBuffer(this.buffer, {length: Math.min(512, tokenizer.fileInfo.size), mayBeLess: true});\n\n\t\t// Requires a buffer size of 512 bytes\n\t\tif (tarHeaderChecksumMatches(this.buffer)) {\n\t\t\treturn {\n\t\t\t\text: 'tar',\n\t\t\t\tmime: 'application/x-tar',\n\t\t\t};\n\t\t}\n\n\t\tif (this.check([0xFF, 0xFE])) { // UTF-16-BOM-BE\n\t\t\tif (this.check([60, 0, 63, 0, 120, 0, 109, 0, 108, 0], {offset: 2})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'xml',\n\t\t\t\t\tmime: 'application/xml',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (this.check([0xFF, 0x0E, 0x53, 0x00, 0x6B, 0x00, 0x65, 0x00, 0x74, 0x00, 0x63, 0x00, 0x68, 0x00, 0x55, 0x00, 0x70, 0x00, 0x20, 0x00, 0x4D, 0x00, 0x6F, 0x00, 0x64, 0x00, 0x65, 0x00, 0x6C, 0x00], {offset: 2})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'skp',\n\t\t\t\t\tmime: 'application/vnd.sketchup.skp',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn undefined; // Some text based format\n\t\t}\n\n\t\tif (this.checkString('-----BEGIN PGP MESSAGE-----')) {\n\t\t\treturn {\n\t\t\t\text: 'pgp',\n\t\t\t\tmime: 'application/pgp-encrypted',\n\t\t\t};\n\t\t}\n\n\t\t// Check MPEG 1 or 2 Layer 3 header, or 'layer 0' for ADTS (MPEG sync-word 0xFFE)\n\t\tif (this.buffer.length >= 2 && this.check([0xFF, 0xE0], {offset: 0, mask: [0xFF, 0xE0]})) {\n\t\t\tif (this.check([0x10], {offset: 1, mask: [0x16]})) {\n\t\t\t\t// Check for (ADTS) MPEG-2\n\t\t\t\tif (this.check([0x08], {offset: 1, mask: [0x08]})) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'aac',\n\t\t\t\t\t\tmime: 'audio/aac',\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Must be (ADTS) MPEG-4\n\t\t\t\treturn {\n\t\t\t\t\text: 'aac',\n\t\t\t\t\tmime: 'audio/aac',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// MPEG 1 or 2 Layer 3 header\n\t\t\t// Check for MPEG layer 3\n\t\t\tif (this.check([0x02], {offset: 1, mask: [0x06]})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'mp3',\n\t\t\t\t\tmime: 'audio/mpeg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Check for MPEG layer 2\n\t\t\tif (this.check([0x04], {offset: 1, mask: [0x06]})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'mp2',\n\t\t\t\t\tmime: 'audio/mpeg',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Check for MPEG layer 1\n\t\t\tif (this.check([0x06], {offset: 1, mask: [0x06]})) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'mp1',\n\t\t\t\t\tmime: 'audio/mpeg',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\tasync readTiffTag(bigEndian) {\n\t\tconst tagId = await this.tokenizer.readToken(bigEndian ? Token.UINT16_BE : Token.UINT16_LE);\n\t\tthis.tokenizer.ignore(10);\n\t\tswitch (tagId) {\n\t\t\tcase 50_341:\n\t\t\t\treturn {\n\t\t\t\t\text: 'arw',\n\t\t\t\t\tmime: 'image/x-sony-arw',\n\t\t\t\t};\n\t\t\tcase 50_706:\n\t\t\t\treturn {\n\t\t\t\t\text: 'dng',\n\t\t\t\t\tmime: 'image/x-adobe-dng',\n\t\t\t\t};\n\t\t\tdefault:\n\t\t}\n\t}\n\n\tasync readTiffIFD(bigEndian) {\n\t\tconst numberOfTags = await this.tokenizer.readToken(bigEndian ? Token.UINT16_BE : Token.UINT16_LE);\n\t\tfor (let n = 0; n < numberOfTags; ++n) {\n\t\t\tconst fileType = await this.readTiffTag(bigEndian);\n\t\t\tif (fileType) {\n\t\t\t\treturn fileType;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync readTiffHeader(bigEndian) {\n\t\tconst version = (bigEndian ? Token.UINT16_BE : Token.UINT16_LE).get(this.buffer, 2);\n\t\tconst ifdOffset = (bigEndian ? Token.UINT32_BE : Token.UINT32_LE).get(this.buffer, 4);\n\n\t\tif (version === 42) {\n\t\t\t// TIFF file header\n\t\t\tif (ifdOffset >= 6) {\n\t\t\t\tif (this.checkString('CR', {offset: 8})) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'cr2',\n\t\t\t\t\t\tmime: 'image/x-canon-cr2',\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tif (ifdOffset >= 8 && (this.check([0x1C, 0x00, 0xFE, 0x00], {offset: 8}) || this.check([0x1F, 0x00, 0x0B, 0x00], {offset: 8}))) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'nef',\n\t\t\t\t\t\tmime: 'image/x-nikon-nef',\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this.tokenizer.ignore(ifdOffset);\n\t\t\tconst fileType = await this.readTiffIFD(bigEndian);\n\t\t\treturn fileType ?? {\n\t\t\t\text: 'tif',\n\t\t\t\tmime: 'image/tiff',\n\t\t\t};\n\t\t}\n\n\t\tif (version === 43) {\t// Big TIFF file header\n\t\t\treturn {\n\t\t\t\text: 'tif',\n\t\t\t\tmime: 'image/tiff',\n\t\t\t};\n\t\t}\n\t}\n}\n\nexport async function fileTypeStream(readableStream, {sampleSize = minimumBytes} = {}) {\n\tconst {default: stream} = await import('node:stream');\n\n\treturn new Promise((resolve, reject) => {\n\t\treadableStream.on('error', reject);\n\n\t\treadableStream.once('readable', () => {\n\t\t\t(async () => {\n\t\t\t\ttry {\n\t\t\t\t\t// Set up output stream\n\t\t\t\t\tconst pass = new stream.PassThrough();\n\t\t\t\t\tconst outputStream = stream.pipeline ? stream.pipeline(readableStream, pass, () => {}) : readableStream.pipe(pass);\n\n\t\t\t\t\t// Read the input stream and detect the filetype\n\t\t\t\t\tconst chunk = readableStream.read(sampleSize) ?? readableStream.read() ?? Buffer.alloc(0);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst fileType = await fileTypeFromBuffer(chunk);\n\t\t\t\t\t\tpass.fileType = fileType;\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tif (error instanceof strtok3.EndOfStreamError) {\n\t\t\t\t\t\t\tpass.fileType = undefined;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(outputStream);\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t})();\n\t\t});\n\t});\n}\n\nexport const supportedExtensions = new Set(extensions);\nexport const supportedMimeTypes = new Set(mimeTypes);\n","export const extensions = [\n\t'jpg',\n\t'png',\n\t'apng',\n\t'gif',\n\t'webp',\n\t'flif',\n\t'xcf',\n\t'cr2',\n\t'cr3',\n\t'orf',\n\t'arw',\n\t'dng',\n\t'nef',\n\t'rw2',\n\t'raf',\n\t'tif',\n\t'bmp',\n\t'icns',\n\t'jxr',\n\t'psd',\n\t'indd',\n\t'zip',\n\t'tar',\n\t'rar',\n\t'gz',\n\t'bz2',\n\t'7z',\n\t'dmg',\n\t'mp4',\n\t'mid',\n\t'mkv',\n\t'webm',\n\t'mov',\n\t'avi',\n\t'mpg',\n\t'mp2',\n\t'mp3',\n\t'm4a',\n\t'oga',\n\t'ogg',\n\t'ogv',\n\t'opus',\n\t'flac',\n\t'wav',\n\t'spx',\n\t'amr',\n\t'pdf',\n\t'epub',\n\t'elf',\n\t'exe',\n\t'swf',\n\t'rtf',\n\t'wasm',\n\t'woff',\n\t'woff2',\n\t'eot',\n\t'ttf',\n\t'otf',\n\t'ico',\n\t'flv',\n\t'ps',\n\t'xz',\n\t'sqlite',\n\t'nes',\n\t'crx',\n\t'xpi',\n\t'cab',\n\t'deb',\n\t'ar',\n\t'rpm',\n\t'Z',\n\t'lz',\n\t'cfb',\n\t'mxf',\n\t'mts',\n\t'blend',\n\t'bpg',\n\t'docx',\n\t'pptx',\n\t'xlsx',\n\t'3gp',\n\t'3g2',\n\t'j2c',\n\t'jp2',\n\t'jpm',\n\t'jpx',\n\t'mj2',\n\t'aif',\n\t'qcp',\n\t'odt',\n\t'ods',\n\t'odp',\n\t'xml',\n\t'mobi',\n\t'heic',\n\t'cur',\n\t'ktx',\n\t'ape',\n\t'wv',\n\t'dcm',\n\t'ics',\n\t'glb',\n\t'pcap',\n\t'dsf',\n\t'lnk',\n\t'alias',\n\t'voc',\n\t'ac3',\n\t'm4v',\n\t'm4p',\n\t'm4b',\n\t'f4v',\n\t'f4p',\n\t'f4b',\n\t'f4a',\n\t'mie',\n\t'asf',\n\t'ogm',\n\t'ogx',\n\t'mpc',\n\t'arrow',\n\t'shp',\n\t'aac',\n\t'mp1',\n\t'it',\n\t's3m',\n\t'xm',\n\t'ai',\n\t'skp',\n\t'avif',\n\t'eps',\n\t'lzh',\n\t'pgp',\n\t'asar',\n\t'stl',\n\t'chm',\n\t'3mf',\n\t'zst',\n\t'jxl',\n\t'vcf',\n\t'jls',\n\t'pst',\n\t'dwg',\n\t'parquet',\n\t'class',\n\t'arj',\n\t'cpio',\n\t'ace',\n];\n\nexport const mimeTypes = [\n\t'image/jpeg',\n\t'image/png',\n\t'image/gif',\n\t'image/webp',\n\t'image/flif',\n\t'image/x-xcf',\n\t'image/x-canon-cr2',\n\t'image/x-canon-cr3',\n\t'image/tiff',\n\t'image/bmp',\n\t'image/vnd.ms-photo',\n\t'image/vnd.adobe.photoshop',\n\t'application/x-indesign',\n\t'application/epub+zip',\n\t'application/x-xpinstall',\n\t'application/vnd.oasis.opendocument.text',\n\t'application/vnd.oasis.opendocument.spreadsheet',\n\t'application/vnd.oasis.opendocument.presentation',\n\t'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n\t'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n\t'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n\t'application/zip',\n\t'application/x-tar',\n\t'application/x-rar-compressed',\n\t'application/gzip',\n\t'application/x-bzip2',\n\t'application/x-7z-compressed',\n\t'application/x-apple-diskimage',\n\t'application/x-apache-arrow',\n\t'video/mp4',\n\t'audio/midi',\n\t'video/x-matroska',\n\t'video/webm',\n\t'video/quicktime',\n\t'video/vnd.avi',\n\t'audio/vnd.wave',\n\t'audio/qcelp',\n\t'audio/x-ms-asf',\n\t'video/x-ms-asf',\n\t'application/vnd.ms-asf',\n\t'video/mpeg',\n\t'video/3gpp',\n\t'audio/mpeg',\n\t'audio/mp4', // RFC 4337\n\t'audio/opus',\n\t'video/ogg',\n\t'audio/ogg',\n\t'application/ogg',\n\t'audio/x-flac',\n\t'audio/ape',\n\t'audio/wavpack',\n\t'audio/amr',\n\t'application/pdf',\n\t'application/x-elf',\n\t'application/x-msdownload',\n\t'application/x-shockwave-flash',\n\t'application/rtf',\n\t'application/wasm',\n\t'font/woff',\n\t'font/woff2',\n\t'application/vnd.ms-fontobject',\n\t'font/ttf',\n\t'font/otf',\n\t'image/x-icon',\n\t'video/x-flv',\n\t'application/postscript',\n\t'application/eps',\n\t'application/x-xz',\n\t'application/x-sqlite3',\n\t'application/x-nintendo-nes-rom',\n\t'application/x-google-chrome-extension',\n\t'application/vnd.ms-cab-compressed',\n\t'application/x-deb',\n\t'application/x-unix-archive',\n\t'application/x-rpm',\n\t'application/x-compress',\n\t'application/x-lzip',\n\t'application/x-cfb',\n\t'application/x-mie',\n\t'application/mxf',\n\t'video/mp2t',\n\t'application/x-blender',\n\t'image/bpg',\n\t'image/j2c',\n\t'image/jp2',\n\t'image/jpx',\n\t'image/jpm',\n\t'image/mj2',\n\t'audio/aiff',\n\t'application/xml',\n\t'application/x-mobipocket-ebook',\n\t'image/heif',\n\t'image/heif-sequence',\n\t'image/heic',\n\t'image/heic-sequence',\n\t'image/icns',\n\t'image/ktx',\n\t'application/dicom',\n\t'audio/x-musepack',\n\t'text/calendar',\n\t'text/vcard',\n\t'model/gltf-binary',\n\t'application/vnd.tcpdump.pcap',\n\t'audio/x-dsf', // Non-standard\n\t'application/x.ms.shortcut', // Invented by us\n\t'application/x.apple.alias', // Invented by us\n\t'audio/x-voc',\n\t'audio/vnd.dolby.dd-raw',\n\t'audio/x-m4a',\n\t'image/apng',\n\t'image/x-olympus-orf',\n\t'image/x-sony-arw',\n\t'image/x-adobe-dng',\n\t'image/x-nikon-nef',\n\t'image/x-panasonic-rw2',\n\t'image/x-fujifilm-raf',\n\t'video/x-m4v',\n\t'video/3gpp2',\n\t'application/x-esri-shape',\n\t'audio/aac',\n\t'audio/x-it',\n\t'audio/x-s3m',\n\t'audio/x-xm',\n\t'video/MP1S',\n\t'video/MP2P',\n\t'application/vnd.sketchup.skp',\n\t'image/avif',\n\t'application/x-lzh-compressed',\n\t'application/pgp-encrypted',\n\t'application/x-asar',\n\t'model/stl',\n\t'application/vnd.ms-htmlhelp',\n\t'model/3mf',\n\t'image/jxl',\n\t'application/zstd',\n\t'image/jls',\n\t'application/vnd.ms-outlook',\n\t'image/vnd.dwg',\n\t'application/x-parquet',\n\t'application/java-vm',\n\t'application/x-arj',\n\t'application/x-cpio',\n\t'application/x-ace-compressed',\n];\n","export const defaultJsonSerializer = {\n    parse: JSON.parse,\n    stringify: JSON.stringify,\n};\n//# sourceMappingURL=defaultJsonSerializer.js.map","import { defaultJsonSerializer } from './defaultJsonSerializer.js';\nimport { extractFiles, isExtractableFile } from 'extract-files';\nimport FormDataNode from 'form-data';\n/**\n * Duck type if NodeJS stream\n * https://github.com/sindresorhus/is-stream/blob/3750505b0727f6df54324784fe369365ef78841e/index.js#L3\n */\nconst isExtractableFileEnhanced = (value) => isExtractableFile(value) ||\n    (value !== null && typeof value === `object` && typeof value.pipe === `function`);\n/**\n * Returns Multipart Form if body contains files\n * (https://github.com/jaydenseric/graphql-multipart-request-spec)\n * Otherwise returns JSON\n */\nconst createRequestBody = (query, variables, operationName, jsonSerializer = defaultJsonSerializer) => {\n    const { clone, files } = extractFiles({ query, variables, operationName }, ``, isExtractableFileEnhanced);\n    if (files.size === 0) {\n        if (!Array.isArray(query)) {\n            return jsonSerializer.stringify(clone);\n        }\n        if (typeof variables !== `undefined` && !Array.isArray(variables)) {\n            throw new Error(`Cannot create request body with given variable type, array expected`);\n        }\n        // Batch support\n        const payload = query.reduce((accu, currentQuery, index) => {\n            accu.push({ query: currentQuery, variables: variables ? variables[index] : undefined });\n            return accu;\n        }, []);\n        return jsonSerializer.stringify(payload);\n    }\n    const Form = typeof FormData === `undefined` ? FormDataNode : FormData;\n    const form = new Form();\n    form.append(`operations`, jsonSerializer.stringify(clone));\n    const map = {};\n    let i = 0;\n    files.forEach((paths) => {\n        map[++i] = paths;\n    });\n    form.append(`map`, jsonSerializer.stringify(map));\n    i = 0;\n    files.forEach((paths, file) => {\n        form.append(`${++i}`, file);\n    });\n    return form;\n};\nexport default createRequestBody;\n//# sourceMappingURL=createRequestBody.js.map","export const uppercase = (str) => str.toUpperCase();\n/**\n * Convert Headers instance into regular object\n */\nexport const HeadersInstanceToPlainObject = (headers) => {\n    const o = {};\n    headers.forEach((v, k) => {\n        o[k] = v;\n    });\n    return o;\n};\n//# sourceMappingURL=helpers.js.map","export const parseRequestArgs = (documentOrOptions, variables, requestHeaders) => {\n    return documentOrOptions.document\n        ? documentOrOptions\n        : {\n            document: documentOrOptions,\n            variables: variables,\n            requestHeaders: requestHeaders,\n            signal: undefined,\n        };\n};\nexport const parseRawRequestArgs = (queryOrOptions, variables, requestHeaders) => {\n    return queryOrOptions.query\n        ? queryOrOptions\n        : {\n            query: queryOrOptions,\n            variables: variables,\n            requestHeaders: requestHeaders,\n            signal: undefined,\n        };\n};\nexport const parseBatchRequestArgs = (documentsOrOptions, requestHeaders) => {\n    return documentsOrOptions.documents\n        ? documentsOrOptions\n        : {\n            documents: documentsOrOptions,\n            requestHeaders: requestHeaders,\n            signal: undefined,\n        };\n};\nexport const parseRequestExtendedArgs = (urlOrOptions, document, ...variablesAndRequestHeaders) => {\n    const [variables, requestHeaders] = variablesAndRequestHeaders;\n    return urlOrOptions.document\n        ? urlOrOptions\n        : {\n            url: urlOrOptions,\n            document: document,\n            variables,\n            requestHeaders,\n            signal: undefined,\n        };\n};\nexport const parseRawRequestExtendedArgs = (urlOrOptions, query, ...variablesAndRequestHeaders) => {\n    const [variables, requestHeaders] = variablesAndRequestHeaders;\n    return urlOrOptions.query\n        ? urlOrOptions\n        : {\n            url: urlOrOptions,\n            query: query,\n            variables,\n            requestHeaders,\n            signal: undefined,\n        };\n};\n//# sourceMappingURL=parseArgs.js.map","/**\n * Prints a string as a GraphQL StringValue literal. Replaces control characters\n * and excluded characters (\" U+0022 and \\\\ U+005C) with escape sequences.\n */\nexport function printString(str) {\n  return `\"${str.replace(escapedRegExp, escapedReplacer)}\"`;\n} // eslint-disable-next-line no-control-regex\n\nconst escapedRegExp = /[\\x00-\\x1f\\x22\\x5c\\x7f-\\x9f]/g;\n\nfunction escapedReplacer(str) {\n  return escapeSequences[str.charCodeAt(0)];\n} // prettier-ignore\n\nconst escapeSequences = [\n  '\\\\u0000',\n  '\\\\u0001',\n  '\\\\u0002',\n  '\\\\u0003',\n  '\\\\u0004',\n  '\\\\u0005',\n  '\\\\u0006',\n  '\\\\u0007',\n  '\\\\b',\n  '\\\\t',\n  '\\\\n',\n  '\\\\u000B',\n  '\\\\f',\n  '\\\\r',\n  '\\\\u000E',\n  '\\\\u000F',\n  '\\\\u0010',\n  '\\\\u0011',\n  '\\\\u0012',\n  '\\\\u0013',\n  '\\\\u0014',\n  '\\\\u0015',\n  '\\\\u0016',\n  '\\\\u0017',\n  '\\\\u0018',\n  '\\\\u0019',\n  '\\\\u001A',\n  '\\\\u001B',\n  '\\\\u001C',\n  '\\\\u001D',\n  '\\\\u001E',\n  '\\\\u001F',\n  '',\n  '',\n  '\\\\\"',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '', // 2F\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '', // 3F\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '', // 4F\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '\\\\\\\\',\n  '',\n  '',\n  '', // 5F\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '', // 6F\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '\\\\u007F',\n  '\\\\u0080',\n  '\\\\u0081',\n  '\\\\u0082',\n  '\\\\u0083',\n  '\\\\u0084',\n  '\\\\u0085',\n  '\\\\u0086',\n  '\\\\u0087',\n  '\\\\u0088',\n  '\\\\u0089',\n  '\\\\u008A',\n  '\\\\u008B',\n  '\\\\u008C',\n  '\\\\u008D',\n  '\\\\u008E',\n  '\\\\u008F',\n  '\\\\u0090',\n  '\\\\u0091',\n  '\\\\u0092',\n  '\\\\u0093',\n  '\\\\u0094',\n  '\\\\u0095',\n  '\\\\u0096',\n  '\\\\u0097',\n  '\\\\u0098',\n  '\\\\u0099',\n  '\\\\u009A',\n  '\\\\u009B',\n  '\\\\u009C',\n  '\\\\u009D',\n  '\\\\u009E',\n  '\\\\u009F',\n];\n","import { devAssert } from '../jsutils/devAssert.mjs';\nimport { inspect } from '../jsutils/inspect.mjs';\nimport { isNode, QueryDocumentKeys } from './ast.mjs';\nimport { Kind } from './kinds.mjs';\n/**\n * A visitor is provided to visit, it contains the collection of\n * relevant functions to be called during the visitor's traversal.\n */\n\nexport const BREAK = Object.freeze({});\n/**\n * visit() will walk through an AST using a depth-first traversal, calling\n * the visitor's enter function at each node in the traversal, and calling the\n * leave function after visiting that node and all of its child nodes.\n *\n * By returning different values from the enter and leave functions, the\n * behavior of the visitor can be altered, including skipping over a sub-tree of\n * the AST (by returning false), editing the AST by returning a value or null\n * to remove the value, or to stop the whole traversal by returning BREAK.\n *\n * When using visit() to edit an AST, the original AST will not be modified, and\n * a new version of the AST with the changes applied will be returned from the\n * visit function.\n *\n * ```ts\n * const editedAST = visit(ast, {\n *   enter(node, key, parent, path, ancestors) {\n *     // @return\n *     //   undefined: no action\n *     //   false: skip visiting this node\n *     //   visitor.BREAK: stop visiting altogether\n *     //   null: delete this node\n *     //   any value: replace this node with the returned value\n *   },\n *   leave(node, key, parent, path, ancestors) {\n *     // @return\n *     //   undefined: no action\n *     //   false: no action\n *     //   visitor.BREAK: stop visiting altogether\n *     //   null: delete this node\n *     //   any value: replace this node with the returned value\n *   }\n * });\n * ```\n *\n * Alternatively to providing enter() and leave() functions, a visitor can\n * instead provide functions named the same as the kinds of AST nodes, or\n * enter/leave visitors at a named key, leading to three permutations of the\n * visitor API:\n *\n * 1) Named visitors triggered when entering a node of a specific kind.\n *\n * ```ts\n * visit(ast, {\n *   Kind(node) {\n *     // enter the \"Kind\" node\n *   }\n * })\n * ```\n *\n * 2) Named visitors that trigger upon entering and leaving a node of a specific kind.\n *\n * ```ts\n * visit(ast, {\n *   Kind: {\n *     enter(node) {\n *       // enter the \"Kind\" node\n *     }\n *     leave(node) {\n *       // leave the \"Kind\" node\n *     }\n *   }\n * })\n * ```\n *\n * 3) Generic visitors that trigger upon entering and leaving any node.\n *\n * ```ts\n * visit(ast, {\n *   enter(node) {\n *     // enter any node\n *   },\n *   leave(node) {\n *     // leave any node\n *   }\n * })\n * ```\n */\n\nexport function visit(root, visitor, visitorKeys = QueryDocumentKeys) {\n  const enterLeaveMap = new Map();\n\n  for (const kind of Object.values(Kind)) {\n    enterLeaveMap.set(kind, getEnterLeaveForKind(visitor, kind));\n  }\n  /* eslint-disable no-undef-init */\n\n  let stack = undefined;\n  let inArray = Array.isArray(root);\n  let keys = [root];\n  let index = -1;\n  let edits = [];\n  let node = root;\n  let key = undefined;\n  let parent = undefined;\n  const path = [];\n  const ancestors = [];\n  /* eslint-enable no-undef-init */\n\n  do {\n    index++;\n    const isLeaving = index === keys.length;\n    const isEdited = isLeaving && edits.length !== 0;\n\n    if (isLeaving) {\n      key = ancestors.length === 0 ? undefined : path[path.length - 1];\n      node = parent;\n      parent = ancestors.pop();\n\n      if (isEdited) {\n        if (inArray) {\n          node = node.slice();\n          let editOffset = 0;\n\n          for (const [editKey, editValue] of edits) {\n            const arrayKey = editKey - editOffset;\n\n            if (editValue === null) {\n              node.splice(arrayKey, 1);\n              editOffset++;\n            } else {\n              node[arrayKey] = editValue;\n            }\n          }\n        } else {\n          node = Object.defineProperties(\n            {},\n            Object.getOwnPropertyDescriptors(node),\n          );\n\n          for (const [editKey, editValue] of edits) {\n            node[editKey] = editValue;\n          }\n        }\n      }\n\n      index = stack.index;\n      keys = stack.keys;\n      edits = stack.edits;\n      inArray = stack.inArray;\n      stack = stack.prev;\n    } else if (parent) {\n      key = inArray ? index : keys[index];\n      node = parent[key];\n\n      if (node === null || node === undefined) {\n        continue;\n      }\n\n      path.push(key);\n    }\n\n    let result;\n\n    if (!Array.isArray(node)) {\n      var _enterLeaveMap$get, _enterLeaveMap$get2;\n\n      isNode(node) || devAssert(false, `Invalid AST Node: ${inspect(node)}.`);\n      const visitFn = isLeaving\n        ? (_enterLeaveMap$get = enterLeaveMap.get(node.kind)) === null ||\n          _enterLeaveMap$get === void 0\n          ? void 0\n          : _enterLeaveMap$get.leave\n        : (_enterLeaveMap$get2 = enterLeaveMap.get(node.kind)) === null ||\n          _enterLeaveMap$get2 === void 0\n        ? void 0\n        : _enterLeaveMap$get2.enter;\n      result =\n        visitFn === null || visitFn === void 0\n          ? void 0\n          : visitFn.call(visitor, node, key, parent, path, ancestors);\n\n      if (result === BREAK) {\n        break;\n      }\n\n      if (result === false) {\n        if (!isLeaving) {\n          path.pop();\n          continue;\n        }\n      } else if (result !== undefined) {\n        edits.push([key, result]);\n\n        if (!isLeaving) {\n          if (isNode(result)) {\n            node = result;\n          } else {\n            path.pop();\n            continue;\n          }\n        }\n      }\n    }\n\n    if (result === undefined && isEdited) {\n      edits.push([key, node]);\n    }\n\n    if (isLeaving) {\n      path.pop();\n    } else {\n      var _node$kind;\n\n      stack = {\n        inArray,\n        index,\n        keys,\n        edits,\n        prev: stack,\n      };\n      inArray = Array.isArray(node);\n      keys = inArray\n        ? node\n        : (_node$kind = visitorKeys[node.kind]) !== null &&\n          _node$kind !== void 0\n        ? _node$kind\n        : [];\n      index = -1;\n      edits = [];\n\n      if (parent) {\n        ancestors.push(parent);\n      }\n\n      parent = node;\n    }\n  } while (stack !== undefined);\n\n  if (edits.length !== 0) {\n    // New root\n    return edits[edits.length - 1][1];\n  }\n\n  return root;\n}\n/**\n * Creates a new visitor instance which delegates to many visitors to run in\n * parallel. Each visitor will be visited for each node before moving on.\n *\n * If a prior visitor edits a node, no following visitors will see that node.\n */\n\nexport function visitInParallel(visitors) {\n  const skipping = new Array(visitors.length).fill(null);\n  const mergedVisitor = Object.create(null);\n\n  for (const kind of Object.values(Kind)) {\n    let hasVisitor = false;\n    const enterList = new Array(visitors.length).fill(undefined);\n    const leaveList = new Array(visitors.length).fill(undefined);\n\n    for (let i = 0; i < visitors.length; ++i) {\n      const { enter, leave } = getEnterLeaveForKind(visitors[i], kind);\n      hasVisitor || (hasVisitor = enter != null || leave != null);\n      enterList[i] = enter;\n      leaveList[i] = leave;\n    }\n\n    if (!hasVisitor) {\n      continue;\n    }\n\n    const mergedEnterLeave = {\n      enter(...args) {\n        const node = args[0];\n\n        for (let i = 0; i < visitors.length; i++) {\n          if (skipping[i] === null) {\n            var _enterList$i;\n\n            const result =\n              (_enterList$i = enterList[i]) === null || _enterList$i === void 0\n                ? void 0\n                : _enterList$i.apply(visitors[i], args);\n\n            if (result === false) {\n              skipping[i] = node;\n            } else if (result === BREAK) {\n              skipping[i] = BREAK;\n            } else if (result !== undefined) {\n              return result;\n            }\n          }\n        }\n      },\n\n      leave(...args) {\n        const node = args[0];\n\n        for (let i = 0; i < visitors.length; i++) {\n          if (skipping[i] === null) {\n            var _leaveList$i;\n\n            const result =\n              (_leaveList$i = leaveList[i]) === null || _leaveList$i === void 0\n                ? void 0\n                : _leaveList$i.apply(visitors[i], args);\n\n            if (result === BREAK) {\n              skipping[i] = BREAK;\n            } else if (result !== undefined && result !== false) {\n              return result;\n            }\n          } else if (skipping[i] === node) {\n            skipping[i] = null;\n          }\n        }\n      },\n    };\n    mergedVisitor[kind] = mergedEnterLeave;\n  }\n\n  return mergedVisitor;\n}\n/**\n * Given a visitor instance and a node kind, return EnterLeaveVisitor for that kind.\n */\n\nexport function getEnterLeaveForKind(visitor, kind) {\n  const kindVisitor = visitor[kind];\n\n  if (typeof kindVisitor === 'object') {\n    // { Kind: { enter() {}, leave() {} } }\n    return kindVisitor;\n  } else if (typeof kindVisitor === 'function') {\n    // { Kind() {} }\n    return {\n      enter: kindVisitor,\n      leave: undefined,\n    };\n  } // { enter() {}, leave() {} }\n\n  return {\n    enter: visitor.enter,\n    leave: visitor.leave,\n  };\n}\n/**\n * Given a visitor instance, if it is leaving or not, and a node kind, return\n * the function the visitor runtime should call.\n *\n * @deprecated Please use `getEnterLeaveForKind` instead. Will be removed in v17\n */\n\n/* c8 ignore next 8 */\n\nexport function getVisitFn(visitor, kind, isLeaving) {\n  const { enter, leave } = getEnterLeaveForKind(visitor, kind);\n  return isLeaving ? leave : enter;\n}\n","import { printBlockString } from './blockString.mjs';\nimport { printString } from './printString.mjs';\nimport { visit } from './visitor.mjs';\n/**\n * Converts an AST into a string, using one set of reasonable\n * formatting rules.\n */\n\nexport function print(ast) {\n  return visit(ast, printDocASTReducer);\n}\nconst MAX_LINE_LENGTH = 80;\nconst printDocASTReducer = {\n  Name: {\n    leave: (node) => node.value,\n  },\n  Variable: {\n    leave: (node) => '$' + node.name,\n  },\n  // Document\n  Document: {\n    leave: (node) => join(node.definitions, '\\n\\n'),\n  },\n  OperationDefinition: {\n    leave(node) {\n      const varDefs = wrap('(', join(node.variableDefinitions, ', '), ')');\n      const prefix = join(\n        [\n          node.operation,\n          join([node.name, varDefs]),\n          join(node.directives, ' '),\n        ],\n        ' ',\n      ); // Anonymous queries with no directives or variable definitions can use\n      // the query short form.\n\n      return (prefix === 'query' ? '' : prefix + ' ') + node.selectionSet;\n    },\n  },\n  VariableDefinition: {\n    leave: ({ variable, type, defaultValue, directives }) =>\n      variable +\n      ': ' +\n      type +\n      wrap(' = ', defaultValue) +\n      wrap(' ', join(directives, ' ')),\n  },\n  SelectionSet: {\n    leave: ({ selections }) => block(selections),\n  },\n  Field: {\n    leave({ alias, name, arguments: args, directives, selectionSet }) {\n      const prefix = wrap('', alias, ': ') + name;\n      let argsLine = prefix + wrap('(', join(args, ', '), ')');\n\n      if (argsLine.length > MAX_LINE_LENGTH) {\n        argsLine = prefix + wrap('(\\n', indent(join(args, '\\n')), '\\n)');\n      }\n\n      return join([argsLine, join(directives, ' '), selectionSet], ' ');\n    },\n  },\n  Argument: {\n    leave: ({ name, value }) => name + ': ' + value,\n  },\n  // Fragments\n  FragmentSpread: {\n    leave: ({ name, directives }) =>\n      '...' + name + wrap(' ', join(directives, ' ')),\n  },\n  InlineFragment: {\n    leave: ({ typeCondition, directives, selectionSet }) =>\n      join(\n        [\n          '...',\n          wrap('on ', typeCondition),\n          join(directives, ' '),\n          selectionSet,\n        ],\n        ' ',\n      ),\n  },\n  FragmentDefinition: {\n    leave: (\n      { name, typeCondition, variableDefinitions, directives, selectionSet }, // Note: fragment variable definitions are experimental and may be changed\n    ) =>\n      // or removed in the future.\n      `fragment ${name}${wrap('(', join(variableDefinitions, ', '), ')')} ` +\n      `on ${typeCondition} ${wrap('', join(directives, ' '), ' ')}` +\n      selectionSet,\n  },\n  // Value\n  IntValue: {\n    leave: ({ value }) => value,\n  },\n  FloatValue: {\n    leave: ({ value }) => value,\n  },\n  StringValue: {\n    leave: ({ value, block: isBlockString }) =>\n      isBlockString ? printBlockString(value) : printString(value),\n  },\n  BooleanValue: {\n    leave: ({ value }) => (value ? 'true' : 'false'),\n  },\n  NullValue: {\n    leave: () => 'null',\n  },\n  EnumValue: {\n    leave: ({ value }) => value,\n  },\n  ListValue: {\n    leave: ({ values }) => '[' + join(values, ', ') + ']',\n  },\n  ObjectValue: {\n    leave: ({ fields }) => '{' + join(fields, ', ') + '}',\n  },\n  ObjectField: {\n    leave: ({ name, value }) => name + ': ' + value,\n  },\n  // Directive\n  Directive: {\n    leave: ({ name, arguments: args }) =>\n      '@' + name + wrap('(', join(args, ', '), ')'),\n  },\n  // Type\n  NamedType: {\n    leave: ({ name }) => name,\n  },\n  ListType: {\n    leave: ({ type }) => '[' + type + ']',\n  },\n  NonNullType: {\n    leave: ({ type }) => type + '!',\n  },\n  // Type System Definitions\n  SchemaDefinition: {\n    leave: ({ description, directives, operationTypes }) =>\n      wrap('', description, '\\n') +\n      join(['schema', join(directives, ' '), block(operationTypes)], ' '),\n  },\n  OperationTypeDefinition: {\n    leave: ({ operation, type }) => operation + ': ' + type,\n  },\n  ScalarTypeDefinition: {\n    leave: ({ description, name, directives }) =>\n      wrap('', description, '\\n') +\n      join(['scalar', name, join(directives, ' ')], ' '),\n  },\n  ObjectTypeDefinition: {\n    leave: ({ description, name, interfaces, directives, fields }) =>\n      wrap('', description, '\\n') +\n      join(\n        [\n          'type',\n          name,\n          wrap('implements ', join(interfaces, ' & ')),\n          join(directives, ' '),\n          block(fields),\n        ],\n        ' ',\n      ),\n  },\n  FieldDefinition: {\n    leave: ({ description, name, arguments: args, type, directives }) =>\n      wrap('', description, '\\n') +\n      name +\n      (hasMultilineItems(args)\n        ? wrap('(\\n', indent(join(args, '\\n')), '\\n)')\n        : wrap('(', join(args, ', '), ')')) +\n      ': ' +\n      type +\n      wrap(' ', join(directives, ' ')),\n  },\n  InputValueDefinition: {\n    leave: ({ description, name, type, defaultValue, directives }) =>\n      wrap('', description, '\\n') +\n      join(\n        [name + ': ' + type, wrap('= ', defaultValue), join(directives, ' ')],\n        ' ',\n      ),\n  },\n  InterfaceTypeDefinition: {\n    leave: ({ description, name, interfaces, directives, fields }) =>\n      wrap('', description, '\\n') +\n      join(\n        [\n          'interface',\n          name,\n          wrap('implements ', join(interfaces, ' & ')),\n          join(directives, ' '),\n          block(fields),\n        ],\n        ' ',\n      ),\n  },\n  UnionTypeDefinition: {\n    leave: ({ description, name, directives, types }) =>\n      wrap('', description, '\\n') +\n      join(\n        ['union', name, join(directives, ' '), wrap('= ', join(types, ' | '))],\n        ' ',\n      ),\n  },\n  EnumTypeDefinition: {\n    leave: ({ description, name, directives, values }) =>\n      wrap('', description, '\\n') +\n      join(['enum', name, join(directives, ' '), block(values)], ' '),\n  },\n  EnumValueDefinition: {\n    leave: ({ description, name, directives }) =>\n      wrap('', description, '\\n') + join([name, join(directives, ' ')], ' '),\n  },\n  InputObjectTypeDefinition: {\n    leave: ({ description, name, directives, fields }) =>\n      wrap('', description, '\\n') +\n      join(['input', name, join(directives, ' '), block(fields)], ' '),\n  },\n  DirectiveDefinition: {\n    leave: ({ description, name, arguments: args, repeatable, locations }) =>\n      wrap('', description, '\\n') +\n      'directive @' +\n      name +\n      (hasMultilineItems(args)\n        ? wrap('(\\n', indent(join(args, '\\n')), '\\n)')\n        : wrap('(', join(args, ', '), ')')) +\n      (repeatable ? ' repeatable' : '') +\n      ' on ' +\n      join(locations, ' | '),\n  },\n  SchemaExtension: {\n    leave: ({ directives, operationTypes }) =>\n      join(\n        ['extend schema', join(directives, ' '), block(operationTypes)],\n        ' ',\n      ),\n  },\n  ScalarTypeExtension: {\n    leave: ({ name, directives }) =>\n      join(['extend scalar', name, join(directives, ' ')], ' '),\n  },\n  ObjectTypeExtension: {\n    leave: ({ name, interfaces, directives, fields }) =>\n      join(\n        [\n          'extend type',\n          name,\n          wrap('implements ', join(interfaces, ' & ')),\n          join(directives, ' '),\n          block(fields),\n        ],\n        ' ',\n      ),\n  },\n  InterfaceTypeExtension: {\n    leave: ({ name, interfaces, directives, fields }) =>\n      join(\n        [\n          'extend interface',\n          name,\n          wrap('implements ', join(interfaces, ' & ')),\n          join(directives, ' '),\n          block(fields),\n        ],\n        ' ',\n      ),\n  },\n  UnionTypeExtension: {\n    leave: ({ name, directives, types }) =>\n      join(\n        [\n          'extend union',\n          name,\n          join(directives, ' '),\n          wrap('= ', join(types, ' | ')),\n        ],\n        ' ',\n      ),\n  },\n  EnumTypeExtension: {\n    leave: ({ name, directives, values }) =>\n      join(['extend enum', name, join(directives, ' '), block(values)], ' '),\n  },\n  InputObjectTypeExtension: {\n    leave: ({ name, directives, fields }) =>\n      join(['extend input', name, join(directives, ' '), block(fields)], ' '),\n  },\n};\n/**\n * Given maybeArray, print an empty string if it is null or empty, otherwise\n * print all items together separated by separator if provided\n */\n\nfunction join(maybeArray, separator = '') {\n  var _maybeArray$filter$jo;\n\n  return (_maybeArray$filter$jo =\n    maybeArray === null || maybeArray === void 0\n      ? void 0\n      : maybeArray.filter((x) => x).join(separator)) !== null &&\n    _maybeArray$filter$jo !== void 0\n    ? _maybeArray$filter$jo\n    : '';\n}\n/**\n * Given array, print each item on its own line, wrapped in an indented `{ }` block.\n */\n\nfunction block(array) {\n  return wrap('{\\n', indent(join(array, '\\n')), '\\n}');\n}\n/**\n * If maybeString is not null or empty, then wrap with start and end, otherwise print an empty string.\n */\n\nfunction wrap(start, maybeString, end = '') {\n  return maybeString != null && maybeString !== ''\n    ? start + maybeString + end\n    : '';\n}\n\nfunction indent(str) {\n  return wrap('  ', str.replace(/\\n/g, '\\n  '));\n}\n\nfunction hasMultilineItems(maybeArray) {\n  var _maybeArray$some;\n\n  // FIXME: https://github.com/graphql/graphql-js/issues/2203\n\n  /* c8 ignore next */\n  return (_maybeArray$some =\n    maybeArray === null || maybeArray === void 0\n      ? void 0\n      : maybeArray.some((str) => str.includes('\\n'))) !== null &&\n    _maybeArray$some !== void 0\n    ? _maybeArray$some\n    : false;\n}\n","import { parse, print } from 'graphql';\n/**\n * helpers\n */\nconst extractOperationName = (document) => {\n    let operationName = undefined;\n    const operationDefinitions = document.definitions.filter((definition) => definition.kind === `OperationDefinition`);\n    if (operationDefinitions.length === 1) {\n        operationName = operationDefinitions[0]?.name?.value;\n    }\n    return operationName;\n};\nexport const resolveRequestDocument = (document) => {\n    if (typeof document === `string`) {\n        let operationName = undefined;\n        try {\n            const parsedDocument = parse(document);\n            operationName = extractOperationName(parsedDocument);\n        }\n        catch (err) {\n            // Failed parsing the document, the operationName will be undefined\n        }\n        return { query: document, operationName };\n    }\n    const operationName = extractOperationName(document);\n    return { query: print(document), operationName };\n};\n//# sourceMappingURL=resolveRequestDocument.js.map","export class ClientError extends Error {\n    constructor(response, request) {\n        const message = `${ClientError.extractMessage(response)}: ${JSON.stringify({\n            response,\n            request,\n        })}`;\n        super(message);\n        Object.setPrototypeOf(this, ClientError.prototype);\n        this.response = response;\n        this.request = request;\n        // this is needed as Safari doesn't support .captureStackTrace\n        if (typeof Error.captureStackTrace === `function`) {\n            Error.captureStackTrace(this, ClientError);\n        }\n    }\n    static extractMessage(response) {\n        return response.errors?.[0]?.message ?? `GraphQL Error (Code: ${response.status})`;\n    }\n}\n//# sourceMappingURL=types.js.map","import createRequestBody from './createRequestBody.js';\nimport { defaultJsonSerializer } from './defaultJsonSerializer.js';\nimport { HeadersInstanceToPlainObject, uppercase } from './helpers.js';\nimport { parseBatchRequestArgs, parseRawRequestArgs, parseRawRequestExtendedArgs, parseRequestArgs, parseRequestExtendedArgs, } from './parseArgs.js';\nimport { resolveRequestDocument } from './resolveRequestDocument.js';\nimport { ClientError, } from './types.js';\nimport crossFetch, * as CrossFetch from 'cross-fetch';\nexport { ClientError, };\n/**\n * Convert the given headers configuration into a plain object.\n */\nconst resolveHeaders = (headers) => {\n    let oHeaders = {};\n    if (headers) {\n        if ((typeof Headers !== `undefined` && headers instanceof Headers) ||\n            (CrossFetch && CrossFetch.Headers && headers instanceof CrossFetch.Headers)) {\n            oHeaders = HeadersInstanceToPlainObject(headers);\n        }\n        else if (Array.isArray(headers)) {\n            headers.forEach(([name, value]) => {\n                if (name && value !== undefined) {\n                    oHeaders[name] = value;\n                }\n            });\n        }\n        else {\n            oHeaders = headers;\n        }\n    }\n    return oHeaders;\n};\n/**\n * Clean a GraphQL document to send it via a GET query\n */\nconst cleanQuery = (str) => str.replace(/([\\s,]|#[^\\n\\r]+)+/g, ` `).trim();\n/**\n * Create query string for GraphQL request\n */\nconst buildRequestConfig = (params) => {\n    if (!Array.isArray(params.query)) {\n        const params_ = params;\n        const search = [`query=${encodeURIComponent(cleanQuery(params_.query))}`];\n        if (params.variables) {\n            search.push(`variables=${encodeURIComponent(params_.jsonSerializer.stringify(params_.variables))}`);\n        }\n        if (params_.operationName) {\n            search.push(`operationName=${encodeURIComponent(params_.operationName)}`);\n        }\n        return search.join(`&`);\n    }\n    if (typeof params.variables !== `undefined` && !Array.isArray(params.variables)) {\n        throw new Error(`Cannot create query with given variable type, array expected`);\n    }\n    // Batch support\n    const params_ = params;\n    const payload = params.query.reduce((acc, currentQuery, index) => {\n        acc.push({\n            query: cleanQuery(currentQuery),\n            variables: params_.variables ? params_.jsonSerializer.stringify(params_.variables[index]) : undefined,\n        });\n        return acc;\n    }, []);\n    return `query=${encodeURIComponent(params_.jsonSerializer.stringify(payload))}`;\n};\nconst createHttpMethodFetcher = (method) => async (params) => {\n    const { url, query, variables, operationName, fetch, fetchOptions, middleware } = params;\n    const headers = { ...params.headers };\n    let queryParams = ``;\n    let body = undefined;\n    if (method === `POST`) {\n        body = createRequestBody(query, variables, operationName, fetchOptions.jsonSerializer);\n        if (typeof body === `string`) {\n            // @ts-expect-error todo\n            headers[`Content-Type`] = `application/json`;\n        }\n    }\n    else {\n        // @ts-expect-error todo needs ADT for TS to understand the different states\n        queryParams = buildRequestConfig({\n            query,\n            variables,\n            operationName,\n            jsonSerializer: fetchOptions.jsonSerializer ?? defaultJsonSerializer,\n        });\n    }\n    const init = {\n        method,\n        headers,\n        body,\n        ...fetchOptions,\n    };\n    let urlResolved = url;\n    let initResolved = init;\n    if (middleware) {\n        const result = await Promise.resolve(middleware({ ...init, url, operationName, variables }));\n        const { url: urlNew, ...initNew } = result;\n        urlResolved = urlNew;\n        initResolved = initNew;\n    }\n    if (queryParams) {\n        urlResolved = `${urlResolved}?${queryParams}`;\n    }\n    return await fetch(urlResolved, initResolved);\n};\n/**\n * GraphQL Client.\n */\nexport class GraphQLClient {\n    constructor(url, requestConfig = {}) {\n        this.url = url;\n        this.requestConfig = requestConfig;\n        /**\n         * Send a GraphQL query to the server.\n         */\n        this.rawRequest = async (...args) => {\n            const [queryOrOptions, variables, requestHeaders] = args;\n            const rawRequestOptions = parseRawRequestArgs(queryOrOptions, variables, requestHeaders);\n            const { headers, fetch = crossFetch, method = `POST`, requestMiddleware, responseMiddleware, ...fetchOptions } = this.requestConfig;\n            const { url } = this;\n            if (rawRequestOptions.signal !== undefined) {\n                fetchOptions.signal = rawRequestOptions.signal;\n            }\n            const { operationName } = resolveRequestDocument(rawRequestOptions.query);\n            return makeRequest({\n                url,\n                query: rawRequestOptions.query,\n                variables: rawRequestOptions.variables,\n                headers: {\n                    ...resolveHeaders(callOrIdentity(headers)),\n                    ...resolveHeaders(rawRequestOptions.requestHeaders),\n                },\n                operationName,\n                fetch,\n                method,\n                fetchOptions,\n                middleware: requestMiddleware,\n            })\n                .then((response) => {\n                if (responseMiddleware) {\n                    responseMiddleware(response);\n                }\n                return response;\n            })\n                .catch((error) => {\n                if (responseMiddleware) {\n                    responseMiddleware(error);\n                }\n                throw error;\n            });\n        };\n    }\n    async request(documentOrOptions, ...variablesAndRequestHeaders) {\n        const [variables, requestHeaders] = variablesAndRequestHeaders;\n        const requestOptions = parseRequestArgs(documentOrOptions, variables, requestHeaders);\n        const { headers, fetch = crossFetch, method = `POST`, requestMiddleware, responseMiddleware, ...fetchOptions } = this.requestConfig;\n        const { url } = this;\n        if (requestOptions.signal !== undefined) {\n            fetchOptions.signal = requestOptions.signal;\n        }\n        const { query, operationName } = resolveRequestDocument(requestOptions.document);\n        return makeRequest({\n            url,\n            query,\n            variables: requestOptions.variables,\n            headers: {\n                ...resolveHeaders(callOrIdentity(headers)),\n                ...resolveHeaders(requestOptions.requestHeaders),\n            },\n            operationName,\n            fetch,\n            method,\n            fetchOptions,\n            middleware: requestMiddleware,\n        })\n            .then((response) => {\n            if (responseMiddleware) {\n                responseMiddleware(response);\n            }\n            return response.data;\n        })\n            .catch((error) => {\n            if (responseMiddleware) {\n                responseMiddleware(error);\n            }\n            throw error;\n        });\n    }\n    // prettier-ignore\n    batchRequests(documentsOrOptions, requestHeaders) {\n        const batchRequestOptions = parseBatchRequestArgs(documentsOrOptions, requestHeaders);\n        const { headers, ...fetchOptions } = this.requestConfig;\n        if (batchRequestOptions.signal !== undefined) {\n            fetchOptions.signal = batchRequestOptions.signal;\n        }\n        const queries = batchRequestOptions.documents.map(({ document }) => resolveRequestDocument(document).query);\n        const variables = batchRequestOptions.documents.map(({ variables }) => variables);\n        return makeRequest({\n            url: this.url,\n            query: queries,\n            // @ts-expect-error TODO reconcile batch variables into system.\n            variables,\n            headers: {\n                ...resolveHeaders(callOrIdentity(headers)),\n                ...resolveHeaders(batchRequestOptions.requestHeaders),\n            },\n            operationName: undefined,\n            fetch: this.requestConfig.fetch ?? crossFetch,\n            method: this.requestConfig.method || `POST`,\n            fetchOptions,\n            middleware: this.requestConfig.requestMiddleware,\n        })\n            .then((response) => {\n            if (this.requestConfig.responseMiddleware) {\n                this.requestConfig.responseMiddleware(response);\n            }\n            return response.data;\n        })\n            .catch((error) => {\n            if (this.requestConfig.responseMiddleware) {\n                this.requestConfig.responseMiddleware(error);\n            }\n            throw error;\n        });\n    }\n    setHeaders(headers) {\n        this.requestConfig.headers = headers;\n        return this;\n    }\n    /**\n     * Attach a header to the client. All subsequent requests will have this header.\n     */\n    setHeader(key, value) {\n        const { headers } = this.requestConfig;\n        if (headers) {\n            // todo what if headers is in nested array form... ?\n            //@ts-ignore\n            headers[key] = value;\n        }\n        else {\n            this.requestConfig.headers = { [key]: value };\n        }\n        return this;\n    }\n    /**\n     * Change the client endpoint. All subsequent requests will send to this endpoint.\n     */\n    setEndpoint(value) {\n        this.url = value;\n        return this;\n    }\n}\nconst makeRequest = async (params) => {\n    const { query, variables, fetchOptions } = params;\n    const fetcher = createHttpMethodFetcher(uppercase(params.method ?? `post`));\n    const isBatchingQuery = Array.isArray(params.query);\n    const response = await fetcher(params);\n    const result = await getResult(response, fetchOptions.jsonSerializer ?? defaultJsonSerializer);\n    const successfullyReceivedData = Array.isArray(result)\n        ? !result.some(({ data }) => !data)\n        : Boolean(result.data);\n    const successfullyPassedErrorPolicy = Array.isArray(result) ||\n        !result.errors ||\n        (Array.isArray(result.errors) && !result.errors.length) ||\n        fetchOptions.errorPolicy === `all` ||\n        fetchOptions.errorPolicy === `ignore`;\n    if (response.ok && successfullyPassedErrorPolicy && successfullyReceivedData) {\n        // @ts-expect-error TODO fixme\n        const { errors, ...rest } = Array.isArray(result) ? result : result;\n        const data = fetchOptions.errorPolicy === `ignore` ? rest : result;\n        const dataEnvelope = isBatchingQuery ? { data } : data;\n        // @ts-expect-error TODO\n        return {\n            ...dataEnvelope,\n            headers: response.headers,\n            status: response.status,\n        };\n    }\n    else {\n        const errorResult = typeof result === `string`\n            ? {\n                error: result,\n            }\n            : result;\n        throw new ClientError(\n        // @ts-expect-error TODO\n        { ...errorResult, status: response.status, headers: response.headers }, { query, variables });\n    }\n};\n/**\n * Send a GraphQL Query to the GraphQL server for execution.\n */\nexport const rawRequest = async (...args) => {\n    const [urlOrOptions, query, ...variablesAndRequestHeaders] = args;\n    const requestOptions = parseRawRequestExtendedArgs(urlOrOptions, query, ...variablesAndRequestHeaders);\n    const client = new GraphQLClient(requestOptions.url);\n    return client.rawRequest({\n        ...requestOptions,\n    });\n};\nexport async function request(urlOrOptions, \n// @ts-ignore\ndocument, ...variablesAndRequestHeaders) {\n    // @ts-ignore\n    const requestOptions = parseRequestExtendedArgs(urlOrOptions, document, ...variablesAndRequestHeaders);\n    const client = new GraphQLClient(requestOptions.url);\n    return client.request({\n        ...requestOptions,\n    });\n}\n/**\n * Send a batch of GraphQL Document to the GraphQL server for execution.\n *\n * @example\n *\n * ```ts\n * // You can pass a raw string\n *\n * await batchRequests('https://foo.bar/graphql', [\n * {\n *  query: `\n *   {\n *     query {\n *       users\n *     }\n *   }`\n * },\n * {\n *   query: `\n *   {\n *     query {\n *       users\n *     }\n *   }`\n * }])\n *\n * // You can also pass a GraphQL DocumentNode as query. Convenient if you\n * // are using graphql-tag package.\n *\n * import gql from 'graphql-tag'\n *\n * await batchRequests('https://foo.bar/graphql', [{ query: gql`...` }])\n * ```\n */\nexport const batchRequests = async (...args) => {\n    const params = parseBatchRequestsArgsExtended(args);\n    const client = new GraphQLClient(params.url);\n    return client.batchRequests(params);\n};\nconst parseBatchRequestsArgsExtended = (args) => {\n    if (args.length === 1) {\n        return args[0];\n    }\n    else {\n        return {\n            url: args[0],\n            documents: args[1],\n            requestHeaders: args[2],\n            signal: undefined,\n        };\n    }\n};\nexport default request;\nconst getResult = async (response, jsonSerializer) => {\n    let contentType;\n    response.headers.forEach((value, key) => {\n        if (key.toLowerCase() === `content-type`) {\n            contentType = value;\n        }\n    });\n    if (contentType &&\n        (contentType.toLowerCase().startsWith(`application/json`) ||\n            contentType.toLowerCase().startsWith(`application/graphql+json`) ||\n            contentType.toLowerCase().startsWith(`application/graphql-response+json`))) {\n        return jsonSerializer.parse(await response.text());\n    }\n    else {\n        return response.text();\n    }\n};\nconst callOrIdentity = (value) => {\n    return typeof value === `function` ? value() : value;\n};\n/**\n * Convenience passthrough template tag to get the benefits of tooling for the gql template tag. This does not actually parse the input into a GraphQL DocumentNode like graphql-tag package does. It just returns the string with any variables given interpolated. Can save you a bit of performance and having to install another package.\n *\n * @example\n *\n * import { gql } from 'graphql-request'\n *\n * await request('https://foo.bar/graphql', gql`...`)\n *\n * @remarks\n *\n * Several tools in the Node GraphQL ecosystem are hardcoded to specially treat any template tag named \"gql\". For example see this prettier issue: https://github.com/prettier/prettier/issues/4360. Using this template tag has no runtime effect beyond variable interpolation.\n */\nexport const gql = (chunks, ...variables) => {\n    return chunks.reduce((accumulator, chunk, index) => `${accumulator}${chunk}${index in variables ? variables[index] : ``}`, ``);\n};\nexport { GraphQLWebSocketClient } from './graphql-ws.js';\nexport { resolveRequestDocument } from './resolveRequestDocument.js';\n//# sourceMappingURL=index.js.map","// @ts-expect-error\nimport SparseArray from 'sparse-array';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nexport class Bucket {\n    constructor(options, parent, posAtParent = 0) {\n        this._options = options;\n        this._popCount = 0;\n        this._parent = parent;\n        this._posAtParent = posAtParent;\n        this._children = new SparseArray();\n        this.key = null;\n    }\n    async put(key, value) {\n        const place = await this._findNewBucketAndPos(key);\n        await place.bucket._putAt(place, key, value);\n    }\n    async get(key) {\n        const child = await this._findChild(key);\n        if (child != null) {\n            return child.value;\n        }\n    }\n    async del(key) {\n        const place = await this._findPlace(key);\n        const child = place.bucket._at(place.pos);\n        if (child != null && child.key === key) {\n            place.bucket._delAt(place.pos);\n        }\n    }\n    leafCount() {\n        const children = this._children.compactArray();\n        return children.reduce((acc, child) => {\n            if (child instanceof Bucket) {\n                return acc + child.leafCount();\n            }\n            return acc + 1;\n        }, 0);\n    }\n    childrenCount() {\n        return this._children.length;\n    }\n    onlyChild() {\n        return this._children.get(0);\n    }\n    *eachLeafSeries() {\n        const children = this._children.compactArray();\n        for (const child of children) {\n            if (child instanceof Bucket) {\n                yield* child.eachLeafSeries();\n            }\n            else {\n                yield child;\n            }\n        }\n    }\n    serialize(map, reduce) {\n        const acc = [];\n        // serialize to a custom non-sparse representation\n        return reduce(this._children.reduce((acc, child, index) => {\n            if (child != null) {\n                if (child instanceof Bucket) {\n                    acc.push(child.serialize(map, reduce));\n                }\n                else {\n                    acc.push(map(child, index));\n                }\n            }\n            return acc;\n        }, acc));\n    }\n    async asyncTransform(asyncMap, asyncReduce) {\n        return await asyncTransformBucket(this, asyncMap, asyncReduce);\n    }\n    toJSON() {\n        return this.serialize(mapNode, reduceNodes);\n    }\n    prettyPrint() {\n        return JSON.stringify(this.toJSON(), null, '  ');\n    }\n    tableSize() {\n        return Math.pow(2, this._options.bits);\n    }\n    async _findChild(key) {\n        const result = await this._findPlace(key);\n        const child = result.bucket._at(result.pos);\n        if (child instanceof Bucket) {\n            // should not be possible, this._findPlace should always\n            // return a location for a child, not a bucket\n            return undefined;\n        }\n        if (child != null && child.key === key) {\n            return child;\n        }\n    }\n    async _findPlace(key) {\n        const hashValue = this._options.hash(typeof key === 'string' ? uint8ArrayFromString(key) : key);\n        const index = await hashValue.take(this._options.bits);\n        const child = this._children.get(index);\n        if (child instanceof Bucket) {\n            return await child._findPlace(hashValue);\n        }\n        return {\n            bucket: this,\n            pos: index,\n            hash: hashValue,\n            existingChild: child\n        };\n    }\n    async _findNewBucketAndPos(key) {\n        const place = await this._findPlace(key);\n        if ((place.existingChild != null) && place.existingChild.key !== key) {\n            // conflict\n            const bucket = new Bucket(this._options, place.bucket, place.pos);\n            place.bucket._putObjectAt(place.pos, bucket);\n            // put the previous value\n            const newPlace = await bucket._findPlace(place.existingChild.hash);\n            newPlace.bucket._putAt(newPlace, place.existingChild.key, place.existingChild.value);\n            return await bucket._findNewBucketAndPos(place.hash);\n        }\n        // no conflict, we found the place\n        return place;\n    }\n    _putAt(place, key, value) {\n        this._putObjectAt(place.pos, {\n            key: key,\n            value: value,\n            hash: place.hash\n        });\n    }\n    _putObjectAt(pos, object) {\n        if (this._children.get(pos) == null) {\n            this._popCount++;\n        }\n        this._children.set(pos, object);\n    }\n    _delAt(pos) {\n        if (pos === -1) {\n            throw new Error('Invalid position');\n        }\n        if (this._children.get(pos) != null) {\n            this._popCount--;\n        }\n        this._children.unset(pos);\n        this._level();\n    }\n    _level() {\n        if (this._parent != null && this._popCount <= 1) {\n            if (this._popCount === 1) {\n                // remove myself from parent, replacing me with my only child\n                const onlyChild = this._children.find(exists);\n                if ((onlyChild != null) && !(onlyChild instanceof Bucket)) {\n                    const hash = onlyChild.hash;\n                    hash.untake(this._options.bits);\n                    const place = {\n                        pos: this._posAtParent,\n                        hash: hash,\n                        bucket: this._parent\n                    };\n                    this._parent._putAt(place, onlyChild.key, onlyChild.value);\n                }\n            }\n            else {\n                this._parent._delAt(this._posAtParent);\n            }\n        }\n    }\n    _at(index) {\n        return this._children.get(index);\n    }\n}\nfunction exists(o) {\n    return Boolean(o);\n}\nfunction mapNode(node, _) {\n    return node.key;\n}\nfunction reduceNodes(nodes) {\n    return nodes;\n}\nasync function asyncTransformBucket(bucket, asyncMap, asyncReduce) {\n    const output = [];\n    for (const child of bucket._children.compactArray()) {\n        if (child instanceof Bucket) {\n            await asyncTransformBucket(child, asyncMap, asyncReduce);\n        }\n        else {\n            const mappedChildren = await asyncMap(child);\n            output.push({\n                bitField: bucket._children.bitField(),\n                children: mappedChildren\n            });\n        }\n    }\n    return await asyncReduce(output);\n}\n//# sourceMappingURL=bucket.js.map","const START_MASKS = [\n    0b11111111,\n    0b11111110,\n    0b11111100,\n    0b11111000,\n    0b11110000,\n    0b11100000,\n    0b11000000,\n    0b10000000\n];\nconst STOP_MASKS = [\n    0b00000001,\n    0b00000011,\n    0b00000111,\n    0b00001111,\n    0b00011111,\n    0b00111111,\n    0b01111111,\n    0b11111111\n];\nexport class ConsumableBuffer {\n    constructor(value) {\n        this._value = value;\n        this._currentBytePos = value.length - 1;\n        this._currentBitPos = 7;\n    }\n    availableBits() {\n        return this._currentBitPos + 1 + this._currentBytePos * 8;\n    }\n    totalBits() {\n        return this._value.length * 8;\n    }\n    take(bits) {\n        let pendingBits = bits;\n        let result = 0;\n        while (pendingBits > 0 && this._haveBits()) {\n            const byte = this._value[this._currentBytePos];\n            const availableBits = this._currentBitPos + 1;\n            const taking = Math.min(availableBits, pendingBits);\n            const value = byteBitsToInt(byte, availableBits - taking, taking);\n            result = (result << taking) + value;\n            pendingBits -= taking;\n            this._currentBitPos -= taking;\n            if (this._currentBitPos < 0) {\n                this._currentBitPos = 7;\n                this._currentBytePos--;\n            }\n        }\n        return result;\n    }\n    untake(bits) {\n        this._currentBitPos += bits;\n        while (this._currentBitPos > 7) {\n            this._currentBitPos -= 8;\n            this._currentBytePos += 1;\n        }\n    }\n    _haveBits() {\n        return this._currentBytePos >= 0;\n    }\n}\nfunction byteBitsToInt(byte, start, length) {\n    const mask = maskFor(start, length);\n    return (byte & mask) >>> start;\n}\nfunction maskFor(start, length) {\n    return START_MASKS[start] & STOP_MASKS[Math.min(length + start - 1, 7)];\n}\n//# sourceMappingURL=consumable-buffer.js.map","import { ConsumableBuffer } from './consumable-buffer.js';\nimport { concat as uint8ArrayConcat } from 'uint8arrays/concat';\nexport function wrapHash(hashFn) {\n    function hashing(value) {\n        if (value instanceof InfiniteHash) {\n            // already a hash. return it\n            return value;\n        }\n        else {\n            return new InfiniteHash(value, hashFn);\n        }\n    }\n    return hashing;\n}\nexport class InfiniteHash {\n    constructor(value, hashFn) {\n        if (!(value instanceof Uint8Array)) {\n            throw new Error('can only hash Uint8Arrays');\n        }\n        this._value = value;\n        this._hashFn = hashFn;\n        this._depth = -1;\n        this._availableBits = 0;\n        this._currentBufferIndex = 0;\n        this._buffers = [];\n    }\n    async take(bits) {\n        let pendingBits = bits;\n        while (this._availableBits < pendingBits) {\n            await this._produceMoreBits();\n        }\n        let result = 0;\n        while (pendingBits > 0) {\n            const hash = this._buffers[this._currentBufferIndex];\n            const available = Math.min(hash.availableBits(), pendingBits);\n            const took = hash.take(available);\n            result = (result << available) + took;\n            pendingBits -= available;\n            this._availableBits -= available;\n            if (hash.availableBits() === 0) {\n                this._currentBufferIndex++;\n            }\n        }\n        return result;\n    }\n    untake(bits) {\n        let pendingBits = bits;\n        while (pendingBits > 0) {\n            const hash = this._buffers[this._currentBufferIndex];\n            const availableForUntake = Math.min(hash.totalBits() - hash.availableBits(), pendingBits);\n            hash.untake(availableForUntake);\n            pendingBits -= availableForUntake;\n            this._availableBits += availableForUntake;\n            if (this._currentBufferIndex > 0 && hash.totalBits() === hash.availableBits()) {\n                this._depth--;\n                this._currentBufferIndex--;\n            }\n        }\n    }\n    async _produceMoreBits() {\n        this._depth++;\n        const value = this._depth > 0 ? uint8ArrayConcat([this._value, Uint8Array.from([this._depth])]) : this._value;\n        const hashValue = await this._hashFn(value);\n        const buffer = new ConsumableBuffer(hashValue);\n        this._buffers.push(buffer);\n        this._availableBits += buffer.availableBits();\n    }\n}\n//# sourceMappingURL=consumable-hash.js.map","import { Bucket } from './bucket.js';\nimport { wrapHash } from './consumable-hash.js';\nexport function createHAMT(options) {\n    if (options == null || options.hashFn == null) {\n        throw new Error('please define an options.hashFn');\n    }\n    const bucketOptions = {\n        bits: options.bits ?? 8,\n        hash: wrapHash(options.hashFn)\n    };\n    return new Bucket(bucketOptions);\n}\nexport { Bucket };\n//# sourceMappingURL=index.js.map","import debug from 'debug';\nimport { base32 } from 'multiformats/bases/base32';\nimport { base58btc } from 'multiformats/bases/base58';\nimport { base64 } from 'multiformats/bases/base64';\n// Add a formatter for converting to a base58 string\ndebug.formatters.b = (v) => {\n    return v == null ? 'undefined' : base58btc.baseEncode(v);\n};\n// Add a formatter for converting to a base32 string\ndebug.formatters.t = (v) => {\n    return v == null ? 'undefined' : base32.baseEncode(v);\n};\n// Add a formatter for converting to a base64 string\ndebug.formatters.m = (v) => {\n    return v == null ? 'undefined' : base64.baseEncode(v);\n};\n// Add a formatter for stringifying peer ids\ndebug.formatters.p = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying CIDs\ndebug.formatters.c = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying Datastore keys\ndebug.formatters.k = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying Multiaddrs\ndebug.formatters.a = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\nfunction createDisabledLogger(namespace) {\n    const logger = () => { };\n    logger.enabled = false;\n    logger.color = '';\n    logger.diff = 0;\n    logger.log = () => { };\n    logger.namespace = namespace;\n    logger.destroy = () => true;\n    logger.extend = () => logger;\n    return logger;\n}\nexport function logger(name) {\n    // trace logging is a no-op by default\n    let trace = createDisabledLogger(`${name}:trace`);\n    // look at all the debug names and see if trace logging has explicitly been enabled\n    if (debug.enabled(`${name}:trace`) && debug.names.map(r => r.toString()).find(n => n.includes(':trace')) != null) {\n        trace = debug(`${name}:trace`);\n    }\n    return Object.assign(debug(name), {\n        error: debug(`${name}:error`),\n        trace\n    });\n}\nexport function disable() {\n    debug.disable();\n}\nexport function enable(namespaces) {\n    debug.enable(namespaces);\n}\nexport function enabled(namespaces) {\n    return debug.enabled(namespaces);\n}\n//# sourceMappingURL=index.js.map","import { rfc4648 } from './base.js'\n\nexport const base32 = rfc4648({\n  prefix: 'b',\n  name: 'base32',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567',\n  bitsPerChar: 5\n})\n\nexport const base32upper = rfc4648({\n  prefix: 'B',\n  name: 'base32upper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n  bitsPerChar: 5\n})\n\nexport const base32pad = rfc4648({\n  prefix: 'c',\n  name: 'base32pad',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567=',\n  bitsPerChar: 5\n})\n\nexport const base32padupper = rfc4648({\n  prefix: 'C',\n  name: 'base32padupper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=',\n  bitsPerChar: 5\n})\n\nexport const base32hex = rfc4648({\n  prefix: 'v',\n  name: 'base32hex',\n  alphabet: '0123456789abcdefghijklmnopqrstuv',\n  bitsPerChar: 5\n})\n\nexport const base32hexupper = rfc4648({\n  prefix: 'V',\n  name: 'base32hexupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV',\n  bitsPerChar: 5\n})\n\nexport const base32hexpad = rfc4648({\n  prefix: 't',\n  name: 'base32hexpad',\n  alphabet: '0123456789abcdefghijklmnopqrstuv=',\n  bitsPerChar: 5\n})\n\nexport const base32hexpadupper = rfc4648({\n  prefix: 'T',\n  name: 'base32hexpadupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV=',\n  bitsPerChar: 5\n})\n\nexport const base32z = rfc4648({\n  prefix: 'h',\n  name: 'base32z',\n  alphabet: 'ybndrfg8ejkmcpqxot1uwisza345h769',\n  bitsPerChar: 5\n})\n","import { base32 } from './bases/base32.js'\nimport { base58btc } from './bases/base58.js'\nimport { coerce } from './bytes.js'\nimport * as Digest from './hashes/digest.js'\n// Linter can see that API is used in types.\n// eslint-disable-next-line\nimport * as API from \"./link/interface.js\"\nimport * as varint from './varint.js'\n\n// This way TS will also expose all the types from module\nexport * from './link/interface.js'\n\n/**\n * @template {API.Link<unknown, number, number, API.Version>} T\n * @template {string} Prefix\n * @param {T} link\n * @param {API.MultibaseEncoder<Prefix>} [base]\n * @returns {API.ToString<T, Prefix>}\n */\nexport const format = (link, base) => {\n  const { bytes, version } = link\n  switch (version) {\n    case 0:\n      return toStringV0(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<\"z\">} */ (base) || base58btc.encoder\n      )\n    default:\n      return toStringV1(\n        bytes,\n        baseCache(link),\n        /** @type {API.MultibaseEncoder<Prefix>} */ (base || base32.encoder)\n      )\n  }\n}\n\n/**\n * @template {API.UnknownLink} Link\n * @param {Link} link\n * @returns {API.LinkJSON<Link>}\n */\nexport const toJSON = (link) => ({\n  '/': format(link)\n})\n\n/**\n * @template {API.UnknownLink} Link\n * @param {API.LinkJSON<Link>} json\n */\nexport const fromJSON = (json) =>\n  CID.parse(json['/'])\n\n/** @type {WeakMap<API.UnknownLink, Map<string, string>>} */\nconst cache = new WeakMap()\n\n/**\n * @param {API.UnknownLink} cid\n * @returns {Map<string, string>}\n */\nconst baseCache = cid => {\n  const baseCache = cache.get(cid)\n  if (baseCache == null) {\n    const baseCache = new Map()\n    cache.set(cid, baseCache)\n    return baseCache\n  }\n  return baseCache\n}\n\n/**\n * @template {unknown} [Data=unknown]\n * @template {number} [Format=number]\n * @template {number} [Alg=number]\n * @template {API.Version} [Version=API.Version]\n * @implements {API.Link<Data, Format, Alg, Version>}\n */\n\nexport class CID {\n  /**\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} multihash - (Multi)hash of the of the content.\n   * @param {Uint8Array} bytes\n   */\n  constructor (version, code, multihash, bytes) {\n    /** @readonly */\n    this.code = code\n    /** @readonly */\n    this.version = version\n    /** @readonly */\n    this.multihash = multihash\n    /** @readonly */\n    this.bytes = bytes\n\n    // flag to serializers that this is a CID and\n    // should be treated specially\n    /** @readonly */\n    this['/'] = bytes\n  }\n\n  /**\n   * Signalling `cid.asCID === cid` has been replaced with `cid['/'] === cid.bytes`\n   * please either use `CID.asCID(cid)` or switch to new signalling mechanism\n   *\n   * @deprecated\n   */\n  get asCID () {\n    return this\n  }\n\n  // ArrayBufferView\n  get byteOffset () {\n    return this.bytes.byteOffset\n  }\n\n  // ArrayBufferView\n  get byteLength () {\n    return this.bytes.byteLength\n  }\n\n  /**\n   * @returns {CID<Data, API.DAG_PB, API.SHA_256, 0>}\n   */\n  toV0 () {\n    switch (this.version) {\n      case 0: {\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (this)\n      }\n      case 1: {\n        const { code, multihash } = this\n\n        if (code !== DAG_PB_CODE) {\n          throw new Error('Cannot convert a non dag-pb CID to CIDv0')\n        }\n\n        // sha2-256\n        if (multihash.code !== SHA_256_CODE) {\n          throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0')\n        }\n\n        return /** @type {CID<Data, API.DAG_PB, API.SHA_256, 0>} */ (\n          CID.createV0(\n            /** @type {API.MultihashDigest<API.SHA_256>} */ (multihash)\n          )\n        )\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 0. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @returns {CID<Data, Format, Alg, 1>}\n   */\n  toV1 () {\n    switch (this.version) {\n      case 0: {\n        const { code, digest } = this.multihash\n        const multihash = Digest.create(code, digest)\n        return /** @type {CID<Data, Format, Alg, 1>} */ (\n          CID.createV1(this.code, multihash)\n        )\n      }\n      case 1: {\n        return /** @type {CID<Data, Format, Alg, 1>} */ (this)\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 1. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  /**\n   * @param {unknown} other\n   * @returns {other is CID<Data, Format, Alg, Version>}\n   */\n  equals (other) {\n    return CID.equals(this, other)\n  }\n\n  /**\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {API.Link<Data, Format, Alg, Version>} self\n   * @param {unknown} other\n   * @returns {other is CID}\n   */\n  static equals (self, other) {\n    const unknown =\n      /** @type {{code?:unknown, version?:unknown, multihash?:unknown}} */ (\n        other\n      )\n    return (\n      unknown &&\n      self.code === unknown.code &&\n      self.version === unknown.version &&\n      Digest.equals(self.multihash, unknown.multihash)\n    )\n  }\n\n  /**\n   * @param {API.MultibaseEncoder<string>} [base]\n   * @returns {string}\n   */\n  toString (base) {\n    return format(this, base)\n  }\n\n  /**\n   * @returns {API.LinkJSON<this>}\n   */\n  toJSON () {\n    return { '/': format(this) }\n  }\n\n  link () {\n    return this\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'CID'\n  }\n\n  // Legacy\n\n  [Symbol.for('nodejs.util.inspect.custom')] () {\n    return `CID(${this.toString()})`\n  }\n\n  /**\n   * Takes any input `value` and returns a `CID` instance if it was\n   * a `CID` otherwise returns `null`. If `value` is instanceof `CID`\n   * it will return value back. If `value` is not instance of this CID\n   * class, but is compatible CID it will return new instance of this\n   * `CID` class. Otherwise returns null.\n   *\n   * This allows two different incompatible versions of CID library to\n   * co-exist and interop as long as binary interface is compatible.\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @template {unknown} U\n   * @param {API.Link<Data, Format, Alg, Version>|U} input\n   * @returns {CID<Data, Format, Alg, Version>|null}\n   */\n  static asCID (input) {\n    if (input == null) {\n      return null\n    }\n\n    const value = /** @type {any} */ (input)\n    if (value instanceof CID) {\n      // If value is instance of CID then we're all set.\n      return value\n    } else if ((value['/'] != null && value['/'] === value.bytes) || value.asCID === value) {\n      // If value isn't instance of this CID class but `this.asCID === this` or\n      // `value['/'] === value.bytes` is true it is CID instance coming from a\n      // different implementation (diff version or duplicate). In that case we\n      // rebase it to this `CID` implementation so caller is guaranteed to get\n      // instance with expected API.\n      const { version, code, multihash, bytes } = value\n      return new CID(\n        version,\n        code,\n        /** @type {API.MultihashDigest<Alg>} */ (multihash),\n        bytes || encodeCID(version, code, multihash.bytes)\n      )\n    } else if (value[cidSymbol] === true) {\n      // If value is a CID from older implementation that used to be tagged via\n      // symbol we still rebase it to the this `CID` implementation by\n      // delegating that to a constructor.\n      const { version, multihash, code } = value\n      const digest =\n        /** @type {API.MultihashDigest<Alg>} */\n        (Digest.decode(multihash))\n      return CID.create(version, code, digest)\n    } else {\n      // Otherwise value is not a CID (or an incompatible version of it) in\n      // which case we return `null`.\n      return null\n    }\n  }\n\n  /**\n   *\n   * @template {unknown} Data\n   * @template {number} Format\n   * @template {number} Alg\n   * @template {API.Version} Version\n   * @param {Version} version - Version of the CID\n   * @param {Format} code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param {API.MultihashDigest<Alg>} digest - (Multi)hash of the of the content.\n   * @returns {CID<Data, Format, Alg, Version>}\n   */\n  static create (version, code, digest) {\n    if (typeof code !== 'number') {\n      throw new Error('String codecs are no longer supported')\n    }\n\n    if (!(digest.bytes instanceof Uint8Array)) {\n      throw new Error('Invalid digest')\n    }\n\n    switch (version) {\n      case 0: {\n        if (code !== DAG_PB_CODE) {\n          throw new Error(\n            `Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`\n          )\n        } else {\n          return new CID(version, code, digest, digest.bytes)\n        }\n      }\n      case 1: {\n        const bytes = encodeCID(version, code, digest.bytes)\n        return new CID(version, code, digest, bytes)\n      }\n      default: {\n        throw new Error('Invalid version')\n      }\n    }\n  }\n\n  /**\n   * Simplified version of `create` for CIDv0.\n   *\n   * @template {unknown} [T=unknown]\n   * @param {API.MultihashDigest<typeof SHA_256_CODE>} digest - Multihash.\n   * @returns {CID<T, typeof DAG_PB_CODE, typeof SHA_256_CODE, 0>}\n   */\n  static createV0 (digest) {\n    return CID.create(0, DAG_PB_CODE, digest)\n  }\n\n  /**\n   * Simplified version of `create` for CIDv1.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @param {Code} code - Content encoding format code.\n   * @param {API.MultihashDigest<Alg>} digest - Miltihash of the content.\n   * @returns {CID<Data, Code, Alg, 1>}\n   */\n  static createV1 (code, digest) {\n    return CID.create(1, code, digest)\n  }\n\n  /**\n   * Decoded a CID from its binary representation. The byte array must contain\n   * only the CID with no additional bytes.\n   *\n   * An error will be thrown if the bytes provided do not contain a valid\n   * binary representation of a CID.\n   *\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ByteView<API.Link<Data, Code, Alg, Ver>>} bytes\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static decode (bytes) {\n    const [cid, remainder] = CID.decodeFirst(bytes)\n    if (remainder.length) {\n      throw new Error('Incorrect length')\n    }\n    return cid\n  }\n\n  /**\n   * Decoded a CID from its binary representation at the beginning of a byte\n   * array.\n   *\n   * Returns an array with the first element containing the CID and the second\n   * element containing the remainder of the original byte array. The remainder\n   * will be a zero-length byte array if the provided bytes only contained a\n   * binary CID representation.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} bytes\n   * @returns {[CID<T, C, A, V>, Uint8Array]}\n   */\n  static decodeFirst (bytes) {\n    const specs = CID.inspectBytes(bytes)\n    const prefixSize = specs.size - specs.multihashSize\n    const multihashBytes = coerce(\n      bytes.subarray(prefixSize, prefixSize + specs.multihashSize)\n    )\n    if (multihashBytes.byteLength !== specs.multihashSize) {\n      throw new Error('Incorrect length')\n    }\n    const digestBytes = multihashBytes.subarray(\n      specs.multihashSize - specs.digestSize\n    )\n    const digest = new Digest.Digest(\n      specs.multihashCode,\n      specs.digestSize,\n      digestBytes,\n      multihashBytes\n    )\n    const cid =\n      specs.version === 0\n        ? CID.createV0(/** @type {API.MultihashDigest<API.SHA_256>} */ (digest))\n        : CID.createV1(specs.codec, digest)\n    return [/** @type {CID<T, C, A, V>} */(cid), bytes.subarray(specs.size)]\n  }\n\n  /**\n   * Inspect the initial bytes of a CID to determine its properties.\n   *\n   * Involves decoding up to 4 varints. Typically this will require only 4 to 6\n   * bytes but for larger multicodec code values and larger multihash digest\n   * lengths these varints can be quite large. It is recommended that at least\n   * 10 bytes be made available in the `initialBytes` argument for a complete\n   * inspection.\n   *\n   * @template {unknown} T\n   * @template {number} C\n   * @template {number} A\n   * @template {API.Version} V\n   * @param {API.ByteView<API.Link<T, C, A, V>>} initialBytes\n   * @returns {{ version:V, codec:C, multihashCode:A, digestSize:number, multihashSize:number, size:number }}\n   */\n  static inspectBytes (initialBytes) {\n    let offset = 0\n    const next = () => {\n      const [i, length] = varint.decode(initialBytes.subarray(offset))\n      offset += length\n      return i\n    }\n\n    let version = /** @type {V} */ (next())\n    let codec = /** @type {C} */ (DAG_PB_CODE)\n    if (/** @type {number} */(version) === 18) {\n      // CIDv0\n      version = /** @type {V} */ (0)\n      offset = 0\n    } else {\n      codec = /** @type {C} */ (next())\n    }\n\n    if (version !== 0 && version !== 1) {\n      throw new RangeError(`Invalid CID version ${version}`)\n    }\n\n    const prefixSize = offset\n    const multihashCode = /** @type {A} */ (next()) // multihash code\n    const digestSize = next() // multihash length\n    const size = offset + digestSize\n    const multihashSize = size - prefixSize\n\n    return { version, codec, multihashCode, digestSize, multihashSize, size }\n  }\n\n  /**\n   * Takes cid in a string representation and creates an instance. If `base`\n   * decoder is not provided will use a default from the configuration. It will\n   * throw an error if encoding of the CID is not compatible with supplied (or\n   * a default decoder).\n   *\n   * @template {string} Prefix\n   * @template {unknown} Data\n   * @template {number} Code\n   * @template {number} Alg\n   * @template {API.Version} Ver\n   * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n   * @param {API.MultibaseDecoder<Prefix>} [base]\n   * @returns {CID<Data, Code, Alg, Ver>}\n   */\n  static parse (source, base) {\n    const [prefix, bytes] = parseCIDtoBytes(source, base)\n\n    const cid = CID.decode(bytes)\n\n    if (cid.version === 0 && source[0] !== 'Q') {\n      throw Error('Version 0 CID string must not include multibase prefix')\n    }\n\n    // Cache string representation to avoid computing it on `this.toString()`\n    baseCache(cid).set(prefix, source)\n\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @template {unknown} Data\n * @template {number} Code\n * @template {number} Alg\n * @template {API.Version} Ver\n * @param {API.ToString<API.Link<Data, Code, Alg, Ver>, Prefix>} source\n * @param {API.MultibaseDecoder<Prefix>} [base]\n * @returns {[Prefix, API.ByteView<API.Link<Data, Code, Alg, Ver>>]}\n */\nconst parseCIDtoBytes = (source, base) => {\n  switch (source[0]) {\n    // CIDv0 is parsed differently\n    case 'Q': {\n      const decoder = base || base58btc\n      return [\n        /** @type {Prefix} */ (base58btc.prefix),\n        decoder.decode(`${base58btc.prefix}${source}`)\n      ]\n    }\n    case base58btc.prefix: {\n      const decoder = base || base58btc\n      return [/** @type {Prefix} */(base58btc.prefix), decoder.decode(source)]\n    }\n    case base32.prefix: {\n      const decoder = base || base32\n      return [/** @type {Prefix} */(base32.prefix), decoder.decode(source)]\n    }\n    default: {\n      if (base == null) {\n        throw Error(\n          'To parse non base32 or base58btc encoded CID multibase decoder must be provided'\n        )\n      }\n      return [/** @type {Prefix} */(source[0]), base.decode(source)]\n    }\n  }\n}\n\n/**\n *\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<'z'>} base\n */\nconst toStringV0 = (bytes, cache, base) => {\n  const { prefix } = base\n  if (prefix !== base58btc.prefix) {\n    throw Error(`Cannot string encode V0 in ${base.name} encoding`)\n  }\n\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes).slice(1)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\n/**\n * @template {string} Prefix\n * @param {Uint8Array} bytes\n * @param {Map<string, string>} cache\n * @param {API.MultibaseEncoder<Prefix>} base\n */\nconst toStringV1 = (bytes, cache, base) => {\n  const { prefix } = base\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\nconst DAG_PB_CODE = 0x70\nconst SHA_256_CODE = 0x12\n\n/**\n * @param {API.Version} version\n * @param {number} code\n * @param {Uint8Array} multihash\n * @returns {Uint8Array}\n */\nconst encodeCID = (version, code, multihash) => {\n  const codeOffset = varint.encodingLength(version)\n  const hashOffset = codeOffset + varint.encodingLength(code)\n  const bytes = new Uint8Array(hashOffset + multihash.byteLength)\n  varint.encodeTo(version, bytes, 0)\n  varint.encodeTo(code, bytes, codeOffset)\n  bytes.set(multihash, hashOffset)\n  return bytes\n}\n\nconst cidSymbol = Symbol.for('@ipld/js-cid/CID')\n","import debug from 'debug';\nimport { base32 } from 'multiformats/bases/base32';\nimport { base58btc } from 'multiformats/bases/base58';\nimport { base64 } from 'multiformats/bases/base64';\n// Add a formatter for converting to a base58 string\ndebug.formatters.b = (v) => {\n    return v == null ? 'undefined' : base58btc.baseEncode(v);\n};\n// Add a formatter for converting to a base32 string\ndebug.formatters.t = (v) => {\n    return v == null ? 'undefined' : base32.baseEncode(v);\n};\n// Add a formatter for converting to a base64 string\ndebug.formatters.m = (v) => {\n    return v == null ? 'undefined' : base64.baseEncode(v);\n};\n// Add a formatter for stringifying peer ids\ndebug.formatters.p = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying CIDs\ndebug.formatters.c = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying Datastore keys\ndebug.formatters.k = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying Multiaddrs\ndebug.formatters.a = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\nfunction createDisabledLogger(namespace) {\n    const logger = () => { };\n    logger.enabled = false;\n    logger.color = '';\n    logger.diff = 0;\n    logger.log = () => { };\n    logger.namespace = namespace;\n    logger.destroy = () => true;\n    logger.extend = () => logger;\n    return logger;\n}\nexport function logger(name) {\n    // trace logging is a no-op by default\n    let trace = createDisabledLogger(`${name}:trace`);\n    // look at all the debug names and see if trace logging has explicitly been enabled\n    if (debug.enabled(`${name}:trace`) && debug.names.map(r => r.toString()).find(n => n.includes(':trace')) != null) {\n        trace = debug(`${name}:trace`);\n    }\n    return Object.assign(debug(name), {\n        error: debug(`${name}:error`),\n        trace\n    });\n}\nexport function disable() {\n    debug.disable();\n}\nexport function enable(namespaces) {\n    debug.enable(namespaces);\n}\nexport function enabled(namespaces) {\n    return debug.enabled(namespaces);\n}\n//# sourceMappingURL=index.js.map","import { logger as createLogger } from '@libp2p/logger';\nimport { equals as uint8ArrayEquals } from 'uint8arrays/equals';\nimport { BitswapMessageEntry } from '../message/entry.js';\n/**\n * Creates a logger for the given subsystem\n */\nexport const logger = (id, subsystem) => {\n    const name = ['bitswap'];\n    if (subsystem != null) {\n        name.push(subsystem);\n    }\n    if (id != null) {\n        name.push(`${id.toString().slice(0, 8)}`);\n    }\n    return createLogger(name.join(':'));\n};\nexport const includesWith = (pred, x, list) => {\n    let idx = 0;\n    const len = list.length;\n    while (idx < len) {\n        if (pred(x, list[idx])) {\n            return true;\n        }\n        idx += 1;\n    }\n    return false;\n};\nexport const uniqWith = (pred, list) => {\n    let idx = 0;\n    const len = list.length;\n    const result = [];\n    let item;\n    while (idx < len) {\n        item = list[idx];\n        if (!includesWith(pred, item, result)) {\n            result[result.length] = item;\n        }\n        idx += 1;\n    }\n    return result;\n};\nexport const groupBy = (pred, list) => {\n    // @ts-expect-error cannot use {} as record with these key types?\n    const output = {};\n    return list.reduce((acc, v) => {\n        const k = pred(v);\n        if (acc[k] != null) {\n            acc[k].push(v);\n        }\n        else {\n            acc[k] = [v];\n        }\n        return acc;\n    }, output);\n};\nexport const pullAllWith = (pred, list, values) => {\n    return list.filter(i => {\n        return !includesWith(pred, i, values);\n    });\n};\nexport const sortBy = (fn, list) => {\n    return Array.prototype.slice.call(list, 0).sort((a, b) => {\n        const aa = fn(a);\n        const bb = fn(b);\n        return aa < bb ? -1 : aa > bb ? 1 : 0;\n    });\n};\n/**\n * Is equal for Maps of BitswapMessageEntry or Uint8Arrays\n */\nexport const isMapEqual = (a, b) => {\n    if (a.size !== b.size) {\n        return false;\n    }\n    for (const [key, valueA] of a) {\n        const valueB = b.get(key);\n        if (valueB === undefined) {\n            return false;\n        }\n        // TODO: revisit this\n        // Support Blocks\n        if (valueA instanceof Uint8Array && valueB instanceof Uint8Array && !uint8ArrayEquals(valueA, valueB)) {\n            return false;\n        }\n        // Support BitswapMessageEntry\n        if (valueA instanceof BitswapMessageEntry && valueB instanceof BitswapMessageEntry && !valueA.equals(valueB)) {\n            return false;\n        }\n    }\n    return true;\n};\n//# sourceMappingURL=index.js.map","import { CodeError } from '@libp2p/interface/errors';\nimport { base58btc } from 'multiformats/bases/base58';\nimport { CID } from 'multiformats/cid';\nimport { sha256 } from 'multiformats/hashes/sha2';\n// @ts-expect-error no types\nimport vd from 'varint-decoder';\nimport { isMapEqual } from '../utils/index.js';\nimport ve from '../utils/varint-encoder.js';\nimport { BitswapMessageEntry as Entry } from './entry.js';\nimport { Message } from './message.js';\nexport class BitswapMessage {\n    static Entry = Entry;\n    static WantType = {\n        Block: Message.Wantlist.WantType.Block,\n        Have: Message.Wantlist.WantType.Have\n    };\n    static BlockPresenceType = {\n        Have: Message.BlockPresenceType.Have,\n        DontHave: Message.BlockPresenceType.DontHave\n    };\n    static deserialize = async (raw, hashLoader) => {\n        const decoded = Message.decode(raw);\n        const isFull = decoded.wantlist?.full === true;\n        const msg = new BitswapMessage(isFull);\n        decoded.wantlist?.entries.forEach((entry) => {\n            if (entry.block == null) {\n                return;\n            }\n            // note: entry.block is the CID here\n            const cid = CID.decode(entry.block);\n            msg.addEntry(cid, entry.priority ?? 0, entry.wantType, Boolean(entry.cancel), Boolean(entry.sendDontHave));\n        });\n        decoded.blockPresences.forEach((blockPresence) => {\n            if (blockPresence.cid == null) {\n                return;\n            }\n            const cid = CID.decode(blockPresence.cid);\n            if (blockPresence.type === BitswapMessage.BlockPresenceType.Have) {\n                msg.addHave(cid);\n            }\n            else {\n                msg.addDontHave(cid);\n            }\n        });\n        // Bitswap 1.0.0\n        // decoded.blocks are just the byte arrays\n        if (decoded.blocks.length > 0) {\n            await Promise.all(decoded.blocks.map(async (b) => {\n                const hash = await sha256.digest(b);\n                const cid = CID.createV0(hash);\n                msg.addBlock(cid, b);\n            }));\n            return msg;\n        }\n        // Bitswap 1.1.0\n        if (decoded.payload.length > 0) {\n            await Promise.all(decoded.payload.map(async (p) => {\n                if (p.prefix == null || p.data == null) {\n                    return;\n                }\n                const values = vd(p.prefix);\n                const cidVersion = values[0];\n                const multicodec = values[1];\n                const hashAlg = values[2];\n                const hasher = hashAlg === sha256.code ? sha256 : await hashLoader?.getHasher(hashAlg);\n                if (hasher == null) {\n                    throw new CodeError('Unknown hash algorithm', 'ERR_UNKNOWN_HASH_ALG');\n                }\n                // const hashLen = values[3] // We haven't need to use this so far\n                const hash = await hasher.digest(p.data);\n                const cid = CID.create(cidVersion, multicodec, hash);\n                msg.addBlock(cid, p.data);\n            }));\n            msg.setPendingBytes(decoded.pendingBytes);\n            return msg;\n        }\n        return msg;\n    };\n    static blockPresenceSize = (cid) => {\n        // It's ok if this is not exactly right: it's used to estimate the size of\n        // the HAVE / DONT_HAVE on the wire, but when doing that calculation we leave\n        // plenty of padding under the maximum message size.\n        // (It's more important for this to be fast).\n        return cid.bytes.length + 1;\n    };\n    full;\n    wantlist;\n    blocks;\n    blockPresences;\n    pendingBytes;\n    constructor(full) {\n        this.full = full;\n        this.wantlist = new Map();\n        this.blocks = new Map();\n        this.blockPresences = new Map();\n        this.pendingBytes = 0;\n    }\n    get empty() {\n        return this.blocks.size === 0 &&\n            this.wantlist.size === 0 &&\n            this.blockPresences.size === 0;\n    }\n    addEntry(cid, priority, wantType, cancel, sendDontHave) {\n        if (wantType == null) {\n            wantType = BitswapMessage.WantType.Block;\n        }\n        const cidStr = cid.toString(base58btc);\n        const entry = this.wantlist.get(cidStr);\n        if (entry != null) {\n            // Only change priority if want is of the same type\n            if (entry.wantType === wantType) {\n                entry.priority = priority;\n            }\n            // Only change from \"dont cancel\" to \"do cancel\"\n            if (cancel === true) {\n                entry.cancel = Boolean(cancel);\n            }\n            // Only change from \"dont send\" to \"do send\" DONT_HAVE\n            if (sendDontHave === true) {\n                entry.sendDontHave = Boolean(sendDontHave);\n            }\n            // want-block overrides existing want-have\n            if (wantType === BitswapMessage.WantType.Block && entry.wantType === BitswapMessage.WantType.Have) {\n                entry.wantType = wantType;\n            }\n        }\n        else {\n            this.wantlist.set(cidStr, new Entry(cid, priority, wantType, cancel, sendDontHave));\n        }\n    }\n    addBlock(cid, block) {\n        const cidStr = cid.toString(base58btc);\n        this.blocks.set(cidStr, block);\n    }\n    addHave(cid) {\n        const cidStr = cid.toString(base58btc);\n        if (!this.blockPresences.has(cidStr)) {\n            this.blockPresences.set(cidStr, BitswapMessage.BlockPresenceType.Have);\n        }\n    }\n    addDontHave(cid) {\n        const cidStr = cid.toString(base58btc);\n        if (!this.blockPresences.has(cidStr)) {\n            this.blockPresences.set(cidStr, BitswapMessage.BlockPresenceType.DontHave);\n        }\n    }\n    cancel(cid) {\n        const cidStr = cid.toString(base58btc);\n        this.wantlist.delete(cidStr);\n        this.addEntry(cid, 0, BitswapMessage.WantType.Block, true, false);\n    }\n    setPendingBytes(size) {\n        this.pendingBytes = size;\n    }\n    /**\n     * Serializes to Bitswap Message protobuf of\n     * version 1.0.0\n     */\n    serializeToBitswap100() {\n        return Message.encode({\n            wantlist: {\n                entries: Array.from(this.wantlist.values()).map((entry) => {\n                    return {\n                        block: entry.cid.bytes,\n                        priority: Number(entry.priority),\n                        cancel: Boolean(entry.cancel),\n                        wantType: Message.Wantlist.WantType.Block,\n                        sendDontHave: false\n                    };\n                }),\n                full: Boolean(this.full)\n            },\n            blocks: Array.from(this.blocks.values())\n        });\n    }\n    /**\n     * Serializes to Bitswap Message protobuf of\n     * version 1.1.0\n     */\n    serializeToBitswap110() {\n        const msg = {\n            wantlist: {\n                entries: Array.from(this.wantlist.values()).map((entry) => {\n                    return {\n                        block: entry.cid.bytes,\n                        priority: Number(entry.priority),\n                        wantType: entry.wantType,\n                        cancel: Boolean(entry.cancel),\n                        sendDontHave: Boolean(entry.sendDontHave)\n                    };\n                }),\n                full: Boolean(this.full)\n            },\n            blockPresences: [],\n            payload: [],\n            pendingBytes: this.pendingBytes,\n            blocks: []\n        };\n        for (const [cidStr, data] of this.blocks.entries()) {\n            const cid = CID.parse(cidStr);\n            const version = cid.version;\n            const codec = cid.code;\n            const multihash = cid.multihash.code;\n            const digestLength = cid.multihash.digest.length;\n            const prefix = ve([\n                version, codec, multihash, digestLength\n            ]);\n            msg.payload.push({\n                prefix,\n                data\n            });\n        }\n        for (const [cidStr, bpType] of this.blockPresences) {\n            msg.blockPresences.push({\n                cid: CID.parse(cidStr).bytes,\n                type: bpType\n            });\n        }\n        if (this.pendingBytes > 0) {\n            msg.pendingBytes = this.pendingBytes;\n        }\n        return Message.encode(msg);\n    }\n    equals(other) {\n        if (this.full !== other.full ||\n            this.pendingBytes !== other.pendingBytes ||\n            !isMapEqual(this.wantlist, other.wantlist) ||\n            !isMapEqual(this.blocks, other.blocks) ||\n            // @TODO - Is this a bug ?\n            // @ts-expect-error - isMap equals map values to be objects not numbers\n            !isMapEqual(this.blockPresences, other.blockPresences)) {\n            return false;\n        }\n        return true;\n    }\n    get [Symbol.toStringTag]() {\n        const list = Array.from(this.wantlist.keys());\n        const blocks = Array.from(this.blocks.keys());\n        return `BitswapMessage <full: ${this.full}, list: ${list}, blocks: ${blocks}>`;\n    }\n}\n//# sourceMappingURL=index.js.map","import { trackedMap } from '@libp2p/interface/metrics/tracked-map';\nimport { base58btc } from 'multiformats/bases/base58';\nimport { Message } from '../message/message.js';\nimport { WantListEntry as Entry } from './entry.js';\nconst WantType = {\n    Block: Message.Wantlist.WantType.Block,\n    Have: Message.Wantlist.WantType.Have\n};\nconst sortBy = (fn, list) => {\n    return Array.prototype.slice.call(list, 0).sort((a, b) => {\n        const aa = fn(a);\n        const bb = fn(b);\n        return aa < bb ? -1 : aa > bb ? 1 : 0;\n    });\n};\nexport class Wantlist {\n    static Entry = Entry;\n    set;\n    _stats;\n    constructor(stats, libp2p) {\n        this.set = (libp2p != null)\n            ? trackedMap({\n                name: 'ipfs_bitswap_wantlist',\n                metrics: libp2p.metrics\n            })\n            : new Map();\n        this._stats = stats;\n    }\n    get length() {\n        return this.set.size;\n    }\n    add(cid, priority, wantType) {\n        const cidStr = cid.toString(base58btc);\n        const entry = this.set.get(cidStr);\n        if (entry != null) {\n            entry.inc();\n            entry.priority = priority;\n            // We can only overwrite want-have with want-block\n            if (entry.wantType === WantType.Have && wantType === WantType.Block) {\n                entry.wantType = wantType;\n            }\n        }\n        else {\n            this.set.set(cidStr, new Entry(cid, priority, wantType));\n            if (this._stats != null) {\n                this._stats.push(undefined, 'wantListSize', 1);\n            }\n        }\n    }\n    remove(cid) {\n        const cidStr = cid.toString(base58btc);\n        const entry = this.set.get(cidStr);\n        if (entry == null) {\n            return;\n        }\n        entry.dec();\n        // only delete when no refs are held\n        if (entry.hasRefs()) {\n            return;\n        }\n        this.set.delete(cidStr);\n        if (this._stats != null) {\n            this._stats.push(undefined, 'wantListSize', -1);\n        }\n    }\n    removeForce(cidStr) {\n        if (this.set.has(cidStr)) {\n            this.set.delete(cidStr);\n        }\n    }\n    forEach(fn) {\n        this.set.forEach(fn);\n    }\n    entries() {\n        return this.set.entries();\n    }\n    sortedEntries() {\n        // TODO: Figure out if this is an actual bug.\n        // @ts-expect-error - Property 'key' does not exist on type 'WantListEntry'\n        return new Map(sortBy(o => o[1].key, Array.from(this.set.entries())));\n    }\n    contains(cid) {\n        const cidStr = cid.toString(base58btc);\n        return this.set.has(cidStr);\n    }\n    get(cid) {\n        const cidStr = cid.toString(base58btc);\n        return this.set.get(cidStr);\n    }\n}\n//# sourceMappingURL=index.js.map","import { Wantlist } from '../wantlist/index.js';\nexport class Ledger {\n    partner;\n    wantlist;\n    exchangeCount;\n    accounting;\n    lastExchange;\n    constructor(peerId) {\n        this.partner = peerId;\n        this.wantlist = new Wantlist();\n        this.exchangeCount = 0;\n        this.accounting = {\n            bytesSent: 0,\n            bytesRecv: 0\n        };\n    }\n    sentBytes(n) {\n        this.exchangeCount++;\n        this.lastExchange = (new Date()).getTime();\n        this.accounting.bytesSent += n;\n    }\n    receivedBytes(n) {\n        this.exchangeCount++;\n        this.lastExchange = (new Date()).getTime();\n        this.accounting.bytesRecv += n;\n    }\n    wants(cid, priority, wantType) {\n        this.wantlist.add(cid, priority, wantType);\n    }\n    /**\n     * @param {CID} cid\n     * @returns {void}\n     */\n    cancelWant(cid) {\n        this.wantlist.remove(cid);\n    }\n    wantlistContains(cid) {\n        return this.wantlist.get(cid);\n    }\n    debtRatio() {\n        return (this.accounting.bytesSent / (this.accounting.bytesRecv + 1)); // +1 is to prevent division by zero\n    }\n}\n//# sourceMappingURL=ledger.js.map","/**\n * SortedMap is a Map whose iterator order can be defined by the user\n */\nexport class SortedMap extends Map {\n    _cmp;\n    _keys;\n    constructor(entries, cmp) {\n        super();\n        this._cmp = cmp ?? this._defaultSort;\n        this._keys = [];\n        for (const [k, v] of entries ?? []) {\n            this.set(k, v);\n        }\n    }\n    /**\n     * Call update to update the position of the key when it should change.\n     * For example if the compare function sorts by the priority field, and the\n     * priority changes, call update.\n     * Call indexOf() to get the index _before_ the change happens.\n     */\n    update(i) {\n        if (i < 0 || i >= this._keys.length) {\n            return;\n        }\n        const k = this._keys[i];\n        this._keys.splice(i, 1);\n        const newIdx = this._find(k);\n        this._keys.splice(newIdx, 0, k);\n    }\n    set(k, v) {\n        // If the key is already in the map, remove it from the ordering and\n        // re-insert it below\n        if (this.has(k)) {\n            const i = this.indexOf(k);\n            this._keys.splice(i, 1);\n        }\n        // Update / insert the k/v into the map\n        super.set(k, v);\n        // Find the correct position of the newly inserted k/v in the order\n        const i = this._find(k);\n        this._keys.splice(i, 0, k);\n        return this;\n    }\n    clear() {\n        super.clear();\n        this._keys = [];\n    }\n    delete(k) {\n        if (!this.has(k)) {\n            return false;\n        }\n        const i = this.indexOf(k);\n        this._keys.splice(i, 1);\n        return super.delete(k);\n    }\n    indexOf(k) {\n        if (!this.has(k)) {\n            return -1;\n        }\n        const i = this._find(k);\n        if (this._keys[i] === k) {\n            return i;\n        }\n        // There may be more than one key with the same ordering\n        // eg { k1: <priority 5>, k2: <priority 5> }\n        // so scan outwards until the key matches\n        for (let j = 1; j < this._keys.length; j++) {\n            if (this._keys[i + j] === k)\n                return i + j;\n            if (this._keys[i - j] === k)\n                return i - j;\n        }\n        return -1; // should never happen for existing key\n    }\n    _find(k) {\n        let lower = 0;\n        let upper = this._keys.length;\n        while (lower < upper) {\n            const pivot = (lower + upper) >>> 1; // lower + (upper - lower) / 2\n            const cmp = this._kCmp(this._keys[pivot], k);\n            // console.log(`  _find ${lower}:${upper}[${pivot}] ${cmp}`)\n            if (cmp < 0) { // pivot < k\n                lower = pivot + 1;\n            }\n            else if (cmp > 0) { // pivot > k\n                upper = pivot;\n            }\n            else { // pivot == k\n                return pivot;\n            }\n        }\n        return lower;\n    }\n    *keys() {\n        for (const k of this._keys) {\n            yield k;\n        }\n        return undefined;\n    }\n    *values() {\n        for (const k of this._keys) {\n            // @ts-expect-error - return of `this.get(k)` is `Value|undefined` which is\n            // incompatible with `Value`. Typechecker can't that this contains values\n            // for all the `_keys`. ts(2322)\n            yield this.get(k);\n        }\n        return undefined;\n    }\n    *entries() {\n        for (const k of this._keys) {\n            // @ts-expect-error - return of `this.get(k)` is `Value|undefined` which is\n            // incompatible with `Value`. Typechecker can't that this contains values\n            // for all the `_keys`. ts(2322)\n            yield [k, this.get(k)];\n        }\n        return undefined;\n    }\n    *[Symbol.iterator]() {\n        yield* this.entries();\n    }\n    // @ts-expect-error - Callback in Map forEach is (V, K, Map<K, V>) => void\n    forEach(cb, thisArg = this) {\n        if (cb == null) {\n            return;\n        }\n        for (const k of this._keys) {\n            const val = this.get(k);\n            if (val == null) {\n                throw new Error('Value cannot be undefined');\n            }\n            cb.apply(thisArg, [[k, val]]);\n        }\n    }\n    _defaultSort(a, b) {\n        if (a[0] < b[0])\n            return -1;\n        if (b[0] < a[0])\n            return 1;\n        return 0;\n    }\n    _kCmp(a, b) {\n        return this._cmp(\n        // @ts-expect-error - get may return undefined\n        [a, this.get(a)], [b, this.get(b)]);\n    }\n}\n//# sourceMappingURL=sorted-map.js.map","import { SortedMap } from '../utils/sorted-map.js';\n/**\n * The task merger that is used by default.\n * Assumes that new tasks do not add any information over existing tasks,\n * and doesn't try to merge.\n */\nconst DefaultTaskMerger = {\n    hasNewInfo() {\n        return false;\n    },\n    merge() { }\n};\n/**\n * Queue of requests to be processed by the engine.\n * The requests from each peer are added to the peer's queue, sorted by\n * priority.\n * Tasks are popped in priority order from the best peer - see popTasks()\n * for more details.\n */\nexport class RequestQueue {\n    _taskMerger;\n    _byPeer;\n    constructor(taskMerger = DefaultTaskMerger) {\n        this._taskMerger = taskMerger;\n        this._byPeer = new SortedMap([], PeerTasks.compare);\n    }\n    /**\n     * Push tasks onto the queue for the given peer\n     */\n    pushTasks(peerId, tasks) {\n        let peerTasks = this._byPeer.get(peerId.toString());\n        if (peerTasks == null) {\n            peerTasks = new PeerTasks(peerId, this._taskMerger);\n        }\n        peerTasks.pushTasks(tasks);\n        this._byPeer.set(peerId.toString(), peerTasks);\n    }\n    /**\n     * Choose the peer with the least active work (or if all have the same active\n     * work, the most pending tasks) and pop off the highest priority tasks until\n     * the total size is at least targetMinBytes.\n     * This puts the popped tasks into the \"active\" state, meaning they are\n     * actively being processed (and cannot be modified).\n     */\n    popTasks(targetMinBytes) {\n        // Get the queue of tasks for the best peer and pop off tasks up to\n        // targetMinBytes\n        const peerTasks = this._head();\n        if (peerTasks === undefined) {\n            return { tasks: [], pendingSize: 0 };\n        }\n        const { tasks, pendingSize } = peerTasks.popTasks(targetMinBytes);\n        if (tasks.length === 0) {\n            return { tasks, pendingSize };\n        }\n        const peerId = peerTasks.peerId;\n        if (peerTasks.isIdle()) {\n            // If there are no more tasks for the peer, free up its memory\n            this._byPeer.delete(peerId.toString());\n        }\n        else {\n            // If there are still tasks remaining, update the sort order of peerTasks\n            // (because it depends on the number of pending tasks)\n            this._byPeer.update(0);\n        }\n        return {\n            peerId, tasks, pendingSize\n        };\n    }\n    _head() {\n        // Shortcut\n        if (this._byPeer.size === 0) {\n            return undefined;\n        }\n        // eslint-disable-next-line no-unreachable-loop\n        for (const [, v] of this._byPeer) {\n            return v;\n        }\n        return undefined;\n    }\n    /**\n     * Remove the task with the given topic for the given peer.\n     */\n    remove(topic, peerId) {\n        const peerTasks = this._byPeer.get(peerId.toString());\n        peerTasks?.remove(topic);\n    }\n    /**\n     * Called when the tasks for the given peer complete.\n     */\n    tasksDone(peerId, tasks) {\n        const peerTasks = this._byPeer.get(peerId.toString());\n        if (peerTasks == null) {\n            return;\n        }\n        const i = this._byPeer.indexOf(peerId.toString());\n        for (const task of tasks) {\n            peerTasks.taskDone(task);\n        }\n        // Marking the tasks as done takes them out of the \"active\" state, and the\n        // sort order depends on the size of the active tasks, so we need to update\n        // the order.\n        this._byPeer.update(i);\n    }\n}\n/**\n * Queue of tasks for a particular peer, sorted by priority.\n */\nclass PeerTasks {\n    peerId;\n    _taskMerger;\n    _activeTotalSize;\n    _pending;\n    _active;\n    constructor(peerId, taskMerger) {\n        this.peerId = peerId;\n        this._taskMerger = taskMerger;\n        this._activeTotalSize = 0;\n        this._pending = new PendingTasks();\n        this._active = new Set();\n    }\n    /**\n     * Push tasks onto the queue\n     */\n    pushTasks(tasks) {\n        for (const t of tasks) {\n            this._pushTask(t);\n        }\n    }\n    _pushTask(task) {\n        // If the new task doesn't add any more information over what we\n        // already have in the active queue, then we can skip the new task\n        if (!this._taskHasMoreInfoThanActiveTasks(task)) {\n            return;\n        }\n        // If there is already a non-active (pending) task with this topic\n        const existingTask = this._pending.get(task.topic);\n        if (existingTask != null) {\n            // If the new task has a higher priority than the old task,\n            if (task.priority > existingTask.priority) {\n                // Update the priority and the task's position in the queue\n                this._pending.updatePriority(task.topic, task.priority);\n            }\n            // Merge the information from the new task into the existing task\n            this._taskMerger.merge(task, existingTask);\n            // A task with the topic exists, so we don't need to add\n            // the new task to the queue\n            return;\n        }\n        // Push the new task onto the queue\n        this._pending.add(task);\n    }\n    /**\n     * Indicates whether the new task adds any more information over tasks that are\n     * already in the active task queue\n     */\n    _taskHasMoreInfoThanActiveTasks(task) {\n        const tasksWithTopic = [];\n        for (const activeTask of this._active) {\n            if (activeTask.topic === task.topic) {\n                tasksWithTopic.push(activeTask);\n            }\n        }\n        // No tasks with that topic, so the new task adds information\n        if (tasksWithTopic.length === 0) {\n            return true;\n        }\n        return this._taskMerger.hasNewInfo(task, tasksWithTopic);\n    }\n    /**\n     * Pop tasks off the queue such that the total size is at least targetMinBytes\n     */\n    popTasks(targetMinBytes) {\n        let size = 0;\n        const tasks = [];\n        // Keep popping tasks until we get up to targetMinBytes (or one item over\n        // targetMinBytes)\n        const pendingTasks = this._pending.tasks();\n        for (let i = 0; i < pendingTasks.length && size < targetMinBytes; i++) {\n            const task = pendingTasks[i];\n            tasks.push(task);\n            size += task.size;\n            // Move tasks from pending to active\n            this._pending.delete(task.topic);\n            this._activeTotalSize += task.size;\n            this._active.add(task);\n        }\n        return {\n            tasks, pendingSize: this._pending.totalSize\n        };\n    }\n    /**\n     * Called when a task completes.\n     * Note: must be the same reference as returned from popTasks.\n     */\n    taskDone(task) {\n        if (this._active.has(task)) {\n            this._activeTotalSize -= task.size;\n            this._active.delete(task);\n        }\n    }\n    /**\n     * Remove pending tasks with the given topic\n     */\n    remove(topic) {\n        this._pending.delete(topic);\n    }\n    /**\n     * No work to be done, this PeerTasks object can be freed.\n     */\n    isIdle() {\n        return this._pending.length === 0 && this._active.size === 0;\n    }\n    /**\n     * Compare PeerTasks\n     */\n    static compare(a, b) {\n        // Move peers with no pending tasks to the back of the queue\n        if (a[1]._pending.length === 0) {\n            return 1;\n        }\n        if (b[1]._pending.length === 0) {\n            return -1;\n        }\n        // If the amount of active work is the same\n        if (a[1]._activeTotalSize === b[1]._activeTotalSize) {\n            // Choose the peer with the most pending work\n            return b[1]._pending.length - a[1]._pending.length;\n        }\n        // Choose the peer with the least amount of active work (\"keep peers busy\")\n        return a[1]._activeTotalSize - b[1]._activeTotalSize;\n    }\n}\n/**\n * Queue of pending tasks for a particular peer, sorted by priority.\n */\nclass PendingTasks {\n    _tasks;\n    constructor() {\n        this._tasks = new SortedMap([], this._compare);\n    }\n    get length() {\n        return this._tasks.size;\n    }\n    /**\n     * Sum of the size of all pending tasks\n     **/\n    get totalSize() {\n        return [...this._tasks.values()].reduce((a, t) => a + t.task.size, 0);\n    }\n    get(topic) {\n        return this._tasks?.get(topic)?.task;\n    }\n    add(task) {\n        this._tasks.set(task.topic, {\n            created: Date.now(),\n            task\n        });\n    }\n    delete(topic) {\n        this._tasks.delete(topic);\n    }\n    // All pending tasks, in priority order\n    tasks() {\n        return [...this._tasks.values()].map(i => i.task);\n    }\n    /**\n     * Update the priority of the task with the given topic, and update the order\n     **/\n    updatePriority(topic, priority) {\n        const obj = this._tasks.get(topic);\n        if (obj == null) {\n            return;\n        }\n        const i = this._tasks.indexOf(topic);\n        obj.task.priority = priority;\n        this._tasks.update(i);\n    }\n    /**\n     * Sort by priority desc then FIFO\n     */\n    _compare(a, b) {\n        if (a[1].task.priority === b[1].task.priority) {\n            // FIFO\n            return a[1].created - b[1].created;\n        }\n        // Priority high -> low\n        return b[1].task.priority - a[1].task.priority;\n    }\n}\n//# sourceMappingURL=req-queue.js.map","export const DefaultTaskMerger = {\n    /**\n     * Indicates whether the given task has newer information than the active\n     * tasks with the same topic.\n     *\n     * @param {Task} task\n     * @param {Task[]} tasksWithTopic\n     * @returns {boolean}\n     */\n    hasNewInfo(task, tasksWithTopic) {\n        let haveBlock = false;\n        let isWantBlock = false;\n        for (const existing of tasksWithTopic) {\n            if (existing.data.haveBlock) {\n                haveBlock = true;\n            }\n            if (existing.data.isWantBlock) {\n                isWantBlock = true;\n            }\n        }\n        // If there is no active want-block and the new task is a want-block,\n        // the new task is better\n        if (!isWantBlock && task.data.isWantBlock) {\n            return true;\n        }\n        // If we didn't have the block, and the new task indicates that we now\n        // do have the block, then we must also have size information for the\n        // block, so the new task has new information.\n        if (!haveBlock && task.data.haveBlock) {\n            return true;\n        }\n        return false;\n    },\n    /**\n     * Merge the information from the given task into the existing task (with the\n     * same topic)\n     */\n    merge(newTask, existingTask) {\n        // The merge function ignores the topic and priority as these don't change.\n        //\n        // We may receive new information about a want before the want has been\n        // popped from the queue in the following scenarios:\n        //\n        // - Replace want type:\n        //   1. Client sends want-have CID1\n        //   2. Client sends want-block CID1\n        //   In this case we should replace want-have with want-block, including\n        //   updating the task size to be the block size.\n        //\n        // - Replace DONT_HAVE with want:\n        //   1. Client sends want-have CID1 or want-block CID1\n        //   2. Local node doesn't have block for CID1\n        //   3. Local node receives block for CID1 from peer\n        //   In this case we should replace DONT_HAVE with the want, including\n        //   updating the task size and block size.\n        const taskData = newTask.data;\n        const existingData = existingTask.data;\n        // If we didn't have block size information (because we didn't have the\n        // block) and we receive the block from a peer, update the task with the\n        // new block size\n        if (!existingData.haveBlock && taskData.haveBlock) {\n            existingData.haveBlock = taskData.haveBlock;\n            existingData.blockSize = taskData.blockSize;\n        }\n        // If replacing a want-have with a want-block\n        if (!existingData.isWantBlock && taskData.isWantBlock) {\n            // Change the type from want-have to want-block\n            existingData.isWantBlock = true;\n            // If the want-have was a DONT_HAVE, or the want-block has a size\n            if (!existingData.haveBlock || taskData.haveBlock) {\n                // Update the entry size\n                existingData.haveBlock = taskData.haveBlock;\n                existingTask.size = newTask.size;\n            }\n        }\n        // If the task is a want-block, make sure the entry size is equal\n        // to the block size (because we will send the whole block)\n        if (existingData.isWantBlock && existingData.haveBlock) {\n            existingTask.size = existingData.blockSize;\n        }\n    }\n};\n//# sourceMappingURL=task-merger.js.map","import { trackedMap } from '@libp2p/interface/metrics/tracked-map';\nimport { base58btc } from 'multiformats/bases/base58';\nimport { CID } from 'multiformats/cid';\nimport { BitswapMessage as Message } from '../message/index.js';\nimport { logger } from '../utils/index.js';\nimport { Wantlist } from '../wantlist/index.js';\nimport { Ledger } from './ledger.js';\nimport { RequestQueue } from './req-queue.js';\nimport { DefaultTaskMerger } from './task-merger.js';\nconst WantType = Message.WantType;\n// The ideal size of the batched payload. We try to pop this much data off the\n// request queue, but\n// - if there isn't any more data in the queue we send whatever we have\n// - if there are several small items in the queue (eg HAVE response) followed\n//   by one big item (eg a block) that would exceed this target size, we\n//   include the big item in the message\nconst TARGET_MESSAGE_SIZE = 16 * 1024;\n// If the client sends a want-have, and the engine has the corresponding block,\n// we check the size of the block and if it's small enough we send the block\n// itself, rather than sending a HAVE.\n// This constant defines the maximum size up to which we replace a HAVE with\n// a block.\nconst MAX_SIZE_REPLACE_HAS_WITH_BLOCK = 1024;\nexport class DecisionEngine {\n    _log;\n    blockstore;\n    network;\n    _stats;\n    _opts;\n    ledgerMap;\n    _running;\n    _requestQueue;\n    constructor(peerId, blockstore, network, stats, libp2p, opts = {}) {\n        this._log = logger(peerId, 'engine');\n        this.blockstore = blockstore;\n        this.network = network;\n        this._stats = stats;\n        this._opts = this._processOpts(opts);\n        // A list of of ledgers by their partner id\n        this.ledgerMap = trackedMap({\n            name: 'ipfs_bitswap_ledger_map',\n            metrics: libp2p.metrics\n        });\n        this._running = false;\n        // Queue of want-have / want-block per peer\n        this._requestQueue = new RequestQueue(DefaultTaskMerger);\n    }\n    _processOpts(opts) {\n        return {\n            maxSizeReplaceHasWithBlock: MAX_SIZE_REPLACE_HAS_WITH_BLOCK,\n            targetMessageSize: TARGET_MESSAGE_SIZE,\n            ...opts\n        };\n    }\n    _scheduleProcessTasks() {\n        setTimeout(() => {\n            this._processTasks().catch(err => {\n                this._log.error('error processing stats', err);\n            });\n        });\n    }\n    /**\n     * Pull tasks off the request queue and send a message to the corresponding\n     * peer\n     */\n    async _processTasks() {\n        if (!this._running) {\n            return;\n        }\n        const { peerId, tasks, pendingSize } = this._requestQueue.popTasks(this._opts.targetMessageSize);\n        if (tasks.length === 0) {\n            return;\n        }\n        // Create a new message\n        const msg = new Message(false);\n        // Amount of data in the request queue still waiting to be popped\n        msg.setPendingBytes(pendingSize);\n        // Split out want-blocks, want-haves and DONT_HAVEs\n        const blockCids = [];\n        const blockTasks = new Map();\n        for (const task of tasks) {\n            const cid = CID.parse(task.topic);\n            if (task.data.haveBlock) {\n                if (task.data.isWantBlock) {\n                    blockCids.push(cid);\n                    blockTasks.set(task.topic, task.data);\n                }\n                else {\n                    // Add HAVES to the message\n                    msg.addHave(cid);\n                }\n            }\n            else {\n                // Add DONT_HAVEs to the message\n                msg.addDontHave(cid);\n            }\n        }\n        const blocks = await this._getBlocks(blockCids);\n        for (const [topic, taskData] of blockTasks) {\n            const cid = CID.parse(topic);\n            const blk = blocks.get(topic);\n            // If the block was found (it has not been removed)\n            if (blk != null) {\n                // Add the block to the message\n                msg.addBlock(cid, blk);\n            }\n            else {\n                // The block was not found. If the client requested DONT_HAVE,\n                // add DONT_HAVE to the message.\n                if (taskData.sendDontHave) {\n                    msg.addDontHave(cid);\n                }\n            }\n        }\n        // If there's nothing in the message, bail out\n        if (msg.empty) {\n            (peerId != null) && this._requestQueue.tasksDone(peerId, tasks);\n            // Trigger the next round of task processing\n            this._scheduleProcessTasks();\n            return;\n        }\n        try {\n            // Send the message\n            (peerId != null) && await this.network.sendMessage(peerId, msg);\n            // Peform sent message accounting\n            for (const [cidStr, block] of blocks.entries()) {\n                (peerId != null) && this.messageSent(peerId, CID.parse(cidStr), block);\n            }\n        }\n        catch (err) {\n            this._log.error(err);\n        }\n        // Free the tasks up from the request queue\n        (peerId != null) && this._requestQueue.tasksDone(peerId, tasks);\n        // Trigger the next round of task processing\n        this._scheduleProcessTasks();\n    }\n    wantlistForPeer(peerId) {\n        const peerIdStr = peerId.toString();\n        const ledger = this.ledgerMap.get(peerIdStr);\n        return (ledger != null) ? ledger.wantlist.sortedEntries() : new Map();\n    }\n    ledgerForPeer(peerId) {\n        const peerIdStr = peerId.toString();\n        const ledger = this.ledgerMap.get(peerIdStr);\n        if (ledger == null) {\n            return undefined;\n        }\n        return {\n            peer: ledger.partner,\n            value: ledger.debtRatio(),\n            sent: ledger.accounting.bytesSent,\n            recv: ledger.accounting.bytesRecv,\n            exchanged: ledger.exchangeCount\n        };\n    }\n    peers() {\n        return Array.from(this.ledgerMap.values()).map((l) => l.partner);\n    }\n    /**\n     * Receive blocks either from an incoming message from the network, or from\n     * blocks being added by the client on the localhost (eg IPFS add)\n     */\n    receivedBlocks(blocks) {\n        if (blocks.length === 0) {\n            return;\n        }\n        // For each connected peer, check if it wants the block we received\n        for (const ledger of this.ledgerMap.values()) {\n            for (const { cid, block } of blocks) {\n                // Filter out blocks that we don't want\n                const want = ledger.wantlistContains(cid);\n                if (want == null) {\n                    continue;\n                }\n                // If the block is small enough, just send the block, even if the\n                // client asked for a HAVE\n                const blockSize = block.length;\n                const isWantBlock = this._sendAsBlock(want.wantType, blockSize);\n                let entrySize = blockSize;\n                if (!isWantBlock) {\n                    entrySize = Message.blockPresenceSize(want.cid);\n                }\n                this._requestQueue.pushTasks(ledger.partner, [{\n                        topic: want.cid.toString(base58btc),\n                        priority: want.priority,\n                        size: entrySize,\n                        data: {\n                            blockSize,\n                            isWantBlock,\n                            haveBlock: true,\n                            sendDontHave: false\n                        }\n                    }]);\n            }\n        }\n        this._scheduleProcessTasks();\n    }\n    /**\n     * Handle incoming messages\n     */\n    async messageReceived(peerId, msg) {\n        const ledger = this._findOrCreate(peerId);\n        if (msg.empty) {\n            return;\n        }\n        // If the message has a full wantlist, clear the current wantlist\n        if (msg.full) {\n            ledger.wantlist = new Wantlist();\n        }\n        // Record the amount of block data received\n        this._updateBlockAccounting(msg.blocks, ledger);\n        if (msg.wantlist.size === 0) {\n            this._scheduleProcessTasks();\n            return;\n        }\n        // Clear cancelled wants and add new wants to the ledger\n        const cancels = [];\n        const wants = [];\n        msg.wantlist.forEach((entry) => {\n            if (entry.cancel) {\n                ledger.cancelWant(entry.cid);\n                cancels.push(entry.cid);\n            }\n            else {\n                ledger.wants(entry.cid, entry.priority, entry.wantType);\n                wants.push(entry);\n            }\n        });\n        this._cancelWants(peerId, cancels);\n        await this._addWants(peerId, wants);\n        this._scheduleProcessTasks();\n    }\n    _cancelWants(peerId, cids) {\n        for (const c of cids) {\n            this._requestQueue.remove(c.toString(base58btc), peerId);\n        }\n    }\n    async _addWants(peerId, wants) {\n        // Get the size of each wanted block\n        const blockSizes = await this._getBlockSizes(wants.map(w => w.cid));\n        const tasks = [];\n        for (const want of wants) {\n            const id = want.cid.toString(base58btc);\n            const blockSize = blockSizes.get(id);\n            // If the block was not found\n            if (blockSize == null) {\n                // Only add the task to the queue if the requester wants a DONT_HAVE\n                if (want.sendDontHave) {\n                    tasks.push({\n                        topic: id,\n                        priority: want.priority,\n                        size: Message.blockPresenceSize(want.cid),\n                        data: {\n                            isWantBlock: want.wantType === WantType.Block,\n                            blockSize: 0,\n                            haveBlock: false,\n                            sendDontHave: want.sendDontHave\n                        }\n                    });\n                }\n            }\n            else {\n                // The block was found, add it to the queue\n                // If the block is small enough, just send the block, even if the\n                // client asked for a HAVE\n                const isWantBlock = this._sendAsBlock(want.wantType, blockSize);\n                // entrySize is the amount of space the entry takes up in the\n                // message we send to the recipient. If we're sending a block, the\n                // entrySize is the size of the block. Otherwise it's the size of\n                // a block presence entry.\n                let entrySize = blockSize;\n                if (!isWantBlock) {\n                    entrySize = Message.blockPresenceSize(want.cid);\n                }\n                tasks.push({\n                    topic: id,\n                    priority: want.priority,\n                    size: entrySize,\n                    data: {\n                        isWantBlock,\n                        blockSize,\n                        haveBlock: true,\n                        sendDontHave: want.sendDontHave\n                    }\n                });\n            }\n            this._requestQueue.pushTasks(peerId, tasks);\n        }\n    }\n    _sendAsBlock(wantType, blockSize) {\n        return wantType === WantType.Block ||\n            blockSize <= this._opts.maxSizeReplaceHasWithBlock;\n    }\n    async _getBlockSizes(cids) {\n        const blocks = await this._getBlocks(cids);\n        return new Map([...blocks].map(([k, v]) => [k, v.length]));\n    }\n    async _getBlocks(cids) {\n        const res = new Map();\n        await Promise.all(cids.map(async (cid) => {\n            try {\n                const block = await this.blockstore.get(cid);\n                res.set(cid.toString(base58btc), block);\n            }\n            catch (err) {\n                if (err.code !== 'ERR_NOT_FOUND') {\n                    this._log.error('failed to query blockstore for %s: %s', cid, err);\n                }\n            }\n        }));\n        return res;\n    }\n    _updateBlockAccounting(blocksMap, ledger) {\n        for (const block of blocksMap.values()) {\n            this._log('got block (%s bytes)', block.length);\n            ledger.receivedBytes(block.length);\n        }\n    }\n    /**\n     * Clear up all accounting things after message was sent\n     */\n    messageSent(peerId, cid, block) {\n        const ledger = this._findOrCreate(peerId);\n        ledger.sentBytes(block.length);\n        ledger.wantlist.remove(cid);\n    }\n    numBytesSentTo(peerId) {\n        return this._findOrCreate(peerId).accounting.bytesSent;\n    }\n    numBytesReceivedFrom(peerId) {\n        return this._findOrCreate(peerId).accounting.bytesRecv;\n    }\n    peerDisconnected(peerId) {\n        this.ledgerMap.delete(peerId.toString());\n    }\n    _findOrCreate(peerId) {\n        const peerIdStr = peerId.toString();\n        const ledger = this.ledgerMap.get(peerIdStr);\n        if (ledger != null) {\n            return ledger;\n        }\n        const l = new Ledger(peerId);\n        this.ledgerMap.set(peerIdStr, l);\n        if (this._stats != null) {\n            this._stats.push(peerIdStr, 'peerCount', 1);\n        }\n        return l;\n    }\n    start() {\n        this._running = true;\n    }\n    stop() {\n        this._running = false;\n    }\n}\n//# sourceMappingURL=index.js.map","const SECOND = 1000;\nexport const maxProvidersPerRequest = 3;\nexport const providerRequestTimeout = 10 * SECOND;\nexport const hasBlockTimeout = 15 * SECOND;\nexport const provideTimeout = 15 * SECOND;\nexport const kMaxPriority = Math.pow(2, 31) - 1;\nexport const maxListeners = 1000;\nexport const wantlistSendDebounceMs = 1;\n//# sourceMappingURL=constants.js.map","import { CodeError } from '@libp2p/interface/errors';\nimport drain from 'it-drain';\nimport * as lp from 'it-length-prefixed';\nimport map from 'it-map';\nimport { pipe } from 'it-pipe';\nimport take from 'it-take';\nimport { CustomProgressEvent } from 'progress-events';\nimport { TimeoutController } from 'timeout-abort-controller';\nimport * as CONSTANTS from './constants.js';\nimport { BitswapMessage as Message } from './message/index.js';\nimport { logger } from './utils/index.js';\nconst BITSWAP100 = '/ipfs/bitswap/1.0.0';\nconst BITSWAP110 = '/ipfs/bitswap/1.1.0';\nconst BITSWAP120 = '/ipfs/bitswap/1.2.0';\nconst DEFAULT_MAX_INBOUND_STREAMS = 1024;\nconst DEFAULT_MAX_OUTBOUND_STREAMS = 1024;\nconst DEFAULT_INCOMING_STREAM_TIMEOUT = 30000;\nexport class Network {\n    _log;\n    _libp2p;\n    _bitswap;\n    _protocols;\n    _stats;\n    _running;\n    _hashLoader;\n    _maxInboundStreams;\n    _maxOutboundStreams;\n    _incomingStreamTimeout;\n    _registrarIds;\n    constructor(libp2p, bitswap, stats, options = {}) {\n        this._log = logger(libp2p.peerId, 'network');\n        this._libp2p = libp2p;\n        this._bitswap = bitswap;\n        this._protocols = [BITSWAP100];\n        if (options.b100Only !== true) {\n            // Latest bitswap first\n            this._protocols.unshift(BITSWAP110);\n            this._protocols.unshift(BITSWAP120);\n        }\n        this._stats = stats;\n        this._running = false;\n        // bind event listeners\n        this._onPeerConnect = this._onPeerConnect.bind(this);\n        this._onPeerDisconnect = this._onPeerDisconnect.bind(this);\n        this._onConnection = this._onConnection.bind(this);\n        this._hashLoader = options.hashLoader ?? {\n            async getHasher() {\n                throw new Error('Not implemented');\n            }\n        };\n        this._maxInboundStreams = options.maxInboundStreams ?? DEFAULT_MAX_INBOUND_STREAMS;\n        this._maxOutboundStreams = options.maxOutboundStreams ?? DEFAULT_MAX_OUTBOUND_STREAMS;\n        this._incomingStreamTimeout = options.incomingStreamTimeout ?? DEFAULT_INCOMING_STREAM_TIMEOUT;\n    }\n    async start() {\n        this._running = true;\n        await this._libp2p.handle(this._protocols, this._onConnection, {\n            maxInboundStreams: this._maxInboundStreams,\n            maxOutboundStreams: this._maxOutboundStreams\n        });\n        // register protocol with topology\n        const topology = {\n            onConnect: this._onPeerConnect,\n            onDisconnect: this._onPeerDisconnect\n        };\n        /** @type {string[]} */\n        this._registrarIds = [];\n        for (const protocol of this._protocols) {\n            this._registrarIds.push(await this._libp2p.register(protocol, topology));\n        }\n        // All existing connections are like new ones for us\n        this._libp2p.getConnections().forEach(conn => {\n            this._onPeerConnect(conn.remotePeer);\n        });\n    }\n    async stop() {\n        this._running = false;\n        // Unhandle both, libp2p doesn't care if it's not already handled\n        await this._libp2p.unhandle(this._protocols);\n        // unregister protocol and handlers\n        if (this._registrarIds != null) {\n            for (const id of this._registrarIds) {\n                this._libp2p.unregister(id);\n            }\n            this._registrarIds = [];\n        }\n    }\n    /**\n     * Handles both types of incoming bitswap messages\n     */\n    _onConnection(info) {\n        if (!this._running) {\n            return;\n        }\n        const { stream, connection } = info;\n        const controller = new TimeoutController(this._incomingStreamTimeout);\n        Promise.resolve().then(async () => {\n            this._log('incoming new bitswap %s connection from %p', stream.protocol, connection.remotePeer);\n            const abortListener = () => {\n                stream.abort(new CodeError('Incoming Bitswap stream timed out', 'ERR_TIMEOUT'));\n            };\n            let signal = AbortSignal.timeout(this._incomingStreamTimeout);\n            signal.addEventListener('abort', abortListener);\n            await pipe(stream, (source) => lp.decode(source), async (source) => {\n                for await (const data of source) {\n                    try {\n                        const message = await Message.deserialize(data.subarray(), this._hashLoader);\n                        await this._bitswap._receiveMessage(connection.remotePeer, message);\n                    }\n                    catch (err) {\n                        this._bitswap._receiveError(err);\n                        break;\n                    }\n                    // we have received some data so reset the timeout controller\n                    signal.removeEventListener('abort', abortListener);\n                    signal = AbortSignal.timeout(this._incomingStreamTimeout);\n                    signal.addEventListener('abort', abortListener);\n                }\n            });\n            await stream.close({\n                signal\n            });\n        })\n            .catch(err => {\n            this._log(err);\n            stream.abort(err);\n        })\n            .finally(() => {\n            controller.clear();\n        });\n    }\n    _onPeerConnect(peerId) {\n        this._bitswap._onPeerConnected(peerId);\n    }\n    _onPeerDisconnect(peerId) {\n        this._bitswap._onPeerDisconnected(peerId);\n    }\n    /**\n     * Find providers given a `cid`.\n     */\n    findProviders(cid, options = {}) {\n        options.onProgress?.(new CustomProgressEvent('bitswap:network:find-providers', cid));\n        return this._libp2p.contentRouting.findProviders(cid, options);\n    }\n    /**\n     * Find the providers of a given `cid` and connect to them.\n     */\n    async findAndConnect(cid, options) {\n        await drain(take(map(this.findProviders(cid, options), async (provider) => this.connectTo(provider.id, options)\n            .catch(err => {\n            // Prevent unhandled promise rejection\n            this._log.error(err);\n        })), CONSTANTS.maxProvidersPerRequest))\n            .catch(err => {\n            this._log.error(err);\n        });\n    }\n    /**\n     * Tell the network we can provide content for the passed CID\n     */\n    async provide(cid, options = {}) {\n        options.onProgress?.(new CustomProgressEvent('bitswap:network:provide', cid));\n        await this._libp2p.contentRouting.provide(cid, options);\n    }\n    /**\n     * Connect to the given peer\n     * Send the given msg (instance of Message) to the given peer\n     */\n    async sendMessage(peer, msg, options = {}) {\n        if (!this._running)\n            throw new Error('network isn\\'t running');\n        const stringId = peer.toString();\n        this._log('sendMessage to %s', stringId, msg);\n        options.onProgress?.(new CustomProgressEvent('bitswap:network:send-wantlist', peer));\n        await this._writeMessage(peer, msg, options);\n        this._updateSentStats(peer, msg.blocks);\n    }\n    /**\n     * Connects to another peer\n     */\n    async connectTo(peer, options = {}) {\n        if (!this._running) {\n            throw new Error('network isn\\'t running');\n        }\n        options.onProgress?.(new CustomProgressEvent('bitswap:network:dial', peer));\n        return this._libp2p.dial(peer, options);\n    }\n    _updateSentStats(peer, blocks) {\n        const peerId = peer.toString();\n        if (this._stats != null) {\n            for (const block of blocks.values()) {\n                this._stats.push(peerId, 'dataSent', block.length);\n            }\n            this._stats.push(peerId, 'blocksSent', blocks.size);\n        }\n    }\n    async _writeMessage(peerId, msg, options = {}) {\n        const stream = await this._libp2p.dialProtocol(peerId, [BITSWAP120, BITSWAP110, BITSWAP100]);\n        try {\n            /** @type {Uint8Array} */\n            let serialized;\n            switch (stream.protocol) {\n                case BITSWAP100:\n                    serialized = msg.serializeToBitswap100();\n                    break;\n                case BITSWAP110:\n                case BITSWAP120:\n                    serialized = msg.serializeToBitswap110();\n                    break;\n                default:\n                    throw new Error(`Unknown protocol: ${stream.protocol}`);\n            }\n            await pipe([serialized], (source) => lp.encode(source), stream);\n            await stream.close();\n        }\n        catch (err) {\n            options.onProgress?.(new CustomProgressEvent('bitswap:network:send-wantlist:error', { peer: peerId, error: err }));\n            this._log(err);\n            stream.abort(err);\n        }\n    }\n}\n//# sourceMappingURL=network.js.map","import { EventEmitter } from 'events';\nimport { CustomProgressEvent } from 'progress-events';\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string';\nimport * as CONSTANTS from './constants.js';\nimport { logger } from './utils/index.js';\nconst unwantEvent = (cid) => `unwant:${uint8ArrayToString(cid.multihash.bytes, 'base64')}`;\nconst blockEvent = (cid) => `block:${uint8ArrayToString(cid.multihash.bytes, 'base64')}`;\nexport class Notifications extends EventEmitter {\n    _log;\n    /**\n     * Internal module used to track events about incoming blocks,\n     * wants and unwants.\n     */\n    constructor(peerId) {\n        super();\n        this.setMaxListeners(CONSTANTS.maxListeners);\n        this._log = logger(peerId, 'notif');\n    }\n    /**\n     * Signal the system that we received `block`.\n     */\n    hasBlock(cid, block) {\n        const event = blockEvent(cid);\n        this._log(event);\n        this.emit(event, block);\n    }\n    /**\n     * Signal the system that we are waiting to receive the\n     * block associated with the given `cid`.\n     * Returns a Promise that resolves to the block when it is received,\n     * or undefined when the block is unwanted.\n     */\n    async wantBlock(cid, options = {}) {\n        if (cid == null) {\n            throw new Error('Not a valid cid');\n        }\n        const blockEvt = blockEvent(cid);\n        const unwantEvt = unwantEvent(cid);\n        this._log(`wantBlock:${cid}`);\n        return new Promise((resolve, reject) => {\n            const onUnwant = () => {\n                this.removeListener(blockEvt, onBlock);\n                options.onProgress?.(new CustomProgressEvent('bitswap:want-block:unwant', cid));\n                reject(new Error(`Block for ${cid} unwanted`));\n            };\n            const onBlock = (data) => {\n                this.removeListener(unwantEvt, onUnwant);\n                options.onProgress?.(new CustomProgressEvent('bitswap:want-block:block', cid));\n                resolve(data);\n            };\n            this.once(unwantEvt, onUnwant);\n            this.once(blockEvt, onBlock);\n            options.signal?.addEventListener('abort', () => {\n                this.removeListener(blockEvt, onBlock);\n                this.removeListener(unwantEvt, onUnwant);\n                reject(new Error(`Want for ${cid} aborted`));\n            });\n        });\n    }\n    /**\n     * Signal that the block is not wanted anymore\n     */\n    unwantBlock(cid) {\n        const event = unwantEvent(cid);\n        this._log(event);\n        this.emit(event);\n    }\n}\n//# sourceMappingURL=notifications.js.map","import { EventEmitter } from 'events';\nimport MovingAverage, {} from '@vascosantos/moving-average';\nexport class Stat extends EventEmitter {\n    _options;\n    _queue;\n    _stats;\n    _frequencyLastTime;\n    _frequencyAccumulators;\n    _movingAverages;\n    _enabled;\n    _timeout;\n    constructor(initialCounters, options) {\n        super();\n        this._options = options;\n        this._queue = [];\n        this._stats = {};\n        this._frequencyLastTime = Date.now();\n        this._frequencyAccumulators = {};\n        this._movingAverages = {};\n        this._update = this._update.bind(this);\n        initialCounters.forEach((key) => {\n            this._stats[key] = BigInt(0);\n            this._movingAverages[key] = {};\n            this._options.movingAverageIntervals.forEach((interval) => {\n                const ma = this._movingAverages[key][interval] = MovingAverage(interval);\n                ma.push(this._frequencyLastTime, 0);\n            });\n        });\n        this._enabled = this._options.enabled;\n    }\n    enable() {\n        this._enabled = true;\n    }\n    disable() {\n        this._enabled = false;\n    }\n    stop() {\n        if (this._timeout != null) {\n            clearTimeout(this._timeout);\n        }\n    }\n    get snapshot() {\n        return Object.assign({}, this._stats);\n    }\n    get movingAverages() {\n        return Object.assign({}, this._movingAverages);\n    }\n    push(counter, inc) {\n        if (this._enabled) {\n            this._queue.push([counter, inc, Date.now()]);\n            this._resetComputeTimeout();\n        }\n    }\n    _resetComputeTimeout() {\n        if (this._timeout != null) {\n            clearTimeout(this._timeout);\n        }\n        this._timeout = setTimeout(this._update, this._nextTimeout());\n    }\n    _nextTimeout() {\n        // calculate the need for an update, depending on the queue length\n        const urgency = this._queue.length / this._options.computeThrottleMaxQueueSize;\n        return Math.max(this._options.computeThrottleTimeout * (1 - urgency), 0);\n    }\n    _update() {\n        this._timeout = undefined;\n        if (this._queue.length > 0) {\n            let last;\n            while (this._queue.length > 0) {\n                const op = last = this._queue.shift();\n                (op != null) && this._applyOp(op);\n            }\n            (last != null) && this._updateFrequency(last[2]); // contains timestamp of last op\n            this.emit('update', this._stats);\n        }\n    }\n    _updateFrequency(latestTime) {\n        const timeDiff = latestTime - this._frequencyLastTime;\n        if (timeDiff > 0) {\n            Object.keys(this._stats).forEach((key) => {\n                this._updateFrequencyFor(key, timeDiff, latestTime);\n            });\n        }\n        this._frequencyLastTime = latestTime;\n    }\n    _updateFrequencyFor(key, timeDiffMS, latestTime) {\n        const count = this._frequencyAccumulators[key] ?? 0;\n        this._frequencyAccumulators[key] = 0;\n        const hz = (count / timeDiffMS) * 1000;\n        let movingAverages = this._movingAverages[key];\n        if (movingAverages == null) {\n            movingAverages = this._movingAverages[key] = {};\n        }\n        this._options.movingAverageIntervals.forEach((movingAverageInterval) => {\n            let movingAverage = movingAverages[movingAverageInterval];\n            if (movingAverage == null) {\n                movingAverage = movingAverages[movingAverageInterval] = MovingAverage(movingAverageInterval);\n            }\n            movingAverage.push(latestTime, hz);\n        });\n    }\n    _applyOp(op) {\n        const key = op[0];\n        const inc = op[1];\n        if (typeof inc !== 'number') {\n            throw new Error(`invalid increment number: ${inc}`);\n        }\n        if (!Object.prototype.hasOwnProperty.call(this._stats, key)) {\n            this._stats[key] = BigInt(0);\n        }\n        this._stats[key] = BigInt(this._stats[key]) + BigInt(inc);\n        if (this._frequencyAccumulators[key] == null) {\n            this._frequencyAccumulators[key] = 0;\n        }\n        this._frequencyAccumulators[key] += inc;\n    }\n}\n//# sourceMappingURL=stat.js.map","import { EventEmitter } from 'events';\nimport { trackedMap } from '@libp2p/interface/metrics/tracked-map';\nimport { Stat } from './stat.js';\nconst defaultOptions = {\n    enabled: false,\n    computeThrottleTimeout: 1000,\n    computeThrottleMaxQueueSize: 1000,\n    movingAverageIntervals: [\n        60 * 1000,\n        5 * 60 * 1000,\n        15 * 60 * 1000 // 15 minutes\n    ]\n};\nexport class Stats extends EventEmitter {\n    _initialCounters;\n    _options;\n    _enabled;\n    _global;\n    _peers;\n    constructor(libp2p, initialCounters = [], _options = defaultOptions) {\n        super();\n        const options = Object.assign({}, defaultOptions, _options);\n        if (typeof options.computeThrottleTimeout !== 'number') {\n            throw new Error('need computeThrottleTimeout');\n        }\n        if (typeof options.computeThrottleMaxQueueSize !== 'number') {\n            throw new Error('need computeThrottleMaxQueueSize');\n        }\n        this._initialCounters = initialCounters;\n        this._options = options;\n        this._enabled = this._options.enabled;\n        this._global = new Stat(initialCounters, options);\n        this._global.on('update', (stats) => this.emit('update', stats));\n        this._peers = trackedMap({\n            name: 'ipfs_bitswap_stats_peers',\n            metrics: libp2p.metrics\n        });\n    }\n    enable() {\n        this._enabled = true;\n        this._options.enabled = true;\n        this._global.enable();\n    }\n    disable() {\n        this._enabled = false;\n        this._options.enabled = false;\n        this._global.disable();\n    }\n    stop() {\n        this._enabled = false;\n        this._global.stop();\n        for (const peerStat of this._peers) {\n            peerStat[1].stop();\n        }\n    }\n    get snapshot() {\n        return this._global.snapshot;\n    }\n    get movingAverages() {\n        return this._global.movingAverages;\n    }\n    forPeer(peerId) {\n        const peerIdStr = peerId.toString();\n        return this._peers.get(peerIdStr);\n    }\n    push(peer, counter, inc) {\n        if (this._enabled) {\n            this._global.push(counter, inc);\n            if (peer != null) {\n                let peerStats = this._peers.get(peer);\n                if (peerStats == null) {\n                    peerStats = new Stat(this._initialCounters, this._options);\n                    this._peers.set(peer, peerStats);\n                }\n                peerStats.push(counter, inc);\n            }\n        }\n    }\n    disconnected(peer) {\n        const peerId = peer.toString();\n        const peerStats = this._peers.get(peerId);\n        if (peerStats != null) {\n            peerStats.stop();\n            this._peers.delete(peerId);\n        }\n    }\n}\n//# sourceMappingURL=index.js.map","import debounce from 'just-debounce-it';\nimport { wantlistSendDebounceMs } from '../constants.js';\nimport { BitswapMessage as Message } from '../message/index.js';\nimport { logger } from '../utils/index.js';\nexport class MsgQueue {\n    peerId;\n    refcnt;\n    network;\n    _entries;\n    _log;\n    constructor(selfPeerId, otherPeerId, network) {\n        this.peerId = otherPeerId;\n        this.network = network;\n        this.refcnt = 1;\n        this._entries = [];\n        this._log = logger(selfPeerId, 'msgqueue');\n        this.sendEntries = debounce(this.sendEntries.bind(this), wantlistSendDebounceMs);\n    }\n    addMessage(msg, options = {}) {\n        if (msg.empty) {\n            return;\n        }\n        void this.send(msg, options);\n    }\n    addEntries(entries, options = {}) {\n        this._entries = this._entries.concat(entries);\n        this.sendEntries(options);\n    }\n    sendEntries(options = {}) {\n        if (this._entries.length === 0) {\n            return;\n        }\n        const msg = new Message(false);\n        this._entries.forEach((entry) => {\n            if (entry.cancel === true) {\n                msg.cancel(entry.cid);\n            }\n            else {\n                msg.addEntry(entry.cid, entry.priority);\n            }\n        });\n        this._entries = [];\n        this.addMessage(msg, options);\n    }\n    async send(msg, options = {}) {\n        try {\n            await this.network.connectTo(this.peerId, options);\n        }\n        catch (err) {\n            this._log.error('cant connect to peer %p: %s', this.peerId, err.message);\n            return;\n        }\n        this._log('sending message to peer %p', this.peerId);\n        // Note: Don't wait for sendMessage() to complete\n        this.network.sendMessage(this.peerId, msg, options).catch((err) => {\n            this._log.error('send error', err);\n        });\n    }\n}\n//# sourceMappingURL=msg-queue.js.map","import { trackedMap } from '@libp2p/interface/metrics/tracked-map';\nimport { base58btc } from 'multiformats/bases/base58';\nimport * as CONSTANTS from '../constants.js';\nimport { BitswapMessage as Message } from '../message/index.js';\nimport { logger } from '../utils/index.js';\nimport { Wantlist } from '../wantlist/index.js';\nimport { MsgQueue } from './msg-queue.js';\nexport class WantManager {\n    peers;\n    wantlist;\n    network;\n    _peerId;\n    _log;\n    constructor(peerId, network, stats, libp2p) {\n        this.peers = trackedMap({\n            name: 'ipfs_bitswap_want_manager_peers',\n            metrics: libp2p.metrics\n        });\n        this.wantlist = new Wantlist(stats, libp2p);\n        this.network = network;\n        this._peerId = peerId;\n        this._log = logger(peerId, 'want');\n    }\n    _addEntries(cids, cancel, force, options = {}) {\n        const entries = cids.map((cid, i) => {\n            return new Message.Entry(cid, CONSTANTS.kMaxPriority - i, Message.WantType.Block, cancel);\n        });\n        entries.forEach((e) => {\n            // add changes to our wantlist\n            if (e.cancel) {\n                if (force === true) {\n                    this.wantlist.removeForce(e.cid.toString(base58btc));\n                }\n                else {\n                    this.wantlist.remove(e.cid);\n                }\n            }\n            else {\n                this._log('adding to wantlist');\n                // TODO: Figure out the wantType\n                // @ts-expect-error - requires wantType\n                this.wantlist.add(e.cid, e.priority);\n            }\n        });\n        // broadcast changes\n        for (const p of this.peers.values()) {\n            p.addEntries(entries, options);\n        }\n    }\n    _startPeerHandler(peerId) {\n        let mq = this.peers.get(peerId.toString());\n        if (mq != null) {\n            mq.refcnt++;\n            return;\n        }\n        mq = new MsgQueue(this._peerId, peerId, this.network);\n        // new peer, give them the full wantlist\n        const fullwantlist = new Message(true);\n        for (const entry of this.wantlist.entries()) {\n            fullwantlist.addEntry(entry[1].cid, entry[1].priority);\n        }\n        mq.addMessage(fullwantlist);\n        this.peers.set(peerId.toString(), mq);\n        return mq;\n    }\n    _stopPeerHandler(peerId) {\n        const mq = this.peers.get(peerId.toString());\n        if (mq == null) {\n            return;\n        }\n        mq.refcnt--;\n        if (mq.refcnt > 0) {\n            return;\n        }\n        this.peers.delete(peerId.toString());\n    }\n    /**\n     * add all the cids to the wantlist\n     */\n    wantBlocks(cids, options = {}) {\n        this._addEntries(cids, false, false, options);\n        options.signal?.addEventListener('abort', () => {\n            this.cancelWants(cids);\n        });\n    }\n    /**\n     * Remove blocks of all the given keys without respecting refcounts\n     */\n    unwantBlocks(cids) {\n        this._log('unwant blocks: %s', cids.length);\n        this._addEntries(cids, true, true);\n    }\n    /**\n     * Cancel wanting all of the given keys\n     */\n    cancelWants(cids) {\n        this._log('cancel wants: %s', cids.length);\n        this._addEntries(cids, true);\n    }\n    /**\n     * Returns a list of all currently connected peers\n     */\n    connectedPeers() {\n        return Array.from(this.peers.keys());\n    }\n    connected(peerId) {\n        this._startPeerHandler(peerId);\n    }\n    disconnected(peerId) {\n        this._stopPeerHandler(peerId);\n    }\n    start() {\n    }\n    stop() {\n        this.peers.forEach((mq) => { this.disconnected(mq.peerId); });\n    }\n}\n//# sourceMappingURL=index.js.map","import { anySignal } from 'any-signal';\nimport forEach from 'it-foreach';\nimport { CID } from 'multiformats/cid';\nimport { DecisionEngine } from './decision-engine/index.js';\nimport { Network } from './network.js';\nimport { Notifications } from './notifications.js';\nimport { Stats } from './stats/index.js';\nimport { logger } from './utils/index.js';\nimport { WantManager } from './want-manager/index.js';\nconst hashLoader = {\n    async getHasher() {\n        throw new Error('Not implemented');\n    }\n};\nconst defaultOptions = {\n    maxInboundStreams: 1024,\n    maxOutboundStreams: 1024,\n    incomingStreamTimeout: 30000,\n    hashLoader,\n    statsEnabled: false,\n    statsComputeThrottleTimeout: 1000,\n    statsComputeThrottleMaxQueueSize: 1000\n};\nconst statsKeys = [\n    'blocksReceived',\n    'dataReceived',\n    'dupBlksReceived',\n    'dupDataReceived',\n    'blocksSent',\n    'dataSent',\n    'providesBufferLength',\n    'wantListLength',\n    'peerCount'\n];\n/**\n * JavaScript implementation of the Bitswap 'data exchange' protocol\n * used by IPFS.\n */\nexport class DefaultBitswap {\n    _libp2p;\n    _log;\n    stats;\n    network;\n    blockstore;\n    engine;\n    wm;\n    notifications;\n    started;\n    constructor(libp2p, blockstore, options = {}) {\n        this._libp2p = libp2p;\n        this._log = logger(this.peerId);\n        options = Object.assign({}, defaultOptions, options);\n        // stats\n        this.stats = new Stats(libp2p, statsKeys, {\n            enabled: options.statsEnabled,\n            computeThrottleTimeout: options.statsComputeThrottleTimeout,\n            computeThrottleMaxQueueSize: options.statsComputeThrottleMaxQueueSize\n        });\n        // the network delivers messages\n        this.network = new Network(libp2p, this, this.stats, {\n            hashLoader: options.hashLoader,\n            maxInboundStreams: options.maxInboundStreams,\n            maxOutboundStreams: options.maxOutboundStreams,\n            incomingStreamTimeout: options.incomingStreamTimeout\n        });\n        // local database\n        this.blockstore = blockstore;\n        this.engine = new DecisionEngine(this.peerId, blockstore, this.network, this.stats, libp2p);\n        // handle message sending\n        this.wm = new WantManager(this.peerId, this.network, this.stats, libp2p);\n        this.notifications = new Notifications(this.peerId);\n        this.started = false;\n    }\n    isStarted() {\n        return this.started;\n    }\n    get peerId() {\n        return this._libp2p.peerId;\n    }\n    /**\n     * handle messages received through the network\n     */\n    async _receiveMessage(peerId, incoming) {\n        try {\n            // Note: this allows the engine to respond to any wants in the message.\n            // Processing of the blocks in the message happens below, after the\n            // blocks have been added to the blockstore.\n            await this.engine.messageReceived(peerId, incoming);\n        }\n        catch (err) {\n            // Log instead of throwing an error so as to process as much as\n            // possible of the message. Currently `messageReceived` does not\n            // throw any errors, but this could change in the future.\n            this._log('failed to receive message', incoming);\n        }\n        if (incoming.blocks.size === 0) {\n            return;\n        }\n        /** @type { { cid: CID, wasWanted: boolean, data: Uint8Array }[] } */\n        const received = [];\n        for (const [cidStr, data] of incoming.blocks.entries()) {\n            const cid = CID.parse(cidStr);\n            received.push({\n                wasWanted: this.wm.wantlist.contains(cid),\n                cid,\n                data\n            });\n        }\n        // quickly send out cancels, reduces chances of duplicate block receives\n        this.wm.cancelWants(received\n            .filter(({ wasWanted }) => wasWanted)\n            .map(({ cid }) => cid));\n        await Promise.all(received.map(async ({ cid, wasWanted, data }) => { await this._handleReceivedBlock(peerId, cid, data, wasWanted); }));\n    }\n    async _handleReceivedBlock(peerId, cid, data, wasWanted) {\n        this._log('received block');\n        const has = await this.blockstore.has(cid);\n        this._updateReceiveCounters(peerId.toString(), cid, data, has);\n        if (!wasWanted) {\n            return;\n        }\n        await this.put(cid, data);\n    }\n    _updateReceiveCounters(peerIdStr, cid, data, exists) {\n        this.stats.push(peerIdStr, 'blocksReceived', 1);\n        this.stats.push(peerIdStr, 'dataReceived', data.length);\n        if (exists) {\n            this.stats.push(peerIdStr, 'dupBlksReceived', 1);\n            this.stats.push(peerIdStr, 'dupDataReceived', data.length);\n        }\n    }\n    /**\n     * handle errors on the receiving channel\n     */\n    _receiveError(err) {\n        this._log.error('ReceiveError', err);\n    }\n    /**\n     * handle new peers\n     */\n    _onPeerConnected(peerId) {\n        this.wm.connected(peerId);\n    }\n    /**\n     * handle peers being disconnected\n     */\n    _onPeerDisconnected(peerId) {\n        this.wm.disconnected(peerId);\n        this.engine.peerDisconnected(peerId);\n        this.stats.disconnected(peerId);\n    }\n    enableStats() {\n        this.stats.enable();\n    }\n    disableStats() {\n        this.stats.disable();\n    }\n    /**\n     * Return the current wantlist for a given `peerId`\n     */\n    wantlistForPeer(peerId, _options) {\n        return this.engine.wantlistForPeer(peerId);\n    }\n    /**\n     * Return ledger information for a given `peerId`\n     */\n    ledgerForPeer(peerId) {\n        return this.engine.ledgerForPeer(peerId);\n    }\n    /**\n     * Fetch a given block by cid. If the block is in the local\n     * blockstore it is returned, otherwise the block is added to the wantlist and returned once another node sends it to us.\n     */\n    async want(cid, options = {}) {\n        const fetchFromNetwork = async (cid, options) => {\n            // add it to the want list - n.b. later we will abort the AbortSignal\n            // so no need to remove the blocks from the wantlist after we have it\n            this.wm.wantBlocks([cid], options);\n            return this.notifications.wantBlock(cid, options);\n        };\n        let promptedNetwork = false;\n        const loadOrFetchFromNetwork = async (cid, options) => {\n            try {\n                // have to await here as we want to handle ERR_NOT_FOUND\n                const block = await this.blockstore.get(cid, options);\n                return block;\n            }\n            catch (err) {\n                if (err.code !== 'ERR_NOT_FOUND') {\n                    throw err;\n                }\n                if (!promptedNetwork) {\n                    promptedNetwork = true;\n                    this.network.findAndConnect(cid, options)\n                        .catch((err) => { this._log.error(err); });\n                }\n                // we don't have the block locally so fetch it from the network\n                return await fetchFromNetwork(cid, options);\n            }\n        };\n        // depending on implementation it's possible for blocks to come in while\n        // we do the async operations to get them from the blockstore leading to\n        // a race condition, so register for incoming block notifications as well\n        // as trying to get it from the datastore\n        const controller = new AbortController();\n        const signal = anySignal([controller.signal, options.signal]);\n        try {\n            const block = await Promise.race([\n                this.notifications.wantBlock(cid, {\n                    ...options,\n                    signal\n                }),\n                loadOrFetchFromNetwork(cid, {\n                    ...options,\n                    signal\n                })\n            ]);\n            return block;\n        }\n        finally {\n            // since we have the block we can now abort any outstanding attempts to\n            // fetch it\n            controller.abort();\n            signal.clear();\n        }\n    }\n    /**\n     * Removes the given CIDs from the wantlist independent of any ref counts.\n     *\n     * This will cause all outstanding promises for a given block to reject.\n     *\n     * If you want to cancel the want for a block without doing that, pass an\n     * AbortSignal in to `.get` or `.getMany` and abort it.\n     */\n    unwant(cids) {\n        const cidsArray = Array.isArray(cids) ? cids : [cids];\n        this.wm.unwantBlocks(cidsArray);\n        cidsArray.forEach((cid) => { this.notifications.unwantBlock(cid); });\n    }\n    /**\n     * Removes the given keys from the want list. This may cause pending promises\n     * for blocks to never resolve.  If you wish these promises to abort instead\n     * call `unwant(cids)` instead.\n     */\n    cancelWants(cids) {\n        this.wm.cancelWants(Array.isArray(cids) ? cids : [cids]);\n    }\n    /**\n     * Put the given block to the underlying blockstore and\n     * send it to nodes that have it in their wantlist.\n     */\n    async put(cid, block, _options) {\n        await this.blockstore.put(cid, block);\n        this.notify(cid, block);\n    }\n    /**\n     * Put the given blocks to the underlying blockstore and\n     * send it to nodes that have it them their wantlist.\n     */\n    async *putMany(source, options) {\n        yield* this.blockstore.putMany(forEach(source, ({ cid, block }) => {\n            this.notify(cid, block);\n        }), options);\n    }\n    /**\n     * Sends notifications about the arrival of a block\n     */\n    notify(cid, block, options = {}) {\n        this.notifications.hasBlock(cid, block);\n        this.engine.receivedBlocks([{ cid, block }]);\n        // Note: Don't wait for provide to finish before returning\n        this.network.provide(cid, options).catch((err) => {\n            this._log.error('Failed to provide: %s', err.message);\n        });\n    }\n    /**\n     * Get the current list of wants\n     */\n    getWantlist() {\n        return this.wm.wantlist.entries();\n    }\n    /**\n     * Get the current list of partners\n     */\n    get peers() {\n        return this.engine.peers();\n    }\n    /**\n     * Start the bitswap node\n     */\n    async start() {\n        this.wm.start();\n        await this.network.start();\n        this.engine.start();\n        this.started = true;\n    }\n    /**\n     * Stop the bitswap node\n     */\n    async stop() {\n        this.stats.stop();\n        this.wm.stop();\n        await this.network.stop();\n        this.engine.stop();\n        this.started = false;\n    }\n}\n//# sourceMappingURL=bitswap.js.map","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _PriorityQueue_queue;\nimport lowerBound from './lower-bound.js';\nclass PriorityQueue {\n    constructor() {\n        _PriorityQueue_queue.set(this, []);\n    }\n    enqueue(run, options) {\n        options = {\n            priority: 0,\n            ...options,\n        };\n        const element = {\n            priority: options.priority,\n            run,\n        };\n        if (this.size && __classPrivateFieldGet(this, _PriorityQueue_queue, \"f\")[this.size - 1].priority >= options.priority) {\n            __classPrivateFieldGet(this, _PriorityQueue_queue, \"f\").push(element);\n            return;\n        }\n        const index = lowerBound(__classPrivateFieldGet(this, _PriorityQueue_queue, \"f\"), element, (a, b) => b.priority - a.priority);\n        __classPrivateFieldGet(this, _PriorityQueue_queue, \"f\").splice(index, 0, element);\n    }\n    dequeue() {\n        const item = __classPrivateFieldGet(this, _PriorityQueue_queue, \"f\").shift();\n        return item === null || item === void 0 ? void 0 : item.run;\n    }\n    filter(options) {\n        return __classPrivateFieldGet(this, _PriorityQueue_queue, \"f\").filter((element) => element.priority === options.priority).map((element) => element.run);\n    }\n    get size() {\n        return __classPrivateFieldGet(this, _PriorityQueue_queue, \"f\").length;\n    }\n}\n_PriorityQueue_queue = new WeakMap();\nexport default PriorityQueue;\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _PQueue_instances, _PQueue_carryoverConcurrencyCount, _PQueue_isIntervalIgnored, _PQueue_intervalCount, _PQueue_intervalCap, _PQueue_interval, _PQueue_intervalEnd, _PQueue_intervalId, _PQueue_timeoutId, _PQueue_queue, _PQueue_queueClass, _PQueue_pending, _PQueue_concurrency, _PQueue_isPaused, _PQueue_throwOnTimeout, _PQueue_doesIntervalAllowAnother_get, _PQueue_doesConcurrentAllowAnother_get, _PQueue_next, _PQueue_onResumeInterval, _PQueue_isIntervalPaused_get, _PQueue_tryToStartAnother, _PQueue_initializeIntervalIfNeeded, _PQueue_onInterval, _PQueue_processQueue, _PQueue_throwOnAbort, _PQueue_onEvent;\nimport { EventEmitter } from 'eventemitter3';\nimport pTimeout, { TimeoutError } from 'p-timeout';\nimport PriorityQueue from './priority-queue.js';\n/**\nThe error thrown by `queue.add()` when a job is aborted before it is run. See `signal`.\n*/\nexport class AbortError extends Error {\n}\n/**\nPromise queue with concurrency control.\n*/\nclass PQueue extends EventEmitter {\n    // TODO: The `throwOnTimeout` option should affect the return types of `add()` and `addAll()`\n    constructor(options) {\n        var _a, _b, _c, _d;\n        super();\n        _PQueue_instances.add(this);\n        _PQueue_carryoverConcurrencyCount.set(this, void 0);\n        _PQueue_isIntervalIgnored.set(this, void 0);\n        _PQueue_intervalCount.set(this, 0);\n        _PQueue_intervalCap.set(this, void 0);\n        _PQueue_interval.set(this, void 0);\n        _PQueue_intervalEnd.set(this, 0);\n        _PQueue_intervalId.set(this, void 0);\n        _PQueue_timeoutId.set(this, void 0);\n        _PQueue_queue.set(this, void 0);\n        _PQueue_queueClass.set(this, void 0);\n        _PQueue_pending.set(this, 0);\n        // The `!` is needed because of https://github.com/microsoft/TypeScript/issues/32194\n        _PQueue_concurrency.set(this, void 0);\n        _PQueue_isPaused.set(this, void 0);\n        _PQueue_throwOnTimeout.set(this, void 0);\n        /**\n        Per-operation timeout in milliseconds. Operations fulfill once `timeout` elapses if they haven't already.\n    \n        Applies to each future operation.\n        */\n        Object.defineProperty(this, \"timeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n        options = {\n            carryoverConcurrencyCount: false,\n            intervalCap: Number.POSITIVE_INFINITY,\n            interval: 0,\n            concurrency: Number.POSITIVE_INFINITY,\n            autoStart: true,\n            queueClass: PriorityQueue,\n            ...options,\n        };\n        if (!(typeof options.intervalCap === 'number' && options.intervalCap >= 1)) {\n            throw new TypeError(`Expected \\`intervalCap\\` to be a number from 1 and up, got \\`${(_b = (_a = options.intervalCap) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : ''}\\` (${typeof options.intervalCap})`);\n        }\n        if (options.interval === undefined || !(Number.isFinite(options.interval) && options.interval >= 0)) {\n            throw new TypeError(`Expected \\`interval\\` to be a finite number >= 0, got \\`${(_d = (_c = options.interval) === null || _c === void 0 ? void 0 : _c.toString()) !== null && _d !== void 0 ? _d : ''}\\` (${typeof options.interval})`);\n        }\n        __classPrivateFieldSet(this, _PQueue_carryoverConcurrencyCount, options.carryoverConcurrencyCount, \"f\");\n        __classPrivateFieldSet(this, _PQueue_isIntervalIgnored, options.intervalCap === Number.POSITIVE_INFINITY || options.interval === 0, \"f\");\n        __classPrivateFieldSet(this, _PQueue_intervalCap, options.intervalCap, \"f\");\n        __classPrivateFieldSet(this, _PQueue_interval, options.interval, \"f\");\n        __classPrivateFieldSet(this, _PQueue_queue, new options.queueClass(), \"f\");\n        __classPrivateFieldSet(this, _PQueue_queueClass, options.queueClass, \"f\");\n        this.concurrency = options.concurrency;\n        this.timeout = options.timeout;\n        __classPrivateFieldSet(this, _PQueue_throwOnTimeout, options.throwOnTimeout === true, \"f\");\n        __classPrivateFieldSet(this, _PQueue_isPaused, options.autoStart === false, \"f\");\n    }\n    get concurrency() {\n        return __classPrivateFieldGet(this, _PQueue_concurrency, \"f\");\n    }\n    set concurrency(newConcurrency) {\n        if (!(typeof newConcurrency === 'number' && newConcurrency >= 1)) {\n            throw new TypeError(`Expected \\`concurrency\\` to be a number from 1 and up, got \\`${newConcurrency}\\` (${typeof newConcurrency})`);\n        }\n        __classPrivateFieldSet(this, _PQueue_concurrency, newConcurrency, \"f\");\n        __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_processQueue).call(this);\n    }\n    async add(function_, options = {}) {\n        options = {\n            timeout: this.timeout,\n            throwOnTimeout: __classPrivateFieldGet(this, _PQueue_throwOnTimeout, \"f\"),\n            ...options,\n        };\n        return new Promise((resolve, reject) => {\n            __classPrivateFieldGet(this, _PQueue_queue, \"f\").enqueue(async () => {\n                var _a;\n                var _b, _c;\n                __classPrivateFieldSet(this, _PQueue_pending, (_b = __classPrivateFieldGet(this, _PQueue_pending, \"f\"), _b++, _b), \"f\");\n                __classPrivateFieldSet(this, _PQueue_intervalCount, (_c = __classPrivateFieldGet(this, _PQueue_intervalCount, \"f\"), _c++, _c), \"f\");\n                try {\n                    // TODO: Use options.signal?.throwIfAborted() when targeting Node.js 18\n                    if ((_a = options.signal) === null || _a === void 0 ? void 0 : _a.aborted) {\n                        // TODO: Use ABORT_ERR code when targeting Node.js 16 (https://nodejs.org/docs/latest-v16.x/api/errors.html#abort_err)\n                        throw new AbortError('The task was aborted.');\n                    }\n                    let operation = function_({ signal: options.signal });\n                    if (options.timeout) {\n                        operation = pTimeout(Promise.resolve(operation), options.timeout);\n                    }\n                    if (options.signal) {\n                        operation = Promise.race([operation, __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_throwOnAbort).call(this, options.signal)]);\n                    }\n                    const result = await operation;\n                    resolve(result);\n                    this.emit('completed', result);\n                }\n                catch (error) {\n                    if (error instanceof TimeoutError && !options.throwOnTimeout) {\n                        resolve();\n                        return;\n                    }\n                    reject(error);\n                    this.emit('error', error);\n                }\n                finally {\n                    __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_next).call(this);\n                }\n            }, options);\n            this.emit('add');\n            __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_tryToStartAnother).call(this);\n        });\n    }\n    async addAll(functions, options) {\n        return Promise.all(functions.map(async (function_) => this.add(function_, options)));\n    }\n    /**\n    Start (or resume) executing enqueued tasks within concurrency limit. No need to call this if queue is not paused (via `options.autoStart = false` or by `.pause()` method.)\n    */\n    start() {\n        if (!__classPrivateFieldGet(this, _PQueue_isPaused, \"f\")) {\n            return this;\n        }\n        __classPrivateFieldSet(this, _PQueue_isPaused, false, \"f\");\n        __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_processQueue).call(this);\n        return this;\n    }\n    /**\n    Put queue execution on hold.\n    */\n    pause() {\n        __classPrivateFieldSet(this, _PQueue_isPaused, true, \"f\");\n    }\n    /**\n    Clear the queue.\n    */\n    clear() {\n        __classPrivateFieldSet(this, _PQueue_queue, new (__classPrivateFieldGet(this, _PQueue_queueClass, \"f\"))(), \"f\");\n    }\n    /**\n    Can be called multiple times. Useful if you for example add additional items at a later time.\n\n    @returns A promise that settles when the queue becomes empty.\n    */\n    async onEmpty() {\n        // Instantly resolve if the queue is empty\n        if (__classPrivateFieldGet(this, _PQueue_queue, \"f\").size === 0) {\n            return;\n        }\n        await __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_onEvent).call(this, 'empty');\n    }\n    /**\n    @returns A promise that settles when the queue size is less than the given limit: `queue.size < limit`.\n\n    If you want to avoid having the queue grow beyond a certain size you can `await queue.onSizeLessThan()` before adding a new item.\n\n    Note that this only limits the number of items waiting to start. There could still be up to `concurrency` jobs already running that this call does not include in its calculation.\n    */\n    async onSizeLessThan(limit) {\n        // Instantly resolve if the queue is empty.\n        if (__classPrivateFieldGet(this, _PQueue_queue, \"f\").size < limit) {\n            return;\n        }\n        await __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_onEvent).call(this, 'next', () => __classPrivateFieldGet(this, _PQueue_queue, \"f\").size < limit);\n    }\n    /**\n    The difference with `.onEmpty` is that `.onIdle` guarantees that all work from the queue has finished. `.onEmpty` merely signals that the queue is empty, but it could mean that some promises haven't completed yet.\n\n    @returns A promise that settles when the queue becomes empty, and all promises have completed; `queue.size === 0 && queue.pending === 0`.\n    */\n    async onIdle() {\n        // Instantly resolve if none pending and if nothing else is queued\n        if (__classPrivateFieldGet(this, _PQueue_pending, \"f\") === 0 && __classPrivateFieldGet(this, _PQueue_queue, \"f\").size === 0) {\n            return;\n        }\n        await __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_onEvent).call(this, 'idle');\n    }\n    /**\n    Size of the queue, the number of queued items waiting to run.\n    */\n    get size() {\n        return __classPrivateFieldGet(this, _PQueue_queue, \"f\").size;\n    }\n    /**\n    Size of the queue, filtered by the given options.\n\n    For example, this can be used to find the number of items remaining in the queue with a specific priority level.\n    */\n    sizeBy(options) {\n        // eslint-disable-next-line unicorn/no-array-callback-reference\n        return __classPrivateFieldGet(this, _PQueue_queue, \"f\").filter(options).length;\n    }\n    /**\n    Number of running items (no longer in the queue).\n    */\n    get pending() {\n        return __classPrivateFieldGet(this, _PQueue_pending, \"f\");\n    }\n    /**\n    Whether the queue is currently paused.\n    */\n    get isPaused() {\n        return __classPrivateFieldGet(this, _PQueue_isPaused, \"f\");\n    }\n}\n_PQueue_carryoverConcurrencyCount = new WeakMap(), _PQueue_isIntervalIgnored = new WeakMap(), _PQueue_intervalCount = new WeakMap(), _PQueue_intervalCap = new WeakMap(), _PQueue_interval = new WeakMap(), _PQueue_intervalEnd = new WeakMap(), _PQueue_intervalId = new WeakMap(), _PQueue_timeoutId = new WeakMap(), _PQueue_queue = new WeakMap(), _PQueue_queueClass = new WeakMap(), _PQueue_pending = new WeakMap(), _PQueue_concurrency = new WeakMap(), _PQueue_isPaused = new WeakMap(), _PQueue_throwOnTimeout = new WeakMap(), _PQueue_instances = new WeakSet(), _PQueue_doesIntervalAllowAnother_get = function _PQueue_doesIntervalAllowAnother_get() {\n    return __classPrivateFieldGet(this, _PQueue_isIntervalIgnored, \"f\") || __classPrivateFieldGet(this, _PQueue_intervalCount, \"f\") < __classPrivateFieldGet(this, _PQueue_intervalCap, \"f\");\n}, _PQueue_doesConcurrentAllowAnother_get = function _PQueue_doesConcurrentAllowAnother_get() {\n    return __classPrivateFieldGet(this, _PQueue_pending, \"f\") < __classPrivateFieldGet(this, _PQueue_concurrency, \"f\");\n}, _PQueue_next = function _PQueue_next() {\n    var _a;\n    __classPrivateFieldSet(this, _PQueue_pending, (_a = __classPrivateFieldGet(this, _PQueue_pending, \"f\"), _a--, _a), \"f\");\n    __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_tryToStartAnother).call(this);\n    this.emit('next');\n}, _PQueue_onResumeInterval = function _PQueue_onResumeInterval() {\n    __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_onInterval).call(this);\n    __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_initializeIntervalIfNeeded).call(this);\n    __classPrivateFieldSet(this, _PQueue_timeoutId, undefined, \"f\");\n}, _PQueue_isIntervalPaused_get = function _PQueue_isIntervalPaused_get() {\n    const now = Date.now();\n    if (__classPrivateFieldGet(this, _PQueue_intervalId, \"f\") === undefined) {\n        const delay = __classPrivateFieldGet(this, _PQueue_intervalEnd, \"f\") - now;\n        if (delay < 0) {\n            // Act as the interval was done\n            // We don't need to resume it here because it will be resumed on line 160\n            __classPrivateFieldSet(this, _PQueue_intervalCount, (__classPrivateFieldGet(this, _PQueue_carryoverConcurrencyCount, \"f\")) ? __classPrivateFieldGet(this, _PQueue_pending, \"f\") : 0, \"f\");\n        }\n        else {\n            // Act as the interval is pending\n            if (__classPrivateFieldGet(this, _PQueue_timeoutId, \"f\") === undefined) {\n                __classPrivateFieldSet(this, _PQueue_timeoutId, setTimeout(() => {\n                    __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_onResumeInterval).call(this);\n                }, delay), \"f\");\n            }\n            return true;\n        }\n    }\n    return false;\n}, _PQueue_tryToStartAnother = function _PQueue_tryToStartAnother() {\n    if (__classPrivateFieldGet(this, _PQueue_queue, \"f\").size === 0) {\n        // We can clear the interval (\"pause\")\n        // Because we can redo it later (\"resume\")\n        if (__classPrivateFieldGet(this, _PQueue_intervalId, \"f\")) {\n            clearInterval(__classPrivateFieldGet(this, _PQueue_intervalId, \"f\"));\n        }\n        __classPrivateFieldSet(this, _PQueue_intervalId, undefined, \"f\");\n        this.emit('empty');\n        if (__classPrivateFieldGet(this, _PQueue_pending, \"f\") === 0) {\n            this.emit('idle');\n        }\n        return false;\n    }\n    if (!__classPrivateFieldGet(this, _PQueue_isPaused, \"f\")) {\n        const canInitializeInterval = !__classPrivateFieldGet(this, _PQueue_instances, \"a\", _PQueue_isIntervalPaused_get);\n        if (__classPrivateFieldGet(this, _PQueue_instances, \"a\", _PQueue_doesIntervalAllowAnother_get) && __classPrivateFieldGet(this, _PQueue_instances, \"a\", _PQueue_doesConcurrentAllowAnother_get)) {\n            const job = __classPrivateFieldGet(this, _PQueue_queue, \"f\").dequeue();\n            if (!job) {\n                return false;\n            }\n            this.emit('active');\n            job();\n            if (canInitializeInterval) {\n                __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_initializeIntervalIfNeeded).call(this);\n            }\n            return true;\n        }\n    }\n    return false;\n}, _PQueue_initializeIntervalIfNeeded = function _PQueue_initializeIntervalIfNeeded() {\n    if (__classPrivateFieldGet(this, _PQueue_isIntervalIgnored, \"f\") || __classPrivateFieldGet(this, _PQueue_intervalId, \"f\") !== undefined) {\n        return;\n    }\n    __classPrivateFieldSet(this, _PQueue_intervalId, setInterval(() => {\n        __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_onInterval).call(this);\n    }, __classPrivateFieldGet(this, _PQueue_interval, \"f\")), \"f\");\n    __classPrivateFieldSet(this, _PQueue_intervalEnd, Date.now() + __classPrivateFieldGet(this, _PQueue_interval, \"f\"), \"f\");\n}, _PQueue_onInterval = function _PQueue_onInterval() {\n    if (__classPrivateFieldGet(this, _PQueue_intervalCount, \"f\") === 0 && __classPrivateFieldGet(this, _PQueue_pending, \"f\") === 0 && __classPrivateFieldGet(this, _PQueue_intervalId, \"f\")) {\n        clearInterval(__classPrivateFieldGet(this, _PQueue_intervalId, \"f\"));\n        __classPrivateFieldSet(this, _PQueue_intervalId, undefined, \"f\");\n    }\n    __classPrivateFieldSet(this, _PQueue_intervalCount, __classPrivateFieldGet(this, _PQueue_carryoverConcurrencyCount, \"f\") ? __classPrivateFieldGet(this, _PQueue_pending, \"f\") : 0, \"f\");\n    __classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_processQueue).call(this);\n}, _PQueue_processQueue = function _PQueue_processQueue() {\n    // eslint-disable-next-line no-empty\n    while (__classPrivateFieldGet(this, _PQueue_instances, \"m\", _PQueue_tryToStartAnother).call(this)) { }\n}, _PQueue_throwOnAbort = async function _PQueue_throwOnAbort(signal) {\n    return new Promise((_resolve, reject) => {\n        signal.addEventListener('abort', () => {\n            // TODO: Reject with signal.throwIfAborted() when targeting Node.js 18\n            // TODO: Use ABORT_ERR code when targeting Node.js 16 (https://nodejs.org/docs/latest-v16.x/api/errors.html#abort_err)\n            reject(new AbortError('The task was aborted.'));\n        }, { once: true });\n    });\n}, _PQueue_onEvent = async function _PQueue_onEvent(event, filter) {\n    return new Promise(resolve => {\n        const listener = () => {\n            if (filter && !filter()) {\n                return;\n            }\n            this.off(event, listener);\n            resolve();\n        };\n        this.on(event, listener);\n    });\n};\nexport default PQueue;\n","import * as cborg from 'cborg';\nimport { Key } from 'interface-datastore';\nimport { base36 } from 'multiformats/bases/base36';\nimport { CID } from 'multiformats/cid';\nimport defer from 'p-defer';\nimport PQueue from 'p-queue';\nimport { CustomProgressEvent } from 'progress-events';\nimport { equals as uint8ArrayEquals } from 'uint8arrays/equals';\nimport { dagCborWalker, dagJsonWalker, dagPbWalker, jsonWalker, rawWalker } from './utils/dag-walkers.js';\nconst DEFAULT_DAG_WALKERS = [\n    rawWalker,\n    dagPbWalker,\n    dagCborWalker,\n    dagJsonWalker,\n    jsonWalker\n];\nconst DATASTORE_PIN_PREFIX = '/pin/';\nconst DATASTORE_BLOCK_PREFIX = '/pinned-block/';\nconst DATASTORE_ENCODING = base36;\n// const DAG_WALK_MAX_QUEUE_LENGTH = 10\nconst DAG_WALK_QUEUE_CONCURRENCY = 1;\nfunction toDSKey(cid) {\n    if (cid.version === 0) {\n        cid = cid.toV1();\n    }\n    return new Key(`${DATASTORE_PIN_PREFIX}${cid.toString(DATASTORE_ENCODING)}`);\n}\nexport class PinsImpl {\n    datastore;\n    blockstore;\n    dagWalkers;\n    constructor(datastore, blockstore, dagWalkers) {\n        this.datastore = datastore;\n        this.blockstore = blockstore;\n        this.dagWalkers = {};\n        [...DEFAULT_DAG_WALKERS, ...dagWalkers].forEach(dagWalker => {\n            this.dagWalkers[dagWalker.codec] = dagWalker;\n        });\n    }\n    async add(cid, options = {}) {\n        const pinKey = toDSKey(cid);\n        if (await this.datastore.has(pinKey)) {\n            throw new Error('Already pinned');\n        }\n        const depth = Math.round(options.depth ?? Infinity);\n        if (depth < 0) {\n            throw new Error('Depth must be greater than or equal to 0');\n        }\n        // use a queue to walk the DAG instead of recursion so we can traverse very large DAGs\n        const queue = new PQueue({\n            concurrency: DAG_WALK_QUEUE_CONCURRENCY\n        });\n        void queue.add(async () => {\n            await this.#walkDag(cid, queue, (pinnedBlock) => {\n                // do not update pinned block if this block is already pinned by this CID\n                if (pinnedBlock.pinnedBy.find(c => uint8ArrayEquals(c, cid.bytes)) != null) {\n                    return;\n                }\n                pinnedBlock.pinCount++;\n                pinnedBlock.pinnedBy.push(cid.bytes);\n            }, {\n                ...options,\n                depth\n            });\n        });\n        // if a job in the queue errors, throw that error\n        const deferred = defer();\n        queue.on('error', (err) => {\n            queue.clear();\n            deferred.reject(err);\n        });\n        // wait for the queue to complete or error\n        await Promise.race([\n            queue.onIdle(),\n            deferred.promise\n        ]);\n        const pin = {\n            depth,\n            metadata: options.metadata ?? {}\n        };\n        await this.datastore.put(pinKey, cborg.encode(pin), options);\n        return {\n            cid,\n            ...pin\n        };\n    }\n    /**\n     * Walk the DAG behind the passed CID, ensure all blocks are present in the blockstore\n     * and update the pin count for them\n     */\n    async #walkDag(cid, queue, withPinnedBlock, options) {\n        if (options.depth === -1) {\n            return;\n        }\n        const dagWalker = this.dagWalkers[cid.code];\n        if (dagWalker == null) {\n            throw new Error(`No dag walker found for cid codec ${cid.code}`);\n        }\n        const block = await this.blockstore.get(cid, options);\n        await this.#updatePinnedBlock(cid, withPinnedBlock, options);\n        // walk dag, ensure all blocks are present\n        for await (const cid of dagWalker.walk(block)) {\n            void queue.add(async () => {\n                await this.#walkDag(cid, queue, withPinnedBlock, {\n                    ...options,\n                    depth: options.depth - 1\n                });\n            });\n        }\n    }\n    /**\n     * Update the pin count for the CID\n     */\n    async #updatePinnedBlock(cid, withPinnedBlock, options) {\n        const blockKey = new Key(`${DATASTORE_BLOCK_PREFIX}${DATASTORE_ENCODING.encode(cid.multihash.bytes)}`);\n        let pinnedBlock = {\n            pinCount: 0,\n            pinnedBy: []\n        };\n        try {\n            pinnedBlock = cborg.decode(await this.datastore.get(blockKey, options));\n        }\n        catch (err) {\n            if (err.code !== 'ERR_NOT_FOUND') {\n                throw err;\n            }\n        }\n        withPinnedBlock(pinnedBlock);\n        if (pinnedBlock.pinCount === 0) {\n            if (await this.datastore.has(blockKey)) {\n                await this.datastore.delete(blockKey);\n                return;\n            }\n        }\n        await this.datastore.put(blockKey, cborg.encode(pinnedBlock), options);\n        options.onProgress?.(new CustomProgressEvent('helia:pin:add', { detail: cid }));\n    }\n    async rm(cid, options = {}) {\n        const pinKey = toDSKey(cid);\n        const buf = await this.datastore.get(pinKey, options);\n        const pin = cborg.decode(buf);\n        await this.datastore.delete(pinKey, options);\n        // use a queue to walk the DAG instead of recursion so we can traverse very large DAGs\n        const queue = new PQueue({\n            concurrency: DAG_WALK_QUEUE_CONCURRENCY\n        });\n        void queue.add(async () => {\n            await this.#walkDag(cid, queue, (pinnedBlock) => {\n                pinnedBlock.pinCount--;\n                pinnedBlock.pinnedBy = pinnedBlock.pinnedBy.filter(c => uint8ArrayEquals(c, cid.bytes));\n            }, {\n                ...options,\n                depth: pin.depth\n            });\n        });\n        await queue.onIdle();\n        return {\n            cid,\n            ...pin\n        };\n    }\n    async *ls(options = {}) {\n        for await (const { key, value } of this.datastore.query({\n            prefix: DATASTORE_PIN_PREFIX + (options.cid != null ? `${options.cid.toString(base36)}` : '')\n        }, options)) {\n            const cid = CID.parse(key.toString().substring(5), base36);\n            const pin = cborg.decode(value);\n            yield {\n                cid,\n                ...pin\n            };\n        }\n    }\n    async isPinned(cid, options = {}) {\n        const blockKey = new Key(`${DATASTORE_BLOCK_PREFIX}${DATASTORE_ENCODING.encode(cid.multihash.bytes)}`);\n        return this.datastore.has(blockKey, options);\n    }\n}\n//# sourceMappingURL=pins.js.map","import createMortice from 'mortice';\n/**\n * BlockStorage is a hybrid blockstore that puts/gets blocks from a configured\n * blockstore (that may be on disk, s3, or something else). If the blocks are\n * not present Bitswap will be used to fetch them from network peers.\n */\nexport class BlockStorage {\n    lock;\n    child;\n    pins;\n    /**\n     * Create a new BlockStorage\n     */\n    constructor(blockstore, pins, options = {}) {\n        this.child = blockstore;\n        this.pins = pins;\n        this.lock = createMortice({\n            singleProcess: options.holdGcLock\n        });\n    }\n    unwrap() {\n        return this.child;\n    }\n    /**\n     * Put a block to the underlying datastore\n     */\n    async put(cid, block, options = {}) {\n        const releaseLock = await this.lock.readLock();\n        try {\n            return await this.child.put(cid, block, options);\n        }\n        finally {\n            releaseLock();\n        }\n    }\n    /**\n     * Put a multiple blocks to the underlying datastore\n     */\n    async *putMany(blocks, options = {}) {\n        const releaseLock = await this.lock.readLock();\n        try {\n            yield* this.child.putMany(blocks, options);\n        }\n        finally {\n            releaseLock();\n        }\n    }\n    /**\n     * Get a block by cid\n     */\n    async get(cid, options = {}) {\n        const releaseLock = await this.lock.readLock();\n        try {\n            return await this.child.get(cid, options);\n        }\n        finally {\n            releaseLock();\n        }\n    }\n    /**\n     * Get multiple blocks back from an (async) iterable of cids\n     */\n    async *getMany(cids, options = {}) {\n        const releaseLock = await this.lock.readLock();\n        try {\n            yield* this.child.getMany(cids, options);\n        }\n        finally {\n            releaseLock();\n        }\n    }\n    /**\n     * Delete a block from the blockstore\n     */\n    async delete(cid, options = {}) {\n        const releaseLock = await this.lock.writeLock();\n        try {\n            if (await this.pins.isPinned(cid)) {\n                throw new Error('CID was pinned');\n            }\n            await this.child.delete(cid, options);\n        }\n        finally {\n            releaseLock();\n        }\n    }\n    /**\n     * Delete multiple blocks from the blockstore\n     */\n    async *deleteMany(cids, options = {}) {\n        const releaseLock = await this.lock.writeLock();\n        try {\n            const storage = this;\n            yield* this.child.deleteMany((async function* () {\n                for await (const cid of cids) {\n                    if (await storage.pins.isPinned(cid)) {\n                        throw new Error('CID was pinned');\n                    }\n                    yield cid;\n                }\n            }()), options);\n        }\n        finally {\n            releaseLock();\n        }\n    }\n    async has(cid, options = {}) {\n        const releaseLock = await this.lock.readLock();\n        try {\n            return await this.child.has(cid, options);\n        }\n        finally {\n            releaseLock();\n        }\n    }\n    async *getAll(options = {}) {\n        const releaseLock = await this.lock.readLock();\n        try {\n            yield* this.child.getAll(options);\n        }\n        finally {\n            releaseLock();\n        }\n    }\n}\n//# sourceMappingURL=storage.js.map","import { Key } from 'interface-datastore';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string';\nconst DS_VERSION_KEY = new Key('/version');\nconst CURRENT_VERSION = 1;\nexport async function assertDatastoreVersionIsCurrent(datastore) {\n    if (!(await datastore.has(DS_VERSION_KEY))) {\n        await datastore.put(DS_VERSION_KEY, uint8ArrayFromString(`${CURRENT_VERSION}`));\n        return;\n    }\n    const buf = await datastore.get(DS_VERSION_KEY);\n    const str = uint8ArrayToString(buf);\n    const version = parseInt(str, 10);\n    if (version !== CURRENT_VERSION) {\n        // TODO: write migrations when we break compatibility - for an example, see https://github.com/ipfs/js-ipfs-repo/tree/master/packages/ipfs-repo-migrations\n        throw new Error('Unknown datastore version, a datastore migration may be required');\n    }\n}\n//# sourceMappingURL=datastore-version.js.map","import filter from 'it-filter';\nimport forEach from 'it-foreach';\nimport { CustomProgressEvent } from 'progress-events';\n/**\n * Networked storage wraps a regular blockstore - when getting blocks if the\n * blocks are not present Bitswap will be used to fetch them from network peers.\n */\nexport class NetworkedStorage {\n    child;\n    bitswap;\n    /**\n     * Create a new BlockStorage\n     */\n    constructor(blockstore, options = {}) {\n        this.child = blockstore;\n        this.bitswap = options.bitswap;\n    }\n    unwrap() {\n        return this.child;\n    }\n    /**\n     * Put a block to the underlying datastore\n     */\n    async put(cid, block, options = {}) {\n        if (await this.child.has(cid)) {\n            options.onProgress?.(new CustomProgressEvent('blocks:put:duplicate', cid));\n            return cid;\n        }\n        if (this.bitswap?.isStarted() === true) {\n            options.onProgress?.(new CustomProgressEvent('blocks:put:bitswap:notify', cid));\n            this.bitswap.notify(cid, block, options);\n        }\n        options.onProgress?.(new CustomProgressEvent('blocks:put:blockstore:put', cid));\n        return this.child.put(cid, block, options);\n    }\n    /**\n     * Put a multiple blocks to the underlying datastore\n     */\n    async *putMany(blocks, options = {}) {\n        const missingBlocks = filter(blocks, async ({ cid }) => {\n            const has = await this.child.has(cid);\n            if (has) {\n                options.onProgress?.(new CustomProgressEvent('blocks:put-many:duplicate', cid));\n            }\n            return !has;\n        });\n        const notifyEach = forEach(missingBlocks, ({ cid, block }) => {\n            options.onProgress?.(new CustomProgressEvent('blocks:put-many:bitswap:notify', cid));\n            this.bitswap?.notify(cid, block, options);\n        });\n        options.onProgress?.(new CustomProgressEvent('blocks:put-many:blockstore:put-many'));\n        yield* this.child.putMany(notifyEach, options);\n    }\n    /**\n     * Get a block by cid\n     */\n    async get(cid, options = {}) {\n        if (options.offline !== true && this.bitswap?.isStarted() != null && !(await this.child.has(cid))) {\n            options.onProgress?.(new CustomProgressEvent('blocks:get:bitswap:get', cid));\n            const block = await this.bitswap.want(cid, options);\n            options.onProgress?.(new CustomProgressEvent('blocks:get:blockstore:put', cid));\n            await this.child.put(cid, block, options);\n            return block;\n        }\n        options.onProgress?.(new CustomProgressEvent('blocks:get:blockstore:get', cid));\n        return this.child.get(cid, options);\n    }\n    /**\n     * Get multiple blocks back from an (async) iterable of cids\n     */\n    async *getMany(cids, options = {}) {\n        options.onProgress?.(new CustomProgressEvent('blocks:get-many:blockstore:get-many'));\n        yield* this.child.getMany(forEach(cids, async (cid) => {\n            if (options.offline !== true && this.bitswap?.isStarted() === true && !(await this.child.has(cid))) {\n                options.onProgress?.(new CustomProgressEvent('blocks:get-many:bitswap:get', cid));\n                const block = await this.bitswap.want(cid, options);\n                options.onProgress?.(new CustomProgressEvent('blocks:get-many:blockstore:put', cid));\n                await this.child.put(cid, block, options);\n            }\n        }));\n    }\n    /**\n     * Delete a block from the blockstore\n     */\n    async delete(cid, options = {}) {\n        options.onProgress?.(new CustomProgressEvent('blocks:delete:blockstore:delete', cid));\n        await this.child.delete(cid, options);\n    }\n    /**\n     * Delete multiple blocks from the blockstore\n     */\n    async *deleteMany(cids, options = {}) {\n        options.onProgress?.(new CustomProgressEvent('blocks:delete-many:blockstore:delete-many'));\n        yield* this.child.deleteMany((async function* () {\n            for await (const cid of cids) {\n                yield cid;\n            }\n        }()), options);\n    }\n    async has(cid, options = {}) {\n        return this.child.has(cid, options);\n    }\n    async *getAll(options = {}) {\n        options.onProgress?.(new CustomProgressEvent('blocks:get-all:blockstore:get-many'));\n        yield* this.child.getAll(options);\n    }\n}\n//# sourceMappingURL=networked-storage.js.map","import { logger } from '@libp2p/logger';\nimport { createBitswap } from 'ipfs-bitswap';\nimport drain from 'it-drain';\nimport { identity } from 'multiformats/hashes/identity';\nimport { sha256, sha512 } from 'multiformats/hashes/sha2';\nimport { CustomProgressEvent } from 'progress-events';\nimport { PinsImpl } from './pins.js';\nimport { BlockStorage } from './storage.js';\nimport { assertDatastoreVersionIsCurrent } from './utils/datastore-version.js';\nimport { NetworkedStorage } from './utils/networked-storage.js';\nconst log = logger('helia');\nexport class HeliaImpl {\n    libp2p;\n    blockstore;\n    datastore;\n    pins;\n    #bitswap;\n    constructor(init) {\n        const hashers = [\n            sha256,\n            sha512,\n            identity,\n            ...(init.hashers ?? [])\n        ];\n        this.#bitswap = createBitswap(init.libp2p, init.blockstore, {\n            hashLoader: {\n                getHasher: async (codecOrName) => {\n                    const hasher = hashers.find(hasher => {\n                        return hasher.code === codecOrName || hasher.name === codecOrName;\n                    });\n                    if (hasher != null) {\n                        return hasher;\n                    }\n                    throw new Error(`Could not load hasher for code/name \"${codecOrName}\"`);\n                }\n            }\n        });\n        const networkedStorage = new NetworkedStorage(init.blockstore, {\n            bitswap: this.#bitswap\n        });\n        this.pins = new PinsImpl(init.datastore, networkedStorage, init.dagWalkers ?? []);\n        this.libp2p = init.libp2p;\n        this.blockstore = new BlockStorage(networkedStorage, this.pins, {\n            holdGcLock: init.holdGcLock\n        });\n        this.datastore = init.datastore;\n    }\n    async start() {\n        await assertDatastoreVersionIsCurrent(this.datastore);\n        await this.#bitswap?.start();\n        await this.libp2p.start();\n    }\n    async stop() {\n        await this.libp2p.stop();\n        await this.#bitswap?.stop();\n    }\n    async gc(options = {}) {\n        const releaseLock = await this.blockstore.lock.writeLock();\n        try {\n            const helia = this;\n            const blockstore = this.blockstore.unwrap();\n            log('gc start');\n            await drain(blockstore.deleteMany((async function* () {\n                for await (const { cid } of blockstore.getAll()) {\n                    try {\n                        if (await helia.pins.isPinned(cid, options)) {\n                            continue;\n                        }\n                        yield cid;\n                        options.onProgress?.(new CustomProgressEvent('helia:gc:deleted', cid));\n                    }\n                    catch (err) {\n                        log.error('Error during gc', err);\n                        options.onProgress?.(new CustomProgressEvent('helia:gc:error', err));\n                    }\n                }\n            }())));\n        }\n        finally {\n            releaseLock();\n        }\n        log('gc finished');\n    }\n}\n//# sourceMappingURL=helia.js.map","import { DefaultBitswap } from './bitswap.js';\nexport const createBitswap = (libp2p, blockstore, options = {}) => {\n    return new DefaultBitswap(libp2p, blockstore, options);\n};\n//# sourceMappingURL=index.js.map","import { CodeError } from '@libp2p/interface/errors';\nimport { symbol } from '@libp2p/interface/peer-id';\nimport { base58btc } from 'multiformats/bases/base58';\nimport { bases } from 'multiformats/basics';\nimport { CID } from 'multiformats/cid';\nimport * as Digest from 'multiformats/hashes/digest';\nimport { identity } from 'multiformats/hashes/identity';\nimport { sha256 } from 'multiformats/hashes/sha2';\nimport { equals as uint8ArrayEquals } from 'uint8arrays/equals';\nconst inspect = Symbol.for('nodejs.util.inspect.custom');\nconst baseDecoder = Object\n    .values(bases)\n    .map(codec => codec.decoder)\n    // @ts-expect-error https://github.com/multiformats/js-multiformats/issues/141\n    .reduce((acc, curr) => acc.or(curr), bases.identity.decoder);\n// these values are from https://github.com/multiformats/multicodec/blob/master/table.csv\nconst LIBP2P_KEY_CODE = 0x72;\nconst MARSHALLED_ED225519_PUBLIC_KEY_LENGTH = 36;\nconst MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH = 37;\nclass PeerIdImpl {\n    type;\n    multihash;\n    privateKey;\n    publicKey;\n    string;\n    constructor(init) {\n        this.type = init.type;\n        this.multihash = init.multihash;\n        this.privateKey = init.privateKey;\n        // mark string cache as non-enumerable\n        Object.defineProperty(this, 'string', {\n            enumerable: false,\n            writable: true\n        });\n    }\n    get [Symbol.toStringTag]() {\n        return `PeerId(${this.toString()})`;\n    }\n    [symbol] = true;\n    toString() {\n        if (this.string == null) {\n            this.string = base58btc.encode(this.multihash.bytes).slice(1);\n        }\n        return this.string;\n    }\n    // return self-describing String representation\n    // in default format from RFC 0001: https://github.com/libp2p/specs/pull/209\n    toCID() {\n        return CID.createV1(LIBP2P_KEY_CODE, this.multihash);\n    }\n    toBytes() {\n        return this.multihash.bytes;\n    }\n    /**\n     * Returns Multiaddr as a JSON string\n     */\n    toJSON() {\n        return this.toString();\n    }\n    /**\n     * Checks the equality of `this` peer against a given PeerId\n     */\n    equals(id) {\n        if (id instanceof Uint8Array) {\n            return uint8ArrayEquals(this.multihash.bytes, id);\n        }\n        else if (typeof id === 'string') {\n            return peerIdFromString(id).equals(this);\n        }\n        else if (id?.multihash?.bytes != null) {\n            return uint8ArrayEquals(this.multihash.bytes, id.multihash.bytes);\n        }\n        else {\n            throw new Error('not valid Id');\n        }\n    }\n    /**\n     * Returns PeerId as a human-readable string\n     * https://nodejs.org/api/util.html#utilinspectcustom\n     *\n     * @example\n     * ```js\n     * import { peerIdFromString } from '@libp2p/peer-id'\n     *\n     * console.info(peerIdFromString('QmFoo'))\n     * // 'PeerId(QmFoo)'\n     * ```\n     */\n    [inspect]() {\n        return `PeerId(${this.toString()})`;\n    }\n}\nclass RSAPeerIdImpl extends PeerIdImpl {\n    type = 'RSA';\n    publicKey;\n    constructor(init) {\n        super({ ...init, type: 'RSA' });\n        this.publicKey = init.publicKey;\n    }\n}\nclass Ed25519PeerIdImpl extends PeerIdImpl {\n    type = 'Ed25519';\n    publicKey;\n    constructor(init) {\n        super({ ...init, type: 'Ed25519' });\n        this.publicKey = init.multihash.digest;\n    }\n}\nclass Secp256k1PeerIdImpl extends PeerIdImpl {\n    type = 'secp256k1';\n    publicKey;\n    constructor(init) {\n        super({ ...init, type: 'secp256k1' });\n        this.publicKey = init.multihash.digest;\n    }\n}\nexport function createPeerId(init) {\n    if (init.type === 'RSA') {\n        return new RSAPeerIdImpl(init);\n    }\n    if (init.type === 'Ed25519') {\n        return new Ed25519PeerIdImpl(init);\n    }\n    if (init.type === 'secp256k1') {\n        return new Secp256k1PeerIdImpl(init);\n    }\n    throw new CodeError('Type must be \"RSA\", \"Ed25519\" or \"secp256k1\"', 'ERR_INVALID_PARAMETERS');\n}\nexport function peerIdFromPeerId(other) {\n    if (other.type === 'RSA') {\n        return new RSAPeerIdImpl(other);\n    }\n    if (other.type === 'Ed25519') {\n        return new Ed25519PeerIdImpl(other);\n    }\n    if (other.type === 'secp256k1') {\n        return new Secp256k1PeerIdImpl(other);\n    }\n    throw new CodeError('Not a PeerId', 'ERR_INVALID_PARAMETERS');\n}\nexport function peerIdFromString(str, decoder) {\n    decoder = decoder ?? baseDecoder;\n    if (str.charAt(0) === '1' || str.charAt(0) === 'Q') {\n        // identity hash ed25519/secp256k1 key or sha2-256 hash of\n        // rsa public key - base58btc encoded either way\n        const multihash = Digest.decode(base58btc.decode(`z${str}`));\n        if (str.startsWith('12D')) {\n            return new Ed25519PeerIdImpl({ multihash });\n        }\n        else if (str.startsWith('16U')) {\n            return new Secp256k1PeerIdImpl({ multihash });\n        }\n        else {\n            return new RSAPeerIdImpl({ multihash });\n        }\n    }\n    return peerIdFromBytes(baseDecoder.decode(str));\n}\nexport function peerIdFromBytes(buf) {\n    try {\n        const multihash = Digest.decode(buf);\n        if (multihash.code === identity.code) {\n            if (multihash.digest.length === MARSHALLED_ED225519_PUBLIC_KEY_LENGTH) {\n                return new Ed25519PeerIdImpl({ multihash });\n            }\n            else if (multihash.digest.length === MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH) {\n                return new Secp256k1PeerIdImpl({ multihash });\n            }\n        }\n        if (multihash.code === sha256.code) {\n            return new RSAPeerIdImpl({ multihash });\n        }\n    }\n    catch {\n        return peerIdFromCID(CID.decode(buf));\n    }\n    throw new Error('Supplied PeerID CID is invalid');\n}\nexport function peerIdFromCID(cid) {\n    if (cid == null || cid.multihash == null || cid.version == null || (cid.version === 1 && cid.code !== LIBP2P_KEY_CODE)) {\n        throw new Error('Supplied PeerID CID is invalid');\n    }\n    const multihash = cid.multihash;\n    if (multihash.code === sha256.code) {\n        return new RSAPeerIdImpl({ multihash: cid.multihash });\n    }\n    else if (multihash.code === identity.code) {\n        if (multihash.digest.length === MARSHALLED_ED225519_PUBLIC_KEY_LENGTH) {\n            return new Ed25519PeerIdImpl({ multihash: cid.multihash });\n        }\n        else if (multihash.digest.length === MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH) {\n            return new Secp256k1PeerIdImpl({ multihash: cid.multihash });\n        }\n    }\n    throw new Error('Supplied PeerID CID is invalid');\n}\n/**\n * @param publicKey - A marshalled public key\n * @param privateKey - A marshalled private key\n */\nexport async function peerIdFromKeys(publicKey, privateKey) {\n    if (publicKey.length === MARSHALLED_ED225519_PUBLIC_KEY_LENGTH) {\n        return new Ed25519PeerIdImpl({ multihash: Digest.create(identity.code, publicKey), privateKey });\n    }\n    if (publicKey.length === MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH) {\n        return new Secp256k1PeerIdImpl({ multihash: Digest.create(identity.code, publicKey), privateKey });\n    }\n    return new RSAPeerIdImpl({ multihash: await sha256.digest(publicKey), publicKey, privateKey });\n}\n//# sourceMappingURL=index.js.map","import debug from 'debug';\nimport { base32 } from 'multiformats/bases/base32';\nimport { base58btc } from 'multiformats/bases/base58';\nimport { base64 } from 'multiformats/bases/base64';\n// Add a formatter for converting to a base58 string\ndebug.formatters.b = (v) => {\n    return v == null ? 'undefined' : base58btc.baseEncode(v);\n};\n// Add a formatter for converting to a base32 string\ndebug.formatters.t = (v) => {\n    return v == null ? 'undefined' : base32.baseEncode(v);\n};\n// Add a formatter for converting to a base64 string\ndebug.formatters.m = (v) => {\n    return v == null ? 'undefined' : base64.baseEncode(v);\n};\n// Add a formatter for stringifying peer ids\ndebug.formatters.p = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying CIDs\ndebug.formatters.c = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying Datastore keys\ndebug.formatters.k = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\n// Add a formatter for stringifying Multiaddrs\ndebug.formatters.a = (v) => {\n    return v == null ? 'undefined' : v.toString();\n};\nfunction createDisabledLogger(namespace) {\n    const logger = () => { };\n    logger.enabled = false;\n    logger.color = '';\n    logger.diff = 0;\n    logger.log = () => { };\n    logger.namespace = namespace;\n    logger.destroy = () => true;\n    logger.extend = () => logger;\n    return logger;\n}\nexport function logger(name) {\n    // trace logging is a no-op by default\n    let trace = createDisabledLogger(`${name}:trace`);\n    // look at all the debug names and see if trace logging has explicitly been enabled\n    if (debug.enabled(`${name}:trace`) && debug.names.map(r => r.toString()).find(n => n.includes(':trace')) != null) {\n        trace = debug(`${name}:trace`);\n    }\n    return Object.assign(debug(name), {\n        error: debug(`${name}:error`),\n        trace\n    });\n}\nexport function disable() {\n    debug.disable();\n}\nexport function enable(namespaces) {\n    debug.enable(namespaces);\n}\nexport function enabled(namespaces) {\n    return debug.enabled(namespaces);\n}\n//# sourceMappingURL=index.js.map","import cjs from \"./rpc.cjs\"\n\nexport const {RPC} = cjs\n","export const second = 1000;\nexport const minute = 60 * second;\n// Protocol identifiers\nexport const FloodsubID = '/floodsub/1.0.0';\n/**\n * The protocol ID for version 1.0.0 of the Gossipsub protocol\n * It is advertised along with GossipsubIDv11 for backwards compatability\n */\nexport const GossipsubIDv10 = '/meshsub/1.0.0';\n/**\n * The protocol ID for version 1.1.0 of the Gossipsub protocol\n * See the spec for details about how v1.1.0 compares to v1.0.0:\n * https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md\n */\nexport const GossipsubIDv11 = '/meshsub/1.1.0';\n// Overlay parameters\n/**\n * GossipsubD sets the optimal degree for a Gossipsub topic mesh. For example, if GossipsubD == 6,\n * each peer will want to have about six peers in their mesh for each topic they're subscribed to.\n * GossipsubD should be set somewhere between GossipsubDlo and GossipsubDhi.\n */\nexport const GossipsubD = 6;\n/**\n * GossipsubDlo sets the lower bound on the number of peers we keep in a Gossipsub topic mesh.\n * If we have fewer than GossipsubDlo peers, we will attempt to graft some more into the mesh at\n * the next heartbeat.\n */\nexport const GossipsubDlo = 4;\n/**\n * GossipsubDhi sets the upper bound on the number of peers we keep in a Gossipsub topic mesh.\n * If we have more than GossipsubDhi peers, we will select some to prune from the mesh at the next heartbeat.\n */\nexport const GossipsubDhi = 12;\n/**\n * GossipsubDscore affects how peers are selected when pruning a mesh due to over subscription.\n * At least GossipsubDscore of the retained peers will be high-scoring, while the remainder are\n * chosen randomly.\n */\nexport const GossipsubDscore = 4;\n/**\n * GossipsubDout sets the quota for the number of outbound connections to maintain in a topic mesh.\n * When the mesh is pruned due to over subscription, we make sure that we have outbound connections\n * to at least GossipsubDout of the survivor peers. This prevents sybil attackers from overwhelming\n * our mesh with incoming connections.\n *\n * GossipsubDout must be set below GossipsubDlo, and must not exceed GossipsubD / 2.\n */\nexport const GossipsubDout = 2;\n// Gossip parameters\n/**\n * GossipsubHistoryLength controls the size of the message cache used for gossip.\n * The message cache will remember messages for GossipsubHistoryLength heartbeats.\n */\nexport const GossipsubHistoryLength = 5;\n/**\n * GossipsubHistoryGossip controls how many cached message ids we will advertise in\n * IHAVE gossip messages. When asked for our seen message IDs, we will return\n * only those from the most recent GossipsubHistoryGossip heartbeats. The slack between\n * GossipsubHistoryGossip and GossipsubHistoryLength allows us to avoid advertising messages\n * that will be expired by the time they're requested.\n *\n * GossipsubHistoryGossip must be less than or equal to GossipsubHistoryLength to\n * avoid a runtime panic.\n */\nexport const GossipsubHistoryGossip = 3;\n/**\n * GossipsubDlazy affects how many peers we will emit gossip to at each heartbeat.\n * We will send gossip to at least GossipsubDlazy peers outside our mesh. The actual\n * number may be more, depending on GossipsubGossipFactor and how many peers we're\n * connected to.\n */\nexport const GossipsubDlazy = 6;\n/**\n * GossipsubGossipFactor affects how many peers we will emit gossip to at each heartbeat.\n * We will send gossip to GossipsubGossipFactor * (total number of non-mesh peers), or\n * GossipsubDlazy, whichever is greater.\n */\nexport const GossipsubGossipFactor = 0.25;\n/**\n * GossipsubGossipRetransmission controls how many times we will allow a peer to request\n * the same message id through IWANT gossip before we start ignoring them. This is designed\n * to prevent peers from spamming us with requests and wasting our resources.\n */\nexport const GossipsubGossipRetransmission = 3;\n// Heartbeat interval\n/**\n * GossipsubHeartbeatInitialDelay is the short delay before the heartbeat timer begins\n * after the router is initialized.\n */\nexport const GossipsubHeartbeatInitialDelay = 100;\n/**\n * GossipsubHeartbeatInterval controls the time between heartbeats.\n */\nexport const GossipsubHeartbeatInterval = second;\n/**\n * GossipsubFanoutTTL controls how long we keep track of the fanout state. If it's been\n * GossipsubFanoutTTL since we've published to a topic that we're not subscribed to,\n * we'll delete the fanout map for that topic.\n */\nexport const GossipsubFanoutTTL = minute;\n/**\n * GossipsubPrunePeers controls the number of peers to include in prune Peer eXchange.\n * When we prune a peer that's eligible for PX (has a good score, etc), we will try to\n * send them signed peer records for up to GossipsubPrunePeers other peers that we\n * know of.\n */\nexport const GossipsubPrunePeers = 16;\n/**\n * GossipsubPruneBackoff controls the backoff time for pruned peers. This is how long\n * a peer must wait before attempting to graft into our mesh again after being pruned.\n * When pruning a peer, we send them our value of GossipsubPruneBackoff so they know\n * the minimum time to wait. Peers running older versions may not send a backoff time,\n * so if we receive a prune message without one, we will wait at least GossipsubPruneBackoff\n * before attempting to re-graft.\n */\nexport const GossipsubPruneBackoff = minute;\n/**\n * Backoff to use when unsuscribing from a topic. Should not resubscribe to this topic before it expired.\n */\nexport const GossipsubUnsubscribeBackoff = 10 * second;\n/**\n * GossipsubPruneBackoffTicks is the number of heartbeat ticks for attempting to prune expired\n * backoff timers.\n */\nexport const GossipsubPruneBackoffTicks = 15;\n/**\n * GossipsubConnectors controls the number of active connection attempts for peers obtained through PX.\n */\nexport const GossipsubConnectors = 8;\n/**\n * GossipsubMaxPendingConnections sets the maximum number of pending connections for peers attempted through px.\n */\nexport const GossipsubMaxPendingConnections = 128;\n/**\n * GossipsubConnectionTimeout controls the timeout for connection attempts.\n */\nexport const GossipsubConnectionTimeout = 30 * second;\n/**\n * GossipsubDirectConnectTicks is the number of heartbeat ticks for attempting to reconnect direct peers\n * that are not currently connected.\n */\nexport const GossipsubDirectConnectTicks = 300;\n/**\n * GossipsubDirectConnectInitialDelay is the initial delay before opening connections to direct peers\n */\nexport const GossipsubDirectConnectInitialDelay = second;\n/**\n * GossipsubOpportunisticGraftTicks is the number of heartbeat ticks for attempting to improve the mesh\n * with opportunistic grafting. Every GossipsubOpportunisticGraftTicks we will attempt to select some\n * high-scoring mesh peers to replace lower-scoring ones, if the median score of our mesh peers falls\n * below a threshold\n */\nexport const GossipsubOpportunisticGraftTicks = 60;\n/**\n * GossipsubOpportunisticGraftPeers is the number of peers to opportunistically graft.\n */\nexport const GossipsubOpportunisticGraftPeers = 2;\n/**\n * If a GRAFT comes before GossipsubGraftFloodThreshold has elapsed since the last PRUNE,\n * then there is an extra score penalty applied to the peer through P7.\n */\nexport const GossipsubGraftFloodThreshold = 10 * second;\n/**\n * GossipsubMaxIHaveLength is the maximum number of messages to include in an IHAVE message.\n * Also controls the maximum number of IHAVE ids we will accept and request with IWANT from a\n * peer within a heartbeat, to protect from IHAVE floods. You should adjust this value from the\n * default if your system is pushing more than 5000 messages in GossipsubHistoryGossip heartbeats;\n * with the defaults this is 1666 messages/s.\n */\nexport const GossipsubMaxIHaveLength = 5000;\n/**\n * GossipsubMaxIHaveMessages is the maximum number of IHAVE messages to accept from a peer within a heartbeat.\n */\nexport const GossipsubMaxIHaveMessages = 10;\n/**\n * Time to wait for a message requested through IWANT following an IHAVE advertisement.\n * If the message is not received within this window, a broken promise is declared and\n * the router may apply bahavioural penalties.\n */\nexport const GossipsubIWantFollowupTime = 3 * second;\n/**\n * Time in milliseconds to keep message ids in the seen cache\n */\nexport const GossipsubSeenTTL = 2 * minute;\nexport const TimeCacheDuration = 120 * 1000;\nexport const ERR_TOPIC_VALIDATOR_REJECT = 'ERR_TOPIC_VALIDATOR_REJECT';\nexport const ERR_TOPIC_VALIDATOR_IGNORE = 'ERR_TOPIC_VALIDATOR_IGNORE';\n/**\n * If peer score is better than this, we accept messages from this peer\n * within ACCEPT_FROM_WHITELIST_DURATION_MS from the last time computing score.\n **/\nexport const ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE = 0;\n/**\n * If peer score >= ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE, accept up to this\n * number of messages from that peer.\n */\nexport const ACCEPT_FROM_WHITELIST_MAX_MESSAGES = 128;\n/**\n * If peer score >= ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE, accept messages from\n * this peer up to this time duration.\n */\nexport const ACCEPT_FROM_WHITELIST_DURATION_MS = 1000;\n/**\n * The default MeshMessageDeliveriesWindow to be used in metrics.\n */\nexport const DEFAULT_METRIC_MESH_MESSAGE_DELIVERIES_WINDOWS = 1000;\n/** Wait for 1 more heartbeats before clearing a backoff */\nexport const BACKOFF_SLACK = 1;\n//# sourceMappingURL=constants.js.map","import { toString } from 'uint8arrays/to-string';\n/**\n * Browser friendly function to convert Uint8Array message id to base64 string.\n */\nexport function messageIdToString(msgId) {\n    return toString(msgId, 'base64');\n}\n//# sourceMappingURL=messageIdToString.js.map","import 'node-forge/lib/asn1.js';\nimport 'node-forge/lib/pbe.js';\nimport { CodeError } from '@libp2p/interface/errors';\n// @ts-expect-error types are missing\nimport forge from 'node-forge/lib/forge.js';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport * as Ed25519 from './ed25519-class.js';\nimport generateEphemeralKeyPair from './ephemeral-keys.js';\nimport { importer } from './importer.js';\nimport { keyStretcher } from './key-stretcher.js';\nimport * as keysPBM from './keys.js';\nimport * as RSA from './rsa-class.js';\nimport * as Secp256k1 from './secp256k1-class.js';\nexport { keyStretcher };\nexport { generateEphemeralKeyPair };\nexport { keysPBM };\nexport const supportedKeys = {\n    rsa: RSA,\n    ed25519: Ed25519,\n    secp256k1: Secp256k1\n};\nfunction unsupportedKey(type) {\n    const supported = Object.keys(supportedKeys).join(' / ');\n    return new CodeError(`invalid or unsupported key type ${type}. Must be ${supported}`, 'ERR_UNSUPPORTED_KEY_TYPE');\n}\nfunction typeToKey(type) {\n    type = type.toLowerCase();\n    if (type === 'rsa' || type === 'ed25519' || type === 'secp256k1') {\n        return supportedKeys[type];\n    }\n    throw unsupportedKey(type);\n}\n// Generates a keypair of the given type and bitsize\nexport async function generateKeyPair(type, bits) {\n    return typeToKey(type).generateKeyPair(bits ?? 2048);\n}\n// Generates a keypair of the given type and bitsize\n// seed is a 32 byte uint8array\nexport async function generateKeyPairFromSeed(type, seed, bits) {\n    if (type.toLowerCase() !== 'ed25519') {\n        throw new CodeError('Seed key derivation is unimplemented for RSA or secp256k1', 'ERR_UNSUPPORTED_KEY_DERIVATION_TYPE');\n    }\n    return Ed25519.generateKeyPairFromSeed(seed);\n}\n// Converts a protobuf serialized public key into its\n// representative object\nexport function unmarshalPublicKey(buf) {\n    const decoded = keysPBM.PublicKey.decode(buf);\n    const data = decoded.Data ?? new Uint8Array();\n    switch (decoded.Type) {\n        case keysPBM.KeyType.RSA:\n            return supportedKeys.rsa.unmarshalRsaPublicKey(data);\n        case keysPBM.KeyType.Ed25519:\n            return supportedKeys.ed25519.unmarshalEd25519PublicKey(data);\n        case keysPBM.KeyType.Secp256k1:\n            return supportedKeys.secp256k1.unmarshalSecp256k1PublicKey(data);\n        default:\n            throw unsupportedKey(decoded.Type ?? 'unknown');\n    }\n}\n// Converts a public key object into a protobuf serialized public key\nexport function marshalPublicKey(key, type) {\n    type = (type ?? 'rsa').toLowerCase();\n    typeToKey(type); // check type\n    return key.bytes;\n}\n// Converts a protobuf serialized private key into its\n// representative object\nexport async function unmarshalPrivateKey(buf) {\n    const decoded = keysPBM.PrivateKey.decode(buf);\n    const data = decoded.Data ?? new Uint8Array();\n    switch (decoded.Type) {\n        case keysPBM.KeyType.RSA:\n            return supportedKeys.rsa.unmarshalRsaPrivateKey(data);\n        case keysPBM.KeyType.Ed25519:\n            return supportedKeys.ed25519.unmarshalEd25519PrivateKey(data);\n        case keysPBM.KeyType.Secp256k1:\n            return supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey(data);\n        default:\n            throw unsupportedKey(decoded.Type ?? 'RSA');\n    }\n}\n// Converts a private key object into a protobuf serialized private key\nexport function marshalPrivateKey(key, type) {\n    type = (type ?? 'rsa').toLowerCase();\n    typeToKey(type); // check type\n    return key.bytes;\n}\n/**\n *\n * @param {string} encryptedKey\n * @param {string} password\n */\nexport async function importKey(encryptedKey, password) {\n    try {\n        const key = await importer(encryptedKey, password);\n        return await unmarshalPrivateKey(key);\n    }\n    catch (_) {\n        // Ignore and try the old pem decrypt\n    }\n    // Only rsa supports pem right now\n    const key = forge.pki.decryptRsaPrivateKey(encryptedKey, password);\n    if (key === null) {\n        throw new CodeError('Cannot read the key, most likely the password is wrong or not a RSA key', 'ERR_CANNOT_DECRYPT_PEM');\n    }\n    let der = forge.asn1.toDer(forge.pki.privateKeyToAsn1(key));\n    der = uint8ArrayFromString(der.getBytes(), 'ascii');\n    return supportedKeys.rsa.unmarshalRsaPrivateKey(der);\n}\n//# sourceMappingURL=index.js.map","import { TopicValidatorResult } from '@libp2p/interface/pubsub';\nexport var SignaturePolicy;\n(function (SignaturePolicy) {\n    /**\n     * On the producing side:\n     * - Build messages with the signature, key (from may be enough for certain inlineable public key types), from and seqno fields.\n     *\n     * On the consuming side:\n     * - Enforce the fields to be present, reject otherwise.\n     * - Propagate only if the fields are valid and signature can be verified, reject otherwise.\n     */\n    SignaturePolicy[\"StrictSign\"] = \"StrictSign\";\n    /**\n     * On the producing side:\n     * - Build messages without the signature, key, from and seqno fields.\n     * - The corresponding protobuf key-value pairs are absent from the marshalled message, not just empty.\n     *\n     * On the consuming side:\n     * - Enforce the fields to be absent, reject otherwise.\n     * - Propagate only if the fields are absent, reject otherwise.\n     * - A message_id function will not be able to use the above fields, and should instead rely on the data field. A commonplace strategy is to calculate a hash.\n     */\n    SignaturePolicy[\"StrictNoSign\"] = \"StrictNoSign\";\n})(SignaturePolicy || (SignaturePolicy = {}));\nexport var PublishConfigType;\n(function (PublishConfigType) {\n    PublishConfigType[PublishConfigType[\"Signing\"] = 0] = \"Signing\";\n    PublishConfigType[PublishConfigType[\"Anonymous\"] = 1] = \"Anonymous\";\n})(PublishConfigType || (PublishConfigType = {}));\nexport var RejectReason;\n(function (RejectReason) {\n    /**\n     * The message failed the configured validation during decoding.\n     * SelfOrigin is considered a ValidationError\n     */\n    RejectReason[\"Error\"] = \"error\";\n    /**\n     * Custom validator fn reported status IGNORE.\n     */\n    RejectReason[\"Ignore\"] = \"ignore\";\n    /**\n     * Custom validator fn reported status REJECT.\n     */\n    RejectReason[\"Reject\"] = \"reject\";\n    /**\n     * The peer that sent the message OR the source from field is blacklisted.\n     * Causes messages to be ignored, not penalized, neither do score record creation.\n     */\n    RejectReason[\"Blacklisted\"] = \"blacklisted\";\n})(RejectReason || (RejectReason = {}));\nexport var ValidateError;\n(function (ValidateError) {\n    /// The message has an invalid signature,\n    ValidateError[\"InvalidSignature\"] = \"invalid_signature\";\n    /// The sequence number was the incorrect size\n    ValidateError[\"InvalidSeqno\"] = \"invalid_seqno\";\n    /// The PeerId was invalid\n    ValidateError[\"InvalidPeerId\"] = \"invalid_peerid\";\n    /// Signature existed when validation has been sent to\n    /// [`crate::behaviour::MessageAuthenticity::Anonymous`].\n    ValidateError[\"SignaturePresent\"] = \"signature_present\";\n    /// Sequence number existed when validation has been sent to\n    /// [`crate::behaviour::MessageAuthenticity::Anonymous`].\n    ValidateError[\"SeqnoPresent\"] = \"seqno_present\";\n    /// Message source existed when validation has been sent to\n    /// [`crate::behaviour::MessageAuthenticity::Anonymous`].\n    ValidateError[\"FromPresent\"] = \"from_present\";\n    /// The data transformation failed.\n    ValidateError[\"TransformFailed\"] = \"transform_failed\";\n})(ValidateError || (ValidateError = {}));\nexport var MessageStatus;\n(function (MessageStatus) {\n    MessageStatus[\"duplicate\"] = \"duplicate\";\n    MessageStatus[\"invalid\"] = \"invalid\";\n    MessageStatus[\"valid\"] = \"valid\";\n})(MessageStatus || (MessageStatus = {}));\n/**\n * Typesafe conversion of MessageAcceptance -> RejectReason. TS ensures all values covered\n */\nexport function rejectReasonFromAcceptance(acceptance) {\n    switch (acceptance) {\n        case TopicValidatorResult.Ignore:\n            return RejectReason.Ignore;\n        case TopicValidatorResult.Reject:\n            return RejectReason.Reject;\n    }\n}\n//# sourceMappingURL=types.js.map","import { ERR_INVALID_PEER_SCORE_PARAMS } from './constants.js';\nimport { CodeError } from '@libp2p/interface/errors';\nexport const defaultPeerScoreParams = {\n    topics: {},\n    topicScoreCap: 10.0,\n    appSpecificScore: () => 0.0,\n    appSpecificWeight: 10.0,\n    IPColocationFactorWeight: -5.0,\n    IPColocationFactorThreshold: 10.0,\n    IPColocationFactorWhitelist: new Set(),\n    behaviourPenaltyWeight: -10.0,\n    behaviourPenaltyThreshold: 0.0,\n    behaviourPenaltyDecay: 0.2,\n    decayInterval: 1000.0,\n    decayToZero: 0.1,\n    retainScore: 3600 * 1000\n};\nexport const defaultTopicScoreParams = {\n    topicWeight: 0.5,\n    timeInMeshWeight: 1,\n    timeInMeshQuantum: 1,\n    timeInMeshCap: 3600,\n    firstMessageDeliveriesWeight: 1,\n    firstMessageDeliveriesDecay: 0.5,\n    firstMessageDeliveriesCap: 2000,\n    meshMessageDeliveriesWeight: -1,\n    meshMessageDeliveriesDecay: 0.5,\n    meshMessageDeliveriesCap: 100,\n    meshMessageDeliveriesThreshold: 20,\n    meshMessageDeliveriesWindow: 10,\n    meshMessageDeliveriesActivation: 5000,\n    meshFailurePenaltyWeight: -1,\n    meshFailurePenaltyDecay: 0.5,\n    invalidMessageDeliveriesWeight: -1,\n    invalidMessageDeliveriesDecay: 0.3\n};\nexport function createPeerScoreParams(p = {}) {\n    return {\n        ...defaultPeerScoreParams,\n        ...p,\n        topics: p.topics\n            ? Object.entries(p.topics).reduce((topics, [topic, topicScoreParams]) => {\n                topics[topic] = createTopicScoreParams(topicScoreParams);\n                return topics;\n            }, {})\n            : {}\n    };\n}\nexport function createTopicScoreParams(p = {}) {\n    return {\n        ...defaultTopicScoreParams,\n        ...p\n    };\n}\n// peer score parameter validation\nexport function validatePeerScoreParams(p) {\n    for (const [topic, params] of Object.entries(p.topics)) {\n        try {\n            validateTopicScoreParams(params);\n        }\n        catch (e) {\n            throw new CodeError(`invalid score parameters for topic ${topic}: ${e.message}`, ERR_INVALID_PEER_SCORE_PARAMS);\n        }\n    }\n    // check that the topic score is 0 or something positive\n    if (p.topicScoreCap < 0) {\n        throw new CodeError('invalid topic score cap; must be positive (or 0 for no cap)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check that we have an app specific score; the weight can be anything (but expected positive)\n    if (p.appSpecificScore === null || p.appSpecificScore === undefined) {\n        throw new CodeError('missing application specific score function', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check the IP colocation factor\n    if (p.IPColocationFactorWeight > 0) {\n        throw new CodeError('invalid IPColocationFactorWeight; must be negative (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.IPColocationFactorWeight !== 0 && p.IPColocationFactorThreshold < 1) {\n        throw new CodeError('invalid IPColocationFactorThreshold; must be at least 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check the behaviour penalty\n    if (p.behaviourPenaltyWeight > 0) {\n        throw new CodeError('invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.behaviourPenaltyWeight !== 0 && (p.behaviourPenaltyDecay <= 0 || p.behaviourPenaltyDecay >= 1)) {\n        throw new CodeError('invalid BehaviourPenaltyDecay; must be between 0 and 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check the decay parameters\n    if (p.decayInterval < 1000) {\n        throw new CodeError('invalid DecayInterval; must be at least 1s', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.decayToZero <= 0 || p.decayToZero >= 1) {\n        throw new CodeError('invalid DecayToZero; must be between 0 and 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // no need to check the score retention; a value of 0 means that we don't retain scores\n}\nexport function validateTopicScoreParams(p) {\n    // make sure we have a sane topic weight\n    if (p.topicWeight < 0) {\n        throw new CodeError('invalid topic weight; must be >= 0', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check P1\n    if (p.timeInMeshQuantum === 0) {\n        throw new CodeError('invalid TimeInMeshQuantum; must be non zero', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.timeInMeshWeight < 0) {\n        throw new CodeError('invalid TimeInMeshWeight; must be positive (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.timeInMeshWeight !== 0 && p.timeInMeshQuantum <= 0) {\n        throw new CodeError('invalid TimeInMeshQuantum; must be positive', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.timeInMeshWeight !== 0 && p.timeInMeshCap <= 0) {\n        throw new CodeError('invalid TimeInMeshCap; must be positive', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check P2\n    if (p.firstMessageDeliveriesWeight < 0) {\n        throw new CodeError('invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.firstMessageDeliveriesWeight !== 0 &&\n        (p.firstMessageDeliveriesDecay <= 0 || p.firstMessageDeliveriesDecay >= 1)) {\n        throw new CodeError('invalid FirstMessageDeliveriesDecay; must be between 0 and 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.firstMessageDeliveriesWeight !== 0 && p.firstMessageDeliveriesCap <= 0) {\n        throw new CodeError('invalid FirstMessageDeliveriesCap; must be positive', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check P3\n    if (p.meshMessageDeliveriesWeight > 0) {\n        throw new CodeError('invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.meshMessageDeliveriesWeight !== 0 && (p.meshMessageDeliveriesDecay <= 0 || p.meshMessageDeliveriesDecay >= 1)) {\n        throw new CodeError('invalid MeshMessageDeliveriesDecay; must be between 0 and 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.meshMessageDeliveriesWeight !== 0 && p.meshMessageDeliveriesCap <= 0) {\n        throw new CodeError('invalid MeshMessageDeliveriesCap; must be positive', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.meshMessageDeliveriesWeight !== 0 && p.meshMessageDeliveriesThreshold <= 0) {\n        throw new CodeError('invalid MeshMessageDeliveriesThreshold; must be positive', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.meshMessageDeliveriesWindow < 0) {\n        throw new CodeError('invalid MeshMessageDeliveriesWindow; must be non-negative', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.meshMessageDeliveriesWeight !== 0 && p.meshMessageDeliveriesActivation < 1000) {\n        throw new CodeError('invalid MeshMessageDeliveriesActivation; must be at least 1s', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check P3b\n    if (p.meshFailurePenaltyWeight > 0) {\n        throw new CodeError('invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.meshFailurePenaltyWeight !== 0 && (p.meshFailurePenaltyDecay <= 0 || p.meshFailurePenaltyDecay >= 1)) {\n        throw new CodeError('invalid MeshFailurePenaltyDecay; must be between 0 and 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check P4\n    if (p.invalidMessageDeliveriesWeight > 0) {\n        throw new CodeError('invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.invalidMessageDeliveriesDecay <= 0 || p.invalidMessageDeliveriesDecay >= 1) {\n        throw new CodeError('invalid InvalidMessageDeliveriesDecay; must be between 0 and 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n}\n//# sourceMappingURL=peer-score-params.js.map","import { ERR_INVALID_PEER_SCORE_THRESHOLDS } from './constants.js';\nimport { CodeError } from '@libp2p/interface/errors';\nexport const defaultPeerScoreThresholds = {\n    gossipThreshold: -10,\n    publishThreshold: -50,\n    graylistThreshold: -80,\n    acceptPXThreshold: 10,\n    opportunisticGraftThreshold: 20\n};\nexport function createPeerScoreThresholds(p = {}) {\n    return {\n        ...defaultPeerScoreThresholds,\n        ...p\n    };\n}\nexport function validatePeerScoreThresholds(p) {\n    if (p.gossipThreshold > 0) {\n        throw new CodeError('invalid gossip threshold; it must be <= 0', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n    }\n    if (p.publishThreshold > 0 || p.publishThreshold > p.gossipThreshold) {\n        throw new CodeError('invalid publish threshold; it must be <= 0 and <= gossip threshold', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n    }\n    if (p.graylistThreshold > 0 || p.graylistThreshold > p.publishThreshold) {\n        throw new CodeError('invalid graylist threshold; it must be <= 0 and <= publish threshold', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n    }\n    if (p.acceptPXThreshold < 0) {\n        throw new CodeError('invalid accept PX threshold; it must be >= 0', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n    }\n    if (p.opportunisticGraftThreshold < 0) {\n        throw new CodeError('invalid opportunistic grafting threshold; it must be >= 0', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n    }\n}\n//# sourceMappingURL=peer-score-thresholds.js.map","import { TimeCacheDuration } from '../constants.js';\nimport Denque from 'denque';\nexport var DeliveryRecordStatus;\n(function (DeliveryRecordStatus) {\n    /**\n     * we don't know (yet) if the message is valid\n     */\n    DeliveryRecordStatus[DeliveryRecordStatus[\"unknown\"] = 0] = \"unknown\";\n    /**\n     * we know the message is valid\n     */\n    DeliveryRecordStatus[DeliveryRecordStatus[\"valid\"] = 1] = \"valid\";\n    /**\n     * we know the message is invalid\n     */\n    DeliveryRecordStatus[DeliveryRecordStatus[\"invalid\"] = 2] = \"invalid\";\n    /**\n     * we were instructed by the validator to ignore the message\n     */\n    DeliveryRecordStatus[DeliveryRecordStatus[\"ignored\"] = 3] = \"ignored\";\n})(DeliveryRecordStatus || (DeliveryRecordStatus = {}));\n/**\n * Map of canonical message ID to DeliveryRecord\n *\n * Maintains an internal queue for efficient gc of old messages\n */\nexport class MessageDeliveries {\n    records;\n    queue;\n    constructor() {\n        this.records = new Map();\n        this.queue = new Denque();\n    }\n    getRecord(msgIdStr) {\n        return this.records.get(msgIdStr);\n    }\n    ensureRecord(msgIdStr) {\n        let drec = this.records.get(msgIdStr);\n        if (drec) {\n            return drec;\n        }\n        // record doesn't exist yet\n        // create record\n        drec = {\n            status: DeliveryRecordStatus.unknown,\n            firstSeenTsMs: Date.now(),\n            validated: 0,\n            peers: new Set()\n        };\n        this.records.set(msgIdStr, drec);\n        // and add msgId to the queue\n        const entry = {\n            msgId: msgIdStr,\n            expire: Date.now() + TimeCacheDuration\n        };\n        this.queue.push(entry);\n        return drec;\n    }\n    gc() {\n        const now = Date.now();\n        // queue is sorted by expiry time\n        // remove expired messages, remove from queue until first un-expired message found\n        let head = this.queue.peekFront();\n        while (head && head.expire < now) {\n            this.records.delete(head.msgId);\n            this.queue.shift();\n            head = this.queue.peekFront();\n        }\n    }\n    clear() {\n        this.records.clear();\n        this.queue.clear();\n    }\n}\n//# sourceMappingURL=message-deliveries.js.map","/**\n * Exclude up to `ineed` items from a set if item meets condition `cond`\n */\nexport function removeItemsFromSet(superSet, ineed, cond = () => true) {\n    const subset = new Set();\n    if (ineed <= 0)\n        return subset;\n    for (const id of superSet) {\n        if (subset.size >= ineed)\n            break;\n        if (cond(id)) {\n            subset.add(id);\n            superSet.delete(id);\n        }\n    }\n    return subset;\n}\n/**\n * Exclude up to `ineed` items from a set\n */\nexport function removeFirstNItemsFromSet(superSet, ineed) {\n    return removeItemsFromSet(superSet, ineed, () => true);\n}\nexport class MapDef extends Map {\n    getDefault;\n    constructor(getDefault) {\n        super();\n        this.getDefault = getDefault;\n    }\n    getOrDefault(key) {\n        let value = super.get(key);\n        if (value === undefined) {\n            value = this.getDefault();\n            this.set(key, value);\n        }\n        return value;\n    }\n}\n//# sourceMappingURL=set.js.map","import { validatePeerScoreParams } from './peer-score-params.js';\nimport { computeScore } from './compute-score.js';\nimport { MessageDeliveries, DeliveryRecordStatus } from './message-deliveries.js';\nimport { logger } from '@libp2p/logger';\nimport { RejectReason } from '../types.js';\nimport { MapDef } from '../utils/set.js';\nconst log = logger('libp2p:gossipsub:score');\nexport class PeerScore {\n    params;\n    metrics;\n    /**\n     * Per-peer stats for score calculation\n     */\n    peerStats = new Map();\n    /**\n     * IP colocation tracking; maps IP => set of peers.\n     */\n    peerIPs = new MapDef(() => new Set());\n    /**\n     * Cache score up to decayInterval if topic stats are unchanged.\n     */\n    scoreCache = new Map();\n    /**\n     * Recent message delivery timing/participants\n     */\n    deliveryRecords = new MessageDeliveries();\n    _backgroundInterval;\n    scoreCacheValidityMs;\n    computeScore;\n    constructor(params, metrics, opts) {\n        this.params = params;\n        this.metrics = metrics;\n        validatePeerScoreParams(params);\n        this.scoreCacheValidityMs = opts.scoreCacheValidityMs;\n        this.computeScore = opts.computeScore ?? computeScore;\n    }\n    get size() {\n        return this.peerStats.size;\n    }\n    /**\n     * Start PeerScore instance\n     */\n    start() {\n        if (this._backgroundInterval) {\n            log('Peer score already running');\n            return;\n        }\n        this._backgroundInterval = setInterval(() => this.background(), this.params.decayInterval);\n        log('started');\n    }\n    /**\n     * Stop PeerScore instance\n     */\n    stop() {\n        if (!this._backgroundInterval) {\n            log('Peer score already stopped');\n            return;\n        }\n        clearInterval(this._backgroundInterval);\n        delete this._backgroundInterval;\n        this.peerIPs.clear();\n        this.peerStats.clear();\n        this.deliveryRecords.clear();\n        log('stopped');\n    }\n    /**\n     * Periodic maintenance\n     */\n    background() {\n        this.refreshScores();\n        this.deliveryRecords.gc();\n    }\n    dumpPeerScoreStats() {\n        return Object.fromEntries(Array.from(this.peerStats.entries()).map(([peer, stats]) => [peer, stats]));\n    }\n    messageFirstSeenTimestampMs(msgIdStr) {\n        const drec = this.deliveryRecords.getRecord(msgIdStr);\n        return drec ? drec.firstSeenTsMs : null;\n    }\n    /**\n     * Decays scores, and purges score records for disconnected peers once their expiry has elapsed.\n     */\n    refreshScores() {\n        const now = Date.now();\n        const decayToZero = this.params.decayToZero;\n        this.peerStats.forEach((pstats, id) => {\n            if (!pstats.connected) {\n                // has the retention period expired?\n                if (now > pstats.expire) {\n                    // yes, throw it away (but clean up the IP tracking first)\n                    this.removeIPsForPeer(id, pstats.knownIPs);\n                    this.peerStats.delete(id);\n                    this.scoreCache.delete(id);\n                }\n                // we don't decay retained scores, as the peer is not active.\n                // this way the peer cannot reset a negative score by simply disconnecting and reconnecting,\n                // unless the retention period has elapsed.\n                // similarly, a well behaved peer does not lose its score by getting disconnected.\n                return;\n            }\n            Object.entries(pstats.topics).forEach(([topic, tstats]) => {\n                const tparams = this.params.topics[topic];\n                if (tparams === undefined) {\n                    // we are not scoring this topic\n                    // should be unreachable, we only add scored topics to pstats\n                    return;\n                }\n                // decay counters\n                tstats.firstMessageDeliveries *= tparams.firstMessageDeliveriesDecay;\n                if (tstats.firstMessageDeliveries < decayToZero) {\n                    tstats.firstMessageDeliveries = 0;\n                }\n                tstats.meshMessageDeliveries *= tparams.meshMessageDeliveriesDecay;\n                if (tstats.meshMessageDeliveries < decayToZero) {\n                    tstats.meshMessageDeliveries = 0;\n                }\n                tstats.meshFailurePenalty *= tparams.meshFailurePenaltyDecay;\n                if (tstats.meshFailurePenalty < decayToZero) {\n                    tstats.meshFailurePenalty = 0;\n                }\n                tstats.invalidMessageDeliveries *= tparams.invalidMessageDeliveriesDecay;\n                if (tstats.invalidMessageDeliveries < decayToZero) {\n                    tstats.invalidMessageDeliveries = 0;\n                }\n                // update mesh time and activate mesh message delivery parameter if need be\n                if (tstats.inMesh) {\n                    tstats.meshTime = now - tstats.graftTime;\n                    if (tstats.meshTime > tparams.meshMessageDeliveriesActivation) {\n                        tstats.meshMessageDeliveriesActive = true;\n                    }\n                }\n            });\n            // decay P7 counter\n            pstats.behaviourPenalty *= this.params.behaviourPenaltyDecay;\n            if (pstats.behaviourPenalty < decayToZero) {\n                pstats.behaviourPenalty = 0;\n            }\n        });\n    }\n    /**\n     * Return the score for a peer\n     */\n    score(id) {\n        this.metrics?.scoreFnCalls.inc();\n        const pstats = this.peerStats.get(id);\n        if (!pstats) {\n            return 0;\n        }\n        const now = Date.now();\n        const cacheEntry = this.scoreCache.get(id);\n        // Found cached score within validity period\n        if (cacheEntry && cacheEntry.cacheUntil > now) {\n            return cacheEntry.score;\n        }\n        this.metrics?.scoreFnRuns.inc();\n        const score = this.computeScore(id, pstats, this.params, this.peerIPs);\n        const cacheUntil = now + this.scoreCacheValidityMs;\n        if (cacheEntry) {\n            this.metrics?.scoreCachedDelta.observe(Math.abs(score - cacheEntry.score));\n            cacheEntry.score = score;\n            cacheEntry.cacheUntil = cacheUntil;\n        }\n        else {\n            this.scoreCache.set(id, { score, cacheUntil });\n        }\n        return score;\n    }\n    /**\n     * Apply a behavioural penalty to a peer\n     */\n    addPenalty(id, penalty, penaltyLabel) {\n        const pstats = this.peerStats.get(id);\n        if (pstats) {\n            pstats.behaviourPenalty += penalty;\n            this.metrics?.onScorePenalty(penaltyLabel);\n        }\n    }\n    addPeer(id) {\n        // create peer stats (not including topic stats for each topic to be scored)\n        // topic stats will be added as needed\n        const pstats = {\n            connected: true,\n            expire: 0,\n            topics: {},\n            knownIPs: new Set(),\n            behaviourPenalty: 0\n        };\n        this.peerStats.set(id, pstats);\n    }\n    /** Adds a new IP to a peer, if the peer is not known the update is ignored */\n    addIP(id, ip) {\n        const pstats = this.peerStats.get(id);\n        if (pstats) {\n            pstats.knownIPs.add(ip);\n        }\n        this.peerIPs.getOrDefault(ip).add(id);\n    }\n    /** Remove peer association with IP */\n    removeIP(id, ip) {\n        const pstats = this.peerStats.get(id);\n        if (pstats) {\n            pstats.knownIPs.delete(ip);\n        }\n        const peersWithIP = this.peerIPs.get(ip);\n        if (peersWithIP) {\n            peersWithIP.delete(id);\n            if (peersWithIP.size === 0) {\n                this.peerIPs.delete(ip);\n            }\n        }\n    }\n    removePeer(id) {\n        const pstats = this.peerStats.get(id);\n        if (!pstats) {\n            return;\n        }\n        // decide whether to retain the score; this currently only retains non-positive scores\n        // to dissuade attacks on the score function.\n        if (this.score(id) > 0) {\n            this.removeIPsForPeer(id, pstats.knownIPs);\n            this.peerStats.delete(id);\n            return;\n        }\n        // furthermore, when we decide to retain the score, the firstMessageDelivery counters are\n        // reset to 0 and mesh delivery penalties applied.\n        Object.entries(pstats.topics).forEach(([topic, tstats]) => {\n            tstats.firstMessageDeliveries = 0;\n            const threshold = this.params.topics[topic].meshMessageDeliveriesThreshold;\n            if (tstats.inMesh && tstats.meshMessageDeliveriesActive && tstats.meshMessageDeliveries < threshold) {\n                const deficit = threshold - tstats.meshMessageDeliveries;\n                tstats.meshFailurePenalty += deficit * deficit;\n            }\n            tstats.inMesh = false;\n            tstats.meshMessageDeliveriesActive = false;\n        });\n        pstats.connected = false;\n        pstats.expire = Date.now() + this.params.retainScore;\n    }\n    /** Handles scoring functionality as a peer GRAFTs to a topic. */\n    graft(id, topic) {\n        const pstats = this.peerStats.get(id);\n        if (pstats) {\n            const tstats = this.getPtopicStats(pstats, topic);\n            if (tstats) {\n                // if we are scoring the topic, update the mesh status.\n                tstats.inMesh = true;\n                tstats.graftTime = Date.now();\n                tstats.meshTime = 0;\n                tstats.meshMessageDeliveriesActive = false;\n            }\n        }\n    }\n    /** Handles scoring functionality as a peer PRUNEs from a topic. */\n    prune(id, topic) {\n        const pstats = this.peerStats.get(id);\n        if (pstats) {\n            const tstats = this.getPtopicStats(pstats, topic);\n            if (tstats) {\n                // sticky mesh delivery rate failure penalty\n                const threshold = this.params.topics[topic].meshMessageDeliveriesThreshold;\n                if (tstats.meshMessageDeliveriesActive && tstats.meshMessageDeliveries < threshold) {\n                    const deficit = threshold - tstats.meshMessageDeliveries;\n                    tstats.meshFailurePenalty += deficit * deficit;\n                }\n                tstats.meshMessageDeliveriesActive = false;\n                tstats.inMesh = false;\n                // TODO: Consider clearing score cache on important penalties\n                // this.scoreCache.delete(id)\n            }\n        }\n    }\n    validateMessage(msgIdStr) {\n        this.deliveryRecords.ensureRecord(msgIdStr);\n    }\n    deliverMessage(from, msgIdStr, topic) {\n        this.markFirstMessageDelivery(from, topic);\n        const drec = this.deliveryRecords.ensureRecord(msgIdStr);\n        const now = Date.now();\n        // defensive check that this is the first delivery trace -- delivery status should be unknown\n        if (drec.status !== DeliveryRecordStatus.unknown) {\n            log('unexpected delivery: message from %s was first seen %s ago and has delivery status %s', from, now - drec.firstSeenTsMs, DeliveryRecordStatus[drec.status]);\n            return;\n        }\n        // mark the message as valid and reward mesh peers that have already forwarded it to us\n        drec.status = DeliveryRecordStatus.valid;\n        drec.validated = now;\n        drec.peers.forEach((p) => {\n            // this check is to make sure a peer can't send us a message twice and get a double count\n            // if it is a first delivery.\n            if (p !== from.toString()) {\n                this.markDuplicateMessageDelivery(p, topic);\n            }\n        });\n    }\n    /**\n     * Similar to `rejectMessage` except does not require the message id or reason for an invalid message.\n     */\n    rejectInvalidMessage(from, topic) {\n        this.markInvalidMessageDelivery(from, topic);\n    }\n    rejectMessage(from, msgIdStr, topic, reason) {\n        switch (reason) {\n            // these messages are not tracked, but the peer is penalized as they are invalid\n            case RejectReason.Error:\n                this.markInvalidMessageDelivery(from, topic);\n                return;\n            // we ignore those messages, so do nothing.\n            case RejectReason.Blacklisted:\n                return;\n            // the rest are handled after record creation\n        }\n        const drec = this.deliveryRecords.ensureRecord(msgIdStr);\n        // defensive check that this is the first rejection -- delivery status should be unknown\n        if (drec.status !== DeliveryRecordStatus.unknown) {\n            log('unexpected rejection: message from %s was first seen %s ago and has delivery status %d', from, Date.now() - drec.firstSeenTsMs, DeliveryRecordStatus[drec.status]);\n            return;\n        }\n        if (reason === RejectReason.Ignore) {\n            // we were explicitly instructed by the validator to ignore the message but not penalize the peer\n            drec.status = DeliveryRecordStatus.ignored;\n            drec.peers.clear();\n            return;\n        }\n        // mark the message as invalid and penalize peers that have already forwarded it.\n        drec.status = DeliveryRecordStatus.invalid;\n        this.markInvalidMessageDelivery(from, topic);\n        drec.peers.forEach((p) => {\n            this.markInvalidMessageDelivery(p, topic);\n        });\n        // release the delivery time tracking map to free some memory early\n        drec.peers.clear();\n    }\n    duplicateMessage(from, msgIdStr, topic) {\n        const drec = this.deliveryRecords.ensureRecord(msgIdStr);\n        if (drec.peers.has(from)) {\n            // we have already seen this duplicate\n            return;\n        }\n        switch (drec.status) {\n            case DeliveryRecordStatus.unknown:\n                // the message is being validated; track the peer delivery and wait for\n                // the Deliver/Reject/Ignore notification.\n                drec.peers.add(from);\n                break;\n            case DeliveryRecordStatus.valid:\n                // mark the peer delivery time to only count a duplicate delivery once.\n                drec.peers.add(from);\n                this.markDuplicateMessageDelivery(from, topic, drec.validated);\n                break;\n            case DeliveryRecordStatus.invalid:\n                // we no longer track delivery time\n                this.markInvalidMessageDelivery(from, topic);\n                break;\n            case DeliveryRecordStatus.ignored:\n                // the message was ignored; do nothing (we don't know if it was valid)\n                break;\n        }\n    }\n    /**\n     * Increments the \"invalid message deliveries\" counter for all scored topics the message is published in.\n     */\n    markInvalidMessageDelivery(from, topic) {\n        const pstats = this.peerStats.get(from);\n        if (pstats) {\n            const tstats = this.getPtopicStats(pstats, topic);\n            if (tstats) {\n                tstats.invalidMessageDeliveries += 1;\n            }\n        }\n    }\n    /**\n     * Increments the \"first message deliveries\" counter for all scored topics the message is published in,\n     * as well as the \"mesh message deliveries\" counter, if the peer is in the mesh for the topic.\n     * Messages already known (with the seenCache) are counted with markDuplicateMessageDelivery()\n     */\n    markFirstMessageDelivery(from, topic) {\n        const pstats = this.peerStats.get(from);\n        if (pstats) {\n            const tstats = this.getPtopicStats(pstats, topic);\n            if (tstats) {\n                let cap = this.params.topics[topic].firstMessageDeliveriesCap;\n                tstats.firstMessageDeliveries = Math.min(cap, tstats.firstMessageDeliveries + 1);\n                if (tstats.inMesh) {\n                    cap = this.params.topics[topic].meshMessageDeliveriesCap;\n                    tstats.meshMessageDeliveries = Math.min(cap, tstats.meshMessageDeliveries + 1);\n                }\n            }\n        }\n    }\n    /**\n     * Increments the \"mesh message deliveries\" counter for messages we've seen before,\n     * as long the message was received within the P3 window.\n     */\n    markDuplicateMessageDelivery(from, topic, validatedTime) {\n        const pstats = this.peerStats.get(from);\n        if (pstats) {\n            const now = validatedTime !== undefined ? Date.now() : 0;\n            const tstats = this.getPtopicStats(pstats, topic);\n            if (tstats && tstats.inMesh) {\n                const tparams = this.params.topics[topic];\n                // check against the mesh delivery window -- if the validated time is passed as 0, then\n                // the message was received before we finished validation and thus falls within the mesh\n                // delivery window.\n                if (validatedTime !== undefined) {\n                    const deliveryDelayMs = now - validatedTime;\n                    const isLateDelivery = deliveryDelayMs > tparams.meshMessageDeliveriesWindow;\n                    this.metrics?.onDuplicateMsgDelivery(topic, deliveryDelayMs, isLateDelivery);\n                    if (isLateDelivery) {\n                        return;\n                    }\n                }\n                const cap = tparams.meshMessageDeliveriesCap;\n                tstats.meshMessageDeliveries = Math.min(cap, tstats.meshMessageDeliveries + 1);\n            }\n        }\n    }\n    /**\n     * Removes an IP list from the tracking list for a peer.\n     */\n    removeIPsForPeer(id, ipsToRemove) {\n        for (const ipToRemove of ipsToRemove) {\n            const peerSet = this.peerIPs.get(ipToRemove);\n            if (peerSet) {\n                peerSet.delete(id);\n                if (peerSet.size === 0) {\n                    this.peerIPs.delete(ipToRemove);\n                }\n            }\n        }\n    }\n    /**\n     * Returns topic stats if they exist, otherwise if the supplied parameters score the\n     * topic, inserts the default stats and returns a reference to those. If neither apply, returns None.\n     */\n    getPtopicStats(pstats, topic) {\n        let topicStats = pstats.topics[topic];\n        if (topicStats !== undefined) {\n            return topicStats;\n        }\n        if (this.params.topics[topic] !== undefined) {\n            topicStats = {\n                inMesh: false,\n                graftTime: 0,\n                meshTime: 0,\n                firstMessageDeliveries: 0,\n                meshMessageDeliveries: 0,\n                meshMessageDeliveriesActive: false,\n                meshFailurePenalty: 0,\n                invalidMessageDeliveries: 0\n            };\n            pstats.topics[topic] = topicStats;\n            return topicStats;\n        }\n        return null;\n    }\n}\n//# sourceMappingURL=peer-score.js.map","import { RejectReason } from './types.js';\n/**\n * IWantTracer is an internal tracer that tracks IWANT requests in order to penalize\n * peers who don't follow up on IWANT requests after an IHAVE advertisement.\n * The tracking of promises is probabilistic to avoid using too much memory.\n *\n * Note: Do not confuse these 'promises' with JS Promise objects.\n * These 'promises' are merely expectations of a peer's behavior.\n */\nexport class IWantTracer {\n    gossipsubIWantFollowupMs;\n    msgIdToStrFn;\n    metrics;\n    /**\n     * Promises to deliver a message\n     * Map per message id, per peer, promise expiration time\n     */\n    promises = new Map();\n    /**\n     * First request time by msgId. Used for metrics to track expire times.\n     * Necessary to know if peers are actually breaking promises or simply sending them a bit later\n     */\n    requestMsByMsg = new Map();\n    requestMsByMsgExpire;\n    constructor(gossipsubIWantFollowupMs, msgIdToStrFn, metrics) {\n        this.gossipsubIWantFollowupMs = gossipsubIWantFollowupMs;\n        this.msgIdToStrFn = msgIdToStrFn;\n        this.metrics = metrics;\n        this.requestMsByMsgExpire = 10 * gossipsubIWantFollowupMs;\n    }\n    get size() {\n        return this.promises.size;\n    }\n    get requestMsByMsgSize() {\n        return this.requestMsByMsg.size;\n    }\n    /**\n     * Track a promise to deliver a message from a list of msgIds we are requesting\n     */\n    addPromise(from, msgIds) {\n        // pick msgId randomly from the list\n        const ix = Math.floor(Math.random() * msgIds.length);\n        const msgId = msgIds[ix];\n        const msgIdStr = this.msgIdToStrFn(msgId);\n        let expireByPeer = this.promises.get(msgIdStr);\n        if (!expireByPeer) {\n            expireByPeer = new Map();\n            this.promises.set(msgIdStr, expireByPeer);\n        }\n        const now = Date.now();\n        // If a promise for this message id and peer already exists we don't update the expiry\n        if (!expireByPeer.has(from)) {\n            expireByPeer.set(from, now + this.gossipsubIWantFollowupMs);\n            if (this.metrics) {\n                this.metrics.iwantPromiseStarted.inc(1);\n                if (!this.requestMsByMsg.has(msgIdStr)) {\n                    this.requestMsByMsg.set(msgIdStr, now);\n                }\n            }\n        }\n    }\n    /**\n     * Returns the number of broken promises for each peer who didn't follow up on an IWANT request.\n     *\n     * This should be called not too often relative to the expire times, since it iterates over the whole data.\n     */\n    getBrokenPromises() {\n        const now = Date.now();\n        const result = new Map();\n        let brokenPromises = 0;\n        this.promises.forEach((expireByPeer, msgId) => {\n            expireByPeer.forEach((expire, p) => {\n                // the promise has been broken\n                if (expire < now) {\n                    // add 1 to result\n                    result.set(p, (result.get(p) ?? 0) + 1);\n                    // delete from tracked promises\n                    expireByPeer.delete(p);\n                    // for metrics\n                    brokenPromises++;\n                }\n            });\n            // clean up empty promises for a msgId\n            if (!expireByPeer.size) {\n                this.promises.delete(msgId);\n            }\n        });\n        this.metrics?.iwantPromiseBroken.inc(brokenPromises);\n        return result;\n    }\n    /**\n     * Someone delivered a message, stop tracking promises for it\n     */\n    deliverMessage(msgIdStr, isDuplicate = false) {\n        this.trackMessage(msgIdStr);\n        const expireByPeer = this.promises.get(msgIdStr);\n        // Expired promise, check requestMsByMsg\n        if (expireByPeer) {\n            this.promises.delete(msgIdStr);\n            if (this.metrics) {\n                this.metrics.iwantPromiseResolved.inc(1);\n                if (isDuplicate)\n                    this.metrics.iwantPromiseResolvedFromDuplicate.inc(1);\n                this.metrics.iwantPromiseResolvedPeers.inc(expireByPeer.size);\n            }\n        }\n    }\n    /**\n     * A message got rejected, so we can stop tracking promises and let the score penalty apply from invalid message delivery,\n     * unless its an obviously invalid message.\n     */\n    rejectMessage(msgIdStr, reason) {\n        this.trackMessage(msgIdStr);\n        // A message got rejected, so we can stop tracking promises and let the score penalty apply.\n        // With the expection of obvious invalid messages\n        switch (reason) {\n            case RejectReason.Error:\n                return;\n        }\n        this.promises.delete(msgIdStr);\n    }\n    clear() {\n        this.promises.clear();\n    }\n    prune() {\n        const maxMs = Date.now() - this.requestMsByMsgExpire;\n        let count = 0;\n        for (const [k, v] of this.requestMsByMsg.entries()) {\n            if (v < maxMs) {\n                // messages that stay too long in the requestMsByMsg map, delete\n                this.requestMsByMsg.delete(k);\n                count++;\n            }\n            else {\n                // recent messages, keep them\n                // sort by insertion order\n                break;\n            }\n        }\n        this.metrics?.iwantMessagePruned.inc(count);\n    }\n    trackMessage(msgIdStr) {\n        if (this.metrics) {\n            const requestMs = this.requestMsByMsg.get(msgIdStr);\n            if (requestMs !== undefined) {\n                this.metrics.iwantPromiseDeliveryTime.observe((Date.now() - requestMs) / 1000);\n                this.requestMsByMsg.delete(msgIdStr);\n            }\n        }\n    }\n}\n//# sourceMappingURL=tracer.js.map","import { TopicValidatorResult } from '@libp2p/interface/pubsub';\nimport { MessageStatus, RejectReason, ValidateError } from './types.js';\nexport var MessageSource;\n(function (MessageSource) {\n    MessageSource[\"forward\"] = \"forward\";\n    MessageSource[\"publish\"] = \"publish\";\n})(MessageSource || (MessageSource = {}));\nexport var InclusionReason;\n(function (InclusionReason) {\n    /** Peer was a fanaout peer. */\n    InclusionReason[\"Fanout\"] = \"fanout\";\n    /** Included from random selection. */\n    InclusionReason[\"Random\"] = \"random\";\n    /** Peer subscribed. */\n    InclusionReason[\"Subscribed\"] = \"subscribed\";\n    /** On heartbeat, peer was included to fill the outbound quota. */\n    InclusionReason[\"Outbound\"] = \"outbound\";\n    /** On heartbeat, not enough peers in mesh */\n    InclusionReason[\"NotEnough\"] = \"not_enough\";\n    /** On heartbeat opportunistic grafting due to low mesh score */\n    InclusionReason[\"Opportunistic\"] = \"opportunistic\";\n})(InclusionReason || (InclusionReason = {}));\n/// Reasons why a peer was removed from the mesh.\nexport var ChurnReason;\n(function (ChurnReason) {\n    /// Peer disconnected.\n    ChurnReason[\"Dc\"] = \"disconnected\";\n    /// Peer had a bad score.\n    ChurnReason[\"BadScore\"] = \"bad_score\";\n    /// Peer sent a PRUNE.\n    ChurnReason[\"Prune\"] = \"prune\";\n    /// Too many peers.\n    ChurnReason[\"Excess\"] = \"excess\";\n})(ChurnReason || (ChurnReason = {}));\n/// Kinds of reasons a peer's score has been penalized\nexport var ScorePenalty;\n(function (ScorePenalty) {\n    /// A peer grafted before waiting the back-off time.\n    ScorePenalty[\"GraftBackoff\"] = \"graft_backoff\";\n    /// A Peer did not respond to an IWANT request in time.\n    ScorePenalty[\"BrokenPromise\"] = \"broken_promise\";\n    /// A Peer did not send enough messages as expected.\n    ScorePenalty[\"MessageDeficit\"] = \"message_deficit\";\n    /// Too many peers under one IP address.\n    ScorePenalty[\"IPColocation\"] = \"IP_colocation\";\n})(ScorePenalty || (ScorePenalty = {}));\nexport var IHaveIgnoreReason;\n(function (IHaveIgnoreReason) {\n    IHaveIgnoreReason[\"LowScore\"] = \"low_score\";\n    IHaveIgnoreReason[\"MaxIhave\"] = \"max_ihave\";\n    IHaveIgnoreReason[\"MaxIasked\"] = \"max_iasked\";\n})(IHaveIgnoreReason || (IHaveIgnoreReason = {}));\nexport var ScoreThreshold;\n(function (ScoreThreshold) {\n    ScoreThreshold[\"graylist\"] = \"graylist\";\n    ScoreThreshold[\"publish\"] = \"publish\";\n    ScoreThreshold[\"gossip\"] = \"gossip\";\n    ScoreThreshold[\"mesh\"] = \"mesh\";\n})(ScoreThreshold || (ScoreThreshold = {}));\n/**\n * A collection of metrics used throughout the Gossipsub behaviour.\n * NOTE: except for special reasons, do not add more than 1 label for frequent metrics,\n * there's a performance penalty as of June 2023.\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function getMetrics(register, topicStrToLabel, opts) {\n    // Using function style instead of class to prevent having to re-declare all MetricsPrometheus types.\n    return {\n        /* Metrics for static config */\n        protocolsEnabled: register.gauge({\n            name: 'gossipsub_protocol',\n            help: 'Status of enabled protocols',\n            labelNames: ['protocol']\n        }),\n        /* Metrics per known topic */\n        /** Status of our subscription to this topic. This metric allows analyzing other topic metrics\n         *  filtered by our current subscription status.\n         *  = rust-libp2p `topic_subscription_status` */\n        topicSubscriptionStatus: register.gauge({\n            name: 'gossipsub_topic_subscription_status',\n            help: 'Status of our subscription to this topic',\n            labelNames: ['topicStr']\n        }),\n        /** Number of peers subscribed to each topic. This allows us to analyze a topic's behaviour\n         * regardless of our subscription status. */\n        topicPeersCount: register.gauge({\n            name: 'gossipsub_topic_peer_count',\n            help: 'Number of peers subscribed to each topic',\n            labelNames: ['topicStr']\n        }),\n        /* Metrics regarding mesh state */\n        /** Number of peers in our mesh. This metric should be updated with the count of peers for a\n         *  topic in the mesh regardless of inclusion and churn events.\n         *  = rust-libp2p `mesh_peer_counts` */\n        meshPeerCounts: register.gauge({\n            name: 'gossipsub_mesh_peer_count',\n            help: 'Number of peers in our mesh',\n            labelNames: ['topicStr']\n        }),\n        /** Number of times we include peers in a topic mesh for different reasons.\n         *  = rust-libp2p `mesh_peer_inclusion_events` */\n        meshPeerInclusionEventsFanout: register.gauge({\n            name: 'gossipsub_mesh_peer_inclusion_events_fanout_total',\n            help: 'Number of times we include peers in a topic mesh for fanout reasons',\n            labelNames: ['topic']\n        }),\n        meshPeerInclusionEventsRandom: register.gauge({\n            name: 'gossipsub_mesh_peer_inclusion_events_random_total',\n            help: 'Number of times we include peers in a topic mesh for random reasons',\n            labelNames: ['topic']\n        }),\n        meshPeerInclusionEventsSubscribed: register.gauge({\n            name: 'gossipsub_mesh_peer_inclusion_events_subscribed_total',\n            help: 'Number of times we include peers in a topic mesh for subscribed reasons',\n            labelNames: ['topic']\n        }),\n        meshPeerInclusionEventsOutbound: register.gauge({\n            name: 'gossipsub_mesh_peer_inclusion_events_outbound_total',\n            help: 'Number of times we include peers in a topic mesh for outbound reasons',\n            labelNames: ['topic']\n        }),\n        meshPeerInclusionEventsNotEnough: register.gauge({\n            name: 'gossipsub_mesh_peer_inclusion_events_not_enough_total',\n            help: 'Number of times we include peers in a topic mesh for not_enough reasons',\n            labelNames: ['topic']\n        }),\n        meshPeerInclusionEventsOpportunistic: register.gauge({\n            name: 'gossipsub_mesh_peer_inclusion_events_opportunistic_total',\n            help: 'Number of times we include peers in a topic mesh for opportunistic reasons',\n            labelNames: ['topic']\n        }),\n        meshPeerInclusionEventsUnknown: register.gauge({\n            name: 'gossipsub_mesh_peer_inclusion_events_unknown_total',\n            help: 'Number of times we include peers in a topic mesh for unknown reasons',\n            labelNames: ['topic']\n        }),\n        /** Number of times we remove peers in a topic mesh for different reasons.\n         *  = rust-libp2p `mesh_peer_churn_events` */\n        meshPeerChurnEventsDisconnected: register.gauge({\n            name: 'gossipsub_peer_churn_events_disconnected_total',\n            help: 'Number of times we remove peers in a topic mesh for disconnected reasons',\n            labelNames: ['topic']\n        }),\n        meshPeerChurnEventsBadScore: register.gauge({\n            name: 'gossipsub_peer_churn_events_bad_score_total',\n            help: 'Number of times we remove peers in a topic mesh for bad_score reasons',\n            labelNames: ['topic']\n        }),\n        meshPeerChurnEventsPrune: register.gauge({\n            name: 'gossipsub_peer_churn_events_prune_total',\n            help: 'Number of times we remove peers in a topic mesh for prune reasons',\n            labelNames: ['topic']\n        }),\n        meshPeerChurnEventsExcess: register.gauge({\n            name: 'gossipsub_peer_churn_events_excess_total',\n            help: 'Number of times we remove peers in a topic mesh for excess reasons',\n            labelNames: ['topic']\n        }),\n        meshPeerChurnEventsUnknown: register.gauge({\n            name: 'gossipsub_peer_churn_events_unknown_total',\n            help: 'Number of times we remove peers in a topic mesh for unknown reasons',\n            labelNames: ['topic']\n        }),\n        /* General Metrics */\n        /** Gossipsub supports floodsub, gossipsub v1.0 and gossipsub v1.1. Peers are classified based\n         *  on which protocol they support. This metric keeps track of the number of peers that are\n         *  connected of each type. */\n        peersPerProtocol: register.gauge({\n            name: 'gossipsub_peers_per_protocol_count',\n            help: 'Peers connected for each topic',\n            labelNames: ['protocol']\n        }),\n        /** The time it takes to complete one iteration of the heartbeat. */\n        heartbeatDuration: register.histogram({\n            name: 'gossipsub_heartbeat_duration_seconds',\n            help: 'The time it takes to complete one iteration of the heartbeat',\n            // Should take <10ms, over 1s it's a huge issue that needs debugging, since a heartbeat will be cancelled\n            buckets: [0.01, 0.1, 1]\n        }),\n        /** Heartbeat run took longer than heartbeat interval so next is skipped */\n        heartbeatSkipped: register.gauge({\n            name: 'gossipsub_heartbeat_skipped',\n            help: 'Heartbeat run took longer than heartbeat interval so next is skipped'\n        }),\n        /** Message validation results for each topic.\n         *  Invalid == Reject?\n         *  = rust-libp2p `invalid_messages`, `accepted_messages`, `ignored_messages`, `rejected_messages` */\n        acceptedMessagesTotal: register.gauge({\n            name: 'gossipsub_accepted_messages_total',\n            help: 'Total accepted messages for each topic',\n            labelNames: ['topic']\n        }),\n        ignoredMessagesTotal: register.gauge({\n            name: 'gossipsub_ignored_messages_total',\n            help: 'Total ignored messages for each topic',\n            labelNames: ['topic']\n        }),\n        rejectedMessagesTotal: register.gauge({\n            name: 'gossipsub_rejected_messages_total',\n            help: 'Total rejected messages for each topic',\n            labelNames: ['topic']\n        }),\n        unknownValidationResultsTotal: register.gauge({\n            name: 'gossipsub_unknown_validation_results_total',\n            help: 'Total unknown validation results for each topic',\n            labelNames: ['topic']\n        }),\n        /** When the user validates a message, it tries to re propagate it to its mesh peers. If the\n         *  message expires from the memcache before it can be validated, we count this a cache miss\n         *  and it is an indicator that the memcache size should be increased.\n         *  = rust-libp2p `mcache_misses` */\n        asyncValidationMcacheHit: register.gauge({\n            name: 'gossipsub_async_validation_mcache_hit_total',\n            help: 'Async validation result reported by the user layer',\n            labelNames: ['hit']\n        }),\n        asyncValidationDelayFromFirstSeenSec: register.histogram({\n            name: 'gossipsub_async_validation_delay_from_first_seen',\n            help: 'Async validation report delay from first seen in second',\n            labelNames: ['topic'],\n            buckets: [0.01, 0.03, 0.1, 0.3, 1, 3, 10]\n        }),\n        asyncValidationUnknownFirstSeen: register.gauge({\n            name: 'gossipsub_async_validation_unknown_first_seen_count_total',\n            help: 'Async validation report unknown first seen value for message'\n        }),\n        // peer stream\n        peerReadStreamError: register.gauge({\n            name: 'gossipsub_peer_read_stream_err_count_total',\n            help: 'Peer read stream error'\n        }),\n        // RPC outgoing. Track byte length + data structure sizes\n        rpcRecvBytes: register.gauge({ name: 'gossipsub_rpc_recv_bytes_total', help: 'RPC recv' }),\n        rpcRecvCount: register.gauge({ name: 'gossipsub_rpc_recv_count_total', help: 'RPC recv' }),\n        rpcRecvSubscription: register.gauge({ name: 'gossipsub_rpc_recv_subscription_total', help: 'RPC recv' }),\n        rpcRecvMessage: register.gauge({ name: 'gossipsub_rpc_recv_message_total', help: 'RPC recv' }),\n        rpcRecvControl: register.gauge({ name: 'gossipsub_rpc_recv_control_total', help: 'RPC recv' }),\n        rpcRecvIHave: register.gauge({ name: 'gossipsub_rpc_recv_ihave_total', help: 'RPC recv' }),\n        rpcRecvIWant: register.gauge({ name: 'gossipsub_rpc_recv_iwant_total', help: 'RPC recv' }),\n        rpcRecvGraft: register.gauge({ name: 'gossipsub_rpc_recv_graft_total', help: 'RPC recv' }),\n        rpcRecvPrune: register.gauge({ name: 'gossipsub_rpc_recv_prune_total', help: 'RPC recv' }),\n        rpcDataError: register.gauge({ name: 'gossipsub_rpc_data_err_count_total', help: 'RPC data error' }),\n        rpcRecvError: register.gauge({ name: 'gossipsub_rpc_recv_err_count_total', help: 'RPC recv error' }),\n        /** Total count of RPC dropped because acceptFrom() == false */\n        rpcRecvNotAccepted: register.gauge({\n            name: 'gossipsub_rpc_rcv_not_accepted_total',\n            help: 'Total count of RPC dropped because acceptFrom() == false'\n        }),\n        // RPC incoming. Track byte length + data structure sizes\n        rpcSentBytes: register.gauge({ name: 'gossipsub_rpc_sent_bytes_total', help: 'RPC sent' }),\n        rpcSentCount: register.gauge({ name: 'gossipsub_rpc_sent_count_total', help: 'RPC sent' }),\n        rpcSentSubscription: register.gauge({ name: 'gossipsub_rpc_sent_subscription_total', help: 'RPC sent' }),\n        rpcSentMessage: register.gauge({ name: 'gossipsub_rpc_sent_message_total', help: 'RPC sent' }),\n        rpcSentControl: register.gauge({ name: 'gossipsub_rpc_sent_control_total', help: 'RPC sent' }),\n        rpcSentIHave: register.gauge({ name: 'gossipsub_rpc_sent_ihave_total', help: 'RPC sent' }),\n        rpcSentIWant: register.gauge({ name: 'gossipsub_rpc_sent_iwant_total', help: 'RPC sent' }),\n        rpcSentGraft: register.gauge({ name: 'gossipsub_rpc_sent_graft_total', help: 'RPC sent' }),\n        rpcSentPrune: register.gauge({ name: 'gossipsub_rpc_sent_prune_total', help: 'RPC sent' }),\n        // publish message. Track peers sent to and bytes\n        /** Total count of msg published by topic */\n        msgPublishCount: register.gauge({\n            name: 'gossipsub_msg_publish_count_total',\n            help: 'Total count of msg published by topic',\n            labelNames: ['topic']\n        }),\n        /** Total count of peers that we publish a msg to */\n        msgPublishPeersByTopic: register.gauge({\n            name: 'gossipsub_msg_publish_peers_total',\n            help: 'Total count of peers that we publish a msg to',\n            labelNames: ['topic']\n        }),\n        /** Total count of peers (by group) that we publish a msg to */\n        directPeersPublishedTotal: register.gauge({\n            name: 'gossipsub_direct_peers_published_total',\n            help: 'Total direct peers that we publish a msg to',\n            labelNames: ['topic']\n        }),\n        floodsubPeersPublishedTotal: register.gauge({\n            name: 'gossipsub_floodsub_peers_published_total',\n            help: 'Total floodsub peers that we publish a msg to',\n            labelNames: ['topic']\n        }),\n        meshPeersPublishedTotal: register.gauge({\n            name: 'gossipsub_mesh_peers_published_total',\n            help: 'Total mesh peers that we publish a msg to',\n            labelNames: ['topic']\n        }),\n        fanoutPeersPublishedTotal: register.gauge({\n            name: 'gossipsub_fanout_peers_published_total',\n            help: 'Total fanout peers that we publish a msg to',\n            labelNames: ['topic']\n        }),\n        /** Total count of msg publish data.length bytes */\n        msgPublishBytes: register.gauge({\n            name: 'gossipsub_msg_publish_bytes_total',\n            help: 'Total count of msg publish data.length bytes',\n            labelNames: ['topic']\n        }),\n        /** Total time in seconds to publish a message */\n        msgPublishTime: register.histogram({\n            name: 'gossipsub_msg_publish_seconds',\n            help: 'Total time in seconds to publish a message',\n            buckets: [0.001, 0.002, 0.005, 0.01, 0.1, 0.5, 1],\n            labelNames: ['topic']\n        }),\n        /** Total count of msg forwarded by topic */\n        msgForwardCount: register.gauge({\n            name: 'gossipsub_msg_forward_count_total',\n            help: 'Total count of msg forwarded by topic',\n            labelNames: ['topic']\n        }),\n        /** Total count of peers that we forward a msg to */\n        msgForwardPeers: register.gauge({\n            name: 'gossipsub_msg_forward_peers_total',\n            help: 'Total count of peers that we forward a msg to',\n            labelNames: ['topic']\n        }),\n        /** Total count of recv msgs before any validation */\n        msgReceivedPreValidation: register.gauge({\n            name: 'gossipsub_msg_received_prevalidation_total',\n            help: 'Total count of recv msgs before any validation',\n            labelNames: ['topic']\n        }),\n        /** Total count of recv msgs error */\n        msgReceivedError: register.gauge({\n            name: 'gossipsub_msg_received_error_total',\n            help: 'Total count of recv msgs error',\n            labelNames: ['topic']\n        }),\n        /** Tracks distribution of recv msgs by duplicate, invalid, valid */\n        prevalidationInvalidTotal: register.gauge({\n            name: 'gossipsub_pre_validation_invalid_total',\n            help: 'Total count of invalid messages received',\n            labelNames: ['topic']\n        }),\n        prevalidationValidTotal: register.gauge({\n            name: 'gossipsub_pre_validation_valid_total',\n            help: 'Total count of valid messages received',\n            labelNames: ['topic']\n        }),\n        prevalidationDuplicateTotal: register.gauge({\n            name: 'gossipsub_pre_validation_duplicate_total',\n            help: 'Total count of duplicate messages received',\n            labelNames: ['topic']\n        }),\n        prevalidationUnknownTotal: register.gauge({\n            name: 'gossipsub_pre_validation_unknown_status_total',\n            help: 'Total count of unknown_status messages received',\n            labelNames: ['topic']\n        }),\n        /** Tracks specific reason of invalid */\n        msgReceivedInvalid: register.gauge({\n            name: 'gossipsub_msg_received_invalid_total',\n            help: 'Tracks specific reason of invalid',\n            labelNames: ['error']\n        }),\n        msgReceivedInvalidByTopic: register.gauge({\n            name: 'gossipsub_msg_received_invalid_by_topic_total',\n            help: 'Tracks specific invalid message by topic',\n            labelNames: ['topic']\n        }),\n        /** Track duplicate message delivery time */\n        duplicateMsgDeliveryDelay: register.histogram({\n            name: 'gossisub_duplicate_msg_delivery_delay_seconds',\n            help: 'Time since the 1st duplicated message validated',\n            labelNames: ['topic'],\n            buckets: [\n                0.25 * opts.maxMeshMessageDeliveriesWindowSec,\n                0.5 * opts.maxMeshMessageDeliveriesWindowSec,\n                1 * opts.maxMeshMessageDeliveriesWindowSec,\n                2 * opts.maxMeshMessageDeliveriesWindowSec,\n                4 * opts.maxMeshMessageDeliveriesWindowSec\n            ]\n        }),\n        /** Total count of late msg delivery total by topic */\n        duplicateMsgLateDelivery: register.gauge({\n            name: 'gossisub_duplicate_msg_late_delivery_total',\n            help: 'Total count of late duplicate message delivery by topic, which triggers P3 penalty',\n            labelNames: ['topic']\n        }),\n        duplicateMsgIgnored: register.gauge({\n            name: 'gossisub_ignored_published_duplicate_msgs_total',\n            help: 'Total count of published duplicate message ignored by topic',\n            labelNames: ['topic']\n        }),\n        /* Metrics related to scoring */\n        /** Total times score() is called */\n        scoreFnCalls: register.gauge({\n            name: 'gossipsub_score_fn_calls_total',\n            help: 'Total times score() is called'\n        }),\n        /** Total times score() call actually computed computeScore(), no cache */\n        scoreFnRuns: register.gauge({\n            name: 'gossipsub_score_fn_runs_total',\n            help: 'Total times score() call actually computed computeScore(), no cache'\n        }),\n        scoreCachedDelta: register.histogram({\n            name: 'gossipsub_score_cache_delta',\n            help: 'Delta of score between cached values that expired',\n            buckets: [10, 100, 1000]\n        }),\n        /** Current count of peers by score threshold */\n        peersByScoreThreshold: register.gauge({\n            name: 'gossipsub_peers_by_score_threshold_count',\n            help: 'Current count of peers by score threshold',\n            labelNames: ['threshold']\n        }),\n        score: register.avgMinMax({\n            name: 'gossipsub_score',\n            help: 'Avg min max of gossip scores'\n        }),\n        /**\n         * Separate score weights\n         * Need to use 2-label metrics in this case to debug the score weights\n         **/\n        scoreWeights: register.avgMinMax({\n            name: 'gossipsub_score_weights',\n            help: 'Separate score weights',\n            labelNames: ['topic', 'p']\n        }),\n        /** Histogram of the scores for each mesh topic. */\n        // TODO: Not implemented\n        scorePerMesh: register.avgMinMax({\n            name: 'gossipsub_score_per_mesh',\n            help: 'Histogram of the scores for each mesh topic',\n            labelNames: ['topic']\n        }),\n        /** A counter of the kind of penalties being applied to peers. */\n        // TODO: Not fully implemented\n        scoringPenalties: register.gauge({\n            name: 'gossipsub_scoring_penalties_total',\n            help: 'A counter of the kind of penalties being applied to peers',\n            labelNames: ['penalty']\n        }),\n        behaviourPenalty: register.histogram({\n            name: 'gossipsub_peer_stat_behaviour_penalty',\n            help: 'Current peer stat behaviour_penalty at each scrape',\n            buckets: [\n                0.25 * opts.behaviourPenaltyThreshold,\n                0.5 * opts.behaviourPenaltyThreshold,\n                1 * opts.behaviourPenaltyThreshold,\n                2 * opts.behaviourPenaltyThreshold,\n                4 * opts.behaviourPenaltyThreshold\n            ]\n        }),\n        // TODO:\n        // - iasked per peer (on heartbeat)\n        // - when promise is resolved, track messages from promises\n        /** Total received IHAVE messages that we ignore for some reason */\n        ihaveRcvIgnored: register.gauge({\n            name: 'gossipsub_ihave_rcv_ignored_total',\n            help: 'Total received IHAVE messages that we ignore for some reason',\n            labelNames: ['reason']\n        }),\n        /** Total received IHAVE messages by topic */\n        ihaveRcvMsgids: register.gauge({\n            name: 'gossipsub_ihave_rcv_msgids_total',\n            help: 'Total received IHAVE messages by topic',\n            labelNames: ['topic']\n        }),\n        /** Total messages per topic we don't have. Not actual requests.\n         *  The number of times we have decided that an IWANT control message is required for this\n         *  topic. A very high metric might indicate an underperforming network.\n         *  = rust-libp2p `topic_iwant_msgs` */\n        ihaveRcvNotSeenMsgids: register.gauge({\n            name: 'gossipsub_ihave_rcv_not_seen_msgids_total',\n            help: 'Total messages per topic we do not have, not actual requests',\n            labelNames: ['topic']\n        }),\n        /** Total received IWANT messages by topic */\n        iwantRcvMsgids: register.gauge({\n            name: 'gossipsub_iwant_rcv_msgids_total',\n            help: 'Total received IWANT messages by topic',\n            labelNames: ['topic']\n        }),\n        /** Total requested messageIDs that we don't have */\n        iwantRcvDonthaveMsgids: register.gauge({\n            name: 'gossipsub_iwant_rcv_dont_have_msgids_total',\n            help: 'Total requested messageIDs that we do not have'\n        }),\n        iwantPromiseStarted: register.gauge({\n            name: 'gossipsub_iwant_promise_sent_total',\n            help: 'Total count of started IWANT promises'\n        }),\n        /** Total count of resolved IWANT promises */\n        iwantPromiseResolved: register.gauge({\n            name: 'gossipsub_iwant_promise_resolved_total',\n            help: 'Total count of resolved IWANT promises'\n        }),\n        /** Total count of resolved IWANT promises from duplicate messages */\n        iwantPromiseResolvedFromDuplicate: register.gauge({\n            name: 'gossipsub_iwant_promise_resolved_from_duplicate_total',\n            help: 'Total count of resolved IWANT promises from duplicate messages'\n        }),\n        /** Total count of peers we have asked IWANT promises that are resolved */\n        iwantPromiseResolvedPeers: register.gauge({\n            name: 'gossipsub_iwant_promise_resolved_peers',\n            help: 'Total count of peers we have asked IWANT promises that are resolved'\n        }),\n        iwantPromiseBroken: register.gauge({\n            name: 'gossipsub_iwant_promise_broken',\n            help: 'Total count of broken IWANT promises'\n        }),\n        iwantMessagePruned: register.gauge({\n            name: 'gossipsub_iwant_message_pruned',\n            help: 'Total count of pruned IWANT messages'\n        }),\n        /** Histogram of delivery time of resolved IWANT promises */\n        iwantPromiseDeliveryTime: register.histogram({\n            name: 'gossipsub_iwant_promise_delivery_seconds',\n            help: 'Histogram of delivery time of resolved IWANT promises',\n            buckets: [\n                0.5 * opts.gossipPromiseExpireSec,\n                1 * opts.gossipPromiseExpireSec,\n                2 * opts.gossipPromiseExpireSec,\n                4 * opts.gossipPromiseExpireSec\n            ]\n        }),\n        iwantPromiseUntracked: register.gauge({\n            name: 'gossip_iwant_promise_untracked',\n            help: 'Total count of untracked IWANT promise'\n        }),\n        /** Backoff time */\n        connectedPeersBackoffSec: register.histogram({\n            name: 'gossipsub_connected_peers_backoff_seconds',\n            help: 'Backoff time in seconds',\n            // Using 1 seconds as minimum as that's close to the heartbeat duration, no need for more resolution.\n            // As per spec, backoff times are 10 seconds for UnsubscribeBackoff and 60 seconds for PruneBackoff.\n            // Higher values of 60 seconds should not occur, but we add 120 seconds just in case\n            // https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md#overview-of-new-parameters\n            buckets: [1, 2, 4, 10, 20, 60, 120]\n        }),\n        /* Data structure sizes */\n        /** Unbounded cache sizes */\n        cacheSize: register.gauge({\n            name: 'gossipsub_cache_size',\n            help: 'Unbounded cache sizes',\n            labelNames: ['cache']\n        }),\n        /** Current mcache msg count */\n        mcacheSize: register.gauge({\n            name: 'gossipsub_mcache_size',\n            help: 'Current mcache msg count'\n        }),\n        mcacheNotValidatedCount: register.gauge({\n            name: 'gossipsub_mcache_not_validated_count',\n            help: 'Current mcache msg count not validated'\n        }),\n        fastMsgIdCacheCollision: register.gauge({\n            name: 'gossipsub_fastmsgid_cache_collision_total',\n            help: 'Total count of key collisions on fastmsgid cache put'\n        }),\n        newConnectionCount: register.gauge({\n            name: 'gossipsub_new_connection_total',\n            help: 'Total new connection by status',\n            labelNames: ['status']\n        }),\n        topicStrToLabel: topicStrToLabel,\n        toTopic(topicStr) {\n            return this.topicStrToLabel.get(topicStr) ?? topicStr;\n        },\n        /** We joined a topic */\n        onJoin(topicStr) {\n            this.topicSubscriptionStatus.set({ topicStr }, 1);\n            this.meshPeerCounts.set({ topicStr }, 0); // Reset count\n        },\n        /** We left a topic */\n        onLeave(topicStr) {\n            this.topicSubscriptionStatus.set({ topicStr }, 0);\n            this.meshPeerCounts.set({ topicStr }, 0); // Reset count\n        },\n        /** Register the inclusion of peers in our mesh due to some reason. */\n        onAddToMesh(topicStr, reason, count) {\n            const topic = this.toTopic(topicStr);\n            switch (reason) {\n                case InclusionReason.Fanout:\n                    this.meshPeerInclusionEventsFanout.inc({ topic }, count);\n                    break;\n                case InclusionReason.Random:\n                    this.meshPeerInclusionEventsRandom.inc({ topic }, count);\n                    break;\n                case InclusionReason.Subscribed:\n                    this.meshPeerInclusionEventsSubscribed.inc({ topic }, count);\n                    break;\n                case InclusionReason.Outbound:\n                    this.meshPeerInclusionEventsOutbound.inc({ topic }, count);\n                    break;\n                case InclusionReason.NotEnough:\n                    this.meshPeerInclusionEventsNotEnough.inc({ topic }, count);\n                    break;\n                case InclusionReason.Opportunistic:\n                    this.meshPeerInclusionEventsOpportunistic.inc({ topic }, count);\n                    break;\n                default:\n                    this.meshPeerInclusionEventsUnknown.inc({ topic }, count);\n                    break;\n            }\n        },\n        /** Register the removal of peers in our mesh due to some reason */\n        // - remove_peer_from_mesh()\n        // - heartbeat() Churn::BadScore\n        // - heartbeat() Churn::Excess\n        // - on_disconnect() Churn::Ds\n        onRemoveFromMesh(topicStr, reason, count) {\n            const topic = this.toTopic(topicStr);\n            switch (reason) {\n                case ChurnReason.Dc:\n                    this.meshPeerChurnEventsDisconnected.inc({ topic }, count);\n                    break;\n                case ChurnReason.BadScore:\n                    this.meshPeerChurnEventsBadScore.inc({ topic }, count);\n                    break;\n                case ChurnReason.Prune:\n                    this.meshPeerChurnEventsPrune.inc({ topic }, count);\n                    break;\n                case ChurnReason.Excess:\n                    this.meshPeerChurnEventsExcess.inc({ topic }, count);\n                    break;\n                default:\n                    this.meshPeerChurnEventsUnknown.inc({ topic }, count);\n                    break;\n            }\n        },\n        /**\n         * Update validation result to metrics\n         * @param messageRecord null means the message's mcache record was not known at the time of acceptance report\n         */\n        onReportValidation(messageRecord, acceptance, firstSeenTimestampMs) {\n            this.asyncValidationMcacheHit.inc({ hit: messageRecord != null ? 'hit' : 'miss' });\n            if (messageRecord != null) {\n                const topic = this.toTopic(messageRecord.message.topic);\n                switch (acceptance) {\n                    case TopicValidatorResult.Accept:\n                        this.acceptedMessagesTotal.inc({ topic });\n                        break;\n                    case TopicValidatorResult.Ignore:\n                        this.ignoredMessagesTotal.inc({ topic });\n                        break;\n                    case TopicValidatorResult.Reject:\n                        this.rejectedMessagesTotal.inc({ topic });\n                        break;\n                    default:\n                        this.unknownValidationResultsTotal.inc({ topic });\n                        break;\n                }\n            }\n            if (firstSeenTimestampMs != null) {\n                this.asyncValidationDelayFromFirstSeenSec.observe((Date.now() - firstSeenTimestampMs) / 1000);\n            }\n            else {\n                this.asyncValidationUnknownFirstSeen.inc();\n            }\n        },\n        /**\n         * - in handle_graft() Penalty::GraftBackoff\n         * - in apply_iwant_penalties() Penalty::BrokenPromise\n         * - in metric_score() P3 Penalty::MessageDeficit\n         * - in metric_score() P6 Penalty::IPColocation\n         */\n        onScorePenalty(penalty) {\n            // Can this be labeled by topic too?\n            this.scoringPenalties.inc({ penalty }, 1);\n        },\n        onIhaveRcv(topicStr, ihave, idonthave) {\n            const topic = this.toTopic(topicStr);\n            this.ihaveRcvMsgids.inc({ topic }, ihave);\n            this.ihaveRcvNotSeenMsgids.inc({ topic }, idonthave);\n        },\n        onIwantRcv(iwantByTopic, iwantDonthave) {\n            for (const [topicStr, iwant] of iwantByTopic) {\n                const topic = this.toTopic(topicStr);\n                this.iwantRcvMsgids.inc({ topic }, iwant);\n            }\n            this.iwantRcvDonthaveMsgids.inc(iwantDonthave);\n        },\n        onForwardMsg(topicStr, tosendCount) {\n            const topic = this.toTopic(topicStr);\n            this.msgForwardCount.inc({ topic }, 1);\n            this.msgForwardPeers.inc({ topic }, tosendCount);\n        },\n        onPublishMsg(topicStr, tosendGroupCount, tosendCount, dataLen, ms) {\n            const topic = this.toTopic(topicStr);\n            this.msgPublishCount.inc({ topic }, 1);\n            this.msgPublishBytes.inc({ topic }, tosendCount * dataLen);\n            this.msgPublishPeersByTopic.inc({ topic }, tosendCount);\n            this.directPeersPublishedTotal.inc({ topic }, tosendGroupCount.direct);\n            this.floodsubPeersPublishedTotal.inc({ topic }, tosendGroupCount.floodsub);\n            this.meshPeersPublishedTotal.inc({ topic }, tosendGroupCount.mesh);\n            this.fanoutPeersPublishedTotal.inc({ topic }, tosendGroupCount.fanout);\n            this.msgPublishTime.observe({ topic }, ms / 1000);\n        },\n        onMsgRecvPreValidation(topicStr) {\n            const topic = this.toTopic(topicStr);\n            this.msgReceivedPreValidation.inc({ topic }, 1);\n        },\n        onMsgRecvError(topicStr) {\n            const topic = this.toTopic(topicStr);\n            this.msgReceivedError.inc({ topic }, 1);\n        },\n        onPrevalidationResult(topicStr, status) {\n            const topic = this.toTopic(topicStr);\n            switch (status) {\n                case MessageStatus.duplicate:\n                    this.prevalidationDuplicateTotal.inc({ topic });\n                    break;\n                case MessageStatus.invalid:\n                    this.prevalidationInvalidTotal.inc({ topic });\n                    break;\n                case MessageStatus.valid:\n                    this.prevalidationValidTotal.inc({ topic });\n                    break;\n                default:\n                    this.prevalidationUnknownTotal.inc({ topic });\n                    break;\n            }\n        },\n        onMsgRecvInvalid(topicStr, reason) {\n            const topic = this.toTopic(topicStr);\n            const error = reason.reason === RejectReason.Error ? reason.error : reason.reason;\n            this.msgReceivedInvalid.inc({ error }, 1);\n            this.msgReceivedInvalidByTopic.inc({ topic }, 1);\n        },\n        onDuplicateMsgDelivery(topicStr, deliveryDelayMs, isLateDelivery) {\n            this.duplicateMsgDeliveryDelay.observe(deliveryDelayMs / 1000);\n            if (isLateDelivery) {\n                const topic = this.toTopic(topicStr);\n                this.duplicateMsgLateDelivery.inc({ topic }, 1);\n            }\n        },\n        onPublishDuplicateMsg(topicStr) {\n            const topic = this.toTopic(topicStr);\n            this.duplicateMsgIgnored.inc({ topic }, 1);\n        },\n        onPeerReadStreamError() {\n            this.peerReadStreamError.inc(1);\n        },\n        onRpcRecvError() {\n            this.rpcRecvError.inc(1);\n        },\n        onRpcDataError() {\n            this.rpcDataError.inc(1);\n        },\n        onRpcRecv(rpc, rpcBytes) {\n            this.rpcRecvBytes.inc(rpcBytes);\n            this.rpcRecvCount.inc(1);\n            if (rpc.subscriptions)\n                this.rpcRecvSubscription.inc(rpc.subscriptions.length);\n            if (rpc.messages)\n                this.rpcRecvMessage.inc(rpc.messages.length);\n            if (rpc.control) {\n                this.rpcRecvControl.inc(1);\n                if (rpc.control.ihave)\n                    this.rpcRecvIHave.inc(rpc.control.ihave.length);\n                if (rpc.control.iwant)\n                    this.rpcRecvIWant.inc(rpc.control.iwant.length);\n                if (rpc.control.graft)\n                    this.rpcRecvGraft.inc(rpc.control.graft.length);\n                if (rpc.control.prune)\n                    this.rpcRecvPrune.inc(rpc.control.prune.length);\n            }\n        },\n        onRpcSent(rpc, rpcBytes) {\n            this.rpcSentBytes.inc(rpcBytes);\n            this.rpcSentCount.inc(1);\n            if (rpc.subscriptions)\n                this.rpcSentSubscription.inc(rpc.subscriptions.length);\n            if (rpc.messages)\n                this.rpcSentMessage.inc(rpc.messages.length);\n            if (rpc.control) {\n                const ihave = rpc.control.ihave?.length ?? 0;\n                const iwant = rpc.control.iwant?.length ?? 0;\n                const graft = rpc.control.graft?.length ?? 0;\n                const prune = rpc.control.prune?.length ?? 0;\n                if (ihave > 0)\n                    this.rpcSentIHave.inc(ihave);\n                if (iwant > 0)\n                    this.rpcSentIWant.inc(iwant);\n                if (graft > 0)\n                    this.rpcSentGraft.inc(graft);\n                if (prune > 0)\n                    this.rpcSentPrune.inc(prune);\n                if (ihave > 0 || iwant > 0 || graft > 0 || prune > 0)\n                    this.rpcSentControl.inc(1);\n            }\n        },\n        registerScores(scores, scoreThresholds) {\n            let graylist = 0;\n            let publish = 0;\n            let gossip = 0;\n            let mesh = 0;\n            for (const score of scores) {\n                if (score >= scoreThresholds.graylistThreshold)\n                    graylist++;\n                if (score >= scoreThresholds.publishThreshold)\n                    publish++;\n                if (score >= scoreThresholds.gossipThreshold)\n                    gossip++;\n                if (score >= 0)\n                    mesh++;\n            }\n            this.peersByScoreThreshold.set({ threshold: ScoreThreshold.graylist }, graylist);\n            this.peersByScoreThreshold.set({ threshold: ScoreThreshold.publish }, publish);\n            this.peersByScoreThreshold.set({ threshold: ScoreThreshold.gossip }, gossip);\n            this.peersByScoreThreshold.set({ threshold: ScoreThreshold.mesh }, mesh);\n            // Register full score too\n            this.score.set(scores);\n        },\n        registerScoreWeights(sw) {\n            for (const [topic, wsTopic] of sw.byTopic) {\n                this.scoreWeights.set({ topic, p: 'p1' }, wsTopic.p1w);\n                this.scoreWeights.set({ topic, p: 'p2' }, wsTopic.p2w);\n                this.scoreWeights.set({ topic, p: 'p3' }, wsTopic.p3w);\n                this.scoreWeights.set({ topic, p: 'p3b' }, wsTopic.p3bw);\n                this.scoreWeights.set({ topic, p: 'p4' }, wsTopic.p4w);\n            }\n            this.scoreWeights.set({ p: 'p5' }, sw.p5w);\n            this.scoreWeights.set({ p: 'p6' }, sw.p6w);\n            this.scoreWeights.set({ p: 'p7' }, sw.p7w);\n        },\n        registerScorePerMesh(mesh, scoreByPeer) {\n            const peersPerTopicLabel = new Map();\n            mesh.forEach((peers, topicStr) => {\n                // Aggregate by known topicLabel or throw to 'unknown'. This prevent too high cardinality\n                const topicLabel = this.topicStrToLabel.get(topicStr) ?? 'unknown';\n                let peersInMesh = peersPerTopicLabel.get(topicLabel);\n                if (!peersInMesh) {\n                    peersInMesh = new Set();\n                    peersPerTopicLabel.set(topicLabel, peersInMesh);\n                }\n                peers.forEach((p) => peersInMesh?.add(p));\n            });\n            for (const [topic, peers] of peersPerTopicLabel) {\n                const meshScores = [];\n                peers.forEach((peer) => {\n                    meshScores.push(scoreByPeer.get(peer) ?? 0);\n                });\n                this.scorePerMesh.set({ topic }, meshScores);\n            }\n        }\n    };\n}\n//# sourceMappingURL=metrics.js.map","import { concat as uint8ArrayConcat } from 'uint8arrays/concat';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport { marshalPublicKey, unmarshalPublicKey } from '@libp2p/crypto/keys';\nimport { randomBytes } from '@libp2p/crypto';\nimport { peerIdFromBytes } from '@libp2p/peer-id';\nimport { equals as uint8ArrayEquals } from 'uint8arrays/equals';\nimport { RPC } from '../message/rpc.js';\nimport { PublishConfigType, ValidateError } from '../types.js';\nimport { StrictSign, StrictNoSign } from '@libp2p/interface/pubsub';\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string';\nexport const SignPrefix = uint8ArrayFromString('libp2p-pubsub:');\nexport async function buildRawMessage(publishConfig, topic, originalData, transformedData) {\n    switch (publishConfig.type) {\n        case PublishConfigType.Signing: {\n            const rpcMsg = {\n                from: publishConfig.author.toBytes(),\n                data: transformedData,\n                seqno: randomBytes(8),\n                topic,\n                signature: undefined,\n                key: undefined // Exclude key field for signing\n            };\n            // Get the message in bytes, and prepend with the pubsub prefix\n            // the signature is over the bytes \"libp2p-pubsub:<protobuf-message>\"\n            const bytes = uint8ArrayConcat([SignPrefix, RPC.Message.encode(rpcMsg).finish()]);\n            rpcMsg.signature = await publishConfig.privateKey.sign(bytes);\n            rpcMsg.key = publishConfig.key;\n            const msg = {\n                type: 'signed',\n                from: publishConfig.author,\n                data: originalData,\n                sequenceNumber: BigInt(`0x${uint8ArrayToString(rpcMsg.seqno, 'base16')}`),\n                topic,\n                signature: rpcMsg.signature,\n                key: rpcMsg.key\n            };\n            return {\n                raw: rpcMsg,\n                msg: msg\n            };\n        }\n        case PublishConfigType.Anonymous: {\n            return {\n                raw: {\n                    from: undefined,\n                    data: transformedData,\n                    seqno: undefined,\n                    topic,\n                    signature: undefined,\n                    key: undefined\n                },\n                msg: {\n                    type: 'unsigned',\n                    data: originalData,\n                    topic\n                }\n            };\n        }\n    }\n}\nexport async function validateToRawMessage(signaturePolicy, msg) {\n    // If strict-sign, verify all\n    // If anonymous (no-sign), ensure no preven\n    switch (signaturePolicy) {\n        case StrictNoSign:\n            if (msg.signature != null)\n                return { valid: false, error: ValidateError.SignaturePresent };\n            if (msg.seqno != null)\n                return { valid: false, error: ValidateError.SeqnoPresent };\n            if (msg.key != null)\n                return { valid: false, error: ValidateError.FromPresent };\n            return { valid: true, message: { type: 'unsigned', topic: msg.topic, data: msg.data ?? new Uint8Array(0) } };\n        case StrictSign: {\n            // Verify seqno\n            if (msg.seqno == null)\n                return { valid: false, error: ValidateError.InvalidSeqno };\n            if (msg.seqno.length !== 8) {\n                return { valid: false, error: ValidateError.InvalidSeqno };\n            }\n            if (msg.signature == null)\n                return { valid: false, error: ValidateError.InvalidSignature };\n            if (msg.from == null)\n                return { valid: false, error: ValidateError.InvalidPeerId };\n            let fromPeerId;\n            try {\n                // TODO: Fix PeerId types\n                fromPeerId = peerIdFromBytes(msg.from);\n            }\n            catch (e) {\n                return { valid: false, error: ValidateError.InvalidPeerId };\n            }\n            // - check from defined\n            // - transform source to PeerId\n            // - parse signature\n            // - get .key, else from source\n            // - check key == source if present\n            // - verify sig\n            let publicKey;\n            if (msg.key) {\n                publicKey = unmarshalPublicKey(msg.key);\n                // TODO: Should `fromPeerId.pubKey` be optional?\n                if (fromPeerId.publicKey !== undefined && !uint8ArrayEquals(publicKey.bytes, fromPeerId.publicKey)) {\n                    return { valid: false, error: ValidateError.InvalidPeerId };\n                }\n            }\n            else {\n                if (fromPeerId.publicKey == null) {\n                    return { valid: false, error: ValidateError.InvalidPeerId };\n                }\n                publicKey = unmarshalPublicKey(fromPeerId.publicKey);\n            }\n            const rpcMsgPreSign = {\n                from: msg.from,\n                data: msg.data,\n                seqno: msg.seqno,\n                topic: msg.topic,\n                signature: undefined,\n                key: undefined // Exclude key field for signing\n            };\n            // Get the message in bytes, and prepend with the pubsub prefix\n            // the signature is over the bytes \"libp2p-pubsub:<protobuf-message>\"\n            const bytes = uint8ArrayConcat([SignPrefix, RPC.Message.encode(rpcMsgPreSign).finish()]);\n            if (!(await publicKey.verify(bytes, msg.signature))) {\n                return { valid: false, error: ValidateError.InvalidSignature };\n            }\n            return {\n                valid: true,\n                message: {\n                    type: 'signed',\n                    from: fromPeerId,\n                    data: msg.data ?? new Uint8Array(0),\n                    sequenceNumber: BigInt(`0x${uint8ArrayToString(msg.seqno, 'base16')}`),\n                    topic: msg.topic,\n                    signature: msg.signature,\n                    key: msg.key ?? marshalPublicKey(publicKey)\n                }\n            };\n        }\n    }\n}\n//# sourceMappingURL=buildRawMessage.js.map","import { sha256 } from 'multiformats/hashes/sha2';\nimport { msgId } from '@libp2p/pubsub/utils';\n/**\n * Generate a message id, based on the `key` and `seqno`\n */\nexport function msgIdFnStrictSign(msg) {\n    if (msg.type !== 'signed') {\n        throw new Error('expected signed message type');\n    }\n    // Should never happen\n    if (msg.sequenceNumber == null)\n        throw Error('missing seqno field');\n    // TODO: Should use .from here or key?\n    return msgId(msg.from.toBytes(), msg.sequenceNumber);\n}\n/**\n * Generate a message id, based on message `data`\n */\nexport async function msgIdFnStrictNoSign(msg) {\n    return await sha256.encode(msg.data);\n}\n//# sourceMappingURL=msgIdFn.js.map","import { randomBytes } from '@libp2p/crypto';\nimport { CodeError } from '@libp2p/interface/errors';\nimport { peerIdFromBytes, peerIdFromKeys } from '@libp2p/peer-id';\nimport { sha256 } from 'multiformats/hashes/sha2';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string';\nimport { codes } from './errors.js';\n/**\n * Generate a random sequence number\n */\nexport function randomSeqno() {\n    return BigInt(`0x${uint8ArrayToString(randomBytes(8), 'base16')}`);\n}\n/**\n * Generate a message id, based on the `key` and `seqno`\n */\nexport const msgId = (key, seqno) => {\n    const seqnoBytes = uint8ArrayFromString(seqno.toString(16).padStart(16, '0'), 'base16');\n    const msgId = new Uint8Array(key.length + seqnoBytes.length);\n    msgId.set(key, 0);\n    msgId.set(seqnoBytes, key.length);\n    return msgId;\n};\n/**\n * Generate a message id, based on message `data`\n */\nexport const noSignMsgId = (data) => {\n    return sha256.encode(data);\n};\n/**\n * Check if any member of the first set is also a member\n * of the second set\n */\nexport const anyMatch = (a, b) => {\n    let bHas;\n    if (Array.isArray(b)) {\n        bHas = (val) => b.includes(val);\n    }\n    else {\n        bHas = (val) => b.has(val);\n    }\n    for (const val of a) {\n        if (bHas(val)) {\n            return true;\n        }\n    }\n    return false;\n};\n/**\n * Make everything an array\n */\nexport const ensureArray = function (maybeArray) {\n    if (!Array.isArray(maybeArray)) {\n        return [maybeArray];\n    }\n    return maybeArray;\n};\nconst isSigned = async (message) => {\n    if ((message.sequenceNumber == null) || (message.from == null) || (message.signature == null)) {\n        return false;\n    }\n    // if a public key is present in the `from` field, the message should be signed\n    const fromID = peerIdFromBytes(message.from);\n    if (fromID.publicKey != null) {\n        return true;\n    }\n    if (message.key != null) {\n        const signingID = await peerIdFromKeys(message.key);\n        return signingID.equals(fromID);\n    }\n    return false;\n};\nexport const toMessage = async (message) => {\n    if (message.from == null) {\n        throw new CodeError('RPC message was missing from', codes.ERR_MISSING_FROM);\n    }\n    if (!await isSigned(message)) {\n        return {\n            type: 'unsigned',\n            topic: message.topic ?? '',\n            data: message.data ?? new Uint8Array(0)\n        };\n    }\n    const from = peerIdFromBytes(message.from);\n    const msg = {\n        type: 'signed',\n        from: peerIdFromBytes(message.from),\n        topic: message.topic ?? '',\n        sequenceNumber: bigIntFromBytes(message.sequenceNumber ?? new Uint8Array(0)),\n        data: message.data ?? new Uint8Array(0),\n        signature: message.signature ?? new Uint8Array(0),\n        key: message.key ?? from.publicKey ?? new Uint8Array(0)\n    };\n    if (msg.key.length === 0) {\n        throw new CodeError('Signed RPC message was missing key', codes.ERR_MISSING_KEY);\n    }\n    return msg;\n};\nexport const toRpcMessage = (message) => {\n    if (message.type === 'signed') {\n        return {\n            from: message.from.multihash.bytes,\n            data: message.data,\n            sequenceNumber: bigIntToBytes(message.sequenceNumber),\n            topic: message.topic,\n            signature: message.signature,\n            key: message.key\n        };\n    }\n    return {\n        data: message.data,\n        topic: message.topic\n    };\n};\nexport const bigIntToBytes = (num) => {\n    let str = num.toString(16);\n    if (str.length % 2 !== 0) {\n        str = `0${str}`;\n    }\n    return uint8ArrayFromString(str, 'base16');\n};\nexport const bigIntFromBytes = (num) => {\n    return BigInt(`0x${uint8ArrayToString(num, 'base16')}`);\n};\n//# sourceMappingURL=utils.js.map","/**\n * @packageDocumentation\n *\n * An iterable that you can push values into.\n *\n * @example\n *\n * ```js\n * import { pushable } from 'it-pushable'\n *\n * const source = pushable()\n *\n * setTimeout(() => source.push('hello'), 100)\n * setTimeout(() => source.push('world'), 200)\n * setTimeout(() => source.end(), 300)\n *\n * const start = Date.now()\n *\n * for await (const value of source) {\n *   console.log(`got \"${value}\" after ${Date.now() - start}ms`)\n * }\n * console.log(`done after ${Date.now() - start}ms`)\n *\n * // Output:\n * // got \"hello\" after 105ms\n * // got \"world\" after 207ms\n * // done after 309ms\n * ```\n *\n * @example\n *\n * ```js\n * import { pushableV } from 'it-pushable'\n * import all from 'it-all'\n *\n * const source = pushableV()\n *\n * source.push(1)\n * source.push(2)\n * source.push(3)\n * source.end()\n *\n * console.info(await all(source))\n *\n * // Output:\n * // [ [1, 2, 3] ]\n * ```\n */\nimport deferred from 'p-defer';\nimport { FIFO } from './fifo.js';\nexport class AbortError extends Error {\n    type;\n    code;\n    constructor(message, code) {\n        super(message ?? 'The operation was aborted');\n        this.type = 'aborted';\n        this.code = code ?? 'ABORT_ERR';\n    }\n}\nexport function pushable(options = {}) {\n    const getNext = (buffer) => {\n        const next = buffer.shift();\n        if (next == null) {\n            return { done: true };\n        }\n        if (next.error != null) {\n            throw next.error;\n        }\n        return {\n            done: next.done === true,\n            // @ts-expect-error if done is false, value will be present\n            value: next.value\n        };\n    };\n    return _pushable(getNext, options);\n}\nexport function pushableV(options = {}) {\n    const getNext = (buffer) => {\n        let next;\n        const values = [];\n        while (!buffer.isEmpty()) {\n            next = buffer.shift();\n            if (next == null) {\n                break;\n            }\n            if (next.error != null) {\n                throw next.error;\n            }\n            if (next.done === false) {\n                // @ts-expect-error if done is false value should be pushed\n                values.push(next.value);\n            }\n        }\n        if (next == null) {\n            return { done: true };\n        }\n        return {\n            done: next.done === true,\n            value: values\n        };\n    };\n    return _pushable(getNext, options);\n}\nfunction _pushable(getNext, options) {\n    options = options ?? {};\n    let onEnd = options.onEnd;\n    let buffer = new FIFO();\n    let pushable;\n    let onNext;\n    let ended;\n    let drain = deferred();\n    const waitNext = async () => {\n        try {\n            if (!buffer.isEmpty()) {\n                return getNext(buffer);\n            }\n            if (ended) {\n                return { done: true };\n            }\n            return await new Promise((resolve, reject) => {\n                onNext = (next) => {\n                    onNext = null;\n                    buffer.push(next);\n                    try {\n                        resolve(getNext(buffer));\n                    }\n                    catch (err) {\n                        reject(err);\n                    }\n                    return pushable;\n                };\n            });\n        }\n        finally {\n            if (buffer.isEmpty()) {\n                // settle promise in the microtask queue to give consumers a chance to\n                // await after calling .push\n                queueMicrotask(() => {\n                    drain.resolve();\n                    drain = deferred();\n                });\n            }\n        }\n    };\n    const bufferNext = (next) => {\n        if (onNext != null) {\n            return onNext(next);\n        }\n        buffer.push(next);\n        return pushable;\n    };\n    const bufferError = (err) => {\n        buffer = new FIFO();\n        if (onNext != null) {\n            return onNext({ error: err });\n        }\n        buffer.push({ error: err });\n        return pushable;\n    };\n    const push = (value) => {\n        if (ended) {\n            return pushable;\n        }\n        // @ts-expect-error `byteLength` is not declared on PushType\n        if (options?.objectMode !== true && value?.byteLength == null) {\n            throw new Error('objectMode was not true but tried to push non-Uint8Array value');\n        }\n        return bufferNext({ done: false, value });\n    };\n    const end = (err) => {\n        if (ended)\n            return pushable;\n        ended = true;\n        return (err != null) ? bufferError(err) : bufferNext({ done: true });\n    };\n    const _return = () => {\n        buffer = new FIFO();\n        end();\n        return { done: true };\n    };\n    const _throw = (err) => {\n        end(err);\n        return { done: true };\n    };\n    pushable = {\n        [Symbol.asyncIterator]() { return this; },\n        next: waitNext,\n        return: _return,\n        throw: _throw,\n        push,\n        end,\n        get readableLength() {\n            return buffer.size;\n        },\n        onEmpty: async (options) => {\n            const signal = options?.signal;\n            signal?.throwIfAborted();\n            if (buffer.isEmpty()) {\n                return;\n            }\n            let cancel;\n            let listener;\n            if (signal != null) {\n                cancel = new Promise((resolve, reject) => {\n                    listener = () => {\n                        reject(new AbortError());\n                    };\n                    signal.addEventListener('abort', listener);\n                });\n            }\n            try {\n                await Promise.race([\n                    drain.promise,\n                    cancel\n                ]);\n            }\n            finally {\n                if (listener != null && signal != null) {\n                    signal?.removeEventListener('abort', listener);\n                }\n            }\n        }\n    };\n    if (onEnd == null) {\n        return pushable;\n    }\n    const _pushable = pushable;\n    pushable = {\n        [Symbol.asyncIterator]() { return this; },\n        next() {\n            return _pushable.next();\n        },\n        throw(err) {\n            _pushable.throw(err);\n            if (onEnd != null) {\n                onEnd(err);\n                onEnd = undefined;\n            }\n            return { done: true };\n        },\n        return() {\n            _pushable.return();\n            if (onEnd != null) {\n                onEnd();\n                onEnd = undefined;\n            }\n            return { done: true };\n        },\n        push,\n        end(err) {\n            _pushable.end(err);\n            if (onEnd != null) {\n                onEnd(err);\n                onEnd = undefined;\n            }\n            return pushable;\n        },\n        get readableLength() {\n            return _pushable.readableLength;\n        }\n    };\n    return pushable;\n}\n//# sourceMappingURL=index.js.map","export class AbortError extends Error {\n    constructor(message, code) {\n        super(message ?? 'The operation was aborted');\n        this.type = 'aborted';\n        this.code = code ?? 'ABORT_ERR';\n    }\n}\n//# sourceMappingURL=abort-error.js.map","/**\n * @packageDocumentation\n *\n * @example\n *\n * ```js\n * import { abortableSource } from 'abortable-iterator'\n *\n * async function main () {\n *   // An example function that creates an async iterator that yields an increasing\n *   // number every x milliseconds and NEVER ENDS!\n *   const asyncCounter = async function * (start, delay) {\n *     let i = start\n *     while (true) {\n *       yield new Promise(resolve => setTimeout(() => resolve(i++), delay))\n *     }\n *   }\n *\n *   // Create a counter that'll yield numbers from 0 upwards every second\n *   const everySecond = asyncCounter(0, 1000)\n *\n *   // Make everySecond abortable!\n *   const controller = new AbortController()\n *   const abortableEverySecond = abortableSource(everySecond, controller.signal)\n *\n *   // Abort after 5 seconds\n *   setTimeout(() => controller.abort(), 5000)\n *\n *   try {\n *     // Start the iteration, which will throw after 5 seconds when it is aborted\n *     for await (const n of abortableEverySecond) {\n *       console.log(n)\n *     }\n *   } catch (err) {\n *     if (err.code === 'ERR_ABORTED') {\n *       // Expected - all ok :D\n *     } else {\n *       throw err\n *     }\n *   }\n * }\n *\n * main()\n * ```\n */\nimport { AbortError } from './abort-error.js';\nimport { getIterator } from 'get-iterator';\n/**\n * Wrap an iterator to make it abortable, allow cleanup when aborted via onAbort\n */\nexport function abortableSource(source, signal, options) {\n    const opts = options ?? {};\n    const iterator = getIterator(source);\n    async function* abortable() {\n        let nextAbortHandler;\n        const abortHandler = () => {\n            if (nextAbortHandler != null)\n                nextAbortHandler();\n        };\n        signal.addEventListener('abort', abortHandler);\n        while (true) {\n            let result;\n            try {\n                if (signal.aborted) {\n                    const { abortMessage, abortCode } = opts;\n                    throw new AbortError(abortMessage, abortCode);\n                }\n                const abort = new Promise((resolve, reject) => {\n                    nextAbortHandler = () => {\n                        const { abortMessage, abortCode } = opts;\n                        reject(new AbortError(abortMessage, abortCode));\n                    };\n                });\n                // Race the iterator and the abort signals\n                result = await Promise.race([abort, iterator.next()]);\n                nextAbortHandler = null;\n            }\n            catch (err) {\n                signal.removeEventListener('abort', abortHandler);\n                // Might not have been aborted by a known signal\n                const isKnownAborter = err.type === 'aborted' && signal.aborted;\n                if (isKnownAborter && (opts.onAbort != null)) {\n                    // Do any custom abort handling for the iterator\n                    opts.onAbort(source);\n                }\n                // End the iterator if it is a generator\n                if (typeof iterator.return === 'function') {\n                    try {\n                        const p = iterator.return();\n                        if (p instanceof Promise) { // eslint-disable-line max-depth\n                            p.catch(err => {\n                                if (opts.onReturnError != null) {\n                                    opts.onReturnError(err);\n                                }\n                            });\n                        }\n                    }\n                    catch (err) {\n                        if (opts.onReturnError != null) { // eslint-disable-line max-depth\n                            opts.onReturnError(err);\n                        }\n                    }\n                }\n                if (isKnownAborter && opts.returnOnAbort === true) {\n                    return;\n                }\n                throw err;\n            }\n            if (result.done === true) {\n                break;\n            }\n            yield result.value;\n        }\n        signal.removeEventListener('abort', abortHandler);\n    }\n    return abortable();\n}\nexport function abortableSink(sink, signal, options) {\n    return (source) => sink(abortableSource(source, signal, options));\n}\nexport function abortableDuplex(duplex, signal, options) {\n    return {\n        sink: abortableSink(duplex.sink, signal, {\n            ...options,\n            onAbort: undefined\n        }),\n        source: abortableSource(duplex.source, signal, options)\n    };\n}\nexport { AbortError };\nexport { abortableSink as abortableTransform };\n//# sourceMappingURL=index.js.map","import { abortableSource } from 'abortable-iterator';\nimport { pipe } from 'it-pipe';\nimport { pushable } from 'it-pushable';\nimport { encode, decode } from 'it-length-prefixed';\nexport class OutboundStream {\n    rawStream;\n    pushable;\n    closeController;\n    maxBufferSize;\n    constructor(rawStream, errCallback, opts) {\n        this.rawStream = rawStream;\n        this.pushable = pushable({ objectMode: false });\n        this.closeController = new AbortController();\n        this.maxBufferSize = opts.maxBufferSize ?? Infinity;\n        pipe(abortableSource(this.pushable, this.closeController.signal, { returnOnAbort: true }), (source) => encode(source), this.rawStream).catch(errCallback);\n    }\n    get protocol() {\n        // TODO remove this non-nullish assertion after https://github.com/libp2p/js-libp2p-interfaces/pull/265 is incorporated\n        return this.rawStream.protocol;\n    }\n    push(data) {\n        if (this.pushable.readableLength > this.maxBufferSize) {\n            throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);\n        }\n        this.pushable.push(data);\n    }\n    close() {\n        this.closeController.abort();\n        // similar to pushable.end() but clear the internal buffer\n        this.pushable.return();\n        this.rawStream.close();\n    }\n}\nexport class InboundStream {\n    source;\n    rawStream;\n    closeController;\n    constructor(rawStream, opts = {}) {\n        this.rawStream = rawStream;\n        this.closeController = new AbortController();\n        this.source = abortableSource(pipe(this.rawStream, (source) => decode(source, opts)), this.closeController.signal, {\n            returnOnAbort: true\n        });\n    }\n    close() {\n        this.closeController.abort();\n        this.rawStream.close();\n    }\n}\n//# sourceMappingURL=stream.js.map","import protobuf from 'protobufjs/minimal.js';\nexport const defaultDecodeRpcLimits = {\n    maxSubscriptions: Infinity,\n    maxMessages: Infinity,\n    maxIhaveMessageIDs: Infinity,\n    maxIwantMessageIDs: Infinity,\n    maxControlMessages: Infinity,\n    maxPeerInfos: Infinity\n};\n/**\n * Copied code from src/message/rpc.cjs but with decode limits to prevent OOM attacks\n */\nexport function decodeRpc(bytes, opts) {\n    // Mutate to use the option as stateful counter. Must limit the total count of messageIDs across all IWANT, IHAVE\n    // else one count put 100 messageIDs into each 100 IWANT and \"get around\" the limit\n    opts = { ...opts };\n    const r = protobuf.Reader.create(bytes);\n    const l = bytes.length;\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                if (!(m.subscriptions && m.subscriptions.length))\n                    m.subscriptions = [];\n                if (m.subscriptions.length < opts.maxSubscriptions)\n                    m.subscriptions.push(decodeSubOpts(r, r.uint32()));\n                else\n                    r.skipType(t & 7);\n                break;\n            case 2:\n                if (!(m.messages && m.messages.length))\n                    m.messages = [];\n                if (m.messages.length < opts.maxMessages)\n                    m.messages.push(decodeMessage(r, r.uint32()));\n                else\n                    r.skipType(t & 7);\n                break;\n            case 3:\n                m.control = decodeControlMessage(r, r.uint32(), opts);\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodeSubOpts(r, l) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                m.subscribe = r.bool();\n                break;\n            case 2:\n                m.topic = r.string();\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodeMessage(r, l) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                m.from = r.bytes();\n                break;\n            case 2:\n                m.data = r.bytes();\n                break;\n            case 3:\n                m.seqno = r.bytes();\n                break;\n            case 4:\n                m.topic = r.string();\n                break;\n            case 5:\n                m.signature = r.bytes();\n                break;\n            case 6:\n                m.key = r.bytes();\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    if (!m.topic)\n        throw Error(\"missing required 'topic'\");\n    return m;\n}\nfunction decodeControlMessage(r, l, opts) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                if (!(m.ihave && m.ihave.length))\n                    m.ihave = [];\n                if (m.ihave.length < opts.maxControlMessages)\n                    m.ihave.push(decodeControlIHave(r, r.uint32(), opts));\n                else\n                    r.skipType(t & 7);\n                break;\n            case 2:\n                if (!(m.iwant && m.iwant.length))\n                    m.iwant = [];\n                if (m.iwant.length < opts.maxControlMessages)\n                    m.iwant.push(decodeControlIWant(r, r.uint32(), opts));\n                else\n                    r.skipType(t & 7);\n                break;\n            case 3:\n                if (!(m.graft && m.graft.length))\n                    m.graft = [];\n                if (m.graft.length < opts.maxControlMessages)\n                    m.graft.push(decodeControlGraft(r, r.uint32()));\n                else\n                    r.skipType(t & 7);\n                break;\n            case 4:\n                if (!(m.prune && m.prune.length))\n                    m.prune = [];\n                if (m.prune.length < opts.maxControlMessages)\n                    m.prune.push(decodeControlPrune(r, r.uint32(), opts));\n                else\n                    r.skipType(t & 7);\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodeControlIHave(r, l, opts) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                m.topicID = r.string();\n                break;\n            case 2:\n                if (!(m.messageIDs && m.messageIDs.length))\n                    m.messageIDs = [];\n                if (opts.maxIhaveMessageIDs-- > 0)\n                    m.messageIDs.push(r.bytes());\n                else\n                    r.skipType(t & 7);\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodeControlIWant(r, l, opts) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                if (!(m.messageIDs && m.messageIDs.length))\n                    m.messageIDs = [];\n                if (opts.maxIwantMessageIDs-- > 0)\n                    m.messageIDs.push(r.bytes());\n                else\n                    r.skipType(t & 7);\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodeControlGraft(r, l) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                m.topicID = r.string();\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodeControlPrune(r, l, opts) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                m.topicID = r.string();\n                break;\n            case 2:\n                if (!(m.peers && m.peers.length))\n                    m.peers = [];\n                if (opts.maxPeerInfos-- > 0)\n                    m.peers.push(decodePeerInfo(r, r.uint32()));\n                else\n                    r.skipType(t & 7);\n                break;\n            case 3:\n                m.backoff = r.uint64();\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodePeerInfo(r, l) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                m.peerID = r.bytes();\n                break;\n            case 2:\n                m.signedPeerRecord = r.bytes();\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\n//# sourceMappingURL=decodeRpc.js.map","import bases from './util/bases.js';\n/**\n * Turns a `Uint8Array` into a string.\n *\n * Supports `utf8`, `utf-8` and any encoding supported by the multibase module.\n *\n * Also `ascii` which is similar to node's 'binary' encoding.\n */\nexport function toString(array, encoding = 'utf8') {\n    const base = bases[encoding];\n    if (base == null) {\n        throw new Error(`Unsupported encoding \"${encoding}\"`);\n    }\n    if ((encoding === 'utf8' || encoding === 'utf-8') && globalThis.Buffer != null && globalThis.Buffer.from != null) {\n        return globalThis.Buffer.from(array.buffer, array.byteOffset, array.byteLength).toString('utf8');\n    }\n    // strip multibase prefix\n    return base.encoder.encode(array).substring(1);\n}\n//# sourceMappingURL=to-string.js.map","import { isIPv4, isIPv6 } from '@chainsafe/is-ip';\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string';\nexport { isIP } from '@chainsafe/is-ip';\nexport const isV4 = isIPv4;\nexport const isV6 = isIPv6;\n// Copied from https://github.com/indutny/node-ip/blob/master/lib/ip.js#L7\n// but with buf/offset args removed because we don't use them\nexport const toBytes = function (ip) {\n    let offset = 0;\n    ip = ip.toString().trim();\n    if (isV4(ip)) {\n        const bytes = new Uint8Array(offset + 4);\n        ip.split(/\\./g).forEach((byte) => {\n            bytes[offset++] = parseInt(byte, 10) & 0xff;\n        });\n        return bytes;\n    }\n    if (isV6(ip)) {\n        const sections = ip.split(':', 8);\n        let i;\n        for (i = 0; i < sections.length; i++) {\n            const isv4 = isV4(sections[i]);\n            let v4Buffer;\n            if (isv4) {\n                v4Buffer = toBytes(sections[i]);\n                sections[i] = uint8ArrayToString(v4Buffer.slice(0, 2), 'base16');\n            }\n            if (v4Buffer != null && ++i < 8) {\n                sections.splice(i, 0, uint8ArrayToString(v4Buffer.slice(2, 4), 'base16'));\n            }\n        }\n        if (sections[0] === '') {\n            while (sections.length < 8)\n                sections.unshift('0');\n        }\n        else if (sections[sections.length - 1] === '') {\n            while (sections.length < 8)\n                sections.push('0');\n        }\n        else if (sections.length < 8) {\n            for (i = 0; i < sections.length && sections[i] !== ''; i++)\n                ;\n            const argv = [i, 1];\n            for (i = 9 - sections.length; i > 0; i--) {\n                argv.push('0');\n            }\n            sections.splice.apply(sections, argv);\n        }\n        const bytes = new Uint8Array(offset + 16);\n        for (i = 0; i < sections.length; i++) {\n            const word = parseInt(sections[i], 16);\n            bytes[offset++] = (word >> 8) & 0xff;\n            bytes[offset++] = word & 0xff;\n        }\n        return bytes;\n    }\n    throw new Error('invalid ip address');\n};\n// Copied from https://github.com/indutny/node-ip/blob/master/lib/ip.js#L63\nexport const toString = function (buf, offset = 0, length) {\n    offset = ~~offset;\n    length = length ?? (buf.length - offset);\n    const view = new DataView(buf.buffer);\n    if (length === 4) {\n        const result = [];\n        // IPv4\n        for (let i = 0; i < length; i++) {\n            result.push(buf[offset + i]);\n        }\n        return result.join('.');\n    }\n    if (length === 16) {\n        const result = [];\n        // IPv6\n        for (let i = 0; i < length; i += 2) {\n            result.push(view.getUint16(offset + i).toString(16));\n        }\n        return result.join(':')\n            .replace(/(^|:)0(:0)*:0(:|$)/, '$1::$3')\n            .replace(/:{3,4}/, '::');\n    }\n    return '';\n};\n//# sourceMappingURL=ip.js.map","/**\n * @packageDocumentation\n *\n * Provides methods for converting\n */\nimport { IpNet } from '@chainsafe/netmask';\nimport { base32 } from 'multiformats/bases/base32';\nimport { base58btc } from 'multiformats/bases/base58';\nimport { bases } from 'multiformats/basics';\nimport { CID } from 'multiformats/cid';\nimport * as Digest from 'multiformats/hashes/digest';\nimport * as varint from 'uint8-varint';\nimport { concat as uint8ArrayConcat } from 'uint8arrays/concat';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string';\nimport * as ip from './ip.js';\nimport { getProtocol } from './protocols-table.js';\nconst ip4Protocol = getProtocol('ip4');\nconst ip6Protocol = getProtocol('ip6');\nconst ipcidrProtocol = getProtocol('ipcidr');\nexport function convert(proto, a) {\n    if (a instanceof Uint8Array) {\n        return convertToString(proto, a);\n    }\n    else {\n        return convertToBytes(proto, a);\n    }\n}\n/**\n * Convert [code,Uint8Array] to string\n */\nexport function convertToString(proto, buf) {\n    const protocol = getProtocol(proto);\n    switch (protocol.code) {\n        case 4: // ipv4\n        case 41: // ipv6\n            return bytes2ip(buf);\n        case 42: // ipv6zone\n            return bytes2str(buf);\n        case 6: // tcp\n        case 273: // udp\n        case 33: // dccp\n        case 132: // sctp\n            return bytes2port(buf).toString();\n        case 53: // dns\n        case 54: // dns4\n        case 55: // dns6\n        case 56: // dnsaddr\n        case 400: // unix\n        case 449: // sni\n        case 777: // memory\n            return bytes2str(buf);\n        case 421: // ipfs\n            return bytes2mh(buf);\n        case 444: // onion\n            return bytes2onion(buf);\n        case 445: // onion3\n            return bytes2onion(buf);\n        case 466: // certhash\n            return bytes2mb(buf);\n        default:\n            return uint8ArrayToString(buf, 'base16'); // no clue. convert to hex\n    }\n}\nexport function convertToBytes(proto, str) {\n    const protocol = getProtocol(proto);\n    switch (protocol.code) {\n        case 4: // ipv4\n            return ip2bytes(str);\n        case 41: // ipv6\n            return ip2bytes(str);\n        case 42: // ipv6zone\n            return str2bytes(str);\n        case 6: // tcp\n        case 273: // udp\n        case 33: // dccp\n        case 132: // sctp\n            return port2bytes(parseInt(str, 10));\n        case 53: // dns\n        case 54: // dns4\n        case 55: // dns6\n        case 56: // dnsaddr\n        case 400: // unix\n        case 449: // sni\n        case 777: // memory\n            return str2bytes(str);\n        case 421: // ipfs\n            return mh2bytes(str);\n        case 444: // onion\n            return onion2bytes(str);\n        case 445: // onion3\n            return onion32bytes(str);\n        case 466: // certhash\n            return mb2bytes(str);\n        default:\n            return uint8ArrayFromString(str, 'base16'); // no clue. convert from hex\n    }\n}\nexport function convertToIpNet(multiaddr) {\n    let mask;\n    let addr;\n    multiaddr.stringTuples().forEach(([code, value]) => {\n        if (code === ip4Protocol.code || code === ip6Protocol.code) {\n            addr = value;\n        }\n        if (code === ipcidrProtocol.code) {\n            mask = value;\n        }\n    });\n    if (mask == null || addr == null) {\n        throw new Error('Invalid multiaddr');\n    }\n    return new IpNet(addr, mask);\n}\nconst decoders = Object.values(bases).map((c) => c.decoder);\nconst anybaseDecoder = (function () {\n    let acc = decoders[0].or(decoders[1]);\n    decoders.slice(2).forEach((d) => (acc = acc.or(d)));\n    return acc;\n})();\nfunction ip2bytes(ipString) {\n    if (!ip.isIP(ipString)) {\n        throw new Error('invalid ip address');\n    }\n    return ip.toBytes(ipString);\n}\nfunction bytes2ip(ipBuff) {\n    const ipString = ip.toString(ipBuff, 0, ipBuff.length);\n    if (ipString == null) {\n        throw new Error('ipBuff is required');\n    }\n    if (!ip.isIP(ipString)) {\n        throw new Error('invalid ip address');\n    }\n    return ipString;\n}\nfunction port2bytes(port) {\n    const buf = new ArrayBuffer(2);\n    const view = new DataView(buf);\n    view.setUint16(0, port);\n    return new Uint8Array(buf);\n}\nfunction bytes2port(buf) {\n    const view = new DataView(buf.buffer);\n    return view.getUint16(buf.byteOffset);\n}\nfunction str2bytes(str) {\n    const buf = uint8ArrayFromString(str);\n    const size = Uint8Array.from(varint.encode(buf.length));\n    return uint8ArrayConcat([size, buf], size.length + buf.length);\n}\nfunction bytes2str(buf) {\n    const size = varint.decode(buf);\n    buf = buf.slice(varint.encodingLength(size));\n    if (buf.length !== size) {\n        throw new Error('inconsistent lengths');\n    }\n    return uint8ArrayToString(buf);\n}\nfunction mh2bytes(hash) {\n    let mh;\n    if (hash[0] === 'Q' || hash[0] === '1') {\n        mh = Digest.decode(base58btc.decode(`z${hash}`)).bytes;\n    }\n    else {\n        mh = CID.parse(hash).multihash.bytes;\n    }\n    // the address is a varint prefixed multihash string representation\n    const size = Uint8Array.from(varint.encode(mh.length));\n    return uint8ArrayConcat([size, mh], size.length + mh.length);\n}\nfunction mb2bytes(mbstr) {\n    const mb = anybaseDecoder.decode(mbstr);\n    const size = Uint8Array.from(varint.encode(mb.length));\n    return uint8ArrayConcat([size, mb], size.length + mb.length);\n}\nfunction bytes2mb(buf) {\n    const size = varint.decode(buf);\n    const hash = buf.slice(varint.encodingLength(size));\n    if (hash.length !== size) {\n        throw new Error('inconsistent lengths');\n    }\n    return 'u' + uint8ArrayToString(hash, 'base64url');\n}\n/**\n * Converts bytes to bas58btc string\n */\nfunction bytes2mh(buf) {\n    const size = varint.decode(buf);\n    const address = buf.slice(varint.encodingLength(size));\n    if (address.length !== size) {\n        throw new Error('inconsistent lengths');\n    }\n    return uint8ArrayToString(address, 'base58btc');\n}\nfunction onion2bytes(str) {\n    const addr = str.split(':');\n    if (addr.length !== 2) {\n        throw new Error(`failed to parse onion addr: [\"'${addr.join('\", \"')}'\"]' does not contain a port number`);\n    }\n    if (addr[0].length !== 16) {\n        throw new Error(`failed to parse onion addr: ${addr[0]} not a Tor onion address.`);\n    }\n    // onion addresses do not include the multibase prefix, add it before decoding\n    const buf = base32.decode('b' + addr[0]);\n    // onion port number\n    const port = parseInt(addr[1], 10);\n    if (port < 1 || port > 65536) {\n        throw new Error('Port number is not in range(1, 65536)');\n    }\n    const portBuf = port2bytes(port);\n    return uint8ArrayConcat([buf, portBuf], buf.length + portBuf.length);\n}\nfunction onion32bytes(str) {\n    const addr = str.split(':');\n    if (addr.length !== 2) {\n        throw new Error(`failed to parse onion addr: [\"'${addr.join('\", \"')}'\"]' does not contain a port number`);\n    }\n    if (addr[0].length !== 56) {\n        throw new Error(`failed to parse onion addr: ${addr[0]} not a Tor onion3 address.`);\n    }\n    // onion addresses do not include the multibase prefix, add it before decoding\n    const buf = base32.decode(`b${addr[0]}`);\n    // onion port number\n    const port = parseInt(addr[1], 10);\n    if (port < 1 || port > 65536) {\n        throw new Error('Port number is not in range(1, 65536)');\n    }\n    const portBuf = port2bytes(port);\n    return uint8ArrayConcat([buf, portBuf], buf.length + portBuf.length);\n}\nfunction bytes2onion(buf) {\n    const addrBytes = buf.slice(0, buf.length - 2);\n    const portBytes = buf.slice(buf.length - 2);\n    const addr = uint8ArrayToString(addrBytes, 'base32');\n    const port = bytes2port(portBytes);\n    return `${addr}:${port}`;\n}\n//# sourceMappingURL=convert.js.map","import { convertToString } from '@multiformats/multiaddr/convert';\n// Protocols https://github.com/multiformats/multiaddr/blob/master/protocols.csv\n// code  size  name\n// 4     32    ip4\n// 41    128   ip6\nvar Protocol;\n(function (Protocol) {\n    Protocol[Protocol[\"ip4\"] = 4] = \"ip4\";\n    Protocol[Protocol[\"ip6\"] = 41] = \"ip6\";\n})(Protocol || (Protocol = {}));\nexport function multiaddrToIPStr(multiaddr) {\n    for (const tuple of multiaddr.tuples()) {\n        switch (tuple[0]) {\n            case Protocol.ip4:\n            case Protocol.ip6:\n                return convertToString(tuple[0], tuple[1]);\n        }\n    }\n    return null;\n}\n//# sourceMappingURL=multiaddr.js.map","import { pipe } from 'it-pipe';\nimport { peerIdFromBytes, peerIdFromString } from '@libp2p/peer-id';\nimport { logger } from '@libp2p/logger';\nimport { CustomEvent, EventEmitter } from '@libp2p/interface/events';\nimport { MessageCache } from './message-cache.js';\nimport { RPC } from './message/rpc.js';\nimport * as constants from './constants.js';\nimport { shuffle, messageIdToString } from './utils/index.js';\nimport { PeerScore, createPeerScoreParams, createPeerScoreThresholds } from './score/index.js';\nimport { IWantTracer } from './tracer.js';\nimport { SimpleTimeCache } from './utils/time-cache.js';\nimport { ACCEPT_FROM_WHITELIST_DURATION_MS, ACCEPT_FROM_WHITELIST_MAX_MESSAGES, ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE, BACKOFF_SLACK } from './constants.js';\nimport { ChurnReason, getMetrics, IHaveIgnoreReason, InclusionReason, ScorePenalty } from './metrics.js';\nimport { ValidateError, MessageStatus, RejectReason, rejectReasonFromAcceptance } from './types.js';\nimport { buildRawMessage, validateToRawMessage } from './utils/buildRawMessage.js';\nimport { msgIdFnStrictNoSign, msgIdFnStrictSign } from './utils/msgIdFn.js';\nimport { computeAllPeersScoreWeights } from './score/scoreMetrics.js';\nimport { getPublishConfigFromPeerId } from './utils/publishConfig.js';\nimport { StrictSign, StrictNoSign, TopicValidatorResult } from '@libp2p/interface/pubsub';\nimport { removeFirstNItemsFromSet, removeItemsFromSet } from './utils/set.js';\nimport { pushable } from 'it-pushable';\nimport { InboundStream, OutboundStream } from './stream.js';\nimport { decodeRpc, defaultDecodeRpcLimits } from './message/decodeRpc.js';\nimport { multiaddrToIPStr } from './utils/multiaddr.js';\nexport const multicodec = constants.GossipsubIDv11;\nvar GossipStatusCode;\n(function (GossipStatusCode) {\n    GossipStatusCode[GossipStatusCode[\"started\"] = 0] = \"started\";\n    GossipStatusCode[GossipStatusCode[\"stopped\"] = 1] = \"stopped\";\n})(GossipStatusCode || (GossipStatusCode = {}));\nexport class GossipSub extends EventEmitter {\n    /**\n     * The signature policy to follow by default\n     */\n    globalSignaturePolicy;\n    multicodecs = [constants.GossipsubIDv11, constants.GossipsubIDv10];\n    publishConfig;\n    dataTransform;\n    // State\n    peers = new Set();\n    streamsInbound = new Map();\n    streamsOutbound = new Map();\n    /** Ensures outbound streams are created sequentially */\n    outboundInflightQueue = pushable({ objectMode: true });\n    /** Direct peers */\n    direct = new Set();\n    /** Floodsub peers */\n    floodsubPeers = new Set();\n    /** Cache of seen messages */\n    seenCache;\n    /**\n     * Map of peer id and AcceptRequestWhileListEntry\n     */\n    acceptFromWhitelist = new Map();\n    /**\n     * Map of topics to which peers are subscribed to\n     */\n    topics = new Map();\n    /**\n     * List of our subscriptions\n     */\n    subscriptions = new Set();\n    /**\n     * Map of topic meshes\n     * topic => peer id set\n     */\n    mesh = new Map();\n    /**\n     * Map of topics to set of peers. These mesh peers are the ones to which we are publishing without a topic membership\n     * topic => peer id set\n     */\n    fanout = new Map();\n    /**\n     * Map of last publish time for fanout topics\n     * topic => last publish time\n     */\n    fanoutLastpub = new Map();\n    /**\n     * Map of pending messages to gossip\n     * peer id => control messages\n     */\n    gossip = new Map();\n    /**\n     * Map of control messages\n     * peer id => control message\n     */\n    control = new Map();\n    /**\n     * Number of IHAVEs received from peer in the last heartbeat\n     */\n    peerhave = new Map();\n    /** Number of messages we have asked from peer in the last heartbeat */\n    iasked = new Map();\n    /** Prune backoff map */\n    backoff = new Map();\n    /**\n     * Connection direction cache, marks peers with outbound connections\n     * peer id => direction\n     */\n    outbound = new Map();\n    msgIdFn;\n    /**\n     * A fast message id function used for internal message de-duplication\n     */\n    fastMsgIdFn;\n    msgIdToStrFn;\n    /** Maps fast message-id to canonical message-id */\n    fastMsgIdCache;\n    /**\n     * Short term cache for published message ids. This is used for penalizing peers sending\n     * our own messages back if the messages are anonymous or use a random author.\n     */\n    publishedMessageIds;\n    /**\n     * A message cache that contains the messages for last few heartbeat ticks\n     */\n    mcache;\n    /** Peer score tracking */\n    score;\n    /**\n     * Custom validator function per topic.\n     * Must return or resolve quickly (< 100ms) to prevent causing penalties for late messages.\n     * If you need to apply validation that may require longer times use `asyncValidation` option and callback the\n     * validation result through `Gossipsub.reportValidationResult`\n     */\n    topicValidators = new Map();\n    /**\n     * Make this protected so child class may want to redirect to its own log.\n     */\n    log;\n    /**\n     * Number of heartbeats since the beginning of time\n     * This allows us to amortize some resource cleanup -- eg: backoff cleanup\n     */\n    heartbeatTicks = 0;\n    /**\n     * Tracks IHAVE/IWANT promises broken by peers\n     */\n    gossipTracer;\n    components;\n    directPeerInitial = null;\n    static multicodec = constants.GossipsubIDv11;\n    // Options\n    opts;\n    decodeRpcLimits;\n    metrics;\n    status = { code: GossipStatusCode.stopped };\n    maxInboundStreams;\n    maxOutboundStreams;\n    allowedTopics;\n    heartbeatTimer = null;\n    constructor(components, options = {}) {\n        super();\n        const opts = {\n            fallbackToFloodsub: true,\n            floodPublish: true,\n            doPX: false,\n            directPeers: [],\n            D: constants.GossipsubD,\n            Dlo: constants.GossipsubDlo,\n            Dhi: constants.GossipsubDhi,\n            Dscore: constants.GossipsubDscore,\n            Dout: constants.GossipsubDout,\n            Dlazy: constants.GossipsubDlazy,\n            heartbeatInterval: constants.GossipsubHeartbeatInterval,\n            fanoutTTL: constants.GossipsubFanoutTTL,\n            mcacheLength: constants.GossipsubHistoryLength,\n            mcacheGossip: constants.GossipsubHistoryGossip,\n            seenTTL: constants.GossipsubSeenTTL,\n            gossipsubIWantFollowupMs: constants.GossipsubIWantFollowupTime,\n            prunePeers: constants.GossipsubPrunePeers,\n            pruneBackoff: constants.GossipsubPruneBackoff,\n            unsubcribeBackoff: constants.GossipsubUnsubscribeBackoff,\n            graftFloodThreshold: constants.GossipsubGraftFloodThreshold,\n            opportunisticGraftPeers: constants.GossipsubOpportunisticGraftPeers,\n            opportunisticGraftTicks: constants.GossipsubOpportunisticGraftTicks,\n            directConnectTicks: constants.GossipsubDirectConnectTicks,\n            ...options,\n            scoreParams: createPeerScoreParams(options.scoreParams),\n            scoreThresholds: createPeerScoreThresholds(options.scoreThresholds)\n        };\n        this.components = components;\n        this.decodeRpcLimits = opts.decodeRpcLimits ?? defaultDecodeRpcLimits;\n        this.globalSignaturePolicy = opts.globalSignaturePolicy ?? StrictSign;\n        // Also wants to get notified of peers connected using floodsub\n        if (opts.fallbackToFloodsub) {\n            this.multicodecs.push(constants.FloodsubID);\n        }\n        // From pubsub\n        this.log = logger(opts.debugName ?? 'libp2p:gossipsub');\n        // Gossipsub\n        this.opts = opts;\n        this.direct = new Set(opts.directPeers.map((p) => p.id.toString()));\n        this.seenCache = new SimpleTimeCache({ validityMs: opts.seenTTL });\n        this.publishedMessageIds = new SimpleTimeCache({ validityMs: opts.seenTTL });\n        if (options.msgIdFn) {\n            // Use custom function\n            this.msgIdFn = options.msgIdFn;\n        }\n        else {\n            switch (this.globalSignaturePolicy) {\n                case StrictSign:\n                    this.msgIdFn = msgIdFnStrictSign;\n                    break;\n                case StrictNoSign:\n                    this.msgIdFn = msgIdFnStrictNoSign;\n                    break;\n            }\n        }\n        if (options.fastMsgIdFn) {\n            this.fastMsgIdFn = options.fastMsgIdFn;\n            this.fastMsgIdCache = new SimpleTimeCache({ validityMs: opts.seenTTL });\n        }\n        // By default, gossipsub only provide a browser friendly function to convert Uint8Array message id to string.\n        this.msgIdToStrFn = options.msgIdToStrFn ?? messageIdToString;\n        this.mcache = options.messageCache || new MessageCache(opts.mcacheGossip, opts.mcacheLength, this.msgIdToStrFn);\n        if (options.dataTransform) {\n            this.dataTransform = options.dataTransform;\n        }\n        if (options.metricsRegister) {\n            if (!options.metricsTopicStrToLabel) {\n                throw Error('Must set metricsTopicStrToLabel with metrics');\n            }\n            // in theory, each topic has its own meshMessageDeliveriesWindow param\n            // however in lodestar, we configure it mostly the same so just pick the max of positive ones\n            // (some topics have meshMessageDeliveriesWindow as 0)\n            const maxMeshMessageDeliveriesWindowMs = Math.max(...Object.values(opts.scoreParams.topics).map((topicParam) => topicParam.meshMessageDeliveriesWindow), constants.DEFAULT_METRIC_MESH_MESSAGE_DELIVERIES_WINDOWS);\n            const metrics = getMetrics(options.metricsRegister, options.metricsTopicStrToLabel, {\n                gossipPromiseExpireSec: this.opts.gossipsubIWantFollowupMs / 1000,\n                behaviourPenaltyThreshold: opts.scoreParams.behaviourPenaltyThreshold,\n                maxMeshMessageDeliveriesWindowSec: maxMeshMessageDeliveriesWindowMs / 1000\n            });\n            metrics.mcacheSize.addCollect(() => this.onScrapeMetrics(metrics));\n            for (const protocol of this.multicodecs) {\n                metrics.protocolsEnabled.set({ protocol }, 1);\n            }\n            this.metrics = metrics;\n        }\n        else {\n            this.metrics = null;\n        }\n        this.gossipTracer = new IWantTracer(this.opts.gossipsubIWantFollowupMs, this.msgIdToStrFn, this.metrics);\n        /**\n         * libp2p\n         */\n        this.score = new PeerScore(this.opts.scoreParams, this.metrics, {\n            scoreCacheValidityMs: opts.heartbeatInterval\n        });\n        this.maxInboundStreams = options.maxInboundStreams;\n        this.maxOutboundStreams = options.maxOutboundStreams;\n        this.allowedTopics = opts.allowedTopics ? new Set(opts.allowedTopics) : null;\n    }\n    getPeers() {\n        return [...this.peers.keys()].map((str) => peerIdFromString(str));\n    }\n    isStarted() {\n        return this.status.code === GossipStatusCode.started;\n    }\n    // LIFECYCLE METHODS\n    /**\n     * Mounts the gossipsub protocol onto the libp2p node and sends our\n     * our subscriptions to every peer connected\n     */\n    async start() {\n        // From pubsub\n        if (this.isStarted()) {\n            return;\n        }\n        this.log('starting');\n        this.publishConfig = await getPublishConfigFromPeerId(this.globalSignaturePolicy, this.components.peerId);\n        // Create the outbound inflight queue\n        // This ensures that outbound stream creation happens sequentially\n        this.outboundInflightQueue = pushable({ objectMode: true });\n        pipe(this.outboundInflightQueue, async (source) => {\n            for await (const { peerId, connection } of source) {\n                await this.createOutboundStream(peerId, connection);\n            }\n        }).catch((e) => this.log.error('outbound inflight queue error', e));\n        // set direct peer addresses in the address book\n        await Promise.all(this.opts.directPeers.map(async (p) => {\n            await this.components.peerStore.merge(p.id, {\n                multiaddrs: p.addrs\n            });\n        }));\n        const registrar = this.components.registrar;\n        // Incoming streams\n        // Called after a peer dials us\n        await Promise.all(this.multicodecs.map((multicodec) => registrar.handle(multicodec, this.onIncomingStream.bind(this), {\n            maxInboundStreams: this.maxInboundStreams,\n            maxOutboundStreams: this.maxOutboundStreams\n        })));\n        // # How does Gossipsub interact with libp2p? Rough guide from Mar 2022\n        //\n        // ## Setup:\n        // Gossipsub requests libp2p to callback, TBD\n        //\n        // `this.libp2p.handle()` registers a handler for `/meshsub/1.1.0` and other Gossipsub protocols\n        // The handler callback is registered in libp2p Upgrader.protocols map.\n        //\n        // Upgrader receives an inbound connection from some transport and (`Upgrader.upgradeInbound`):\n        // - Adds encryption (NOISE in our case)\n        // - Multiplex stream\n        // - Create a muxer and register that for each new stream call Upgrader.protocols handler\n        //\n        // ## Topology\n        // - new instance of Topology (unlinked to libp2p) with handlers\n        // - registar.register(topology)\n        // register protocol with topology\n        // Topology callbacks called on connection manager changes\n        const topology = {\n            onConnect: this.onPeerConnected.bind(this),\n            onDisconnect: this.onPeerDisconnected.bind(this)\n        };\n        const registrarTopologyIds = await Promise.all(this.multicodecs.map((multicodec) => registrar.register(multicodec, topology)));\n        // Schedule to start heartbeat after `GossipsubHeartbeatInitialDelay`\n        const heartbeatTimeout = setTimeout(this.runHeartbeat, constants.GossipsubHeartbeatInitialDelay);\n        // Then, run heartbeat every `heartbeatInterval` offset by `GossipsubHeartbeatInitialDelay`\n        this.status = {\n            code: GossipStatusCode.started,\n            registrarTopologyIds,\n            heartbeatTimeout: heartbeatTimeout,\n            hearbeatStartMs: Date.now() + constants.GossipsubHeartbeatInitialDelay\n        };\n        this.score.start();\n        // connect to direct peers\n        this.directPeerInitial = setTimeout(() => {\n            Promise.resolve()\n                .then(async () => {\n                await Promise.all(Array.from(this.direct).map(async (id) => await this.connect(id)));\n            })\n                .catch((err) => {\n                this.log(err);\n            });\n        }, constants.GossipsubDirectConnectInitialDelay);\n        this.log('started');\n    }\n    /**\n     * Unmounts the gossipsub protocol and shuts down every connection\n     */\n    async stop() {\n        this.log('stopping');\n        // From pubsub\n        if (this.status.code !== GossipStatusCode.started) {\n            return;\n        }\n        const { registrarTopologyIds } = this.status;\n        this.status = { code: GossipStatusCode.stopped };\n        // unregister protocol and handlers\n        const registrar = this.components.registrar;\n        await Promise.all(this.multicodecs.map((multicodec) => registrar.unhandle(multicodec)));\n        registrarTopologyIds.forEach((id) => registrar.unregister(id));\n        this.outboundInflightQueue.end();\n        for (const outboundStream of this.streamsOutbound.values()) {\n            outboundStream.close();\n        }\n        this.streamsOutbound.clear();\n        for (const inboundStream of this.streamsInbound.values()) {\n            inboundStream.close();\n        }\n        this.streamsInbound.clear();\n        this.peers.clear();\n        this.subscriptions.clear();\n        // Gossipsub\n        if (this.heartbeatTimer) {\n            this.heartbeatTimer.cancel();\n            this.heartbeatTimer = null;\n        }\n        this.score.stop();\n        this.mesh.clear();\n        this.fanout.clear();\n        this.fanoutLastpub.clear();\n        this.gossip.clear();\n        this.control.clear();\n        this.peerhave.clear();\n        this.iasked.clear();\n        this.backoff.clear();\n        this.outbound.clear();\n        this.gossipTracer.clear();\n        this.seenCache.clear();\n        if (this.fastMsgIdCache)\n            this.fastMsgIdCache.clear();\n        if (this.directPeerInitial)\n            clearTimeout(this.directPeerInitial);\n        this.log('stopped');\n    }\n    /** FOR DEBUG ONLY - Dump peer stats for all peers. Data is cloned, safe to mutate */\n    dumpPeerScoreStats() {\n        return this.score.dumpPeerScoreStats();\n    }\n    /**\n     * On an inbound stream opened\n     */\n    onIncomingStream({ stream, connection }) {\n        if (!this.isStarted()) {\n            return;\n        }\n        const peerId = connection.remotePeer;\n        // add peer to router\n        this.addPeer(peerId, connection.direction, connection.remoteAddr);\n        // create inbound stream\n        this.createInboundStream(peerId, stream);\n        // attempt to create outbound stream\n        this.outboundInflightQueue.push({ peerId, connection });\n    }\n    /**\n     * Registrar notifies an established connection with pubsub protocol\n     */\n    onPeerConnected(peerId, connection) {\n        this.metrics?.newConnectionCount.inc({ status: connection.status });\n        // libp2p may emit a closed connection and never issue peer:disconnect event\n        // see https://github.com/ChainSafe/js-libp2p-gossipsub/issues/398\n        if (!this.isStarted() || connection.status !== 'open') {\n            return;\n        }\n        this.addPeer(peerId, connection.direction, connection.remoteAddr);\n        this.outboundInflightQueue.push({ peerId, connection });\n    }\n    /**\n     * Registrar notifies a closing connection with pubsub protocol\n     */\n    onPeerDisconnected(peerId) {\n        this.log('connection ended %p', peerId);\n        this.removePeer(peerId);\n    }\n    async createOutboundStream(peerId, connection) {\n        if (!this.isStarted()) {\n            return;\n        }\n        const id = peerId.toString();\n        if (!this.peers.has(id)) {\n            return;\n        }\n        // TODO make this behavior more robust\n        // This behavior is different than for inbound streams\n        // If an outbound stream already exists, don't create a new stream\n        if (this.streamsOutbound.has(id)) {\n            return;\n        }\n        try {\n            const stream = new OutboundStream(await connection.newStream(this.multicodecs), (e) => this.log.error('outbound pipe error', e), { maxBufferSize: this.opts.maxOutboundBufferSize });\n            this.log('create outbound stream %p', peerId);\n            this.streamsOutbound.set(id, stream);\n            const protocol = stream.protocol;\n            if (protocol === constants.FloodsubID) {\n                this.floodsubPeers.add(id);\n            }\n            this.metrics?.peersPerProtocol.inc({ protocol }, 1);\n            // Immediately send own subscriptions via the newly attached stream\n            if (this.subscriptions.size > 0) {\n                this.log('send subscriptions to', id);\n                this.sendSubscriptions(id, Array.from(this.subscriptions), true);\n            }\n        }\n        catch (e) {\n            this.log.error('createOutboundStream error', e);\n        }\n    }\n    async createInboundStream(peerId, stream) {\n        if (!this.isStarted()) {\n            return;\n        }\n        const id = peerId.toString();\n        if (!this.peers.has(id)) {\n            return;\n        }\n        // TODO make this behavior more robust\n        // This behavior is different than for outbound streams\n        // If a peer initiates a new inbound connection\n        // we assume that one is the new canonical inbound stream\n        const priorInboundStream = this.streamsInbound.get(id);\n        if (priorInboundStream !== undefined) {\n            this.log('replacing existing inbound steam %s', id);\n            priorInboundStream.close();\n        }\n        this.log('create inbound stream %s', id);\n        const inboundStream = new InboundStream(stream, { maxDataLength: this.opts.maxInboundDataLength });\n        this.streamsInbound.set(id, inboundStream);\n        this.pipePeerReadStream(peerId, inboundStream.source).catch((err) => this.log(err));\n    }\n    /**\n     * Add a peer to the router\n     */\n    addPeer(peerId, direction, addr) {\n        const id = peerId.toString();\n        if (!this.peers.has(id)) {\n            this.log('new peer %p', peerId);\n            this.peers.add(id);\n            // Add to peer scoring\n            this.score.addPeer(id);\n            const currentIP = multiaddrToIPStr(addr);\n            if (currentIP !== null) {\n                this.score.addIP(id, currentIP);\n            }\n            else {\n                this.log('Added peer has no IP in current address %s %s', id, addr.toString());\n            }\n            // track the connection direction. Don't allow to unset outbound\n            if (!this.outbound.has(id)) {\n                this.outbound.set(id, direction === 'outbound');\n            }\n        }\n    }\n    /**\n     * Removes a peer from the router\n     */\n    removePeer(peerId) {\n        const id = peerId.toString();\n        if (!this.peers.has(id)) {\n            return;\n        }\n        // delete peer\n        this.log('delete peer %p', peerId);\n        this.peers.delete(id);\n        const outboundStream = this.streamsOutbound.get(id);\n        const inboundStream = this.streamsInbound.get(id);\n        if (outboundStream) {\n            this.metrics?.peersPerProtocol.inc({ protocol: outboundStream.protocol }, -1);\n        }\n        // close streams\n        outboundStream?.close();\n        inboundStream?.close();\n        // remove streams\n        this.streamsOutbound.delete(id);\n        this.streamsInbound.delete(id);\n        // remove peer from topics map\n        for (const peers of this.topics.values()) {\n            peers.delete(id);\n        }\n        // Remove this peer from the mesh\n        for (const [topicStr, peers] of this.mesh) {\n            if (peers.delete(id) === true) {\n                this.metrics?.onRemoveFromMesh(topicStr, ChurnReason.Dc, 1);\n            }\n        }\n        // Remove this peer from the fanout\n        for (const peers of this.fanout.values()) {\n            peers.delete(id);\n        }\n        // Remove from floodsubPeers\n        this.floodsubPeers.delete(id);\n        // Remove from gossip mapping\n        this.gossip.delete(id);\n        // Remove from control mapping\n        this.control.delete(id);\n        // Remove from backoff mapping\n        this.outbound.delete(id);\n        // Remove from peer scoring\n        this.score.removePeer(id);\n        this.acceptFromWhitelist.delete(id);\n    }\n    // API METHODS\n    get started() {\n        return this.status.code === GossipStatusCode.started;\n    }\n    /**\n     * Get a the peer-ids in a topic mesh\n     */\n    getMeshPeers(topic) {\n        const peersInTopic = this.mesh.get(topic);\n        return peersInTopic ? Array.from(peersInTopic) : [];\n    }\n    /**\n     * Get a list of the peer-ids that are subscribed to one topic.\n     */\n    getSubscribers(topic) {\n        const peersInTopic = this.topics.get(topic);\n        return (peersInTopic ? Array.from(peersInTopic) : []).map((str) => peerIdFromString(str));\n    }\n    /**\n     * Get the list of topics which the peer is subscribed to.\n     */\n    getTopics() {\n        return Array.from(this.subscriptions);\n    }\n    // TODO: Reviewing Pubsub API\n    // MESSAGE METHODS\n    /**\n     * Responsible for processing each RPC message received by other peers.\n     */\n    async pipePeerReadStream(peerId, stream) {\n        try {\n            await pipe(stream, async (source) => {\n                for await (const data of source) {\n                    try {\n                        // TODO: Check max gossip message size, before decodeRpc()\n                        const rpcBytes = data.subarray();\n                        // Note: This function may throw, it must be wrapped in a try {} catch {} to prevent closing the stream.\n                        // TODO: What should we do if the entire RPC is invalid?\n                        const rpc = decodeRpc(rpcBytes, this.decodeRpcLimits);\n                        this.metrics?.onRpcRecv(rpc, rpcBytes.length);\n                        // Since processRpc may be overridden entirely in unsafe ways,\n                        // the simplest/safest option here is to wrap in a function and capture all errors\n                        // to prevent a top-level unhandled exception\n                        // This processing of rpc messages should happen without awaiting full validation/execution of prior messages\n                        if (this.opts.awaitRpcHandler) {\n                            try {\n                                await this.handleReceivedRpc(peerId, rpc);\n                            }\n                            catch (err) {\n                                this.metrics?.onRpcRecvError();\n                                this.log(err);\n                            }\n                        }\n                        else {\n                            this.handleReceivedRpc(peerId, rpc).catch((err) => {\n                                this.metrics?.onRpcRecvError();\n                                this.log(err);\n                            });\n                        }\n                    }\n                    catch (e) {\n                        this.metrics?.onRpcDataError();\n                        this.log(e);\n                    }\n                }\n            });\n        }\n        catch (err) {\n            this.metrics?.onPeerReadStreamError();\n            this.handlePeerReadStreamError(err, peerId);\n        }\n    }\n    /**\n     * Handle error when read stream pipe throws, less of the functional use but more\n     * to for testing purposes to spy on the error handling\n     * */\n    handlePeerReadStreamError(err, peerId) {\n        this.log.error(err);\n        this.onPeerDisconnected(peerId);\n    }\n    /**\n     * Handles an rpc request from a peer\n     */\n    async handleReceivedRpc(from, rpc) {\n        // Check if peer is graylisted in which case we ignore the event\n        if (!this.acceptFrom(from.toString())) {\n            this.log('received message from unacceptable peer %p', from);\n            this.metrics?.rpcRecvNotAccepted.inc();\n            return;\n        }\n        const subscriptions = rpc.subscriptions ? rpc.subscriptions.length : 0;\n        const messages = rpc.messages ? rpc.messages.length : 0;\n        let ihave = 0;\n        let iwant = 0;\n        let graft = 0;\n        let prune = 0;\n        if (rpc.control) {\n            if (rpc.control.ihave)\n                ihave = rpc.control.ihave.length;\n            if (rpc.control.iwant)\n                iwant = rpc.control.iwant.length;\n            if (rpc.control.graft)\n                graft = rpc.control.graft.length;\n            if (rpc.control.prune)\n                prune = rpc.control.prune.length;\n        }\n        this.log(`rpc.from ${from.toString()} subscriptions ${subscriptions} messages ${messages} ihave ${ihave} iwant ${iwant} graft ${graft} prune ${prune}`);\n        // Handle received subscriptions\n        if (rpc.subscriptions && rpc.subscriptions.length > 0) {\n            // update peer subscriptions\n            const subscriptions = [];\n            rpc.subscriptions.forEach((subOpt) => {\n                const topic = subOpt.topic;\n                const subscribe = subOpt.subscribe === true;\n                if (topic != null) {\n                    if (this.allowedTopics && !this.allowedTopics.has(topic)) {\n                        // Not allowed: subscription data-structures are not bounded by topic count\n                        // TODO: Should apply behaviour penalties?\n                        return;\n                    }\n                    this.handleReceivedSubscription(from, topic, subscribe);\n                    subscriptions.push({ topic, subscribe });\n                }\n            });\n            this.dispatchEvent(new CustomEvent('subscription-change', {\n                detail: { peerId: from, subscriptions }\n            }));\n        }\n        // Handle messages\n        // TODO: (up to limit)\n        if (rpc.messages) {\n            for (const message of rpc.messages) {\n                if (this.allowedTopics && !this.allowedTopics.has(message.topic)) {\n                    // Not allowed: message cache data-structures are not bounded by topic count\n                    // TODO: Should apply behaviour penalties?\n                    continue;\n                }\n                const handleReceivedMessagePromise = this.handleReceivedMessage(from, message)\n                    // Should never throw, but handle just in case\n                    .catch((err) => {\n                    this.metrics?.onMsgRecvError(message.topic);\n                    this.log(err);\n                });\n                if (this.opts.awaitRpcMessageHandler) {\n                    await handleReceivedMessagePromise;\n                }\n            }\n        }\n        // Handle control messages\n        if (rpc.control) {\n            await this.handleControlMessage(from.toString(), rpc.control);\n        }\n    }\n    /**\n     * Handles a subscription change from a peer\n     */\n    handleReceivedSubscription(from, topic, subscribe) {\n        this.log('subscription update from %p topic %s', from, topic);\n        let topicSet = this.topics.get(topic);\n        if (topicSet == null) {\n            topicSet = new Set();\n            this.topics.set(topic, topicSet);\n        }\n        if (subscribe) {\n            // subscribe peer to new topic\n            topicSet.add(from.toString());\n        }\n        else {\n            // unsubscribe from existing topic\n            topicSet.delete(from.toString());\n        }\n        // TODO: rust-libp2p has A LOT more logic here\n    }\n    /**\n     * Handles a newly received message from an RPC.\n     * May forward to all peers in the mesh.\n     */\n    async handleReceivedMessage(from, rpcMsg) {\n        this.metrics?.onMsgRecvPreValidation(rpcMsg.topic);\n        const validationResult = await this.validateReceivedMessage(from, rpcMsg);\n        this.metrics?.onPrevalidationResult(rpcMsg.topic, validationResult.code);\n        switch (validationResult.code) {\n            case MessageStatus.duplicate:\n                // Report the duplicate\n                this.score.duplicateMessage(from.toString(), validationResult.msgIdStr, rpcMsg.topic);\n                // due to the collision of fastMsgIdFn, 2 different messages may end up the same fastMsgId\n                // so we need to also mark the duplicate message as delivered or the promise is not resolved\n                // and peer gets penalized. See https://github.com/ChainSafe/js-libp2p-gossipsub/pull/385\n                this.gossipTracer.deliverMessage(validationResult.msgIdStr, true);\n                this.mcache.observeDuplicate(validationResult.msgIdStr, from.toString());\n                return;\n            case MessageStatus.invalid:\n                // invalid messages received\n                // metrics.register_invalid_message(&raw_message.topic)\n                // Tell peer_score about reject\n                // Reject the original source, and any duplicates we've seen from other peers.\n                if (validationResult.msgIdStr) {\n                    const msgIdStr = validationResult.msgIdStr;\n                    this.score.rejectMessage(from.toString(), msgIdStr, rpcMsg.topic, validationResult.reason);\n                    this.gossipTracer.rejectMessage(msgIdStr, validationResult.reason);\n                }\n                else {\n                    this.score.rejectInvalidMessage(from.toString(), rpcMsg.topic);\n                }\n                this.metrics?.onMsgRecvInvalid(rpcMsg.topic, validationResult);\n                return;\n            case MessageStatus.valid:\n                // Tells score that message arrived (but is maybe not fully validated yet).\n                // Consider the message as delivered for gossip promises.\n                this.score.validateMessage(validationResult.messageId.msgIdStr);\n                this.gossipTracer.deliverMessage(validationResult.messageId.msgIdStr);\n                // Add the message to our memcache\n                // if no validation is required, mark the message as validated\n                this.mcache.put(validationResult.messageId, rpcMsg, !this.opts.asyncValidation);\n                // Dispatch the message to the user if we are subscribed to the topic\n                if (this.subscriptions.has(rpcMsg.topic)) {\n                    const isFromSelf = this.components.peerId.equals(from);\n                    if (!isFromSelf || this.opts.emitSelf) {\n                        super.dispatchEvent(new CustomEvent('gossipsub:message', {\n                            detail: {\n                                propagationSource: from,\n                                msgId: validationResult.messageId.msgIdStr,\n                                msg: validationResult.msg\n                            }\n                        }));\n                        // TODO: Add option to switch between emit per topic or all messages in one\n                        super.dispatchEvent(new CustomEvent('message', { detail: validationResult.msg }));\n                    }\n                }\n                // Forward the message to mesh peers, if no validation is required\n                // If asyncValidation is ON, expect the app layer to call reportMessageValidationResult(), then forward\n                if (!this.opts.asyncValidation) {\n                    // TODO: in rust-libp2p\n                    // .forward_msg(&msg_id, raw_message, Some(propagation_source))\n                    this.forwardMessage(validationResult.messageId.msgIdStr, rpcMsg, from.toString());\n                }\n        }\n    }\n    /**\n     * Handles a newly received message from an RPC.\n     * May forward to all peers in the mesh.\n     */\n    async validateReceivedMessage(propagationSource, rpcMsg) {\n        // Fast message ID stuff\n        const fastMsgIdStr = this.fastMsgIdFn?.(rpcMsg);\n        const msgIdCached = fastMsgIdStr !== undefined ? this.fastMsgIdCache?.get(fastMsgIdStr) : undefined;\n        if (msgIdCached) {\n            // This message has been seen previously. Ignore it\n            return { code: MessageStatus.duplicate, msgIdStr: msgIdCached };\n        }\n        // Perform basic validation on message and convert to RawGossipsubMessage for fastMsgIdFn()\n        const validationResult = await validateToRawMessage(this.globalSignaturePolicy, rpcMsg);\n        if (!validationResult.valid) {\n            return { code: MessageStatus.invalid, reason: RejectReason.Error, error: validationResult.error };\n        }\n        const msg = validationResult.message;\n        // Try and perform the data transform to the message. If it fails, consider it invalid.\n        try {\n            if (this.dataTransform) {\n                msg.data = this.dataTransform.inboundTransform(rpcMsg.topic, msg.data);\n            }\n        }\n        catch (e) {\n            this.log('Invalid message, transform failed', e);\n            return { code: MessageStatus.invalid, reason: RejectReason.Error, error: ValidateError.TransformFailed };\n        }\n        // TODO: Check if message is from a blacklisted source or propagation origin\n        // - Reject any message from a blacklisted peer\n        // - Also reject any message that originated from a blacklisted peer\n        // - reject messages claiming to be from ourselves but not locally published\n        // Calculate the message id on the transformed data.\n        const msgId = await this.msgIdFn(msg);\n        const msgIdStr = this.msgIdToStrFn(msgId);\n        const messageId = { msgId, msgIdStr };\n        // Add the message to the duplicate caches\n        if (fastMsgIdStr !== undefined && this.fastMsgIdCache) {\n            const collision = this.fastMsgIdCache.put(fastMsgIdStr, msgIdStr);\n            if (collision) {\n                this.metrics?.fastMsgIdCacheCollision.inc();\n            }\n        }\n        if (this.seenCache.has(msgIdStr)) {\n            return { code: MessageStatus.duplicate, msgIdStr };\n        }\n        else {\n            this.seenCache.put(msgIdStr);\n        }\n        // (Optional) Provide custom validation here with dynamic validators per topic\n        // NOTE: This custom topicValidator() must resolve fast (< 100ms) to allow scores\n        // to not penalize peers for long validation times.\n        const topicValidator = this.topicValidators.get(rpcMsg.topic);\n        if (topicValidator != null) {\n            let acceptance;\n            // Use try {} catch {} in case topicValidator() is synchronous\n            try {\n                acceptance = await topicValidator(propagationSource, msg);\n            }\n            catch (e) {\n                const errCode = e.code;\n                if (errCode === constants.ERR_TOPIC_VALIDATOR_IGNORE)\n                    acceptance = TopicValidatorResult.Ignore;\n                if (errCode === constants.ERR_TOPIC_VALIDATOR_REJECT)\n                    acceptance = TopicValidatorResult.Reject;\n                else\n                    acceptance = TopicValidatorResult.Ignore;\n            }\n            if (acceptance !== TopicValidatorResult.Accept) {\n                return { code: MessageStatus.invalid, reason: rejectReasonFromAcceptance(acceptance), msgIdStr };\n            }\n        }\n        return { code: MessageStatus.valid, messageId, msg };\n    }\n    /**\n     * Return score of a peer.\n     */\n    getScore(peerId) {\n        return this.score.score(peerId);\n    }\n    /**\n     * Send an rpc object to a peer with subscriptions\n     */\n    sendSubscriptions(toPeer, topics, subscribe) {\n        this.sendRpc(toPeer, {\n            subscriptions: topics.map((topic) => ({ topic, subscribe }))\n        });\n    }\n    /**\n     * Handles an rpc control message from a peer\n     */\n    async handleControlMessage(id, controlMsg) {\n        if (controlMsg === undefined) {\n            return;\n        }\n        const iwant = controlMsg.ihave ? this.handleIHave(id, controlMsg.ihave) : [];\n        const ihave = controlMsg.iwant ? this.handleIWant(id, controlMsg.iwant) : [];\n        const prune = controlMsg.graft ? await this.handleGraft(id, controlMsg.graft) : [];\n        controlMsg.prune && (await this.handlePrune(id, controlMsg.prune));\n        if (!iwant.length && !ihave.length && !prune.length) {\n            return;\n        }\n        const sent = this.sendRpc(id, { messages: ihave, control: { iwant, prune } });\n        const iwantMessageIds = iwant[0]?.messageIDs;\n        if (iwantMessageIds) {\n            if (sent) {\n                this.gossipTracer.addPromise(id, iwantMessageIds);\n            }\n            else {\n                this.metrics?.iwantPromiseUntracked.inc(1);\n            }\n        }\n    }\n    /**\n     * Whether to accept a message from a peer\n     */\n    acceptFrom(id) {\n        if (this.direct.has(id)) {\n            return true;\n        }\n        const now = Date.now();\n        const entry = this.acceptFromWhitelist.get(id);\n        if (entry && entry.messagesAccepted < ACCEPT_FROM_WHITELIST_MAX_MESSAGES && entry.acceptUntil >= now) {\n            entry.messagesAccepted += 1;\n            return true;\n        }\n        const score = this.score.score(id);\n        if (score >= ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE) {\n            // peer is unlikely to be able to drop its score to `graylistThreshold`\n            // after 128 messages or 1s\n            this.acceptFromWhitelist.set(id, {\n                messagesAccepted: 0,\n                acceptUntil: now + ACCEPT_FROM_WHITELIST_DURATION_MS\n            });\n        }\n        else {\n            this.acceptFromWhitelist.delete(id);\n        }\n        return score >= this.opts.scoreThresholds.graylistThreshold;\n    }\n    /**\n     * Handles IHAVE messages\n     */\n    handleIHave(id, ihave) {\n        if (!ihave.length) {\n            return [];\n        }\n        // we ignore IHAVE gossip from any peer whose score is below the gossips threshold\n        const score = this.score.score(id);\n        if (score < this.opts.scoreThresholds.gossipThreshold) {\n            this.log('IHAVE: ignoring peer %s with score below threshold [ score = %d ]', id, score);\n            this.metrics?.ihaveRcvIgnored.inc({ reason: IHaveIgnoreReason.LowScore });\n            return [];\n        }\n        // IHAVE flood protection\n        const peerhave = (this.peerhave.get(id) ?? 0) + 1;\n        this.peerhave.set(id, peerhave);\n        if (peerhave > constants.GossipsubMaxIHaveMessages) {\n            this.log('IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring', id, peerhave);\n            this.metrics?.ihaveRcvIgnored.inc({ reason: IHaveIgnoreReason.MaxIhave });\n            return [];\n        }\n        const iasked = this.iasked.get(id) ?? 0;\n        if (iasked >= constants.GossipsubMaxIHaveLength) {\n            this.log('IHAVE: peer %s has already advertised too many messages (%d); ignoring', id, iasked);\n            this.metrics?.ihaveRcvIgnored.inc({ reason: IHaveIgnoreReason.MaxIasked });\n            return [];\n        }\n        // string msgId => msgId\n        const iwant = new Map();\n        ihave.forEach(({ topicID, messageIDs }) => {\n            if (!topicID || !messageIDs || !this.mesh.has(topicID)) {\n                return;\n            }\n            let idonthave = 0;\n            messageIDs.forEach((msgId) => {\n                const msgIdStr = this.msgIdToStrFn(msgId);\n                if (!this.seenCache.has(msgIdStr)) {\n                    iwant.set(msgIdStr, msgId);\n                    idonthave++;\n                }\n            });\n            this.metrics?.onIhaveRcv(topicID, messageIDs.length, idonthave);\n        });\n        if (!iwant.size) {\n            return [];\n        }\n        let iask = iwant.size;\n        if (iask + iasked > constants.GossipsubMaxIHaveLength) {\n            iask = constants.GossipsubMaxIHaveLength - iasked;\n        }\n        this.log('IHAVE: Asking for %d out of %d messages from %s', iask, iwant.size, id);\n        let iwantList = Array.from(iwant.values());\n        // ask in random order\n        shuffle(iwantList);\n        // truncate to the messages we are actually asking for and update the iasked counter\n        iwantList = iwantList.slice(0, iask);\n        this.iasked.set(id, iasked + iask);\n        // do not add gossipTracer promise here until a successful sendRpc()\n        return [\n            {\n                messageIDs: iwantList\n            }\n        ];\n    }\n    /**\n     * Handles IWANT messages\n     * Returns messages to send back to peer\n     */\n    handleIWant(id, iwant) {\n        if (!iwant.length) {\n            return [];\n        }\n        // we don't respond to IWANT requests from any per whose score is below the gossip threshold\n        const score = this.score.score(id);\n        if (score < this.opts.scoreThresholds.gossipThreshold) {\n            this.log('IWANT: ignoring peer %s with score below threshold [score = %d]', id, score);\n            return [];\n        }\n        const ihave = new Map();\n        const iwantByTopic = new Map();\n        let iwantDonthave = 0;\n        iwant.forEach(({ messageIDs }) => {\n            messageIDs &&\n                messageIDs.forEach((msgId) => {\n                    const msgIdStr = this.msgIdToStrFn(msgId);\n                    const entry = this.mcache.getWithIWantCount(msgIdStr, id);\n                    if (entry == null) {\n                        iwantDonthave++;\n                        return;\n                    }\n                    iwantByTopic.set(entry.msg.topic, 1 + (iwantByTopic.get(entry.msg.topic) ?? 0));\n                    if (entry.count > constants.GossipsubGossipRetransmission) {\n                        this.log('IWANT: Peer %s has asked for message %s too many times: ignoring request', id, msgId);\n                        return;\n                    }\n                    ihave.set(msgIdStr, entry.msg);\n                });\n        });\n        this.metrics?.onIwantRcv(iwantByTopic, iwantDonthave);\n        if (!ihave.size) {\n            this.log('IWANT: Could not provide any wanted messages to %s', id);\n            return [];\n        }\n        this.log('IWANT: Sending %d messages to %s', ihave.size, id);\n        return Array.from(ihave.values());\n    }\n    /**\n     * Handles Graft messages\n     */\n    async handleGraft(id, graft) {\n        const prune = [];\n        const score = this.score.score(id);\n        const now = Date.now();\n        let doPX = this.opts.doPX;\n        graft.forEach(({ topicID }) => {\n            if (!topicID) {\n                return;\n            }\n            const peersInMesh = this.mesh.get(topicID);\n            if (!peersInMesh) {\n                // don't do PX when there is an unknown topic to avoid leaking our peers\n                doPX = false;\n                // spam hardening: ignore GRAFTs for unknown topics\n                return;\n            }\n            // check if peer is already in the mesh; if so do nothing\n            if (peersInMesh.has(id)) {\n                return;\n            }\n            // we don't GRAFT to/from direct peers; complain loudly if this happens\n            if (this.direct.has(id)) {\n                this.log('GRAFT: ignoring request from direct peer %s', id);\n                // this is possibly a bug from a non-reciprical configuration; send a PRUNE\n                prune.push(topicID);\n                // but don't px\n                doPX = false;\n                return;\n            }\n            // make sure we are not backing off that peer\n            const expire = this.backoff.get(topicID)?.get(id);\n            if (typeof expire === 'number' && now < expire) {\n                this.log('GRAFT: ignoring backed off peer %s', id);\n                // add behavioral penalty\n                this.score.addPenalty(id, 1, ScorePenalty.GraftBackoff);\n                // no PX\n                doPX = false;\n                // check the flood cutoff -- is the GRAFT coming too fast?\n                const floodCutoff = expire + this.opts.graftFloodThreshold - this.opts.pruneBackoff;\n                if (now < floodCutoff) {\n                    // extra penalty\n                    this.score.addPenalty(id, 1, ScorePenalty.GraftBackoff);\n                }\n                // refresh the backoff\n                this.addBackoff(id, topicID);\n                prune.push(topicID);\n                return;\n            }\n            // check the score\n            if (score < 0) {\n                // we don't GRAFT peers with negative score\n                this.log('GRAFT: ignoring peer %s with negative score: score=%d, topic=%s', id, score, topicID);\n                // we do send them PRUNE however, because it's a matter of protocol correctness\n                prune.push(topicID);\n                // but we won't PX to them\n                doPX = false;\n                // add/refresh backoff so that we don't reGRAFT too early even if the score decays\n                this.addBackoff(id, topicID);\n                return;\n            }\n            // check the number of mesh peers; if it is at (or over) Dhi, we only accept grafts\n            // from peers with outbound connections; this is a defensive check to restrict potential\n            // mesh takeover attacks combined with love bombing\n            if (peersInMesh.size >= this.opts.Dhi && !this.outbound.get(id)) {\n                prune.push(topicID);\n                this.addBackoff(id, topicID);\n                return;\n            }\n            this.log('GRAFT: Add mesh link from %s in %s', id, topicID);\n            this.score.graft(id, topicID);\n            peersInMesh.add(id);\n            this.metrics?.onAddToMesh(topicID, InclusionReason.Subscribed, 1);\n        });\n        if (!prune.length) {\n            return [];\n        }\n        const onUnsubscribe = false;\n        return await Promise.all(prune.map((topic) => this.makePrune(id, topic, doPX, onUnsubscribe)));\n    }\n    /**\n     * Handles Prune messages\n     */\n    async handlePrune(id, prune) {\n        const score = this.score.score(id);\n        for (const { topicID, backoff, peers } of prune) {\n            if (topicID == null) {\n                continue;\n            }\n            const peersInMesh = this.mesh.get(topicID);\n            if (!peersInMesh) {\n                return;\n            }\n            this.log('PRUNE: Remove mesh link to %s in %s', id, topicID);\n            this.score.prune(id, topicID);\n            if (peersInMesh.has(id)) {\n                peersInMesh.delete(id);\n                this.metrics?.onRemoveFromMesh(topicID, ChurnReason.Prune, 1);\n            }\n            // is there a backoff specified by the peer? if so obey it\n            if (typeof backoff === 'number' && backoff > 0) {\n                this.doAddBackoff(id, topicID, backoff * 1000);\n            }\n            else {\n                this.addBackoff(id, topicID);\n            }\n            // PX\n            if (peers && peers.length) {\n                // we ignore PX from peers with insufficient scores\n                if (score < this.opts.scoreThresholds.acceptPXThreshold) {\n                    this.log('PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]', id, score, topicID);\n                    continue;\n                }\n                await this.pxConnect(peers);\n            }\n        }\n    }\n    /**\n     * Add standard backoff log for a peer in a topic\n     */\n    addBackoff(id, topic) {\n        this.doAddBackoff(id, topic, this.opts.pruneBackoff);\n    }\n    /**\n     * Add backoff expiry interval for a peer in a topic\n     *\n     * @param id\n     * @param topic\n     * @param intervalMs - backoff duration in milliseconds\n     */\n    doAddBackoff(id, topic, intervalMs) {\n        let backoff = this.backoff.get(topic);\n        if (!backoff) {\n            backoff = new Map();\n            this.backoff.set(topic, backoff);\n        }\n        const expire = Date.now() + intervalMs;\n        const existingExpire = backoff.get(id) ?? 0;\n        if (existingExpire < expire) {\n            backoff.set(id, expire);\n        }\n    }\n    /**\n     * Apply penalties from broken IHAVE/IWANT promises\n     */\n    applyIwantPenalties() {\n        this.gossipTracer.getBrokenPromises().forEach((count, p) => {\n            this.log(\"peer %s didn't follow up in %d IWANT requests; adding penalty\", p, count);\n            this.score.addPenalty(p, count, ScorePenalty.BrokenPromise);\n        });\n    }\n    /**\n     * Clear expired backoff expiries\n     */\n    clearBackoff() {\n        // we only clear once every GossipsubPruneBackoffTicks ticks to avoid iterating over the maps too much\n        if (this.heartbeatTicks % constants.GossipsubPruneBackoffTicks !== 0) {\n            return;\n        }\n        const now = Date.now();\n        this.backoff.forEach((backoff, topic) => {\n            backoff.forEach((expire, id) => {\n                // add some slack time to the expiration, see https://github.com/libp2p/specs/pull/289\n                if (expire + BACKOFF_SLACK * this.opts.heartbeatInterval < now) {\n                    backoff.delete(id);\n                }\n            });\n            if (backoff.size === 0) {\n                this.backoff.delete(topic);\n            }\n        });\n    }\n    /**\n     * Maybe reconnect to direct peers\n     */\n    async directConnect() {\n        const toconnect = [];\n        this.direct.forEach((id) => {\n            if (!this.streamsOutbound.has(id)) {\n                toconnect.push(id);\n            }\n        });\n        await Promise.all(toconnect.map(async (id) => await this.connect(id)));\n    }\n    /**\n     * Maybe attempt connection given signed peer records\n     */\n    async pxConnect(peers) {\n        if (peers.length > this.opts.prunePeers) {\n            shuffle(peers);\n            peers = peers.slice(0, this.opts.prunePeers);\n        }\n        const toconnect = [];\n        await Promise.all(peers.map(async (pi) => {\n            if (!pi.peerID) {\n                return;\n            }\n            const peer = peerIdFromBytes(pi.peerID);\n            const p = peer.toString();\n            if (this.peers.has(p)) {\n                return;\n            }\n            if (!pi.signedPeerRecord) {\n                toconnect.push(p);\n                return;\n            }\n            // The peer sent us a signed record\n            // This is not a record from the peer who sent the record, but another peer who is connected with it\n            // Ensure that it is valid\n            try {\n                if (!(await this.components.peerStore.consumePeerRecord(pi.signedPeerRecord, peer))) {\n                    this.log('bogus peer record obtained through px: could not add peer record to address book');\n                    return;\n                }\n                toconnect.push(p);\n            }\n            catch (e) {\n                this.log('bogus peer record obtained through px: invalid signature or not a peer record');\n            }\n        }));\n        if (!toconnect.length) {\n            return;\n        }\n        await Promise.all(toconnect.map(async (id) => await this.connect(id)));\n    }\n    /**\n     * Connect to a peer using the gossipsub protocol\n     */\n    async connect(id) {\n        this.log('Initiating connection with %s', id);\n        const peerId = peerIdFromString(id);\n        const connection = await this.components.connectionManager.openConnection(peerId);\n        for (const multicodec of this.multicodecs) {\n            for (const topology of this.components.registrar.getTopologies(multicodec)) {\n                topology.onConnect?.(peerId, connection);\n            }\n        }\n    }\n    /**\n     * Subscribes to a topic\n     */\n    subscribe(topic) {\n        if (this.status.code !== GossipStatusCode.started) {\n            throw new Error('Pubsub has not started');\n        }\n        if (!this.subscriptions.has(topic)) {\n            this.subscriptions.add(topic);\n            for (const peerId of this.peers.keys()) {\n                this.sendSubscriptions(peerId, [topic], true);\n            }\n        }\n        this.join(topic);\n    }\n    /**\n     * Unsubscribe to a topic\n     */\n    unsubscribe(topic) {\n        if (this.status.code !== GossipStatusCode.started) {\n            throw new Error('Pubsub is not started');\n        }\n        const wasSubscribed = this.subscriptions.delete(topic);\n        this.log('unsubscribe from %s - am subscribed %s', topic, wasSubscribed);\n        if (wasSubscribed) {\n            for (const peerId of this.peers.keys()) {\n                this.sendSubscriptions(peerId, [topic], false);\n            }\n        }\n        this.leave(topic);\n    }\n    /**\n     * Join topic\n     */\n    join(topic) {\n        if (this.status.code !== GossipStatusCode.started) {\n            throw new Error('Gossipsub has not started');\n        }\n        // if we are already in the mesh, return\n        if (this.mesh.has(topic)) {\n            return;\n        }\n        this.log('JOIN %s', topic);\n        this.metrics?.onJoin(topic);\n        const toAdd = new Set();\n        const backoff = this.backoff.get(topic);\n        // check if we have mesh_n peers in fanout[topic] and add them to the mesh if we do,\n        // removing the fanout entry.\n        const fanoutPeers = this.fanout.get(topic);\n        if (fanoutPeers) {\n            // Remove fanout entry and the last published time\n            this.fanout.delete(topic);\n            this.fanoutLastpub.delete(topic);\n            // remove explicit peers, peers with negative scores, and backoffed peers\n            fanoutPeers.forEach((id) => {\n                if (!this.direct.has(id) && this.score.score(id) >= 0 && (!backoff || !backoff.has(id))) {\n                    toAdd.add(id);\n                }\n            });\n            this.metrics?.onAddToMesh(topic, InclusionReason.Fanout, toAdd.size);\n        }\n        // check if we need to get more peers, which we randomly select\n        if (toAdd.size < this.opts.D) {\n            const fanoutCount = toAdd.size;\n            const newPeers = this.getRandomGossipPeers(topic, this.opts.D, (id) => \n            // filter direct peers and peers with negative score\n            !toAdd.has(id) && !this.direct.has(id) && this.score.score(id) >= 0 && (!backoff || !backoff.has(id)));\n            newPeers.forEach((peer) => {\n                toAdd.add(peer);\n            });\n            this.metrics?.onAddToMesh(topic, InclusionReason.Random, toAdd.size - fanoutCount);\n        }\n        this.mesh.set(topic, toAdd);\n        toAdd.forEach((id) => {\n            this.log('JOIN: Add mesh link to %s in %s', id, topic);\n            this.sendGraft(id, topic);\n            // rust-libp2p\n            // - peer_score.graft()\n            // - Self::control_pool_add()\n            // - peer_added_to_mesh()\n        });\n    }\n    /**\n     * Leave topic\n     */\n    leave(topic) {\n        if (this.status.code !== GossipStatusCode.started) {\n            throw new Error('Gossipsub has not started');\n        }\n        this.log('LEAVE %s', topic);\n        this.metrics?.onLeave(topic);\n        // Send PRUNE to mesh peers\n        const meshPeers = this.mesh.get(topic);\n        if (meshPeers) {\n            Promise.all(Array.from(meshPeers).map(async (id) => {\n                this.log('LEAVE: Remove mesh link to %s in %s', id, topic);\n                return await this.sendPrune(id, topic);\n            })).catch((err) => {\n                this.log('Error sending prunes to mesh peers', err);\n            });\n            this.mesh.delete(topic);\n        }\n    }\n    selectPeersToForward(topic, propagationSource, excludePeers) {\n        const tosend = new Set();\n        // Add explicit peers\n        const peersInTopic = this.topics.get(topic);\n        if (peersInTopic) {\n            this.direct.forEach((peer) => {\n                if (peersInTopic.has(peer) && propagationSource !== peer && !excludePeers?.has(peer)) {\n                    tosend.add(peer);\n                }\n            });\n            // As of Mar 2022, spec + golang-libp2p include this while rust-libp2p does not\n            // rust-libp2p: https://github.com/libp2p/rust-libp2p/blob/6cc3b4ec52c922bfcf562a29b5805c3150e37c75/protocols/gossipsub/src/behaviour.rs#L2693\n            // spec: https://github.com/libp2p/specs/blob/10712c55ab309086a52eec7d25f294df4fa96528/pubsub/gossipsub/gossipsub-v1.0.md?plain=1#L361\n            this.floodsubPeers.forEach((peer) => {\n                if (peersInTopic.has(peer) &&\n                    propagationSource !== peer &&\n                    !excludePeers?.has(peer) &&\n                    this.score.score(peer) >= this.opts.scoreThresholds.publishThreshold) {\n                    tosend.add(peer);\n                }\n            });\n        }\n        // add mesh peers\n        const meshPeers = this.mesh.get(topic);\n        if (meshPeers && meshPeers.size > 0) {\n            meshPeers.forEach((peer) => {\n                if (propagationSource !== peer && !excludePeers?.has(peer)) {\n                    tosend.add(peer);\n                }\n            });\n        }\n        return tosend;\n    }\n    selectPeersToPublish(topic) {\n        const tosend = new Set();\n        const tosendCount = {\n            direct: 0,\n            floodsub: 0,\n            mesh: 0,\n            fanout: 0\n        };\n        const peersInTopic = this.topics.get(topic);\n        if (peersInTopic) {\n            // flood-publish behavior\n            // send to direct peers and _all_ peers meeting the publishThreshold\n            if (this.opts.floodPublish) {\n                peersInTopic.forEach((id) => {\n                    if (this.direct.has(id)) {\n                        tosend.add(id);\n                        tosendCount.direct++;\n                    }\n                    else if (this.score.score(id) >= this.opts.scoreThresholds.publishThreshold) {\n                        tosend.add(id);\n                        tosendCount.floodsub++;\n                    }\n                });\n            }\n            else {\n                // non-flood-publish behavior\n                // send to direct peers, subscribed floodsub peers\n                // and some mesh peers above publishThreshold\n                // direct peers (if subscribed)\n                this.direct.forEach((id) => {\n                    if (peersInTopic.has(id)) {\n                        tosend.add(id);\n                        tosendCount.direct++;\n                    }\n                });\n                // floodsub peers\n                // Note: if there are no floodsub peers, we save a loop through peersInTopic Map\n                this.floodsubPeers.forEach((id) => {\n                    if (peersInTopic.has(id) && this.score.score(id) >= this.opts.scoreThresholds.publishThreshold) {\n                        tosend.add(id);\n                        tosendCount.floodsub++;\n                    }\n                });\n                // Gossipsub peers handling\n                const meshPeers = this.mesh.get(topic);\n                if (meshPeers && meshPeers.size > 0) {\n                    meshPeers.forEach((peer) => {\n                        tosend.add(peer);\n                        tosendCount.mesh++;\n                    });\n                }\n                // We are not in the mesh for topic, use fanout peers\n                else {\n                    const fanoutPeers = this.fanout.get(topic);\n                    if (fanoutPeers && fanoutPeers.size > 0) {\n                        fanoutPeers.forEach((peer) => {\n                            tosend.add(peer);\n                            tosendCount.fanout++;\n                        });\n                    }\n                    // We have no fanout peers, select mesh_n of them and add them to the fanout\n                    else {\n                        // If we are not in the fanout, then pick peers in topic above the publishThreshold\n                        const newFanoutPeers = this.getRandomGossipPeers(topic, this.opts.D, (id) => {\n                            return this.score.score(id) >= this.opts.scoreThresholds.publishThreshold;\n                        });\n                        if (newFanoutPeers.size > 0) {\n                            // eslint-disable-line max-depth\n                            this.fanout.set(topic, newFanoutPeers);\n                            newFanoutPeers.forEach((peer) => {\n                                // eslint-disable-line max-depth\n                                tosend.add(peer);\n                                tosendCount.fanout++;\n                            });\n                        }\n                    }\n                    // We are publishing to fanout peers - update the time we published\n                    this.fanoutLastpub.set(topic, Date.now());\n                }\n            }\n        }\n        return { tosend, tosendCount };\n    }\n    /**\n     * Forwards a message from our peers.\n     *\n     * For messages published by us (the app layer), this class uses `publish`\n     */\n    forwardMessage(msgIdStr, rawMsg, propagationSource, excludePeers) {\n        // message is fully validated inform peer_score\n        if (propagationSource) {\n            this.score.deliverMessage(propagationSource, msgIdStr, rawMsg.topic);\n        }\n        const tosend = this.selectPeersToForward(rawMsg.topic, propagationSource, excludePeers);\n        // Note: Don't throw if tosend is empty, we can have a mesh with a single peer\n        // forward the message to peers\n        tosend.forEach((id) => {\n            // sendRpc may mutate RPC message on piggyback, create a new message for each peer\n            this.sendRpc(id, { messages: [rawMsg] });\n        });\n        this.metrics?.onForwardMsg(rawMsg.topic, tosend.size);\n    }\n    /**\n     * App layer publishes a message to peers, return number of peers this message is published to\n     * Note: `async` due to crypto only if `StrictSign`, otherwise it's a sync fn.\n     *\n     * For messages not from us, this class uses `forwardMessage`.\n     */\n    async publish(topic, data, opts) {\n        const startMs = Date.now();\n        const transformedData = this.dataTransform ? this.dataTransform.outboundTransform(topic, data) : data;\n        if (this.publishConfig == null) {\n            throw Error('PublishError.Uninitialized');\n        }\n        // Prepare raw message with user's publishConfig\n        const { raw: rawMsg, msg } = await buildRawMessage(this.publishConfig, topic, data, transformedData);\n        // calculate the message id from the un-transformed data\n        const msgId = await this.msgIdFn(msg);\n        const msgIdStr = this.msgIdToStrFn(msgId);\n        // Current publish opt takes precedence global opts, while preserving false value\n        const ignoreDuplicatePublishError = opts?.ignoreDuplicatePublishError ?? this.opts.ignoreDuplicatePublishError;\n        if (this.seenCache.has(msgIdStr)) {\n            // This message has already been seen. We don't re-publish messages that have already\n            // been published on the network.\n            if (ignoreDuplicatePublishError) {\n                this.metrics?.onPublishDuplicateMsg(topic);\n                return { recipients: [] };\n            }\n            throw Error('PublishError.Duplicate');\n        }\n        const { tosend, tosendCount } = this.selectPeersToPublish(topic);\n        const willSendToSelf = this.opts.emitSelf === true && this.subscriptions.has(topic);\n        // Current publish opt takes precedence global opts, while preserving false value\n        const allowPublishToZeroPeers = opts?.allowPublishToZeroPeers ?? this.opts.allowPublishToZeroPeers;\n        if (tosend.size === 0 && !allowPublishToZeroPeers && !willSendToSelf) {\n            throw Error('PublishError.InsufficientPeers');\n        }\n        // If the message isn't a duplicate and we have sent it to some peers add it to the\n        // duplicate cache and memcache.\n        this.seenCache.put(msgIdStr);\n        // all published messages are valid\n        this.mcache.put({ msgId, msgIdStr }, rawMsg, true);\n        // If the message is anonymous or has a random author add it to the published message ids cache.\n        this.publishedMessageIds.put(msgIdStr);\n        // Send to set of peers aggregated from direct, mesh, fanout\n        for (const id of tosend) {\n            // sendRpc may mutate RPC message on piggyback, create a new message for each peer\n            const sent = this.sendRpc(id, { messages: [rawMsg] });\n            // did not actually send the message\n            if (!sent) {\n                tosend.delete(id);\n            }\n        }\n        const durationMs = Date.now() - startMs;\n        this.metrics?.onPublishMsg(topic, tosendCount, tosend.size, rawMsg.data != null ? rawMsg.data.length : 0, durationMs);\n        // Dispatch the message to the user if we are subscribed to the topic\n        if (willSendToSelf) {\n            tosend.add(this.components.peerId.toString());\n            super.dispatchEvent(new CustomEvent('gossipsub:message', {\n                detail: {\n                    propagationSource: this.components.peerId,\n                    msgId: msgIdStr,\n                    msg\n                }\n            }));\n            // TODO: Add option to switch between emit per topic or all messages in one\n            super.dispatchEvent(new CustomEvent('message', { detail: msg }));\n        }\n        return {\n            recipients: Array.from(tosend.values()).map((str) => peerIdFromString(str))\n        };\n    }\n    /**\n     * This function should be called when `asyncValidation` is `true` after\n     * the message got validated by the caller. Messages are stored in the `mcache` and\n     * validation is expected to be fast enough that the messages should still exist in the cache.\n     * There are three possible validation outcomes and the outcome is given in acceptance.\n     *\n     * If acceptance = `MessageAcceptance.Accept` the message will get propagated to the\n     * network. The `propagation_source` parameter indicates who the message was received by and\n     * will not be forwarded back to that peer.\n     *\n     * If acceptance = `MessageAcceptance.Reject` the message will be deleted from the memcache\n     * and the P penalty will be applied to the `propagationSource`.\n     *\n     * If acceptance = `MessageAcceptance.Ignore` the message will be deleted from the memcache\n     * but no P penalty will be applied.\n     *\n     * This function will return true if the message was found in the cache and false if was not\n     * in the cache anymore.\n     *\n     * This should only be called once per message.\n     */\n    reportMessageValidationResult(msgId, propagationSource, acceptance) {\n        let cacheEntry;\n        if (acceptance === TopicValidatorResult.Accept) {\n            cacheEntry = this.mcache.validate(msgId);\n            if (cacheEntry != null) {\n                const { message: rawMsg, originatingPeers } = cacheEntry;\n                // message is fully validated inform peer_score\n                this.score.deliverMessage(propagationSource, msgId, rawMsg.topic);\n                this.forwardMessage(msgId, cacheEntry.message, propagationSource, originatingPeers);\n            }\n            // else, Message not in cache. Ignoring forwarding\n        }\n        // Not valid\n        else {\n            cacheEntry = this.mcache.remove(msgId);\n            if (cacheEntry) {\n                const rejectReason = rejectReasonFromAcceptance(acceptance);\n                const { message: rawMsg, originatingPeers } = cacheEntry;\n                // Tell peer_score about reject\n                // Reject the original source, and any duplicates we've seen from other peers.\n                this.score.rejectMessage(propagationSource, msgId, rawMsg.topic, rejectReason);\n                for (const peer of originatingPeers) {\n                    this.score.rejectMessage(peer, msgId, rawMsg.topic, rejectReason);\n                }\n            }\n            // else, Message not in cache. Ignoring forwarding\n        }\n        const firstSeenTimestampMs = this.score.messageFirstSeenTimestampMs(msgId);\n        this.metrics?.onReportValidation(cacheEntry, acceptance, firstSeenTimestampMs);\n    }\n    /**\n     * Sends a GRAFT message to a peer\n     */\n    sendGraft(id, topic) {\n        const graft = [\n            {\n                topicID: topic\n            }\n        ];\n        this.sendRpc(id, { control: { graft } });\n    }\n    /**\n     * Sends a PRUNE message to a peer\n     */\n    async sendPrune(id, topic) {\n        // this is only called from leave() function\n        const onUnsubscribe = true;\n        const prune = [await this.makePrune(id, topic, this.opts.doPX, onUnsubscribe)];\n        this.sendRpc(id, { control: { prune } });\n    }\n    /**\n     * Send an rpc object to a peer\n     */\n    sendRpc(id, rpc) {\n        const outboundStream = this.streamsOutbound.get(id);\n        if (!outboundStream) {\n            this.log(`Cannot send RPC to ${id} as there is no open stream to it available`);\n            return false;\n        }\n        // piggyback control message retries\n        const ctrl = this.control.get(id);\n        if (ctrl) {\n            this.piggybackControl(id, rpc, ctrl);\n            this.control.delete(id);\n        }\n        // piggyback gossip\n        const ihave = this.gossip.get(id);\n        if (ihave) {\n            this.piggybackGossip(id, rpc, ihave);\n            this.gossip.delete(id);\n        }\n        const rpcBytes = RPC.encode(rpc).finish();\n        try {\n            outboundStream.push(rpcBytes);\n        }\n        catch (e) {\n            this.log.error(`Cannot send rpc to ${id}`, e);\n            // if the peer had control messages or gossip, re-attach\n            if (ctrl) {\n                this.control.set(id, ctrl);\n            }\n            if (ihave) {\n                this.gossip.set(id, ihave);\n            }\n            return false;\n        }\n        this.metrics?.onRpcSent(rpc, rpcBytes.length);\n        return true;\n    }\n    /** Mutates `outRpc` adding graft and prune control messages */\n    piggybackControl(id, outRpc, ctrl) {\n        if (ctrl.graft) {\n            if (!outRpc.control)\n                outRpc.control = {};\n            if (!outRpc.control.graft)\n                outRpc.control.graft = [];\n            for (const graft of ctrl.graft) {\n                if (graft.topicID && this.mesh.get(graft.topicID)?.has(id)) {\n                    outRpc.control.graft.push(graft);\n                }\n            }\n        }\n        if (ctrl.prune) {\n            if (!outRpc.control)\n                outRpc.control = {};\n            if (!outRpc.control.prune)\n                outRpc.control.prune = [];\n            for (const prune of ctrl.prune) {\n                if (prune.topicID && !this.mesh.get(prune.topicID)?.has(id)) {\n                    outRpc.control.prune.push(prune);\n                }\n            }\n        }\n    }\n    /** Mutates `outRpc` adding ihave control messages */\n    piggybackGossip(id, outRpc, ihave) {\n        if (!outRpc.control)\n            outRpc.control = {};\n        outRpc.control.ihave = ihave;\n    }\n    /**\n     * Send graft and prune messages\n     *\n     * @param tograft - peer id => topic[]\n     * @param toprune - peer id => topic[]\n     */\n    async sendGraftPrune(tograft, toprune, noPX) {\n        const doPX = this.opts.doPX;\n        const onUnsubscribe = false;\n        for (const [id, topics] of tograft) {\n            const graft = topics.map((topicID) => ({ topicID }));\n            let prune = [];\n            // If a peer also has prunes, process them now\n            const pruning = toprune.get(id);\n            if (pruning) {\n                prune = await Promise.all(pruning.map(async (topicID) => await this.makePrune(id, topicID, doPX && !(noPX.get(id) ?? false), onUnsubscribe)));\n                toprune.delete(id);\n            }\n            this.sendRpc(id, { control: { graft, prune } });\n        }\n        for (const [id, topics] of toprune) {\n            const prune = await Promise.all(topics.map(async (topicID) => await this.makePrune(id, topicID, doPX && !(noPX.get(id) ?? false), onUnsubscribe)));\n            this.sendRpc(id, { control: { prune } });\n        }\n    }\n    /**\n     * Emits gossip - Send IHAVE messages to a random set of gossip peers\n     */\n    emitGossip(peersToGossipByTopic) {\n        const gossipIDsByTopic = this.mcache.getGossipIDs(new Set(peersToGossipByTopic.keys()));\n        for (const [topic, peersToGossip] of peersToGossipByTopic) {\n            this.doEmitGossip(topic, peersToGossip, gossipIDsByTopic.get(topic) ?? []);\n        }\n    }\n    /**\n     * Send gossip messages to GossipFactor peers above threshold with a minimum of D_lazy\n     * Peers are randomly selected from the heartbeat which exclude mesh + fanout peers\n     * We also exclude direct peers, as there is no reason to emit gossip to them\n     * @param topic\n     * @param candidateToGossip - peers to gossip\n     * @param messageIDs - message ids to gossip\n     */\n    doEmitGossip(topic, candidateToGossip, messageIDs) {\n        if (!messageIDs.length) {\n            return;\n        }\n        // shuffle to emit in random order\n        shuffle(messageIDs);\n        // if we are emitting more than GossipsubMaxIHaveLength ids, truncate the list\n        if (messageIDs.length > constants.GossipsubMaxIHaveLength) {\n            // we do the truncation (with shuffling) per peer below\n            this.log('too many messages for gossip; will truncate IHAVE list (%d messages)', messageIDs.length);\n        }\n        if (!candidateToGossip.size)\n            return;\n        let target = this.opts.Dlazy;\n        const factor = constants.GossipsubGossipFactor * candidateToGossip.size;\n        let peersToGossip = candidateToGossip;\n        if (factor > target) {\n            target = factor;\n        }\n        if (target > peersToGossip.size) {\n            target = peersToGossip.size;\n        }\n        else {\n            // only shuffle if needed\n            peersToGossip = shuffle(Array.from(peersToGossip)).slice(0, target);\n        }\n        // Emit the IHAVE gossip to the selected peers up to the target\n        peersToGossip.forEach((id) => {\n            let peerMessageIDs = messageIDs;\n            if (messageIDs.length > constants.GossipsubMaxIHaveLength) {\n                // shuffle and slice message IDs per peer so that we emit a different set for each peer\n                // we have enough reduncancy in the system that this will significantly increase the message\n                // coverage when we do truncate\n                peerMessageIDs = shuffle(peerMessageIDs.slice()).slice(0, constants.GossipsubMaxIHaveLength);\n            }\n            this.pushGossip(id, {\n                topicID: topic,\n                messageIDs: peerMessageIDs\n            });\n        });\n    }\n    /**\n     * Flush gossip and control messages\n     */\n    flush() {\n        // send gossip first, which will also piggyback control\n        for (const [peer, ihave] of this.gossip.entries()) {\n            this.gossip.delete(peer);\n            this.sendRpc(peer, { control: { ihave } });\n        }\n        // send the remaining control messages\n        for (const [peer, control] of this.control.entries()) {\n            this.control.delete(peer);\n            this.sendRpc(peer, { control: { graft: control.graft, prune: control.prune } });\n        }\n    }\n    /**\n     * Adds new IHAVE messages to pending gossip\n     */\n    pushGossip(id, controlIHaveMsgs) {\n        this.log('Add gossip to %s', id);\n        const gossip = this.gossip.get(id) || [];\n        this.gossip.set(id, gossip.concat(controlIHaveMsgs));\n    }\n    /**\n     * Make a PRUNE control message for a peer in a topic\n     */\n    async makePrune(id, topic, doPX, onUnsubscribe) {\n        this.score.prune(id, topic);\n        if (this.streamsOutbound.get(id).protocol === constants.GossipsubIDv10) {\n            // Gossipsub v1.0 -- no backoff, the peer won't be able to parse it anyway\n            return {\n                topicID: topic,\n                peers: []\n            };\n        }\n        // backoff is measured in seconds\n        // GossipsubPruneBackoff and GossipsubUnsubscribeBackoff are measured in milliseconds\n        // The protobuf has it as a uint64\n        const backoffMs = onUnsubscribe ? this.opts.unsubcribeBackoff : this.opts.pruneBackoff;\n        const backoff = backoffMs / 1000;\n        this.doAddBackoff(id, topic, backoffMs);\n        if (!doPX) {\n            return {\n                topicID: topic,\n                peers: [],\n                backoff: backoff\n            };\n        }\n        // select peers for Peer eXchange\n        const peers = this.getRandomGossipPeers(topic, this.opts.prunePeers, (xid) => {\n            return xid !== id && this.score.score(xid) >= 0;\n        });\n        const px = await Promise.all(Array.from(peers).map(async (peerId) => {\n            // see if we have a signed record to send back; if we don't, just send\n            // the peer ID and let the pruned peer find them in the DHT -- we can't trust\n            // unsigned address records through PX anyways\n            // Finding signed records in the DHT is not supported at the time of writing in js-libp2p\n            const id = peerIdFromString(peerId);\n            let peerInfo;\n            try {\n                peerInfo = await this.components.peerStore.get(id);\n            }\n            catch (err) {\n                if (err.code !== 'ERR_NOT_FOUND') {\n                    throw err;\n                }\n            }\n            return {\n                peerID: id.toBytes(),\n                signedPeerRecord: peerInfo?.peerRecordEnvelope\n            };\n        }));\n        return {\n            topicID: topic,\n            peers: px,\n            backoff: backoff\n        };\n    }\n    runHeartbeat = () => {\n        const timer = this.metrics?.heartbeatDuration.startTimer();\n        this.heartbeat()\n            .catch((err) => {\n            this.log('Error running heartbeat', err);\n        })\n            .finally(() => {\n            if (timer != null) {\n                timer();\n            }\n            // Schedule the next run if still in started status\n            if (this.status.code === GossipStatusCode.started) {\n                // Clear previous timeout before overwriting `status.heartbeatTimeout`, it should be completed tho.\n                clearTimeout(this.status.heartbeatTimeout);\n                // NodeJS setInterval function is innexact, calls drift by a few miliseconds on each call.\n                // To run the heartbeat precisely setTimeout() must be used recomputing the delay on every loop.\n                let msToNextHeartbeat = this.opts.heartbeatInterval - ((Date.now() - this.status.hearbeatStartMs) % this.opts.heartbeatInterval);\n                // If too close to next heartbeat, skip one\n                if (msToNextHeartbeat < this.opts.heartbeatInterval * 0.25) {\n                    msToNextHeartbeat += this.opts.heartbeatInterval;\n                    this.metrics?.heartbeatSkipped.inc();\n                }\n                this.status.heartbeatTimeout = setTimeout(this.runHeartbeat, msToNextHeartbeat);\n            }\n        });\n    };\n    /**\n     * Maintains the mesh and fanout maps in gossipsub.\n     */\n    async heartbeat() {\n        const { D, Dlo, Dhi, Dscore, Dout, fanoutTTL } = this.opts;\n        this.heartbeatTicks++;\n        // cache scores throught the heartbeat\n        const scores = new Map();\n        const getScore = (id) => {\n            let s = scores.get(id);\n            if (s === undefined) {\n                s = this.score.score(id);\n                scores.set(id, s);\n            }\n            return s;\n        };\n        // peer id => topic[]\n        const tograft = new Map();\n        // peer id => topic[]\n        const toprune = new Map();\n        // peer id => don't px\n        const noPX = new Map();\n        // clean up expired backoffs\n        this.clearBackoff();\n        // clean up peerhave/iasked counters\n        this.peerhave.clear();\n        this.metrics?.cacheSize.set({ cache: 'iasked' }, this.iasked.size);\n        this.iasked.clear();\n        // apply IWANT request penalties\n        this.applyIwantPenalties();\n        // ensure direct peers are connected\n        if (this.heartbeatTicks % this.opts.directConnectTicks === 0) {\n            // we only do this every few ticks to allow pending connections to complete and account for restarts/downtime\n            await this.directConnect();\n        }\n        // EXTRA: Prune caches\n        this.fastMsgIdCache?.prune();\n        this.seenCache.prune();\n        this.gossipTracer.prune();\n        this.publishedMessageIds.prune();\n        /**\n         * Instead of calling getRandomGossipPeers multiple times to:\n         *   + get more mesh peers\n         *   + more outbound peers\n         *   + oppportunistic grafting\n         *   + emitGossip\n         *\n         * We want to loop through the topic peers only a single time and prepare gossip peers for all topics to improve the performance\n         */\n        const peersToGossipByTopic = new Map();\n        // maintain the mesh for topics we have joined\n        this.mesh.forEach((peers, topic) => {\n            const peersInTopic = this.topics.get(topic);\n            const candidateMeshPeers = new Set();\n            const peersToGossip = new Set();\n            peersToGossipByTopic.set(topic, peersToGossip);\n            if (peersInTopic) {\n                const shuffledPeers = shuffle(Array.from(peersInTopic));\n                const backoff = this.backoff.get(topic);\n                for (const id of shuffledPeers) {\n                    const peerStreams = this.streamsOutbound.get(id);\n                    if (peerStreams &&\n                        this.multicodecs.includes(peerStreams.protocol) &&\n                        !peers.has(id) &&\n                        !this.direct.has(id)) {\n                        const score = getScore(id);\n                        if ((!backoff || !backoff.has(id)) && score >= 0)\n                            candidateMeshPeers.add(id);\n                        // instead of having to find gossip peers after heartbeat which require another loop\n                        // we prepare peers to gossip in a topic within heartbeat to improve performance\n                        if (score >= this.opts.scoreThresholds.gossipThreshold)\n                            peersToGossip.add(id);\n                    }\n                }\n            }\n            // prune/graft helper functions (defined per topic)\n            const prunePeer = (id, reason) => {\n                this.log('HEARTBEAT: Remove mesh link to %s in %s', id, topic);\n                // no need to update peer score here as we do it in makePrune\n                // add prune backoff record\n                this.addBackoff(id, topic);\n                // remove peer from mesh\n                peers.delete(id);\n                // after pruning a peer from mesh, we want to gossip topic to it if its score meet the gossip threshold\n                if (getScore(id) >= this.opts.scoreThresholds.gossipThreshold)\n                    peersToGossip.add(id);\n                this.metrics?.onRemoveFromMesh(topic, reason, 1);\n                // add to toprune\n                const topics = toprune.get(id);\n                if (!topics) {\n                    toprune.set(id, [topic]);\n                }\n                else {\n                    topics.push(topic);\n                }\n            };\n            const graftPeer = (id, reason) => {\n                this.log('HEARTBEAT: Add mesh link to %s in %s', id, topic);\n                // update peer score\n                this.score.graft(id, topic);\n                // add peer to mesh\n                peers.add(id);\n                // when we add a new mesh peer, we don't want to gossip messages to it\n                peersToGossip.delete(id);\n                this.metrics?.onAddToMesh(topic, reason, 1);\n                // add to tograft\n                const topics = tograft.get(id);\n                if (!topics) {\n                    tograft.set(id, [topic]);\n                }\n                else {\n                    topics.push(topic);\n                }\n            };\n            // drop all peers with negative score, without PX\n            peers.forEach((id) => {\n                const score = getScore(id);\n                // Record the score\n                if (score < 0) {\n                    this.log('HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s', id, score, topic);\n                    prunePeer(id, ChurnReason.BadScore);\n                    noPX.set(id, true);\n                }\n            });\n            // do we have enough peers?\n            if (peers.size < Dlo) {\n                const ineed = D - peers.size;\n                // slice up to first `ineed` items and remove them from candidateMeshPeers\n                // same to `const newMeshPeers = candidateMeshPeers.slice(0, ineed)`\n                const newMeshPeers = removeFirstNItemsFromSet(candidateMeshPeers, ineed);\n                newMeshPeers.forEach((p) => {\n                    graftPeer(p, InclusionReason.NotEnough);\n                });\n            }\n            // do we have to many peers?\n            if (peers.size > Dhi) {\n                let peersArray = Array.from(peers);\n                // sort by score\n                peersArray.sort((a, b) => getScore(b) - getScore(a));\n                // We keep the first D_score peers by score and the remaining up to D randomly\n                // under the constraint that we keep D_out peers in the mesh (if we have that many)\n                peersArray = peersArray.slice(0, Dscore).concat(shuffle(peersArray.slice(Dscore)));\n                // count the outbound peers we are keeping\n                let outbound = 0;\n                peersArray.slice(0, D).forEach((p) => {\n                    if (this.outbound.get(p)) {\n                        outbound++;\n                    }\n                });\n                // if it's less than D_out, bubble up some outbound peers from the random selection\n                if (outbound < Dout) {\n                    const rotate = (i) => {\n                        // rotate the peersArray to the right and put the ith peer in the front\n                        const p = peersArray[i];\n                        for (let j = i; j > 0; j--) {\n                            peersArray[j] = peersArray[j - 1];\n                        }\n                        peersArray[0] = p;\n                    };\n                    // first bubble up all outbound peers already in the selection to the front\n                    if (outbound > 0) {\n                        let ihave = outbound;\n                        for (let i = 1; i < D && ihave > 0; i++) {\n                            if (this.outbound.get(peersArray[i])) {\n                                rotate(i);\n                                ihave--;\n                            }\n                        }\n                    }\n                    // now bubble up enough outbound peers outside the selection to the front\n                    let ineed = D - outbound;\n                    for (let i = D; i < peersArray.length && ineed > 0; i++) {\n                        if (this.outbound.get(peersArray[i])) {\n                            rotate(i);\n                            ineed--;\n                        }\n                    }\n                }\n                // prune the excess peers\n                peersArray.slice(D).forEach((p) => {\n                    prunePeer(p, ChurnReason.Excess);\n                });\n            }\n            // do we have enough outbound peers?\n            if (peers.size >= Dlo) {\n                // count the outbound peers we have\n                let outbound = 0;\n                peers.forEach((p) => {\n                    if (this.outbound.get(p)) {\n                        outbound++;\n                    }\n                });\n                // if it's less than D_out, select some peers with outbound connections and graft them\n                if (outbound < Dout) {\n                    const ineed = Dout - outbound;\n                    const newMeshPeers = removeItemsFromSet(candidateMeshPeers, ineed, (id) => this.outbound.get(id) === true);\n                    newMeshPeers.forEach((p) => {\n                        graftPeer(p, InclusionReason.Outbound);\n                    });\n                }\n            }\n            // should we try to improve the mesh with opportunistic grafting?\n            if (this.heartbeatTicks % this.opts.opportunisticGraftTicks === 0 && peers.size > 1) {\n                // Opportunistic grafting works as follows: we check the median score of peers in the\n                // mesh; if this score is below the opportunisticGraftThreshold, we select a few peers at\n                // random with score over the median.\n                // The intention is to (slowly) improve an underperforming mesh by introducing good\n                // scoring peers that may have been gossiping at us. This allows us to get out of sticky\n                // situations where we are stuck with poor peers and also recover from churn of good peers.\n                // now compute the median peer score in the mesh\n                const peersList = Array.from(peers).sort((a, b) => getScore(a) - getScore(b));\n                const medianIndex = Math.floor(peers.size / 2);\n                const medianScore = getScore(peersList[medianIndex]);\n                // if the median score is below the threshold, select a better peer (if any) and GRAFT\n                if (medianScore < this.opts.scoreThresholds.opportunisticGraftThreshold) {\n                    const ineed = this.opts.opportunisticGraftPeers;\n                    const newMeshPeers = removeItemsFromSet(candidateMeshPeers, ineed, (id) => getScore(id) > medianScore);\n                    for (const id of newMeshPeers) {\n                        this.log('HEARTBEAT: Opportunistically graft peer %s on topic %s', id, topic);\n                        graftPeer(id, InclusionReason.Opportunistic);\n                    }\n                }\n            }\n        });\n        // expire fanout for topics we haven't published to in a while\n        const now = Date.now();\n        this.fanoutLastpub.forEach((lastpb, topic) => {\n            if (lastpb + fanoutTTL < now) {\n                this.fanout.delete(topic);\n                this.fanoutLastpub.delete(topic);\n            }\n        });\n        // maintain our fanout for topics we are publishing but we have not joined\n        this.fanout.forEach((fanoutPeers, topic) => {\n            // checks whether our peers are still in the topic and have a score above the publish threshold\n            const topicPeers = this.topics.get(topic);\n            fanoutPeers.forEach((id) => {\n                if (!topicPeers.has(id) || getScore(id) < this.opts.scoreThresholds.publishThreshold) {\n                    fanoutPeers.delete(id);\n                }\n            });\n            const peersInTopic = this.topics.get(topic);\n            const candidateFanoutPeers = [];\n            // the fanout map contains topics to which we are not subscribed.\n            const peersToGossip = new Set();\n            peersToGossipByTopic.set(topic, peersToGossip);\n            if (peersInTopic) {\n                const shuffledPeers = shuffle(Array.from(peersInTopic));\n                for (const id of shuffledPeers) {\n                    const peerStreams = this.streamsOutbound.get(id);\n                    if (peerStreams &&\n                        this.multicodecs.includes(peerStreams.protocol) &&\n                        !fanoutPeers.has(id) &&\n                        !this.direct.has(id)) {\n                        const score = getScore(id);\n                        if (score >= this.opts.scoreThresholds.publishThreshold)\n                            candidateFanoutPeers.push(id);\n                        // instead of having to find gossip peers after heartbeat which require another loop\n                        // we prepare peers to gossip in a topic within heartbeat to improve performance\n                        if (score >= this.opts.scoreThresholds.gossipThreshold)\n                            peersToGossip.add(id);\n                    }\n                }\n            }\n            // do we need more peers?\n            if (fanoutPeers.size < D) {\n                const ineed = D - fanoutPeers.size;\n                candidateFanoutPeers.slice(0, ineed).forEach((id) => {\n                    fanoutPeers.add(id);\n                    peersToGossip?.delete(id);\n                });\n            }\n        });\n        this.emitGossip(peersToGossipByTopic);\n        // send coalesced GRAFT/PRUNE messages (will piggyback gossip)\n        await this.sendGraftPrune(tograft, toprune, noPX);\n        // flush pending gossip that wasn't piggybacked above\n        this.flush();\n        // advance the message history window\n        this.mcache.shift();\n        this.dispatchEvent(new CustomEvent('gossipsub:heartbeat'));\n    }\n    /**\n     * Given a topic, returns up to count peers subscribed to that topic\n     * that pass an optional filter function\n     *\n     * @param topic\n     * @param count\n     * @param filter - a function to filter acceptable peers\n     */\n    getRandomGossipPeers(topic, count, filter = () => true) {\n        const peersInTopic = this.topics.get(topic);\n        if (!peersInTopic) {\n            return new Set();\n        }\n        // Adds all peers using our protocol\n        // that also pass the filter function\n        let peers = [];\n        peersInTopic.forEach((id) => {\n            const peerStreams = this.streamsOutbound.get(id);\n            if (!peerStreams) {\n                return;\n            }\n            if (this.multicodecs.includes(peerStreams.protocol) && filter(id)) {\n                peers.push(id);\n            }\n        });\n        // Pseudo-randomly shuffles peers\n        peers = shuffle(peers);\n        if (count > 0 && peers.length > count) {\n            peers = peers.slice(0, count);\n        }\n        return new Set(peers);\n    }\n    onScrapeMetrics(metrics) {\n        /* Data structure sizes */\n        metrics.mcacheSize.set(this.mcache.size);\n        metrics.mcacheNotValidatedCount.set(this.mcache.notValidatedCount);\n        // Arbitrary size\n        metrics.cacheSize.set({ cache: 'direct' }, this.direct.size);\n        metrics.cacheSize.set({ cache: 'seenCache' }, this.seenCache.size);\n        metrics.cacheSize.set({ cache: 'fastMsgIdCache' }, this.fastMsgIdCache?.size ?? 0);\n        metrics.cacheSize.set({ cache: 'publishedMessageIds' }, this.publishedMessageIds.size);\n        metrics.cacheSize.set({ cache: 'mcache' }, this.mcache.size);\n        metrics.cacheSize.set({ cache: 'score' }, this.score.size);\n        metrics.cacheSize.set({ cache: 'gossipTracer.promises' }, this.gossipTracer.size);\n        metrics.cacheSize.set({ cache: 'gossipTracer.requests' }, this.gossipTracer.requestMsByMsgSize);\n        // Bounded by topic\n        metrics.cacheSize.set({ cache: 'topics' }, this.topics.size);\n        metrics.cacheSize.set({ cache: 'subscriptions' }, this.subscriptions.size);\n        metrics.cacheSize.set({ cache: 'mesh' }, this.mesh.size);\n        metrics.cacheSize.set({ cache: 'fanout' }, this.fanout.size);\n        // Bounded by peer\n        metrics.cacheSize.set({ cache: 'peers' }, this.peers.size);\n        metrics.cacheSize.set({ cache: 'streamsOutbound' }, this.streamsOutbound.size);\n        metrics.cacheSize.set({ cache: 'streamsInbound' }, this.streamsInbound.size);\n        metrics.cacheSize.set({ cache: 'acceptFromWhitelist' }, this.acceptFromWhitelist.size);\n        metrics.cacheSize.set({ cache: 'gossip' }, this.gossip.size);\n        metrics.cacheSize.set({ cache: 'control' }, this.control.size);\n        metrics.cacheSize.set({ cache: 'peerhave' }, this.peerhave.size);\n        metrics.cacheSize.set({ cache: 'outbound' }, this.outbound.size);\n        // 2D nested data structure\n        let backoffSize = 0;\n        const now = Date.now();\n        metrics.connectedPeersBackoffSec.reset();\n        for (const backoff of this.backoff.values()) {\n            backoffSize += backoff.size;\n            for (const [peer, expiredMs] of backoff.entries()) {\n                if (this.peers.has(peer)) {\n                    metrics.connectedPeersBackoffSec.observe(Math.max(0, expiredMs - now) / 1000);\n                }\n            }\n        }\n        metrics.cacheSize.set({ cache: 'backoff' }, backoffSize);\n        // Peer counts\n        for (const [topicStr, peers] of this.topics) {\n            metrics.topicPeersCount.set({ topicStr }, peers.size);\n        }\n        for (const [topicStr, peers] of this.mesh) {\n            metrics.meshPeerCounts.set({ topicStr }, peers.size);\n        }\n        // Peer scores\n        const scores = [];\n        const scoreByPeer = new Map();\n        metrics.behaviourPenalty.reset();\n        for (const peerIdStr of this.peers.keys()) {\n            const score = this.score.score(peerIdStr);\n            scores.push(score);\n            scoreByPeer.set(peerIdStr, score);\n            metrics.behaviourPenalty.observe(this.score.peerStats.get(peerIdStr)?.behaviourPenalty ?? 0);\n        }\n        metrics.registerScores(scores, this.opts.scoreThresholds);\n        // Breakdown score per mesh topicLabel\n        metrics.registerScorePerMesh(this.mesh, scoreByPeer);\n        // Breakdown on each score weight\n        const sw = computeAllPeersScoreWeights(this.peers.keys(), this.score.peerStats, this.score.params, this.score.peerIPs, metrics.topicStrToLabel);\n        metrics.registerScoreWeights(sw);\n    }\n}\nexport function gossipsub(init = {}) {\n    return (components) => new GossipSub(components, init);\n}\n//# sourceMappingURL=index.js.map","import { unmarshalPrivateKey } from '@libp2p/crypto/keys';\nimport { StrictSign, StrictNoSign } from '@libp2p/interface/pubsub';\nimport { PublishConfigType } from '../types.js';\n/**\n * Prepare a PublishConfig object from a PeerId.\n */\nexport async function getPublishConfigFromPeerId(signaturePolicy, peerId) {\n    switch (signaturePolicy) {\n        case StrictSign: {\n            if (!peerId) {\n                throw Error('Must provide PeerId');\n            }\n            if (peerId.privateKey == null) {\n                throw Error('Cannot sign message, no private key present');\n            }\n            if (peerId.publicKey == null) {\n                throw Error('Cannot sign message, no public key present');\n            }\n            // Transform privateKey once at initialization time instead of once per message\n            const privateKey = await unmarshalPrivateKey(peerId.privateKey);\n            return {\n                type: PublishConfigType.Signing,\n                author: peerId,\n                key: peerId.publicKey,\n                privateKey\n            };\n        }\n        case StrictNoSign:\n            return {\n                type: PublishConfigType.Anonymous\n            };\n        default:\n            throw new Error(`Unknown signature policy \"${signaturePolicy}\"`);\n    }\n}\n//# sourceMappingURL=publishConfig.js.map","export class AbortError extends Error {\n    constructor(message, code) {\n        super(message ?? 'The operation was aborted');\n        this.type = 'aborted';\n        this.code = code ?? 'ABORT_ERR';\n    }\n}\n//# sourceMappingURL=abort-error.js.map","/**\n * @packageDocumentation\n *\n * @example\n *\n * ```js\n * import { abortableSource } from 'abortable-iterator'\n *\n * async function main () {\n *   // An example function that creates an async iterator that yields an increasing\n *   // number every x milliseconds and NEVER ENDS!\n *   const asyncCounter = async function * (start, delay) {\n *     let i = start\n *     while (true) {\n *       yield new Promise(resolve => setTimeout(() => resolve(i++), delay))\n *     }\n *   }\n *\n *   // Create a counter that'll yield numbers from 0 upwards every second\n *   const everySecond = asyncCounter(0, 1000)\n *\n *   // Make everySecond abortable!\n *   const controller = new AbortController()\n *   const abortableEverySecond = abortableSource(everySecond, controller.signal)\n *\n *   // Abort after 5 seconds\n *   setTimeout(() => controller.abort(), 5000)\n *\n *   try {\n *     // Start the iteration, which will throw after 5 seconds when it is aborted\n *     for await (const n of abortableEverySecond) {\n *       console.log(n)\n *     }\n *   } catch (err) {\n *     if (err.code === 'ERR_ABORTED') {\n *       // Expected - all ok :D\n *     } else {\n *       throw err\n *     }\n *   }\n * }\n *\n * main()\n * ```\n */\nimport { AbortError } from './abort-error.js';\nimport { getIterator } from 'get-iterator';\n/**\n * Wrap an iterator to make it abortable, allow cleanup when aborted via onAbort\n */\nexport function abortableSource(source, signal, options) {\n    const opts = options ?? {};\n    const iterator = getIterator(source);\n    async function* abortable() {\n        let nextAbortHandler;\n        const abortHandler = () => {\n            if (nextAbortHandler != null)\n                nextAbortHandler();\n        };\n        signal.addEventListener('abort', abortHandler);\n        while (true) {\n            let result;\n            try {\n                if (signal.aborted) {\n                    const { abortMessage, abortCode } = opts;\n                    throw new AbortError(abortMessage, abortCode);\n                }\n                const abort = new Promise((resolve, reject) => {\n                    nextAbortHandler = () => {\n                        const { abortMessage, abortCode } = opts;\n                        reject(new AbortError(abortMessage, abortCode));\n                    };\n                });\n                // Race the iterator and the abort signals\n                result = await Promise.race([abort, iterator.next()]);\n                nextAbortHandler = null;\n            }\n            catch (err) {\n                signal.removeEventListener('abort', abortHandler);\n                // Might not have been aborted by a known signal\n                const isKnownAborter = err.type === 'aborted' && signal.aborted;\n                if (isKnownAborter && (opts.onAbort != null)) {\n                    // Do any custom abort handling for the iterator\n                    opts.onAbort(source);\n                }\n                // End the iterator if it is a generator\n                if (typeof iterator.return === 'function') {\n                    try {\n                        const p = iterator.return();\n                        if (p instanceof Promise) { // eslint-disable-line max-depth\n                            p.catch(err => {\n                                if (opts.onReturnError != null) {\n                                    opts.onReturnError(err);\n                                }\n                            });\n                        }\n                    }\n                    catch (err) {\n                        if (opts.onReturnError != null) { // eslint-disable-line max-depth\n                            opts.onReturnError(err);\n                        }\n                    }\n                }\n                if (isKnownAborter && opts.returnOnAbort === true) {\n                    return;\n                }\n                throw err;\n            }\n            if (result.done === true) {\n                break;\n            }\n            yield result.value;\n        }\n        signal.removeEventListener('abort', abortHandler);\n    }\n    return abortable();\n}\nexport function abortableSink(sink, signal, options) {\n    return (source) => sink(abortableSource(source, signal, options));\n}\nexport function abortableDuplex(duplex, signal, options) {\n    return {\n        sink: abortableSink(duplex.sink, signal, {\n            ...options,\n            onAbort: undefined\n        }),\n        source: abortableSource(duplex.source, signal, options)\n    };\n}\nexport { AbortError };\nexport { abortableSink as abortableTransform };\n//# sourceMappingURL=index.js.map","/**\n * @packageDocumentation\n *\n * An iterable that you can push values into.\n *\n * @example\n *\n * ```js\n * import { pushable } from 'it-pushable'\n *\n * const source = pushable()\n *\n * setTimeout(() => source.push('hello'), 100)\n * setTimeout(() => source.push('world'), 200)\n * setTimeout(() => source.end(), 300)\n *\n * const start = Date.now()\n *\n * for await (const value of source) {\n *   console.log(`got \"${value}\" after ${Date.now() - start}ms`)\n * }\n * console.log(`done after ${Date.now() - start}ms`)\n *\n * // Output:\n * // got \"hello\" after 105ms\n * // got \"world\" after 207ms\n * // done after 309ms\n * ```\n *\n * @example\n *\n * ```js\n * import { pushableV } from 'it-pushable'\n * import all from 'it-all'\n *\n * const source = pushableV()\n *\n * source.push(1)\n * source.push(2)\n * source.push(3)\n * source.end()\n *\n * console.info(await all(source))\n *\n * // Output:\n * // [ [1, 2, 3] ]\n * ```\n */\nimport deferred from 'p-defer';\nimport { FIFO } from './fifo.js';\nexport class AbortError extends Error {\n    type;\n    code;\n    constructor(message, code) {\n        super(message ?? 'The operation was aborted');\n        this.type = 'aborted';\n        this.code = code ?? 'ABORT_ERR';\n    }\n}\nexport function pushable(options = {}) {\n    const getNext = (buffer) => {\n        const next = buffer.shift();\n        if (next == null) {\n            return { done: true };\n        }\n        if (next.error != null) {\n            throw next.error;\n        }\n        return {\n            done: next.done === true,\n            // @ts-expect-error if done is false, value will be present\n            value: next.value\n        };\n    };\n    return _pushable(getNext, options);\n}\nexport function pushableV(options = {}) {\n    const getNext = (buffer) => {\n        let next;\n        const values = [];\n        while (!buffer.isEmpty()) {\n            next = buffer.shift();\n            if (next == null) {\n                break;\n            }\n            if (next.error != null) {\n                throw next.error;\n            }\n            if (next.done === false) {\n                // @ts-expect-error if done is false value should be pushed\n                values.push(next.value);\n            }\n        }\n        if (next == null) {\n            return { done: true };\n        }\n        return {\n            done: next.done === true,\n            value: values\n        };\n    };\n    return _pushable(getNext, options);\n}\nfunction _pushable(getNext, options) {\n    options = options ?? {};\n    let onEnd = options.onEnd;\n    let buffer = new FIFO();\n    let pushable;\n    let onNext;\n    let ended;\n    let drain = deferred();\n    const waitNext = async () => {\n        try {\n            if (!buffer.isEmpty()) {\n                return getNext(buffer);\n            }\n            if (ended) {\n                return { done: true };\n            }\n            return await new Promise((resolve, reject) => {\n                onNext = (next) => {\n                    onNext = null;\n                    buffer.push(next);\n                    try {\n                        resolve(getNext(buffer));\n                    }\n                    catch (err) {\n                        reject(err);\n                    }\n                    return pushable;\n                };\n            });\n        }\n        finally {\n            if (buffer.isEmpty()) {\n                // settle promise in the microtask queue to give consumers a chance to\n                // await after calling .push\n                queueMicrotask(() => {\n                    drain.resolve();\n                    drain = deferred();\n                });\n            }\n        }\n    };\n    const bufferNext = (next) => {\n        if (onNext != null) {\n            return onNext(next);\n        }\n        buffer.push(next);\n        return pushable;\n    };\n    const bufferError = (err) => {\n        buffer = new FIFO();\n        if (onNext != null) {\n            return onNext({ error: err });\n        }\n        buffer.push({ error: err });\n        return pushable;\n    };\n    const push = (value) => {\n        if (ended) {\n            return pushable;\n        }\n        // @ts-expect-error `byteLength` is not declared on PushType\n        if (options?.objectMode !== true && value?.byteLength == null) {\n            throw new Error('objectMode was not true but tried to push non-Uint8Array value');\n        }\n        return bufferNext({ done: false, value });\n    };\n    const end = (err) => {\n        if (ended)\n            return pushable;\n        ended = true;\n        return (err != null) ? bufferError(err) : bufferNext({ done: true });\n    };\n    const _return = () => {\n        buffer = new FIFO();\n        end();\n        return { done: true };\n    };\n    const _throw = (err) => {\n        end(err);\n        return { done: true };\n    };\n    pushable = {\n        [Symbol.asyncIterator]() { return this; },\n        next: waitNext,\n        return: _return,\n        throw: _throw,\n        push,\n        end,\n        get readableLength() {\n            return buffer.size;\n        },\n        onEmpty: async (options) => {\n            const signal = options?.signal;\n            signal?.throwIfAborted();\n            if (buffer.isEmpty()) {\n                return;\n            }\n            let cancel;\n            let listener;\n            if (signal != null) {\n                cancel = new Promise((resolve, reject) => {\n                    listener = () => {\n                        reject(new AbortError());\n                    };\n                    signal.addEventListener('abort', listener);\n                });\n            }\n            try {\n                await Promise.race([\n                    drain.promise,\n                    cancel\n                ]);\n            }\n            finally {\n                if (listener != null && signal != null) {\n                    signal?.removeEventListener('abort', listener);\n                }\n            }\n        }\n    };\n    if (onEnd == null) {\n        return pushable;\n    }\n    const _pushable = pushable;\n    pushable = {\n        [Symbol.asyncIterator]() { return this; },\n        next() {\n            return _pushable.next();\n        },\n        throw(err) {\n            _pushable.throw(err);\n            if (onEnd != null) {\n                onEnd(err);\n                onEnd = undefined;\n            }\n            return { done: true };\n        },\n        return() {\n            _pushable.return();\n            if (onEnd != null) {\n                onEnd();\n                onEnd = undefined;\n            }\n            return { done: true };\n        },\n        push,\n        end(err) {\n            _pushable.end(err);\n            if (onEnd != null) {\n                onEnd(err);\n                onEnd = undefined;\n            }\n            return pushable;\n        },\n        get readableLength() {\n            return _pushable.readableLength;\n        }\n    };\n    return pushable;\n}\n//# sourceMappingURL=index.js.map","import { bases } from 'multiformats/basics';\nimport { allocUnsafe } from '../alloc.js';\nfunction createCodec(name, prefix, encode, decode) {\n    return {\n        name,\n        prefix,\n        encoder: {\n            name,\n            prefix,\n            encode\n        },\n        decoder: {\n            decode\n        }\n    };\n}\nconst string = createCodec('utf8', 'u', (buf) => {\n    const decoder = new TextDecoder('utf8');\n    return 'u' + decoder.decode(buf);\n}, (str) => {\n    const encoder = new TextEncoder();\n    return encoder.encode(str.substring(1));\n});\nconst ascii = createCodec('ascii', 'a', (buf) => {\n    let string = 'a';\n    for (let i = 0; i < buf.length; i++) {\n        string += String.fromCharCode(buf[i]);\n    }\n    return string;\n}, (str) => {\n    str = str.substring(1);\n    const buf = allocUnsafe(str.length);\n    for (let i = 0; i < str.length; i++) {\n        buf[i] = str.charCodeAt(i);\n    }\n    return buf;\n});\nconst BASES = {\n    utf8: string,\n    'utf-8': string,\n    hex: bases.base16,\n    latin1: ascii,\n    ascii,\n    binary: ascii,\n    ...bases\n};\nexport default BASES;\n//# sourceMappingURL=bases.js.map","import { asUint8Array } from './util/as-uint8array.js';\nimport bases, {} from './util/bases.js';\n/**\n * Create a `Uint8Array` from the passed string\n *\n * Supports `utf8`, `utf-8`, `hex`, and any encoding supported by the multiformats module.\n *\n * Also `ascii` which is similar to node's 'binary' encoding.\n */\nexport function fromString(string, encoding = 'utf8') {\n    const base = bases[encoding];\n    if (base == null) {\n        throw new Error(`Unsupported encoding \"${encoding}\"`);\n    }\n    if ((encoding === 'utf8' || encoding === 'utf-8') && globalThis.Buffer != null && globalThis.Buffer.from != null) {\n        return asUint8Array(globalThis.Buffer.from(string, 'utf-8'));\n    }\n    // add multibase prefix\n    return base.decoder.decode(`${base.prefix}${string}`); // eslint-disable-line @typescript-eslint/restrict-template-expressions\n}\n//# sourceMappingURL=from-string.js.map","import bases, {} from './util/bases.js';\n/**\n * Turns a `Uint8Array` into a string.\n *\n * Supports `utf8`, `utf-8` and any encoding supported by the multibase module.\n *\n * Also `ascii` which is similar to node's 'binary' encoding.\n */\nexport function toString(array, encoding = 'utf8') {\n    const base = bases[encoding];\n    if (base == null) {\n        throw new Error(`Unsupported encoding \"${encoding}\"`);\n    }\n    if ((encoding === 'utf8' || encoding === 'utf-8') && globalThis.Buffer != null && globalThis.Buffer.from != null) {\n        return globalThis.Buffer.from(array.buffer, array.byteOffset, array.byteLength).toString('utf8');\n    }\n    // strip multibase prefix\n    return base.encoder.encode(array).substring(1);\n}\n//# sourceMappingURL=to-string.js.map","export var MessageTypes;\n(function (MessageTypes) {\n    MessageTypes[MessageTypes[\"NEW_STREAM\"] = 0] = \"NEW_STREAM\";\n    MessageTypes[MessageTypes[\"MESSAGE_RECEIVER\"] = 1] = \"MESSAGE_RECEIVER\";\n    MessageTypes[MessageTypes[\"MESSAGE_INITIATOR\"] = 2] = \"MESSAGE_INITIATOR\";\n    MessageTypes[MessageTypes[\"CLOSE_RECEIVER\"] = 3] = \"CLOSE_RECEIVER\";\n    MessageTypes[MessageTypes[\"CLOSE_INITIATOR\"] = 4] = \"CLOSE_INITIATOR\";\n    MessageTypes[MessageTypes[\"RESET_RECEIVER\"] = 5] = \"RESET_RECEIVER\";\n    MessageTypes[MessageTypes[\"RESET_INITIATOR\"] = 6] = \"RESET_INITIATOR\";\n})(MessageTypes || (MessageTypes = {}));\nexport const MessageTypeNames = Object.freeze({\n    0: 'NEW_STREAM',\n    1: 'MESSAGE_RECEIVER',\n    2: 'MESSAGE_INITIATOR',\n    3: 'CLOSE_RECEIVER',\n    4: 'CLOSE_INITIATOR',\n    5: 'RESET_RECEIVER',\n    6: 'RESET_INITIATOR'\n});\nexport const InitiatorMessageTypes = Object.freeze({\n    NEW_STREAM: MessageTypes.NEW_STREAM,\n    MESSAGE: MessageTypes.MESSAGE_INITIATOR,\n    CLOSE: MessageTypes.CLOSE_INITIATOR,\n    RESET: MessageTypes.RESET_INITIATOR\n});\nexport const ReceiverMessageTypes = Object.freeze({\n    MESSAGE: MessageTypes.MESSAGE_RECEIVER,\n    CLOSE: MessageTypes.CLOSE_RECEIVER,\n    RESET: MessageTypes.RESET_RECEIVER\n});\n//# sourceMappingURL=message-types.js.map","import { Uint8ArrayList } from 'uint8arraylist';\nimport { MessageTypeNames, MessageTypes } from './message-types.js';\nexport const MAX_MSG_SIZE = 1 << 20; // 1MB\nexport const MAX_MSG_QUEUE_SIZE = 4 << 20; // 4MB\nexport class Decoder {\n    _buffer;\n    _headerInfo;\n    _maxMessageSize;\n    _maxUnprocessedMessageQueueSize;\n    constructor(maxMessageSize = MAX_MSG_SIZE, maxUnprocessedMessageQueueSize = MAX_MSG_QUEUE_SIZE) {\n        this._buffer = new Uint8ArrayList();\n        this._headerInfo = null;\n        this._maxMessageSize = maxMessageSize;\n        this._maxUnprocessedMessageQueueSize = maxUnprocessedMessageQueueSize;\n    }\n    write(chunk) {\n        if (chunk == null || chunk.length === 0) {\n            return [];\n        }\n        this._buffer.append(chunk);\n        if (this._buffer.byteLength > this._maxUnprocessedMessageQueueSize) {\n            throw Object.assign(new Error('unprocessed message queue size too large!'), { code: 'ERR_MSG_QUEUE_TOO_BIG' });\n        }\n        const msgs = [];\n        while (this._buffer.length !== 0) {\n            if (this._headerInfo == null) {\n                try {\n                    this._headerInfo = this._decodeHeader(this._buffer);\n                }\n                catch (err) {\n                    if (err.code === 'ERR_MSG_TOO_BIG') {\n                        throw err;\n                    }\n                    break; // We haven't received enough data yet\n                }\n            }\n            const { id, type, length, offset } = this._headerInfo;\n            const bufferedDataLength = this._buffer.length - offset;\n            if (bufferedDataLength < length) {\n                break; // not enough data yet\n            }\n            const msg = {\n                id,\n                type\n            };\n            if (type === MessageTypes.NEW_STREAM || type === MessageTypes.MESSAGE_INITIATOR || type === MessageTypes.MESSAGE_RECEIVER) {\n                msg.data = this._buffer.sublist(offset, offset + length);\n            }\n            msgs.push(msg);\n            this._buffer.consume(offset + length);\n            this._headerInfo = null;\n        }\n        return msgs;\n    }\n    /**\n     * Attempts to decode the message header from the buffer\n     */\n    _decodeHeader(data) {\n        const { value: h, offset } = readVarInt(data);\n        const { value: length, offset: end } = readVarInt(data, offset);\n        const type = h & 7;\n        // @ts-expect-error h is a number not a CODE\n        if (MessageTypeNames[type] == null) {\n            throw new Error(`Invalid type received: ${type}`);\n        }\n        // test message type varint + data length\n        if (length > this._maxMessageSize) {\n            throw Object.assign(new Error('message size too large!'), { code: 'ERR_MSG_TOO_BIG' });\n        }\n        // @ts-expect-error h is a number not a CODE\n        return { id: h >> 3, type, offset: offset + end, length };\n    }\n}\nconst MSB = 0x80;\nconst REST = 0x7F;\nfunction readVarInt(buf, offset = 0) {\n    let res = 0;\n    let shift = 0;\n    let counter = offset;\n    let b;\n    const l = buf.length;\n    do {\n        if (counter >= l || shift > 49) {\n            offset = 0;\n            throw new RangeError('Could not decode varint');\n        }\n        b = buf.get(counter++);\n        res += shift < 28\n            ? (b & REST) << shift\n            : (b & REST) * Math.pow(2, shift);\n        shift += 7;\n    } while (b >= MSB);\n    offset = counter - offset;\n    return {\n        value: res,\n        offset\n    };\n}\n//# sourceMappingURL=decode.js.map","import defer from 'p-defer';\nimport { Uint8ArrayList } from 'uint8arraylist';\nfunction isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nconst DEFAULT_BATCH_SIZE = 1024 * 1024;\nconst DEFAULT_SERIALIZE = (buf, list) => { list.append(buf); };\nfunction batchedBytes(source, options) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            let buffer = new Uint8ArrayList();\n            let ended = false;\n            let deferred = defer();\n            let size = Number(options?.size ?? DEFAULT_BATCH_SIZE);\n            if (isNaN(size) || size === 0 || size < 0) {\n                size = DEFAULT_BATCH_SIZE;\n            }\n            if (size !== Math.round(size)) {\n                throw new Error('Batch size must be an integer');\n            }\n            const yieldAfter = options?.yieldAfter ?? 0;\n            const serialize = options?.serialize ?? DEFAULT_SERIALIZE;\n            void Promise.resolve().then(async () => {\n                try {\n                    let timeout;\n                    for await (const buf of source) {\n                        // @ts-expect-error - if buf is not `Uint8Array | Uint8ArrayList` we cannot use the default serializer\n                        serialize(buf, buffer);\n                        if (buffer.byteLength >= size) {\n                            clearTimeout(timeout);\n                            deferred.resolve();\n                            continue;\n                        }\n                        timeout = setTimeout(() => {\n                            deferred.resolve();\n                        }, yieldAfter);\n                    }\n                    clearTimeout(timeout);\n                    deferred.resolve();\n                }\n                catch (err) {\n                    deferred.reject(err);\n                }\n                finally {\n                    ended = true;\n                }\n            });\n            while (!ended) { // eslint-disable-line no-unmodified-loop-condition\n                await deferred.promise;\n                deferred = defer();\n                if (buffer.byteLength > 0) {\n                    const b = buffer;\n                    buffer = new Uint8ArrayList();\n                    yield b.subarray();\n                }\n            }\n        })();\n    }\n    return (function* () {\n        const buffer = new Uint8ArrayList();\n        let size = Number(options?.size ?? DEFAULT_BATCH_SIZE);\n        if (isNaN(size) || size === 0 || size < 0) {\n            size = DEFAULT_BATCH_SIZE;\n        }\n        if (size !== Math.round(size)) {\n            throw new Error('Batch size must be an integer');\n        }\n        const serialize = options?.serialize ?? DEFAULT_SERIALIZE;\n        for (const buf of source) {\n            // @ts-expect-error - if buf is not `Uint8Array | Uint8ArrayList` we cannot use the default serializer\n            serialize(buf, buffer);\n            if (buffer.byteLength >= size) {\n                yield buffer.subarray(0, size);\n                buffer.consume(size);\n            }\n        }\n        if (buffer.byteLength > 0) {\n            yield buffer.subarray();\n        }\n    })();\n}\nexport default batchedBytes;\n//# sourceMappingURL=index.js.map","import batchedBytes from 'it-batched-bytes';\nimport * as varint from 'uint8-varint';\nimport { Uint8ArrayList } from 'uint8arraylist';\nimport { allocUnsafe } from './alloc-unsafe.js';\nimport { MessageTypes } from './message-types.js';\nconst POOL_SIZE = 10 * 1024;\nclass Encoder {\n    _pool;\n    _poolOffset;\n    constructor() {\n        this._pool = allocUnsafe(POOL_SIZE);\n        this._poolOffset = 0;\n    }\n    /**\n     * Encodes the given message and adds it to the passed list\n     */\n    write(msg, list) {\n        const pool = this._pool;\n        let offset = this._poolOffset;\n        varint.encode(msg.id << 3 | msg.type, pool, offset);\n        offset += varint.encodingLength(msg.id << 3 | msg.type);\n        if ((msg.type === MessageTypes.NEW_STREAM || msg.type === MessageTypes.MESSAGE_INITIATOR || msg.type === MessageTypes.MESSAGE_RECEIVER) && msg.data != null) {\n            varint.encode(msg.data.length, pool, offset);\n            offset += varint.encodingLength(msg.data.length);\n        }\n        else {\n            varint.encode(0, pool, offset);\n            offset += varint.encodingLength(0);\n        }\n        const header = pool.subarray(this._poolOffset, offset);\n        if (POOL_SIZE - offset < 100) {\n            this._pool = allocUnsafe(POOL_SIZE);\n            this._poolOffset = 0;\n        }\n        else {\n            this._poolOffset = offset;\n        }\n        list.append(header);\n        if ((msg.type === MessageTypes.NEW_STREAM || msg.type === MessageTypes.MESSAGE_INITIATOR || msg.type === MessageTypes.MESSAGE_RECEIVER) && msg.data != null) {\n            list.append(msg.data);\n        }\n    }\n}\nconst encoder = new Encoder();\n/**\n * Encode and yield one or more messages\n */\nexport async function* encode(source, minSendBytes = 0) {\n    if (minSendBytes == null || minSendBytes === 0) {\n        // just send the messages\n        for await (const messages of source) {\n            const list = new Uint8ArrayList();\n            for (const msg of messages) {\n                encoder.write(msg, list);\n            }\n            yield list.subarray();\n        }\n        return;\n    }\n    // batch messages up for sending\n    yield* batchedBytes(source, {\n        size: minSendBytes,\n        serialize: (obj, list) => {\n            for (const m of obj) {\n                encoder.write(m, list);\n            }\n        }\n    });\n}\n//# sourceMappingURL=encode.js.map","import { AbstractStream } from '@libp2p/interface/stream-muxer/stream';\nimport { logger } from '@libp2p/logger';\nimport { Uint8ArrayList } from 'uint8arraylist';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport { MAX_MSG_SIZE } from './decode.js';\nimport { InitiatorMessageTypes, ReceiverMessageTypes } from './message-types.js';\nexport class MplexStream extends AbstractStream {\n    name;\n    streamId;\n    send;\n    types;\n    maxDataSize;\n    constructor(init) {\n        super(init);\n        this.types = init.direction === 'outbound' ? InitiatorMessageTypes : ReceiverMessageTypes;\n        this.send = init.send;\n        this.name = init.name;\n        this.streamId = init.streamId;\n        this.maxDataSize = init.maxDataSize;\n    }\n    async sendNewStream() {\n        await this.send({ id: this.streamId, type: InitiatorMessageTypes.NEW_STREAM, data: new Uint8ArrayList(uint8ArrayFromString(this.name)) });\n    }\n    async sendData(data) {\n        data = data.sublist();\n        while (data.byteLength > 0) {\n            const toSend = Math.min(data.byteLength, this.maxDataSize);\n            await this.send({\n                id: this.streamId,\n                type: this.types.MESSAGE,\n                data: data.sublist(0, toSend)\n            });\n            data.consume(toSend);\n        }\n    }\n    async sendReset() {\n        await this.send({ id: this.streamId, type: this.types.RESET });\n    }\n    async sendCloseWrite() {\n        await this.send({ id: this.streamId, type: this.types.CLOSE });\n    }\n    async sendCloseRead() {\n        // mplex does not support close read, only close write\n    }\n}\nexport function createStream(options) {\n    const { id, name, send, onEnd, type = 'initiator', maxMsgSize = MAX_MSG_SIZE } = options;\n    return new MplexStream({\n        id: type === 'initiator' ? (`i${id}`) : `r${id}`,\n        streamId: id,\n        name: `${name == null ? id : name}`,\n        direction: type === 'initiator' ? 'outbound' : 'inbound',\n        maxDataSize: maxMsgSize,\n        onEnd,\n        send,\n        log: logger(`libp2p:mplex:stream:${type}:${id}`)\n    });\n}\n//# sourceMappingURL=stream.js.map","import { CodeError } from '@libp2p/interface/errors';\nimport { logger } from '@libp2p/logger';\nimport { abortableSource } from 'abortable-iterator';\nimport { pipe } from 'it-pipe';\nimport { pushableV } from 'it-pushable';\nimport { RateLimiterMemory } from 'rate-limiter-flexible';\nimport { toString as uint8ArrayToString } from 'uint8arrays';\nimport { Decoder } from './decode.js';\nimport { encode } from './encode.js';\nimport { MessageTypes, MessageTypeNames } from './message-types.js';\nimport { createStream } from './stream.js';\nconst log = logger('libp2p:mplex');\nconst MAX_STREAMS_INBOUND_STREAMS_PER_CONNECTION = 1024;\nconst MAX_STREAMS_OUTBOUND_STREAMS_PER_CONNECTION = 1024;\nconst MAX_STREAM_BUFFER_SIZE = 1024 * 1024 * 4; // 4MB\nconst DISCONNECT_THRESHOLD = 5;\nconst CLOSE_TIMEOUT = 500;\nfunction printMessage(msg) {\n    const output = {\n        ...msg,\n        type: `${MessageTypeNames[msg.type]} (${msg.type})`\n    };\n    if (msg.type === MessageTypes.NEW_STREAM) {\n        output.data = uint8ArrayToString(msg.data instanceof Uint8Array ? msg.data : msg.data.subarray());\n    }\n    if (msg.type === MessageTypes.MESSAGE_INITIATOR || msg.type === MessageTypes.MESSAGE_RECEIVER) {\n        output.data = uint8ArrayToString(msg.data instanceof Uint8Array ? msg.data : msg.data.subarray(), 'base16');\n    }\n    return output;\n}\nexport class MplexStreamMuxer {\n    protocol = '/mplex/6.7.0';\n    sink;\n    source;\n    _streamId;\n    _streams;\n    _init;\n    _source;\n    closeController;\n    rateLimiter;\n    closeTimeout;\n    constructor(init) {\n        init = init ?? {};\n        this._streamId = 0;\n        this._streams = {\n            /**\n             * Stream to ids map\n             */\n            initiators: new Map(),\n            /**\n             * Stream to ids map\n             */\n            receivers: new Map()\n        };\n        this._init = init;\n        this.closeTimeout = init.closeTimeout ?? CLOSE_TIMEOUT;\n        /**\n         * An iterable sink\n         */\n        this.sink = this._createSink();\n        /**\n         * An iterable source\n         */\n        this._source = pushableV({\n            objectMode: true,\n            onEnd: () => {\n                // the source has ended, we can't write any more messages to gracefully\n                // close streams so all we can do is destroy them\n                for (const stream of this._streams.initiators.values()) {\n                    stream.destroy();\n                }\n                for (const stream of this._streams.receivers.values()) {\n                    stream.destroy();\n                }\n            }\n        });\n        this.source = pipe(this._source, source => encode(source, this._init.minSendBytes));\n        /**\n         * Close controller\n         */\n        this.closeController = new AbortController();\n        this.rateLimiter = new RateLimiterMemory({\n            points: init.disconnectThreshold ?? DISCONNECT_THRESHOLD,\n            duration: 1\n        });\n    }\n    /**\n     * Returns a Map of streams and their ids\n     */\n    get streams() {\n        // Inbound and Outbound streams may have the same ids, so we need to make those unique\n        const streams = [];\n        for (const stream of this._streams.initiators.values()) {\n            streams.push(stream);\n        }\n        for (const stream of this._streams.receivers.values()) {\n            streams.push(stream);\n        }\n        return streams;\n    }\n    /**\n     * Initiate a new stream with the given name. If no name is\n     * provided, the id of the stream will be used.\n     */\n    newStream(name) {\n        if (this.closeController.signal.aborted) {\n            throw new Error('Muxer already closed');\n        }\n        const id = this._streamId++;\n        name = name == null ? id.toString() : name.toString();\n        const registry = this._streams.initiators;\n        return this._newStream({ id, name, type: 'initiator', registry });\n    }\n    /**\n     * Close or abort all tracked streams and stop the muxer\n     */\n    async close(options) {\n        if (this.closeController.signal.aborted) {\n            return;\n        }\n        const signal = options?.signal ?? AbortSignal.timeout(this.closeTimeout);\n        try {\n            // try to gracefully close all streams\n            await Promise.all(this.streams.map(async (s) => s.close({\n                signal\n            })));\n            this._source.end();\n            // try to gracefully close the muxer\n            await this._source.onEmpty({\n                signal\n            });\n            this.closeController.abort();\n        }\n        catch (err) {\n            this.abort(err);\n        }\n    }\n    abort(err) {\n        if (this.closeController.signal.aborted) {\n            return;\n        }\n        this.streams.forEach(s => { s.abort(err); });\n        this.closeController.abort(err);\n    }\n    /**\n     * Called whenever an inbound stream is created\n     */\n    _newReceiverStream(options) {\n        const { id, name } = options;\n        const registry = this._streams.receivers;\n        return this._newStream({ id, name, type: 'receiver', registry });\n    }\n    _newStream(options) {\n        const { id, name, type, registry } = options;\n        log('new %s stream %s', type, id);\n        if (type === 'initiator' && this._streams.initiators.size === (this._init.maxOutboundStreams ?? MAX_STREAMS_OUTBOUND_STREAMS_PER_CONNECTION)) {\n            throw new CodeError('Too many outbound streams open', 'ERR_TOO_MANY_OUTBOUND_STREAMS');\n        }\n        if (registry.has(id)) {\n            throw new Error(`${type} stream ${id} already exists!`);\n        }\n        const send = async (msg) => {\n            if (log.enabled) {\n                log.trace('%s stream %s send', type, id, printMessage(msg));\n            }\n            this._source.push(msg);\n        };\n        const onEnd = () => {\n            log('%s stream with id %s and protocol %s ended', type, id, stream.protocol);\n            registry.delete(id);\n            if (this._init.onStreamEnd != null) {\n                this._init.onStreamEnd(stream);\n            }\n        };\n        const stream = createStream({ id, name, send, type, onEnd, maxMsgSize: this._init.maxMsgSize });\n        registry.set(id, stream);\n        return stream;\n    }\n    /**\n     * Creates a sink with an abortable source. Incoming messages will\n     * also have their size restricted. All messages will be varint decoded.\n     */\n    _createSink() {\n        const sink = async (source) => {\n            try {\n                source = abortableSource(source, this.closeController.signal, {\n                    returnOnAbort: true\n                });\n                const decoder = new Decoder(this._init.maxMsgSize, this._init.maxUnprocessedMessageQueueSize);\n                for await (const chunk of source) {\n                    for (const msg of decoder.write(chunk)) {\n                        await this._handleIncoming(msg);\n                    }\n                }\n                this._source.end();\n            }\n            catch (err) {\n                log('error in sink', err);\n                this._source.end(err); // End the source with an error\n            }\n        };\n        return sink;\n    }\n    async _handleIncoming(message) {\n        const { id, type } = message;\n        if (log.enabled) {\n            log.trace('incoming message', printMessage(message));\n        }\n        // Create a new stream?\n        if (message.type === MessageTypes.NEW_STREAM) {\n            if (this._streams.receivers.size === (this._init.maxInboundStreams ?? MAX_STREAMS_INBOUND_STREAMS_PER_CONNECTION)) {\n                log('too many inbound streams open');\n                // not going to allow this stream, send the reset message manually\n                // instead of setting it up just to tear it down\n                this._source.push({\n                    id,\n                    type: MessageTypes.RESET_RECEIVER\n                });\n                // if we've hit our stream limit, and the remote keeps trying to open\n                // more new streams, if they are doing this very quickly maybe they\n                // are attacking us and we should close the connection\n                try {\n                    await this.rateLimiter.consume('new-stream', 1);\n                }\n                catch {\n                    log('rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection');\n                    // since there's no backpressure in mplex, the only thing we can really do to protect ourselves is close the connection\n                    this.abort(new Error('Too many open streams'));\n                    return;\n                }\n                return;\n            }\n            const stream = this._newReceiverStream({ id, name: uint8ArrayToString(message.data instanceof Uint8Array ? message.data : message.data.subarray()) });\n            if (this._init.onIncomingStream != null) {\n                this._init.onIncomingStream(stream);\n            }\n            return;\n        }\n        const list = (type & 1) === 1 ? this._streams.initiators : this._streams.receivers;\n        const stream = list.get(id);\n        if (stream == null) {\n            log('missing stream %s for message type %s', id, MessageTypeNames[type]);\n            // if the remote keeps sending us messages for streams that have been\n            // closed or were never opened they may be attacking us so if they do\n            // this very quickly all we can do is close the connection\n            try {\n                await this.rateLimiter.consume('missing-stream', 1);\n            }\n            catch {\n                log('rate limit hit when receiving messages for streams that do not exist - closing remote connection');\n                // since there's no backpressure in mplex, the only thing we can really do to protect ourselves is close the connection\n                this.abort(new Error('Too many messages for missing streams'));\n                return;\n            }\n            return;\n        }\n        const maxBufferSize = this._init.maxStreamBufferSize ?? MAX_STREAM_BUFFER_SIZE;\n        try {\n            switch (type) {\n                case MessageTypes.MESSAGE_INITIATOR:\n                case MessageTypes.MESSAGE_RECEIVER:\n                    if (stream.sourceReadableLength() > maxBufferSize) {\n                        // Stream buffer has got too large, reset the stream\n                        this._source.push({\n                            id: message.id,\n                            type: type === MessageTypes.MESSAGE_INITIATOR ? MessageTypes.RESET_RECEIVER : MessageTypes.RESET_INITIATOR\n                        });\n                        // Inform the stream consumer they are not fast enough\n                        throw new CodeError('Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers', 'ERR_STREAM_INPUT_BUFFER_FULL');\n                    }\n                    // We got data from the remote, push it into our local stream\n                    stream.sourcePush(message.data);\n                    break;\n                case MessageTypes.CLOSE_INITIATOR:\n                case MessageTypes.CLOSE_RECEIVER:\n                    // The remote has stopped writing, so we can stop reading\n                    stream.remoteCloseWrite();\n                    break;\n                case MessageTypes.RESET_INITIATOR:\n                case MessageTypes.RESET_RECEIVER:\n                    // The remote has errored, stop reading and writing to the stream immediately\n                    stream.reset();\n                    break;\n                default:\n                    log('unknown message type %s', type);\n            }\n        }\n        catch (err) {\n            log.error('error while processing message', err);\n            stream.abort(err);\n        }\n    }\n}\n//# sourceMappingURL=mplex.js.map","import { MplexStreamMuxer } from './mplex.js';\nclass Mplex {\n    protocol = '/mplex/6.7.0';\n    _init;\n    constructor(init = {}) {\n        this._init = init;\n    }\n    createStreamMuxer(init = {}) {\n        return new MplexStreamMuxer({\n            ...init,\n            ...this._init\n        });\n    }\n}\nexport function mplex(init = {}) {\n    return () => new Mplex(init);\n}\n//# sourceMappingURL=index.js.map","import 'node-forge/lib/asn1.js';\nimport 'node-forge/lib/pbe.js';\nimport { CodeError } from '@libp2p/interface/errors';\n// @ts-expect-error types are missing\nimport forge from 'node-forge/lib/forge.js';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport * as Ed25519 from './ed25519-class.js';\nimport generateEphemeralKeyPair from './ephemeral-keys.js';\nimport { importer } from './importer.js';\nimport { keyStretcher } from './key-stretcher.js';\nimport * as keysPBM from './keys.js';\nimport * as RSA from './rsa-class.js';\nimport * as Secp256k1 from './secp256k1-class.js';\nexport { keyStretcher };\nexport { generateEphemeralKeyPair };\nexport { keysPBM };\nexport const supportedKeys = {\n    rsa: RSA,\n    ed25519: Ed25519,\n    secp256k1: Secp256k1\n};\nfunction unsupportedKey(type) {\n    const supported = Object.keys(supportedKeys).join(' / ');\n    return new CodeError(`invalid or unsupported key type ${type}. Must be ${supported}`, 'ERR_UNSUPPORTED_KEY_TYPE');\n}\nfunction typeToKey(type) {\n    type = type.toLowerCase();\n    if (type === 'rsa' || type === 'ed25519' || type === 'secp256k1') {\n        return supportedKeys[type];\n    }\n    throw unsupportedKey(type);\n}\n// Generates a keypair of the given type and bitsize\nexport async function generateKeyPair(type, bits) {\n    return typeToKey(type).generateKeyPair(bits ?? 2048);\n}\n// Generates a keypair of the given type and bitsize\n// seed is a 32 byte uint8array\nexport async function generateKeyPairFromSeed(type, seed, bits) {\n    if (type.toLowerCase() !== 'ed25519') {\n        throw new CodeError('Seed key derivation is unimplemented for RSA or secp256k1', 'ERR_UNSUPPORTED_KEY_DERIVATION_TYPE');\n    }\n    return Ed25519.generateKeyPairFromSeed(seed);\n}\n// Converts a protobuf serialized public key into its\n// representative object\nexport function unmarshalPublicKey(buf) {\n    const decoded = keysPBM.PublicKey.decode(buf);\n    const data = decoded.Data ?? new Uint8Array();\n    switch (decoded.Type) {\n        case keysPBM.KeyType.RSA:\n            return supportedKeys.rsa.unmarshalRsaPublicKey(data);\n        case keysPBM.KeyType.Ed25519:\n            return supportedKeys.ed25519.unmarshalEd25519PublicKey(data);\n        case keysPBM.KeyType.Secp256k1:\n            return supportedKeys.secp256k1.unmarshalSecp256k1PublicKey(data);\n        default:\n            throw unsupportedKey(decoded.Type ?? 'unknown');\n    }\n}\n// Converts a public key object into a protobuf serialized public key\nexport function marshalPublicKey(key, type) {\n    type = (type ?? 'rsa').toLowerCase();\n    typeToKey(type); // check type\n    return key.bytes;\n}\n// Converts a protobuf serialized private key into its\n// representative object\nexport async function unmarshalPrivateKey(buf) {\n    const decoded = keysPBM.PrivateKey.decode(buf);\n    const data = decoded.Data ?? new Uint8Array();\n    switch (decoded.Type) {\n        case keysPBM.KeyType.RSA:\n            return supportedKeys.rsa.unmarshalRsaPrivateKey(data);\n        case keysPBM.KeyType.Ed25519:\n            return supportedKeys.ed25519.unmarshalEd25519PrivateKey(data);\n        case keysPBM.KeyType.Secp256k1:\n            return supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey(data);\n        default:\n            throw unsupportedKey(decoded.Type ?? 'RSA');\n    }\n}\n// Converts a private key object into a protobuf serialized private key\nexport function marshalPrivateKey(key, type) {\n    type = (type ?? 'rsa').toLowerCase();\n    typeToKey(type); // check type\n    return key.bytes;\n}\n/**\n *\n * @param {string} encryptedKey\n * @param {string} password\n */\nexport async function importKey(encryptedKey, password) {\n    try {\n        const key = await importer(encryptedKey, password);\n        return await unmarshalPrivateKey(key);\n    }\n    catch (_) {\n        // Ignore and try the old pem decrypt\n    }\n    // Only rsa supports pem right now\n    const key = forge.pki.decryptRsaPrivateKey(encryptedKey, password);\n    if (key === null) {\n        throw new CodeError('Cannot read the key, most likely the password is wrong or not a RSA key', 'ERR_CANNOT_DECRYPT_PEM');\n    }\n    let der = forge.asn1.toDer(forge.pki.privateKeyToAsn1(key));\n    der = uint8ArrayFromString(der.getBytes(), 'ascii');\n    return supportedKeys.rsa.unmarshalRsaPrivateKey(der);\n}\n//# sourceMappingURL=index.js.map","import { CodeError } from '@libp2p/interface/errors';\nimport { symbol } from '@libp2p/interface/peer-id';\nimport { base58btc } from 'multiformats/bases/base58';\nimport { bases } from 'multiformats/basics';\nimport { CID } from 'multiformats/cid';\nimport * as Digest from 'multiformats/hashes/digest';\nimport { identity } from 'multiformats/hashes/identity';\nimport { sha256 } from 'multiformats/hashes/sha2';\nimport { equals as uint8ArrayEquals } from 'uint8arrays/equals';\nconst inspect = Symbol.for('nodejs.util.inspect.custom');\nconst baseDecoder = Object\n    .values(bases)\n    .map(codec => codec.decoder)\n    // @ts-expect-error https://github.com/multiformats/js-multiformats/issues/141\n    .reduce((acc, curr) => acc.or(curr), bases.identity.decoder);\n// these values are from https://github.com/multiformats/multicodec/blob/master/table.csv\nconst LIBP2P_KEY_CODE = 0x72;\nconst MARSHALLED_ED225519_PUBLIC_KEY_LENGTH = 36;\nconst MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH = 37;\nclass PeerIdImpl {\n    type;\n    multihash;\n    privateKey;\n    publicKey;\n    string;\n    constructor(init) {\n        this.type = init.type;\n        this.multihash = init.multihash;\n        this.privateKey = init.privateKey;\n        // mark string cache as non-enumerable\n        Object.defineProperty(this, 'string', {\n            enumerable: false,\n            writable: true\n        });\n    }\n    get [Symbol.toStringTag]() {\n        return `PeerId(${this.toString()})`;\n    }\n    [symbol] = true;\n    toString() {\n        if (this.string == null) {\n            this.string = base58btc.encode(this.multihash.bytes).slice(1);\n        }\n        return this.string;\n    }\n    // return self-describing String representation\n    // in default format from RFC 0001: https://github.com/libp2p/specs/pull/209\n    toCID() {\n        return CID.createV1(LIBP2P_KEY_CODE, this.multihash);\n    }\n    toBytes() {\n        return this.multihash.bytes;\n    }\n    /**\n     * Returns Multiaddr as a JSON string\n     */\n    toJSON() {\n        return this.toString();\n    }\n    /**\n     * Checks the equality of `this` peer against a given PeerId\n     */\n    equals(id) {\n        if (id instanceof Uint8Array) {\n            return uint8ArrayEquals(this.multihash.bytes, id);\n        }\n        else if (typeof id === 'string') {\n            return peerIdFromString(id).equals(this);\n        }\n        else if (id?.multihash?.bytes != null) {\n            return uint8ArrayEquals(this.multihash.bytes, id.multihash.bytes);\n        }\n        else {\n            throw new Error('not valid Id');\n        }\n    }\n    /**\n     * Returns PeerId as a human-readable string\n     * https://nodejs.org/api/util.html#utilinspectcustom\n     *\n     * @example\n     * ```js\n     * import { peerIdFromString } from '@libp2p/peer-id'\n     *\n     * console.info(peerIdFromString('QmFoo'))\n     * // 'PeerId(QmFoo)'\n     * ```\n     */\n    [inspect]() {\n        return `PeerId(${this.toString()})`;\n    }\n}\nclass RSAPeerIdImpl extends PeerIdImpl {\n    type = 'RSA';\n    publicKey;\n    constructor(init) {\n        super({ ...init, type: 'RSA' });\n        this.publicKey = init.publicKey;\n    }\n}\nclass Ed25519PeerIdImpl extends PeerIdImpl {\n    type = 'Ed25519';\n    publicKey;\n    constructor(init) {\n        super({ ...init, type: 'Ed25519' });\n        this.publicKey = init.multihash.digest;\n    }\n}\nclass Secp256k1PeerIdImpl extends PeerIdImpl {\n    type = 'secp256k1';\n    publicKey;\n    constructor(init) {\n        super({ ...init, type: 'secp256k1' });\n        this.publicKey = init.multihash.digest;\n    }\n}\nexport function createPeerId(init) {\n    if (init.type === 'RSA') {\n        return new RSAPeerIdImpl(init);\n    }\n    if (init.type === 'Ed25519') {\n        return new Ed25519PeerIdImpl(init);\n    }\n    if (init.type === 'secp256k1') {\n        return new Secp256k1PeerIdImpl(init);\n    }\n    throw new CodeError('Type must be \"RSA\", \"Ed25519\" or \"secp256k1\"', 'ERR_INVALID_PARAMETERS');\n}\nexport function peerIdFromPeerId(other) {\n    if (other.type === 'RSA') {\n        return new RSAPeerIdImpl(other);\n    }\n    if (other.type === 'Ed25519') {\n        return new Ed25519PeerIdImpl(other);\n    }\n    if (other.type === 'secp256k1') {\n        return new Secp256k1PeerIdImpl(other);\n    }\n    throw new CodeError('Not a PeerId', 'ERR_INVALID_PARAMETERS');\n}\nexport function peerIdFromString(str, decoder) {\n    decoder = decoder ?? baseDecoder;\n    if (str.charAt(0) === '1' || str.charAt(0) === 'Q') {\n        // identity hash ed25519/secp256k1 key or sha2-256 hash of\n        // rsa public key - base58btc encoded either way\n        const multihash = Digest.decode(base58btc.decode(`z${str}`));\n        if (str.startsWith('12D')) {\n            return new Ed25519PeerIdImpl({ multihash });\n        }\n        else if (str.startsWith('16U')) {\n            return new Secp256k1PeerIdImpl({ multihash });\n        }\n        else {\n            return new RSAPeerIdImpl({ multihash });\n        }\n    }\n    return peerIdFromBytes(baseDecoder.decode(str));\n}\nexport function peerIdFromBytes(buf) {\n    try {\n        const multihash = Digest.decode(buf);\n        if (multihash.code === identity.code) {\n            if (multihash.digest.length === MARSHALLED_ED225519_PUBLIC_KEY_LENGTH) {\n                return new Ed25519PeerIdImpl({ multihash });\n            }\n            else if (multihash.digest.length === MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH) {\n                return new Secp256k1PeerIdImpl({ multihash });\n            }\n        }\n        if (multihash.code === sha256.code) {\n            return new RSAPeerIdImpl({ multihash });\n        }\n    }\n    catch {\n        return peerIdFromCID(CID.decode(buf));\n    }\n    throw new Error('Supplied PeerID CID is invalid');\n}\nexport function peerIdFromCID(cid) {\n    if (cid == null || cid.multihash == null || cid.version == null || (cid.version === 1 && cid.code !== LIBP2P_KEY_CODE)) {\n        throw new Error('Supplied PeerID CID is invalid');\n    }\n    const multihash = cid.multihash;\n    if (multihash.code === sha256.code) {\n        return new RSAPeerIdImpl({ multihash: cid.multihash });\n    }\n    else if (multihash.code === identity.code) {\n        if (multihash.digest.length === MARSHALLED_ED225519_PUBLIC_KEY_LENGTH) {\n            return new Ed25519PeerIdImpl({ multihash: cid.multihash });\n        }\n        else if (multihash.digest.length === MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH) {\n            return new Secp256k1PeerIdImpl({ multihash: cid.multihash });\n        }\n    }\n    throw new Error('Supplied PeerID CID is invalid');\n}\n/**\n * @param publicKey - A marshalled public key\n * @param privateKey - A marshalled private key\n */\nexport async function peerIdFromKeys(publicKey, privateKey) {\n    if (publicKey.length === MARSHALLED_ED225519_PUBLIC_KEY_LENGTH) {\n        return new Ed25519PeerIdImpl({ multihash: Digest.create(identity.code, publicKey), privateKey });\n    }\n    if (publicKey.length === MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH) {\n        return new Secp256k1PeerIdImpl({ multihash: Digest.create(identity.code, publicKey), privateKey });\n    }\n    return new RSAPeerIdImpl({ multihash: await sha256.digest(publicKey), publicKey, privateKey });\n}\n//# sourceMappingURL=index.js.map","/* eslint-disable import/export */\n/* eslint-disable complexity */\n/* eslint-disable @typescript-eslint/no-namespace */\n/* eslint-disable @typescript-eslint/no-unnecessary-boolean-literal-compare */\n/* eslint-disable @typescript-eslint/no-empty-interface */\nimport { enumeration, encodeMessage, decodeMessage, message } from 'protons-runtime';\nexport var IpnsEntry;\n(function (IpnsEntry) {\n    let ValidityType;\n    (function (ValidityType) {\n        ValidityType[\"EOL\"] = \"EOL\";\n    })(ValidityType = IpnsEntry.ValidityType || (IpnsEntry.ValidityType = {}));\n    let __ValidityTypeValues;\n    (function (__ValidityTypeValues) {\n        __ValidityTypeValues[__ValidityTypeValues[\"EOL\"] = 0] = \"EOL\";\n    })(__ValidityTypeValues || (__ValidityTypeValues = {}));\n    (function (ValidityType) {\n        ValidityType.codec = () => {\n            return enumeration(__ValidityTypeValues);\n        };\n    })(ValidityType = IpnsEntry.ValidityType || (IpnsEntry.ValidityType = {}));\n    let _codec;\n    IpnsEntry.codec = () => {\n        if (_codec == null) {\n            _codec = message((obj, w, opts = {}) => {\n                if (opts.lengthDelimited !== false) {\n                    w.fork();\n                }\n                if (obj.value != null) {\n                    w.uint32(10);\n                    w.bytes(obj.value);\n                }\n                if (obj.signatureV1 != null) {\n                    w.uint32(18);\n                    w.bytes(obj.signatureV1);\n                }\n                if (obj.validityType != null) {\n                    w.uint32(24);\n                    IpnsEntry.ValidityType.codec().encode(obj.validityType, w);\n                }\n                if (obj.validity != null) {\n                    w.uint32(34);\n                    w.bytes(obj.validity);\n                }\n                if (obj.sequence != null) {\n                    w.uint32(40);\n                    w.uint64(obj.sequence);\n                }\n                if (obj.ttl != null) {\n                    w.uint32(48);\n                    w.uint64(obj.ttl);\n                }\n                if (obj.pubKey != null) {\n                    w.uint32(58);\n                    w.bytes(obj.pubKey);\n                }\n                if (obj.signatureV2 != null) {\n                    w.uint32(66);\n                    w.bytes(obj.signatureV2);\n                }\n                if (obj.data != null) {\n                    w.uint32(74);\n                    w.bytes(obj.data);\n                }\n                if (opts.lengthDelimited !== false) {\n                    w.ldelim();\n                }\n            }, (reader, length) => {\n                const obj = {};\n                const end = length == null ? reader.len : reader.pos + length;\n                while (reader.pos < end) {\n                    const tag = reader.uint32();\n                    switch (tag >>> 3) {\n                        case 1:\n                            obj.value = reader.bytes();\n                            break;\n                        case 2:\n                            obj.signatureV1 = reader.bytes();\n                            break;\n                        case 3:\n                            obj.validityType = IpnsEntry.ValidityType.codec().decode(reader);\n                            break;\n                        case 4:\n                            obj.validity = reader.bytes();\n                            break;\n                        case 5:\n                            obj.sequence = reader.uint64();\n                            break;\n                        case 6:\n                            obj.ttl = reader.uint64();\n                            break;\n                        case 7:\n                            obj.pubKey = reader.bytes();\n                            break;\n                        case 8:\n                            obj.signatureV2 = reader.bytes();\n                            break;\n                        case 9:\n                            obj.data = reader.bytes();\n                            break;\n                        default:\n                            reader.skipType(tag & 7);\n                            break;\n                    }\n                }\n                return obj;\n            });\n        }\n        return _codec;\n    };\n    IpnsEntry.encode = (obj) => {\n        return encodeMessage(obj, IpnsEntry.codec());\n    };\n    IpnsEntry.decode = (buf) => {\n        return decodeMessage(buf, IpnsEntry.codec());\n    };\n})(IpnsEntry || (IpnsEntry = {}));\n//# sourceMappingURL=ipns.js.map","import { unmarshalPublicKey } from '@libp2p/crypto/keys';\nimport { isPeerId } from '@libp2p/interface/peer-id';\nimport { logger } from '@libp2p/logger';\nimport { peerIdFromBytes, peerIdFromKeys } from '@libp2p/peer-id';\nimport * as cborg from 'cborg';\nimport errCode from 'err-code';\nimport { base36 } from 'multiformats/bases/base36';\nimport { CID } from 'multiformats/cid';\nimport NanoDate from 'timestamp-nano';\nimport { concat as uint8ArrayConcat } from 'uint8arrays/concat';\nimport { equals as uint8ArrayEquals } from 'uint8arrays/equals';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string';\nimport * as ERRORS from './errors.js';\nimport { IpnsEntry } from './pb/ipns.js';\nconst log = logger('ipns:utils');\nconst IPNS_PREFIX = uint8ArrayFromString('/ipns/');\nconst LIBP2P_CID_CODEC = 114;\n/**\n * Convert a JavaScript date into an `RFC3339Nano` formatted\n * string\n */\nexport function toRFC3339(time) {\n    const year = time.getUTCFullYear();\n    const month = String(time.getUTCMonth() + 1).padStart(2, '0');\n    const day = String(time.getUTCDate()).padStart(2, '0');\n    const hour = String(time.getUTCHours()).padStart(2, '0');\n    const minute = String(time.getUTCMinutes()).padStart(2, '0');\n    const seconds = String(time.getUTCSeconds()).padStart(2, '0');\n    const milliseconds = time.getUTCMilliseconds();\n    const nanoseconds = milliseconds * 1000 * 1000;\n    return `${year}-${month}-${day}T${hour}:${minute}:${seconds}.${nanoseconds}Z`;\n}\n/**\n * Parses a date string formatted as `RFC3339Nano` into a\n * JavaScript Date object\n */\nexport function parseRFC3339(time) {\n    const rfc3339Matcher = new RegExp(\n    // 2006-01-02T\n    '(\\\\d{4})-(\\\\d{2})-(\\\\d{2})T' +\n        // 15:04:05\n        '(\\\\d{2}):(\\\\d{2}):(\\\\d{2})' +\n        // .999999999Z\n        '\\\\.(\\\\d+)Z');\n    const m = String(time).trim().match(rfc3339Matcher);\n    if (m == null) {\n        throw new Error('Invalid format');\n    }\n    const year = parseInt(m[1], 10);\n    const month = parseInt(m[2], 10) - 1;\n    const date = parseInt(m[3], 10);\n    const hour = parseInt(m[4], 10);\n    const minute = parseInt(m[5], 10);\n    const second = parseInt(m[6], 10);\n    const millisecond = parseInt(m[7].padEnd(6, '0').slice(0, 3), 10);\n    return new Date(Date.UTC(year, month, date, hour, minute, second, millisecond));\n}\n/**\n * Extracts a public key from the passed PeerId, falling\n * back to the pubKey embedded in the ipns record\n */\nexport const extractPublicKey = async (peerId, record) => {\n    if (record == null || peerId == null) {\n        const error = new Error('one or more of the provided parameters are not defined');\n        log.error(error);\n        throw errCode(error, ERRORS.ERR_UNDEFINED_PARAMETER);\n    }\n    let pubKey;\n    if (record.pubKey != null) {\n        try {\n            pubKey = unmarshalPublicKey(record.pubKey);\n        }\n        catch (err) {\n            log.error(err);\n            throw err;\n        }\n        const otherId = await peerIdFromKeys(record.pubKey);\n        if (!otherId.equals(peerId)) {\n            throw errCode(new Error('Embedded public key did not match PeerID'), ERRORS.ERR_INVALID_EMBEDDED_KEY);\n        }\n    }\n    else if (peerId.publicKey != null) {\n        pubKey = unmarshalPublicKey(peerId.publicKey);\n    }\n    if (pubKey != null) {\n        return pubKey;\n    }\n    throw errCode(new Error('no public key is available'), ERRORS.ERR_UNDEFINED_PARAMETER);\n};\n/**\n * Utility for creating the record data for being signed\n */\nexport const ipnsRecordDataForV1Sig = (value, validityType, validity) => {\n    const validityTypeBuffer = uint8ArrayFromString(validityType);\n    return uint8ArrayConcat([value, validity, validityTypeBuffer]);\n};\n/**\n * Utility for creating the record data for being signed\n */\nexport const ipnsRecordDataForV2Sig = (data) => {\n    const entryData = uint8ArrayFromString('ipns-signature:');\n    return uint8ArrayConcat([entryData, data]);\n};\nexport const marshal = (obj) => {\n    if ('signatureV1' in obj) {\n        return IpnsEntry.encode({\n            value: uint8ArrayFromString(obj.value),\n            signatureV1: obj.signatureV1,\n            validityType: obj.validityType,\n            validity: uint8ArrayFromString(obj.validity.toString()),\n            sequence: obj.sequence,\n            ttl: obj.ttl,\n            pubKey: obj.pubKey,\n            signatureV2: obj.signatureV2,\n            data: obj.data\n        });\n    }\n    else {\n        return IpnsEntry.encode({\n            pubKey: obj.pubKey,\n            signatureV2: obj.signatureV2,\n            data: obj.data\n        });\n    }\n};\nexport function unmarshal(buf) {\n    const message = IpnsEntry.decode(buf);\n    // protobufjs returns bigints as numbers\n    if (message.sequence != null) {\n        message.sequence = BigInt(message.sequence);\n    }\n    // protobufjs returns bigints as numbers\n    if (message.ttl != null) {\n        message.ttl = BigInt(message.ttl);\n    }\n    // Check if we have the data field. If we don't, we fail. We've been producing\n    // V1+V2 records for quite a while and we don't support V1-only records during\n    // validation any more\n    if (message.signatureV2 == null || message.data == null) {\n        throw errCode(new Error('missing data or signatureV2'), ERRORS.ERR_SIGNATURE_VERIFICATION);\n    }\n    const data = parseCborData(message.data);\n    const value = normalizeValue(data.Value);\n    let validity;\n    try {\n        validity = NanoDate.fromDate(parseRFC3339(uint8ArrayToString(data.Validity)));\n    }\n    catch (e) {\n        log.error('unrecognized validity format (not an rfc3339 format)');\n        throw errCode(new Error('unrecognized validity format (not an rfc3339 format)'), ERRORS.ERR_UNRECOGNIZED_FORMAT);\n    }\n    if (message.value != null && message.signatureV1 != null) {\n        // V1+V2\n        validateCborDataMatchesPbData(message);\n        return {\n            value,\n            validityType: IpnsEntry.ValidityType.EOL,\n            validity,\n            sequence: data.Sequence,\n            ttl: data.TTL,\n            pubKey: message.pubKey,\n            signatureV1: message.signatureV1,\n            signatureV2: message.signatureV2,\n            data: message.data\n        };\n    }\n    else if (message.signatureV2 != null) {\n        // V2-only\n        return {\n            value,\n            validityType: IpnsEntry.ValidityType.EOL,\n            validity,\n            sequence: data.Sequence,\n            ttl: data.TTL,\n            pubKey: message.pubKey,\n            signatureV2: message.signatureV2,\n            data: message.data\n        };\n    }\n    else {\n        throw new Error('invalid record: does not include signatureV1 or signatureV2');\n    }\n}\nexport const peerIdToRoutingKey = (peerId) => {\n    return uint8ArrayConcat([\n        IPNS_PREFIX,\n        peerId.toBytes()\n    ]);\n};\nexport const peerIdFromRoutingKey = (key) => {\n    return peerIdFromBytes(key.slice(IPNS_PREFIX.length));\n};\nexport const createCborData = (value, validity, validityType, sequence, ttl) => {\n    let ValidityType;\n    if (validityType === IpnsEntry.ValidityType.EOL) {\n        ValidityType = 0;\n    }\n    else {\n        throw errCode(new Error('Unknown validity type'), ERRORS.ERR_UNRECOGNIZED_VALIDITY);\n    }\n    const data = {\n        Value: value,\n        Validity: validity,\n        ValidityType,\n        Sequence: sequence,\n        TTL: ttl\n    };\n    return cborg.encode(data);\n};\nexport const parseCborData = (buf) => {\n    const data = cborg.decode(buf);\n    if (data.ValidityType === 0) {\n        data.ValidityType = IpnsEntry.ValidityType.EOL;\n    }\n    else {\n        throw errCode(new Error('Unknown validity type'), ERRORS.ERR_UNRECOGNIZED_VALIDITY);\n    }\n    if (Number.isInteger(data.Sequence)) {\n        // sequence must be a BigInt, but DAG-CBOR doesn't preserve this for Numbers within the safe-integer range\n        data.Sequence = BigInt(data.Sequence);\n    }\n    if (Number.isInteger(data.TTL)) {\n        // ttl must be a BigInt, but DAG-CBOR doesn't preserve this for Numbers within the safe-integer range\n        data.TTL = BigInt(data.TTL);\n    }\n    return data;\n};\n/**\n * Normalizes the given record value. It ensures it is a PeerID, a CID or a\n * string starting with '/'. PeerIDs become `/ipns/${cidV1Libp2pKey}`,\n * CIDs become `/ipfs/${cidAsV1}`.\n */\nexport const normalizeValue = (value) => {\n    if (value != null) {\n        // if we have a PeerId, turn it into an ipns path\n        if (isPeerId(value)) {\n            return `/ipns/${value.toCID().toString(base36)}`;\n        }\n        // if the value is bytes, stringify it and see if we have a path\n        if (value instanceof Uint8Array) {\n            const string = uint8ArrayToString(value);\n            if (string.startsWith('/')) {\n                value = string;\n            }\n        }\n        // if we have a path, check it is a valid path\n        const string = value.toString().trim();\n        if (string.startsWith('/') && string.length > 1) {\n            return string;\n        }\n        // if we have a CID, turn it into an ipfs path\n        const cid = CID.asCID(value);\n        if (cid != null) {\n            // PeerID encoded as a CID\n            if (cid.code === LIBP2P_CID_CODEC) {\n                return `/ipns/${cid.toString(base36)}`;\n            }\n            return `/ipfs/${cid.toV1().toString()}`;\n        }\n        // try parsing what we have as CID bytes or a CID string\n        try {\n            if (value instanceof Uint8Array) {\n                return `/ipfs/${CID.decode(value).toV1().toString()}`;\n            }\n            return `/ipfs/${CID.parse(string).toV1().toString()}`;\n        }\n        catch {\n            // fall through\n        }\n    }\n    throw errCode(new Error('Value must be a valid content path starting with /'), ERRORS.ERR_INVALID_VALUE);\n};\nconst validateCborDataMatchesPbData = (entry) => {\n    if (entry.data == null) {\n        throw errCode(new Error('Record data is missing'), ERRORS.ERR_INVALID_RECORD_DATA);\n    }\n    const data = parseCborData(entry.data);\n    if (!uint8ArrayEquals(data.Value, entry.value ?? new Uint8Array(0))) {\n        throw errCode(new Error('Field \"value\" did not match between protobuf and CBOR'), ERRORS.ERR_SIGNATURE_VERIFICATION);\n    }\n    if (!uint8ArrayEquals(data.Validity, entry.validity ?? new Uint8Array(0))) {\n        throw errCode(new Error('Field \"validity\" did not match between protobuf and CBOR'), ERRORS.ERR_SIGNATURE_VERIFICATION);\n    }\n    if (data.ValidityType !== entry.validityType) {\n        throw errCode(new Error('Field \"validityType\" did not match between protobuf and CBOR'), ERRORS.ERR_SIGNATURE_VERIFICATION);\n    }\n    if (data.Sequence !== entry.sequence) {\n        throw errCode(new Error('Field \"sequence\" did not match between protobuf and CBOR'), ERRORS.ERR_SIGNATURE_VERIFICATION);\n    }\n    if (data.TTL !== entry.ttl) {\n        throw errCode(new Error('Field \"ttl\" did not match between protobuf and CBOR'), ERRORS.ERR_SIGNATURE_VERIFICATION);\n    }\n};\n//# sourceMappingURL=utils.js.map","import { unmarshal } from './utils.js';\nexport function ipnsSelector(key, data) {\n    const entries = data.map((buf, index) => ({\n        record: unmarshal(buf),\n        index\n    }));\n    entries.sort((a, b) => {\n        // Before we'd sort based on the signature version. Unmarshal now fails if\n        // a record does not have SignatureV2, so that is no longer needed. V1-only\n        // records haven't been issues in a long time.\n        const aSeq = a.record.sequence;\n        const bSeq = b.record.sequence;\n        // choose later sequence number\n        if (aSeq > bSeq) {\n            return -1;\n        }\n        else if (aSeq < bSeq) {\n            return 1;\n        }\n        // choose longer lived record if sequence numbers the same\n        const recordAValidityDate = a.record.validity.toDate();\n        const recordBValidityDate = b.record.validity.toDate();\n        if (recordAValidityDate.getTime() > recordBValidityDate.getTime()) {\n            return -1;\n        }\n        if (recordAValidityDate.getTime() < recordBValidityDate.getTime()) {\n            return 1;\n        }\n        return 0;\n    });\n    return entries[0].index;\n}\n//# sourceMappingURL=selector.js.map","import { logger } from '@libp2p/logger';\nimport errCode from 'err-code';\nimport * as ERRORS from './errors.js';\nimport { IpnsEntry } from './pb/ipns.js';\nimport { extractPublicKey, ipnsRecordDataForV2Sig, unmarshal, peerIdFromRoutingKey } from './utils.js';\nconst log = logger('ipns:validator');\n/**\n * Limit valid IPNS record sizes to 10kb\n */\nconst MAX_RECORD_SIZE = 1024 * 10;\n/**\n * Validates the given IPNS Record against the given public key. We need a \"raw\"\n * record in order to be able to access to all of its fields.\n */\nexport const validate = async (publicKey, buf) => {\n    // unmarshal ensures that (1) SignatureV2 and Data are present, (2) that ValidityType\n    // and Validity are of valid types and have a value, (3) that CBOR data matches protobuf\n    // if it's a V1+V2 record.\n    const record = unmarshal(buf);\n    // Validate Signature V2\n    let isValid;\n    try {\n        const dataForSignature = ipnsRecordDataForV2Sig(record.data);\n        isValid = await publicKey.verify(dataForSignature, record.signatureV2);\n    }\n    catch (err) {\n        isValid = false;\n    }\n    if (!isValid) {\n        log.error('record signature verification failed');\n        throw errCode(new Error('record signature verification failed'), ERRORS.ERR_SIGNATURE_VERIFICATION);\n    }\n    // Validate according to the validity type\n    if (record.validityType === IpnsEntry.ValidityType.EOL) {\n        if (record.validity.toDate().getTime() < Date.now()) {\n            log.error('record has expired');\n            throw errCode(new Error('record has expired'), ERRORS.ERR_IPNS_EXPIRED_RECORD);\n        }\n    }\n    else if (record.validityType != null) {\n        log.error('unrecognized validity type');\n        throw errCode(new Error('unrecognized validity type'), ERRORS.ERR_UNRECOGNIZED_VALIDITY);\n    }\n    log('ipns record for %b is valid', record.value);\n};\nexport async function ipnsValidator(key, marshalledData) {\n    if (marshalledData.byteLength > MAX_RECORD_SIZE) {\n        throw errCode(new Error('record too large'), ERRORS.ERR_RECORD_TOO_LARGE);\n    }\n    const peerId = peerIdFromRoutingKey(key);\n    const receivedRecord = unmarshal(marshalledData);\n    // extract public key\n    const pubKey = await extractPublicKey(peerId, receivedRecord);\n    // Record validation\n    await validate(pubKey, marshalledData);\n}\n//# sourceMappingURL=validator.js.map","// this list comes from https://github.com/ipfs/kubo/blob/da28fbc65a2e0f1ce59f9923823326ae2bc4f713/config/bootstrap_peers.go#L17\nexport const bootstrapConfig = {\n    list: [\n        '/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN',\n        '/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa',\n        '/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb',\n        '/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt',\n        '/ip4/104.131.131.82/tcp/4001/p2p/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ'\n    ]\n};\n//# sourceMappingURL=bootstrappers.js.map","import { createLibp2p as create } from 'libp2p';\nimport { libp2pDefaults } from './libp2p-defaults.js';\nexport async function createLibp2p(datastore, options) {\n    const defaults = libp2pDefaults();\n    options = options ?? {};\n    return create({\n        datastore,\n        ...defaults,\n        ...options,\n        start: false\n    });\n}\n//# sourceMappingURL=libp2p.js.map","import { gossipsub } from '@chainsafe/libp2p-gossipsub';\nimport { noise } from '@chainsafe/libp2p-noise';\nimport { yamux } from '@chainsafe/libp2p-yamux';\nimport { bootstrap } from '@libp2p/bootstrap';\nimport { ipniContentRouting } from '@libp2p/ipni-content-routing';\nimport { kadDHT } from '@libp2p/kad-dht';\nimport { mplex } from '@libp2p/mplex';\nimport { webRTC, webRTCDirect } from '@libp2p/webrtc';\nimport { webSockets } from '@libp2p/websockets';\nimport { webTransport } from '@libp2p/webtransport';\nimport { ipnsSelector } from 'ipns/selector';\nimport { ipnsValidator } from 'ipns/validator';\nimport { autoNATService } from 'libp2p/autonat';\nimport { circuitRelayTransport } from 'libp2p/circuit-relay';\nimport { dcutrService } from 'libp2p/dcutr';\nimport { identifyService } from 'libp2p/identify';\nimport { pingService } from 'libp2p/ping';\nimport { bootstrapConfig } from './bootstrappers.js';\nexport function libp2pDefaults() {\n    return {\n        addresses: {\n            listen: [\n                '/webrtc'\n            ]\n        },\n        transports: [\n            circuitRelayTransport({\n                discoverRelays: 1\n            }),\n            webRTC(),\n            webRTCDirect(),\n            webTransport(),\n            webSockets()\n        ],\n        connectionEncryption: [\n            noise()\n        ],\n        streamMuxers: [\n            yamux(),\n            mplex()\n        ],\n        peerDiscovery: [\n            bootstrap(bootstrapConfig)\n        ],\n        contentRouters: [\n            ipniContentRouting('https://cid.contact')\n        ],\n        services: {\n            identify: identifyService(),\n            autoNAT: autoNATService(),\n            pubsub: gossipsub(),\n            dcutr: dcutrService(),\n            dht: kadDHT({\n                clientMode: true,\n                validators: {\n                    ipns: ipnsValidator\n                },\n                selectors: {\n                    ipns: ipnsSelector\n                }\n            }),\n            ping: pingService()\n        }\n    };\n}\n//# sourceMappingURL=libp2p-defaults.browser.js.map","/**\n * @packageDocumentation\n *\n * Create a Helia node.\n *\n * @example\n *\n * ```typescript\n * import { MemoryDatastore } from 'datastore-core'\n * import { MemoryBlockstore } from 'blockstore-core'\n * import { createHelia } from 'helia'\n * import { unixfs } from '@helia/unixfs'\n * import { CID } from 'multiformats/cid'\n *\n * const node = await createHelia({\n *   blockstore: new MemoryBlockstore(),\n *   datastore: new MemoryDatastore()\n * })\n * const fs = unixfs(node)\n * fs.cat(CID.parse('bafyFoo'))\n * ```\n */\nimport { logger } from '@libp2p/logger';\nimport { MemoryBlockstore } from 'blockstore-core';\nimport { MemoryDatastore } from 'datastore-core';\nimport { HeliaImpl } from './helia.js';\nimport { createLibp2p } from './utils/libp2p.js';\nimport { name, version } from './version.js';\n// re-export interface types so people don't have to depend on @helia/interface\n// if they don't want to\nexport * from '@helia/interface';\nexport * from '@helia/interface/blocks';\nexport * from '@helia/interface/pins';\nconst log = logger('helia');\nexport async function createHelia(init = {}) {\n    const datastore = init.datastore ?? new MemoryDatastore();\n    const blockstore = init.blockstore ?? new MemoryBlockstore();\n    let libp2p;\n    if (isLibp2p(init.libp2p)) {\n        libp2p = init.libp2p;\n    }\n    else {\n        libp2p = await createLibp2p(datastore, init.libp2p);\n    }\n    const helia = new HeliaImpl({\n        ...init,\n        datastore,\n        blockstore,\n        libp2p\n    });\n    if (init.start !== false) {\n        await helia.start();\n    }\n    // add helia to agent version\n    addHeliaToAgentVersion(helia);\n    return helia;\n}\nfunction isLibp2p(obj) {\n    if (obj == null) {\n        return false;\n    }\n    // a non-exhaustive list of methods found on the libp2p object\n    const funcs = ['dial', 'dialProtocol', 'hangUp', 'handle', 'unhandle', 'getMultiaddrs', 'getProtocols'];\n    // if these are all functions it's probably a libp2p object\n    return funcs.every(m => typeof obj[m] === 'function');\n}\nfunction addHeliaToAgentVersion(helia) {\n    // add helia to agent version\n    try {\n        const existingAgentVersion = helia.libp2p.services.identify.host.agentVersion;\n        if (existingAgentVersion.match(/js-libp2p\\/\\d+\\.\\d+\\.\\d+\\sUserAgent=/) == null) {\n            // the user changed the agent version\n            return;\n        }\n        helia.libp2p.services.identify.host.agentVersion = `${name}/${version} ${helia.libp2p.services.identify.host.agentVersion}`;\n    }\n    catch (err) {\n        log.error('could not add Helia to agent version', err);\n    }\n}\n//# sourceMappingURL=index.js.map","export const version = '2.0.3';\nexport const name = 'helia';\n//# sourceMappingURL=version.js.map","/* eslint-disable import/export */\n/* eslint-disable complexity */\n/* eslint-disable @typescript-eslint/no-namespace */\n/* eslint-disable @typescript-eslint/no-unnecessary-boolean-literal-compare */\n/* eslint-disable @typescript-eslint/no-empty-interface */\nimport { enumeration, encodeMessage, decodeMessage, message } from 'protons-runtime';\nexport var KeyType;\n(function (KeyType) {\n    KeyType[\"RSA\"] = \"RSA\";\n    KeyType[\"Ed25519\"] = \"Ed25519\";\n    KeyType[\"Secp256k1\"] = \"Secp256k1\";\n})(KeyType || (KeyType = {}));\nvar __KeyTypeValues;\n(function (__KeyTypeValues) {\n    __KeyTypeValues[__KeyTypeValues[\"RSA\"] = 0] = \"RSA\";\n    __KeyTypeValues[__KeyTypeValues[\"Ed25519\"] = 1] = \"Ed25519\";\n    __KeyTypeValues[__KeyTypeValues[\"Secp256k1\"] = 2] = \"Secp256k1\";\n})(__KeyTypeValues || (__KeyTypeValues = {}));\n(function (KeyType) {\n    KeyType.codec = () => {\n        return enumeration(__KeyTypeValues);\n    };\n})(KeyType || (KeyType = {}));\nexport var PublicKey;\n(function (PublicKey) {\n    let _codec;\n    PublicKey.codec = () => {\n        if (_codec == null) {\n            _codec = message((obj, w, opts = {}) => {\n                if (opts.lengthDelimited !== false) {\n                    w.fork();\n                }\n                if (obj.Type != null) {\n                    w.uint32(8);\n                    KeyType.codec().encode(obj.Type, w);\n                }\n                if (obj.Data != null) {\n                    w.uint32(18);\n                    w.bytes(obj.Data);\n                }\n                if (opts.lengthDelimited !== false) {\n                    w.ldelim();\n                }\n            }, (reader, length) => {\n                const obj = {};\n                const end = length == null ? reader.len : reader.pos + length;\n                while (reader.pos < end) {\n                    const tag = reader.uint32();\n                    switch (tag >>> 3) {\n                        case 1:\n                            obj.Type = KeyType.codec().decode(reader);\n                            break;\n                        case 2:\n                            obj.Data = reader.bytes();\n                            break;\n                        default:\n                            reader.skipType(tag & 7);\n                            break;\n                    }\n                }\n                return obj;\n            });\n        }\n        return _codec;\n    };\n    PublicKey.encode = (obj) => {\n        return encodeMessage(obj, PublicKey.codec());\n    };\n    PublicKey.decode = (buf) => {\n        return decodeMessage(buf, PublicKey.codec());\n    };\n})(PublicKey || (PublicKey = {}));\nexport var PrivateKey;\n(function (PrivateKey) {\n    let _codec;\n    PrivateKey.codec = () => {\n        if (_codec == null) {\n            _codec = message((obj, w, opts = {}) => {\n                if (opts.lengthDelimited !== false) {\n                    w.fork();\n                }\n                if (obj.Type != null) {\n                    w.uint32(8);\n                    KeyType.codec().encode(obj.Type, w);\n                }\n                if (obj.Data != null) {\n                    w.uint32(18);\n                    w.bytes(obj.Data);\n                }\n                if (opts.lengthDelimited !== false) {\n                    w.ldelim();\n                }\n            }, (reader, length) => {\n                const obj = {};\n                const end = length == null ? reader.len : reader.pos + length;\n                while (reader.pos < end) {\n                    const tag = reader.uint32();\n                    switch (tag >>> 3) {\n                        case 1:\n                            obj.Type = KeyType.codec().decode(reader);\n                            break;\n                        case 2:\n                            obj.Data = reader.bytes();\n                            break;\n                        default:\n                            reader.skipType(tag & 7);\n                            break;\n                    }\n                }\n                return obj;\n            });\n        }\n        return _codec;\n    };\n    PrivateKey.encode = (obj) => {\n        return encodeMessage(obj, PrivateKey.codec());\n    };\n    PrivateKey.decode = (buf) => {\n        return decodeMessage(buf, PrivateKey.codec());\n    };\n})(PrivateKey || (PrivateKey = {}));\n//# sourceMappingURL=keys.js.map","/**\n * Returns true if the two passed Uint8Arrays have the same content\n */\nexport function equals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (a.byteLength !== b.byteLength) {\n        return false;\n    }\n    for (let i = 0; i < a.byteLength; i++) {\n        if (a[i] !== b[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=equals.js.map","// Use Uint8Array directly in the browser, use Buffer in Node.js but don't\n// speak its name directly to avoid bundlers pulling in the `Buffer` polyfill\n\n// @ts-ignore\nexport const useBuffer = globalThis.process &&\n  // @ts-ignore\n  !globalThis.process.browser &&\n  // @ts-ignore\n  globalThis.Buffer &&\n  // @ts-ignore\n  typeof globalThis.Buffer.isBuffer === 'function'\n\nconst textDecoder = new TextDecoder()\nconst textEncoder = new TextEncoder()\n\n/**\n * @param {Uint8Array} buf\n * @returns {boolean}\n */\nfunction isBuffer (buf) {\n  // @ts-ignore\n  return useBuffer && globalThis.Buffer.isBuffer(buf)\n}\n\n/**\n * @param {Uint8Array|number[]} buf\n * @returns {Uint8Array}\n */\nexport function asU8A (buf) {\n  /* c8 ignore next */\n  if (!(buf instanceof Uint8Array)) {\n    return Uint8Array.from(buf)\n  }\n  return isBuffer(buf) ? new Uint8Array(buf.buffer, buf.byteOffset, buf.byteLength) : buf\n}\n\nexport const toString = useBuffer\n  ? // eslint-disable-line operator-linebreak\n    /**\n     * @param {Uint8Array} bytes\n     * @param {number} start\n     * @param {number} end\n     */\n    (bytes, start, end) => {\n      return end - start > 64\n        ? // eslint-disable-line operator-linebreak\n      // @ts-ignore\n        globalThis.Buffer.from(bytes.subarray(start, end)).toString('utf8')\n        : utf8Slice(bytes, start, end)\n    }\n  /* c8 ignore next 11 */\n  : // eslint-disable-line operator-linebreak\n    /**\n     * @param {Uint8Array} bytes\n     * @param {number} start\n     * @param {number} end\n     */\n    (bytes, start, end) => {\n      return end - start > 64\n        ? textDecoder.decode(bytes.subarray(start, end))\n        : utf8Slice(bytes, start, end)\n    }\n\nexport const fromString = useBuffer\n  ? // eslint-disable-line operator-linebreak\n    /**\n     * @param {string} string\n     */\n    (string) => {\n      return string.length > 64\n        ? // eslint-disable-line operator-linebreak\n      // @ts-ignore\n        globalThis.Buffer.from(string)\n        : utf8ToBytes(string)\n    }\n  /* c8 ignore next 7 */\n  : // eslint-disable-line operator-linebreak\n    /**\n     * @param {string} string\n     */\n    (string) => {\n      return string.length > 64 ? textEncoder.encode(string) : utf8ToBytes(string)\n    }\n\n/**\n * Buffer variant not fast enough for what we need\n * @param {number[]} arr\n * @returns {Uint8Array}\n */\nexport const fromArray = (arr) => {\n  return Uint8Array.from(arr)\n}\n\nexport const slice = useBuffer\n  ? // eslint-disable-line operator-linebreak\n    /**\n     * @param {Uint8Array} bytes\n     * @param {number} start\n     * @param {number} end\n     */\n    (bytes, start, end) => {\n      if (isBuffer(bytes)) {\n        return new Uint8Array(bytes.subarray(start, end))\n      }\n      return bytes.slice(start, end)\n    }\n  /* c8 ignore next 9 */\n  : // eslint-disable-line operator-linebreak\n    /**\n     * @param {Uint8Array} bytes\n     * @param {number} start\n     * @param {number} end\n     */\n    (bytes, start, end) => {\n      return bytes.slice(start, end)\n    }\n\nexport const concat = useBuffer\n  ? // eslint-disable-line operator-linebreak\n    /**\n     * @param {Uint8Array[]} chunks\n     * @param {number} length\n     * @returns {Uint8Array}\n     */\n    (chunks, length) => {\n      // might get a stray plain Array here\n      /* c8 ignore next 1 */\n      chunks = chunks.map((c) => c instanceof Uint8Array\n        ? c\n        // this case is occasionally missed during test runs so becomes coverage-flaky\n        /* c8 ignore next 4 */\n        : // eslint-disable-line operator-linebreak\n        // @ts-ignore\n        globalThis.Buffer.from(c))\n      // @ts-ignore\n      return asU8A(globalThis.Buffer.concat(chunks, length))\n    }\n  /* c8 ignore next 19 */\n  : // eslint-disable-line operator-linebreak\n    /**\n     * @param {Uint8Array[]} chunks\n     * @param {number} length\n     * @returns {Uint8Array}\n     */\n    (chunks, length) => {\n      const out = new Uint8Array(length)\n      let off = 0\n      for (let b of chunks) {\n        if (off + b.length > out.length) {\n          // final chunk that's bigger than we need\n          b = b.subarray(0, out.length - off)\n        }\n        out.set(b, off)\n        off += b.length\n      }\n      return out\n    }\n\nexport const alloc = useBuffer\n  ? // eslint-disable-line operator-linebreak\n    /**\n     * @param {number} size\n     * @returns {Uint8Array}\n     */\n    (size) => {\n      // we always write over the contents we expose so this should be safe\n      // @ts-ignore\n      return globalThis.Buffer.allocUnsafe(size)\n    }\n  /* c8 ignore next 8 */\n  : // eslint-disable-line operator-linebreak\n    /**\n     * @param {number} size\n     * @returns {Uint8Array}\n     */\n    (size) => {\n      return new Uint8Array(size)\n    }\n\nexport const toHex = useBuffer\n  ? // eslint-disable-line operator-linebreak\n    /**\n     * @param {Uint8Array} d\n     * @returns {string}\n     */\n    (d) => {\n      if (typeof d === 'string') {\n        return d\n      }\n      // @ts-ignore\n      return globalThis.Buffer.from(toBytes(d)).toString('hex')\n    }\n  /* c8 ignore next 12 */\n  : // eslint-disable-line operator-linebreak\n    /**\n     * @param {Uint8Array} d\n     * @returns {string}\n     */\n    (d) => {\n      if (typeof d === 'string') {\n        return d\n      }\n      // @ts-ignore not smart enough to figure this out\n      return Array.prototype.reduce.call(toBytes(d), (p, c) => `${p}${c.toString(16).padStart(2, '0')}`, '')\n    }\n\nexport const fromHex = useBuffer\n  ? // eslint-disable-line operator-linebreak\n  /**\n   * @param {string|Uint8Array} hex\n   * @returns {Uint8Array}\n   */\n    (hex) => {\n      if (hex instanceof Uint8Array) {\n        return hex\n      }\n      // @ts-ignore\n      return globalThis.Buffer.from(hex, 'hex')\n    }\n  /* c8 ignore next 17 */\n  : // eslint-disable-line operator-linebreak\n  /**\n   * @param {string|Uint8Array} hex\n   * @returns {Uint8Array}\n   */\n    (hex) => {\n      if (hex instanceof Uint8Array) {\n        return hex\n      }\n      if (!hex.length) {\n        return new Uint8Array(0)\n      }\n      return new Uint8Array(hex.split('')\n        .map((/** @type {string} */ c, /** @type {number} */ i, /** @type {string[]} */ d) => i % 2 === 0 ? `0x${c}${d[i + 1]}` : '')\n        .filter(Boolean)\n        .map((/** @type {string} */ e) => parseInt(e, 16)))\n    }\n\n/**\n * @param {Uint8Array|ArrayBuffer|ArrayBufferView} obj\n * @returns {Uint8Array}\n */\nfunction toBytes (obj) {\n  if (obj instanceof Uint8Array && obj.constructor.name === 'Uint8Array') {\n    return obj\n  }\n  if (obj instanceof ArrayBuffer) {\n    return new Uint8Array(obj)\n  }\n  if (ArrayBuffer.isView(obj)) {\n    return new Uint8Array(obj.buffer, obj.byteOffset, obj.byteLength)\n  }\n  /* c8 ignore next */\n  throw new Error('Unknown type, must be binary type')\n}\n\n/**\n * @param {Uint8Array} b1\n * @param {Uint8Array} b2\n * @returns {number}\n */\nexport function compare (b1, b2) {\n  /* c8 ignore next 5 */\n  if (isBuffer(b1) && isBuffer(b2)) {\n    // probably not possible to get here in the current API\n    // @ts-ignore Buffer\n    return b1.compare(b2)\n  }\n  for (let i = 0; i < b1.length; i++) {\n    if (b1[i] === b2[i]) {\n      continue\n    }\n    return b1[i] < b2[i] ? -1 : 1\n  } /* c8 ignore next 3 */\n  return 0\n}\n\n// The below code is taken from https://github.com/google/closure-library/blob/8598d87242af59aac233270742c8984e2b2bdbe0/closure/goog/crypt/crypt.js#L117-L143\n// Licensed Apache-2.0.\n\n/**\n * @param {string} str\n * @returns {number[]}\n */\nfunction utf8ToBytes (str) {\n  const out = []\n  let p = 0\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i)\n    if (c < 128) {\n      out[p++] = c\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192\n      out[p++] = (c & 63) | 128\n    } else if (\n      ((c & 0xFC00) === 0xD800) && (i + 1) < str.length &&\n      ((str.charCodeAt(i + 1) & 0xFC00) === 0xDC00)) {\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03FF) << 10) + (str.charCodeAt(++i) & 0x03FF)\n      out[p++] = (c >> 18) | 240\n      out[p++] = ((c >> 12) & 63) | 128\n      out[p++] = ((c >> 6) & 63) | 128\n      out[p++] = (c & 63) | 128\n    } else {\n      out[p++] = (c >> 12) | 224\n      out[p++] = ((c >> 6) & 63) | 128\n      out[p++] = (c & 63) | 128\n    }\n  }\n  return out\n}\n\n// The below code is mostly taken from https://github.com/feross/buffer\n// Licensed MIT. Copyright (c) Feross Aboukhadijeh\n\n/**\n * @param {Uint8Array} buf\n * @param {number} offset\n * @param {number} end\n * @returns {string}\n */\nfunction utf8Slice (buf, offset, end) {\n  const res = []\n\n  while (offset < end) {\n    const firstByte = buf[offset]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xef) ? 4 : (firstByte > 0xdf) ? 3 : (firstByte > 0xbf) ? 2 : 1\n\n    if (offset + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[offset + 1]\n          if ((secondByte & 0xc0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1f) << 0x6 | (secondByte & 0x3f)\n            if (tempCodePoint > 0x7f) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[offset + 1]\n          thirdByte = buf[offset + 2]\n          if ((secondByte & 0xc0) === 0x80 && (thirdByte & 0xc0) === 0x80) {\n            tempCodePoint = (firstByte & 0xf) << 0xc | (secondByte & 0x3f) << 0x6 | (thirdByte & 0x3f)\n            /* c8 ignore next 3 */\n            if (tempCodePoint > 0x7ff && (tempCodePoint < 0xd800 || tempCodePoint > 0xdfff)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[offset + 1]\n          thirdByte = buf[offset + 2]\n          fourthByte = buf[offset + 3]\n          if ((secondByte & 0xc0) === 0x80 && (thirdByte & 0xc0) === 0x80 && (fourthByte & 0xc0) === 0x80) {\n            tempCodePoint = (firstByte & 0xf) << 0x12 | (secondByte & 0x3f) << 0xc | (thirdByte & 0x3f) << 0x6 | (fourthByte & 0x3f)\n            if (tempCodePoint > 0xffff && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    /* c8 ignore next 5 */\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xfffd\n      bytesPerSequence = 1\n    } else if (codePoint > 0xffff) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3ff | 0xd800)\n      codePoint = 0xdc00 | codePoint & 0x3ff\n    }\n\n    res.push(codePoint)\n    offset += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\n/**\n * @param {number[]} codePoints\n * @returns {string}\n */\nexport function decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n  /* c8 ignore next 10 */\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n","const decodeErrPrefix = 'CBOR decode error:'\nconst encodeErrPrefix = 'CBOR encode error:'\n\nconst uintMinorPrefixBytes = []\nuintMinorPrefixBytes[23] = 1\nuintMinorPrefixBytes[24] = 2\nuintMinorPrefixBytes[25] = 3\nuintMinorPrefixBytes[26] = 5\nuintMinorPrefixBytes[27] = 9\n\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} need\n */\nfunction assertEnoughData (data, pos, need) {\n  if (data.length - pos < need) {\n    throw new Error(`${decodeErrPrefix} not enough data for type`)\n  }\n}\n\nexport {\n  decodeErrPrefix,\n  encodeErrPrefix,\n  uintMinorPrefixBytes,\n  assertEnoughData\n}\n","import { decodeErrPrefix } from './common.js'\nimport { Type } from './token.js'\nimport { jump, quick } from './jump.js'\n\n/**\n * @typedef {import('./token.js').Token} Token\n * @typedef {import('../interface').DecodeOptions} DecodeOptions\n * @typedef {import('../interface').DecodeTokenizer} DecodeTokenizer\n */\n\nconst defaultDecodeOptions = {\n  strict: false,\n  allowIndefinite: true,\n  allowUndefined: true,\n  allowBigInt: true\n}\n\n/**\n * @implements {DecodeTokenizer}\n */\nclass Tokeniser {\n  /**\n   * @param {Uint8Array} data\n   * @param {DecodeOptions} options\n   */\n  constructor (data, options = {}) {\n    this._pos = 0\n    this.data = data\n    this.options = options\n  }\n\n  pos () {\n    return this._pos\n  }\n\n  done () {\n    return this._pos >= this.data.length\n  }\n\n  next () {\n    const byt = this.data[this._pos]\n    let token = quick[byt]\n    if (token === undefined) {\n      const decoder = jump[byt]\n      /* c8 ignore next 4 */\n      // if we're here then there's something wrong with our jump or quick lists!\n      if (!decoder) {\n        throw new Error(`${decodeErrPrefix} no decoder for major type ${byt >>> 5} (byte 0x${byt.toString(16).padStart(2, '0')})`)\n      }\n      const minor = byt & 31\n      token = decoder(this.data, this._pos, minor, this.options)\n    }\n    // @ts-ignore we get to assume encodedLength is set (crossing fingers slightly)\n    this._pos += token.encodedLength\n    return token\n  }\n}\n\nconst DONE = Symbol.for('DONE')\nconst BREAK = Symbol.for('BREAK')\n\n/**\n * @param {Token} token\n * @param {DecodeTokenizer} tokeniser\n * @param {DecodeOptions} options\n * @returns {any|BREAK|DONE}\n */\nfunction tokenToArray (token, tokeniser, options) {\n  const arr = []\n  for (let i = 0; i < token.value; i++) {\n    const value = tokensToObject(tokeniser, options)\n    if (value === BREAK) {\n      if (token.value === Infinity) {\n        // normal end to indefinite length array\n        break\n      }\n      throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)\n    }\n    if (value === DONE) {\n      throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${i}, expected ${token.value})`)\n    }\n    arr[i] = value\n  }\n  return arr\n}\n\n/**\n * @param {Token} token\n * @param {DecodeTokenizer} tokeniser\n * @param {DecodeOptions} options\n * @returns {any|BREAK|DONE}\n */\nfunction tokenToMap (token, tokeniser, options) {\n  const useMaps = options.useMaps === true\n  const obj = useMaps ? undefined : {}\n  const m = useMaps ? new Map() : undefined\n  for (let i = 0; i < token.value; i++) {\n    const key = tokensToObject(tokeniser, options)\n    if (key === BREAK) {\n      if (token.value === Infinity) {\n        // normal end to indefinite length map\n        break\n      }\n      throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)\n    }\n    if (key === DONE) {\n      throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${i} [no key], expected ${token.value})`)\n    }\n    if (useMaps !== true && typeof key !== 'string') {\n      throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof key})`)\n    }\n    if (options.rejectDuplicateMapKeys === true) {\n      // @ts-ignore\n      if ((useMaps && m.has(key)) || (!useMaps && (key in obj))) {\n        throw new Error(`${decodeErrPrefix} found repeat map key \"${key}\"`)\n      }\n    }\n    const value = tokensToObject(tokeniser, options)\n    if (value === DONE) {\n      throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${i} [no value], expected ${token.value})`)\n    }\n    if (useMaps) {\n      // @ts-ignore TODO reconsider this .. maybe needs to be strict about key types\n      m.set(key, value)\n    } else {\n      // @ts-ignore TODO reconsider this .. maybe needs to be strict about key types\n      obj[key] = value\n    }\n  }\n  // @ts-ignore c'mon man\n  return useMaps ? m : obj\n}\n\n/**\n * @param {DecodeTokenizer} tokeniser\n * @param {DecodeOptions} options\n * @returns {any|BREAK|DONE}\n */\nfunction tokensToObject (tokeniser, options) {\n  // should we support array as an argument?\n  // check for tokenIter[Symbol.iterator] and replace tokenIter with what that returns?\n  if (tokeniser.done()) {\n    return DONE\n  }\n\n  const token = tokeniser.next()\n\n  if (token.type === Type.break) {\n    return BREAK\n  }\n\n  if (token.type.terminal) {\n    return token.value\n  }\n\n  if (token.type === Type.array) {\n    return tokenToArray(token, tokeniser, options)\n  }\n\n  if (token.type === Type.map) {\n    return tokenToMap(token, tokeniser, options)\n  }\n\n  if (token.type === Type.tag) {\n    if (options.tags && typeof options.tags[token.value] === 'function') {\n      const tagged = tokensToObject(tokeniser, options)\n      return options.tags[token.value](tagged)\n    }\n    throw new Error(`${decodeErrPrefix} tag not supported (${token.value})`)\n  }\n  /* c8 ignore next */\n  throw new Error('unsupported')\n}\n\n/**\n * @param {Uint8Array} data\n * @param {DecodeOptions} [options]\n * @returns {[any, Uint8Array]}\n */\nfunction decodeFirst (data, options) {\n  if (!(data instanceof Uint8Array)) {\n    throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`)\n  }\n  options = Object.assign({}, defaultDecodeOptions, options)\n  const tokeniser = options.tokenizer || new Tokeniser(data, options)\n  const decoded = tokensToObject(tokeniser, options)\n  if (decoded === DONE) {\n    throw new Error(`${decodeErrPrefix} did not find any content to decode`)\n  }\n  if (decoded === BREAK) {\n    throw new Error(`${decodeErrPrefix} got unexpected break`)\n  }\n  return [decoded, data.subarray(tokeniser.pos())]\n}\n\n/**\n * @param {Uint8Array} data\n * @param {DecodeOptions} [options]\n * @returns {any}\n */\nfunction decode (data, options) {\n  const [decoded, remainder] = decodeFirst(data, options)\n  if (remainder.length > 0) {\n    throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`)\n  }\n  return decoded\n}\n\nexport { Tokeniser, tokensToObject, decode, decodeFirst }\n","import { is } from './is.js'\nimport { Token, Type } from './token.js'\nimport { Bl } from './bl.js'\nimport { encodeErrPrefix } from './common.js'\nimport { quickEncodeToken } from './jump.js'\nimport { asU8A } from './byte-utils.js'\n\nimport { encodeUint } from './0uint.js'\nimport { encodeNegint } from './1negint.js'\nimport { encodeBytes } from './2bytes.js'\nimport { encodeString } from './3string.js'\nimport { encodeArray } from './4array.js'\nimport { encodeMap } from './5map.js'\nimport { encodeTag } from './6tag.js'\nimport { encodeFloat } from './7float.js'\n\n/**\n * @typedef {import('../interface').EncodeOptions} EncodeOptions\n * @typedef {import('../interface').OptionalTypeEncoder} OptionalTypeEncoder\n * @typedef {import('../interface').Reference} Reference\n * @typedef {import('../interface').StrictTypeEncoder} StrictTypeEncoder\n * @typedef {import('../interface').TokenTypeEncoder} TokenTypeEncoder\n * @typedef {import('../interface').TokenOrNestedTokens} TokenOrNestedTokens\n */\n\n/** @type {EncodeOptions} */\nconst defaultEncodeOptions = {\n  float64: false,\n  mapSorter,\n  quickEncodeToken\n}\n\n/** @returns {TokenTypeEncoder[]} */\nexport function makeCborEncoders () {\n  const encoders = []\n  encoders[Type.uint.major] = encodeUint\n  encoders[Type.negint.major] = encodeNegint\n  encoders[Type.bytes.major] = encodeBytes\n  encoders[Type.string.major] = encodeString\n  encoders[Type.array.major] = encodeArray\n  encoders[Type.map.major] = encodeMap\n  encoders[Type.tag.major] = encodeTag\n  encoders[Type.float.major] = encodeFloat\n  return encoders\n}\n\nconst cborEncoders = makeCborEncoders()\n\nconst buf = new Bl()\n\n/** @implements {Reference} */\nclass Ref {\n  /**\n   * @param {object|any[]} obj\n   * @param {Reference|undefined} parent\n   */\n  constructor (obj, parent) {\n    this.obj = obj\n    this.parent = parent\n  }\n\n  /**\n   * @param {object|any[]} obj\n   * @returns {boolean}\n   */\n  includes (obj) {\n    /** @type {Reference|undefined} */\n    let p = this\n    do {\n      if (p.obj === obj) {\n        return true\n      }\n    } while (p = p.parent) // eslint-disable-line\n    return false\n  }\n\n  /**\n   * @param {Reference|undefined} stack\n   * @param {object|any[]} obj\n   * @returns {Reference}\n   */\n  static createCheck (stack, obj) {\n    if (stack && stack.includes(obj)) {\n      throw new Error(`${encodeErrPrefix} object contains circular references`)\n    }\n    return new Ref(obj, stack)\n  }\n}\n\nconst simpleTokens = {\n  null: new Token(Type.null, null),\n  undefined: new Token(Type.undefined, undefined),\n  true: new Token(Type.true, true),\n  false: new Token(Type.false, false),\n  emptyArray: new Token(Type.array, 0),\n  emptyMap: new Token(Type.map, 0)\n}\n\n/** @type {{[typeName: string]: StrictTypeEncoder}} */\nconst typeEncoders = {\n  /**\n   * @param {any} obj\n   * @param {string} _typ\n   * @param {EncodeOptions} _options\n   * @param {Reference} [_refStack]\n   * @returns {TokenOrNestedTokens}\n   */\n  number (obj, _typ, _options, _refStack) {\n    if (!Number.isInteger(obj) || !Number.isSafeInteger(obj)) {\n      return new Token(Type.float, obj)\n    } else if (obj >= 0) {\n      return new Token(Type.uint, obj)\n    } else {\n      return new Token(Type.negint, obj)\n    }\n  },\n\n  /**\n   * @param {any} obj\n   * @param {string} _typ\n   * @param {EncodeOptions} _options\n   * @param {Reference} [_refStack]\n   * @returns {TokenOrNestedTokens}\n   */\n  bigint (obj, _typ, _options, _refStack) {\n    if (obj >= BigInt(0)) {\n      return new Token(Type.uint, obj)\n    } else {\n      return new Token(Type.negint, obj)\n    }\n  },\n\n  /**\n   * @param {any} obj\n   * @param {string} _typ\n   * @param {EncodeOptions} _options\n   * @param {Reference} [_refStack]\n   * @returns {TokenOrNestedTokens}\n   */\n  Uint8Array (obj, _typ, _options, _refStack) {\n    return new Token(Type.bytes, obj)\n  },\n\n  /**\n   * @param {any} obj\n   * @param {string} _typ\n   * @param {EncodeOptions} _options\n   * @param {Reference} [_refStack]\n   * @returns {TokenOrNestedTokens}\n   */\n  string (obj, _typ, _options, _refStack) {\n    return new Token(Type.string, obj)\n  },\n\n  /**\n   * @param {any} obj\n   * @param {string} _typ\n   * @param {EncodeOptions} _options\n   * @param {Reference} [_refStack]\n   * @returns {TokenOrNestedTokens}\n   */\n  boolean (obj, _typ, _options, _refStack) {\n    return obj ? simpleTokens.true : simpleTokens.false\n  },\n\n  /**\n   * @param {any} _obj\n   * @param {string} _typ\n   * @param {EncodeOptions} _options\n   * @param {Reference} [_refStack]\n   * @returns {TokenOrNestedTokens}\n   */\n  null (_obj, _typ, _options, _refStack) {\n    return simpleTokens.null\n  },\n\n  /**\n   * @param {any} _obj\n   * @param {string} _typ\n   * @param {EncodeOptions} _options\n   * @param {Reference} [_refStack]\n   * @returns {TokenOrNestedTokens}\n   */\n  undefined (_obj, _typ, _options, _refStack) {\n    return simpleTokens.undefined\n  },\n\n  /**\n   * @param {any} obj\n   * @param {string} _typ\n   * @param {EncodeOptions} _options\n   * @param {Reference} [_refStack]\n   * @returns {TokenOrNestedTokens}\n   */\n  ArrayBuffer (obj, _typ, _options, _refStack) {\n    return new Token(Type.bytes, new Uint8Array(obj))\n  },\n\n  /**\n   * @param {any} obj\n   * @param {string} _typ\n   * @param {EncodeOptions} _options\n   * @param {Reference} [_refStack]\n   * @returns {TokenOrNestedTokens}\n   */\n  DataView (obj, _typ, _options, _refStack) {\n    return new Token(Type.bytes, new Uint8Array(obj.buffer, obj.byteOffset, obj.byteLength))\n  },\n\n  /**\n   * @param {any} obj\n   * @param {string} _typ\n   * @param {EncodeOptions} options\n   * @param {Reference} [refStack]\n   * @returns {TokenOrNestedTokens}\n   */\n  Array (obj, _typ, options, refStack) {\n    if (!obj.length) {\n      if (options.addBreakTokens === true) {\n        return [simpleTokens.emptyArray, new Token(Type.break)]\n      }\n      return simpleTokens.emptyArray\n    }\n    refStack = Ref.createCheck(refStack, obj)\n    const entries = []\n    let i = 0\n    for (const e of obj) {\n      entries[i++] = objectToTokens(e, options, refStack)\n    }\n    if (options.addBreakTokens) {\n      return [new Token(Type.array, obj.length), entries, new Token(Type.break)]\n    }\n    return [new Token(Type.array, obj.length), entries]\n  },\n\n  /**\n   * @param {any} obj\n   * @param {string} typ\n   * @param {EncodeOptions} options\n   * @param {Reference} [refStack]\n   * @returns {TokenOrNestedTokens}\n   */\n  Object (obj, typ, options, refStack) {\n    // could be an Object or a Map\n    const isMap = typ !== 'Object'\n    // it's slightly quicker to use Object.keys() than Object.entries()\n    const keys = isMap ? obj.keys() : Object.keys(obj)\n    const length = isMap ? obj.size : keys.length\n    if (!length) {\n      if (options.addBreakTokens === true) {\n        return [simpleTokens.emptyMap, new Token(Type.break)]\n      }\n      return simpleTokens.emptyMap\n    }\n    refStack = Ref.createCheck(refStack, obj)\n    /** @type {TokenOrNestedTokens[]} */\n    const entries = []\n    let i = 0\n    for (const key of keys) {\n      entries[i++] = [\n        objectToTokens(key, options, refStack),\n        objectToTokens(isMap ? obj.get(key) : obj[key], options, refStack)\n      ]\n    }\n    sortMapEntries(entries, options)\n    if (options.addBreakTokens) {\n      return [new Token(Type.map, length), entries, new Token(Type.break)]\n    }\n    return [new Token(Type.map, length), entries]\n  }\n}\n\ntypeEncoders.Map = typeEncoders.Object\ntypeEncoders.Buffer = typeEncoders.Uint8Array\nfor (const typ of 'Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64'.split(' ')) {\n  typeEncoders[`${typ}Array`] = typeEncoders.DataView\n}\n\n/**\n * @param {any} obj\n * @param {EncodeOptions} [options]\n * @param {Reference} [refStack]\n * @returns {TokenOrNestedTokens}\n */\nfunction objectToTokens (obj, options = {}, refStack) {\n  const typ = is(obj)\n  const customTypeEncoder = (options && options.typeEncoders && /** @type {OptionalTypeEncoder} */ options.typeEncoders[typ]) || typeEncoders[typ]\n  if (typeof customTypeEncoder === 'function') {\n    const tokens = customTypeEncoder(obj, typ, options, refStack)\n    if (tokens != null) {\n      return tokens\n    }\n  }\n  const typeEncoder = typeEncoders[typ]\n  if (!typeEncoder) {\n    throw new Error(`${encodeErrPrefix} unsupported type: ${typ}`)\n  }\n  return typeEncoder(obj, typ, options, refStack)\n}\n\n/*\nCBOR key sorting is a mess.\n\nThe canonicalisation recommendation from https://tools.ietf.org/html/rfc7049#section-3.9\nincludes the wording:\n\n> The keys in every map must be sorted lowest value to highest.\n> Sorting is performed on the bytes of the representation of the key\n> data items without paying attention to the 3/5 bit splitting for\n> major types.\n> ...\n>  *  If two keys have different lengths, the shorter one sorts\n      earlier;\n>  *  If two keys have the same length, the one with the lower value\n      in (byte-wise) lexical order sorts earlier.\n\n1. It is not clear what \"bytes of the representation of the key\" means: is it\n   the CBOR representation, or the binary representation of the object itself?\n   Consider the int and uint difference here.\n2. It is not clear what \"without paying attention to\" means: do we include it\n   and compare on that? Or do we omit the special prefix byte, (mostly) treating\n   the key in its plain binary representation form.\n\nThe FIDO 2.0: Client To Authenticator Protocol spec takes the original CBOR\nwording and clarifies it according to their understanding.\nhttps://fidoalliance.org/specs/fido-v2.0-rd-20170927/fido-client-to-authenticator-protocol-v2.0-rd-20170927.html#message-encoding\n\n> The keys in every map must be sorted lowest value to highest. Sorting is\n> performed on the bytes of the representation of the key data items without\n> paying attention to the 3/5 bit splitting for major types. The sorting rules\n> are:\n>  * If the major types are different, the one with the lower value in numerical\n>    order sorts earlier.\n>  * If two keys have different lengths, the shorter one sorts earlier;\n>  * If two keys have the same length, the one with the lower value in\n>    (byte-wise) lexical order sorts earlier.\n\nSome other implementations, such as borc, do a full encode then do a\nlength-first, byte-wise-second comparison:\nhttps://github.com/dignifiedquire/borc/blob/b6bae8b0bcde7c3976b0f0f0957208095c392a36/src/encoder.js#L358\nhttps://github.com/dignifiedquire/borc/blob/b6bae8b0bcde7c3976b0f0f0957208095c392a36/src/utils.js#L143-L151\n\nThis has the benefit of being able to easily handle arbitrary keys, including\ncomplex types (maps and arrays).\n\nWe'll opt for the FIDO approach, since it affords some efficies since we don't\nneed a full encode of each key to determine order and can defer to the types\nto determine how to most efficiently order their values (i.e. int and uint\nordering can be done on the numbers, no need for byte-wise, for example).\n\nRecommendation: stick to single key types or you'll get into trouble, and prefer\nstring keys because it's much simpler that way.\n*/\n\n/*\n(UPDATE, Dec 2020)\nhttps://tools.ietf.org/html/rfc8949 is the updated CBOR spec and clarifies some\nof the questions above with a new recommendation for sorting order being much\ncloser to what would be expected in other environments (i.e. no length-first\nweirdness).\nThis new sorting order is not yet implemented here but could be added as an\noption. \"Determinism\" (canonicity) is system dependent and it's difficult to\nchange existing systems that are built with existing expectations. So if a new\nordering is introduced here, the old needs to be kept as well with the user\nhaving the option.\n*/\n\n/**\n * @param {TokenOrNestedTokens[]} entries\n * @param {EncodeOptions} options\n */\nfunction sortMapEntries (entries, options) {\n  if (options.mapSorter) {\n    entries.sort(options.mapSorter)\n  }\n}\n\n/**\n * @param {(Token|Token[])[]} e1\n * @param {(Token|Token[])[]} e2\n * @returns {number}\n */\nfunction mapSorter (e1, e2) {\n  // the key position ([0]) could have a single token or an array\n  // almost always it'll be a single token but complex key might get involved\n  /* c8 ignore next 2 */\n  const keyToken1 = Array.isArray(e1[0]) ? e1[0][0] : e1[0]\n  const keyToken2 = Array.isArray(e2[0]) ? e2[0][0] : e2[0]\n\n  // different key types\n  if (keyToken1.type !== keyToken2.type) {\n    return keyToken1.type.compare(keyToken2.type)\n  }\n\n  const major = keyToken1.type.major\n  // TODO: handle case where cmp === 0 but there are more keyToken e. complex type)\n  const tcmp = cborEncoders[major].compareTokens(keyToken1, keyToken2)\n  /* c8 ignore next 5 */\n  if (tcmp === 0) {\n    // duplicate key or complex type where the first token matched,\n    // i.e. a map or array and we're only comparing the opening token\n    console.warn('WARNING: complex key types used, CBOR key sorting guarantees are gone')\n  }\n  return tcmp\n}\n\n/**\n * @param {Bl} buf\n * @param {TokenOrNestedTokens} tokens\n * @param {TokenTypeEncoder[]} encoders\n * @param {EncodeOptions} options\n */\nfunction tokensToEncoded (buf, tokens, encoders, options) {\n  if (Array.isArray(tokens)) {\n    for (const token of tokens) {\n      tokensToEncoded(buf, token, encoders, options)\n    }\n  } else {\n    encoders[tokens.type.major](buf, tokens, options)\n  }\n}\n\n/**\n * @param {any} data\n * @param {TokenTypeEncoder[]} encoders\n * @param {EncodeOptions} options\n * @returns {Uint8Array}\n */\nfunction encodeCustom (data, encoders, options) {\n  const tokens = objectToTokens(data, options)\n  if (!Array.isArray(tokens) && options.quickEncodeToken) {\n    const quickBytes = options.quickEncodeToken(tokens)\n    if (quickBytes) {\n      return quickBytes\n    }\n    const encoder = encoders[tokens.type.major]\n    if (encoder.encodedSize) {\n      const size = encoder.encodedSize(tokens, options)\n      const buf = new Bl(size)\n      encoder(buf, tokens, options)\n      /* c8 ignore next 4 */\n      // this would be a problem with encodedSize() functions\n      if (buf.chunks.length !== 1) {\n        throw new Error(`Unexpected error: pre-calculated length for ${tokens} was wrong`)\n      }\n      return asU8A(buf.chunks[0])\n    }\n  }\n  buf.reset()\n  tokensToEncoded(buf, tokens, encoders, options)\n  return buf.toBytes(true)\n}\n\n/**\n * @param {any} data\n * @param {EncodeOptions} [options]\n * @returns {Uint8Array}\n */\nfunction encode (data, options) {\n  options = Object.assign({}, defaultEncodeOptions, options)\n  return encodeCustom(data, cborEncoders, options)\n}\n\nexport { objectToTokens, encode, encodeCustom, Ref }\n","import { Token, Type } from './token.js'\nimport * as uint from './0uint.js'\nimport * as negint from './1negint.js'\nimport * as bytes from './2bytes.js'\nimport * as string from './3string.js'\nimport * as array from './4array.js'\nimport * as map from './5map.js'\nimport * as tag from './6tag.js'\nimport * as float from './7float.js'\nimport { decodeErrPrefix } from './common.js'\nimport { fromArray } from './byte-utils.js'\n\n/**\n * @typedef {import('../interface').DecodeOptions} DecodeOptions\n */\n\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} minor\n */\nfunction invalidMinor (data, pos, minor) {\n  throw new Error(`${decodeErrPrefix} encountered invalid minor (${minor}) for major ${data[pos] >>> 5}`)\n}\n\n/**\n * @param {string} msg\n * @returns {()=>any}\n */\nfunction errorer (msg) {\n  return () => { throw new Error(`${decodeErrPrefix} ${msg}`) }\n}\n\n/** @type {((data:Uint8Array, pos:number, minor:number, options?:DecodeOptions) => any)[]} */\nexport const jump = []\n\n// unsigned integer, 0x00..0x17 (0..23)\nfor (let i = 0; i <= 0x17; i++) {\n  jump[i] = invalidMinor // uint.decodeUintCompact, handled by quick[]\n}\njump[0x18] = uint.decodeUint8 // unsigned integer, one-byte uint8_t follows\njump[0x19] = uint.decodeUint16 // unsigned integer, two-byte uint16_t follows\njump[0x1a] = uint.decodeUint32 // unsigned integer, four-byte uint32_t follows\njump[0x1b] = uint.decodeUint64 // unsigned integer, eight-byte uint64_t follows\njump[0x1c] = invalidMinor\njump[0x1d] = invalidMinor\njump[0x1e] = invalidMinor\njump[0x1f] = invalidMinor\n// negative integer, -1-0x00..-1-0x17 (-1..-24)\nfor (let i = 0x20; i <= 0x37; i++) {\n  jump[i] = invalidMinor // negintDecode, handled by quick[]\n}\njump[0x38] = negint.decodeNegint8 // negative integer, -1-n one-byte uint8_t for n follows\njump[0x39] = negint.decodeNegint16 // negative integer, -1-n two-byte uint16_t for n follows\njump[0x3a] = negint.decodeNegint32 // negative integer, -1-n four-byte uint32_t for follows\njump[0x3b] = negint.decodeNegint64 // negative integer, -1-n eight-byte uint64_t for follows\njump[0x3c] = invalidMinor\njump[0x3d] = invalidMinor\njump[0x3e] = invalidMinor\njump[0x3f] = invalidMinor\n// byte string, 0x00..0x17 bytes follow\nfor (let i = 0x40; i <= 0x57; i++) {\n  jump[i] = bytes.decodeBytesCompact\n}\njump[0x58] = bytes.decodeBytes8 // byte string, one-byte uint8_t for n, and then n bytes follow\njump[0x59] = bytes.decodeBytes16 // byte string, two-byte uint16_t for n, and then n bytes follow\njump[0x5a] = bytes.decodeBytes32 // byte string, four-byte uint32_t for n, and then n bytes follow\njump[0x5b] = bytes.decodeBytes64 // byte string, eight-byte uint64_t for n, and then n bytes follow\njump[0x5c] = invalidMinor\njump[0x5d] = invalidMinor\njump[0x5e] = invalidMinor\njump[0x5f] = errorer('indefinite length bytes/strings are not supported') // byte string, byte strings follow, terminated by \"break\"\n// UTF-8 string 0x00..0x17 bytes follow\nfor (let i = 0x60; i <= 0x77; i++) {\n  jump[i] = string.decodeStringCompact\n}\njump[0x78] = string.decodeString8 // UTF-8 string, one-byte uint8_t for n, and then n bytes follow\njump[0x79] = string.decodeString16 // UTF-8 string, two-byte uint16_t for n, and then n bytes follow\njump[0x7a] = string.decodeString32 // UTF-8 string, four-byte uint32_t for n, and then n bytes follow\njump[0x7b] = string.decodeString64 // UTF-8 string, eight-byte uint64_t for n, and then n bytes follow\njump[0x7c] = invalidMinor\njump[0x7d] = invalidMinor\njump[0x7e] = invalidMinor\njump[0x7f] = errorer('indefinite length bytes/strings are not supported') // UTF-8 strings follow, terminated by \"break\"\n// array, 0x00..0x17 data items follow\nfor (let i = 0x80; i <= 0x97; i++) {\n  jump[i] = array.decodeArrayCompact\n}\njump[0x98] = array.decodeArray8 // array, one-byte uint8_t for n, and then n data items follow\njump[0x99] = array.decodeArray16 // array, two-byte uint16_t for n, and then n data items follow\njump[0x9a] = array.decodeArray32 // array, four-byte uint32_t for n, and then n data items follow\njump[0x9b] = array.decodeArray64 // array, eight-byte uint64_t for n, and then n data items follow\njump[0x9c] = invalidMinor\njump[0x9d] = invalidMinor\njump[0x9e] = invalidMinor\njump[0x9f] = array.decodeArrayIndefinite // array, data items follow, terminated by \"break\"\n// map, 0x00..0x17 pairs of data items follow\nfor (let i = 0xa0; i <= 0xb7; i++) {\n  jump[i] = map.decodeMapCompact\n}\njump[0xb8] = map.decodeMap8 // map, one-byte uint8_t for n, and then n pairs of data items follow\njump[0xb9] = map.decodeMap16 // map, two-byte uint16_t for n, and then n pairs of data items follow\njump[0xba] = map.decodeMap32 // map, four-byte uint32_t for n, and then n pairs of data items follow\njump[0xbb] = map.decodeMap64 // map, eight-byte uint64_t for n, and then n pairs of data items follow\njump[0xbc] = invalidMinor\njump[0xbd] = invalidMinor\njump[0xbe] = invalidMinor\njump[0xbf] = map.decodeMapIndefinite // map, pairs of data items follow, terminated by \"break\"\n// tags\nfor (let i = 0xc0; i <= 0xd7; i++) {\n  jump[i] = tag.decodeTagCompact\n}\njump[0xd8] = tag.decodeTag8\njump[0xd9] = tag.decodeTag16\njump[0xda] = tag.decodeTag32\njump[0xdb] = tag.decodeTag64\njump[0xdc] = invalidMinor\njump[0xdd] = invalidMinor\njump[0xde] = invalidMinor\njump[0xdf] = invalidMinor\n// 0xe0..0xf3 simple values, unsupported\nfor (let i = 0xe0; i <= 0xf3; i++) {\n  jump[i] = errorer('simple values are not supported')\n}\njump[0xf4] = invalidMinor // false, handled by quick[]\njump[0xf5] = invalidMinor // true, handled by quick[]\njump[0xf6] = invalidMinor // null, handled by quick[]\njump[0xf7] = float.decodeUndefined // undefined\njump[0xf8] = errorer('simple values are not supported') // simple value, one byte follows, unsupported\njump[0xf9] = float.decodeFloat16 // half-precision float (two-byte IEEE 754)\njump[0xfa] = float.decodeFloat32 // single-precision float (four-byte IEEE 754)\njump[0xfb] = float.decodeFloat64 // double-precision float (eight-byte IEEE 754)\njump[0xfc] = invalidMinor\njump[0xfd] = invalidMinor\njump[0xfe] = invalidMinor\njump[0xff] = float.decodeBreak // \"break\" stop code\n\n/** @type {Token[]} */\nexport const quick = []\n// ints <24\nfor (let i = 0; i < 24; i++) {\n  quick[i] = new Token(Type.uint, i, 1)\n}\n// negints >= -24\nfor (let i = -1; i >= -24; i--) {\n  quick[31 - i] = new Token(Type.negint, i, 1)\n}\n// empty bytes\nquick[0x40] = new Token(Type.bytes, new Uint8Array(0), 1)\n// empty string\nquick[0x60] = new Token(Type.string, '', 1)\n// empty list\nquick[0x80] = new Token(Type.array, 0, 1)\n// empty map\nquick[0xa0] = new Token(Type.map, 0, 1)\n// false\nquick[0xf4] = new Token(Type.false, false, 1)\n// true\nquick[0xf5] = new Token(Type.true, true, 1)\n// null\nquick[0xf6] = new Token(Type.null, null, 1)\n\n/**\n * @param {Token} token\n * @returns {Uint8Array|undefined}\n */\nexport function quickEncodeToken (token) {\n  switch (token.type) {\n    case Type.false:\n      return fromArray([0xf4])\n    case Type.true:\n      return fromArray([0xf5])\n    case Type.null:\n      return fromArray([0xf6])\n    case Type.bytes:\n      if (!token.value.length) {\n        return fromArray([0x40])\n      }\n      return\n    case Type.string:\n      if (token.value === '') {\n        return fromArray([0x60])\n      }\n      return\n    case Type.array:\n      if (token.value === 0) {\n        return fromArray([0x80])\n      }\n      /* c8 ignore next 2 */\n      // shouldn't be possible if this were called when there was only one token\n      return\n    case Type.map:\n      if (token.value === 0) {\n        return fromArray([0xa0])\n      }\n      /* c8 ignore next 2 */\n      // shouldn't be possible if this were called when there was only one token\n      return\n    case Type.uint:\n      if (token.value < 24) {\n        return fromArray([Number(token.value)])\n      }\n      return\n    case Type.negint:\n      if (token.value >= -24) {\n        return fromArray([31 - Number(token.value)])\n      }\n  }\n}\n","export function getIterator(obj) {\n    if (obj != null) {\n        if (typeof obj[Symbol.iterator] === 'function') {\n            return obj[Symbol.iterator]();\n        }\n        if (typeof obj[Symbol.asyncIterator] === 'function') {\n            return obj[Symbol.asyncIterator]();\n        }\n        if (typeof obj.next === 'function') {\n            return obj; // probably an iterator\n        }\n    }\n    throw new Error('argument is not an iterator or iterable');\n}\n//# sourceMappingURL=index.js.map","export const ERR_IPNS_EXPIRED_RECORD = 'ERR_IPNS_EXPIRED_RECORD';\nexport const ERR_UNRECOGNIZED_VALIDITY = 'ERR_UNRECOGNIZED_VALIDITY';\nexport const ERR_SIGNATURE_CREATION = 'ERR_SIGNATURE_CREATION';\nexport const ERR_SIGNATURE_VERIFICATION = 'ERR_SIGNATURE_VERIFICATION';\nexport const ERR_UNRECOGNIZED_FORMAT = 'ERR_UNRECOGNIZED_FORMAT';\nexport const ERR_PEER_ID_FROM_PUBLIC_KEY = 'ERR_PEER_ID_FROM_PUBLIC_KEY';\nexport const ERR_PUBLIC_KEY_FROM_ID = 'ERR_PUBLIC_KEY_FROM_ID';\nexport const ERR_UNDEFINED_PARAMETER = 'ERR_UNDEFINED_PARAMETER';\nexport const ERR_INVALID_RECORD_DATA = 'ERR_INVALID_RECORD_DATA';\nexport const ERR_INVALID_VALUE = 'ERR_INVALID_VALUE';\nexport const ERR_INVALID_EMBEDDED_KEY = 'ERR_INVALID_EMBEDDED_KEY';\nexport const ERR_MISSING_PRIVATE_KEY = 'ERR_MISSING_PRIVATE_KEY';\nexport const ERR_RECORD_TOO_LARGE = 'ERR_RECORD_TOO_LARGE';\n//# sourceMappingURL=errors.js.map","function isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction drain(source) {\n    if (isAsyncIterable(source)) {\n        return (async () => {\n            for await (const _ of source) { } // eslint-disable-line no-unused-vars,no-empty,@typescript-eslint/no-unused-vars\n        })();\n    }\n    else {\n        for (const _ of source) { } // eslint-disable-line no-unused-vars,no-empty,@typescript-eslint/no-unused-vars\n    }\n}\nexport default drain;\n//# sourceMappingURL=index.js.map","import peek from 'it-peekable';\nfunction isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction filter(source, fn) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            for await (const entry of source) {\n                if (await fn(entry)) {\n                    yield entry;\n                }\n            }\n        })();\n    }\n    // if mapping function returns a promise we have to return an async generator\n    const peekable = peek(source);\n    const { value, done } = peekable.next();\n    if (done === true) {\n        return (function* () { }());\n    }\n    const res = fn(value);\n    // @ts-expect-error .then is not present on O\n    if (typeof res.then === 'function') {\n        return (async function* () {\n            if (await res) {\n                yield value;\n            }\n            for await (const entry of peekable) {\n                if (await fn(entry)) {\n                    yield entry;\n                }\n            }\n        })();\n    }\n    const func = fn;\n    return (function* () {\n        if (res === true) {\n            yield value;\n        }\n        for (const entry of peekable) {\n            if (func(entry)) {\n                yield entry;\n            }\n        }\n    })();\n}\nexport default filter;\n//# sourceMappingURL=index.js.map","import peek from 'it-peekable';\nfunction isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction forEach(source, fn) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            for await (const thing of source) {\n                await fn(thing);\n                yield thing;\n            }\n        })();\n    }\n    // if fn function returns a promise we have to return an async generator\n    const peekable = peek(source);\n    const { value, done } = peekable.next();\n    if (done === true) {\n        return (function* () { }());\n    }\n    const res = fn(value);\n    if (typeof res?.then === 'function') {\n        return (async function* () {\n            yield value;\n            for await (const val of peekable) {\n                await fn(val);\n                yield val;\n            }\n        })();\n    }\n    const func = fn;\n    return (function* () {\n        yield value;\n        for (const val of peekable) {\n            func(val);\n            yield val;\n        }\n    })();\n}\nexport default forEach;\n//# sourceMappingURL=index.js.map","// ported from https://www.npmjs.com/package/fast-fifo\nclass FixedFIFO {\n    buffer;\n    mask;\n    top;\n    btm;\n    next;\n    constructor(hwm) {\n        if (!(hwm > 0) || ((hwm - 1) & hwm) !== 0) {\n            throw new Error('Max size for a FixedFIFO should be a power of two');\n        }\n        this.buffer = new Array(hwm);\n        this.mask = hwm - 1;\n        this.top = 0;\n        this.btm = 0;\n        this.next = null;\n    }\n    push(data) {\n        if (this.buffer[this.top] !== undefined) {\n            return false;\n        }\n        this.buffer[this.top] = data;\n        this.top = (this.top + 1) & this.mask;\n        return true;\n    }\n    shift() {\n        const last = this.buffer[this.btm];\n        if (last === undefined) {\n            return undefined;\n        }\n        this.buffer[this.btm] = undefined;\n        this.btm = (this.btm + 1) & this.mask;\n        return last;\n    }\n    isEmpty() {\n        return this.buffer[this.btm] === undefined;\n    }\n}\nexport class FIFO {\n    size;\n    hwm;\n    head;\n    tail;\n    constructor(options = {}) {\n        this.hwm = options.splitLimit ?? 16;\n        this.head = new FixedFIFO(this.hwm);\n        this.tail = this.head;\n        this.size = 0;\n    }\n    calculateSize(obj) {\n        if (obj?.byteLength != null) {\n            return obj.byteLength;\n        }\n        return 1;\n    }\n    push(val) {\n        if (val?.value != null) {\n            this.size += this.calculateSize(val.value);\n        }\n        if (!this.head.push(val)) {\n            const prev = this.head;\n            this.head = prev.next = new FixedFIFO(2 * this.head.buffer.length);\n            this.head.push(val);\n        }\n    }\n    shift() {\n        let val = this.tail.shift();\n        if (val === undefined && (this.tail.next != null)) {\n            const next = this.tail.next;\n            this.tail.next = null;\n            this.tail = next;\n            val = this.tail.shift();\n        }\n        if (val?.value != null) {\n            this.size -= this.calculateSize(val.value);\n        }\n        return val;\n    }\n    isEmpty() {\n        return this.head.isEmpty();\n    }\n}\n//# sourceMappingURL=fifo.js.map","import { rfc4648 } from './base.js'\n\nexport const base32 = rfc4648({\n  prefix: 'b',\n  name: 'base32',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567',\n  bitsPerChar: 5\n})\n\nexport const base32upper = rfc4648({\n  prefix: 'B',\n  name: 'base32upper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n  bitsPerChar: 5\n})\n\nexport const base32pad = rfc4648({\n  prefix: 'c',\n  name: 'base32pad',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567=',\n  bitsPerChar: 5\n})\n\nexport const base32padupper = rfc4648({\n  prefix: 'C',\n  name: 'base32padupper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=',\n  bitsPerChar: 5\n})\n\nexport const base32hex = rfc4648({\n  prefix: 'v',\n  name: 'base32hex',\n  alphabet: '0123456789abcdefghijklmnopqrstuv',\n  bitsPerChar: 5\n})\n\nexport const base32hexupper = rfc4648({\n  prefix: 'V',\n  name: 'base32hexupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV',\n  bitsPerChar: 5\n})\n\nexport const base32hexpad = rfc4648({\n  prefix: 't',\n  name: 'base32hexpad',\n  alphabet: '0123456789abcdefghijklmnopqrstuv=',\n  bitsPerChar: 5\n})\n\nexport const base32hexpadupper = rfc4648({\n  prefix: 'T',\n  name: 'base32hexpadupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV=',\n  bitsPerChar: 5\n})\n\nexport const base32z = rfc4648({\n  prefix: 'h',\n  name: 'base32z',\n  alphabet: 'ybndrfg8ejkmcpqxot1uwisza345h769',\n  bitsPerChar: 5\n})\n","import { baseX } from './base.js'\n\nexport const base36 = baseX({\n  prefix: 'k',\n  name: 'base36',\n  alphabet: '0123456789abcdefghijklmnopqrstuvwxyz'\n})\n\nexport const base36upper = baseX({\n  prefix: 'K',\n  name: 'base36upper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n})\n","import { baseX } from './base.js'\n\nexport const base58btc = baseX({\n  name: 'base58btc',\n  prefix: 'z',\n  alphabet: '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n})\n\nexport const base58flickr = baseX({\n  name: 'base58flickr',\n  prefix: 'Z',\n  alphabet: '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n})\n","import { coerce } from '../bytes.js'\nimport * as Digest from './digest.js'\n\nconst code = 0x0\nconst name = 'identity'\n\n/** @type {(input:Uint8Array) => Uint8Array} */\nconst encode = coerce\n\n/**\n * @param {Uint8Array} input\n * @returns {Digest.Digest<typeof code, number>}\n */\nconst digest = (input) => Digest.create(code, encode(input))\n\nexport const identity = { code, name, encode, digest }\n","/* global crypto */\n\nimport { from } from './hasher.js'\n\n/**\n * @param {AlgorithmIdentifier} name\n */\nconst sha = name =>\n  /**\n   * @param {Uint8Array} data\n   */\n  async data => new Uint8Array(await crypto.subtle.digest(name, data))\n\nexport const sha256 = from({\n  name: 'sha2-256',\n  code: 0x12,\n  encode: sha('SHA-256')\n})\n\nexport const sha512 = from({\n  name: 'sha2-512',\n  code: 0x13,\n  encode: sha('SHA-512')\n})\n","// Port of lower_bound from https://en.cppreference.com/w/cpp/algorithm/lower_bound\n// Used to compute insertion index to keep queue sorted after insertion\nexport default function lowerBound(array, value, comparator) {\n    let first = 0;\n    let count = array.length;\n    while (count > 0) {\n        const step = Math.trunc(count / 2);\n        let it = first + step;\n        if (comparator(array[it], value) <= 0) {\n            first = ++it;\n            count -= step + 1;\n        }\n        else {\n            count = step;\n        }\n    }\n    return first;\n}\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","import { nanoid } from 'nanoid';\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nconst pathSepS = '/';\nconst pathSepB = new TextEncoder().encode(pathSepS);\nconst pathSep = pathSepB[0];\n/**\n * A Key represents the unique identifier of an object.\n * Our Key scheme is inspired by file systems and Google App Engine key model.\n * Keys are meant to be unique across a system. Keys are hierarchical,\n * incorporating more and more specific namespaces. Thus keys can be deemed\n * 'children' or 'ancestors' of other keys:\n * - `new Key('/Comedy')`\n * - `new Key('/Comedy/MontyPython')`\n * Also, every namespace can be parametrized to embed relevant object\n * information. For example, the Key `name` (most specific namespace) could\n * include the object type:\n * - `new Key('/Comedy/MontyPython/Actor:JohnCleese')`\n * - `new Key('/Comedy/MontyPython/Sketch:CheeseShop')`\n * - `new Key('/Comedy/MontyPython/Sketch:CheeseShop/Character:Mousebender')`\n *\n */\nexport class Key {\n    /**\n     * @param {string | Uint8Array} s\n     * @param {boolean} [clean]\n     */\n    constructor(s, clean) {\n        if (typeof s === 'string') {\n            this._buf = uint8ArrayFromString(s);\n        }\n        else if (s instanceof Uint8Array) {\n            this._buf = s;\n        }\n        else {\n            throw new Error('Invalid key, should be String of Uint8Array');\n        }\n        if (clean == null) {\n            clean = true;\n        }\n        if (clean) {\n            this.clean();\n        }\n        if (this._buf.byteLength === 0 || this._buf[0] !== pathSep) {\n            throw new Error('Invalid key');\n        }\n    }\n    /**\n     * Convert to the string representation\n     *\n     * @param {import('uint8arrays/to-string').SupportedEncodings} [encoding='utf8'] - The encoding to use.\n     * @returns {string}\n     */\n    toString(encoding = 'utf8') {\n        return uint8ArrayToString(this._buf, encoding);\n    }\n    /**\n     * Return the Uint8Array representation of the key\n     *\n     * @returns {Uint8Array}\n     */\n    uint8Array() {\n        return this._buf;\n    }\n    /**\n     * Return string representation of the key\n     *\n     * @returns {string}\n     */\n    get [Symbol.toStringTag]() {\n        return `Key(${this.toString()})`;\n    }\n    /**\n     * Constructs a key out of a namespace array.\n     *\n     * @param {Array<string>} list - The array of namespaces\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * Key.withNamespaces(['one', 'two'])\n     * // => Key('/one/two')\n     * ```\n     */\n    static withNamespaces(list) {\n        return new Key(list.join(pathSepS));\n    }\n    /**\n     * Returns a randomly (uuid) generated key.\n     *\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * Key.random()\n     * // => Key('/f98719ea086343f7b71f32ea9d9d521d')\n     * ```\n     */\n    static random() {\n        return new Key(nanoid().replace(/-/g, ''));\n    }\n    /**\n     * @param {*} other\n     */\n    static asKey(other) {\n        if (other instanceof Uint8Array || typeof other === 'string') {\n            // we can create a key from this\n            return new Key(other);\n        }\n        if (typeof other.uint8Array === 'function') {\n            // this is an older version or may have crossed the esm/cjs boundary\n            return new Key(other.uint8Array());\n        }\n        return null;\n    }\n    /**\n     * Cleanup the current key\n     *\n     * @returns {void}\n     */\n    clean() {\n        if (this._buf == null || this._buf.byteLength === 0) {\n            this._buf = pathSepB;\n        }\n        if (this._buf[0] !== pathSep) {\n            const bytes = new Uint8Array(this._buf.byteLength + 1);\n            bytes.fill(pathSep, 0, 1);\n            bytes.set(this._buf, 1);\n            this._buf = bytes;\n        }\n        // normalize does not remove trailing slashes\n        while (this._buf.byteLength > 1 && this._buf[this._buf.byteLength - 1] === pathSep) {\n            this._buf = this._buf.subarray(0, -1);\n        }\n    }\n    /**\n     * Check if the given key is sorted lower than ourself.\n     *\n     * @param {Key} key - The other Key to check against\n     * @returns {boolean}\n     */\n    less(key) {\n        const list1 = this.list();\n        const list2 = key.list();\n        for (let i = 0; i < list1.length; i++) {\n            if (list2.length < i + 1) {\n                return false;\n            }\n            const c1 = list1[i];\n            const c2 = list2[i];\n            if (c1 < c2) {\n                return true;\n            }\n            else if (c1 > c2) {\n                return false;\n            }\n        }\n        return list1.length < list2.length;\n    }\n    /**\n     * Returns the key with all parts in reversed order.\n     *\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor:JohnCleese').reverse()\n     * // => Key('/Actor:JohnCleese/MontyPython/Comedy')\n     * ```\n     */\n    reverse() {\n        return Key.withNamespaces(this.list().slice().reverse());\n    }\n    /**\n     * Returns the `namespaces` making up this Key.\n     *\n     * @returns {Array<string>}\n     */\n    namespaces() {\n        return this.list();\n    }\n    /** Returns the \"base\" namespace of this key.\n     *\n     * @returns {string}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor:JohnCleese').baseNamespace()\n     * // => 'Actor:JohnCleese'\n     * ```\n     */\n    baseNamespace() {\n        const ns = this.namespaces();\n        return ns[ns.length - 1];\n    }\n    /**\n     * Returns the `list` representation of this key.\n     *\n     * @returns {Array<string>}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor:JohnCleese').list()\n     * // => ['Comedy', 'MontyPythong', 'Actor:JohnCleese']\n     * ```\n     */\n    list() {\n        return this.toString().split(pathSepS).slice(1);\n    }\n    /**\n     * Returns the \"type\" of this key (value of last namespace).\n     *\n     * @returns {string}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor:JohnCleese').type()\n     * // => 'Actor'\n     * ```\n     */\n    type() {\n        return namespaceType(this.baseNamespace());\n    }\n    /**\n     * Returns the \"name\" of this key (field of last namespace).\n     *\n     * @returns {string}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor:JohnCleese').name()\n     * // => 'JohnCleese'\n     * ```\n     */\n    name() {\n        return namespaceValue(this.baseNamespace());\n    }\n    /**\n     * Returns an \"instance\" of this type key (appends value to namespace).\n     *\n     * @param {string} s - The string to append.\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor').instance('JohnClesse')\n     * // => Key('/Comedy/MontyPython/Actor:JohnCleese')\n     * ```\n     */\n    instance(s) {\n        return new Key(this.toString() + ':' + s);\n    }\n    /**\n     * Returns the \"path\" of this key (parent + type).\n     *\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython/Actor:JohnCleese').path()\n     * // => Key('/Comedy/MontyPython/Actor')\n     * ```\n     */\n    path() {\n        let p = this.parent().toString();\n        if (!p.endsWith(pathSepS)) {\n            p += pathSepS;\n        }\n        p += this.type();\n        return new Key(p);\n    }\n    /**\n     * Returns the `parent` Key of this Key.\n     *\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * new Key(\"/Comedy/MontyPython/Actor:JohnCleese\").parent()\n     * // => Key(\"/Comedy/MontyPython\")\n     * ```\n     */\n    parent() {\n        const list = this.list();\n        if (list.length === 1) {\n            return new Key(pathSepS);\n        }\n        return new Key(list.slice(0, -1).join(pathSepS));\n    }\n    /**\n     * Returns the `child` Key of this Key.\n     *\n     * @param {Key} key - The child Key to add\n     * @returns {Key}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython').child(new Key('Actor:JohnCleese'))\n     * // => Key('/Comedy/MontyPython/Actor:JohnCleese')\n     * ```\n     */\n    child(key) {\n        if (this.toString() === pathSepS) {\n            return key;\n        }\n        else if (key.toString() === pathSepS) {\n            return this;\n        }\n        return new Key(this.toString() + key.toString(), false);\n    }\n    /**\n     * Returns whether this key is a prefix of `other`\n     *\n     * @param {Key} other - The other key to test against\n     * @returns {boolean}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy').isAncestorOf('/Comedy/MontyPython')\n     * // => true\n     * ```\n     */\n    isAncestorOf(other) {\n        if (other.toString() === this.toString()) {\n            return false;\n        }\n        return other.toString().startsWith(this.toString());\n    }\n    /**\n     * Returns whether this key is a contains another as prefix.\n     *\n     * @param {Key} other - The other Key to test against\n     * @returns {boolean}\n     *\n     * @example\n     * ```js\n     * new Key('/Comedy/MontyPython').isDecendantOf('/Comedy')\n     * // => true\n     * ```\n     */\n    isDecendantOf(other) {\n        if (other.toString() === this.toString()) {\n            return false;\n        }\n        return this.toString().startsWith(other.toString());\n    }\n    /**\n     * Checks if this key has only one namespace.\n     *\n     * @returns {boolean}\n     *\n     */\n    isTopLevel() {\n        return this.list().length === 1;\n    }\n    /**\n     * Concats one or more Keys into one new Key.\n     *\n     * @param {Array<Key>} keys - The array of keys to concatenate\n     * @returns {Key}\n     */\n    concat(...keys) {\n        return Key.withNamespaces([...this.namespaces(), ...flatten(keys.map(key => key.namespaces()))]);\n    }\n}\n/**\n * The first component of a namespace. `foo` in `foo:bar`\n *\n * @param {string} ns\n * @returns {string}\n */\nfunction namespaceType(ns) {\n    const parts = ns.split(':');\n    if (parts.length < 2) {\n        return '';\n    }\n    return parts.slice(0, -1).join(':');\n}\n/**\n * The last component of a namespace, `baz` in `foo:bar:baz`.\n *\n * @param {string} ns\n * @returns {string}\n */\nfunction namespaceValue(ns) {\n    const parts = ns.split(':');\n    return parts[parts.length - 1];\n}\n/**\n * Flatten array of arrays (only one level)\n *\n * @template T\n * @param {Array<any>} arr\n * @returns {T[]}\n */\nfunction flatten(arr) {\n    return ([]).concat(...arr);\n}\n//# sourceMappingURL=key.js.map","const word = '[a-fA-F\\\\d:]';\n\nconst boundry = options => options && options.includeBoundaries\n\t? `(?:(?<=\\\\s|^)(?=${word})|(?<=${word})(?=\\\\s|$))`\n\t: '';\n\nconst v4 = '(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}';\n\nconst v6segment = '[a-fA-F\\\\d]{1,4}';\n\nconst v6 = `\n(?:\n(?:${v6segment}:){7}(?:${v6segment}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${v6segment}:){6}(?:${v4}|:${v6segment}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${v6segment}:){5}(?::${v4}|(?::${v6segment}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${v6segment}:){4}(?:(?::${v6segment}){0,1}:${v4}|(?::${v6segment}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${v6segment}:){3}(?:(?::${v6segment}){0,2}:${v4}|(?::${v6segment}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${v6segment}:){2}(?:(?::${v6segment}){0,3}:${v4}|(?::${v6segment}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${v6segment}:){1}(?:(?::${v6segment}){0,4}:${v4}|(?::${v6segment}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${v6segment}){0,5}:${v4}|(?::${v6segment}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\\s*\\/\\/.*$/gm, '').replace(/\\n/g, '').trim();\n\n// Pre-compile only the exact regexes because adding a global flag make regexes stateful\nconst v46Exact = new RegExp(`(?:^${v4}$)|(?:^${v6}$)`);\nconst v4exact = new RegExp(`^${v4}$`);\nconst v6exact = new RegExp(`^${v6}$`);\n\nconst ipRegex = options => options && options.exact\n\t? v46Exact\n\t: new RegExp(`(?:${boundry(options)}${v4}${boundry(options)})|(?:${boundry(options)}${v6}${boundry(options)})`, 'g');\n\nipRegex.v4 = options => options && options.exact ? v4exact : new RegExp(`${boundry(options)}${v4}${boundry(options)}`, 'g');\nipRegex.v6 = options => options && options.exact ? v6exact : new RegExp(`${boundry(options)}${v6}${boundry(options)}`, 'g');\n\nexport default ipRegex;\n","import { base58btc } from 'multiformats/bases/base58';\nexport class WantListEntry {\n    _refCounter;\n    cid;\n    priority;\n    wantType;\n    constructor(cid, priority, wantType) {\n        // Keep track of how many requests we have for this key\n        this._refCounter = 1;\n        this.cid = cid;\n        this.priority = priority ?? 1;\n        this.wantType = wantType;\n    }\n    inc() {\n        this._refCounter += 1;\n    }\n    dec() {\n        this._refCounter = Math.max(0, this._refCounter - 1);\n    }\n    hasRefs() {\n        return this._refCounter > 0;\n    }\n    // So that console.log prints a nice description of this object\n    get [Symbol.toStringTag]() {\n        const cidStr = this.cid.toString(base58btc);\n        return `WantlistEntry <key: ${cidStr}, priority: ${this.priority}, refs: ${this._refCounter}>`;\n    }\n    equals(other) {\n        return (this._refCounter === other._refCounter) &&\n            this.cid.equals(other.cid) &&\n            this.priority === other.priority &&\n            this.wantType === other.wantType;\n    }\n}\n//# sourceMappingURL=entry.js.map","/**\n * Takes an array of AbortSignals and returns a single signal.\n * If any signals are aborted, the returned signal will be aborted.\n */\nexport function anySignal(signals) {\n    const controller = new globalThis.AbortController();\n    function onAbort() {\n        controller.abort();\n        for (const signal of signals) {\n            if (signal?.removeEventListener != null) {\n                signal.removeEventListener('abort', onAbort);\n            }\n        }\n    }\n    for (const signal of signals) {\n        if (signal?.aborted === true) {\n            onAbort();\n            break;\n        }\n        if (signal?.addEventListener != null) {\n            signal.addEventListener('abort', onAbort);\n        }\n    }\n    function clear() {\n        for (const signal of signals) {\n            if (signal?.removeEventListener != null) {\n                signal.removeEventListener('abort', onAbort);\n            }\n        }\n    }\n    const signal = controller.signal;\n    signal.clear = clear;\n    return signal;\n}\n//# sourceMappingURL=index.js.map","import peek from 'it-peekable';\nfunction isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction forEach(source, fn) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            for await (const thing of source) {\n                await fn(thing);\n                yield thing;\n            }\n        })();\n    }\n    // if fn function returns a promise we have to return an async generator\n    const peekable = peek(source);\n    const { value, done } = peekable.next();\n    if (done === true) {\n        return (function* () { }());\n    }\n    const res = fn(value);\n    if (typeof res?.then === 'function') {\n        return (async function* () {\n            yield value;\n            for await (const val of peekable) {\n                await fn(val);\n                yield val;\n            }\n        })();\n    }\n    const func = fn;\n    return (function* () {\n        yield value;\n        for (const val of peekable) {\n            func(val);\n            yield val;\n        }\n    })();\n}\nexport default forEach;\n//# sourceMappingURL=index.js.map","import peek from 'it-peekable';\nfunction isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction map(source, func) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            for await (const val of source) {\n                yield func(val);\n            }\n        })();\n    }\n    // if mapping function returns a promise we have to return an async generator\n    const peekable = peek(source);\n    const { value, done } = peekable.next();\n    if (done === true) {\n        return (function* () { }());\n    }\n    const res = func(value);\n    // @ts-expect-error .then is not present on O\n    if (typeof res.then === 'function') {\n        return (async function* () {\n            yield await res;\n            for await (const val of peekable) {\n                yield func(val);\n            }\n        })();\n    }\n    const fn = func;\n    return (function* () {\n        yield res;\n        for (const val of peekable) {\n            yield fn(val);\n        }\n    })();\n}\nexport default map;\n//# sourceMappingURL=index.js.map","function isAsyncIterable(thing) {\n    return thing[Symbol.asyncIterator] != null;\n}\nfunction take(source, limit) {\n    if (isAsyncIterable(source)) {\n        return (async function* () {\n            let items = 0;\n            if (limit < 1) {\n                return;\n            }\n            for await (const entry of source) {\n                yield entry;\n                items++;\n                if (items === limit) {\n                    return;\n                }\n            }\n        })();\n    }\n    return (function* () {\n        let items = 0;\n        if (limit < 1) {\n            return;\n        }\n        for (const entry of source) {\n            yield entry;\n            items++;\n            if (items === limit) {\n                return;\n            }\n        }\n    })();\n}\nexport default take;\n//# sourceMappingURL=index.js.map","import { baseX } from './base.js'\n\nexport const base58btc = baseX({\n  name: 'base58btc',\n  prefix: 'z',\n  alphabet: '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n})\n\nexport const base58flickr = baseX({\n  name: 'base58flickr',\n  prefix: 'Z',\n  alphabet: '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n})\n","const empty = new Uint8Array(0)\n\n/**\n * @param {Uint8Array} d\n */\nconst toHex = d => d.reduce((hex, byte) => hex + byte.toString(16).padStart(2, '0'), '')\n\n/**\n * @param {string} hex\n */\nconst fromHex = hex => {\n  const hexes = hex.match(/../g)\n  return hexes ? new Uint8Array(hexes.map(b => parseInt(b, 16))) : empty\n}\n\n/**\n * @param {Uint8Array} aa\n * @param {Uint8Array} bb\n */\nconst equals = (aa, bb) => {\n  if (aa === bb) return true\n  if (aa.byteLength !== bb.byteLength) {\n    return false\n  }\n\n  for (let ii = 0; ii < aa.byteLength; ii++) {\n    if (aa[ii] !== bb[ii]) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * @param {ArrayBufferView|ArrayBuffer|Uint8Array} o\n * @returns {Uint8Array}\n */\nconst coerce = o => {\n  if (o instanceof Uint8Array && o.constructor.name === 'Uint8Array') return o\n  if (o instanceof ArrayBuffer) return new Uint8Array(o)\n  if (ArrayBuffer.isView(o)) {\n    return new Uint8Array(o.buffer, o.byteOffset, o.byteLength)\n  }\n  throw new Error('Unknown type, must be binary type')\n}\n\n/**\n * @param {any} o\n * @returns {o is ArrayBuffer|ArrayBufferView}\n */\nconst isBinary = o =>\n  o instanceof ArrayBuffer || ArrayBuffer.isView(o)\n\n/**\n * @param {string} str\n * @returns {Uint8Array}\n */\nconst fromString = str => (new TextEncoder()).encode(str)\n\n/**\n * @param {Uint8Array} b\n * @returns {string}\n */\nconst toString = b => (new TextDecoder()).decode(b)\n\nexport { equals, coerce, isBinary, fromHex, toHex, fromString, toString, empty }\n","import { coerce, equals as equalBytes } from '../bytes.js'\nimport * as varint from '../varint.js'\n\n/**\n * Creates a multihash digest.\n *\n * @template {number} Code\n * @param {Code} code\n * @param {Uint8Array} digest\n */\nexport const create = (code, digest) => {\n  const size = digest.byteLength\n  const sizeOffset = varint.encodingLength(code)\n  const digestOffset = sizeOffset + varint.encodingLength(size)\n\n  const bytes = new Uint8Array(digestOffset + size)\n  varint.encodeTo(code, bytes, 0)\n  varint.encodeTo(size, bytes, sizeOffset)\n  bytes.set(digest, digestOffset)\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * Turns bytes representation of multihash digest into an instance.\n *\n * @param {Uint8Array} multihash\n * @returns {MultihashDigest}\n */\nexport const decode = (multihash) => {\n  const bytes = coerce(multihash)\n  const [code, sizeOffset] = varint.decode(bytes)\n  const [size, digestOffset] = varint.decode(bytes.subarray(sizeOffset))\n  const digest = bytes.subarray(sizeOffset + digestOffset)\n\n  if (digest.byteLength !== size) {\n    throw new Error('Incorrect length')\n  }\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * @param {MultihashDigest} a\n * @param {unknown} b\n * @returns {b is MultihashDigest}\n */\nexport const equals = (a, b) => {\n  if (a === b) {\n    return true\n  } else {\n    const data = /** @type {{code?:unknown, size?:unknown, bytes?:unknown}} */(b)\n\n    return (\n      a.code === data.code &&\n      a.size === data.size &&\n      data.bytes instanceof Uint8Array &&\n      equalBytes(a.bytes, data.bytes)\n    )\n  }\n}\n\n/**\n * @typedef {import('./interface.js').MultihashDigest} MultihashDigest\n */\n\n/**\n * Represents a multihash digest which carries information about the\n * hashing algorithm and an actual hash digest.\n *\n * @template {number} Code\n * @template {number} Size\n * @class\n * @implements {MultihashDigest}\n */\nexport class Digest {\n  /**\n   * Creates a multihash digest.\n   *\n   * @param {Code} code\n   * @param {Size} size\n   * @param {Uint8Array} digest\n   * @param {Uint8Array} bytes\n   */\n  constructor (code, size, digest, bytes) {\n    this.code = code\n    this.size = size\n    this.digest = digest\n    this.bytes = bytes\n  }\n}\n","var encode_1 = encode;\n\nvar MSB = 0x80\n  , REST = 0x7F\n  , MSBALL = ~REST\n  , INT = Math.pow(2, 31);\n\nfunction encode(num, out, offset) {\n  out = out || [];\n  offset = offset || 0;\n  var oldOffset = offset;\n\n  while(num >= INT) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num /= 128;\n  }\n  while(num & MSBALL) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num >>>= 7;\n  }\n  out[offset] = num | 0;\n  \n  encode.bytes = offset - oldOffset + 1;\n  \n  return out\n}\n\nvar decode = read;\n\nvar MSB$1 = 0x80\n  , REST$1 = 0x7F;\n\nfunction read(buf, offset) {\n  var res    = 0\n    , offset = offset || 0\n    , shift  = 0\n    , counter = offset\n    , b\n    , l = buf.length;\n\n  do {\n    if (counter >= l) {\n      read.bytes = 0;\n      throw new RangeError('Could not decode varint')\n    }\n    b = buf[counter++];\n    res += shift < 28\n      ? (b & REST$1) << shift\n      : (b & REST$1) * Math.pow(2, shift);\n    shift += 7;\n  } while (b >= MSB$1)\n\n  read.bytes = counter - offset;\n\n  return res\n}\n\nvar N1 = Math.pow(2,  7);\nvar N2 = Math.pow(2, 14);\nvar N3 = Math.pow(2, 21);\nvar N4 = Math.pow(2, 28);\nvar N5 = Math.pow(2, 35);\nvar N6 = Math.pow(2, 42);\nvar N7 = Math.pow(2, 49);\nvar N8 = Math.pow(2, 56);\nvar N9 = Math.pow(2, 63);\n\nvar length = function (value) {\n  return (\n    value < N1 ? 1\n  : value < N2 ? 2\n  : value < N3 ? 3\n  : value < N4 ? 4\n  : value < N5 ? 5\n  : value < N6 ? 6\n  : value < N7 ? 7\n  : value < N8 ? 8\n  : value < N9 ? 9\n  :              10\n  )\n};\n\nvar varint = {\n    encode: encode_1\n  , decode: decode\n  , encodingLength: length\n};\n\nvar _brrp_varint = varint;\n\nexport default _brrp_varint;\n","import varint from '../vendor/varint.js'\n\n/**\n * @param {Uint8Array} data\n * @param {number} [offset=0]\n * @returns {[number, number]}\n */\nexport const decode = (data, offset = 0) => {\n  const code = varint.decode(data, offset)\n  return [code, varint.decode.bytes]\n}\n\n/**\n * @param {number} int\n * @param {Uint8Array} target\n * @param {number} [offset=0]\n */\nexport const encodeTo = (int, target, offset = 0) => {\n  varint.encode(int, target, offset)\n  return target\n}\n\n/**\n * @param {number} int\n * @returns {number}\n */\nexport const encodingLength = (int) => {\n  return varint.encodingLength(int)\n}\n","\nexport default () => ({\n  Addresses: {\n    Swarm: [\n    ],\n    Announce: [],\n    NoAnnounce: [],\n    API: '',\n    Gateway: '',\n    RPC: '',\n    Delegates: [\n      '/dns4/node0.delegate.ipfs.io/tcp/443/https',\n      '/dns4/node1.delegate.ipfs.io/tcp/443/https',\n      '/dns4/node2.delegate.ipfs.io/tcp/443/https',\n      '/dns4/node3.delegate.ipfs.io/tcp/443/https'\n    ]\n  },\n  Discovery: {\n    MDNS: {\n      Enabled: false,\n      Interval: 10\n    },\n    webRTCStar: {\n      Enabled: true\n    }\n  },\n  Bootstrap: [\n    '/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN',\n    '/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb',\n    '/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp',\n    '/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa',\n    '/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt',\n    '/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic',\n    '/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6',\n    '/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS',\n    '/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN'\n  ],\n  Pubsub: {\n    Enabled: true\n  },\n  Swarm: {\n    ConnMgr: {\n      LowWater: 5,\n      HighWater: 20\n    },\n    DisableNatPortMap: true\n  },\n  Routing: {\n    Type: 'dhtclient'\n  }\n})\n","/* eslint-env browser */\n\nimport { TLRU } from './utils/tlru.js'\nimport PQueue from 'p-queue'\nimport HTTP from 'ipfs-utils/src/http.js'\n\n// Avoid sending multiple queries for the same hostname by caching results\nconst cache = new TLRU(1000)\n// TODO: /api/v0/dns does not return TTL yet: https://github.com/ipfs/go-ipfs/issues/5884\n// However we know browsers themselves cache DNS records for at least 1 minute,\n// which acts a provisional default ttl: https://stackoverflow.com/a/36917902/11518426\nconst ttl = 60 * 1000\n\n// @ts-expect-error PQueue@6 is broken\nconst Queue = PQueue.default ? PQueue.default : PQueue\n\n// browsers limit concurrent connections per host,\n// we don't want preload calls to exhaust the limit (~6)\nconst httpQueue = new Queue({ concurrency: 4 })\n\n/**\n * @param {{ Path: string, Message: string }} response\n */\nconst ipfsPath = (response) => {\n  if (response.Path) return response.Path\n  throw new Error(response.Message)\n}\n\n/**\n * @param {string} fqdn\n * @param {object} opts\n */\nexport async function resolveDnslink (fqdn, opts) { // eslint-disable-line require-await\n  /**\n   * @param {string} fqdn\n   * @param {object} opts\n   * @param {boolean} [opts.nocache]\n   */\n  const resolve = async (fqdn, opts = {}) => {\n    // @ts-expect-error - URLSearchParams does not take boolean options, only strings\n    const searchParams = new URLSearchParams(opts)\n    searchParams.set('arg', fqdn)\n\n    // try cache first\n    const query = searchParams.toString()\n    if (!opts.nocache && cache.has(query)) {\n      const response = cache.get(query)\n      return ipfsPath(response)\n    }\n\n    // fallback to delegated DNS resolver\n    const response = await httpQueue.add(async () => {\n      // Delegated HTTP resolver sending DNSLink queries to ipfs.io\n      // TODO: replace hardcoded host with configurable DNS over HTTPS: https://github.com/ipfs/js-ipfs/issues/2212\n      const res = await HTTP.get('https://ipfs.io/api/v0/dns', { searchParams })\n      const query = new URL(res.url).search.slice(1)\n      const json = await res.json()\n      cache.set(query, json, ttl)\n\n      return json\n    })\n    return ipfsPath(response)\n  }\n\n  return resolve(fqdn, opts)\n}\n","import hashlru from 'hashlru'\n\n/**\n * Time Aware Least Recent Used Cache\n *\n * @see https://arxiv.org/pdf/1801.00390\n * @todo move this to ipfs-utils or it's own package\n *\n * @template T\n * @class TLRU\n */\nexport class TLRU {\n  /**\n   * Creates an instance of TLRU.\n   *\n   * @param {number} maxSize\n   */\n  constructor (maxSize) {\n    this.lru = hashlru(maxSize)\n  }\n\n  /**\n   * Get the value from the a key\n   *\n   * @param {string} key\n   * @returns {T|undefined}\n   * @memberof TLoRU\n   */\n  get (key) {\n    const value = this.lru.get(key)\n    if (value) {\n      if ((value.expire) && (value.expire < Date.now())) {\n        this.lru.remove(key)\n        return undefined\n      }\n      return value.value\n    }\n    return undefined\n  }\n\n  /**\n   * Set a key value pair\n   *\n   * @param {string} key\n   * @param {T} value\n   * @param {number} ttl - in miliseconds\n   * @returns {void}\n   */\n  set (key, value, ttl) {\n    this.lru.set(key, { value, expire: Date.now() + ttl })\n  }\n\n  /**\n   * Find if the cache has the key\n   *\n   * @param {string} key\n   * @returns {boolean}\n   */\n  has (key) {\n    const value = this.get(key)\n    if (value) {\n      return true\n    }\n    return false\n  }\n\n  /**\n   * Remove key\n   *\n   * @param {string} key\n   */\n  remove (key) {\n    this.lru.remove(key)\n  }\n\n  /**\n   * Clears the cache\n   *\n   * @memberof TLRU\n   */\n  clear () {\n    this.lru.clear()\n  }\n}\n","\nexport function initAssets () {}\n","import { pushable } from 'it-pushable';\nimport merge from 'it-merge';\nexport const rawPipe = (...fns) => {\n    let res;\n    while (fns.length > 0) {\n        res = fns.shift()(res);\n    }\n    return res;\n};\nexport const isIterable = (obj) => {\n    return obj != null && (typeof obj[Symbol.asyncIterator] === 'function' ||\n        typeof obj[Symbol.iterator] === 'function' ||\n        typeof obj.next === 'function' // Probably, right?\n    );\n};\nexport const isDuplex = (obj) => {\n    return obj != null && typeof obj.sink === 'function' && isIterable(obj.source);\n};\nconst duplexPipelineFn = (duplex) => {\n    return (source) => {\n        const p = duplex.sink(source);\n        if (p.then != null) {\n            const stream = pushable({\n                objectMode: true\n            });\n            p.then(() => {\n                stream.end();\n            }, (err) => {\n                stream.end(err);\n            });\n            const sourceWrap = async function* () {\n                yield* duplex.source;\n                stream.end();\n            };\n            return merge(stream, sourceWrap());\n        }\n        return duplex.source;\n    };\n};\nexport function pipe(first, ...rest) {\n    // Duplex at start: wrap in function and return duplex source\n    if (isDuplex(first)) {\n        const duplex = first;\n        first = () => duplex.source;\n        // Iterable at start: wrap in function\n    }\n    else if (isIterable(first)) {\n        const source = first;\n        first = () => source;\n    }\n    const fns = [first, ...rest];\n    if (fns.length > 1) {\n        // Duplex at end: use duplex sink\n        if (isDuplex(fns[fns.length - 1])) {\n            fns[fns.length - 1] = fns[fns.length - 1].sink;\n        }\n    }\n    if (fns.length > 2) {\n        // Duplex in the middle, consume source with duplex sink and return duplex source\n        for (let i = 1; i < fns.length - 1; i++) {\n            if (isDuplex(fns[i])) {\n                fns[i] = duplexPipelineFn(fns[i]);\n            }\n        }\n    }\n    return rawPipe(...fns);\n}\n//# sourceMappingURL=index.js.map","export class MessageCache {\n    /**\n     * Holds history of messages in timebounded history arrays\n     */\n    constructor(\n    /**\n     * The number of indices in the cache history used for gossiping. That means that a message\n     * won't get gossiped anymore when shift got called `gossip` many times after inserting the\n     * message in the cache.\n     */\n    gossip, historyCapacity, msgIdToStrFn) {\n        this.gossip = gossip;\n        this.msgs = new Map();\n        this.history = [];\n        /** Track with accounting of messages in the mcache that are not yet validated */\n        this.notValidatedCount = 0;\n        this.msgIdToStrFn = msgIdToStrFn;\n        for (let i = 0; i < historyCapacity; i++) {\n            this.history[i] = [];\n        }\n    }\n    get size() {\n        return this.msgs.size;\n    }\n    /**\n     * Adds a message to the current window and the cache\n     * Returns true if the message is not known and is inserted in the cache\n     */\n    put(messageId, msg, validated = false) {\n        const { msgIdStr } = messageId;\n        // Don't add duplicate entries to the cache.\n        if (this.msgs.has(msgIdStr)) {\n            return false;\n        }\n        this.msgs.set(msgIdStr, {\n            message: msg,\n            validated,\n            originatingPeers: new Set(),\n            iwantCounts: new Map()\n        });\n        this.history[0].push({ ...messageId, topic: msg.topic });\n        if (!validated) {\n            this.notValidatedCount++;\n        }\n        return true;\n    }\n    observeDuplicate(msgId, fromPeerIdStr) {\n        const entry = this.msgs.get(msgId);\n        if (entry &&\n            // if the message is already validated, we don't need to store extra peers sending us\n            // duplicates as the message has already been forwarded\n            !entry.validated) {\n            entry.originatingPeers.add(fromPeerIdStr);\n        }\n    }\n    /**\n     * Retrieves a message from the cache by its ID, if it is still present\n     */\n    get(msgId) {\n        return this.msgs.get(this.msgIdToStrFn(msgId))?.message;\n    }\n    /**\n     * Increases the iwant count for the given message by one and returns the message together\n     * with the iwant if the message exists.\n     */\n    getWithIWantCount(msgIdStr, p) {\n        const msg = this.msgs.get(msgIdStr);\n        if (!msg) {\n            return null;\n        }\n        const count = (msg.iwantCounts.get(p) ?? 0) + 1;\n        msg.iwantCounts.set(p, count);\n        return { msg: msg.message, count };\n    }\n    /**\n     * Retrieves a list of message IDs for a set of topics\n     */\n    getGossipIDs(topics) {\n        const msgIdsByTopic = new Map();\n        for (let i = 0; i < this.gossip; i++) {\n            this.history[i].forEach((entry) => {\n                const msg = this.msgs.get(entry.msgIdStr);\n                if (msg && msg.validated && topics.has(entry.topic)) {\n                    let msgIds = msgIdsByTopic.get(entry.topic);\n                    if (!msgIds) {\n                        msgIds = [];\n                        msgIdsByTopic.set(entry.topic, msgIds);\n                    }\n                    msgIds.push(entry.msgId);\n                }\n            });\n        }\n        return msgIdsByTopic;\n    }\n    /**\n     * Gets a message with msgId and tags it as validated.\n     * This function also returns the known peers that have sent us this message. This is used to\n     * prevent us sending redundant messages to peers who have already propagated it.\n     */\n    validate(msgId) {\n        const entry = this.msgs.get(msgId);\n        if (!entry) {\n            return null;\n        }\n        if (!entry.validated) {\n            this.notValidatedCount--;\n        }\n        const { message, originatingPeers } = entry;\n        entry.validated = true;\n        // Clear the known peers list (after a message is validated, it is forwarded and we no\n        // longer need to store the originating peers).\n        entry.originatingPeers = new Set();\n        return { message, originatingPeers };\n    }\n    /**\n     * Shifts the current window, discarding messages older than this.history.length of the cache\n     */\n    shift() {\n        const lastCacheEntries = this.history[this.history.length - 1];\n        lastCacheEntries.forEach((cacheEntry) => {\n            const entry = this.msgs.get(cacheEntry.msgIdStr);\n            if (entry) {\n                this.msgs.delete(cacheEntry.msgIdStr);\n                if (!entry.validated) {\n                    this.notValidatedCount--;\n                }\n            }\n        });\n        this.history.pop();\n        this.history.unshift([]);\n    }\n    remove(msgId) {\n        const entry = this.msgs.get(msgId);\n        if (!entry) {\n            return null;\n        }\n        // Keep the message on the history vector, it will be dropped on a shift()\n        this.msgs.delete(msgId);\n        return entry;\n    }\n}\n//# sourceMappingURL=message-cache.js.map","import cjs from \"./rpc.cjs\"\n\nexport const {RPC} = cjs\n","export const second = 1000;\nexport const minute = 60 * second;\n// Protocol identifiers\nexport const FloodsubID = '/floodsub/1.0.0';\n/**\n * The protocol ID for version 1.0.0 of the Gossipsub protocol\n * It is advertised along with GossipsubIDv11 for backwards compatability\n */\nexport const GossipsubIDv10 = '/meshsub/1.0.0';\n/**\n * The protocol ID for version 1.1.0 of the Gossipsub protocol\n * See the spec for details about how v1.1.0 compares to v1.0.0:\n * https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md\n */\nexport const GossipsubIDv11 = '/meshsub/1.1.0';\n// Overlay parameters\n/**\n * GossipsubD sets the optimal degree for a Gossipsub topic mesh. For example, if GossipsubD == 6,\n * each peer will want to have about six peers in their mesh for each topic they're subscribed to.\n * GossipsubD should be set somewhere between GossipsubDlo and GossipsubDhi.\n */\nexport const GossipsubD = 6;\n/**\n * GossipsubDlo sets the lower bound on the number of peers we keep in a Gossipsub topic mesh.\n * If we have fewer than GossipsubDlo peers, we will attempt to graft some more into the mesh at\n * the next heartbeat.\n */\nexport const GossipsubDlo = 4;\n/**\n * GossipsubDhi sets the upper bound on the number of peers we keep in a Gossipsub topic mesh.\n * If we have more than GossipsubDhi peers, we will select some to prune from the mesh at the next heartbeat.\n */\nexport const GossipsubDhi = 12;\n/**\n * GossipsubDscore affects how peers are selected when pruning a mesh due to over subscription.\n * At least GossipsubDscore of the retained peers will be high-scoring, while the remainder are\n * chosen randomly.\n */\nexport const GossipsubDscore = 4;\n/**\n * GossipsubDout sets the quota for the number of outbound connections to maintain in a topic mesh.\n * When the mesh is pruned due to over subscription, we make sure that we have outbound connections\n * to at least GossipsubDout of the survivor peers. This prevents sybil attackers from overwhelming\n * our mesh with incoming connections.\n *\n * GossipsubDout must be set below GossipsubDlo, and must not exceed GossipsubD / 2.\n */\nexport const GossipsubDout = 2;\n// Gossip parameters\n/**\n * GossipsubHistoryLength controls the size of the message cache used for gossip.\n * The message cache will remember messages for GossipsubHistoryLength heartbeats.\n */\nexport const GossipsubHistoryLength = 5;\n/**\n * GossipsubHistoryGossip controls how many cached message ids we will advertise in\n * IHAVE gossip messages. When asked for our seen message IDs, we will return\n * only those from the most recent GossipsubHistoryGossip heartbeats. The slack between\n * GossipsubHistoryGossip and GossipsubHistoryLength allows us to avoid advertising messages\n * that will be expired by the time they're requested.\n *\n * GossipsubHistoryGossip must be less than or equal to GossipsubHistoryLength to\n * avoid a runtime panic.\n */\nexport const GossipsubHistoryGossip = 3;\n/**\n * GossipsubDlazy affects how many peers we will emit gossip to at each heartbeat.\n * We will send gossip to at least GossipsubDlazy peers outside our mesh. The actual\n * number may be more, depending on GossipsubGossipFactor and how many peers we're\n * connected to.\n */\nexport const GossipsubDlazy = 6;\n/**\n * GossipsubGossipFactor affects how many peers we will emit gossip to at each heartbeat.\n * We will send gossip to GossipsubGossipFactor * (total number of non-mesh peers), or\n * GossipsubDlazy, whichever is greater.\n */\nexport const GossipsubGossipFactor = 0.25;\n/**\n * GossipsubGossipRetransmission controls how many times we will allow a peer to request\n * the same message id through IWANT gossip before we start ignoring them. This is designed\n * to prevent peers from spamming us with requests and wasting our resources.\n */\nexport const GossipsubGossipRetransmission = 3;\n// Heartbeat interval\n/**\n * GossipsubHeartbeatInitialDelay is the short delay before the heartbeat timer begins\n * after the router is initialized.\n */\nexport const GossipsubHeartbeatInitialDelay = 100;\n/**\n * GossipsubHeartbeatInterval controls the time between heartbeats.\n */\nexport const GossipsubHeartbeatInterval = second;\n/**\n * GossipsubFanoutTTL controls how long we keep track of the fanout state. If it's been\n * GossipsubFanoutTTL since we've published to a topic that we're not subscribed to,\n * we'll delete the fanout map for that topic.\n */\nexport const GossipsubFanoutTTL = minute;\n/**\n * GossipsubPrunePeers controls the number of peers to include in prune Peer eXchange.\n * When we prune a peer that's eligible for PX (has a good score, etc), we will try to\n * send them signed peer records for up to GossipsubPrunePeers other peers that we\n * know of.\n */\nexport const GossipsubPrunePeers = 16;\n/**\n * GossipsubPruneBackoff controls the backoff time for pruned peers. This is how long\n * a peer must wait before attempting to graft into our mesh again after being pruned.\n * When pruning a peer, we send them our value of GossipsubPruneBackoff so they know\n * the minimum time to wait. Peers running older versions may not send a backoff time,\n * so if we receive a prune message without one, we will wait at least GossipsubPruneBackoff\n * before attempting to re-graft.\n */\nexport const GossipsubPruneBackoff = minute;\n/**\n * GossipsubPruneBackoffTicks is the number of heartbeat ticks for attempting to prune expired\n * backoff timers.\n */\nexport const GossipsubPruneBackoffTicks = 15;\n/**\n * GossipsubConnectors controls the number of active connection attempts for peers obtained through PX.\n */\nexport const GossipsubConnectors = 8;\n/**\n * GossipsubMaxPendingConnections sets the maximum number of pending connections for peers attempted through px.\n */\nexport const GossipsubMaxPendingConnections = 128;\n/**\n * GossipsubConnectionTimeout controls the timeout for connection attempts.\n */\nexport const GossipsubConnectionTimeout = 30 * second;\n/**\n * GossipsubDirectConnectTicks is the number of heartbeat ticks for attempting to reconnect direct peers\n * that are not currently connected.\n */\nexport const GossipsubDirectConnectTicks = 300;\n/**\n * GossipsubDirectConnectInitialDelay is the initial delay before opening connections to direct peers\n */\nexport const GossipsubDirectConnectInitialDelay = second;\n/**\n * GossipsubOpportunisticGraftTicks is the number of heartbeat ticks for attempting to improve the mesh\n * with opportunistic grafting. Every GossipsubOpportunisticGraftTicks we will attempt to select some\n * high-scoring mesh peers to replace lower-scoring ones, if the median score of our mesh peers falls\n * below a threshold\n */\nexport const GossipsubOpportunisticGraftTicks = 60;\n/**\n * GossipsubOpportunisticGraftPeers is the number of peers to opportunistically graft.\n */\nexport const GossipsubOpportunisticGraftPeers = 2;\n/**\n * If a GRAFT comes before GossipsubGraftFloodThreshold has elapsed since the last PRUNE,\n * then there is an extra score penalty applied to the peer through P7.\n */\nexport const GossipsubGraftFloodThreshold = 10 * second;\n/**\n * GossipsubMaxIHaveLength is the maximum number of messages to include in an IHAVE message.\n * Also controls the maximum number of IHAVE ids we will accept and request with IWANT from a\n * peer within a heartbeat, to protect from IHAVE floods. You should adjust this value from the\n * default if your system is pushing more than 5000 messages in GossipsubHistoryGossip heartbeats;\n * with the defaults this is 1666 messages/s.\n */\nexport const GossipsubMaxIHaveLength = 5000;\n/**\n * GossipsubMaxIHaveMessages is the maximum number of IHAVE messages to accept from a peer within a heartbeat.\n */\nexport const GossipsubMaxIHaveMessages = 10;\n/**\n * Time to wait for a message requested through IWANT following an IHAVE advertisement.\n * If the message is not received within this window, a broken promise is declared and\n * the router may apply bahavioural penalties.\n */\nexport const GossipsubIWantFollowupTime = 3 * second;\n/**\n * Time in milliseconds to keep message ids in the seen cache\n */\nexport const GossipsubSeenTTL = 2 * minute;\nexport const TimeCacheDuration = 120 * 1000;\nexport const ERR_TOPIC_VALIDATOR_REJECT = 'ERR_TOPIC_VALIDATOR_REJECT';\nexport const ERR_TOPIC_VALIDATOR_IGNORE = 'ERR_TOPIC_VALIDATOR_IGNORE';\n/**\n * If peer score is better than this, we accept messages from this peer\n * within ACCEPT_FROM_WHITELIST_DURATION_MS from the last time computing score.\n **/\nexport const ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE = 0;\n/**\n * If peer score >= ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE, accept up to this\n * number of messages from that peer.\n */\nexport const ACCEPT_FROM_WHITELIST_MAX_MESSAGES = 128;\n/**\n * If peer score >= ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE, accept messages from\n * this peer up to this time duration.\n */\nexport const ACCEPT_FROM_WHITELIST_DURATION_MS = 1000;\n/**\n * The default MeshMessageDeliveriesWindow to be used in metrics.\n */\nexport const DEFAULT_METRIC_MESH_MESSAGE_DELIVERIES_WINDOWS = 1000;\n//# sourceMappingURL=constants.js.map","/**\n * Pseudo-randomly shuffles an array\n *\n * Mutates the input array\n */\nexport function shuffle(arr) {\n    if (arr.length <= 1) {\n        return arr;\n    }\n    const randInt = () => {\n        return Math.floor(Math.random() * Math.floor(arr.length));\n    };\n    for (let i = 0; i < arr.length; i++) {\n        const j = randInt();\n        const tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n    return arr;\n}\n//# sourceMappingURL=shuffle.js.map","import { toString } from 'uint8arrays/to-string';\n/**\n * Browser friendly function to convert Uint8Array message id to base64 string.\n */\nexport function messageIdToString(msgId) {\n    return toString(msgId, 'base64');\n}\n//# sourceMappingURL=messageIdToString.js.map","import { TopicValidatorResult } from '@libp2p/interface-pubsub';\nexport var SignaturePolicy;\n(function (SignaturePolicy) {\n    /**\n     * On the producing side:\n     * - Build messages with the signature, key (from may be enough for certain inlineable public key types), from and seqno fields.\n     *\n     * On the consuming side:\n     * - Enforce the fields to be present, reject otherwise.\n     * - Propagate only if the fields are valid and signature can be verified, reject otherwise.\n     */\n    SignaturePolicy[\"StrictSign\"] = \"StrictSign\";\n    /**\n     * On the producing side:\n     * - Build messages without the signature, key, from and seqno fields.\n     * - The corresponding protobuf key-value pairs are absent from the marshalled message, not just empty.\n     *\n     * On the consuming side:\n     * - Enforce the fields to be absent, reject otherwise.\n     * - Propagate only if the fields are absent, reject otherwise.\n     * - A message_id function will not be able to use the above fields, and should instead rely on the data field. A commonplace strategy is to calculate a hash.\n     */\n    SignaturePolicy[\"StrictNoSign\"] = \"StrictNoSign\";\n})(SignaturePolicy || (SignaturePolicy = {}));\nexport var PublishConfigType;\n(function (PublishConfigType) {\n    PublishConfigType[PublishConfigType[\"Signing\"] = 0] = \"Signing\";\n    PublishConfigType[PublishConfigType[\"Anonymous\"] = 1] = \"Anonymous\";\n})(PublishConfigType || (PublishConfigType = {}));\nexport var RejectReason;\n(function (RejectReason) {\n    /**\n     * The message failed the configured validation during decoding.\n     * SelfOrigin is considered a ValidationError\n     */\n    RejectReason[\"Error\"] = \"error\";\n    /**\n     * Custom validator fn reported status IGNORE.\n     */\n    RejectReason[\"Ignore\"] = \"ignore\";\n    /**\n     * Custom validator fn reported status REJECT.\n     */\n    RejectReason[\"Reject\"] = \"reject\";\n    /**\n     * The peer that sent the message OR the source from field is blacklisted.\n     * Causes messages to be ignored, not penalized, neither do score record creation.\n     */\n    RejectReason[\"Blacklisted\"] = \"blacklisted\";\n})(RejectReason || (RejectReason = {}));\nexport var ValidateError;\n(function (ValidateError) {\n    /// The message has an invalid signature,\n    ValidateError[\"InvalidSignature\"] = \"invalid_signature\";\n    /// The sequence number was the incorrect size\n    ValidateError[\"InvalidSeqno\"] = \"invalid_seqno\";\n    /// The PeerId was invalid\n    ValidateError[\"InvalidPeerId\"] = \"invalid_peerid\";\n    /// Signature existed when validation has been sent to\n    /// [`crate::behaviour::MessageAuthenticity::Anonymous`].\n    ValidateError[\"SignaturePresent\"] = \"signature_present\";\n    /// Sequence number existed when validation has been sent to\n    /// [`crate::behaviour::MessageAuthenticity::Anonymous`].\n    ValidateError[\"SeqnoPresent\"] = \"seqno_present\";\n    /// Message source existed when validation has been sent to\n    /// [`crate::behaviour::MessageAuthenticity::Anonymous`].\n    ValidateError[\"FromPresent\"] = \"from_present\";\n    /// The data transformation failed.\n    ValidateError[\"TransformFailed\"] = \"transform_failed\";\n})(ValidateError || (ValidateError = {}));\nexport var MessageStatus;\n(function (MessageStatus) {\n    MessageStatus[\"duplicate\"] = \"duplicate\";\n    MessageStatus[\"invalid\"] = \"invalid\";\n    MessageStatus[\"valid\"] = \"valid\";\n})(MessageStatus || (MessageStatus = {}));\n/**\n * Typesafe conversion of MessageAcceptance -> RejectReason. TS ensures all values covered\n */\nexport function rejectReasonFromAcceptance(acceptance) {\n    switch (acceptance) {\n        case TopicValidatorResult.Ignore:\n            return RejectReason.Ignore;\n        case TopicValidatorResult.Reject:\n            return RejectReason.Reject;\n    }\n}\n//# sourceMappingURL=types.js.map","export const ERR_INVALID_PEER_SCORE_PARAMS = 'ERR_INVALID_PEER_SCORE_PARAMS';\nexport const ERR_INVALID_PEER_SCORE_THRESHOLDS = 'ERR_INVALID_PEER_SCORE_THRESHOLDS';\n//# sourceMappingURL=constants.js.map","import { ERR_INVALID_PEER_SCORE_PARAMS } from './constants.js';\nimport { CodeError } from '@libp2p/interfaces/errors';\nexport const defaultPeerScoreParams = {\n    topics: {},\n    topicScoreCap: 10.0,\n    appSpecificScore: () => 0.0,\n    appSpecificWeight: 10.0,\n    IPColocationFactorWeight: -5.0,\n    IPColocationFactorThreshold: 10.0,\n    IPColocationFactorWhitelist: new Set(),\n    behaviourPenaltyWeight: -10.0,\n    behaviourPenaltyThreshold: 0.0,\n    behaviourPenaltyDecay: 0.2,\n    decayInterval: 1000.0,\n    decayToZero: 0.1,\n    retainScore: 3600 * 1000\n};\nexport const defaultTopicScoreParams = {\n    topicWeight: 0.5,\n    timeInMeshWeight: 1,\n    timeInMeshQuantum: 1,\n    timeInMeshCap: 3600,\n    firstMessageDeliveriesWeight: 1,\n    firstMessageDeliveriesDecay: 0.5,\n    firstMessageDeliveriesCap: 2000,\n    meshMessageDeliveriesWeight: -1,\n    meshMessageDeliveriesDecay: 0.5,\n    meshMessageDeliveriesCap: 100,\n    meshMessageDeliveriesThreshold: 20,\n    meshMessageDeliveriesWindow: 10,\n    meshMessageDeliveriesActivation: 5000,\n    meshFailurePenaltyWeight: -1,\n    meshFailurePenaltyDecay: 0.5,\n    invalidMessageDeliveriesWeight: -1,\n    invalidMessageDeliveriesDecay: 0.3\n};\nexport function createPeerScoreParams(p = {}) {\n    return {\n        ...defaultPeerScoreParams,\n        ...p,\n        topics: p.topics\n            ? Object.entries(p.topics).reduce((topics, [topic, topicScoreParams]) => {\n                topics[topic] = createTopicScoreParams(topicScoreParams);\n                return topics;\n            }, {})\n            : {}\n    };\n}\nexport function createTopicScoreParams(p = {}) {\n    return {\n        ...defaultTopicScoreParams,\n        ...p\n    };\n}\n// peer score parameter validation\nexport function validatePeerScoreParams(p) {\n    for (const [topic, params] of Object.entries(p.topics)) {\n        try {\n            validateTopicScoreParams(params);\n        }\n        catch (e) {\n            throw new CodeError(`invalid score parameters for topic ${topic}: ${e.message}`, ERR_INVALID_PEER_SCORE_PARAMS);\n        }\n    }\n    // check that the topic score is 0 or something positive\n    if (p.topicScoreCap < 0) {\n        throw new CodeError('invalid topic score cap; must be positive (or 0 for no cap)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check that we have an app specific score; the weight can be anything (but expected positive)\n    if (p.appSpecificScore === null || p.appSpecificScore === undefined) {\n        throw new CodeError('missing application specific score function', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check the IP colocation factor\n    if (p.IPColocationFactorWeight > 0) {\n        throw new CodeError('invalid IPColocationFactorWeight; must be negative (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.IPColocationFactorWeight !== 0 && p.IPColocationFactorThreshold < 1) {\n        throw new CodeError('invalid IPColocationFactorThreshold; must be at least 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check the behaviour penalty\n    if (p.behaviourPenaltyWeight > 0) {\n        throw new CodeError('invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.behaviourPenaltyWeight !== 0 && (p.behaviourPenaltyDecay <= 0 || p.behaviourPenaltyDecay >= 1)) {\n        throw new CodeError('invalid BehaviourPenaltyDecay; must be between 0 and 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check the decay parameters\n    if (p.decayInterval < 1000) {\n        throw new CodeError('invalid DecayInterval; must be at least 1s', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.decayToZero <= 0 || p.decayToZero >= 1) {\n        throw new CodeError('invalid DecayToZero; must be between 0 and 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // no need to check the score retention; a value of 0 means that we don't retain scores\n}\nexport function validateTopicScoreParams(p) {\n    // make sure we have a sane topic weight\n    if (p.topicWeight < 0) {\n        throw new CodeError('invalid topic weight; must be >= 0', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check P1\n    if (p.timeInMeshQuantum === 0) {\n        throw new CodeError('invalid TimeInMeshQuantum; must be non zero', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.timeInMeshWeight < 0) {\n        throw new CodeError('invalid TimeInMeshWeight; must be positive (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.timeInMeshWeight !== 0 && p.timeInMeshQuantum <= 0) {\n        throw new CodeError('invalid TimeInMeshQuantum; must be positive', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.timeInMeshWeight !== 0 && p.timeInMeshCap <= 0) {\n        throw new CodeError('invalid TimeInMeshCap; must be positive', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check P2\n    if (p.firstMessageDeliveriesWeight < 0) {\n        throw new CodeError('invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.firstMessageDeliveriesWeight !== 0 &&\n        (p.firstMessageDeliveriesDecay <= 0 || p.firstMessageDeliveriesDecay >= 1)) {\n        throw new CodeError('invalid FirstMessageDeliveriesDecay; must be between 0 and 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.firstMessageDeliveriesWeight !== 0 && p.firstMessageDeliveriesCap <= 0) {\n        throw new CodeError('invalid FirstMessageDeliveriesCap; must be positive', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check P3\n    if (p.meshMessageDeliveriesWeight > 0) {\n        throw new CodeError('invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.meshMessageDeliveriesWeight !== 0 && (p.meshMessageDeliveriesDecay <= 0 || p.meshMessageDeliveriesDecay >= 1)) {\n        throw new CodeError('invalid MeshMessageDeliveriesDecay; must be between 0 and 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.meshMessageDeliveriesWeight !== 0 && p.meshMessageDeliveriesCap <= 0) {\n        throw new CodeError('invalid MeshMessageDeliveriesCap; must be positive', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.meshMessageDeliveriesWeight !== 0 && p.meshMessageDeliveriesThreshold <= 0) {\n        throw new CodeError('invalid MeshMessageDeliveriesThreshold; must be positive', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.meshMessageDeliveriesWindow < 0) {\n        throw new CodeError('invalid MeshMessageDeliveriesWindow; must be non-negative', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.meshMessageDeliveriesWeight !== 0 && p.meshMessageDeliveriesActivation < 1000) {\n        throw new CodeError('invalid MeshMessageDeliveriesActivation; must be at least 1s', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check P3b\n    if (p.meshFailurePenaltyWeight > 0) {\n        throw new CodeError('invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.meshFailurePenaltyWeight !== 0 && (p.meshFailurePenaltyDecay <= 0 || p.meshFailurePenaltyDecay >= 1)) {\n        throw new CodeError('invalid MeshFailurePenaltyDecay; must be between 0 and 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    // check P4\n    if (p.invalidMessageDeliveriesWeight > 0) {\n        throw new CodeError('invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n    if (p.invalidMessageDeliveriesDecay <= 0 || p.invalidMessageDeliveriesDecay >= 1) {\n        throw new CodeError('invalid InvalidMessageDeliveriesDecay; must be between 0 and 1', ERR_INVALID_PEER_SCORE_PARAMS);\n    }\n}\n//# sourceMappingURL=peer-score-params.js.map","import { ERR_INVALID_PEER_SCORE_THRESHOLDS } from './constants.js';\nimport { CodeError } from '@libp2p/interfaces/errors';\nexport const defaultPeerScoreThresholds = {\n    gossipThreshold: -10,\n    publishThreshold: -50,\n    graylistThreshold: -80,\n    acceptPXThreshold: 10,\n    opportunisticGraftThreshold: 20\n};\nexport function createPeerScoreThresholds(p = {}) {\n    return {\n        ...defaultPeerScoreThresholds,\n        ...p\n    };\n}\nexport function validatePeerScoreThresholds(p) {\n    if (p.gossipThreshold > 0) {\n        throw new CodeError('invalid gossip threshold; it must be <= 0', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n    }\n    if (p.publishThreshold > 0 || p.publishThreshold > p.gossipThreshold) {\n        throw new CodeError('invalid publish threshold; it must be <= 0 and <= gossip threshold', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n    }\n    if (p.graylistThreshold > 0 || p.graylistThreshold > p.publishThreshold) {\n        throw new CodeError('invalid graylist threshold; it must be <= 0 and <= publish threshold', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n    }\n    if (p.acceptPXThreshold < 0) {\n        throw new CodeError('invalid accept PX threshold; it must be >= 0', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n    }\n    if (p.opportunisticGraftThreshold < 0) {\n        throw new CodeError('invalid opportunistic grafting threshold; it must be >= 0', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n    }\n}\n//# sourceMappingURL=peer-score-thresholds.js.map","export function computeScore(peer, pstats, params, peerIPs) {\n    let score = 0;\n    // topic stores\n    Object.entries(pstats.topics).forEach(([topic, tstats]) => {\n        // the topic parameters\n        const topicParams = params.topics[topic];\n        if (topicParams === undefined) {\n            // we are not scoring this topic\n            return;\n        }\n        let topicScore = 0;\n        // P1: time in Mesh\n        if (tstats.inMesh) {\n            let p1 = tstats.meshTime / topicParams.timeInMeshQuantum;\n            if (p1 > topicParams.timeInMeshCap) {\n                p1 = topicParams.timeInMeshCap;\n            }\n            topicScore += p1 * topicParams.timeInMeshWeight;\n        }\n        // P2: first message deliveries\n        let p2 = tstats.firstMessageDeliveries;\n        if (p2 > topicParams.firstMessageDeliveriesCap) {\n            p2 = topicParams.firstMessageDeliveriesCap;\n        }\n        topicScore += p2 * topicParams.firstMessageDeliveriesWeight;\n        // P3: mesh message deliveries\n        if (tstats.meshMessageDeliveriesActive &&\n            tstats.meshMessageDeliveries < topicParams.meshMessageDeliveriesThreshold) {\n            const deficit = topicParams.meshMessageDeliveriesThreshold - tstats.meshMessageDeliveries;\n            const p3 = deficit * deficit;\n            topicScore += p3 * topicParams.meshMessageDeliveriesWeight;\n        }\n        // P3b:\n        // NOTE: the weight of P3b is negative (validated in validateTopicScoreParams) so this detracts\n        const p3b = tstats.meshFailurePenalty;\n        topicScore += p3b * topicParams.meshFailurePenaltyWeight;\n        // P4: invalid messages\n        // NOTE: the weight of P4 is negative (validated in validateTopicScoreParams) so this detracts\n        const p4 = tstats.invalidMessageDeliveries * tstats.invalidMessageDeliveries;\n        topicScore += p4 * topicParams.invalidMessageDeliveriesWeight;\n        // update score, mixing with topic weight\n        score += topicScore * topicParams.topicWeight;\n    });\n    // apply the topic score cap, if any\n    if (params.topicScoreCap > 0 && score > params.topicScoreCap) {\n        score = params.topicScoreCap;\n    }\n    // P5: application-specific score\n    const p5 = params.appSpecificScore(peer);\n    score += p5 * params.appSpecificWeight;\n    // P6: IP colocation factor\n    pstats.knownIPs.forEach((ip) => {\n        if (params.IPColocationFactorWhitelist.has(ip)) {\n            return;\n        }\n        // P6 has a cliff (IPColocationFactorThreshold)\n        // It's only applied if at least that many peers are connected to us from that source IP addr.\n        // It is quadratic, and the weight is negative (validated in validatePeerScoreParams)\n        const peersInIP = peerIPs.get(ip);\n        const numPeersInIP = peersInIP ? peersInIP.size : 0;\n        if (numPeersInIP > params.IPColocationFactorThreshold) {\n            const surplus = numPeersInIP - params.IPColocationFactorThreshold;\n            const p6 = surplus * surplus;\n            score += p6 * params.IPColocationFactorWeight;\n        }\n    });\n    // P7: behavioural pattern penalty\n    if (pstats.behaviourPenalty > params.behaviourPenaltyThreshold) {\n        const excess = pstats.behaviourPenalty - params.behaviourPenaltyThreshold;\n        const p7 = excess * excess;\n        score += p7 * params.behaviourPenaltyWeight;\n    }\n    return score;\n}\n//# sourceMappingURL=compute-score.js.map","import { TimeCacheDuration } from '../constants.js';\nimport Denque from 'denque';\nexport var DeliveryRecordStatus;\n(function (DeliveryRecordStatus) {\n    /**\n     * we don't know (yet) if the message is valid\n     */\n    DeliveryRecordStatus[DeliveryRecordStatus[\"unknown\"] = 0] = \"unknown\";\n    /**\n     * we know the message is valid\n     */\n    DeliveryRecordStatus[DeliveryRecordStatus[\"valid\"] = 1] = \"valid\";\n    /**\n     * we know the message is invalid\n     */\n    DeliveryRecordStatus[DeliveryRecordStatus[\"invalid\"] = 2] = \"invalid\";\n    /**\n     * we were instructed by the validator to ignore the message\n     */\n    DeliveryRecordStatus[DeliveryRecordStatus[\"ignored\"] = 3] = \"ignored\";\n})(DeliveryRecordStatus || (DeliveryRecordStatus = {}));\n/**\n * Map of canonical message ID to DeliveryRecord\n *\n * Maintains an internal queue for efficient gc of old messages\n */\nexport class MessageDeliveries {\n    constructor() {\n        this.records = new Map();\n        this.queue = new Denque();\n    }\n    ensureRecord(msgIdStr) {\n        let drec = this.records.get(msgIdStr);\n        if (drec) {\n            return drec;\n        }\n        // record doesn't exist yet\n        // create record\n        drec = {\n            status: DeliveryRecordStatus.unknown,\n            firstSeen: Date.now(),\n            validated: 0,\n            peers: new Set()\n        };\n        this.records.set(msgIdStr, drec);\n        // and add msgId to the queue\n        const entry = {\n            msgId: msgIdStr,\n            expire: Date.now() + TimeCacheDuration\n        };\n        this.queue.push(entry);\n        return drec;\n    }\n    gc() {\n        const now = Date.now();\n        // queue is sorted by expiry time\n        // remove expired messages, remove from queue until first un-expired message found\n        let head = this.queue.peekFront();\n        while (head && head.expire < now) {\n            this.records.delete(head.msgId);\n            this.queue.shift();\n            head = this.queue.peekFront();\n        }\n    }\n    clear() {\n        this.records.clear();\n        this.queue.clear();\n    }\n}\n//# sourceMappingURL=message-deliveries.js.map","/**\n * Exclude up to `ineed` items from a set if item meets condition `cond`\n */\nexport function removeItemsFromSet(superSet, ineed, cond = () => true) {\n    const subset = new Set();\n    if (ineed <= 0)\n        return subset;\n    for (const id of superSet) {\n        if (subset.size >= ineed)\n            break;\n        if (cond(id)) {\n            subset.add(id);\n            superSet.delete(id);\n        }\n    }\n    return subset;\n}\n/**\n * Exclude up to `ineed` items from a set\n */\nexport function removeFirstNItemsFromSet(superSet, ineed) {\n    return removeItemsFromSet(superSet, ineed, () => true);\n}\nexport class MapDef extends Map {\n    constructor(getDefault) {\n        super();\n        this.getDefault = getDefault;\n    }\n    getOrDefault(key) {\n        let value = super.get(key);\n        if (value === undefined) {\n            value = this.getDefault();\n            this.set(key, value);\n        }\n        return value;\n    }\n}\n//# sourceMappingURL=set.js.map","import { validatePeerScoreParams } from './peer-score-params.js';\nimport { computeScore } from './compute-score.js';\nimport { MessageDeliveries, DeliveryRecordStatus } from './message-deliveries.js';\nimport { logger } from '@libp2p/logger';\nimport { RejectReason } from '../types.js';\nimport { MapDef } from '../utils/set.js';\nconst log = logger('libp2p:gossipsub:score');\nexport class PeerScore {\n    constructor(params, metrics, opts) {\n        this.params = params;\n        this.metrics = metrics;\n        /**\n         * Per-peer stats for score calculation\n         */\n        this.peerStats = new Map();\n        /**\n         * IP colocation tracking; maps IP => set of peers.\n         */\n        this.peerIPs = new MapDef(() => new Set());\n        /**\n         * Cache score up to decayInterval if topic stats are unchanged.\n         */\n        this.scoreCache = new Map();\n        /**\n         * Recent message delivery timing/participants\n         */\n        this.deliveryRecords = new MessageDeliveries();\n        validatePeerScoreParams(params);\n        this.scoreCacheValidityMs = opts.scoreCacheValidityMs;\n        this.computeScore = opts.computeScore ?? computeScore;\n    }\n    get size() {\n        return this.peerStats.size;\n    }\n    /**\n     * Start PeerScore instance\n     */\n    start() {\n        if (this._backgroundInterval) {\n            log('Peer score already running');\n            return;\n        }\n        this._backgroundInterval = setInterval(() => this.background(), this.params.decayInterval);\n        log('started');\n    }\n    /**\n     * Stop PeerScore instance\n     */\n    stop() {\n        if (!this._backgroundInterval) {\n            log('Peer score already stopped');\n            return;\n        }\n        clearInterval(this._backgroundInterval);\n        delete this._backgroundInterval;\n        this.peerIPs.clear();\n        this.peerStats.clear();\n        this.deliveryRecords.clear();\n        log('stopped');\n    }\n    /**\n     * Periodic maintenance\n     */\n    background() {\n        this.refreshScores();\n        this.deliveryRecords.gc();\n    }\n    dumpPeerScoreStats() {\n        return Object.fromEntries(Array.from(this.peerStats.entries()).map(([peer, stats]) => [peer, stats]));\n    }\n    /**\n     * Decays scores, and purges score records for disconnected peers once their expiry has elapsed.\n     */\n    refreshScores() {\n        const now = Date.now();\n        const decayToZero = this.params.decayToZero;\n        this.peerStats.forEach((pstats, id) => {\n            if (!pstats.connected) {\n                // has the retention period expired?\n                if (now > pstats.expire) {\n                    // yes, throw it away (but clean up the IP tracking first)\n                    this.removeIPsForPeer(id, pstats.knownIPs);\n                    this.peerStats.delete(id);\n                    this.scoreCache.delete(id);\n                }\n                // we don't decay retained scores, as the peer is not active.\n                // this way the peer cannot reset a negative score by simply disconnecting and reconnecting,\n                // unless the retention period has elapsed.\n                // similarly, a well behaved peer does not lose its score by getting disconnected.\n                return;\n            }\n            Object.entries(pstats.topics).forEach(([topic, tstats]) => {\n                const tparams = this.params.topics[topic];\n                if (tparams === undefined) {\n                    // we are not scoring this topic\n                    // should be unreachable, we only add scored topics to pstats\n                    return;\n                }\n                // decay counters\n                tstats.firstMessageDeliveries *= tparams.firstMessageDeliveriesDecay;\n                if (tstats.firstMessageDeliveries < decayToZero) {\n                    tstats.firstMessageDeliveries = 0;\n                }\n                tstats.meshMessageDeliveries *= tparams.meshMessageDeliveriesDecay;\n                if (tstats.meshMessageDeliveries < decayToZero) {\n                    tstats.meshMessageDeliveries = 0;\n                }\n                tstats.meshFailurePenalty *= tparams.meshFailurePenaltyDecay;\n                if (tstats.meshFailurePenalty < decayToZero) {\n                    tstats.meshFailurePenalty = 0;\n                }\n                tstats.invalidMessageDeliveries *= tparams.invalidMessageDeliveriesDecay;\n                if (tstats.invalidMessageDeliveries < decayToZero) {\n                    tstats.invalidMessageDeliveries = 0;\n                }\n                // update mesh time and activate mesh message delivery parameter if need be\n                if (tstats.inMesh) {\n                    tstats.meshTime = now - tstats.graftTime;\n                    if (tstats.meshTime > tparams.meshMessageDeliveriesActivation) {\n                        tstats.meshMessageDeliveriesActive = true;\n                    }\n                }\n            });\n            // decay P7 counter\n            pstats.behaviourPenalty *= this.params.behaviourPenaltyDecay;\n            if (pstats.behaviourPenalty < decayToZero) {\n                pstats.behaviourPenalty = 0;\n            }\n        });\n    }\n    /**\n     * Return the score for a peer\n     */\n    score(id) {\n        this.metrics?.scoreFnCalls.inc();\n        const pstats = this.peerStats.get(id);\n        if (!pstats) {\n            return 0;\n        }\n        const now = Date.now();\n        const cacheEntry = this.scoreCache.get(id);\n        // Found cached score within validity period\n        if (cacheEntry && cacheEntry.cacheUntil > now) {\n            return cacheEntry.score;\n        }\n        this.metrics?.scoreFnRuns.inc();\n        const score = this.computeScore(id, pstats, this.params, this.peerIPs);\n        const cacheUntil = now + this.scoreCacheValidityMs;\n        if (cacheEntry) {\n            this.metrics?.scoreCachedDelta.observe(Math.abs(score - cacheEntry.score));\n            cacheEntry.score = score;\n            cacheEntry.cacheUntil = cacheUntil;\n        }\n        else {\n            this.scoreCache.set(id, { score, cacheUntil });\n        }\n        return score;\n    }\n    /**\n     * Apply a behavioural penalty to a peer\n     */\n    addPenalty(id, penalty, penaltyLabel) {\n        const pstats = this.peerStats.get(id);\n        if (pstats) {\n            pstats.behaviourPenalty += penalty;\n            this.metrics?.onScorePenalty(penaltyLabel);\n        }\n    }\n    addPeer(id) {\n        // create peer stats (not including topic stats for each topic to be scored)\n        // topic stats will be added as needed\n        const pstats = {\n            connected: true,\n            expire: 0,\n            topics: {},\n            knownIPs: new Set(),\n            behaviourPenalty: 0\n        };\n        this.peerStats.set(id, pstats);\n    }\n    /** Adds a new IP to a peer, if the peer is not known the update is ignored */\n    addIP(id, ip) {\n        const pstats = this.peerStats.get(id);\n        if (pstats) {\n            pstats.knownIPs.add(ip);\n        }\n        this.peerIPs.getOrDefault(ip).add(id);\n    }\n    /** Remove peer association with IP */\n    removeIP(id, ip) {\n        const pstats = this.peerStats.get(id);\n        if (pstats) {\n            pstats.knownIPs.delete(ip);\n        }\n        const peersWithIP = this.peerIPs.get(ip);\n        if (peersWithIP) {\n            peersWithIP.delete(id);\n            if (peersWithIP.size === 0) {\n                this.peerIPs.delete(ip);\n            }\n        }\n    }\n    removePeer(id) {\n        const pstats = this.peerStats.get(id);\n        if (!pstats) {\n            return;\n        }\n        // decide whether to retain the score; this currently only retains non-positive scores\n        // to dissuade attacks on the score function.\n        if (this.score(id) > 0) {\n            this.removeIPsForPeer(id, pstats.knownIPs);\n            this.peerStats.delete(id);\n            return;\n        }\n        // furthermore, when we decide to retain the score, the firstMessageDelivery counters are\n        // reset to 0 and mesh delivery penalties applied.\n        Object.entries(pstats.topics).forEach(([topic, tstats]) => {\n            tstats.firstMessageDeliveries = 0;\n            const threshold = this.params.topics[topic].meshMessageDeliveriesThreshold;\n            if (tstats.inMesh && tstats.meshMessageDeliveriesActive && tstats.meshMessageDeliveries < threshold) {\n                const deficit = threshold - tstats.meshMessageDeliveries;\n                tstats.meshFailurePenalty += deficit * deficit;\n            }\n            tstats.inMesh = false;\n            tstats.meshMessageDeliveriesActive = false;\n        });\n        pstats.connected = false;\n        pstats.expire = Date.now() + this.params.retainScore;\n    }\n    /** Handles scoring functionality as a peer GRAFTs to a topic. */\n    graft(id, topic) {\n        const pstats = this.peerStats.get(id);\n        if (pstats) {\n            const tstats = this.getPtopicStats(pstats, topic);\n            if (tstats) {\n                // if we are scoring the topic, update the mesh status.\n                tstats.inMesh = true;\n                tstats.graftTime = Date.now();\n                tstats.meshTime = 0;\n                tstats.meshMessageDeliveriesActive = false;\n            }\n        }\n    }\n    /** Handles scoring functionality as a peer PRUNEs from a topic. */\n    prune(id, topic) {\n        const pstats = this.peerStats.get(id);\n        if (pstats) {\n            const tstats = this.getPtopicStats(pstats, topic);\n            if (tstats) {\n                // sticky mesh delivery rate failure penalty\n                const threshold = this.params.topics[topic].meshMessageDeliveriesThreshold;\n                if (tstats.meshMessageDeliveriesActive && tstats.meshMessageDeliveries < threshold) {\n                    const deficit = threshold - tstats.meshMessageDeliveries;\n                    tstats.meshFailurePenalty += deficit * deficit;\n                }\n                tstats.meshMessageDeliveriesActive = false;\n                tstats.inMesh = false;\n                // TODO: Consider clearing score cache on important penalties\n                // this.scoreCache.delete(id)\n            }\n        }\n    }\n    validateMessage(msgIdStr) {\n        this.deliveryRecords.ensureRecord(msgIdStr);\n    }\n    deliverMessage(from, msgIdStr, topic) {\n        this.markFirstMessageDelivery(from, topic);\n        const drec = this.deliveryRecords.ensureRecord(msgIdStr);\n        const now = Date.now();\n        // defensive check that this is the first delivery trace -- delivery status should be unknown\n        if (drec.status !== DeliveryRecordStatus.unknown) {\n            log('unexpected delivery: message from %s was first seen %s ago and has delivery status %s', from, now - drec.firstSeen, DeliveryRecordStatus[drec.status]);\n            return;\n        }\n        // mark the message as valid and reward mesh peers that have already forwarded it to us\n        drec.status = DeliveryRecordStatus.valid;\n        drec.validated = now;\n        drec.peers.forEach((p) => {\n            // this check is to make sure a peer can't send us a message twice and get a double count\n            // if it is a first delivery.\n            if (p !== from.toString()) {\n                this.markDuplicateMessageDelivery(p, topic);\n            }\n        });\n    }\n    /**\n     * Similar to `rejectMessage` except does not require the message id or reason for an invalid message.\n     */\n    rejectInvalidMessage(from, topic) {\n        this.markInvalidMessageDelivery(from, topic);\n    }\n    rejectMessage(from, msgIdStr, topic, reason) {\n        switch (reason) {\n            // these messages are not tracked, but the peer is penalized as they are invalid\n            case RejectReason.Error:\n                this.markInvalidMessageDelivery(from, topic);\n                return;\n            // we ignore those messages, so do nothing.\n            case RejectReason.Blacklisted:\n                return;\n            // the rest are handled after record creation\n        }\n        const drec = this.deliveryRecords.ensureRecord(msgIdStr);\n        // defensive check that this is the first rejection -- delivery status should be unknown\n        if (drec.status !== DeliveryRecordStatus.unknown) {\n            log('unexpected rejection: message from %s was first seen %s ago and has delivery status %d', from, Date.now() - drec.firstSeen, DeliveryRecordStatus[drec.status]);\n            return;\n        }\n        if (reason === RejectReason.Ignore) {\n            // we were explicitly instructed by the validator to ignore the message but not penalize the peer\n            drec.status = DeliveryRecordStatus.ignored;\n            drec.peers.clear();\n            return;\n        }\n        // mark the message as invalid and penalize peers that have already forwarded it.\n        drec.status = DeliveryRecordStatus.invalid;\n        this.markInvalidMessageDelivery(from, topic);\n        drec.peers.forEach((p) => {\n            this.markInvalidMessageDelivery(p, topic);\n        });\n        // release the delivery time tracking map to free some memory early\n        drec.peers.clear();\n    }\n    duplicateMessage(from, msgIdStr, topic) {\n        const drec = this.deliveryRecords.ensureRecord(msgIdStr);\n        if (drec.peers.has(from)) {\n            // we have already seen this duplicate\n            return;\n        }\n        switch (drec.status) {\n            case DeliveryRecordStatus.unknown:\n                // the message is being validated; track the peer delivery and wait for\n                // the Deliver/Reject/Ignore notification.\n                drec.peers.add(from);\n                break;\n            case DeliveryRecordStatus.valid:\n                // mark the peer delivery time to only count a duplicate delivery once.\n                drec.peers.add(from);\n                this.markDuplicateMessageDelivery(from, topic, drec.validated);\n                break;\n            case DeliveryRecordStatus.invalid:\n                // we no longer track delivery time\n                this.markInvalidMessageDelivery(from, topic);\n                break;\n            case DeliveryRecordStatus.ignored:\n                // the message was ignored; do nothing (we don't know if it was valid)\n                break;\n        }\n    }\n    /**\n     * Increments the \"invalid message deliveries\" counter for all scored topics the message is published in.\n     */\n    markInvalidMessageDelivery(from, topic) {\n        const pstats = this.peerStats.get(from);\n        if (pstats) {\n            const tstats = this.getPtopicStats(pstats, topic);\n            if (tstats) {\n                tstats.invalidMessageDeliveries += 1;\n            }\n        }\n    }\n    /**\n     * Increments the \"first message deliveries\" counter for all scored topics the message is published in,\n     * as well as the \"mesh message deliveries\" counter, if the peer is in the mesh for the topic.\n     * Messages already known (with the seenCache) are counted with markDuplicateMessageDelivery()\n     */\n    markFirstMessageDelivery(from, topic) {\n        const pstats = this.peerStats.get(from);\n        if (pstats) {\n            const tstats = this.getPtopicStats(pstats, topic);\n            if (tstats) {\n                let cap = this.params.topics[topic].firstMessageDeliveriesCap;\n                tstats.firstMessageDeliveries = Math.min(cap, tstats.firstMessageDeliveries + 1);\n                if (tstats.inMesh) {\n                    cap = this.params.topics[topic].meshMessageDeliveriesCap;\n                    tstats.meshMessageDeliveries = Math.min(cap, tstats.meshMessageDeliveries + 1);\n                }\n            }\n        }\n    }\n    /**\n     * Increments the \"mesh message deliveries\" counter for messages we've seen before,\n     * as long the message was received within the P3 window.\n     */\n    markDuplicateMessageDelivery(from, topic, validatedTime) {\n        const pstats = this.peerStats.get(from);\n        if (pstats) {\n            const now = validatedTime !== undefined ? Date.now() : 0;\n            const tstats = this.getPtopicStats(pstats, topic);\n            if (tstats && tstats.inMesh) {\n                const tparams = this.params.topics[topic];\n                // check against the mesh delivery window -- if the validated time is passed as 0, then\n                // the message was received before we finished validation and thus falls within the mesh\n                // delivery window.\n                if (validatedTime !== undefined) {\n                    const deliveryDelayMs = now - validatedTime;\n                    const isLateDelivery = deliveryDelayMs > tparams.meshMessageDeliveriesWindow;\n                    this.metrics?.onDuplicateMsgDelivery(topic, deliveryDelayMs, isLateDelivery);\n                    if (isLateDelivery) {\n                        return;\n                    }\n                }\n                const cap = tparams.meshMessageDeliveriesCap;\n                tstats.meshMessageDeliveries = Math.min(cap, tstats.meshMessageDeliveries + 1);\n            }\n        }\n    }\n    /**\n     * Removes an IP list from the tracking list for a peer.\n     */\n    removeIPsForPeer(id, ipsToRemove) {\n        for (const ipToRemove of ipsToRemove) {\n            const peerSet = this.peerIPs.get(ipToRemove);\n            if (peerSet) {\n                peerSet.delete(id);\n                if (peerSet.size === 0) {\n                    this.peerIPs.delete(ipToRemove);\n                }\n            }\n        }\n    }\n    /**\n     * Returns topic stats if they exist, otherwise if the supplied parameters score the\n     * topic, inserts the default stats and returns a reference to those. If neither apply, returns None.\n     */\n    getPtopicStats(pstats, topic) {\n        let topicStats = pstats.topics[topic];\n        if (topicStats !== undefined) {\n            return topicStats;\n        }\n        if (this.params.topics[topic] !== undefined) {\n            topicStats = {\n                inMesh: false,\n                graftTime: 0,\n                meshTime: 0,\n                firstMessageDeliveries: 0,\n                meshMessageDeliveries: 0,\n                meshMessageDeliveriesActive: false,\n                meshFailurePenalty: 0,\n                invalidMessageDeliveries: 0\n            };\n            pstats.topics[topic] = topicStats;\n            return topicStats;\n        }\n        return null;\n    }\n}\n//# sourceMappingURL=peer-score.js.map","import { RejectReason } from './types.js';\n/**\n * IWantTracer is an internal tracer that tracks IWANT requests in order to penalize\n * peers who don't follow up on IWANT requests after an IHAVE advertisement.\n * The tracking of promises is probabilistic to avoid using too much memory.\n *\n * Note: Do not confuse these 'promises' with JS Promise objects.\n * These 'promises' are merely expectations of a peer's behavior.\n */\nexport class IWantTracer {\n    constructor(gossipsubIWantFollowupMs, msgIdToStrFn, metrics) {\n        this.gossipsubIWantFollowupMs = gossipsubIWantFollowupMs;\n        this.msgIdToStrFn = msgIdToStrFn;\n        this.metrics = metrics;\n        /**\n         * Promises to deliver a message\n         * Map per message id, per peer, promise expiration time\n         */\n        this.promises = new Map();\n        /**\n         * First request time by msgId. Used for metrics to track expire times.\n         * Necessary to know if peers are actually breaking promises or simply sending them a bit later\n         */\n        this.requestMsByMsg = new Map();\n        this.requestMsByMsgExpire = 10 * gossipsubIWantFollowupMs;\n    }\n    get size() {\n        return this.promises.size;\n    }\n    get requestMsByMsgSize() {\n        return this.requestMsByMsg.size;\n    }\n    /**\n     * Track a promise to deliver a message from a list of msgIds we are requesting\n     */\n    addPromise(from, msgIds) {\n        // pick msgId randomly from the list\n        const ix = Math.floor(Math.random() * msgIds.length);\n        const msgId = msgIds[ix];\n        const msgIdStr = this.msgIdToStrFn(msgId);\n        let expireByPeer = this.promises.get(msgIdStr);\n        if (!expireByPeer) {\n            expireByPeer = new Map();\n            this.promises.set(msgIdStr, expireByPeer);\n        }\n        const now = Date.now();\n        // If a promise for this message id and peer already exists we don't update the expiry\n        if (!expireByPeer.has(from)) {\n            expireByPeer.set(from, now + this.gossipsubIWantFollowupMs);\n            if (this.metrics) {\n                this.metrics.iwantPromiseStarted.inc(1);\n                if (!this.requestMsByMsg.has(msgIdStr)) {\n                    this.requestMsByMsg.set(msgIdStr, now);\n                }\n            }\n        }\n    }\n    /**\n     * Returns the number of broken promises for each peer who didn't follow up on an IWANT request.\n     *\n     * This should be called not too often relative to the expire times, since it iterates over the whole data.\n     */\n    getBrokenPromises() {\n        const now = Date.now();\n        const result = new Map();\n        let brokenPromises = 0;\n        this.promises.forEach((expireByPeer, msgId) => {\n            expireByPeer.forEach((expire, p) => {\n                // the promise has been broken\n                if (expire < now) {\n                    // add 1 to result\n                    result.set(p, (result.get(p) ?? 0) + 1);\n                    // delete from tracked promises\n                    expireByPeer.delete(p);\n                    // for metrics\n                    brokenPromises++;\n                }\n            });\n            // clean up empty promises for a msgId\n            if (!expireByPeer.size) {\n                this.promises.delete(msgId);\n            }\n        });\n        this.metrics?.iwantPromiseBroken.inc(brokenPromises);\n        return result;\n    }\n    /**\n     * Someone delivered a message, stop tracking promises for it\n     */\n    deliverMessage(msgIdStr, isDuplicate = false) {\n        this.trackMessage(msgIdStr);\n        const expireByPeer = this.promises.get(msgIdStr);\n        // Expired promise, check requestMsByMsg\n        if (expireByPeer) {\n            this.promises.delete(msgIdStr);\n            if (this.metrics) {\n                this.metrics.iwantPromiseResolved.inc(1);\n                if (isDuplicate)\n                    this.metrics.iwantPromiseResolvedFromDuplicate.inc(1);\n                this.metrics.iwantPromiseResolvedPeers.inc(expireByPeer.size);\n            }\n        }\n    }\n    /**\n     * A message got rejected, so we can stop tracking promises and let the score penalty apply from invalid message delivery,\n     * unless its an obviously invalid message.\n     */\n    rejectMessage(msgIdStr, reason) {\n        this.trackMessage(msgIdStr);\n        // A message got rejected, so we can stop tracking promises and let the score penalty apply.\n        // With the expection of obvious invalid messages\n        switch (reason) {\n            case RejectReason.Error:\n                return;\n        }\n        this.promises.delete(msgIdStr);\n    }\n    clear() {\n        this.promises.clear();\n    }\n    prune() {\n        const maxMs = Date.now() - this.requestMsByMsgExpire;\n        let count = 0;\n        for (const [k, v] of this.requestMsByMsg.entries()) {\n            if (v < maxMs) {\n                // messages that stay too long in the requestMsByMsg map, delete\n                this.requestMsByMsg.delete(k);\n                count++;\n            }\n            else {\n                // recent messages, keep them\n                // sort by insertion order\n                break;\n            }\n        }\n        this.metrics?.iwantMessagePruned.inc(count);\n    }\n    trackMessage(msgIdStr) {\n        if (this.metrics) {\n            const requestMs = this.requestMsByMsg.get(msgIdStr);\n            if (requestMs !== undefined) {\n                this.metrics.iwantPromiseDeliveryTime.observe((Date.now() - requestMs) / 1000);\n                this.requestMsByMsg.delete(msgIdStr);\n            }\n        }\n    }\n}\n//# sourceMappingURL=tracer.js.map","/**\n * This is similar to https://github.com/daviddias/time-cache/blob/master/src/index.js\n * for our own need, we don't use lodash throttle to improve performance.\n * This gives 4x - 5x performance gain compared to npm TimeCache\n */\nexport class SimpleTimeCache {\n    constructor(opts) {\n        this.entries = new Map();\n        this.validityMs = opts.validityMs;\n        // allow negative validityMs so that this does not cache anything, spec test compliance.spec.js\n        // sends duplicate messages and expect peer to receive all. Application likely uses positive validityMs\n    }\n    get size() {\n        return this.entries.size;\n    }\n    /** Returns true if there was a key collision and the entry is dropped */\n    put(key, value) {\n        if (this.entries.has(key)) {\n            // Key collisions break insertion order in the entries cache, which break prune logic.\n            // prune relies on each iterated entry to have strictly ascending validUntilMs, else it\n            // won't prune expired entries and SimpleTimeCache will grow unexpectedly.\n            // As of Oct 2022 NodeJS v16, inserting the same key twice with different value does not\n            // change the key position in the iterator stream. A unit test asserts this behaviour.\n            return true;\n        }\n        this.entries.set(key, { value, validUntilMs: Date.now() + this.validityMs });\n        return false;\n    }\n    prune() {\n        const now = Date.now();\n        for (const [k, v] of this.entries.entries()) {\n            if (v.validUntilMs < now) {\n                this.entries.delete(k);\n            }\n            else {\n                // Entries are inserted with strictly ascending validUntilMs.\n                // Stop early to save iterations\n                break;\n            }\n        }\n    }\n    has(key) {\n        return this.entries.has(key);\n    }\n    get(key) {\n        const value = this.entries.get(key);\n        return value && value.validUntilMs >= Date.now() ? value.value : undefined;\n    }\n    clear() {\n        this.entries.clear();\n    }\n}\n//# sourceMappingURL=time-cache.js.map","import { RejectReason } from './types.js';\nexport var MessageSource;\n(function (MessageSource) {\n    MessageSource[\"forward\"] = \"forward\";\n    MessageSource[\"publish\"] = \"publish\";\n})(MessageSource || (MessageSource = {}));\nexport var InclusionReason;\n(function (InclusionReason) {\n    /** Peer was a fanaout peer. */\n    InclusionReason[\"Fanout\"] = \"fanout\";\n    /** Included from random selection. */\n    InclusionReason[\"Random\"] = \"random\";\n    /** Peer subscribed. */\n    InclusionReason[\"Subscribed\"] = \"subscribed\";\n    /** On heartbeat, peer was included to fill the outbound quota. */\n    InclusionReason[\"Outbound\"] = \"outbound\";\n    /** On heartbeat, not enough peers in mesh */\n    InclusionReason[\"NotEnough\"] = \"not_enough\";\n    /** On heartbeat opportunistic grafting due to low mesh score */\n    InclusionReason[\"Opportunistic\"] = \"opportunistic\";\n})(InclusionReason || (InclusionReason = {}));\n/// Reasons why a peer was removed from the mesh.\nexport var ChurnReason;\n(function (ChurnReason) {\n    /// Peer disconnected.\n    ChurnReason[\"Dc\"] = \"disconnected\";\n    /// Peer had a bad score.\n    ChurnReason[\"BadScore\"] = \"bad_score\";\n    /// Peer sent a PRUNE.\n    ChurnReason[\"Prune\"] = \"prune\";\n    /// Peer unsubscribed.\n    ChurnReason[\"Unsub\"] = \"unsubscribed\";\n    /// Too many peers.\n    ChurnReason[\"Excess\"] = \"excess\";\n})(ChurnReason || (ChurnReason = {}));\n/// Kinds of reasons a peer's score has been penalized\nexport var ScorePenalty;\n(function (ScorePenalty) {\n    /// A peer grafted before waiting the back-off time.\n    ScorePenalty[\"GraftBackoff\"] = \"graft_backoff\";\n    /// A Peer did not respond to an IWANT request in time.\n    ScorePenalty[\"BrokenPromise\"] = \"broken_promise\";\n    /// A Peer did not send enough messages as expected.\n    ScorePenalty[\"MessageDeficit\"] = \"message_deficit\";\n    /// Too many peers under one IP address.\n    ScorePenalty[\"IPColocation\"] = \"IP_colocation\";\n})(ScorePenalty || (ScorePenalty = {}));\nexport var IHaveIgnoreReason;\n(function (IHaveIgnoreReason) {\n    IHaveIgnoreReason[\"LowScore\"] = \"low_score\";\n    IHaveIgnoreReason[\"MaxIhave\"] = \"max_ihave\";\n    IHaveIgnoreReason[\"MaxIasked\"] = \"max_iasked\";\n})(IHaveIgnoreReason || (IHaveIgnoreReason = {}));\nexport var ScoreThreshold;\n(function (ScoreThreshold) {\n    ScoreThreshold[\"graylist\"] = \"graylist\";\n    ScoreThreshold[\"publish\"] = \"publish\";\n    ScoreThreshold[\"gossip\"] = \"gossip\";\n    ScoreThreshold[\"mesh\"] = \"mesh\";\n})(ScoreThreshold || (ScoreThreshold = {}));\n/**\n * A collection of metrics used throughout the Gossipsub behaviour.\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function getMetrics(register, topicStrToLabel, opts) {\n    // Using function style instead of class to prevent having to re-declare all MetricsPrometheus types.\n    return {\n        /* Metrics for static config */\n        protocolsEnabled: register.gauge({\n            name: 'gossipsub_protocol',\n            help: 'Status of enabled protocols',\n            labelNames: ['protocol']\n        }),\n        /* Metrics per known topic */\n        /** Status of our subscription to this topic. This metric allows analyzing other topic metrics\n         *  filtered by our current subscription status.\n         *  = rust-libp2p `topic_subscription_status` */\n        topicSubscriptionStatus: register.gauge({\n            name: 'gossipsub_topic_subscription_status',\n            help: 'Status of our subscription to this topic',\n            labelNames: ['topicStr']\n        }),\n        /** Number of peers subscribed to each topic. This allows us to analyze a topic's behaviour\n         * regardless of our subscription status. */\n        topicPeersCount: register.gauge({\n            name: 'gossipsub_topic_peer_count',\n            help: 'Number of peers subscribed to each topic',\n            labelNames: ['topicStr']\n        }),\n        /* Metrics regarding mesh state */\n        /** Number of peers in our mesh. This metric should be updated with the count of peers for a\n         *  topic in the mesh regardless of inclusion and churn events.\n         *  = rust-libp2p `mesh_peer_counts` */\n        meshPeerCounts: register.gauge({\n            name: 'gossipsub_mesh_peer_count',\n            help: 'Number of peers in our mesh',\n            labelNames: ['topicStr']\n        }),\n        /** Number of times we include peers in a topic mesh for different reasons.\n         *  = rust-libp2p `mesh_peer_inclusion_events` */\n        meshPeerInclusionEvents: register.gauge({\n            name: 'gossipsub_mesh_peer_inclusion_events_total',\n            help: 'Number of times we include peers in a topic mesh for different reasons',\n            labelNames: ['topic', 'reason']\n        }),\n        /** Number of times we remove peers in a topic mesh for different reasons.\n         *  = rust-libp2p `mesh_peer_churn_events` */\n        meshPeerChurnEvents: register.gauge({\n            name: 'gossipsub_peer_churn_events_total',\n            help: 'Number of times we remove peers in a topic mesh for different reasons',\n            labelNames: ['topic', 'reason']\n        }),\n        /* General Metrics */\n        /** Gossipsub supports floodsub, gossipsub v1.0 and gossipsub v1.1. Peers are classified based\n         *  on which protocol they support. This metric keeps track of the number of peers that are\n         *  connected of each type. */\n        peersPerProtocol: register.gauge({\n            name: 'gossipsub_peers_per_protocol_count',\n            help: 'Peers connected for each topic',\n            labelNames: ['protocol']\n        }),\n        /** The time it takes to complete one iteration of the heartbeat. */\n        heartbeatDuration: register.histogram({\n            name: 'gossipsub_heartbeat_duration_seconds',\n            help: 'The time it takes to complete one iteration of the heartbeat',\n            // Should take <10ms, over 1s it's a huge issue that needs debugging, since a heartbeat will be cancelled\n            buckets: [0.01, 0.1, 1]\n        }),\n        /** Heartbeat run took longer than heartbeat interval so next is skipped */\n        heartbeatSkipped: register.gauge({\n            name: 'gossipsub_heartbeat_skipped',\n            help: 'Heartbeat run took longer than heartbeat interval so next is skipped'\n        }),\n        /** Message validation results for each topic.\n         *  Invalid == Reject?\n         *  = rust-libp2p `invalid_messages`, `accepted_messages`, `ignored_messages`, `rejected_messages` */\n        asyncValidationResult: register.gauge({\n            name: 'gossipsub_async_validation_result_total',\n            help: 'Message validation result for each topic',\n            labelNames: ['topic', 'acceptance']\n        }),\n        /** When the user validates a message, it tries to re propagate it to its mesh peers. If the\n         *  message expires from the memcache before it can be validated, we count this a cache miss\n         *  and it is an indicator that the memcache size should be increased.\n         *  = rust-libp2p `mcache_misses` */\n        asyncValidationMcacheHit: register.gauge({\n            name: 'gossipsub_async_validation_mcache_hit_total',\n            help: 'Async validation result reported by the user layer',\n            labelNames: ['hit']\n        }),\n        // RPC outgoing. Track byte length + data structure sizes\n        rpcRecvBytes: register.gauge({ name: 'gossipsub_rpc_recv_bytes_total', help: 'RPC recv' }),\n        rpcRecvCount: register.gauge({ name: 'gossipsub_rpc_recv_count_total', help: 'RPC recv' }),\n        rpcRecvSubscription: register.gauge({ name: 'gossipsub_rpc_recv_subscription_total', help: 'RPC recv' }),\n        rpcRecvMessage: register.gauge({ name: 'gossipsub_rpc_recv_message_total', help: 'RPC recv' }),\n        rpcRecvControl: register.gauge({ name: 'gossipsub_rpc_recv_control_total', help: 'RPC recv' }),\n        rpcRecvIHave: register.gauge({ name: 'gossipsub_rpc_recv_ihave_total', help: 'RPC recv' }),\n        rpcRecvIWant: register.gauge({ name: 'gossipsub_rpc_recv_iwant_total', help: 'RPC recv' }),\n        rpcRecvGraft: register.gauge({ name: 'gossipsub_rpc_recv_graft_total', help: 'RPC recv' }),\n        rpcRecvPrune: register.gauge({ name: 'gossipsub_rpc_recv_prune_total', help: 'RPC recv' }),\n        /** Total count of RPC dropped because acceptFrom() == false */\n        rpcRecvNotAccepted: register.gauge({\n            name: 'gossipsub_rpc_rcv_not_accepted_total',\n            help: 'Total count of RPC dropped because acceptFrom() == false'\n        }),\n        // RPC incoming. Track byte length + data structure sizes\n        rpcSentBytes: register.gauge({ name: 'gossipsub_rpc_sent_bytes_total', help: 'RPC sent' }),\n        rpcSentCount: register.gauge({ name: 'gossipsub_rpc_sent_count_total', help: 'RPC sent' }),\n        rpcSentSubscription: register.gauge({ name: 'gossipsub_rpc_sent_subscription_total', help: 'RPC sent' }),\n        rpcSentMessage: register.gauge({ name: 'gossipsub_rpc_sent_message_total', help: 'RPC sent' }),\n        rpcSentControl: register.gauge({ name: 'gossipsub_rpc_sent_control_total', help: 'RPC sent' }),\n        rpcSentIHave: register.gauge({ name: 'gossipsub_rpc_sent_ihave_total', help: 'RPC sent' }),\n        rpcSentIWant: register.gauge({ name: 'gossipsub_rpc_sent_iwant_total', help: 'RPC sent' }),\n        rpcSentGraft: register.gauge({ name: 'gossipsub_rpc_sent_graft_total', help: 'RPC sent' }),\n        rpcSentPrune: register.gauge({ name: 'gossipsub_rpc_sent_prune_total', help: 'RPC sent' }),\n        // publish message. Track peers sent to and bytes\n        /** Total count of msg published by topic */\n        msgPublishCount: register.gauge({\n            name: 'gossipsub_msg_publish_count_total',\n            help: 'Total count of msg published by topic',\n            labelNames: ['topic']\n        }),\n        /** Total count of peers that we publish a msg to */\n        msgPublishPeers: register.gauge({\n            name: 'gossipsub_msg_publish_peers_total',\n            help: 'Total count of peers that we publish a msg to',\n            labelNames: ['topic']\n        }),\n        /** Total count of peers (by group) that we publish a msg to */\n        // NOTE: Do not use 'group' label since it's a generic already used by Prometheus to group instances\n        msgPublishPeersByGroup: register.gauge({\n            name: 'gossipsub_msg_publish_peers_by_group',\n            help: 'Total count of peers (by group) that we publish a msg to',\n            labelNames: ['topic', 'peerGroup']\n        }),\n        /** Total count of msg publish data.length bytes */\n        msgPublishBytes: register.gauge({\n            name: 'gossipsub_msg_publish_bytes_total',\n            help: 'Total count of msg publish data.length bytes',\n            labelNames: ['topic']\n        }),\n        /** Total count of msg forwarded by topic */\n        msgForwardCount: register.gauge({\n            name: 'gossipsub_msg_forward_count_total',\n            help: 'Total count of msg forwarded by topic',\n            labelNames: ['topic']\n        }),\n        /** Total count of peers that we forward a msg to */\n        msgForwardPeers: register.gauge({\n            name: 'gossipsub_msg_forward_peers_total',\n            help: 'Total count of peers that we forward a msg to',\n            labelNames: ['topic']\n        }),\n        /** Total count of recv msgs before any validation */\n        msgReceivedPreValidation: register.gauge({\n            name: 'gossipsub_msg_received_prevalidation_total',\n            help: 'Total count of recv msgs before any validation',\n            labelNames: ['topic']\n        }),\n        /** Tracks distribution of recv msgs by duplicate, invalid, valid */\n        msgReceivedStatus: register.gauge({\n            name: 'gossipsub_msg_received_status_total',\n            help: 'Tracks distribution of recv msgs by duplicate, invalid, valid',\n            labelNames: ['topic', 'status']\n        }),\n        /** Tracks specific reason of invalid */\n        msgReceivedInvalid: register.gauge({\n            name: 'gossipsub_msg_received_invalid_total',\n            help: 'Tracks specific reason of invalid',\n            labelNames: ['topic', 'error']\n        }),\n        /** Track duplicate message delivery time */\n        duplicateMsgDeliveryDelay: register.histogram({\n            name: 'gossisub_duplicate_msg_delivery_delay_seconds',\n            help: 'Time since the 1st duplicated message validated',\n            labelNames: ['topic'],\n            buckets: [\n                0.25 * opts.maxMeshMessageDeliveriesWindowSec,\n                0.5 * opts.maxMeshMessageDeliveriesWindowSec,\n                1 * opts.maxMeshMessageDeliveriesWindowSec,\n                2 * opts.maxMeshMessageDeliveriesWindowSec,\n                4 * opts.maxMeshMessageDeliveriesWindowSec\n            ]\n        }),\n        /** Total count of late msg delivery total by topic */\n        duplicateMsgLateDelivery: register.gauge({\n            name: 'gossisub_duplicate_msg_late_delivery_total',\n            help: 'Total count of late duplicate message delivery by topic, which triggers P3 penalty',\n            labelNames: ['topic']\n        }),\n        duplicateMsgIgnored: register.gauge({\n            name: 'gossisub_ignored_published_duplicate_msgs_total',\n            help: 'Total count of published duplicate message ignored by topic',\n            labelNames: ['topic']\n        }),\n        /* Metrics related to scoring */\n        /** Total times score() is called */\n        scoreFnCalls: register.gauge({\n            name: 'gossipsub_score_fn_calls_total',\n            help: 'Total times score() is called'\n        }),\n        /** Total times score() call actually computed computeScore(), no cache */\n        scoreFnRuns: register.gauge({\n            name: 'gossipsub_score_fn_runs_total',\n            help: 'Total times score() call actually computed computeScore(), no cache'\n        }),\n        scoreCachedDelta: register.histogram({\n            name: 'gossipsub_score_cache_delta',\n            help: 'Delta of score between cached values that expired',\n            buckets: [10, 100, 1000]\n        }),\n        /** Current count of peers by score threshold */\n        peersByScoreThreshold: register.gauge({\n            name: 'gossipsub_peers_by_score_threshold_count',\n            help: 'Current count of peers by score threshold',\n            labelNames: ['threshold']\n        }),\n        score: register.avgMinMax({\n            name: 'gossipsub_score',\n            help: 'Avg min max of gossip scores',\n            labelNames: ['topic', 'p']\n        }),\n        /** Separate score weights */\n        scoreWeights: register.avgMinMax({\n            name: 'gossipsub_score_weights',\n            help: 'Separate score weights',\n            labelNames: ['topic', 'p']\n        }),\n        /** Histogram of the scores for each mesh topic. */\n        // TODO: Not implemented\n        scorePerMesh: register.avgMinMax({\n            name: 'gossipsub_score_per_mesh',\n            help: 'Histogram of the scores for each mesh topic',\n            labelNames: ['topic']\n        }),\n        /** A counter of the kind of penalties being applied to peers. */\n        // TODO: Not fully implemented\n        scoringPenalties: register.gauge({\n            name: 'gossipsub_scoring_penalties_total',\n            help: 'A counter of the kind of penalties being applied to peers',\n            labelNames: ['penalty']\n        }),\n        behaviourPenalty: register.histogram({\n            name: 'gossipsub_peer_stat_behaviour_penalty',\n            help: 'Current peer stat behaviour_penalty at each scrape',\n            buckets: [\n                0.25 * opts.behaviourPenaltyThreshold,\n                0.5 * opts.behaviourPenaltyThreshold,\n                1 * opts.behaviourPenaltyThreshold,\n                2 * opts.behaviourPenaltyThreshold,\n                4 * opts.behaviourPenaltyThreshold\n            ]\n        }),\n        // TODO:\n        // - iasked per peer (on heartbeat)\n        // - when promise is resolved, track messages from promises\n        /** Total received IHAVE messages that we ignore for some reason */\n        ihaveRcvIgnored: register.gauge({\n            name: 'gossipsub_ihave_rcv_ignored_total',\n            help: 'Total received IHAVE messages that we ignore for some reason',\n            labelNames: ['reason']\n        }),\n        /** Total received IHAVE messages by topic */\n        ihaveRcvMsgids: register.gauge({\n            name: 'gossipsub_ihave_rcv_msgids_total',\n            help: 'Total received IHAVE messages by topic',\n            labelNames: ['topic']\n        }),\n        /** Total messages per topic we don't have. Not actual requests.\n         *  The number of times we have decided that an IWANT control message is required for this\n         *  topic. A very high metric might indicate an underperforming network.\n         *  = rust-libp2p `topic_iwant_msgs` */\n        ihaveRcvNotSeenMsgids: register.gauge({\n            name: 'gossipsub_ihave_rcv_not_seen_msgids_total',\n            help: 'Total messages per topic we do not have, not actual requests',\n            labelNames: ['topic']\n        }),\n        /** Total received IWANT messages by topic */\n        iwantRcvMsgids: register.gauge({\n            name: 'gossipsub_iwant_rcv_msgids_total',\n            help: 'Total received IWANT messages by topic',\n            labelNames: ['topic']\n        }),\n        /** Total requested messageIDs that we don't have */\n        iwantRcvDonthaveMsgids: register.gauge({\n            name: 'gossipsub_iwant_rcv_dont_have_msgids_total',\n            help: 'Total requested messageIDs that we do not have'\n        }),\n        iwantPromiseStarted: register.gauge({\n            name: 'gossipsub_iwant_promise_sent_total',\n            help: 'Total count of started IWANT promises'\n        }),\n        /** Total count of resolved IWANT promises */\n        iwantPromiseResolved: register.gauge({\n            name: 'gossipsub_iwant_promise_resolved_total',\n            help: 'Total count of resolved IWANT promises'\n        }),\n        /** Total count of resolved IWANT promises from duplicate messages */\n        iwantPromiseResolvedFromDuplicate: register.gauge({\n            name: 'gossipsub_iwant_promise_resolved_from_duplicate_total',\n            help: 'Total count of resolved IWANT promises from duplicate messages'\n        }),\n        /** Total count of peers we have asked IWANT promises that are resolved */\n        iwantPromiseResolvedPeers: register.gauge({\n            name: 'gossipsub_iwant_promise_resolved_peers',\n            help: 'Total count of peers we have asked IWANT promises that are resolved'\n        }),\n        iwantPromiseBroken: register.gauge({\n            name: 'gossipsub_iwant_promise_broken',\n            help: 'Total count of broken IWANT promises'\n        }),\n        iwantMessagePruned: register.gauge({\n            name: 'gossipsub_iwant_message_pruned',\n            help: 'Total count of pruned IWANT messages'\n        }),\n        /** Histogram of delivery time of resolved IWANT promises */\n        iwantPromiseDeliveryTime: register.histogram({\n            name: 'gossipsub_iwant_promise_delivery_seconds',\n            help: 'Histogram of delivery time of resolved IWANT promises',\n            buckets: [\n                0.5 * opts.gossipPromiseExpireSec,\n                1 * opts.gossipPromiseExpireSec,\n                2 * opts.gossipPromiseExpireSec,\n                4 * opts.gossipPromiseExpireSec\n            ]\n        }),\n        /* Data structure sizes */\n        /** Unbounded cache sizes */\n        cacheSize: register.gauge({\n            name: 'gossipsub_cache_size',\n            help: 'Unbounded cache sizes',\n            labelNames: ['cache']\n        }),\n        /** Current mcache msg count */\n        mcacheSize: register.gauge({\n            name: 'gossipsub_mcache_size',\n            help: 'Current mcache msg count'\n        }),\n        mcacheNotValidatedCount: register.gauge({\n            name: 'gossipsub_mcache_not_validated_count',\n            help: 'Current mcache msg count not validated'\n        }),\n        fastMsgIdCacheCollision: register.gauge({\n            name: 'gossipsub_fastmsgid_cache_collision_total',\n            help: 'Total count of key collisions on fastmsgid cache put'\n        }),\n        newConnectionCount: register.gauge({\n            name: 'gossipsub_new_connection_total',\n            help: 'Total new connection by status',\n            labelNames: ['status']\n        }),\n        topicStrToLabel: topicStrToLabel,\n        toTopic(topicStr) {\n            return this.topicStrToLabel.get(topicStr) ?? topicStr;\n        },\n        /** We joined a topic */\n        onJoin(topicStr) {\n            this.topicSubscriptionStatus.set({ topicStr }, 1);\n            this.meshPeerCounts.set({ topicStr }, 0); // Reset count\n        },\n        /** We left a topic */\n        onLeave(topicStr) {\n            this.topicSubscriptionStatus.set({ topicStr }, 0);\n            this.meshPeerCounts.set({ topicStr }, 0); // Reset count\n        },\n        /** Register the inclusion of peers in our mesh due to some reason. */\n        onAddToMesh(topicStr, reason, count) {\n            const topic = this.toTopic(topicStr);\n            this.meshPeerInclusionEvents.inc({ topic, reason }, count);\n        },\n        /** Register the removal of peers in our mesh due to some reason */\n        // - remove_peer_from_mesh()\n        // - heartbeat() Churn::BadScore\n        // - heartbeat() Churn::Excess\n        // - on_disconnect() Churn::Ds\n        onRemoveFromMesh(topicStr, reason, count) {\n            const topic = this.toTopic(topicStr);\n            this.meshPeerChurnEvents.inc({ topic, reason }, count);\n        },\n        onReportValidationMcacheHit(hit) {\n            this.asyncValidationMcacheHit.inc({ hit: hit ? 'hit' : 'miss' });\n        },\n        onReportValidation(topicStr, acceptance) {\n            const topic = this.toTopic(topicStr);\n            this.asyncValidationResult.inc({ topic: topic, acceptance });\n        },\n        /**\n         * - in handle_graft() Penalty::GraftBackoff\n         * - in apply_iwant_penalties() Penalty::BrokenPromise\n         * - in metric_score() P3 Penalty::MessageDeficit\n         * - in metric_score() P6 Penalty::IPColocation\n         */\n        onScorePenalty(penalty) {\n            // Can this be labeled by topic too?\n            this.scoringPenalties.inc({ penalty }, 1);\n        },\n        onIhaveRcv(topicStr, ihave, idonthave) {\n            const topic = this.toTopic(topicStr);\n            this.ihaveRcvMsgids.inc({ topic }, ihave);\n            this.ihaveRcvNotSeenMsgids.inc({ topic }, idonthave);\n        },\n        onIwantRcv(iwantByTopic, iwantDonthave) {\n            for (const [topicStr, iwant] of iwantByTopic) {\n                const topic = this.toTopic(topicStr);\n                this.iwantRcvMsgids.inc({ topic }, iwant);\n            }\n            this.iwantRcvDonthaveMsgids.inc(iwantDonthave);\n        },\n        onForwardMsg(topicStr, tosendCount) {\n            const topic = this.toTopic(topicStr);\n            this.msgForwardCount.inc({ topic }, 1);\n            this.msgForwardPeers.inc({ topic }, tosendCount);\n        },\n        onPublishMsg(topicStr, tosendGroupCount, tosendCount, dataLen) {\n            const topic = this.toTopic(topicStr);\n            this.msgPublishCount.inc({ topic }, 1);\n            this.msgPublishBytes.inc({ topic }, tosendCount * dataLen);\n            this.msgPublishPeers.inc({ topic }, tosendCount);\n            this.msgPublishPeersByGroup.inc({ topic, peerGroup: 'direct' }, tosendGroupCount.direct);\n            this.msgPublishPeersByGroup.inc({ topic, peerGroup: 'floodsub' }, tosendGroupCount.floodsub);\n            this.msgPublishPeersByGroup.inc({ topic, peerGroup: 'mesh' }, tosendGroupCount.mesh);\n            this.msgPublishPeersByGroup.inc({ topic, peerGroup: 'fanout' }, tosendGroupCount.fanout);\n        },\n        onMsgRecvPreValidation(topicStr) {\n            const topic = this.toTopic(topicStr);\n            this.msgReceivedPreValidation.inc({ topic }, 1);\n        },\n        onMsgRecvResult(topicStr, status) {\n            const topic = this.toTopic(topicStr);\n            this.msgReceivedStatus.inc({ topic, status });\n        },\n        onMsgRecvInvalid(topicStr, reason) {\n            const topic = this.toTopic(topicStr);\n            const error = reason.reason === RejectReason.Error ? reason.error : reason.reason;\n            this.msgReceivedInvalid.inc({ topic, error }, 1);\n        },\n        onDuplicateMsgDelivery(topicStr, deliveryDelayMs, isLateDelivery) {\n            this.duplicateMsgDeliveryDelay.observe(deliveryDelayMs / 1000);\n            if (isLateDelivery) {\n                const topic = this.toTopic(topicStr);\n                this.duplicateMsgLateDelivery.inc({ topic }, 1);\n            }\n        },\n        onPublishDuplicateMsg(topicStr) {\n            const topic = this.toTopic(topicStr);\n            this.duplicateMsgIgnored.inc({ topic }, 1);\n        },\n        onRpcRecv(rpc, rpcBytes) {\n            this.rpcRecvBytes.inc(rpcBytes);\n            this.rpcRecvCount.inc(1);\n            if (rpc.subscriptions)\n                this.rpcRecvSubscription.inc(rpc.subscriptions.length);\n            if (rpc.messages)\n                this.rpcRecvMessage.inc(rpc.messages.length);\n            if (rpc.control) {\n                this.rpcRecvControl.inc(1);\n                if (rpc.control.ihave)\n                    this.rpcRecvIHave.inc(rpc.control.ihave.length);\n                if (rpc.control.iwant)\n                    this.rpcRecvIWant.inc(rpc.control.iwant.length);\n                if (rpc.control.graft)\n                    this.rpcRecvGraft.inc(rpc.control.graft.length);\n                if (rpc.control.prune)\n                    this.rpcRecvPrune.inc(rpc.control.prune.length);\n            }\n        },\n        onRpcSent(rpc, rpcBytes) {\n            this.rpcSentBytes.inc(rpcBytes);\n            this.rpcSentCount.inc(1);\n            if (rpc.subscriptions)\n                this.rpcSentSubscription.inc(rpc.subscriptions.length);\n            if (rpc.messages)\n                this.rpcSentMessage.inc(rpc.messages.length);\n            if (rpc.control) {\n                const ihave = rpc.control.ihave?.length ?? 0;\n                const iwant = rpc.control.iwant?.length ?? 0;\n                const graft = rpc.control.graft?.length ?? 0;\n                const prune = rpc.control.prune?.length ?? 0;\n                if (ihave > 0)\n                    this.rpcSentIHave.inc(ihave);\n                if (iwant > 0)\n                    this.rpcSentIWant.inc(iwant);\n                if (graft > 0)\n                    this.rpcSentGraft.inc(graft);\n                if (prune > 0)\n                    this.rpcSentPrune.inc(prune);\n                if (ihave > 0 || iwant > 0 || graft > 0 || prune > 0)\n                    this.rpcSentControl.inc(1);\n            }\n        },\n        registerScores(scores, scoreThresholds) {\n            let graylist = 0;\n            let publish = 0;\n            let gossip = 0;\n            let mesh = 0;\n            for (const score of scores) {\n                if (score >= scoreThresholds.graylistThreshold)\n                    graylist++;\n                if (score >= scoreThresholds.publishThreshold)\n                    publish++;\n                if (score >= scoreThresholds.gossipThreshold)\n                    gossip++;\n                if (score >= 0)\n                    mesh++;\n            }\n            this.peersByScoreThreshold.set({ threshold: ScoreThreshold.graylist }, graylist);\n            this.peersByScoreThreshold.set({ threshold: ScoreThreshold.publish }, publish);\n            this.peersByScoreThreshold.set({ threshold: ScoreThreshold.gossip }, gossip);\n            this.peersByScoreThreshold.set({ threshold: ScoreThreshold.mesh }, mesh);\n            // Register full score too\n            this.score.set(scores);\n        },\n        registerScoreWeights(sw) {\n            for (const [topic, wsTopic] of sw.byTopic) {\n                this.scoreWeights.set({ topic, p: 'p1' }, wsTopic.p1w);\n                this.scoreWeights.set({ topic, p: 'p2' }, wsTopic.p2w);\n                this.scoreWeights.set({ topic, p: 'p3' }, wsTopic.p3w);\n                this.scoreWeights.set({ topic, p: 'p3b' }, wsTopic.p3bw);\n                this.scoreWeights.set({ topic, p: 'p4' }, wsTopic.p4w);\n            }\n            this.scoreWeights.set({ p: 'p5' }, sw.p5w);\n            this.scoreWeights.set({ p: 'p6' }, sw.p6w);\n            this.scoreWeights.set({ p: 'p7' }, sw.p7w);\n        },\n        registerScorePerMesh(mesh, scoreByPeer) {\n            const peersPerTopicLabel = new Map();\n            mesh.forEach((peers, topicStr) => {\n                // Aggregate by known topicLabel or throw to 'unknown'. This prevent too high cardinality\n                const topicLabel = this.topicStrToLabel.get(topicStr) ?? 'unknown';\n                let peersInMesh = peersPerTopicLabel.get(topicLabel);\n                if (!peersInMesh) {\n                    peersInMesh = new Set();\n                    peersPerTopicLabel.set(topicLabel, peersInMesh);\n                }\n                peers.forEach((p) => peersInMesh?.add(p));\n            });\n            for (const [topic, peers] of peersPerTopicLabel) {\n                const meshScores = [];\n                peers.forEach((peer) => {\n                    meshScores.push(scoreByPeer.get(peer) ?? 0);\n                });\n                this.scorePerMesh.set({ topic }, meshScores);\n            }\n        }\n    };\n}\n//# sourceMappingURL=metrics.js.map","import { concat as uint8ArrayConcat } from 'uint8arrays/concat';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\nimport { marshalPublicKey, unmarshalPublicKey } from '@libp2p/crypto/keys';\nimport { randomBytes } from '@libp2p/crypto';\nimport { peerIdFromBytes } from '@libp2p/peer-id';\nimport { equals as uint8ArrayEquals } from 'uint8arrays/equals';\nimport { RPC } from '../message/rpc.js';\nimport { PublishConfigType, ValidateError } from '../types.js';\nimport { StrictSign, StrictNoSign } from '@libp2p/interface-pubsub';\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string';\nexport const SignPrefix = uint8ArrayFromString('libp2p-pubsub:');\nexport async function buildRawMessage(publishConfig, topic, originalData, transformedData) {\n    switch (publishConfig.type) {\n        case PublishConfigType.Signing: {\n            const rpcMsg = {\n                from: publishConfig.author.toBytes(),\n                data: transformedData,\n                seqno: randomBytes(8),\n                topic,\n                signature: undefined,\n                key: undefined // Exclude key field for signing\n            };\n            // Get the message in bytes, and prepend with the pubsub prefix\n            // the signature is over the bytes \"libp2p-pubsub:<protobuf-message>\"\n            const bytes = uint8ArrayConcat([SignPrefix, RPC.Message.encode(rpcMsg).finish()]);\n            rpcMsg.signature = await publishConfig.privateKey.sign(bytes);\n            rpcMsg.key = publishConfig.key;\n            const msg = {\n                type: 'signed',\n                from: publishConfig.author,\n                data: originalData,\n                sequenceNumber: BigInt(`0x${uint8ArrayToString(rpcMsg.seqno, 'base16')}`),\n                topic,\n                signature: rpcMsg.signature,\n                key: rpcMsg.key\n            };\n            return {\n                raw: rpcMsg,\n                msg: msg\n            };\n        }\n        case PublishConfigType.Anonymous: {\n            return {\n                raw: {\n                    from: undefined,\n                    data: transformedData,\n                    seqno: undefined,\n                    topic,\n                    signature: undefined,\n                    key: undefined\n                },\n                msg: {\n                    type: 'unsigned',\n                    data: originalData,\n                    topic\n                }\n            };\n        }\n    }\n}\nexport async function validateToRawMessage(signaturePolicy, msg) {\n    // If strict-sign, verify all\n    // If anonymous (no-sign), ensure no preven\n    switch (signaturePolicy) {\n        case StrictNoSign:\n            if (msg.signature != null)\n                return { valid: false, error: ValidateError.SignaturePresent };\n            if (msg.seqno != null)\n                return { valid: false, error: ValidateError.SeqnoPresent };\n            if (msg.key != null)\n                return { valid: false, error: ValidateError.FromPresent };\n            return { valid: true, message: { type: 'unsigned', topic: msg.topic, data: msg.data ?? new Uint8Array(0) } };\n        case StrictSign: {\n            // Verify seqno\n            if (msg.seqno == null)\n                return { valid: false, error: ValidateError.InvalidSeqno };\n            if (msg.seqno.length !== 8) {\n                return { valid: false, error: ValidateError.InvalidSeqno };\n            }\n            if (msg.signature == null)\n                return { valid: false, error: ValidateError.InvalidSignature };\n            if (msg.from == null)\n                return { valid: false, error: ValidateError.InvalidPeerId };\n            let fromPeerId;\n            try {\n                // TODO: Fix PeerId types\n                fromPeerId = peerIdFromBytes(msg.from);\n            }\n            catch (e) {\n                return { valid: false, error: ValidateError.InvalidPeerId };\n            }\n            // - check from defined\n            // - transform source to PeerId\n            // - parse signature\n            // - get .key, else from source\n            // - check key == source if present\n            // - verify sig\n            let publicKey;\n            if (msg.key) {\n                publicKey = unmarshalPublicKey(msg.key);\n                // TODO: Should `fromPeerId.pubKey` be optional?\n                if (fromPeerId.publicKey !== undefined && !uint8ArrayEquals(publicKey.bytes, fromPeerId.publicKey)) {\n                    return { valid: false, error: ValidateError.InvalidPeerId };\n                }\n            }\n            else {\n                if (fromPeerId.publicKey == null) {\n                    return { valid: false, error: ValidateError.InvalidPeerId };\n                }\n                publicKey = unmarshalPublicKey(fromPeerId.publicKey);\n            }\n            const rpcMsgPreSign = {\n                from: msg.from,\n                data: msg.data,\n                seqno: msg.seqno,\n                topic: msg.topic,\n                signature: undefined,\n                key: undefined // Exclude key field for signing\n            };\n            // Get the message in bytes, and prepend with the pubsub prefix\n            // the signature is over the bytes \"libp2p-pubsub:<protobuf-message>\"\n            const bytes = uint8ArrayConcat([SignPrefix, RPC.Message.encode(rpcMsgPreSign).finish()]);\n            if (!(await publicKey.verify(bytes, msg.signature))) {\n                return { valid: false, error: ValidateError.InvalidSignature };\n            }\n            return {\n                valid: true,\n                message: {\n                    type: 'signed',\n                    from: fromPeerId,\n                    data: msg.data ?? new Uint8Array(0),\n                    sequenceNumber: BigInt(`0x${uint8ArrayToString(msg.seqno, 'base16')}`),\n                    topic: msg.topic,\n                    signature: msg.signature,\n                    key: msg.key ?? marshalPublicKey(publicKey)\n                }\n            };\n        }\n    }\n}\n//# sourceMappingURL=buildRawMessage.js.map","import { sha256 } from 'multiformats/hashes/sha2';\nimport { msgId } from '@libp2p/pubsub/utils';\n/**\n * Generate a message id, based on the `key` and `seqno`\n */\nexport function msgIdFnStrictSign(msg) {\n    if (msg.type !== 'signed') {\n        throw new Error('expected signed message type');\n    }\n    // Should never happen\n    if (msg.sequenceNumber == null)\n        throw Error('missing seqno field');\n    // TODO: Should use .from here or key?\n    return msgId(msg.from.toBytes(), msg.sequenceNumber);\n}\n/**\n * Generate a message id, based on message `data`\n */\nexport async function msgIdFnStrictNoSign(msg) {\n    return await sha256.encode(msg.data);\n}\n//# sourceMappingURL=msgIdFn.js.map","export function computeScoreWeights(peer, pstats, params, peerIPs, topicStrToLabel) {\n    let score = 0;\n    const byTopic = new Map();\n    // topic stores\n    Object.entries(pstats.topics).forEach(([topic, tstats]) => {\n        // the topic parameters\n        // Aggregate by known topicLabel or throw to 'unknown'. This prevent too high cardinality\n        const topicLabel = topicStrToLabel.get(topic) ?? 'unknown';\n        const topicParams = params.topics[topic];\n        if (topicParams === undefined) {\n            // we are not scoring this topic\n            return;\n        }\n        let topicScores = byTopic.get(topicLabel);\n        if (!topicScores) {\n            topicScores = {\n                p1w: 0,\n                p2w: 0,\n                p3w: 0,\n                p3bw: 0,\n                p4w: 0\n            };\n            byTopic.set(topicLabel, topicScores);\n        }\n        let p1w = 0;\n        let p2w = 0;\n        let p3w = 0;\n        let p3bw = 0;\n        let p4w = 0;\n        // P1: time in Mesh\n        if (tstats.inMesh) {\n            const p1 = Math.max(tstats.meshTime / topicParams.timeInMeshQuantum, topicParams.timeInMeshCap);\n            p1w += p1 * topicParams.timeInMeshWeight;\n        }\n        // P2: first message deliveries\n        let p2 = tstats.firstMessageDeliveries;\n        if (p2 > topicParams.firstMessageDeliveriesCap) {\n            p2 = topicParams.firstMessageDeliveriesCap;\n        }\n        p2w += p2 * topicParams.firstMessageDeliveriesWeight;\n        // P3: mesh message deliveries\n        if (tstats.meshMessageDeliveriesActive &&\n            tstats.meshMessageDeliveries < topicParams.meshMessageDeliveriesThreshold) {\n            const deficit = topicParams.meshMessageDeliveriesThreshold - tstats.meshMessageDeliveries;\n            const p3 = deficit * deficit;\n            p3w += p3 * topicParams.meshMessageDeliveriesWeight;\n        }\n        // P3b:\n        // NOTE: the weight of P3b is negative (validated in validateTopicScoreParams) so this detracts\n        const p3b = tstats.meshFailurePenalty;\n        p3bw += p3b * topicParams.meshFailurePenaltyWeight;\n        // P4: invalid messages\n        // NOTE: the weight of P4 is negative (validated in validateTopicScoreParams) so this detracts\n        const p4 = tstats.invalidMessageDeliveries * tstats.invalidMessageDeliveries;\n        p4w += p4 * topicParams.invalidMessageDeliveriesWeight;\n        // update score, mixing with topic weight\n        score += (p1w + p2w + p3w + p3bw + p4w) * topicParams.topicWeight;\n        topicScores.p1w += p1w;\n        topicScores.p2w += p2w;\n        topicScores.p3w += p3w;\n        topicScores.p3bw += p3bw;\n        topicScores.p4w += p4w;\n    });\n    // apply the topic score cap, if any\n    if (params.topicScoreCap > 0 && score > params.topicScoreCap) {\n        score = params.topicScoreCap;\n        // Proportionally apply cap to all individual contributions\n        const capF = params.topicScoreCap / score;\n        for (const ws of byTopic.values()) {\n            ws.p1w *= capF;\n            ws.p2w *= capF;\n            ws.p3w *= capF;\n            ws.p3bw *= capF;\n            ws.p4w *= capF;\n        }\n    }\n    let p5w = 0;\n    let p6w = 0;\n    let p7w = 0;\n    // P5: application-specific score\n    const p5 = params.appSpecificScore(peer);\n    p5w += p5 * params.appSpecificWeight;\n    // P6: IP colocation factor\n    pstats.knownIPs.forEach((ip) => {\n        if (params.IPColocationFactorWhitelist.has(ip)) {\n            return;\n        }\n        // P6 has a cliff (IPColocationFactorThreshold)\n        // It's only applied if at least that many peers are connected to us from that source IP addr.\n        // It is quadratic, and the weight is negative (validated in validatePeerScoreParams)\n        const peersInIP = peerIPs.get(ip);\n        const numPeersInIP = peersInIP ? peersInIP.size : 0;\n        if (numPeersInIP > params.IPColocationFactorThreshold) {\n            const surplus = numPeersInIP - params.IPColocationFactorThreshold;\n            const p6 = surplus * surplus;\n            p6w += p6 * params.IPColocationFactorWeight;\n        }\n    });\n    // P7: behavioural pattern penalty\n    const p7 = pstats.behaviourPenalty * pstats.behaviourPenalty;\n    p7w += p7 * params.behaviourPenaltyWeight;\n    score += p5w + p6w + p7w;\n    return {\n        byTopic,\n        p5w,\n        p6w,\n        p7w,\n        score\n    };\n}\nexport function computeAllPeersScoreWeights(peerIdStrs, peerStats, params, peerIPs, topicStrToLabel) {\n    const sw = {\n        byTopic: new Map(),\n        p5w: [],\n        p6w: [],\n        p7w: [],\n        score: []\n    };\n    for (const peerIdStr of peerIdStrs) {\n        const pstats = peerStats.get(peerIdStr);\n        if (pstats) {\n            const swPeer = computeScoreWeights(peerIdStr, pstats, params, peerIPs, topicStrToLabel);\n            for (const [topic, swPeerTopic] of swPeer.byTopic) {\n                let swTopic = sw.byTopic.get(topic);\n                if (!swTopic) {\n                    swTopic = {\n                        p1w: [],\n                        p2w: [],\n                        p3w: [],\n                        p3bw: [],\n                        p4w: []\n                    };\n                    sw.byTopic.set(topic, swTopic);\n                }\n                swTopic.p1w.push(swPeerTopic.p1w);\n                swTopic.p2w.push(swPeerTopic.p2w);\n                swTopic.p3w.push(swPeerTopic.p3w);\n                swTopic.p3bw.push(swPeerTopic.p3bw);\n                swTopic.p4w.push(swPeerTopic.p4w);\n            }\n            sw.p5w.push(swPeer.p5w);\n            sw.p6w.push(swPeer.p6w);\n            sw.p7w.push(swPeer.p7w);\n            sw.score.push(swPeer.score);\n        }\n        else {\n            sw.p5w.push(0);\n            sw.p6w.push(0);\n            sw.p7w.push(0);\n            sw.score.push(0);\n        }\n    }\n    return sw;\n}\n//# sourceMappingURL=scoreMetrics.js.map","import { LongBits } from 'longbits';\nimport { allocUnsafe } from 'uint8arrays/alloc';\nconst N1 = Math.pow(2, 7);\nconst N2 = Math.pow(2, 14);\nconst N3 = Math.pow(2, 21);\nconst N4 = Math.pow(2, 28);\nconst N5 = Math.pow(2, 35);\nconst N6 = Math.pow(2, 42);\nconst N7 = Math.pow(2, 49);\nconst N8 = Math.pow(2, 56);\nconst N9 = Math.pow(2, 63);\nexport const unsigned = {\n    encodingLength(value) {\n        if (value < N1) {\n            return 1;\n        }\n        if (value < N2) {\n            return 2;\n        }\n        if (value < N3) {\n            return 3;\n        }\n        if (value < N4) {\n            return 4;\n        }\n        if (value < N5) {\n            return 5;\n        }\n        if (value < N6) {\n            return 6;\n        }\n        if (value < N7) {\n            return 7;\n        }\n        if (value < N8) {\n            return 8;\n        }\n        if (value < N9) {\n            return 9;\n        }\n        return 10;\n    },\n    encode(value, buf, offset = 0) {\n        if (Number.MAX_SAFE_INTEGER != null && value > Number.MAX_SAFE_INTEGER) {\n            throw new RangeError('Could not encode varint');\n        }\n        if (buf == null) {\n            buf = allocUnsafe(unsigned.encodingLength(value));\n        }\n        LongBits.fromNumber(value).toBytes(buf, offset);\n        return buf;\n    },\n    decode(buf, offset = 0) {\n        return LongBits.fromBytes(buf, offset).toNumber(true);\n    }\n};\nexport const signed = {\n    encodingLength(value) {\n        if (value < 0) {\n            return 10; // 10 bytes per spec - https://developers.google.com/protocol-buffers/docs/encoding#signed-ints\n        }\n        return unsigned.encodingLength(value);\n    },\n    encode(value, buf, offset) {\n        if (buf == null) {\n            buf = allocUnsafe(signed.encodingLength(value));\n        }\n        if (value < 0) {\n            LongBits.fromNumber(value).toBytes(buf, offset);\n            return buf;\n        }\n        return unsigned.encode(value, buf, offset);\n    },\n    decode(buf, offset = 0) {\n        return LongBits.fromBytes(buf, offset).toNumber(false);\n    }\n};\nexport const zigzag = {\n    encodingLength(value) {\n        return unsigned.encodingLength(value >= 0 ? value * 2 : value * -2 - 1);\n    },\n    // @ts-expect-error\n    encode(value, buf, offset) {\n        value = value >= 0 ? value * 2 : (value * -2) - 1;\n        return unsigned.encode(value, buf, offset);\n    },\n    decode(buf, offset = 0) {\n        const value = unsigned.decode(buf, offset);\n        return (value & 1) !== 0 ? (value + 1) / -2 : value / 2;\n    }\n};\n//# sourceMappingURL=index.js.map","import { Uint8ArrayList } from 'uint8arraylist';\nimport { unsigned } from 'uint8-varint';\nimport { allocUnsafe } from './alloc.js';\nconst defaultEncoder = (length) => {\n    const lengthLength = unsigned.encodingLength(length);\n    const lengthBuf = allocUnsafe(lengthLength);\n    unsigned.encode(length, lengthBuf);\n    defaultEncoder.bytes = lengthLength;\n    return lengthBuf;\n};\ndefaultEncoder.bytes = 0;\nexport function encode(options) {\n    options = options ?? {};\n    const encodeLength = options.lengthEncoder ?? defaultEncoder;\n    const encoder = async function* (source) {\n        for await (const chunk of source) {\n            // length + data\n            const length = encodeLength(chunk.byteLength);\n            // yield only Uint8Arrays\n            if (length instanceof Uint8Array) {\n                yield length;\n            }\n            else {\n                yield* length;\n            }\n            // yield only Uint8Arrays\n            if (chunk instanceof Uint8Array) {\n                yield chunk;\n            }\n            else {\n                yield* chunk;\n            }\n        }\n    };\n    return encoder;\n}\nencode.single = (chunk, options) => {\n    options = options ?? {};\n    const encodeLength = options.lengthEncoder ?? defaultEncoder;\n    return new Uint8ArrayList(encodeLength(chunk.byteLength), chunk);\n};\n//# sourceMappingURL=encode.js.map","export function alloc(len) {\n    return new Uint8Array(len);\n}\nexport function allocUnsafe(len) {\n    if (globalThis?.Buffer?.allocUnsafe != null) {\n        return globalThis.Buffer.allocUnsafe(len);\n    }\n    return new Uint8Array(len);\n}\n//# sourceMappingURL=alloc.js.map","/* eslint max-depth: [\"error\", 6] */\nimport { Uint8ArrayList } from 'uint8arraylist';\nimport { unsigned } from 'uint8-varint';\nimport errCode from 'err-code';\n// Maximum length of the length section of the message\nexport const MAX_LENGTH_LENGTH = 8; // Varint.encode(Number.MAX_SAFE_INTEGER).length\n// Maximum length of the data section of the message\nexport const MAX_DATA_LENGTH = 1024 * 1024 * 4;\nvar ReadMode;\n(function (ReadMode) {\n    ReadMode[ReadMode[\"LENGTH\"] = 0] = \"LENGTH\";\n    ReadMode[ReadMode[\"DATA\"] = 1] = \"DATA\";\n})(ReadMode || (ReadMode = {}));\nconst defaultDecoder = (buf) => {\n    const length = unsigned.decode(buf);\n    defaultDecoder.bytes = unsigned.encodingLength(length);\n    return length;\n};\ndefaultDecoder.bytes = 0;\nexport function decode(options) {\n    const decoder = async function* (source) {\n        const buffer = new Uint8ArrayList();\n        let mode = ReadMode.LENGTH;\n        let dataLength = -1;\n        const lengthDecoder = options?.lengthDecoder ?? defaultDecoder;\n        const maxLengthLength = options?.maxLengthLength ?? MAX_LENGTH_LENGTH;\n        const maxDataLength = options?.maxDataLength ?? MAX_DATA_LENGTH;\n        for await (const buf of source) {\n            buffer.append(buf);\n            while (buffer.byteLength > 0) {\n                if (mode === ReadMode.LENGTH) {\n                    // read length, ignore errors for short reads\n                    try {\n                        dataLength = lengthDecoder(buffer);\n                        if (dataLength < 0) {\n                            throw errCode(new Error('invalid message length'), 'ERR_INVALID_MSG_LENGTH');\n                        }\n                        if (dataLength > maxDataLength) {\n                            throw errCode(new Error('message length too long'), 'ERR_MSG_DATA_TOO_LONG');\n                        }\n                        const dataLengthLength = lengthDecoder.bytes;\n                        buffer.consume(dataLengthLength);\n                        if (options?.onLength != null) {\n                            options.onLength(dataLength);\n                        }\n                        mode = ReadMode.DATA;\n                    }\n                    catch (err) {\n                        if (err instanceof RangeError) {\n                            if (buffer.byteLength > maxLengthLength) {\n                                throw errCode(new Error('message length length too long'), 'ERR_MSG_LENGTH_TOO_LONG');\n                            }\n                            break;\n                        }\n                        throw err;\n                    }\n                }\n                if (mode === ReadMode.DATA) {\n                    if (buffer.byteLength < dataLength) {\n                        // not enough data, wait for more\n                        break;\n                    }\n                    const data = buffer.sublist(0, dataLength);\n                    buffer.consume(dataLength);\n                    if (options?.onData != null) {\n                        options.onData(data);\n                    }\n                    yield data;\n                    mode = ReadMode.LENGTH;\n                }\n            }\n        }\n        if (buffer.byteLength > 0) {\n            throw errCode(new Error('unexpected end of input'), 'ERR_UNEXPECTED_EOF');\n        }\n    };\n    return decoder;\n}\n/**\n * @param {*} reader\n * @param {import('./types').DecoderOptions} [options]\n * @returns\n */\ndecode.fromReader = (reader, options) => {\n    let byteLength = 1; // Read single byte chunks until the length is known\n    const varByteSource = (async function* () {\n        while (true) {\n            try {\n                const { done, value } = await reader.next(byteLength);\n                if (done === true) {\n                    return;\n                }\n                if (value != null) {\n                    yield value;\n                }\n            }\n            catch (err) {\n                if (err.code === 'ERR_UNDER_READ') {\n                    return { done: true, value: null };\n                }\n                throw err;\n            }\n            finally {\n                // Reset the byteLength so we continue to check for varints\n                byteLength = 1;\n            }\n        }\n    }());\n    /**\n     * Once the length has been parsed, read chunk for that length\n     */\n    const onLength = (l) => { byteLength = l; };\n    return decode({\n        ...(options ?? {}),\n        onLength\n    })(varByteSource);\n};\n//# sourceMappingURL=decode.js.map","import { abortableSource } from 'abortable-iterator';\nimport { pipe } from 'it-pipe';\nimport { pushable } from 'it-pushable';\nimport { encode, decode } from 'it-length-prefixed';\nexport class OutboundStream {\n    constructor(rawStream, errCallback, opts) {\n        this.rawStream = rawStream;\n        this.pushable = pushable({ objectMode: false });\n        this.closeController = new AbortController();\n        this.maxBufferSize = opts.maxBufferSize ?? Infinity;\n        pipe(abortableSource(this.pushable, this.closeController.signal, { returnOnAbort: true }), encode(), this.rawStream).catch(errCallback);\n    }\n    get protocol() {\n        // TODO remove this non-nullish assertion after https://github.com/libp2p/js-libp2p-interfaces/pull/265 is incorporated\n        return this.rawStream.stat.protocol;\n    }\n    push(data) {\n        if (this.pushable.readableLength > this.maxBufferSize) {\n            throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);\n        }\n        this.pushable.push(data);\n    }\n    close() {\n        this.closeController.abort();\n        // similar to pushable.end() but clear the internal buffer\n        this.pushable.return();\n        this.rawStream.close();\n    }\n}\nexport class InboundStream {\n    constructor(rawStream, opts = {}) {\n        this.rawStream = rawStream;\n        this.closeController = new AbortController();\n        this.source = abortableSource(pipe(this.rawStream, decode(opts)), this.closeController.signal, {\n            returnOnAbort: true\n        });\n    }\n    close() {\n        this.closeController.abort();\n        this.rawStream.close();\n    }\n}\n//# sourceMappingURL=stream.js.map","import protobuf from 'protobufjs/minimal.js';\nexport const defaultDecodeRpcLimits = {\n    maxSubscriptions: Infinity,\n    maxMessages: Infinity,\n    maxIhaveMessageIDs: Infinity,\n    maxIwantMessageIDs: Infinity,\n    maxControlMessages: Infinity,\n    maxPeerInfos: Infinity\n};\n/**\n * Copied code from src/message/rpc.cjs but with decode limits to prevent OOM attacks\n */\nexport function decodeRpc(bytes, opts) {\n    // Mutate to use the option as stateful counter. Must limit the total count of messageIDs across all IWANT, IHAVE\n    // else one count put 100 messageIDs into each 100 IWANT and \"get around\" the limit\n    opts = { ...opts };\n    const r = protobuf.Reader.create(bytes);\n    const l = bytes.length;\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                if (!(m.subscriptions && m.subscriptions.length))\n                    m.subscriptions = [];\n                if (m.subscriptions.length < opts.maxSubscriptions)\n                    m.subscriptions.push(decodeSubOpts(r, r.uint32()));\n                else\n                    r.skipType(t & 7);\n                break;\n            case 2:\n                if (!(m.messages && m.messages.length))\n                    m.messages = [];\n                if (m.messages.length < opts.maxMessages)\n                    m.messages.push(decodeMessage(r, r.uint32()));\n                else\n                    r.skipType(t & 7);\n                break;\n            case 3:\n                m.control = decodeControlMessage(r, r.uint32(), opts);\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodeSubOpts(r, l) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                m.subscribe = r.bool();\n                break;\n            case 2:\n                m.topic = r.string();\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodeMessage(r, l) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                m.from = r.bytes();\n                break;\n            case 2:\n                m.data = r.bytes();\n                break;\n            case 3:\n                m.seqno = r.bytes();\n                break;\n            case 4:\n                m.topic = r.string();\n                break;\n            case 5:\n                m.signature = r.bytes();\n                break;\n            case 6:\n                m.key = r.bytes();\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    if (!m.topic)\n        throw Error(\"missing required 'topic'\");\n    return m;\n}\nfunction decodeControlMessage(r, l, opts) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                if (!(m.ihave && m.ihave.length))\n                    m.ihave = [];\n                if (m.ihave.length < opts.maxControlMessages)\n                    m.ihave.push(decodeControlIHave(r, r.uint32(), opts));\n                else\n                    r.skipType(t & 7);\n                break;\n            case 2:\n                if (!(m.iwant && m.iwant.length))\n                    m.iwant = [];\n                if (m.iwant.length < opts.maxControlMessages)\n                    m.iwant.push(decodeControlIWant(r, r.uint32(), opts));\n                else\n                    r.skipType(t & 7);\n                break;\n            case 3:\n                if (!(m.graft && m.graft.length))\n                    m.graft = [];\n                if (m.graft.length < opts.maxControlMessages)\n                    m.graft.push(decodeControlGraft(r, r.uint32()));\n                else\n                    r.skipType(t & 7);\n                break;\n            case 4:\n                if (!(m.prune && m.prune.length))\n                    m.prune = [];\n                if (m.prune.length < opts.maxControlMessages)\n                    m.prune.push(decodeControlPrune(r, r.uint32(), opts));\n                else\n                    r.skipType(t & 7);\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodeControlIHave(r, l, opts) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                m.topicID = r.string();\n                break;\n            case 2:\n                if (!(m.messageIDs && m.messageIDs.length))\n                    m.messageIDs = [];\n                if (opts.maxIhaveMessageIDs-- > 0)\n                    m.messageIDs.push(r.bytes());\n                else\n                    r.skipType(t & 7);\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodeControlIWant(r, l, opts) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                if (!(m.messageIDs && m.messageIDs.length))\n                    m.messageIDs = [];\n                if (opts.maxIwantMessageIDs-- > 0)\n                    m.messageIDs.push(r.bytes());\n                else\n                    r.skipType(t & 7);\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodeControlGraft(r, l) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                m.topicID = r.string();\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodeControlPrune(r, l, opts) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                m.topicID = r.string();\n                break;\n            case 2:\n                if (!(m.peers && m.peers.length))\n                    m.peers = [];\n                if (opts.maxPeerInfos-- > 0)\n                    m.peers.push(decodePeerInfo(r, r.uint32()));\n                else\n                    r.skipType(t & 7);\n                break;\n            case 3:\n                m.backoff = r.uint64();\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\nfunction decodePeerInfo(r, l) {\n    const c = l === undefined ? r.len : r.pos + l;\n    const m = {};\n    while (r.pos < c) {\n        const t = r.uint32();\n        switch (t >>> 3) {\n            case 1:\n                m.peerID = r.bytes();\n                break;\n            case 2:\n                m.signedPeerRecord = r.bytes();\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n        }\n    }\n    return m;\n}\n//# sourceMappingURL=decodeRpc.js.map","import { convertToString } from '@multiformats/multiaddr/convert';\n// Protocols https://github.com/multiformats/multiaddr/blob/master/protocols.csv\n// code  size  name\n// 4     32    ip4\n// 41    128   ip6\nvar Protocol;\n(function (Protocol) {\n    Protocol[Protocol[\"ip4\"] = 4] = \"ip4\";\n    Protocol[Protocol[\"ip6\"] = 41] = \"ip6\";\n})(Protocol || (Protocol = {}));\nexport function multiaddrToIPStr(multiaddr) {\n    for (const tuple of multiaddr.tuples()) {\n        switch (tuple[0]) {\n            case Protocol.ip4:\n            case Protocol.ip6:\n                return convertToString(tuple[0], tuple[1]);\n        }\n    }\n    return null;\n}\n//# sourceMappingURL=multiaddr.js.map","import { pipe } from 'it-pipe';\nimport { RecordEnvelope } from '@libp2p/peer-record';\nimport { peerIdFromBytes, peerIdFromString } from '@libp2p/peer-id';\nimport { logger } from '@libp2p/logger';\nimport { createTopology } from '@libp2p/topology';\nimport { CustomEvent, EventEmitter } from '@libp2p/interfaces/events';\nimport { MessageCache } from './message-cache.js';\nimport { RPC } from './message/rpc.js';\nimport * as constants from './constants.js';\nimport { shuffle, messageIdToString } from './utils/index.js';\nimport { PeerScore, createPeerScoreParams, createPeerScoreThresholds } from './score/index.js';\nimport { IWantTracer } from './tracer.js';\nimport { SimpleTimeCache } from './utils/time-cache.js';\nimport { ACCEPT_FROM_WHITELIST_DURATION_MS, ACCEPT_FROM_WHITELIST_MAX_MESSAGES, ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE } from './constants.js';\nimport { ChurnReason, getMetrics, IHaveIgnoreReason, InclusionReason, ScorePenalty } from './metrics.js';\nimport { ValidateError, MessageStatus, RejectReason, rejectReasonFromAcceptance } from './types.js';\nimport { buildRawMessage, validateToRawMessage } from './utils/buildRawMessage.js';\nimport { msgIdFnStrictNoSign, msgIdFnStrictSign } from './utils/msgIdFn.js';\nimport { computeAllPeersScoreWeights } from './score/scoreMetrics.js';\nimport { getPublishConfigFromPeerId } from './utils/publishConfig.js';\nimport { StrictNoSign, StrictSign, TopicValidatorResult } from '@libp2p/interface-pubsub';\nimport { removeFirstNItemsFromSet, removeItemsFromSet } from './utils/set.js';\nimport { pushable } from 'it-pushable';\nimport { InboundStream, OutboundStream } from './stream.js';\nimport { decodeRpc, defaultDecodeRpcLimits } from './message/decodeRpc.js';\nimport { multiaddrToIPStr } from './utils/multiaddr.js';\nexport const multicodec = constants.GossipsubIDv11;\nvar GossipStatusCode;\n(function (GossipStatusCode) {\n    GossipStatusCode[GossipStatusCode[\"started\"] = 0] = \"started\";\n    GossipStatusCode[GossipStatusCode[\"stopped\"] = 1] = \"stopped\";\n})(GossipStatusCode || (GossipStatusCode = {}));\nexport class GossipSub extends EventEmitter {\n    constructor(components, options = {}) {\n        super();\n        this.multicodecs = [constants.GossipsubIDv11, constants.GossipsubIDv10];\n        // State\n        this.peers = new Set();\n        this.streamsInbound = new Map();\n        this.streamsOutbound = new Map();\n        /** Ensures outbound streams are created sequentially */\n        this.outboundInflightQueue = pushable({ objectMode: true });\n        /** Direct peers */\n        this.direct = new Set();\n        /** Floodsub peers */\n        this.floodsubPeers = new Set();\n        /**\n         * Map of peer id and AcceptRequestWhileListEntry\n         */\n        this.acceptFromWhitelist = new Map();\n        /**\n         * Map of topics to which peers are subscribed to\n         */\n        this.topics = new Map();\n        /**\n         * List of our subscriptions\n         */\n        this.subscriptions = new Set();\n        /**\n         * Map of topic meshes\n         * topic => peer id set\n         */\n        this.mesh = new Map();\n        /**\n         * Map of topics to set of peers. These mesh peers are the ones to which we are publishing without a topic membership\n         * topic => peer id set\n         */\n        this.fanout = new Map();\n        /**\n         * Map of last publish time for fanout topics\n         * topic => last publish time\n         */\n        this.fanoutLastpub = new Map();\n        /**\n         * Map of pending messages to gossip\n         * peer id => control messages\n         */\n        this.gossip = new Map();\n        /**\n         * Map of control messages\n         * peer id => control message\n         */\n        this.control = new Map();\n        /**\n         * Number of IHAVEs received from peer in the last heartbeat\n         */\n        this.peerhave = new Map();\n        /** Number of messages we have asked from peer in the last heartbeat */\n        this.iasked = new Map();\n        /** Prune backoff map */\n        this.backoff = new Map();\n        /**\n         * Connection direction cache, marks peers with outbound connections\n         * peer id => direction\n         */\n        this.outbound = new Map();\n        /**\n         * Custom validator function per topic.\n         * Must return or resolve quickly (< 100ms) to prevent causing penalties for late messages.\n         * If you need to apply validation that may require longer times use `asyncValidation` option and callback the\n         * validation result through `Gossipsub.reportValidationResult`\n         */\n        this.topicValidators = new Map();\n        /**\n         * Number of heartbeats since the beginning of time\n         * This allows us to amortize some resource cleanup -- eg: backoff cleanup\n         */\n        this.heartbeatTicks = 0;\n        this.directPeerInitial = null;\n        this.status = { code: GossipStatusCode.stopped };\n        this.heartbeatTimer = null;\n        this.runHeartbeat = () => {\n            const timer = this.metrics?.heartbeatDuration.startTimer();\n            this.heartbeat()\n                .catch((err) => {\n                this.log('Error running heartbeat', err);\n            })\n                .finally(() => {\n                if (timer != null) {\n                    timer();\n                }\n                // Schedule the next run if still in started status\n                if (this.status.code === GossipStatusCode.started) {\n                    // Clear previous timeout before overwriting `status.heartbeatTimeout`, it should be completed tho.\n                    clearTimeout(this.status.heartbeatTimeout);\n                    // NodeJS setInterval function is innexact, calls drift by a few miliseconds on each call.\n                    // To run the heartbeat precisely setTimeout() must be used recomputing the delay on every loop.\n                    let msToNextHeartbeat = this.opts.heartbeatInterval - ((Date.now() - this.status.hearbeatStartMs) % this.opts.heartbeatInterval);\n                    // If too close to next heartbeat, skip one\n                    if (msToNextHeartbeat < this.opts.heartbeatInterval * 0.25) {\n                        msToNextHeartbeat += this.opts.heartbeatInterval;\n                        this.metrics?.heartbeatSkipped.inc();\n                    }\n                    this.status.heartbeatTimeout = setTimeout(this.runHeartbeat, msToNextHeartbeat);\n                }\n            });\n        };\n        const opts = {\n            fallbackToFloodsub: true,\n            floodPublish: true,\n            doPX: false,\n            directPeers: [],\n            D: constants.GossipsubD,\n            Dlo: constants.GossipsubDlo,\n            Dhi: constants.GossipsubDhi,\n            Dscore: constants.GossipsubDscore,\n            Dout: constants.GossipsubDout,\n            Dlazy: constants.GossipsubDlazy,\n            heartbeatInterval: constants.GossipsubHeartbeatInterval,\n            fanoutTTL: constants.GossipsubFanoutTTL,\n            mcacheLength: constants.GossipsubHistoryLength,\n            mcacheGossip: constants.GossipsubHistoryGossip,\n            seenTTL: constants.GossipsubSeenTTL,\n            gossipsubIWantFollowupMs: constants.GossipsubIWantFollowupTime,\n            prunePeers: constants.GossipsubPrunePeers,\n            pruneBackoff: constants.GossipsubPruneBackoff,\n            graftFloodThreshold: constants.GossipsubGraftFloodThreshold,\n            opportunisticGraftPeers: constants.GossipsubOpportunisticGraftPeers,\n            opportunisticGraftTicks: constants.GossipsubOpportunisticGraftTicks,\n            directConnectTicks: constants.GossipsubDirectConnectTicks,\n            ...options,\n            scoreParams: createPeerScoreParams(options.scoreParams),\n            scoreThresholds: createPeerScoreThresholds(options.scoreThresholds)\n        };\n        this.components = components;\n        this.decodeRpcLimits = opts.decodeRpcLimits ?? defaultDecodeRpcLimits;\n        this.globalSignaturePolicy = opts.globalSignaturePolicy ?? StrictSign;\n        // Also wants to get notified of peers connected using floodsub\n        if (opts.fallbackToFloodsub) {\n            this.multicodecs.push(constants.FloodsubID);\n        }\n        // From pubsub\n        this.log = logger(opts.debugName ?? 'libp2p:gossipsub');\n        // Gossipsub\n        this.opts = opts;\n        this.direct = new Set(opts.directPeers.map((p) => p.id.toString()));\n        this.seenCache = new SimpleTimeCache({ validityMs: opts.seenTTL });\n        this.publishedMessageIds = new SimpleTimeCache({ validityMs: opts.seenTTL });\n        if (options.msgIdFn) {\n            // Use custom function\n            this.msgIdFn = options.msgIdFn;\n        }\n        else {\n            switch (this.globalSignaturePolicy) {\n                case StrictSign:\n                    this.msgIdFn = msgIdFnStrictSign;\n                    break;\n                case StrictNoSign:\n                    this.msgIdFn = msgIdFnStrictNoSign;\n                    break;\n            }\n        }\n        if (options.fastMsgIdFn) {\n            this.fastMsgIdFn = options.fastMsgIdFn;\n            this.fastMsgIdCache = new SimpleTimeCache({ validityMs: opts.seenTTL });\n        }\n        // By default, gossipsub only provide a browser friendly function to convert Uint8Array message id to string.\n        this.msgIdToStrFn = options.msgIdToStrFn ?? messageIdToString;\n        this.mcache = options.messageCache || new MessageCache(opts.mcacheGossip, opts.mcacheLength, this.msgIdToStrFn);\n        if (options.dataTransform) {\n            this.dataTransform = options.dataTransform;\n        }\n        if (options.metricsRegister) {\n            if (!options.metricsTopicStrToLabel) {\n                throw Error('Must set metricsTopicStrToLabel with metrics');\n            }\n            // in theory, each topic has its own meshMessageDeliveriesWindow param\n            // however in lodestar, we configure it mostly the same so just pick the max of positive ones\n            // (some topics have meshMessageDeliveriesWindow as 0)\n            const maxMeshMessageDeliveriesWindowMs = Math.max(...Object.values(opts.scoreParams.topics).map((topicParam) => topicParam.meshMessageDeliveriesWindow), constants.DEFAULT_METRIC_MESH_MESSAGE_DELIVERIES_WINDOWS);\n            const metrics = getMetrics(options.metricsRegister, options.metricsTopicStrToLabel, {\n                gossipPromiseExpireSec: this.opts.gossipsubIWantFollowupMs / 1000,\n                behaviourPenaltyThreshold: opts.scoreParams.behaviourPenaltyThreshold,\n                maxMeshMessageDeliveriesWindowSec: maxMeshMessageDeliveriesWindowMs / 1000\n            });\n            metrics.mcacheSize.addCollect(() => this.onScrapeMetrics(metrics));\n            for (const protocol of this.multicodecs) {\n                metrics.protocolsEnabled.set({ protocol }, 1);\n            }\n            this.metrics = metrics;\n        }\n        else {\n            this.metrics = null;\n        }\n        this.gossipTracer = new IWantTracer(this.opts.gossipsubIWantFollowupMs, this.msgIdToStrFn, this.metrics);\n        /**\n         * libp2p\n         */\n        this.score = new PeerScore(this.opts.scoreParams, this.metrics, {\n            scoreCacheValidityMs: opts.heartbeatInterval\n        });\n        this.maxInboundStreams = options.maxInboundStreams;\n        this.maxOutboundStreams = options.maxOutboundStreams;\n        this.allowedTopics = opts.allowedTopics ? new Set(opts.allowedTopics) : null;\n    }\n    getPeers() {\n        return [...this.peers.keys()].map((str) => peerIdFromString(str));\n    }\n    isStarted() {\n        return this.status.code === GossipStatusCode.started;\n    }\n    // LIFECYCLE METHODS\n    /**\n     * Mounts the gossipsub protocol onto the libp2p node and sends our\n     * our subscriptions to every peer connected\n     */\n    async start() {\n        // From pubsub\n        if (this.isStarted()) {\n            return;\n        }\n        this.log('starting');\n        this.publishConfig = await getPublishConfigFromPeerId(this.globalSignaturePolicy, this.components.peerId);\n        // Create the outbound inflight queue\n        // This ensures that outbound stream creation happens sequentially\n        this.outboundInflightQueue = pushable({ objectMode: true });\n        pipe(this.outboundInflightQueue, async (source) => {\n            for await (const { peerId, connection } of source) {\n                await this.createOutboundStream(peerId, connection);\n            }\n        }).catch((e) => this.log.error('outbound inflight queue error', e));\n        // set direct peer addresses in the address book\n        await Promise.all(this.opts.directPeers.map(async (p) => {\n            await this.components.peerStore.addressBook.add(p.id, p.addrs);\n        }));\n        const registrar = this.components.registrar;\n        // Incoming streams\n        // Called after a peer dials us\n        await Promise.all(this.multicodecs.map((multicodec) => registrar.handle(multicodec, this.onIncomingStream.bind(this), {\n            maxInboundStreams: this.maxInboundStreams,\n            maxOutboundStreams: this.maxOutboundStreams\n        })));\n        // # How does Gossipsub interact with libp2p? Rough guide from Mar 2022\n        //\n        // ## Setup:\n        // Gossipsub requests libp2p to callback, TBD\n        //\n        // `this.libp2p.handle()` registers a handler for `/meshsub/1.1.0` and other Gossipsub protocols\n        // The handler callback is registered in libp2p Upgrader.protocols map.\n        //\n        // Upgrader receives an inbound connection from some transport and (`Upgrader.upgradeInbound`):\n        // - Adds encryption (NOISE in our case)\n        // - Multiplex stream\n        // - Create a muxer and register that for each new stream call Upgrader.protocols handler\n        //\n        // ## Topology\n        // - new instance of Topology (unlinked to libp2p) with handlers\n        // - registar.register(topology)\n        // register protocol with topology\n        // Topology callbacks called on connection manager changes\n        const topology = createTopology({\n            onConnect: this.onPeerConnected.bind(this),\n            onDisconnect: this.onPeerDisconnected.bind(this)\n        });\n        const registrarTopologyIds = await Promise.all(this.multicodecs.map((multicodec) => registrar.register(multicodec, topology)));\n        // Schedule to start heartbeat after `GossipsubHeartbeatInitialDelay`\n        const heartbeatTimeout = setTimeout(this.runHeartbeat, constants.GossipsubHeartbeatInitialDelay);\n        // Then, run heartbeat every `heartbeatInterval` offset by `GossipsubHeartbeatInitialDelay`\n        this.status = {\n            code: GossipStatusCode.started,\n            registrarTopologyIds,\n            heartbeatTimeout: heartbeatTimeout,\n            hearbeatStartMs: Date.now() + constants.GossipsubHeartbeatInitialDelay\n        };\n        this.score.start();\n        // connect to direct peers\n        this.directPeerInitial = setTimeout(() => {\n            Promise.resolve()\n                .then(async () => {\n                await Promise.all(Array.from(this.direct).map(async (id) => await this.connect(id)));\n            })\n                .catch((err) => {\n                this.log(err);\n            });\n        }, constants.GossipsubDirectConnectInitialDelay);\n        this.log('started');\n    }\n    /**\n     * Unmounts the gossipsub protocol and shuts down every connection\n     */\n    async stop() {\n        this.log('stopping');\n        // From pubsub\n        if (this.status.code !== GossipStatusCode.started) {\n            return;\n        }\n        const { registrarTopologyIds } = this.status;\n        this.status = { code: GossipStatusCode.stopped };\n        // unregister protocol and handlers\n        const registrar = this.components.registrar;\n        registrarTopologyIds.forEach((id) => registrar.unregister(id));\n        this.outboundInflightQueue.end();\n        for (const outboundStream of this.streamsOutbound.values()) {\n            outboundStream.close();\n        }\n        this.streamsOutbound.clear();\n        for (const inboundStream of this.streamsInbound.values()) {\n            inboundStream.close();\n        }\n        this.streamsInbound.clear();\n        this.peers.clear();\n        this.subscriptions.clear();\n        // Gossipsub\n        if (this.heartbeatTimer) {\n            this.heartbeatTimer.cancel();\n            this.heartbeatTimer = null;\n        }\n        this.score.stop();\n        this.mesh.clear();\n        this.fanout.clear();\n        this.fanoutLastpub.clear();\n        this.gossip.clear();\n        this.control.clear();\n        this.peerhave.clear();\n        this.iasked.clear();\n        this.backoff.clear();\n        this.outbound.clear();\n        this.gossipTracer.clear();\n        this.seenCache.clear();\n        if (this.fastMsgIdCache)\n            this.fastMsgIdCache.clear();\n        if (this.directPeerInitial)\n            clearTimeout(this.directPeerInitial);\n        this.log('stopped');\n    }\n    /** FOR DEBUG ONLY - Dump peer stats for all peers. Data is cloned, safe to mutate */\n    dumpPeerScoreStats() {\n        return this.score.dumpPeerScoreStats();\n    }\n    /**\n     * On an inbound stream opened\n     */\n    onIncomingStream({ stream, connection }) {\n        if (!this.isStarted()) {\n            return;\n        }\n        const peerId = connection.remotePeer;\n        // add peer to router\n        this.addPeer(peerId, connection.stat.direction, connection.remoteAddr);\n        // create inbound stream\n        this.createInboundStream(peerId, stream);\n        // attempt to create outbound stream\n        this.outboundInflightQueue.push({ peerId, connection });\n    }\n    /**\n     * Registrar notifies an established connection with pubsub protocol\n     */\n    onPeerConnected(peerId, connection) {\n        this.metrics?.newConnectionCount.inc({ status: connection.stat.status });\n        // libp2p may emit a closed connection and never issue peer:disconnect event\n        // see https://github.com/ChainSafe/js-libp2p-gossipsub/issues/398\n        if (!this.isStarted() || connection.stat.status !== 'OPEN') {\n            return;\n        }\n        this.addPeer(peerId, connection.stat.direction, connection.remoteAddr);\n        this.outboundInflightQueue.push({ peerId, connection });\n    }\n    /**\n     * Registrar notifies a closing connection with pubsub protocol\n     */\n    onPeerDisconnected(peerId) {\n        this.log('connection ended %p', peerId);\n        this.removePeer(peerId);\n    }\n    async createOutboundStream(peerId, connection) {\n        if (!this.isStarted()) {\n            return;\n        }\n        const id = peerId.toString();\n        if (!this.peers.has(id)) {\n            return;\n        }\n        // TODO make this behavior more robust\n        // This behavior is different than for inbound streams\n        // If an outbound stream already exists, don't create a new stream\n        if (this.streamsOutbound.has(id)) {\n            return;\n        }\n        try {\n            const stream = new OutboundStream(await connection.newStream(this.multicodecs), (e) => this.log.error('outbound pipe error', e), { maxBufferSize: this.opts.maxOutboundBufferSize });\n            this.log('create outbound stream %p', peerId);\n            this.streamsOutbound.set(id, stream);\n            const protocol = stream.protocol;\n            if (protocol === constants.FloodsubID) {\n                this.floodsubPeers.add(id);\n            }\n            this.metrics?.peersPerProtocol.inc({ protocol }, 1);\n            // Immediately send own subscriptions via the newly attached stream\n            if (this.subscriptions.size > 0) {\n                this.log('send subscriptions to', id);\n                this.sendSubscriptions(id, Array.from(this.subscriptions), true);\n            }\n        }\n        catch (e) {\n            this.log.error('createOutboundStream error', e);\n        }\n    }\n    async createInboundStream(peerId, stream) {\n        if (!this.isStarted()) {\n            return;\n        }\n        const id = peerId.toString();\n        if (!this.peers.has(id)) {\n            return;\n        }\n        // TODO make this behavior more robust\n        // This behavior is different than for outbound streams\n        // If a peer initiates a new inbound connection\n        // we assume that one is the new canonical inbound stream\n        const priorInboundStream = this.streamsInbound.get(id);\n        if (priorInboundStream !== undefined) {\n            this.log('replacing existing inbound steam %s', id);\n            priorInboundStream.close();\n        }\n        this.log('create inbound stream %s', id);\n        const inboundStream = new InboundStream(stream, { maxDataLength: this.opts.maxInboundDataLength });\n        this.streamsInbound.set(id, inboundStream);\n        this.pipePeerReadStream(peerId, inboundStream.source).catch((err) => this.log(err));\n    }\n    /**\n     * Add a peer to the router\n     */\n    addPeer(peerId, direction, addr) {\n        const id = peerId.toString();\n        if (!this.peers.has(id)) {\n            this.log('new peer %p', peerId);\n            this.peers.add(id);\n            // Add to peer scoring\n            this.score.addPeer(id);\n            const currentIP = multiaddrToIPStr(addr);\n            if (currentIP !== null) {\n                this.score.addIP(id, currentIP);\n            }\n            else {\n                this.log('Added peer has no IP in current address %s %s', id, addr.toString());\n            }\n            // track the connection direction. Don't allow to unset outbound\n            if (!this.outbound.has(id)) {\n                this.outbound.set(id, direction === 'outbound');\n            }\n        }\n    }\n    /**\n     * Removes a peer from the router\n     */\n    removePeer(peerId) {\n        const id = peerId.toString();\n        if (!this.peers.has(id)) {\n            return;\n        }\n        // delete peer\n        this.log('delete peer %p', peerId);\n        this.peers.delete(id);\n        const outboundStream = this.streamsOutbound.get(id);\n        const inboundStream = this.streamsInbound.get(id);\n        if (outboundStream) {\n            this.metrics?.peersPerProtocol.inc({ protocol: outboundStream.protocol }, -1);\n        }\n        // close streams\n        outboundStream?.close();\n        inboundStream?.close();\n        // remove streams\n        this.streamsOutbound.delete(id);\n        this.streamsInbound.delete(id);\n        // remove peer from topics map\n        for (const peers of this.topics.values()) {\n            peers.delete(id);\n        }\n        // Remove this peer from the mesh\n        for (const [topicStr, peers] of this.mesh) {\n            if (peers.delete(id) === true) {\n                this.metrics?.onRemoveFromMesh(topicStr, ChurnReason.Dc, 1);\n            }\n        }\n        // Remove this peer from the fanout\n        for (const peers of this.fanout.values()) {\n            peers.delete(id);\n        }\n        // Remove from floodsubPeers\n        this.floodsubPeers.delete(id);\n        // Remove from gossip mapping\n        this.gossip.delete(id);\n        // Remove from control mapping\n        this.control.delete(id);\n        // Remove from backoff mapping\n        this.outbound.delete(id);\n        // Remove from peer scoring\n        this.score.removePeer(id);\n        this.acceptFromWhitelist.delete(id);\n    }\n    // API METHODS\n    get started() {\n        return this.status.code === GossipStatusCode.started;\n    }\n    /**\n     * Get a the peer-ids in a topic mesh\n     */\n    getMeshPeers(topic) {\n        const peersInTopic = this.mesh.get(topic);\n        return peersInTopic ? Array.from(peersInTopic) : [];\n    }\n    /**\n     * Get a list of the peer-ids that are subscribed to one topic.\n     */\n    getSubscribers(topic) {\n        const peersInTopic = this.topics.get(topic);\n        return (peersInTopic ? Array.from(peersInTopic) : []).map((str) => peerIdFromString(str));\n    }\n    /**\n     * Get the list of topics which the peer is subscribed to.\n     */\n    getTopics() {\n        return Array.from(this.subscriptions);\n    }\n    // TODO: Reviewing Pubsub API\n    // MESSAGE METHODS\n    /**\n     * Responsible for processing each RPC message received by other peers.\n     */\n    async pipePeerReadStream(peerId, stream) {\n        try {\n            await pipe(stream, async (source) => {\n                for await (const data of source) {\n                    try {\n                        // TODO: Check max gossip message size, before decodeRpc()\n                        const rpcBytes = data.subarray();\n                        // Note: This function may throw, it must be wrapped in a try {} catch {} to prevent closing the stream.\n                        // TODO: What should we do if the entire RPC is invalid?\n                        const rpc = decodeRpc(rpcBytes, this.decodeRpcLimits);\n                        this.metrics?.onRpcRecv(rpc, rpcBytes.length);\n                        // Since processRpc may be overridden entirely in unsafe ways,\n                        // the simplest/safest option here is to wrap in a function and capture all errors\n                        // to prevent a top-level unhandled exception\n                        // This processing of rpc messages should happen without awaiting full validation/execution of prior messages\n                        if (this.opts.awaitRpcHandler) {\n                            await this.handleReceivedRpc(peerId, rpc);\n                        }\n                        else {\n                            this.handleReceivedRpc(peerId, rpc).catch((err) => this.log(err));\n                        }\n                    }\n                    catch (e) {\n                        this.log(e);\n                    }\n                }\n            });\n        }\n        catch (err) {\n            this.handlePeerReadStreamError(err, peerId);\n        }\n    }\n    /**\n     * Handle error when read stream pipe throws, less of the functional use but more\n     * to for testing purposes to spy on the error handling\n     * */\n    handlePeerReadStreamError(err, peerId) {\n        this.log.error(err);\n        this.onPeerDisconnected(peerId);\n    }\n    /**\n     * Handles an rpc request from a peer\n     */\n    async handleReceivedRpc(from, rpc) {\n        // Check if peer is graylisted in which case we ignore the event\n        if (!this.acceptFrom(from.toString())) {\n            this.log('received message from unacceptable peer %p', from);\n            this.metrics?.rpcRecvNotAccepted.inc();\n            return;\n        }\n        this.log('rpc from %p', from);\n        // Handle received subscriptions\n        if (rpc.subscriptions && rpc.subscriptions.length > 0) {\n            // update peer subscriptions\n            const subscriptions = [];\n            rpc.subscriptions.forEach((subOpt) => {\n                const topic = subOpt.topic;\n                const subscribe = subOpt.subscribe === true;\n                if (topic != null) {\n                    if (this.allowedTopics && !this.allowedTopics.has(topic)) {\n                        // Not allowed: subscription data-structures are not bounded by topic count\n                        // TODO: Should apply behaviour penalties?\n                        return;\n                    }\n                    this.handleReceivedSubscription(from, topic, subscribe);\n                    subscriptions.push({ topic, subscribe });\n                }\n            });\n            this.dispatchEvent(new CustomEvent('subscription-change', {\n                detail: { peerId: from, subscriptions }\n            }));\n        }\n        // Handle messages\n        // TODO: (up to limit)\n        if (rpc.messages) {\n            for (const message of rpc.messages) {\n                if (this.allowedTopics && !this.allowedTopics.has(message.topic)) {\n                    // Not allowed: message cache data-structures are not bounded by topic count\n                    // TODO: Should apply behaviour penalties?\n                    continue;\n                }\n                const handleReceivedMessagePromise = this.handleReceivedMessage(from, message)\n                    // Should never throw, but handle just in case\n                    .catch((err) => this.log(err));\n                if (this.opts.awaitRpcMessageHandler) {\n                    await handleReceivedMessagePromise;\n                }\n            }\n        }\n        // Handle control messages\n        if (rpc.control) {\n            await this.handleControlMessage(from.toString(), rpc.control);\n        }\n    }\n    /**\n     * Handles a subscription change from a peer\n     */\n    handleReceivedSubscription(from, topic, subscribe) {\n        this.log('subscription update from %p topic %s', from, topic);\n        let topicSet = this.topics.get(topic);\n        if (topicSet == null) {\n            topicSet = new Set();\n            this.topics.set(topic, topicSet);\n        }\n        if (subscribe) {\n            // subscribe peer to new topic\n            topicSet.add(from.toString());\n        }\n        else {\n            // unsubscribe from existing topic\n            topicSet.delete(from.toString());\n        }\n        // TODO: rust-libp2p has A LOT more logic here\n    }\n    /**\n     * Handles a newly received message from an RPC.\n     * May forward to all peers in the mesh.\n     */\n    async handleReceivedMessage(from, rpcMsg) {\n        this.metrics?.onMsgRecvPreValidation(rpcMsg.topic);\n        const validationResult = await this.validateReceivedMessage(from, rpcMsg);\n        this.metrics?.onMsgRecvResult(rpcMsg.topic, validationResult.code);\n        switch (validationResult.code) {\n            case MessageStatus.duplicate:\n                // Report the duplicate\n                this.score.duplicateMessage(from.toString(), validationResult.msgIdStr, rpcMsg.topic);\n                // due to the collision of fastMsgIdFn, 2 different messages may end up the same fastMsgId\n                // so we need to also mark the duplicate message as delivered or the promise is not resolved\n                // and peer gets penalized. See https://github.com/ChainSafe/js-libp2p-gossipsub/pull/385\n                this.gossipTracer.deliverMessage(validationResult.msgIdStr, true);\n                this.mcache.observeDuplicate(validationResult.msgIdStr, from.toString());\n                return;\n            case MessageStatus.invalid:\n                // invalid messages received\n                // metrics.register_invalid_message(&raw_message.topic)\n                // Tell peer_score about reject\n                // Reject the original source, and any duplicates we've seen from other peers.\n                if (validationResult.msgIdStr) {\n                    const msgIdStr = validationResult.msgIdStr;\n                    this.score.rejectMessage(from.toString(), msgIdStr, rpcMsg.topic, validationResult.reason);\n                    this.gossipTracer.rejectMessage(msgIdStr, validationResult.reason);\n                }\n                else {\n                    this.score.rejectInvalidMessage(from.toString(), rpcMsg.topic);\n                }\n                this.metrics?.onMsgRecvInvalid(rpcMsg.topic, validationResult);\n                return;\n            case MessageStatus.valid:\n                // Tells score that message arrived (but is maybe not fully validated yet).\n                // Consider the message as delivered for gossip promises.\n                this.score.validateMessage(validationResult.messageId.msgIdStr);\n                this.gossipTracer.deliverMessage(validationResult.messageId.msgIdStr);\n                // Add the message to our memcache\n                // if no validation is required, mark the message as validated\n                this.mcache.put(validationResult.messageId, rpcMsg, !this.opts.asyncValidation);\n                // Dispatch the message to the user if we are subscribed to the topic\n                if (this.subscriptions.has(rpcMsg.topic)) {\n                    const isFromSelf = this.components.peerId.equals(from);\n                    if (!isFromSelf || this.opts.emitSelf) {\n                        super.dispatchEvent(new CustomEvent('gossipsub:message', {\n                            detail: {\n                                propagationSource: from,\n                                msgId: validationResult.messageId.msgIdStr,\n                                msg: validationResult.msg\n                            }\n                        }));\n                        // TODO: Add option to switch between emit per topic or all messages in one\n                        super.dispatchEvent(new CustomEvent('message', { detail: validationResult.msg }));\n                    }\n                }\n                // Forward the message to mesh peers, if no validation is required\n                // If asyncValidation is ON, expect the app layer to call reportMessageValidationResult(), then forward\n                if (!this.opts.asyncValidation) {\n                    // TODO: in rust-libp2p\n                    // .forward_msg(&msg_id, raw_message, Some(propagation_source))\n                    this.forwardMessage(validationResult.messageId.msgIdStr, rpcMsg, from.toString());\n                }\n        }\n    }\n    /**\n     * Handles a newly received message from an RPC.\n     * May forward to all peers in the mesh.\n     */\n    async validateReceivedMessage(propagationSource, rpcMsg) {\n        // Fast message ID stuff\n        const fastMsgIdStr = this.fastMsgIdFn?.(rpcMsg);\n        const msgIdCached = fastMsgIdStr !== undefined ? this.fastMsgIdCache?.get(fastMsgIdStr) : undefined;\n        if (msgIdCached) {\n            // This message has been seen previously. Ignore it\n            return { code: MessageStatus.duplicate, msgIdStr: msgIdCached };\n        }\n        // Perform basic validation on message and convert to RawGossipsubMessage for fastMsgIdFn()\n        const validationResult = await validateToRawMessage(this.globalSignaturePolicy, rpcMsg);\n        if (!validationResult.valid) {\n            return { code: MessageStatus.invalid, reason: RejectReason.Error, error: validationResult.error };\n        }\n        const msg = validationResult.message;\n        // Try and perform the data transform to the message. If it fails, consider it invalid.\n        try {\n            if (this.dataTransform) {\n                msg.data = this.dataTransform.inboundTransform(rpcMsg.topic, msg.data);\n            }\n        }\n        catch (e) {\n            this.log('Invalid message, transform failed', e);\n            return { code: MessageStatus.invalid, reason: RejectReason.Error, error: ValidateError.TransformFailed };\n        }\n        // TODO: Check if message is from a blacklisted source or propagation origin\n        // - Reject any message from a blacklisted peer\n        // - Also reject any message that originated from a blacklisted peer\n        // - reject messages claiming to be from ourselves but not locally published\n        // Calculate the message id on the transformed data.\n        const msgId = await this.msgIdFn(msg);\n        const msgIdStr = this.msgIdToStrFn(msgId);\n        const messageId = { msgId, msgIdStr };\n        // Add the message to the duplicate caches\n        if (fastMsgIdStr !== undefined && this.fastMsgIdCache) {\n            const collision = this.fastMsgIdCache.put(fastMsgIdStr, msgIdStr);\n            if (collision) {\n                this.metrics?.fastMsgIdCacheCollision.inc();\n            }\n        }\n        if (this.seenCache.has(msgIdStr)) {\n            return { code: MessageStatus.duplicate, msgIdStr };\n        }\n        else {\n            this.seenCache.put(msgIdStr);\n        }\n        // (Optional) Provide custom validation here with dynamic validators per topic\n        // NOTE: This custom topicValidator() must resolve fast (< 100ms) to allow scores\n        // to not penalize peers for long validation times.\n        const topicValidator = this.topicValidators.get(rpcMsg.topic);\n        if (topicValidator != null) {\n            let acceptance;\n            // Use try {} catch {} in case topicValidator() is synchronous\n            try {\n                acceptance = await topicValidator(propagationSource, msg);\n            }\n            catch (e) {\n                const errCode = e.code;\n                if (errCode === constants.ERR_TOPIC_VALIDATOR_IGNORE)\n                    acceptance = TopicValidatorResult.Ignore;\n                if (errCode === constants.ERR_TOPIC_VALIDATOR_REJECT)\n                    acceptance = TopicValidatorResult.Reject;\n                else\n                    acceptance = TopicValidatorResult.Ignore;\n            }\n            if (acceptance !== TopicValidatorResult.Accept) {\n                return { code: MessageStatus.invalid, reason: rejectReasonFromAcceptance(acceptance), msgIdStr };\n            }\n        }\n        return { code: MessageStatus.valid, messageId, msg };\n    }\n    /**\n     * Return score of a peer.\n     */\n    getScore(peerId) {\n        return this.score.score(peerId);\n    }\n    /**\n     * Send an rpc object to a peer with subscriptions\n     */\n    sendSubscriptions(toPeer, topics, subscribe) {\n        this.sendRpc(toPeer, {\n            subscriptions: topics.map((topic) => ({ topic, subscribe }))\n        });\n    }\n    /**\n     * Handles an rpc control message from a peer\n     */\n    async handleControlMessage(id, controlMsg) {\n        if (controlMsg === undefined) {\n            return;\n        }\n        const iwant = controlMsg.ihave ? this.handleIHave(id, controlMsg.ihave) : [];\n        const ihave = controlMsg.iwant ? this.handleIWant(id, controlMsg.iwant) : [];\n        const prune = controlMsg.graft ? await this.handleGraft(id, controlMsg.graft) : [];\n        controlMsg.prune && (await this.handlePrune(id, controlMsg.prune));\n        if (!iwant.length && !ihave.length && !prune.length) {\n            return;\n        }\n        this.sendRpc(id, { messages: ihave, control: { iwant, prune } });\n    }\n    /**\n     * Whether to accept a message from a peer\n     */\n    acceptFrom(id) {\n        if (this.direct.has(id)) {\n            return true;\n        }\n        const now = Date.now();\n        const entry = this.acceptFromWhitelist.get(id);\n        if (entry && entry.messagesAccepted < ACCEPT_FROM_WHITELIST_MAX_MESSAGES && entry.acceptUntil >= now) {\n            entry.messagesAccepted += 1;\n            return true;\n        }\n        const score = this.score.score(id);\n        if (score >= ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE) {\n            // peer is unlikely to be able to drop its score to `graylistThreshold`\n            // after 128 messages or 1s\n            this.acceptFromWhitelist.set(id, {\n                messagesAccepted: 0,\n                acceptUntil: now + ACCEPT_FROM_WHITELIST_DURATION_MS\n            });\n        }\n        else {\n            this.acceptFromWhitelist.delete(id);\n        }\n        return score >= this.opts.scoreThresholds.graylistThreshold;\n    }\n    /**\n     * Handles IHAVE messages\n     */\n    handleIHave(id, ihave) {\n        if (!ihave.length) {\n            return [];\n        }\n        // we ignore IHAVE gossip from any peer whose score is below the gossips threshold\n        const score = this.score.score(id);\n        if (score < this.opts.scoreThresholds.gossipThreshold) {\n            this.log('IHAVE: ignoring peer %s with score below threshold [ score = %d ]', id, score);\n            this.metrics?.ihaveRcvIgnored.inc({ reason: IHaveIgnoreReason.LowScore });\n            return [];\n        }\n        // IHAVE flood protection\n        const peerhave = (this.peerhave.get(id) ?? 0) + 1;\n        this.peerhave.set(id, peerhave);\n        if (peerhave > constants.GossipsubMaxIHaveMessages) {\n            this.log('IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring', id, peerhave);\n            this.metrics?.ihaveRcvIgnored.inc({ reason: IHaveIgnoreReason.MaxIhave });\n            return [];\n        }\n        const iasked = this.iasked.get(id) ?? 0;\n        if (iasked >= constants.GossipsubMaxIHaveLength) {\n            this.log('IHAVE: peer %s has already advertised too many messages (%d); ignoring', id, iasked);\n            this.metrics?.ihaveRcvIgnored.inc({ reason: IHaveIgnoreReason.MaxIasked });\n            return [];\n        }\n        // string msgId => msgId\n        const iwant = new Map();\n        ihave.forEach(({ topicID, messageIDs }) => {\n            if (!topicID || !messageIDs || !this.mesh.has(topicID)) {\n                return;\n            }\n            let idonthave = 0;\n            messageIDs.forEach((msgId) => {\n                const msgIdStr = this.msgIdToStrFn(msgId);\n                if (!this.seenCache.has(msgIdStr)) {\n                    iwant.set(msgIdStr, msgId);\n                    idonthave++;\n                }\n            });\n            this.metrics?.onIhaveRcv(topicID, messageIDs.length, idonthave);\n        });\n        if (!iwant.size) {\n            return [];\n        }\n        let iask = iwant.size;\n        if (iask + iasked > constants.GossipsubMaxIHaveLength) {\n            iask = constants.GossipsubMaxIHaveLength - iasked;\n        }\n        this.log('IHAVE: Asking for %d out of %d messages from %s', iask, iwant.size, id);\n        let iwantList = Array.from(iwant.values());\n        // ask in random order\n        shuffle(iwantList);\n        // truncate to the messages we are actually asking for and update the iasked counter\n        iwantList = iwantList.slice(0, iask);\n        this.iasked.set(id, iasked + iask);\n        this.gossipTracer.addPromise(id, iwantList);\n        return [\n            {\n                messageIDs: iwantList\n            }\n        ];\n    }\n    /**\n     * Handles IWANT messages\n     * Returns messages to send back to peer\n     */\n    handleIWant(id, iwant) {\n        if (!iwant.length) {\n            return [];\n        }\n        // we don't respond to IWANT requests from any per whose score is below the gossip threshold\n        const score = this.score.score(id);\n        if (score < this.opts.scoreThresholds.gossipThreshold) {\n            this.log('IWANT: ignoring peer %s with score below threshold [score = %d]', id, score);\n            return [];\n        }\n        const ihave = new Map();\n        const iwantByTopic = new Map();\n        let iwantDonthave = 0;\n        iwant.forEach(({ messageIDs }) => {\n            messageIDs &&\n                messageIDs.forEach((msgId) => {\n                    const msgIdStr = this.msgIdToStrFn(msgId);\n                    const entry = this.mcache.getWithIWantCount(msgIdStr, id);\n                    if (entry == null) {\n                        iwantDonthave++;\n                        return;\n                    }\n                    iwantByTopic.set(entry.msg.topic, 1 + (iwantByTopic.get(entry.msg.topic) ?? 0));\n                    if (entry.count > constants.GossipsubGossipRetransmission) {\n                        this.log('IWANT: Peer %s has asked for message %s too many times: ignoring request', id, msgId);\n                        return;\n                    }\n                    ihave.set(msgIdStr, entry.msg);\n                });\n        });\n        this.metrics?.onIwantRcv(iwantByTopic, iwantDonthave);\n        if (!ihave.size) {\n            this.log('IWANT: Could not provide any wanted messages to %s', id);\n            return [];\n        }\n        this.log('IWANT: Sending %d messages to %s', ihave.size, id);\n        return Array.from(ihave.values());\n    }\n    /**\n     * Handles Graft messages\n     */\n    async handleGraft(id, graft) {\n        const prune = [];\n        const score = this.score.score(id);\n        const now = Date.now();\n        let doPX = this.opts.doPX;\n        graft.forEach(({ topicID }) => {\n            if (!topicID) {\n                return;\n            }\n            const peersInMesh = this.mesh.get(topicID);\n            if (!peersInMesh) {\n                // don't do PX when there is an unknown topic to avoid leaking our peers\n                doPX = false;\n                // spam hardening: ignore GRAFTs for unknown topics\n                return;\n            }\n            // check if peer is already in the mesh; if so do nothing\n            if (peersInMesh.has(id)) {\n                return;\n            }\n            // we don't GRAFT to/from direct peers; complain loudly if this happens\n            if (this.direct.has(id)) {\n                this.log('GRAFT: ignoring request from direct peer %s', id);\n                // this is possibly a bug from a non-reciprical configuration; send a PRUNE\n                prune.push(topicID);\n                // but don't px\n                doPX = false;\n                return;\n            }\n            // make sure we are not backing off that peer\n            const expire = this.backoff.get(topicID)?.get(id);\n            if (typeof expire === 'number' && now < expire) {\n                this.log('GRAFT: ignoring backed off peer %s', id);\n                // add behavioral penalty\n                this.score.addPenalty(id, 1, ScorePenalty.GraftBackoff);\n                // no PX\n                doPX = false;\n                // check the flood cutoff -- is the GRAFT coming too fast?\n                const floodCutoff = expire + this.opts.graftFloodThreshold - this.opts.pruneBackoff;\n                if (now < floodCutoff) {\n                    // extra penalty\n                    this.score.addPenalty(id, 1, ScorePenalty.GraftBackoff);\n                }\n                // refresh the backoff\n                this.addBackoff(id, topicID);\n                prune.push(topicID);\n                return;\n            }\n            // check the score\n            if (score < 0) {\n                // we don't GRAFT peers with negative score\n                this.log('GRAFT: ignoring peer %s with negative score: score=%d, topic=%s', id, score, topicID);\n                // we do send them PRUNE however, because it's a matter of protocol correctness\n                prune.push(topicID);\n                // but we won't PX to them\n                doPX = false;\n                // add/refresh backoff so that we don't reGRAFT too early even if the score decays\n                this.addBackoff(id, topicID);\n                return;\n            }\n            // check the number of mesh peers; if it is at (or over) Dhi, we only accept grafts\n            // from peers with outbound connections; this is a defensive check to restrict potential\n            // mesh takeover attacks combined with love bombing\n            if (peersInMesh.size >= this.opts.Dhi && !this.outbound.get(id)) {\n                prune.push(topicID);\n                this.addBackoff(id, topicID);\n                return;\n            }\n            this.log('GRAFT: Add mesh link from %s in %s', id, topicID);\n            this.score.graft(id, topicID);\n            peersInMesh.add(id);\n            this.metrics?.onAddToMesh(topicID, InclusionReason.Subscribed, 1);\n        });\n        if (!prune.length) {\n            return [];\n        }\n        return await Promise.all(prune.map((topic) => this.makePrune(id, topic, doPX)));\n    }\n    /**\n     * Handles Prune messages\n     */\n    async handlePrune(id, prune) {\n        const score = this.score.score(id);\n        for (const { topicID, backoff, peers } of prune) {\n            if (topicID == null) {\n                continue;\n            }\n            const peersInMesh = this.mesh.get(topicID);\n            if (!peersInMesh) {\n                return;\n            }\n            this.log('PRUNE: Remove mesh link to %s in %s', id, topicID);\n            this.score.prune(id, topicID);\n            if (peersInMesh.has(id)) {\n                peersInMesh.delete(id);\n                this.metrics?.onRemoveFromMesh(topicID, ChurnReason.Unsub, 1);\n            }\n            // is there a backoff specified by the peer? if so obey it\n            if (typeof backoff === 'number' && backoff > 0) {\n                this.doAddBackoff(id, topicID, backoff * 1000);\n            }\n            else {\n                this.addBackoff(id, topicID);\n            }\n            // PX\n            if (peers && peers.length) {\n                // we ignore PX from peers with insufficient scores\n                if (score < this.opts.scoreThresholds.acceptPXThreshold) {\n                    this.log('PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]', id, score, topicID);\n                    continue;\n                }\n                await this.pxConnect(peers);\n            }\n        }\n    }\n    /**\n     * Add standard backoff log for a peer in a topic\n     */\n    addBackoff(id, topic) {\n        this.doAddBackoff(id, topic, this.opts.pruneBackoff);\n    }\n    /**\n     * Add backoff expiry interval for a peer in a topic\n     *\n     * @param id\n     * @param topic\n     * @param interval - backoff duration in milliseconds\n     */\n    doAddBackoff(id, topic, interval) {\n        let backoff = this.backoff.get(topic);\n        if (!backoff) {\n            backoff = new Map();\n            this.backoff.set(topic, backoff);\n        }\n        const expire = Date.now() + interval;\n        const existingExpire = backoff.get(id) ?? 0;\n        if (existingExpire < expire) {\n            backoff.set(id, expire);\n        }\n    }\n    /**\n     * Apply penalties from broken IHAVE/IWANT promises\n     */\n    applyIwantPenalties() {\n        this.gossipTracer.getBrokenPromises().forEach((count, p) => {\n            this.log(\"peer %s didn't follow up in %d IWANT requests; adding penalty\", p, count);\n            this.score.addPenalty(p, count, ScorePenalty.BrokenPromise);\n        });\n    }\n    /**\n     * Clear expired backoff expiries\n     */\n    clearBackoff() {\n        // we only clear once every GossipsubPruneBackoffTicks ticks to avoid iterating over the maps too much\n        if (this.heartbeatTicks % constants.GossipsubPruneBackoffTicks !== 0) {\n            return;\n        }\n        const now = Date.now();\n        this.backoff.forEach((backoff, topic) => {\n            backoff.forEach((expire, id) => {\n                if (expire < now) {\n                    backoff.delete(id);\n                }\n            });\n            if (backoff.size === 0) {\n                this.backoff.delete(topic);\n            }\n        });\n    }\n    /**\n     * Maybe reconnect to direct peers\n     */\n    async directConnect() {\n        const toconnect = [];\n        this.direct.forEach((id) => {\n            if (!this.streamsOutbound.has(id)) {\n                toconnect.push(id);\n            }\n        });\n        await Promise.all(toconnect.map(async (id) => await this.connect(id)));\n    }\n    /**\n     * Maybe attempt connection given signed peer records\n     */\n    async pxConnect(peers) {\n        if (peers.length > this.opts.prunePeers) {\n            shuffle(peers);\n            peers = peers.slice(0, this.opts.prunePeers);\n        }\n        const toconnect = [];\n        await Promise.all(peers.map(async (pi) => {\n            if (!pi.peerID) {\n                return;\n            }\n            const p = peerIdFromBytes(pi.peerID).toString();\n            if (this.peers.has(p)) {\n                return;\n            }\n            if (!pi.signedPeerRecord) {\n                toconnect.push(p);\n                return;\n            }\n            // The peer sent us a signed record\n            // This is not a record from the peer who sent the record, but another peer who is connected with it\n            // Ensure that it is valid\n            try {\n                const envelope = await RecordEnvelope.openAndCertify(pi.signedPeerRecord, 'libp2p-peer-record');\n                const eid = envelope.peerId;\n                if (!envelope.peerId.equals(p)) {\n                    this.log(\"bogus peer record obtained through px: peer ID %p doesn't match expected peer %p\", eid, p);\n                    return;\n                }\n                if (!(await this.components.peerStore.addressBook.consumePeerRecord(envelope))) {\n                    this.log('bogus peer record obtained through px: could not add peer record to address book');\n                    return;\n                }\n                toconnect.push(p);\n            }\n            catch (e) {\n                this.log('bogus peer record obtained through px: invalid signature or not a peer record');\n            }\n        }));\n        if (!toconnect.length) {\n            return;\n        }\n        await Promise.all(toconnect.map(async (id) => await this.connect(id)));\n    }\n    /**\n     * Connect to a peer using the gossipsub protocol\n     */\n    async connect(id) {\n        this.log('Initiating connection with %s', id);\n        const peerId = peerIdFromString(id);\n        const connection = await this.components.connectionManager.openConnection(peerId);\n        for (const multicodec of this.multicodecs) {\n            for (const topology of this.components.registrar.getTopologies(multicodec)) {\n                topology.onConnect(peerId, connection);\n            }\n        }\n    }\n    /**\n     * Subscribes to a topic\n     */\n    subscribe(topic) {\n        if (this.status.code !== GossipStatusCode.started) {\n            throw new Error('Pubsub has not started');\n        }\n        if (!this.subscriptions.has(topic)) {\n            this.subscriptions.add(topic);\n            for (const peerId of this.peers.keys()) {\n                this.sendSubscriptions(peerId, [topic], true);\n            }\n        }\n        this.join(topic);\n    }\n    /**\n     * Unsubscribe to a topic\n     */\n    unsubscribe(topic) {\n        if (this.status.code !== GossipStatusCode.started) {\n            throw new Error('Pubsub is not started');\n        }\n        const wasSubscribed = this.subscriptions.delete(topic);\n        this.log('unsubscribe from %s - am subscribed %s', topic, wasSubscribed);\n        if (wasSubscribed) {\n            for (const peerId of this.peers.keys()) {\n                this.sendSubscriptions(peerId, [topic], false);\n            }\n        }\n        this.leave(topic);\n    }\n    /**\n     * Join topic\n     */\n    join(topic) {\n        if (this.status.code !== GossipStatusCode.started) {\n            throw new Error('Gossipsub has not started');\n        }\n        // if we are already in the mesh, return\n        if (this.mesh.has(topic)) {\n            return;\n        }\n        this.log('JOIN %s', topic);\n        this.metrics?.onJoin(topic);\n        const toAdd = new Set();\n        // check if we have mesh_n peers in fanout[topic] and add them to the mesh if we do,\n        // removing the fanout entry.\n        const fanoutPeers = this.fanout.get(topic);\n        if (fanoutPeers) {\n            // Remove fanout entry and the last published time\n            this.fanout.delete(topic);\n            this.fanoutLastpub.delete(topic);\n            // remove explicit peers, peers with negative scores, and backoffed peers\n            fanoutPeers.forEach((id) => {\n                // TODO:rust-libp2p checks `self.backoffs.is_backoff_with_slack()`\n                if (!this.direct.has(id) && this.score.score(id) >= 0) {\n                    toAdd.add(id);\n                }\n            });\n            this.metrics?.onAddToMesh(topic, InclusionReason.Fanout, toAdd.size);\n        }\n        // check if we need to get more peers, which we randomly select\n        if (toAdd.size < this.opts.D) {\n            const fanoutCount = toAdd.size;\n            const newPeers = this.getRandomGossipPeers(topic, this.opts.D, (id) => \n            // filter direct peers and peers with negative score\n            !toAdd.has(id) && !this.direct.has(id) && this.score.score(id) >= 0);\n            newPeers.forEach((peer) => {\n                toAdd.add(peer);\n            });\n            this.metrics?.onAddToMesh(topic, InclusionReason.Random, toAdd.size - fanoutCount);\n        }\n        this.mesh.set(topic, toAdd);\n        toAdd.forEach((id) => {\n            this.log('JOIN: Add mesh link to %s in %s', id, topic);\n            this.sendGraft(id, topic);\n            // rust-libp2p\n            // - peer_score.graft()\n            // - Self::control_pool_add()\n            // - peer_added_to_mesh()\n        });\n    }\n    /**\n     * Leave topic\n     */\n    leave(topic) {\n        if (this.status.code !== GossipStatusCode.started) {\n            throw new Error('Gossipsub has not started');\n        }\n        this.log('LEAVE %s', topic);\n        this.metrics?.onLeave(topic);\n        // Send PRUNE to mesh peers\n        const meshPeers = this.mesh.get(topic);\n        if (meshPeers) {\n            Promise.all(Array.from(meshPeers).map(async (id) => {\n                this.log('LEAVE: Remove mesh link to %s in %s', id, topic);\n                return await this.sendPrune(id, topic);\n            })).catch((err) => {\n                this.log('Error sending prunes to mesh peers', err);\n            });\n            this.mesh.delete(topic);\n        }\n    }\n    selectPeersToForward(topic, propagationSource, excludePeers) {\n        const tosend = new Set();\n        // Add explicit peers\n        const peersInTopic = this.topics.get(topic);\n        if (peersInTopic) {\n            this.direct.forEach((peer) => {\n                if (peersInTopic.has(peer) && propagationSource !== peer && !excludePeers?.has(peer)) {\n                    tosend.add(peer);\n                }\n            });\n            // As of Mar 2022, spec + golang-libp2p include this while rust-libp2p does not\n            // rust-libp2p: https://github.com/libp2p/rust-libp2p/blob/6cc3b4ec52c922bfcf562a29b5805c3150e37c75/protocols/gossipsub/src/behaviour.rs#L2693\n            // spec: https://github.com/libp2p/specs/blob/10712c55ab309086a52eec7d25f294df4fa96528/pubsub/gossipsub/gossipsub-v1.0.md?plain=1#L361\n            this.floodsubPeers.forEach((peer) => {\n                if (peersInTopic.has(peer) &&\n                    propagationSource !== peer &&\n                    !excludePeers?.has(peer) &&\n                    this.score.score(peer) >= this.opts.scoreThresholds.publishThreshold) {\n                    tosend.add(peer);\n                }\n            });\n        }\n        // add mesh peers\n        const meshPeers = this.mesh.get(topic);\n        if (meshPeers && meshPeers.size > 0) {\n            meshPeers.forEach((peer) => {\n                if (propagationSource !== peer && !excludePeers?.has(peer)) {\n                    tosend.add(peer);\n                }\n            });\n        }\n        return tosend;\n    }\n    selectPeersToPublish(topic) {\n        const tosend = new Set();\n        const tosendCount = {\n            direct: 0,\n            floodsub: 0,\n            mesh: 0,\n            fanout: 0\n        };\n        const peersInTopic = this.topics.get(topic);\n        if (peersInTopic) {\n            // flood-publish behavior\n            // send to direct peers and _all_ peers meeting the publishThreshold\n            if (this.opts.floodPublish) {\n                peersInTopic.forEach((id) => {\n                    if (this.direct.has(id)) {\n                        tosend.add(id);\n                        tosendCount.direct++;\n                    }\n                    else if (this.score.score(id) >= this.opts.scoreThresholds.publishThreshold) {\n                        tosend.add(id);\n                        tosendCount.floodsub++;\n                    }\n                });\n            }\n            else {\n                // non-flood-publish behavior\n                // send to direct peers, subscribed floodsub peers\n                // and some mesh peers above publishThreshold\n                // direct peers (if subscribed)\n                this.direct.forEach((id) => {\n                    if (peersInTopic.has(id)) {\n                        tosend.add(id);\n                        tosendCount.direct++;\n                    }\n                });\n                // floodsub peers\n                // Note: if there are no floodsub peers, we save a loop through peersInTopic Map\n                this.floodsubPeers.forEach((id) => {\n                    if (peersInTopic.has(id) && this.score.score(id) >= this.opts.scoreThresholds.publishThreshold) {\n                        tosend.add(id);\n                        tosendCount.floodsub++;\n                    }\n                });\n                // Gossipsub peers handling\n                const meshPeers = this.mesh.get(topic);\n                if (meshPeers && meshPeers.size > 0) {\n                    meshPeers.forEach((peer) => {\n                        tosend.add(peer);\n                        tosendCount.mesh++;\n                    });\n                }\n                // We are not in the mesh for topic, use fanout peers\n                else {\n                    const fanoutPeers = this.fanout.get(topic);\n                    if (fanoutPeers && fanoutPeers.size > 0) {\n                        fanoutPeers.forEach((peer) => {\n                            tosend.add(peer);\n                            tosendCount.fanout++;\n                        });\n                    }\n                    // We have no fanout peers, select mesh_n of them and add them to the fanout\n                    else {\n                        // If we are not in the fanout, then pick peers in topic above the publishThreshold\n                        const newFanoutPeers = this.getRandomGossipPeers(topic, this.opts.D, (id) => {\n                            return this.score.score(id) >= this.opts.scoreThresholds.publishThreshold;\n                        });\n                        if (newFanoutPeers.size > 0) {\n                            // eslint-disable-line max-depth\n                            this.fanout.set(topic, newFanoutPeers);\n                            newFanoutPeers.forEach((peer) => {\n                                // eslint-disable-line max-depth\n                                tosend.add(peer);\n                                tosendCount.fanout++;\n                            });\n                        }\n                    }\n                    // We are publishing to fanout peers - update the time we published\n                    this.fanoutLastpub.set(topic, Date.now());\n                }\n            }\n        }\n        return { tosend, tosendCount };\n    }\n    /**\n     * Forwards a message from our peers.\n     *\n     * For messages published by us (the app layer), this class uses `publish`\n     */\n    forwardMessage(msgIdStr, rawMsg, propagationSource, excludePeers) {\n        // message is fully validated inform peer_score\n        if (propagationSource) {\n            this.score.deliverMessage(propagationSource, msgIdStr, rawMsg.topic);\n        }\n        const tosend = this.selectPeersToForward(rawMsg.topic, propagationSource, excludePeers);\n        // Note: Don't throw if tosend is empty, we can have a mesh with a single peer\n        // forward the message to peers\n        tosend.forEach((id) => {\n            // sendRpc may mutate RPC message on piggyback, create a new message for each peer\n            this.sendRpc(id, { messages: [rawMsg] });\n        });\n        this.metrics?.onForwardMsg(rawMsg.topic, tosend.size);\n    }\n    /**\n     * App layer publishes a message to peers, return number of peers this message is published to\n     * Note: `async` due to crypto only if `StrictSign`, otherwise it's a sync fn.\n     *\n     * For messages not from us, this class uses `forwardMessage`.\n     */\n    async publish(topic, data, opts) {\n        const transformedData = this.dataTransform ? this.dataTransform.outboundTransform(topic, data) : data;\n        if (this.publishConfig == null) {\n            throw Error('PublishError.Uninitialized');\n        }\n        // Prepare raw message with user's publishConfig\n        const { raw: rawMsg, msg } = await buildRawMessage(this.publishConfig, topic, data, transformedData);\n        // calculate the message id from the un-transformed data\n        const msgId = await this.msgIdFn(msg);\n        const msgIdStr = this.msgIdToStrFn(msgId);\n        // Current publish opt takes precedence global opts, while preserving false value\n        const ignoreDuplicatePublishError = opts?.ignoreDuplicatePublishError ?? this.opts.ignoreDuplicatePublishError;\n        if (this.seenCache.has(msgIdStr)) {\n            // This message has already been seen. We don't re-publish messages that have already\n            // been published on the network.\n            if (ignoreDuplicatePublishError) {\n                this.metrics?.onPublishDuplicateMsg(topic);\n                return { recipients: [] };\n            }\n            throw Error('PublishError.Duplicate');\n        }\n        const { tosend, tosendCount } = this.selectPeersToPublish(topic);\n        const willSendToSelf = this.opts.emitSelf === true && this.subscriptions.has(topic);\n        // Current publish opt takes precedence global opts, while preserving false value\n        const allowPublishToZeroPeers = opts?.allowPublishToZeroPeers ?? this.opts.allowPublishToZeroPeers;\n        if (tosend.size === 0 && !allowPublishToZeroPeers && !willSendToSelf) {\n            throw Error('PublishError.InsufficientPeers');\n        }\n        // If the message isn't a duplicate and we have sent it to some peers add it to the\n        // duplicate cache and memcache.\n        this.seenCache.put(msgIdStr);\n        // all published messages are valid\n        this.mcache.put({ msgId, msgIdStr }, rawMsg, true);\n        // If the message is anonymous or has a random author add it to the published message ids cache.\n        this.publishedMessageIds.put(msgIdStr);\n        // Send to set of peers aggregated from direct, mesh, fanout\n        for (const id of tosend) {\n            // sendRpc may mutate RPC message on piggyback, create a new message for each peer\n            const sent = this.sendRpc(id, { messages: [rawMsg] });\n            // did not actually send the message\n            if (!sent) {\n                tosend.delete(id);\n            }\n        }\n        this.metrics?.onPublishMsg(topic, tosendCount, tosend.size, rawMsg.data != null ? rawMsg.data.length : 0);\n        // Dispatch the message to the user if we are subscribed to the topic\n        if (willSendToSelf) {\n            tosend.add(this.components.peerId.toString());\n            super.dispatchEvent(new CustomEvent('gossipsub:message', {\n                detail: {\n                    propagationSource: this.components.peerId,\n                    msgId: msgIdStr,\n                    msg\n                }\n            }));\n            // TODO: Add option to switch between emit per topic or all messages in one\n            super.dispatchEvent(new CustomEvent('message', { detail: msg }));\n        }\n        return {\n            recipients: Array.from(tosend.values()).map((str) => peerIdFromString(str))\n        };\n    }\n    /**\n     * This function should be called when `asyncValidation` is `true` after\n     * the message got validated by the caller. Messages are stored in the `mcache` and\n     * validation is expected to be fast enough that the messages should still exist in the cache.\n     * There are three possible validation outcomes and the outcome is given in acceptance.\n     *\n     * If acceptance = `MessageAcceptance.Accept` the message will get propagated to the\n     * network. The `propagation_source` parameter indicates who the message was received by and\n     * will not be forwarded back to that peer.\n     *\n     * If acceptance = `MessageAcceptance.Reject` the message will be deleted from the memcache\n     * and the P penalty will be applied to the `propagationSource`.\n     *\n     * If acceptance = `MessageAcceptance.Ignore` the message will be deleted from the memcache\n     * but no P penalty will be applied.\n     *\n     * This function will return true if the message was found in the cache and false if was not\n     * in the cache anymore.\n     *\n     * This should only be called once per message.\n     */\n    reportMessageValidationResult(msgId, propagationSource, acceptance) {\n        if (acceptance === TopicValidatorResult.Accept) {\n            const cacheEntry = this.mcache.validate(msgId);\n            this.metrics?.onReportValidationMcacheHit(cacheEntry !== null);\n            if (cacheEntry != null) {\n                const { message: rawMsg, originatingPeers } = cacheEntry;\n                // message is fully validated inform peer_score\n                this.score.deliverMessage(propagationSource.toString(), msgId, rawMsg.topic);\n                this.forwardMessage(msgId, cacheEntry.message, propagationSource.toString(), originatingPeers);\n                this.metrics?.onReportValidation(rawMsg.topic, acceptance);\n            }\n            // else, Message not in cache. Ignoring forwarding\n        }\n        // Not valid\n        else {\n            const cacheEntry = this.mcache.remove(msgId);\n            this.metrics?.onReportValidationMcacheHit(cacheEntry !== null);\n            if (cacheEntry) {\n                const rejectReason = rejectReasonFromAcceptance(acceptance);\n                const { message: rawMsg, originatingPeers } = cacheEntry;\n                // Tell peer_score about reject\n                // Reject the original source, and any duplicates we've seen from other peers.\n                this.score.rejectMessage(propagationSource.toString(), msgId, rawMsg.topic, rejectReason);\n                for (const peer of originatingPeers) {\n                    this.score.rejectMessage(peer, msgId, rawMsg.topic, rejectReason);\n                }\n                this.metrics?.onReportValidation(rawMsg.topic, acceptance);\n            }\n            // else, Message not in cache. Ignoring forwarding\n        }\n    }\n    /**\n     * Sends a GRAFT message to a peer\n     */\n    sendGraft(id, topic) {\n        const graft = [\n            {\n                topicID: topic\n            }\n        ];\n        this.sendRpc(id, { control: { graft } });\n    }\n    /**\n     * Sends a PRUNE message to a peer\n     */\n    async sendPrune(id, topic) {\n        const prune = [await this.makePrune(id, topic, this.opts.doPX)];\n        this.sendRpc(id, { control: { prune } });\n    }\n    /**\n     * Send an rpc object to a peer\n     */\n    sendRpc(id, rpc) {\n        const outboundStream = this.streamsOutbound.get(id);\n        if (!outboundStream) {\n            this.log(`Cannot send RPC to ${id} as there is no open stream to it available`);\n            return false;\n        }\n        // piggyback control message retries\n        const ctrl = this.control.get(id);\n        if (ctrl) {\n            this.piggybackControl(id, rpc, ctrl);\n            this.control.delete(id);\n        }\n        // piggyback gossip\n        const ihave = this.gossip.get(id);\n        if (ihave) {\n            this.piggybackGossip(id, rpc, ihave);\n            this.gossip.delete(id);\n        }\n        const rpcBytes = RPC.encode(rpc).finish();\n        try {\n            outboundStream.push(rpcBytes);\n        }\n        catch (e) {\n            this.log.error(`Cannot send rpc to ${id}`, e);\n            // if the peer had control messages or gossip, re-attach\n            if (ctrl) {\n                this.control.set(id, ctrl);\n            }\n            if (ihave) {\n                this.gossip.set(id, ihave);\n            }\n            return false;\n        }\n        this.metrics?.onRpcSent(rpc, rpcBytes.length);\n        return true;\n    }\n    /** Mutates `outRpc` adding graft and prune control messages */\n    piggybackControl(id, outRpc, ctrl) {\n        if (ctrl.graft) {\n            if (!outRpc.control)\n                outRpc.control = {};\n            if (!outRpc.control.graft)\n                outRpc.control.graft = [];\n            for (const graft of ctrl.graft) {\n                if (graft.topicID && this.mesh.get(graft.topicID)?.has(id)) {\n                    outRpc.control.graft.push(graft);\n                }\n            }\n        }\n        if (ctrl.prune) {\n            if (!outRpc.control)\n                outRpc.control = {};\n            if (!outRpc.control.prune)\n                outRpc.control.prune = [];\n            for (const prune of ctrl.prune) {\n                if (prune.topicID && !this.mesh.get(prune.topicID)?.has(id)) {\n                    outRpc.control.prune.push(prune);\n                }\n            }\n        }\n    }\n    /** Mutates `outRpc` adding ihave control messages */\n    piggybackGossip(id, outRpc, ihave) {\n        if (!outRpc.control)\n            outRpc.control = {};\n        outRpc.control.ihave = ihave;\n    }\n    /**\n     * Send graft and prune messages\n     *\n     * @param tograft - peer id => topic[]\n     * @param toprune - peer id => topic[]\n     */\n    async sendGraftPrune(tograft, toprune, noPX) {\n        const doPX = this.opts.doPX;\n        for (const [id, topics] of tograft) {\n            const graft = topics.map((topicID) => ({ topicID }));\n            let prune = [];\n            // If a peer also has prunes, process them now\n            const pruning = toprune.get(id);\n            if (pruning) {\n                prune = await Promise.all(pruning.map(async (topicID) => await this.makePrune(id, topicID, doPX && !(noPX.get(id) ?? false))));\n                toprune.delete(id);\n            }\n            this.sendRpc(id, { control: { graft, prune } });\n        }\n        for (const [id, topics] of toprune) {\n            const prune = await Promise.all(topics.map(async (topicID) => await this.makePrune(id, topicID, doPX && !(noPX.get(id) ?? false))));\n            this.sendRpc(id, { control: { prune } });\n        }\n    }\n    /**\n     * Emits gossip - Send IHAVE messages to a random set of gossip peers\n     */\n    emitGossip(peersToGossipByTopic) {\n        const gossipIDsByTopic = this.mcache.getGossipIDs(new Set(peersToGossipByTopic.keys()));\n        for (const [topic, peersToGossip] of peersToGossipByTopic) {\n            this.doEmitGossip(topic, peersToGossip, gossipIDsByTopic.get(topic) ?? []);\n        }\n    }\n    /**\n     * Send gossip messages to GossipFactor peers above threshold with a minimum of D_lazy\n     * Peers are randomly selected from the heartbeat which exclude mesh + fanout peers\n     * We also exclude direct peers, as there is no reason to emit gossip to them\n     * @param topic\n     * @param candidateToGossip - peers to gossip\n     * @param messageIDs - message ids to gossip\n     */\n    doEmitGossip(topic, candidateToGossip, messageIDs) {\n        if (!messageIDs.length) {\n            return;\n        }\n        // shuffle to emit in random order\n        shuffle(messageIDs);\n        // if we are emitting more than GossipsubMaxIHaveLength ids, truncate the list\n        if (messageIDs.length > constants.GossipsubMaxIHaveLength) {\n            // we do the truncation (with shuffling) per peer below\n            this.log('too many messages for gossip; will truncate IHAVE list (%d messages)', messageIDs.length);\n        }\n        if (!candidateToGossip.size)\n            return;\n        let target = this.opts.Dlazy;\n        const factor = constants.GossipsubGossipFactor * candidateToGossip.size;\n        let peersToGossip = candidateToGossip;\n        if (factor > target) {\n            target = factor;\n        }\n        if (target > peersToGossip.size) {\n            target = peersToGossip.size;\n        }\n        else {\n            // only shuffle if needed\n            peersToGossip = shuffle(Array.from(peersToGossip)).slice(0, target);\n        }\n        // Emit the IHAVE gossip to the selected peers up to the target\n        peersToGossip.forEach((id) => {\n            let peerMessageIDs = messageIDs;\n            if (messageIDs.length > constants.GossipsubMaxIHaveLength) {\n                // shuffle and slice message IDs per peer so that we emit a different set for each peer\n                // we have enough reduncancy in the system that this will significantly increase the message\n                // coverage when we do truncate\n                peerMessageIDs = shuffle(peerMessageIDs.slice()).slice(0, constants.GossipsubMaxIHaveLength);\n            }\n            this.pushGossip(id, {\n                topicID: topic,\n                messageIDs: peerMessageIDs\n            });\n        });\n    }\n    /**\n     * Flush gossip and control messages\n     */\n    flush() {\n        // send gossip first, which will also piggyback control\n        for (const [peer, ihave] of this.gossip.entries()) {\n            this.gossip.delete(peer);\n            this.sendRpc(peer, { control: { ihave } });\n        }\n        // send the remaining control messages\n        for (const [peer, control] of this.control.entries()) {\n            this.control.delete(peer);\n            this.sendRpc(peer, { control: { graft: control.graft, prune: control.prune } });\n        }\n    }\n    /**\n     * Adds new IHAVE messages to pending gossip\n     */\n    pushGossip(id, controlIHaveMsgs) {\n        this.log('Add gossip to %s', id);\n        const gossip = this.gossip.get(id) || [];\n        this.gossip.set(id, gossip.concat(controlIHaveMsgs));\n    }\n    /**\n     * Make a PRUNE control message for a peer in a topic\n     */\n    async makePrune(id, topic, doPX) {\n        this.score.prune(id, topic);\n        if (this.streamsOutbound.get(id).protocol === constants.GossipsubIDv10) {\n            // Gossipsub v1.0 -- no backoff, the peer won't be able to parse it anyway\n            return {\n                topicID: topic,\n                peers: []\n            };\n        }\n        // backoff is measured in seconds\n        // GossipsubPruneBackoff is measured in milliseconds\n        // The protobuf has it as a uint64\n        const backoff = this.opts.pruneBackoff / 1000;\n        if (!doPX) {\n            return {\n                topicID: topic,\n                peers: [],\n                backoff: backoff\n            };\n        }\n        // select peers for Peer eXchange\n        const peers = this.getRandomGossipPeers(topic, this.opts.prunePeers, (xid) => {\n            return xid !== id && this.score.score(xid) >= 0;\n        });\n        const px = await Promise.all(Array.from(peers).map(async (peerId) => {\n            // see if we have a signed record to send back; if we don't, just send\n            // the peer ID and let the pruned peer find them in the DHT -- we can't trust\n            // unsigned address records through PX anyways\n            // Finding signed records in the DHT is not supported at the time of writing in js-libp2p\n            const id = peerIdFromString(peerId);\n            return {\n                peerID: id.toBytes(),\n                signedPeerRecord: await this.components.peerStore.addressBook.getRawEnvelope(id)\n            };\n        }));\n        return {\n            topicID: topic,\n            peers: px,\n            backoff: backoff\n        };\n    }\n    /**\n     * Maintains the mesh and fanout maps in gossipsub.\n     */\n    async heartbeat() {\n        const { D, Dlo, Dhi, Dscore, Dout, fanoutTTL } = this.opts;\n        this.heartbeatTicks++;\n        // cache scores throught the heartbeat\n        const scores = new Map();\n        const getScore = (id) => {\n            let s = scores.get(id);\n            if (s === undefined) {\n                s = this.score.score(id);\n                scores.set(id, s);\n            }\n            return s;\n        };\n        // peer id => topic[]\n        const tograft = new Map();\n        // peer id => topic[]\n        const toprune = new Map();\n        // peer id => don't px\n        const noPX = new Map();\n        // clean up expired backoffs\n        this.clearBackoff();\n        // clean up peerhave/iasked counters\n        this.peerhave.clear();\n        this.metrics?.cacheSize.set({ cache: 'iasked' }, this.iasked.size);\n        this.iasked.clear();\n        // apply IWANT request penalties\n        this.applyIwantPenalties();\n        // ensure direct peers are connected\n        if (this.heartbeatTicks % this.opts.directConnectTicks === 0) {\n            // we only do this every few ticks to allow pending connections to complete and account for restarts/downtime\n            await this.directConnect();\n        }\n        // EXTRA: Prune caches\n        this.fastMsgIdCache?.prune();\n        this.seenCache.prune();\n        this.gossipTracer.prune();\n        this.publishedMessageIds.prune();\n        /**\n         * Instead of calling getRandomGossipPeers multiple times to:\n         *   + get more mesh peers\n         *   + more outbound peers\n         *   + oppportunistic grafting\n         *   + emitGossip\n         *\n         * We want to loop through the topic peers only a single time and prepare gossip peers for all topics to improve the performance\n         */\n        const peersToGossipByTopic = new Map();\n        // maintain the mesh for topics we have joined\n        this.mesh.forEach((peers, topic) => {\n            const peersInTopic = this.topics.get(topic);\n            const candidateMeshPeers = new Set();\n            const peersToGossip = new Set();\n            peersToGossipByTopic.set(topic, peersToGossip);\n            if (peersInTopic) {\n                const shuffledPeers = shuffle(Array.from(peersInTopic));\n                const backoff = this.backoff.get(topic);\n                for (const id of shuffledPeers) {\n                    const peerStreams = this.streamsOutbound.get(id);\n                    if (peerStreams &&\n                        this.multicodecs.includes(peerStreams.protocol) &&\n                        !peers.has(id) &&\n                        !this.direct.has(id)) {\n                        const score = getScore(id);\n                        if ((!backoff || !backoff.has(id)) && score >= 0)\n                            candidateMeshPeers.add(id);\n                        // instead of having to find gossip peers after heartbeat which require another loop\n                        // we prepare peers to gossip in a topic within heartbeat to improve performance\n                        if (score >= this.opts.scoreThresholds.gossipThreshold)\n                            peersToGossip.add(id);\n                    }\n                }\n            }\n            // prune/graft helper functions (defined per topic)\n            const prunePeer = (id, reason) => {\n                this.log('HEARTBEAT: Remove mesh link to %s in %s', id, topic);\n                // no need to update peer score here as we do it in makePrune\n                // add prune backoff record\n                this.addBackoff(id, topic);\n                // remove peer from mesh\n                peers.delete(id);\n                // after pruning a peer from mesh, we want to gossip topic to it if its score meet the gossip threshold\n                if (getScore(id) >= this.opts.scoreThresholds.gossipThreshold)\n                    peersToGossip.add(id);\n                this.metrics?.onRemoveFromMesh(topic, reason, 1);\n                // add to toprune\n                const topics = toprune.get(id);\n                if (!topics) {\n                    toprune.set(id, [topic]);\n                }\n                else {\n                    topics.push(topic);\n                }\n            };\n            const graftPeer = (id, reason) => {\n                this.log('HEARTBEAT: Add mesh link to %s in %s', id, topic);\n                // update peer score\n                this.score.graft(id, topic);\n                // add peer to mesh\n                peers.add(id);\n                // when we add a new mesh peer, we don't want to gossip messages to it\n                peersToGossip.delete(id);\n                this.metrics?.onAddToMesh(topic, reason, 1);\n                // add to tograft\n                const topics = tograft.get(id);\n                if (!topics) {\n                    tograft.set(id, [topic]);\n                }\n                else {\n                    topics.push(topic);\n                }\n            };\n            // drop all peers with negative score, without PX\n            peers.forEach((id) => {\n                const score = getScore(id);\n                // Record the score\n                if (score < 0) {\n                    this.log('HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s', id, score, topic);\n                    prunePeer(id, ChurnReason.BadScore);\n                    noPX.set(id, true);\n                }\n            });\n            // do we have enough peers?\n            if (peers.size < Dlo) {\n                const ineed = D - peers.size;\n                // slice up to first `ineed` items and remove them from candidateMeshPeers\n                // same to `const newMeshPeers = candidateMeshPeers.slice(0, ineed)`\n                const newMeshPeers = removeFirstNItemsFromSet(candidateMeshPeers, ineed);\n                newMeshPeers.forEach((p) => {\n                    graftPeer(p, InclusionReason.NotEnough);\n                });\n            }\n            // do we have to many peers?\n            if (peers.size > Dhi) {\n                let peersArray = Array.from(peers);\n                // sort by score\n                peersArray.sort((a, b) => getScore(b) - getScore(a));\n                // We keep the first D_score peers by score and the remaining up to D randomly\n                // under the constraint that we keep D_out peers in the mesh (if we have that many)\n                peersArray = peersArray.slice(0, Dscore).concat(shuffle(peersArray.slice(Dscore)));\n                // count the outbound peers we are keeping\n                let outbound = 0;\n                peersArray.slice(0, D).forEach((p) => {\n                    if (this.outbound.get(p)) {\n                        outbound++;\n                    }\n                });\n                // if it's less than D_out, bubble up some outbound peers from the random selection\n                if (outbound < Dout) {\n                    const rotate = (i) => {\n                        // rotate the peersArray to the right and put the ith peer in the front\n                        const p = peersArray[i];\n                        for (let j = i; j > 0; j--) {\n                            peersArray[j] = peersArray[j - 1];\n                        }\n                        peersArray[0] = p;\n                    };\n                    // first bubble up all outbound peers already in the selection to the front\n                    if (outbound > 0) {\n                        let ihave = outbound;\n                        for (let i = 1; i < D && ihave > 0; i++) {\n                            if (this.outbound.get(peersArray[i])) {\n                                rotate(i);\n                                ihave--;\n                            }\n                        }\n                    }\n                    // now bubble up enough outbound peers outside the selection to the front\n                    let ineed = D - outbound;\n                    for (let i = D; i < peersArray.length && ineed > 0; i++) {\n                        if (this.outbound.get(peersArray[i])) {\n                            rotate(i);\n                            ineed--;\n                        }\n                    }\n                }\n                // prune the excess peers\n                peersArray.slice(D).forEach((p) => {\n                    prunePeer(p, ChurnReason.Excess);\n                });\n            }\n            // do we have enough outbound peers?\n            if (peers.size >= Dlo) {\n                // count the outbound peers we have\n                let outbound = 0;\n                peers.forEach((p) => {\n                    if (this.outbound.get(p)) {\n                        outbound++;\n                    }\n                });\n                // if it's less than D_out, select some peers with outbound connections and graft them\n                if (outbound < Dout) {\n                    const ineed = Dout - outbound;\n                    const newMeshPeers = removeItemsFromSet(candidateMeshPeers, ineed, (id) => this.outbound.get(id) === true);\n                    newMeshPeers.forEach((p) => {\n                        graftPeer(p, InclusionReason.Outbound);\n                    });\n                }\n            }\n            // should we try to improve the mesh with opportunistic grafting?\n            if (this.heartbeatTicks % this.opts.opportunisticGraftTicks === 0 && peers.size > 1) {\n                // Opportunistic grafting works as follows: we check the median score of peers in the\n                // mesh; if this score is below the opportunisticGraftThreshold, we select a few peers at\n                // random with score over the median.\n                // The intention is to (slowly) improve an underperforming mesh by introducing good\n                // scoring peers that may have been gossiping at us. This allows us to get out of sticky\n                // situations where we are stuck with poor peers and also recover from churn of good peers.\n                // now compute the median peer score in the mesh\n                const peersList = Array.from(peers).sort((a, b) => getScore(a) - getScore(b));\n                const medianIndex = Math.floor(peers.size / 2);\n                const medianScore = getScore(peersList[medianIndex]);\n                // if the median score is below the threshold, select a better peer (if any) and GRAFT\n                if (medianScore < this.opts.scoreThresholds.opportunisticGraftThreshold) {\n                    const ineed = this.opts.opportunisticGraftPeers;\n                    const newMeshPeers = removeItemsFromSet(candidateMeshPeers, ineed, (id) => getScore(id) > medianScore);\n                    for (const id of newMeshPeers) {\n                        this.log('HEARTBEAT: Opportunistically graft peer %s on topic %s', id, topic);\n                        graftPeer(id, InclusionReason.Opportunistic);\n                    }\n                }\n            }\n        });\n        // expire fanout for topics we haven't published to in a while\n        const now = Date.now();\n        this.fanoutLastpub.forEach((lastpb, topic) => {\n            if (lastpb + fanoutTTL < now) {\n                this.fanout.delete(topic);\n                this.fanoutLastpub.delete(topic);\n            }\n        });\n        // maintain our fanout for topics we are publishing but we have not joined\n        this.fanout.forEach((fanoutPeers, topic) => {\n            // checks whether our peers are still in the topic and have a score above the publish threshold\n            const topicPeers = this.topics.get(topic);\n            fanoutPeers.forEach((id) => {\n                if (!topicPeers.has(id) || getScore(id) < this.opts.scoreThresholds.publishThreshold) {\n                    fanoutPeers.delete(id);\n                }\n            });\n            const peersInTopic = this.topics.get(topic);\n            const candidateFanoutPeers = [];\n            // the fanout map contains topics to which we are not subscribed.\n            const peersToGossip = new Set();\n            peersToGossipByTopic.set(topic, peersToGossip);\n            if (peersInTopic) {\n                const shuffledPeers = shuffle(Array.from(peersInTopic));\n                for (const id of shuffledPeers) {\n                    const peerStreams = this.streamsOutbound.get(id);\n                    if (peerStreams &&\n                        this.multicodecs.includes(peerStreams.protocol) &&\n                        !fanoutPeers.has(id) &&\n                        !this.direct.has(id)) {\n                        const score = getScore(id);\n                        if (score >= this.opts.scoreThresholds.publishThreshold)\n                            candidateFanoutPeers.push(id);\n                        // instead of having to find gossip peers after heartbeat which require another loop\n                        // we prepare peers to gossip in a topic within heartbeat to improve performance\n                        if (score >= this.opts.scoreThresholds.gossipThreshold)\n                            peersToGossip.add(id);\n                    }\n                }\n            }\n            // do we need more peers?\n            if (fanoutPeers.size < D) {\n                const ineed = D - fanoutPeers.size;\n                candidateFanoutPeers.slice(0, ineed).forEach((id) => {\n                    fanoutPeers.add(id);\n                    peersToGossip?.delete(id);\n                });\n            }\n        });\n        this.emitGossip(peersToGossipByTopic);\n        // send coalesced GRAFT/PRUNE messages (will piggyback gossip)\n        await this.sendGraftPrune(tograft, toprune, noPX);\n        // flush pending gossip that wasn't piggybacked above\n        this.flush();\n        // advance the message history window\n        this.mcache.shift();\n        this.dispatchEvent(new CustomEvent('gossipsub:heartbeat'));\n    }\n    /**\n     * Given a topic, returns up to count peers subscribed to that topic\n     * that pass an optional filter function\n     *\n     * @param topic\n     * @param count\n     * @param filter - a function to filter acceptable peers\n     */\n    getRandomGossipPeers(topic, count, filter = () => true) {\n        const peersInTopic = this.topics.get(topic);\n        if (!peersInTopic) {\n            return new Set();\n        }\n        // Adds all peers using our protocol\n        // that also pass the filter function\n        let peers = [];\n        peersInTopic.forEach((id) => {\n            const peerStreams = this.streamsOutbound.get(id);\n            if (!peerStreams) {\n                return;\n            }\n            if (this.multicodecs.includes(peerStreams.protocol) && filter(id)) {\n                peers.push(id);\n            }\n        });\n        // Pseudo-randomly shuffles peers\n        peers = shuffle(peers);\n        if (count > 0 && peers.length > count) {\n            peers = peers.slice(0, count);\n        }\n        return new Set(peers);\n    }\n    onScrapeMetrics(metrics) {\n        /* Data structure sizes */\n        metrics.mcacheSize.set(this.mcache.size);\n        metrics.mcacheNotValidatedCount.set(this.mcache.notValidatedCount);\n        // Arbitrary size\n        metrics.cacheSize.set({ cache: 'direct' }, this.direct.size);\n        metrics.cacheSize.set({ cache: 'seenCache' }, this.seenCache.size);\n        metrics.cacheSize.set({ cache: 'fastMsgIdCache' }, this.fastMsgIdCache?.size ?? 0);\n        metrics.cacheSize.set({ cache: 'publishedMessageIds' }, this.publishedMessageIds.size);\n        metrics.cacheSize.set({ cache: 'mcache' }, this.mcache.size);\n        metrics.cacheSize.set({ cache: 'score' }, this.score.size);\n        metrics.cacheSize.set({ cache: 'gossipTracer.promises' }, this.gossipTracer.size);\n        metrics.cacheSize.set({ cache: 'gossipTracer.requests' }, this.gossipTracer.requestMsByMsgSize);\n        // Bounded by topic\n        metrics.cacheSize.set({ cache: 'topics' }, this.topics.size);\n        metrics.cacheSize.set({ cache: 'subscriptions' }, this.subscriptions.size);\n        metrics.cacheSize.set({ cache: 'mesh' }, this.mesh.size);\n        metrics.cacheSize.set({ cache: 'fanout' }, this.fanout.size);\n        // Bounded by peer\n        metrics.cacheSize.set({ cache: 'peers' }, this.peers.size);\n        metrics.cacheSize.set({ cache: 'streamsOutbound' }, this.streamsOutbound.size);\n        metrics.cacheSize.set({ cache: 'streamsInbound' }, this.streamsInbound.size);\n        metrics.cacheSize.set({ cache: 'acceptFromWhitelist' }, this.acceptFromWhitelist.size);\n        metrics.cacheSize.set({ cache: 'gossip' }, this.gossip.size);\n        metrics.cacheSize.set({ cache: 'control' }, this.control.size);\n        metrics.cacheSize.set({ cache: 'peerhave' }, this.peerhave.size);\n        metrics.cacheSize.set({ cache: 'outbound' }, this.outbound.size);\n        // 2D nested data structure\n        let backoffSize = 0;\n        for (const backoff of this.backoff.values()) {\n            backoffSize += backoff.size;\n        }\n        metrics.cacheSize.set({ cache: 'backoff' }, backoffSize);\n        // Peer counts\n        for (const [topicStr, peers] of this.topics) {\n            metrics.topicPeersCount.set({ topicStr }, peers.size);\n        }\n        for (const [topicStr, peers] of this.mesh) {\n            metrics.meshPeerCounts.set({ topicStr }, peers.size);\n        }\n        // Peer scores\n        const scores = [];\n        const scoreByPeer = new Map();\n        metrics.behaviourPenalty.reset();\n        for (const peerIdStr of this.peers.keys()) {\n            const score = this.score.score(peerIdStr);\n            scores.push(score);\n            scoreByPeer.set(peerIdStr, score);\n            metrics.behaviourPenalty.observe(this.score.peerStats.get(peerIdStr)?.behaviourPenalty ?? 0);\n        }\n        metrics.registerScores(scores, this.opts.scoreThresholds);\n        // Breakdown score per mesh topicLabel\n        metrics.registerScorePerMesh(this.mesh, scoreByPeer);\n        // Breakdown on each score weight\n        const sw = computeAllPeersScoreWeights(this.peers.keys(), this.score.peerStats, this.score.params, this.score.peerIPs, metrics.topicStrToLabel);\n        metrics.registerScoreWeights(sw);\n    }\n}\nGossipSub.multicodec = constants.GossipsubIDv11;\nexport function gossipsub(init = {}) {\n    return (components) => new GossipSub(components, init);\n}\n//# sourceMappingURL=index.js.map","import { unmarshalPrivateKey } from '@libp2p/crypto/keys';\nimport { StrictSign, StrictNoSign } from '@libp2p/interface-pubsub';\nimport { PublishConfigType } from '../types.js';\n/**\n * Prepare a PublishConfig object from a PeerId.\n */\nexport async function getPublishConfigFromPeerId(signaturePolicy, peerId) {\n    switch (signaturePolicy) {\n        case StrictSign: {\n            if (!peerId) {\n                throw Error('Must provide PeerId');\n            }\n            if (peerId.privateKey == null) {\n                throw Error('Cannot sign message, no private key present');\n            }\n            if (peerId.publicKey == null) {\n                throw Error('Cannot sign message, no public key present');\n            }\n            // Transform privateKey once at initialization time instead of once per message\n            const privateKey = await unmarshalPrivateKey(peerId.privateKey);\n            return {\n                type: PublishConfigType.Signing,\n                author: peerId,\n                key: peerId.publicKey,\n                privateKey\n            };\n        }\n        case StrictNoSign:\n            return {\n                type: PublishConfigType.Anonymous\n            };\n        default:\n            throw new Error(`Unknown signature policy \"${signaturePolicy}\"`);\n    }\n}\n//# sourceMappingURL=publishConfig.js.map","import { gossipsub } from '@chainsafe/libp2p-gossipsub'\n\n/** @typedef {import('@libp2p/interface-pubsub').PubSub} PubSub */\n\n/** @type {() => Record<string, (components: any) => PubSub>}>} */\nexport const routers = () => ({\n  gossipsub: gossipsub({\n    fallbackToFloodsub: true,\n    emitSelf: true,\n    maxInboundStreams: 64,\n    maxOutboundStreams: 128\n  })\n})\n","import { webRTCStar } from '@libp2p/webrtc-star'\n\nexport function libp2pConfig () {\n  const webRtcStar = webRTCStar()\n\n  /** @type {import('libp2p').Libp2pOptions} */\n  const options = {\n    transports: [\n      webRtcStar.transport\n    ],\n    peerDiscovery: [\n      webRtcStar.discovery\n    ],\n    connectionManager: {\n      maxParallelDials: 150, // 150 total parallel multiaddr dials\n      maxDialsPerPeer: 4, // Allow 4 multiaddrs to be dialed per peer in parallel\n      dialTimeout: 10e3, // 10 second dial timeout per peer dial\n      autoDial: true\n    },\n    nat: {\n      enabled: false\n    }\n  }\n\n  return options\n}\n","/* eslint-env browser */\n\nimport HTTP from 'ipfs-utils/src/http.js'\nimport { logger } from '@libp2p/logger'\nimport PQueue from 'p-queue'\n\nconst log = logger('ipfs:preload')\n\n// @ts-expect-error PQueue@6 is broken\nconst Queue = PQueue.default ? PQueue.default : PQueue\n\n// browsers limit concurrent connections per host,\n// we don't want preload calls to exhaust the limit (~6)\nconst httpQueue = new Queue({ concurrency: 4 })\n\n/**\n * @param {string} url\n * @param {import('ipfs-core-types/src/utils').AbortOptions} options\n */\nexport function preload (url, options = {}) {\n  log(url)\n\n  return httpQueue.add(async () => {\n    const res = await HTTP.post(url, { signal: options.signal })\n\n    // @ts-expect-error\n    const reader = res.body.getReader()\n\n    try {\n      while (true) {\n        const { done } = await reader.read()\n        if (done) return\n        // Read to completion but do not cache\n      }\n    } finally {\n      reader.releaseLock()\n    }\n  })\n}\n","import errCode from 'err-code'\n\n/**\n * @param {Error} [err]\n */\nexport function dbOpenFailedError (err) {\n  err = err || new Error('Cannot open database')\n  return errCode(err, 'ERR_DB_OPEN_FAILED')\n}\n\n/**\n * @param {Error} [err]\n */\nexport function dbDeleteFailedError (err) {\n  err = err || new Error('Delete failed')\n  return errCode(err, 'ERR_DB_DELETE_FAILED')\n}\n\n/**\n * @param {Error} [err]\n */\nexport function dbWriteFailedError (err) {\n  err = err || new Error('Write failed')\n  return errCode(err, 'ERR_DB_WRITE_FAILED')\n}\n\n/**\n * @param {Error} [err]\n */\nexport function notFoundError (err) {\n  err = err || new Error('Not Found')\n  return errCode(err, 'ERR_NOT_FOUND')\n}\n\n/**\n * @param {Error} [err]\n */\nexport function abortedError (err) {\n  err = err || new Error('Aborted')\n  return errCode(err, 'ERR_ABORTED')\n}\n","import { Key } from 'interface-datastore/key'\n// @ts-expect-error readme is unused\n// eslint-disable-next-line no-unused-vars\nimport readme from './shard-readme.js'\n\n/**\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('./types').Shard} Shard\n */\n\nexport const PREFIX = '/repo/flatfs/shard/'\nexport const SHARDING_FN = 'SHARDING'\nexport const README_FN = '_README'\n\n/**\n * @implements {Shard}\n */\nexport class ShardBase {\n  /**\n   * @param {any} param\n   */\n  constructor (param) {\n    this.param = param\n    this.name = 'base'\n    this._padding = ''\n  }\n\n  /**\n   * @param {string} s\n   */\n  fun (s) {\n    return 'implement me'\n  }\n\n  toString () {\n    return `${PREFIX}v1/${this.name}/${this.param}`\n  }\n}\n/**\n * @implements {Shard}\n */\nexport class Prefix extends ShardBase {\n  /**\n   * @param {number} prefixLen\n   */\n  constructor (prefixLen) {\n    super(prefixLen)\n    this._padding = ''.padStart(prefixLen, '_')\n    this.name = 'prefix'\n  }\n\n  /**\n   * @param {string} noslash\n   */\n  fun (noslash) {\n    return (noslash + this._padding).slice(0, this.param)\n  }\n}\n\nexport class Suffix extends ShardBase {\n  /**\n   * @param {number} suffixLen\n   */\n  constructor (suffixLen) {\n    super(suffixLen)\n    this._padding = ''.padStart(suffixLen, '_')\n    this.name = 'suffix'\n  }\n\n  /**\n   * @param {string} noslash\n   */\n  fun (noslash) {\n    const s = this._padding + noslash\n    return s.slice(s.length - this.param)\n  }\n}\n\nexport class NextToLast extends ShardBase {\n  /**\n   * @param {number} suffixLen\n   */\n  constructor (suffixLen) {\n    super(suffixLen)\n    this._padding = ''.padStart(suffixLen + 1, '_')\n    this.name = 'next-to-last'\n  }\n\n  /**\n   * @param {string} noslash\n   */\n  fun (noslash) {\n    const s = this._padding + noslash\n    const offset = s.length - this.param - 1\n    return s.slice(offset, offset + this.param)\n  }\n}\n\n/**\n * Convert a given string to the matching sharding function.\n *\n * @param {string} str\n * @returns {Shard}\n */\nexport function parseShardFun (str) {\n  str = str.trim()\n\n  if (str.length === 0) {\n    throw new Error('empty shard string')\n  }\n\n  if (!str.startsWith(PREFIX)) {\n    throw new Error(`invalid or no path prefix: ${str}`)\n  }\n\n  const parts = str.slice(PREFIX.length).split('/')\n  const version = parts[0]\n\n  if (version !== 'v1') {\n    throw new Error(`expect 'v1' version, got '${version}'`)\n  }\n\n  const name = parts[1]\n\n  if (!parts[2]) {\n    throw new Error('missing param')\n  }\n\n  const param = parseInt(parts[2], 10)\n\n  switch (name) {\n    case 'prefix':\n      return new Prefix(param)\n    case 'suffix':\n      return new Suffix(param)\n    case 'next-to-last':\n      return new NextToLast(param)\n    default:\n      throw new Error(`unkown sharding function: ${name}`)\n  }\n}\n\n/**\n * @param {string | Uint8Array} path\n * @param {Datastore} store\n */\nexport const readShardFun = async (path, store) => {\n  const key = new Key(path).child(new Key(SHARDING_FN))\n  // @ts-ignore\n  const get = typeof store.getRaw === 'function' ? store.getRaw.bind(store) : store.get.bind(store)\n  const res = await get(key)\n  return parseShardFun(new TextDecoder().decode(res || '').trim())\n}\n\nexport { default as readme } from './shard-readme.js'\n","\nimport all from 'it-all'\n\n/**\n * Collect all values from the iterable and sort them using\n * the passed sorter function\n *\n * @template T\n * @param {AsyncIterable<T> | Iterable<T>} iterable\n * @param {(a: T, b: T) => -1 | 0 | 1} sorter\n * @returns {AsyncIterable<T>}\n */\nexport const sortAll = (iterable, sorter) => {\n  return (async function * () {\n    const values = await all(iterable)\n    yield * values.sort(sorter)\n  })()\n}\n\n/**\n * @param {string} s\n * @param {string} r\n */\nexport const replaceStartWith = (s, r) => {\n  const matcher = new RegExp('^' + r)\n  return s.replace(matcher, '')\n}\n","/**\n * Collects all values from an (async) iterable and returns them as an array\n */\nexport default async function all(source) {\n    const arr = [];\n    for await (const entry of source) {\n        arr.push(entry);\n    }\n    return arr;\n}\n//# sourceMappingURL=index.js.map","import { sortAll } from './utils.js'\nimport drain from 'it-drain'\nimport filter from 'it-filter'\nimport take from 'it-take'\n\n/**\n * @typedef {import('interface-store').Options} Options\n * @typedef {import('interface-datastore').Key} Key\n * @typedef {import('interface-datastore').Pair} Pair\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('interface-datastore').Query} Query\n * @typedef {import('interface-datastore').KeyQuery} KeyQuery\n * @typedef {import('interface-datastore').Batch} Batch\n */\n\n/**\n * @template O\n * @typedef {import('interface-store').AwaitIterable<O>} AwaitIterable\n */\n\n/**\n * @implements {Datastore}\n */\nexport class BaseDatastore {\n  /**\n   * @returns {Promise<void>}\n   */\n  open () {\n    return Promise.reject(new Error('.open is not implemented'))\n  }\n\n  /**\n   * @returns {Promise<void>}\n   */\n  close () {\n    return Promise.reject(new Error('.close is not implemented'))\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Uint8Array} val\n   * @param {Options} [options]\n   * @returns {Promise<void>}\n   */\n  put (key, val, options) {\n    return Promise.reject(new Error('.put is not implemented'))\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   * @returns {Promise<Uint8Array>}\n   */\n  get (key, options) {\n    return Promise.reject(new Error('.get is not implemented'))\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   * @returns {Promise<boolean>}\n   */\n  has (key, options) {\n    return Promise.reject(new Error('.has is not implemented'))\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   * @returns {Promise<void>}\n   */\n  delete (key, options) {\n    return Promise.reject(new Error('.delete is not implemented'))\n  }\n\n  /**\n   * @param {AwaitIterable<Pair>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Pair>}\n   */\n  async * putMany (source, options = {}) {\n    for await (const { key, value } of source) {\n      await this.put(key, value, options)\n      yield { key, value }\n    }\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Uint8Array>}\n   */\n  async * getMany (source, options = {}) {\n    for await (const key of source) {\n      yield this.get(key, options)\n    }\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Key>}\n   */\n  async * deleteMany (source, options = {}) {\n    for await (const key of source) {\n      await this.delete(key, options)\n      yield key\n    }\n  }\n\n  /**\n   * @returns {Batch}\n   */\n  batch () {\n    /** @type {Pair[]} */\n    let puts = []\n    /** @type {Key[]} */\n    let dels = []\n\n    return {\n      put (key, value) {\n        puts.push({ key, value })\n      },\n\n      delete (key) {\n        dels.push(key)\n      },\n      commit: async (options) => {\n        await drain(this.putMany(puts, options))\n        puts = []\n        await drain(this.deleteMany(dels, options))\n        dels = []\n      }\n    }\n  }\n\n  /**\n   * Extending classes should override `query` or implement this method\n   *\n   * @param {Query} q\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Pair>}\n   */\n  // eslint-disable-next-line require-yield\n  async * _all (q, options) {\n    throw new Error('._all is not implemented')\n  }\n\n  /**\n   * Extending classes should override `queryKeys` or implement this method\n   *\n   * @param {KeyQuery} q\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Key>}\n   */\n  // eslint-disable-next-line require-yield\n  async * _allKeys (q, options) {\n    throw new Error('._allKeys is not implemented')\n  }\n\n  /**\n   * @param {Query} q\n   * @param {Options} [options]\n   */\n  query (q, options) {\n    let it = this._all(q, options)\n\n    if (q.prefix != null) {\n      it = filter(it, (e) =>\n        e.key.toString().startsWith(/** @type {string} */ (q.prefix))\n      )\n    }\n\n    if (Array.isArray(q.filters)) {\n      it = q.filters.reduce((it, f) => filter(it, f), it)\n    }\n\n    if (Array.isArray(q.orders)) {\n      it = q.orders.reduce((it, f) => sortAll(it, f), it)\n    }\n\n    if (q.offset != null) {\n      let i = 0\n      it = filter(it, () => i++ >= /** @type {number} */ (q.offset))\n    }\n\n    if (q.limit != null) {\n      it = take(it, q.limit)\n    }\n\n    return it\n  }\n\n  /**\n   * @param {KeyQuery} q\n   * @param {Options} [options]\n   */\n  queryKeys (q, options) {\n    let it = this._allKeys(q, options)\n\n    if (q.prefix != null) {\n      it = filter(it, (key) =>\n        key.toString().startsWith(/** @type {string} */ (q.prefix))\n      )\n    }\n\n    if (Array.isArray(q.filters)) {\n      it = q.filters.reduce((it, f) => filter(it, f), it)\n    }\n\n    if (Array.isArray(q.orders)) {\n      it = q.orders.reduce((it, f) => sortAll(it, f), it)\n    }\n\n    if (q.offset != null) {\n      let i = 0\n      it = filter(it, () => i++ >= /** @type {number} */ (q.offset))\n    }\n\n    if (q.limit != null) {\n      it = take(it, q.limit)\n    }\n\n    return it\n  }\n}\n","import { Key } from 'interface-datastore'\nimport {\n  readShardFun,\n  SHARDING_FN,\n  README_FN,\n  readme\n} from './shard.js'\nimport { BaseDatastore } from './base.js'\nimport { KeyTransformDatastore } from './keytransform.js'\nimport * as Errors from './errors.js'\n\nconst shardKey = new Key(SHARDING_FN)\nconst shardReadmeKey = new Key(README_FN)\n/**\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('interface-datastore').Options} Options\n * @typedef {import('interface-datastore').Batch} Batch\n * @typedef {import('interface-datastore').Query} Query\n * @typedef {import('interface-datastore').QueryFilter} QueryFilter\n * @typedef {import('interface-datastore').QueryOrder} QueryOrder\n * @typedef {import('interface-datastore').KeyQuery} KeyQuery\n * @typedef {import('interface-datastore').KeyQueryFilter} KeyQueryFilter\n * @typedef {import('interface-datastore').KeyQueryOrder} KeyQueryOrder\n * @typedef {import('interface-datastore').Pair} Pair\n * @typedef {import('./types').Shard} Shard\n *\n */\n/**\n * @template TValue\n * @typedef {import('interface-store').Await<TValue> } Await\n */\n\n/**\n * @template TEntry\n * @typedef {import('interface-store').AwaitIterable<TEntry>} AwaitIterable\n */\n\n/**\n * Backend independent abstraction of go-ds-flatfs.\n *\n * Wraps another datastore such that all values are stored\n * sharded according to the given sharding function.\n */\nexport class ShardingDatastore extends BaseDatastore {\n  /**\n   * @param {Datastore} store\n   * @param {Shard} shard\n   */\n  constructor (store, shard) {\n    super()\n\n    this.child = new KeyTransformDatastore(store, {\n      convert: this._convertKey.bind(this),\n      invert: this._invertKey.bind(this)\n    })\n    this.shard = shard\n  }\n\n  async open () {\n    await this.child.open()\n\n    this.shard = await ShardingDatastore.create(this.child, this.shard)\n  }\n\n  /**\n   * @param {Key} key\n   */\n  _convertKey (key) {\n    const s = key.toString()\n    if (s === shardKey.toString() || s === shardReadmeKey.toString()) {\n      return key\n    }\n\n    const parent = new Key(this.shard.fun(s))\n    return parent.child(key)\n  }\n\n  /**\n   * @param {Key} key\n   */\n  _invertKey (key) {\n    const s = key.toString()\n    if (s === shardKey.toString() || s === shardReadmeKey.toString()) {\n      return key\n    }\n    return Key.withNamespaces(key.list().slice(1))\n  }\n\n  /**\n   * @deprecated\n   * @param {Datastore} store\n   * @param {Shard} shard\n   */\n  static async createOrOpen (store, shard) {\n    try {\n      await ShardingDatastore.create(store, shard)\n    } catch (/** @type {any} */ err) {\n      if (err && err.message !== 'datastore exists') throw err\n    }\n    return ShardingDatastore.open(store)\n  }\n\n  /**\n   * @deprecated\n   * @param {Datastore} store\n   */\n  static async open (store) {\n    const shard = await readShardFun('/', store)\n    return new ShardingDatastore(store, shard)\n  }\n\n  /**\n   * @param {Datastore} store\n   * @param {Shard} shard\n   */\n  static async create (store, shard) {\n    const hasShard = await store.has(shardKey)\n    if (!hasShard && !shard) {\n      throw Errors.dbOpenFailedError(Error('Shard is required when datastore doesn\\'t have a shard key already.'))\n    }\n    if (!hasShard) {\n      // @ts-ignore i have no idea what putRaw is or saw any implementation\n      const put = typeof store.putRaw === 'function' ? store.putRaw.bind(store) : store.put.bind(store)\n      await Promise.all([\n        put(shardKey, new TextEncoder().encode(shard.toString() + '\\n')),\n        put(shardReadmeKey, new TextEncoder().encode(readme))\n      ])\n\n      return shard\n    }\n\n    // test shards\n    const diskShard = await readShardFun('/', store)\n    const a = (diskShard || '').toString()\n    const b = shard.toString()\n    if (a !== b) {\n      throw new Error(`specified fun ${b} does not match repo shard fun ${a}`)\n    }\n    return diskShard\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Uint8Array} val\n   * @param {Options} [options]\n   */\n  put (key, val, options) {\n    return this.child.put(key, val, options)\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  get (key, options) {\n    return this.child.get(key, options)\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  has (key, options) {\n    return this.child.has(key, options)\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  delete (key, options) {\n    return this.child.delete(key, options)\n  }\n\n  /**\n   * @param {AwaitIterable<Pair>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Pair>}\n   */\n  async * putMany (source, options = {}) {\n    yield * this.child.putMany(source, options)\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Uint8Array>}\n   */\n  async * getMany (source, options = {}) {\n    yield * this.child.getMany(source, options)\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Key>}\n   */\n  async * deleteMany (source, options = {}) {\n    yield * this.child.deleteMany(source, options)\n  }\n\n  batch () {\n    return this.child.batch()\n  }\n\n  /**\n   * @param {Query} q\n   * @param {Options} [options]\n   */\n  query (q, options) {\n    /** @type {Query} */\n    const tq = {\n      ...q,\n      filters: [\n        /** @type {QueryFilter} */\n        ({ key }) => key.toString() !== shardKey.toString(),\n        /** @type {QueryFilter} */\n        ({ key }) => key.toString() !== shardReadmeKey.toString()\n      ].concat(q.filters || [])\n    }\n\n    return this.child.query(tq, options)\n  }\n\n  /**\n   * @param {KeyQuery} q\n   * @param {Options} [options]\n   */\n  queryKeys (q, options) {\n    /** @type {KeyQuery} */\n    const tq = {\n      ...q,\n      filters: [\n        /** @type {KeyQueryFilter} */\n        key => key.toString() !== shardKey.toString(),\n        /** @type {KeyQueryFilter} */\n        key => key.toString() !== shardReadmeKey.toString()\n      ].concat(q.filters || [])\n    }\n\n    return this.child.queryKeys(tq, options)\n  }\n\n  close () {\n    return this.child.close()\n  }\n}\n","import { BaseDatastore } from './base.js'\nimport * as Errors from './errors.js'\nimport { logger } from '@libp2p/logger'\nimport { pushable } from 'it-pushable'\nimport drain from 'it-drain'\n\nconst log = logger('datastore:core:tiered')\n\n/**\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('interface-datastore').Options} Options\n * @typedef {import('interface-datastore').Batch} Batch\n * @typedef {import('interface-datastore').Query} Query\n * @typedef {import('interface-datastore').KeyQuery} KeyQuery\n * @typedef {import('interface-datastore').Key} Key\n * @typedef {import('interface-datastore').Pair} Pair\n */\n\n/**\n * @template TEntry\n * @typedef {import('interface-store').AwaitIterable<TEntry>} AwaitIterable\n */\n\n/**\n * A datastore that can combine multiple stores. Puts and deletes\n * will write through to all datastores. Has and get will\n * try each store sequentially. Query will always try the\n * last one first.\n *\n */\nexport class TieredDatastore extends BaseDatastore {\n  /**\n   * @param {Datastore[]} stores\n   */\n  constructor (stores) {\n    super()\n\n    this.stores = stores.slice()\n  }\n\n  async open () {\n    try {\n      await Promise.all(this.stores.map((store) => store.open()))\n    } catch (/** @type {any} */ err) {\n      throw Errors.dbOpenFailedError(err)\n    }\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Uint8Array} value\n   * @param {Options} [options]\n   */\n  async put (key, value, options) {\n    try {\n      await Promise.all(this.stores.map(store => store.put(key, value, options)))\n    } catch (/** @type {any} */ err) {\n      throw Errors.dbWriteFailedError(err)\n    }\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  async get (key, options) {\n    for (const store of this.stores) {\n      try {\n        const res = await store.get(key, options)\n        if (res) return res\n      } catch (err) {\n        log.error(err)\n      }\n    }\n    throw Errors.notFoundError()\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  async has (key, options) {\n    for (const s of this.stores) {\n      if (await s.has(key, options)) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  async delete (key, options) {\n    try {\n      await Promise.all(this.stores.map(store => store.delete(key, options)))\n    } catch (/** @type {any} */ err) {\n      throw Errors.dbDeleteFailedError(err)\n    }\n  }\n\n  /**\n   * @param {AwaitIterable<Pair>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Pair>}\n   */\n  async * putMany (source, options = {}) {\n    let error\n    const pushables = this.stores.map(store => {\n      const source = pushable({\n        objectMode: true\n      })\n\n      drain(store.putMany(source, options))\n        .catch(err => {\n          // store threw while putting, make sure we bubble the error up\n          error = err\n        })\n\n      return source\n    })\n\n    try {\n      for await (const pair of source) {\n        if (error) {\n          throw error\n        }\n\n        pushables.forEach(p => p.push(pair))\n\n        yield pair\n      }\n    } finally {\n      pushables.forEach(p => p.end())\n    }\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Key>}\n   */\n  async * deleteMany (source, options = {}) {\n    let error\n    const pushables = this.stores.map(store => {\n      const source = pushable({\n        objectMode: true\n      })\n\n      drain(store.deleteMany(source, options))\n        .catch(err => {\n          // store threw while deleting, make sure we bubble the error up\n          error = err\n        })\n\n      return source\n    })\n\n    try {\n      for await (const key of source) {\n        if (error) {\n          throw error\n        }\n\n        pushables.forEach(p => p.push(key))\n\n        yield key\n      }\n    } finally {\n      pushables.forEach(p => p.end())\n    }\n  }\n\n  async close () {\n    await Promise.all(this.stores.map(store => store.close()))\n  }\n\n  /**\n   * @returns {Batch}\n   */\n  batch () {\n    const batches = this.stores.map(store => store.batch())\n\n    return {\n      put: (key, value) => {\n        batches.forEach(b => b.put(key, value))\n      },\n      delete: (key) => {\n        batches.forEach(b => b.delete(key))\n      },\n      commit: async (options) => {\n        for (const batch of batches) {\n          await batch.commit(options)\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {Query} q\n   * @param {Options} [options]\n   */\n  query (q, options) {\n    return this.stores[this.stores.length - 1].query(q, options)\n  }\n\n  /**\n   * @param {KeyQuery} q\n   * @param {Options} [options]\n   */\n  queryKeys (q, options) {\n    return this.stores[this.stores.length - 1].queryKeys(q, options)\n  }\n}\n","import { Key } from 'interface-datastore'\nimport { BaseDatastore, Errors } from 'datastore-core'\nimport filter from 'it-filter'\nimport map from 'it-map'\nimport take from 'it-take'\nimport sort from 'it-sort'\nimport { Level } from 'level'\n\n/**\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('interface-datastore').Pair} Pair\n * @typedef {import('interface-datastore').Batch} Batch\n * @typedef {import('interface-datastore').Query} Query\n * @typedef {import('interface-datastore').KeyQuery} KeyQuery\n * @typedef {import('interface-datastore').Options} QueryOptions\n * @typedef {import('abstract-level').AbstractLevel<any, string, Uint8Array>} LevelDb\n */\n\n/**\n * A datastore backed by leveldb\n */\nexport class LevelDatastore extends BaseDatastore {\n  /**\n   * @param {string | LevelDb} path\n   * @param {import('level').DatabaseOptions<string, Uint8Array> & import('level').OpenOptions} [opts]\n   */\n  constructor (path, opts = {}) {\n    super()\n\n    /** @type {LevelDb} */\n    this.db = typeof path === 'string'\n      ? new Level(path, {\n        ...opts,\n        keyEncoding: 'utf8',\n        valueEncoding: 'view'\n      })\n      : path\n\n    /** @type {import('level').OpenOptions} */\n    this.opts = {\n      createIfMissing: true,\n      compression: false, // same default as go\n      ...opts\n    }\n  }\n\n  async open () {\n    try {\n      await this.db.open(this.opts)\n    } catch (/** @type {any} */ err) {\n      throw Errors.dbOpenFailedError(err)\n    }\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Uint8Array} value\n   */\n  async put (key, value) {\n    try {\n      await this.db.put(key.toString(), value)\n    } catch (/** @type {any} */ err) {\n      throw Errors.dbWriteFailedError(err)\n    }\n  }\n\n  /**\n   * @param {Key} key\n   * @returns {Promise<Uint8Array>}\n   */\n  async get (key) {\n    let data\n    try {\n      data = await this.db.get(key.toString())\n    } catch (/** @type {any} */ err) {\n      if (err.notFound) throw Errors.notFoundError(err)\n      throw Errors.dbWriteFailedError(err)\n    }\n    return data\n  }\n\n  /**\n   * @param {Key} key\n   * @returns {Promise<boolean>}\n   */\n  async has (key) {\n    try {\n      await this.db.get(key.toString())\n    } catch (/** @type {any} */ err) {\n      if (err.notFound) return false\n      throw err\n    }\n    return true\n  }\n\n  /**\n   * @param {Key} key\n   * @returns {Promise<void>}\n   */\n  async delete (key) {\n    try {\n      await this.db.del(key.toString())\n    } catch (/** @type {any} */ err) {\n      throw Errors.dbDeleteFailedError(err)\n    }\n  }\n\n  close () {\n    return this.db && this.db.close()\n  }\n\n  /**\n   * @returns {Batch}\n   */\n  batch () {\n    /** @type {Array<{ type: 'put', key: string, value: Uint8Array; } | { type: 'del', key: string }>} */\n    const ops = []\n    return {\n      put: (key, value) => {\n        ops.push({\n          type: 'put',\n          key: key.toString(),\n          value: value\n        })\n      },\n      delete: (key) => {\n        ops.push({\n          type: 'del',\n          key: key.toString()\n        })\n      },\n      commit: () => {\n        return this.db.batch(ops)\n      }\n    }\n  }\n\n  /**\n   * @param {Query} q\n   */\n  query (q) {\n    let it = this._query({\n      values: true,\n      prefix: q.prefix\n    })\n\n    if (Array.isArray(q.filters)) {\n      it = q.filters.reduce((it, f) => filter(it, f), it)\n    }\n\n    if (Array.isArray(q.orders)) {\n      it = q.orders.reduce((it, f) => sort(it, f), it)\n    }\n\n    const { offset, limit } = q\n    if (offset) {\n      let i = 0\n      it = filter(it, () => i++ >= offset)\n    }\n\n    if (limit) {\n      it = take(it, limit)\n    }\n\n    return it\n  }\n\n  /**\n   * @param {KeyQuery} q\n   */\n  queryKeys (q) {\n    let it = map(this._query({\n      values: false,\n      prefix: q.prefix\n    }), ({ key }) => key)\n\n    if (Array.isArray(q.filters)) {\n      it = q.filters.reduce((it, f) => filter(it, f), it)\n    }\n\n    if (Array.isArray(q.orders)) {\n      it = q.orders.reduce((it, f) => sort(it, f), it)\n    }\n\n    const { offset, limit } = q\n    if (offset) {\n      let i = 0\n      it = filter(it, () => i++ >= offset)\n    }\n\n    if (limit) {\n      it = take(it, limit)\n    }\n\n    return it\n  }\n\n  /**\n   * @param {object} opts\n   * @param {boolean} opts.values\n   * @param {string} [opts.prefix]\n   * @returns {AsyncIterable<Pair>}\n   */\n  _query (opts) {\n    /** @type {import('level').IteratorOptions<string, Uint8Array>} */\n    const iteratorOpts = {\n      keys: true,\n      keyEncoding: 'buffer',\n      values: opts.values\n    }\n\n    // Let the db do the prefix matching\n    if (opts.prefix != null) {\n      const prefix = opts.prefix.toString()\n      // Match keys greater than or equal to `prefix` and\n      iteratorOpts.gte = prefix\n      // less than `prefix` + \\xFF (hex escape sequence)\n      iteratorOpts.lt = prefix + '\\xFF'\n    }\n\n    const iterator = this.db.iterator(iteratorOpts)\n\n    if (iterator[Symbol.asyncIterator]) {\n      return levelIteratorToIterator(iterator)\n    }\n\n    // @ts-expect-error support older level\n    if (iterator.next != null && iterator.end != null) {\n      // @ts-expect-error support older level\n      return oldLevelIteratorToIterator(iterator)\n    }\n\n    throw new Error('Level returned incompatible iterator')\n  }\n}\n\n/**\n * @param {import('level').Iterator<LevelDb, string, Uint8Array>} li - Level iterator\n * @returns {AsyncIterable<Pair>}\n */\nasync function * levelIteratorToIterator (li) {\n  for await (const [key, value] of li) {\n    yield { key: new Key(key, false), value }\n  }\n\n  await li.close()\n}\n\n/**\n * @typedef {object} LevelIterator\n * @property {(cb: (err: Error, key: string | Uint8Array | null, value: any)=> void)=>void} next\n * @property {(cb: (err: Error) => void) => void } end\n */\n\n/**\n * @param {LevelIterator} li - Level iterator\n * @returns {AsyncIterable<Pair>}\n */\nfunction oldLevelIteratorToIterator (li) {\n  return {\n    [Symbol.asyncIterator] () {\n      return {\n        next: () => new Promise((resolve, reject) => {\n          li.next((err, key, value) => {\n            if (err) return reject(err)\n            if (key == null) {\n              return li.end(err => {\n                if (err) return reject(err)\n                resolve({ done: true, value: undefined })\n              })\n            }\n            resolve({ done: false, value: { key: new Key(key, false), value } })\n          })\n        }),\n        return: () => new Promise((resolve, reject) => {\n          li.end(err => {\n            if (err) return reject(err)\n            resolve({ done: true, value: undefined })\n          })\n        })\n      }\n    }\n  }\n}\n","import drain from 'it-drain'\nimport filter from 'it-filter'\nimport take from 'it-take'\nimport all from 'it-all'\n\n/**\n * Collect all values from the iterable and sort them using\n * the passed sorter function\n *\n * @template T\n * @param {AsyncIterable<T> | Iterable<T>} iterable\n * @param {(a: T, b: T) => -1 | 0 | 1} sorter\n * @returns {AsyncIterable<T>}\n */\nconst sortAll = (iterable, sorter) => {\n  return (async function * () {\n    const values = await all(iterable)\n    yield * values.sort(sorter)\n  })()\n}\n\n/**\n * @typedef {import('interface-blockstore').Options} Options\n * @typedef {import('interface-blockstore').Pair} Pair\n * @typedef {import('interface-blockstore').Blockstore} Blockstore\n * @typedef {import('interface-blockstore').Query} Query\n * @typedef {import('interface-blockstore').KeyQuery} KeyQuery\n * @typedef {import('interface-blockstore').Batch} Batch\n *\n * @typedef {import('multiformats').CID} CID\n */\n\n/**\n * @template O\n * @typedef {import('interface-store').AwaitIterable<O>} AwaitIterable\n */\n\n/**\n * @implements {Blockstore}\n */\nexport class BaseBlockstore {\n  /**\n   * @returns {Promise<void>}\n   */\n  open () {\n    return Promise.reject(new Error('.open is not implemented'))\n  }\n\n  /**\n   * @returns {Promise<void>}\n   */\n  close () {\n    return Promise.reject(new Error('.close is not implemented'))\n  }\n\n  /**\n   * @param {CID} key\n   * @param {Uint8Array} val\n   * @param {Options} [options]\n   * @returns {Promise<void>}\n   */\n  put (key, val, options) {\n    return Promise.reject(new Error('.put is not implemented'))\n  }\n\n  /**\n   * @param {CID} key\n   * @param {Options} [options]\n   * @returns {Promise<Uint8Array>}\n   */\n  get (key, options) {\n    return Promise.reject(new Error('.get is not implemented'))\n  }\n\n  /**\n   * @param {CID} key\n   * @param {Options} [options]\n   * @returns {Promise<boolean>}\n   */\n  has (key, options) {\n    return Promise.reject(new Error('.has is not implemented'))\n  }\n\n  /**\n   * @param {CID} key\n   * @param {Options} [options]\n   * @returns {Promise<void>}\n   */\n  delete (key, options) {\n    return Promise.reject(new Error('.delete is not implemented'))\n  }\n\n  /**\n   * @param {AwaitIterable<Pair>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Pair>}\n   */\n  async * putMany (source, options = {}) {\n    for await (const { key, value } of source) {\n      await this.put(key, value, options)\n      yield { key, value }\n    }\n  }\n\n  /**\n   * @param {AwaitIterable<CID>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Uint8Array>}\n   */\n  async * getMany (source, options = {}) {\n    for await (const key of source) {\n      yield this.get(key, options)\n    }\n  }\n\n  /**\n   * @param {AwaitIterable<CID>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<CID>}\n   */\n  async * deleteMany (source, options = {}) {\n    for await (const key of source) {\n      await this.delete(key, options)\n      yield key\n    }\n  }\n\n  /**\n   * @returns {Batch}\n   */\n  batch () {\n    /** @type {Pair[]} */\n    let puts = []\n    /** @type {CID[]} */\n    let dels = []\n\n    return {\n      put (key, value) {\n        puts.push({ key, value })\n      },\n\n      delete (key) {\n        dels.push(key)\n      },\n      commit: async (options) => {\n        await drain(this.putMany(puts, options))\n        puts = []\n        await drain(this.deleteMany(dels, options))\n        dels = []\n      }\n    }\n  }\n\n  /**\n   * Extending classes should override `query` or implement this method\n   *\n   * @param {Query} q\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Pair>}\n   */\n  // eslint-disable-next-line require-yield\n  async * _all (q, options) {\n    throw new Error('._all is not implemented')\n  }\n\n  /**\n   * Extending classes should override `queryKeys` or implement this method\n   *\n   * @param {KeyQuery} q\n   * @param {Options} [options]\n   * @returns {AsyncIterable<CID>}\n   */\n  // eslint-disable-next-line require-yield\n  async * _allKeys (q, options) {\n    throw new Error('._allKeys is not implemented')\n  }\n\n  /**\n   * @param {Query} q\n   * @param {Options} [options]\n   */\n  query (q, options) {\n    let it = this._all(q, options)\n\n    if (q.prefix != null) {\n      it = filter(it, (/** @type {Pair} */ e) =>\n        e.key.toString().startsWith(q.prefix || '')\n      )\n    }\n\n    if (Array.isArray(q.filters)) {\n      it = q.filters.reduce((it, f) => filter(it, f), it)\n    }\n\n    if (Array.isArray(q.orders)) {\n      it = q.orders.reduce((it, f) => sortAll(it, f), it)\n    }\n\n    if (q.offset != null) {\n      let i = 0\n      it = filter(it, () => i++ >= (q.offset || 0))\n    }\n\n    if (q.limit != null) {\n      it = take(it, q.limit)\n    }\n\n    return it\n  }\n\n  /**\n   * @param {KeyQuery} q\n   * @param {Options} [options]\n   */\n  queryKeys (q, options) {\n    let it = this._allKeys(q, options)\n\n    if (q.prefix != null) {\n      it = filter(it, (/** @type {CID} */ cid) => cid.toString().startsWith(q.prefix || ''))\n    }\n\n    if (Array.isArray(q.filters)) {\n      it = q.filters.reduce((it, f) => filter(it, f), it)\n    }\n\n    if (Array.isArray(q.orders)) {\n      it = q.orders.reduce((it, f) => sortAll(it, f), it)\n    }\n\n    if (q.offset != null) {\n      let i = 0\n      it = filter(it, () => i++ >= /** @type {number} */ (q.offset))\n    }\n\n    if (q.limit != null) {\n      it = take(it, q.limit)\n    }\n\n    return it\n  }\n}\n","/**\n * Collects all values from an (async) iterable and returns them as an array\n */\nexport default async function all(source) {\n    const arr = [];\n    for await (const entry of source) {\n        arr.push(entry);\n    }\n    return arr;\n}\n//# sourceMappingURL=index.js.map","import drain from 'it-drain'\nimport { pushable } from 'it-pushable'\nimport { Key } from 'interface-datastore/key'\nimport { CID } from 'multiformats/cid'\nimport * as raw from 'multiformats/codecs/raw'\nimport * as Digest from 'multiformats/hashes/digest'\nimport { base32, base32pad } from 'multiformats/bases/base32'\nimport { base58btc } from 'multiformats/bases/base58'\nimport errcode from 'err-code'\nimport { BaseBlockstore } from 'blockstore-core/base'\n\n/**\n * Transform a cid to the appropriate datastore key.\n *\n * @param {CID} cid\n * @returns {Key}\n */\nfunction cidToKey (cid) {\n  const c = CID.asCID(cid)\n\n  if (!c) {\n    throw errcode(new Error('Not a valid cid'), 'ERR_INVALID_CID')\n  }\n\n  return new Key('/' + base32.encode(c.multihash.bytes).slice(1).toUpperCase(), false)\n}\n\n/**\n * Transform a datastore Key instance to a CID\n * As Key is a multihash of the CID, it is reconstructed using IPLD's RAW codec.\n * Hence it is highly probable that stored CID will differ from a CID retrieved from blockstore.\n *\n * @param {Key} key\n * @returns {CID}\n */\nfunction keyToCid (key) {\n  // Block key is of the form <base32 encoded string>\n  return CID.createV1(raw.code, Digest.decode(base32.decode('b' + key.toString().slice(1).toLowerCase())))\n}\n\n/**\n * Tries to decode a prefix as the first part of a CID and then\n * strip off the version and codec bytes to just leave part of\n * the multihash.\n *\n * Only really works if the prefix length aligns with the byte\n * boundaries of the encoding.\n *\n * @param {string} prefix\n * @returns {string}\n */\nfunction convertPrefix (prefix) {\n  const firstChar = prefix.substring(0, 1)\n\n  if (firstChar === '/') {\n    return convertPrefix(prefix.substring(1))\n  }\n\n  /** @type {(input: string) => Uint8Array } */\n  let decoder\n\n  if (firstChar.toLowerCase() === 'b') {\n    // v1 cid prefix, remove version and codec bytes\n    decoder = (input) => base32.decode(input.toLowerCase()).subarray(2)\n  } else if (firstChar.toLowerCase() === 'c') {\n    // v1 cid prefix, remove version and codec bytes\n    decoder = (input) => base32pad.decode(input.toLowerCase()).subarray(2)\n  } else if (firstChar === 'z') {\n    // v1 cid\n    decoder = (input) => base58btc.decode(input).subarray(2)\n  } else if (firstChar === 'Q') {\n    // v0 cid prefix\n    decoder = (input) => base58btc.decode('z' + input)\n  } else {\n    decoder = (input) => base32.decode('b' + input.toLowerCase()).subarray(2)\n  }\n\n  let bytes\n\n  // find the longest prefix that we can safely decode\n  for (let i = 1; i < prefix.length; i++) {\n    try {\n      bytes = decoder(prefix.substring(0, i))\n    } catch (/** @type {any} */ err) {\n      if (err.message !== 'Unexpected end of data') {\n        throw err\n      }\n    }\n  }\n\n  let str = '/C'\n\n  if (bytes) {\n    // slice one character from the end of the string to ensure we don't end up\n    // with a padded value which could have a non-matching string at the end\n    str = `/${base32.encode(bytes).slice(1, -1).toUpperCase() || 'C'}`\n  }\n\n  return str\n}\n\n/**\n * @param {import('interface-blockstore').Query} query\n * @returns {import('interface-datastore').Query}\n */\nfunction convertQuery (query) {\n  return {\n    ...query,\n    prefix: query.prefix ? convertPrefix(query.prefix) : undefined,\n    filters: query.filters\n      ? query.filters.map(\n        filter => (pair) => {\n          return filter({ key: keyToCid(pair.key), value: pair.value })\n        }\n      )\n      : undefined,\n    orders: query.orders\n      ? query.orders.map(\n        order => (a, b) => {\n          return order({ key: keyToCid(a.key), value: a.value }, { key: keyToCid(b.key), value: b.value })\n        }\n      )\n      : undefined\n  }\n}\n\n/**\n * @param {import('interface-blockstore').KeyQuery} query\n * @returns {import('interface-datastore').KeyQuery}\n */\nfunction convertKeyQuery (query) {\n  return {\n    ...query,\n    prefix: query.prefix ? convertPrefix(query.prefix) : undefined,\n    filters: query.filters\n      ? query.filters.map(\n        filter => (key) => {\n          return filter(keyToCid(key))\n        }\n      )\n      : undefined,\n    orders: query.orders\n      ? query.orders.map(\n        order => (a, b) => {\n          return order(keyToCid(a), keyToCid(b))\n        }\n      )\n      : undefined\n  }\n}\n\n/**\n * @typedef {import('interface-blockstore').Query} Query\n * @typedef {import('interface-blockstore').KeyQuery} KeyQuery\n * @typedef {import('interface-blockstore').Pair} Pair\n * @typedef {import('interface-blockstore').Options} Options\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('interface-blockstore').Blockstore} Blockstore\n */\n\n/**\n * @implements {Blockstore}\n */\nexport class BlockstoreDatastoreAdapter extends BaseBlockstore {\n  /**\n   * @param {Datastore} datastore\n   */\n  constructor (datastore) {\n    super()\n\n    this.child = datastore\n  }\n\n  open () {\n    return this.child.open()\n  }\n\n  close () {\n    return this.child.close()\n  }\n\n  /**\n   * @param {Query} query\n   * @param {Options} [options]\n   */\n  async * query (query, options) {\n    for await (const { key, value } of this.child.query(convertQuery(query), options)) {\n      yield { key: keyToCid(key), value }\n    }\n  }\n\n  /**\n   * @param {KeyQuery} query\n   * @param {Options} [options]\n   */\n  async * queryKeys (query, options) {\n    for await (const key of this.child.queryKeys(convertKeyQuery(query), options)) {\n      yield keyToCid(key)\n    }\n  }\n\n  /**\n   * @param {CID} cid\n   * @param {Options} [options]\n   * @returns\n   */\n  async get (cid, options) {\n    return this.child.get(cidToKey(cid), options)\n  }\n\n  /**\n   * @param {AsyncIterable<CID> | Iterable<CID>} cids\n   * @param {Options} [options]\n   */\n  async * getMany (cids, options) {\n    for await (const cid of cids) {\n      yield this.get(cid, options)\n    }\n  }\n\n  /**\n   * @param {CID} cid\n   * @param {Uint8Array} value\n   * @param {Options} [options]\n   */\n  async put (cid, value, options) {\n    await this.child.put(cidToKey(cid), value, options)\n  }\n\n  /**\n   * @param {AsyncIterable<Pair> | Iterable<Pair>} blocks\n   * @param {Options} [options]\n   */\n  async * putMany (blocks, options) { // eslint-disable-line require-await\n    // we cannot simply chain to `store.putMany` because we convert a CID into\n    // a key based on the multihash only, so we lose the version & codec and\n    // cannot give the user back the CID they used to create the block, so yield\n    // to `store.putMany` but return the actual block the user passed in.\n    //\n    // nb. we want to use `store.putMany` here so bitswap can control batching\n    // up block HAVEs to send to the network - if we use multiple `store.put`s\n    // it will not be able to guess we are about to `store.put` more blocks\n    const output = pushable({\n      objectMode: true\n    })\n\n    // process.nextTick runs on the microtask queue, setImmediate runs on the next\n    // event loop iteration so is slower. Use process.nextTick if it is available.\n    const runner = globalThis.process && globalThis.process.nextTick ? globalThis.process.nextTick : (globalThis.setImmediate || globalThis.setTimeout)\n\n    runner(async () => {\n      try {\n        const store = this.child\n\n        await drain(this.child.putMany(async function * () {\n          for await (const block of blocks) {\n            const key = cidToKey(block.key)\n            const exists = await store.has(key, options)\n\n            if (!exists) {\n              yield { key, value: block.value }\n            }\n\n            // there is an assumption here that after the yield has completed\n            // the underlying datastore has finished writing the block\n            output.push(block)\n          }\n        }()))\n\n        output.end()\n      } catch (/** @type {any} */ err) {\n        output.end(err)\n      }\n    })\n\n    yield * output\n  }\n\n  /**\n   * @param {CID} cid\n   * @param {Options} [options]\n   */\n  has (cid, options) {\n    return this.child.has(cidToKey(cid), options)\n  }\n\n  /**\n   * @param {CID} cid\n   * @param {Options} [options]\n   */\n  delete (cid, options) {\n    return this.child.delete(cidToKey(cid), options)\n  }\n\n  /**\n   * @param {AsyncIterable<CID> | Iterable<CID>} cids\n   * @param {Options} [options]\n   */\n  deleteMany (cids, options) {\n    const out = pushable({\n      objectMode: true\n    })\n\n    drain(this.child.deleteMany((async function * () {\n      for await (const cid of cids) {\n        yield cidToKey(cid)\n\n        out.push(cid)\n      }\n\n      out.end()\n    }()), options)).catch(err => {\n      out.end(err)\n    })\n\n    return out\n  }\n}\n","import { createRepo as create } from 'ipfs-repo'\nimport { LevelDatastore } from 'datastore-level'\nimport { BlockstoreDatastoreAdapter } from 'blockstore-datastore-adapter'\nimport { MemoryLock } from 'ipfs-repo/locks/memory'\n\n/**\n * @typedef {import('ipfs-repo-migrations').ProgressCallback} MigrationProgressCallback\n */\n\n/**\n * @param {(...args: any[]) => void} print\n * @param {import('ipfs-core-utils/multicodecs').Multicodecs} codecs\n * @param {object} options\n * @param {string} [options.path]\n * @param {boolean} [options.autoMigrate]\n * @param {MigrationProgressCallback} [options.onMigrationProgress]\n * @param {number} [options.peerStoreCacheSize]\n */\nexport function createRepo (print, codecs, options) {\n  const repoPath = options.path || 'ipfs'\n\n  return create(repoPath, (codeOrName) => codecs.getCodec(codeOrName), {\n    root: new LevelDatastore(repoPath, {\n      prefix: '',\n      version: 2\n    }),\n    blocks: new BlockstoreDatastoreAdapter(\n      new LevelDatastore(`${repoPath}/blocks`, {\n        prefix: '',\n        version: 2\n      })\n    ),\n    datastore: new LevelDatastore(`${repoPath}/datastore`, {\n      prefix: '',\n      version: 2\n    }),\n    keys: new LevelDatastore(`${repoPath}/keys`, {\n      prefix: '',\n      version: 2\n    }),\n    pins: new LevelDatastore(`${repoPath}/pins`, {\n      prefix: '',\n      version: 2\n    })\n  }, {\n    autoMigrate: options.autoMigrate,\n    onMigrationProgress: options.onMigrationProgress || print,\n    repoLock: MemoryLock\n  })\n}\n","/*eslint-disable*/\nimport $protobuf from \"protobufjs/minimal.js\";\n\n// Common aliases\nconst $Reader = $protobuf.Reader, $Writer = $protobuf.Writer, $util = $protobuf.util;\n\n// Exported root namespace\nconst $root = $protobuf.roots[\"ipfs-unixfs\"] || ($protobuf.roots[\"ipfs-unixfs\"] = {});\n\nexport const Data = $root.Data = (() => {\n\n    /**\n     * Properties of a Data.\n     * @exports IData\n     * @interface IData\n     * @property {Data.DataType} Type Data Type\n     * @property {Uint8Array|null} [Data] Data Data\n     * @property {number|null} [filesize] Data filesize\n     * @property {Array.<number>|null} [blocksizes] Data blocksizes\n     * @property {number|null} [hashType] Data hashType\n     * @property {number|null} [fanout] Data fanout\n     * @property {number|null} [mode] Data mode\n     * @property {IUnixTime|null} [mtime] Data mtime\n     */\n\n    /**\n     * Constructs a new Data.\n     * @exports Data\n     * @classdesc Represents a Data.\n     * @implements IData\n     * @constructor\n     * @param {IData=} [p] Properties to set\n     */\n    function Data(p) {\n        this.blocksizes = [];\n        if (p)\n            for (var ks = Object.keys(p), i = 0; i < ks.length; ++i)\n                if (p[ks[i]] != null)\n                    this[ks[i]] = p[ks[i]];\n    }\n\n    /**\n     * Data Type.\n     * @member {Data.DataType} Type\n     * @memberof Data\n     * @instance\n     */\n    Data.prototype.Type = 0;\n\n    /**\n     * Data Data.\n     * @member {Uint8Array} Data\n     * @memberof Data\n     * @instance\n     */\n    Data.prototype.Data = $util.newBuffer([]);\n\n    /**\n     * Data filesize.\n     * @member {number} filesize\n     * @memberof Data\n     * @instance\n     */\n    Data.prototype.filesize = $util.Long ? $util.Long.fromBits(0,0,true) : 0;\n\n    /**\n     * Data blocksizes.\n     * @member {Array.<number>} blocksizes\n     * @memberof Data\n     * @instance\n     */\n    Data.prototype.blocksizes = $util.emptyArray;\n\n    /**\n     * Data hashType.\n     * @member {number} hashType\n     * @memberof Data\n     * @instance\n     */\n    Data.prototype.hashType = $util.Long ? $util.Long.fromBits(0,0,true) : 0;\n\n    /**\n     * Data fanout.\n     * @member {number} fanout\n     * @memberof Data\n     * @instance\n     */\n    Data.prototype.fanout = $util.Long ? $util.Long.fromBits(0,0,true) : 0;\n\n    /**\n     * Data mode.\n     * @member {number} mode\n     * @memberof Data\n     * @instance\n     */\n    Data.prototype.mode = 0;\n\n    /**\n     * Data mtime.\n     * @member {IUnixTime|null|undefined} mtime\n     * @memberof Data\n     * @instance\n     */\n    Data.prototype.mtime = null;\n\n    /**\n     * Encodes the specified Data message. Does not implicitly {@link Data.verify|verify} messages.\n     * @function encode\n     * @memberof Data\n     * @static\n     * @param {IData} m Data message or plain object to encode\n     * @param {$protobuf.Writer} [w] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Data.encode = function encode(m, w) {\n        if (!w)\n            w = $Writer.create();\n        w.uint32(8).int32(m.Type);\n        if (m.Data != null && Object.hasOwnProperty.call(m, \"Data\"))\n            w.uint32(18).bytes(m.Data);\n        if (m.filesize != null && Object.hasOwnProperty.call(m, \"filesize\"))\n            w.uint32(24).uint64(m.filesize);\n        if (m.blocksizes != null && m.blocksizes.length) {\n            for (var i = 0; i < m.blocksizes.length; ++i)\n                w.uint32(32).uint64(m.blocksizes[i]);\n        }\n        if (m.hashType != null && Object.hasOwnProperty.call(m, \"hashType\"))\n            w.uint32(40).uint64(m.hashType);\n        if (m.fanout != null && Object.hasOwnProperty.call(m, \"fanout\"))\n            w.uint32(48).uint64(m.fanout);\n        if (m.mode != null && Object.hasOwnProperty.call(m, \"mode\"))\n            w.uint32(56).uint32(m.mode);\n        if (m.mtime != null && Object.hasOwnProperty.call(m, \"mtime\"))\n            $root.UnixTime.encode(m.mtime, w.uint32(66).fork()).ldelim();\n        return w;\n    };\n\n    /**\n     * Decodes a Data message from the specified reader or buffer.\n     * @function decode\n     * @memberof Data\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} r Reader or buffer to decode from\n     * @param {number} [l] Message length if known beforehand\n     * @returns {Data} Data\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Data.decode = function decode(r, l) {\n        if (!(r instanceof $Reader))\n            r = $Reader.create(r);\n        var c = l === undefined ? r.len : r.pos + l, m = new $root.Data();\n        while (r.pos < c) {\n            var t = r.uint32();\n            switch (t >>> 3) {\n            case 1:\n                m.Type = r.int32();\n                break;\n            case 2:\n                m.Data = r.bytes();\n                break;\n            case 3:\n                m.filesize = r.uint64();\n                break;\n            case 4:\n                if (!(m.blocksizes && m.blocksizes.length))\n                    m.blocksizes = [];\n                if ((t & 7) === 2) {\n                    var c2 = r.uint32() + r.pos;\n                    while (r.pos < c2)\n                        m.blocksizes.push(r.uint64());\n                } else\n                    m.blocksizes.push(r.uint64());\n                break;\n            case 5:\n                m.hashType = r.uint64();\n                break;\n            case 6:\n                m.fanout = r.uint64();\n                break;\n            case 7:\n                m.mode = r.uint32();\n                break;\n            case 8:\n                m.mtime = $root.UnixTime.decode(r, r.uint32());\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n            }\n        }\n        if (!m.hasOwnProperty(\"Type\"))\n            throw $util.ProtocolError(\"missing required 'Type'\", { instance: m });\n        return m;\n    };\n\n    /**\n     * Creates a Data message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof Data\n     * @static\n     * @param {Object.<string,*>} d Plain object\n     * @returns {Data} Data\n     */\n    Data.fromObject = function fromObject(d) {\n        if (d instanceof $root.Data)\n            return d;\n        var m = new $root.Data();\n        switch (d.Type) {\n        case \"Raw\":\n        case 0:\n            m.Type = 0;\n            break;\n        case \"Directory\":\n        case 1:\n            m.Type = 1;\n            break;\n        case \"File\":\n        case 2:\n            m.Type = 2;\n            break;\n        case \"Metadata\":\n        case 3:\n            m.Type = 3;\n            break;\n        case \"Symlink\":\n        case 4:\n            m.Type = 4;\n            break;\n        case \"HAMTShard\":\n        case 5:\n            m.Type = 5;\n            break;\n        }\n        if (d.Data != null) {\n            if (typeof d.Data === \"string\")\n                $util.base64.decode(d.Data, m.Data = $util.newBuffer($util.base64.length(d.Data)), 0);\n            else if (d.Data.length)\n                m.Data = d.Data;\n        }\n        if (d.filesize != null) {\n            if ($util.Long)\n                (m.filesize = $util.Long.fromValue(d.filesize)).unsigned = true;\n            else if (typeof d.filesize === \"string\")\n                m.filesize = parseInt(d.filesize, 10);\n            else if (typeof d.filesize === \"number\")\n                m.filesize = d.filesize;\n            else if (typeof d.filesize === \"object\")\n                m.filesize = new $util.LongBits(d.filesize.low >>> 0, d.filesize.high >>> 0).toNumber(true);\n        }\n        if (d.blocksizes) {\n            if (!Array.isArray(d.blocksizes))\n                throw TypeError(\".Data.blocksizes: array expected\");\n            m.blocksizes = [];\n            for (var i = 0; i < d.blocksizes.length; ++i) {\n                if ($util.Long)\n                    (m.blocksizes[i] = $util.Long.fromValue(d.blocksizes[i])).unsigned = true;\n                else if (typeof d.blocksizes[i] === \"string\")\n                    m.blocksizes[i] = parseInt(d.blocksizes[i], 10);\n                else if (typeof d.blocksizes[i] === \"number\")\n                    m.blocksizes[i] = d.blocksizes[i];\n                else if (typeof d.blocksizes[i] === \"object\")\n                    m.blocksizes[i] = new $util.LongBits(d.blocksizes[i].low >>> 0, d.blocksizes[i].high >>> 0).toNumber(true);\n            }\n        }\n        if (d.hashType != null) {\n            if ($util.Long)\n                (m.hashType = $util.Long.fromValue(d.hashType)).unsigned = true;\n            else if (typeof d.hashType === \"string\")\n                m.hashType = parseInt(d.hashType, 10);\n            else if (typeof d.hashType === \"number\")\n                m.hashType = d.hashType;\n            else if (typeof d.hashType === \"object\")\n                m.hashType = new $util.LongBits(d.hashType.low >>> 0, d.hashType.high >>> 0).toNumber(true);\n        }\n        if (d.fanout != null) {\n            if ($util.Long)\n                (m.fanout = $util.Long.fromValue(d.fanout)).unsigned = true;\n            else if (typeof d.fanout === \"string\")\n                m.fanout = parseInt(d.fanout, 10);\n            else if (typeof d.fanout === \"number\")\n                m.fanout = d.fanout;\n            else if (typeof d.fanout === \"object\")\n                m.fanout = new $util.LongBits(d.fanout.low >>> 0, d.fanout.high >>> 0).toNumber(true);\n        }\n        if (d.mode != null) {\n            m.mode = d.mode >>> 0;\n        }\n        if (d.mtime != null) {\n            if (typeof d.mtime !== \"object\")\n                throw TypeError(\".Data.mtime: object expected\");\n            m.mtime = $root.UnixTime.fromObject(d.mtime);\n        }\n        return m;\n    };\n\n    /**\n     * Creates a plain object from a Data message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof Data\n     * @static\n     * @param {Data} m Data\n     * @param {$protobuf.IConversionOptions} [o] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    Data.toObject = function toObject(m, o) {\n        if (!o)\n            o = {};\n        var d = {};\n        if (o.arrays || o.defaults) {\n            d.blocksizes = [];\n        }\n        if (o.defaults) {\n            d.Type = o.enums === String ? \"Raw\" : 0;\n            if (o.bytes === String)\n                d.Data = \"\";\n            else {\n                d.Data = [];\n                if (o.bytes !== Array)\n                    d.Data = $util.newBuffer(d.Data);\n            }\n            if ($util.Long) {\n                var n = new $util.Long(0, 0, true);\n                d.filesize = o.longs === String ? n.toString() : o.longs === Number ? n.toNumber() : n;\n            } else\n                d.filesize = o.longs === String ? \"0\" : 0;\n            if ($util.Long) {\n                var n = new $util.Long(0, 0, true);\n                d.hashType = o.longs === String ? n.toString() : o.longs === Number ? n.toNumber() : n;\n            } else\n                d.hashType = o.longs === String ? \"0\" : 0;\n            if ($util.Long) {\n                var n = new $util.Long(0, 0, true);\n                d.fanout = o.longs === String ? n.toString() : o.longs === Number ? n.toNumber() : n;\n            } else\n                d.fanout = o.longs === String ? \"0\" : 0;\n            d.mode = 0;\n            d.mtime = null;\n        }\n        if (m.Type != null && m.hasOwnProperty(\"Type\")) {\n            d.Type = o.enums === String ? $root.Data.DataType[m.Type] : m.Type;\n        }\n        if (m.Data != null && m.hasOwnProperty(\"Data\")) {\n            d.Data = o.bytes === String ? $util.base64.encode(m.Data, 0, m.Data.length) : o.bytes === Array ? Array.prototype.slice.call(m.Data) : m.Data;\n        }\n        if (m.filesize != null && m.hasOwnProperty(\"filesize\")) {\n            if (typeof m.filesize === \"number\")\n                d.filesize = o.longs === String ? String(m.filesize) : m.filesize;\n            else\n                d.filesize = o.longs === String ? $util.Long.prototype.toString.call(m.filesize) : o.longs === Number ? new $util.LongBits(m.filesize.low >>> 0, m.filesize.high >>> 0).toNumber(true) : m.filesize;\n        }\n        if (m.blocksizes && m.blocksizes.length) {\n            d.blocksizes = [];\n            for (var j = 0; j < m.blocksizes.length; ++j) {\n                if (typeof m.blocksizes[j] === \"number\")\n                    d.blocksizes[j] = o.longs === String ? String(m.blocksizes[j]) : m.blocksizes[j];\n                else\n                    d.blocksizes[j] = o.longs === String ? $util.Long.prototype.toString.call(m.blocksizes[j]) : o.longs === Number ? new $util.LongBits(m.blocksizes[j].low >>> 0, m.blocksizes[j].high >>> 0).toNumber(true) : m.blocksizes[j];\n            }\n        }\n        if (m.hashType != null && m.hasOwnProperty(\"hashType\")) {\n            if (typeof m.hashType === \"number\")\n                d.hashType = o.longs === String ? String(m.hashType) : m.hashType;\n            else\n                d.hashType = o.longs === String ? $util.Long.prototype.toString.call(m.hashType) : o.longs === Number ? new $util.LongBits(m.hashType.low >>> 0, m.hashType.high >>> 0).toNumber(true) : m.hashType;\n        }\n        if (m.fanout != null && m.hasOwnProperty(\"fanout\")) {\n            if (typeof m.fanout === \"number\")\n                d.fanout = o.longs === String ? String(m.fanout) : m.fanout;\n            else\n                d.fanout = o.longs === String ? $util.Long.prototype.toString.call(m.fanout) : o.longs === Number ? new $util.LongBits(m.fanout.low >>> 0, m.fanout.high >>> 0).toNumber(true) : m.fanout;\n        }\n        if (m.mode != null && m.hasOwnProperty(\"mode\")) {\n            d.mode = m.mode;\n        }\n        if (m.mtime != null && m.hasOwnProperty(\"mtime\")) {\n            d.mtime = $root.UnixTime.toObject(m.mtime, o);\n        }\n        return d;\n    };\n\n    /**\n     * Converts this Data to JSON.\n     * @function toJSON\n     * @memberof Data\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    Data.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    /**\n     * DataType enum.\n     * @name Data.DataType\n     * @enum {number}\n     * @property {number} Raw=0 Raw value\n     * @property {number} Directory=1 Directory value\n     * @property {number} File=2 File value\n     * @property {number} Metadata=3 Metadata value\n     * @property {number} Symlink=4 Symlink value\n     * @property {number} HAMTShard=5 HAMTShard value\n     */\n    Data.DataType = (function() {\n        const valuesById = {}, values = Object.create(valuesById);\n        values[valuesById[0] = \"Raw\"] = 0;\n        values[valuesById[1] = \"Directory\"] = 1;\n        values[valuesById[2] = \"File\"] = 2;\n        values[valuesById[3] = \"Metadata\"] = 3;\n        values[valuesById[4] = \"Symlink\"] = 4;\n        values[valuesById[5] = \"HAMTShard\"] = 5;\n        return values;\n    })();\n\n    return Data;\n})();\n\nexport const UnixTime = $root.UnixTime = (() => {\n\n    /**\n     * Properties of an UnixTime.\n     * @exports IUnixTime\n     * @interface IUnixTime\n     * @property {number} Seconds UnixTime Seconds\n     * @property {number|null} [FractionalNanoseconds] UnixTime FractionalNanoseconds\n     */\n\n    /**\n     * Constructs a new UnixTime.\n     * @exports UnixTime\n     * @classdesc Represents an UnixTime.\n     * @implements IUnixTime\n     * @constructor\n     * @param {IUnixTime=} [p] Properties to set\n     */\n    function UnixTime(p) {\n        if (p)\n            for (var ks = Object.keys(p), i = 0; i < ks.length; ++i)\n                if (p[ks[i]] != null)\n                    this[ks[i]] = p[ks[i]];\n    }\n\n    /**\n     * UnixTime Seconds.\n     * @member {number} Seconds\n     * @memberof UnixTime\n     * @instance\n     */\n    UnixTime.prototype.Seconds = $util.Long ? $util.Long.fromBits(0,0,false) : 0;\n\n    /**\n     * UnixTime FractionalNanoseconds.\n     * @member {number} FractionalNanoseconds\n     * @memberof UnixTime\n     * @instance\n     */\n    UnixTime.prototype.FractionalNanoseconds = 0;\n\n    /**\n     * Encodes the specified UnixTime message. Does not implicitly {@link UnixTime.verify|verify} messages.\n     * @function encode\n     * @memberof UnixTime\n     * @static\n     * @param {IUnixTime} m UnixTime message or plain object to encode\n     * @param {$protobuf.Writer} [w] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    UnixTime.encode = function encode(m, w) {\n        if (!w)\n            w = $Writer.create();\n        w.uint32(8).int64(m.Seconds);\n        if (m.FractionalNanoseconds != null && Object.hasOwnProperty.call(m, \"FractionalNanoseconds\"))\n            w.uint32(21).fixed32(m.FractionalNanoseconds);\n        return w;\n    };\n\n    /**\n     * Decodes an UnixTime message from the specified reader or buffer.\n     * @function decode\n     * @memberof UnixTime\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} r Reader or buffer to decode from\n     * @param {number} [l] Message length if known beforehand\n     * @returns {UnixTime} UnixTime\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    UnixTime.decode = function decode(r, l) {\n        if (!(r instanceof $Reader))\n            r = $Reader.create(r);\n        var c = l === undefined ? r.len : r.pos + l, m = new $root.UnixTime();\n        while (r.pos < c) {\n            var t = r.uint32();\n            switch (t >>> 3) {\n            case 1:\n                m.Seconds = r.int64();\n                break;\n            case 2:\n                m.FractionalNanoseconds = r.fixed32();\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n            }\n        }\n        if (!m.hasOwnProperty(\"Seconds\"))\n            throw $util.ProtocolError(\"missing required 'Seconds'\", { instance: m });\n        return m;\n    };\n\n    /**\n     * Creates an UnixTime message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof UnixTime\n     * @static\n     * @param {Object.<string,*>} d Plain object\n     * @returns {UnixTime} UnixTime\n     */\n    UnixTime.fromObject = function fromObject(d) {\n        if (d instanceof $root.UnixTime)\n            return d;\n        var m = new $root.UnixTime();\n        if (d.Seconds != null) {\n            if ($util.Long)\n                (m.Seconds = $util.Long.fromValue(d.Seconds)).unsigned = false;\n            else if (typeof d.Seconds === \"string\")\n                m.Seconds = parseInt(d.Seconds, 10);\n            else if (typeof d.Seconds === \"number\")\n                m.Seconds = d.Seconds;\n            else if (typeof d.Seconds === \"object\")\n                m.Seconds = new $util.LongBits(d.Seconds.low >>> 0, d.Seconds.high >>> 0).toNumber();\n        }\n        if (d.FractionalNanoseconds != null) {\n            m.FractionalNanoseconds = d.FractionalNanoseconds >>> 0;\n        }\n        return m;\n    };\n\n    /**\n     * Creates a plain object from an UnixTime message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof UnixTime\n     * @static\n     * @param {UnixTime} m UnixTime\n     * @param {$protobuf.IConversionOptions} [o] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    UnixTime.toObject = function toObject(m, o) {\n        if (!o)\n            o = {};\n        var d = {};\n        if (o.defaults) {\n            if ($util.Long) {\n                var n = new $util.Long(0, 0, false);\n                d.Seconds = o.longs === String ? n.toString() : o.longs === Number ? n.toNumber() : n;\n            } else\n                d.Seconds = o.longs === String ? \"0\" : 0;\n            d.FractionalNanoseconds = 0;\n        }\n        if (m.Seconds != null && m.hasOwnProperty(\"Seconds\")) {\n            if (typeof m.Seconds === \"number\")\n                d.Seconds = o.longs === String ? String(m.Seconds) : m.Seconds;\n            else\n                d.Seconds = o.longs === String ? $util.Long.prototype.toString.call(m.Seconds) : o.longs === Number ? new $util.LongBits(m.Seconds.low >>> 0, m.Seconds.high >>> 0).toNumber() : m.Seconds;\n        }\n        if (m.FractionalNanoseconds != null && m.hasOwnProperty(\"FractionalNanoseconds\")) {\n            d.FractionalNanoseconds = m.FractionalNanoseconds;\n        }\n        return d;\n    };\n\n    /**\n     * Converts this UnixTime to JSON.\n     * @function toJSON\n     * @memberof UnixTime\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    UnixTime.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return UnixTime;\n})();\n\nexport const Metadata = $root.Metadata = (() => {\n\n    /**\n     * Properties of a Metadata.\n     * @exports IMetadata\n     * @interface IMetadata\n     * @property {string|null} [MimeType] Metadata MimeType\n     */\n\n    /**\n     * Constructs a new Metadata.\n     * @exports Metadata\n     * @classdesc Represents a Metadata.\n     * @implements IMetadata\n     * @constructor\n     * @param {IMetadata=} [p] Properties to set\n     */\n    function Metadata(p) {\n        if (p)\n            for (var ks = Object.keys(p), i = 0; i < ks.length; ++i)\n                if (p[ks[i]] != null)\n                    this[ks[i]] = p[ks[i]];\n    }\n\n    /**\n     * Metadata MimeType.\n     * @member {string} MimeType\n     * @memberof Metadata\n     * @instance\n     */\n    Metadata.prototype.MimeType = \"\";\n\n    /**\n     * Encodes the specified Metadata message. Does not implicitly {@link Metadata.verify|verify} messages.\n     * @function encode\n     * @memberof Metadata\n     * @static\n     * @param {IMetadata} m Metadata message or plain object to encode\n     * @param {$protobuf.Writer} [w] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Metadata.encode = function encode(m, w) {\n        if (!w)\n            w = $Writer.create();\n        if (m.MimeType != null && Object.hasOwnProperty.call(m, \"MimeType\"))\n            w.uint32(10).string(m.MimeType);\n        return w;\n    };\n\n    /**\n     * Decodes a Metadata message from the specified reader or buffer.\n     * @function decode\n     * @memberof Metadata\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} r Reader or buffer to decode from\n     * @param {number} [l] Message length if known beforehand\n     * @returns {Metadata} Metadata\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Metadata.decode = function decode(r, l) {\n        if (!(r instanceof $Reader))\n            r = $Reader.create(r);\n        var c = l === undefined ? r.len : r.pos + l, m = new $root.Metadata();\n        while (r.pos < c) {\n            var t = r.uint32();\n            switch (t >>> 3) {\n            case 1:\n                m.MimeType = r.string();\n                break;\n            default:\n                r.skipType(t & 7);\n                break;\n            }\n        }\n        return m;\n    };\n\n    /**\n     * Creates a Metadata message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof Metadata\n     * @static\n     * @param {Object.<string,*>} d Plain object\n     * @returns {Metadata} Metadata\n     */\n    Metadata.fromObject = function fromObject(d) {\n        if (d instanceof $root.Metadata)\n            return d;\n        var m = new $root.Metadata();\n        if (d.MimeType != null) {\n            m.MimeType = String(d.MimeType);\n        }\n        return m;\n    };\n\n    /**\n     * Creates a plain object from a Metadata message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof Metadata\n     * @static\n     * @param {Metadata} m Metadata\n     * @param {$protobuf.IConversionOptions} [o] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    Metadata.toObject = function toObject(m, o) {\n        if (!o)\n            o = {};\n        var d = {};\n        if (o.defaults) {\n            d.MimeType = \"\";\n        }\n        if (m.MimeType != null && m.hasOwnProperty(\"MimeType\")) {\n            d.MimeType = m.MimeType;\n        }\n        return d;\n    };\n\n    /**\n     * Converts this Metadata to JSON.\n     * @function toJSON\n     * @memberof Metadata\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    Metadata.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return Metadata;\n})();\n\nexport { $root as default };\n","import errcode from 'err-code'\nimport * as Pb from './unixfs.js'\nconst PBData = Pb.Data\n\n/**\n * @typedef {import('./types').Mtime} Mtime\n * @typedef {import('./types').MtimeLike} MtimeLike\n */\n\nconst types = [\n  'raw',\n  'directory',\n  'file',\n  'metadata',\n  'symlink',\n  'hamt-sharded-directory'\n]\n\nconst dirTypes = [\n  'directory',\n  'hamt-sharded-directory'\n]\n\nconst DEFAULT_FILE_MODE = parseInt('0644', 8)\nconst DEFAULT_DIRECTORY_MODE = parseInt('0755', 8)\n\n/**\n * @param {string | number | undefined} [mode]\n */\nexport function parseMode (mode) {\n  if (mode == null) {\n    return undefined\n  }\n\n  if (typeof mode === 'number') {\n    return mode & 0xFFF\n  }\n\n  mode = mode.toString()\n\n  if (mode.substring(0, 1) === '0') {\n    // octal string\n    return parseInt(mode, 8) & 0xFFF\n  }\n\n  // decimal string\n  return parseInt(mode, 10) & 0xFFF\n}\n\n/**\n * @param {any} input\n */\nexport function parseMtime (input) {\n  if (input == null) {\n    return undefined\n  }\n\n  /** @type {Mtime | undefined} */\n  let mtime\n\n  // { secs, nsecs }\n  if (input.secs != null) {\n    mtime = {\n      secs: input.secs,\n      nsecs: input.nsecs\n    }\n  }\n\n  // UnixFS TimeSpec\n  if (input.Seconds != null) {\n    mtime = {\n      secs: input.Seconds,\n      nsecs: input.FractionalNanoseconds\n    }\n  }\n\n  // process.hrtime()\n  if (Array.isArray(input)) {\n    mtime = {\n      secs: input[0],\n      nsecs: input[1]\n    }\n  }\n\n  // Javascript Date\n  if (input instanceof Date) {\n    const ms = input.getTime()\n    const secs = Math.floor(ms / 1000)\n\n    mtime = {\n      secs: secs,\n      nsecs: (ms - (secs * 1000)) * 1000\n    }\n  }\n\n  /*\n  TODO: https://github.com/ipfs/aegir/issues/487\n\n  // process.hrtime.bigint()\n  if (input instanceof BigInt) {\n    const secs = input / BigInt(1e9)\n    const nsecs = input - (secs * BigInt(1e9))\n\n    mtime = {\n      secs: parseInt(secs.toString()),\n      nsecs: parseInt(nsecs.toString())\n    }\n  }\n  */\n\n  if (!Object.prototype.hasOwnProperty.call(mtime, 'secs')) {\n    return undefined\n  }\n\n  if (mtime != null && mtime.nsecs != null && (mtime.nsecs < 0 || mtime.nsecs > 999999999)) {\n    throw errcode(new Error('mtime-nsecs must be within the range [0,999999999]'), 'ERR_INVALID_MTIME_NSECS')\n  }\n\n  return mtime\n}\n\nclass UnixFS {\n  /**\n   * Decode from protobuf https://github.com/ipfs/specs/blob/master/UNIXFS.md\n   *\n   * @param {Uint8Array} marshaled\n   */\n  static unmarshal (marshaled) {\n    const message = PBData.decode(marshaled)\n    const decoded = PBData.toObject(message, {\n      defaults: false,\n      arrays: true,\n      longs: Number,\n      objects: false\n    })\n\n    const data = new UnixFS({\n      type: types[decoded.Type],\n      data: decoded.Data,\n      blockSizes: decoded.blocksizes,\n      mode: decoded.mode,\n      mtime: decoded.mtime\n        ? {\n            secs: decoded.mtime.Seconds,\n            nsecs: decoded.mtime.FractionalNanoseconds\n          }\n        : undefined\n    })\n\n    // make sure we honour the original mode\n    data._originalMode = decoded.mode || 0\n\n    return data\n  }\n\n  /**\n   * @param {object} [options]\n   * @param {string} [options.type='file']\n   * @param {Uint8Array} [options.data]\n   * @param {number[]} [options.blockSizes]\n   * @param {number} [options.hashType]\n   * @param {number} [options.fanout]\n   * @param {MtimeLike | null} [options.mtime]\n   * @param {number | string} [options.mode]\n   */\n  constructor (options = {\n    type: 'file'\n  }) {\n    const {\n      type,\n      data,\n      blockSizes,\n      hashType,\n      fanout,\n      mtime,\n      mode\n    } = options\n\n    if (type && !types.includes(type)) {\n      throw errcode(new Error('Type: ' + type + ' is not valid'), 'ERR_INVALID_TYPE')\n    }\n\n    this.type = type || 'file'\n    this.data = data\n    this.hashType = hashType\n    this.fanout = fanout\n\n    /** @type {number[]} */\n    this.blockSizes = blockSizes || []\n    this._originalMode = 0\n    this.mode = parseMode(mode)\n\n    if (mtime) {\n      this.mtime = parseMtime(mtime)\n\n      if (this.mtime && !this.mtime.nsecs) {\n        this.mtime.nsecs = 0\n      }\n    }\n  }\n\n  /**\n   * @param {number | undefined} mode\n   */\n  set mode (mode) {\n    this._mode = this.isDirectory() ? DEFAULT_DIRECTORY_MODE : DEFAULT_FILE_MODE\n\n    const parsedMode = parseMode(mode)\n\n    if (parsedMode !== undefined) {\n      this._mode = parsedMode\n    }\n  }\n\n  /**\n   * @returns {number | undefined}\n   */\n  get mode () {\n    return this._mode\n  }\n\n  isDirectory () {\n    return Boolean(this.type && dirTypes.includes(this.type))\n  }\n\n  /**\n   * @param {number} size\n   */\n  addBlockSize (size) {\n    this.blockSizes.push(size)\n  }\n\n  /**\n   * @param {number} index\n   */\n  removeBlockSize (index) {\n    this.blockSizes.splice(index, 1)\n  }\n\n  /**\n   * Returns `0` for directories or `data.length + sum(blockSizes)` for everything else\n   */\n  fileSize () {\n    if (this.isDirectory()) {\n      // dirs don't have file size\n      return 0\n    }\n\n    let sum = 0\n    this.blockSizes.forEach((size) => {\n      sum += size\n    })\n\n    if (this.data) {\n      sum += this.data.length\n    }\n\n    return sum\n  }\n\n  /**\n   * encode to protobuf Uint8Array\n   */\n  marshal () {\n    let type\n\n    switch (this.type) {\n      case 'raw': type = PBData.DataType.Raw; break\n      case 'directory': type = PBData.DataType.Directory; break\n      case 'file': type = PBData.DataType.File; break\n      case 'metadata': type = PBData.DataType.Metadata; break\n      case 'symlink': type = PBData.DataType.Symlink; break\n      case 'hamt-sharded-directory': type = PBData.DataType.HAMTShard; break\n      default:\n        throw errcode(new Error('Type: ' + type + ' is not valid'), 'ERR_INVALID_TYPE')\n    }\n\n    let data = this.data\n\n    if (!this.data || !this.data.length) {\n      data = undefined\n    }\n\n    let mode\n\n    if (this.mode != null) {\n      mode = (this._originalMode & 0xFFFFF000) | (parseMode(this.mode) || 0)\n\n      if (mode === DEFAULT_FILE_MODE && !this.isDirectory()) {\n        mode = undefined\n      }\n\n      if (mode === DEFAULT_DIRECTORY_MODE && this.isDirectory()) {\n        mode = undefined\n      }\n    }\n\n    let mtime\n\n    if (this.mtime != null) {\n      const parsed = parseMtime(this.mtime)\n\n      if (parsed) {\n        mtime = {\n          Seconds: parsed.secs,\n          FractionalNanoseconds: parsed.nsecs\n        }\n\n        if (mtime.FractionalNanoseconds === 0) {\n          delete mtime.FractionalNanoseconds\n        }\n      }\n    }\n\n    const pbData = {\n      Type: type,\n      Data: data,\n      filesize: this.isDirectory() ? undefined : this.fileSize(),\n      blocksizes: this.blockSizes,\n      hashType: this.hashType,\n      fanout: this.fanout,\n      mode,\n      mtime\n    }\n\n    return PBData.encode(pbData).finish()\n  }\n}\n\nexport { UnixFS }\n","/**\n * Collects all values from an (async) iterable and returns them as an array\n */\nexport default async function all(source) {\n    const arr = [];\n    for await (const entry of source) {\n        arr.push(entry);\n    }\n    return arr;\n}\n//# sourceMappingURL=index.js.map","export default function peekableIterator(iterable) {\n    // @ts-expect-error\n    const [iterator, symbol] = iterable[Symbol.asyncIterator] != null\n        // @ts-expect-error\n        ? [iterable[Symbol.asyncIterator](), Symbol.asyncIterator]\n        // @ts-expect-error\n        : [iterable[Symbol.iterator](), Symbol.iterator];\n    const queue = [];\n    // @ts-expect-error\n    return {\n        peek: () => {\n            return iterator.next();\n        },\n        push: (value) => {\n            queue.push(value);\n        },\n        next: () => {\n            if (queue.length > 0) {\n                return {\n                    done: false,\n                    value: queue.shift()\n                };\n            }\n            return iterator.next();\n        },\n        [symbol]() {\n            return this;\n        }\n    };\n}\n//# sourceMappingURL=index.js.map","\nexport default () => {}\n","import errCode from 'err-code'\nimport browserStreamToIt from 'browser-readablestream-to-it'\nimport itPeekable from 'it-peekable'\nimport map from 'it-map'\nimport {\n  isBytes,\n  isBlob,\n  isReadableStream,\n  isFileObject\n} from './utils.js'\nimport {\n  parseMtime,\n  parseMode\n} from 'ipfs-unixfs'\n\n/**\n * @typedef {import('ipfs-core-types/src/utils').ImportCandidate} ImportCandidate\n * @typedef {import('ipfs-core-types/src/utils').ToContent} ToContent\n * @typedef {import('ipfs-unixfs-importer').ImportCandidate} ImporterImportCandidate\n * @typedef {import('ipfs-core-types/src/utils').ImportCandidateStream} ImportCandidateStream\n */\n\n/**\n * @param {ImportCandidateStream} input\n * @param {(content:ToContent) => Promise<AsyncIterable<Uint8Array>>} normaliseContent\n */\n// eslint-disable-next-line complexity\nexport async function * normaliseCandidateMultiple (input, normaliseContent) {\n  // String\n  // Uint8Array|ArrayBuffer|TypedArray\n  // Blob|File\n  // fs.ReadStream\n  // @ts-expect-error _readableState is a property of a node fs.ReadStream\n  if (typeof input === 'string' || input instanceof String || isBytes(input) || isBlob(input) || input._readableState) {\n    throw errCode(new Error('Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead'), 'ERR_UNEXPECTED_INPUT')\n  }\n\n  // Browser ReadableStream\n  if (isReadableStream(input)) {\n    input = browserStreamToIt(input)\n  }\n\n  // Iterable<?>\n  if (Symbol.iterator in input || Symbol.asyncIterator in input) {\n    const peekable = itPeekable(input)\n    const { value, done } = await peekable.peek()\n\n    if (done) {\n      // make sure empty iterators result in empty files\n      yield * []\n      return\n    }\n\n    peekable.push(value)\n\n    // (Async)Iterable<Number>\n    // (Async)Iterable<Bytes>\n    if (Number.isInteger(value)) {\n      throw errCode(new Error('Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead'), 'ERR_UNEXPECTED_INPUT')\n    }\n\n    // (Async)Iterable<fs.ReadStream>\n    // @ts-expect-error private field\n    if (value._readableState) {\n      // @ts-expect-error Node fs.ReadStreams have a `.path` property so we need to pass it as the content\n      yield * map(peekable, (/** @type {ImportCandidate} */ value) => toFileObject({ content: value }, normaliseContent))\n      return\n    }\n\n    if (isBytes(value)) {\n      // @ts-expect-error peekable is still an iterable of ImportCandidates\n      yield toFileObject({ content: peekable }, normaliseContent)\n      return\n    }\n\n    // (Async)Iterable<(Async)Iterable<?>>\n    // (Async)Iterable<ReadableStream<?>>\n    // ReadableStream<(Async)Iterable<?>>\n    // ReadableStream<ReadableStream<?>>\n    if (isFileObject(value) || value[Symbol.iterator] || value[Symbol.asyncIterator] || isReadableStream(value) || isBlob(value)) {\n      yield * map(peekable, (/** @type {ImportCandidate} */ value) => toFileObject(value, normaliseContent))\n      return\n    }\n  }\n\n  // { path, content: ? }\n  // Note: Detected _after_ (Async)Iterable<?> because Node.js fs.ReadStreams have a\n  // `path` property that passes this check.\n  if (isFileObject(input)) {\n    throw errCode(new Error('Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead'), 'ERR_UNEXPECTED_INPUT')\n  }\n\n  throw errCode(new Error('Unexpected input: ' + typeof input), 'ERR_UNEXPECTED_INPUT')\n}\n\n/**\n * @param {ImportCandidate} input\n * @param {(content:ToContent) => Promise<AsyncIterable<Uint8Array>>} normaliseContent\n */\nasync function toFileObject (input, normaliseContent) {\n  // @ts-expect-error - Those properties don't exist on most input types\n  const { path, mode, mtime, content } = input\n\n  /** @type {ImporterImportCandidate} */\n  const file = {\n    path: path || '',\n    mode: parseMode(mode),\n    mtime: parseMtime(mtime)\n  }\n\n  if (content) {\n    file.content = await normaliseContent(content)\n  } else if (!path) { // Not already a file object with path or content prop\n    // @ts-expect-error - input still can be different ToContent\n    file.content = await normaliseContent(input)\n  }\n\n  return file\n}\n","import errCode from 'err-code'\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string'\nimport browserStreamToIt from 'browser-readablestream-to-it'\nimport blobToIt from 'blob-to-it'\nimport itPeekable from 'it-peekable'\nimport all from 'it-all'\nimport map from 'it-map'\nimport {\n  isBytes,\n  isReadableStream,\n  isBlob\n} from './utils.js'\n\n/**\n * @template T\n * @param {T} thing\n */\nasync function * toAsyncIterable (thing) {\n  yield thing\n}\n\n/**\n * @param {import('ipfs-core-types/src/utils').ToContent} input\n */\nexport async function normaliseContent (input) {\n  // Bytes | String\n  if (isBytes(input)) {\n    return toAsyncIterable(toBytes(input))\n  }\n\n  if (typeof input === 'string' || input instanceof String) {\n    return toAsyncIterable(toBytes(input.toString()))\n  }\n\n  // Blob\n  if (isBlob(input)) {\n    return blobToIt(input)\n  }\n\n  // Browser stream\n  if (isReadableStream(input)) {\n    input = browserStreamToIt(input)\n  }\n\n  // (Async)Iterator<?>\n  if (Symbol.iterator in input || Symbol.asyncIterator in input) {\n    /** @type {any} peekable */\n    const peekable = itPeekable(input)\n\n    /** @type {any} value */\n    const { value, done } = await peekable.peek()\n\n    if (done) {\n      // make sure empty iterators result in empty files\n      return toAsyncIterable(new Uint8Array(0))\n    }\n\n    peekable.push(value)\n\n    // (Async)Iterable<Number>\n    if (Number.isInteger(value)) {\n      return toAsyncIterable(Uint8Array.from(await all(peekable)))\n    }\n\n    // (Async)Iterable<Bytes|String>\n    if (isBytes(value) || typeof value === 'string' || value instanceof String) {\n      return map(peekable, toBytes)\n    }\n  }\n\n  throw errCode(new Error(`Unexpected input: ${input}`), 'ERR_UNEXPECTED_INPUT')\n}\n\n/**\n * @param {ArrayBuffer | ArrayBufferView | string | InstanceType<typeof window.String> | number[]} chunk\n */\nfunction toBytes (chunk) {\n  if (chunk instanceof Uint8Array) {\n    return chunk\n  }\n\n  if (ArrayBuffer.isView(chunk)) {\n    return new Uint8Array(chunk.buffer, chunk.byteOffset, chunk.byteLength)\n  }\n\n  if (chunk instanceof ArrayBuffer) {\n    return new Uint8Array(chunk)\n  }\n\n  if (Array.isArray(chunk)) {\n    return Uint8Array.from(chunk)\n  }\n\n  return uint8ArrayFromString(chunk.toString())\n}\n","/* eslint-env browser */\nimport browserReadableStreamToIt from 'browser-readablestream-to-it';\nexport default function blobToIt(blob) {\n    if (typeof blob.stream === 'function') {\n        return browserReadableStreamToIt(blob.stream());\n    }\n    // firefox < 69 does not support blob.stream()\n    // @ts-expect-error - response.body is optional, but in practice it's a stream.\n    return browserReadableStreamToIt(new Response(blob).body);\n}\n//# sourceMappingURL=index.js.map","import { normaliseContent } from './normalise-content.js'\nimport { normaliseCandidateMultiple } from './normalise-candidate-multiple.js'\n\n/**\n * @typedef {import('ipfs-core-types/src/utils').ImportCandidateStream} ImportCandidateStream\n */\n\n/**\n * Transforms any of the `ipfs.addAll` input types into\n *\n * ```\n * AsyncIterable<{ path, mode, mtime, content: AsyncIterable<Uint8Array> }>\n * ```\n *\n * See https://github.com/ipfs/js-ipfs/blob/master/docs/core-api/FILES.md#ipfsadddata-options\n *\n * @param {ImportCandidateStream} input\n */\nexport function normaliseInput (input) {\n  return normaliseCandidateMultiple(input, normaliseContent)\n}\n","import errCode from 'err-code'\nimport browserStreamToIt from 'browser-readablestream-to-it'\nimport itPeekable from 'it-peekable'\nimport {\n  isBytes,\n  isBlob,\n  isReadableStream,\n  isFileObject\n} from './utils.js'\nimport {\n  parseMtime,\n  parseMode\n} from 'ipfs-unixfs'\n\n/**\n * @typedef {import('ipfs-core-types/src/utils').ToContent} ToContent\n * @typedef {import('ipfs-unixfs-importer').ImportCandidate} ImporterImportCandidate\n * @typedef {import('ipfs-core-types/src/utils').ImportCandidate} ImportCandidate\n * @typedef {import('ipfs-core-types/src/utils').ImportCandidateStream} ImportCandidateStream\n */\n\n/**\n * @param {ImportCandidate} input\n * @param {(content:ToContent) => Promise<AsyncIterable<Uint8Array>>} normaliseContent\n */\n// eslint-disable-next-line complexity\nexport async function * normaliseCandidateSingle (input, normaliseContent) {\n  if (input === null || input === undefined) {\n    throw errCode(new Error(`Unexpected input: ${input}`), 'ERR_UNEXPECTED_INPUT')\n  }\n\n  // String\n  if (typeof input === 'string' || input instanceof String) {\n    yield toFileObject(input.toString(), normaliseContent)\n    return\n  }\n\n  // Uint8Array|ArrayBuffer|TypedArray\n  // Blob|File\n  if (isBytes(input) || isBlob(input)) {\n    yield toFileObject(input, normaliseContent)\n    return\n  }\n\n  // Browser ReadableStream\n  if (isReadableStream(input)) {\n    input = browserStreamToIt(input)\n  }\n\n  // Iterable<?>\n  if (Symbol.iterator in input || Symbol.asyncIterator in input) {\n    const peekable = itPeekable(input)\n\n    /** @type {any} value **/\n    const { value, done } = await peekable.peek()\n\n    if (done) {\n      // make sure empty iterators result in empty files\n      yield { content: [] }\n      return\n    }\n\n    peekable.push(value)\n\n    // (Async)Iterable<Number>\n    // (Async)Iterable<Bytes>\n    // (Async)Iterable<String>\n    if (Number.isInteger(value) || isBytes(value) || typeof value === 'string' || value instanceof String) {\n      yield toFileObject(peekable, normaliseContent)\n      return\n    }\n\n    throw errCode(new Error('Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead'), 'ERR_UNEXPECTED_INPUT')\n  }\n\n  // { path, content: ? }\n  // Note: Detected _after_ (Async)Iterable<?> because Node.js fs.ReadStreams have a\n  // `path` property that passes this check.\n  if (isFileObject(input)) {\n    yield toFileObject(input, normaliseContent)\n    return\n  }\n\n  throw errCode(new Error('Unexpected input: cannot convert \"' + typeof input + '\" into ImportCandidate'), 'ERR_UNEXPECTED_INPUT')\n}\n\n/**\n * @param {ImportCandidate} input\n * @param {(content:ToContent) => Promise<AsyncIterable<Uint8Array>>} normaliseContent\n */\nasync function toFileObject (input, normaliseContent) {\n  // @ts-expect-error - Those properties don't exist on most input types\n  const { path, mode, mtime, content } = input\n\n  /** @type {ImporterImportCandidate} */\n  const file = {\n    path: path || '',\n    mode: parseMode(mode),\n    mtime: parseMtime(mtime)\n  }\n\n  if (content) {\n    file.content = await normaliseContent(content)\n  } else if (!path) { // Not already a file object with path or content prop\n    // @ts-expect-error - input still can be different ToContent\n    file.content = await normaliseContent(input)\n  }\n\n  return file\n}\n","import { normaliseContent } from './normalise-content.js'\nimport { normaliseCandidateSingle } from './normalise-candidate-single.js'\n\n/**\n * @typedef {import('ipfs-core-types/src/utils').ImportCandidate} ImportCandidate\n */\n\n/**\n * Transforms any of the `ipfs.add` input types into\n *\n * ```\n * AsyncIterable<{ path, mode, mtime, content: AsyncIterable<Uint8Array> }>\n * ```\n *\n * See https://github.com/ipfs/js-ipfs/blob/master/docs/core-api/FILES.md#ipfsadddata-options\n *\n * @param {ImportCandidate} input\n */\nexport function normaliseInput (input) {\n  return normaliseCandidateSingle(input, normaliseContent)\n}\n","/**\n * @param {any} obj\n * @returns {obj is ArrayBufferView|ArrayBuffer}\n */\nexport function isBytes (obj) {\n  return ArrayBuffer.isView(obj) || obj instanceof ArrayBuffer\n}\n\n/**\n * @param {any} obj\n * @returns {obj is globalThis.Blob}\n */\nexport function isBlob (obj) {\n  return obj.constructor &&\n    (obj.constructor.name === 'Blob' || obj.constructor.name === 'File') &&\n    typeof obj.stream === 'function'\n}\n\n/**\n * An object with a path or content property\n *\n * @param {any} obj\n * @returns {obj is import('ipfs-core-types/src/utils').ImportCandidate}\n */\nexport function isFileObject (obj) {\n  return typeof obj === 'object' && (obj.path || obj.content)\n}\n\n/**\n * @param {any} value\n * @returns {value is ReadableStream}\n */\nexport const isReadableStream = (value) =>\n  value && typeof value.getReader === 'function'\n","/**\n * @typedef {import('multiformats/bases/interface').MultibaseCodec<any>} MultibaseCodec\n * @typedef {import('./types').LoadBaseFn} LoadBaseFn\n * @typedef {import('ipfs-core-types/src/utils').AbortOptions} AbortOptions\n */\n\n/**\n * @type {LoadBaseFn}\n */\nconst LOAD_BASE = (name) => Promise.reject(new Error(`No base found for \"${name}\"`))\n\nexport class Multibases {\n  /**\n   * @param {object} options\n   * @param {LoadBaseFn} [options.loadBase]\n   * @param {MultibaseCodec[]} options.bases\n   */\n  constructor (options) {\n    // Object with current list of active resolvers\n    /** @type {Record<string, MultibaseCodec>}} */\n    this._basesByName = {}\n\n    // Object with current list of active resolvers\n    /** @type {Record<string, MultibaseCodec>}} */\n    this._basesByPrefix = {}\n\n    this._loadBase = options.loadBase || LOAD_BASE\n\n    // Enable all supplied codecs\n    for (const base of options.bases) {\n      this.addBase(base)\n    }\n  }\n\n  /**\n   * Add support for a multibase codec\n   *\n   * @param {MultibaseCodec} base\n   */\n  addBase (base) {\n    if (this._basesByName[base.name] || this._basesByPrefix[base.prefix]) {\n      throw new Error(`Codec already exists for codec \"${base.name}\"`)\n    }\n\n    this._basesByName[base.name] = base\n    this._basesByPrefix[base.prefix] = base\n  }\n\n  /**\n   * Remove support for a multibase codec\n   *\n   * @param {MultibaseCodec} base\n   */\n  removeBase (base) {\n    delete this._basesByName[base.name]\n    delete this._basesByPrefix[base.prefix]\n  }\n\n  /**\n   * @param {string} nameOrPrefix\n   */\n  async getBase (nameOrPrefix) {\n    if (this._basesByName[nameOrPrefix]) {\n      return this._basesByName[nameOrPrefix]\n    }\n\n    if (this._basesByPrefix[nameOrPrefix]) {\n      return this._basesByPrefix[nameOrPrefix]\n    }\n\n    // If not supported, attempt to dynamically load this codec\n    const base = await this._loadBase(nameOrPrefix)\n\n    if (this._basesByName[base.name] == null && this._basesByPrefix[base.prefix] == null) {\n      this.addBase(base)\n    }\n\n    return base\n  }\n\n  listBases () {\n    return Object.values(this._basesByName)\n  }\n}\n","/**\n * @typedef {import('multiformats/codecs/interface').BlockCodec<any, any>} BlockCodec\n * @typedef {import('./types').LoadCodecFn} LoadCodecFn\n * @typedef {import('ipfs-core-types/src/utils').AbortOptions} AbortOptions\n */\n\n/**\n * @type {LoadCodecFn}\n */\nconst LOAD_CODEC = (codeOrName) => Promise.reject(new Error(`No codec found for \"${codeOrName}\"`))\n\nexport class Multicodecs {\n  /**\n   * @param {object} options\n   * @param {LoadCodecFn} [options.loadCodec]\n   * @param {BlockCodec[]} options.codecs\n   */\n  constructor (options) {\n    // Object with current list of active resolvers\n    /** @type {Record<string, BlockCodec>}} */\n    this._codecsByName = {}\n\n    // Object with current list of active resolvers\n    /** @type {Record<number, BlockCodec>}} */\n    this._codecsByCode = {}\n\n    this._loadCodec = options.loadCodec || LOAD_CODEC\n\n    // Enable all supplied codecs\n    for (const codec of options.codecs) {\n      this.addCodec(codec)\n    }\n  }\n\n  /**\n   * Add support for a block codec\n   *\n   * @param {BlockCodec} codec\n   */\n  addCodec (codec) {\n    if (this._codecsByName[codec.name] || this._codecsByCode[codec.code]) {\n      throw new Error(`Resolver already exists for codec \"${codec.name}\"`)\n    }\n\n    this._codecsByName[codec.name] = codec\n    this._codecsByCode[codec.code] = codec\n  }\n\n  /**\n   * Remove support for a block codec\n   *\n   * @param {BlockCodec} codec\n   */\n  removeCodec (codec) {\n    delete this._codecsByName[codec.name]\n    delete this._codecsByCode[codec.code]\n  }\n\n  /**\n   * @param {number | string} code\n   */\n  async getCodec (code) {\n    const table = typeof code === 'string' ? this._codecsByName : this._codecsByCode\n\n    if (table[code]) {\n      return table[code]\n    }\n\n    // If not supported, attempt to dynamically load this codec\n    const codec = await this._loadCodec(code)\n\n    if (table[code] == null) {\n      this.addCodec(codec)\n    }\n\n    return codec\n  }\n\n  listCodecs () {\n    return Object.values(this._codecsByName)\n  }\n}\n","/**\n * @typedef {import('multiformats/hashes/interface').MultihashHasher} MultihashHasher\n * @typedef {import('./types').LoadHasherFn} LoadHasherFn\n * @typedef {import('ipfs-core-types/src/utils').AbortOptions} AbortOptions\n */\n\n/**\n * @type {LoadHasherFn}\n */\nconst LOAD_HASHER = (codeOrName) => Promise.reject(new Error(`No hasher found for \"${codeOrName}\"`))\n\nexport class Multihashes {\n  /**\n   * @param {object} options\n   * @param {LoadHasherFn} [options.loadHasher]\n   * @param {MultihashHasher[]} options.hashers\n   */\n  constructor (options) {\n    // Object with current list of active hashers\n    /** @type {Record<string, MultihashHasher>}} */\n    this._hashersByName = {}\n\n    // Object with current list of active hashers\n    /** @type {Record<number, MultihashHasher>}} */\n    this._hashersByCode = {}\n\n    this._loadHasher = options.loadHasher || LOAD_HASHER\n\n    // Enable all supplied hashers\n    for (const hasher of options.hashers) {\n      this.addHasher(hasher)\n    }\n  }\n\n  /**\n   * Add support for a multibase hasher\n   *\n   * @param {MultihashHasher} hasher\n   */\n  addHasher (hasher) {\n    if (this._hashersByName[hasher.name] || this._hashersByCode[hasher.code]) {\n      throw new Error(`Resolver already exists for codec \"${hasher.name}\"`)\n    }\n\n    this._hashersByName[hasher.name] = hasher\n    this._hashersByCode[hasher.code] = hasher\n  }\n\n  /**\n   * Remove support for a multibase hasher\n   *\n   * @param {MultihashHasher} hasher\n   */\n  removeHasher (hasher) {\n    delete this._hashersByName[hasher.name]\n    delete this._hashersByCode[hasher.code]\n  }\n\n  /**\n   * @param {number | string} code\n   */\n  async getHasher (code) {\n    const table = typeof code === 'string' ? this._hashersByName : this._hashersByCode\n\n    if (table[code]) {\n      return table[code]\n    }\n\n    // If not supported, attempt to dynamically load this hasher\n    const hasher = await this._loadHasher(code)\n\n    if (table[code] == null) {\n      this.addHasher(hasher)\n    }\n\n    return hasher\n  }\n\n  listHashers () {\n    return Object.values(this._hashersByName)\n  }\n}\n","import errCode from 'err-code'\nimport itPeekable from 'it-peekable'\nimport browserStreamToIt from 'browser-readablestream-to-it'\nimport all from 'it-all'\nimport {\n  isBytes,\n  isBlob,\n  isReadableStream\n} from './utils.js'\n\n/**\n * @param {import('ipfs-core-types/src/utils').ToContent} input\n */\nexport async function normaliseContent (input) {\n  // Bytes\n  if (isBytes(input)) {\n    return new Blob([input])\n  }\n\n  // String\n  if (typeof input === 'string' || input instanceof String) {\n    return new Blob([input.toString()])\n  }\n\n  // Blob | File\n  if (isBlob(input)) {\n    return input\n  }\n\n  // Browser stream\n  if (isReadableStream(input)) {\n    input = browserStreamToIt(input)\n  }\n\n  // (Async)Iterator<?>\n  if (Symbol.iterator in input || Symbol.asyncIterator in input) {\n    /** @type {any} peekable */\n    const peekable = itPeekable(input)\n\n    /** @type {any} value **/\n    const { value, done } = await peekable.peek()\n\n    if (done) {\n      // make sure empty iterators result in empty files\n      return itToBlob(peekable)\n    }\n\n    peekable.push(value)\n\n    // (Async)Iterable<Number>\n    if (Number.isInteger(value)) {\n      return new Blob([Uint8Array.from(await all(peekable))])\n    }\n\n    // (Async)Iterable<Bytes|String>\n    if (isBytes(value) || typeof value === 'string' || value instanceof String) {\n      return itToBlob(peekable)\n    }\n  }\n\n  throw errCode(new Error(`Unexpected input: ${input}`), 'ERR_UNEXPECTED_INPUT')\n}\n\n/**\n * @param {AsyncIterable<BlobPart>|Iterable<BlobPart>} stream\n */\nasync function itToBlob (stream) {\n  const parts = []\n\n  for await (const chunk of stream) {\n    parts.push(chunk)\n  }\n\n  return new Blob(parts)\n}\n","\n/**\n * @param {number | string | undefined} mode\n */\nexport function modeToString (mode) {\n  if (mode == null) {\n    return undefined\n  }\n\n  if (typeof mode === 'string') {\n    return mode\n  }\n\n  return mode.toString(8).padStart(4, '0')\n}\n","\n// Import browser version otherwise electron-renderer will end up with node\n// version and fail.\nimport { normaliseInput } from './files/normalise-input-multiple.browser.js'\nimport { modeToString } from './mode-to-string.js'\n\n/**\n * @typedef {import('ipfs-core-types/src/utils').ImportCandidateStream} ImportCandidateStream\n */\n\n/**\n * @param {ImportCandidateStream} source\n * @param {AbortController} abortController\n * @param {Headers|Record<string, string>} [headers]\n */\nexport async function multipartRequest (source, abortController, headers = {}) {\n  const parts = []\n  const formData = new FormData()\n  let index = 0\n  let total = 0\n\n  for await (const { content, path, mode, mtime } of normaliseInput(source)) {\n    let fileSuffix = ''\n    const type = content ? 'file' : 'dir'\n\n    if (index > 0) {\n      fileSuffix = `-${index}`\n    }\n\n    let fieldName = type + fileSuffix\n    const qs = []\n\n    if (mode !== null && mode !== undefined) {\n      qs.push(`mode=${modeToString(mode)}`)\n    }\n\n    if ((mtime) != null) {\n      const { secs, nsecs } = (mtime)\n\n      qs.push(`mtime=${secs}`)\n\n      if (nsecs != null) {\n        qs.push(`mtime-nsecs=${nsecs}`)\n      }\n    }\n\n    if (qs.length) {\n      fieldName = `${fieldName}?${qs.join('&')}`\n    }\n\n    if (content) {\n      formData.set(fieldName, content, path != null ? encodeURIComponent(path) : undefined)\n      const end = total + content.size\n      parts.push({ name: path, start: total, end })\n      total = end\n    } else if (path != null) {\n      formData.set(fieldName, new File([''], encodeURIComponent(path), { type: 'application/x-directory' }))\n    } else {\n      throw new Error('path or content or both must be set')\n    }\n\n    index++\n  }\n\n  return {\n    total,\n    parts,\n    headers,\n    body: formData\n  }\n}\n","import { normaliseContent } from './normalise-content.browser.js'\nimport { normaliseCandidateMultiple } from './normalise-candidate-multiple.js'\n\n/**\n * @typedef {import('ipfs-core-types/src/utils').ImportCandidateStream} ImportCandidateStream\n * @typedef {import('ipfs-core-types/src/utils').BrowserImportCandidate} BrowserImportCandidate\n */\n\n/**\n * Transforms any of the `ipfs.addAll` input types into\n *\n * ```\n * AsyncIterable<{ path, mode, mtime, content: Blob }>\n * ```\n *\n * See https://github.com/ipfs/js-ipfs/blob/master/docs/core-api/FILES.md#ipfsadddata-options\n *\n * @param {ImportCandidateStream} input\n * @returns {AsyncGenerator<BrowserImportCandidate, void, undefined>}\n */\nexport function normaliseInput (input) {\n  // @ts-expect-error browser normaliseContent returns a Blob not an AsyncIterable<Uint8Array>\n  return normaliseCandidateMultiple(input, normaliseContent, true)\n}\n","import errCode from 'err-code'\nimport { CID } from 'multiformats/cid'\n\n/**\n * @typedef {object} Pinnable\n * @property {string | InstanceType<typeof window.String> | CID} [path]\n * @property {CID} [cid]\n * @property {boolean} [recursive]\n * @property {any} [metadata]\n *\n * @typedef {CID|string|InstanceType<typeof window.String>|Pinnable} ToPin\n * @typedef {ToPin|Iterable<ToPin>|AsyncIterable<ToPin>} Source\n *\n * @typedef {object} Pin\n * @property {string|CID} path\n * @property {boolean} recursive\n * @property {any} [metadata]\n */\n\n/**\n * @param {any} thing\n * @returns {thing is IterableIterator<any> & Iterator<any>}\n */\nfunction isIterable (thing) {\n  return Symbol.iterator in thing\n}\n\n/**\n * @param {any} thing\n * @returns {thing is AsyncIterableIterator<any> & AsyncIterator<any>}\n */\nfunction isAsyncIterable (thing) {\n  return Symbol.asyncIterator in thing\n}\n\n/**\n * @param {any} thing\n * @returns {thing is CID}\n */\nfunction isCID (thing) {\n  return CID.asCID(thing) != null\n}\n\n/**\n * Transform one of:\n *\n * ```ts\n * CID\n * String\n * { cid: CID recursive, metadata }\n * { path: String recursive, metadata }\n * Iterable<CID>\n * Iterable<String>\n * Iterable<{ cid: CID recursive, metadata }>\n * Iterable<{ path: String recursive, metadata }>\n * AsyncIterable<CID>\n * AsyncIterable<String>\n * AsyncIterable<{ cid: CID recursive, metadata }>\n * AsyncIterable<{ path: String recursive, metadata }>\n * ```\n * Into:\n *\n * ```ts\n * AsyncIterable<{ path: CID|String, recursive:boolean, metadata }>\n * ```\n *\n * @param {Source} input\n * @returns {AsyncIterable<Pin>}\n */\n// eslint-disable-next-line complexity\nexport async function * normaliseInput (input) {\n  // must give us something\n  if (input === null || input === undefined) {\n    throw errCode(new Error(`Unexpected input: ${input}`), 'ERR_UNEXPECTED_INPUT')\n  }\n\n  // CID\n  const cid = CID.asCID(input)\n\n  if (cid) {\n    yield toPin({ cid })\n    return\n  }\n\n  if (input instanceof String || typeof input === 'string') {\n    yield toPin({ path: input })\n    return\n  }\n\n  // { cid: CID recursive, metadata }\n  // @ts-expect-error - it still could be iterable or async iterable\n  if (input.cid != null || input.path != null) {\n    // @ts-expect-error\n    return yield toPin(input)\n  }\n\n  // Iterable<?>\n  if (isIterable(input)) {\n    const iterator = input[Symbol.iterator]()\n    const first = iterator.next()\n\n    if (first.done) {\n      return iterator\n    }\n\n    // Iterable<CID>\n    if (isCID(first.value)) {\n      yield toPin({ cid: first.value })\n      for (const cid of iterator) {\n        yield toPin({ cid })\n      }\n      return\n    }\n\n    // Iterable<String>\n    if (first.value instanceof String || typeof first.value === 'string') {\n      yield toPin({ path: first.value })\n      for (const path of iterator) {\n        yield toPin({ path })\n      }\n      return\n    }\n\n    // Iterable<Pinnable>\n    if (first.value.cid != null || first.value.path != null) {\n      yield toPin(first.value)\n      for (const obj of iterator) {\n        yield toPin(obj)\n      }\n      return\n    }\n\n    throw errCode(new Error('Unexpected input: ' + typeof input), 'ERR_UNEXPECTED_INPUT')\n  }\n\n  // AsyncIterable<?>\n  if (isAsyncIterable(input)) {\n    const iterator = input[Symbol.asyncIterator]()\n    const first = await iterator.next()\n    if (first.done) return iterator\n\n    // AsyncIterable<CID>\n    if (isCID(first.value)) {\n      yield toPin({ cid: first.value })\n      for await (const cid of iterator) {\n        yield toPin({ cid })\n      }\n      return\n    }\n\n    // AsyncIterable<String>\n    if (first.value instanceof String || typeof first.value === 'string') {\n      yield toPin({ path: first.value })\n      for await (const path of iterator) {\n        yield toPin({ path })\n      }\n      return\n    }\n\n    // AsyncIterable<{ cid: CID|String recursive, metadata }>\n    if (first.value.cid != null || first.value.path != null) {\n      yield toPin(first.value)\n      for await (const obj of iterator) {\n        yield toPin(obj)\n      }\n      return\n    }\n\n    throw errCode(new Error('Unexpected input: ' + typeof input), 'ERR_UNEXPECTED_INPUT')\n  }\n\n  throw errCode(new Error('Unexpected input: ' + typeof input), 'ERR_UNEXPECTED_INPUT')\n}\n\n/**\n * @param {Pinnable} input\n */\nfunction toPin (input) {\n  const path = input.cid || `${input.path}`\n\n  if (!path) {\n    throw errCode(new Error('Unexpected input: Please path either a CID or an IPFS path'), 'ERR_UNEXPECTED_INPUT')\n  }\n\n  /** @type {Pin} */\n  const pin = {\n    path,\n    recursive: input.recursive !== false\n  }\n\n  if (input.metadata != null) {\n    pin.metadata = input.metadata\n  }\n\n  return pin\n}\n","import { CID } from 'multiformats/cid'\nimport errCode from 'err-code'\n\nconst IPFS_PREFIX = '/ipfs/'\n\n/**\n * @param {string|Uint8Array|CID} string\n * @returns {{cid:CID, path?:string}}\n */\nexport function toCidAndPath (string) {\n  if (string instanceof Uint8Array) {\n    try {\n      string = CID.decode(string)\n    } catch (/** @type {any} */ err) {\n      throw errCode(err, 'ERR_INVALID_CID')\n    }\n  }\n\n  let cid = CID.asCID(string)\n\n  if (cid) {\n    return {\n      cid,\n      path: undefined\n    }\n  }\n\n  string = string.toString()\n\n  if (string.startsWith(IPFS_PREFIX)) {\n    string = string.substring(IPFS_PREFIX.length)\n  }\n\n  const parts = string.split('/')\n  let path\n\n  try {\n    cid = CID.parse(parts.shift() || '')\n  } catch (/** @type {any} */ err) {\n    throw errCode(err, 'ERR_INVALID_CID')\n  }\n\n  if (parts.length) {\n    path = `/${parts.join('/')}`\n  }\n\n  return {\n    cid,\n    path\n  }\n}\n","import { multiaddr } from '@multiformats/multiaddr'\nimport { multiaddrToUri } from '@multiformats/multiaddr-to-uri'\n\n/**\n * @typedef {import('@multiformats/multiaddr').Multiaddr} Multiaddr\n */\n\n/**\n * @param {string|Multiaddr|URL} url - A string, multiaddr or URL to convert to a url string\n * @returns {string}\n */\nexport function toUrlString (url) {\n  try {\n    // @ts-expect-error\n    url = multiaddrToUri(multiaddr(url))\n  } catch (/** @type {any} */ err) { }\n\n  url = url.toString()\n\n  return url\n}\n","\nexport class TimeoutError extends Error {\n  constructor (message = 'request timed out') {\n    super(message)\n    this.name = 'TimeoutError'\n    this.code = TimeoutError.code\n  }\n}\n\nTimeoutError.code = 'ERR_TIMEOUT'\n","/* eslint-disable no-unreachable */\n\nimport { TimeoutController } from 'timeout-abort-controller'\nimport { anySignal } from 'any-signal'\nimport parseDuration from 'parse-duration'\nimport { TimeoutError } from './errors.js'\n\n/**\n * @template {any[]} Args\n * @template {Promise<any> | AsyncIterable<any>} R - The return type of `fn`\n * @param {(...args:Args) => R} fn\n * @param {number} [optionsArgIndex]\n * @returns {(...args:Args) => R}\n */\nexport function withTimeoutOption (fn, optionsArgIndex) {\n  // eslint-disable-next-line\n  return /** @returns {R} */(/** @type {Args} */...args) => {\n    const options = args[optionsArgIndex == null ? args.length - 1 : optionsArgIndex]\n    if (!options || !options.timeout) return fn(...args)\n\n    const timeout = typeof options.timeout === 'string'\n      ? parseDuration(options.timeout)\n      : options.timeout\n\n    const controller = new TimeoutController(timeout)\n\n    options.signal = anySignal([options.signal, controller.signal])\n\n    const fnRes = fn(...args)\n    // eslint-disable-next-line promise/param-names\n    const timeoutPromise = new Promise((_resolve, reject) => {\n      controller.signal.addEventListener('abort', () => {\n        reject(new TimeoutError())\n      })\n    })\n\n    const start = Date.now()\n\n    const maybeThrowTimeoutError = () => {\n      if (controller.signal.aborted) {\n        throw new TimeoutError()\n      }\n\n      const timeTaken = Date.now() - start\n\n      // if we have starved the event loop by adding microtasks, we could have\n      // timed out already but the TimeoutController will never know because it's\n      // setTimeout will not fire until we stop adding microtasks\n      if (timeTaken > timeout) {\n        controller.abort()\n        throw new TimeoutError()\n      }\n    }\n\n    // @ts-expect-error\n    if (fnRes[Symbol.asyncIterator]) {\n      // @ts-expect-error\n      return (async function * () {\n        // @ts-expect-error\n        const it = fnRes[Symbol.asyncIterator]()\n\n        try {\n          while (true) {\n            const { value, done } = await Promise.race([it.next(), timeoutPromise])\n\n            if (done) {\n              break\n            }\n\n            maybeThrowTimeoutError()\n\n            yield value\n          }\n        } catch (/** @type {any} */ err) {\n          maybeThrowTimeoutError()\n\n          throw err\n        } finally {\n          controller.clear()\n\n          if (it.return) {\n            it.return()\n          }\n        }\n      })()\n    }\n\n    // @ts-expect-error\n    return (async () => {\n      try {\n        const res = await Promise.race([fnRes, timeoutPromise])\n\n        maybeThrowTimeoutError()\n\n        return res\n      } catch (/** @type {any} */ err) {\n        maybeThrowTimeoutError()\n\n        throw err\n      } finally {\n        controller.clear()\n      }\n    })()\n  }\n}\n"],"names":["ID_OFFSET","SIZE_OFFSET","ARRAYBUFFER_ID","STRING_ID","ARRAYBUFFERVIEW","ARRAY","VAL_ALIGN_OFFSET","VAL_SIGNED","VAL_FLOAT","VAL_MANAGED","ARRAYBUFFERVIEW_BUFFER_OFFSET","ARRAYBUFFERVIEW_DATASTART_OFFSET","ARRAYBUFFERVIEW_DATALENGTH_OFFSET","ARRAYBUFFERVIEW_SIZE","ARRAY_LENGTH_OFFSET","ARRAY_SIZE","BIGINT","BigUint64Array","THIS","Symbol","CHUNKSIZE","getStringImpl","buffer","ptr","U32","Uint32Array","U16","Uint16Array","length","offset","String","fromCharCode","apply","subarray","parts","last","size","push","join","preInstantiate","imports","baseModule","getString","memory","env","abort","mesg","file","line","colm","Error","trace","n","console","log","Array","prototype","slice","call","arguments","Math","Date","postInstantiate","instance","rawExports","exports","table","alloc","retain","rttiBase","getInfo","id","getBase","getValueAlign","info","clz32","getView","alignLog2","signed","float","Float32Array","Float64Array","Int8Array","Uint8Array","Int16Array","Int32Array","BigInt64Array","__getArrayView","arr","align","buf","getTypedArray","Type","getTypedArrayView","bufPtr","__allocString","str","i","p","charCodeAt","__getString","__allocArray","values","view","set","__getArray","input","len","out","__getArrayBuffer","__getInt8Array","bind","__getInt8ArrayView","__getUint8Array","__getUint8ArrayView","__getUint8ClampedArray","Uint8ClampedArray","__getUint8ClampedArrayView","__getInt16Array","__getInt16ArrayView","__getUint16Array","__getUint16ArrayView","__getInt32Array","__getInt32ArrayView","__getUint32Array","__getUint32ArrayView","__getInt64Array","__getInt64ArrayView","__getUint64Array","__getUint64ArrayView","__getFloat32Array","__getFloat32ArrayView","__getFloat64Array","__getFloat64ArrayView","__instanceof","baseId","demangle","isResponse","o","Response","async","instantiate","source","instantiateStreaming","WebAssembly","Module","compile","arrayBuffer","module","Object","create","setArgumentsLength","value","internalName","hasOwnProperty","elem","split","curr","part","shift","name","hash","indexOf","className","substring","classElem","ctor","args","wrap","constructor","valueOf","this","thisValue","writable","getOwnPropertyNames","forEach","defineProperty","getOwnPropertyDescriptor","test","getter","replace","setter","get","enumerable","original","instantiateSync","Instance","fromCallback","ModuleError","getCallback","getOptions","kPromise","kStatus","kOperations","kFinishClose","kCloseCallbacks","AbstractChainedBatch","db","TypeError","attachResource","nextTick","put","key","options","code","err","_checkKey","_checkValue","sublevel","keyEncoding","valueEncoding","keyFormat","format","mappedKey","prefixKey","encode","mappedValue","_put","type","del","_del","clear","_clear","write","callback","close","_write","emit","_close","detachResource","callbacks","cb","kCallback","kWorking","kHandleOne","kHandleMany","kAutoClose","kFinishWork","kReturnMany","kClosing","kHandleClose","kClosed","kKeyEncoding","kValueEncoding","kAbortOnClose","kLegacy","kKeys","kValues","kLimit","kCount","emptyOptions","freeze","noop","warnedEnd","CommonIterator","legacy","Number","isInteger","limit","Infinity","abortOnClose","count","next","promise","undefined","Promise","resolve","reject","_next","nextv","min","_nextv","acc","onnext","all","_all","onnextv","items","seek","target","mapped","_seek","asyncIterator","item","AbstractIterator","super","keys","decode","IteratorDecodeError","entries","entry","end","warn","subject","cause","k","AbstractKeyIterator","AbstractValueIterator","supports","Transcoder","EventEmitter","DefaultKeyIterator","DefaultValueIterator","DeferredIterator","DeferredKeyIterator","DeferredValueIterator","DefaultChainedBatch","rangeOptions","kLanded","kResources","kCloseResources","kUndefer","kDeferOpen","kOptions","kDefaultOptions","kTranscoder","AbstractLevel","manifest","passive","forward","Set","status","promises","getMany","deferredOpen","snapshots","permanence","keyIterator","valueIterator","iteratorNextv","iteratorAll","encodings","events","assign","opening","open","closing","closed","batch","formats","encoding","commonName","empty","createIfMissing","errorIfExists","maybeOpened","once","_open","maybeClosed","cancel","pending","sync","resource","defer","maybeError","valueFormat","_get","notFound","isArray","mappedKeys","_getMany","fill","operations","_chainedBatch","ke","ve","op","valueErr","_batch","_sublevel","AbstractSublevel","defaults","iterator","_iterator","_keys","_values","fn","add","delete","filter","kUnfix","kIterator","AbstractSublevelIterator","unfix","AbstractSublevelKeyIterator","AbstractSublevelValueIterator","Iterator","Buffer","kPrefix","kUpperBound","kPrefixRange","kParent","textEncoder","TextEncoder","separator","static","trim","reserved","parent","every","x","mergeManifests","prefix","upperBound","MultiFormat","Unfixer","utf8","byteLength","result","concat","range","gte","gt","lte","lt","additionalMethods","supportsEncoding","from","cache","Map","prefixLength","char","start","def","kEncoded","mapEntry","map","kNut","kFactory","queueMicrotask","has","reverse","base64","ieee754","customInspectSymbol","SlowBuffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","setPrototypeOf","arg","encodingOrOffset","allocUnsafe","string","isEncoding","actual","fromString","ArrayBuffer","isView","arrayView","isInstance","copy","fromArrayBuffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","b","obj","isBuffer","checked","numberIsNaN","data","fromObject","toPrimitive","assertSize","array","toString","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","m","bidirectionalIndexOf","val","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","j","hexWrite","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","fromByteArray","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","proto","foo","e","typedArraySupport","error","poolSize","allocUnsafeSlow","_isBuffer","compare","a","y","list","pos","swap16","swap32","swap64","toLocaleString","equals","inspect","max","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","BigInt","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","boundsError","readBigUInt64BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","configurable","stack","message","addNumericalSeparator","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","floor","ERR_BUFFER_OUT_OF_BOUNDS","msg","received","abs","INVALID_BASE64_RE","leadSurrogate","toByteArray","base64clean","src","dst","alphabet","i16","BufferBigIntNotDefined","anySignal","signals","controller","globalThis","AbortController","onAbort","signal","removeEventListener","addEventListener","aborted","parallel","deserialize","createKeyRange","DEFAULT_PREFIX","kIDB","kNamePrefix","kLocation","kVersion","kStore","kOnComplete","BrowserLevel","location","_","version","namePrefix","req","indexedDB","onerror","onsuccess","onupgradeneeded","ev","objectStoreNames","contains","createObjectStore","mode","transaction","objectStore","request","onabort","oncomplete","store","tasks","stopPropagation","index","loop","commit","keyRange","destroy","deleteDatabase","kCache","kFinished","kCurrentOptions","kPosition","kFirst","maybeCommit","splice","openKeyCursor","cursor","continue","complete","getAllKeys","getAll","method","direction","lower","upper","lowerExclusive","upperExclusive","IDBKeyRange","bound","lowerBound","parse","formatThousandsRegExp","formatDecimalsRegExp","kb","mb","gb","tb","pb","parseRegExp","mag","thousandsSeparator","unitSeparator","decimalPlaces","fixedDecimals","Boolean","unit","toFixed","s","isNaN","floatValue","results","exec","parseFloat","symbol","fromPromise","then","catch","proxyMarker","createEndpoint","releaseProxy","finalizer","throwMarker","isObject","transferHandlers","canHandle","serialize","port1","port2","MessageChannel","expose","port","createProxy","serialized","isError","ep","allowedOrigins","origin","allowedOrigin","RegExp","isAllowedOrigin","path","argumentList","fromWireValue","returnValue","reduce","prop","rawValue","proxy","transfers","transferCache","transfer","wireValue","transferables","toWireValue","postMessage","closeEndPoint","endpoint","isMessagePort","throwIfProxyReleased","isReleased","releaseEndpoint","requestResponseMessage","proxyCounter","WeakMap","proxyFinalizers","FinalizationRegistry","newCount","isProxyReleased","Proxy","_target","unregister","unregisterProxy","r","_thisArg","rawArgumentList","processArguments","construct","register","registerProxy","processed","v","handler","serializedValue","random","MAX_SAFE_INTEGER","l","global","self","__self__","F","fetch","DOMException","support","searchParams","iterable","blob","Blob","formData","viewClasses","isArrayBufferView","normalizeName","normalizeValue","iteratorFor","done","Headers","headers","append","header","consumed","body","bodyUsed","fileReaderReady","reader","onload","readBlobAsArrayBuffer","FileReader","readAsArrayBuffer","bufferClone","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","rejected","text","readAsText","chars","readArrayBufferAsText","json","JSON","oldValue","thisArg","methods","Request","upcased","url","credentials","toUpperCase","referrer","form","decodeURIComponent","bodyInit","ok","statusText","clone","response","redirectStatuses","redirect","init","xhr","XMLHttpRequest","abortXhr","rawHeaders","getAllResponseHeaders","responseURL","responseText","ontimeout","withCredentials","responseType","setRequestHeader","onreadystatechange","readyState","send","polyfill","ponyfill","ctx","createAbortError","createDelay","clearTimeout","defaultClear","setTimeout","willResolve","ms","timeoutId","settle","rejectFn","signalListener","delayPromise","createWithTimers","clearAndSet","delay","minimum","maximum","randomInteger","Denque","_capacity","capacity","_head","_tail","_fromArray","_capacityMask","_list","peekAt","peek","peekFront","peekBack","unshift","_growArray","pop","head","_shrinkArray","tail","removeOne","remove","removed","del_count","toArray","temp","arg_len","arguments_index","leng","isEmpty","_copyArray","_nextPowerOf2","fullCopy","dest","newList","num","nextPow2","window","g","t","getPrototypeOf","Reflect","ownKeys","u","extend","h","d","f","setImmediate","isFrozen","w","P","K","O","S","A","C","D","I","B","T","toStringTag","R","href","M","N","q","$","U","L","V","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","W","_e","Y","z","failures","failedKeys","successCount","G","failuresByPos","_stack","H","Q","X","inner","Syntax","SyntaxError","Range","J","Z","ee","te","ne","re","se","ie","oe","ae","ue","ModifyError","DexieError","BulkError","le","ce","he","de","crypto","subtle","digest","fe","pe","ye","me","qe","MutationObserver","document","createElement","observe","attributes","setAttribute","ge","Oe","be","we","xe","Ee","Pe","ref","unhandleds","onunhandled","ct","pgp","finalize","Ke","Se","Ae","Ce","_listeners","onuncatched","_lib","_PSD","_stackHolder","_prev","_numPrev","_state","_value","Be","Ie","je","Qe","et","Re","De","ut","Ne","onFulfilled","onRejected","psd","$e","_then","Te","Ue","_promise","some","Le","Fe","Me","Ve","We","st","finally","timeout","Timeout","it","tt","race","PSD","totalEchoes","newPSD","Je","usePSD","ot","scheduler","rejectionMapper","follow","allSettled","reason","any","AggregateError","Ye","awaits","echoes","ze","Ge","He","Xe","PromiseProp","nthen","gthen","Ze","ht","nt","rt","at","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","defaultPrevented","dt","idbdb","openComplete","letThrough","_vip","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","trans","_completion","dbOpenError","isBeingOpened","_options","autoOpen","dbReadyPromise","ft","pt","yt","mt","navigator","userAgent","vt","bt","_t","wt","lowerOpen","upperOpen","xt","kt","_trans","_tx","schema","NotFound","idbtrans","transless","where","core","hook","reading","fire","WhereClause","indexes","primKey","compound","keyPath","_maxKey","stringify","idxByName","_deps","cmp","multi","toCollection","and","each","Collection","orderBy","mapToClass","mappedClass","readHook","unsubscribe","defineClass","auto","mutate","numFailures","lastResult","update","modify","InvalidArgument","bulkGet","bulkAdd","allKeys","wantResults","bulkPut","bulkDelete","Et","subscribe","addEventType","subscribers","Pt","Kt","algorithm","or","justLimit","replayFilter","Ot","St","At","isPrimKey","primaryKey","getIndexByKeyPath","Schema","Ct","openCursor","keysOnly","unique","query","jt","stop","fail","_iterate","Dt","valueMapper","It","Bt","NaN","Tt","Rt","_read","_ctx","_addAlgorithm","raw","sortBy","sort","advance","until","isMatch","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","outbound","extractKey","modifyChunkSize","Ft","criteria","changeSpec","Mt","Nt","qt","Yt","$t","Wt","Ut","Lt","Vt","between","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWith","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","_min","_max","startsWithAnyOf","zt","Gt","preventDefault","Ht","Qt","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","OpenFailed","active","storeNames","durability","chromeTransactionDurability","_reject","on","_resolve","storagemutated","mutatedParts","ReadOnly","_root","waitFor","_waitingFor","_waitingQueue","_spinCount","_memoizedTables","Table","Xt","Jt","Zt","en","only","tn","nn","rn","sn","hasGetAll","tables","autoIncrement","isPrimaryKey","indexNames","multiEntry","match","_pos","___id","continuePrimaryKey","MIN_KEY","MAX_KEY","an","_novip","dbcore","_middlewares","un","Transaction","ln","cn","_cfg","hn","_storeNames","populate","_versions","yn","dbschema","mn","dn","change","recreate","Upgrade","pn","deleteIndex","contentUpgrade","deleteObjectStore","createIndex","_hasGetAll","WorkerGlobalScope","vn","_parseStoresSpec","stores","storesSource","_allTables","upgrade","gn","_dbNamesDB","$n","addons","dbnames","bn","databases","_n","wn","userAgentData","setInterval","clearInterval","kn","throw","En","Pn","PrematureCommit","Kn","On","level","isVirtual","keyTail","keyLength","Sn","An","deleting","creating","updating","Cn","jn","_cache","Dn","In","to","Bn","Mn","Tn","Fn","up","Nn","addKey","addKeys","qn","subscr","verno","dependencies","onReadyBeingFired","dbReadyResolve","cancelOpen","openCanceller","autoSchema","ready","vip","Version","_IDBKeyRange","newVersion","oldVersion","_fireOnBlocked","vcFired","use","round","_whenReady","unuse","onblocked","allowEmptyDB","NoSuchDatabase","onversionchange","onclose","xn","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","SubTransaction","InvalidTable","Un","observable","Ln","_subscribe","Vn","Yn","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","zn","Gn","Hn","exists","getDatabaseNames","ignoreTransaction","spawn","currentTransaction","debug","derive","props","override","Events","liveQuery","Rn","extendObservabilitySet","getByKeyPath","setByKeyPath","delByKeyPath","shallowClone","deepClone","getObjectDiff","asap","minKey","connections","errnames","semVer","maxKey","initCustomEvent","BroadcastChannel","unref","onmessage","localStorage","setItem","trig","changedParts","clients","matchAll","includeUncontrolled","newValue","serviceWorker","event_iterator_1","EventIterator","_ref","uri","defaultIsExtractableFile","extractFiles","isExtractableFile","files","addFile","paths","storedPaths","FileList","child","ReactNativeFile","File","hwm","mask","top","btm","FixedFIFO","prev","validator","XMLParser","XMLBuilder","XMLValidator","nameStartChar","nameRegexp","regexName","isExist","isEmptyObject","merge","arrayMode","getValue","isName","getAllMatches","regex","matches","allmatches","startIndex","lastIndex","util","defaultOptions","allowBooleanAttributes","unpairedTags","isWhiteSpace","readPI","xmlData","tagname","getErrorObject","getLineNumberForPosition","readCommentAndCDATA","angleBracketsCount","validate","tags","tagFound","reachedRoot","tagStartPos","closingTag","tagName","readAttributeStr","attrStr","attrStrStart","isValid","validateAttributeString","tagClosed","otg","openPos","col","afterAmp","validateAmpersand","doubleQuote","singleQuote","startChar","validAttrStrRegxp","attrNames","getPositionFromMatch","attrName","validateAttrName","validateNumberAmpersand","lineNumber","lines","buildFromOrderedJs","attributeNamePrefix","attributesGroupName","textNodeName","ignoreAttributes","cdataPropName","indentBy","suppressEmptyNode","suppressUnpairedNode","suppressBooleanAttributes","tagValueProcessor","attributeValueProcessor","preserveOrder","commentPropName","entities","processEntities","stopNodes","oneListGroup","Builder","isAttribute","attrPrefixLen","processTextOrObjNode","indentate","tagEndChar","newLine","object","j2x","buildTextValNode","buildObjectNode","repeat","build","jObj","arrayNodeName","attr","buildAttrPairStr","newval","replaceEntitiesValue","arrLen","listTagVal","Ks","closeTag","tagEndExp","piClosingChar","textValue","entity","arrToStr","jPath","indentation","xmlStr","isPreviousElementTag","tagObj","propName","newJPath","tagText","isStopNode","attStr","attr_to_str","tempInd","piTextNodeName","newIdentation","tagStart","tagValue","endsWith","attrMap","attrVal","jArray","readEntityExp","entityName","isComment","isEntity","isElement","isAttlist","isNotation","validateEntityName","hasBody","comment","exp","regx","removeNSPrefix","parseTagValue","parseAttributeValue","trimValues","numberParseOptions","hex","leadingZeros","eNotation","alwaysCreateTextNode","htmlEntities","ignoreDeclaration","ignorePiTags","transformTagName","transformAttributeName","updateTag","attrs","buildOptions","xmlNode","readDocType","toNumber","addExternalEntities","externalEntities","entKeys","ent","lastEntities","parseTextData","dontTrim","hasAttributes","isLeafNode","escapeEntities","parseValue","resolveNameSpace","charAt","attrsRegx","buildAttributesMap","oldVal","aName","newVal","attrCollection","parseXml","xmlObj","currentNode","textData","closeIndex","findClosingIndex","colonIndex","saveTextToParentTag","lastTagName","propIndex","tagsNodeStack","tagData","readTagExp","childNode","tagExp","attrExpPresent","addChild","endIndex","docTypeEntities","lastTag","isItStopNode","tagContent","readStopNodeData","ampEntity","currentTagName","allNodesExp","stopNodePath","stopNodeExp","errMsg","closingIndex","closingChar","attrBoundary","ch","tagExpWithClosingIndex","separatorIndex","search","openTagCount","shouldParse","OrderedObjParser","prettify","validationOption","orderedObjParser","orderedResult","addEntity","compress","compressedObj","property","newJpath","isLeaf","isLeafTag","assignAttributes","jpath","atrrName","propCount","node","BASE","docCache","fragmentSourceMap","printFragmentWarnings","experimentalFragmentVariables","normalize","processFragments","ast","seenKeys","definitions","fragmentDefinition","kind","fragmentName","sourceKey","loc","sourceKeySet","parseDocument","cacheKey","allowLegacyFragmentVariables","doc","workSet","startToken","endToken","stripLoc","gql","literals","_i","gql_1","extras","resetCaches","disableFragmentWarnings","enableExperimentalFragmentVariables","disableExperimentalFragmentVariables","devAssert","condition","MAX_ARRAY_LENGTH","MAX_RECURSIVE_DEPTH","formatValue","seenValues","previouslySeenValues","isJSONable","jsonValue","formatArray","tag","getObjectTag","properties","formatObject","formatObjectValue","Location","Token","column","QueryDocumentKeys","Name","Document","OperationDefinition","VariableDefinition","Variable","SelectionSet","Field","Argument","FragmentSpread","InlineFragment","FragmentDefinition","IntValue","FloatValue","StringValue","BooleanValue","NullValue","EnumValue","ListValue","ObjectValue","ObjectField","Directive","NamedType","ListType","NonNullType","SchemaDefinition","OperationTypeDefinition","ScalarTypeDefinition","ObjectTypeDefinition","FieldDefinition","InputValueDefinition","InterfaceTypeDefinition","UnionTypeDefinition","EnumTypeDefinition","EnumValueDefinition","InputObjectTypeDefinition","DirectiveDefinition","SchemaExtension","ScalarTypeExtension","ObjectTypeExtension","InterfaceTypeExtension","UnionTypeExtension","EnumTypeExtension","InputObjectTypeExtension","kindValues","isNode","maybeNode","maybeKind","OperationTypeNode","dedentBlockStringLines","_firstNonEmptyLine2","commonIndent","firstNonEmptyLine","lastNonEmptyLine","_firstNonEmptyLine","indent","leadingWhitespace","printBlockString","escapedValue","isSingleLine","forceLeadingNewLine","hasTrailingTripleQuotes","hasTrailingQuote","hasTrailingSlash","forceTrailingNewline","printAsMultipleLines","minimize","skipLeadingNewLine","isDigit","isLetter","isNameStart","isNameContinue","Kind","invariant","LineRegExp","getLocation","position","lastLineStart","printLocation","printSourceLocation","sourceLocation","firstLineColumnOffset","locationOffset","padStart","lineIndex","lineOffset","lineNum","columnOffset","columnNum","locationStr","locationLine","subLineIndex","subLineColumnNum","subLines","printPrefixedLines","subLine","existingLines","padLen","GraphQLError","rawArgs","_this$nodes","_nodeLocations$","nodes","positions","originalError","extensions","firstArg","toNormalizedOptions","undefinedIfEmpty","nodeLocations","locations","originalExtensions","defineProperties","captureStackTrace","output","formattedError","syntaxError","description","DirectiveLocation","TokenKind","Lexer","startOfFileToken","lastToken","token","lineStart","lookahead","nextToken","readNextToken","isUnicodeScalarValue","isSupplementaryCodePoint","isLeadingSurrogate","isTrailingSurrogate","printCodePointAt","lexer","codePointAt","fromCodePoint","createToken","bodyLength","readComment","readBlockString","readString","readNumber","readName","firstCode","isFloat","readDigits","chunkStart","escape","readEscapedUnicodeVariableWidth","readEscapedUnicodeFixedWidth","readEscapedCharacter","point","readHexDigit","read16BitHexCode","trailingCode","currentLine","blockLines","instanceOf","process","NODE_ENV","_value$constructor","stringifiedValue","Source","Parser","sourceObj","isSource","_lexer","_tokenCounter","parseName","expectToken","many","parseDefinition","parseOperationDefinition","hasDescription","peekDescription","keywordToken","parseSchemaDefinition","parseScalarTypeDefinition","parseObjectTypeDefinition","parseInterfaceTypeDefinition","parseUnionTypeDefinition","parseEnumTypeDefinition","parseInputObjectTypeDefinition","parseDirectiveDefinition","parseFragmentDefinition","parseTypeSystemExtension","unexpected","operation","variableDefinitions","directives","selectionSet","parseSelectionSet","parseOperationType","parseVariableDefinitions","parseDirectives","operationToken","optionalMany","parseVariableDefinition","variable","parseVariable","parseTypeReference","defaultValue","expectOptionalToken","parseConstValueLiteral","parseConstDirectives","selections","parseSelection","parseFragment","parseField","nameOrAlias","alias","parseArguments","isConst","parseConstArgument","parseArgument","parseValueLiteral","hasTypeCondition","expectOptionalKeyword","parseFragmentName","typeCondition","parseNamedType","expectKeyword","parseList","parseObject","advanceLexer","parseStringLiteral","varName","block","fields","parseObjectField","parseDirective","innerType","parseDescription","operationTypes","parseOperationTypeDefinition","interfaces","parseImplementsInterfaces","parseFieldsDefinition","delimitedMany","parseFieldDefinition","parseArgumentDefs","parseInputValueDef","types","parseUnionMemberTypes","parseEnumValuesDefinition","parseEnumValueDefinition","parseEnumValueName","getTokenDesc","parseInputFieldsDefinition","parseSchemaExtension","parseScalarTypeExtension","parseObjectTypeExtension","parseInterfaceTypeExtension","parseUnionTypeExtension","parseEnumTypeExtension","parseInputObjectTypeExtension","repeatable","parseDirectiveLocations","parseDirectiveLocation","noLocation","getTokenKindDesc","atToken","openKind","parseFn","closeKind","delimiterKind","maxTokens","isPunctuatorTokenKind","EE","context","addListener","emitter","event","listener","evt","_events","_eventsCount","clearEvent","__proto__","eventNames","names","getOwnPropertySymbols","listeners","handlers","listenerCount","a1","a2","a3","a4","a5","removeListener","removeAllListeners","off","prefixed","RateLimiterRedis","RateLimiterMongo","RateLimiterMySQL","RateLimiterPostgres","RateLimiterClusterMaster","RateLimiterClusterMasterPM2","RateLimiterCluster","RateLimiterMemory","RateLimiterMemcache","RLWrapperBlackAndWhite","RateLimiterUnion","RateLimiterQueue","BurstyRateLimiter","RateLimiterRes","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","LN2","newArray","protobuf","configure","_configure","Writer","BufferWriter","Reader","BufferReader","rpc","roots","LongBits","indexOutOfRange","writeLength","create_array","readLongVarint","bits","readFixed32_end","readFixed64","_slice","uint32","int32","sint32","bool","fixed32","sfixed32","double","skip","skipType","wireType","BufferReader_","Long","int64","uint64","sint64","zzDecode","fixed64","sfixed64","Service","rpcImpl","requestDelimited","responseDelimited","rpcCall","requestCtor","responseCtor","asPromise","finish","endedByRPC","zero","zzEncode","zeroHash","fromNumber","sign","isString","low","high","unsigned","toLong","fromHash","toHash","part0","part1","part2","ifNotSet","newError","CustomError","inquire","pool","versions","emptyArray","emptyObject","isset","isSet","_Buffer_from","_Buffer_allocUnsafe","newBuffer","sizeOrArray","dcodeIO","key2Re","key32Re","key64Re","longToHash","longFromHash","fromBits","lcFirst","ProtocolError","oneOfGetter","fieldNames","fieldMap","oneOfSetter","toJSONOptions","longs","enums","Op","State","writer","states","writeByte","VarintOp","writeVarint64","writeFixed32","_push","writeBytes","fork","reset","ldelim","BufferWriter_","writeStringBuffer","writeBytesBuffer","$protobuf","$Reader","$Writer","$util","$root","RPC","subscriptions","messages","ks","$oneOfFields","control","SubOpts","Message","ControlMessage","toObject","arrays","oneofs","_control","topic","_topic","seqno","signature","_from","_data","_seqno","_signature","_key","ihave","iwant","graft","prune","ControlIHave","ControlIWant","ControlGraft","ControlPrune","messageIDs","topicID","_topicID","peers","backoff","PeerInfo","fromValue","_backoff","peerID","signedPeerRecord","_peerID","_signedPeerRecord","MessageCache","gossip","msgs","msgIdToStrFn","history","notValidatedCount","historyCapacity","messageId","validated","msgIdStr","originatingPeers","iwantCounts","observeDuplicate","msgId","fromPeerIdStr","getWithIWantCount","getGossipIDs","topics","msgIdsByTopic","msgIds","cacheEntry","computeScore","peer","pstats","params","peerIPs","score","tstats","topicParams","topicScore","inMesh","p1","meshTime","timeInMeshQuantum","timeInMeshCap","timeInMeshWeight","p2","firstMessageDeliveries","firstMessageDeliveriesCap","firstMessageDeliveriesWeight","meshMessageDeliveriesActive","meshMessageDeliveries","meshMessageDeliveriesThreshold","deficit","meshMessageDeliveriesWeight","meshFailurePenalty","meshFailurePenaltyWeight","invalidMessageDeliveries","invalidMessageDeliveriesWeight","topicWeight","topicScoreCap","p5","appSpecificScore","appSpecificWeight","knownIPs","ip","IPColocationFactorWhitelist","peersInIP","numPeersInIP","IPColocationFactorThreshold","surplus","IPColocationFactorWeight","behaviourPenalty","behaviourPenaltyThreshold","excess","behaviourPenaltyWeight","ERR_INVALID_PEER_SCORE_PARAMS","computeScoreWeights","topicStrToLabel","byTopic","topicLabel","topicScores","p1w","p2w","p3w","p3bw","p4w","capF","ws","p5w","p6w","p7w","computeAllPeersScoreWeights","peerIdStrs","peerStats","sw","peerIdStr","swPeer","swPeerTopic","swTopic","shuffle","tmp","SimpleTimeCache","validityMs","opts","validUntilMs","now","KeyType","__KeyTypeValues","PublicKey","PrivateKey","codec","_codec","lengthDelimited","Data","randomBytes","createCodec","encoder","decoder","TextDecoder","ascii","BASES","latin1","binary","getIterator","FIFO","splitLimit","calculateSize","aa","bb","ii","coerce","link","base","toStringV0","baseCache","base58btc","toStringV1","base32","cid","CID","multihash","asCID","toV0","DAG_PB_CODE","SHA_256_CODE","createV0","toV1","createV1","other","unknown","for","encodeCID","cidSymbol","remainder","decodeFirst","specs","inspectBytes","prefixSize","multihashSize","multihashBytes","digestBytes","digestSize","multihashCode","initialBytes","parseCIDtoBytes","codeOffset","hashOffset","sizeOffset","digestOffset","Digest","identity","encode_1","oldOffset","INT","MSB","MSBALL","counter","REST$1","MSB$1","N1","N2","N3","N4","N5","N6","N7","N8","N9","encodingLength","encodeTo","int","NOISE_MSG_MAX_LENGTH_BYTES","DUMP_SESSION_KEYS","pureJsCrypto","hashSHA256","sha256","getHKDF","ck","ikm","prk","okm","generateX25519KeyPair","secretKey","publicKey","privateKey","generateX25519KeyPairFromSeed","seed","generateX25519SharedKey","chaCha20Poly1305Encrypt","plaintext","nonce","ad","chacha","encrypt","chaCha20Poly1305Decrypt","ciphertext","decrypt","uint16BEEncode","setUint16","uint16BEDecode","getUint16","supportedKeys","rsa","ed25519","secp256k1","unsupportedKey","supported","unmarshalPrivateKey","decoded","unmarshalRsaPrivateKey","unmarshalEd25519PrivateKey","unmarshalSecp256k1PrivateKey","baseDecoder","LIBP2P_KEY_CODE","MARSHALLED_ED225519_PUBLIC_KEY_LENGTH","MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH","PeerIdImpl","base58","toCID","toBytes","Ed25519PeerIdImpl","Secp256k1PeerIdImpl","RSAPeerIdImpl","peerIdFromCID","peerIdFromBytes","peerIdFromString","peerIdFromKeys","NoiseExtensions","NoiseHandshakePayload","getPayload","localPeer","staticPublicKey","signedPayload","peerId","payload","signPayload","getHandshakePayload","libp2pPublicKey","identityKey","identitySig","webtransportCerthashes","createHandshakePayload","getPeerIdFromPayload","decodePayload","verifySignedPayload","noiseStaticKey","remotePeer","payloadPeerId","generatedPayload","unmarshalRsaPublicKey","unmarshalEd25519PublicKey","unmarshalSecp256k1PublicKey","unmarshalPublicKey","verify","isValidPublicKey","pk","writeDefaults","keyLogger","logLocalEphemeralKeys","logRemoteEphemeralKey","enabled","AbstractHandshake","encryptWithAd","cs","increment","decryptWithAd","valid","hasKey","isEmptyKey","createEmptyKey","emptyKey","assertValue","getBytes","encryptAndHash","ss","mixHash","encryptedMessage","decryptAndHash","dh","derivedU8","getHash","mixKey","tempK","initializeKey","initializeSymmetric","protocolName","protocolNameBytes","hashProtocolName","tempk1","tempk2","cs1","cs2","writeMessageRegular","ns","readMessageRegular","XX","initializeInitiator","prologue","rs","psk","initializeResponder","writeMessageA","hs","writeMessageB","spk","writeMessageC","messageBuffer","readMessageA","readMessageB","valid1","valid2","readMessageC","initSession","initiator","mc","sendMessage","session","ephemeral","resultingBuffer","recvMessage","resultingPlaintext","resultingValid","XXHandshake","isInitiator","remoteExtensions","connection","xx","staticKeypair","handshake","receivedMessageBuffer","decode0","decode1","decodedPayload","setRemoteNoiseExtension","decode2","getUint64","getCS","getRemoteStaticKey","encryption","Noise","protocol","staticKeys","metrics","staticNoiseKey","prologueBytes","wrappedConnection","lengthEncoder","lengthDecoder","maxDataLength","performHandshake","conn","createSecureConnection","performXXHandshake","propose","exchange","xxHandshakeSuccesses","xxHandshakeErrors","secure","user","duplex","network","unwrap","chunk","encryptedPackets","encryptStream","encrypted","decrypted","decryptErrors","decryptedPackets","decryptStream","noise","registerMetrics","registerCounter","help","Nonce","setUint32","pair","deferred","piped","sink","duplexPair","bitsPerChar","base32upper","base32pad","base32padupper","base32hex","base32hexupper","base32hexpad","base32hexpadupper","base32z","base58flickr","sha","sha512","logger","namespace","color","diff","createDisabledLogger","find","AbortError","abortableSource","nextAbortHandler","abortHandler","abortMessage","abortCode","isKnownAborter","return","onReturnError","returnOnAbort","abortable","_pushable","getNext","pushable","onNext","ended","onEnd","drain","bufferNext","objectMode","bufferError","readableLength","onEmpty","throwIfAborted","ERR_INVALID_FRAME","ERR_UNREQUESTED_PING","ERR_NOT_MATCHING_PING","ERR_STREAM_ALREADY_EXISTS","ERR_DECODE_INVALID_VERSION","ERR_BOTH_CLIENTS","ERR_RECV_WINDOW_EXCEEDED","PROTOCOL_ERRORS","ERR_INVALID_CONFIG","ERR_MUXER_LOCAL_CLOSED","ERR_MUXER_REMOTE_CLOSED","INITIAL_STREAM_WINDOW","defaultConfig","enableKeepAlive","keepAliveInterval","maxInboundStreams","maxOutboundStreams","initialStreamWindowSize","maxStreamWindowSize","maxMessageSize","FrameType","Flag","flagCodes","GoAwayCode","stringifyHeader","flags","flag","streamID","twoPow24","Decoder","frameInProgress","returnlessSource","readHeader","readData","readBytes","decodeHeader","consume","sublist","encodeHeader","frame","StreamState","YamuxStream","state","config","_id","sendWindowCapacity","sendWindowCapacityUpdate","recvWindow","recvWindowCapacity","epochStart","getRTT","sendFrame","Finished","sendWindowUpdate","waitForSendWindowCapacity","toSend","getSendFlags","WindowUpdate","RST","FIN","handleWindowUpdate","processFlags","available","recv","sourcePush","ACK","SYNSent","Established","remoteCloseWrite","Init","SYN","SYNReceived","rtt","delta","YAMUX_PROTOCOL_ID","Yamux","_init","createStreamMuxer","YamuxMuxer","closeController","nextStreamID","_streams","nextPingID","activePing","client","localGoAway","remoteGoAway","numInboundStreams","numOutboundStreams","onIncomingStream","onStreamEnd","verifyConfig","stream","emitFrames","handleFrame","NormalTermination","errCode","InternalError","keepAliveLoop","streams","newStream","_newStream","sendPing","AbortSignal","sendGoAway","_closeMuxer","isClosed","closeStream","abortPromise","ping","Ping","handlePing","GoAway","handleGoAway","handleStreamMessage","handlePingResponse","pingId","incomingStream","handleData","yamux","thing","peekable","func","things","parallelBatch","fixedSize","chunkSize","currentLength","emitted","newBl","UnixTime","Metadata","DataType","__DataTypeValues","filesize","blocksizes","hashType","fanout","mtime","Seconds","FractionalNanoseconds","MimeType","Raw","Directory","Symlink","HAMTShard","dirTypes","DEFAULT_FILE_MODE","DEFAULT_DIRECTORY_MODE","UnixFS","marshaled","blockSizes","secs","nsecs","_originalMode","_mode","isDirectory","addBlockSize","removeBlockSize","fileSize","sum","marshal","fromHex","hexes","ALPHABET","BASE_MAP","xc","LEADER","FACTOR","iFACTOR","decodeUnsafe","psz","zeroes","b256","carry","it3","it4","vch","pbegin","pend","b58","it1","it2","Encoder","baseEncode","baseDecode","prefixCodePoint","ComposedDecoder","decoders","left","right","Codec","baseX","rfc4648","pad","codes","written","Hasher","persist","blockstore","cidVersion","defaultBufferImporter","bytesWritten","content","unixfs","onProgress","rawLeaves","leafType","Links","dirBuilder","prepare","originalPath","isSingleBlockImport","single","fileBuilder","layout","previous","bufferImporter","blockWriteConcurrency","buildFileBatch","leaves","reduceSingleLeafToSelf","leaf","links","Tsize","Hash","contentAsAsyncIterable","isFileCandidate","defaultChunkValidator","DEFAULT_MAX_CHILDREN_PER_NODE","balanced","maxChildrenPerNode","balancedLayout","chunked","Dir","root","dirty","flat","parentKey","nodeSize","CID_V0","CID_V1","DirFlat","_children","childCount","directChildrenCount","onlyChild","estimateNodeSize","flush","varint","number","fromNumberTo32BitBuf","murmur3128","hamtHashFn","HAMT_HASH_CODE","_bucket","hashFn","shardFanoutBits","leafCount","childrenCount","eachLeafSeries","bucket","shardRoot","children","padLength","tableSize","childrenSize","labelPrefix","shard","subShard","flushedDir","label","bitField","flatToShard","threshold","newDir","oldDir","eachChildSeries","convertToShard","toPathComponents","addToTree","tree","pathElems","currentPath","pathElem","shardSplitThresholdBytes","flushAndYield","importer","candidates","wrapWithDirectory","fileImportConcurrency","chunker","chunkValidator","buildDag","dagBuilder","bytesRead","currentChunkSize","defaultDagBuilder","buildTree","treeBuilder","rootDir","singleRoot","unwrapped","defaultTreeBuilder","importFile","defaultImporterSettings","addBytes","importBytes","addByteStream","bufs","importByteStream","addDirectory","importDirectory","toResolve","depth","subObject","subPath","subObjectCid","blockStart","requestedStart","requestedEnd","blockLength","blockEnd","totalBytes","toPrefix","findShardCid","unmarshal","rootBucket","log2","hamtDepth","lastBucket","_putObjectAt","addLinksToHamtBucket","_findNewBucketAndPos","bucketPath","_parent","toBucketPath","_posAtParent","entryPrefix","entryName","linkName","linkPath","ordered","walkDAG","queue","streamPosition","childOps","childLink","childStart","childEnd","childQueue","concurrency","onIdle","wanted","listDirectory","contentExporters","directory","metadata","symlink","linkCid","findLinkCid","nextName","resolvers","resolver","cidAndRest","exporter","entryPath","startingDepth","walkPath","recursive","recurse","UnixFSError","NotUnixFSError","InvalidPBNodeError","AlreadyExistsError","DoesNotExistError","NoContentError","NotAFileError","NotADirectoryError","InvalidParametersError","wrapHash","InfiniteHash","_hashFn","_depth","_availableBits","_currentBufferIndex","_buffers","pendingBits","_produceMoreBits","availableBits","take","untake","availableForUntake","totalBits","hashValue","ConsumableBuffer","START_MASKS","STOP_MASKS","_currentBytePos","_currentBitPos","_haveBits","byte","taking","byteBitsToInt","maskFor","hamtHashCode","updateShardedDirectory","isRoot","segment","nextSegment","recreateShardedDirectory","fileName","wrapped","isOverShardThreshold","estimateShardSize","current","addLink","addToShardedDirectory","addToDirectory","converted","convertToShardedDirectory","contents","createShard","parentLinks","allowOverwriting","finalSegment","existingLink","findIndex","sibling","siblingName","siblingHash","siblingIndex","siblingPrefix","newIndex","newPrefix","cidToDirectory","cidToPBLink","sourceEntry","dagNodeTsize","linkSizes","segments","dirCid","updatePathCids","pblink","mergeOptions","ignoreUndefined","SHARD_SPLIT_THRESHOLD_BYTES","force","removeFromDirectory","parentBlock","parentCid","removeFromShardedDirectory","unset","convertToFlatDirectory","rootNode","tsize","oldUnixfs","rm","removeLink","stat","resolved","dagSize","localFileSize","localDagSize","blocks","inspectDag","pbNode","linkResult","DefaultUnixFS","components","addAll","cat","updatedCid","updatedBlock","chmod","cp","ls","dirname","emptyDirCid","mkdir","touch","helia","abortableSink","abortableDuplex","arrayShuffle","BaseBlockstore","openFailedError","closeFailedError","putFailedError","getFailedError","deleteFailedError","hasFailedError","notFoundError","abortedError","MemoryBlockstore","Errors","IDBBlockstore","getKey","browserReadableStreamToIt","getReader","preventCancel","releaseLock","accessor","useBuffer","browser","textDecoder","asU8A","fromArray","chunks","b1","b2","decodeErrPrefix","encodeErrPrefix","uintMinorPrefixBytes","assertEnoughData","need","defaultDecodeOptions","strict","allowIndefinite","allowUndefined","allowBigInt","Tokeniser","byt","minor","encodedLength","DONE","BREAK","tokensToObject","tokeniser","terminal","tokenToArray","useMaps","rejectDuplicateMapKeys","tokenToMap","tagged","tokenizer","defaultEncodeOptions","float64","mapSorter","e1","e2","keyToken1","keyToken2","major","tcmp","cborEncoders","compareTokens","quickEncodeToken","encoders","makeCborEncoders","Bl","Ref","simpleTokens","null","true","false","emptyMap","typeEncoders","_typ","_refStack","isSafeInteger","bigint","boolean","_obj","refStack","addBreakTokens","createCheck","objectToTokens","typ","isMap","sortMapEntries","is","customTypeEncoder","tokens","typeEncoder","tokensToEncoded","encodeCustom","quickBytes","encodedSize","JSONEncoder","inRecursive","recurs","elements","isa","_buf","_token","byts","dp","Tokenizer","modeStack","currentMode","skipWhitespace","expect","parseNumber","startPos","negative","swallow","numStr","parseString","readu4","u4","readUtf8Char","ch1","invalidMinor","errorer","jump","quick","majorEncoded","uint","negint","break","encodedBytes","byteValue","toBase64url","base64url","fromBase64url","encodeSignature","encoded","protected","decodeSignature","encodeRecipient","recipient","encRec","encrypted_key","decodeRecipient","isDagJWS","jose","signatures","isDagJWE","iv","toGeneral","protectedHeader","jwe","recipients","encodedJose","jws","encJwe","aad","unprotected","isEncodedJWE","sorter","BaseDatastore","puts","dels","putMany","deleteMany","filters","orders","queryKeys","_allKeys","dbOpenFailedError","dbDeleteFailedError","dbWriteFailedError","dbReadFailedError","MemoryDatastore","pathSepS","pathSepB","pathSep","Key","clean","uint8Array","less","list1","list2","c1","c2","withNamespaces","namespaces","baseNamespace","namespaceType","namespaceValue","isAncestorOf","isDecendantOf","isTopLevel","IDBDatastore","tx","ops","delKey","transform","yielded","SHARDING_FN","encodeBase32","keyToTopic","b64url","PubSubDatastore","pubsub","datastore","selector","subscriptionKeyFn","_pubsub","_datastore","_peerId","_validator","_selector","_handleSubscriptionKeyFn","_onMessage","stringifiedTopic","publish","getTopics","_getLocal","routingKey","dsVal","topicToKey","_storeIfSubscriptionIsBetter","isBetter","_isBetter","_storeRecord","records","_validateRecord","dsKey","currentRecord","_selectRecord","PACKET_TYPES","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeBlob","withNativeArrayBuffer","encodeBlobAsBase64","fileReader","readAsDataURL","supportsBinary","lookup","decodeBase64Packet","binaryType","encoded1","encoded2","encoded3","encoded4","bufferLength","arraybuffer","mapBinary","encodedPacket","SEPARATOR","globalThisShim","Function","pick","NATIVE_SET_TIMEOUT","NATIVE_CLEAR_TIMEOUT","installTimerFunctions","useNativeTimers","setTimeoutFn","clearTimeoutFn","TransportError","Transport","socket","onError","emitReserved","doOpen","doClose","onClose","packets","onOpen","onData","packet","onPacket","details","pause","onPause","yeast","encodeURIComponent","hasCORS","XHR","xdomain","hasXHR2","xd","xscheme","xs","extraHeaders","setDisableHeaderCheck","requestTimeout","onLoad","requestsCount","requests","cleanup","fromError","attachEvent","unloadHandler","WebSocket","isReactNative","product","transports","websocket","forceBase64","check","protocols","addEventListeners","onopen","autoUnref","_socket","closeEvent","lastPacket","timestampRequests","timestampParam","b64","encodedQuery","hostname","polling","isSSL","poll","total","doPoll","encodedPayload","encodedPackets","decodedPacket","encodePayload","doWrite","sid","xhrStatus","pollXhr","host","authority","ipv6uri","pathNames","queryKey","$0","$1","$2","Socket","writeBuffer","prevBufferLen","agent","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","transportOptions","closeOnBeforeunload","qs","qry","pairs","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","beforeunloadEventListener","transport","offlineEventListener","createTransport","EIO","priorWebsocketSuccess","setTransport","onDrain","probe","failed","onTransportOpen","upgrading","freezeTransport","onTransportClose","onupgrade","onHandshake","resetPingTimeout","sendPacket","filterUpgrades","maxPayload","getWritablePackets","payloadSize","utf8Length","ceil","cleanupAndClose","waitForUpgrade","filteredUpgrades","uint32SyncSafeToken","fileTypeFromBuffer","fileTypeFromTokenizer","_check","FileTypeParser","checkString","character","fileInfo","peekBuffer","mayBeLess","mime","ignore","id3HeaderLength","readToken","readBuffer","zipHeader","compressedSize","uncompressedSize","filenameLength","extraFieldLength","filename","mimeType","nextHeaderIndex","brandMajor","maxBufferSize","fileType","readTiffHeader","readField","msb","peekNumber","ic","readElement","lengthField","nrLength","readChildren","element","readChunkHeader","guid","typeId","jsonSize","readSum","tarHeaderChecksumMatches","bigEndian","tagId","numberOfTags","readTiffTag","ifdOffset","readTiffIFD","defaultJsonSerializer","isExtractableFileEnhanced","pipe","variables","operationName","jsonSerializer","accu","currentQuery","parseRequestExtendedArgs","urlOrOptions","variablesAndRequestHeaders","requestHeaders","escapedRegExp","escapedReplacer","escapeSequences","visit","visitor","visitorKeys","enterLeaveMap","getEnterLeaveForKind","inArray","edits","ancestors","isLeaving","isEdited","editOffset","editKey","editValue","arrayKey","getOwnPropertyDescriptors","_enterLeaveMap$get","_enterLeaveMap$get2","visitFn","leave","enter","_node$kind","kindVisitor","print","printDocASTReducer","varDefs","argsLine","isBlockString","hasMultilineItems","maybeArray","_maybeArray$filter$jo","maybeString","_maybeArray$some","extractOperationName","operationDefinitions","definition","resolveRequestDocument","parsedDocument","ClientError","extractMessage","resolveHeaders","oHeaders","HeadersInstanceToPlainObject","cleanQuery","createHttpMethodFetcher","fetchOptions","middleware","queryParams","params_","buildRequestConfig","urlResolved","initResolved","urlNew","initNew","GraphQLClient","requestConfig","rawRequest","queryOrOptions","rawRequestOptions","parseRawRequestArgs","requestMiddleware","responseMiddleware","makeRequest","callOrIdentity","documentOrOptions","requestOptions","parseRequestArgs","batchRequests","documentsOrOptions","batchRequestOptions","documents","parseBatchRequestArgs","queries","setHeaders","setHeader","setEndpoint","fetcher","isBatchingQuery","getResult","successfullyReceivedData","successfullyPassedErrorPolicy","errorPolicy","rest","contentType","Bucket","posAtParent","_popCount","place","_putAt","_findChild","_findPlace","_at","_delAt","compactArray","asyncMap","asyncReduce","asyncTransformBucket","mapNode","reduceNodes","prettyPrint","existingChild","newPlace","_level","mappedChildren","createHAMT","bucketOptions","subsystem","isMapEqual","valueA","valueB","BitswapMessage","Block","Have","DontHave","hashLoader","isFull","wantlist","full","addEntry","priority","wantType","sendDontHave","blockPresences","blockPresence","BlockPresenceType","addHave","addDontHave","addBlock","multicodec","hashAlg","hasher","getHasher","setPendingBytes","pendingBytes","WantType","cidStr","serializeToBitswap100","serializeToBitswap110","digestLength","bpType","Wantlist","_stats","stats","libp2p","inc","dec","hasRefs","removeForce","sortedEntries","Ledger","partner","exchangeCount","accounting","lastExchange","bytesSent","bytesRecv","sentBytes","getTime","receivedBytes","wants","cancelWant","wantlistContains","debtRatio","SortedMap","_defaultSort","newIdx","_find","pivot","_kCmp","DefaultTaskMerger","hasNewInfo","RequestQueue","_taskMerger","_byPeer","taskMerger","PeerTasks","pushTasks","peerTasks","popTasks","targetMinBytes","pendingSize","isIdle","tasksDone","task","taskDone","_activeTotalSize","_pending","_active","PendingTasks","_pushTask","_taskHasMoreInfoThanActiveTasks","existingTask","updatePriority","tasksWithTopic","activeTask","pendingTasks","totalSize","_tasks","_compare","created","haveBlock","isWantBlock","existing","newTask","taskData","existingData","blockSize","DecisionEngine","_log","_opts","ledgerMap","_running","_requestQueue","_processOpts","maxSizeReplaceHasWithBlock","targetMessageSize","_scheduleProcessTasks","_processTasks","blockCids","blockTasks","_getBlocks","blk","messageSent","wantlistForPeer","ledger","ledgerForPeer","sent","exchanged","receivedBlocks","want","_sendAsBlock","entrySize","_findOrCreate","_updateBlockAccounting","cancels","_cancelWants","_addWants","cids","_getBlockSizes","blocksMap","numBytesSentTo","numBytesReceivedFrom","peerDisconnected","kMaxPriority","BITSWAP100","BITSWAP110","BITSWAP120","Network","_libp2p","_bitswap","_protocols","_hashLoader","_maxInboundStreams","_maxOutboundStreams","_incomingStreamTimeout","_registrarIds","bitswap","b100Only","_onPeerConnect","_onPeerDisconnect","_onConnection","incomingStreamTimeout","handle","topology","onConnect","onDisconnect","getConnections","unhandle","TimeoutController","abortListener","_receiveMessage","_receiveError","_onPeerConnected","_onPeerDisconnected","findProviders","contentRouting","provider","connectTo","provide","stringId","_writeMessage","_updateSentStats","dial","dialProtocol","unwantEvent","blockEvent","Notifications","setMaxListeners","hasBlock","blockEvt","unwantEvt","onUnwant","onBlock","unwantBlock","Stat","_queue","_frequencyLastTime","_frequencyAccumulators","_movingAverages","_enabled","_timeout","initialCounters","_update","movingAverageIntervals","interval","enable","disable","snapshot","movingAverages","_resetComputeTimeout","_nextTimeout","urgency","computeThrottleMaxQueueSize","computeThrottleTimeout","_applyOp","_updateFrequency","latestTime","timeDiff","_updateFrequencyFor","timeDiffMS","hz","movingAverageInterval","movingAverage","Stats","_initialCounters","_global","_peers","peerStat","forPeer","disconnected","MsgQueue","refcnt","_entries","selfPeerId","otherPeerId","sendEntries","addMessage","addEntries","WantManager","_addEntries","_startPeerHandler","mq","fullwantlist","_stopPeerHandler","wantBlocks","cancelWants","unwantBlocks","connectedPeers","connected","statsEnabled","statsComputeThrottleTimeout","statsComputeThrottleMaxQueueSize","statsKeys","DefaultBitswap","engine","wm","notifications","started","isStarted","incoming","messageReceived","wasWanted","_handleReceivedBlock","_updateReceiveCounters","enableStats","disableStats","fetchFromNetwork","wantBlock","promptedNetwork","loadOrFetchFromNetwork","findAndConnect","unwant","cidsArray","notify","getWantlist","_PriorityQueue_queue","__classPrivateFieldGet","receiver","_PQueue_instances","_PQueue_carryoverConcurrencyCount","_PQueue_isIntervalIgnored","_PQueue_intervalCount","_PQueue_intervalCap","_PQueue_interval","_PQueue_intervalEnd","_PQueue_intervalId","_PQueue_timeoutId","_PQueue_queue","_PQueue_queueClass","_PQueue_pending","_PQueue_concurrency","_PQueue_isPaused","_PQueue_throwOnTimeout","_PQueue_doesIntervalAllowAnother_get","_PQueue_doesConcurrentAllowAnother_get","_PQueue_next","_PQueue_onResumeInterval","_PQueue_isIntervalPaused_get","_PQueue_tryToStartAnother","_PQueue_initializeIntervalIfNeeded","_PQueue_onInterval","_PQueue_processQueue","_PQueue_throwOnAbort","_PQueue_onEvent","enqueue","run","dequeue","__classPrivateFieldSet","PQueue","_a","_b","_c","_d","carryoverConcurrencyCount","intervalCap","POSITIVE_INFINITY","autoStart","queueClass","throwOnTimeout","newConcurrency","function_","functions","sizeBy","isPaused","WeakSet","canInitializeInterval","job","DEFAULT_DAG_WALKERS","DATASTORE_PIN_PREFIX","DATASTORE_BLOCK_PREFIX","DATASTORE_ENCODING","base36","toDSKey","PinsImpl","dagWalkers","dagWalker","pinKey","pinnedBlock","pinnedBy","pinCount","pin","withPinnedBlock","walk","blockKey","BlockStorage","lock","pins","singleProcess","holdGcLock","readLock","writeLock","isPinned","storage","DS_VERSION_KEY","NetworkedStorage","missingBlocks","notifyEach","offline","HeliaImpl","hashers","createBitswap","codecOrName","networkedStorage","assertDatastoreVersionIsCurrent","FloodsubID","GossipsubIDv10","GossipsubIDv11","GossipsubMaxIHaveLength","messageIdToString","typeToKey","marshalPublicKey","SignaturePolicy","PublishConfigType","RejectReason","ValidateError","MessageStatus","rejectReasonFromAcceptance","acceptance","Ignore","Reject","defaultPeerScoreParams","behaviourPenaltyDecay","decayInterval","decayToZero","retainScore","defaultTopicScoreParams","firstMessageDeliveriesDecay","meshMessageDeliveriesDecay","meshMessageDeliveriesCap","meshMessageDeliveriesWindow","meshMessageDeliveriesActivation","meshFailurePenaltyDecay","invalidMessageDeliveriesDecay","createPeerScoreParams","topicScoreParams","createTopicScoreParams","validateTopicScoreParams","defaultPeerScoreThresholds","gossipThreshold","publishThreshold","graylistThreshold","acceptPXThreshold","opportunisticGraftThreshold","createPeerScoreThresholds","DeliveryRecordStatus","MessageDeliveries","getRecord","ensureRecord","drec","firstSeenTsMs","expire","gc","removeItemsFromSet","superSet","ineed","cond","subset","MapDef","getDefault","getOrDefault","PeerScore","scoreCache","deliveryRecords","_backgroundInterval","scoreCacheValidityMs","validatePeerScoreParams","background","refreshScores","dumpPeerScoreStats","fromEntries","messageFirstSeenTimestampMs","tparams","graftTime","removeIPsForPeer","scoreFnCalls","cacheUntil","scoreFnRuns","scoreCachedDelta","addPenalty","penalty","penaltyLabel","onScorePenalty","addPeer","addIP","removeIP","peersWithIP","removePeer","getPtopicStats","validateMessage","deliverMessage","markFirstMessageDelivery","markDuplicateMessageDelivery","rejectInvalidMessage","markInvalidMessageDelivery","rejectMessage","Blacklisted","ignored","invalid","duplicateMessage","cap","validatedTime","deliveryDelayMs","isLateDelivery","onDuplicateMsgDelivery","ipsToRemove","ipToRemove","peerSet","topicStats","IWantTracer","gossipsubIWantFollowupMs","requestMsByMsg","requestMsByMsgExpire","requestMsByMsgSize","addPromise","expireByPeer","iwantPromiseStarted","getBrokenPromises","brokenPromises","iwantPromiseBroken","isDuplicate","trackMessage","iwantPromiseResolved","iwantPromiseResolvedFromDuplicate","iwantPromiseResolvedPeers","maxMs","iwantMessagePruned","requestMs","iwantPromiseDeliveryTime","MessageSource","InclusionReason","ChurnReason","ScorePenalty","IHaveIgnoreReason","ScoreThreshold","SignPrefix","msgIdFnStrictSign","sequenceNumber","seqnoBytes","msgIdFnStrictNoSign","OutboundStream","rawStream","errCallback","InboundStream","defaultDecodeRpcLimits","maxSubscriptions","maxMessages","maxIhaveMessageIDs","maxIwantMessageIDs","maxControlMessages","maxPeerInfos","decodeRpc","decodeSubOpts","decodeMessage","decodeControlMessage","decodeControlIHave","decodeControlIWant","decodeControlGraft","decodeControlPrune","decodePeerInfo","bases","convertToString","ipBuff","ipString","bytes2ip","bytes2str","bytes2port","address","bytes2mh","bytes2onion","bytes2mb","addrBytes","portBytes","Protocol","GossipStatusCode","GossipSub","globalSignaturePolicy","multicodecs","publishConfig","dataTransform","streamsInbound","streamsOutbound","outboundInflightQueue","direct","floodsubPeers","seenCache","acceptFromWhitelist","mesh","fanoutLastpub","peerhave","iasked","msgIdFn","fastMsgIdFn","fastMsgIdCache","publishedMessageIds","mcache","topicValidators","heartbeatTicks","gossipTracer","directPeerInitial","decodeRpcLimits","stopped","allowedTopics","heartbeatTimer","fallbackToFloodsub","floodPublish","doPX","directPeers","Dlo","Dhi","Dscore","Dout","Dlazy","heartbeatInterval","second","fanoutTTL","minute","mcacheLength","mcacheGossip","seenTTL","prunePeers","pruneBackoff","unsubcribeBackoff","graftFloodThreshold","opportunisticGraftPeers","opportunisticGraftTicks","directConnectTicks","scoreParams","scoreThresholds","debugName","messageCache","metricsRegister","metricsTopicStrToLabel","maxMeshMessageDeliveriesWindowMs","topicParam","protocolsEnabled","gauge","labelNames","topicSubscriptionStatus","topicPeersCount","meshPeerCounts","meshPeerInclusionEventsFanout","meshPeerInclusionEventsRandom","meshPeerInclusionEventsSubscribed","meshPeerInclusionEventsOutbound","meshPeerInclusionEventsNotEnough","meshPeerInclusionEventsOpportunistic","meshPeerInclusionEventsUnknown","meshPeerChurnEventsDisconnected","meshPeerChurnEventsBadScore","meshPeerChurnEventsPrune","meshPeerChurnEventsExcess","meshPeerChurnEventsUnknown","peersPerProtocol","heartbeatDuration","histogram","buckets","heartbeatSkipped","acceptedMessagesTotal","ignoredMessagesTotal","rejectedMessagesTotal","unknownValidationResultsTotal","asyncValidationMcacheHit","asyncValidationDelayFromFirstSeenSec","asyncValidationUnknownFirstSeen","peerReadStreamError","rpcRecvBytes","rpcRecvCount","rpcRecvSubscription","rpcRecvMessage","rpcRecvControl","rpcRecvIHave","rpcRecvIWant","rpcRecvGraft","rpcRecvPrune","rpcDataError","rpcRecvError","rpcRecvNotAccepted","rpcSentBytes","rpcSentCount","rpcSentSubscription","rpcSentMessage","rpcSentControl","rpcSentIHave","rpcSentIWant","rpcSentGraft","rpcSentPrune","msgPublishCount","msgPublishPeersByTopic","directPeersPublishedTotal","floodsubPeersPublishedTotal","meshPeersPublishedTotal","fanoutPeersPublishedTotal","msgPublishBytes","msgPublishTime","msgForwardCount","msgForwardPeers","msgReceivedPreValidation","msgReceivedError","prevalidationInvalidTotal","prevalidationValidTotal","prevalidationDuplicateTotal","prevalidationUnknownTotal","msgReceivedInvalid","msgReceivedInvalidByTopic","duplicateMsgDeliveryDelay","maxMeshMessageDeliveriesWindowSec","duplicateMsgLateDelivery","duplicateMsgIgnored","peersByScoreThreshold","avgMinMax","scoreWeights","scorePerMesh","scoringPenalties","ihaveRcvIgnored","ihaveRcvMsgids","ihaveRcvNotSeenMsgids","iwantRcvMsgids","iwantRcvDonthaveMsgids","gossipPromiseExpireSec","iwantPromiseUntracked","connectedPeersBackoffSec","cacheSize","mcacheSize","mcacheNotValidatedCount","fastMsgIdCacheCollision","newConnectionCount","toTopic","topicStr","onJoin","onLeave","onAddToMesh","Fanout","Random","Subscribed","Outbound","NotEnough","Opportunistic","onRemoveFromMesh","Dc","BadScore","Prune","Excess","onReportValidation","messageRecord","firstSeenTimestampMs","hit","onIhaveRcv","idonthave","onIwantRcv","iwantByTopic","iwantDonthave","onForwardMsg","tosendCount","onPublishMsg","tosendGroupCount","dataLen","floodsub","onMsgRecvPreValidation","onMsgRecvError","onPrevalidationResult","duplicate","onMsgRecvInvalid","onPublishDuplicateMsg","onPeerReadStreamError","onRpcRecvError","onRpcDataError","onRpcRecv","rpcBytes","onRpcSent","registerScores","scores","graylist","registerScoreWeights","wsTopic","registerScorePerMesh","scoreByPeer","peersPerTopicLabel","peersInMesh","meshScores","getMetrics","addCollect","onScrapeMetrics","getPeers","signaturePolicy","Signing","author","Anonymous","getPublishConfigFromPeerId","createOutboundStream","peerStore","multiaddrs","addrs","registrar","onPeerConnected","onPeerDisconnected","registrarTopologyIds","heartbeatTimeout","runHeartbeat","hearbeatStartMs","connect","outboundStream","inboundStream","remoteAddr","createInboundStream","maxOutboundBufferSize","sendSubscriptions","priorInboundStream","maxInboundDataLength","pipePeerReadStream","addr","currentIP","multiaddr","tuple","tuples","ip4","ip6","multiaddrToIPStr","getMeshPeers","peersInTopic","getSubscribers","awaitRpcHandler","handleReceivedRpc","handlePeerReadStreamError","acceptFrom","subOpt","handleReceivedSubscription","handleReceivedMessagePromise","handleReceivedMessage","awaitRpcMessageHandler","handleControlMessage","topicSet","rpcMsg","validationResult","validateReceivedMessage","asyncValidation","emitSelf","propagationSource","forwardMessage","fastMsgIdStr","msgIdCached","SignaturePresent","SeqnoPresent","FromPresent","InvalidSeqno","InvalidSignature","InvalidPeerId","fromPeerId","rpcMsgPreSign","validateToRawMessage","inboundTransform","TransformFailed","topicValidator","getScore","toPeer","sendRpc","controlMsg","handleIHave","handleIWant","handleGraft","handlePrune","iwantMessageIds","messagesAccepted","acceptUntil","LowScore","MaxIhave","MaxIasked","iask","iwantList","GraftBackoff","floodCutoff","addBackoff","makePrune","doAddBackoff","pxConnect","intervalMs","applyIwantPenalties","BrokenPromise","clearBackoff","toconnect","pi","consumePeerRecord","connectionManager","openConnection","getTopologies","wasSubscribed","toAdd","fanoutPeers","fanoutCount","getRandomGossipPeers","sendGraft","meshPeers","sendPrune","selectPeersToForward","excludePeers","tosend","selectPeersToPublish","newFanoutPeers","rawMsg","startMs","transformedData","outboundTransform","originalData","buildRawMessage","ignoreDuplicatePublishError","willSendToSelf","allowPublishToZeroPeers","durationMs","reportMessageValidationResult","rejectReason","ctrl","piggybackControl","piggybackGossip","outRpc","tograft","toprune","noPX","pruning","emitGossip","peersToGossipByTopic","gossipIDsByTopic","peersToGossip","doEmitGossip","candidateToGossip","factor","peerMessageIDs","pushGossip","controlIHaveMsgs","onUnsubscribe","backoffMs","xid","px","peerInfo","peerRecordEnvelope","timer","startTimer","heartbeat","msToNextHeartbeat","directConnect","candidateMeshPeers","shuffledPeers","peerStreams","prunePeer","graftPeer","newMeshPeers","removeFirstNItemsFromSet","peersArray","rotate","peersList","medianIndex","medianScore","lastpb","topicPeers","candidateFanoutPeers","sendGraftPrune","backoffSize","expiredMs","gossipsub","MessageTypes","MessageTypeNames","InitiatorMessageTypes","NEW_STREAM","MESSAGE","MESSAGE_INITIATOR","CLOSE","CLOSE_INITIATOR","RESET","RESET_INITIATOR","ReceiverMessageTypes","MESSAGE_RECEIVER","CLOSE_RECEIVER","RESET_RECEIVER","MAX_MSG_SIZE","_buffer","_headerInfo","_maxMessageSize","_maxUnprocessedMessageQueueSize","maxUnprocessedMessageQueueSize","_decodeHeader","readVarInt","REST","DEFAULT_BATCH_SIZE","DEFAULT_SERIALIZE","yieldAfter","POOL_SIZE","_pool","_poolOffset","MplexStream","streamId","maxDataSize","printMessage","MplexStreamMuxer","_streamId","_source","rateLimiter","closeTimeout","initiators","receivers","_createSink","minSendBytes","points","disconnectThreshold","duration","registry","_newReceiverStream","maxMsgSize","createStream","_handleIncoming","maxStreamBufferSize","sourceReadableLength","Mplex","mplex","IpnsEntry","ValidityType","__ValidityTypeValues","signatureV1","validityType","validity","sequence","ttl","pubKey","signatureV2","IPNS_PREFIX","extractPublicKey","record","parseCborData","Value","time","rfc3339Matcher","year","month","date","hour","millisecond","padEnd","UTC","parseRFC3339","Validity","validateCborDataMatchesPbData","Sequence","TTL","peerIdFromRoutingKey","ipnsSelector","aSeq","bSeq","recordAValidityDate","toDate","recordBValidityDate","MAX_RECORD_SIZE","dataForSignature","entryData","ipnsRecordDataForV2Sig","ipnsValidator","marshalledData","receivedRecord","bootstrapConfig","createLibp2p","addresses","listen","discoverRelays","connectionEncryption","streamMuxers","peerDiscovery","contentRouters","services","identify","autoNAT","dcutr","dht","clientMode","validators","ipns","selectors","createHelia","isLibp2p","agentVersion","addHeliaToAgentVersion","ERR_IPNS_EXPIRED_RECORD","ERR_UNRECOGNIZED_VALIDITY","ERR_SIGNATURE_VERIFICATION","ERR_UNRECOGNIZED_FORMAT","ERR_UNDEFINED_PARAMETER","ERR_INVALID_RECORD_DATA","ERR_INVALID_VALUE","ERR_INVALID_EMBEDDED_KEY","ERR_RECORD_TOO_LARGE","base36upper","comparator","step","trunc","instanceOfAny","constructors","idbProxyableTypes","cursorAdvanceMethods","cursorRequestMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","idbProxyTraps","IDBTransaction","wrapFunction","IDBDatabase","IDBCursor","transformCachableValue","unlisten","cacheDonePromiseForTransaction","IDBObjectStore","IDBIndex","IDBRequest","success","promisifyRequest","openDB","blocked","blocking","terminated","openPromise","deleteDB","readMethods","writeMethods","cachedMethods","getMethod","targetFuncName","useIndex","isWrite","storeName","oldTraps","word","boundry","includeBoundaries","v4","v6segment","v6","v46Exact","v4exact","v6exact","ipRegex","exact","WantListEntry","_refCounter","Addresses","Swarm","Announce","NoAnnounce","API","Gateway","Delegates","Discovery","MDNS","Enabled","Interval","webRTCStar","Bootstrap","Pubsub","ConnMgr","LowWater","HighWater","DisableNatPortMap","Routing","maxSize","lru","hashlru","httpQueue","ipfsPath","Path","resolveDnslink","fqdn","nocache","URL","initAssets","isIterable","isDuplex","duplexPipelineFn","sourceWrap","fns","rawPipe","firstSeen","defaultEncoder","lengthLength","lengthBuf","encodeLength","ReadMode","defaultDecoder","LENGTH","dataLength","maxLengthLength","dataLengthLength","onLength","DATA","fromReader","varByteSource","meshPeerInclusionEvents","meshPeerChurnEvents","asyncValidationResult","msgPublishPeers","msgPublishPeersByGroup","msgReceivedStatus","onReportValidationMcacheHit","peerGroup","onMsgRecvResult","addressBook","convert","Unsub","envelope","eid","getRawEnvelope","routers","libp2pConfig","webRtcStar","discovery","maxParallelDials","maxDialsPerPeer","dialTimeout","autoDial","nat","preload","LevelDatastore","Level","compression","_query","iteratorOpts","li","levelIteratorToIterator","cidToKey","keyToCid","convertPrefix","firstChar","BlockstoreDatastoreAdapter","order","convertQuery","convertKeyQuery","createRepo","codecs","repoPath","codeOrName","getCodec","autoMigrate","onMigrationProgress","repoLock","valuesById","parseMode","parseMtime","peekableIterator","normaliseCandidateMultiple","normaliseContent","_readableState","toFileObject","toAsyncIterable","normaliseInput","normaliseCandidateSingle","isBytes","isBlob","isFileObject","isReadableStream","LOAD_BASE","Multibases","_basesByName","_basesByPrefix","_loadBase","loadBase","addBase","removeBase","nameOrPrefix","listBases","LOAD_CODEC","Multicodecs","_codecsByName","_codecsByCode","_loadCodec","loadCodec","addCodec","removeCodec","listCodecs","LOAD_HASHER","Multihashes","_hashersByName","_hashersByCode","_loadHasher","loadHasher","addHasher","removeHasher","listHashers","itToBlob","modeToString","multipartRequest","abortController","fileSuffix","fieldName","isCID","toPin","isAsyncIterable","IPFS_PREFIX","toCidAndPath","toUrlString","TimeoutError","withTimeoutOption","optionsArgIndex","fnRes","timeoutPromise","maybeThrowTimeoutError"],"sourceRoot":""}