/*! For license information please see 748.2250a551.chunk.js.LICENSE.txt */
(self.webpackChunkcyb=self.webpackChunkcyb||[]).push([[748],{73650:function(e,t,r){"use strict";var n=r(96763);const i=-8,s=-4,o=0,a=1,c=1,u=2,l=5,h=1024,d=2048,f=8192,p=0,g=4,m=8,y=12,b=12,w=16,v="undefined"!=typeof BigUint64Array,S=Symbol(),_=1024;function A(e,t){const r=new Uint32Array(e),n=new Uint16Array(e);var i=r[t+s>>>2]>>>1,o=t>>>1;if(i<=_)return String.fromCharCode.apply(String,n.subarray(o,o+i));const a=[];do{const e=n[o+_-1],t=e>=55296&&e<56320?_-1:_;a.push(String.fromCharCode.apply(String,n.subarray(o,o+=t))),i-=t}while(i>_);return a.join("")+String.fromCharCode.apply(String,n.subarray(o,o+i))}function E(e){const t={};function r(e,t){return e?A(e.buffer,t):"<yet unknown>"}const i=e.env=e.env||{};return i.abort=i.abort||function(e,n,s,o){const a=t.memory||i.memory;throw Error("abort: "+r(a,e)+" at "+r(a,n)+":"+s+":"+o)},i.trace=i.trace||function(e,s){const o=t.memory||i.memory;n.log("trace: "+r(o,e)+(s?" ":"")+Array.prototype.slice.call(arguments,2,2+s).join(", "))},e.Math=e.Math||Math,e.Date=e.Date||Date,t}function x(e,t){const r=t.exports,n=r.memory,S=r.table,_=r.__alloc,E=r.__retain,x=r.__rtti_base||-1;function k(e){const t=new Uint32Array(n.buffer);if((e>>>=0)>=t[x>>>2])throw Error("invalid id: "+e);return t[(x+4>>>2)+2*e]}function T(e){const t=new Uint32Array(n.buffer);if((e>>>=0)>=t[x>>>2])throw Error("invalid id: "+e);return t[(x+4>>>2)+2*e+1]}function I(e){return 31-Math.clz32(e>>>l&31)}function R(e,t,r){const i=n.buffer;if(r)switch(e){case 2:return new Float32Array(i);case 3:return new Float64Array(i)}else switch(e){case 0:return new(t?Int8Array:Uint8Array)(i);case 1:return new(t?Int16Array:Uint16Array)(i);case 2:return new(t?Int32Array:Uint32Array)(i);case 3:return new(t?BigInt64Array:BigUint64Array)(i)}throw Error("unsupported align: "+e)}function C(e){const t=new Uint32Array(n.buffer),r=t[e+i>>>2],o=k(r);if(!(o&c))throw Error("not an array: "+r);const a=I(o);var l=t[e+g>>>2];const f=o&u?t[e+b>>>2]:t[l+s>>>2]>>>a;return R(a,o&h,o&d).subarray(l>>>=a,l+f)}function O(e,t,r){return new e(D(e,t,r))}function D(e,t,r){const i=n.buffer,o=new Uint32Array(i),a=o[r+g>>>2];return new e(i,a,o[a+s>>>2]>>>t)}return e.__allocString=function(e){const t=e.length,r=_(t<<1,a),i=new Uint16Array(n.buffer);for(var s=0,o=r>>>1;s<t;++s)i[o+s]=e.charCodeAt(s);return r},e.__getString=function(e){const t=n.buffer;if(new Uint32Array(t)[e+i>>>2]!==a)throw Error("not a string: "+e);return A(t,e)},e.__allocArray=function(e,t){const r=k(e);if(!(r&(c|u)))throw Error("not an array: "+e+" @ "+r);const i=I(r),s=t.length,a=_(s<<i,o),l=_(r&u?w:y,e),v=new Uint32Array(n.buffer);v[l+p>>>2]=E(a),v[l+g>>>2]=a,v[l+m>>>2]=s<<i,r&u&&(v[l+b>>>2]=s);const S=R(i,r&h,r&d);if(r&f)for(let e=0;e<s;++e)S[(a>>>i)+e]=E(t[e]);else S.set(t,a>>>i);return l},e.__getArrayView=C,e.__getArray=function(e){const t=C(e),r=t.length,n=new Array(r);for(let e=0;e<r;e++)n[e]=t[e];return n},e.__getArrayBuffer=function(e){const t=n.buffer,r=new Uint32Array(t)[e+s>>>2];return t.slice(e,e+r)},e.__getInt8Array=O.bind(null,Int8Array,0),e.__getInt8ArrayView=D.bind(null,Int8Array,0),e.__getUint8Array=O.bind(null,Uint8Array,0),e.__getUint8ArrayView=D.bind(null,Uint8Array,0),e.__getUint8ClampedArray=O.bind(null,Uint8ClampedArray,0),e.__getUint8ClampedArrayView=D.bind(null,Uint8ClampedArray,0),e.__getInt16Array=O.bind(null,Int16Array,1),e.__getInt16ArrayView=D.bind(null,Int16Array,1),e.__getUint16Array=O.bind(null,Uint16Array,1),e.__getUint16ArrayView=D.bind(null,Uint16Array,1),e.__getInt32Array=O.bind(null,Int32Array,2),e.__getInt32ArrayView=D.bind(null,Int32Array,2),e.__getUint32Array=O.bind(null,Uint32Array,2),e.__getUint32ArrayView=D.bind(null,Uint32Array,2),v&&(e.__getInt64Array=O.bind(null,BigInt64Array,3),e.__getInt64ArrayView=D.bind(null,BigInt64Array,3),e.__getUint64Array=O.bind(null,BigUint64Array,3),e.__getUint64ArrayView=D.bind(null,BigUint64Array,3)),e.__getFloat32Array=O.bind(null,Float32Array,2),e.__getFloat32ArrayView=D.bind(null,Float32Array,2),e.__getFloat64Array=O.bind(null,Float64Array,3),e.__getFloat64ArrayView=D.bind(null,Float64Array,3),e.__instanceof=function(e,t){const r=new Uint32Array(n.buffer);var s=r[e+i>>>2];if(s<=r[x>>>2])do{if(s==t)return!0}while(s=T(s));return!1},e.memory=e.memory||n,e.table=e.table||S,P(r,e)}function k(e){return"undefined"!=typeof Response&&e instanceof Response}async function T(e,t){return k(e=await e)?I(e,t):x(E(t||(t={})),await WebAssembly.instantiate(e instanceof WebAssembly.Module?e:await WebAssembly.compile(e),t))}async function I(e,t){return WebAssembly.instantiateStreaming?x(E(t||(t={})),(await WebAssembly.instantiateStreaming(e,t)).instance):T(k(e=await e)?e.arrayBuffer():e,t)}function P(e,t){var r=t?Object.create(t):{},n=e.__argumentsLength?function(t){e.__argumentsLength.value=t}:e.__setArgumentsLength||e.__setargc||function(){};for(let t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;const i=e[t];let s=t.split("."),o=r;for(;s.length>1;){let e=s.shift();Object.prototype.hasOwnProperty.call(o,e)||(o[e]={}),o=o[e]}let a=s[0],c=a.indexOf("#");if(c>=0){let r=a.substring(0,c),s=o[r];if(void 0===s||!s.prototype){let e=function(...t){return e.wrap(e.prototype.constructor(0,...t))};e.prototype={valueOf:function(){return this[S]}},e.wrap=function(t){return Object.create(e.prototype,{[S]:{value:t,writable:!1}})},s&&Object.getOwnPropertyNames(s).forEach((t=>Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t)))),o[r]=e}if(a=a.substring(c+1),o=o[r].prototype,/^(get|set):/.test(a)){if(!Object.prototype.hasOwnProperty.call(o,a=a.substring(4))){let r=e[t.replace("set:","get:")],n=e[t.replace("get:","set:")];Object.defineProperty(o,a,{get:function(){return r(this[S])},set:function(e){n(this[S],e)},enumerable:!0})}}else"constructor"===a?(o[a]=(...e)=>(n(e.length),i(...e))).original=i:(o[a]=function(...e){return n(e.length),i(this[S],...e)}).original=i}else/^(get|set):/.test(a)?Object.prototype.hasOwnProperty.call(o,a=a.substring(4))||Object.defineProperty(o,a,{get:e[t.replace("set:","get:")],set:e[t.replace("get:","set:")],enumerable:!0}):"function"==typeof i&&i!==n?(o[a]=(...e)=>(n(e.length),i(...e))).original=i:o[a]=i}return r}t.instantiate=T,t.instantiateSync=function(e,t){return x(E(t||(t={})),new WebAssembly.Instance(e instanceof WebAssembly.Module?e:new WebAssembly.Module(e),t))},t.instantiateStreaming=I,t.demangle=P},85590:function(e,t,r){"use strict";e.exports=r(51782)},51782:function(e,t,r){"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(17413),n.BufferWriter=r(13790),n.Reader=r(68297),n.BufferReader=r(11010),n.util=r(39070),n.rpc=r(71203),n.roots=r(31269),n.configure=i,i()},68297:function(e,t,r){"use strict";e.exports=c;var n,i=r(39070),s=i.LongBits,o=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},h=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new n(e):l(e)})(e)}:l};function d(){var e=new s(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new s(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=h(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var n=i.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=h(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},11010:function(e,t,r){"use strict";e.exports=s;var n=r(68297);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(39070);function s(e){n.call(this,e)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},31269:function(e){"use strict";e.exports={}},71203:function(e,t,r){"use strict";t.Service=r(49591)},49591:function(e,t,r){"use strict";e.exports=i;var n=r(39070);function i(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,s,o){if(!s)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(e,a,t,r,i,s);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(e,r){if(e)return a.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},5923:function(e,t,r){"use strict";e.exports=i;var n=r(39070);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(n.isString(e)){if(!n.Long)return i.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):s},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===o?s:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},39070:function(e,t,r){"use strict";var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(18045),n.base64=r(8839),n.EventEmitter=r(24358),n.float=r(49410),n.inquire=r(84153),n.utf8=r(81447),n.pool=r(99390),n.LongBits=r(5923),n.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},17413:function(e,t,r){"use strict";e.exports=h;var n,i=r(39070),s=i.LongBits,o=i.base64,a=i.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};function f(e,t,r){t[r]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}h.create=d(),h.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(g,10,s.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.uint64=function(e){var t=s.from(e);return this._push(g,t.length(),t)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(g,t.length(),t)},h.prototype.bool=function(e){return this._push(f,1,e?1:0)},h.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(e){var t=s.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var y=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var r=h.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(y,t,e)},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},h._configure=function(e){n=e,h.create=d(),n._configure()}},13790:function(e,t,r){"use strict";e.exports=s;var n=r(17413);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(39070);function s(){n.call(this)}function o(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},s._configure()},76005:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToPath=t.Slip10RawIndex=t.slip10CurveFromString=t.Slip10Curve=t.Slip10=t.pathToString=t.sha512=t.Sha512=t.sha256=t.Sha256=t.Secp256k1Signature=t.ExtendedSecp256k1Signature=t.Secp256k1=t.ripemd160=t.Ripemd160=t.Random=t.Xchacha20poly1305Ietf=t.xchacha20NonceLength=t.isArgon2idOptions=t.Ed25519Keypair=t.Ed25519=t.Argon2id=t.keccak256=t.Keccak256=t.Hmac=t.EnglishMnemonic=t.Bip39=void 0;var n=r(88178);Object.defineProperty(t,"Bip39",{enumerable:!0,get:function(){return n.Bip39}}),Object.defineProperty(t,"EnglishMnemonic",{enumerable:!0,get:function(){return n.EnglishMnemonic}});var i=r(48094);Object.defineProperty(t,"Hmac",{enumerable:!0,get:function(){return i.Hmac}});var s=r(71715);Object.defineProperty(t,"Keccak256",{enumerable:!0,get:function(){return s.Keccak256}}),Object.defineProperty(t,"keccak256",{enumerable:!0,get:function(){return s.keccak256}});var o=r(92297);Object.defineProperty(t,"Argon2id",{enumerable:!0,get:function(){return o.Argon2id}}),Object.defineProperty(t,"Ed25519",{enumerable:!0,get:function(){return o.Ed25519}}),Object.defineProperty(t,"Ed25519Keypair",{enumerable:!0,get:function(){return o.Ed25519Keypair}}),Object.defineProperty(t,"isArgon2idOptions",{enumerable:!0,get:function(){return o.isArgon2idOptions}}),Object.defineProperty(t,"xchacha20NonceLength",{enumerable:!0,get:function(){return o.xchacha20NonceLength}}),Object.defineProperty(t,"Xchacha20poly1305Ietf",{enumerable:!0,get:function(){return o.Xchacha20poly1305Ietf}});var a=r(33090);Object.defineProperty(t,"Random",{enumerable:!0,get:function(){return a.Random}});var c=r(57098);Object.defineProperty(t,"Ripemd160",{enumerable:!0,get:function(){return c.Ripemd160}}),Object.defineProperty(t,"ripemd160",{enumerable:!0,get:function(){return c.ripemd160}});var u=r(88993);Object.defineProperty(t,"Secp256k1",{enumerable:!0,get:function(){return u.Secp256k1}});var l=r(98707);Object.defineProperty(t,"ExtendedSecp256k1Signature",{enumerable:!0,get:function(){return l.ExtendedSecp256k1Signature}}),Object.defineProperty(t,"Secp256k1Signature",{enumerable:!0,get:function(){return l.Secp256k1Signature}});var h=r(4707);Object.defineProperty(t,"Sha256",{enumerable:!0,get:function(){return h.Sha256}}),Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return h.sha256}}),Object.defineProperty(t,"Sha512",{enumerable:!0,get:function(){return h.Sha512}}),Object.defineProperty(t,"sha512",{enumerable:!0,get:function(){return h.sha512}});var d=r(82098);Object.defineProperty(t,"pathToString",{enumerable:!0,get:function(){return d.pathToString}}),Object.defineProperty(t,"Slip10",{enumerable:!0,get:function(){return d.Slip10}}),Object.defineProperty(t,"Slip10Curve",{enumerable:!0,get:function(){return d.Slip10Curve}}),Object.defineProperty(t,"slip10CurveFromString",{enumerable:!0,get:function(){return d.slip10CurveFromString}}),Object.defineProperty(t,"Slip10RawIndex",{enumerable:!0,get:function(){return d.Slip10RawIndex}}),Object.defineProperty(t,"stringToPath",{enumerable:!0,get:function(){return d.stringToPath}})},44917:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toUtf8=t.fromUtf8=t.toRfc3339=t.fromRfc3339=t.toHex=t.fromHex=t.toBech32=t.normalizeBech32=t.fromBech32=t.toBase64=t.fromBase64=t.toAscii=t.fromAscii=void 0;var n=r(1718);Object.defineProperty(t,"fromAscii",{enumerable:!0,get:function(){return n.fromAscii}}),Object.defineProperty(t,"toAscii",{enumerable:!0,get:function(){return n.toAscii}});var i=r(18594);Object.defineProperty(t,"fromBase64",{enumerable:!0,get:function(){return i.fromBase64}}),Object.defineProperty(t,"toBase64",{enumerable:!0,get:function(){return i.toBase64}});var s=r(50714);Object.defineProperty(t,"fromBech32",{enumerable:!0,get:function(){return s.fromBech32}}),Object.defineProperty(t,"normalizeBech32",{enumerable:!0,get:function(){return s.normalizeBech32}}),Object.defineProperty(t,"toBech32",{enumerable:!0,get:function(){return s.toBech32}});var o=r(71028);Object.defineProperty(t,"fromHex",{enumerable:!0,get:function(){return o.fromHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return o.toHex}});var a=r(71466);Object.defineProperty(t,"fromRfc3339",{enumerable:!0,get:function(){return a.fromRfc3339}}),Object.defineProperty(t,"toRfc3339",{enumerable:!0,get:function(){return a.toRfc3339}});var c=r(7290);Object.defineProperty(t,"fromUtf8",{enumerable:!0,get:function(){return c.fromUtf8}}),Object.defineProperty(t,"toUtf8",{enumerable:!0,get:function(){return c.toUtf8}})},51298:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Uint64=t.Uint53=t.Uint32=t.Int53=t.Decimal=void 0;var n=r(75173);Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return n.Decimal}});var i=r(80887);Object.defineProperty(t,"Int53",{enumerable:!0,get:function(){return i.Int53}}),Object.defineProperty(t,"Uint32",{enumerable:!0,get:function(){return i.Uint32}}),Object.defineProperty(t,"Uint53",{enumerable:!0,get:function(){return i.Uint53}}),Object.defineProperty(t,"Uint64",{enumerable:!0,get:function(){return i.Uint64}})},5450:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCoins=t.coins=t.coin=t.executeKdf=t.makeSignDoc=t.makeSignBytes=t.makeAuthInfoBytes=t.isOfflineDirectSigner=t.Registry=t.isTxBodyEncodeObject=t.isTsProtoGeneratedType=t.isPbjsGeneratedType=t.encodePubkey=t.decodePubkey=t.decodeOptionalPubkey=t.anyToSinglePubkey=t.makeCosmoshubPath=t.DirectSecp256k1Wallet=t.extractKdfConfiguration=t.DirectSecp256k1HdWallet=t.decodeTxRaw=void 0;var n=r(53142);Object.defineProperty(t,"decodeTxRaw",{enumerable:!0,get:function(){return n.decodeTxRaw}});var i=r(19124);Object.defineProperty(t,"DirectSecp256k1HdWallet",{enumerable:!0,get:function(){return i.DirectSecp256k1HdWallet}}),Object.defineProperty(t,"extractKdfConfiguration",{enumerable:!0,get:function(){return i.extractKdfConfiguration}});var s=r(97568);Object.defineProperty(t,"DirectSecp256k1Wallet",{enumerable:!0,get:function(){return s.DirectSecp256k1Wallet}});var o=r(69550);Object.defineProperty(t,"makeCosmoshubPath",{enumerable:!0,get:function(){return o.makeCosmoshubPath}});var a=r(39866);Object.defineProperty(t,"anyToSinglePubkey",{enumerable:!0,get:function(){return a.anyToSinglePubkey}}),Object.defineProperty(t,"decodeOptionalPubkey",{enumerable:!0,get:function(){return a.decodeOptionalPubkey}}),Object.defineProperty(t,"decodePubkey",{enumerable:!0,get:function(){return a.decodePubkey}}),Object.defineProperty(t,"encodePubkey",{enumerable:!0,get:function(){return a.encodePubkey}});var c=r(40267);Object.defineProperty(t,"isPbjsGeneratedType",{enumerable:!0,get:function(){return c.isPbjsGeneratedType}}),Object.defineProperty(t,"isTsProtoGeneratedType",{enumerable:!0,get:function(){return c.isTsProtoGeneratedType}}),Object.defineProperty(t,"isTxBodyEncodeObject",{enumerable:!0,get:function(){return c.isTxBodyEncodeObject}}),Object.defineProperty(t,"Registry",{enumerable:!0,get:function(){return c.Registry}});var u=r(7986);Object.defineProperty(t,"isOfflineDirectSigner",{enumerable:!0,get:function(){return u.isOfflineDirectSigner}});var l=r(62501);Object.defineProperty(t,"makeAuthInfoBytes",{enumerable:!0,get:function(){return l.makeAuthInfoBytes}}),Object.defineProperty(t,"makeSignBytes",{enumerable:!0,get:function(){return l.makeSignBytes}}),Object.defineProperty(t,"makeSignDoc",{enumerable:!0,get:function(){return l.makeSignDoc}});var h=r(48913);Object.defineProperty(t,"executeKdf",{enumerable:!0,get:function(){return h.executeKdf}});var d=r(78824);Object.defineProperty(t,"coin",{enumerable:!0,get:function(){return d.coin}}),Object.defineProperty(t,"coins",{enumerable:!0,get:function(){return d.coins}}),Object.defineProperty(t,"parseCoins",{enumerable:!0,get:function(){return d.parseCoins}})},84007:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isMsgVoteWeightedEncodeObject=t.isMsgVoteEncodeObject=t.isMsgUndelegateEncodeObject=t.isMsgTransferEncodeObject=t.isMsgSubmitProposalEncodeObject=t.isMsgSendEncodeObject=t.isMsgEditValidatorEncodeObject=t.isMsgDepositEncodeObject=t.isMsgDelegateEncodeObject=t.isMsgCreateValidatorEncodeObject=t.isMsgCancelUnbondingDelegationEncodeObject=t.isMsgBeginRedelegateEncodeObject=t.isAminoMsgWithdrawValidatorCommission=t.isAminoMsgWithdrawDelegatorReward=t.isAminoMsgVoteWeighted=t.isAminoMsgVote=t.isAminoMsgVerifyInvariant=t.isAminoMsgUnjail=t.isAminoMsgUndelegate=t.isAminoMsgTransfer=t.isAminoMsgSubmitProposal=t.isAminoMsgSubmitEvidence=t.isAminoMsgSetWithdrawAddress=t.isAminoMsgSend=t.isAminoMsgMultiSend=t.isAminoMsgFundCommunityPool=t.isAminoMsgEditValidator=t.isAminoMsgDeposit=t.isAminoMsgDelegate=t.isAminoMsgCreateVestingAccount=t.isAminoMsgCreateValidator=t.isAminoMsgBeginRedelegate=t.createVestingAminoConverters=t.createStakingAminoConverters=t.createSlashingAminoConverters=t.createIbcAminoConverters=t.createGroupAminoConverters=t.createGovAminoConverters=t.createFeegrantAminoConverters=t.createEvidenceAminoConverters=t.createDistributionAminoConverters=t.createCrysisAminoConverters=t.createBankAminoConverters=t.createAuthzAminoConverters=t.logs=t.GasPrice=t.calculateFee=t.fromTendermintEvent=t.AminoTypes=t.accountFromAny=void 0,t.parseCoins=t.makeCosmoshubPath=t.coins=t.coin=t.TimeoutError=t.StargateClient=t.isDeliverTxSuccess=t.isDeliverTxFailure=t.BroadcastTxError=t.assertIsDeliverTxSuccess=t.assertIsDeliverTxFailure=t.SigningStargateClient=t.defaultRegistryTypes=t.createDefaultAminoConverters=t.isSearchTxQueryArray=t.QueryClient=t.decodeCosmosSdkDecFromProto=t.createProtobufRpcClient=t.createPagination=t.makeMultisignedTxBytes=t.makeMultisignedTx=t.setupTxExtension=t.setupStakingExtension=t.setupSlashingExtension=t.setupMintExtension=t.setupIbcExtension=t.setupGovExtension=t.setupFeegrantExtension=t.setupDistributionExtension=t.setupBankExtension=t.setupAuthzExtension=t.setupAuthExtension=t.isMsgWithdrawDelegatorRewardEncodeObject=void 0;var o=r(78543);Object.defineProperty(t,"accountFromAny",{enumerable:!0,get:function(){return o.accountFromAny}});var a=r(55304);Object.defineProperty(t,"AminoTypes",{enumerable:!0,get:function(){return a.AminoTypes}});var c=r(96238);Object.defineProperty(t,"fromTendermintEvent",{enumerable:!0,get:function(){return c.fromTendermintEvent}});var u=r(30163);Object.defineProperty(t,"calculateFee",{enumerable:!0,get:function(){return u.calculateFee}}),Object.defineProperty(t,"GasPrice",{enumerable:!0,get:function(){return u.GasPrice}}),t.logs=s(r(60540));var l=r(8557);Object.defineProperty(t,"createAuthzAminoConverters",{enumerable:!0,get:function(){return l.createAuthzAminoConverters}}),Object.defineProperty(t,"createBankAminoConverters",{enumerable:!0,get:function(){return l.createBankAminoConverters}}),Object.defineProperty(t,"createCrysisAminoConverters",{enumerable:!0,get:function(){return l.createCrysisAminoConverters}}),Object.defineProperty(t,"createDistributionAminoConverters",{enumerable:!0,get:function(){return l.createDistributionAminoConverters}}),Object.defineProperty(t,"createEvidenceAminoConverters",{enumerable:!0,get:function(){return l.createEvidenceAminoConverters}}),Object.defineProperty(t,"createFeegrantAminoConverters",{enumerable:!0,get:function(){return l.createFeegrantAminoConverters}}),Object.defineProperty(t,"createGovAminoConverters",{enumerable:!0,get:function(){return l.createGovAminoConverters}}),Object.defineProperty(t,"createGroupAminoConverters",{enumerable:!0,get:function(){return l.createGroupAminoConverters}}),Object.defineProperty(t,"createIbcAminoConverters",{enumerable:!0,get:function(){return l.createIbcAminoConverters}}),Object.defineProperty(t,"createSlashingAminoConverters",{enumerable:!0,get:function(){return l.createSlashingAminoConverters}}),Object.defineProperty(t,"createStakingAminoConverters",{enumerable:!0,get:function(){return l.createStakingAminoConverters}}),Object.defineProperty(t,"createVestingAminoConverters",{enumerable:!0,get:function(){return l.createVestingAminoConverters}}),Object.defineProperty(t,"isAminoMsgBeginRedelegate",{enumerable:!0,get:function(){return l.isAminoMsgBeginRedelegate}}),Object.defineProperty(t,"isAminoMsgCreateValidator",{enumerable:!0,get:function(){return l.isAminoMsgCreateValidator}}),Object.defineProperty(t,"isAminoMsgCreateVestingAccount",{enumerable:!0,get:function(){return l.isAminoMsgCreateVestingAccount}}),Object.defineProperty(t,"isAminoMsgDelegate",{enumerable:!0,get:function(){return l.isAminoMsgDelegate}}),Object.defineProperty(t,"isAminoMsgDeposit",{enumerable:!0,get:function(){return l.isAminoMsgDeposit}}),Object.defineProperty(t,"isAminoMsgEditValidator",{enumerable:!0,get:function(){return l.isAminoMsgEditValidator}}),Object.defineProperty(t,"isAminoMsgFundCommunityPool",{enumerable:!0,get:function(){return l.isAminoMsgFundCommunityPool}}),Object.defineProperty(t,"isAminoMsgMultiSend",{enumerable:!0,get:function(){return l.isAminoMsgMultiSend}}),Object.defineProperty(t,"isAminoMsgSend",{enumerable:!0,get:function(){return l.isAminoMsgSend}}),Object.defineProperty(t,"isAminoMsgSetWithdrawAddress",{enumerable:!0,get:function(){return l.isAminoMsgSetWithdrawAddress}}),Object.defineProperty(t,"isAminoMsgSubmitEvidence",{enumerable:!0,get:function(){return l.isAminoMsgSubmitEvidence}}),Object.defineProperty(t,"isAminoMsgSubmitProposal",{enumerable:!0,get:function(){return l.isAminoMsgSubmitProposal}}),Object.defineProperty(t,"isAminoMsgTransfer",{enumerable:!0,get:function(){return l.isAminoMsgTransfer}}),Object.defineProperty(t,"isAminoMsgUndelegate",{enumerable:!0,get:function(){return l.isAminoMsgUndelegate}}),Object.defineProperty(t,"isAminoMsgUnjail",{enumerable:!0,get:function(){return l.isAminoMsgUnjail}}),Object.defineProperty(t,"isAminoMsgVerifyInvariant",{enumerable:!0,get:function(){return l.isAminoMsgVerifyInvariant}}),Object.defineProperty(t,"isAminoMsgVote",{enumerable:!0,get:function(){return l.isAminoMsgVote}}),Object.defineProperty(t,"isAminoMsgVoteWeighted",{enumerable:!0,get:function(){return l.isAminoMsgVoteWeighted}}),Object.defineProperty(t,"isAminoMsgWithdrawDelegatorReward",{enumerable:!0,get:function(){return l.isAminoMsgWithdrawDelegatorReward}}),Object.defineProperty(t,"isAminoMsgWithdrawValidatorCommission",{enumerable:!0,get:function(){return l.isAminoMsgWithdrawValidatorCommission}}),Object.defineProperty(t,"isMsgBeginRedelegateEncodeObject",{enumerable:!0,get:function(){return l.isMsgBeginRedelegateEncodeObject}}),Object.defineProperty(t,"isMsgCancelUnbondingDelegationEncodeObject",{enumerable:!0,get:function(){return l.isMsgCancelUnbondingDelegationEncodeObject}}),Object.defineProperty(t,"isMsgCreateValidatorEncodeObject",{enumerable:!0,get:function(){return l.isMsgCreateValidatorEncodeObject}}),Object.defineProperty(t,"isMsgDelegateEncodeObject",{enumerable:!0,get:function(){return l.isMsgDelegateEncodeObject}}),Object.defineProperty(t,"isMsgDepositEncodeObject",{enumerable:!0,get:function(){return l.isMsgDepositEncodeObject}}),Object.defineProperty(t,"isMsgEditValidatorEncodeObject",{enumerable:!0,get:function(){return l.isMsgEditValidatorEncodeObject}}),Object.defineProperty(t,"isMsgSendEncodeObject",{enumerable:!0,get:function(){return l.isMsgSendEncodeObject}}),Object.defineProperty(t,"isMsgSubmitProposalEncodeObject",{enumerable:!0,get:function(){return l.isMsgSubmitProposalEncodeObject}}),Object.defineProperty(t,"isMsgTransferEncodeObject",{enumerable:!0,get:function(){return l.isMsgTransferEncodeObject}}),Object.defineProperty(t,"isMsgUndelegateEncodeObject",{enumerable:!0,get:function(){return l.isMsgUndelegateEncodeObject}}),Object.defineProperty(t,"isMsgVoteEncodeObject",{enumerable:!0,get:function(){return l.isMsgVoteEncodeObject}}),Object.defineProperty(t,"isMsgVoteWeightedEncodeObject",{enumerable:!0,get:function(){return l.isMsgVoteWeightedEncodeObject}}),Object.defineProperty(t,"isMsgWithdrawDelegatorRewardEncodeObject",{enumerable:!0,get:function(){return l.isMsgWithdrawDelegatorRewardEncodeObject}}),Object.defineProperty(t,"setupAuthExtension",{enumerable:!0,get:function(){return l.setupAuthExtension}}),Object.defineProperty(t,"setupAuthzExtension",{enumerable:!0,get:function(){return l.setupAuthzExtension}}),Object.defineProperty(t,"setupBankExtension",{enumerable:!0,get:function(){return l.setupBankExtension}}),Object.defineProperty(t,"setupDistributionExtension",{enumerable:!0,get:function(){return l.setupDistributionExtension}}),Object.defineProperty(t,"setupFeegrantExtension",{enumerable:!0,get:function(){return l.setupFeegrantExtension}}),Object.defineProperty(t,"setupGovExtension",{enumerable:!0,get:function(){return l.setupGovExtension}}),Object.defineProperty(t,"setupIbcExtension",{enumerable:!0,get:function(){return l.setupIbcExtension}}),Object.defineProperty(t,"setupMintExtension",{enumerable:!0,get:function(){return l.setupMintExtension}}),Object.defineProperty(t,"setupSlashingExtension",{enumerable:!0,get:function(){return l.setupSlashingExtension}}),Object.defineProperty(t,"setupStakingExtension",{enumerable:!0,get:function(){return l.setupStakingExtension}}),Object.defineProperty(t,"setupTxExtension",{enumerable:!0,get:function(){return l.setupTxExtension}});var h=r(17426);Object.defineProperty(t,"makeMultisignedTx",{enumerable:!0,get:function(){return h.makeMultisignedTx}}),Object.defineProperty(t,"makeMultisignedTxBytes",{enumerable:!0,get:function(){return h.makeMultisignedTxBytes}});var d=r(1267);Object.defineProperty(t,"createPagination",{enumerable:!0,get:function(){return d.createPagination}}),Object.defineProperty(t,"createProtobufRpcClient",{enumerable:!0,get:function(){return d.createProtobufRpcClient}}),Object.defineProperty(t,"decodeCosmosSdkDecFromProto",{enumerable:!0,get:function(){return d.decodeCosmosSdkDecFromProto}}),Object.defineProperty(t,"QueryClient",{enumerable:!0,get:function(){return d.QueryClient}});var f=r(74487);Object.defineProperty(t,"isSearchTxQueryArray",{enumerable:!0,get:function(){return f.isSearchTxQueryArray}});var p=r(63116);Object.defineProperty(t,"createDefaultAminoConverters",{enumerable:!0,get:function(){return p.createDefaultAminoConverters}}),Object.defineProperty(t,"defaultRegistryTypes",{enumerable:!0,get:function(){return p.defaultRegistryTypes}}),Object.defineProperty(t,"SigningStargateClient",{enumerable:!0,get:function(){return p.SigningStargateClient}});var g=r(83131);Object.defineProperty(t,"assertIsDeliverTxFailure",{enumerable:!0,get:function(){return g.assertIsDeliverTxFailure}}),Object.defineProperty(t,"assertIsDeliverTxSuccess",{enumerable:!0,get:function(){return g.assertIsDeliverTxSuccess}}),Object.defineProperty(t,"BroadcastTxError",{enumerable:!0,get:function(){return g.BroadcastTxError}}),Object.defineProperty(t,"isDeliverTxFailure",{enumerable:!0,get:function(){return g.isDeliverTxFailure}}),Object.defineProperty(t,"isDeliverTxSuccess",{enumerable:!0,get:function(){return g.isDeliverTxSuccess}}),Object.defineProperty(t,"StargateClient",{enumerable:!0,get:function(){return g.StargateClient}}),Object.defineProperty(t,"TimeoutError",{enumerable:!0,get:function(){return g.TimeoutError}});var m=r(5450);Object.defineProperty(t,"coin",{enumerable:!0,get:function(){return m.coin}}),Object.defineProperty(t,"coins",{enumerable:!0,get:function(){return m.coins}}),Object.defineProperty(t,"makeCosmoshubPath",{enumerable:!0,get:function(){return m.makeCosmoshubPath}}),Object.defineProperty(t,"parseCoins",{enumerable:!0,get:function(){return m.parseCoins}})},60540:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAttribute=t.parseRawLog=t.parseLogs=t.parseLog=t.parseEvent=t.parseAttribute=void 0;const n=r(55299);function i(e){if(!(0,n.isNonNullObject)(e))throw new Error("Attribute must be a non-null object");const{key:t,value:r}=e;if("string"!=typeof t||!t)throw new Error("Attribute's key must be a non-empty string");if("string"!=typeof r&&void 0!==r)throw new Error("Attribute's value must be a string or unset");return{key:t,value:r||""}}function s(e){if(!(0,n.isNonNullObject)(e))throw new Error("Event must be a non-null object");const{type:t,attributes:r}=e;if("string"!=typeof t||""===t)throw new Error("Event type must be a non-empty string");if(!Array.isArray(r))throw new Error("Event's attributes must be an array");return{type:t,attributes:r.map(i)}}function o(e){if(!(0,n.isNonNullObject)(e))throw new Error("Log must be a non-null object");const{msg_index:t,log:r,events:i}=e;if("number"!=typeof t)throw new Error("Log's msg_index must be a number");if("string"!=typeof r)throw new Error("Log's log must be a string");if(!Array.isArray(i))throw new Error("Log's events must be an array");return{msg_index:t,log:r,events:i.map(s)}}function a(e){if(!Array.isArray(e))throw new Error("Logs must be an array");return e.map(o)}t.parseAttribute=i,t.parseEvent=s,t.parseLog=o,t.parseLogs=a,t.parseRawLog=function(e){return e?a(JSON.parse(e).map((({events:e},t)=>({msg_index:t,events:e,log:""})))):[]},t.findAttribute=function(e,t,r){const n=e.find((()=>!0)),i=n?.events.find((e=>e.type===t))?.attributes.find((e=>e.key===r));if(!i)throw new Error(`Could not find attribute '${r}' in first event of type '${t}' in first log.`);return i}},67112:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BlockIdFlag=t.isTendermint37Client=t.isTendermint34Client=t.isComet38Client=t.connectComet=t.Tendermint37Client=t.tendermint37=t.Tendermint34Client=t.tendermint34=t.VoteType=t.SubscriptionEventType=t.Method=t.broadcastTxSyncSuccess=t.broadcastTxCommitSuccess=t.WebsocketClient=t.HttpClient=t.HttpBatchClient=t.Comet38Client=t.comet38=t.toSeconds=t.toRfc3339WithNanoseconds=t.fromSeconds=t.fromRfc3339WithNanoseconds=t.DateTime=t.rawSecp256k1PubkeyToRawAddress=t.rawEd25519PubkeyToRawAddress=t.pubkeyToRawAddress=t.pubkeyToAddress=void 0;var o=r(90184);Object.defineProperty(t,"pubkeyToAddress",{enumerable:!0,get:function(){return o.pubkeyToAddress}}),Object.defineProperty(t,"pubkeyToRawAddress",{enumerable:!0,get:function(){return o.pubkeyToRawAddress}}),Object.defineProperty(t,"rawEd25519PubkeyToRawAddress",{enumerable:!0,get:function(){return o.rawEd25519PubkeyToRawAddress}}),Object.defineProperty(t,"rawSecp256k1PubkeyToRawAddress",{enumerable:!0,get:function(){return o.rawSecp256k1PubkeyToRawAddress}});var a=r(51569);Object.defineProperty(t,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(t,"fromRfc3339WithNanoseconds",{enumerable:!0,get:function(){return a.fromRfc3339WithNanoseconds}}),Object.defineProperty(t,"fromSeconds",{enumerable:!0,get:function(){return a.fromSeconds}}),Object.defineProperty(t,"toRfc3339WithNanoseconds",{enumerable:!0,get:function(){return a.toRfc3339WithNanoseconds}}),Object.defineProperty(t,"toSeconds",{enumerable:!0,get:function(){return a.toSeconds}}),t.comet38=s(r(49300));var c=r(49300);Object.defineProperty(t,"Comet38Client",{enumerable:!0,get:function(){return c.Comet38Client}});var u=r(90112);Object.defineProperty(t,"HttpBatchClient",{enumerable:!0,get:function(){return u.HttpBatchClient}}),Object.defineProperty(t,"HttpClient",{enumerable:!0,get:function(){return u.HttpClient}}),Object.defineProperty(t,"WebsocketClient",{enumerable:!0,get:function(){return u.WebsocketClient}});var l=r(74024);Object.defineProperty(t,"broadcastTxCommitSuccess",{enumerable:!0,get:function(){return l.broadcastTxCommitSuccess}}),Object.defineProperty(t,"broadcastTxSyncSuccess",{enumerable:!0,get:function(){return l.broadcastTxSyncSuccess}}),Object.defineProperty(t,"Method",{enumerable:!0,get:function(){return l.Method}}),Object.defineProperty(t,"SubscriptionEventType",{enumerable:!0,get:function(){return l.SubscriptionEventType}}),Object.defineProperty(t,"VoteType",{enumerable:!0,get:function(){return l.VoteType}}),t.tendermint34=s(r(74024));var h=r(74024);Object.defineProperty(t,"Tendermint34Client",{enumerable:!0,get:function(){return h.Tendermint34Client}}),t.tendermint37=s(r(86721));var d=r(86721);Object.defineProperty(t,"Tendermint37Client",{enumerable:!0,get:function(){return d.Tendermint37Client}});var f=r(66295);Object.defineProperty(t,"connectComet",{enumerable:!0,get:function(){return f.connectComet}}),Object.defineProperty(t,"isComet38Client",{enumerable:!0,get:function(){return f.isComet38Client}}),Object.defineProperty(t,"isTendermint34Client",{enumerable:!0,get:function(){return f.isTendermint34Client}}),Object.defineProperty(t,"isTendermint37Client",{enumerable:!0,get:function(){return f.isTendermint37Client}});var p=r(58669);Object.defineProperty(t,"BlockIdFlag",{enumerable:!0,get:function(){return p.BlockIdFlag}})},75331:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createCyberAminoConverters=t.OfflineDappWallet=t.SigningCyberClient=t.CyberClient=void 0;var s=r(68701);Object.defineProperty(t,"CyberClient",{enumerable:!0,get:function(){return s.CyberClient}});var o=r(34768);Object.defineProperty(t,"SigningCyberClient",{enumerable:!0,get:function(){return o.SigningCyberClient}}),Object.defineProperty(t,"OfflineDappWallet",{enumerable:!0,get:function(){return o.OfflineDappWallet}}),i(r(98379),t);var a=r(42055);Object.defineProperty(t,"createCyberAminoConverters",{enumerable:!0,get:function(){return a.createCyberAminoConverters}})},91214:function(e,t,r){"use strict";t.aJ=t.CB=t._A=t.EX=t.wf=t.uc=t.Bh=t.l=t.TS=t.Fs=t.mF=void 0;const n=r(5765),i=r(13423),s=r(78541),o=r(97686),a=r(67974),c=r(23427),u=r(81809),l=r(28099);var h,d;function f(e){switch(e){case 0:case"ORDER_BY_UNSPECIFIED":return h.ORDER_BY_UNSPECIFIED;case 1:case"ORDER_BY_ASC":return h.ORDER_BY_ASC;case 2:case"ORDER_BY_DESC":return h.ORDER_BY_DESC;default:return h.UNRECOGNIZED}}function p(e){switch(e){case h.ORDER_BY_UNSPECIFIED:return"ORDER_BY_UNSPECIFIED";case h.ORDER_BY_ASC:return"ORDER_BY_ASC";case h.ORDER_BY_DESC:return"ORDER_BY_DESC";case h.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function g(e){switch(e){case 0:case"BROADCAST_MODE_UNSPECIFIED":return d.BROADCAST_MODE_UNSPECIFIED;case 1:case"BROADCAST_MODE_BLOCK":return d.BROADCAST_MODE_BLOCK;case 2:case"BROADCAST_MODE_SYNC":return d.BROADCAST_MODE_SYNC;case 3:case"BROADCAST_MODE_ASYNC":return d.BROADCAST_MODE_ASYNC;default:return d.UNRECOGNIZED}}function m(e){switch(e){case d.BROADCAST_MODE_UNSPECIFIED:return"BROADCAST_MODE_UNSPECIFIED";case d.BROADCAST_MODE_BLOCK:return"BROADCAST_MODE_BLOCK";case d.BROADCAST_MODE_SYNC:return"BROADCAST_MODE_SYNC";case d.BROADCAST_MODE_ASYNC:return"BROADCAST_MODE_ASYNC";case d.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function y(){return{txBytes:new Uint8Array,mode:0}}function b(){return{tx:void 0,txBytes:new Uint8Array}}function w(){return{height:BigInt(0),pagination:void 0}}!function(e){e[e.ORDER_BY_UNSPECIFIED=0]="ORDER_BY_UNSPECIFIED",e[e.ORDER_BY_ASC=1]="ORDER_BY_ASC",e[e.ORDER_BY_DESC=2]="ORDER_BY_DESC",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(h||(t.mF=h={})),function(e){e[e.BROADCAST_MODE_UNSPECIFIED=0]="BROADCAST_MODE_UNSPECIFIED",e[e.BROADCAST_MODE_BLOCK=1]="BROADCAST_MODE_BLOCK",e[e.BROADCAST_MODE_SYNC=2]="BROADCAST_MODE_SYNC",e[e.BROADCAST_MODE_ASYNC=3]="BROADCAST_MODE_ASYNC",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(d||(d={})),t.Fs={typeUrl:"/cosmos.tx.v1beta1.GetTxsEventRequest",aminoType:"cosmos-sdk/GetTxsEventRequest",is:e=>e&&(e.$typeUrl===t.Fs.typeUrl||Array.isArray(e.events)&&(!e.events.length||"string"==typeof e.events[0])&&(0,c.isSet)(e.orderBy)),isSDK:e=>e&&(e.$typeUrl===t.Fs.typeUrl||Array.isArray(e.events)&&(!e.events.length||"string"==typeof e.events[0])&&(0,c.isSet)(e.order_by)),isAmino:e=>e&&(e.$typeUrl===t.Fs.typeUrl||Array.isArray(e.events)&&(!e.events.length||"string"==typeof e.events[0])&&(0,c.isSet)(e.order_by)),encode(e,t=u.BinaryWriter.create()){for(const r of e.events)t.uint32(10).string(r);return void 0!==e.pagination&&i.PageRequest.encode(e.pagination,t.uint32(18).fork()).ldelim(),0!==e.orderBy&&t.uint32(24).int32(e.orderBy),t},decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s={events:[],pagination:void 0,orderBy:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.events.push(r.string());break;case 2:s.pagination=i.PageRequest.decode(r,r.uint32());break;case 3:s.orderBy=r.int32();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({events:Array.isArray(e?.events)?e.events.map((e=>String(e))):[],pagination:(0,c.isSet)(e.pagination)?i.PageRequest.fromJSON(e.pagination):void 0,orderBy:(0,c.isSet)(e.orderBy)?f(e.orderBy):-1}),toJSON(e){const t={};return e.events?t.events=e.events.map((e=>e)):t.events=[],void 0!==e.pagination&&(t.pagination=e.pagination?i.PageRequest.toJSON(e.pagination):void 0),void 0!==e.orderBy&&(t.orderBy=p(e.orderBy)),t},fromPartial(e){const t={events:[],pagination:void 0,orderBy:0};return t.events=e.events?.map((e=>e))||[],t.pagination=void 0!==e.pagination&&null!==e.pagination?i.PageRequest.fromPartial(e.pagination):void 0,t.orderBy=e.orderBy??0,t},fromAmino(e){const t={events:[],pagination:void 0,orderBy:0};return t.events=e.events?.map((e=>e))||[],void 0!==e.pagination&&null!==e.pagination&&(t.pagination=i.PageRequest.fromAmino(e.pagination)),void 0!==e.order_by&&null!==e.order_by&&(t.orderBy=e.order_by),t},toAmino(e){const t={};return e.events?t.events=e.events.map((e=>e)):t.events=e.events,t.pagination=e.pagination?i.PageRequest.toAmino(e.pagination):void 0,t.order_by=0===e.orderBy?void 0:e.orderBy,t},fromAminoMsg:e=>t.Fs.fromAmino(e.value),toAminoMsg:e=>({type:"cosmos-sdk/GetTxsEventRequest",value:t.Fs.toAmino(e)}),fromProtoMsg:e=>t.Fs.decode(e.value),toProto:e=>t.Fs.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cosmos.tx.v1beta1.GetTxsEventRequest",value:t.Fs.encode(e).finish()})},l.GlobalDecoderRegistry.register(t.Fs.typeUrl,t.Fs),l.GlobalDecoderRegistry.registerAminoProtoMapping(t.Fs.aminoType,t.Fs.typeUrl),t.TS={typeUrl:"/cosmos.tx.v1beta1.GetTxsEventResponse",aminoType:"cosmos-sdk/GetTxsEventResponse",is:e=>e&&(e.$typeUrl===t.TS.typeUrl||Array.isArray(e.txs)&&(!e.txs.length||n.Tx.is(e.txs[0]))&&Array.isArray(e.txResponses)&&(!e.txResponses.length||s.TxResponse.is(e.txResponses[0]))),isSDK:e=>e&&(e.$typeUrl===t.TS.typeUrl||Array.isArray(e.txs)&&(!e.txs.length||n.Tx.isSDK(e.txs[0]))&&Array.isArray(e.tx_responses)&&(!e.tx_responses.length||s.TxResponse.isSDK(e.tx_responses[0]))),isAmino:e=>e&&(e.$typeUrl===t.TS.typeUrl||Array.isArray(e.txs)&&(!e.txs.length||n.Tx.isAmino(e.txs[0]))&&Array.isArray(e.tx_responses)&&(!e.tx_responses.length||s.TxResponse.isAmino(e.tx_responses[0]))),encode(e,t=u.BinaryWriter.create()){for(const r of e.txs)n.Tx.encode(r,t.uint32(10).fork()).ldelim();for(const r of e.txResponses)s.TxResponse.encode(r,t.uint32(18).fork()).ldelim();return void 0!==e.pagination&&i.PageResponse.encode(e.pagination,t.uint32(26).fork()).ldelim(),t},decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let o=void 0===t?r.len:r.pos+t;const a={txs:[],txResponses:[],pagination:void 0};for(;r.pos<o;){const e=r.uint32();switch(e>>>3){case 1:a.txs.push(n.Tx.decode(r,r.uint32()));break;case 2:a.txResponses.push(s.TxResponse.decode(r,r.uint32()));break;case 3:a.pagination=i.PageResponse.decode(r,r.uint32());break;default:r.skipType(7&e)}}return a},fromJSON:e=>({txs:Array.isArray(e?.txs)?e.txs.map((e=>n.Tx.fromJSON(e))):[],txResponses:Array.isArray(e?.txResponses)?e.txResponses.map((e=>s.TxResponse.fromJSON(e))):[],pagination:(0,c.isSet)(e.pagination)?i.PageResponse.fromJSON(e.pagination):void 0}),toJSON(e){const t={};return e.txs?t.txs=e.txs.map((e=>e?n.Tx.toJSON(e):void 0)):t.txs=[],e.txResponses?t.txResponses=e.txResponses.map((e=>e?s.TxResponse.toJSON(e):void 0)):t.txResponses=[],void 0!==e.pagination&&(t.pagination=e.pagination?i.PageResponse.toJSON(e.pagination):void 0),t},fromPartial(e){const t={txs:[],txResponses:[],pagination:void 0};return t.txs=e.txs?.map((e=>n.Tx.fromPartial(e)))||[],t.txResponses=e.txResponses?.map((e=>s.TxResponse.fromPartial(e)))||[],t.pagination=void 0!==e.pagination&&null!==e.pagination?i.PageResponse.fromPartial(e.pagination):void 0,t},fromAmino(e){const t={txs:[],txResponses:[],pagination:void 0};return t.txs=e.txs?.map((e=>n.Tx.fromAmino(e)))||[],t.txResponses=e.tx_responses?.map((e=>s.TxResponse.fromAmino(e)))||[],void 0!==e.pagination&&null!==e.pagination&&(t.pagination=i.PageResponse.fromAmino(e.pagination)),t},toAmino(e){const t={};return e.txs?t.txs=e.txs.map((e=>e?n.Tx.toAmino(e):void 0)):t.txs=e.txs,e.txResponses?t.tx_responses=e.txResponses.map((e=>e?s.TxResponse.toAmino(e):void 0)):t.tx_responses=e.txResponses,t.pagination=e.pagination?i.PageResponse.toAmino(e.pagination):void 0,t},fromAminoMsg:e=>t.TS.fromAmino(e.value),toAminoMsg:e=>({type:"cosmos-sdk/GetTxsEventResponse",value:t.TS.toAmino(e)}),fromProtoMsg:e=>t.TS.decode(e.value),toProto:e=>t.TS.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cosmos.tx.v1beta1.GetTxsEventResponse",value:t.TS.encode(e).finish()})},l.GlobalDecoderRegistry.register(t.TS.typeUrl,t.TS),l.GlobalDecoderRegistry.registerAminoProtoMapping(t.TS.aminoType,t.TS.typeUrl),t.l={typeUrl:"/cosmos.tx.v1beta1.BroadcastTxRequest",aminoType:"cosmos-sdk/BroadcastTxRequest",is:e=>e&&(e.$typeUrl===t.l.typeUrl||(e.txBytes instanceof Uint8Array||"string"==typeof e.txBytes)&&(0,c.isSet)(e.mode)),isSDK:e=>e&&(e.$typeUrl===t.l.typeUrl||(e.tx_bytes instanceof Uint8Array||"string"==typeof e.tx_bytes)&&(0,c.isSet)(e.mode)),isAmino:e=>e&&(e.$typeUrl===t.l.typeUrl||(e.tx_bytes instanceof Uint8Array||"string"==typeof e.tx_bytes)&&(0,c.isSet)(e.mode)),encode:(e,t=u.BinaryWriter.create())=>(0!==e.txBytes.length&&t.uint32(10).bytes(e.txBytes),0!==e.mode&&t.uint32(16).int32(e.mode),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i=y();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.txBytes=r.bytes();break;case 2:i.mode=r.int32();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({txBytes:(0,c.isSet)(e.txBytes)?(0,c.bytesFromBase64)(e.txBytes):new Uint8Array,mode:(0,c.isSet)(e.mode)?g(e.mode):-1}),toJSON(e){const t={};return void 0!==e.txBytes&&(t.txBytes=(0,c.base64FromBytes)(void 0!==e.txBytes?e.txBytes:new Uint8Array)),void 0!==e.mode&&(t.mode=m(e.mode)),t},fromPartial(e){const t=y();return t.txBytes=e.txBytes??new Uint8Array,t.mode=e.mode??0,t},fromAmino(e){const t=y();return void 0!==e.tx_bytes&&null!==e.tx_bytes&&(t.txBytes=(0,c.bytesFromBase64)(e.tx_bytes)),void 0!==e.mode&&null!==e.mode&&(t.mode=e.mode),t},toAmino(e){const t={};return t.tx_bytes=e.txBytes?(0,c.base64FromBytes)(e.txBytes):void 0,t.mode=0===e.mode?void 0:e.mode,t},fromAminoMsg:e=>t.l.fromAmino(e.value),toAminoMsg:e=>({type:"cosmos-sdk/BroadcastTxRequest",value:t.l.toAmino(e)}),fromProtoMsg:e=>t.l.decode(e.value),toProto:e=>t.l.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cosmos.tx.v1beta1.BroadcastTxRequest",value:t.l.encode(e).finish()})},l.GlobalDecoderRegistry.register(t.l.typeUrl,t.l),l.GlobalDecoderRegistry.registerAminoProtoMapping(t.l.aminoType,t.l.typeUrl),t.Bh={typeUrl:"/cosmos.tx.v1beta1.BroadcastTxResponse",aminoType:"cosmos-sdk/BroadcastTxResponse",is:e=>e&&e.$typeUrl===t.Bh.typeUrl,isSDK:e=>e&&e.$typeUrl===t.Bh.typeUrl,isAmino:e=>e&&e.$typeUrl===t.Bh.typeUrl,encode:(e,t=u.BinaryWriter.create())=>(void 0!==e.txResponse&&s.TxResponse.encode(e.txResponse,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={txResponse:void 0};for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.txResponse=s.TxResponse.decode(r,r.uint32());else r.skipType(7&e)}return i},fromJSON:e=>({txResponse:(0,c.isSet)(e.txResponse)?s.TxResponse.fromJSON(e.txResponse):void 0}),toJSON(e){const t={};return void 0!==e.txResponse&&(t.txResponse=e.txResponse?s.TxResponse.toJSON(e.txResponse):void 0),t},fromPartial(e){const t={txResponse:void 0};return t.txResponse=void 0!==e.txResponse&&null!==e.txResponse?s.TxResponse.fromPartial(e.txResponse):void 0,t},fromAmino(e){const t={txResponse:void 0};return void 0!==e.tx_response&&null!==e.tx_response&&(t.txResponse=s.TxResponse.fromAmino(e.tx_response)),t},toAmino(e){const t={};return t.tx_response=e.txResponse?s.TxResponse.toAmino(e.txResponse):void 0,t},fromAminoMsg:e=>t.Bh.fromAmino(e.value),toAminoMsg:e=>({type:"cosmos-sdk/BroadcastTxResponse",value:t.Bh.toAmino(e)}),fromProtoMsg:e=>t.Bh.decode(e.value),toProto:e=>t.Bh.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cosmos.tx.v1beta1.BroadcastTxResponse",value:t.Bh.encode(e).finish()})},l.GlobalDecoderRegistry.register(t.Bh.typeUrl,t.Bh),l.GlobalDecoderRegistry.registerAminoProtoMapping(t.Bh.aminoType,t.Bh.typeUrl),t.uc={typeUrl:"/cosmos.tx.v1beta1.SimulateRequest",aminoType:"cosmos-sdk/SimulateRequest",is:e=>e&&(e.$typeUrl===t.uc.typeUrl||e.txBytes instanceof Uint8Array||"string"==typeof e.txBytes),isSDK:e=>e&&(e.$typeUrl===t.uc.typeUrl||e.tx_bytes instanceof Uint8Array||"string"==typeof e.tx_bytes),isAmino:e=>e&&(e.$typeUrl===t.uc.typeUrl||e.tx_bytes instanceof Uint8Array||"string"==typeof e.tx_bytes),encode:(e,t=u.BinaryWriter.create())=>(void 0!==e.tx&&n.Tx.encode(e.tx,t.uint32(10).fork()).ldelim(),0!==e.txBytes.length&&t.uint32(18).bytes(e.txBytes),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let i=void 0===t?r.len:r.pos+t;const s=b();for(;r.pos<i;){const e=r.uint32();switch(e>>>3){case 1:s.tx=n.Tx.decode(r,r.uint32());break;case 2:s.txBytes=r.bytes();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({tx:(0,c.isSet)(e.tx)?n.Tx.fromJSON(e.tx):void 0,txBytes:(0,c.isSet)(e.txBytes)?(0,c.bytesFromBase64)(e.txBytes):new Uint8Array}),toJSON(e){const t={};return void 0!==e.tx&&(t.tx=e.tx?n.Tx.toJSON(e.tx):void 0),void 0!==e.txBytes&&(t.txBytes=(0,c.base64FromBytes)(void 0!==e.txBytes?e.txBytes:new Uint8Array)),t},fromPartial(e){const t=b();return t.tx=void 0!==e.tx&&null!==e.tx?n.Tx.fromPartial(e.tx):void 0,t.txBytes=e.txBytes??new Uint8Array,t},fromAmino(e){const t=b();return void 0!==e.tx&&null!==e.tx&&(t.tx=n.Tx.fromAmino(e.tx)),void 0!==e.tx_bytes&&null!==e.tx_bytes&&(t.txBytes=(0,c.bytesFromBase64)(e.tx_bytes)),t},toAmino(e){const t={};return t.tx=e.tx?n.Tx.toAmino(e.tx):void 0,t.tx_bytes=e.txBytes?(0,c.base64FromBytes)(e.txBytes):void 0,t},fromAminoMsg:e=>t.uc.fromAmino(e.value),toAminoMsg:e=>({type:"cosmos-sdk/SimulateRequest",value:t.uc.toAmino(e)}),fromProtoMsg:e=>t.uc.decode(e.value),toProto:e=>t.uc.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cosmos.tx.v1beta1.SimulateRequest",value:t.uc.encode(e).finish()})},l.GlobalDecoderRegistry.register(t.uc.typeUrl,t.uc),l.GlobalDecoderRegistry.registerAminoProtoMapping(t.uc.aminoType,t.uc.typeUrl),t.wf={typeUrl:"/cosmos.tx.v1beta1.SimulateResponse",aminoType:"cosmos-sdk/SimulateResponse",is:e=>e&&e.$typeUrl===t.wf.typeUrl,isSDK:e=>e&&e.$typeUrl===t.wf.typeUrl,isAmino:e=>e&&e.$typeUrl===t.wf.typeUrl,encode:(e,t=u.BinaryWriter.create())=>(void 0!==e.gasInfo&&s.GasInfo.encode(e.gasInfo,t.uint32(10).fork()).ldelim(),void 0!==e.result&&s.Result.encode(e.result,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={gasInfo:void 0,result:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.gasInfo=s.GasInfo.decode(r,r.uint32());break;case 2:i.result=s.Result.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({gasInfo:(0,c.isSet)(e.gasInfo)?s.GasInfo.fromJSON(e.gasInfo):void 0,result:(0,c.isSet)(e.result)?s.Result.fromJSON(e.result):void 0}),toJSON(e){const t={};return void 0!==e.gasInfo&&(t.gasInfo=e.gasInfo?s.GasInfo.toJSON(e.gasInfo):void 0),void 0!==e.result&&(t.result=e.result?s.Result.toJSON(e.result):void 0),t},fromPartial(e){const t={gasInfo:void 0,result:void 0};return t.gasInfo=void 0!==e.gasInfo&&null!==e.gasInfo?s.GasInfo.fromPartial(e.gasInfo):void 0,t.result=void 0!==e.result&&null!==e.result?s.Result.fromPartial(e.result):void 0,t},fromAmino(e){const t={gasInfo:void 0,result:void 0};return void 0!==e.gas_info&&null!==e.gas_info&&(t.gasInfo=s.GasInfo.fromAmino(e.gas_info)),void 0!==e.result&&null!==e.result&&(t.result=s.Result.fromAmino(e.result)),t},toAmino(e){const t={};return t.gas_info=e.gasInfo?s.GasInfo.toAmino(e.gasInfo):void 0,t.result=e.result?s.Result.toAmino(e.result):void 0,t},fromAminoMsg:e=>t.wf.fromAmino(e.value),toAminoMsg:e=>({type:"cosmos-sdk/SimulateResponse",value:t.wf.toAmino(e)}),fromProtoMsg:e=>t.wf.decode(e.value),toProto:e=>t.wf.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cosmos.tx.v1beta1.SimulateResponse",value:t.wf.encode(e).finish()})},l.GlobalDecoderRegistry.register(t.wf.typeUrl,t.wf),l.GlobalDecoderRegistry.registerAminoProtoMapping(t.wf.aminoType,t.wf.typeUrl),t.EX={typeUrl:"/cosmos.tx.v1beta1.GetTxRequest",aminoType:"cosmos-sdk/GetTxRequest",is:e=>e&&(e.$typeUrl===t.EX.typeUrl||"string"==typeof e.hash),isSDK:e=>e&&(e.$typeUrl===t.EX.typeUrl||"string"==typeof e.hash),isAmino:e=>e&&(e.$typeUrl===t.EX.typeUrl||"string"==typeof e.hash),encode:(e,t=u.BinaryWriter.create())=>(""!==e.hash&&t.uint32(10).string(e.hash),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={hash:""};for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.hash=r.string();else r.skipType(7&e)}return i},fromJSON:e=>({hash:(0,c.isSet)(e.hash)?String(e.hash):""}),toJSON(e){const t={};return void 0!==e.hash&&(t.hash=e.hash),t},fromPartial(e){const t={hash:""};return t.hash=e.hash??"",t},fromAmino(e){const t={hash:""};return void 0!==e.hash&&null!==e.hash&&(t.hash=e.hash),t},toAmino(e){const t={};return t.hash=""===e.hash?void 0:e.hash,t},fromAminoMsg:e=>t.EX.fromAmino(e.value),toAminoMsg:e=>({type:"cosmos-sdk/GetTxRequest",value:t.EX.toAmino(e)}),fromProtoMsg:e=>t.EX.decode(e.value),toProto:e=>t.EX.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cosmos.tx.v1beta1.GetTxRequest",value:t.EX.encode(e).finish()})},l.GlobalDecoderRegistry.register(t.EX.typeUrl,t.EX),l.GlobalDecoderRegistry.registerAminoProtoMapping(t.EX.aminoType,t.EX.typeUrl),t._A={typeUrl:"/cosmos.tx.v1beta1.GetTxResponse",aminoType:"cosmos-sdk/GetTxResponse",is:e=>e&&e.$typeUrl===t._A.typeUrl,isSDK:e=>e&&e.$typeUrl===t._A.typeUrl,isAmino:e=>e&&e.$typeUrl===t._A.typeUrl,encode:(e,t=u.BinaryWriter.create())=>(void 0!==e.tx&&n.Tx.encode(e.tx,t.uint32(10).fork()).ldelim(),void 0!==e.txResponse&&s.TxResponse.encode(e.txResponse,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let i=void 0===t?r.len:r.pos+t;const o={tx:void 0,txResponse:void 0};for(;r.pos<i;){const e=r.uint32();switch(e>>>3){case 1:o.tx=n.Tx.decode(r,r.uint32());break;case 2:o.txResponse=s.TxResponse.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({tx:(0,c.isSet)(e.tx)?n.Tx.fromJSON(e.tx):void 0,txResponse:(0,c.isSet)(e.txResponse)?s.TxResponse.fromJSON(e.txResponse):void 0}),toJSON(e){const t={};return void 0!==e.tx&&(t.tx=e.tx?n.Tx.toJSON(e.tx):void 0),void 0!==e.txResponse&&(t.txResponse=e.txResponse?s.TxResponse.toJSON(e.txResponse):void 0),t},fromPartial(e){const t={tx:void 0,txResponse:void 0};return t.tx=void 0!==e.tx&&null!==e.tx?n.Tx.fromPartial(e.tx):void 0,t.txResponse=void 0!==e.txResponse&&null!==e.txResponse?s.TxResponse.fromPartial(e.txResponse):void 0,t},fromAmino(e){const t={tx:void 0,txResponse:void 0};return void 0!==e.tx&&null!==e.tx&&(t.tx=n.Tx.fromAmino(e.tx)),void 0!==e.tx_response&&null!==e.tx_response&&(t.txResponse=s.TxResponse.fromAmino(e.tx_response)),t},toAmino(e){const t={};return t.tx=e.tx?n.Tx.toAmino(e.tx):void 0,t.tx_response=e.txResponse?s.TxResponse.toAmino(e.txResponse):void 0,t},fromAminoMsg:e=>t._A.fromAmino(e.value),toAminoMsg:e=>({type:"cosmos-sdk/GetTxResponse",value:t._A.toAmino(e)}),fromProtoMsg:e=>t._A.decode(e.value),toProto:e=>t._A.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cosmos.tx.v1beta1.GetTxResponse",value:t._A.encode(e).finish()})},l.GlobalDecoderRegistry.register(t._A.typeUrl,t._A),l.GlobalDecoderRegistry.registerAminoProtoMapping(t._A.aminoType,t._A.typeUrl),t.CB={typeUrl:"/cosmos.tx.v1beta1.GetBlockWithTxsRequest",aminoType:"cosmos-sdk/GetBlockWithTxsRequest",is:e=>e&&(e.$typeUrl===t.CB.typeUrl||"bigint"==typeof e.height),isSDK:e=>e&&(e.$typeUrl===t.CB.typeUrl||"bigint"==typeof e.height),isAmino:e=>e&&(e.$typeUrl===t.CB.typeUrl||"bigint"==typeof e.height),encode:(e,t=u.BinaryWriter.create())=>(e.height!==BigInt(0)&&t.uint32(8).int64(e.height),void 0!==e.pagination&&i.PageRequest.encode(e.pagination,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s=w();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.height=r.int64();break;case 2:s.pagination=i.PageRequest.decode(r,r.uint32());break;default:r.skipType(7&e)}}return s},fromJSON:e=>({height:(0,c.isSet)(e.height)?BigInt(e.height.toString()):BigInt(0),pagination:(0,c.isSet)(e.pagination)?i.PageRequest.fromJSON(e.pagination):void 0}),toJSON(e){const t={};return void 0!==e.height&&(t.height=(e.height||BigInt(0)).toString()),void 0!==e.pagination&&(t.pagination=e.pagination?i.PageRequest.toJSON(e.pagination):void 0),t},fromPartial(e){const t=w();return t.height=void 0!==e.height&&null!==e.height?BigInt(e.height.toString()):BigInt(0),t.pagination=void 0!==e.pagination&&null!==e.pagination?i.PageRequest.fromPartial(e.pagination):void 0,t},fromAmino(e){const t=w();return void 0!==e.height&&null!==e.height&&(t.height=BigInt(e.height)),void 0!==e.pagination&&null!==e.pagination&&(t.pagination=i.PageRequest.fromAmino(e.pagination)),t},toAmino(e){const t={};return t.height=e.height!==BigInt(0)?e.height.toString():void 0,t.pagination=e.pagination?i.PageRequest.toAmino(e.pagination):void 0,t},fromAminoMsg:e=>t.CB.fromAmino(e.value),toAminoMsg:e=>({type:"cosmos-sdk/GetBlockWithTxsRequest",value:t.CB.toAmino(e)}),fromProtoMsg:e=>t.CB.decode(e.value),toProto:e=>t.CB.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cosmos.tx.v1beta1.GetBlockWithTxsRequest",value:t.CB.encode(e).finish()})},l.GlobalDecoderRegistry.register(t.CB.typeUrl,t.CB),l.GlobalDecoderRegistry.registerAminoProtoMapping(t.CB.aminoType,t.CB.typeUrl),t.aJ={typeUrl:"/cosmos.tx.v1beta1.GetBlockWithTxsResponse",aminoType:"cosmos-sdk/GetBlockWithTxsResponse",is:e=>e&&(e.$typeUrl===t.aJ.typeUrl||Array.isArray(e.txs)&&(!e.txs.length||n.Tx.is(e.txs[0]))),isSDK:e=>e&&(e.$typeUrl===t.aJ.typeUrl||Array.isArray(e.txs)&&(!e.txs.length||n.Tx.isSDK(e.txs[0]))),isAmino:e=>e&&(e.$typeUrl===t.aJ.typeUrl||Array.isArray(e.txs)&&(!e.txs.length||n.Tx.isAmino(e.txs[0]))),encode(e,t=u.BinaryWriter.create()){for(const r of e.txs)n.Tx.encode(r,t.uint32(10).fork()).ldelim();return void 0!==e.blockId&&o.BlockID.encode(e.blockId,t.uint32(18).fork()).ldelim(),void 0!==e.block&&a.Block.encode(e.block,t.uint32(26).fork()).ldelim(),void 0!==e.pagination&&i.PageResponse.encode(e.pagination,t.uint32(34).fork()).ldelim(),t},decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let s=void 0===t?r.len:r.pos+t;const c={txs:[],blockId:void 0,block:void 0,pagination:void 0};for(;r.pos<s;){const e=r.uint32();switch(e>>>3){case 1:c.txs.push(n.Tx.decode(r,r.uint32()));break;case 2:c.blockId=o.BlockID.decode(r,r.uint32());break;case 3:c.block=a.Block.decode(r,r.uint32());break;case 4:c.pagination=i.PageResponse.decode(r,r.uint32());break;default:r.skipType(7&e)}}return c},fromJSON:e=>({txs:Array.isArray(e?.txs)?e.txs.map((e=>n.Tx.fromJSON(e))):[],blockId:(0,c.isSet)(e.blockId)?o.BlockID.fromJSON(e.blockId):void 0,block:(0,c.isSet)(e.block)?a.Block.fromJSON(e.block):void 0,pagination:(0,c.isSet)(e.pagination)?i.PageResponse.fromJSON(e.pagination):void 0}),toJSON(e){const t={};return e.txs?t.txs=e.txs.map((e=>e?n.Tx.toJSON(e):void 0)):t.txs=[],void 0!==e.blockId&&(t.blockId=e.blockId?o.BlockID.toJSON(e.blockId):void 0),void 0!==e.block&&(t.block=e.block?a.Block.toJSON(e.block):void 0),void 0!==e.pagination&&(t.pagination=e.pagination?i.PageResponse.toJSON(e.pagination):void 0),t},fromPartial(e){const t={txs:[],blockId:void 0,block:void 0,pagination:void 0};return t.txs=e.txs?.map((e=>n.Tx.fromPartial(e)))||[],t.blockId=void 0!==e.blockId&&null!==e.blockId?o.BlockID.fromPartial(e.blockId):void 0,t.block=void 0!==e.block&&null!==e.block?a.Block.fromPartial(e.block):void 0,t.pagination=void 0!==e.pagination&&null!==e.pagination?i.PageResponse.fromPartial(e.pagination):void 0,t},fromAmino(e){const t={txs:[],blockId:void 0,block:void 0,pagination:void 0};return t.txs=e.txs?.map((e=>n.Tx.fromAmino(e)))||[],void 0!==e.block_id&&null!==e.block_id&&(t.blockId=o.BlockID.fromAmino(e.block_id)),void 0!==e.block&&null!==e.block&&(t.block=a.Block.fromAmino(e.block)),void 0!==e.pagination&&null!==e.pagination&&(t.pagination=i.PageResponse.fromAmino(e.pagination)),t},toAmino(e){const t={};return e.txs?t.txs=e.txs.map((e=>e?n.Tx.toAmino(e):void 0)):t.txs=e.txs,t.block_id=e.blockId?o.BlockID.toAmino(e.blockId):void 0,t.block=e.block?a.Block.toAmino(e.block):void 0,t.pagination=e.pagination?i.PageResponse.toAmino(e.pagination):void 0,t},fromAminoMsg:e=>t.aJ.fromAmino(e.value),toAminoMsg:e=>({type:"cosmos-sdk/GetBlockWithTxsResponse",value:t.aJ.toAmino(e)}),fromProtoMsg:e=>t.aJ.decode(e.value),toProto:e=>t.aJ.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cosmos.tx.v1beta1.GetBlockWithTxsResponse",value:t.aJ.encode(e).finish()})},l.GlobalDecoderRegistry.register(t.aJ.typeUrl,t.aJ),l.GlobalDecoderRegistry.registerAminoProtoMapping(t.aJ.aminoType,t.aJ.typeUrl)},75736:function(e,t,r){"use strict";t.NU=t.AS=t.Ei=t.nb=t.Cz=t.zL=t.l5=t.ik=void 0;const n=r(22579),i=r(81809),s=r(23427),o=r(28099),a=r(27537);function c(){return{depositorAddress:"",poolId:BigInt(0),depositCoins:[]}}function u(){return{withdrawerAddress:"",poolId:BigInt(0),poolCoin:n.Coin.fromPartial({})}}function l(){return{swapRequesterAddress:"",poolId:BigInt(0),swapTypeId:0,offerCoin:n.Coin.fromPartial({}),demandCoinDenom:"",offerCoinFee:n.Coin.fromPartial({}),orderPrice:""}}t.ik={typeUrl:"/cyber.liquidity.v1beta1.MsgCreatePool",is:e=>e&&(e.$typeUrl===t.ik.typeUrl||"string"==typeof e.poolCreatorAddress&&"number"==typeof e.poolTypeId&&Array.isArray(e.depositCoins)&&(!e.depositCoins.length||n.Coin.is(e.depositCoins[0]))),isSDK:e=>e&&(e.$typeUrl===t.ik.typeUrl||"string"==typeof e.pool_creator_address&&"number"==typeof e.pool_type_id&&Array.isArray(e.deposit_coins)&&(!e.deposit_coins.length||n.Coin.isSDK(e.deposit_coins[0]))),isAmino:e=>e&&(e.$typeUrl===t.ik.typeUrl||"string"==typeof e.pool_creator_address&&"number"==typeof e.pool_type_id&&Array.isArray(e.deposit_coins)&&(!e.deposit_coins.length||n.Coin.isAmino(e.deposit_coins[0]))),encode(e,t=i.BinaryWriter.create()){""!==e.poolCreatorAddress&&t.uint32(10).string(e.poolCreatorAddress),0!==e.poolTypeId&&t.uint32(16).uint32(e.poolTypeId);for(const r of e.depositCoins)n.Coin.encode(r,t.uint32(34).fork()).ldelim();return t},decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let s=void 0===t?r.len:r.pos+t;const o={poolCreatorAddress:"",poolTypeId:0,depositCoins:[]};for(;r.pos<s;){const e=r.uint32();switch(e>>>3){case 1:o.poolCreatorAddress=r.string();break;case 2:o.poolTypeId=r.uint32();break;case 4:o.depositCoins.push(n.Coin.decode(r,r.uint32()));break;default:r.skipType(7&e)}}return o},fromJSON:e=>({poolCreatorAddress:(0,s.isSet)(e.poolCreatorAddress)?String(e.poolCreatorAddress):"",poolTypeId:(0,s.isSet)(e.poolTypeId)?Number(e.poolTypeId):0,depositCoins:Array.isArray(e?.depositCoins)?e.depositCoins.map((e=>n.Coin.fromJSON(e))):[]}),toJSON(e){const t={};return void 0!==e.poolCreatorAddress&&(t.poolCreatorAddress=e.poolCreatorAddress),void 0!==e.poolTypeId&&(t.poolTypeId=Math.round(e.poolTypeId)),e.depositCoins?t.depositCoins=e.depositCoins.map((e=>e?n.Coin.toJSON(e):void 0)):t.depositCoins=[],t},fromPartial(e){const t={poolCreatorAddress:"",poolTypeId:0,depositCoins:[]};return t.poolCreatorAddress=e.poolCreatorAddress??"",t.poolTypeId=e.poolTypeId??0,t.depositCoins=e.depositCoins?.map((e=>n.Coin.fromPartial(e)))||[],t},fromAmino(e){const t={poolCreatorAddress:"",poolTypeId:0,depositCoins:[]};return void 0!==e.pool_creator_address&&null!==e.pool_creator_address&&(t.poolCreatorAddress=e.pool_creator_address),void 0!==e.pool_type_id&&null!==e.pool_type_id&&(t.poolTypeId=e.pool_type_id),t.depositCoins=e.deposit_coins?.map((e=>n.Coin.fromAmino(e)))||[],t},toAmino(e){const t={};return t.pool_creator_address=""===e.poolCreatorAddress?void 0:e.poolCreatorAddress,t.pool_type_id=0===e.poolTypeId?void 0:e.poolTypeId,e.depositCoins?t.deposit_coins=e.depositCoins.map((e=>e?n.Coin.toAmino(e):void 0)):t.deposit_coins=e.depositCoins,t},fromAminoMsg:e=>t.ik.fromAmino(e.value),fromProtoMsg:e=>t.ik.decode(e.value),toProto:e=>t.ik.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cyber.liquidity.v1beta1.MsgCreatePool",value:t.ik.encode(e).finish()})},o.GlobalDecoderRegistry.register(t.ik.typeUrl,t.ik),t.l5={typeUrl:"/cyber.liquidity.v1beta1.MsgCreatePoolResponse",is:e=>e&&e.$typeUrl===t.l5.typeUrl,isSDK:e=>e&&e.$typeUrl===t.l5.typeUrl,isAmino:e=>e&&e.$typeUrl===t.l5.typeUrl,encode:(e,t=i.BinaryWriter.create())=>t,decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return s},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({}),fromAmino:e=>({}),toAmino:e=>({}),fromAminoMsg:e=>t.l5.fromAmino(e.value),fromProtoMsg:e=>t.l5.decode(e.value),toProto:e=>t.l5.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cyber.liquidity.v1beta1.MsgCreatePoolResponse",value:t.l5.encode(e).finish()})},o.GlobalDecoderRegistry.register(t.l5.typeUrl,t.l5),t.zL={typeUrl:"/cyber.liquidity.v1beta1.MsgDepositWithinBatch",is:e=>e&&(e.$typeUrl===t.zL.typeUrl||"string"==typeof e.depositorAddress&&"bigint"==typeof e.poolId&&Array.isArray(e.depositCoins)&&(!e.depositCoins.length||n.Coin.is(e.depositCoins[0]))),isSDK:e=>e&&(e.$typeUrl===t.zL.typeUrl||"string"==typeof e.depositor_address&&"bigint"==typeof e.pool_id&&Array.isArray(e.deposit_coins)&&(!e.deposit_coins.length||n.Coin.isSDK(e.deposit_coins[0]))),isAmino:e=>e&&(e.$typeUrl===t.zL.typeUrl||"string"==typeof e.depositor_address&&"bigint"==typeof e.pool_id&&Array.isArray(e.deposit_coins)&&(!e.deposit_coins.length||n.Coin.isAmino(e.deposit_coins[0]))),encode(e,t=i.BinaryWriter.create()){""!==e.depositorAddress&&t.uint32(10).string(e.depositorAddress),e.poolId!==BigInt(0)&&t.uint32(16).uint64(e.poolId);for(const r of e.depositCoins)n.Coin.encode(r,t.uint32(26).fork()).ldelim();return t},decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let s=void 0===t?r.len:r.pos+t;const o=c();for(;r.pos<s;){const e=r.uint32();switch(e>>>3){case 1:o.depositorAddress=r.string();break;case 2:o.poolId=r.uint64();break;case 3:o.depositCoins.push(n.Coin.decode(r,r.uint32()));break;default:r.skipType(7&e)}}return o},fromJSON:e=>({depositorAddress:(0,s.isSet)(e.depositorAddress)?String(e.depositorAddress):"",poolId:(0,s.isSet)(e.poolId)?BigInt(e.poolId.toString()):BigInt(0),depositCoins:Array.isArray(e?.depositCoins)?e.depositCoins.map((e=>n.Coin.fromJSON(e))):[]}),toJSON(e){const t={};return void 0!==e.depositorAddress&&(t.depositorAddress=e.depositorAddress),void 0!==e.poolId&&(t.poolId=(e.poolId||BigInt(0)).toString()),e.depositCoins?t.depositCoins=e.depositCoins.map((e=>e?n.Coin.toJSON(e):void 0)):t.depositCoins=[],t},fromPartial(e){const t=c();return t.depositorAddress=e.depositorAddress??"",t.poolId=void 0!==e.poolId&&null!==e.poolId?BigInt(e.poolId.toString()):BigInt(0),t.depositCoins=e.depositCoins?.map((e=>n.Coin.fromPartial(e)))||[],t},fromAmino(e){const t=c();return void 0!==e.depositor_address&&null!==e.depositor_address&&(t.depositorAddress=e.depositor_address),void 0!==e.pool_id&&null!==e.pool_id&&(t.poolId=BigInt(e.pool_id)),t.depositCoins=e.deposit_coins?.map((e=>n.Coin.fromAmino(e)))||[],t},toAmino(e){const t={};return t.depositor_address=""===e.depositorAddress?void 0:e.depositorAddress,t.pool_id=e.poolId!==BigInt(0)?e.poolId.toString():void 0,e.depositCoins?t.deposit_coins=e.depositCoins.map((e=>e?n.Coin.toAmino(e):void 0)):t.deposit_coins=e.depositCoins,t},fromAminoMsg:e=>t.zL.fromAmino(e.value),fromProtoMsg:e=>t.zL.decode(e.value),toProto:e=>t.zL.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cyber.liquidity.v1beta1.MsgDepositWithinBatch",value:t.zL.encode(e).finish()})},o.GlobalDecoderRegistry.register(t.zL.typeUrl,t.zL),t.Cz={typeUrl:"/cyber.liquidity.v1beta1.MsgDepositWithinBatchResponse",is:e=>e&&e.$typeUrl===t.Cz.typeUrl,isSDK:e=>e&&e.$typeUrl===t.Cz.typeUrl,isAmino:e=>e&&e.$typeUrl===t.Cz.typeUrl,encode:(e,t=i.BinaryWriter.create())=>t,decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return s},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({}),fromAmino:e=>({}),toAmino:e=>({}),fromAminoMsg:e=>t.Cz.fromAmino(e.value),fromProtoMsg:e=>t.Cz.decode(e.value),toProto:e=>t.Cz.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cyber.liquidity.v1beta1.MsgDepositWithinBatchResponse",value:t.Cz.encode(e).finish()})},o.GlobalDecoderRegistry.register(t.Cz.typeUrl,t.Cz),t.nb={typeUrl:"/cyber.liquidity.v1beta1.MsgWithdrawWithinBatch",is:e=>e&&(e.$typeUrl===t.nb.typeUrl||"string"==typeof e.withdrawerAddress&&"bigint"==typeof e.poolId&&n.Coin.is(e.poolCoin)),isSDK:e=>e&&(e.$typeUrl===t.nb.typeUrl||"string"==typeof e.withdrawer_address&&"bigint"==typeof e.pool_id&&n.Coin.isSDK(e.pool_coin)),isAmino:e=>e&&(e.$typeUrl===t.nb.typeUrl||"string"==typeof e.withdrawer_address&&"bigint"==typeof e.pool_id&&n.Coin.isAmino(e.pool_coin)),encode:(e,t=i.BinaryWriter.create())=>(""!==e.withdrawerAddress&&t.uint32(10).string(e.withdrawerAddress),e.poolId!==BigInt(0)&&t.uint32(16).uint64(e.poolId),void 0!==e.poolCoin&&n.Coin.encode(e.poolCoin,t.uint32(26).fork()).ldelim(),t),decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let s=void 0===t?r.len:r.pos+t;const o=u();for(;r.pos<s;){const e=r.uint32();switch(e>>>3){case 1:o.withdrawerAddress=r.string();break;case 2:o.poolId=r.uint64();break;case 3:o.poolCoin=n.Coin.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({withdrawerAddress:(0,s.isSet)(e.withdrawerAddress)?String(e.withdrawerAddress):"",poolId:(0,s.isSet)(e.poolId)?BigInt(e.poolId.toString()):BigInt(0),poolCoin:(0,s.isSet)(e.poolCoin)?n.Coin.fromJSON(e.poolCoin):void 0}),toJSON(e){const t={};return void 0!==e.withdrawerAddress&&(t.withdrawerAddress=e.withdrawerAddress),void 0!==e.poolId&&(t.poolId=(e.poolId||BigInt(0)).toString()),void 0!==e.poolCoin&&(t.poolCoin=e.poolCoin?n.Coin.toJSON(e.poolCoin):void 0),t},fromPartial(e){const t=u();return t.withdrawerAddress=e.withdrawerAddress??"",t.poolId=void 0!==e.poolId&&null!==e.poolId?BigInt(e.poolId.toString()):BigInt(0),t.poolCoin=void 0!==e.poolCoin&&null!==e.poolCoin?n.Coin.fromPartial(e.poolCoin):void 0,t},fromAmino(e){const t=u();return void 0!==e.withdrawer_address&&null!==e.withdrawer_address&&(t.withdrawerAddress=e.withdrawer_address),void 0!==e.pool_id&&null!==e.pool_id&&(t.poolId=BigInt(e.pool_id)),void 0!==e.pool_coin&&null!==e.pool_coin&&(t.poolCoin=n.Coin.fromAmino(e.pool_coin)),t},toAmino(e){const t={};return t.withdrawer_address=""===e.withdrawerAddress?void 0:e.withdrawerAddress,t.pool_id=e.poolId!==BigInt(0)?e.poolId.toString():void 0,t.pool_coin=e.poolCoin?n.Coin.toAmino(e.poolCoin):void 0,t},fromAminoMsg:e=>t.nb.fromAmino(e.value),fromProtoMsg:e=>t.nb.decode(e.value),toProto:e=>t.nb.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cyber.liquidity.v1beta1.MsgWithdrawWithinBatch",value:t.nb.encode(e).finish()})},o.GlobalDecoderRegistry.register(t.nb.typeUrl,t.nb),t.Ei={typeUrl:"/cyber.liquidity.v1beta1.MsgWithdrawWithinBatchResponse",is:e=>e&&e.$typeUrl===t.Ei.typeUrl,isSDK:e=>e&&e.$typeUrl===t.Ei.typeUrl,isAmino:e=>e&&e.$typeUrl===t.Ei.typeUrl,encode:(e,t=i.BinaryWriter.create())=>t,decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return s},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({}),fromAmino:e=>({}),toAmino:e=>({}),fromAminoMsg:e=>t.Ei.fromAmino(e.value),fromProtoMsg:e=>t.Ei.decode(e.value),toProto:e=>t.Ei.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cyber.liquidity.v1beta1.MsgWithdrawWithinBatchResponse",value:t.Ei.encode(e).finish()})},o.GlobalDecoderRegistry.register(t.Ei.typeUrl,t.Ei),t.AS={typeUrl:"/cyber.liquidity.v1beta1.MsgSwapWithinBatch",is:e=>e&&(e.$typeUrl===t.AS.typeUrl||"string"==typeof e.swapRequesterAddress&&"bigint"==typeof e.poolId&&"number"==typeof e.swapTypeId&&n.Coin.is(e.offerCoin)&&"string"==typeof e.demandCoinDenom&&n.Coin.is(e.offerCoinFee)&&"string"==typeof e.orderPrice),isSDK:e=>e&&(e.$typeUrl===t.AS.typeUrl||"string"==typeof e.swap_requester_address&&"bigint"==typeof e.pool_id&&"number"==typeof e.swap_type_id&&n.Coin.isSDK(e.offer_coin)&&"string"==typeof e.demand_coin_denom&&n.Coin.isSDK(e.offer_coin_fee)&&"string"==typeof e.order_price),isAmino:e=>e&&(e.$typeUrl===t.AS.typeUrl||"string"==typeof e.swap_requester_address&&"bigint"==typeof e.pool_id&&"number"==typeof e.swap_type_id&&n.Coin.isAmino(e.offer_coin)&&"string"==typeof e.demand_coin_denom&&n.Coin.isAmino(e.offer_coin_fee)&&"string"==typeof e.order_price),encode:(e,t=i.BinaryWriter.create())=>(""!==e.swapRequesterAddress&&t.uint32(10).string(e.swapRequesterAddress),e.poolId!==BigInt(0)&&t.uint32(16).uint64(e.poolId),0!==e.swapTypeId&&t.uint32(24).uint32(e.swapTypeId),void 0!==e.offerCoin&&n.Coin.encode(e.offerCoin,t.uint32(34).fork()).ldelim(),""!==e.demandCoinDenom&&t.uint32(42).string(e.demandCoinDenom),void 0!==e.offerCoinFee&&n.Coin.encode(e.offerCoinFee,t.uint32(50).fork()).ldelim(),""!==e.orderPrice&&t.uint32(58).string(a.Decimal.fromUserInput(e.orderPrice,18).atomics),t),decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let s=void 0===t?r.len:r.pos+t;const o=l();for(;r.pos<s;){const e=r.uint32();switch(e>>>3){case 1:o.swapRequesterAddress=r.string();break;case 2:o.poolId=r.uint64();break;case 3:o.swapTypeId=r.uint32();break;case 4:o.offerCoin=n.Coin.decode(r,r.uint32());break;case 5:o.demandCoinDenom=r.string();break;case 6:o.offerCoinFee=n.Coin.decode(r,r.uint32());break;case 7:o.orderPrice=a.Decimal.fromAtomics(r.string(),18).toString();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({swapRequesterAddress:(0,s.isSet)(e.swapRequesterAddress)?String(e.swapRequesterAddress):"",poolId:(0,s.isSet)(e.poolId)?BigInt(e.poolId.toString()):BigInt(0),swapTypeId:(0,s.isSet)(e.swapTypeId)?Number(e.swapTypeId):0,offerCoin:(0,s.isSet)(e.offerCoin)?n.Coin.fromJSON(e.offerCoin):void 0,demandCoinDenom:(0,s.isSet)(e.demandCoinDenom)?String(e.demandCoinDenom):"",offerCoinFee:(0,s.isSet)(e.offerCoinFee)?n.Coin.fromJSON(e.offerCoinFee):void 0,orderPrice:(0,s.isSet)(e.orderPrice)?String(e.orderPrice):""}),toJSON(e){const t={};return void 0!==e.swapRequesterAddress&&(t.swapRequesterAddress=e.swapRequesterAddress),void 0!==e.poolId&&(t.poolId=(e.poolId||BigInt(0)).toString()),void 0!==e.swapTypeId&&(t.swapTypeId=Math.round(e.swapTypeId)),void 0!==e.offerCoin&&(t.offerCoin=e.offerCoin?n.Coin.toJSON(e.offerCoin):void 0),void 0!==e.demandCoinDenom&&(t.demandCoinDenom=e.demandCoinDenom),void 0!==e.offerCoinFee&&(t.offerCoinFee=e.offerCoinFee?n.Coin.toJSON(e.offerCoinFee):void 0),void 0!==e.orderPrice&&(t.orderPrice=e.orderPrice),t},fromPartial(e){const t=l();return t.swapRequesterAddress=e.swapRequesterAddress??"",t.poolId=void 0!==e.poolId&&null!==e.poolId?BigInt(e.poolId.toString()):BigInt(0),t.swapTypeId=e.swapTypeId??0,t.offerCoin=void 0!==e.offerCoin&&null!==e.offerCoin?n.Coin.fromPartial(e.offerCoin):void 0,t.demandCoinDenom=e.demandCoinDenom??"",t.offerCoinFee=void 0!==e.offerCoinFee&&null!==e.offerCoinFee?n.Coin.fromPartial(e.offerCoinFee):void 0,t.orderPrice=e.orderPrice??"",t},fromAmino(e){const t=l();return void 0!==e.swap_requester_address&&null!==e.swap_requester_address&&(t.swapRequesterAddress=e.swap_requester_address),void 0!==e.pool_id&&null!==e.pool_id&&(t.poolId=BigInt(e.pool_id)),void 0!==e.swap_type_id&&null!==e.swap_type_id&&(t.swapTypeId=e.swap_type_id),void 0!==e.offer_coin&&null!==e.offer_coin&&(t.offerCoin=n.Coin.fromAmino(e.offer_coin)),void 0!==e.demand_coin_denom&&null!==e.demand_coin_denom&&(t.demandCoinDenom=e.demand_coin_denom),void 0!==e.offer_coin_fee&&null!==e.offer_coin_fee&&(t.offerCoinFee=n.Coin.fromAmino(e.offer_coin_fee)),void 0!==e.order_price&&null!==e.order_price&&(t.orderPrice=e.order_price),t},toAmino(e){const t={};return t.swap_requester_address=""===e.swapRequesterAddress?void 0:e.swapRequesterAddress,t.pool_id=e.poolId!==BigInt(0)?e.poolId.toString():void 0,t.swap_type_id=0===e.swapTypeId?void 0:e.swapTypeId,t.offer_coin=e.offerCoin?n.Coin.toAmino(e.offerCoin):void 0,t.demand_coin_denom=""===e.demandCoinDenom?void 0:e.demandCoinDenom,t.offer_coin_fee=e.offerCoinFee?n.Coin.toAmino(e.offerCoinFee):void 0,t.order_price=""===e.orderPrice?void 0:e.orderPrice,t},fromAminoMsg:e=>t.AS.fromAmino(e.value),fromProtoMsg:e=>t.AS.decode(e.value),toProto:e=>t.AS.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cyber.liquidity.v1beta1.MsgSwapWithinBatch",value:t.AS.encode(e).finish()})},o.GlobalDecoderRegistry.register(t.AS.typeUrl,t.AS),t.NU={typeUrl:"/cyber.liquidity.v1beta1.MsgSwapWithinBatchResponse",is:e=>e&&e.$typeUrl===t.NU.typeUrl,isSDK:e=>e&&e.$typeUrl===t.NU.typeUrl,isAmino:e=>e&&e.$typeUrl===t.NU.typeUrl,encode:(e,t=i.BinaryWriter.create())=>t,decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s={};for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return s},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({}),fromAmino:e=>({}),toAmino:e=>({}),fromAminoMsg:e=>t.NU.fromAmino(e.value),fromProtoMsg:e=>t.NU.decode(e.value),toProto:e=>t.NU.encode(e).finish(),toProtoMsg:e=>({typeUrl:"/cyber.liquidity.v1beta1.MsgSwapWithinBatchResponse",value:t.NU.encode(e).finish()})},o.GlobalDecoderRegistry.register(t.NU.typeUrl,t.NU)},27537:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Uint64=t.Uint53=t.Uint32=t.Int53=t.Decimal=void 0;var n=r(21690);Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return n.Decimal}});var i=r(62038);Object.defineProperty(t,"Int53",{enumerable:!0,get:function(){return i.Int53}}),Object.defineProperty(t,"Uint32",{enumerable:!0,get:function(){return i.Uint32}}),Object.defineProperty(t,"Uint53",{enumerable:!0,get:function(){return i.Uint53}}),Object.defineProperty(t,"Uint64",{enumerable:!0,get:function(){return i.Uint64}})},40796:function(e,t,r){"use strict";const{fromCallback:n}=r(78100),i=r(20266),{getCallback:s,getOptions:o}=r(61343),a=Symbol("promise"),c=Symbol("status"),u=Symbol("operations"),l=Symbol("finishClose"),h=Symbol("closeCallbacks");t.AbstractChainedBatch=class{constructor(e){if("object"!=typeof e||null===e){throw new TypeError(`The first argument must be an abstract-level database, received ${null===e?"null":typeof e}`)}this[u]=[],this[h]=[],this[c]="open",this[l]=this[l].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[u].length}put(e,t,r){if("open"!==this[c])throw new i("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(e)||this.db._checkValue(t);if(n)throw n;const s=r&&null!=r.sublevel?r.sublevel:this.db,o=r,a=s.keyEncoding(r&&r.keyEncoding),l=s.valueEncoding(r&&r.valueEncoding),h=a.format;r={...r,keyEncoding:h,valueEncoding:l.format},s!==this.db&&(r.sublevel=null);const d=s.prefixKey(a.encode(e),h),f=l.encode(t);return this._put(d,f,r),this[u].push({...o,type:"put",key:e,value:t}),this}_put(e,t,r){}del(e,t){if("open"!==this[c])throw new i("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const r=this.db._checkKey(e);if(r)throw r;const n=t&&null!=t.sublevel?t.sublevel:this.db,s=t,o=n.keyEncoding(t&&t.keyEncoding),a=o.format;return t={...t,keyEncoding:a},n!==this.db&&(t.sublevel=null),this._del(n.prefixKey(o.encode(e),a),t),this[u].push({...s,type:"del",key:e}),this}_del(e,t){}clear(){if("open"!==this[c])throw new i("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[u]=[],this}_clear(){}write(e,t){return t=s(e,t),t=n(t,a),e=o(e),"open"!==this[c]?this.nextTick(t,new i("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):0===this.length?this.close(t):(this[c]="writing",this._write(e,(e=>{this[c]="closing",this[h].push((()=>t(e))),e||this.db.emit("batch",this[u]),this._close(this[l])}))),t[a]}_write(e,t){}close(e){return e=n(e,a),"closing"===this[c]?this[h].push(e):"closed"===this[c]?this.nextTick(e):(this[h].push(e),"writing"!==this[c]&&(this[c]="closing",this._close(this[l]))),e[a]}_close(e){this.nextTick(e)}[l](){this[c]="closed",this.db.detachResource(this);const e=this[h];this[h]=[];for(const t of e)t()}}},63527:function(e,t,r){"use strict";var n=r(96763);const{fromCallback:i}=r(78100),s=r(20266),{getOptions:o,getCallback:a}=r(61343),c=Symbol("promise"),u=Symbol("callback"),l=Symbol("working"),h=Symbol("handleOne"),d=Symbol("handleMany"),f=Symbol("autoClose"),p=Symbol("finishWork"),g=Symbol("returnMany"),m=Symbol("closing"),y=Symbol("handleClose"),b=Symbol("closed"),w=Symbol("closeCallbacks"),v=Symbol("keyEncoding"),S=Symbol("valueEncoding"),_=Symbol("abortOnClose"),A=Symbol("legacy"),E=Symbol("keys"),x=Symbol("values"),k=Symbol("limit"),T=Symbol("count"),I=Object.freeze({}),P=()=>{};let R=!1;class C{constructor(e,t,r){if("object"!=typeof e||null===e){throw new TypeError(`The first argument must be an abstract-level database, received ${null===e?"null":typeof e}`)}if("object"!=typeof t||null===t)throw new TypeError("The second argument must be an options object");this[b]=!1,this[w]=[],this[l]=!1,this[m]=!1,this[f]=!1,this[u]=null,this[h]=this[h].bind(this),this[d]=this[d].bind(this),this[y]=this[y].bind(this),this[v]=t[v],this[S]=t[S],this[A]=r,this[k]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[T]=0,this[_]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[T]}get limit(){return this[k]}next(e){let t;if(void 0===e)t=new Promise(((t,r)=>{e=(e,n,i)=>{e?r(e):this[A]?void 0===n&&void 0===i?t():t([n,i]):t(n)}}));else if("function"!=typeof e)throw new TypeError("Callback must be a function");return this[m]?this.nextTick(e,new s("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[l]?this.nextTick(e,new s("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[l]=!0,this[u]=e,this[T]>=this[k]?this.nextTick(this[h],null):this._next(this[h])),t}_next(e){this.nextTick(e)}nextv(e,t,r){return r=a(t,r),r=i(r,c),t=o(t,I),Number.isInteger(e)?(this[m]?this.nextTick(r,new s("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[l]?this.nextTick(r,new s("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[k]<1/0&&(e=Math.min(e,this[k]-this[T])),this[l]=!0,this[u]=r,e<=0?this.nextTick(this[d],null,[]):this._nextv(e,t,this[d])),r[c]):(this.nextTick(r,new TypeError("The first argument 'size' must be an integer")),r[c])}_nextv(e,t,r){const n=[],i=(t,s,o)=>t?r(t):(this[A]?void 0===s&&void 0===o:void 0===s)?r(null,n):(n.push(this[A]?[s,o]:s),void(n.length===e?r(null,n):this._next(i)));this._next(i)}all(e,t){return t=a(e,t),t=i(t,c),e=o(e,I),this[m]?this.nextTick(t,new s("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[l]?this.nextTick(t,new s("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[l]=!0,this[u]=t,this[f]=!0,this[T]>=this[k]?this.nextTick(this[d],null,[]):this._all(e,this[d])),t[c]}_all(e,t){let r=this[T];const n=[],i=()=>{const e=this[k]<1/0?Math.min(1e3,this[k]-r):1e3;e<=0?this.nextTick(t,null,n):this._nextv(e,I,s)},s=(e,s)=>{e?t(e):0===s.length?t(null,n):(n.push.apply(n,s),r+=s.length,i())};i()}[p](){const e=this[u];return this[_]&&null===e?P:(this[l]=!1,this[u]=null,this[m]&&this._close(this[y]),e)}[g](e,t,r){this[f]?this.close(e.bind(null,t,r)):e(t,r)}seek(e,t){if(t=o(t,I),this[m]);else{if(this[l])throw new s("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const r=this.db.keyEncoding(t.keyEncoding||this[v]),n=r.format;t.keyEncoding!==n&&(t={...t,keyEncoding:n});const i=this.db.prefixKey(r.encode(e),n);this._seek(i,t)}}}_seek(e,t){throw new s("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){if(e=i(e,c),this[b])this.nextTick(e);else if(this[m])this[w].push(e);else if(this[m]=!0,this[w].push(e),this[l]){if(this[_]){this[p]()(new s("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))}}else this._close(this[y]);return e[c]}_close(e){this.nextTick(e)}[y](){this[b]=!0,this.db.detachResource(this);const e=this[w];this[w]=[];for(const t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;void 0!==(e=await this.next());)yield e}finally{this[b]||await this.close()}}}class O extends C{constructor(e,t){super(e,t,!0),this[E]=!1!==t.keys,this[x]=!1!==t.values}[h](e,t,r){const n=this[p]();if(e)return n(e);try{t=this[E]&&void 0!==t?this[v].decode(t):void 0,r=this[x]&&void 0!==r?this[S].decode(r):void 0}catch(e){return n(new D("entry",e))}void 0===t&&void 0===r||this[T]++,n(null,t,r)}[d](e,t){const r=this[p]();if(e)return this[g](r,e);try{for(const e of t){const t=e[0],r=e[1];e[0]=this[E]&&void 0!==t?this[v].decode(t):void 0,e[1]=this[x]&&void 0!==r?this[S].decode(r):void 0}}catch(e){return this[g](r,new D("entries",e))}this[T]+=t.length,this[g](r,null,t)}end(e){return R||void 0===n||(R=!0,n.warn(new s("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}}class D extends s{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}}for(const e of["_ended property","_nexting property","_end method"])Object.defineProperty(O.prototype,e.split(" ")[0],{get(){throw new s(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new s(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});O.keyEncoding=v,O.valueEncoding=S,t.AbstractIterator=O,t.AbstractKeyIterator=class extends C{constructor(e,t){super(e,t,!1)}[h](e,t){const r=this[p]();if(e)return r(e);try{t=void 0!==t?this[v].decode(t):void 0}catch(e){return r(new D("key",e))}void 0!==t&&this[T]++,r(null,t)}[d](e,t){const r=this[p]();if(e)return this[g](r,e);try{for(let e=0;e<t.length;e++){const r=t[e];t[e]=void 0!==r?this[v].decode(r):void 0}}catch(e){return this[g](r,new D("keys",e))}this[T]+=t.length,this[g](r,null,t)}},t.AbstractValueIterator=class extends C{constructor(e,t){super(e,t,!1)}[h](e,t){const r=this[p]();if(e)return r(e);try{t=void 0!==t?this[S].decode(t):void 0}catch(e){return r(new D("value",e))}void 0!==t&&this[T]++,r(null,t)}[d](e,t){const r=this[p]();if(e)return this[g](r,e);try{for(let e=0;e<t.length;e++){const r=t[e];t[e]=void 0!==r?this[S].decode(r):void 0}}catch(e){return this[g](r,new D("values",e))}this[T]+=t.length,this[g](r,null,t)}}},91983:function(e,t,r){"use strict";const{supports:n}=r(25356),{Transcoder:i}=r(36035),{EventEmitter:s}=r(37007),{fromCallback:o}=r(78100),a=r(20266),{AbstractIterator:c}=r(63527),{DefaultKeyIterator:u,DefaultValueIterator:l}=r(85682),{DeferredIterator:h,DeferredKeyIterator:d,DeferredValueIterator:f}=r(4416),{DefaultChainedBatch:p}=r(47050),{getCallback:g,getOptions:m}=r(61343),y=r(386),b=Symbol("promise"),w=Symbol("landed"),v=Symbol("resources"),S=Symbol("closeResources"),_=Symbol("operations"),A=Symbol("undefer"),E=Symbol("deferOpen"),x=Symbol("options"),k=Symbol("status"),T=Symbol("defaultOptions"),I=Symbol("transcoder"),P=Symbol("keyEncoding"),R=Symbol("valueEncoding"),C=()=>{};class O extends s{constructor(e,t){if(super(),"object"!=typeof e||null===e)throw new TypeError("The first argument 'manifest' must be an object");t=m(t);const{keyEncoding:r,valueEncoding:s,passive:o,...a}=t;this[v]=new Set,this[_]=[],this[E]=!0,this[x]=a,this[k]="opening",this.supports=n(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:!1!==e.snapshots,permanence:!1!==e.permanence,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[I]=new i(N(this)),this[P]=this[I].encoding(r||"utf8"),this[R]=this[I].encoding(s||"utf8");for(const e of this[I].encodings())this.supports.encodings[e.commonName]||(this.supports.encodings[e.commonName]=!0);this[T]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[P].commonName,valueEncoding:this[R].commonName}),key:Object.freeze({keyEncoding:this[P].commonName})},this.nextTick((()=>{this[E]&&this.open({passive:!1},C)}))}get status(){return this[k]}keyEncoding(e){return this[I].encoding(null!=e?e:this[P])}valueEncoding(e){return this[I].encoding(null!=e?e:this[R])}open(e,t){t=g(e,t),t=o(t,b),(e={...this[x],...m(e)}).createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists;const r=e=>{"closing"===this[k]||"opening"===this[k]?this.once(w,e?()=>r(e):r):"open"!==this[k]?t(new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:e})):t()};return e.passive?"opening"===this[k]?this.once(w,r):this.nextTick(r):"closed"===this[k]||this[E]?(this[E]=!1,this[k]="opening",this.emit("opening"),this._open(e,(e=>{if(e)return this[k]="closed",this[S]((()=>{this.emit(w),r(e)})),void this[A]();this[k]="open",this[A](),this.emit(w),"open"===this[k]&&this.emit("open"),"open"===this[k]&&this.emit("ready"),r()}))):"open"===this[k]?this.nextTick(r):this.once(w,(()=>this.open(e,t))),t[b]}_open(e,t){this.nextTick(t)}close(e){e=o(e,b);const t=r=>{"opening"===this[k]||"closing"===this[k]?this.once(w,r?t(r):t):"closed"!==this[k]?e(new a("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:r})):e()};if("open"===this[k]){this[k]="closing",this.emit("closing");const e=e=>{this[k]="open",this[A](),this.emit(w),t(e)};this[S]((()=>{this._close((r=>{if(r)return e(r);this[k]="closed",this[A](),this.emit(w),"closed"===this[k]&&this.emit("closed"),t()}))}))}else"closed"===this[k]?this.nextTick(t):this.once(w,(()=>this.close(e)));return e[b]}[S](e){if(0===this[v].size)return this.nextTick(e);let t=this[v].size,r=!0;const n=()=>{0==--t&&(r?this.nextTick(e):e())};for(const e of this[v])e.close(n);r=!1,this[v].clear()}_close(e){this.nextTick(e)}get(e,t,r){if(r=g(t,r),r=o(r,b),t=m(t,this[T].entry),"opening"===this[k])return this.defer((()=>this.get(e,t,r))),r[b];if(B(this,r))return r[b];const n=this._checkKey(e);if(n)return this.nextTick(r,n),r[b];const i=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),c=i.format,u=s.format;return t.keyEncoding===c&&t.valueEncoding===u||(t=Object.assign({},t,{keyEncoding:c,valueEncoding:u})),this._get(this.prefixKey(i.encode(e),c),t,((e,t)=>{if(e)return("LEVEL_NOT_FOUND"===e.code||e.notFound||/NotFound/i.test(e))&&(e.code||(e.code="LEVEL_NOT_FOUND"),e.notFound||(e.notFound=!0),e.status||(e.status=404)),r(e);try{t=s.decode(t)}catch(e){return r(new a("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:e}))}r(null,t)})),r[b]}_get(e,t,r){this.nextTick(r,new Error("NotFound"))}getMany(e,t,r){if(r=g(t,r),r=o(r,b),t=m(t,this[T].entry),"opening"===this[k])return this.defer((()=>this.getMany(e,t,r))),r[b];if(B(this,r))return r[b];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'keys' must be an array")),r[b];if(0===e.length)return this.nextTick(r,null,[]),r[b];const n=this.keyEncoding(t.keyEncoding),i=this.valueEncoding(t.valueEncoding),s=n.format,c=i.format;t.keyEncoding===s&&t.valueEncoding===c||(t=Object.assign({},t,{keyEncoding:s,valueEncoding:c}));const u=new Array(e.length);for(let t=0;t<e.length;t++){const i=e[t],o=this._checkKey(i);if(o)return this.nextTick(r,o),r[b];u[t]=this.prefixKey(n.encode(i),s)}return this._getMany(u,t,((e,t)=>{if(e)return r(e);try{for(let e=0;e<t.length;e++)void 0!==t[e]&&(t[e]=i.decode(t[e]))}catch(e){return r(new a(`Could not decode one or more of ${t.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:e}))}r(null,t)})),r[b]}_getMany(e,t,r){this.nextTick(r,null,new Array(e.length).fill(void 0))}put(e,t,r,n){if(n=g(r,n),n=o(n,b),r=m(r,this[T].entry),"opening"===this[k])return this.defer((()=>this.put(e,t,r,n))),n[b];if(B(this,n))return n[b];const i=this._checkKey(e)||this._checkValue(t);if(i)return this.nextTick(n,i),n[b];const s=this.keyEncoding(r.keyEncoding),a=this.valueEncoding(r.valueEncoding),c=s.format,u=a.format;r.keyEncoding===c&&r.valueEncoding===u||(r=Object.assign({},r,{keyEncoding:c,valueEncoding:u}));const l=this.prefixKey(s.encode(e),c),h=a.encode(t);return this._put(l,h,r,(r=>{if(r)return n(r);this.emit("put",e,t),n()})),n[b]}_put(e,t,r,n){this.nextTick(n)}del(e,t,r){if(r=g(t,r),r=o(r,b),t=m(t,this[T].key),"opening"===this[k])return this.defer((()=>this.del(e,t,r))),r[b];if(B(this,r))return r[b];const n=this._checkKey(e);if(n)return this.nextTick(r,n),r[b];const i=this.keyEncoding(t.keyEncoding),s=i.format;return t.keyEncoding!==s&&(t=Object.assign({},t,{keyEncoding:s})),this._del(this.prefixKey(i.encode(e),s),t,(t=>{if(t)return r(t);this.emit("del",e),r()})),r[b]}_del(e,t,r){this.nextTick(r)}batch(e,t,r){if(!arguments.length){if("opening"===this[k])return new p(this);if("open"!==this[k])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(r="function"==typeof e?e:g(t,r),r=o(r,b),t=m(t,this[T].empty),"opening"===this[k])return this.defer((()=>this.batch(e,t,r))),r[b];if(B(this,r))return r[b];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'operations' must be an array")),r[b];if(0===e.length)return this.nextTick(r),r[b];const n=new Array(e.length),{keyEncoding:i,valueEncoding:s,...c}=t;for(let t=0;t<e.length;t++){if("object"!=typeof e[t]||null===e[t])return this.nextTick(r,new TypeError("A batch operation must be an object")),r[b];const o=Object.assign({},e[t]);if("put"!==o.type&&"del"!==o.type)return this.nextTick(r,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),r[b];const a=this._checkKey(o.key);if(a)return this.nextTick(r,a),r[b];const c=null!=o.sublevel?o.sublevel:this,u=c.keyEncoding(o.keyEncoding||i),l=u.format;if(o.key=c.prefixKey(u.encode(o.key),l),o.keyEncoding=l,"put"===o.type){const e=this._checkValue(o.value);if(e)return this.nextTick(r,e),r[b];const t=c.valueEncoding(o.valueEncoding||s);o.value=t.encode(o.value),o.valueEncoding=t.format}c!==this&&(o.sublevel=null),n[t]=o}return this._batch(n,c,(t=>{if(t)return r(t);this.emit("batch",e),r()})),r[b]}_batch(e,t,r){this.nextTick(r)}sublevel(e,t){return this._sublevel(e,D.defaults(t))}_sublevel(e,t){return new D(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=g(e,t),t=o(t,b),e=m(e,this[T].empty),"opening"===this[k])return this.defer((()=>this.clear(e,t))),t[b];if(B(this,t))return t[b];const r=e,n=this.keyEncoding(e.keyEncoding);return(e=y(e,n)).keyEncoding=n.format,0===e.limit?this.nextTick(t):this._clear(e,(e=>{if(e)return t(e);this.emit("clear",r),t()})),t[b]}_clear(e,t){this.nextTick(t)}iterator(e){const t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if((e=y(e,t)).keys=!1!==e.keys,e.values=!1!==e.values,e[c.keyEncoding]=t,e[c.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,"opening"===this[k])return new h(this,e);if("open"!==this[k])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new c(this,e)}keys(e){const t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if((e=y(e,t))[c.keyEncoding]=t,e[c.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,"opening"===this[k])return new d(this,e);if("open"!==this[k])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new u(this,e)}values(e){const t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if((e=y(e,t))[c.keyEncoding]=t,e[c.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,"opening"===this[k])return new f(this,e);if("open"!==this[k])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new l(this,e)}defer(e){if("function"!=typeof e)throw new TypeError("The first argument must be a function");this[_].push(e)}[A](){if(0===this[_].length)return;const e=this[_];this[_]=[];for(const t of e)t()}attachResource(e){if("object"!=typeof e||null===e||"function"!=typeof e.close)throw new TypeError("The first argument must be a resource object");this[v].add(e)}detachResource(e){this[v].delete(e)}_chainedBatch(){return new p(this)}_checkKey(e){if(null==e)return new a("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(null==e)return new a("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}O.prototype.nextTick=r(20028);const{AbstractSublevel:D}=r(99933)({AbstractLevel:O});t.AbstractLevel=O,t.AbstractSublevel=D;const B=function(e,t){return"open"!==e[k]&&(e.nextTick(t,new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0)},N=function(e){return Object.keys(e.supports.encodings).filter((t=>!!e.supports.encodings[t]))}},75e3:function(e,t,r){"use strict";t.AbstractLevel=r(91983).AbstractLevel,t.AbstractSublevel=r(91983).AbstractSublevel,t.AbstractIterator=r(63527).AbstractIterator,t.AbstractKeyIterator=r(63527).AbstractKeyIterator,t.AbstractValueIterator=r(63527).AbstractValueIterator,t.AbstractChainedBatch=r(40796).AbstractChainedBatch},84716:function(e,t,r){"use strict";const{AbstractIterator:n,AbstractKeyIterator:i,AbstractValueIterator:s}=r(63527),o=Symbol("unfix"),a=Symbol("iterator"),c=Symbol("handleOne"),u=Symbol("handleMany"),l=Symbol("callback");class h extends n{constructor(e,t,r,n){super(e,t),this[a]=r,this[o]=n,this[c]=this[c].bind(this),this[u]=this[u].bind(this),this[l]=null}[c](e,t,r){const n=this[l];if(e)return n(e);void 0!==t&&(t=this[o](t)),n(e,t,r)}[u](e,t){const r=this[l];if(e)return r(e);for(const e of t){const t=e[0];void 0!==t&&(e[0]=this[o](t))}r(e,t)}}class d extends i{constructor(e,t,r,n){super(e,t),this[a]=r,this[o]=n,this[c]=this[c].bind(this),this[u]=this[u].bind(this),this[l]=null}[c](e,t){const r=this[l];if(e)return r(e);void 0!==t&&(t=this[o](t)),r(e,t)}[u](e,t){const r=this[l];if(e)return r(e);for(let e=0;e<t.length;e++){const r=t[e];void 0!==r&&(t[e]=this[o](r))}r(e,t)}}class f extends s{constructor(e,t,r){super(e,t),this[a]=r}}for(const e of[h,d])e.prototype._next=function(e){this[l]=e,this[a].next(this[c])},e.prototype._nextv=function(e,t,r){this[l]=r,this[a].nextv(e,t,this[u])},e.prototype._all=function(e,t){this[l]=t,this[a].all(e,this[u])};for(const e of[f])e.prototype._next=function(e){this[a].next(e)},e.prototype._nextv=function(e,t,r){this[a].nextv(e,t,r)},e.prototype._all=function(e,t){this[a].all(e,t)};for(const e of[h,d,f])e.prototype._seek=function(e,t){this[a].seek(e,t)},e.prototype._close=function(e){this[a].close(e)};t.AbstractSublevelIterator=h,t.AbstractSublevelKeyIterator=d,t.AbstractSublevelValueIterator=f},99933:function(e,t,r){"use strict";const n=r(20266),{Buffer:i}=r(91042)||{},{AbstractSublevelIterator:s,AbstractSublevelKeyIterator:o,AbstractSublevelValueIterator:a}=r(84716),c=Symbol("prefix"),u=Symbol("upperBound"),l=Symbol("prefixRange"),h=Symbol("parent"),d=Symbol("unfix"),f=new TextEncoder,p={separator:"!"};e.exports=function({AbstractLevel:e}){class t extends e{static defaults(e){if("string"==typeof e)throw new n("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(e&&e.open)throw new n("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return null==e?p:e.separator?e:{...e,separator:"!"}}constructor(e,r,i){const{separator:s,manifest:o,...a}=t.defaults(i);r=w(r,s);const l=s.charCodeAt(0)+1,p=e[h]||e;if(!f.encode(r).every((e=>e>l&&e<127)))throw new n(`Prefix must use bytes > ${l} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(g(p,o),a);const m=(e.prefix||"")+s+r+s,v=m.slice(0,-1)+String.fromCharCode(l);this[h]=p,this[c]=new y(m),this[u]=new y(v),this[d]=new b,this.nextTick=p.nextTick}prefixKey(e,t){if("utf8"===t)return this[c].utf8+e;if(0===e.byteLength)return this[c][t];if("view"===t){const t=this[c].view,r=new Uint8Array(t.byteLength+e.byteLength);return r.set(t,0),r.set(e,t.byteLength),r}{const t=this[c].buffer;return i.concat([t,e],t.byteLength+e.byteLength)}}[l](e,t){void 0!==e.gte?e.gte=this.prefixKey(e.gte,t):void 0!==e.gt?e.gt=this.prefixKey(e.gt,t):e.gte=this[c][t],void 0!==e.lte?e.lte=this.prefixKey(e.lte,t):void 0!==e.lt?e.lt=this.prefixKey(e.lt,t):e.lte=this[u][t]}get prefix(){return this[c].utf8}get db(){return this[h]}_open(e,t){this[h].open({passive:!0},t)}_put(e,t,r,n){this[h].put(e,t,r,n)}_get(e,t,r){this[h].get(e,t,r)}_getMany(e,t,r){this[h].getMany(e,t,r)}_del(e,t,r){this[h].del(e,t,r)}_batch(e,t,r){this[h].batch(e,t,r)}_clear(e,t){this[l](e,e.keyEncoding),this[h].clear(e,t)}_iterator(e){this[l](e,e.keyEncoding);const t=this[h].iterator(e),r=this[d].get(this[c].utf8.length,e.keyEncoding);return new s(this,e,t,r)}_keys(e){this[l](e,e.keyEncoding);const t=this[h].keys(e),r=this[d].get(this[c].utf8.length,e.keyEncoding);return new o(this,e,t,r)}_values(e){this[l](e,e.keyEncoding);const t=this[h].values(e);return new a(this,e,t)}}return{AbstractSublevel:t}};const g=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:m(e,"utf8"),buffer:m(e,"buffer"),view:m(e,"view")}}},m=function(e,t){return!!e.supports.encodings[t]&&e.keyEncoding(t).name===t};class y{constructor(e){this.utf8=e,this.view=f.encode(e),this.buffer=i?i.from(this.view.buffer,0,this.view.byteLength):{}}}class b{constructor(){this.cache=new Map}get(e,t){let r=this.cache.get(t);return void 0===r&&(r="view"===t?function(e,t){return t.subarray(e)}.bind(null,e):function(e,t){return t.slice(e)}.bind(null,e),this.cache.set(t,r)),r}}const w=function(e,t){let r=0,n=e.length;for(;r<n&&e[r]===t;)r++;for(;n>r&&e[n-1]===t;)n--;return e.slice(r,n)}},61343:function(e,t){"use strict";t.getCallback=function(e,t){return"function"==typeof e?e:t},t.getOptions=function(e,t){return"object"==typeof e&&null!==e?e:void 0!==t?t:{}}},47050:function(e,t,r){"use strict";const{AbstractChainedBatch:n}=r(40796),i=r(20266),s=Symbol("encoded");t.DefaultChainedBatch=class extends n{constructor(e){super(e),this[s]=[]}_put(e,t,r){this[s].push({...r,type:"put",key:e,value:t})}_del(e,t){this[s].push({...t,type:"del",key:e})}_clear(){this[s]=[]}_write(e,t){"opening"===this.db.status?this.db.defer((()=>this._write(e,t))):"open"===this.db.status?0===this[s].length?this.nextTick(t):this.db._batch(this[s],e,t):this.nextTick(t,new i("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}},85682:function(e,t,r){"use strict";const{AbstractKeyIterator:n,AbstractValueIterator:i}=r(63527),s=Symbol("iterator"),o=Symbol("callback"),a=Symbol("handleOne"),c=Symbol("handleMany");class u extends n{constructor(e,t){super(e,t),this[s]=e.iterator({...t,keys:!0,values:!1}),this[a]=this[a].bind(this),this[c]=this[c].bind(this)}}class l extends i{constructor(e,t){super(e,t),this[s]=e.iterator({...t,keys:!1,values:!0}),this[a]=this[a].bind(this),this[c]=this[c].bind(this)}}for(const e of[u,l]){const t=e===u,r=t?e=>e[0]:e=>e[1];e.prototype._next=function(e){this[o]=e,this[s].next(this[a])},e.prototype[a]=function(e,r,n){const i=this[o];e?i(e):i(null,t?r:n)},e.prototype._nextv=function(e,t,r){this[o]=r,this[s].nextv(e,t,this[c])},e.prototype._all=function(e,t){this[o]=t,this[s].all(e,this[c])},e.prototype[c]=function(e,t){const n=this[o];e?n(e):n(null,t.map(r))},e.prototype._seek=function(e,t){this[s].seek(e,t)},e.prototype._close=function(e){this[s].close(e)}}t.DefaultKeyIterator=u,t.DefaultValueIterator=l},4416:function(e,t,r){"use strict";const{AbstractIterator:n,AbstractKeyIterator:i,AbstractValueIterator:s}=r(63527),o=r(20266),a=Symbol("nut"),c=Symbol("undefer"),u=Symbol("factory");class l extends n{constructor(e,t){super(e,t),this[a]=null,this[u]=()=>e.iterator(t),this.db.defer((()=>this[c]()))}}class h extends i{constructor(e,t){super(e,t),this[a]=null,this[u]=()=>e.keys(t),this.db.defer((()=>this[c]()))}}class d extends s{constructor(e,t){super(e,t),this[a]=null,this[u]=()=>e.values(t),this.db.defer((()=>this[c]()))}}for(const e of[l,h,d])e.prototype[c]=function(){"open"===this.db.status&&(this[a]=this[u]())},e.prototype._next=function(e){null!==this[a]?this[a].next(e):"opening"===this.db.status?this.db.defer((()=>this._next(e))):this.nextTick(e,new o("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(e,t,r){null!==this[a]?this[a].nextv(e,t,r):"opening"===this.db.status?this.db.defer((()=>this._nextv(e,t,r))):this.nextTick(r,new o("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(e,t){null!==this[a]?this[a].all(t):"opening"===this.db.status?this.db.defer((()=>this._all(e,t))):this.nextTick(t,new o("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(e,t){null!==this[a]?this[a]._seek(e,t):"opening"===this.db.status&&this.db.defer((()=>this._seek(e,t)))},e.prototype._close=function(e){null!==this[a]?this[a].close(e):"opening"===this.db.status?this.db.defer((()=>this._close(e))):this.nextTick(e)};t.DeferredIterator=l,t.DeferredKeyIterator=h,t.DeferredValueIterator=d},20028:function(e,t,r){"use strict";const n=r(79596);e.exports=function(e,...t){0===t.length?n(e):n((()=>e(...t)))}},386:function(e,t,r){"use strict";const n=r(20266),i=Object.prototype.hasOwnProperty,s=new Set(["lt","lte","gt","gte"]);e.exports=function(e,t){const r={};for(const o in e)if(i.call(e,o)&&"keyEncoding"!==o&&"valueEncoding"!==o){if("start"===o||"end"===o)throw new n(`The legacy range option '${o}' has been removed`,{code:"LEVEL_LEGACY"});if("encoding"===o)throw new n("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});s.has(o)?r[o]=t.encode(e[o]):r[o]=e[o]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}},91042:function(e,t,r){"use strict";var n=r(96763);const i=r(67526),s=r(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function c(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|m(e,t);let n=c(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Z(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Z(e,ArrayBuffer)||e&&Z(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Z(e,SharedArrayBuffer)||e&&Z(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|g(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||Y(e.length)?c(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return h(e),c(e<0?0:0|g(e))}function f(e){const t=e.length<0?0:0|g(e.length),r=c(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function g(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(e).length;default:if(i)return n?-1:H(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let s,o=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(u(e,s+n)!==u(t,n)){r=!1;break}if(r)return s}return-1}function S(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(Y(n))return o;e[r+o]=n}return o}function _(e,t,r,n){return G(H(t,e.length-r),e,r,n)}function A(e,t,r,n){return G(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function E(e,t,r,n){return G($(t),e,r,n)}function x(e,t,r,n){return G(function(e,t){let r,n,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(s=c));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}(n)}t.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||void 0===n||"function"!=typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return h(e),e<=0?c(e):void 0!==t?"string"==typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}(e,t,r)},u.allocUnsafe=function(e){return d(e)},u.allocUnsafeSlow=function(e){return d(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(Z(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),Z(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Z(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)b(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(Z(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0);const a=Math.min(s,o),c=this.slice(n,i),l=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==l[e]){s=c[e],o=l[e];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return S(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return A(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function P(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function R(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=X[e[n]];return i}function O(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n,i){K(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function U(e,t,r,n,i){K(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function M(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(e,t,r,n,i){return t=+t,r>>>=0,i||M(e,0,r,4),s.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,i){return t=+t,r>>>=0,i||M(e,0,r,8),s.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=Q((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=Q((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=Q((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=Q((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),s.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),s.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),s.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),s.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){B(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){B(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=Q((function(e,t=0){return N(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Q((function(e,t=0){return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=Q((function(e,t=0){return N(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Q((function(e,t=0){return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=u.isBuffer(e)?e:u.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const F={};function W(e,t,r){F[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function K(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new F.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||z(t,e.length-(r+1))}(n,i,s)}function V(e,t){if("number"!=typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,r){if(Math.floor(e)!==e)throw V(e,r),new F.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=q(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=q(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const J=/[^+/0-9A-Za-z-_]/g;function H(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function $(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(J,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const X=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function Q(e){return"undefined"==typeof BigInt?ee:e}function ee(){throw new Error("BigInt not supported")}},44708:function(e){function t(e){const t=new globalThis.AbortController;function r(){t.abort();for(const t of e)t&&t.removeEventListener&&t.removeEventListener("abort",r)}for(const t of e)if(t&&t.addEventListener){if(t.aborted){r();break}t.addEventListener("abort",r)}return t.signal}e.exports=t,e.exports.anySignal=t},69674:function(e){"use strict";for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={},n=0;n<t.length;n++){var i=t.charAt(n);if(void 0!==r[i])throw new TypeError(i+" is ambiguous");r[i]=n}function s(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function o(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=s(t)^n>>5}for(t=s(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=s(t)^31&i}return t}function a(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var n=e.toLowerCase(),i=e.toUpperCase();if(e!==n&&e!==i)return"Mixed-case string "+e;var a=(e=n).lastIndexOf("1");if(-1===a)return"No separator character for "+e;if(0===a)return"Missing prefix for "+e;var c=e.slice(0,a),u=e.slice(a+1);if(u.length<6)return"Data too short";var l=o(c);if("string"==typeof l)return l;for(var h=[],d=0;d<u.length;++d){var f=u.charAt(d),p=r[f];if(void 0===p)return"Unknown character "+f;l=s(l)^p,d+6>=u.length||h.push(p)}return 1!==l?"Invalid checksum for "+e:{prefix:c,words:h}}function c(e,t,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],c=0;c<e.length;++c)for(i=i<<t|e[c],s+=t;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=t)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}e.exports={decodeUnsafe:function(){var e=a.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=a.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,r,n){if(n=n||90,e.length+7+r.length>n)throw new TypeError("Exceeds length limit");var i=o(e=e.toLowerCase());if("string"==typeof i)throw new Error(i);for(var a=e+"1",c=0;c<r.length;++c){var u=r[c];if(u>>5!=0)throw new Error("Non 5-bit word");i=s(i)^u,a+=t.charAt(u)}for(c=0;c<6;++c)i=s(i);for(i^=1,c=0;c<6;++c){a+=t.charAt(i>>5*(5-c)&31)}return a},toWordsUnsafe:function(e){var t=c(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=c(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=c(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=c(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}}},18121:function(e,t,r){"use strict";var n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,l=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,f=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function g(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=u-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function m(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,c=e.e,u=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=s.length)?c:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function y(e,t,r,n){if(e<t||e>r||e!==s(e))throw Error(o+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function b(e){var t=e.c.length-1;return p(e.e/u)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function v(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(function e(t){var r,S,_,A,E,x,k,T,I,P,R=V.prototype={constructor:V,toString:null,valueOf:null},C=new V(1),O=20,D=4,B=-7,N=21,U=-1e7,M=1e7,j=!1,L=1,F=0,W={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},q="0123456789abcdefghijklmnopqrstuvwxyz",K=!0;function V(e,t){var r,i,o,c,h,d,f,p,g=this;if(!(g instanceof V))return new V(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>M?g.c=g.e=null:e.e<U?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((d="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,h=e;h>=10;h/=10,c++);return void(c>M?g.c=g.e=null:(g.e=c,g.c=[e]))}p=String(e)}else{if(!n.test(p=String(e)))return _(g,p,d);g.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(c=p.indexOf("."))>-1&&(p=p.replace(".","")),(h=p.search(/e/i))>0?(c<0&&(c=h),c+=+p.slice(h+1),p=p.substring(0,h)):c<0&&(c=p.length)}else{if(y(t,2,q.length,"Base"),10==t&&K)return $(g=new V(e),O+g.e+1,D);if(p=String(e),d="number"==typeof e){if(0*e!=0)return _(g,p,d,t);if(g.s=1/e<0?(p=p.slice(1),-1):1,V.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else g.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=q.slice(0,t),c=h=0,f=p.length;h<f;h++)if(r.indexOf(i=p.charAt(h))<0){if("."==i){if(h>c){c=f;continue}}else if(!o&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){o=!0,h=-1,c=0;continue}return _(g,String(e),d,t)}d=!1,(c=(p=S(p,t,10,g.s)).indexOf("."))>-1?p=p.replace(".",""):c=p.length}for(h=0;48===p.charCodeAt(h);h++);for(f=p.length;48===p.charCodeAt(--f););if(p=p.slice(h,++f)){if(f-=h,d&&V.DEBUG&&f>15&&(e>l||e!==s(e)))throw Error(a+g.s*e);if((c=c-h-1)>M)g.c=g.e=null;else if(c<U)g.c=[g.e=0];else{if(g.e=c,g.c=[],h=(c+1)%u,c<0&&(h+=u),h<f){for(h&&g.c.push(+p.slice(0,h)),f-=u;h<f;)g.c.push(+p.slice(h,h+=u));h=u-(p=p.slice(h)).length}else h-=f;for(;h--;p+="0");g.c.push(+p)}}else g.c=[g.e=0]}function z(e,t,r,n){var i,s,o,a,c;if(null==r?r=D:y(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)c=g(e.c),c=1==n||2==n&&(o<=B||o>=N)?w(c,o):v(c,o,"0");else if(s=(e=$(new V(e),t,r)).e,a=(c=g(e.c)).length,1==n||2==n&&(t<=s||s<=B)){for(;a<t;c+="0",a++);c=w(c,s)}else if(t-=o,c=v(c,s,"0"),s+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=s-a)>0)for(s+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function J(e,t){for(var r,n=1,i=new V(e[0]);n<e.length;n++){if(!(r=new V(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function H(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*u-1)>M?e.c=e.e=null:r<U?e.c=[e.e=0]:(e.e=r,e.c=t),e}function $(e,t,r,n){var o,a,l,d,f,p,g,m=e.c,y=h;if(m){e:{for(o=1,d=m[0];d>=10;d/=10,o++);if((a=t-o)<0)a+=u,l=t,g=(f=m[p=0])/y[o-l-1]%10|0;else if((p=i((a+1)/u))>=m.length){if(!n)break e;for(;m.length<=p;m.push(0));f=g=0,o=1,l=(a%=u)-u+1}else{for(f=d=m[p],o=1;d>=10;d/=10,o++);g=(l=(a%=u)-u+o)<0?0:f/y[o-l-1]%10|0}if(n=n||t<0||null!=m[p+1]||(l<0?f:f%y[o-l-1]),n=r<4?(g||n)&&(0==r||r==(e.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(a>0?l>0?f/y[o-l]:0:m[p-1])%10&1||r==(e.s<0?8:7)),t<1||!m[0])return m.length=0,n?(t-=e.e+1,m[0]=y[(u-t%u)%u],e.e=-t||0):m[0]=e.e=0,e;if(0==a?(m.length=p,d=1,p--):(m.length=p+1,d=y[u-a],m[p]=l>0?s(f/y[o-l]%y[l])*d:0),n)for(;;){if(0==p){for(a=1,l=m[0];l>=10;l/=10,a++);for(l=m[0]+=d,d=1;l>=10;l/=10,d++);a!=d&&(e.e++,m[0]==c&&(m[0]=1));break}if(m[p]+=d,m[p]!=c)break;m[p--]=0,d=1}for(a=m.length;0===m[--a];m.pop());}e.e>M?e.c=e.e=null:e.e<U&&(e.c=[e.e=0])}return e}function G(e){var t,r=e.e;return null===r?e.toString():(t=g(e.c),t=r<=B||r>=N?w(t,r):v(t,r,"0"),e.s<0?"-"+t:t)}return V.clone=e,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(o+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(r=e[t],0,f,t),O=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(r=e[t],0,8,t),D=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(y(r[0],-f,0,t),y(r[1],0,f,t),B=r[0],N=r[1]):(y(r,-f,f,t),B=-(N=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)y(r[0],-f,-1,t),y(r[1],1,f,t),U=r[0],M=r[1];else{if(y(r,-f,f,t),!r)throw Error(o+t+" cannot be zero: "+r);U=-(M=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(o+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw j=!r,Error(o+"crypto unavailable");j=r}else j=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(y(r=e[t],0,9,t),L=r),e.hasOwnProperty(t="POW_PRECISION")&&(y(r=e[t],0,f,t),F=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(o+t+" not an object: "+r);W=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(o+t+" invalid: "+r);K="0123456789"==r.slice(0,10),q=r}}return{DECIMAL_PLACES:O,ROUNDING_MODE:D,EXPONENTIAL_AT:[B,N],RANGE:[U,M],CRYPTO:j,MODULO_MODE:L,POW_PRECISION:F,FORMAT:W,ALPHABET:q}},V.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!V.DEBUG)return!0;var t,r,n=e.c,i=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&i>=-f&&i<=f&&i===s(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%u)<1&&(t+=u),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=c||r!==s(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===a||1===a||-1===a))return!0;throw Error(o+"Invalid BigNumber: "+e)},V.maximum=V.max=function(){return J(arguments,R.lt)},V.minimum=V.min=function(){return J(arguments,R.gt)},V.random=(A=9007199254740992,E=Math.random()*A&2097151?function(){return s(Math.random()*A)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,a,c,l=0,d=[],p=new V(C);if(null==e?e=O:y(e,0,f),a=i(e/u),j)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));l<a;)(c=131072*t[l]+(t[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[l]=r[0],t[l+1]=r[1]):(d.push(c%1e14),l+=2);l=a/2}else{if(!crypto.randomBytes)throw j=!1,Error(o+"crypto unavailable");for(t=crypto.randomBytes(a*=7);l<a;)(c=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(d.push(c%1e14),l+=7);l=a/7}if(!j)for(;l<a;)(c=E())<9e15&&(d[l++]=c%1e14);for(a=d[--l],e%=u,a&&e&&(c=h[u-e],d[l]=s(a/c)*c);0===d[l];d.pop(),l--);if(l<0)d=[n=0];else{for(n=-1;0===d[0];d.splice(0,1),n-=u);for(l=1,c=d[0];c>=10;c/=10,l++);l<u&&(n-=u-l)}return p.e=n,p.c=d,p}),V.sum=function(){for(var e=1,t=arguments,r=new V(t[0]);e<t.length;)r=r.plus(t[e++]);return r},S=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,o=[0],a=0,c=e.length;a<c;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,a){var c,u,l,h,d,f,p,m,y=n.indexOf("."),b=O,w=D;for(y>=0&&(h=F,F=0,n=n.replace(".",""),f=(m=new V(i)).pow(n.length-y),F=h,m.c=t(v(g(f.c),f.e,"0"),10,s,e),m.e=m.c.length),l=h=(p=t(n,i,s,a?(c=q,e):(c=e,q))).length;0==p[--h];p.pop());if(!p[0])return c.charAt(0);if(y<0?--l:(f.c=p,f.e=l,f.s=o,p=(f=r(f,m,b,w,s)).c,d=f.r,l=f.e),y=p[u=l+b+1],h=s/2,d=d||u<0||null!=p[u+1],d=w<4?(null!=y||d)&&(0==w||w==(f.s<0?3:2)):y>h||y==h&&(4==w||d||6==w&&1&p[u-1]||w==(f.s<0?8:7)),u<1||!p[0])n=d?v(c.charAt(1),-b,c.charAt(0)):c.charAt(0);else{if(p.length=u,d)for(--s;++p[--u]>s;)p[u]=0,u||(++l,p=[1].concat(p));for(h=p.length;!p[--h];);for(y=0,n="";y<=h;n+=c.charAt(p[y++]));n=v(n,l,c.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,s,o,a=0,c=e.length,u=t%d,l=t/d|0;for(e=e.slice();c--;)a=((i=u*(s=e[c]%d)+(n=l*s+(o=e[c]/d|0)*u)%d*d+a)/r|0)+(n/d|0)+l*o,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,a,l){var h,d,f,g,m,y,b,w,v,S,_,A,E,x,k,T,I,P=n.s==i.s?1:-1,R=n.c,C=i.c;if(!(R&&R[0]&&C&&C[0]))return new V(n.s&&i.s&&(R?!C||R[0]!=C[0]:C)?R&&0==R[0]||!C?0*P:P/0:NaN);for(v=(w=new V(P)).c=[],P=o+(d=n.e-i.e)+1,l||(l=c,d=p(n.e/u)-p(i.e/u),P=P/u|0),f=0;C[f]==(R[f]||0);f++);if(C[f]>(R[f]||0)&&d--,P<0)v.push(1),g=!0;else{for(x=R.length,T=C.length,f=0,P+=2,(m=s(l/(C[0]+1)))>1&&(C=e(C,m,l),R=e(R,m,l),T=C.length,x=R.length),E=T,_=(S=R.slice(0,T)).length;_<T;S[_++]=0);I=C.slice(),I=[0].concat(I),k=C[0],C[1]>=l/2&&k++;do{if(m=0,(h=t(C,S,T,_))<0){if(A=S[0],T!=_&&(A=A*l+(S[1]||0)),(m=s(A/k))>1)for(m>=l&&(m=l-1),b=(y=e(C,m,l)).length,_=S.length;1==t(y,S,b,_);)m--,r(y,T<b?I:C,b,l),b=y.length,h=1;else 0==m&&(h=m=1),b=(y=C.slice()).length;if(b<_&&(y=[0].concat(y)),r(S,y,_,l),_=S.length,-1==h)for(;t(C,S,T,_)<1;)m++,r(S,T<_?I:C,_,l),_=S.length}else 0===h&&(m++,S=[0]);v[f++]=m,S[0]?S[_++]=R[E]||0:(S=[R[E]],_=1)}while((E++<x||null!=S[0])&&P--);g=null!=S[0],v[0]||v.splice(0,1)}if(l==c){for(f=1,P=v[0];P>=10;P/=10,f++);$(w,o+(w.e=f+d*u-1)+1,a,g)}else w.e=d,w.r=+g;return w}}(),x=/^(-?)0([xbo])(?=\w[\w.]*$)/i,k=/^([^.]+)\.$/,T=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g,_=function(e,t,r,n){var i,s=r?t:t.replace(P,"");if(I.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(x,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(k,"$1").replace(T,"0.$1")),t!=s))return new V(s,i);if(V.DEBUG)throw Error(o+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},R.absoluteValue=R.abs=function(){var e=new V(this);return e.s<0&&(e.s=1),e},R.comparedTo=function(e,t){return m(this,new V(e,t))},R.decimalPlaces=R.dp=function(e,t){var r,n,i,s=this;if(null!=e)return y(e,0,f),null==t?t=D:y(t,0,8),$(new V(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-p(this.e/u))*u,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},R.dividedBy=R.div=function(e,t){return r(this,new V(e,t),O,D)},R.dividedToIntegerBy=R.idiv=function(e,t){return r(this,new V(e,t),0,1)},R.exponentiatedBy=R.pow=function(e,t){var r,n,a,c,l,h,d,f,p=this;if((e=new V(e)).c&&!e.isInteger())throw Error(o+"Exponent not an integer: "+G(e));if(null!=t&&(t=new V(t)),l=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return f=new V(Math.pow(+G(p),l?e.s*(2-b(e)):+G(e))),t?f.mod(t):f;if(h=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new V(NaN);(n=!h&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||l&&p.c[1]>=24e7:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return c=p.s<0&&b(e)?-0:0,p.e>-1&&(c=1/c),new V(h?1/c:c);F&&(c=i(F/u+2))}for(l?(r=new V(.5),h&&(e.s=1),d=b(e)):d=(a=Math.abs(+G(e)))%2,f=new V(C);;){if(d){if(!(f=f.times(p)).c)break;c?f.c.length>c&&(f.c.length=c):n&&(f=f.mod(t))}if(a){if(0===(a=s(a/2)))break;d=a%2}else if($(e=e.times(r),e.e+1,1),e.e>14)d=b(e);else{if(0===(a=+G(e)))break;d=a%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):n&&(p=p.mod(t))}return n?f:(h&&(f=C.div(f)),t?f.mod(t):c?$(f,F,D,undefined):f)},R.integerValue=function(e){var t=new V(this);return null==e?e=D:y(e,0,8),$(t,t.e+1,e)},R.isEqualTo=R.eq=function(e,t){return 0===m(this,new V(e,t))},R.isFinite=function(){return!!this.c},R.isGreaterThan=R.gt=function(e,t){return m(this,new V(e,t))>0},R.isGreaterThanOrEqualTo=R.gte=function(e,t){return 1===(t=m(this,new V(e,t)))||0===t},R.isInteger=function(){return!!this.c&&p(this.e/u)>this.c.length-2},R.isLessThan=R.lt=function(e,t){return m(this,new V(e,t))<0},R.isLessThanOrEqualTo=R.lte=function(e,t){return-1===(t=m(this,new V(e,t)))||0===t},R.isNaN=function(){return!this.s},R.isNegative=function(){return this.s<0},R.isPositive=function(){return this.s>0},R.isZero=function(){return!!this.c&&0==this.c[0]},R.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(t=(e=new V(e,t)).s,!a||!t)return new V(NaN);if(a!=t)return e.s=-t,o.plus(e);var l=o.e/u,h=e.e/u,d=o.c,f=e.c;if(!l||!h){if(!d||!f)return d?(e.s=-t,e):new V(f?o:NaN);if(!d[0]||!f[0])return f[0]?(e.s=-t,e):new V(d[0]?o:3==D?-0:0)}if(l=p(l),h=p(h),d=d.slice(),a=l-h){for((s=a<0)?(a=-a,i=d):(h=l,i=f),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=d.length)<(t=f.length))?a:t,a=t=0;t<n;t++)if(d[t]!=f[t]){s=d[t]<f[t];break}if(s&&(i=d,d=f,f=i,e.s=-e.s),(t=(n=f.length)-(r=d.length))>0)for(;t--;d[r++]=0);for(t=c-1;n>a;){if(d[--n]<f[n]){for(r=n;r&&!d[--r];d[r]=t);--d[r],d[n]+=c}d[n]-=f[n]}for(;0==d[0];d.splice(0,1),--h);return d[0]?H(e,d,h):(e.s=3==D?-1:1,e.c=[e.e=0],e)},R.modulo=R.mod=function(e,t){var n,i,s=this;return e=new V(e,t),!s.c||!e.s||e.c&&!e.c[0]?new V(NaN):!e.c||s.c&&!s.c[0]?new V(s):(9==L?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,L),(e=s.minus(n.times(e))).c[0]||1!=L||(e.s=s.s),e)},R.multipliedBy=R.times=function(e,t){var r,n,i,s,o,a,l,h,f,g,m,y,b,w,v,S=this,_=S.c,A=(e=new V(e,t)).c;if(!(_&&A&&_[0]&&A[0]))return!S.s||!e.s||_&&!_[0]&&!A||A&&!A[0]&&!_?e.c=e.e=e.s=null:(e.s*=S.s,_&&A?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=p(S.e/u)+p(e.e/u),e.s*=S.s,(l=_.length)<(g=A.length)&&(b=_,_=A,A=b,i=l,l=g,g=i),i=l+g,b=[];i--;b.push(0));for(w=c,v=d,i=g;--i>=0;){for(r=0,m=A[i]%v,y=A[i]/v|0,s=i+(o=l);s>i;)r=((h=m*(h=_[--o]%v)+(a=y*h+(f=_[o]/v|0)*m)%v*v+b[s]+r)/w|0)+(a/v|0)+y*f,b[s--]=h%w;b[s]=r}return r?++n:b.splice(0,1),H(e,b,n)},R.negated=function(){var e=new V(this);return e.s=-e.s||null,e},R.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new V(e,t)).s,!i||!t)return new V(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/u,o=e.e/u,a=n.c,l=e.c;if(!s||!o){if(!a||!l)return new V(i/0);if(!a[0]||!l[0])return l[0]?e:new V(a[0]?n:0*i)}if(s=p(s),o=p(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=l):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=l.length)<0&&(r=l,l=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+l[t]+i)/c|0,a[t]=c===a[t]?0:a[t]%c;return i&&(a=[i].concat(a),++o),H(e,a,o)},R.precision=R.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return y(e,1,f),null==t?t=D:y(t,0,8),$(new V(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*u+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},R.shiftedBy=function(e){return y(e,-9007199254740991,l),this.times("1e"+e)},R.squareRoot=R.sqrt=function(){var e,t,n,i,s,o=this,a=o.c,c=o.s,u=o.e,l=O+4,h=new V("0.5");if(1!==c||!a||!a[0])return new V(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(c=Math.sqrt(+G(o)))||c==1/0?(((t=g(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=p((u+1)/2)-(u<0||u%2),n=new V(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):n=new V(c+""),n.c[0])for((c=(u=n.e)+l)<3&&(c=0);;)if(s=n,n=h.times(s.plus(r(o,s,l,1))),g(s.c).slice(0,c)===(t=g(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||($(n,n.e+O+2,1),e=!n.times(n).eq(o));break}if(!i&&($(s,s.e+O+2,0),s.times(s).eq(o))){n=s;break}l+=4,c+=4,i=1}return $(n,n.e+O+1,D,e)},R.toExponential=function(e,t){return null!=e&&(y(e,0,f),e++),z(this,e,t,1)},R.toFixed=function(e,t){return null!=e&&(y(e,0,f),e=e+this.e+1),z(this,e,t)},R.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=W;else if("object"!=typeof r)throw Error(o+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,a=n.split("."),c=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",h=a[0],d=a[1],f=i.s<0,p=f?h.slice(1):h,g=p.length;if(u&&(s=c,c=u,u=s,g-=s),c>0&&g>0){for(s=g%c||c,h=p.substr(0,s);s<g;s+=c)h+=l+p.substr(s,c);u>0&&(h+=l+p.slice(s)),f&&(h="-"+h)}n=d?h+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?d.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):h}return(r.prefix||"")+n+(r.suffix||"")},R.toFraction=function(e){var t,n,i,s,a,c,l,d,f,p,m,y,b=this,w=b.c;if(null!=e&&(!(l=new V(e)).isInteger()&&(l.c||1!==l.s)||l.lt(C)))throw Error(o+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+G(l));if(!w)return new V(b);for(t=new V(C),f=n=new V(C),i=d=new V(C),y=g(w),a=t.e=y.length-b.e-1,t.c[0]=h[(c=a%u)<0?u+c:c],e=!e||l.comparedTo(t)>0?a>0?t:f:l,c=M,M=1/0,l=new V(y),d.c[0]=0;p=r(l,t,0,1),1!=(s=n.plus(p.times(i))).comparedTo(e);)n=i,i=s,f=d.plus(p.times(s=f)),d=s,t=l.minus(p.times(s=t)),l=s;return s=r(e.minus(n),i,0,1),d=d.plus(s.times(f)),n=n.plus(s.times(i)),d.s=f.s=b.s,m=r(f,i,a*=2,D).minus(b).abs().comparedTo(r(d,n,a,D).minus(b).abs())<1?[f,i]:[d,n],M=c,m},R.toNumber=function(){return+G(this)},R.toPrecision=function(e,t){return null!=e&&y(e,1,f),z(this,e,t,2)},R.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=B||i>=N?w(g(r.c),i):v(g(r.c),i,"0"):10===e&&K?t=v(g((r=$(new V(r),O+i+1,D)).c),r.e,"0"):(y(e,2,q.length,"Base"),t=S(v(g(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},R.valueOf=R.toJSON=function(){return G(this)},R._isBigNumber=!0,R[Symbol.toStringTag]="BigNumber",R[Symbol.for("nodejs.util.inspect.custom")]=R.valueOf,null!=t&&V.set(t),V})()},19148:function(e,t,r){"use strict";const{AbstractLevel:n}=r(75e3),i=r(20266),s=r(5372),{fromCallback:o}=r(78100),{Iterator:a}=r(26296),c=r(5222),u=r(23452),l=r(97766),h="level-js-",d=Symbol("idb"),f=Symbol("namePrefix"),p=Symbol("location"),g=Symbol("version"),m=Symbol("store"),y=Symbol("onComplete"),b=Symbol("promise");class w extends n{constructor(e,t,r){if("function"==typeof t||"function"==typeof r)throw new i("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:n,version:s,...o}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),"string"!=typeof e)throw new Error("constructor requires a location string argument");this[p]=e,this[f]=null==n?h:n,this[g]=parseInt(s||1,10),this[d]=null}get location(){return this[p]}get namePrefix(){return this[f]}get version(){return this[g]}get db(){return this[d]}get type(){return"browser-level"}_open(e,t){const r=indexedDB.open(this[f]+this[p],this[g]);r.onerror=function(){t(r.error||new Error("unknown error"))},r.onsuccess=()=>{this[d]=r.result,t()},r.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this[p])||t.createObjectStore(this[p])}}[m](e){return this[d].transaction([this[p]],e).objectStore(this[p])}[y](e,t){const r=e.transaction;r.onabort=function(){t(r.error||new Error("aborted by user"))},r.oncomplete=function(){t(null,e.result)}}_get(e,t,r){const n=this[m]("readonly");let s;try{s=n.get(e)}catch(e){return this.nextTick(r,e)}this[y](s,(function(e,t){return e?r(e):void 0===t?r(new i("Entry not found",{code:"LEVEL_NOT_FOUND"})):void r(null,c(t))}))}_getMany(e,t,r){const n=this[m]("readonly"),i=e.map((e=>t=>{let r;try{r=n.get(e)}catch(e){return t(e)}r.onsuccess=()=>{const e=r.result;t(null,void 0===e?e:c(e))},r.onerror=e=>{e.stopPropagation(),t(r.error)}}));s(i,16,r)}_del(e,t,r){const n=this[m]("readwrite");let i;try{i=n.delete(e)}catch(e){return this.nextTick(r,e)}this[y](i,r)}_put(e,t,r,n){const i=this[m]("readwrite");let s;try{s=i.put(t,e)}catch(e){return this.nextTick(n,e)}this[y](s,n)}_iterator(e){return new a(this,this[p],e)}_batch(e,t,r){const n=this[m]("readwrite"),i=n.transaction;let s,o=0;i.onabort=function(){r(s||i.error||new Error("aborted by user"))},i.oncomplete=function(){r()},function t(){const r=e[o++],a=r.key;let c;try{c="del"===r.type?n.delete(a):n.put(r.value,a)}catch(e){return s=e,void i.abort()}o<e.length?c.onsuccess=t:"function"==typeof i.commit&&i.commit()}()}_clear(e,t){let r,n;try{r=l(e)}catch(e){return this.nextTick(t)}if(e.limit>=0)return u(this,this[p],r,e,t);try{const e=this[m]("readwrite");n=r?e.delete(r):e.clear()}catch(e){return this.nextTick(t,e)}this[y](n,t)}_close(e){this[d].close(),this.nextTick(e)}}w.destroy=function(e,t,r){"function"==typeof t&&(r=t,t=h),r=o(r,b);const n=indexedDB.deleteDatabase(t+e);return n.onsuccess=function(){r()},n.onerror=function(e){r(e)},r[b]},t.BrowserLevel=w},26296:function(e,t,r){"use strict";const{AbstractIterator:n}=r(75e3),i=r(97766),s=r(5222),o=Symbol("cache"),a=Symbol("finished"),c=Symbol("options"),u=Symbol("currentOptions"),l=Symbol("position"),h=Symbol("location"),d=Symbol("first"),f={};function p(e){"function"==typeof e.commit&&e.commit()}t.Iterator=class extends n{constructor(e,t,r){super(e,r),this[o]=[],this[a]=0===this.limit,this[c]=r,this[u]={...r},this[l]=void 0,this[h]=t,this[d]=!0}_nextv(e,t,r){if(this[d]=!1,this[a])return this.nextTick(r,null,[]);if(this[o].length>0)return e=Math.min(e,this[o].length),this.nextTick(r,null,this[o].splice(0,e));let n;void 0!==this[l]&&(this[c].reverse?(this[u].lt=this[l],this[u].lte=void 0):(this[u].gt=this[l],this[u].gte=void 0));try{n=i(this[u])}catch(e){return this[a]=!0,this.nextTick(r,null,[])}const f=this.db.db.transaction([this[h]],"readonly"),g=f.objectStore(this[h]),m=[];if(this[c].reverse){g[!this[c].values&&g.openKeyCursor?"openKeyCursor":"openCursor"](n,"prev").onsuccess=t=>{const r=t.target.result;if(r){const{key:t,value:n}=r;this[l]=t,m.push([this[c].keys&&void 0!==t?s(t):void 0,this[c].values&&void 0!==n?s(n):void 0]),m.length<e?r.continue():p(f)}else this[a]=!0}}else{let t,r;const i=()=>{if(void 0===t||void 0===r)return;const n=Math.max(t.length,r.length);0===n||e===1/0?this[a]=!0:this[l]=t[n-1],m.length=n;for(let e=0;e<n;e++){const n=t[e],i=r[e];m[e]=[this[c].keys&&void 0!==n?s(n):void 0,this[c].values&&void 0!==i?s(i):void 0]}p(f)};this[c].keys||e<1/0?g.getAllKeys(n,e<1/0?e:void 0).onsuccess=e=>{t=e.target.result,i()}:(t=[],this.nextTick(i)),this[c].values?g.getAll(n,e<1/0?e:void 0).onsuccess=e=>{r=e.target.result,i()}:(r=[],this.nextTick(i))}f.onabort=()=>{r(f.error||new Error("aborted by user")),r=null},f.oncomplete=()=>{r(null,m),r=null}}_next(e){if(this[o].length>0){const[t,r]=this[o].shift();this.nextTick(e,null,t,r)}else if(this[a])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[d]&&(this[d]=!1,t=1),this._nextv(t,f,((t,r)=>{if(t)return e(t);this[o]=r,this._next(e)}))}}_all(e,t){this[d]=!1;const r=this[o].splice(0,this[o].length),n=this.limit-this.count-r.length;if(n<=0)return this.nextTick(t,null,r);this._nextv(n,f,((e,n)=>{if(e)return t(e);r.length>0&&(n=r.concat(n)),t(null,n)}))}_seek(e,t){let r;this[d]=!0,this[o]=[],this[a]=!1,this[l]=void 0,this[u]={...this[c]};try{r=i(this[c])}catch(e){return void(this[a]=!0)}null===r||r.includes(e)?this[c].reverse?this[u].lte=e:this[u].gte=e:this[a]=!0}}},23452:function(e){"use strict";e.exports=function(e,t,r,n,i){if(0===n.limit)return e.nextTick(i);const s=e.db.transaction([t],"readwrite"),o=s.objectStore(t);let a=0;s.oncomplete=function(){i()},s.onabort=function(){i(s.error||new Error("aborted by user"))};const c=o.openKeyCursor?"openKeyCursor":"openCursor",u=n.reverse?"prev":"next";o[c](r,u).onsuccess=function(e){const t=e.target.result;t&&(o.delete(t.key).onsuccess=function(){(n.limit<=0||++a<n.limit)&&t.continue()})}}},5222:function(e){"use strict";const t=new TextEncoder;e.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):t.encode(e)}},97766:function(e){"use strict";e.exports=function(e){const t=void 0!==e.gte?e.gte:void 0!==e.gt?e.gt:void 0,r=void 0!==e.lte?e.lte:void 0!==e.lt?e.lt:void 0,n=void 0===e.gte,i=void 0===e.lte;return void 0!==t&&void 0!==r?IDBKeyRange.bound(t,r,n,i):void 0!==t?IDBKeyRange.lowerBound(t,n):void 0!==r?IDBKeyRange.upperBound(r,i):null}},48287:function(e,t,r){"use strict";var n=r(96763),i=r(67526),s=r(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50;var a=2147483647;function c(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|m(e,t),n=c(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(q(e,Uint8Array)){var t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(q(e,ArrayBuffer)||e&&q(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(q(e,SharedArrayBuffer)||e&&q(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);var i=function(e){if(u.isBuffer(e)){var t=0|g(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||K(e.length)?c(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return h(e),c(e<0?0:0|g(e))}function f(e){for(var t=e.length<0?0:0|g(e.length),r=c(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function g(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(i)return n?-1:L(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){var s,o=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===c)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){for(var h=!0,d=0;d<c;d++)if(u(e,s+d)!==u(t,d)){h=!1;break}if(h)return s}return-1}function S(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(K(a))return o;e[r+o]=a}return o}function _(e,t,r,n){return W(L(t,e.length-r),e,r,n)}function A(e,t,r,n){return W(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function E(e,t,r,n){return W(F(t),e,r,n)}function x(e,t,r,n){return W(function(e,t){for(var r,n,i,s=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,c,u=e[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(l=u);break;case 2:128==(192&(s=e[i+1]))&&(c=(31&u)<<6|63&s)>127&&(l=c);break;case 3:s=e[i+1],o=e[i+2],128==(192&s)&&128==(192&o)&&(c=(15&u)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(c=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}(n)}t.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||void 0===n||"function"!=typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return h(e),e<=0?c(e):void 0!==t?"string"==typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}(e,t,r)},u.allocUnsafe=function(e){return d(e)},u.allocUnsafeSlow=function(e){return d(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(q(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),q(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(q(s,Uint8Array))i+s.length>n.length?u.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else{if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i)}i+=s.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(q(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(s,o),c=this.slice(n,i),l=e.slice(t,r),h=0;h<a;++h)if(c[h]!==l[h]){s=c[h],o=l[h];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return S(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return A(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=V[e[s]];return i}function O(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,n,i){return t=+t,r>>>=0,i||N(e,0,r,4),s.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,i){return t=+t,r>>>=0,i||N(e,0,r,8),s.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),s.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),s.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),s.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),s.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||B(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||B(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);B(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);B(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var o=u.isBuffer(e)?e:u.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var j=/[^+/0-9A-Za-z-_]/g;function L(e,t){var r;t=t||1/0;for(var n=e.length,i=null,s=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function F(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}var V=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},25508:function(e){"use strict";e.exports=function(e,t){if("string"==typeof e)return o(e);if("number"==typeof e)return s(e,t);return null},e.exports.format=s,e.exports.parse=o;var t=/\B(?=(\d{3})+(?!\d))/g,r=/(?:\.0*|(\.[^0]+)0+)$/,n={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function s(e,i){if(!Number.isFinite(e))return null;var s=Math.abs(e),o=i&&i.thousandsSeparator||"",a=i&&i.unitSeparator||"",c=i&&void 0!==i.decimalPlaces?i.decimalPlaces:2,u=Boolean(i&&i.fixedDecimals),l=i&&i.unit||"";l&&n[l.toLowerCase()]||(l=s>=n.pb?"PB":s>=n.tb?"TB":s>=n.gb?"GB":s>=n.mb?"MB":s>=n.kb?"KB":"B");var h=(e/n[l.toLowerCase()]).toFixed(c);return u||(h=h.replace(r,"$1")),o&&(h=h.split(".").map((function(e,r){return 0===r?e.replace(t,o):e})).join(".")),h+a+l}function o(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,r=i.exec(e),s="b";return r?(t=parseFloat(r[1]),s=r[4].toLowerCase()):(t=parseInt(e,10),s="b"),isNaN(t)?null:Math.floor(n[s]*t)}},78100:function(e,t,r){"use strict";var n=r(50844);t.fromCallback=function(e,t){if(void 0===e){var r=new Promise((function(t,r){e=function(e,n){e?r(e):t(n)}}));e[void 0!==t?t:"promise"]=r}else if("function"!=typeof e)throw new TypeError("Callback must be a function");return e},t.fromPromise=function(e,t){if(void 0===t)return e;e.then((function(e){n((()=>t(null,e)))})).catch((function(e){n((()=>t(e)))}))}},50844:function(e){e.exports="function"==typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e)},29017:function(e,t,r){"use strict";r.d(t,{A2:function(){return o},BX:function(){return v},J3:function(){return l},p:function(){return h}});var n=r(96763);const i=Symbol("Comlink.proxy"),s=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.finalizer"),c=Symbol("Comlink.thrown"),u=e=>"object"==typeof e&&null!==e||"function"==typeof e,l=new Map([["proxy",{canHandle:e=>u(e)&&e[i],serialize(e){const{port1:t,port2:r}=new MessageChannel;return h(e,t),[r,[r]]},deserialize(e){return e.start(),y(e,[],t);var t}}],["throw",{canHandle:e=>u(e)&&c in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function h(e,t=globalThis,r=["*"]){t.addEventListener("message",(function i(s){if(!s||!s.data)return;if(!function(e,t){for(const r of e){if(t===r||"*"===r)return!0;if(r instanceof RegExp&&r.test(t))return!0}return!1}(r,s.origin))return void n.warn(`Invalid origin '${s.origin}' for comlink proxy`);const{id:o,type:u,path:l}=Object.assign({path:[]},s.data),f=(s.data.argumentList||[]).map(_);let p;try{const t=l.slice(0,-1).reduce(((e,t)=>e[t]),e),r=l.reduce(((e,t)=>e[t]),e);switch(u){case"GET":p=r;break;case"SET":t[l.slice(-1)[0]]=_(s.data.value),p=!0;break;case"APPLY":p=r.apply(t,f);break;case"CONSTRUCT":p=v(new r(...f));break;case"ENDPOINT":{const{port1:t,port2:r}=new MessageChannel;h(e,r),p=function(e,t){return w.set(e,t),e}(t,[t])}break;case"RELEASE":p=void 0;break;default:return}}catch(e){p={value:e,[c]:0}}Promise.resolve(p).catch((e=>({value:e,[c]:0}))).then((r=>{const[n,s]=S(r);t.postMessage(Object.assign(Object.assign({},n),{id:o}),s),"RELEASE"===u&&(t.removeEventListener("message",i),d(t),a in e&&"function"==typeof e[a]&&e[a]())})).catch((e=>{const[r,n]=S({value:new TypeError("Unserializable return value"),[c]:0});t.postMessage(Object.assign(Object.assign({},r),{id:o}),n)}))})),t.start&&t.start()}function d(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function f(e){if(e)throw new Error("Proxy has been released and is not useable")}function p(e){return A(e,{type:"RELEASE"}).then((()=>{d(e)}))}const g=new WeakMap,m="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(g.get(e)||0)-1;g.set(e,t),0===t&&p(e)}));function y(e,t=[],r=function(){}){let n=!1;const i=new Proxy(r,{get(r,s){if(f(n),s===o)return()=>{!function(e){m&&m.unregister(e)}(i),p(e),n=!0};if("then"===s){if(0===t.length)return{then:()=>i};const r=A(e,{type:"GET",path:t.map((e=>e.toString()))}).then(_);return r.then.bind(r)}return y(e,[...t,s])},set(r,i,s){f(n);const[o,a]=S(s);return A(e,{type:"SET",path:[...t,i].map((e=>e.toString())),value:o},a).then(_)},apply(r,i,o){f(n);const a=t[t.length-1];if(a===s)return A(e,{type:"ENDPOINT"}).then(_);if("bind"===a)return y(e,t.slice(0,-1));const[c,u]=b(o);return A(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:c},u).then(_)},construct(r,i){f(n);const[s,o]=b(i);return A(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:s},o).then(_)}});return function(e,t){const r=(g.get(t)||0)+1;g.set(t,r),m&&m.register(e,t,e)}(i,e),i}function b(e){const t=e.map(S);return[t.map((e=>e[0])),(r=t.map((e=>e[1])),Array.prototype.concat.apply([],r))];var r}const w=new WeakMap;function v(e){return Object.assign(e,{[i]:!0})}function S(e){for(const[t,r]of l)if(r.canHandle(e)){const[n,i]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},i]}return[{type:"RAW",value:e},w.get(e)||[]]}function _(e){switch(e.type){case"HANDLER":return l.get(e.name).deserialize(e.value);case"RAW":return e.value}}function A(e,t,r){return new Promise((n=>{const i=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(r){r.data&&r.data.id&&r.data.id===i&&(e.removeEventListener("message",t),n(r.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),r)}))}},63191:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TallyParams=t.VotingParams=t.DepositParams=t.Vote=t.TallyResult=t.Proposal=t.Deposit=t.TextProposal=t.WeightedVoteOption=t.proposalStatusToJSON=t.proposalStatusFromJSON=t.ProposalStatus=t.voteOptionToJSON=t.voteOptionFromJSON=t.VoteOption=t.protobufPackage=void 0;const n=r(60617),i=r(8890),s=r(12708),o=r(1082),a=r(50287),c=r(42825);var u,l;function h(e){switch(e){case 0:case"VOTE_OPTION_UNSPECIFIED":return u.VOTE_OPTION_UNSPECIFIED;case 1:case"VOTE_OPTION_YES":return u.VOTE_OPTION_YES;case 2:case"VOTE_OPTION_ABSTAIN":return u.VOTE_OPTION_ABSTAIN;case 3:case"VOTE_OPTION_NO":return u.VOTE_OPTION_NO;case 4:case"VOTE_OPTION_NO_WITH_VETO":return u.VOTE_OPTION_NO_WITH_VETO;default:return u.UNRECOGNIZED}}function d(e){switch(e){case u.VOTE_OPTION_UNSPECIFIED:return"VOTE_OPTION_UNSPECIFIED";case u.VOTE_OPTION_YES:return"VOTE_OPTION_YES";case u.VOTE_OPTION_ABSTAIN:return"VOTE_OPTION_ABSTAIN";case u.VOTE_OPTION_NO:return"VOTE_OPTION_NO";case u.VOTE_OPTION_NO_WITH_VETO:return"VOTE_OPTION_NO_WITH_VETO";case u.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function f(e){switch(e){case 0:case"PROPOSAL_STATUS_UNSPECIFIED":return l.PROPOSAL_STATUS_UNSPECIFIED;case 1:case"PROPOSAL_STATUS_DEPOSIT_PERIOD":return l.PROPOSAL_STATUS_DEPOSIT_PERIOD;case 2:case"PROPOSAL_STATUS_VOTING_PERIOD":return l.PROPOSAL_STATUS_VOTING_PERIOD;case 3:case"PROPOSAL_STATUS_PASSED":return l.PROPOSAL_STATUS_PASSED;case 4:case"PROPOSAL_STATUS_REJECTED":return l.PROPOSAL_STATUS_REJECTED;case 5:case"PROPOSAL_STATUS_FAILED":return l.PROPOSAL_STATUS_FAILED;default:return l.UNRECOGNIZED}}function p(e){switch(e){case l.PROPOSAL_STATUS_UNSPECIFIED:return"PROPOSAL_STATUS_UNSPECIFIED";case l.PROPOSAL_STATUS_DEPOSIT_PERIOD:return"PROPOSAL_STATUS_DEPOSIT_PERIOD";case l.PROPOSAL_STATUS_VOTING_PERIOD:return"PROPOSAL_STATUS_VOTING_PERIOD";case l.PROPOSAL_STATUS_PASSED:return"PROPOSAL_STATUS_PASSED";case l.PROPOSAL_STATUS_REJECTED:return"PROPOSAL_STATUS_REJECTED";case l.PROPOSAL_STATUS_FAILED:return"PROPOSAL_STATUS_FAILED";case l.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function g(){return{proposalId:BigInt(0),depositor:"",amount:[]}}function m(){return{proposalId:BigInt(0),content:void 0,status:0,finalTallyResult:t.TallyResult.fromPartial({}),submitTime:s.Timestamp.fromPartial({}),depositEndTime:s.Timestamp.fromPartial({}),totalDeposit:[],votingStartTime:s.Timestamp.fromPartial({}),votingEndTime:s.Timestamp.fromPartial({})}}function y(){return{proposalId:BigInt(0),voter:"",option:0,options:[]}}function b(){return{minDeposit:[],maxDepositPeriod:o.Duration.fromPartial({})}}function w(){return{votingPeriod:o.Duration.fromPartial({})}}function v(){return{quorum:new Uint8Array,threshold:new Uint8Array,vetoThreshold:new Uint8Array}}t.protobufPackage="cosmos.gov.v1beta1",function(e){e[e.VOTE_OPTION_UNSPECIFIED=0]="VOTE_OPTION_UNSPECIFIED",e[e.VOTE_OPTION_YES=1]="VOTE_OPTION_YES",e[e.VOTE_OPTION_ABSTAIN=2]="VOTE_OPTION_ABSTAIN",e[e.VOTE_OPTION_NO=3]="VOTE_OPTION_NO",e[e.VOTE_OPTION_NO_WITH_VETO=4]="VOTE_OPTION_NO_WITH_VETO",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(u||(t.VoteOption=u={})),t.voteOptionFromJSON=h,t.voteOptionToJSON=d,function(e){e[e.PROPOSAL_STATUS_UNSPECIFIED=0]="PROPOSAL_STATUS_UNSPECIFIED",e[e.PROPOSAL_STATUS_DEPOSIT_PERIOD=1]="PROPOSAL_STATUS_DEPOSIT_PERIOD",e[e.PROPOSAL_STATUS_VOTING_PERIOD=2]="PROPOSAL_STATUS_VOTING_PERIOD",e[e.PROPOSAL_STATUS_PASSED=3]="PROPOSAL_STATUS_PASSED",e[e.PROPOSAL_STATUS_REJECTED=4]="PROPOSAL_STATUS_REJECTED",e[e.PROPOSAL_STATUS_FAILED=5]="PROPOSAL_STATUS_FAILED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(l||(t.ProposalStatus=l={})),t.proposalStatusFromJSON=f,t.proposalStatusToJSON=p,t.WeightedVoteOption={typeUrl:"/cosmos.gov.v1beta1.WeightedVoteOption",encode:(e,t=a.BinaryWriter.create())=>(0!==e.option&&t.uint32(8).int32(e.option),""!==e.weight&&t.uint32(18).string(e.weight),t),decode(e,t){const r=e instanceof a.BinaryReader?e:new a.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={option:0,weight:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.option=r.int32();break;case 2:i.weight=r.string();break;default:r.skipType(7&e)}}return i},fromJSON(e){const t={option:0,weight:""};return(0,c.isSet)(e.option)&&(t.option=h(e.option)),(0,c.isSet)(e.weight)&&(t.weight=String(e.weight)),t},toJSON(e){const t={};return void 0!==e.option&&(t.option=d(e.option)),void 0!==e.weight&&(t.weight=e.weight),t},fromPartial(e){const t={option:0,weight:""};return t.option=e.option??0,t.weight=e.weight??"",t}},t.TextProposal={typeUrl:"/cosmos.gov.v1beta1.TextProposal",encode:(e,t=a.BinaryWriter.create())=>(""!==e.title&&t.uint32(10).string(e.title),""!==e.description&&t.uint32(18).string(e.description),t),decode(e,t){const r=e instanceof a.BinaryReader?e:new a.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={title:"",description:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.title=r.string();break;case 2:i.description=r.string();break;default:r.skipType(7&e)}}return i},fromJSON(e){const t={title:"",description:""};return(0,c.isSet)(e.title)&&(t.title=String(e.title)),(0,c.isSet)(e.description)&&(t.description=String(e.description)),t},toJSON(e){const t={};return void 0!==e.title&&(t.title=e.title),void 0!==e.description&&(t.description=e.description),t},fromPartial(e){const t={title:"",description:""};return t.title=e.title??"",t.description=e.description??"",t}},t.Deposit={typeUrl:"/cosmos.gov.v1beta1.Deposit",encode(e,t=a.BinaryWriter.create()){e.proposalId!==BigInt(0)&&t.uint32(8).uint64(e.proposalId),""!==e.depositor&&t.uint32(18).string(e.depositor);for(const r of e.amount)n.Coin.encode(r,t.uint32(26).fork()).ldelim();return t},decode(e,t){const r=e instanceof a.BinaryReader?e:new a.BinaryReader(e);let i=void 0===t?r.len:r.pos+t;const s=g();for(;r.pos<i;){const e=r.uint32();switch(e>>>3){case 1:s.proposalId=r.uint64();break;case 2:s.depositor=r.string();break;case 3:s.amount.push(n.Coin.decode(r,r.uint32()));break;default:r.skipType(7&e)}}return s},fromJSON(e){const t=g();return(0,c.isSet)(e.proposalId)&&(t.proposalId=BigInt(e.proposalId.toString())),(0,c.isSet)(e.depositor)&&(t.depositor=String(e.depositor)),Array.isArray(e?.amount)&&(t.amount=e.amount.map((e=>n.Coin.fromJSON(e)))),t},toJSON(e){const t={};return void 0!==e.proposalId&&(t.proposalId=(e.proposalId||BigInt(0)).toString()),void 0!==e.depositor&&(t.depositor=e.depositor),e.amount?t.amount=e.amount.map((e=>e?n.Coin.toJSON(e):void 0)):t.amount=[],t},fromPartial(e){const t=g();return void 0!==e.proposalId&&null!==e.proposalId&&(t.proposalId=BigInt(e.proposalId.toString())),t.depositor=e.depositor??"",t.amount=e.amount?.map((e=>n.Coin.fromPartial(e)))||[],t}},t.Proposal={typeUrl:"/cosmos.gov.v1beta1.Proposal",encode(e,r=a.BinaryWriter.create()){e.proposalId!==BigInt(0)&&r.uint32(8).uint64(e.proposalId),void 0!==e.content&&i.Any.encode(e.content,r.uint32(18).fork()).ldelim(),0!==e.status&&r.uint32(24).int32(e.status),void 0!==e.finalTallyResult&&t.TallyResult.encode(e.finalTallyResult,r.uint32(34).fork()).ldelim(),void 0!==e.submitTime&&s.Timestamp.encode(e.submitTime,r.uint32(42).fork()).ldelim(),void 0!==e.depositEndTime&&s.Timestamp.encode(e.depositEndTime,r.uint32(50).fork()).ldelim();for(const t of e.totalDeposit)n.Coin.encode(t,r.uint32(58).fork()).ldelim();return void 0!==e.votingStartTime&&s.Timestamp.encode(e.votingStartTime,r.uint32(66).fork()).ldelim(),void 0!==e.votingEndTime&&s.Timestamp.encode(e.votingEndTime,r.uint32(74).fork()).ldelim(),r},decode(e,r){const o=e instanceof a.BinaryReader?e:new a.BinaryReader(e);let c=void 0===r?o.len:o.pos+r;const u=m();for(;o.pos<c;){const e=o.uint32();switch(e>>>3){case 1:u.proposalId=o.uint64();break;case 2:u.content=i.Any.decode(o,o.uint32());break;case 3:u.status=o.int32();break;case 4:u.finalTallyResult=t.TallyResult.decode(o,o.uint32());break;case 5:u.submitTime=s.Timestamp.decode(o,o.uint32());break;case 6:u.depositEndTime=s.Timestamp.decode(o,o.uint32());break;case 7:u.totalDeposit.push(n.Coin.decode(o,o.uint32()));break;case 8:u.votingStartTime=s.Timestamp.decode(o,o.uint32());break;case 9:u.votingEndTime=s.Timestamp.decode(o,o.uint32());break;default:o.skipType(7&e)}}return u},fromJSON(e){const r=m();return(0,c.isSet)(e.proposalId)&&(r.proposalId=BigInt(e.proposalId.toString())),(0,c.isSet)(e.content)&&(r.content=i.Any.fromJSON(e.content)),(0,c.isSet)(e.status)&&(r.status=f(e.status)),(0,c.isSet)(e.finalTallyResult)&&(r.finalTallyResult=t.TallyResult.fromJSON(e.finalTallyResult)),(0,c.isSet)(e.submitTime)&&(r.submitTime=(0,c.fromJsonTimestamp)(e.submitTime)),(0,c.isSet)(e.depositEndTime)&&(r.depositEndTime=(0,c.fromJsonTimestamp)(e.depositEndTime)),Array.isArray(e?.totalDeposit)&&(r.totalDeposit=e.totalDeposit.map((e=>n.Coin.fromJSON(e)))),(0,c.isSet)(e.votingStartTime)&&(r.votingStartTime=(0,c.fromJsonTimestamp)(e.votingStartTime)),(0,c.isSet)(e.votingEndTime)&&(r.votingEndTime=(0,c.fromJsonTimestamp)(e.votingEndTime)),r},toJSON(e){const r={};return void 0!==e.proposalId&&(r.proposalId=(e.proposalId||BigInt(0)).toString()),void 0!==e.content&&(r.content=e.content?i.Any.toJSON(e.content):void 0),void 0!==e.status&&(r.status=p(e.status)),void 0!==e.finalTallyResult&&(r.finalTallyResult=e.finalTallyResult?t.TallyResult.toJSON(e.finalTallyResult):void 0),void 0!==e.submitTime&&(r.submitTime=(0,c.fromTimestamp)(e.submitTime).toISOString()),void 0!==e.depositEndTime&&(r.depositEndTime=(0,c.fromTimestamp)(e.depositEndTime).toISOString()),e.totalDeposit?r.totalDeposit=e.totalDeposit.map((e=>e?n.Coin.toJSON(e):void 0)):r.totalDeposit=[],void 0!==e.votingStartTime&&(r.votingStartTime=(0,c.fromTimestamp)(e.votingStartTime).toISOString()),void 0!==e.votingEndTime&&(r.votingEndTime=(0,c.fromTimestamp)(e.votingEndTime).toISOString()),r},fromPartial(e){const r=m();return void 0!==e.proposalId&&null!==e.proposalId&&(r.proposalId=BigInt(e.proposalId.toString())),void 0!==e.content&&null!==e.content&&(r.content=i.Any.fromPartial(e.content)),r.status=e.status??0,void 0!==e.finalTallyResult&&null!==e.finalTallyResult&&(r.finalTallyResult=t.TallyResult.fromPartial(e.finalTallyResult)),void 0!==e.submitTime&&null!==e.submitTime&&(r.submitTime=s.Timestamp.fromPartial(e.submitTime)),void 0!==e.depositEndTime&&null!==e.depositEndTime&&(r.depositEndTime=s.Timestamp.fromPartial(e.depositEndTime)),r.totalDeposit=e.totalDeposit?.map((e=>n.Coin.fromPartial(e)))||[],void 0!==e.votingStartTime&&null!==e.votingStartTime&&(r.votingStartTime=s.Timestamp.fromPartial(e.votingStartTime)),void 0!==e.votingEndTime&&null!==e.votingEndTime&&(r.votingEndTime=s.Timestamp.fromPartial(e.votingEndTime)),r}},t.TallyResult={typeUrl:"/cosmos.gov.v1beta1.TallyResult",encode:(e,t=a.BinaryWriter.create())=>(""!==e.yes&&t.uint32(10).string(e.yes),""!==e.abstain&&t.uint32(18).string(e.abstain),""!==e.no&&t.uint32(26).string(e.no),""!==e.noWithVeto&&t.uint32(34).string(e.noWithVeto),t),decode(e,t){const r=e instanceof a.BinaryReader?e:new a.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={yes:"",abstain:"",no:"",noWithVeto:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.yes=r.string();break;case 2:i.abstain=r.string();break;case 3:i.no=r.string();break;case 4:i.noWithVeto=r.string();break;default:r.skipType(7&e)}}return i},fromJSON(e){const t={yes:"",abstain:"",no:"",noWithVeto:""};return(0,c.isSet)(e.yes)&&(t.yes=String(e.yes)),(0,c.isSet)(e.abstain)&&(t.abstain=String(e.abstain)),(0,c.isSet)(e.no)&&(t.no=String(e.no)),(0,c.isSet)(e.noWithVeto)&&(t.noWithVeto=String(e.noWithVeto)),t},toJSON(e){const t={};return void 0!==e.yes&&(t.yes=e.yes),void 0!==e.abstain&&(t.abstain=e.abstain),void 0!==e.no&&(t.no=e.no),void 0!==e.noWithVeto&&(t.noWithVeto=e.noWithVeto),t},fromPartial(e){const t={yes:"",abstain:"",no:"",noWithVeto:""};return t.yes=e.yes??"",t.abstain=e.abstain??"",t.no=e.no??"",t.noWithVeto=e.noWithVeto??"",t}},t.Vote={typeUrl:"/cosmos.gov.v1beta1.Vote",encode(e,r=a.BinaryWriter.create()){e.proposalId!==BigInt(0)&&r.uint32(8).uint64(e.proposalId),""!==e.voter&&r.uint32(18).string(e.voter),0!==e.option&&r.uint32(24).int32(e.option);for(const n of e.options)t.WeightedVoteOption.encode(n,r.uint32(34).fork()).ldelim();return r},decode(e,r){const n=e instanceof a.BinaryReader?e:new a.BinaryReader(e);let i=void 0===r?n.len:n.pos+r;const s=y();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:s.proposalId=n.uint64();break;case 2:s.voter=n.string();break;case 3:s.option=n.int32();break;case 4:s.options.push(t.WeightedVoteOption.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return s},fromJSON(e){const r=y();return(0,c.isSet)(e.proposalId)&&(r.proposalId=BigInt(e.proposalId.toString())),(0,c.isSet)(e.voter)&&(r.voter=String(e.voter)),(0,c.isSet)(e.option)&&(r.option=h(e.option)),Array.isArray(e?.options)&&(r.options=e.options.map((e=>t.WeightedVoteOption.fromJSON(e)))),r},toJSON(e){const r={};return void 0!==e.proposalId&&(r.proposalId=(e.proposalId||BigInt(0)).toString()),void 0!==e.voter&&(r.voter=e.voter),void 0!==e.option&&(r.option=d(e.option)),e.options?r.options=e.options.map((e=>e?t.WeightedVoteOption.toJSON(e):void 0)):r.options=[],r},fromPartial(e){const r=y();return void 0!==e.proposalId&&null!==e.proposalId&&(r.proposalId=BigInt(e.proposalId.toString())),r.voter=e.voter??"",r.option=e.option??0,r.options=e.options?.map((e=>t.WeightedVoteOption.fromPartial(e)))||[],r}},t.DepositParams={typeUrl:"/cosmos.gov.v1beta1.DepositParams",encode(e,t=a.BinaryWriter.create()){for(const r of e.minDeposit)n.Coin.encode(r,t.uint32(10).fork()).ldelim();return void 0!==e.maxDepositPeriod&&o.Duration.encode(e.maxDepositPeriod,t.uint32(18).fork()).ldelim(),t},decode(e,t){const r=e instanceof a.BinaryReader?e:new a.BinaryReader(e);let i=void 0===t?r.len:r.pos+t;const s=b();for(;r.pos<i;){const e=r.uint32();switch(e>>>3){case 1:s.minDeposit.push(n.Coin.decode(r,r.uint32()));break;case 2:s.maxDepositPeriod=o.Duration.decode(r,r.uint32());break;default:r.skipType(7&e)}}return s},fromJSON(e){const t=b();return Array.isArray(e?.minDeposit)&&(t.minDeposit=e.minDeposit.map((e=>n.Coin.fromJSON(e)))),(0,c.isSet)(e.maxDepositPeriod)&&(t.maxDepositPeriod=o.Duration.fromJSON(e.maxDepositPeriod)),t},toJSON(e){const t={};return e.minDeposit?t.minDeposit=e.minDeposit.map((e=>e?n.Coin.toJSON(e):void 0)):t.minDeposit=[],void 0!==e.maxDepositPeriod&&(t.maxDepositPeriod=e.maxDepositPeriod?o.Duration.toJSON(e.maxDepositPeriod):void 0),t},fromPartial(e){const t=b();return t.minDeposit=e.minDeposit?.map((e=>n.Coin.fromPartial(e)))||[],void 0!==e.maxDepositPeriod&&null!==e.maxDepositPeriod&&(t.maxDepositPeriod=o.Duration.fromPartial(e.maxDepositPeriod)),t}},t.VotingParams={typeUrl:"/cosmos.gov.v1beta1.VotingParams",encode:(e,t=a.BinaryWriter.create())=>(void 0!==e.votingPeriod&&o.Duration.encode(e.votingPeriod,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof a.BinaryReader?e:new a.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i=w();for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.votingPeriod=o.Duration.decode(r,r.uint32());else r.skipType(7&e)}return i},fromJSON(e){const t=w();return(0,c.isSet)(e.votingPeriod)&&(t.votingPeriod=o.Duration.fromJSON(e.votingPeriod)),t},toJSON(e){const t={};return void 0!==e.votingPeriod&&(t.votingPeriod=e.votingPeriod?o.Duration.toJSON(e.votingPeriod):void 0),t},fromPartial(e){const t=w();return void 0!==e.votingPeriod&&null!==e.votingPeriod&&(t.votingPeriod=o.Duration.fromPartial(e.votingPeriod)),t}},t.TallyParams={typeUrl:"/cosmos.gov.v1beta1.TallyParams",encode:(e,t=a.BinaryWriter.create())=>(0!==e.quorum.length&&t.uint32(10).bytes(e.quorum),0!==e.threshold.length&&t.uint32(18).bytes(e.threshold),0!==e.vetoThreshold.length&&t.uint32(26).bytes(e.vetoThreshold),t),decode(e,t){const r=e instanceof a.BinaryReader?e:new a.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i=v();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.quorum=r.bytes();break;case 2:i.threshold=r.bytes();break;case 3:i.vetoThreshold=r.bytes();break;default:r.skipType(7&e)}}return i},fromJSON(e){const t=v();return(0,c.isSet)(e.quorum)&&(t.quorum=(0,c.bytesFromBase64)(e.quorum)),(0,c.isSet)(e.threshold)&&(t.threshold=(0,c.bytesFromBase64)(e.threshold)),(0,c.isSet)(e.vetoThreshold)&&(t.vetoThreshold=(0,c.bytesFromBase64)(e.vetoThreshold)),t},toJSON(e){const t={};return void 0!==e.quorum&&(t.quorum=(0,c.base64FromBytes)(void 0!==e.quorum?e.quorum:new Uint8Array)),void 0!==e.threshold&&(t.threshold=(0,c.base64FromBytes)(void 0!==e.threshold?e.threshold:new Uint8Array)),void 0!==e.vetoThreshold&&(t.vetoThreshold=(0,c.base64FromBytes)(void 0!==e.vetoThreshold?e.vetoThreshold:new Uint8Array)),t},fromPartial(e){const t=v();return t.quorum=e.quorum??new Uint8Array,t.threshold=e.threshold??new Uint8Array,t.vetoThreshold=e.vetoThreshold??new Uint8Array,t}}},70095:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidatorUpdates=t.Pool=t.RedelegationResponse=t.RedelegationEntryResponse=t.DelegationResponse=t.Params=t.Redelegation=t.RedelegationEntry=t.UnbondingDelegationEntry=t.UnbondingDelegation=t.Delegation=t.DVVTriplets=t.DVVTriplet=t.DVPairs=t.DVPair=t.ValAddresses=t.Validator=t.Description=t.Commission=t.CommissionRates=t.HistoricalInfo=t.infractionToJSON=t.infractionFromJSON=t.Infraction=t.bondStatusToJSON=t.bondStatusFromJSON=t.BondStatus=t.protobufPackage=void 0;const n=r(11068),i=r(12708),s=r(8890),o=r(1082),a=r(60617),c=r(37250),u=r(50287),l=r(42825);var h,d;function f(e){switch(e){case 0:case"BOND_STATUS_UNSPECIFIED":return h.BOND_STATUS_UNSPECIFIED;case 1:case"BOND_STATUS_UNBONDED":return h.BOND_STATUS_UNBONDED;case 2:case"BOND_STATUS_UNBONDING":return h.BOND_STATUS_UNBONDING;case 3:case"BOND_STATUS_BONDED":return h.BOND_STATUS_BONDED;default:return h.UNRECOGNIZED}}function p(e){switch(e){case h.BOND_STATUS_UNSPECIFIED:return"BOND_STATUS_UNSPECIFIED";case h.BOND_STATUS_UNBONDED:return"BOND_STATUS_UNBONDED";case h.BOND_STATUS_UNBONDING:return"BOND_STATUS_UNBONDING";case h.BOND_STATUS_BONDED:return"BOND_STATUS_BONDED";case h.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function g(){return{header:n.Header.fromPartial({}),valset:[]}}function m(){return{commissionRates:t.CommissionRates.fromPartial({}),updateTime:i.Timestamp.fromPartial({})}}function y(){return{operatorAddress:"",consensusPubkey:void 0,jailed:!1,status:0,tokens:"",delegatorShares:"",description:t.Description.fromPartial({}),unbondingHeight:BigInt(0),unbondingTime:i.Timestamp.fromPartial({}),commission:t.Commission.fromPartial({}),minSelfDelegation:"",unbondingOnHoldRefCount:BigInt(0),unbondingIds:[]}}function b(){return{creationHeight:BigInt(0),completionTime:i.Timestamp.fromPartial({}),initialBalance:"",balance:"",unbondingId:BigInt(0),unbondingOnHoldRefCount:BigInt(0)}}function w(){return{creationHeight:BigInt(0),completionTime:i.Timestamp.fromPartial({}),initialBalance:"",sharesDst:"",unbondingId:BigInt(0),unbondingOnHoldRefCount:BigInt(0)}}function v(){return{unbondingTime:o.Duration.fromPartial({}),maxValidators:0,maxEntries:0,historicalEntries:0,bondDenom:"",minCommissionRate:""}}function S(){return{delegation:t.Delegation.fromPartial({}),balance:a.Coin.fromPartial({})}}function _(){return{redelegationEntry:t.RedelegationEntry.fromPartial({}),balance:""}}function A(){return{redelegation:t.Redelegation.fromPartial({}),entries:[]}}t.protobufPackage="cosmos.staking.v1beta1",function(e){e[e.BOND_STATUS_UNSPECIFIED=0]="BOND_STATUS_UNSPECIFIED",e[e.BOND_STATUS_UNBONDED=1]="BOND_STATUS_UNBONDED",e[e.BOND_STATUS_UNBONDING=2]="BOND_STATUS_UNBONDING",e[e.BOND_STATUS_BONDED=3]="BOND_STATUS_BONDED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(h||(t.BondStatus=h={})),t.bondStatusFromJSON=f,t.bondStatusToJSON=p,function(e){e[e.INFRACTION_UNSPECIFIED=0]="INFRACTION_UNSPECIFIED",e[e.INFRACTION_DOUBLE_SIGN=1]="INFRACTION_DOUBLE_SIGN",e[e.INFRACTION_DOWNTIME=2]="INFRACTION_DOWNTIME",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(d||(t.Infraction=d={})),t.infractionFromJSON=function(e){switch(e){case 0:case"INFRACTION_UNSPECIFIED":return d.INFRACTION_UNSPECIFIED;case 1:case"INFRACTION_DOUBLE_SIGN":return d.INFRACTION_DOUBLE_SIGN;case 2:case"INFRACTION_DOWNTIME":return d.INFRACTION_DOWNTIME;default:return d.UNRECOGNIZED}},t.infractionToJSON=function(e){switch(e){case d.INFRACTION_UNSPECIFIED:return"INFRACTION_UNSPECIFIED";case d.INFRACTION_DOUBLE_SIGN:return"INFRACTION_DOUBLE_SIGN";case d.INFRACTION_DOWNTIME:return"INFRACTION_DOWNTIME";case d.UNRECOGNIZED:default:return"UNRECOGNIZED"}},t.HistoricalInfo={typeUrl:"/cosmos.staking.v1beta1.HistoricalInfo",encode(e,r=u.BinaryWriter.create()){void 0!==e.header&&n.Header.encode(e.header,r.uint32(10).fork()).ldelim();for(const n of e.valset)t.Validator.encode(n,r.uint32(18).fork()).ldelim();return r},decode(e,r){const i=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let s=void 0===r?i.len:i.pos+r;const o=g();for(;i.pos<s;){const e=i.uint32();switch(e>>>3){case 1:o.header=n.Header.decode(i,i.uint32());break;case 2:o.valset.push(t.Validator.decode(i,i.uint32()));break;default:i.skipType(7&e)}}return o},fromJSON(e){const r=g();return(0,l.isSet)(e.header)&&(r.header=n.Header.fromJSON(e.header)),Array.isArray(e?.valset)&&(r.valset=e.valset.map((e=>t.Validator.fromJSON(e)))),r},toJSON(e){const r={};return void 0!==e.header&&(r.header=e.header?n.Header.toJSON(e.header):void 0),e.valset?r.valset=e.valset.map((e=>e?t.Validator.toJSON(e):void 0)):r.valset=[],r},fromPartial(e){const r=g();return void 0!==e.header&&null!==e.header&&(r.header=n.Header.fromPartial(e.header)),r.valset=e.valset?.map((e=>t.Validator.fromPartial(e)))||[],r}},t.CommissionRates={typeUrl:"/cosmos.staking.v1beta1.CommissionRates",encode:(e,t=u.BinaryWriter.create())=>(""!==e.rate&&t.uint32(10).string(e.rate),""!==e.maxRate&&t.uint32(18).string(e.maxRate),""!==e.maxChangeRate&&t.uint32(26).string(e.maxChangeRate),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={rate:"",maxRate:"",maxChangeRate:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.rate=r.string();break;case 2:i.maxRate=r.string();break;case 3:i.maxChangeRate=r.string();break;default:r.skipType(7&e)}}return i},fromJSON(e){const t={rate:"",maxRate:"",maxChangeRate:""};return(0,l.isSet)(e.rate)&&(t.rate=String(e.rate)),(0,l.isSet)(e.maxRate)&&(t.maxRate=String(e.maxRate)),(0,l.isSet)(e.maxChangeRate)&&(t.maxChangeRate=String(e.maxChangeRate)),t},toJSON(e){const t={};return void 0!==e.rate&&(t.rate=e.rate),void 0!==e.maxRate&&(t.maxRate=e.maxRate),void 0!==e.maxChangeRate&&(t.maxChangeRate=e.maxChangeRate),t},fromPartial(e){const t={rate:"",maxRate:"",maxChangeRate:""};return t.rate=e.rate??"",t.maxRate=e.maxRate??"",t.maxChangeRate=e.maxChangeRate??"",t}},t.Commission={typeUrl:"/cosmos.staking.v1beta1.Commission",encode:(e,r=u.BinaryWriter.create())=>(void 0!==e.commissionRates&&t.CommissionRates.encode(e.commissionRates,r.uint32(10).fork()).ldelim(),void 0!==e.updateTime&&i.Timestamp.encode(e.updateTime,r.uint32(18).fork()).ldelim(),r),decode(e,r){const n=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let s=void 0===r?n.len:n.pos+r;const o=m();for(;n.pos<s;){const e=n.uint32();switch(e>>>3){case 1:o.commissionRates=t.CommissionRates.decode(n,n.uint32());break;case 2:o.updateTime=i.Timestamp.decode(n,n.uint32());break;default:n.skipType(7&e)}}return o},fromJSON(e){const r=m();return(0,l.isSet)(e.commissionRates)&&(r.commissionRates=t.CommissionRates.fromJSON(e.commissionRates)),(0,l.isSet)(e.updateTime)&&(r.updateTime=(0,l.fromJsonTimestamp)(e.updateTime)),r},toJSON(e){const r={};return void 0!==e.commissionRates&&(r.commissionRates=e.commissionRates?t.CommissionRates.toJSON(e.commissionRates):void 0),void 0!==e.updateTime&&(r.updateTime=(0,l.fromTimestamp)(e.updateTime).toISOString()),r},fromPartial(e){const r=m();return void 0!==e.commissionRates&&null!==e.commissionRates&&(r.commissionRates=t.CommissionRates.fromPartial(e.commissionRates)),void 0!==e.updateTime&&null!==e.updateTime&&(r.updateTime=i.Timestamp.fromPartial(e.updateTime)),r}},t.Description={typeUrl:"/cosmos.staking.v1beta1.Description",encode:(e,t=u.BinaryWriter.create())=>(""!==e.moniker&&t.uint32(10).string(e.moniker),""!==e.identity&&t.uint32(18).string(e.identity),""!==e.website&&t.uint32(26).string(e.website),""!==e.securityContact&&t.uint32(34).string(e.securityContact),""!==e.details&&t.uint32(42).string(e.details),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={moniker:"",identity:"",website:"",securityContact:"",details:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.moniker=r.string();break;case 2:i.identity=r.string();break;case 3:i.website=r.string();break;case 4:i.securityContact=r.string();break;case 5:i.details=r.string();break;default:r.skipType(7&e)}}return i},fromJSON(e){const t={moniker:"",identity:"",website:"",securityContact:"",details:""};return(0,l.isSet)(e.moniker)&&(t.moniker=String(e.moniker)),(0,l.isSet)(e.identity)&&(t.identity=String(e.identity)),(0,l.isSet)(e.website)&&(t.website=String(e.website)),(0,l.isSet)(e.securityContact)&&(t.securityContact=String(e.securityContact)),(0,l.isSet)(e.details)&&(t.details=String(e.details)),t},toJSON(e){const t={};return void 0!==e.moniker&&(t.moniker=e.moniker),void 0!==e.identity&&(t.identity=e.identity),void 0!==e.website&&(t.website=e.website),void 0!==e.securityContact&&(t.securityContact=e.securityContact),void 0!==e.details&&(t.details=e.details),t},fromPartial(e){const t={moniker:"",identity:"",website:"",securityContact:"",details:""};return t.moniker=e.moniker??"",t.identity=e.identity??"",t.website=e.website??"",t.securityContact=e.securityContact??"",t.details=e.details??"",t}},t.Validator={typeUrl:"/cosmos.staking.v1beta1.Validator",encode(e,r=u.BinaryWriter.create()){""!==e.operatorAddress&&r.uint32(10).string(e.operatorAddress),void 0!==e.consensusPubkey&&s.Any.encode(e.consensusPubkey,r.uint32(18).fork()).ldelim(),!0===e.jailed&&r.uint32(24).bool(e.jailed),0!==e.status&&r.uint32(32).int32(e.status),""!==e.tokens&&r.uint32(42).string(e.tokens),""!==e.delegatorShares&&r.uint32(50).string(e.delegatorShares),void 0!==e.description&&t.Description.encode(e.description,r.uint32(58).fork()).ldelim(),e.unbondingHeight!==BigInt(0)&&r.uint32(64).int64(e.unbondingHeight),void 0!==e.unbondingTime&&i.Timestamp.encode(e.unbondingTime,r.uint32(74).fork()).ldelim(),void 0!==e.commission&&t.Commission.encode(e.commission,r.uint32(82).fork()).ldelim(),""!==e.minSelfDelegation&&r.uint32(90).string(e.minSelfDelegation),e.unbondingOnHoldRefCount!==BigInt(0)&&r.uint32(96).int64(e.unbondingOnHoldRefCount),r.uint32(106).fork();for(const t of e.unbondingIds)r.uint64(t);return r.ldelim(),r},decode(e,r){const n=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let o=void 0===r?n.len:n.pos+r;const a=y();for(;n.pos<o;){const e=n.uint32();switch(e>>>3){case 1:a.operatorAddress=n.string();break;case 2:a.consensusPubkey=s.Any.decode(n,n.uint32());break;case 3:a.jailed=n.bool();break;case 4:a.status=n.int32();break;case 5:a.tokens=n.string();break;case 6:a.delegatorShares=n.string();break;case 7:a.description=t.Description.decode(n,n.uint32());break;case 8:a.unbondingHeight=n.int64();break;case 9:a.unbondingTime=i.Timestamp.decode(n,n.uint32());break;case 10:a.commission=t.Commission.decode(n,n.uint32());break;case 11:a.minSelfDelegation=n.string();break;case 12:a.unbondingOnHoldRefCount=n.int64();break;case 13:if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)a.unbondingIds.push(n.uint64())}else a.unbondingIds.push(n.uint64());break;default:n.skipType(7&e)}}return a},fromJSON(e){const r=y();return(0,l.isSet)(e.operatorAddress)&&(r.operatorAddress=String(e.operatorAddress)),(0,l.isSet)(e.consensusPubkey)&&(r.consensusPubkey=s.Any.fromJSON(e.consensusPubkey)),(0,l.isSet)(e.jailed)&&(r.jailed=Boolean(e.jailed)),(0,l.isSet)(e.status)&&(r.status=f(e.status)),(0,l.isSet)(e.tokens)&&(r.tokens=String(e.tokens)),(0,l.isSet)(e.delegatorShares)&&(r.delegatorShares=String(e.delegatorShares)),(0,l.isSet)(e.description)&&(r.description=t.Description.fromJSON(e.description)),(0,l.isSet)(e.unbondingHeight)&&(r.unbondingHeight=BigInt(e.unbondingHeight.toString())),(0,l.isSet)(e.unbondingTime)&&(r.unbondingTime=(0,l.fromJsonTimestamp)(e.unbondingTime)),(0,l.isSet)(e.commission)&&(r.commission=t.Commission.fromJSON(e.commission)),(0,l.isSet)(e.minSelfDelegation)&&(r.minSelfDelegation=String(e.minSelfDelegation)),(0,l.isSet)(e.unbondingOnHoldRefCount)&&(r.unbondingOnHoldRefCount=BigInt(e.unbondingOnHoldRefCount.toString())),Array.isArray(e?.unbondingIds)&&(r.unbondingIds=e.unbondingIds.map((e=>BigInt(e.toString())))),r},toJSON(e){const r={};return void 0!==e.operatorAddress&&(r.operatorAddress=e.operatorAddress),void 0!==e.consensusPubkey&&(r.consensusPubkey=e.consensusPubkey?s.Any.toJSON(e.consensusPubkey):void 0),void 0!==e.jailed&&(r.jailed=e.jailed),void 0!==e.status&&(r.status=p(e.status)),void 0!==e.tokens&&(r.tokens=e.tokens),void 0!==e.delegatorShares&&(r.delegatorShares=e.delegatorShares),void 0!==e.description&&(r.description=e.description?t.Description.toJSON(e.description):void 0),void 0!==e.unbondingHeight&&(r.unbondingHeight=(e.unbondingHeight||BigInt(0)).toString()),void 0!==e.unbondingTime&&(r.unbondingTime=(0,l.fromTimestamp)(e.unbondingTime).toISOString()),void 0!==e.commission&&(r.commission=e.commission?t.Commission.toJSON(e.commission):void 0),void 0!==e.minSelfDelegation&&(r.minSelfDelegation=e.minSelfDelegation),void 0!==e.unbondingOnHoldRefCount&&(r.unbondingOnHoldRefCount=(e.unbondingOnHoldRefCount||BigInt(0)).toString()),e.unbondingIds?r.unbondingIds=e.unbondingIds.map((e=>(e||BigInt(0)).toString())):r.unbondingIds=[],r},fromPartial(e){const r=y();return r.operatorAddress=e.operatorAddress??"",void 0!==e.consensusPubkey&&null!==e.consensusPubkey&&(r.consensusPubkey=s.Any.fromPartial(e.consensusPubkey)),r.jailed=e.jailed??!1,r.status=e.status??0,r.tokens=e.tokens??"",r.delegatorShares=e.delegatorShares??"",void 0!==e.description&&null!==e.description&&(r.description=t.Description.fromPartial(e.description)),void 0!==e.unbondingHeight&&null!==e.unbondingHeight&&(r.unbondingHeight=BigInt(e.unbondingHeight.toString())),void 0!==e.unbondingTime&&null!==e.unbondingTime&&(r.unbondingTime=i.Timestamp.fromPartial(e.unbondingTime)),void 0!==e.commission&&null!==e.commission&&(r.commission=t.Commission.fromPartial(e.commission)),r.minSelfDelegation=e.minSelfDelegation??"",void 0!==e.unbondingOnHoldRefCount&&null!==e.unbondingOnHoldRefCount&&(r.unbondingOnHoldRefCount=BigInt(e.unbondingOnHoldRefCount.toString())),r.unbondingIds=e.unbondingIds?.map((e=>BigInt(e.toString())))||[],r}},t.ValAddresses={typeUrl:"/cosmos.staking.v1beta1.ValAddresses",encode(e,t=u.BinaryWriter.create()){for(const r of e.addresses)t.uint32(10).string(r);return t},decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={addresses:[]};for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.addresses.push(r.string());else r.skipType(7&e)}return i},fromJSON(e){const t={addresses:[]};return Array.isArray(e?.addresses)&&(t.addresses=e.addresses.map((e=>String(e)))),t},toJSON(e){const t={};return e.addresses?t.addresses=e.addresses.map((e=>e)):t.addresses=[],t},fromPartial(e){const t={addresses:[]};return t.addresses=e.addresses?.map((e=>e))||[],t}},t.DVPair={typeUrl:"/cosmos.staking.v1beta1.DVPair",encode:(e,t=u.BinaryWriter.create())=>(""!==e.delegatorAddress&&t.uint32(10).string(e.delegatorAddress),""!==e.validatorAddress&&t.uint32(18).string(e.validatorAddress),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={delegatorAddress:"",validatorAddress:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.delegatorAddress=r.string();break;case 2:i.validatorAddress=r.string();break;default:r.skipType(7&e)}}return i},fromJSON(e){const t={delegatorAddress:"",validatorAddress:""};return(0,l.isSet)(e.delegatorAddress)&&(t.delegatorAddress=String(e.delegatorAddress)),(0,l.isSet)(e.validatorAddress)&&(t.validatorAddress=String(e.validatorAddress)),t},toJSON(e){const t={};return void 0!==e.delegatorAddress&&(t.delegatorAddress=e.delegatorAddress),void 0!==e.validatorAddress&&(t.validatorAddress=e.validatorAddress),t},fromPartial(e){const t={delegatorAddress:"",validatorAddress:""};return t.delegatorAddress=e.delegatorAddress??"",t.validatorAddress=e.validatorAddress??"",t}},t.DVPairs={typeUrl:"/cosmos.staking.v1beta1.DVPairs",encode(e,r=u.BinaryWriter.create()){for(const n of e.pairs)t.DVPair.encode(n,r.uint32(10).fork()).ldelim();return r},decode(e,r){const n=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let i=void 0===r?n.len:n.pos+r;const s={pairs:[]};for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)s.pairs.push(t.DVPair.decode(n,n.uint32()));else n.skipType(7&e)}return s},fromJSON(e){const r={pairs:[]};return Array.isArray(e?.pairs)&&(r.pairs=e.pairs.map((e=>t.DVPair.fromJSON(e)))),r},toJSON(e){const r={};return e.pairs?r.pairs=e.pairs.map((e=>e?t.DVPair.toJSON(e):void 0)):r.pairs=[],r},fromPartial(e){const r={pairs:[]};return r.pairs=e.pairs?.map((e=>t.DVPair.fromPartial(e)))||[],r}},t.DVVTriplet={typeUrl:"/cosmos.staking.v1beta1.DVVTriplet",encode:(e,t=u.BinaryWriter.create())=>(""!==e.delegatorAddress&&t.uint32(10).string(e.delegatorAddress),""!==e.validatorSrcAddress&&t.uint32(18).string(e.validatorSrcAddress),""!==e.validatorDstAddress&&t.uint32(26).string(e.validatorDstAddress),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={delegatorAddress:"",validatorSrcAddress:"",validatorDstAddress:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.delegatorAddress=r.string();break;case 2:i.validatorSrcAddress=r.string();break;case 3:i.validatorDstAddress=r.string();break;default:r.skipType(7&e)}}return i},fromJSON(e){const t={delegatorAddress:"",validatorSrcAddress:"",validatorDstAddress:""};return(0,l.isSet)(e.delegatorAddress)&&(t.delegatorAddress=String(e.delegatorAddress)),(0,l.isSet)(e.validatorSrcAddress)&&(t.validatorSrcAddress=String(e.validatorSrcAddress)),(0,l.isSet)(e.validatorDstAddress)&&(t.validatorDstAddress=String(e.validatorDstAddress)),t},toJSON(e){const t={};return void 0!==e.delegatorAddress&&(t.delegatorAddress=e.delegatorAddress),void 0!==e.validatorSrcAddress&&(t.validatorSrcAddress=e.validatorSrcAddress),void 0!==e.validatorDstAddress&&(t.validatorDstAddress=e.validatorDstAddress),t},fromPartial(e){const t={delegatorAddress:"",validatorSrcAddress:"",validatorDstAddress:""};return t.delegatorAddress=e.delegatorAddress??"",t.validatorSrcAddress=e.validatorSrcAddress??"",t.validatorDstAddress=e.validatorDstAddress??"",t}},t.DVVTriplets={typeUrl:"/cosmos.staking.v1beta1.DVVTriplets",encode(e,r=u.BinaryWriter.create()){for(const n of e.triplets)t.DVVTriplet.encode(n,r.uint32(10).fork()).ldelim();return r},decode(e,r){const n=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let i=void 0===r?n.len:n.pos+r;const s={triplets:[]};for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)s.triplets.push(t.DVVTriplet.decode(n,n.uint32()));else n.skipType(7&e)}return s},fromJSON(e){const r={triplets:[]};return Array.isArray(e?.triplets)&&(r.triplets=e.triplets.map((e=>t.DVVTriplet.fromJSON(e)))),r},toJSON(e){const r={};return e.triplets?r.triplets=e.triplets.map((e=>e?t.DVVTriplet.toJSON(e):void 0)):r.triplets=[],r},fromPartial(e){const r={triplets:[]};return r.triplets=e.triplets?.map((e=>t.DVVTriplet.fromPartial(e)))||[],r}},t.Delegation={typeUrl:"/cosmos.staking.v1beta1.Delegation",encode:(e,t=u.BinaryWriter.create())=>(""!==e.delegatorAddress&&t.uint32(10).string(e.delegatorAddress),""!==e.validatorAddress&&t.uint32(18).string(e.validatorAddress),""!==e.shares&&t.uint32(26).string(e.shares),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={delegatorAddress:"",validatorAddress:"",shares:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.delegatorAddress=r.string();break;case 2:i.validatorAddress=r.string();break;case 3:i.shares=r.string();break;default:r.skipType(7&e)}}return i},fromJSON(e){const t={delegatorAddress:"",validatorAddress:"",shares:""};return(0,l.isSet)(e.delegatorAddress)&&(t.delegatorAddress=String(e.delegatorAddress)),(0,l.isSet)(e.validatorAddress)&&(t.validatorAddress=String(e.validatorAddress)),(0,l.isSet)(e.shares)&&(t.shares=String(e.shares)),t},toJSON(e){const t={};return void 0!==e.delegatorAddress&&(t.delegatorAddress=e.delegatorAddress),void 0!==e.validatorAddress&&(t.validatorAddress=e.validatorAddress),void 0!==e.shares&&(t.shares=e.shares),t},fromPartial(e){const t={delegatorAddress:"",validatorAddress:"",shares:""};return t.delegatorAddress=e.delegatorAddress??"",t.validatorAddress=e.validatorAddress??"",t.shares=e.shares??"",t}},t.UnbondingDelegation={typeUrl:"/cosmos.staking.v1beta1.UnbondingDelegation",encode(e,r=u.BinaryWriter.create()){""!==e.delegatorAddress&&r.uint32(10).string(e.delegatorAddress),""!==e.validatorAddress&&r.uint32(18).string(e.validatorAddress);for(const n of e.entries)t.UnbondingDelegationEntry.encode(n,r.uint32(26).fork()).ldelim();return r},decode(e,r){const n=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let i=void 0===r?n.len:n.pos+r;const s={delegatorAddress:"",validatorAddress:"",entries:[]};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:s.delegatorAddress=n.string();break;case 2:s.validatorAddress=n.string();break;case 3:s.entries.push(t.UnbondingDelegationEntry.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return s},fromJSON(e){const r={delegatorAddress:"",validatorAddress:"",entries:[]};return(0,l.isSet)(e.delegatorAddress)&&(r.delegatorAddress=String(e.delegatorAddress)),(0,l.isSet)(e.validatorAddress)&&(r.validatorAddress=String(e.validatorAddress)),Array.isArray(e?.entries)&&(r.entries=e.entries.map((e=>t.UnbondingDelegationEntry.fromJSON(e)))),r},toJSON(e){const r={};return void 0!==e.delegatorAddress&&(r.delegatorAddress=e.delegatorAddress),void 0!==e.validatorAddress&&(r.validatorAddress=e.validatorAddress),e.entries?r.entries=e.entries.map((e=>e?t.UnbondingDelegationEntry.toJSON(e):void 0)):r.entries=[],r},fromPartial(e){const r={delegatorAddress:"",validatorAddress:"",entries:[]};return r.delegatorAddress=e.delegatorAddress??"",r.validatorAddress=e.validatorAddress??"",r.entries=e.entries?.map((e=>t.UnbondingDelegationEntry.fromPartial(e)))||[],r}},t.UnbondingDelegationEntry={typeUrl:"/cosmos.staking.v1beta1.UnbondingDelegationEntry",encode:(e,t=u.BinaryWriter.create())=>(e.creationHeight!==BigInt(0)&&t.uint32(8).int64(e.creationHeight),void 0!==e.completionTime&&i.Timestamp.encode(e.completionTime,t.uint32(18).fork()).ldelim(),""!==e.initialBalance&&t.uint32(26).string(e.initialBalance),""!==e.balance&&t.uint32(34).string(e.balance),e.unbondingId!==BigInt(0)&&t.uint32(40).uint64(e.unbondingId),e.unbondingOnHoldRefCount!==BigInt(0)&&t.uint32(48).int64(e.unbondingOnHoldRefCount),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s=b();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.creationHeight=r.int64();break;case 2:s.completionTime=i.Timestamp.decode(r,r.uint32());break;case 3:s.initialBalance=r.string();break;case 4:s.balance=r.string();break;case 5:s.unbondingId=r.uint64();break;case 6:s.unbondingOnHoldRefCount=r.int64();break;default:r.skipType(7&e)}}return s},fromJSON(e){const t=b();return(0,l.isSet)(e.creationHeight)&&(t.creationHeight=BigInt(e.creationHeight.toString())),(0,l.isSet)(e.completionTime)&&(t.completionTime=(0,l.fromJsonTimestamp)(e.completionTime)),(0,l.isSet)(e.initialBalance)&&(t.initialBalance=String(e.initialBalance)),(0,l.isSet)(e.balance)&&(t.balance=String(e.balance)),(0,l.isSet)(e.unbondingId)&&(t.unbondingId=BigInt(e.unbondingId.toString())),(0,l.isSet)(e.unbondingOnHoldRefCount)&&(t.unbondingOnHoldRefCount=BigInt(e.unbondingOnHoldRefCount.toString())),t},toJSON(e){const t={};return void 0!==e.creationHeight&&(t.creationHeight=(e.creationHeight||BigInt(0)).toString()),void 0!==e.completionTime&&(t.completionTime=(0,l.fromTimestamp)(e.completionTime).toISOString()),void 0!==e.initialBalance&&(t.initialBalance=e.initialBalance),void 0!==e.balance&&(t.balance=e.balance),void 0!==e.unbondingId&&(t.unbondingId=(e.unbondingId||BigInt(0)).toString()),void 0!==e.unbondingOnHoldRefCount&&(t.unbondingOnHoldRefCount=(e.unbondingOnHoldRefCount||BigInt(0)).toString()),t},fromPartial(e){const t=b();return void 0!==e.creationHeight&&null!==e.creationHeight&&(t.creationHeight=BigInt(e.creationHeight.toString())),void 0!==e.completionTime&&null!==e.completionTime&&(t.completionTime=i.Timestamp.fromPartial(e.completionTime)),t.initialBalance=e.initialBalance??"",t.balance=e.balance??"",void 0!==e.unbondingId&&null!==e.unbondingId&&(t.unbondingId=BigInt(e.unbondingId.toString())),void 0!==e.unbondingOnHoldRefCount&&null!==e.unbondingOnHoldRefCount&&(t.unbondingOnHoldRefCount=BigInt(e.unbondingOnHoldRefCount.toString())),t}},t.RedelegationEntry={typeUrl:"/cosmos.staking.v1beta1.RedelegationEntry",encode:(e,t=u.BinaryWriter.create())=>(e.creationHeight!==BigInt(0)&&t.uint32(8).int64(e.creationHeight),void 0!==e.completionTime&&i.Timestamp.encode(e.completionTime,t.uint32(18).fork()).ldelim(),""!==e.initialBalance&&t.uint32(26).string(e.initialBalance),""!==e.sharesDst&&t.uint32(34).string(e.sharesDst),e.unbondingId!==BigInt(0)&&t.uint32(40).uint64(e.unbondingId),e.unbondingOnHoldRefCount!==BigInt(0)&&t.uint32(48).int64(e.unbondingOnHoldRefCount),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s=w();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.creationHeight=r.int64();break;case 2:s.completionTime=i.Timestamp.decode(r,r.uint32());break;case 3:s.initialBalance=r.string();break;case 4:s.sharesDst=r.string();break;case 5:s.unbondingId=r.uint64();break;case 6:s.unbondingOnHoldRefCount=r.int64();break;default:r.skipType(7&e)}}return s},fromJSON(e){const t=w();return(0,l.isSet)(e.creationHeight)&&(t.creationHeight=BigInt(e.creationHeight.toString())),(0,l.isSet)(e.completionTime)&&(t.completionTime=(0,l.fromJsonTimestamp)(e.completionTime)),(0,l.isSet)(e.initialBalance)&&(t.initialBalance=String(e.initialBalance)),(0,l.isSet)(e.sharesDst)&&(t.sharesDst=String(e.sharesDst)),(0,l.isSet)(e.unbondingId)&&(t.unbondingId=BigInt(e.unbondingId.toString())),(0,l.isSet)(e.unbondingOnHoldRefCount)&&(t.unbondingOnHoldRefCount=BigInt(e.unbondingOnHoldRefCount.toString())),t},toJSON(e){const t={};return void 0!==e.creationHeight&&(t.creationHeight=(e.creationHeight||BigInt(0)).toString()),void 0!==e.completionTime&&(t.completionTime=(0,l.fromTimestamp)(e.completionTime).toISOString()),void 0!==e.initialBalance&&(t.initialBalance=e.initialBalance),void 0!==e.sharesDst&&(t.sharesDst=e.sharesDst),void 0!==e.unbondingId&&(t.unbondingId=(e.unbondingId||BigInt(0)).toString()),void 0!==e.unbondingOnHoldRefCount&&(t.unbondingOnHoldRefCount=(e.unbondingOnHoldRefCount||BigInt(0)).toString()),t},fromPartial(e){const t=w();return void 0!==e.creationHeight&&null!==e.creationHeight&&(t.creationHeight=BigInt(e.creationHeight.toString())),void 0!==e.completionTime&&null!==e.completionTime&&(t.completionTime=i.Timestamp.fromPartial(e.completionTime)),t.initialBalance=e.initialBalance??"",t.sharesDst=e.sharesDst??"",void 0!==e.unbondingId&&null!==e.unbondingId&&(t.unbondingId=BigInt(e.unbondingId.toString())),void 0!==e.unbondingOnHoldRefCount&&null!==e.unbondingOnHoldRefCount&&(t.unbondingOnHoldRefCount=BigInt(e.unbondingOnHoldRefCount.toString())),t}},t.Redelegation={typeUrl:"/cosmos.staking.v1beta1.Redelegation",encode(e,r=u.BinaryWriter.create()){""!==e.delegatorAddress&&r.uint32(10).string(e.delegatorAddress),""!==e.validatorSrcAddress&&r.uint32(18).string(e.validatorSrcAddress),""!==e.validatorDstAddress&&r.uint32(26).string(e.validatorDstAddress);for(const n of e.entries)t.RedelegationEntry.encode(n,r.uint32(34).fork()).ldelim();return r},decode(e,r){const n=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let i=void 0===r?n.len:n.pos+r;const s={delegatorAddress:"",validatorSrcAddress:"",validatorDstAddress:"",entries:[]};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:s.delegatorAddress=n.string();break;case 2:s.validatorSrcAddress=n.string();break;case 3:s.validatorDstAddress=n.string();break;case 4:s.entries.push(t.RedelegationEntry.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return s},fromJSON(e){const r={delegatorAddress:"",validatorSrcAddress:"",validatorDstAddress:"",entries:[]};return(0,l.isSet)(e.delegatorAddress)&&(r.delegatorAddress=String(e.delegatorAddress)),(0,l.isSet)(e.validatorSrcAddress)&&(r.validatorSrcAddress=String(e.validatorSrcAddress)),(0,l.isSet)(e.validatorDstAddress)&&(r.validatorDstAddress=String(e.validatorDstAddress)),Array.isArray(e?.entries)&&(r.entries=e.entries.map((e=>t.RedelegationEntry.fromJSON(e)))),r},toJSON(e){const r={};return void 0!==e.delegatorAddress&&(r.delegatorAddress=e.delegatorAddress),void 0!==e.validatorSrcAddress&&(r.validatorSrcAddress=e.validatorSrcAddress),void 0!==e.validatorDstAddress&&(r.validatorDstAddress=e.validatorDstAddress),e.entries?r.entries=e.entries.map((e=>e?t.RedelegationEntry.toJSON(e):void 0)):r.entries=[],r},fromPartial(e){const r={delegatorAddress:"",validatorSrcAddress:"",validatorDstAddress:"",entries:[]};return r.delegatorAddress=e.delegatorAddress??"",r.validatorSrcAddress=e.validatorSrcAddress??"",r.validatorDstAddress=e.validatorDstAddress??"",r.entries=e.entries?.map((e=>t.RedelegationEntry.fromPartial(e)))||[],r}},t.Params={typeUrl:"/cosmos.staking.v1beta1.Params",encode:(e,t=u.BinaryWriter.create())=>(void 0!==e.unbondingTime&&o.Duration.encode(e.unbondingTime,t.uint32(10).fork()).ldelim(),0!==e.maxValidators&&t.uint32(16).uint32(e.maxValidators),0!==e.maxEntries&&t.uint32(24).uint32(e.maxEntries),0!==e.historicalEntries&&t.uint32(32).uint32(e.historicalEntries),""!==e.bondDenom&&t.uint32(42).string(e.bondDenom),""!==e.minCommissionRate&&t.uint32(50).string(e.minCommissionRate),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i=v();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.unbondingTime=o.Duration.decode(r,r.uint32());break;case 2:i.maxValidators=r.uint32();break;case 3:i.maxEntries=r.uint32();break;case 4:i.historicalEntries=r.uint32();break;case 5:i.bondDenom=r.string();break;case 6:i.minCommissionRate=r.string();break;default:r.skipType(7&e)}}return i},fromJSON(e){const t=v();return(0,l.isSet)(e.unbondingTime)&&(t.unbondingTime=o.Duration.fromJSON(e.unbondingTime)),(0,l.isSet)(e.maxValidators)&&(t.maxValidators=Number(e.maxValidators)),(0,l.isSet)(e.maxEntries)&&(t.maxEntries=Number(e.maxEntries)),(0,l.isSet)(e.historicalEntries)&&(t.historicalEntries=Number(e.historicalEntries)),(0,l.isSet)(e.bondDenom)&&(t.bondDenom=String(e.bondDenom)),(0,l.isSet)(e.minCommissionRate)&&(t.minCommissionRate=String(e.minCommissionRate)),t},toJSON(e){const t={};return void 0!==e.unbondingTime&&(t.unbondingTime=e.unbondingTime?o.Duration.toJSON(e.unbondingTime):void 0),void 0!==e.maxValidators&&(t.maxValidators=Math.round(e.maxValidators)),void 0!==e.maxEntries&&(t.maxEntries=Math.round(e.maxEntries)),void 0!==e.historicalEntries&&(t.historicalEntries=Math.round(e.historicalEntries)),void 0!==e.bondDenom&&(t.bondDenom=e.bondDenom),void 0!==e.minCommissionRate&&(t.minCommissionRate=e.minCommissionRate),t},fromPartial(e){const t=v();return void 0!==e.unbondingTime&&null!==e.unbondingTime&&(t.unbondingTime=o.Duration.fromPartial(e.unbondingTime)),t.maxValidators=e.maxValidators??0,t.maxEntries=e.maxEntries??0,t.historicalEntries=e.historicalEntries??0,t.bondDenom=e.bondDenom??"",t.minCommissionRate=e.minCommissionRate??"",t}},t.DelegationResponse={typeUrl:"/cosmos.staking.v1beta1.DelegationResponse",encode:(e,r=u.BinaryWriter.create())=>(void 0!==e.delegation&&t.Delegation.encode(e.delegation,r.uint32(10).fork()).ldelim(),void 0!==e.balance&&a.Coin.encode(e.balance,r.uint32(18).fork()).ldelim(),r),decode(e,r){const n=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let i=void 0===r?n.len:n.pos+r;const s=S();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:s.delegation=t.Delegation.decode(n,n.uint32());break;case 2:s.balance=a.Coin.decode(n,n.uint32());break;default:n.skipType(7&e)}}return s},fromJSON(e){const r=S();return(0,l.isSet)(e.delegation)&&(r.delegation=t.Delegation.fromJSON(e.delegation)),(0,l.isSet)(e.balance)&&(r.balance=a.Coin.fromJSON(e.balance)),r},toJSON(e){const r={};return void 0!==e.delegation&&(r.delegation=e.delegation?t.Delegation.toJSON(e.delegation):void 0),void 0!==e.balance&&(r.balance=e.balance?a.Coin.toJSON(e.balance):void 0),r},fromPartial(e){const r=S();return void 0!==e.delegation&&null!==e.delegation&&(r.delegation=t.Delegation.fromPartial(e.delegation)),void 0!==e.balance&&null!==e.balance&&(r.balance=a.Coin.fromPartial(e.balance)),r}},t.RedelegationEntryResponse={typeUrl:"/cosmos.staking.v1beta1.RedelegationEntryResponse",encode:(e,r=u.BinaryWriter.create())=>(void 0!==e.redelegationEntry&&t.RedelegationEntry.encode(e.redelegationEntry,r.uint32(10).fork()).ldelim(),""!==e.balance&&r.uint32(34).string(e.balance),r),decode(e,r){const n=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let i=void 0===r?n.len:n.pos+r;const s=_();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:s.redelegationEntry=t.RedelegationEntry.decode(n,n.uint32());break;case 4:s.balance=n.string();break;default:n.skipType(7&e)}}return s},fromJSON(e){const r=_();return(0,l.isSet)(e.redelegationEntry)&&(r.redelegationEntry=t.RedelegationEntry.fromJSON(e.redelegationEntry)),(0,l.isSet)(e.balance)&&(r.balance=String(e.balance)),r},toJSON(e){const r={};return void 0!==e.redelegationEntry&&(r.redelegationEntry=e.redelegationEntry?t.RedelegationEntry.toJSON(e.redelegationEntry):void 0),void 0!==e.balance&&(r.balance=e.balance),r},fromPartial(e){const r=_();return void 0!==e.redelegationEntry&&null!==e.redelegationEntry&&(r.redelegationEntry=t.RedelegationEntry.fromPartial(e.redelegationEntry)),r.balance=e.balance??"",r}},t.RedelegationResponse={typeUrl:"/cosmos.staking.v1beta1.RedelegationResponse",encode(e,r=u.BinaryWriter.create()){void 0!==e.redelegation&&t.Redelegation.encode(e.redelegation,r.uint32(10).fork()).ldelim();for(const n of e.entries)t.RedelegationEntryResponse.encode(n,r.uint32(18).fork()).ldelim();return r},decode(e,r){const n=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let i=void 0===r?n.len:n.pos+r;const s=A();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:s.redelegation=t.Redelegation.decode(n,n.uint32());break;case 2:s.entries.push(t.RedelegationEntryResponse.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return s},fromJSON(e){const r=A();return(0,l.isSet)(e.redelegation)&&(r.redelegation=t.Redelegation.fromJSON(e.redelegation)),Array.isArray(e?.entries)&&(r.entries=e.entries.map((e=>t.RedelegationEntryResponse.fromJSON(e)))),r},toJSON(e){const r={};return void 0!==e.redelegation&&(r.redelegation=e.redelegation?t.Redelegation.toJSON(e.redelegation):void 0),e.entries?r.entries=e.entries.map((e=>e?t.RedelegationEntryResponse.toJSON(e):void 0)):r.entries=[],r},fromPartial(e){const r=A();return void 0!==e.redelegation&&null!==e.redelegation&&(r.redelegation=t.Redelegation.fromPartial(e.redelegation)),r.entries=e.entries?.map((e=>t.RedelegationEntryResponse.fromPartial(e)))||[],r}},t.Pool={typeUrl:"/cosmos.staking.v1beta1.Pool",encode:(e,t=u.BinaryWriter.create())=>(""!==e.notBondedTokens&&t.uint32(10).string(e.notBondedTokens),""!==e.bondedTokens&&t.uint32(18).string(e.bondedTokens),t),decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={notBondedTokens:"",bondedTokens:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.notBondedTokens=r.string();break;case 2:i.bondedTokens=r.string();break;default:r.skipType(7&e)}}return i},fromJSON(e){const t={notBondedTokens:"",bondedTokens:""};return(0,l.isSet)(e.notBondedTokens)&&(t.notBondedTokens=String(e.notBondedTokens)),(0,l.isSet)(e.bondedTokens)&&(t.bondedTokens=String(e.bondedTokens)),t},toJSON(e){const t={};return void 0!==e.notBondedTokens&&(t.notBondedTokens=e.notBondedTokens),void 0!==e.bondedTokens&&(t.bondedTokens=e.bondedTokens),t},fromPartial(e){const t={notBondedTokens:"",bondedTokens:""};return t.notBondedTokens=e.notBondedTokens??"",t.bondedTokens=e.bondedTokens??"",t}},t.ValidatorUpdates={typeUrl:"/cosmos.staking.v1beta1.ValidatorUpdates",encode(e,t=u.BinaryWriter.create()){for(const r of e.updates)c.ValidatorUpdate.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof u.BinaryReader?e:new u.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={updates:[]};for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.updates.push(c.ValidatorUpdate.decode(r,r.uint32()));else r.skipType(7&e)}return i},fromJSON(e){const t={updates:[]};return Array.isArray(e?.updates)&&(t.updates=e.updates.map((e=>c.ValidatorUpdate.fromJSON(e)))),t},toJSON(e){const t={};return e.updates?t.updates=e.updates.map((e=>e?c.ValidatorUpdate.toJSON(e):void 0)):t.updates=[],t},fromPartial(e){const t={updates:[]};return t.updates=e.updates?.map((e=>c.ValidatorUpdate.fromPartial(e)))||[],t}}},92692:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceClientImpl=t.TxDecodeAminoResponse=t.TxDecodeAminoRequest=t.TxEncodeAminoResponse=t.TxEncodeAminoRequest=t.TxEncodeResponse=t.TxEncodeRequest=t.TxDecodeResponse=t.TxDecodeRequest=t.GetBlockWithTxsResponse=t.GetBlockWithTxsRequest=t.GetTxResponse=t.GetTxRequest=t.SimulateResponse=t.SimulateRequest=t.BroadcastTxResponse=t.BroadcastTxRequest=t.GetTxsEventResponse=t.GetTxsEventRequest=t.broadcastModeToJSON=t.broadcastModeFromJSON=t.BroadcastMode=t.orderByToJSON=t.orderByFromJSON=t.OrderBy=t.protobufPackage=void 0;const n=r(6975),i=r(99569),s=r(85231),o=r(11068),a=r(94392),c=r(50287),u=r(42825);var l,h;function d(e){switch(e){case 0:case"ORDER_BY_UNSPECIFIED":return l.ORDER_BY_UNSPECIFIED;case 1:case"ORDER_BY_ASC":return l.ORDER_BY_ASC;case 2:case"ORDER_BY_DESC":return l.ORDER_BY_DESC;default:return l.UNRECOGNIZED}}function f(e){switch(e){case l.ORDER_BY_UNSPECIFIED:return"ORDER_BY_UNSPECIFIED";case l.ORDER_BY_ASC:return"ORDER_BY_ASC";case l.ORDER_BY_DESC:return"ORDER_BY_DESC";case l.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function p(e){switch(e){case 0:case"BROADCAST_MODE_UNSPECIFIED":return h.BROADCAST_MODE_UNSPECIFIED;case 1:case"BROADCAST_MODE_BLOCK":return h.BROADCAST_MODE_BLOCK;case 2:case"BROADCAST_MODE_SYNC":return h.BROADCAST_MODE_SYNC;case 3:case"BROADCAST_MODE_ASYNC":return h.BROADCAST_MODE_ASYNC;default:return h.UNRECOGNIZED}}function g(e){switch(e){case h.BROADCAST_MODE_UNSPECIFIED:return"BROADCAST_MODE_UNSPECIFIED";case h.BROADCAST_MODE_BLOCK:return"BROADCAST_MODE_BLOCK";case h.BROADCAST_MODE_SYNC:return"BROADCAST_MODE_SYNC";case h.BROADCAST_MODE_ASYNC:return"BROADCAST_MODE_ASYNC";case h.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function m(){return{events:[],pagination:void 0,orderBy:0,page:BigInt(0),limit:BigInt(0)}}function y(){return{txs:[],txResponses:[],pagination:void 0,total:BigInt(0)}}function b(){return{txBytes:new Uint8Array,mode:0}}function w(){return{tx:void 0,txBytes:new Uint8Array}}function v(){return{height:BigInt(0),pagination:void 0}}function S(){return{txBytes:new Uint8Array}}function _(){return{txBytes:new Uint8Array}}function A(){return{aminoBinary:new Uint8Array}}function E(){return{aminoBinary:new Uint8Array}}t.protobufPackage="cosmos.tx.v1beta1",function(e){e[e.ORDER_BY_UNSPECIFIED=0]="ORDER_BY_UNSPECIFIED",e[e.ORDER_BY_ASC=1]="ORDER_BY_ASC",e[e.ORDER_BY_DESC=2]="ORDER_BY_DESC",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(l||(t.OrderBy=l={})),t.orderByFromJSON=d,t.orderByToJSON=f,function(e){e[e.BROADCAST_MODE_UNSPECIFIED=0]="BROADCAST_MODE_UNSPECIFIED",e[e.BROADCAST_MODE_BLOCK=1]="BROADCAST_MODE_BLOCK",e[e.BROADCAST_MODE_SYNC=2]="BROADCAST_MODE_SYNC",e[e.BROADCAST_MODE_ASYNC=3]="BROADCAST_MODE_ASYNC",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(h||(t.BroadcastMode=h={})),t.broadcastModeFromJSON=p,t.broadcastModeToJSON=g,t.GetTxsEventRequest={typeUrl:"/cosmos.tx.v1beta1.GetTxsEventRequest",encode(e,t=c.BinaryWriter.create()){for(const r of e.events)t.uint32(10).string(r);return void 0!==e.pagination&&i.PageRequest.encode(e.pagination,t.uint32(18).fork()).ldelim(),0!==e.orderBy&&t.uint32(24).int32(e.orderBy),e.page!==BigInt(0)&&t.uint32(32).uint64(e.page),e.limit!==BigInt(0)&&t.uint32(40).uint64(e.limit),t},decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s=m();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.events.push(r.string());break;case 2:s.pagination=i.PageRequest.decode(r,r.uint32());break;case 3:s.orderBy=r.int32();break;case 4:s.page=r.uint64();break;case 5:s.limit=r.uint64();break;default:r.skipType(7&e)}}return s},fromJSON(e){const t=m();return Array.isArray(e?.events)&&(t.events=e.events.map((e=>String(e)))),(0,u.isSet)(e.pagination)&&(t.pagination=i.PageRequest.fromJSON(e.pagination)),(0,u.isSet)(e.orderBy)&&(t.orderBy=d(e.orderBy)),(0,u.isSet)(e.page)&&(t.page=BigInt(e.page.toString())),(0,u.isSet)(e.limit)&&(t.limit=BigInt(e.limit.toString())),t},toJSON(e){const t={};return e.events?t.events=e.events.map((e=>e)):t.events=[],void 0!==e.pagination&&(t.pagination=e.pagination?i.PageRequest.toJSON(e.pagination):void 0),void 0!==e.orderBy&&(t.orderBy=f(e.orderBy)),void 0!==e.page&&(t.page=(e.page||BigInt(0)).toString()),void 0!==e.limit&&(t.limit=(e.limit||BigInt(0)).toString()),t},fromPartial(e){const t=m();return t.events=e.events?.map((e=>e))||[],void 0!==e.pagination&&null!==e.pagination&&(t.pagination=i.PageRequest.fromPartial(e.pagination)),t.orderBy=e.orderBy??0,void 0!==e.page&&null!==e.page&&(t.page=BigInt(e.page.toString())),void 0!==e.limit&&null!==e.limit&&(t.limit=BigInt(e.limit.toString())),t}},t.GetTxsEventResponse={typeUrl:"/cosmos.tx.v1beta1.GetTxsEventResponse",encode(e,t=c.BinaryWriter.create()){for(const r of e.txs)n.Tx.encode(r,t.uint32(10).fork()).ldelim();for(const r of e.txResponses)s.TxResponse.encode(r,t.uint32(18).fork()).ldelim();return void 0!==e.pagination&&i.PageResponse.encode(e.pagination,t.uint32(26).fork()).ldelim(),e.total!==BigInt(0)&&t.uint32(32).uint64(e.total),t},decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let o=void 0===t?r.len:r.pos+t;const a=y();for(;r.pos<o;){const e=r.uint32();switch(e>>>3){case 1:a.txs.push(n.Tx.decode(r,r.uint32()));break;case 2:a.txResponses.push(s.TxResponse.decode(r,r.uint32()));break;case 3:a.pagination=i.PageResponse.decode(r,r.uint32());break;case 4:a.total=r.uint64();break;default:r.skipType(7&e)}}return a},fromJSON(e){const t=y();return Array.isArray(e?.txs)&&(t.txs=e.txs.map((e=>n.Tx.fromJSON(e)))),Array.isArray(e?.txResponses)&&(t.txResponses=e.txResponses.map((e=>s.TxResponse.fromJSON(e)))),(0,u.isSet)(e.pagination)&&(t.pagination=i.PageResponse.fromJSON(e.pagination)),(0,u.isSet)(e.total)&&(t.total=BigInt(e.total.toString())),t},toJSON(e){const t={};return e.txs?t.txs=e.txs.map((e=>e?n.Tx.toJSON(e):void 0)):t.txs=[],e.txResponses?t.txResponses=e.txResponses.map((e=>e?s.TxResponse.toJSON(e):void 0)):t.txResponses=[],void 0!==e.pagination&&(t.pagination=e.pagination?i.PageResponse.toJSON(e.pagination):void 0),void 0!==e.total&&(t.total=(e.total||BigInt(0)).toString()),t},fromPartial(e){const t=y();return t.txs=e.txs?.map((e=>n.Tx.fromPartial(e)))||[],t.txResponses=e.txResponses?.map((e=>s.TxResponse.fromPartial(e)))||[],void 0!==e.pagination&&null!==e.pagination&&(t.pagination=i.PageResponse.fromPartial(e.pagination)),void 0!==e.total&&null!==e.total&&(t.total=BigInt(e.total.toString())),t}},t.BroadcastTxRequest={typeUrl:"/cosmos.tx.v1beta1.BroadcastTxRequest",encode:(e,t=c.BinaryWriter.create())=>(0!==e.txBytes.length&&t.uint32(10).bytes(e.txBytes),0!==e.mode&&t.uint32(16).int32(e.mode),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i=b();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.txBytes=r.bytes();break;case 2:i.mode=r.int32();break;default:r.skipType(7&e)}}return i},fromJSON(e){const t=b();return(0,u.isSet)(e.txBytes)&&(t.txBytes=(0,u.bytesFromBase64)(e.txBytes)),(0,u.isSet)(e.mode)&&(t.mode=p(e.mode)),t},toJSON(e){const t={};return void 0!==e.txBytes&&(t.txBytes=(0,u.base64FromBytes)(void 0!==e.txBytes?e.txBytes:new Uint8Array)),void 0!==e.mode&&(t.mode=g(e.mode)),t},fromPartial(e){const t=b();return t.txBytes=e.txBytes??new Uint8Array,t.mode=e.mode??0,t}},t.BroadcastTxResponse={typeUrl:"/cosmos.tx.v1beta1.BroadcastTxResponse",encode:(e,t=c.BinaryWriter.create())=>(void 0!==e.txResponse&&s.TxResponse.encode(e.txResponse,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={txResponse:void 0};for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.txResponse=s.TxResponse.decode(r,r.uint32());else r.skipType(7&e)}return i},fromJSON(e){const t={txResponse:void 0};return(0,u.isSet)(e.txResponse)&&(t.txResponse=s.TxResponse.fromJSON(e.txResponse)),t},toJSON(e){const t={};return void 0!==e.txResponse&&(t.txResponse=e.txResponse?s.TxResponse.toJSON(e.txResponse):void 0),t},fromPartial(e){const t={txResponse:void 0};return void 0!==e.txResponse&&null!==e.txResponse&&(t.txResponse=s.TxResponse.fromPartial(e.txResponse)),t}},t.SimulateRequest={typeUrl:"/cosmos.tx.v1beta1.SimulateRequest",encode:(e,t=c.BinaryWriter.create())=>(void 0!==e.tx&&n.Tx.encode(e.tx,t.uint32(10).fork()).ldelim(),0!==e.txBytes.length&&t.uint32(18).bytes(e.txBytes),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let i=void 0===t?r.len:r.pos+t;const s=w();for(;r.pos<i;){const e=r.uint32();switch(e>>>3){case 1:s.tx=n.Tx.decode(r,r.uint32());break;case 2:s.txBytes=r.bytes();break;default:r.skipType(7&e)}}return s},fromJSON(e){const t=w();return(0,u.isSet)(e.tx)&&(t.tx=n.Tx.fromJSON(e.tx)),(0,u.isSet)(e.txBytes)&&(t.txBytes=(0,u.bytesFromBase64)(e.txBytes)),t},toJSON(e){const t={};return void 0!==e.tx&&(t.tx=e.tx?n.Tx.toJSON(e.tx):void 0),void 0!==e.txBytes&&(t.txBytes=(0,u.base64FromBytes)(void 0!==e.txBytes?e.txBytes:new Uint8Array)),t},fromPartial(e){const t=w();return void 0!==e.tx&&null!==e.tx&&(t.tx=n.Tx.fromPartial(e.tx)),t.txBytes=e.txBytes??new Uint8Array,t}},t.SimulateResponse={typeUrl:"/cosmos.tx.v1beta1.SimulateResponse",encode:(e,t=c.BinaryWriter.create())=>(void 0!==e.gasInfo&&s.GasInfo.encode(e.gasInfo,t.uint32(10).fork()).ldelim(),void 0!==e.result&&s.Result.encode(e.result,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={gasInfo:void 0,result:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.gasInfo=s.GasInfo.decode(r,r.uint32());break;case 2:i.result=s.Result.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON(e){const t={gasInfo:void 0,result:void 0};return(0,u.isSet)(e.gasInfo)&&(t.gasInfo=s.GasInfo.fromJSON(e.gasInfo)),(0,u.isSet)(e.result)&&(t.result=s.Result.fromJSON(e.result)),t},toJSON(e){const t={};return void 0!==e.gasInfo&&(t.gasInfo=e.gasInfo?s.GasInfo.toJSON(e.gasInfo):void 0),void 0!==e.result&&(t.result=e.result?s.Result.toJSON(e.result):void 0),t},fromPartial(e){const t={gasInfo:void 0,result:void 0};return void 0!==e.gasInfo&&null!==e.gasInfo&&(t.gasInfo=s.GasInfo.fromPartial(e.gasInfo)),void 0!==e.result&&null!==e.result&&(t.result=s.Result.fromPartial(e.result)),t}},t.GetTxRequest={typeUrl:"/cosmos.tx.v1beta1.GetTxRequest",encode:(e,t=c.BinaryWriter.create())=>(""!==e.hash&&t.uint32(10).string(e.hash),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={hash:""};for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.hash=r.string();else r.skipType(7&e)}return i},fromJSON(e){const t={hash:""};return(0,u.isSet)(e.hash)&&(t.hash=String(e.hash)),t},toJSON(e){const t={};return void 0!==e.hash&&(t.hash=e.hash),t},fromPartial(e){const t={hash:""};return t.hash=e.hash??"",t}},t.GetTxResponse={typeUrl:"/cosmos.tx.v1beta1.GetTxResponse",encode:(e,t=c.BinaryWriter.create())=>(void 0!==e.tx&&n.Tx.encode(e.tx,t.uint32(10).fork()).ldelim(),void 0!==e.txResponse&&s.TxResponse.encode(e.txResponse,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let i=void 0===t?r.len:r.pos+t;const o={tx:void 0,txResponse:void 0};for(;r.pos<i;){const e=r.uint32();switch(e>>>3){case 1:o.tx=n.Tx.decode(r,r.uint32());break;case 2:o.txResponse=s.TxResponse.decode(r,r.uint32());break;default:r.skipType(7&e)}}return o},fromJSON(e){const t={tx:void 0,txResponse:void 0};return(0,u.isSet)(e.tx)&&(t.tx=n.Tx.fromJSON(e.tx)),(0,u.isSet)(e.txResponse)&&(t.txResponse=s.TxResponse.fromJSON(e.txResponse)),t},toJSON(e){const t={};return void 0!==e.tx&&(t.tx=e.tx?n.Tx.toJSON(e.tx):void 0),void 0!==e.txResponse&&(t.txResponse=e.txResponse?s.TxResponse.toJSON(e.txResponse):void 0),t},fromPartial(e){const t={tx:void 0,txResponse:void 0};return void 0!==e.tx&&null!==e.tx&&(t.tx=n.Tx.fromPartial(e.tx)),void 0!==e.txResponse&&null!==e.txResponse&&(t.txResponse=s.TxResponse.fromPartial(e.txResponse)),t}},t.GetBlockWithTxsRequest={typeUrl:"/cosmos.tx.v1beta1.GetBlockWithTxsRequest",encode:(e,t=c.BinaryWriter.create())=>(e.height!==BigInt(0)&&t.uint32(8).int64(e.height),void 0!==e.pagination&&i.PageRequest.encode(e.pagination,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s=v();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.height=r.int64();break;case 2:s.pagination=i.PageRequest.decode(r,r.uint32());break;default:r.skipType(7&e)}}return s},fromJSON(e){const t=v();return(0,u.isSet)(e.height)&&(t.height=BigInt(e.height.toString())),(0,u.isSet)(e.pagination)&&(t.pagination=i.PageRequest.fromJSON(e.pagination)),t},toJSON(e){const t={};return void 0!==e.height&&(t.height=(e.height||BigInt(0)).toString()),void 0!==e.pagination&&(t.pagination=e.pagination?i.PageRequest.toJSON(e.pagination):void 0),t},fromPartial(e){const t=v();return void 0!==e.height&&null!==e.height&&(t.height=BigInt(e.height.toString())),void 0!==e.pagination&&null!==e.pagination&&(t.pagination=i.PageRequest.fromPartial(e.pagination)),t}},t.GetBlockWithTxsResponse={typeUrl:"/cosmos.tx.v1beta1.GetBlockWithTxsResponse",encode(e,t=c.BinaryWriter.create()){for(const r of e.txs)n.Tx.encode(r,t.uint32(10).fork()).ldelim();return void 0!==e.blockId&&o.BlockID.encode(e.blockId,t.uint32(18).fork()).ldelim(),void 0!==e.block&&a.Block.encode(e.block,t.uint32(26).fork()).ldelim(),void 0!==e.pagination&&i.PageResponse.encode(e.pagination,t.uint32(34).fork()).ldelim(),t},decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let s=void 0===t?r.len:r.pos+t;const u={txs:[],blockId:void 0,block:void 0,pagination:void 0};for(;r.pos<s;){const e=r.uint32();switch(e>>>3){case 1:u.txs.push(n.Tx.decode(r,r.uint32()));break;case 2:u.blockId=o.BlockID.decode(r,r.uint32());break;case 3:u.block=a.Block.decode(r,r.uint32());break;case 4:u.pagination=i.PageResponse.decode(r,r.uint32());break;default:r.skipType(7&e)}}return u},fromJSON(e){const t={txs:[],blockId:void 0,block:void 0,pagination:void 0};return Array.isArray(e?.txs)&&(t.txs=e.txs.map((e=>n.Tx.fromJSON(e)))),(0,u.isSet)(e.blockId)&&(t.blockId=o.BlockID.fromJSON(e.blockId)),(0,u.isSet)(e.block)&&(t.block=a.Block.fromJSON(e.block)),(0,u.isSet)(e.pagination)&&(t.pagination=i.PageResponse.fromJSON(e.pagination)),t},toJSON(e){const t={};return e.txs?t.txs=e.txs.map((e=>e?n.Tx.toJSON(e):void 0)):t.txs=[],void 0!==e.blockId&&(t.blockId=e.blockId?o.BlockID.toJSON(e.blockId):void 0),void 0!==e.block&&(t.block=e.block?a.Block.toJSON(e.block):void 0),void 0!==e.pagination&&(t.pagination=e.pagination?i.PageResponse.toJSON(e.pagination):void 0),t},fromPartial(e){const t={txs:[],blockId:void 0,block:void 0,pagination:void 0};return t.txs=e.txs?.map((e=>n.Tx.fromPartial(e)))||[],void 0!==e.blockId&&null!==e.blockId&&(t.blockId=o.BlockID.fromPartial(e.blockId)),void 0!==e.block&&null!==e.block&&(t.block=a.Block.fromPartial(e.block)),void 0!==e.pagination&&null!==e.pagination&&(t.pagination=i.PageResponse.fromPartial(e.pagination)),t}},t.TxDecodeRequest={typeUrl:"/cosmos.tx.v1beta1.TxDecodeRequest",encode:(e,t=c.BinaryWriter.create())=>(0!==e.txBytes.length&&t.uint32(10).bytes(e.txBytes),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i=S();for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.txBytes=r.bytes();else r.skipType(7&e)}return i},fromJSON(e){const t=S();return(0,u.isSet)(e.txBytes)&&(t.txBytes=(0,u.bytesFromBase64)(e.txBytes)),t},toJSON(e){const t={};return void 0!==e.txBytes&&(t.txBytes=(0,u.base64FromBytes)(void 0!==e.txBytes?e.txBytes:new Uint8Array)),t},fromPartial(e){const t=S();return t.txBytes=e.txBytes??new Uint8Array,t}},t.TxDecodeResponse={typeUrl:"/cosmos.tx.v1beta1.TxDecodeResponse",encode:(e,t=c.BinaryWriter.create())=>(void 0!==e.tx&&n.Tx.encode(e.tx,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let i=void 0===t?r.len:r.pos+t;const s={tx:void 0};for(;r.pos<i;){const e=r.uint32();if(e>>>3==1)s.tx=n.Tx.decode(r,r.uint32());else r.skipType(7&e)}return s},fromJSON(e){const t={tx:void 0};return(0,u.isSet)(e.tx)&&(t.tx=n.Tx.fromJSON(e.tx)),t},toJSON(e){const t={};return void 0!==e.tx&&(t.tx=e.tx?n.Tx.toJSON(e.tx):void 0),t},fromPartial(e){const t={tx:void 0};return void 0!==e.tx&&null!==e.tx&&(t.tx=n.Tx.fromPartial(e.tx)),t}},t.TxEncodeRequest={typeUrl:"/cosmos.tx.v1beta1.TxEncodeRequest",encode:(e,t=c.BinaryWriter.create())=>(void 0!==e.tx&&n.Tx.encode(e.tx,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let i=void 0===t?r.len:r.pos+t;const s={tx:void 0};for(;r.pos<i;){const e=r.uint32();if(e>>>3==1)s.tx=n.Tx.decode(r,r.uint32());else r.skipType(7&e)}return s},fromJSON(e){const t={tx:void 0};return(0,u.isSet)(e.tx)&&(t.tx=n.Tx.fromJSON(e.tx)),t},toJSON(e){const t={};return void 0!==e.tx&&(t.tx=e.tx?n.Tx.toJSON(e.tx):void 0),t},fromPartial(e){const t={tx:void 0};return void 0!==e.tx&&null!==e.tx&&(t.tx=n.Tx.fromPartial(e.tx)),t}},t.TxEncodeResponse={typeUrl:"/cosmos.tx.v1beta1.TxEncodeResponse",encode:(e,t=c.BinaryWriter.create())=>(0!==e.txBytes.length&&t.uint32(10).bytes(e.txBytes),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i=_();for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.txBytes=r.bytes();else r.skipType(7&e)}return i},fromJSON(e){const t=_();return(0,u.isSet)(e.txBytes)&&(t.txBytes=(0,u.bytesFromBase64)(e.txBytes)),t},toJSON(e){const t={};return void 0!==e.txBytes&&(t.txBytes=(0,u.base64FromBytes)(void 0!==e.txBytes?e.txBytes:new Uint8Array)),t},fromPartial(e){const t=_();return t.txBytes=e.txBytes??new Uint8Array,t}},t.TxEncodeAminoRequest={typeUrl:"/cosmos.tx.v1beta1.TxEncodeAminoRequest",encode:(e,t=c.BinaryWriter.create())=>(""!==e.aminoJson&&t.uint32(10).string(e.aminoJson),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={aminoJson:""};for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.aminoJson=r.string();else r.skipType(7&e)}return i},fromJSON(e){const t={aminoJson:""};return(0,u.isSet)(e.aminoJson)&&(t.aminoJson=String(e.aminoJson)),t},toJSON(e){const t={};return void 0!==e.aminoJson&&(t.aminoJson=e.aminoJson),t},fromPartial(e){const t={aminoJson:""};return t.aminoJson=e.aminoJson??"",t}},t.TxEncodeAminoResponse={typeUrl:"/cosmos.tx.v1beta1.TxEncodeAminoResponse",encode:(e,t=c.BinaryWriter.create())=>(0!==e.aminoBinary.length&&t.uint32(10).bytes(e.aminoBinary),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i=A();for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.aminoBinary=r.bytes();else r.skipType(7&e)}return i},fromJSON(e){const t=A();return(0,u.isSet)(e.aminoBinary)&&(t.aminoBinary=(0,u.bytesFromBase64)(e.aminoBinary)),t},toJSON(e){const t={};return void 0!==e.aminoBinary&&(t.aminoBinary=(0,u.base64FromBytes)(void 0!==e.aminoBinary?e.aminoBinary:new Uint8Array)),t},fromPartial(e){const t=A();return t.aminoBinary=e.aminoBinary??new Uint8Array,t}},t.TxDecodeAminoRequest={typeUrl:"/cosmos.tx.v1beta1.TxDecodeAminoRequest",encode:(e,t=c.BinaryWriter.create())=>(0!==e.aminoBinary.length&&t.uint32(10).bytes(e.aminoBinary),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i=E();for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.aminoBinary=r.bytes();else r.skipType(7&e)}return i},fromJSON(e){const t=E();return(0,u.isSet)(e.aminoBinary)&&(t.aminoBinary=(0,u.bytesFromBase64)(e.aminoBinary)),t},toJSON(e){const t={};return void 0!==e.aminoBinary&&(t.aminoBinary=(0,u.base64FromBytes)(void 0!==e.aminoBinary?e.aminoBinary:new Uint8Array)),t},fromPartial(e){const t=E();return t.aminoBinary=e.aminoBinary??new Uint8Array,t}},t.TxDecodeAminoResponse={typeUrl:"/cosmos.tx.v1beta1.TxDecodeAminoResponse",encode:(e,t=c.BinaryWriter.create())=>(""!==e.aminoJson&&t.uint32(10).string(e.aminoJson),t),decode(e,t){const r=e instanceof c.BinaryReader?e:new c.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const i={aminoJson:""};for(;r.pos<n;){const e=r.uint32();if(e>>>3==1)i.aminoJson=r.string();else r.skipType(7&e)}return i},fromJSON(e){const t={aminoJson:""};return(0,u.isSet)(e.aminoJson)&&(t.aminoJson=String(e.aminoJson)),t},toJSON(e){const t={};return void 0!==e.aminoJson&&(t.aminoJson=e.aminoJson),t},fromPartial(e){const t={aminoJson:""};return t.aminoJson=e.aminoJson??"",t}};t.ServiceClientImpl=class{constructor(e){this.rpc=e,this.Simulate=this.Simulate.bind(this),this.GetTx=this.GetTx.bind(this),this.BroadcastTx=this.BroadcastTx.bind(this),this.GetTxsEvent=this.GetTxsEvent.bind(this),this.GetBlockWithTxs=this.GetBlockWithTxs.bind(this),this.TxDecode=this.TxDecode.bind(this),this.TxEncode=this.TxEncode.bind(this),this.TxEncodeAmino=this.TxEncodeAmino.bind(this),this.TxDecodeAmino=this.TxDecodeAmino.bind(this)}Simulate(e){const r=t.SimulateRequest.encode(e).finish();return this.rpc.request("cosmos.tx.v1beta1.Service","Simulate",r).then((e=>t.SimulateResponse.decode(new c.BinaryReader(e))))}GetTx(e){const r=t.GetTxRequest.encode(e).finish();return this.rpc.request("cosmos.tx.v1beta1.Service","GetTx",r).then((e=>t.GetTxResponse.decode(new c.BinaryReader(e))))}BroadcastTx(e){const r=t.BroadcastTxRequest.encode(e).finish();return this.rpc.request("cosmos.tx.v1beta1.Service","BroadcastTx",r).then((e=>t.BroadcastTxResponse.decode(new c.BinaryReader(e))))}GetTxsEvent(e){const r=t.GetTxsEventRequest.encode(e).finish();return this.rpc.request("cosmos.tx.v1beta1.Service","GetTxsEvent",r).then((e=>t.GetTxsEventResponse.decode(new c.BinaryReader(e))))}GetBlockWithTxs(e){const r=t.GetBlockWithTxsRequest.encode(e).finish();return this.rpc.request("cosmos.tx.v1beta1.Service","GetBlockWithTxs",r).then((e=>t.GetBlockWithTxsResponse.decode(new c.BinaryReader(e))))}TxDecode(e){const r=t.TxDecodeRequest.encode(e).finish();return this.rpc.request("cosmos.tx.v1beta1.Service","TxDecode",r).then((e=>t.TxDecodeResponse.decode(new c.BinaryReader(e))))}TxEncode(e){const r=t.TxEncodeRequest.encode(e).finish();return this.rpc.request("cosmos.tx.v1beta1.Service","TxEncode",r).then((e=>t.TxEncodeResponse.decode(new c.BinaryReader(e))))}TxEncodeAmino(e){const r=t.TxEncodeAminoRequest.encode(e).finish();return this.rpc.request("cosmos.tx.v1beta1.Service","TxEncodeAmino",r).then((e=>t.TxEncodeAminoResponse.decode(new c.BinaryReader(e))))}TxDecodeAmino(e){const r=t.TxDecodeAminoRequest.encode(e).finish();return this.rpc.request("cosmos.tx.v1beta1.Service","TxDecodeAmino",r).then((e=>t.TxDecodeAminoResponse.decode(new c.BinaryReader(e))))}}},81386:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Acknowledgement=t.PacketId=t.PacketState=t.Packet=t.Counterparty=t.IdentifiedChannel=t.Channel=t.orderToJSON=t.orderFromJSON=t.Order=t.stateToJSON=t.stateFromJSON=t.State=t.protobufPackage=void 0;const n=r(51178),i=r(50287),s=r(42825);var o,a;function c(e){switch(e){case 0:case"STATE_UNINITIALIZED_UNSPECIFIED":return o.STATE_UNINITIALIZED_UNSPECIFIED;case 1:case"STATE_INIT":return o.STATE_INIT;case 2:case"STATE_TRYOPEN":return o.STATE_TRYOPEN;case 3:case"STATE_OPEN":return o.STATE_OPEN;case 4:case"STATE_CLOSED":return o.STATE_CLOSED;default:return o.UNRECOGNIZED}}function u(e){switch(e){case o.STATE_UNINITIALIZED_UNSPECIFIED:return"STATE_UNINITIALIZED_UNSPECIFIED";case o.STATE_INIT:return"STATE_INIT";case o.STATE_TRYOPEN:return"STATE_TRYOPEN";case o.STATE_OPEN:return"STATE_OPEN";case o.STATE_CLOSED:return"STATE_CLOSED";case o.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function l(e){switch(e){case 0:case"ORDER_NONE_UNSPECIFIED":return a.ORDER_NONE_UNSPECIFIED;case 1:case"ORDER_UNORDERED":return a.ORDER_UNORDERED;case 2:case"ORDER_ORDERED":return a.ORDER_ORDERED;default:return a.UNRECOGNIZED}}function h(e){switch(e){case a.ORDER_NONE_UNSPECIFIED:return"ORDER_NONE_UNSPECIFIED";case a.ORDER_UNORDERED:return"ORDER_UNORDERED";case a.ORDER_ORDERED:return"ORDER_ORDERED";case a.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function d(){return{state:0,ordering:0,counterparty:t.Counterparty.fromPartial({}),connectionHops:[],version:""}}function f(){return{state:0,ordering:0,counterparty:t.Counterparty.fromPartial({}),connectionHops:[],version:"",portId:"",channelId:""}}function p(){return{sequence:BigInt(0),sourcePort:"",sourceChannel:"",destinationPort:"",destinationChannel:"",data:new Uint8Array,timeoutHeight:n.Height.fromPartial({}),timeoutTimestamp:BigInt(0)}}function g(){return{portId:"",channelId:"",sequence:BigInt(0),data:new Uint8Array}}function m(){return{portId:"",channelId:"",sequence:BigInt(0)}}t.protobufPackage="ibc.core.channel.v1",function(e){e[e.STATE_UNINITIALIZED_UNSPECIFIED=0]="STATE_UNINITIALIZED_UNSPECIFIED",e[e.STATE_INIT=1]="STATE_INIT",e[e.STATE_TRYOPEN=2]="STATE_TRYOPEN",e[e.STATE_OPEN=3]="STATE_OPEN",e[e.STATE_CLOSED=4]="STATE_CLOSED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(o||(t.State=o={})),t.stateFromJSON=c,t.stateToJSON=u,function(e){e[e.ORDER_NONE_UNSPECIFIED=0]="ORDER_NONE_UNSPECIFIED",e[e.ORDER_UNORDERED=1]="ORDER_UNORDERED",e[e.ORDER_ORDERED=2]="ORDER_ORDERED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(a||(t.Order=a={})),t.orderFromJSON=l,t.orderToJSON=h,t.Channel={typeUrl:"/ibc.core.channel.v1.Channel",encode(e,r=i.BinaryWriter.create()){0!==e.state&&r.uint32(8).int32(e.state),0!==e.ordering&&r.uint32(16).int32(e.ordering),void 0!==e.counterparty&&t.Counterparty.encode(e.counterparty,r.uint32(26).fork()).ldelim();for(const t of e.connectionHops)r.uint32(34).string(t);return""!==e.version&&r.uint32(42).string(e.version),r},decode(e,r){const n=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let s=void 0===r?n.len:n.pos+r;const o=d();for(;n.pos<s;){const e=n.uint32();switch(e>>>3){case 1:o.state=n.int32();break;case 2:o.ordering=n.int32();break;case 3:o.counterparty=t.Counterparty.decode(n,n.uint32());break;case 4:o.connectionHops.push(n.string());break;case 5:o.version=n.string();break;default:n.skipType(7&e)}}return o},fromJSON(e){const r=d();return(0,s.isSet)(e.state)&&(r.state=c(e.state)),(0,s.isSet)(e.ordering)&&(r.ordering=l(e.ordering)),(0,s.isSet)(e.counterparty)&&(r.counterparty=t.Counterparty.fromJSON(e.counterparty)),Array.isArray(e?.connectionHops)&&(r.connectionHops=e.connectionHops.map((e=>String(e)))),(0,s.isSet)(e.version)&&(r.version=String(e.version)),r},toJSON(e){const r={};return void 0!==e.state&&(r.state=u(e.state)),void 0!==e.ordering&&(r.ordering=h(e.ordering)),void 0!==e.counterparty&&(r.counterparty=e.counterparty?t.Counterparty.toJSON(e.counterparty):void 0),e.connectionHops?r.connectionHops=e.connectionHops.map((e=>e)):r.connectionHops=[],void 0!==e.version&&(r.version=e.version),r},fromPartial(e){const r=d();return r.state=e.state??0,r.ordering=e.ordering??0,void 0!==e.counterparty&&null!==e.counterparty&&(r.counterparty=t.Counterparty.fromPartial(e.counterparty)),r.connectionHops=e.connectionHops?.map((e=>e))||[],r.version=e.version??"",r}},t.IdentifiedChannel={typeUrl:"/ibc.core.channel.v1.IdentifiedChannel",encode(e,r=i.BinaryWriter.create()){0!==e.state&&r.uint32(8).int32(e.state),0!==e.ordering&&r.uint32(16).int32(e.ordering),void 0!==e.counterparty&&t.Counterparty.encode(e.counterparty,r.uint32(26).fork()).ldelim();for(const t of e.connectionHops)r.uint32(34).string(t);return""!==e.version&&r.uint32(42).string(e.version),""!==e.portId&&r.uint32(50).string(e.portId),""!==e.channelId&&r.uint32(58).string(e.channelId),r},decode(e,r){const n=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let s=void 0===r?n.len:n.pos+r;const o=f();for(;n.pos<s;){const e=n.uint32();switch(e>>>3){case 1:o.state=n.int32();break;case 2:o.ordering=n.int32();break;case 3:o.counterparty=t.Counterparty.decode(n,n.uint32());break;case 4:o.connectionHops.push(n.string());break;case 5:o.version=n.string();break;case 6:o.portId=n.string();break;case 7:o.channelId=n.string();break;default:n.skipType(7&e)}}return o},fromJSON(e){const r=f();return(0,s.isSet)(e.state)&&(r.state=c(e.state)),(0,s.isSet)(e.ordering)&&(r.ordering=l(e.ordering)),(0,s.isSet)(e.counterparty)&&(r.counterparty=t.Counterparty.fromJSON(e.counterparty)),Array.isArray(e?.connectionHops)&&(r.connectionHops=e.connectionHops.map((e=>String(e)))),(0,s.isSet)(e.version)&&(r.version=String(e.version)),(0,s.isSet)(e.portId)&&(r.portId=String(e.portId)),(0,s.isSet)(e.channelId)&&(r.channelId=String(e.channelId)),r},toJSON(e){const r={};return void 0!==e.state&&(r.state=u(e.state)),void 0!==e.ordering&&(r.ordering=h(e.ordering)),void 0!==e.counterparty&&(r.counterparty=e.counterparty?t.Counterparty.toJSON(e.counterparty):void 0),e.connectionHops?r.connectionHops=e.connectionHops.map((e=>e)):r.connectionHops=[],void 0!==e.version&&(r.version=e.version),void 0!==e.portId&&(r.portId=e.portId),void 0!==e.channelId&&(r.channelId=e.channelId),r},fromPartial(e){const r=f();return r.state=e.state??0,r.ordering=e.ordering??0,void 0!==e.counterparty&&null!==e.counterparty&&(r.counterparty=t.Counterparty.fromPartial(e.counterparty)),r.connectionHops=e.connectionHops?.map((e=>e))||[],r.version=e.version??"",r.portId=e.portId??"",r.channelId=e.channelId??"",r}},t.Counterparty={typeUrl:"/ibc.core.channel.v1.Counterparty",encode:(e,t=i.BinaryWriter.create())=>(""!==e.portId&&t.uint32(10).string(e.portId),""!==e.channelId&&t.uint32(18).string(e.channelId),t),decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s={portId:"",channelId:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.portId=r.string();break;case 2:s.channelId=r.string();break;default:r.skipType(7&e)}}return s},fromJSON(e){const t={portId:"",channelId:""};return(0,s.isSet)(e.portId)&&(t.portId=String(e.portId)),(0,s.isSet)(e.channelId)&&(t.channelId=String(e.channelId)),t},toJSON(e){const t={};return void 0!==e.portId&&(t.portId=e.portId),void 0!==e.channelId&&(t.channelId=e.channelId),t},fromPartial(e){const t={portId:"",channelId:""};return t.portId=e.portId??"",t.channelId=e.channelId??"",t}},t.Packet={typeUrl:"/ibc.core.channel.v1.Packet",encode:(e,t=i.BinaryWriter.create())=>(e.sequence!==BigInt(0)&&t.uint32(8).uint64(e.sequence),""!==e.sourcePort&&t.uint32(18).string(e.sourcePort),""!==e.sourceChannel&&t.uint32(26).string(e.sourceChannel),""!==e.destinationPort&&t.uint32(34).string(e.destinationPort),""!==e.destinationChannel&&t.uint32(42).string(e.destinationChannel),0!==e.data.length&&t.uint32(50).bytes(e.data),void 0!==e.timeoutHeight&&n.Height.encode(e.timeoutHeight,t.uint32(58).fork()).ldelim(),e.timeoutTimestamp!==BigInt(0)&&t.uint32(64).uint64(e.timeoutTimestamp),t),decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let s=void 0===t?r.len:r.pos+t;const o=p();for(;r.pos<s;){const e=r.uint32();switch(e>>>3){case 1:o.sequence=r.uint64();break;case 2:o.sourcePort=r.string();break;case 3:o.sourceChannel=r.string();break;case 4:o.destinationPort=r.string();break;case 5:o.destinationChannel=r.string();break;case 6:o.data=r.bytes();break;case 7:o.timeoutHeight=n.Height.decode(r,r.uint32());break;case 8:o.timeoutTimestamp=r.uint64();break;default:r.skipType(7&e)}}return o},fromJSON(e){const t=p();return(0,s.isSet)(e.sequence)&&(t.sequence=BigInt(e.sequence.toString())),(0,s.isSet)(e.sourcePort)&&(t.sourcePort=String(e.sourcePort)),(0,s.isSet)(e.sourceChannel)&&(t.sourceChannel=String(e.sourceChannel)),(0,s.isSet)(e.destinationPort)&&(t.destinationPort=String(e.destinationPort)),(0,s.isSet)(e.destinationChannel)&&(t.destinationChannel=String(e.destinationChannel)),(0,s.isSet)(e.data)&&(t.data=(0,s.bytesFromBase64)(e.data)),(0,s.isSet)(e.timeoutHeight)&&(t.timeoutHeight=n.Height.fromJSON(e.timeoutHeight)),(0,s.isSet)(e.timeoutTimestamp)&&(t.timeoutTimestamp=BigInt(e.timeoutTimestamp.toString())),t},toJSON(e){const t={};return void 0!==e.sequence&&(t.sequence=(e.sequence||BigInt(0)).toString()),void 0!==e.sourcePort&&(t.sourcePort=e.sourcePort),void 0!==e.sourceChannel&&(t.sourceChannel=e.sourceChannel),void 0!==e.destinationPort&&(t.destinationPort=e.destinationPort),void 0!==e.destinationChannel&&(t.destinationChannel=e.destinationChannel),void 0!==e.data&&(t.data=(0,s.base64FromBytes)(void 0!==e.data?e.data:new Uint8Array)),void 0!==e.timeoutHeight&&(t.timeoutHeight=e.timeoutHeight?n.Height.toJSON(e.timeoutHeight):void 0),void 0!==e.timeoutTimestamp&&(t.timeoutTimestamp=(e.timeoutTimestamp||BigInt(0)).toString()),t},fromPartial(e){const t=p();return void 0!==e.sequence&&null!==e.sequence&&(t.sequence=BigInt(e.sequence.toString())),t.sourcePort=e.sourcePort??"",t.sourceChannel=e.sourceChannel??"",t.destinationPort=e.destinationPort??"",t.destinationChannel=e.destinationChannel??"",t.data=e.data??new Uint8Array,void 0!==e.timeoutHeight&&null!==e.timeoutHeight&&(t.timeoutHeight=n.Height.fromPartial(e.timeoutHeight)),void 0!==e.timeoutTimestamp&&null!==e.timeoutTimestamp&&(t.timeoutTimestamp=BigInt(e.timeoutTimestamp.toString())),t}},t.PacketState={typeUrl:"/ibc.core.channel.v1.PacketState",encode:(e,t=i.BinaryWriter.create())=>(""!==e.portId&&t.uint32(10).string(e.portId),""!==e.channelId&&t.uint32(18).string(e.channelId),e.sequence!==BigInt(0)&&t.uint32(24).uint64(e.sequence),0!==e.data.length&&t.uint32(34).bytes(e.data),t),decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s=g();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.portId=r.string();break;case 2:s.channelId=r.string();break;case 3:s.sequence=r.uint64();break;case 4:s.data=r.bytes();break;default:r.skipType(7&e)}}return s},fromJSON(e){const t=g();return(0,s.isSet)(e.portId)&&(t.portId=String(e.portId)),(0,s.isSet)(e.channelId)&&(t.channelId=String(e.channelId)),(0,s.isSet)(e.sequence)&&(t.sequence=BigInt(e.sequence.toString())),(0,s.isSet)(e.data)&&(t.data=(0,s.bytesFromBase64)(e.data)),t},toJSON(e){const t={};return void 0!==e.portId&&(t.portId=e.portId),void 0!==e.channelId&&(t.channelId=e.channelId),void 0!==e.sequence&&(t.sequence=(e.sequence||BigInt(0)).toString()),void 0!==e.data&&(t.data=(0,s.base64FromBytes)(void 0!==e.data?e.data:new Uint8Array)),t},fromPartial(e){const t=g();return t.portId=e.portId??"",t.channelId=e.channelId??"",void 0!==e.sequence&&null!==e.sequence&&(t.sequence=BigInt(e.sequence.toString())),t.data=e.data??new Uint8Array,t}},t.PacketId={typeUrl:"/ibc.core.channel.v1.PacketId",encode:(e,t=i.BinaryWriter.create())=>(""!==e.portId&&t.uint32(10).string(e.portId),""!==e.channelId&&t.uint32(18).string(e.channelId),e.sequence!==BigInt(0)&&t.uint32(24).uint64(e.sequence),t),decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s=m();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.portId=r.string();break;case 2:s.channelId=r.string();break;case 3:s.sequence=r.uint64();break;default:r.skipType(7&e)}}return s},fromJSON(e){const t=m();return(0,s.isSet)(e.portId)&&(t.portId=String(e.portId)),(0,s.isSet)(e.channelId)&&(t.channelId=String(e.channelId)),(0,s.isSet)(e.sequence)&&(t.sequence=BigInt(e.sequence.toString())),t},toJSON(e){const t={};return void 0!==e.portId&&(t.portId=e.portId),void 0!==e.channelId&&(t.channelId=e.channelId),void 0!==e.sequence&&(t.sequence=(e.sequence||BigInt(0)).toString()),t},fromPartial(e){const t=m();return t.portId=e.portId??"",t.channelId=e.channelId??"",void 0!==e.sequence&&null!==e.sequence&&(t.sequence=BigInt(e.sequence.toString())),t}},t.Acknowledgement={typeUrl:"/ibc.core.channel.v1.Acknowledgement",encode:(e,t=i.BinaryWriter.create())=>(void 0!==e.result&&t.uint32(170).bytes(e.result),void 0!==e.error&&t.uint32(178).string(e.error),t),decode(e,t){const r=e instanceof i.BinaryReader?e:new i.BinaryReader(e);let n=void 0===t?r.len:r.pos+t;const s={result:void 0,error:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 21:s.result=r.bytes();break;case 22:s.error=r.string();break;default:r.skipType(7&e)}}return s},fromJSON(e){const t={result:void 0,error:void 0};return(0,s.isSet)(e.result)&&(t.result=(0,s.bytesFromBase64)(e.result)),(0,s.isSet)(e.error)&&(t.error=String(e.error)),t},toJSON(e){const t={};return void 0!==e.result&&(t.result=void 0!==e.result?(0,s.base64FromBytes)(e.result):void 0),void 0!==e.error&&(t.error=e.error),t},fromPartial(e){const t={result:void 0,error:void 0};return t.result=e.result??void 0,t.error=e.error??void 0,t}}},74945:function(e,t){var r="undefined"!=typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(r.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e=String(e)),e}function a(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function l(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function h(e){var t=new FileReader,r=l(t);return t.readAsArrayBuffer(e),r}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))?this._bodyArrayBuffer=d(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var e,t,r,n=u(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=l(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(e,t){e=s(e),t=o(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},c.prototype.delete=function(e){delete this.map[s(e)]},c.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},c.prototype.set=function(e,t){this.map[s(e)]=o(t)},c.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},c.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),a(e)},c.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),a(e)},c.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),a(e)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){var r,n,i=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),p.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function m(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function y(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},f.call(g.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];y.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function w(e,n){return new Promise((function(i,s){var o=new g(e,n);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new c,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;i(new y(n,r))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r.blob&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",u)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}w.polyfill=!0,e.fetch||(e.fetch=w,e.Headers=c,e.Request=g,e.Response=y),t.Headers=c,t.Request=g,t.Response=y,t.fetch=w,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},21423:function(e,t,r){"use strict";r.d(t,{wE:function(){return E}});var n=r(97217);e=r.hmd(e);var i=r(96763);let s;const o=new Array(128).fill(void 0);function a(e){return o[e]}o.push(void 0,null,!0,!1);let c=o.length;function u(e){const t=a(e);return function(e){e<132||(o[e]=c,c=e)}(e),t}let l=0,h=null;function d(){return null!==h&&0!==h.byteLength||(h=new Uint8Array(s.memory.buffer)),h}const f="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},p="function"==typeof f.encodeInto?function(e,t){return f.encodeInto(e,t)}:function(e,t){const r=f.encode(e);return t.set(r),{read:e.length,written:r.length}};function g(e,t,r){if(void 0===r){const r=f.encode(e),n=t(r.length,1)>>>0;return d().subarray(n,n+r.length).set(r),l=r.length,n}let n=e.length,i=t(n,1)>>>0;const s=d();let o=0;for(;o<n;o++){const t=e.charCodeAt(o);if(t>127)break;s[i+o]=t}if(o!==n){0!==o&&(e=e.slice(o)),i=r(i,n,n=o+3*e.length,1)>>>0;const t=d().subarray(i+o,i+n);o+=p(e,t).written,i=r(i,n,o,1)>>>0}return l=o,i}let m=null;function y(){return null!==m&&0!==m.byteLength||(m=new Int32Array(s.memory.buffer)),m}function b(e){c===o.length&&o.push(o.length+1);const t=c;return c=o[t],o[t]=e,t}const w="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};function v(e,t){return e>>>=0,w.decode(d().subarray(e,e+t))}function S(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let r="[";t>0&&(r+=S(e[0]));for(let n=1;n<t;n++)r+=", "+S(e[n]);return r+="]",r}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let n;if(!(r.length>1))return toString.call(e);if(n=r[1],"Object"==n)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:n}"undefined"!=typeof TextDecoder&&w.decode();const _="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>{s.__wbindgen_export_2.get(e.dtor)(e.a,e.b)}));function A(e,t,r){s._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hf3cea9750e4420ef(e,t,b(r))}function E(e,t){return u(s.compile(b(e),b(t)))}function x(e,t){try{return e.apply(this,t)}catch(e){s.__wbindgen_exn_store(b(e))}}function k(){const t={wbg:{}};return t.wbg.__wbindgen_is_undefined=function(e){return void 0===a(e)},t.wbg.__wbg_log_af664d6e0fce87fe=function(e,t){i.log(v(e,t))},t.wbg.__wbindgen_object_drop_ref=function(e){u(e)},t.wbg.__wbg_jsCyberSearch_31ae9a5f5af464bc=function(e,t){return b((0,n.Bn)(v(e,t)))},t.wbg.__wbg_jsCyberLink_2bba38538259dfae=function(e,t,r,i){return b((0,n.lJ)(v(e,t),v(r,i)))},t.wbg.__wbg_jsGetPassportByNickname_66cc923b007c77b2=function(e,t){return b((0,n.xm)(v(e,t)))},t.wbg.__wbg_jsGetIpfsTextContent_0dd3748b1688b10e=function(e,t){return b((0,n.So)(v(e,t)))},t.wbg.__wbg_jsAddContenToIpfs_3d1cb5924c163cfe=function(e,t){return b((0,n.rz)(v(e,t)))},t.wbg.__wbg_jsEvalScriptFromIpfs_559b685caaa5f15f=function(e,t,r,i,s){return b((0,n.bn)(v(e,t),v(r,i),a(s)))},t.wbg.__wbg_jsOpenAICompletions_45a2730c765a747c=function(e,t,r,i,s){return b((0,n.TC)(a(e),v(t,r),a(i),a(s)))},t.wbg.__wbg_jsSearchByEmbedding_c6fa1395fdaec250=function(e,t,r){return b((0,n.YD)(v(e,t),r>>>0))},t.wbg.__wbg_jsCyberLinksFrom_358af52be69ceae6=function(e,t){return b((0,n._4)(v(e,t)))},t.wbg.__wbg_jsCyberLinksTo_0856ca22f5524370=function(e,t){return b((0,n.vZ)(v(e,t)))},t.wbg.__wbg_jsExecuteScriptCallback_5ea4658c68e04549=function(e,t,r){return b((0,n.Df)(v(e,t),a(r)))},t.wbg.__wbindgen_string_get=function(e,t){const r=a(t),n="string"==typeof r?r:void 0;var i=null==n?0:g(n,s.__wbindgen_malloc,s.__wbindgen_realloc),o=l;y()[e/4+1]=o,y()[e/4+0]=i},t.wbg.__wbindgen_object_clone_ref=function(e){return b(a(e))},t.wbg.__wbindgen_string_new=function(e,t){return b(v(e,t))},t.wbg.__wbg_fetch_57429b87be3dcc33=function(e){return b(fetch(a(e)))},t.wbg.__wbindgen_is_object=function(e){const t=a(e);return"object"==typeof t&&null!==t},t.wbg.__wbg_crypto_70a96de3b6b73dac=function(e){return b(a(e).crypto)},t.wbg.__wbg_process_dd1577445152112e=function(e){return b(a(e).process)},t.wbg.__wbg_versions_58036bec3add9e6f=function(e){return b(a(e).versions)},t.wbg.__wbg_node_6a9d28205ed5b0d8=function(e){return b(a(e).node)},t.wbg.__wbindgen_is_string=function(e){return"string"==typeof a(e)},t.wbg.__wbg_require_f05d779769764e82=function(){return x((function(){return b(e.require)}),arguments)},t.wbg.__wbg_msCrypto_adbc770ec9eca9c7=function(e){return b(a(e).msCrypto)},t.wbg.__wbg_randomFillSync_e950366c42764a07=function(){return x((function(e,t){a(e).randomFillSync(u(t))}),arguments)},t.wbg.__wbg_getRandomValues_3774744e221a22ad=function(){return x((function(e,t){a(e).getRandomValues(a(t))}),arguments)},t.wbg.__wbg_new_abda76e883ba8a5f=function(){return b(new Error)},t.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const r=g(a(t).stack,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;y()[e/4+1]=n,y()[e/4+0]=r},t.wbg.__wbg_error_f851667af71bcfc6=function(e,t){let r,n;try{r=e,n=t,i.error(v(e,t))}finally{s.__wbindgen_free(r,n,1)}},t.wbg.__wbindgen_cb_drop=function(e){const t=u(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},t.wbg.__wbg_signal_bcb55e86063f8860=function(e){return b(a(e).signal)},t.wbg.__wbg_new_668956ac1089f8cf=function(){return x((function(){return b(new AbortController)}),arguments)},t.wbg.__wbg_abort_de75e4ab5136bcee=function(e){a(e).abort()},t.wbg.__wbg_new_143b41b4342650bb=function(){return x((function(){return b(new Headers)}),arguments)},t.wbg.__wbg_append_fac652007989b765=function(){return x((function(e,t,r,n,i){a(e).append(v(t,r),v(n,i))}),arguments)},t.wbg.__wbg_newwithstrandinit_a4cd16dfaafcf625=function(){return x((function(e,t,r){return b(new Request(v(e,t),a(r)))}),arguments)},t.wbg.__wbg_instanceof_Response_7ade9a5a066d1a55=function(e){let t;try{t=a(e)instanceof Response}catch(e){t=!1}return t},t.wbg.__wbg_url_59cb32ef6a837521=function(e,t){const r=g(a(t).url,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;y()[e/4+1]=n,y()[e/4+0]=r},t.wbg.__wbg_status_d2b2d0889f7e970f=function(e){return a(e).status},t.wbg.__wbg_headers_2de03c88f895093b=function(e){return b(a(e).headers)},t.wbg.__wbg_arrayBuffer_2693673868da65b7=function(){return x((function(e){return b(a(e).arrayBuffer())}),arguments)},t.wbg.__wbg_text_65fa1887e8f7b4ac=function(){return x((function(e){return b(a(e).text())}),arguments)},t.wbg.__wbg_fetch_621998933558ad27=function(e,t){return b(a(e).fetch(a(t)))},t.wbg.__wbindgen_is_function=function(e){return"function"==typeof a(e)},t.wbg.__wbg_self_742dd6eab3e9211e=function(){return x((function(){return b(self.self)}),arguments)},t.wbg.__wbg_window_c409e731db53a0e2=function(){return x((function(){return b(window.window)}),arguments)},t.wbg.__wbg_globalThis_b70c095388441f2d=function(){return x((function(){return b(globalThis.globalThis)}),arguments)},t.wbg.__wbg_global_1c72617491ed7194=function(){return x((function(){return b(r.g.global)}),arguments)},t.wbg.__wbg_newnoargs_c9e6043b8ad84109=function(e,t){return b(new Function(v(e,t)))},t.wbg.__wbg_next_f4bc0e96ea67da68=function(e){return b(a(e).next)},t.wbg.__wbg_value_2f4ef2036bfad28e=function(e){return b(a(e).value)},t.wbg.__wbg_iterator_7c7e58f62eb84700=function(){return b(Symbol.iterator)},t.wbg.__wbg_new_2b6fea4ea03b1b95=function(){return b(new Object)},t.wbg.__wbg_call_557a2f2deacc4912=function(){return x((function(e,t){return b(a(e).call(a(t)))}),arguments)},t.wbg.__wbg_call_587b30eea3e09332=function(){return x((function(e,t,r){return b(a(e).call(a(t),a(r)))}),arguments)},t.wbg.__wbg_next_ec061e48a0e72a96=function(){return x((function(e){return b(a(e).next())}),arguments)},t.wbg.__wbg_done_b6abb27d42b63867=function(e){return a(e).done},t.wbg.__wbg_get_f53c921291c381bd=function(){return x((function(e,t){return b(Reflect.get(a(e),a(t)))}),arguments)},t.wbg.__wbg_has_40b8c976775c8ead=function(){return x((function(e,t){return Reflect.has(a(e),a(t))}),arguments)},t.wbg.__wbg_set_07da13cc24b69217=function(){return x((function(e,t,r){return Reflect.set(a(e),a(t),a(r))}),arguments)},t.wbg.__wbg_buffer_55ba7a6b1b92e2ac=function(e){return b(a(e).buffer)},t.wbg.__wbg_parse_76a8a18ca3f8730b=function(){return x((function(e,t){return b(JSON.parse(v(e,t)))}),arguments)},t.wbg.__wbg_stringify_d06ad2addc54d51e=function(){return x((function(e){return b(JSON.stringify(a(e)))}),arguments)},t.wbg.__wbg_new_2b55e405e4af4986=function(e,t){try{var r={a:e,b:t};const n=new Promise(((e,t)=>{const n=r.a;r.a=0;try{return function(e,t,r,n){s.wasm_bindgen__convert__closures__invoke2_mut__h55069aa6b66204e3(e,t,b(r),b(n))}(n,r.b,e,t)}finally{r.a=n}}));return b(n)}finally{r.a=r.b=0}},t.wbg.__wbg_resolve_ae38ad63c43ff98b=function(e){return b(Promise.resolve(a(e)))},t.wbg.__wbg_then_8df675b8bb5d5e3c=function(e,t){return b(a(e).then(a(t)))},t.wbg.__wbg_then_835b073a479138e5=function(e,t,r){return b(a(e).then(a(t),a(r)))},t.wbg.__wbg_newwithbyteoffsetandlength_88d1d8be5df94b9b=function(e,t,r){return b(new Uint8Array(a(e),t>>>0,r>>>0))},t.wbg.__wbg_new_09938a7d020f049b=function(e){return b(new Uint8Array(a(e)))},t.wbg.__wbg_newwithlength_89eeca401d8918c2=function(e){return b(new Uint8Array(e>>>0))},t.wbg.__wbg_subarray_d82be056deb4ad27=function(e,t,r){return b(a(e).subarray(t>>>0,r>>>0))},t.wbg.__wbg_length_0aab7ffd65ad19ed=function(e){return a(e).length},t.wbg.__wbg_set_3698e3ca519b3c3c=function(e,t,r){a(e).set(a(t),r>>>0)},t.wbg.__wbindgen_debug_string=function(e,t){const r=g(S(a(t)),s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;y()[e/4+1]=n,y()[e/4+0]=r},t.wbg.__wbindgen_throw=function(e,t){throw new Error(v(e,t))},t.wbg.__wbindgen_memory=function(){return b(s.memory)},t.wbg.__wbindgen_closure_wrapper2123=function(e,t,r){const n=function(e,t,r,n){const i={a:e,b:t,cnt:1,dtor:r},o=(...e)=>{i.cnt++;const t=i.a;i.a=0;try{return n(t,i.b,...e)}finally{0==--i.cnt?(s.__wbindgen_export_2.get(i.dtor)(t,i.b),_.unregister(i)):i.a=t}};return o.original=i,_.register(o,i,i),o}(e,t,604,A);return b(n)},t}function T(e,t){return s=e.exports,I.__wbindgen_wasm_module=t,m=null,h=null,s.__wbindgen_start(),s}async function I(e){if(void 0!==s)return s;void 0===e&&(e=new URL(r(43827),r.b));const t=k();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:o}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;i.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{const r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}(await e,t);return T(n,o)}t.Ay=I},54075:function(e,t,r){var n;!function(i){"use strict";var s,o,a,c=(s=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,o=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g,function(e,t,r,n){if(1!==arguments.length||"string"!==(null===(i=e)?"null":void 0===i?"undefined":"object"!=typeof i?typeof i:Array.isArray(i)?"array":{}.toString.call(i).slice(8,-1).toLowerCase())||/\d/.test(e)||(t=e,e=void 0),(e=e||new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var i,l=(t=String(c.masks[t]||t||c.masks.default)).slice(0,4);"UTC:"!==l&&"GMT:"!==l||(t=t.slice(4),r=!0,"GMT:"===l&&(n=!0));var h=r?"getUTC":"get",d=e[h+"Date"](),f=e[h+"Day"](),p=e[h+"Month"](),g=e[h+"FullYear"](),m=e[h+"Hours"](),y=e[h+"Minutes"](),b=e[h+"Seconds"](),w=e[h+"Milliseconds"](),v=r?0:e.getTimezoneOffset(),S=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);var n=t.getTimezoneOffset()-r.getTimezoneOffset();t.setHours(t.getHours()-n);var i=(t-r)/6048e5;return 1+Math.floor(i)}(e),_=function(e){var t=e.getDay();return 0===t&&(t=7),t}(e),A={d:d,dd:u(d),ddd:c.i18n.dayNames[f],dddd:c.i18n.dayNames[f+7],m:p+1,mm:u(p+1),mmm:c.i18n.monthNames[p],mmmm:c.i18n.monthNames[p+12],yy:String(g).slice(2),yyyy:g,h:m%12||12,hh:u(m%12||12),H:m,HH:u(m),M:y,MM:u(y),s:b,ss:u(b),l:u(w,3),L:u(Math.round(w/10)),t:m<12?c.i18n.timeNames[0]:c.i18n.timeNames[1],tt:m<12?c.i18n.timeNames[2]:c.i18n.timeNames[3],T:m<12?c.i18n.timeNames[4]:c.i18n.timeNames[5],TT:m<12?c.i18n.timeNames[6]:c.i18n.timeNames[7],Z:n?"GMT":r?"UTC":(String(e).match(o)||[""]).pop().replace(a,""),o:(v>0?"-":"+")+u(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10],W:S,N:_};return t.replace(s,(function(e){return e in A?A[e]:e.slice(1,e.length-1)}))});function u(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}c.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},c.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},void 0===(n=function(){return c}.call(t,r,t,e))||(e.exports=n)}()},28e3:function(e){var t=1e3,r=60*t,n=60*r,i=24*n,s=7*i,o=365.25*i;function a(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,c){c=c||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&isFinite(e))return c.long?function(e){var s=Math.abs(e);if(s>=i)return a(e,s,i,"day");if(s>=n)return a(e,s,n,"hour");if(s>=r)return a(e,s,r,"minute");if(s>=t)return a(e,s,t,"second");return e+" ms"}(e):function(e){var s=Math.abs(e);if(s>=i)return Math.round(e/i)+"d";if(s>=n)return Math.round(e/n)+"h";if(s>=r)return Math.round(e/r)+"m";if(s>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},17833:function(e,t,r){var n=r(96763),i=r(65606);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,n.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=n.debug||n.log||(()=>{}),e.exports=r(40736)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},40736:function(e,t,r){var n=r(96763);e.exports=function(e){function t(e){let r,n,s,o=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),s=i-(r||i);n.diff=s,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";o++;const s=t.formatters[i];if("function"==typeof s){const t=e[o];r=s.call(n,t),e.splice(o,1),o--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=i,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==t.namespaces&&(n=t.namespaces,s=t.enabled(e)),s),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function i(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(s),...t.skips.map(s).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(28e3),t.destroy=function(){n.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},62328:function(e){"use strict";const t=()=>{const e=new Error("Delay aborted");return e.name="AbortError",e},r=({clearTimeout:e,setTimeout:r,willResolve:n})=>(i,{value:s,signal:o}={})=>{if(o&&o.aborted)return Promise.reject(t());let a,c,u;const l=e||clearTimeout,h=()=>{l(a),u(t())},d=new Promise(((e,t)=>{c=()=>{o&&o.removeEventListener("abort",h),n?e(s):t(s)},u=t,a=(r||setTimeout)(c,i)}));return o&&o.addEventListener("abort",h,{once:!0}),d.clear=()=>{l(a),a=null,c()},d},n=e=>{const t=r({...e,willResolve:!0});return t.reject=r({...e,willResolve:!1}),t.range=(e,r,n)=>t(((e,t)=>Math.floor(Math.random()*(t-e+1)+e))(e,r),n),t},i=n();i.createWithTimers=n,e.exports=i,e.exports.default=i},44534:function(e){"use strict";function t(e,t){t=t||{};this._capacity=t.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=new Array(4))}t.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var r=this.size();if(!(t>=r||t<-r))return t<0&&(t+=r),t=this._head+t&this._capacityMask,this._list[t]}},t.prototype.get=function(e){return this.peekAt(e)},t.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},t.prototype.peekFront=function(){return this.peek()},t.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(t.prototype,"length",{get:function(){return this.size()}}),t.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.unshift=function(e){if(0===arguments.length)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},t.prototype.push=function(e){if(0===arguments.length)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var r=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),r}},t.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var r=this.size(),n=this._list.length;if(!(t>=r||t<-r)){t<0&&(t+=r),t=this._head+t&this._capacityMask;var i,s=this._list[t];if(e<r/2){for(i=e;i>0;i--)this._list[t]=this._list[t=t-1+n&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(i=r-1-e;i>0;i--)this._list[t]=this._list[t=t+1+n&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}},t.prototype.remove=function(e,t){var r,n=e,i=t;if(n===(0|n)&&this._head!==this._tail){var s=this.size(),o=this._list.length;if(!(n>=s||n<-s||t<1)){if(n<0&&(n+=s),1===t||!t)return(r=new Array(1))[0]=this.removeOne(n),r;if(0===n&&n+t>=s)return r=this.toArray(),this.clear(),r;var a;for(n+t>s&&(t=s-n),r=new Array(t),a=0;a<t;a++)r[a]=this._list[this._head+n+a&this._capacityMask];if(n=this._head+n&this._capacityMask,e+t===s){for(this._tail=this._tail-t+o&this._capacityMask,a=t;a>0;a--)this._list[n=n+1+o&this._capacityMask]=void 0;return r}if(0===e){for(this._head=this._head+t+o&this._capacityMask,a=t-1;a>0;a--)this._list[n=n+1+o&this._capacityMask]=void 0;return r}if(n<s/2){for(this._head=this._head+e+t+o&this._capacityMask,a=e;a>0;a--)this.unshift(this._list[n=n-1+o&this._capacityMask]);for(n=this._head-1+o&this._capacityMask;i>0;)this._list[n=n-1+o&this._capacityMask]=void 0,i--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+t+o&this._capacityMask,a=s-(t+e);a>0;a--)this.push(this._list[n++]);for(n=this._tail;i>0;)this._list[n=n+1+o&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),r}}},t.prototype.splice=function(e,t){var r=e;if(r===(0|r)){var n=this.size();if(r<0&&(r+=n),!(r>n)){if(arguments.length>2){var i,s,o,a=arguments.length,c=this._list.length,u=2;if(!n||r<n/2){for(s=new Array(r),i=0;i<r;i++)s[i]=this._list[this._head+i&this._capacityMask];for(0===t?(o=[],r>0&&(this._head=this._head+r+c&this._capacityMask)):(o=this.remove(r,t),this._head=this._head+r+c&this._capacityMask);a>u;)this.unshift(arguments[--a]);for(i=r;i>0;i--)this.unshift(s[i-1])}else{var l=(s=new Array(n-(r+t))).length;for(i=0;i<l;i++)s[i]=this._list[this._head+r+t+i&this._capacityMask];for(0===t?(o=[],r!=n&&(this._tail=this._head+r+c&this._capacityMask)):(o=this.remove(r,t),this._tail=this._tail-l+c&this._capacityMask);u<a;)this.push(arguments[u++]);for(i=0;i<l;i++)this.push(s[i])}return o}return this.remove(r,t)}}},t.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0},t.prototype.isEmpty=function(){return this._head===this._tail},t.prototype.toArray=function(){return this._copyArray(!1)},t.prototype._fromArray=function(e){var t=e.length,r=this._nextPowerOf2(t);this._list=new Array(r),this._capacityMask=r-1,this._tail=t;for(var n=0;n<t;n++)this._list[n]=e[n]},t.prototype._copyArray=function(e,t){var r=this._list,n=r.length,i=this.length;if((t|=i)==i&&this._head<this._tail)return this._list.slice(this._head,this._tail);var s,o=new Array(t),a=0;if(e||this._head>this._tail){for(s=this._head;s<n;s++)o[a++]=r[s];for(s=0;s<this._tail;s++)o[a++]=r[s]}else for(s=this._head;s<this._tail;s++)o[a++]=r[s];return o},t.prototype._growArray=function(){if(0!=this._head){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},t.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},t.prototype._nextPowerOf2=function(e){var t=1<<Math.log(e)/Math.log(2)+1;return Math.max(t,4)},e.exports=t},48468:function(e,t,r){"use strict";r.d(t,{o0:function(){return p}});var n=r(65606),i=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},s=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},o=function(e){this.version=e,this.type="node",this.name="node",this.os=n.platform},a=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},c=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},u=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},l=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,h=3,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function p(e){return e?m(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new u:"undefined"!=typeof navigator?m(navigator.userAgent):void 0!==n&&n.version?new o(n.version.slice(1)):null}function g(e){return""!==e&&d.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]}),!1)}function m(e){var t=g(e);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new c;var o=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);o?o.length<h&&(o=i(i([],o,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(h-o.length),!0)):o=[];var u=o.join("."),d=function(e){for(var t=0,r=f.length;t<r;t++){var n=f[t],i=n[0];if(n[1].exec(e))return i}return null}(e),p=l.exec(e);return p&&p[1]?new a(r,u,d,p[1]):new s(r,u,d)}},32144:function(e){e.exports=function(e,t,r,n,i){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}},66310:function(e){"use strict";function t(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,r,n){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"==typeof r&&(n=r,r=""),r&&(n.code=r);try{return t(e,n)}catch(r){n.message=e.message,n.stack=e.stack;const i=function(){};i.prototype=Object.create(Object.getPrototypeOf(e));return t(new i,n)}}},60544:function(e,t,r){"use strict";const n=r(69939);t.PP=n.EventIterator,n.EventIterator},69939:function(e,t,r){"use strict";var n=r(96763);Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;const t={value:e,done:!1};if(this.pullQueue.length){const e=this.pullQueue.shift();e&&e.resolve(t)}else this.pushQueue.push(Promise.resolve(t)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():n&&n.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const e of this.pullQueue)e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const t of this.pullQueue)t.reject(e);this.pullQueue.length=0}else{const t=Promise.reject(e);t.catch((()=>{})),this.pushQueue.push(t)}}remove(){Promise.resolve().then((()=>{this.removeCallback&&this.removeCallback()}))}[Symbol.asyncIterator](){return{next:e=>{const t=this.pushQueue.shift();return t?(void 0!==this.lowWaterMark&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),t):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise(((e,t)=>{this.pullQueue.push({resolve:e,reject:t})}))},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class s{constructor(e,{highWaterMark:t=100,lowWaterMark:r=1}={}){const n=new i;n.highWaterMark=t,n.lowWaterMark=r,n.removeCallback=e({push:e=>n.push(e),stop:()=>n.stop(),fail:e=>n.fail(e),on:(e,t)=>{n.eventHandlers[e]=t}})||(()=>{}),this[Symbol.asyncIterator]=()=>n[Symbol.asyncIterator](),Object.freeze(this)}}t.EventIterator=s,t.default=s},56614:function(e){"use strict";e.exports=function(e){var t=e.uri,r=e.name,n=e.type;this.uri=t,this.name=r,this.type=n}},47169:function(e,t,r){"use strict";var n=r(64767);e.exports=function e(t,r,i){var s;void 0===r&&(r=""),void 0===i&&(i=n);var o=new Map;function a(e,t){var r=o.get(t);r?r.push.apply(r,e):o.set(t,e)}if(i(t))s=null,a([r],t);else{var c=r?r+".":"";if("undefined"!=typeof FileList&&t instanceof FileList)s=Array.prototype.map.call(t,(function(e,t){return a([""+c+t],e),null}));else if(Array.isArray(t))s=t.map((function(t,r){var n=e(t,""+c+r,i);return n.files.forEach(a),n.clone}));else if(t&&t.constructor===Object)for(var u in s={},t){var l=e(t[u],""+c+u,i);l.files.forEach(a),s[u]=l.clone}else s=t}return{clone:s,files:o}}},64767:function(e,t,r){"use strict";var n=r(56614);e.exports=function(e){return"undefined"!=typeof File&&e instanceof File||"undefined"!=typeof Blob&&e instanceof Blob||e instanceof n}},8190:function(e){e.exports=class{constructor(e){if(!(e>0)||0!=(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return void 0===this.buffer[this.btm]}}},36080:function(e,t,r){const n=r(8190);e.exports=class{constructor(e){this.hwm=e||16,this.head=new n(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){const t=this.head;this.head=t.next=new n(2*this.head.buffer.length),this.head.push(e)}}shift(){const e=this.tail.shift();if(void 0===e&&this.tail.next){const e=this.tail.next;return this.tail.next=null,this.tail=e,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}},19951:function(e,t){"use strict";function r(e,t=r.BASE){const n=e.length;for(let r=0;r<n;r++)t^=e.charCodeAt(r),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}Object.defineProperty(t,"__esModule",{value:!0}),r.BASE=2166136261,t.default=r,e.exports=r},29339:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},40194:function(e){e.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,r=Object.create(null),n=Object.create(null);function i(i,s){r[i]=s,++t>=e&&(t=0,n=r,r=Object.create(null))}return{has:function(e){return void 0!==r[e]||void 0!==n[e]},remove:function(e){void 0!==r[e]&&(r[e]=void 0),void 0!==n[e]&&(n[e]=void 0)},get:function(e){var t=r[e];return void 0!==t?t:void 0!==(t=n[e])?(i(e,t),t):void 0},set:function(e,t){void 0!==r[e]?r[e]=t:i(e,t)},clear:function(){r=Object.create(null),n=Object.create(null)}}}},43827:function(e,t,r){"use strict";e.exports=r.p+"cyb_rune_wasm_bg.96a4434c31.wasm"},28732:function(e,t,r){var n,i,s;i=[r(85590)],void 0===(s="function"==typeof(n=function(e){"use strict";var t=e.Reader,r=e.Writer,n=e.util,i=e.roots.default||(e.roots.default={});return i.RPC=function(){function s(e){if(this.subscriptions=[],this.messages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.subscriptions=n.emptyArray,s.prototype.messages=n.emptyArray,s.prototype.control=null,Object.defineProperty(s.prototype,"_control",{get:n.oneOfGetter(o=["control"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){if(t||(t=r.create()),null!=e.subscriptions&&e.subscriptions.length)for(var n=0;n<e.subscriptions.length;++n)i.RPC.SubOpts.encode(e.subscriptions[n],t.uint32(10).fork()).ldelim();if(null!=e.messages&&e.messages.length)for(n=0;n<e.messages.length;++n)i.RPC.Message.encode(e.messages[n],t.uint32(18).fork()).ldelim();return null!=e.control&&Object.hasOwnProperty.call(e,"control")&&i.RPC.ControlMessage.encode(e.control,t.uint32(26).fork()).ldelim(),t},s.decode=function(e,r){e instanceof t||(e=t.create(e));for(var n=void 0===r?e.len:e.pos+r,s=new i.RPC;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.push(i.RPC.SubOpts.decode(e,e.uint32()));break;case 2:s.messages&&s.messages.length||(s.messages=[]),s.messages.push(i.RPC.Message.decode(e,e.uint32()));break;case 3:s.control=i.RPC.ControlMessage.decode(e,e.uint32());break;default:e.skipType(7&o)}}return s},s.fromObject=function(e){if(e instanceof i.RPC)return e;var t=new i.RPC;if(e.subscriptions){if(!Array.isArray(e.subscriptions))throw TypeError(".RPC.subscriptions: array expected");t.subscriptions=[];for(var r=0;r<e.subscriptions.length;++r){if("object"!=typeof e.subscriptions[r])throw TypeError(".RPC.subscriptions: object expected");t.subscriptions[r]=i.RPC.SubOpts.fromObject(e.subscriptions[r])}}if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".RPC.messages: array expected");for(t.messages=[],r=0;r<e.messages.length;++r){if("object"!=typeof e.messages[r])throw TypeError(".RPC.messages: object expected");t.messages[r]=i.RPC.Message.fromObject(e.messages[r])}}if(null!=e.control){if("object"!=typeof e.control)throw TypeError(".RPC.control: object expected");t.control=i.RPC.ControlMessage.fromObject(e.control)}return t},s.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.subscriptions=[],r.messages=[]),e.subscriptions&&e.subscriptions.length){r.subscriptions=[];for(var n=0;n<e.subscriptions.length;++n)r.subscriptions[n]=i.RPC.SubOpts.toObject(e.subscriptions[n],t)}if(e.messages&&e.messages.length)for(r.messages=[],n=0;n<e.messages.length;++n)r.messages[n]=i.RPC.Message.toObject(e.messages[n],t);return null!=e.control&&e.hasOwnProperty("control")&&(r.control=i.RPC.ControlMessage.toObject(e.control,t),t.oneofs&&(r._control="control")),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s.SubOpts=function(){function s(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.subscribe=null,s.prototype.topic=null,Object.defineProperty(s.prototype,"_subscribe",{get:n.oneOfGetter(o=["subscribe"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_topic",{get:n.oneOfGetter(o=["topic"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){return t||(t=r.create()),null!=e.subscribe&&Object.hasOwnProperty.call(e,"subscribe")&&t.uint32(8).bool(e.subscribe),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(18).string(e.topic),t},s.decode=function(e,r){e instanceof t||(e=t.create(e));for(var n=void 0===r?e.len:e.pos+r,s=new i.RPC.SubOpts;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:s.subscribe=e.bool();break;case 2:s.topic=e.string();break;default:e.skipType(7&o)}}return s},s.fromObject=function(e){if(e instanceof i.RPC.SubOpts)return e;var t=new i.RPC.SubOpts;return null!=e.subscribe&&(t.subscribe=Boolean(e.subscribe)),null!=e.topic&&(t.topic=String(e.topic)),t},s.toObject=function(e,t){t||(t={});var r={};return null!=e.subscribe&&e.hasOwnProperty("subscribe")&&(r.subscribe=e.subscribe,t.oneofs&&(r._subscribe="subscribe")),null!=e.topic&&e.hasOwnProperty("topic")&&(r.topic=e.topic,t.oneofs&&(r._topic="topic")),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.Message=function(){function s(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.from=null,s.prototype.data=null,s.prototype.seqno=null,s.prototype.topic="",s.prototype.signature=null,s.prototype.key=null,Object.defineProperty(s.prototype,"_from",{get:n.oneOfGetter(o=["from"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_data",{get:n.oneOfGetter(o=["data"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_seqno",{get:n.oneOfGetter(o=["seqno"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_signature",{get:n.oneOfGetter(o=["signature"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_key",{get:n.oneOfGetter(o=["key"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){return t||(t=r.create()),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(10).bytes(e.from),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.seqno&&Object.hasOwnProperty.call(e,"seqno")&&t.uint32(26).bytes(e.seqno),t.uint32(34).string(e.topic),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(42).bytes(e.signature),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(50).bytes(e.key),t},s.decode=function(e,r){e instanceof t||(e=t.create(e));for(var s=void 0===r?e.len:e.pos+r,o=new i.RPC.Message;e.pos<s;){var a=e.uint32();switch(a>>>3){case 1:o.from=e.bytes();break;case 2:o.data=e.bytes();break;case 3:o.seqno=e.bytes();break;case 4:o.topic=e.string();break;case 5:o.signature=e.bytes();break;case 6:o.key=e.bytes();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("topic"))throw n.ProtocolError("missing required 'topic'",{instance:o});return o},s.fromObject=function(e){if(e instanceof i.RPC.Message)return e;var t=new i.RPC.Message;return null!=e.from&&("string"==typeof e.from?n.base64.decode(e.from,t.from=n.newBuffer(n.base64.length(e.from)),0):e.from.length&&(t.from=e.from)),null!=e.data&&("string"==typeof e.data?n.base64.decode(e.data,t.data=n.newBuffer(n.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.seqno&&("string"==typeof e.seqno?n.base64.decode(e.seqno,t.seqno=n.newBuffer(n.base64.length(e.seqno)),0):e.seqno.length&&(t.seqno=e.seqno)),null!=e.topic&&(t.topic=String(e.topic)),null!=e.signature&&("string"==typeof e.signature?n.base64.decode(e.signature,t.signature=n.newBuffer(n.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),null!=e.key&&("string"==typeof e.key?n.base64.decode(e.key,t.key=n.newBuffer(n.base64.length(e.key)),0):e.key.length&&(t.key=e.key)),t},s.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.topic=""),null!=e.from&&e.hasOwnProperty("from")&&(r.from=t.bytes===String?n.base64.encode(e.from,0,e.from.length):t.bytes===Array?Array.prototype.slice.call(e.from):e.from,t.oneofs&&(r._from="from")),null!=e.data&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?n.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data,t.oneofs&&(r._data="data")),null!=e.seqno&&e.hasOwnProperty("seqno")&&(r.seqno=t.bytes===String?n.base64.encode(e.seqno,0,e.seqno.length):t.bytes===Array?Array.prototype.slice.call(e.seqno):e.seqno,t.oneofs&&(r._seqno="seqno")),null!=e.topic&&e.hasOwnProperty("topic")&&(r.topic=e.topic),null!=e.signature&&e.hasOwnProperty("signature")&&(r.signature=t.bytes===String?n.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature,t.oneofs&&(r._signature="signature")),null!=e.key&&e.hasOwnProperty("key")&&(r.key=t.bytes===String?n.base64.encode(e.key,0,e.key.length):t.bytes===Array?Array.prototype.slice.call(e.key):e.key,t.oneofs&&(r._key="key")),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlMessage=function(){function s(e){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return s.prototype.ihave=n.emptyArray,s.prototype.iwant=n.emptyArray,s.prototype.graft=n.emptyArray,s.prototype.prune=n.emptyArray,s.encode=function(e,t){if(t||(t=r.create()),null!=e.ihave&&e.ihave.length)for(var n=0;n<e.ihave.length;++n)i.RPC.ControlIHave.encode(e.ihave[n],t.uint32(10).fork()).ldelim();if(null!=e.iwant&&e.iwant.length)for(n=0;n<e.iwant.length;++n)i.RPC.ControlIWant.encode(e.iwant[n],t.uint32(18).fork()).ldelim();if(null!=e.graft&&e.graft.length)for(n=0;n<e.graft.length;++n)i.RPC.ControlGraft.encode(e.graft[n],t.uint32(26).fork()).ldelim();if(null!=e.prune&&e.prune.length)for(n=0;n<e.prune.length;++n)i.RPC.ControlPrune.encode(e.prune[n],t.uint32(34).fork()).ldelim();return t},s.decode=function(e,r){e instanceof t||(e=t.create(e));for(var n=void 0===r?e.len:e.pos+r,s=new i.RPC.ControlMessage;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:s.ihave&&s.ihave.length||(s.ihave=[]),s.ihave.push(i.RPC.ControlIHave.decode(e,e.uint32()));break;case 2:s.iwant&&s.iwant.length||(s.iwant=[]),s.iwant.push(i.RPC.ControlIWant.decode(e,e.uint32()));break;case 3:s.graft&&s.graft.length||(s.graft=[]),s.graft.push(i.RPC.ControlGraft.decode(e,e.uint32()));break;case 4:s.prune&&s.prune.length||(s.prune=[]),s.prune.push(i.RPC.ControlPrune.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return s},s.fromObject=function(e){if(e instanceof i.RPC.ControlMessage)return e;var t=new i.RPC.ControlMessage;if(e.ihave){if(!Array.isArray(e.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");t.ihave=[];for(var r=0;r<e.ihave.length;++r){if("object"!=typeof e.ihave[r])throw TypeError(".RPC.ControlMessage.ihave: object expected");t.ihave[r]=i.RPC.ControlIHave.fromObject(e.ihave[r])}}if(e.iwant){if(!Array.isArray(e.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");for(t.iwant=[],r=0;r<e.iwant.length;++r){if("object"!=typeof e.iwant[r])throw TypeError(".RPC.ControlMessage.iwant: object expected");t.iwant[r]=i.RPC.ControlIWant.fromObject(e.iwant[r])}}if(e.graft){if(!Array.isArray(e.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");for(t.graft=[],r=0;r<e.graft.length;++r){if("object"!=typeof e.graft[r])throw TypeError(".RPC.ControlMessage.graft: object expected");t.graft[r]=i.RPC.ControlGraft.fromObject(e.graft[r])}}if(e.prune){if(!Array.isArray(e.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");for(t.prune=[],r=0;r<e.prune.length;++r){if("object"!=typeof e.prune[r])throw TypeError(".RPC.ControlMessage.prune: object expected");t.prune[r]=i.RPC.ControlPrune.fromObject(e.prune[r])}}return t},s.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.ihave=[],r.iwant=[],r.graft=[],r.prune=[]),e.ihave&&e.ihave.length){r.ihave=[];for(var n=0;n<e.ihave.length;++n)r.ihave[n]=i.RPC.ControlIHave.toObject(e.ihave[n],t)}if(e.iwant&&e.iwant.length)for(r.iwant=[],n=0;n<e.iwant.length;++n)r.iwant[n]=i.RPC.ControlIWant.toObject(e.iwant[n],t);if(e.graft&&e.graft.length)for(r.graft=[],n=0;n<e.graft.length;++n)r.graft[n]=i.RPC.ControlGraft.toObject(e.graft[n],t);if(e.prune&&e.prune.length)for(r.prune=[],n=0;n<e.prune.length;++n)r.prune[n]=i.RPC.ControlPrune.toObject(e.prune[n],t);return r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlIHave=function(){function s(e){if(this.messageIDs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.topicID=null,s.prototype.messageIDs=n.emptyArray,Object.defineProperty(s.prototype,"_topicID",{get:n.oneOfGetter(o=["topicID"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){if(t||(t=r.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&t.uint32(10).string(e.topicID),null!=e.messageIDs&&e.messageIDs.length)for(var n=0;n<e.messageIDs.length;++n)t.uint32(18).bytes(e.messageIDs[n]);return t},s.decode=function(e,r){e instanceof t||(e=t.create(e));for(var n=void 0===r?e.len:e.pos+r,s=new i.RPC.ControlIHave;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:s.topicID=e.string();break;case 2:s.messageIDs&&s.messageIDs.length||(s.messageIDs=[]),s.messageIDs.push(e.bytes());break;default:e.skipType(7&o)}}return s},s.fromObject=function(e){if(e instanceof i.RPC.ControlIHave)return e;var t=new i.RPC.ControlIHave;if(null!=e.topicID&&(t.topicID=String(e.topicID)),e.messageIDs){if(!Array.isArray(e.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");t.messageIDs=[];for(var r=0;r<e.messageIDs.length;++r)"string"==typeof e.messageIDs[r]?n.base64.decode(e.messageIDs[r],t.messageIDs[r]=n.newBuffer(n.base64.length(e.messageIDs[r])),0):e.messageIDs[r].length&&(t.messageIDs[r]=e.messageIDs[r])}return t},s.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.messageIDs=[]),null!=e.topicID&&e.hasOwnProperty("topicID")&&(r.topicID=e.topicID,t.oneofs&&(r._topicID="topicID")),e.messageIDs&&e.messageIDs.length){r.messageIDs=[];for(var i=0;i<e.messageIDs.length;++i)r.messageIDs[i]=t.bytes===String?n.base64.encode(e.messageIDs[i],0,e.messageIDs[i].length):t.bytes===Array?Array.prototype.slice.call(e.messageIDs[i]):e.messageIDs[i]}return r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlIWant=function(){function s(e){if(this.messageIDs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return s.prototype.messageIDs=n.emptyArray,s.encode=function(e,t){if(t||(t=r.create()),null!=e.messageIDs&&e.messageIDs.length)for(var n=0;n<e.messageIDs.length;++n)t.uint32(10).bytes(e.messageIDs[n]);return t},s.decode=function(e,r){e instanceof t||(e=t.create(e));for(var n=void 0===r?e.len:e.pos+r,s=new i.RPC.ControlIWant;e.pos<n;){var o=e.uint32();o>>>3==1?(s.messageIDs&&s.messageIDs.length||(s.messageIDs=[]),s.messageIDs.push(e.bytes())):e.skipType(7&o)}return s},s.fromObject=function(e){if(e instanceof i.RPC.ControlIWant)return e;var t=new i.RPC.ControlIWant;if(e.messageIDs){if(!Array.isArray(e.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");t.messageIDs=[];for(var r=0;r<e.messageIDs.length;++r)"string"==typeof e.messageIDs[r]?n.base64.decode(e.messageIDs[r],t.messageIDs[r]=n.newBuffer(n.base64.length(e.messageIDs[r])),0):e.messageIDs[r].length&&(t.messageIDs[r]=e.messageIDs[r])}return t},s.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.messageIDs=[]),e.messageIDs&&e.messageIDs.length){r.messageIDs=[];for(var i=0;i<e.messageIDs.length;++i)r.messageIDs[i]=t.bytes===String?n.base64.encode(e.messageIDs[i],0,e.messageIDs[i].length):t.bytes===Array?Array.prototype.slice.call(e.messageIDs[i]):e.messageIDs[i]}return r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlGraft=function(){function s(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.topicID=null,Object.defineProperty(s.prototype,"_topicID",{get:n.oneOfGetter(o=["topicID"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){return t||(t=r.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&t.uint32(10).string(e.topicID),t},s.decode=function(e,r){e instanceof t||(e=t.create(e));for(var n=void 0===r?e.len:e.pos+r,s=new i.RPC.ControlGraft;e.pos<n;){var o=e.uint32();o>>>3==1?s.topicID=e.string():e.skipType(7&o)}return s},s.fromObject=function(e){if(e instanceof i.RPC.ControlGraft)return e;var t=new i.RPC.ControlGraft;return null!=e.topicID&&(t.topicID=String(e.topicID)),t},s.toObject=function(e,t){t||(t={});var r={};return null!=e.topicID&&e.hasOwnProperty("topicID")&&(r.topicID=e.topicID,t.oneofs&&(r._topicID="topicID")),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlPrune=function(){function s(e){if(this.peers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.topicID=null,s.prototype.peers=n.emptyArray,s.prototype.backoff=null,Object.defineProperty(s.prototype,"_topicID",{get:n.oneOfGetter(o=["topicID"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_backoff",{get:n.oneOfGetter(o=["backoff"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){if(t||(t=r.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&t.uint32(10).string(e.topicID),null!=e.peers&&e.peers.length)for(var n=0;n<e.peers.length;++n)i.RPC.PeerInfo.encode(e.peers[n],t.uint32(18).fork()).ldelim();return null!=e.backoff&&Object.hasOwnProperty.call(e,"backoff")&&t.uint32(24).uint64(e.backoff),t},s.decode=function(e,r){e instanceof t||(e=t.create(e));for(var n=void 0===r?e.len:e.pos+r,s=new i.RPC.ControlPrune;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:s.topicID=e.string();break;case 2:s.peers&&s.peers.length||(s.peers=[]),s.peers.push(i.RPC.PeerInfo.decode(e,e.uint32()));break;case 3:s.backoff=e.uint64();break;default:e.skipType(7&o)}}return s},s.fromObject=function(e){if(e instanceof i.RPC.ControlPrune)return e;var t=new i.RPC.ControlPrune;if(null!=e.topicID&&(t.topicID=String(e.topicID)),e.peers){if(!Array.isArray(e.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");t.peers=[];for(var r=0;r<e.peers.length;++r){if("object"!=typeof e.peers[r])throw TypeError(".RPC.ControlPrune.peers: object expected");t.peers[r]=i.RPC.PeerInfo.fromObject(e.peers[r])}}return null!=e.backoff&&(n.Long?(t.backoff=n.Long.fromValue(e.backoff)).unsigned=!0:"string"==typeof e.backoff?t.backoff=parseInt(e.backoff,10):"number"==typeof e.backoff?t.backoff=e.backoff:"object"==typeof e.backoff&&(t.backoff=new n.LongBits(e.backoff.low>>>0,e.backoff.high>>>0).toNumber(!0))),t},s.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.peers=[]),null!=e.topicID&&e.hasOwnProperty("topicID")&&(r.topicID=e.topicID,t.oneofs&&(r._topicID="topicID")),e.peers&&e.peers.length){r.peers=[];for(var s=0;s<e.peers.length;++s)r.peers[s]=i.RPC.PeerInfo.toObject(e.peers[s],t)}return null!=e.backoff&&e.hasOwnProperty("backoff")&&("number"==typeof e.backoff?r.backoff=t.longs===String?String(e.backoff):e.backoff:r.backoff=t.longs===String?n.Long.prototype.toString.call(e.backoff):t.longs===Number?new n.LongBits(e.backoff.low>>>0,e.backoff.high>>>0).toNumber(!0):e.backoff,t.oneofs&&(r._backoff="backoff")),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.PeerInfo=function(){function s(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.peerID=null,s.prototype.signedPeerRecord=null,Object.defineProperty(s.prototype,"_peerID",{get:n.oneOfGetter(o=["peerID"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_signedPeerRecord",{get:n.oneOfGetter(o=["signedPeerRecord"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){return t||(t=r.create()),null!=e.peerID&&Object.hasOwnProperty.call(e,"peerID")&&t.uint32(10).bytes(e.peerID),null!=e.signedPeerRecord&&Object.hasOwnProperty.call(e,"signedPeerRecord")&&t.uint32(18).bytes(e.signedPeerRecord),t},s.decode=function(e,r){e instanceof t||(e=t.create(e));for(var n=void 0===r?e.len:e.pos+r,s=new i.RPC.PeerInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:s.peerID=e.bytes();break;case 2:s.signedPeerRecord=e.bytes();break;default:e.skipType(7&o)}}return s},s.fromObject=function(e){if(e instanceof i.RPC.PeerInfo)return e;var t=new i.RPC.PeerInfo;return null!=e.peerID&&("string"==typeof e.peerID?n.base64.decode(e.peerID,t.peerID=n.newBuffer(n.base64.length(e.peerID)),0):e.peerID.length&&(t.peerID=e.peerID)),null!=e.signedPeerRecord&&("string"==typeof e.signedPeerRecord?n.base64.decode(e.signedPeerRecord,t.signedPeerRecord=n.newBuffer(n.base64.length(e.signedPeerRecord)),0):e.signedPeerRecord.length&&(t.signedPeerRecord=e.signedPeerRecord)),t},s.toObject=function(e,t){t||(t={});var r={};return null!=e.peerID&&e.hasOwnProperty("peerID")&&(r.peerID=t.bytes===String?n.base64.encode(e.peerID,0,e.peerID.length):t.bytes===Array?Array.prototype.slice.call(e.peerID):e.peerID,t.oneofs&&(r._peerID="peerID")),null!=e.signedPeerRecord&&e.hasOwnProperty("signedPeerRecord")&&(r.signedPeerRecord=t.bytes===String?n.base64.encode(e.signedPeerRecord,0,e.signedPeerRecord.length):t.bytes===Array?Array.prototype.slice.call(e.signedPeerRecord):e.signedPeerRecord,t.oneofs&&(r._signedPeerRecord="signedPeerRecord")),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s}(),i})?n.apply(t,i):n)||(e.exports=s)},2619:function(e,t,r){"use strict";r.d(t,{En:function(){return s},et:function(){return i},ol:function(){return o},uJ:function(){return a}});var n=r(44009),i="function"==typeof WeakMap&&!(0,n.no)((function(){return"ReactNative"==navigator.product&&!global.HermesInternal})),s="function"==typeof WeakSet,o="function"==typeof Symbol&&"function"==typeof Symbol.for,a=o&&Symbol.asyncIterator;(0,n.no)((function(){return window.document.createElement})),(0,n.no)((function(){return navigator.userAgent.indexOf("jsdom")>=0}))},71675:function(e,t,r){"use strict";r.d(t,{ei:function(){return o},w7:function(){return s},wM:function(){return i}});var n=r(64943);function i(e){return Boolean((0,n.vm)(e))}function s(e){return Boolean((0,n.JI)(e))}function o(e){return Boolean((0,n.do)(e))}},64943:function(e,t,r){"use strict";r.d(t,{do:function(){return c},vm:function(){return o},JI:function(){return a}});const n=45,i=15,s=new class{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){const t=this.index,r=e();return void 0===r&&(this.index=t),r}parseWith(e){const t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically((()=>{const t=this.readChar();if(t===e)return t}))}readSeparator(e,t,r){return this.readAtomically((()=>{if(!(t>0&&void 0===this.readGivenChar(e)))return r()}))}readNumber(e,t,r,n){return this.readAtomically((()=>{let i=0,s=0;const o=this.peekChar();if(void 0===o)return;const a="0"===o,c=2**(8*n)-1;for(;;){const r=this.readAtomically((()=>{const t=this.readChar();if(void 0===t)return;const r=Number.parseInt(t,e);return Number.isNaN(r)?void 0:r}));if(void 0===r)break;if(i*=e,i+=r,i>c)return;if(s+=1,void 0!==t&&s>t)return}return 0===s||!r&&a&&s>1?void 0:i}))}readIPv4Addr(){return this.readAtomically((()=>{const e=new Uint8Array(4);for(let t=0;t<e.length;t++){const r=this.readSeparator(".",t,(()=>this.readNumber(10,3,!1,1)));if(void 0===r)return;e[t]=r}return e}))}readIPv6Addr(){const e=e=>{for(let t=0;t<e.length/2;t++){const r=2*t;if(t<e.length-3){const n=this.readSeparator(":",t,(()=>this.readIPv4Addr()));if(void 0!==n)return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],[r+4,!0]}const n=this.readSeparator(":",t,(()=>this.readNumber(16,4,!0,2)));if(void 0===n)return[r,!1];e[r]=n>>8,e[r+1]=255&n}return[e.length,!1]};return this.readAtomically((()=>{const t=new Uint8Array(16),[r,n]=e(t);if(16===r)return t;if(n)return;if(void 0===this.readGivenChar(":"))return;if(void 0===this.readGivenChar(":"))return;const i=new Uint8Array(14),s=16-(r+2),[o]=e(i.subarray(0,s));return t.set(i.subarray(0,o),16-o),t}))}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};function o(e){if(!(e.length>i))return s.new(e).parseWith((()=>s.readIPv4Addr()))}function a(e){if(!(e.length>n))return s.new(e).parseWith((()=>s.readIPv6Addr()))}function c(e){if(!(e.length>n))return s.new(e).parseWith((()=>s.readIPAddr()))}},27698:function(e,t,r){"use strict";r.d(t,{KF:function(){return Ks}});var n={};r.r(n),r.d(n,{base58btc:function(){return $},base58flickr:function(){return G}});var i={};r.r(i),r.d(i,{base10:function(){return Z}});var s={};r.r(s),r.d(s,{base16:function(){return Y},base16upper:function(){return X}});var o={};r.r(o),r.d(o,{base2:function(){return Q}});var a={};r.r(a),r.d(a,{base256emoji:function(){return ne}});var c={};r.r(c),r.d(c,{base32:function(){return ie},base32hex:function(){return ce},base32hexpad:function(){return le},base32hexpadupper:function(){return he},base32hexupper:function(){return ue},base32pad:function(){return oe},base32padupper:function(){return ae},base32upper:function(){return se},base32z:function(){return de}});var u={};r.r(u),r.d(u,{base36:function(){return fe},base36upper:function(){return pe}});var l={};r.r(l),r.d(l,{base64:function(){return ge},base64pad:function(){return me},base64url:function(){return ye},base64urlpad:function(){return be}});var h={};r.r(h),r.d(h,{base8:function(){return we}});var d={};r.r(d),r.d(d,{identity:function(){return ve}});var f={};r.r(f),r.d(f,{code:function(){return Ee},decode:function(){return ke},encode:function(){return xe},name:function(){return Ae}});var p={};r.r(p),r.d(p,{code:function(){return Ie},decode:function(){return Re},encode:function(){return Pe},name:function(){return Te}});var g={};r.r(g),r.d(g,{identity:function(){return tt}});var m={};r.r(m),r.d(m,{sha256:function(){return st},sha512:function(){return ot}});var y={};r.r(y),r.d(y,{Ed25519PrivateKey:function(){return fr},Ed25519PublicKey:function(){return dr},generateKeyPair:function(){return mr},generateKeyPairFromSeed:function(){return yr},unmarshalEd25519PrivateKey:function(){return pr},unmarshalEd25519PublicKey:function(){return gr}});var b={};r.r(b),r.d(b,{MAX_KEY_SIZE:function(){return Rr},RsaPrivateKey:function(){return Or},RsaPublicKey:function(){return Cr},fromJwk:function(){return Nr},generateKeyPair:function(){return Ur},unmarshalRsaPrivateKey:function(){return Dr},unmarshalRsaPublicKey:function(){return Br}});var w={};r.r(w),r.d(w,{Secp256k1PrivateKey:function(){return Fr},Secp256k1PublicKey:function(){return Lr},generateKeyPair:function(){return Kr},unmarshalSecp256k1PrivateKey:function(){return Wr},unmarshalSecp256k1PublicKey:function(){return qr}});var v={};r.r(v),r.d(v,{identity:function(){return li}});var S={};r.r(S),r.d(S,{base2:function(){return hi}});var _={};r.r(_),r.d(_,{base8:function(){return di}});var A={};r.r(A),r.d(A,{base10:function(){return fi}});var E={};r.r(E),r.d(E,{base16:function(){return pi},base16upper:function(){return gi}});var x={};r.r(x),r.d(x,{base32:function(){return mi},base32hex:function(){return vi},base32hexpad:function(){return _i},base32hexpadupper:function(){return Ai},base32hexupper:function(){return Si},base32pad:function(){return bi},base32padupper:function(){return wi},base32upper:function(){return yi},base32z:function(){return Ei}});var k={};r.r(k),r.d(k,{base36:function(){return xi},base36upper:function(){return ki}});var T={};r.r(T),r.d(T,{base58btc:function(){return Ti},base58flickr:function(){return Ii}});var I={};r.r(I),r.d(I,{base64:function(){return Pi},base64pad:function(){return Ri},base64url:function(){return Ci},base64urlpad:function(){return Oi}});var P={};r.r(P),r.d(P,{base256emoji:function(){return Ui}});var R={};r.r(R),r.d(R,{sha256:function(){return as},sha512:function(){return cs}});var C={};r.r(C),r.d(C,{identity:function(){return ls}});var O={};r.r(O),r.d(O,{code:function(){return ds},decode:function(){return ps},encode:function(){return fs},name:function(){return hs}});var D={};r.r(D),r.d(D,{code:function(){return bs},decode:function(){return vs},encode:function(){return ws},name:function(){return ys}});var B=r(81033),N=r(70202),U=r(66660);var M=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*l+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}},j=M;new Uint8Array(0);const L=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class F{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class W{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return K(this,e)}}class q{constructor(e){this.decoders=e}or(e){return K(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const K=(e,t)=>new q({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class V{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new F(e,t,r),this.decoder=new W(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const z=({name:e,prefix:t,encode:r,decode:n})=>new V(e,t,r,n),J=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=j(r,t);return z({prefix:e,name:t,encode:n,decode:e=>L(i(e))})},H=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>z({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),$=J({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),G=J({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Z=J({prefix:"9",name:"base10",alphabet:"0123456789"}),Y=H({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),X=H({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Q=H({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ee=Array.from(""),te=ee.reduce(((e,t,r)=>(e[r]=t,e)),[]),re=ee.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const ne=z({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=te[t]),"")},decode:function(e){const t=[];for(const r of e){const e=re[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}}),ie=H({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),se=H({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),oe=H({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ae=H({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ce=H({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ue=H({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),le=H({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),he=H({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),de=H({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),fe=J({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pe=J({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ge=H({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),me=H({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ye=H({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),be=H({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),we=H({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ve=z({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),Se=new TextEncoder,_e=new TextDecoder,Ae="json",Ee=512,xe=e=>Se.encode(JSON.stringify(e)),ke=e=>JSON.parse(_e.decode(e)),Te="raw",Ie=85,Pe=e=>L(e),Re=e=>L(e);var Ce=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=Be;)r[n++]=255&t|Oe,t/=128;for(;t&De;)r[n++]=255&t|Oe,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},Oe=128,De=-128,Be=Math.pow(2,31);var Ne=function e(t,r){var n,i=0,s=0,o=r=r||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(n&Me)<<s:(n&Me)*Math.pow(2,s),s+=7}while(n>=Ue);return e.bytes=o-r,i},Ue=128,Me=127;var je=Math.pow(2,7),Le=Math.pow(2,14),Fe=Math.pow(2,21),We=Math.pow(2,28),qe=Math.pow(2,35),Ke=Math.pow(2,42),Ve=Math.pow(2,49),ze=Math.pow(2,56),Je=Math.pow(2,63),He={encode:Ce,decode:Ne,encodingLength:function(e){return e<je?1:e<Le?2:e<Fe?3:e<We?4:e<qe?5:e<Ke?6:e<Ve?7:e<ze?8:e<Je?9:10}};const $e=(e,t=0)=>[He.decode(e,t),He.decode.bytes],Ge=(e,t,r=0)=>(He.encode(e,t,r),t),Ze=e=>He.encodingLength(e),Ye=(e,t)=>{const r=t.byteLength,n=Ze(e),i=n+Ze(r),s=new Uint8Array(i+r);return Ge(e,s,0),Ge(r,s,n),s.set(t,i),new Qe(e,r,t,s)},Xe=e=>{const t=L(e),[r,n]=$e(t),[i,s]=$e(t.subarray(n)),o=t.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Qe(r,i,o,t)};class Qe{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const et=L,tt={code:0,name:"identity",encode:et,digest:e=>Ye(0,et(e))},rt=({name:e,code:t,encode:r})=>new nt(e,t,r);class nt{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Ye(this.code,t):t.then((e=>Ye(this.code,e)))}throw Error("Unknown type, must be binary type")}}const it=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),st=rt({name:"sha2-256",code:18,encode:it("SHA-256")}),ot=rt({name:"sha2-512",code:19,encode:it("SHA-512")}),at=(e,t)=>{const{bytes:r,version:n}=e;return 0===n?dt(r,ut(e),t||$.encoder):ft(r,ut(e),t||ie.encoder)},ct=new WeakMap,ut=e=>{const t=ct.get(e);if(null==t){const t=new Map;return ct.set(e,t),t}return t};class lt{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==pt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==gt)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return lt.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=Ye(e,t);return lt.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return lt.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&((e,t)=>{if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0})(e.bytes,r.bytes)}})(e.multihash,r.multihash)}toString(e){return at(this,e)}toJSON(){return{"/":at(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof lt)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new lt(e,r,n,i||mt(e,r,n.bytes))}if(!0===t[yt]){const{version:e,multihash:r,code:n}=t,i=Xe(r);return lt.create(e,n,i)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==pt)throw new Error(`Version 0 CID must use dag-pb (code: ${pt}) block encoding`);return new lt(e,t,r,r.bytes);case 1:{const n=mt(e,t,r.bytes);return new lt(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return lt.create(0,pt,e)}static createV1(e,t){return lt.create(1,e,t)}static decode(e){const[t,r]=lt.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=lt.inspectBytes(e),r=t.size-t.multihashSize,n=L(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new Qe(t.multihashCode,t.digestSize,i,n);return[0===t.version?lt.createV0(s):lt.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=$e(e.subarray(t));return t+=n,r};let n=r(),i=pt;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t,o=r(),a=r(),c=t+a;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:c-s,size:c}}static parse(e,t){const[r,n]=ht(e,t),i=lt.decode(n);if(0===i.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return ut(i).set(r,e),i}}const ht=(e,t)=>{switch(e[0]){case"Q":{const r=t||$;return[$.prefix,r.decode(`${$.prefix}${e}`)]}case $.prefix:{const r=t||$;return[$.prefix,r.decode(e)]}case ie.prefix:{const r=t||ie;return[ie.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},dt=(e,t,r)=>{const{prefix:n}=r;if(n!==$.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i},ft=(e,t,r)=>{const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i},pt=112,gt=18,mt=(e,t,r)=>{const n=Ze(e),i=n+Ze(t),s=new Uint8Array(i+r.byteLength);return Ge(e,s,0),Ge(t,s,n),s.set(r,i),s},yt=Symbol.for("@ipld/js-cid/CID"),bt={...d,...o,...h,...i,...s,...c,...u,...n,...l,...a};function wt(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}const vt=Symbol.for("nodejs.util.inspect.custom"),St=Object.values(bt).map((e=>e.decoder)).reduce(((e,t)=>e.or(t)),bt.identity.decoder),_t=114,At=36,Et=37;class xt{type;multihash;privateKey;publicKey;string;constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[U.H]=!0;toString(){return null==this.string&&(this.string=$.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return lt.createV1(_t,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return wt(this.multihash.bytes,e);if("string"==typeof e)return Pt(e).equals(this);if(null!=e?.multihash?.bytes)return wt(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[vt](){return`PeerId(${this.toString()})`}}class kt extends xt{type="RSA";publicKey;constructor(e){super({...e,type:"RSA"}),this.publicKey=e.publicKey}}class Tt extends xt{type="Ed25519";publicKey;constructor(e){super({...e,type:"Ed25519"}),this.publicKey=e.multihash.digest}}class It extends xt{type="secp256k1";publicKey;constructor(e){super({...e,type:"secp256k1"}),this.publicKey=e.multihash.digest}}function Pt(e,t){if(t=t??St,"1"===e.charAt(0)||"Q"===e.charAt(0)){const t=Xe($.decode(`z${e}`));return e.startsWith("12D")?new Tt({multihash:t}):e.startsWith("16U")?new It({multihash:t}):new kt({multihash:t})}return Rt(St.decode(e))}function Rt(e){try{const t=Xe(e);if(t.code===tt.code){if(t.digest.length===At)return new Tt({multihash:t});if(t.digest.length===Et)return new It({multihash:t})}if(t.code===st.code)return new kt({multihash:t})}catch{return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&e.code!==_t)throw new Error("Supplied PeerID CID is invalid");const t=e.multihash;if(t.code===st.code)return new kt({multihash:e.multihash});if(t.code===tt.code){if(t.digest.length===At)return new Tt({multihash:e.multihash});if(t.digest.length===Et)return new It({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(lt.decode(e))}throw new Error("Supplied PeerID CID is invalid")}var Ct=r(17833);function Ot(e){let t=function(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}(`${e}:trace`);return Ct.enabled(`${e}:trace`)&&null!=Ct.names.map((e=>e.toString())).find((e=>e.includes(":trace")))&&(t=Ct(`${e}:trace`)),Object.assign(Ct(e),{error:Ct(`${e}:error`),trace:t})}Ct.formatters.b=e=>null==e?"undefined":$.baseEncode(e),Ct.formatters.t=e=>null==e?"undefined":ie.baseEncode(e),Ct.formatters.m=e=>null==e?"undefined":ge.baseEncode(e),Ct.formatters.p=e=>null==e?"undefined":e.toString(),Ct.formatters.c=e=>null==e?"undefined":e.toString(),Ct.formatters.k=e=>null==e?"undefined":e.toString(),Ct.formatters.a=e=>null==e?"undefined":e.toString();var Dt=r(61144);class Bt{gossip;msgs=new Map;msgIdToStrFn;history=[];notValidatedCount=0;constructor(e,t,r){this.gossip=e,this.msgIdToStrFn=r;for(let e=0;e<t;e++)this.history[e]=[]}get size(){return this.msgs.size}put(e,t,r=!1){const{msgIdStr:n}=e;return!this.msgs.has(n)&&(this.msgs.set(n,{message:t,validated:r,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...e,topic:t.topic}),r||this.notValidatedCount++,!0)}observeDuplicate(e,t){const r=this.msgs.get(e);r&&!r.validated&&r.originatingPeers.add(t)}get(e){return this.msgs.get(this.msgIdToStrFn(e))?.message}getWithIWantCount(e,t){const r=this.msgs.get(e);if(!r)return null;const n=(r.iwantCounts.get(t)??0)+1;return r.iwantCounts.set(t,n),{msg:r.message,count:n}}getGossipIDs(e){const t=new Map;for(let r=0;r<this.gossip;r++)this.history[r].forEach((r=>{const n=this.msgs.get(r.msgIdStr);if(n&&n.validated&&e.has(r.topic)){let e=t.get(r.topic);e||(e=[],t.set(r.topic,e)),e.push(r.msgId)}}));return t}validate(e){const t=this.msgs.get(e);if(!t)return null;t.validated||this.notValidatedCount--;const{message:r,originatingPeers:n}=t;return t.validated=!0,t.originatingPeers=new Set,{message:r,originatingPeers:n}}shift(){this.history[this.history.length-1].forEach((e=>{const t=this.msgs.get(e.msgIdStr);t&&(this.msgs.delete(e.msgIdStr),t.validated||this.notValidatedCount--)})),this.history.pop(),this.history.unshift([])}remove(e){const t=this.msgs.get(e);return t?(this.msgs.delete(e),t):null}}var Nt=r(28732);const{RPC:Ut}=Nt,Mt="/floodsub/1.0.0",jt="/meshsub/1.0.0",Lt="/meshsub/1.1.0",Ft=5e3;function Wt(e){if(e.length<=1)return e;for(let t=0;t<e.length;t++){const r=Math.floor(Math.random()*Math.floor(e.length)),n=e[t];e[t]=e[r],e[r]=n}return e}function qt(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Kt(e=0){return null!=globalThis.Buffer?.allocUnsafe?qt(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Vt(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const zt=Vt("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Jt=Vt("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=Kt((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}));var Ht={utf8:zt,"utf-8":zt,hex:bt.base16,latin1:Jt,ascii:Jt,binary:Jt,...bt};function $t(e,t="utf8"){const r=Ht[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Gt(e){return $t(e,"base64")}r(12746),r(12698);var Zt=r(50276);function Yt(e,t="utf8"){const r=Ht[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):qt(globalThis.Buffer.from(e,"utf-8"))}var Xt=r(80497);const Qt=32,er=64,tr=32;function rr(e,t){const r=new Uint8Array(er);for(let n=0;n<tr;n++)r[n]=e[n],r[tr+n]=t[n];return r}function nr(e,t){null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const r=Kt(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return qt(r)}var ir={get(e=globalThis){const t=e.crypto;if(null==t||null==t.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t}};const sr={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};async function or(e,t){const r=function(e){const t=e?.algorithm??"AES-GCM";let r=e?.keyLength??16;const n=e?.nonceLength??12,i=e?.digest??"SHA-256",s=e?.saltLength??16,o=e?.iterations??32767,a=ir.get();return r*=8,{encrypt:async function(e,c){const u=a.getRandomValues(new Uint8Array(s)),l=a.getRandomValues(new Uint8Array(n)),h={name:t,iv:l};let d;if("string"==typeof c&&(c=Yt(c)),0===c.length){d=await a.subtle.importKey("jwk",sr,{name:"AES-GCM"},!0,["encrypt"]);try{const e={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},n=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey"]);d=await a.subtle.deriveKey(e,n,{name:t,length:r},!0,["encrypt"])}catch{d=await a.subtle.importKey("jwk",sr,{name:"AES-GCM"},!0,["encrypt"])}}else{const e={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},n=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey"]);d=await a.subtle.deriveKey(e,n,{name:t,length:r},!0,["encrypt"])}const f=await a.subtle.encrypt(h,d,e);return nr([u,h.iv,new Uint8Array(f)])},decrypt:async function(e,c){const u=e.subarray(0,s),l=e.subarray(s,s+n),h=e.subarray(s+n),d={name:t,iv:l};let f;if("string"==typeof c&&(c=Yt(c)),0===c.length)try{const e={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},n=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey"]);f=await a.subtle.deriveKey(e,n,{name:t,length:r},!0,["decrypt"])}catch{f=await a.subtle.importKey("jwk",sr,{name:"AES-GCM"},!0,["decrypt"])}else{const e={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},n=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey"]);f=await a.subtle.deriveKey(e,n,{name:t,length:r},!0,["decrypt"])}const p=await a.subtle.decrypt(d,f,h);return new Uint8Array(p)}}}(),n=await r.encrypt(e,t);return ge.encode(n)}var ar,cr,ur,lr,hr=r(59110);!function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"}(ar||(ar={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"}(cr||(cr={})),function(e){e.codec=()=>(0,hr.eG)(cr)}(ar||(ar={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,hr.iU)(((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),ar.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.Type=ar.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>(0,hr.mH)(t,e.codec()),e.decode=t=>(0,hr.Y8)(t,e.codec())}(ur||(ur={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,hr.iU)(((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),ar.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.Type=ar.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>(0,hr.mH)(t,e.codec()),e.decode=t=>(0,hr.Y8)(t,e.codec())}(lr||(lr={}));class dr{_key;constructor(e){this._key=br(e,Qt)}async verify(e,t){return async function(e,t,r){return Xt.ev.verify(t,r,e)}(this._key,t,e)}marshal(){return this._key}get bytes(){return ur.encode({Type:ar.Ed25519,Data:this.marshal()}).subarray()}equals(e){return wt(this.bytes,e.bytes)}async hash(){const{bytes:e}=await st.digest(this.bytes);return e}}class fr{_key;_publicKey;constructor(e,t){this._key=br(e,er),this._publicKey=br(t,Qt)}async sign(e){return async function(e,t){const r=e.subarray(0,tr);return Xt.ev.sign(t,r)}(this._key,e)}get public(){return new dr(this._publicKey)}marshal(){return this._key}get bytes(){return lr.encode({Type:ar.Ed25519,Data:this.marshal()}).subarray()}equals(e){return wt(this.bytes,e.bytes)}async hash(){const{bytes:e}=await st.digest(this.bytes);return e}async id(){const e=tt.digest(this.public.bytes);return $.encode(e.bytes).substring(1)}async export(e,t="libp2p-key"){if("libp2p-key"===t)return or(this.bytes,e);throw new N.Ak(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function pr(e){if(e.length>er){const t=(e=br(e,er+Qt)).subarray(0,er),r=e.subarray(er,e.length);return new fr(t,r)}const t=(e=br(e,er)).subarray(0,er),r=e.subarray(Qt);return new fr(t,r)}function gr(e){return e=br(e,Qt),new dr(e)}async function mr(){const{privateKey:e,publicKey:t}=await async function(){const e=Xt.ev.utils.randomPrivateKey(),t=Xt.ev.getPublicKey(e);return{privateKey:rr(e,t),publicKey:t}}();return new fr(e,t)}async function yr(e){const{privateKey:t,publicKey:r}=await async function(e){if(e.length!==tr)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const t=e,r=Xt.ev.getPublicKey(t);return{privateKey:rr(t,r),publicKey:r}}(e);return new fr(t,r)}function br(e,t){if((e=Uint8Array.from(e??[])).length!==t)throw new N.Ak(`Key must be a Uint8Array of length ${t}, got ${e.length}`,"ERR_INVALID_KEY_TYPE");return e}r(7619),r(43736);function wr(e,t){let r=Uint8Array.from(e.abs().toByteArray());if(r=0===r[0]?r.subarray(1):r,null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=nr([new Uint8Array(t-r.length),r])}return $t(r,"base64url")}function vr(e){const t=function(e,t){let r=Yt(e,"base64urlpad");if(null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=nr([new Uint8Array(t-r.length),r])}return r}(e);return new Zt.jsbn.BigInteger($t(t,"base16"),16)}const Sr={"P-256":256,"P-384":384,"P-521":521};Object.keys(Sr).join(" / ");r(72313);const _r="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Ar(e){if(isNaN(e)||e<=0)throw new N.Ak("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return function(e=32){if(_r&&"function"==typeof _r.getRandomValues)return _r.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}(e)}r(15805);function Er(e,t){return t.map((t=>vr(e[t])))}async function xr(e){const t=[await ir.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Tr(e)],r=await kr({privateKey:t[0],publicKey:t[1]});return{privateKey:r[0],publicKey:r[1]}}async function kr(e){if(null==e.privateKey||null==e.publicKey)throw new N.Ak("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([ir.get().subtle.exportKey("jwk",e.privateKey),ir.get().subtle.exportKey("jwk",e.publicKey)])}async function Tr(e){return ir.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Ir(e,t,r,n){const i=t?function(e){return Zt.pki.setRsaPublicKey(...Er(e,["n","e"]))}(e):function(e){return Zt.pki.setRsaPrivateKey(...Er(e,["n","e","d","p","q","dp","dq","qi"]))}(e);return Yt(n($t(Uint8Array.from(r),"ascii"),i),"ascii")}function Pr(e){if("RSA"!==e.kty)throw new N.Ak("invalid key type","ERR_INVALID_KEY_TYPE");if(null==e.n)throw new N.Ak("invalid key modulus","ERR_INVALID_KEY_MODULUS");return 8*Yt(e.n,"base64url").length}const Rr=8192;class Cr{_key;constructor(e){this._key=e}async verify(e,t){return async function(e,t,r){const n=await ir.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return ir.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)}(this._key,t,e)}marshal(){return function(e){if(null==e.n||null==e.e)throw new N.Ak("JWK was missing components","ERR_INVALID_PARAMETERS");const t=Zt.pki.publicKeyToAsn1({n:vr(e.n),e:vr(e.e)});return Yt(Zt.asn1.toDer(t).getBytes(),"ascii")}(this._key)}get bytes(){return ur.encode({Type:ar.RSA,Data:this.marshal()}).subarray()}encrypt(e){return Ir(this._key,!0,e,((e,t)=>t.encrypt(e)))}equals(e){return wt(this.bytes,e.bytes)}async hash(){const{bytes:e}=await st.digest(this.bytes);return e}}class Or{_key;_publicKey;constructor(e,t){this._key=e,this._publicKey=t}genSecret(){return Ar(16)}async sign(e){return async function(e,t){const r=await ir.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await ir.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,0,n.byteLength)}(this._key,e)}get public(){if(null==this._publicKey)throw new N.Ak("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new Cr(this._publicKey)}decrypt(e){return Ir(this._key,!1,e,((e,t)=>t.decrypt(e)))}marshal(){return function(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw new N.Ak("JWK was missing components","ERR_INVALID_PARAMETERS");const t=Zt.pki.privateKeyToAsn1({n:vr(e.n),e:vr(e.e),d:vr(e.d),p:vr(e.p),q:vr(e.q),dP:vr(e.dp),dQ:vr(e.dq),qInv:vr(e.qi)});return Yt(Zt.asn1.toDer(t).getBytes(),"ascii")}(this._key)}get bytes(){return lr.encode({Type:ar.RSA,Data:this.marshal()}).subarray()}equals(e){return wt(this.bytes,e.bytes)}async hash(){const{bytes:e}=await st.digest(this.bytes);return e}async id(){return $t(await this.public.hash(),"base58btc")}async export(e,t="pkcs-8"){if("pkcs-8"===t){const t=new Zt.util.ByteBuffer(this.marshal()),r=Zt.asn1.fromDer(t),n=Zt.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return Zt.pki.encryptRsaPrivateKey(n,e,i)}if("libp2p-key"===t)return or(this.bytes,e);throw new N.Ak(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}async function Dr(e){const t=function(e){const t=Zt.asn1.fromDer($t(e,"ascii")),r=Zt.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:wr(r.n),e:wr(r.e),d:wr(r.d),p:wr(r.p),q:wr(r.q),dp:wr(r.dP),dq:wr(r.dQ),qi:wr(r.qInv),alg:"RS256"}}(e);if(Pr(t)>Rr)throw new N.Ak("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const r=await xr(t);return new Or(r.privateKey,r.publicKey)}function Br(e){const t=function(e){const t=Zt.asn1.fromDer($t(e,"ascii")),r=Zt.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:wr(r.n),e:wr(r.e)}}(e);if(Pr(t)>Rr)throw new N.Ak("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new Cr(t)}async function Nr(e){if(Pr(e)>Rr)throw new N.Ak("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const t=await xr(e);return new Or(t.privateKey,t.publicKey)}async function Ur(e){if(e>Rr)throw new N.Ak("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const t=await async function(e){const t=await ir.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await kr(t);return{privateKey:r[0],publicKey:r[1]}}(e);return new Or(t.privateKey,t.publicKey)}var Mr=r(64544);function jr(e){try{Mr.bI.ProjectivePoint.fromHex(e)}catch(e){throw new N.Ak(String(e),"ERR_INVALID_PUBLIC_KEY")}}class Lr{_key;constructor(e){jr(e),this._key=e}async verify(e,t){return async function(e,t,r){try{const{digest:n}=await st.digest(r);return Mr.bI.verify(t,n,e)}catch(e){throw new N.Ak(String(e),"ERR_INVALID_INPUT")}}(this._key,t,e)}marshal(){return e=this._key,Mr.bI.ProjectivePoint.fromHex(e).toRawBytes(!0);var e}get bytes(){return ur.encode({Type:ar.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return wt(this.bytes,e.bytes)}async hash(){const{bytes:e}=await st.digest(this.bytes);return e}}class Fr{_key;_publicKey;constructor(e,t){this._key=e,this._publicKey=t??function(e){try{return Mr.bI.getPublicKey(e,!0)}catch(e){throw new N.Ak(String(e),"ERR_INVALID_PRIVATE_KEY")}}(e),function(e){try{Mr.bI.getPublicKey(e,!0)}catch(e){throw new N.Ak(String(e),"ERR_INVALID_PRIVATE_KEY")}}(this._key),jr(this._publicKey)}async sign(e){return async function(e,t){const{digest:r}=await st.digest(t);try{return Mr.bI.sign(r,e).toDERRawBytes()}catch(e){throw new N.Ak(String(e),"ERR_INVALID_INPUT")}}(this._key,e)}get public(){return new Lr(this._publicKey)}marshal(){return this._key}get bytes(){return lr.encode({Type:ar.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return wt(this.bytes,e.bytes)}async hash(){const{bytes:e}=await st.digest(this.bytes);return e}async id(){return $t(await this.public.hash(),"base58btc")}async export(e,t="libp2p-key"){if("libp2p-key"===t)return or(this.bytes,e);throw new N.Ak(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function Wr(e){return new Fr(e)}function qr(e){return new Lr(e)}async function Kr(){const e=Mr.bI.utils.randomPrivateKey();return new Fr(e)}const Vr={rsa:b,ed25519:y,secp256k1:w};function zr(e){const t=Object.keys(Vr).join(" / ");return new N.Ak(`invalid or unsupported key type ${e}. Must be ${t}`,"ERR_UNSUPPORTED_KEY_TYPE")}function Jr(e){if("rsa"===(e=e.toLowerCase())||"ed25519"===e||"secp256k1"===e)return Vr[e];throw zr(e)}function Hr(e){const t=ur.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case ar.RSA:return Vr.rsa.unmarshalRsaPublicKey(r);case ar.Ed25519:return Vr.ed25519.unmarshalEd25519PublicKey(r);case ar.Secp256k1:return Vr.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw zr(t.Type??"unknown")}}async function $r(e){const t=lr.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case ar.RSA:return Vr.rsa.unmarshalRsaPrivateKey(r);case ar.Ed25519:return Vr.ed25519.unmarshalEd25519PrivateKey(r);case ar.Secp256k1:return Vr.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw zr(t.Type??"RSA")}}var Gr,Zr,Yr,Xr,Qr,en=r(44125);function tn(e){switch(e){case en.z8.Ignore:return Yr.Ignore;case en.z8.Reject:return Yr.Reject}}!function(e){e.StrictSign="StrictSign",e.StrictNoSign="StrictNoSign"}(Gr||(Gr={})),function(e){e[e.Signing=0]="Signing",e[e.Anonymous=1]="Anonymous"}(Zr||(Zr={})),function(e){e.Error="error",e.Ignore="ignore",e.Reject="reject",e.Blacklisted="blacklisted"}(Yr||(Yr={})),function(e){e.InvalidSignature="invalid_signature",e.InvalidSeqno="invalid_seqno",e.InvalidPeerId="invalid_peerid",e.SignaturePresent="signature_present",e.SeqnoPresent="seqno_present",e.FromPresent="from_present",e.TransformFailed="transform_failed"}(Xr||(Xr={})),function(e){e.duplicate="duplicate",e.invalid="invalid",e.valid="valid"}(Qr||(Qr={}));const rn="ERR_INVALID_PEER_SCORE_PARAMS",nn={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},sn={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function on(e={}){return{...nn,...e,topics:e.topics?Object.entries(e.topics).reduce(((e,[t,r])=>(e[t]=function(e={}){return{...sn,...e}}(r),e)),{}):{}}}function an(e){if(e.topicWeight<0)throw new N.Ak("invalid topic weight; must be >= 0",rn);if(0===e.timeInMeshQuantum)throw new N.Ak("invalid TimeInMeshQuantum; must be non zero",rn);if(e.timeInMeshWeight<0)throw new N.Ak("invalid TimeInMeshWeight; must be positive (or 0 to disable)",rn);if(0!==e.timeInMeshWeight&&e.timeInMeshQuantum<=0)throw new N.Ak("invalid TimeInMeshQuantum; must be positive",rn);if(0!==e.timeInMeshWeight&&e.timeInMeshCap<=0)throw new N.Ak("invalid TimeInMeshCap; must be positive",rn);if(e.firstMessageDeliveriesWeight<0)throw new N.Ak("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)",rn);if(0!==e.firstMessageDeliveriesWeight&&(e.firstMessageDeliveriesDecay<=0||e.firstMessageDeliveriesDecay>=1))throw new N.Ak("invalid FirstMessageDeliveriesDecay; must be between 0 and 1",rn);if(0!==e.firstMessageDeliveriesWeight&&e.firstMessageDeliveriesCap<=0)throw new N.Ak("invalid FirstMessageDeliveriesCap; must be positive",rn);if(e.meshMessageDeliveriesWeight>0)throw new N.Ak("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)",rn);if(0!==e.meshMessageDeliveriesWeight&&(e.meshMessageDeliveriesDecay<=0||e.meshMessageDeliveriesDecay>=1))throw new N.Ak("invalid MeshMessageDeliveriesDecay; must be between 0 and 1",rn);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesCap<=0)throw new N.Ak("invalid MeshMessageDeliveriesCap; must be positive",rn);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesThreshold<=0)throw new N.Ak("invalid MeshMessageDeliveriesThreshold; must be positive",rn);if(e.meshMessageDeliveriesWindow<0)throw new N.Ak("invalid MeshMessageDeliveriesWindow; must be non-negative",rn);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesActivation<1e3)throw new N.Ak("invalid MeshMessageDeliveriesActivation; must be at least 1s",rn);if(e.meshFailurePenaltyWeight>0)throw new N.Ak("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)",rn);if(0!==e.meshFailurePenaltyWeight&&(e.meshFailurePenaltyDecay<=0||e.meshFailurePenaltyDecay>=1))throw new N.Ak("invalid MeshFailurePenaltyDecay; must be between 0 and 1",rn);if(e.invalidMessageDeliveriesWeight>0)throw new N.Ak("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)",rn);if(e.invalidMessageDeliveriesDecay<=0||e.invalidMessageDeliveriesDecay>=1)throw new N.Ak("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1",rn)}const cn={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function un(e={}){return{...cn,...e}}function ln(e,t,r,n){let i=0;Object.entries(t.topics).forEach((([e,t])=>{const n=r.topics[e];if(void 0===n)return;let s=0;if(t.inMesh){let e=t.meshTime/n.timeInMeshQuantum;e>n.timeInMeshCap&&(e=n.timeInMeshCap),s+=e*n.timeInMeshWeight}let o=t.firstMessageDeliveries;if(o>n.firstMessageDeliveriesCap&&(o=n.firstMessageDeliveriesCap),s+=o*n.firstMessageDeliveriesWeight,t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<n.meshMessageDeliveriesThreshold){const e=n.meshMessageDeliveriesThreshold-t.meshMessageDeliveries;s+=e*e*n.meshMessageDeliveriesWeight}s+=t.meshFailurePenalty*n.meshFailurePenaltyWeight;s+=t.invalidMessageDeliveries*t.invalidMessageDeliveries*n.invalidMessageDeliveriesWeight,i+=s*n.topicWeight})),r.topicScoreCap>0&&i>r.topicScoreCap&&(i=r.topicScoreCap);const s=r.appSpecificScore(e);if(i+=s*r.appSpecificWeight,t.knownIPs.forEach((e=>{if(r.IPColocationFactorWhitelist.has(e))return;const t=n.get(e),s=t?t.size:0;if(s>r.IPColocationFactorThreshold){const e=s-r.IPColocationFactorThreshold;i+=e*e*r.IPColocationFactorWeight}})),t.behaviourPenalty>r.behaviourPenaltyThreshold){const e=t.behaviourPenalty-r.behaviourPenaltyThreshold;i+=e*e*r.behaviourPenaltyWeight}return i}var hn,dn=r(44534);!function(e){e[e.unknown=0]="unknown",e[e.valid=1]="valid",e[e.invalid=2]="invalid",e[e.ignored=3]="ignored"}(hn||(hn={}));class fn{records;queue;constructor(){this.records=new Map,this.queue=new dn}getRecord(e){return this.records.get(e)}ensureRecord(e){let t=this.records.get(e);if(t)return t;t={status:hn.unknown,firstSeenTsMs:Date.now(),validated:0,peers:new Set},this.records.set(e,t);const r={msgId:e,expire:Date.now()+12e4};return this.queue.push(r),t}gc(){const e=Date.now();let t=this.queue.peekFront();for(;t&&t.expire<e;)this.records.delete(t.msgId),this.queue.shift(),t=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}function pn(e,t,r=(()=>!0)){const n=new Set;if(t<=0)return n;for(const i of e){if(n.size>=t)break;r(i)&&(n.add(i),e.delete(i))}return n}class gn extends Map{getDefault;constructor(e){super(),this.getDefault=e}getOrDefault(e){let t=super.get(e);return void 0===t&&(t=this.getDefault(),this.set(e,t)),t}}const mn=Ot("libp2p:gossipsub:score");class yn{params;metrics;peerStats=new Map;peerIPs=new gn((()=>new Set));scoreCache=new Map;deliveryRecords=new fn;_backgroundInterval;scoreCacheValidityMs;computeScore;constructor(e,t,r){this.params=e,this.metrics=t,function(e){for(const[t,r]of Object.entries(e.topics))try{an(r)}catch(e){throw new N.Ak(`invalid score parameters for topic ${t}: ${e.message}`,rn)}if(e.topicScoreCap<0)throw new N.Ak("invalid topic score cap; must be positive (or 0 for no cap)",rn);if(null===e.appSpecificScore||void 0===e.appSpecificScore)throw new N.Ak("missing application specific score function",rn);if(e.IPColocationFactorWeight>0)throw new N.Ak("invalid IPColocationFactorWeight; must be negative (or 0 to disable)",rn);if(0!==e.IPColocationFactorWeight&&e.IPColocationFactorThreshold<1)throw new N.Ak("invalid IPColocationFactorThreshold; must be at least 1",rn);if(e.behaviourPenaltyWeight>0)throw new N.Ak("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)",rn);if(0!==e.behaviourPenaltyWeight&&(e.behaviourPenaltyDecay<=0||e.behaviourPenaltyDecay>=1))throw new N.Ak("invalid BehaviourPenaltyDecay; must be between 0 and 1",rn);if(e.decayInterval<1e3)throw new N.Ak("invalid DecayInterval; must be at least 1s",rn);if(e.decayToZero<=0||e.decayToZero>=1)throw new N.Ak("invalid DecayToZero; must be between 0 and 1",rn)}(e),this.scoreCacheValidityMs=r.scoreCacheValidityMs,this.computeScore=r.computeScore??ln}get size(){return this.peerStats.size}start(){this._backgroundInterval?mn("Peer score already running"):(this._backgroundInterval=setInterval((()=>this.background()),this.params.decayInterval),mn("started"))}stop(){this._backgroundInterval?(clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),mn("stopped")):mn("Peer score already stopped")}background(){this.refreshScores(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map((([e,t])=>[e,t])))}messageFirstSeenTimestampMs(e){const t=this.deliveryRecords.getRecord(e);return t?t.firstSeenTsMs:null}refreshScores(){const e=Date.now(),t=this.params.decayToZero;this.peerStats.forEach(((r,n)=>{r.connected?(Object.entries(r.topics).forEach((([r,n])=>{const i=this.params.topics[r];void 0!==i&&(n.firstMessageDeliveries*=i.firstMessageDeliveriesDecay,n.firstMessageDeliveries<t&&(n.firstMessageDeliveries=0),n.meshMessageDeliveries*=i.meshMessageDeliveriesDecay,n.meshMessageDeliveries<t&&(n.meshMessageDeliveries=0),n.meshFailurePenalty*=i.meshFailurePenaltyDecay,n.meshFailurePenalty<t&&(n.meshFailurePenalty=0),n.invalidMessageDeliveries*=i.invalidMessageDeliveriesDecay,n.invalidMessageDeliveries<t&&(n.invalidMessageDeliveries=0),n.inMesh&&(n.meshTime=e-n.graftTime,n.meshTime>i.meshMessageDeliveriesActivation&&(n.meshMessageDeliveriesActive=!0)))})),r.behaviourPenalty*=this.params.behaviourPenaltyDecay,r.behaviourPenalty<t&&(r.behaviourPenalty=0)):e>r.expire&&(this.removeIPsForPeer(n,r.knownIPs),this.peerStats.delete(n),this.scoreCache.delete(n))}))}score(e){this.metrics?.scoreFnCalls.inc();const t=this.peerStats.get(e);if(!t)return 0;const r=Date.now(),n=this.scoreCache.get(e);if(n&&n.cacheUntil>r)return n.score;this.metrics?.scoreFnRuns.inc();const i=this.computeScore(e,t,this.params,this.peerIPs),s=r+this.scoreCacheValidityMs;return n?(this.metrics?.scoreCachedDelta.observe(Math.abs(i-n.score)),n.score=i,n.cacheUntil=s):this.scoreCache.set(e,{score:i,cacheUntil:s}),i}addPenalty(e,t,r){const n=this.peerStats.get(e);n&&(n.behaviourPenalty+=t,this.metrics?.onScorePenalty(r))}addPeer(e){const t={connected:!0,expire:0,topics:{},knownIPs:new Set,behaviourPenalty:0};this.peerStats.set(e,t)}addIP(e,t){const r=this.peerStats.get(e);r&&r.knownIPs.add(t),this.peerIPs.getOrDefault(t).add(e)}removeIP(e,t){const r=this.peerStats.get(e);r&&r.knownIPs.delete(t);const n=this.peerIPs.get(t);n&&(n.delete(e),0===n.size&&this.peerIPs.delete(t))}removePeer(e){const t=this.peerStats.get(e);if(t){if(this.score(e)>0)return this.removeIPsForPeer(e,t.knownIPs),void this.peerStats.delete(e);Object.entries(t.topics).forEach((([e,t])=>{t.firstMessageDeliveries=0;const r=this.params.topics[e].meshMessageDeliveriesThreshold;if(t.inMesh&&t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<r){const e=r-t.meshMessageDeliveries;t.meshFailurePenalty+=e*e}t.inMesh=!1,t.meshMessageDeliveriesActive=!1})),t.connected=!1,t.expire=Date.now()+this.params.retainScore}}graft(e,t){const r=this.peerStats.get(e);if(r){const e=this.getPtopicStats(r,t);e&&(e.inMesh=!0,e.graftTime=Date.now(),e.meshTime=0,e.meshMessageDeliveriesActive=!1)}}prune(e,t){const r=this.peerStats.get(e);if(r){const e=this.getPtopicStats(r,t);if(e){const r=this.params.topics[t].meshMessageDeliveriesThreshold;if(e.meshMessageDeliveriesActive&&e.meshMessageDeliveries<r){const t=r-e.meshMessageDeliveries;e.meshFailurePenalty+=t*t}e.meshMessageDeliveriesActive=!1,e.inMesh=!1}}}validateMessage(e){this.deliveryRecords.ensureRecord(e)}deliverMessage(e,t,r){this.markFirstMessageDelivery(e,r);const n=this.deliveryRecords.ensureRecord(t),i=Date.now();n.status===hn.unknown?(n.status=hn.valid,n.validated=i,n.peers.forEach((t=>{t!==e.toString()&&this.markDuplicateMessageDelivery(t,r)}))):mn("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",e,i-n.firstSeenTsMs,hn[n.status])}rejectInvalidMessage(e,t){this.markInvalidMessageDelivery(e,t)}rejectMessage(e,t,r,n){switch(n){case Yr.Error:return void this.markInvalidMessageDelivery(e,r);case Yr.Blacklisted:return}const i=this.deliveryRecords.ensureRecord(t);if(i.status===hn.unknown){if(n===Yr.Ignore)return i.status=hn.ignored,void i.peers.clear();i.status=hn.invalid,this.markInvalidMessageDelivery(e,r),i.peers.forEach((e=>{this.markInvalidMessageDelivery(e,r)})),i.peers.clear()}else mn("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-i.firstSeenTsMs,hn[i.status])}duplicateMessage(e,t,r){const n=this.deliveryRecords.ensureRecord(t);if(!n.peers.has(e))switch(n.status){case hn.unknown:n.peers.add(e);break;case hn.valid:n.peers.add(e),this.markDuplicateMessageDelivery(e,r,n.validated);break;case hn.invalid:this.markInvalidMessageDelivery(e,r);case hn.ignored:}}markInvalidMessageDelivery(e,t){const r=this.peerStats.get(e);if(r){const e=this.getPtopicStats(r,t);e&&(e.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(e,t){const r=this.peerStats.get(e);if(r){const e=this.getPtopicStats(r,t);if(e){let r=this.params.topics[t].firstMessageDeliveriesCap;e.firstMessageDeliveries=Math.min(r,e.firstMessageDeliveries+1),e.inMesh&&(r=this.params.topics[t].meshMessageDeliveriesCap,e.meshMessageDeliveries=Math.min(r,e.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(e,t,r){const n=this.peerStats.get(e);if(n){const e=void 0!==r?Date.now():0,i=this.getPtopicStats(n,t);if(i&&i.inMesh){const n=this.params.topics[t];if(void 0!==r){const i=e-r,s=i>n.meshMessageDeliveriesWindow;if(this.metrics?.onDuplicateMsgDelivery(t,i,s),s)return}const s=n.meshMessageDeliveriesCap;i.meshMessageDeliveries=Math.min(s,i.meshMessageDeliveries+1)}}}removeIPsForPeer(e,t){for(const r of t){const t=this.peerIPs.get(r);t&&(t.delete(e),0===t.size&&this.peerIPs.delete(r))}}getPtopicStats(e,t){let r=e.topics[t];return void 0!==r?r:void 0!==this.params.topics[t]?(r={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[t]=r,r):null}}class bn{gossipsubIWantFollowupMs;msgIdToStrFn;metrics;promises=new Map;requestMsByMsg=new Map;requestMsByMsgExpire;constructor(e,t,r){this.gossipsubIWantFollowupMs=e,this.msgIdToStrFn=t,this.metrics=r,this.requestMsByMsgExpire=10*e}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(e,t){const r=t[Math.floor(Math.random()*t.length)],n=this.msgIdToStrFn(r);let i=this.promises.get(n);i||(i=new Map,this.promises.set(n,i));const s=Date.now();i.has(e)||(i.set(e,s+this.gossipsubIWantFollowupMs),this.metrics&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(n)||this.requestMsByMsg.set(n,s)))}getBrokenPromises(){const e=Date.now(),t=new Map;let r=0;return this.promises.forEach(((n,i)=>{n.forEach(((i,s)=>{i<e&&(t.set(s,(t.get(s)??0)+1),n.delete(s),r++)})),n.size||this.promises.delete(i)})),this.metrics?.iwantPromiseBroken.inc(r),t}deliverMessage(e,t=!1){this.trackMessage(e);const r=this.promises.get(e);r&&(this.promises.delete(e),this.metrics&&(this.metrics.iwantPromiseResolved.inc(1),t&&this.metrics.iwantPromiseResolvedFromDuplicate.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(r.size)))}rejectMessage(e,t){this.trackMessage(e),t!==Yr.Error&&this.promises.delete(e)}clear(){this.promises.clear()}prune(){const e=Date.now()-this.requestMsByMsgExpire;let t=0;for(const[r,n]of this.requestMsByMsg.entries()){if(!(n<e))break;this.requestMsByMsg.delete(r),t++}this.metrics?.iwantMessagePruned.inc(t)}trackMessage(e){if(this.metrics){const t=this.requestMsByMsg.get(e);void 0!==t&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-t)/1e3),this.requestMsByMsg.delete(e))}}}class wn{entries=new Map;validityMs;constructor(e){this.validityMs=e.validityMs}get size(){return this.entries.size}put(e,t){return!!this.entries.has(e)||(this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs}),!1)}prune(){const e=Date.now();for(const[t,r]of this.entries.entries()){if(!(r.validUntilMs<e))break;this.entries.delete(t)}}has(e){return this.entries.has(e)}get(e){const t=this.entries.get(e);return t&&t.validUntilMs>=Date.now()?t.value:void 0}clear(){this.entries.clear()}}var vn,Sn,_n,An,En,xn;!function(e){e.forward="forward",e.publish="publish"}(vn||(vn={})),function(e){e.Fanout="fanout",e.Random="random",e.Subscribed="subscribed",e.Outbound="outbound",e.NotEnough="not_enough",e.Opportunistic="opportunistic"}(Sn||(Sn={})),function(e){e.Dc="disconnected",e.BadScore="bad_score",e.Prune="prune",e.Excess="excess"}(_n||(_n={})),function(e){e.GraftBackoff="graft_backoff",e.BrokenPromise="broken_promise",e.MessageDeficit="message_deficit",e.IPColocation="IP_colocation"}(An||(An={})),function(e){e.LowScore="low_score",e.MaxIhave="max_ihave",e.MaxIasked="max_iasked"}(En||(En={})),function(e){e.graylist="graylist",e.publish="publish",e.gossip="gossip",e.mesh="mesh"}(xn||(xn={}));r(39504);r(3254);const kn=Yt("libp2p-pubsub:");function Tn(e){if("signed"!==e.type)throw new Error("expected signed message type");if(null==e.sequenceNumber)throw Error("missing seqno field");return((e,t)=>{const r=Yt(t.toString(16).padStart(16,"0"),"base16"),n=new Uint8Array(e.length+r.length);return n.set(e,0),n.set(r,e.length),n})(e.from.toBytes(),e.sequenceNumber)}async function In(e){return await st.encode(e.data)}function Pn(e,t,r,n,i){let s=0;const o=new Map;if(Object.entries(t.topics).forEach((([e,t])=>{const n=i.get(e)??"unknown",a=r.topics[e];if(void 0===a)return;let c=o.get(n);c||(c={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},o.set(n,c));let u=0,l=0,h=0,d=0,f=0;if(t.inMesh){u+=Math.max(t.meshTime/a.timeInMeshQuantum,a.timeInMeshCap)*a.timeInMeshWeight}let p=t.firstMessageDeliveries;if(p>a.firstMessageDeliveriesCap&&(p=a.firstMessageDeliveriesCap),l+=p*a.firstMessageDeliveriesWeight,t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<a.meshMessageDeliveriesThreshold){const e=a.meshMessageDeliveriesThreshold-t.meshMessageDeliveries;h+=e*e*a.meshMessageDeliveriesWeight}d+=t.meshFailurePenalty*a.meshFailurePenaltyWeight;f+=t.invalidMessageDeliveries*t.invalidMessageDeliveries*a.invalidMessageDeliveriesWeight,s+=(u+l+h+d+f)*a.topicWeight,c.p1w+=u,c.p2w+=l,c.p3w+=h,c.p3bw+=d,c.p4w+=f})),r.topicScoreCap>0&&s>r.topicScoreCap){s=r.topicScoreCap;const e=r.topicScoreCap/s;for(const t of o.values())t.p1w*=e,t.p2w*=e,t.p3w*=e,t.p3bw*=e,t.p4w*=e}let a=0,c=0,u=0;a+=r.appSpecificScore(e)*r.appSpecificWeight,t.knownIPs.forEach((e=>{if(r.IPColocationFactorWhitelist.has(e))return;const t=n.get(e),i=t?t.size:0;if(i>r.IPColocationFactorThreshold){const e=i-r.IPColocationFactorThreshold;c+=e*e*r.IPColocationFactorWeight}}));return u+=t.behaviourPenalty*t.behaviourPenalty*r.behaviourPenaltyWeight,s+=a+c+u,{byTopic:o,p5w:a,p6w:c,p7w:u,score:s}}var Rn=r(97313);class Cn{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||0!=(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}class On{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new Cn(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return null!=e?.byteLength?e.byteLength:1}push(e){if(null!=e?.value&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const t=this.head;this.head=t.next=new Cn(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(void 0===e&&null!=this.tail.next){const t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return null!=e?.value&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}}class Dn extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}function Bn(e={}){return Nn((e=>{const t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}}),e)}function Nn(e,t){let r,n,i,s=(t=t??{}).onEnd,o=new On,a=(0,Rn.A)();const c=e=>null!=n?n(e):(o.push(e),r),u=e=>{if(i)return r;if(!0!==t?.objectMode&&null==e?.byteLength)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:e})},l=e=>i?r:(i=!0,null!=e?(e=>(o=new On,null!=n?n({error:e}):(o.push({error:e}),r)))(e):c({done:!0}));if(r={[Symbol.asyncIterator](){return this},next:async()=>{try{return o.isEmpty()?i?{done:!0}:await new Promise(((t,i)=>{n=s=>{n=null,o.push(s);try{t(e(o))}catch(e){i(e)}return r}})):e(o)}finally{o.isEmpty()&&queueMicrotask((()=>{a.resolve(),a=(0,Rn.A)()}))}},return:()=>(o=new On,l(),{done:!0}),throw:e=>(l(e),{done:!0}),push:u,end:l,get readableLength(){return o.size},onEmpty:async e=>{const t=e?.signal;if(t?.throwIfAborted(),o.isEmpty())return;let r,n;null!=t&&(r=new Promise(((e,r)=>{n=()=>{r(new Dn)},t.addEventListener("abort",n)})));try{await Promise.race([a.promise,r])}finally{null!=n&&null!=t&&t?.removeEventListener("abort",n)}}},null==s)return r;const h=r;return r={[Symbol.asyncIterator](){return this},next:()=>h.next(),throw:e=>(h.throw(e),null!=s&&(s(e),s=void 0),{done:!0}),return:()=>(h.return(),null!=s&&(s(),s=void 0),{done:!0}),push:u,end:e=>(h.end(e),null!=s&&(s(e),s=void 0),r),get readableLength(){return h.readableLength}},r}class Un extends Error{constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}function Mn(e,t,r){const n=r??{},i=function(e){if(null!=e){if("function"==typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"==typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"==typeof e.next)return e}throw new Error("argument is not an iterator or iterable")}(e);return async function*(){let r;const s=()=>{null!=r&&r()};for(t.addEventListener("abort",s);;){let o;try{if(t.aborted){const{abortMessage:e,abortCode:t}=n;throw new Un(e,t)}const e=new Promise(((e,t)=>{r=()=>{const{abortMessage:e,abortCode:r}=n;t(new Un(e,r))}}));o=await Promise.race([e,i.next()]),r=null}catch(r){t.removeEventListener("abort",s);const o="aborted"===r.type&&t.aborted;if(o&&null!=n.onAbort&&n.onAbort(e),"function"==typeof i.return)try{const e=i.return();e instanceof Promise&&e.catch((e=>{null!=n.onReturnError&&n.onReturnError(e)}))}catch(e){null!=n.onReturnError&&n.onReturnError(e)}if(o&&!0===n.returnOnAbort)return;throw r}if(!0===o.done)break;yield o.value}t.removeEventListener("abort",s)}()}var jn=r(89754);class Ln{rawStream;pushable;closeController;maxBufferSize;constructor(e,t,r){this.rawStream=e,this.pushable=Bn({objectMode:!1}),this.closeController=new AbortController,this.maxBufferSize=r.maxBufferSize??1/0,(0,B.F)(Mn(this.pushable,this.closeController.signal,{returnOnAbort:!0}),(e=>(0,jn.l)(e)),this.rawStream).catch(t)}get protocol(){return this.rawStream.protocol}push(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(e)}close(){this.closeController.abort(),this.pushable.return(),this.rawStream.close()}}class Fn{source;rawStream;closeController;constructor(e,t={}){this.rawStream=e,this.closeController=new AbortController,this.source=Mn((0,B.F)(this.rawStream,(e=>(0,jn.D)(e,t))),this.closeController.signal,{returnOnAbort:!0})}close(){this.closeController.abort(),this.rawStream.close()}}var Wn=r(85590);const qn={maxSubscriptions:1/0,maxMessages:1/0,maxIhaveMessageIDs:1/0,maxIwantMessageIDs:1/0,maxControlMessages:1/0,maxPeerInfos:1/0};function Kn(e,t){t={...t};const r=Wn.Reader.create(e),n=e.length,i=void 0===n?r.len:r.pos+n,s={};for(;r.pos<i;){const e=r.uint32();switch(e>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.length<t.maxSubscriptions?s.subscriptions.push(Vn(r,r.uint32())):r.skipType(7&e);break;case 2:s.messages&&s.messages.length||(s.messages=[]),s.messages.length<t.maxMessages?s.messages.push(zn(r,r.uint32())):r.skipType(7&e);break;case 3:s.control=Jn(r,r.uint32(),t);break;default:r.skipType(7&e)}}return s}function Vn(e,t){const r=void 0===t?e.len:e.pos+t,n={};for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.subscribe=e.bool();break;case 2:n.topic=e.string();break;default:e.skipType(7&t)}}return n}function zn(e,t){const r=void 0===t?e.len:e.pos+t,n={};for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.from=e.bytes();break;case 2:n.data=e.bytes();break;case 3:n.seqno=e.bytes();break;case 4:n.topic=e.string();break;case 5:n.signature=e.bytes();break;case 6:n.key=e.bytes();break;default:e.skipType(7&t)}}if(!n.topic)throw Error("missing required 'topic'");return n}function Jn(e,t,r){const n=void 0===t?e.len:e.pos+t,i={};for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:i.ihave&&i.ihave.length||(i.ihave=[]),i.ihave.length<r.maxControlMessages?i.ihave.push(Hn(e,e.uint32(),r)):e.skipType(7&t);break;case 2:i.iwant&&i.iwant.length||(i.iwant=[]),i.iwant.length<r.maxControlMessages?i.iwant.push($n(e,e.uint32(),r)):e.skipType(7&t);break;case 3:i.graft&&i.graft.length||(i.graft=[]),i.graft.length<r.maxControlMessages?i.graft.push(Gn(e,e.uint32())):e.skipType(7&t);break;case 4:i.prune&&i.prune.length||(i.prune=[]),i.prune.length<r.maxControlMessages?i.prune.push(Zn(e,e.uint32(),r)):e.skipType(7&t);break;default:e.skipType(7&t)}}return i}function Hn(e,t,r){const n=void 0===t?e.len:e.pos+t,i={};for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:i.topicID=e.string();break;case 2:i.messageIDs&&i.messageIDs.length||(i.messageIDs=[]),r.maxIhaveMessageIDs-- >0?i.messageIDs.push(e.bytes()):e.skipType(7&t);break;default:e.skipType(7&t)}}return i}function $n(e,t,r){const n=void 0===t?e.len:e.pos+t,i={};for(;e.pos<n;){const t=e.uint32();if(t>>>3==1)i.messageIDs&&i.messageIDs.length||(i.messageIDs=[]),r.maxIwantMessageIDs-- >0?i.messageIDs.push(e.bytes()):e.skipType(7&t);else e.skipType(7&t)}return i}function Gn(e,t){const r=void 0===t?e.len:e.pos+t,n={};for(;e.pos<r;){const t=e.uint32();if(t>>>3==1)n.topicID=e.string();else e.skipType(7&t)}return n}function Zn(e,t,r){const n=void 0===t?e.len:e.pos+t,i={};for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:i.topicID=e.string();break;case 2:i.peers&&i.peers.length||(i.peers=[]),r.maxPeerInfos-- >0?i.peers.push(Yn(e,e.uint32())):e.skipType(7&t);break;case 3:i.backoff=e.uint64();break;default:e.skipType(7&t)}}return i}function Yn(e,t){const r=void 0===t?e.len:e.pos+t,n={};for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.peerID=e.bytes();break;case 2:n.signedPeerRecord=e.bytes();break;default:e.skipType(7&t)}}return n}r(48874);var Xn=r(38231);var Qn=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*l+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}},ei=Qn;new Uint8Array(0);const ti=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class ri{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ni{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return si(this,e)}}class ii{constructor(e){this.decoders=e}or(e){return si(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const si=(e,t)=>new ii({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class oi{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new ri(e,t,r),this.decoder=new ni(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ai=({name:e,prefix:t,encode:r,decode:n})=>new oi(e,t,r,n),ci=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=ei(r,t);return ai({prefix:e,name:t,encode:n,decode:e=>ti(i(e))})},ui=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>ai({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),li=ai({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),hi=ui({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),di=ui({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),fi=ci({prefix:"9",name:"base10",alphabet:"0123456789"}),pi=ui({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),gi=ui({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),mi=ui({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yi=ui({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bi=ui({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),wi=ui({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vi=ui({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Si=ui({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_i=ui({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ai=ui({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ei=ui({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),xi=ci({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ki=ci({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Ti=ci({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ii=ci({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Pi=ui({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ri=ui({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ci=ui({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Oi=ui({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Di=Array.from(""),Bi=Di.reduce(((e,t,r)=>(e[r]=t,e)),[]),Ni=Di.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const Ui=ai({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Bi[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Ni[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var Mi=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=Fi;)r[n++]=255&t|ji,t/=128;for(;t&Li;)r[n++]=255&t|ji,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},ji=128,Li=-128,Fi=Math.pow(2,31);var Wi=function e(t,r){var n,i=0,s=0,o=r=r||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(n&Ki)<<s:(n&Ki)*Math.pow(2,s),s+=7}while(n>=qi);return e.bytes=o-r,i},qi=128,Ki=127;var Vi=Math.pow(2,7),zi=Math.pow(2,14),Ji=Math.pow(2,21),Hi=Math.pow(2,28),$i=Math.pow(2,35),Gi=Math.pow(2,42),Zi=Math.pow(2,49),Yi=Math.pow(2,56),Xi=Math.pow(2,63),Qi={encode:Mi,decode:Wi,encodingLength:function(e){return e<Vi?1:e<zi?2:e<Ji?3:e<Hi?4:e<$i?5:e<Gi?6:e<Zi?7:e<Yi?8:e<Xi?9:10}};const es=(e,t,r=0)=>(Qi.encode(e,t,r),t),ts=e=>Qi.encodingLength(e),rs=(e,t)=>{const r=t.byteLength,n=ts(e),i=n+ts(r),s=new Uint8Array(i+r);return es(e,s,0),es(r,s,n),s.set(t,i),new ns(e,r,t,s)};class ns{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const is=({name:e,code:t,encode:r})=>new ss(e,t,r);class ss{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?rs(this.code,t):t.then((e=>rs(this.code,e)))}throw Error("Unknown type, must be binary type")}}const os=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),as=is({name:"sha2-256",code:18,encode:os("SHA-256")}),cs=is({name:"sha2-512",code:19,encode:os("SHA-512")}),us=ti,ls={code:0,name:"identity",encode:us,digest:e=>rs(0,us(e))},hs="raw",ds=85,fs=e=>ti(e),ps=e=>ti(e),gs=new TextEncoder,ms=new TextDecoder,ys="json",bs=512,ws=e=>gs.encode(JSON.stringify(e)),vs=e=>JSON.parse(ms.decode(e));new WeakMap;class Ss{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==cid_DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==cid_SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ss.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=rs(e,t);return Ss.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Ss.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&((e,t)=>{if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0})(e.bytes,r.bytes)}})(e.multihash,r.multihash)}toString(e){return cid_format(this,e)}toJSON(){return{"/":cid_format(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof Ss)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new Ss(e,r,n,i||cid_encodeCID(e,r,n.bytes))}if(!0===t[cid_cidSymbol]){const{version:e,multihash:r,code:n}=t,i=(e=>{const t=ti(e),[r,n]=multiformats_src_varint_decode(t),[i,s]=multiformats_src_varint_decode(t.subarray(n)),o=t.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new ns(r,i,o,t)})(r);return Ss.create(e,n,i)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==cid_DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${cid_DAG_PB_CODE}) block encoding`);return new Ss(e,t,r,r.bytes);case 1:{const n=cid_encodeCID(e,t,r.bytes);return new Ss(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return Ss.create(0,cid_DAG_PB_CODE,e)}static createV1(e,t){return Ss.create(1,e,t)}static decode(e){const[t,r]=Ss.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Ss.inspectBytes(e),r=t.size-t.multihashSize,n=ti(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new ns(t.multihashCode,t.digestSize,i,n);return[0===t.version?Ss.createV0(s):Ss.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=multiformats_src_varint_decode(e.subarray(t));return n,r};let n=r(),i=cid_DAG_PB_CODE;if(18===n?(0,0):r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t,o=r(),a=r(),c=t+a;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:c-s,size:c}}static parse(e,t){const[r,n]=cid_parseCIDtoBytes(e,t),i=Ss.decode(n);if(0===i.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return cid_baseCache(i).set(r,e),i}}Symbol.for("@ipld/js-cid/CID");const _s={...v,...S,..._,...A,...E,...x,...k,...T,...I,...P};function As(e=0){return null!=globalThis.Buffer?.allocUnsafe?(t=globalThis.Buffer.allocUnsafe(e),null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t):new Uint8Array(e);var t}function Es(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const xs=Es("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),ks=Es("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=As((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}));var Ts={utf8:xs,"utf-8":xs,hex:_s.base16,latin1:ks,ascii:ks,binary:ks,..._s};function Is(e,t="utf8"){const r=Ts[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var Ps=r(71675);const Rs=function(e,t=0,r){t=~~t,r=r??e.length-t;const n=new DataView(e.buffer);if(4===r){const n=[];for(let i=0;i<r;i++)n.push(e[t+i]);return n.join(".")}if(16===r){const e=[];for(let i=0;i<r;i+=2)e.push(n.getUint16(t+i).toString(16));return e.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},Cs=-1,Os={},Ds={};function Bs(e){if("number"==typeof e){if(null!=Ds[e])return Ds[e];throw new Error(`no protocol with code: ${e}`)}if("string"==typeof e){if(null!=Os[e])return Os[e];throw new Error(`no protocol with name: ${e}`)}throw new Error("invalid protocol id type: "+typeof e)}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Cs,"ip6zone"],[43,8,"ipcidr"],[53,Cs,"dns",!0],[54,Cs,"dns4",!0],[55,Cs,"dns6",!0],[56,Cs,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Cs,"unix",!1,!0],[421,Cs,"ipfs"],[421,Cs,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Cs,"garlic64"],[448,0,"tls"],[449,Cs,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,Cs,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,Cs,"memory"]].forEach((e=>{const t=function(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}(...e);Ds[t.code]=t,Os[t.name]=t}));Bs("ip4"),Bs("ip6"),Bs("ipcidr");function Ns(e,t){switch(Bs(e).code){case 4:case 41:return function(e){const t=Rs(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!Ps.ei(t))throw new Error("invalid ip address");return t}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return js(t);case 6:case 273:case 33:case 132:return Ms(t).toString();case 421:return function(e){const t=Xn.D4(e),r=e.slice(Xn.OY(t));if(r.length!==t)throw new Error("inconsistent lengths");return Is(r,"base58btc")}(t);case 444:case 445:return Ls(t);case 466:return function(e){const t=Xn.D4(e),r=e.slice(Xn.OY(t));if(r.length!==t)throw new Error("inconsistent lengths");return"u"+Is(r,"base64url")}(t);default:return Is(t,"base16")}}const Us=Object.values(bt).map((e=>e.decoder));!function(){let e=Us[0].or(Us[1]);Us.slice(2).forEach((t=>e=e.or(t)))}();function Ms(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function js(e){const t=Xn.D4(e);if((e=e.slice(Xn.OY(t))).length!==t)throw new Error("inconsistent lengths");return Is(e)}function Ls(e){const t=e.slice(0,e.length-2),r=e.slice(e.length-2);return`${Is(t,"base32")}:${Ms(r)}`}var Fs;!function(e){e[e.ip4=4]="ip4",e[e.ip6=41]="ip6"}(Fs||(Fs={}));var Ws;!function(e){e[e.started=0]="started",e[e.stopped=1]="stopped"}(Ws||(Ws={}));class qs extends Dt.b{globalSignaturePolicy;multicodecs=[Lt,jt];publishConfig;dataTransform;peers=new Set;streamsInbound=new Map;streamsOutbound=new Map;outboundInflightQueue=Bn({objectMode:!0});direct=new Set;floodsubPeers=new Set;seenCache;acceptFromWhitelist=new Map;topics=new Map;subscriptions=new Set;mesh=new Map;fanout=new Map;fanoutLastpub=new Map;gossip=new Map;control=new Map;peerhave=new Map;iasked=new Map;backoff=new Map;outbound=new Map;msgIdFn;fastMsgIdFn;msgIdToStrFn;fastMsgIdCache;publishedMessageIds;mcache;score;topicValidators=new Map;log;heartbeatTicks=0;gossipTracer;components;directPeerInitial=null;static multicodec=Lt;opts;decodeRpcLimits;metrics;status={code:Ws.stopped};maxInboundStreams;maxOutboundStreams;allowedTopics;heartbeatTimer=null;constructor(e,t={}){super();const r={fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:6,Dlo:4,Dhi:12,Dscore:4,Dout:2,Dlazy:6,heartbeatInterval:1e3,fanoutTTL:6e4,mcacheLength:5,mcacheGossip:3,seenTTL:12e4,gossipsubIWantFollowupMs:3e3,prunePeers:16,pruneBackoff:6e4,unsubcribeBackoff:1e4,graftFloodThreshold:1e4,opportunisticGraftPeers:2,opportunisticGraftTicks:60,directConnectTicks:300,...t,scoreParams:on(t.scoreParams),scoreThresholds:un(t.scoreThresholds)};if(this.components=e,this.decodeRpcLimits=r.decodeRpcLimits??qn,this.globalSignaturePolicy=r.globalSignaturePolicy??en.rv,r.fallbackToFloodsub&&this.multicodecs.push(Mt),this.log=Ot(r.debugName??"libp2p:gossipsub"),this.opts=r,this.direct=new Set(r.directPeers.map((e=>e.id.toString()))),this.seenCache=new wn({validityMs:r.seenTTL}),this.publishedMessageIds=new wn({validityMs:r.seenTTL}),t.msgIdFn)this.msgIdFn=t.msgIdFn;else switch(this.globalSignaturePolicy){case en.rv:this.msgIdFn=Tn;break;case en.G$:this.msgIdFn=In}if(t.fastMsgIdFn&&(this.fastMsgIdFn=t.fastMsgIdFn,this.fastMsgIdCache=new wn({validityMs:r.seenTTL})),this.msgIdToStrFn=t.msgIdToStrFn??Gt,this.mcache=t.messageCache||new Bt(r.mcacheGossip,r.mcacheLength,this.msgIdToStrFn),t.dataTransform&&(this.dataTransform=t.dataTransform),t.metricsRegister){if(!t.metricsTopicStrToLabel)throw Error("Must set metricsTopicStrToLabel with metrics");const e=Math.max(...Object.values(r.scoreParams.topics).map((e=>e.meshMessageDeliveriesWindow)),1e3),n=function(e,t,r){return{protocolsEnabled:e.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:e.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:e.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:e.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEventsFanout:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_fanout_total",help:"Number of times we include peers in a topic mesh for fanout reasons",labelNames:["topic"]}),meshPeerInclusionEventsRandom:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_random_total",help:"Number of times we include peers in a topic mesh for random reasons",labelNames:["topic"]}),meshPeerInclusionEventsSubscribed:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_subscribed_total",help:"Number of times we include peers in a topic mesh for subscribed reasons",labelNames:["topic"]}),meshPeerInclusionEventsOutbound:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_outbound_total",help:"Number of times we include peers in a topic mesh for outbound reasons",labelNames:["topic"]}),meshPeerInclusionEventsNotEnough:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_not_enough_total",help:"Number of times we include peers in a topic mesh for not_enough reasons",labelNames:["topic"]}),meshPeerInclusionEventsOpportunistic:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_opportunistic_total",help:"Number of times we include peers in a topic mesh for opportunistic reasons",labelNames:["topic"]}),meshPeerInclusionEventsUnknown:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_unknown_total",help:"Number of times we include peers in a topic mesh for unknown reasons",labelNames:["topic"]}),meshPeerChurnEventsDisconnected:e.gauge({name:"gossipsub_peer_churn_events_disconnected_total",help:"Number of times we remove peers in a topic mesh for disconnected reasons",labelNames:["topic"]}),meshPeerChurnEventsBadScore:e.gauge({name:"gossipsub_peer_churn_events_bad_score_total",help:"Number of times we remove peers in a topic mesh for bad_score reasons",labelNames:["topic"]}),meshPeerChurnEventsPrune:e.gauge({name:"gossipsub_peer_churn_events_prune_total",help:"Number of times we remove peers in a topic mesh for prune reasons",labelNames:["topic"]}),meshPeerChurnEventsExcess:e.gauge({name:"gossipsub_peer_churn_events_excess_total",help:"Number of times we remove peers in a topic mesh for excess reasons",labelNames:["topic"]}),meshPeerChurnEventsUnknown:e.gauge({name:"gossipsub_peer_churn_events_unknown_total",help:"Number of times we remove peers in a topic mesh for unknown reasons",labelNames:["topic"]}),peersPerProtocol:e.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:e.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:e.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),acceptedMessagesTotal:e.gauge({name:"gossipsub_accepted_messages_total",help:"Total accepted messages for each topic",labelNames:["topic"]}),ignoredMessagesTotal:e.gauge({name:"gossipsub_ignored_messages_total",help:"Total ignored messages for each topic",labelNames:["topic"]}),rejectedMessagesTotal:e.gauge({name:"gossipsub_rejected_messages_total",help:"Total rejected messages for each topic",labelNames:["topic"]}),unknownValidationResultsTotal:e.gauge({name:"gossipsub_unknown_validation_results_total",help:"Total unknown validation results for each topic",labelNames:["topic"]}),asyncValidationMcacheHit:e.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),asyncValidationDelayFromFirstSeenSec:e.histogram({name:"gossipsub_async_validation_delay_from_first_seen",help:"Async validation report delay from first seen in second",labelNames:["topic"],buckets:[.01,.03,.1,.3,1,3,10]}),asyncValidationUnknownFirstSeen:e.gauge({name:"gossipsub_async_validation_unknown_first_seen_count_total",help:"Async validation report unknown first seen value for message"}),peerReadStreamError:e.gauge({name:"gossipsub_peer_read_stream_err_count_total",help:"Peer read stream error"}),rpcRecvBytes:e.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:e.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:e.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:e.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:e.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:e.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:e.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:e.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:e.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcDataError:e.gauge({name:"gossipsub_rpc_data_err_count_total",help:"RPC data error"}),rpcRecvError:e.gauge({name:"gossipsub_rpc_recv_err_count_total",help:"RPC recv error"}),rpcRecvNotAccepted:e.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:e.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:e.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:e.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:e.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:e.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:e.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:e.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:e.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:e.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:e.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeersByTopic:e.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),directPeersPublishedTotal:e.gauge({name:"gossipsub_direct_peers_published_total",help:"Total direct peers that we publish a msg to",labelNames:["topic"]}),floodsubPeersPublishedTotal:e.gauge({name:"gossipsub_floodsub_peers_published_total",help:"Total floodsub peers that we publish a msg to",labelNames:["topic"]}),meshPeersPublishedTotal:e.gauge({name:"gossipsub_mesh_peers_published_total",help:"Total mesh peers that we publish a msg to",labelNames:["topic"]}),fanoutPeersPublishedTotal:e.gauge({name:"gossipsub_fanout_peers_published_total",help:"Total fanout peers that we publish a msg to",labelNames:["topic"]}),msgPublishBytes:e.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgPublishTime:e.histogram({name:"gossipsub_msg_publish_seconds",help:"Total time in seconds to publish a message",buckets:[.001,.002,.005,.01,.1,.5,1],labelNames:["topic"]}),msgForwardCount:e.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:e.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:e.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedError:e.gauge({name:"gossipsub_msg_received_error_total",help:"Total count of recv msgs error",labelNames:["topic"]}),prevalidationInvalidTotal:e.gauge({name:"gossipsub_pre_validation_invalid_total",help:"Total count of invalid messages received",labelNames:["topic"]}),prevalidationValidTotal:e.gauge({name:"gossipsub_pre_validation_valid_total",help:"Total count of valid messages received",labelNames:["topic"]}),prevalidationDuplicateTotal:e.gauge({name:"gossipsub_pre_validation_duplicate_total",help:"Total count of duplicate messages received",labelNames:["topic"]}),prevalidationUnknownTotal:e.gauge({name:"gossipsub_pre_validation_unknown_status_total",help:"Total count of unknown_status messages received",labelNames:["topic"]}),msgReceivedInvalid:e.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["error"]}),msgReceivedInvalidByTopic:e.gauge({name:"gossipsub_msg_received_invalid_by_topic_total",help:"Tracks specific invalid message by topic",labelNames:["topic"]}),duplicateMsgDeliveryDelay:e.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*r.maxMeshMessageDeliveriesWindowSec,.5*r.maxMeshMessageDeliveriesWindowSec,1*r.maxMeshMessageDeliveriesWindowSec,2*r.maxMeshMessageDeliveriesWindowSec,4*r.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:e.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),duplicateMsgIgnored:e.gauge({name:"gossisub_ignored_published_duplicate_msgs_total",help:"Total count of published duplicate message ignored by topic",labelNames:["topic"]}),scoreFnCalls:e.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:e.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:e.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:e.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:e.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores"}),scoreWeights:e.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:e.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:e.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:e.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*r.behaviourPenaltyThreshold,.5*r.behaviourPenaltyThreshold,1*r.behaviourPenaltyThreshold,2*r.behaviourPenaltyThreshold,4*r.behaviourPenaltyThreshold]}),ihaveRcvIgnored:e.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:e.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:e.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:e.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:e.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:e.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:e.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedFromDuplicate:e.gauge({name:"gossipsub_iwant_promise_resolved_from_duplicate_total",help:"Total count of resolved IWANT promises from duplicate messages"}),iwantPromiseResolvedPeers:e.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:e.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantMessagePruned:e.gauge({name:"gossipsub_iwant_message_pruned",help:"Total count of pruned IWANT messages"}),iwantPromiseDeliveryTime:e.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*r.gossipPromiseExpireSec,1*r.gossipPromiseExpireSec,2*r.gossipPromiseExpireSec,4*r.gossipPromiseExpireSec]}),iwantPromiseUntracked:e.gauge({name:"gossip_iwant_promise_untracked",help:"Total count of untracked IWANT promise"}),connectedPeersBackoffSec:e.histogram({name:"gossipsub_connected_peers_backoff_seconds",help:"Backoff time in seconds",buckets:[1,2,4,10,20,60,120]}),cacheSize:e.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:e.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),mcacheNotValidatedCount:e.gauge({name:"gossipsub_mcache_not_validated_count",help:"Current mcache msg count not validated"}),fastMsgIdCacheCollision:e.gauge({name:"gossipsub_fastmsgid_cache_collision_total",help:"Total count of key collisions on fastmsgid cache put"}),newConnectionCount:e.gauge({name:"gossipsub_new_connection_total",help:"Total new connection by status",labelNames:["status"]}),topicStrToLabel:t,toTopic(e){return this.topicStrToLabel.get(e)??e},onJoin(e){this.topicSubscriptionStatus.set({topicStr:e},1),this.meshPeerCounts.set({topicStr:e},0)},onLeave(e){this.topicSubscriptionStatus.set({topicStr:e},0),this.meshPeerCounts.set({topicStr:e},0)},onAddToMesh(e,t,r){const n=this.toTopic(e);switch(t){case Sn.Fanout:this.meshPeerInclusionEventsFanout.inc({topic:n},r);break;case Sn.Random:this.meshPeerInclusionEventsRandom.inc({topic:n},r);break;case Sn.Subscribed:this.meshPeerInclusionEventsSubscribed.inc({topic:n},r);break;case Sn.Outbound:this.meshPeerInclusionEventsOutbound.inc({topic:n},r);break;case Sn.NotEnough:this.meshPeerInclusionEventsNotEnough.inc({topic:n},r);break;case Sn.Opportunistic:this.meshPeerInclusionEventsOpportunistic.inc({topic:n},r);break;default:this.meshPeerInclusionEventsUnknown.inc({topic:n},r)}},onRemoveFromMesh(e,t,r){const n=this.toTopic(e);switch(t){case _n.Dc:this.meshPeerChurnEventsDisconnected.inc({topic:n},r);break;case _n.BadScore:this.meshPeerChurnEventsBadScore.inc({topic:n},r);break;case _n.Prune:this.meshPeerChurnEventsPrune.inc({topic:n},r);break;case _n.Excess:this.meshPeerChurnEventsExcess.inc({topic:n},r);break;default:this.meshPeerChurnEventsUnknown.inc({topic:n},r)}},onReportValidation(e,t,r){if(this.asyncValidationMcacheHit.inc({hit:null!=e?"hit":"miss"}),null!=e){const r=this.toTopic(e.message.topic);switch(t){case en.z8.Accept:this.acceptedMessagesTotal.inc({topic:r});break;case en.z8.Ignore:this.ignoredMessagesTotal.inc({topic:r});break;case en.z8.Reject:this.rejectedMessagesTotal.inc({topic:r});break;default:this.unknownValidationResultsTotal.inc({topic:r})}}null!=r?this.asyncValidationDelayFromFirstSeenSec.observe((Date.now()-r)/1e3):this.asyncValidationUnknownFirstSeen.inc()},onScorePenalty(e){this.scoringPenalties.inc({penalty:e},1)},onIhaveRcv(e,t,r){const n=this.toTopic(e);this.ihaveRcvMsgids.inc({topic:n},t),this.ihaveRcvNotSeenMsgids.inc({topic:n},r)},onIwantRcv(e,t){for(const[t,r]of e){const e=this.toTopic(t);this.iwantRcvMsgids.inc({topic:e},r)}this.iwantRcvDonthaveMsgids.inc(t)},onForwardMsg(e,t){const r=this.toTopic(e);this.msgForwardCount.inc({topic:r},1),this.msgForwardPeers.inc({topic:r},t)},onPublishMsg(e,t,r,n,i){const s=this.toTopic(e);this.msgPublishCount.inc({topic:s},1),this.msgPublishBytes.inc({topic:s},r*n),this.msgPublishPeersByTopic.inc({topic:s},r),this.directPeersPublishedTotal.inc({topic:s},t.direct),this.floodsubPeersPublishedTotal.inc({topic:s},t.floodsub),this.meshPeersPublishedTotal.inc({topic:s},t.mesh),this.fanoutPeersPublishedTotal.inc({topic:s},t.fanout),this.msgPublishTime.observe({topic:s},i/1e3)},onMsgRecvPreValidation(e){const t=this.toTopic(e);this.msgReceivedPreValidation.inc({topic:t},1)},onMsgRecvError(e){const t=this.toTopic(e);this.msgReceivedError.inc({topic:t},1)},onPrevalidationResult(e,t){const r=this.toTopic(e);switch(t){case Qr.duplicate:this.prevalidationDuplicateTotal.inc({topic:r});break;case Qr.invalid:this.prevalidationInvalidTotal.inc({topic:r});break;case Qr.valid:this.prevalidationValidTotal.inc({topic:r});break;default:this.prevalidationUnknownTotal.inc({topic:r})}},onMsgRecvInvalid(e,t){const r=this.toTopic(e),n=t.reason===Yr.Error?t.error:t.reason;this.msgReceivedInvalid.inc({error:n},1),this.msgReceivedInvalidByTopic.inc({topic:r},1)},onDuplicateMsgDelivery(e,t,r){if(this.duplicateMsgDeliveryDelay.observe(t/1e3),r){const t=this.toTopic(e);this.duplicateMsgLateDelivery.inc({topic:t},1)}},onPublishDuplicateMsg(e){const t=this.toTopic(e);this.duplicateMsgIgnored.inc({topic:t},1)},onPeerReadStreamError(){this.peerReadStreamError.inc(1)},onRpcRecvError(){this.rpcRecvError.inc(1)},onRpcDataError(){this.rpcDataError.inc(1)},onRpcRecv(e,t){this.rpcRecvBytes.inc(t),this.rpcRecvCount.inc(1),e.subscriptions&&this.rpcRecvSubscription.inc(e.subscriptions.length),e.messages&&this.rpcRecvMessage.inc(e.messages.length),e.control&&(this.rpcRecvControl.inc(1),e.control.ihave&&this.rpcRecvIHave.inc(e.control.ihave.length),e.control.iwant&&this.rpcRecvIWant.inc(e.control.iwant.length),e.control.graft&&this.rpcRecvGraft.inc(e.control.graft.length),e.control.prune&&this.rpcRecvPrune.inc(e.control.prune.length))},onRpcSent(e,t){if(this.rpcSentBytes.inc(t),this.rpcSentCount.inc(1),e.subscriptions&&this.rpcSentSubscription.inc(e.subscriptions.length),e.messages&&this.rpcSentMessage.inc(e.messages.length),e.control){const t=e.control.ihave?.length??0,r=e.control.iwant?.length??0,n=e.control.graft?.length??0,i=e.control.prune?.length??0;t>0&&this.rpcSentIHave.inc(t),r>0&&this.rpcSentIWant.inc(r),n>0&&this.rpcSentGraft.inc(n),i>0&&this.rpcSentPrune.inc(i),(t>0||r>0||n>0||i>0)&&this.rpcSentControl.inc(1)}},registerScores(e,t){let r=0,n=0,i=0,s=0;for(const o of e)o>=t.graylistThreshold&&r++,o>=t.publishThreshold&&n++,o>=t.gossipThreshold&&i++,o>=0&&s++;this.peersByScoreThreshold.set({threshold:xn.graylist},r),this.peersByScoreThreshold.set({threshold:xn.publish},n),this.peersByScoreThreshold.set({threshold:xn.gossip},i),this.peersByScoreThreshold.set({threshold:xn.mesh},s),this.score.set(e)},registerScoreWeights(e){for(const[t,r]of e.byTopic)this.scoreWeights.set({topic:t,p:"p1"},r.p1w),this.scoreWeights.set({topic:t,p:"p2"},r.p2w),this.scoreWeights.set({topic:t,p:"p3"},r.p3w),this.scoreWeights.set({topic:t,p:"p3b"},r.p3bw),this.scoreWeights.set({topic:t,p:"p4"},r.p4w);this.scoreWeights.set({p:"p5"},e.p5w),this.scoreWeights.set({p:"p6"},e.p6w),this.scoreWeights.set({p:"p7"},e.p7w)},registerScorePerMesh(e,t){const r=new Map;e.forEach(((e,t)=>{const n=this.topicStrToLabel.get(t)??"unknown";let i=r.get(n);i||(i=new Set,r.set(n,i)),e.forEach((e=>i?.add(e)))}));for(const[e,n]of r){const r=[];n.forEach((e=>{r.push(t.get(e)??0)})),this.scorePerMesh.set({topic:e},r)}}}}(t.metricsRegister,t.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:r.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:e/1e3});n.mcacheSize.addCollect((()=>this.onScrapeMetrics(n)));for(const e of this.multicodecs)n.protocolsEnabled.set({protocol:e},1);this.metrics=n}else this.metrics=null;this.gossipTracer=new bn(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new yn(this.opts.scoreParams,this.metrics,{scoreCacheValidityMs:r.heartbeatInterval}),this.maxInboundStreams=t.maxInboundStreams,this.maxOutboundStreams=t.maxOutboundStreams,this.allowedTopics=r.allowedTopics?new Set(r.allowedTopics):null}getPeers(){return[...this.peers.keys()].map((e=>Pt(e)))}isStarted(){return this.status.code===Ws.started}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=await async function(e,t){switch(e){case en.rv:{if(!t)throw Error("Must provide PeerId");if(null==t.privateKey)throw Error("Cannot sign message, no private key present");if(null==t.publicKey)throw Error("Cannot sign message, no public key present");const e=await $r(t.privateKey);return{type:Zr.Signing,author:t,key:t.publicKey,privateKey:e}}case en.G$:return{type:Zr.Anonymous};default:throw new Error(`Unknown signature policy "${e}"`)}}(this.globalSignaturePolicy,this.components.peerId),this.outboundInflightQueue=Bn({objectMode:!0}),(0,B.F)(this.outboundInflightQueue,(async e=>{for await(const{peerId:t,connection:r}of e)await this.createOutboundStream(t,r)})).catch((e=>this.log.error("outbound inflight queue error",e))),await Promise.all(this.opts.directPeers.map((async e=>{await this.components.peerStore.merge(e.id,{multiaddrs:e.addrs})})));const e=this.components.registrar;await Promise.all(this.multicodecs.map((t=>e.handle(t,this.onIncomingStream.bind(this),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))));const t={onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)},r=await Promise.all(this.multicodecs.map((r=>e.register(r,t)))),n=setTimeout(this.runHeartbeat,100);this.status={code:Ws.started,registrarTopologyIds:r,heartbeatTimeout:n,hearbeatStartMs:Date.now()+100},this.score.start(),this.directPeerInitial=setTimeout((()=>{Promise.resolve().then((async()=>{await Promise.all(Array.from(this.direct).map((async e=>await this.connect(e))))})).catch((e=>{this.log(e)}))}),1e3),this.log("started")}async stop(){if(this.log("stopping"),this.status.code!==Ws.started)return;const{registrarTopologyIds:e}=this.status;this.status={code:Ws.stopped};const t=this.components.registrar;await Promise.all(this.multicodecs.map((e=>t.unhandle(e)))),e.forEach((e=>t.unregister(e))),this.outboundInflightQueue.end();for(const e of this.streamsOutbound.values())e.close();this.streamsOutbound.clear();for(const e of this.streamsInbound.values())e.close();this.streamsInbound.clear(),this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),this.directPeerInitial&&clearTimeout(this.directPeerInitial),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream({stream:e,connection:t}){if(!this.isStarted())return;const r=t.remotePeer;this.addPeer(r,t.direction,t.remoteAddr),this.createInboundStream(r,e),this.outboundInflightQueue.push({peerId:r,connection:t})}onPeerConnected(e,t){this.metrics?.newConnectionCount.inc({status:t.status}),this.isStarted()&&"open"===t.status&&(this.addPeer(e,t.direction,t.remoteAddr),this.outboundInflightQueue.push({peerId:e,connection:t}))}onPeerDisconnected(e){this.log("connection ended %p",e),this.removePeer(e)}async createOutboundStream(e,t){if(!this.isStarted())return;const r=e.toString();if(this.peers.has(r)&&!this.streamsOutbound.has(r))try{const n=new Ln(await t.newStream(this.multicodecs),(e=>this.log.error("outbound pipe error",e)),{maxBufferSize:this.opts.maxOutboundBufferSize});this.log("create outbound stream %p",e),this.streamsOutbound.set(r,n);const i=n.protocol;i===Mt&&this.floodsubPeers.add(r),this.metrics?.peersPerProtocol.inc({protocol:i},1),this.subscriptions.size>0&&(this.log("send subscriptions to",r),this.sendSubscriptions(r,Array.from(this.subscriptions),!0))}catch(e){this.log.error("createOutboundStream error",e)}}async createInboundStream(e,t){if(!this.isStarted())return;const r=e.toString();if(!this.peers.has(r))return;const n=this.streamsInbound.get(r);void 0!==n&&(this.log("replacing existing inbound steam %s",r),n.close()),this.log("create inbound stream %s",r);const i=new Fn(t,{maxDataLength:this.opts.maxInboundDataLength});this.streamsInbound.set(r,i),this.pipePeerReadStream(e,i.source).catch((e=>this.log(e)))}addPeer(e,t,r){const n=e.toString();if(!this.peers.has(n)){this.log("new peer %p",e),this.peers.add(n),this.score.addPeer(n);const i=function(e){for(const t of e.tuples())switch(t[0]){case Fs.ip4:case Fs.ip6:return Ns(t[0],t[1])}return null}(r);null!==i?this.score.addIP(n,i):this.log("Added peer has no IP in current address %s %s",n,r.toString()),this.outbound.has(n)||this.outbound.set(n,"outbound"===t)}}removePeer(e){const t=e.toString();if(!this.peers.has(t))return;this.log("delete peer %p",e),this.peers.delete(t);const r=this.streamsOutbound.get(t),n=this.streamsInbound.get(t);r&&this.metrics?.peersPerProtocol.inc({protocol:r.protocol},-1),r?.close(),n?.close(),this.streamsOutbound.delete(t),this.streamsInbound.delete(t);for(const e of this.topics.values())e.delete(t);for(const[e,r]of this.mesh)!0===r.delete(t)&&this.metrics?.onRemoveFromMesh(e,_n.Dc,1);for(const e of this.fanout.values())e.delete(t);this.floodsubPeers.delete(t),this.gossip.delete(t),this.control.delete(t),this.outbound.delete(t),this.score.removePeer(t),this.acceptFromWhitelist.delete(t)}get started(){return this.status.code===Ws.started}getMeshPeers(e){const t=this.mesh.get(e);return t?Array.from(t):[]}getSubscribers(e){const t=this.topics.get(e);return(t?Array.from(t):[]).map((e=>Pt(e)))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(e,t){try{await(0,B.F)(t,(async t=>{for await(const r of t)try{const t=r.subarray(),n=Kn(t,this.decodeRpcLimits);if(this.metrics?.onRpcRecv(n,t.length),this.opts.awaitRpcHandler)try{await this.handleReceivedRpc(e,n)}catch(e){this.metrics?.onRpcRecvError(),this.log(e)}else this.handleReceivedRpc(e,n).catch((e=>{this.metrics?.onRpcRecvError(),this.log(e)}))}catch(e){this.metrics?.onRpcDataError(),this.log(e)}}))}catch(t){this.metrics?.onPeerReadStreamError(),this.handlePeerReadStreamError(t,e)}}handlePeerReadStreamError(e,t){this.log.error(e),this.onPeerDisconnected(t)}async handleReceivedRpc(e,t){if(!this.acceptFrom(e.toString()))return this.log("received message from unacceptable peer %p",e),void this.metrics?.rpcRecvNotAccepted.inc();const r=t.subscriptions?t.subscriptions.length:0,n=t.messages?t.messages.length:0;let i=0,s=0,o=0,a=0;if(t.control&&(t.control.ihave&&(i=t.control.ihave.length),t.control.iwant&&(s=t.control.iwant.length),t.control.graft&&(o=t.control.graft.length),t.control.prune&&(a=t.control.prune.length)),this.log(`rpc.from ${e.toString()} subscriptions ${r} messages ${n} ihave ${i} iwant ${s} graft ${o} prune ${a}`),t.subscriptions&&t.subscriptions.length>0){const r=[];t.subscriptions.forEach((t=>{const n=t.topic,i=!0===t.subscribe;if(null!=n){if(this.allowedTopics&&!this.allowedTopics.has(n))return;this.handleReceivedSubscription(e,n,i),r.push({topic:n,subscribe:i})}})),this.dispatchEvent(new Dt.u("subscription-change",{detail:{peerId:e,subscriptions:r}}))}if(t.messages)for(const r of t.messages){if(this.allowedTopics&&!this.allowedTopics.has(r.topic))continue;const t=this.handleReceivedMessage(e,r).catch((e=>{this.metrics?.onMsgRecvError(r.topic),this.log(e)}));this.opts.awaitRpcMessageHandler&&await t}t.control&&await this.handleControlMessage(e.toString(),t.control)}handleReceivedSubscription(e,t,r){this.log("subscription update from %p topic %s",e,t);let n=this.topics.get(t);null==n&&(n=new Set,this.topics.set(t,n)),r?n.add(e.toString()):n.delete(e.toString())}async handleReceivedMessage(e,t){this.metrics?.onMsgRecvPreValidation(t.topic);const r=await this.validateReceivedMessage(e,t);switch(this.metrics?.onPrevalidationResult(t.topic,r.code),r.code){case Qr.duplicate:return this.score.duplicateMessage(e.toString(),r.msgIdStr,t.topic),this.gossipTracer.deliverMessage(r.msgIdStr,!0),void this.mcache.observeDuplicate(r.msgIdStr,e.toString());case Qr.invalid:if(r.msgIdStr){const n=r.msgIdStr;this.score.rejectMessage(e.toString(),n,t.topic,r.reason),this.gossipTracer.rejectMessage(n,r.reason)}else this.score.rejectInvalidMessage(e.toString(),t.topic);return void this.metrics?.onMsgRecvInvalid(t.topic,r);case Qr.valid:if(this.score.validateMessage(r.messageId.msgIdStr),this.gossipTracer.deliverMessage(r.messageId.msgIdStr),this.mcache.put(r.messageId,t,!this.opts.asyncValidation),this.subscriptions.has(t.topic)){this.components.peerId.equals(e)&&!this.opts.emitSelf||(super.dispatchEvent(new Dt.u("gossipsub:message",{detail:{propagationSource:e,msgId:r.messageId.msgIdStr,msg:r.msg}})),super.dispatchEvent(new Dt.u("message",{detail:r.msg})))}this.opts.asyncValidation||this.forwardMessage(r.messageId.msgIdStr,t,e.toString())}}async validateReceivedMessage(e,t){const r=this.fastMsgIdFn?.(t),n=void 0!==r?this.fastMsgIdCache?.get(r):void 0;if(n)return{code:Qr.duplicate,msgIdStr:n};const i=await async function(e,t){switch(e){case en.G$:return null!=t.signature?{valid:!1,error:Xr.SignaturePresent}:null!=t.seqno?{valid:!1,error:Xr.SeqnoPresent}:null!=t.key?{valid:!1,error:Xr.FromPresent}:{valid:!0,message:{type:"unsigned",topic:t.topic,data:t.data??new Uint8Array(0)}};case en.rv:{if(null==t.seqno)return{valid:!1,error:Xr.InvalidSeqno};if(8!==t.seqno.length)return{valid:!1,error:Xr.InvalidSeqno};if(null==t.signature)return{valid:!1,error:Xr.InvalidSignature};if(null==t.from)return{valid:!1,error:Xr.InvalidPeerId};let e,i;try{e=Rt(t.from)}catch(e){return{valid:!1,error:Xr.InvalidPeerId}}if(t.key){if(i=Hr(t.key),void 0!==e.publicKey&&!wt(i.bytes,e.publicKey))return{valid:!1,error:Xr.InvalidPeerId}}else{if(null==e.publicKey)return{valid:!1,error:Xr.InvalidPeerId};i=Hr(e.publicKey)}const s={from:t.from,data:t.data,seqno:t.seqno,topic:t.topic,signature:void 0,key:void 0},o=nr([kn,Ut.Message.encode(s).finish()]);return await i.verify(o,t.signature)?{valid:!0,message:{type:"signed",from:e,data:t.data??new Uint8Array(0),sequenceNumber:BigInt(`0x${$t(t.seqno,"base16")}`),topic:t.topic,signature:t.signature,key:t.key??(r=i,Jr(n=(n??"rsa").toLowerCase()),r.bytes)}}:{valid:!1,error:Xr.InvalidSignature}}}var r,n}(this.globalSignaturePolicy,t);if(!i.valid)return{code:Qr.invalid,reason:Yr.Error,error:i.error};const s=i.message;try{this.dataTransform&&(s.data=this.dataTransform.inboundTransform(t.topic,s.data))}catch(e){return this.log("Invalid message, transform failed",e),{code:Qr.invalid,reason:Yr.Error,error:Xr.TransformFailed}}const o=await this.msgIdFn(s),a=this.msgIdToStrFn(o),c={msgId:o,msgIdStr:a};if(void 0!==r&&this.fastMsgIdCache){this.fastMsgIdCache.put(r,a)&&this.metrics?.fastMsgIdCacheCollision.inc()}if(this.seenCache.has(a))return{code:Qr.duplicate,msgIdStr:a};this.seenCache.put(a);const u=this.topicValidators.get(t.topic);if(null!=u){let t;try{t=await u(e,s)}catch(e){const r=e.code;"ERR_TOPIC_VALIDATOR_IGNORE"===r&&(t=en.z8.Ignore),t="ERR_TOPIC_VALIDATOR_REJECT"===r?en.z8.Reject:en.z8.Ignore}if(t!==en.z8.Accept)return{code:Qr.invalid,reason:tn(t),msgIdStr:a}}return{code:Qr.valid,messageId:c,msg:s}}getScore(e){return this.score.score(e)}sendSubscriptions(e,t,r){this.sendRpc(e,{subscriptions:t.map((e=>({topic:e,subscribe:r})))})}async handleControlMessage(e,t){if(void 0===t)return;const r=t.ihave?this.handleIHave(e,t.ihave):[],n=t.iwant?this.handleIWant(e,t.iwant):[],i=t.graft?await this.handleGraft(e,t.graft):[];if(t.prune&&await this.handlePrune(e,t.prune),!r.length&&!n.length&&!i.length)return;const s=this.sendRpc(e,{messages:n,control:{iwant:r,prune:i}}),o=r[0]?.messageIDs;o&&(s?this.gossipTracer.addPromise(e,o):this.metrics?.iwantPromiseUntracked.inc(1))}acceptFrom(e){if(this.direct.has(e))return!0;const t=Date.now(),r=this.acceptFromWhitelist.get(e);if(r&&r.messagesAccepted<128&&r.acceptUntil>=t)return r.messagesAccepted+=1,!0;const n=this.score.score(e);return n>=0?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:t+1e3}):this.acceptFromWhitelist.delete(e),n>=this.opts.scoreThresholds.graylistThreshold}handleIHave(e,t){if(!t.length)return[];const r=this.score.score(e);if(r<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,r),this.metrics?.ihaveRcvIgnored.inc({reason:En.LowScore}),[];const n=(this.peerhave.get(e)??0)+1;if(this.peerhave.set(e,n),n>10)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,n),this.metrics?.ihaveRcvIgnored.inc({reason:En.MaxIhave}),[];const i=this.iasked.get(e)??0;if(i>=Ft)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,i),this.metrics?.ihaveRcvIgnored.inc({reason:En.MaxIasked}),[];const s=new Map;if(t.forEach((({topicID:e,messageIDs:t})=>{if(!e||!t||!this.mesh.has(e))return;let r=0;t.forEach((e=>{const t=this.msgIdToStrFn(e);this.seenCache.has(t)||(s.set(t,e),r++)})),this.metrics?.onIhaveRcv(e,t.length,r)})),!s.size)return[];let o=s.size;o+i>Ft&&(o=Ft-i),this.log("IHAVE: Asking for %d out of %d messages from %s",o,s.size,e);let a=Array.from(s.values());return Wt(a),a=a.slice(0,o),this.iasked.set(e,i+o),[{messageIDs:a}]}handleIWant(e,t){if(!t.length)return[];const r=this.score.score(e);if(r<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,r),[];const n=new Map,i=new Map;let s=0;return t.forEach((({messageIDs:t})=>{t&&t.forEach((t=>{const r=this.msgIdToStrFn(t),o=this.mcache.getWithIWantCount(r,e);null!=o?(i.set(o.msg.topic,1+(i.get(o.msg.topic)??0)),o.count>3?this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,t):n.set(r,o.msg)):s++}))})),this.metrics?.onIwantRcv(i,s),n.size?(this.log("IWANT: Sending %d messages to %s",n.size,e),Array.from(n.values())):(this.log("IWANT: Could not provide any wanted messages to %s",e),[])}async handleGraft(e,t){const r=[],n=this.score.score(e),i=Date.now();let s=this.opts.doPX;if(t.forEach((({topicID:t})=>{if(!t)return;const o=this.mesh.get(t);if(!o)return void(s=!1);if(o.has(e))return;if(this.direct.has(e))return this.log("GRAFT: ignoring request from direct peer %s",e),r.push(t),void(s=!1);const a=this.backoff.get(t)?.get(e);if("number"==typeof a&&i<a){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1,An.GraftBackoff),s=!1;const n=a+this.opts.graftFloodThreshold-this.opts.pruneBackoff;return i<n&&this.score.addPenalty(e,1,An.GraftBackoff),this.addBackoff(e,t),void r.push(t)}return n<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,n,t),r.push(t),s=!1,void this.addBackoff(e,t)):o.size>=this.opts.Dhi&&!this.outbound.get(e)?(r.push(t),void this.addBackoff(e,t)):(this.log("GRAFT: Add mesh link from %s in %s",e,t),this.score.graft(e,t),o.add(e),void this.metrics?.onAddToMesh(t,Sn.Subscribed,1))})),!r.length)return[];return await Promise.all(r.map((t=>this.makePrune(e,t,s,false))))}async handlePrune(e,t){const r=this.score.score(e);for(const{topicID:n,backoff:i,peers:s}of t){if(null==n)continue;const t=this.mesh.get(n);if(!t)return;if(this.log("PRUNE: Remove mesh link to %s in %s",e,n),this.score.prune(e,n),t.has(e)&&(t.delete(e),this.metrics?.onRemoveFromMesh(n,_n.Prune,1)),"number"==typeof i&&i>0?this.doAddBackoff(e,n,1e3*i):this.addBackoff(e,n),s&&s.length){if(r<this.opts.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,r,n);continue}await this.pxConnect(s)}}}addBackoff(e,t){this.doAddBackoff(e,t,this.opts.pruneBackoff)}doAddBackoff(e,t,r){let n=this.backoff.get(t);n||(n=new Map,this.backoff.set(t,n));const i=Date.now()+r;(n.get(e)??0)<i&&n.set(e,i)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach(((e,t)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",t,e),this.score.addPenalty(t,e,An.BrokenPromise)}))}clearBackoff(){if(this.heartbeatTicks%15!=0)return;const e=Date.now();this.backoff.forEach(((t,r)=>{t.forEach(((r,n)=>{r+1*this.opts.heartbeatInterval<e&&t.delete(n)})),0===t.size&&this.backoff.delete(r)}))}async directConnect(){const e=[];this.direct.forEach((t=>{this.streamsOutbound.has(t)||e.push(t)})),await Promise.all(e.map((async e=>await this.connect(e))))}async pxConnect(e){e.length>this.opts.prunePeers&&(Wt(e),e=e.slice(0,this.opts.prunePeers));const t=[];await Promise.all(e.map((async e=>{if(!e.peerID)return;const r=Rt(e.peerID),n=r.toString();if(!this.peers.has(n))if(e.signedPeerRecord)try{if(!await this.components.peerStore.consumePeerRecord(e.signedPeerRecord,r))return void this.log("bogus peer record obtained through px: could not add peer record to address book");t.push(n)}catch(e){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}else t.push(n)}))),t.length&&await Promise.all(t.map((async e=>await this.connect(e))))}async connect(e){this.log("Initiating connection with %s",e);const t=Pt(e),r=await this.components.connectionManager.openConnection(t);for(const e of this.multicodecs)for(const n of this.components.registrar.getTopologies(e))n.onConnect?.(t,r)}subscribe(e){if(this.status.code!==Ws.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(e)){this.subscriptions.add(e);for(const t of this.peers.keys())this.sendSubscriptions(t,[e],!0)}this.join(e)}unsubscribe(e){if(this.status.code!==Ws.started)throw new Error("Pubsub is not started");const t=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,t),t)for(const t of this.peers.keys())this.sendSubscriptions(t,[e],!1);this.leave(e)}join(e){if(this.status.code!==Ws.started)throw new Error("Gossipsub has not started");if(this.mesh.has(e))return;this.log("JOIN %s",e),this.metrics?.onJoin(e);const t=new Set,r=this.backoff.get(e),n=this.fanout.get(e);if(n&&(this.fanout.delete(e),this.fanoutLastpub.delete(e),n.forEach((e=>{this.direct.has(e)||!(this.score.score(e)>=0)||r&&r.has(e)||t.add(e)})),this.metrics?.onAddToMesh(e,Sn.Fanout,t.size)),t.size<this.opts.D){const n=t.size;this.getRandomGossipPeers(e,this.opts.D,(e=>!t.has(e)&&!this.direct.has(e)&&this.score.score(e)>=0&&(!r||!r.has(e)))).forEach((e=>{t.add(e)})),this.metrics?.onAddToMesh(e,Sn.Random,t.size-n)}this.mesh.set(e,t),t.forEach((t=>{this.log("JOIN: Add mesh link to %s in %s",t,e),this.sendGraft(t,e)}))}leave(e){if(this.status.code!==Ws.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e),this.metrics?.onLeave(e);const t=this.mesh.get(e);t&&(Promise.all(Array.from(t).map((async t=>(this.log("LEAVE: Remove mesh link to %s in %s",t,e),await this.sendPrune(t,e))))).catch((e=>{this.log("Error sending prunes to mesh peers",e)})),this.mesh.delete(e))}selectPeersToForward(e,t,r){const n=new Set,i=this.topics.get(e);i&&(this.direct.forEach((e=>{i.has(e)&&t!==e&&!r?.has(e)&&n.add(e)})),this.floodsubPeers.forEach((e=>{i.has(e)&&t!==e&&!r?.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&n.add(e)})));const s=this.mesh.get(e);return s&&s.size>0&&s.forEach((e=>{t===e||r?.has(e)||n.add(e)})),n}selectPeersToPublish(e){const t=new Set,r={direct:0,floodsub:0,mesh:0,fanout:0},n=this.topics.get(e);if(n)if(this.opts.floodPublish)n.forEach((e=>{this.direct.has(e)?(t.add(e),r.direct++):this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),r.floodsub++)}));else{this.direct.forEach((e=>{n.has(e)&&(t.add(e),r.direct++)})),this.floodsubPeers.forEach((e=>{n.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),r.floodsub++)}));const i=this.mesh.get(e);if(i&&i.size>0)i.forEach((e=>{t.add(e),r.mesh++}));else{const n=this.fanout.get(e);if(n&&n.size>0)n.forEach((e=>{t.add(e),r.fanout++}));else{const n=this.getRandomGossipPeers(e,this.opts.D,(e=>this.score.score(e)>=this.opts.scoreThresholds.publishThreshold));n.size>0&&(this.fanout.set(e,n),n.forEach((e=>{t.add(e),r.fanout++})))}this.fanoutLastpub.set(e,Date.now())}}return{tosend:t,tosendCount:r}}forwardMessage(e,t,r,n){r&&this.score.deliverMessage(r,e,t.topic);const i=this.selectPeersToForward(t.topic,r,n);i.forEach((e=>{this.sendRpc(e,{messages:[t]})})),this.metrics?.onForwardMsg(t.topic,i.size)}async publish(e,t,r){const n=Date.now(),i=this.dataTransform?this.dataTransform.outboundTransform(e,t):t;if(null==this.publishConfig)throw Error("PublishError.Uninitialized");const{raw:s,msg:o}=await async function(e,t,r,n){switch(e.type){case Zr.Signing:{const i={from:e.author.toBytes(),data:n,seqno:Ar(8),topic:t,signature:void 0,key:void 0},s=nr([kn,Ut.Message.encode(i).finish()]);return i.signature=await e.privateKey.sign(s),i.key=e.key,{raw:i,msg:{type:"signed",from:e.author,data:r,sequenceNumber:BigInt(`0x${$t(i.seqno,"base16")}`),topic:t,signature:i.signature,key:i.key}}}case Zr.Anonymous:return{raw:{from:void 0,data:n,seqno:void 0,topic:t,signature:void 0,key:void 0},msg:{type:"unsigned",data:r,topic:t}}}}(this.publishConfig,e,t,i),a=await this.msgIdFn(o),c=this.msgIdToStrFn(a),u=r?.ignoreDuplicatePublishError??this.opts.ignoreDuplicatePublishError;if(this.seenCache.has(c)){if(u)return this.metrics?.onPublishDuplicateMsg(e),{recipients:[]};throw Error("PublishError.Duplicate")}const{tosend:l,tosendCount:h}=this.selectPeersToPublish(e),d=!0===this.opts.emitSelf&&this.subscriptions.has(e),f=r?.allowPublishToZeroPeers??this.opts.allowPublishToZeroPeers;if(0===l.size&&!f&&!d)throw Error("PublishError.InsufficientPeers");this.seenCache.put(c),this.mcache.put({msgId:a,msgIdStr:c},s,!0),this.publishedMessageIds.put(c);for(const e of l){this.sendRpc(e,{messages:[s]})||l.delete(e)}const p=Date.now()-n;return this.metrics?.onPublishMsg(e,h,l.size,null!=s.data?s.data.length:0,p),d&&(l.add(this.components.peerId.toString()),super.dispatchEvent(new Dt.u("gossipsub:message",{detail:{propagationSource:this.components.peerId,msgId:c,msg:o}})),super.dispatchEvent(new Dt.u("message",{detail:o}))),{recipients:Array.from(l.values()).map((e=>Pt(e)))}}reportMessageValidationResult(e,t,r){let n;if(r===en.z8.Accept){if(n=this.mcache.validate(e),null!=n){const{message:r,originatingPeers:i}=n;this.score.deliverMessage(t,e,r.topic),this.forwardMessage(e,n.message,t,i)}}else if(n=this.mcache.remove(e),n){const i=tn(r),{message:s,originatingPeers:o}=n;this.score.rejectMessage(t,e,s.topic,i);for(const t of o)this.score.rejectMessage(t,e,s.topic,i)}const i=this.score.messageFirstSeenTimestampMs(e);this.metrics?.onReportValidation(n,r,i)}sendGraft(e,t){const r=[{topicID:t}];this.sendRpc(e,{control:{graft:r}})}async sendPrune(e,t){const r=[await this.makePrune(e,t,this.opts.doPX,!0)];this.sendRpc(e,{control:{prune:r}})}sendRpc(e,t){const r=this.streamsOutbound.get(e);if(!r)return this.log(`Cannot send RPC to ${e} as there is no open stream to it available`),!1;const n=this.control.get(e);n&&(this.piggybackControl(e,t,n),this.control.delete(e));const i=this.gossip.get(e);i&&(this.piggybackGossip(e,t,i),this.gossip.delete(e));const s=Ut.encode(t).finish();try{r.push(s)}catch(t){return this.log.error(`Cannot send rpc to ${e}`,t),n&&this.control.set(e,n),i&&this.gossip.set(e,i),!1}return this.metrics?.onRpcSent(t,s.length),!0}piggybackControl(e,t,r){if(r.graft){t.control||(t.control={}),t.control.graft||(t.control.graft=[]);for(const n of r.graft)n.topicID&&this.mesh.get(n.topicID)?.has(e)&&t.control.graft.push(n)}if(r.prune){t.control||(t.control={}),t.control.prune||(t.control.prune=[]);for(const n of r.prune)n.topicID&&!this.mesh.get(n.topicID)?.has(e)&&t.control.prune.push(n)}}piggybackGossip(e,t,r){t.control||(t.control={}),t.control.ihave=r}async sendGraftPrune(e,t,r){const n=this.opts.doPX;for(const[i,s]of e){const e=s.map((e=>({topicID:e})));let o=[];const a=t.get(i);a&&(o=await Promise.all(a.map((async e=>await this.makePrune(i,e,n&&!r.get(i),false)))),t.delete(i)),this.sendRpc(i,{control:{graft:e,prune:o}})}for(const[e,i]of t){const t=await Promise.all(i.map((async t=>await this.makePrune(e,t,n&&!r.get(e),false))));this.sendRpc(e,{control:{prune:t}})}}emitGossip(e){const t=this.mcache.getGossipIDs(new Set(e.keys()));for(const[r,n]of e)this.doEmitGossip(r,n,t.get(r)??[])}doEmitGossip(e,t,r){if(!r.length)return;if(Wt(r),r.length>Ft&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length),!t.size)return;let n=this.opts.Dlazy;const i=.25*t.size;let s=t;i>n&&(n=i),n>s.size?n=s.size:s=Wt(Array.from(s)).slice(0,n),s.forEach((t=>{let n=r;r.length>Ft&&(n=Wt(n.slice()).slice(0,Ft)),this.pushGossip(t,{topicID:e,messageIDs:n})}))}flush(){for(const[e,t]of this.gossip.entries())this.gossip.delete(e),this.sendRpc(e,{control:{ihave:t}});for(const[e,t]of this.control.entries())this.control.delete(e),this.sendRpc(e,{control:{graft:t.graft,prune:t.prune}})}pushGossip(e,t){this.log("Add gossip to %s",e);const r=this.gossip.get(e)||[];this.gossip.set(e,r.concat(t))}async makePrune(e,t,r,n){if(this.score.prune(e,t),this.streamsOutbound.get(e).protocol===jt)return{topicID:t,peers:[]};const i=n?this.opts.unsubcribeBackoff:this.opts.pruneBackoff,s=i/1e3;if(this.doAddBackoff(e,t,i),!r)return{topicID:t,peers:[],backoff:s};const o=this.getRandomGossipPeers(t,this.opts.prunePeers,(t=>t!==e&&this.score.score(t)>=0)),a=await Promise.all(Array.from(o).map((async e=>{const t=Pt(e);let r;try{r=await this.components.peerStore.get(t)}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}return{peerID:t.toBytes(),signedPeerRecord:r?.peerRecordEnvelope}})));return{topicID:t,peers:a,backoff:s}}runHeartbeat=()=>{const e=this.metrics?.heartbeatDuration.startTimer();this.heartbeat().catch((e=>{this.log("Error running heartbeat",e)})).finally((()=>{if(null!=e&&e(),this.status.code===Ws.started){clearTimeout(this.status.heartbeatTimeout);let e=this.opts.heartbeatInterval-(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;e<.25*this.opts.heartbeatInterval&&(e+=this.opts.heartbeatInterval,this.metrics?.heartbeatSkipped.inc()),this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,e)}}))};async heartbeat(){const{D:e,Dlo:t,Dhi:r,Dscore:n,Dout:i,fanoutTTL:s}=this.opts;this.heartbeatTicks++;const o=new Map,a=e=>{let t=o.get(e);return void 0===t&&(t=this.score.score(e),o.set(e,t)),t},c=new Map,u=new Map,l=new Map;this.clearBackoff(),this.peerhave.clear(),this.metrics?.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks==0&&await this.directConnect(),this.fastMsgIdCache?.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();const h=new Map;this.mesh.forEach(((s,o)=>{const d=this.topics.get(o),f=new Set,p=new Set;if(h.set(o,p),d){const e=Wt(Array.from(d)),t=this.backoff.get(o);for(const r of e){const e=this.streamsOutbound.get(r);if(e&&this.multicodecs.includes(e.protocol)&&!s.has(r)&&!this.direct.has(r)){const e=a(r);t&&t.has(r)||!(e>=0)||f.add(r),e>=this.opts.scoreThresholds.gossipThreshold&&p.add(r)}}}const g=(e,t)=>{this.log("HEARTBEAT: Remove mesh link to %s in %s",e,o),this.addBackoff(e,o),s.delete(e),a(e)>=this.opts.scoreThresholds.gossipThreshold&&p.add(e),this.metrics?.onRemoveFromMesh(o,t,1);const r=u.get(e);r?r.push(o):u.set(e,[o])},m=(e,t)=>{this.log("HEARTBEAT: Add mesh link to %s in %s",e,o),this.score.graft(e,o),s.add(e),p.delete(e),this.metrics?.onAddToMesh(o,t,1);const r=c.get(e);r?r.push(o):c.set(e,[o])};if(s.forEach((e=>{const t=a(e);t<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",e,t,o),g(e,_n.BadScore),l.set(e,!0))})),s.size<t){const t=function(e,t){return pn(e,t,(()=>!0))}(f,e-s.size);t.forEach((e=>{m(e,Sn.NotEnough)}))}if(s.size>r){let t=Array.from(s);t.sort(((e,t)=>a(t)-a(e))),t=t.slice(0,n).concat(Wt(t.slice(n)));let r=0;if(t.slice(0,e).forEach((e=>{this.outbound.get(e)&&r++})),r<i){const n=e=>{const r=t[e];for(let r=e;r>0;r--)t[r]=t[r-1];t[0]=r};if(r>0){let i=r;for(let r=1;r<e&&i>0;r++)this.outbound.get(t[r])&&(n(r),i--)}let i=e-r;for(let r=e;r<t.length&&i>0;r++)this.outbound.get(t[r])&&(n(r),i--)}t.slice(e).forEach((e=>{g(e,_n.Excess)}))}if(s.size>=t){let e=0;if(s.forEach((t=>{this.outbound.get(t)&&e++})),e<i){pn(f,i-e,(e=>!0===this.outbound.get(e))).forEach((e=>{m(e,Sn.Outbound)}))}}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks==0&&s.size>1){const e=Array.from(s).sort(((e,t)=>a(e)-a(t))),t=Math.floor(s.size/2),r=a(e[t]);if(r<this.opts.scoreThresholds.opportunisticGraftThreshold){const e=pn(f,this.opts.opportunisticGraftPeers,(e=>a(e)>r));for(const t of e)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",t,o),m(t,Sn.Opportunistic)}}}));const d=Date.now();this.fanoutLastpub.forEach(((e,t)=>{e+s<d&&(this.fanout.delete(t),this.fanoutLastpub.delete(t))})),this.fanout.forEach(((t,r)=>{const n=this.topics.get(r);t.forEach((e=>{(!n.has(e)||a(e)<this.opts.scoreThresholds.publishThreshold)&&t.delete(e)}));const i=this.topics.get(r),s=[],o=new Set;if(h.set(r,o),i){const e=Wt(Array.from(i));for(const r of e){const e=this.streamsOutbound.get(r);if(e&&this.multicodecs.includes(e.protocol)&&!t.has(r)&&!this.direct.has(r)){const e=a(r);e>=this.opts.scoreThresholds.publishThreshold&&s.push(r),e>=this.opts.scoreThresholds.gossipThreshold&&o.add(r)}}}if(t.size<e){const r=e-t.size;s.slice(0,r).forEach((e=>{t.add(e),o?.delete(e)}))}})),this.emitGossip(h),await this.sendGraftPrune(c,u,l),this.flush(),this.mcache.shift(),this.dispatchEvent(new Dt.u("gossipsub:heartbeat"))}getRandomGossipPeers(e,t,r=(()=>!0)){const n=this.topics.get(e);if(!n)return new Set;let i=[];return n.forEach((e=>{const t=this.streamsOutbound.get(e);t&&this.multicodecs.includes(t.protocol)&&r(e)&&i.push(e)})),i=Wt(i),t>0&&i.length>t&&(i=i.slice(0,t)),new Set(i)}onScrapeMetrics(e){e.mcacheSize.set(this.mcache.size),e.mcacheNotValidatedCount.set(this.mcache.notValidatedCount),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},this.fastMsgIdCache?.size??0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),e.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);let t=0;const r=Date.now();e.connectedPeersBackoffSec.reset();for(const n of this.backoff.values()){t+=n.size;for(const[t,i]of n.entries())this.peers.has(t)&&e.connectedPeersBackoffSec.observe(Math.max(0,i-r)/1e3)}e.cacheSize.set({cache:"backoff"},t);for(const[t,r]of this.topics)e.topicPeersCount.set({topicStr:t},r.size);for(const[t,r]of this.mesh)e.meshPeerCounts.set({topicStr:t},r.size);const n=[],i=new Map;e.behaviourPenalty.reset();for(const t of this.peers.keys()){const r=this.score.score(t);n.push(r),i.set(t,r),e.behaviourPenalty.observe(this.score.peerStats.get(t)?.behaviourPenalty??0)}e.registerScores(n,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,i);const s=function(e,t,r,n,i){const s={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(const o of e){const e=t.get(o);if(e){const t=Pn(o,e,r,n,i);for(const[e,r]of t.byTopic){let t=s.byTopic.get(e);t||(t={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},s.byTopic.set(e,t)),t.p1w.push(r.p1w),t.p2w.push(r.p2w),t.p3w.push(r.p3w),t.p3bw.push(r.p3bw),t.p4w.push(r.p4w)}s.p5w.push(t.p5w),s.p6w.push(t.p6w),s.p7w.push(t.p7w),s.score.push(t.score)}else s.p5w.push(0),s.p6w.push(0),s.p7w.push(0),s.score.push(0)}return s}(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(s)}}function Ks(e={}){return t=>new qs(t,e)}},86320:function(e,t,r){"use strict";r.d(t,{f:function(){return wn}});var n={};r.r(n),r.d(n,{base10:function(){return we}});var i={};r.r(i),r.d(i,{base16:function(){return ve},base16upper:function(){return Se}});var s={};r.r(s),r.d(s,{base2:function(){return _e}});var o={};r.r(o),r.d(o,{base256emoji:function(){return ke}});var a={};r.r(a),r.d(a,{base32:function(){return Te},base32hex:function(){return Ce},base32hexpad:function(){return De},base32hexpadupper:function(){return Be},base32hexupper:function(){return Oe},base32pad:function(){return Pe},base32padupper:function(){return Re},base32upper:function(){return Ie},base32z:function(){return Ne}});var c={};r.r(c),r.d(c,{base36:function(){return Ue},base36upper:function(){return Me}});var u={};r.r(u),r.d(u,{base58btc:function(){return je},base58flickr:function(){return Le}});var l={};r.r(l),r.d(l,{base64:function(){return Fe},base64pad:function(){return We},base64url:function(){return qe},base64urlpad:function(){return Ke}});var h={};r.r(h),r.d(h,{base8:function(){return Ve}});var d={};r.r(d),r.d(d,{identity:function(){return ze}});var f={};r.r(f),r.d(f,{code:function(){return Ge},decode:function(){return Ye},encode:function(){return Ze},name:function(){return $e}});var p={};r.r(p),r.d(p,{code:function(){return Qe},decode:function(){return tt},encode:function(){return et},name:function(){return Xe}});var g={};r.r(g),r.d(g,{identity:function(){return kt}});var m={};r.r(m),r.d(m,{sha256:function(){return Rt},sha512:function(){return Ct}});var y={};r.r(y),r.d(y,{Ed25519PrivateKey:function(){return ur},Ed25519PublicKey:function(){return cr},generateKeyPair:function(){return dr},generateKeyPairFromSeed:function(){return fr},unmarshalEd25519PrivateKey:function(){return lr},unmarshalEd25519PublicKey:function(){return hr}});var b={};r.r(b),r.d(b,{MAX_KEY_SIZE:function(){return kr},RsaPrivateKey:function(){return Ir},RsaPublicKey:function(){return Tr},fromJwk:function(){return Cr},generateKeyPair:function(){return Or},unmarshalRsaPrivateKey:function(){return Pr},unmarshalRsaPublicKey:function(){return Rr}});var w={};r.r(w),r.d(w,{Secp256k1PrivateKey:function(){return Ur},Secp256k1PublicKey:function(){return Nr},generateKeyPair:function(){return Lr},unmarshalSecp256k1PrivateKey:function(){return Mr},unmarshalSecp256k1PublicKey:function(){return jr}});var v=r(89754),S=r(89585),_=r(97313);function A(){const e=(0,_.A)();let t=!1;return{sink:async r=>{if(t)throw new Error("already piped");t=!0,e.resolve(r)},source:async function*(){const t=await e.promise;yield*t}()}}var E=r(81033);const x=65535,k=Boolean(globalThis.process?.env?.DUMP_SESSION_KEYS);var T=r(62962),I=r(80497);function P(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function R(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function C(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");P(e.outputLen),P(e.blockLen)}function O(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function D(e,t){R(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const B="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,N=e=>e instanceof Uint8Array,U=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),M=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function j(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!N(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class L{clone(){return this._cloneInto()}}function F(e){const t=t=>e().update(j(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}class W extends L{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,C(e);const r=j(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return O(this),this.iHash.update(e),this}digestInto(e){O(this),R(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const q=(e,t,r)=>new W(e,t).update(r).digest();function K(e,t,r){return C(e),void 0===r&&(r=new Uint8Array(e.outputLen)),q(e,j(r),j(t))}q.create=(e,t)=>new W(e,t);const V=new Uint8Array([0]),z=new Uint8Array;function J(e,t,r,n=32){if(C(e),P(n),n>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/e.outputLen);void 0===r&&(r=z);const s=new Uint8Array(i*e.outputLen),o=q.create(e,t),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let t=0;t<i;t++)V[0]=t+1,a.update(0===t?z:c).update(r).update(V).digestInto(c),s.set(c,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),V.fill(0),s.slice(0,n)}class H extends L{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=U(this.buffer)}update(e){O(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=j(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=U(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){O(this),D(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=U(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const $=(e,t,r)=>e&t^e&r^t&r,G=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Z=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Y=new Uint32Array(64);class X extends H{constructor(){super(64,32,8,!1),this.A=0|Z[0],this.B=0|Z[1],this.C=0|Z[2],this.D=0|Z[3],this.E=0|Z[4],this.F=0|Z[5],this.G=0|Z[6],this.H=0|Z[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)Y[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Y[e-15],r=Y[e-2],n=M(t,7)^M(t,18)^t>>>3,i=M(r,17)^M(r,19)^r>>>10;Y[e]=i+Y[e-7]+n+Y[e-16]|0}let{A:r,B:n,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(M(o,6)^M(o,11)^M(o,25))+((l=o)&a^~l&c)+G[e]+Y[e]|0,h=(M(r,2)^M(r,13)^M(r,22))+$(r,n,i)|0;u=c,c=a,a=o,o=s+t|0,s=i,i=n,n=r,r=t+h|0}var l;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,s,o,a,c,u)}roundClean(){Y.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Q=F((()=>new X)),ee={hashSHA256:e=>Q(e),getHKDF(e,t){const r=K(Q,t,e),n=J(Q,r,void 0,96);return[n.subarray(0,32),n.subarray(32,64),n.subarray(64,96)]},generateX25519KeyPair(){const e=I.TU.utils.randomPrivateKey();return{publicKey:I.TU.getPublicKey(e),privateKey:e}},generateX25519KeyPairFromSeed:e=>({publicKey:I.TU.getPublicKey(e),privateKey:e}),generateX25519SharedKey:(e,t)=>I.TU.getSharedSecret(e,t),chaCha20Poly1305Encrypt:(e,t,r,n)=>(0,T.ix)(n,t,r).encrypt(e),chaCha20Poly1305Decrypt:(e,t,r,n,i)=>(0,T.ix)(n,t,r).decrypt(e,i)};function te(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function re(e=0){return null!=globalThis.Buffer?.allocUnsafe?te(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ne(e,t){null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const r=re(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return te(r)}const ie=e=>{const t=(r=2,globalThis.Buffer?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r));var r;return new DataView(t.buffer,t.byteOffset,t.byteLength).setUint16(0,e,!1),t};ie.bytes=2;const se=e=>{if(e.length<2)throw RangeError("Could not decode int16BE");return e instanceof Uint8Array?new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1):e.getUint16(0)};se.bytes=2;var oe=r(70202),ae=(r(12746),r(12698),r(50276));var ce=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*l+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}},ue=ce;new Uint8Array(0);const le=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class he{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class de{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return pe(this,e)}}class fe{constructor(e){this.decoders=e}or(e){return pe(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const pe=(e,t)=>new fe({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class ge{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new he(e,t,r),this.decoder=new de(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const me=({name:e,prefix:t,encode:r,decode:n})=>new ge(e,t,r,n),ye=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=ue(r,t);return me({prefix:e,name:t,encode:n,decode:e=>le(i(e))})},be=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>me({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),we=ye({prefix:"9",name:"base10",alphabet:"0123456789"}),ve=be({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Se=be({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),_e=be({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Ae=Array.from(""),Ee=Ae.reduce(((e,t,r)=>(e[r]=t,e)),[]),xe=Ae.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const ke=me({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Ee[t]),"")},decode:function(e){const t=[];for(const r of e){const e=xe[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}}),Te=be({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ie=be({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pe=be({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Re=be({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ce=be({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Oe=be({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),De=be({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Be=be({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ne=be({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ue=ye({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Me=ye({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),je=ye({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Le=ye({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Fe=be({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),We=be({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qe=be({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ke=be({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Ve=be({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ze=me({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),Je=new TextEncoder,He=new TextDecoder,$e="json",Ge=512,Ze=e=>Je.encode(JSON.stringify(e)),Ye=e=>JSON.parse(He.decode(e)),Xe="raw",Qe=85,et=e=>le(e),tt=e=>le(e);var rt=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=st;)r[n++]=255&t|nt,t/=128;for(;t&it;)r[n++]=255&t|nt,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},nt=128,it=-128,st=Math.pow(2,31);var ot=function e(t,r){var n,i=0,s=0,o=r=r||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(n&ct)<<s:(n&ct)*Math.pow(2,s),s+=7}while(n>=at);return e.bytes=o-r,i},at=128,ct=127;var ut=Math.pow(2,7),lt=Math.pow(2,14),ht=Math.pow(2,21),dt=Math.pow(2,28),ft=Math.pow(2,35),pt=Math.pow(2,42),gt=Math.pow(2,49),mt=Math.pow(2,56),yt=Math.pow(2,63),bt={encode:rt,decode:ot,encodingLength:function(e){return e<ut?1:e<lt?2:e<ht?3:e<dt?4:e<ft?5:e<pt?6:e<gt?7:e<mt?8:e<yt?9:10}};const wt=(e,t=0)=>[bt.decode(e,t),bt.decode.bytes],vt=(e,t,r=0)=>(bt.encode(e,t,r),t),St=e=>bt.encodingLength(e),_t=(e,t)=>{const r=t.byteLength,n=St(e),i=n+St(r),s=new Uint8Array(i+r);return vt(e,s,0),vt(r,s,n),s.set(t,i),new Et(e,r,t,s)},At=e=>{const t=le(e),[r,n]=wt(t),[i,s]=wt(t.subarray(n)),o=t.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Et(r,i,o,t)};class Et{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const xt=le,kt={code:0,name:"identity",encode:xt,digest:e=>_t(0,xt(e))},Tt=({name:e,code:t,encode:r})=>new It(e,t,r);class It{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?_t(this.code,t):t.then((e=>_t(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Pt=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Rt=Tt({name:"sha2-256",code:18,encode:Pt("SHA-256")}),Ct=Tt({name:"sha2-512",code:19,encode:Pt("SHA-512")}),Ot=(e,t)=>{const{bytes:r,version:n}=e;return 0===n?Mt(r,Bt(e),t||je.encoder):jt(r,Bt(e),t||Te.encoder)},Dt=new WeakMap,Bt=e=>{const t=Dt.get(e);if(null==t){const t=new Map;return Dt.set(e,t),t}return t};class Nt{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==Lt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Ft)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Nt.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=_t(e,t);return Nt.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Nt.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&((e,t)=>{if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0})(e.bytes,r.bytes)}})(e.multihash,r.multihash)}toString(e){return Ot(this,e)}toJSON(){return{"/":Ot(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof Nt)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new Nt(e,r,n,i||Wt(e,r,n.bytes))}if(!0===t[qt]){const{version:e,multihash:r,code:n}=t,i=At(r);return Nt.create(e,n,i)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==Lt)throw new Error(`Version 0 CID must use dag-pb (code: ${Lt}) block encoding`);return new Nt(e,t,r,r.bytes);case 1:{const n=Wt(e,t,r.bytes);return new Nt(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return Nt.create(0,Lt,e)}static createV1(e,t){return Nt.create(1,e,t)}static decode(e){const[t,r]=Nt.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Nt.inspectBytes(e),r=t.size-t.multihashSize,n=le(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new Et(t.multihashCode,t.digestSize,i,n);return[0===t.version?Nt.createV0(s):Nt.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=wt(e.subarray(t));return t+=n,r};let n=r(),i=Lt;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t,o=r(),a=r(),c=t+a;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:c-s,size:c}}static parse(e,t){const[r,n]=Ut(e,t),i=Nt.decode(n);if(0===i.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return Bt(i).set(r,e),i}}const Ut=(e,t)=>{switch(e[0]){case"Q":{const r=t||je;return[je.prefix,r.decode(`${je.prefix}${e}`)]}case je.prefix:{const r=t||je;return[je.prefix,r.decode(e)]}case Te.prefix:{const r=t||Te;return[Te.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Mt=(e,t,r)=>{const{prefix:n}=r;if(n!==je.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i},jt=(e,t,r)=>{const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i},Lt=112,Ft=18,Wt=(e,t,r)=>{const n=St(e),i=n+St(t),s=new Uint8Array(i+r.byteLength);return vt(e,s,0),vt(t,s,n),s.set(r,i),s},qt=Symbol.for("@ipld/js-cid/CID"),Kt={...d,...s,...h,...n,...i,...a,...c,...u,...l,...o};function Vt(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const zt=Vt("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Jt=Vt("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=re((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}));var Ht={utf8:zt,"utf-8":zt,hex:Kt.base16,latin1:Jt,ascii:Jt,binary:Jt,...Kt};function $t(e,t="utf8"){const r=Ht[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):te(globalThis.Buffer.from(e,"utf-8"))}function Gt(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}const Zt=32,Yt=64,Xt=32;function Qt(e,t){const r=new Uint8Array(Yt);for(let n=0;n<Xt;n++)r[n]=e[n],r[Xt+n]=t[n];return r}var er={get(e=globalThis){const t=e.crypto;if(null==t||null==t.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t}};const tr={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};async function rr(e,t){const r=function(e){const t=e?.algorithm??"AES-GCM";let r=e?.keyLength??16;const n=e?.nonceLength??12,i=e?.digest??"SHA-256",s=e?.saltLength??16,o=e?.iterations??32767,a=er.get();return r*=8,{encrypt:async function(e,c){const u=a.getRandomValues(new Uint8Array(s)),l=a.getRandomValues(new Uint8Array(n)),h={name:t,iv:l};let d;if("string"==typeof c&&(c=$t(c)),0===c.length){d=await a.subtle.importKey("jwk",tr,{name:"AES-GCM"},!0,["encrypt"]);try{const e={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},n=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey"]);d=await a.subtle.deriveKey(e,n,{name:t,length:r},!0,["encrypt"])}catch{d=await a.subtle.importKey("jwk",tr,{name:"AES-GCM"},!0,["encrypt"])}}else{const e={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},n=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey"]);d=await a.subtle.deriveKey(e,n,{name:t,length:r},!0,["encrypt"])}const f=await a.subtle.encrypt(h,d,e);return ne([u,h.iv,new Uint8Array(f)])},decrypt:async function(e,c){const u=e.subarray(0,s),l=e.subarray(s,s+n),h=e.subarray(s+n),d={name:t,iv:l};let f;if("string"==typeof c&&(c=$t(c)),0===c.length)try{const e={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},n=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey"]);f=await a.subtle.deriveKey(e,n,{name:t,length:r},!0,["decrypt"])}catch{f=await a.subtle.importKey("jwk",tr,{name:"AES-GCM"},!0,["decrypt"])}else{const e={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},n=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey"]);f=await a.subtle.deriveKey(e,n,{name:t,length:r},!0,["decrypt"])}const p=await a.subtle.decrypt(d,f,h);return new Uint8Array(p)}}}(),n=await r.encrypt(e,t);return Fe.encode(n)}var nr,ir,sr,or,ar=r(59110);!function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"}(nr||(nr={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"}(ir||(ir={})),function(e){e.codec=()=>(0,ar.eG)(ir)}(nr||(nr={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,ar.iU)(((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),nr.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.Type=nr.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>(0,ar.mH)(t,e.codec()),e.decode=t=>(0,ar.Y8)(t,e.codec())}(sr||(sr={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,ar.iU)(((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),nr.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.Type=nr.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>(0,ar.mH)(t,e.codec()),e.decode=t=>(0,ar.Y8)(t,e.codec())}(or||(or={}));class cr{_key;constructor(e){this._key=pr(e,Zt)}async verify(e,t){return async function(e,t,r){return I.ev.verify(t,r,e)}(this._key,t,e)}marshal(){return this._key}get bytes(){return sr.encode({Type:nr.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Gt(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Rt.digest(this.bytes);return e}}class ur{_key;_publicKey;constructor(e,t){this._key=pr(e,Yt),this._publicKey=pr(t,Zt)}async sign(e){return async function(e,t){const r=e.subarray(0,Xt);return I.ev.sign(t,r)}(this._key,e)}get public(){return new cr(this._publicKey)}marshal(){return this._key}get bytes(){return or.encode({Type:nr.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Gt(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Rt.digest(this.bytes);return e}async id(){const e=kt.digest(this.public.bytes);return je.encode(e.bytes).substring(1)}async export(e,t="libp2p-key"){if("libp2p-key"===t)return rr(this.bytes,e);throw new oe.Ak(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function lr(e){if(e.length>Yt){const t=(e=pr(e,Yt+Zt)).subarray(0,Yt),r=e.subarray(Yt,e.length);return new ur(t,r)}const t=(e=pr(e,Yt)).subarray(0,Yt),r=e.subarray(Zt);return new ur(t,r)}function hr(e){return e=pr(e,Zt),new cr(e)}async function dr(){const{privateKey:e,publicKey:t}=await async function(){const e=I.ev.utils.randomPrivateKey(),t=I.ev.getPublicKey(e);return{privateKey:Qt(e,t),publicKey:t}}();return new ur(e,t)}async function fr(e){const{privateKey:t,publicKey:r}=await async function(e){if(e.length!==Xt)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const t=e,r=I.ev.getPublicKey(t);return{privateKey:Qt(t,r),publicKey:r}}(e);return new ur(t,r)}function pr(e,t){if((e=Uint8Array.from(e??[])).length!==t)throw new oe.Ak(`Key must be a Uint8Array of length ${t}, got ${e.length}`,"ERR_INVALID_KEY_TYPE");return e}function gr(e,t="utf8"){const r=Ht[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}r(7619),r(43736);function mr(e,t){let r=Uint8Array.from(e.abs().toByteArray());if(r=0===r[0]?r.subarray(1):r,null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=ne([new Uint8Array(t-r.length),r])}return gr(r,"base64url")}function yr(e){const t=function(e,t){let r=$t(e,"base64urlpad");if(null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=ne([new Uint8Array(t-r.length),r])}return r}(e);return new ae.jsbn.BigInteger(gr(t,"base16"),16)}const br={"P-256":256,"P-384":384,"P-521":521};Object.keys(br).join(" / ");r(72313);function wr(e){if(isNaN(e)||e<=0)throw new oe.Ak("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return function(e=32){if(B&&"function"==typeof B.getRandomValues)return B.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}(e)}r(15805);function vr(e,t){return t.map((t=>yr(e[t])))}async function Sr(e){const t=[await er.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Ar(e)],r=await _r({privateKey:t[0],publicKey:t[1]});return{privateKey:r[0],publicKey:r[1]}}async function _r(e){if(null==e.privateKey||null==e.publicKey)throw new oe.Ak("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([er.get().subtle.exportKey("jwk",e.privateKey),er.get().subtle.exportKey("jwk",e.publicKey)])}async function Ar(e){return er.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Er(e,t,r,n){const i=t?function(e){return ae.pki.setRsaPublicKey(...vr(e,["n","e"]))}(e):function(e){return ae.pki.setRsaPrivateKey(...vr(e,["n","e","d","p","q","dp","dq","qi"]))}(e);return $t(n(gr(Uint8Array.from(r),"ascii"),i),"ascii")}function xr(e){if("RSA"!==e.kty)throw new oe.Ak("invalid key type","ERR_INVALID_KEY_TYPE");if(null==e.n)throw new oe.Ak("invalid key modulus","ERR_INVALID_KEY_MODULUS");return 8*$t(e.n,"base64url").length}const kr=8192;class Tr{_key;constructor(e){this._key=e}async verify(e,t){return async function(e,t,r){const n=await er.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return er.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)}(this._key,t,e)}marshal(){return function(e){if(null==e.n||null==e.e)throw new oe.Ak("JWK was missing components","ERR_INVALID_PARAMETERS");const t=ae.pki.publicKeyToAsn1({n:yr(e.n),e:yr(e.e)});return $t(ae.asn1.toDer(t).getBytes(),"ascii")}(this._key)}get bytes(){return sr.encode({Type:nr.RSA,Data:this.marshal()}).subarray()}encrypt(e){return Er(this._key,!0,e,((e,t)=>t.encrypt(e)))}equals(e){return Gt(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Rt.digest(this.bytes);return e}}class Ir{_key;_publicKey;constructor(e,t){this._key=e,this._publicKey=t}genSecret(){return wr(16)}async sign(e){return async function(e,t){const r=await er.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await er.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,0,n.byteLength)}(this._key,e)}get public(){if(null==this._publicKey)throw new oe.Ak("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new Tr(this._publicKey)}decrypt(e){return Er(this._key,!1,e,((e,t)=>t.decrypt(e)))}marshal(){return function(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw new oe.Ak("JWK was missing components","ERR_INVALID_PARAMETERS");const t=ae.pki.privateKeyToAsn1({n:yr(e.n),e:yr(e.e),d:yr(e.d),p:yr(e.p),q:yr(e.q),dP:yr(e.dp),dQ:yr(e.dq),qInv:yr(e.qi)});return $t(ae.asn1.toDer(t).getBytes(),"ascii")}(this._key)}get bytes(){return or.encode({Type:nr.RSA,Data:this.marshal()}).subarray()}equals(e){return Gt(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Rt.digest(this.bytes);return e}async id(){return gr(await this.public.hash(),"base58btc")}async export(e,t="pkcs-8"){if("pkcs-8"===t){const t=new ae.util.ByteBuffer(this.marshal()),r=ae.asn1.fromDer(t),n=ae.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return ae.pki.encryptRsaPrivateKey(n,e,i)}if("libp2p-key"===t)return rr(this.bytes,e);throw new oe.Ak(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}async function Pr(e){const t=function(e){const t=ae.asn1.fromDer(gr(e,"ascii")),r=ae.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:mr(r.n),e:mr(r.e),d:mr(r.d),p:mr(r.p),q:mr(r.q),dp:mr(r.dP),dq:mr(r.dQ),qi:mr(r.qInv),alg:"RS256"}}(e);if(xr(t)>kr)throw new oe.Ak("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const r=await Sr(t);return new Ir(r.privateKey,r.publicKey)}function Rr(e){const t=function(e){const t=ae.asn1.fromDer(gr(e,"ascii")),r=ae.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:mr(r.n),e:mr(r.e)}}(e);if(xr(t)>kr)throw new oe.Ak("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new Tr(t)}async function Cr(e){if(xr(e)>kr)throw new oe.Ak("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const t=await Sr(e);return new Ir(t.privateKey,t.publicKey)}async function Or(e){if(e>kr)throw new oe.Ak("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const t=await async function(e){const t=await er.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await _r(t);return{privateKey:r[0],publicKey:r[1]}}(e);return new Ir(t.privateKey,t.publicKey)}var Dr=r(64544);function Br(e){try{Dr.bI.ProjectivePoint.fromHex(e)}catch(e){throw new oe.Ak(String(e),"ERR_INVALID_PUBLIC_KEY")}}class Nr{_key;constructor(e){Br(e),this._key=e}async verify(e,t){return async function(e,t,r){try{const{digest:n}=await Rt.digest(r);return Dr.bI.verify(t,n,e)}catch(e){throw new oe.Ak(String(e),"ERR_INVALID_INPUT")}}(this._key,t,e)}marshal(){return e=this._key,Dr.bI.ProjectivePoint.fromHex(e).toRawBytes(!0);var e}get bytes(){return sr.encode({Type:nr.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Gt(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Rt.digest(this.bytes);return e}}class Ur{_key;_publicKey;constructor(e,t){this._key=e,this._publicKey=t??function(e){try{return Dr.bI.getPublicKey(e,!0)}catch(e){throw new oe.Ak(String(e),"ERR_INVALID_PRIVATE_KEY")}}(e),function(e){try{Dr.bI.getPublicKey(e,!0)}catch(e){throw new oe.Ak(String(e),"ERR_INVALID_PRIVATE_KEY")}}(this._key),Br(this._publicKey)}async sign(e){return async function(e,t){const{digest:r}=await Rt.digest(t);try{return Dr.bI.sign(r,e).toDERRawBytes()}catch(e){throw new oe.Ak(String(e),"ERR_INVALID_INPUT")}}(this._key,e)}get public(){return new Nr(this._publicKey)}marshal(){return this._key}get bytes(){return or.encode({Type:nr.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Gt(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Rt.digest(this.bytes);return e}async id(){return gr(await this.public.hash(),"base58btc")}async export(e,t="libp2p-key"){if("libp2p-key"===t)return rr(this.bytes,e);throw new oe.Ak(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function Mr(e){return new Ur(e)}function jr(e){return new Nr(e)}async function Lr(){const e=Dr.bI.utils.randomPrivateKey();return new Ur(e)}const Fr={rsa:b,ed25519:y,secp256k1:w};function Wr(e){const t=Object.keys(Fr).join(" / ");return new oe.Ak(`invalid or unsupported key type ${e}. Must be ${t}`,"ERR_UNSUPPORTED_KEY_TYPE")}async function qr(e){const t=or.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case nr.RSA:return Fr.rsa.unmarshalRsaPrivateKey(r);case nr.Ed25519:return Fr.ed25519.unmarshalEd25519PrivateKey(r);case nr.Secp256k1:return Fr.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw Wr(t.Type??"RSA")}}var Kr=r(66660);const Vr=Symbol.for("nodejs.util.inspect.custom"),zr=Object.values(Kt).map((e=>e.decoder)).reduce(((e,t)=>e.or(t)),Kt.identity.decoder),Jr=114,Hr=36,$r=37;class Gr{type;multihash;privateKey;publicKey;string;constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[Kr.H]=!0;toString(){return null==this.string&&(this.string=je.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return Nt.createV1(Jr,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return Gt(this.multihash.bytes,e);if("string"==typeof e)return function(e,t){if(t=t??zr,"1"===e.charAt(0)||"Q"===e.charAt(0)){const t=At(je.decode(`z${e}`));return e.startsWith("12D")?new Yr({multihash:t}):e.startsWith("16U")?new Xr({multihash:t}):new Zr({multihash:t})}return function(e){try{const t=At(e);if(t.code===kt.code){if(t.digest.length===Hr)return new Yr({multihash:t});if(t.digest.length===$r)return new Xr({multihash:t})}if(t.code===Rt.code)return new Zr({multihash:t})}catch{return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&e.code!==Jr)throw new Error("Supplied PeerID CID is invalid");const t=e.multihash;if(t.code===Rt.code)return new Zr({multihash:e.multihash});if(t.code===kt.code){if(t.digest.length===Hr)return new Yr({multihash:e.multihash});if(t.digest.length===$r)return new Xr({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(Nt.decode(e))}throw new Error("Supplied PeerID CID is invalid")}(zr.decode(e))}(e).equals(this);if(null!=e?.multihash?.bytes)return Gt(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[Vr](){return`PeerId(${this.toString()})`}}class Zr extends Gr{type="RSA";publicKey;constructor(e){super({...e,type:"RSA"}),this.publicKey=e.publicKey}}class Yr extends Gr{type="Ed25519";publicKey;constructor(e){super({...e,type:"Ed25519"}),this.publicKey=e.multihash.digest}}class Xr extends Gr{type="secp256k1";publicKey;constructor(e){super({...e,type:"secp256k1"}),this.publicKey=e.multihash.digest}}async function Qr(e,t){return e.length===Hr?new Yr({multihash:_t(kt.code,e),privateKey:t}):e.length===$r?new Xr({multihash:_t(kt.code,e),privateKey:t}):new Zr({multihash:await Rt.digest(e),publicKey:e,privateKey:t})}var en,tn;async function rn(e,t,r){const n=await async function(e,t){if(null==e.privateKey)throw new Error("PrivateKey was missing from PeerId");return(await qr(e.privateKey)).sign(t)}(e,on(t));if(null==e.publicKey)throw new Error("PublicKey was missing from local PeerId");return function(e,t,r){return tn.encode({identityKey:e,identitySig:t,extensions:r??{webtransportCerthashes:[]}}).subarray()}(e.publicKey,n,r)}async function nn(e){return Qr(e.identityKey)}function sn(e){return tn.decode(e)}function on(e){const t=$t("noise-libp2p-static-key:");return ne([t,e],t.length+e.length)}async function an(e,t,r){const n=await Qr(t.identityKey);if(!n.equals(r))throw new Error(`Payload identity key ${n.toString()} does not match expected remote peer ${r.toString()}`);const i=on(e);if(null==n.publicKey)throw new Error("PublicKey was missing from PeerId");if(null==t.identitySig)throw new Error("Signature was missing from message");const s=function(e){const t=sr.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case nr.RSA:return Fr.rsa.unmarshalRsaPublicKey(r);case nr.Ed25519:return Fr.ed25519.unmarshalEd25519PublicKey(r);case nr.Secp256k1:return Fr.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw Wr(t.Type??"unknown")}}(n.publicKey);if(!await s.verify(i,t.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return n}function cn(e){return e instanceof Uint8Array&&32===e.length}!function(e){let t;e.codec=()=>(null==t&&(t=(0,ar.iU)(((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.webtransportCerthashes)for(const r of e.webtransportCerthashes)t.uint32(10),t.bytes(r);!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={webtransportCerthashes:[]},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();if(t>>>3==1)r.webtransportCerthashes.push(e.bytes());else e.skipType(7&t)}return r}))),t),e.encode=t=>(0,ar.mH)(t,e.codec()),e.decode=t=>(0,ar.Y8)(t,e.codec())}(en||(en={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,ar.iU)(((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.identityKey&&e.identityKey.byteLength>0)&&(t.uint32(10),t.bytes(e.identityKey??new Uint8Array(0))),(!0===r.writeDefaults||null!=e.identitySig&&e.identitySig.byteLength>0)&&(t.uint32(18),t.bytes(e.identitySig??new Uint8Array(0))),null!=e.extensions&&(t.uint32(34),en.codec().encode(e.extensions,t,{writeDefaults:!1})),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={identityKey:new Uint8Array(0),identitySig:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.identityKey=e.bytes();break;case 2:r.identitySig=e.bytes();break;case 4:r.extensions=en.codec().decode(e,e.uint32());break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>(0,ar.mH)(t,e.codec()),e.decode=t=>(0,ar.Y8)(t,e.codec())}(tn||(tn={}));var un=r(17833);un.formatters.b=e=>null==e?"undefined":je.baseEncode(e),un.formatters.t=e=>null==e?"undefined":Te.baseEncode(e),un.formatters.m=e=>null==e?"undefined":Fe.baseEncode(e),un.formatters.p=e=>null==e?"undefined":e.toString(),un.formatters.c=e=>null==e?"undefined":e.toString(),un.formatters.k=e=>null==e?"undefined":e.toString(),un.formatters.a=e=>null==e?"undefined":e.toString();const ln=function(e){let t=function(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}(`${e}:trace`);return un.enabled(`${e}:trace`)&&null!=un.names.map((e=>e.toString())).find((e=>e.includes(":trace")))&&(t=un(`${e}:trace`)),Object.assign(un(e),{error:un(`${e}:error`),trace:t})}("libp2p:noise");let hn;function dn(e){e?(hn(`LOCAL_PUBLIC_EPHEMERAL_KEY ${gr(e.publicKey,"hex")}`),hn(`LOCAL_PRIVATE_EPHEMERAL_KEY ${gr(e.privateKey,"hex")}`)):hn("Missing local ephemeral keys.")}function fn(e){hn(`REMOTE_EPHEMERAL_PUBLIC_KEY ${gr(e,"hex")}`)}hn=k?ln:Object.assign((()=>{}),{enabled:!1,trace:()=>{},error:()=>{}});class pn{n;bytes;view;constructor(e=0){this.n=e,this.bytes=new Uint8Array(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,e,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>4294967295)throw new Error("Cipherstate has reached maximum n, a new handshake must be performed")}}class gn{crypto;constructor(e){this.crypto=e}encryptWithAd(e,t,r){const n=this.encrypt(e.k,e.n,t,r);return e.n.increment(),n}decryptWithAd(e,t,r,n){const{plaintext:i,valid:s}=this.decrypt(e.k,e.n,t,r,n);return s&&e.n.increment(),{plaintext:i,valid:s}}hasKey(e){return!this.isEmptyKey(e.k)}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(e){return Gt(this.createEmptyKey(),e)}encrypt(e,t,r,n){return t.assertValue(),this.crypto.chaCha20Poly1305Encrypt(n,t.getBytes(),r,e)}encryptAndHash(e,t){let r;return r=this.hasKey(e.cs)?this.encryptWithAd(e.cs,e.h,t):t,this.mixHash(e,r),r}decrypt(e,t,r,n,i){t.assertValue();const s=this.crypto.chaCha20Poly1305Decrypt(n,t.getBytes(),r,e,i);return s?{plaintext:s,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(e,t){let r,n=!0;return this.hasKey(e.cs)?({plaintext:r,valid:n}=this.decryptWithAd(e.cs,e.h,t)):r=t,this.mixHash(e,t),{plaintext:r,valid:n}}dh(e,t){try{const r=this.crypto.generateX25519SharedKey(e,t);return 32===r.length?r:r.subarray(0,32)}catch(e){const t=e;return ln.error(t),new Uint8Array(32)}}mixHash(e,t){e.h=this.getHash(e.h,t)}getHash(e,t){return this.crypto.hashSHA256(ne([e,t],e.length+t.length))}mixKey(e,t){const[r,n]=this.crypto.getHKDF(e.ck,t);e.cs=this.initializeKey(n),e.ck=r}initializeKey(e){return{k:e,n:new pn}}initializeSymmetric(e){const t=$t(e,"utf-8"),r=this.hashProtocolName(t),n=r,i=this.createEmptyKey();return{cs:this.initializeKey(i),ck:n,h:r}}hashProtocolName(e){if(e.length<=32){const t=new Uint8Array(32);return t.set(e),t}return this.getHash(e,new Uint8Array(0))}split(e){const[t,r]=this.crypto.getHKDF(e.ck,new Uint8Array(0));return{cs1:this.initializeKey(t),cs2:this.initializeKey(r)}}writeMessageRegular(e,t){const r=this.encryptWithAd(e,new Uint8Array(0),t);return{ne:this.createEmptyKey(),ns:new Uint8Array(0),ciphertext:r}}readMessageRegular(e,t){return this.decryptWithAd(e,new Uint8Array(0),t.ciphertext)}}class mn extends gn{initializeInitiator(e,t,r,n){const i=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");this.mixHash(i,e);return{ss:i,s:t,rs:r,psk:n,re:new Uint8Array(32)}}initializeResponder(e,t,r,n){const i=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");this.mixHash(i,e);return{ss:i,s:t,rs:r,psk:n,re:new Uint8Array(32)}}writeMessageA(e,t,r){const n=new Uint8Array(0);e.e=void 0!==r?r:this.crypto.generateX25519KeyPair();const i=e.e.publicKey;this.mixHash(e.ss,i);return{ne:i,ns:n,ciphertext:this.encryptAndHash(e.ss,t)}}writeMessageB(e,t){e.e=this.crypto.generateX25519KeyPair();const r=e.e.publicKey;this.mixHash(e.ss,r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));const n=e.s.publicKey,i=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));return{ne:r,ns:i,ciphertext:this.encryptAndHash(e.ss,t)}}writeMessageC(e,t){const r=e.s.publicKey,n=this.encryptAndHash(e.ss,r);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));const i=this.encryptAndHash(e.ss,t),s={ne:this.createEmptyKey(),ns:n,ciphertext:i},{cs1:o,cs2:a}=this.split(e.ss);return{h:e.ss.h,messageBuffer:s,cs1:o,cs2:a}}readMessageA(e,t){return cn(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,t.ciphertext)}readMessageB(e,t){if(cn(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));const{plaintext:r,valid:n}=this.decryptAndHash(e.ss,t.ns);n&&cn(r)&&(e.rs=r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const{plaintext:i,valid:s}=this.decryptAndHash(e.ss,t.ciphertext);return{plaintext:i,valid:n&&s}}readMessageC(e,t){const{plaintext:r,valid:n}=this.decryptAndHash(e.ss,t.ns);if(n&&cn(r)&&(e.rs=r),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const{plaintext:i,valid:s}=this.decryptAndHash(e.ss,t.ciphertext),{cs1:o,cs2:a}=this.split(e.ss);return{h:e.ss.h,plaintext:i,valid:n&&s,cs1:o,cs2:a}}initSession(e,t,r){const n=this.createEmptyKey(),i=new Uint8Array(32);let s;return s=e?this.initializeInitiator(t,r,i,n):this.initializeResponder(t,r,i,n),{hs:s,i:e,mc:0}}sendMessage(e,t,r){let n;if(0===e.mc)n=this.writeMessageA(e.hs,t,r);else if(1===e.mc)n=this.writeMessageB(e.hs,t);else if(2===e.mc){const{h:r,messageBuffer:i,cs1:s,cs2:o}=this.writeMessageC(e.hs,t);n=i,e.h=r,e.cs1=s,e.cs2=o}else{if(!(e.mc>2))throw new Error("Session invalid.");if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(e.cs1,t)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(e.cs2,t)}}return e.mc++,n}recvMessage(e,t){let r=new Uint8Array(0),n=!1;if(0===e.mc)({plaintext:r,valid:n}=this.readMessageA(e.hs,t));else if(1===e.mc)({plaintext:r,valid:n}=this.readMessageB(e.hs,t));else if(2===e.mc){const{h:i,plaintext:s,valid:o,cs1:a,cs2:c}=this.readMessageC(e.hs,t);r=s,n=o,e.h=i,e.cs1=a,e.cs2=c}return e.mc++,{plaintext:r,valid:n}}}class yn{isInitiator;session;remotePeer;remoteExtensions={webtransportCerthashes:[]};payload;connection;xx;staticKeypair;prologue;constructor(e,t,r,n,i,s,o,a){this.isInitiator=e,this.payload=t,this.prologue=r,this.staticKeypair=i,this.connection=s,o&&(this.remotePeer=o),this.xx=a??new mn(n),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair)}async propose(){var e,t;if(e=this.session.hs.s,hn(`LOCAL_STATIC_PUBLIC_KEY ${gr(e.publicKey,"hex")}`),hn(`LOCAL_STATIC_PRIVATE_KEY ${gr(e.privateKey,"hex")}`),this.isInitiator){ln.trace("Stage 0 - Initiator starting to send first message.");const e=this.xx.sendMessage(this.session,new Uint8Array(0));await this.connection.write((t=e,ne([t.ne,t.ciphertext],t.ne.length+t.ciphertext.length))),ln.trace("Stage 0 - Initiator finished sending first message."),dn(this.session.hs.e)}else{ln.trace("Stage 0 - Responder waiting to receive first message...");const e=function(e){if(e.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:e.subarray(0,32),ciphertext:e.subarray(32,e.length),ns:new Uint8Array(0)}}((await this.connection.read()).subarray()),{valid:t}=this.xx.recvMessage(this.session,e);if(!t)throw new oe.c6("xx handshake stage 0 validation fail");ln.trace("Stage 0 - Responder received first message."),fn(this.session.hs.re)}}async exchange(){if(this.isInitiator){ln.trace("Stage 1 - Initiator waiting to receive first message from responder...");const e=function(e){if(e.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:e.subarray(0,32),ns:e.subarray(32,80),ciphertext:e.subarray(80,e.length)}}((await this.connection.read()).subarray()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new oe.c6("xx handshake stage 1 validation fail");ln.trace("Stage 1 - Initiator received the message."),fn(this.session.hs.re),t=this.session.hs.rs,hn(`REMOTE_STATIC_PUBLIC_KEY ${gr(t,"hex")}`),ln.trace("Initiator going to check remote's signature...");try{const e=sn(r);this.remotePeer=this.remotePeer||await nn(e),await an(this.session.hs.rs,e,this.remotePeer),this.setRemoteNoiseExtension(e.extensions)}catch(e){const t=e;throw new oe.aS(`Error occurred while verifying signed payload: ${t.message}`)}ln.trace("All good with the signature!")}else{ln.trace("Stage 1 - Responder sending out first message with signed payload and static key.");const t=this.xx.sendMessage(this.session,this.payload);await this.connection.write((e=t,ne([e.ne,e.ns,e.ciphertext],e.ne.length+e.ns.length+e.ciphertext.length))),ln.trace("Stage 1 - Responder sent the second handshake message with signed payload."),dn(this.session.hs.e)}var e,t}async finish(){if(this.isInitiator){ln.trace("Stage 2 - Initiator sending third handshake message.");const t=this.xx.sendMessage(this.session,this.payload);await this.connection.write((e=t,ne([e.ns,e.ciphertext],e.ns.length+e.ciphertext.length))),ln.trace("Stage 2 - Initiator sent message with signed payload.")}else{ln.trace("Stage 2 - Responder waiting for third handshake message...");const e=function(e){if(e.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:e.subarray(0,48),ciphertext:e.subarray(48,e.length)}}((await this.connection.read()).subarray()),{plaintext:t,valid:r}=this.xx.recvMessage(this.session,e);if(!r)throw new oe.c6("xx handshake stage 2 validation fail");ln.trace("Stage 2 - Responder received the message, finished handshake.");try{const e=sn(t);this.remotePeer=this.remotePeer||await nn(e),await an(this.session.hs.rs,e,this.remotePeer),this.setRemoteNoiseExtension(e.extensions)}catch(e){const t=e;throw new oe.aS(`Error occurred while verifying signed payload: ${t.message}`)}}var e,t;(t=this.session).cs1&&t.cs2?(hn(`CIPHER_STATE_1 ${t.cs1.n.getUint64()} ${gr(t.cs1.k,"hex")}`),hn(`CIPHER_STATE_2 ${t.cs2.n.getUint64()} ${gr(t.cs2.k,"hex")}`)):hn("Missing cipher state.")}encrypt(e,t){const r=this.getCS(t);return this.xx.encryptWithAd(r,new Uint8Array(0),e)}decrypt(e,t,r){const n=this.getCS(t,!1);return this.xx.decryptWithAd(n,new Uint8Array(0),e,r)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,t=!0){if(!e.cs1||!e.cs2)throw new oe.c6("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?t?e.cs1:e.cs2:t?e.cs2:e.cs1}setRemoteNoiseExtension(e){e&&(this.remoteExtensions=e)}}class bn{protocol="/noise";crypto;prologue;staticKeys;extensions;metrics;constructor(e={}){const{staticNoiseKey:t,extensions:r,crypto:n,prologueBytes:i,metrics:s}=e;this.crypto=n??ee,this.extensions=r,this.metrics=s?function(e){return{xxHandshakeSuccesses:e.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:e.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:e.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:e.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:e.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}(s):void 0,this.staticKeys=t?this.crypto.generateX25519KeyPairFromSeed(t):this.crypto.generateX25519KeyPair(),this.prologue=i??new Uint8Array(0)}async secureOutbound(e,t,r){const n=(0,S.V)(t,{lengthEncoder:ie,lengthDecoder:se,maxDataLength:x}),i=await this.performHandshake({connection:n,isInitiator:!0,localPeer:e,remotePeer:r});return{conn:await this.createSecureConnection(n,i),remoteExtensions:i.remoteExtensions,remotePeer:i.remotePeer}}async secureInbound(e,t,r){const n=(0,S.V)(t,{lengthEncoder:ie,lengthDecoder:se,maxDataLength:x}),i=await this.performHandshake({connection:n,isInitiator:!1,localPeer:e,remotePeer:r});return{conn:await this.createSecureConnection(n,i),remotePeer:i.remotePeer,remoteExtensions:i.remoteExtensions}}async performHandshake(e){const t=await rn(e.localPeer,this.staticKeys.publicKey,this.extensions);return this.performXXHandshake(e,t)}async performXXHandshake(e,t){const{isInitiator:r,remotePeer:n,connection:i}=e,s=new yn(r,t,this.prologue,this.crypto,this.staticKeys,i,n);try{await s.propose(),await s.exchange(),await s.finish(),this.metrics?.xxHandshakeSuccesses.increment()}catch(e){if(this.metrics?.xxHandshakeErrors.increment(),e instanceof Error)throw e.message=`Error occurred during XX handshake: ${e.message}`,e}return s}async createSecureConnection(e,t){const[r,n]=function(){const e=A(),t=A();return[{source:e.source,sink:t.sink},{source:t.source,sink:e.sink}]}(),i=e.unwrap();return await(0,E.F)(r,function(e,t){return async function*(r){for await(const n of r)for(let r=0;r<n.length;r+=65519){let i=r+65519;i>n.length&&(i=n.length);const s=e.encrypt(n.subarray(r,i),e.session);t?.encryptedPackets.increment(),yield ie(s.byteLength),yield s}}}(t,this.metrics),i,(e=>(0,v.D)(e,{lengthDecoder:se})),function(e,t){return async function*(r){for await(const n of r)for(let r=0;r<n.length;r+=x){let i=r+x;if(i>n.length&&(i=n.length),i-16<r)throw new Error("Invalid chunk");const s=n.subarray(r,i),o=n.subarray(r,i-16),{plaintext:a,valid:c}=e.decrypt(s,e.session,o);if(!c)throw t?.decryptErrors.increment(),new Error("Failed to validate decrypted chunk");t?.decryptedPackets.increment(),yield a}}}(t,this.metrics),r),n}}function wn(e={}){return()=>new bn(e)}},84419:function(e,t,r){"use strict";r.d(t,{N:function(){return re}});var n=r(70202),i=r(17833);var s=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*l+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};new Uint8Array(0);class o{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class a{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return u(this,e)}}class c{constructor(e){this.decoders=e}or(e){return u(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const u=(e,t)=>new c({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class l{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new o(e,t,r),this.decoder=new a(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const h=({name:e,prefix:t,encode:r,decode:n})=>new l(e,t,r,n),d=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=s(r,t);return h({prefix:e,name:t,encode:n,decode:e=>(e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")})(i(e))})},f=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>h({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),p=f({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),g=(f({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),f({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),f({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),f({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),f({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),f({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),f({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),f({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),d({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"})),m=(d({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),f({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}));f({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),f({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),f({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function y(e){let t=function(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}(`${e}:trace`);return i.enabled(`${e}:trace`)&&null!=i.names.map((e=>e.toString())).find((e=>e.includes(":trace")))&&(t=i(`${e}:trace`)),Object.assign(i(e),{error:i(`${e}:error`),trace:t})}i.formatters.b=e=>null==e?"undefined":g.baseEncode(e),i.formatters.t=e=>null==e?"undefined":p.baseEncode(e),i.formatters.m=e=>null==e?"undefined":m.baseEncode(e),i.formatters.p=e=>null==e?"undefined":e.toString(),i.formatters.c=e=>null==e?"undefined":e.toString(),i.formatters.k=e=>null==e?"undefined":e.toString(),i.formatters.a=e=>null==e?"undefined":e.toString();class b extends Error{constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}function w(e,t,r){const n=r??{},i=function(e){if(null!=e){if("function"==typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"==typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"==typeof e.next)return e}throw new Error("argument is not an iterator or iterable")}(e);return async function*(){let r;const s=()=>{null!=r&&r()};for(t.addEventListener("abort",s);;){let o;try{if(t.aborted){const{abortMessage:e,abortCode:t}=n;throw new b(e,t)}const e=new Promise(((e,t)=>{r=()=>{const{abortMessage:e,abortCode:r}=n;t(new b(e,r))}}));o=await Promise.race([e,i.next()]),r=null}catch(r){t.removeEventListener("abort",s);const o="aborted"===r.type&&t.aborted;if(o&&null!=n.onAbort&&n.onAbort(e),"function"==typeof i.return)try{const e=i.return();e instanceof Promise&&e.catch((e=>{null!=n.onReturnError&&n.onReturnError(e)}))}catch(e){null!=n.onReturnError&&n.onReturnError(e)}if(o&&!0===n.returnOnAbort)return;throw r}if(!0===o.done)break;yield o.value}t.removeEventListener("abort",s)}()}var v=r(81033),S=r(97313);class _{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||0!=(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}class A{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new _(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return null!=e?.byteLength?e.byteLength:1}push(e){if(null!=e?.value&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const t=this.head;this.head=t.next=new _(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(void 0===e&&null!=this.tail.next){const t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return null!=e?.value&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}}class E extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}function x(e,t){let r,n,i,s=(t=t??{}).onEnd,o=new A,a=(0,S.A)();const c=e=>null!=n?n(e):(o.push(e),r),u=e=>{if(i)return r;if(!0!==t?.objectMode&&null==e?.byteLength)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:e})},l=e=>i?r:(i=!0,null!=e?(e=>(o=new A,null!=n?n({error:e}):(o.push({error:e}),r)))(e):c({done:!0}));if(r={[Symbol.asyncIterator](){return this},next:async()=>{try{return o.isEmpty()?i?{done:!0}:await new Promise(((t,i)=>{n=s=>{n=null,o.push(s);try{t(e(o))}catch(e){i(e)}return r}})):e(o)}finally{o.isEmpty()&&queueMicrotask((()=>{a.resolve(),a=(0,S.A)()}))}},return:()=>(o=new A,l(),{done:!0}),throw:e=>(l(e),{done:!0}),push:u,end:l,get readableLength(){return o.size},onEmpty:async e=>{const t=e?.signal;if(t?.throwIfAborted(),o.isEmpty())return;let r,n;null!=t&&(r=new Promise(((e,r)=>{n=()=>{r(new E)},t.addEventListener("abort",n)})));try{await Promise.race([a.promise,r])}finally{null!=n&&null!=t&&t?.removeEventListener("abort",n)}}},null==s)return r;const h=r;return r={[Symbol.asyncIterator](){return this},next:()=>h.next(),throw:e=>(h.throw(e),null!=s&&(s(e),s=void 0),{done:!0}),return:()=>(h.return(),null!=s&&(s(),s=void 0),{done:!0}),push:u,end:e=>(h.end(e),null!=s&&(s(e),s=void 0),r),get readableLength(){return h.readableLength}},r}const k="ERR_INVALID_FRAME",T="ERR_UNREQUESTED_PING",I="ERR_NOT_MATCHING_PING",P="ERR_STREAM_ALREADY_EXISTS",R="ERR_DECODE_INVALID_VERSION",C="ERR_BOTH_CLIENTS",O="ERR_RECV_WINDOW_EXCEEDED",D=new Set([k,T,I,P,R,C,O]),B="ERR_INVALID_CONFIG",N="ERR_MUXER_LOCAL_CLOSED",U="ERR_MUXER_REMOTE_CLOSED",M=262144,j={log:y("libp2p:yamux"),enableKeepAlive:!0,keepAliveInterval:3e4,maxInboundStreams:1e3,maxOutboundStreams:1e3,initialStreamWindowSize:M,maxStreamWindowSize:16777216,maxMessageSize:65536};var L,F,W=r(40859);!function(e){e[e.Data=0]="Data",e[e.WindowUpdate=1]="WindowUpdate",e[e.Ping=2]="Ping",e[e.GoAway=3]="GoAway"}(L||(L={})),function(e){e[e.SYN=1]="SYN",e[e.ACK=2]="ACK",e[e.FIN=4]="FIN",e[e.RST=8]="RST"}(F||(F={}));const q=Object.values(F).filter((e=>"string"!=typeof e));var K;!function(e){e[e.NormalTermination=0]="NormalTermination",e[e.ProtocolError=1]="ProtocolError",e[e.InternalError=2]="InternalError"}(K||(K={}));function V(e){const t=q.filter((t=>(e.flag&t)===t)).map((e=>F[e])).join("|");return`streamID=${e.streamID} type=${L[e.type]} flag=${t} length=${e.length}`}const z=2**24;class J{source;buffer;frameInProgress;constructor(e){this.source=function(e){if(void 0!==e[Symbol.iterator]){const t=e[Symbol.iterator]();return t.return=void 0,{[Symbol.iterator]:()=>t}}if(void 0!==e[Symbol.asyncIterator]){const t=e[Symbol.asyncIterator]();return t.return=void 0,{[Symbol.asyncIterator]:()=>t}}throw new Error("a source must be either an iterable or an async iterable")}(e),this.buffer=new W.I,this.frameInProgress=!1}async*emitFrames(){for await(const e of this.source)for(this.buffer.append(e);;){const e=this.readHeader();if(void 0===e)break;const{type:t,length:r}=e;t===L.Data?(this.frameInProgress=!0,yield{header:e,readData:this.readBytes.bind(this,r)}):yield{header:e}}}readHeader(){if(this.frameInProgress)throw new n.Ak("decoding frame already in progress","ERR_DECODE_IN_PROGRESS");if(this.buffer.length<12)return;const e=function(e){if(0!==e[0])throw new n.Ak("Invalid frame version",R);return{type:e[1],flag:(e[2]<<8)+e[3],streamID:e[4]*z+(e[5]<<16)+(e[6]<<8)+e[7],length:e[8]*z+(e[9]<<16)+(e[10]<<8)+e[11]}}(this.buffer.subarray(0,12));return this.buffer.consume(12),e}async readBytes(e){if(this.buffer.length<e)for await(const t of this.source)if(this.buffer.append(t),this.buffer.length>=e)break;const t=this.buffer.sublist(0,e);return this.buffer.consume(e),this.frameInProgress=!1,t}}function H(e){const t=new Uint8Array(12);return t[1]=e.type,t[2]=e.flag>>>8,t[3]=e.flag,t[4]=e.streamID>>>24,t[5]=e.streamID>>>16,t[6]=e.streamID>>>8,t[7]=e.streamID,t[8]=e.length>>>24,t[9]=e.length>>>16,t[10]=e.length>>>8,t[11]=e.length,t}var $=r(70296),G=r(97101);var Z,Y=function(e,t){if(null!=e[Symbol.asyncIterator])return async function*(){for await(const r of e)await t(r),yield r}();const r=(0,G.A)(e),{value:n,done:i}=r.next();if(!0===i)return function*(){}();const s=t(n);if("function"==typeof s?.then)return async function*(){yield n;for await(const e of r)await t(e),yield e}();const o=t;return function*(){yield n;for(const e of r)o(e),yield e}()};!function(e){e[e.Init=0]="Init",e[e.SYNSent=1]="SYNSent",e[e.SYNReceived=2]="SYNReceived",e[e.Established=3]="Established",e[e.Finished=4]="Finished"}(Z||(Z={}));class X extends $.l{name;state;config;_id;sendWindowCapacity;sendWindowCapacityUpdate;recvWindow;recvWindowCapacity;epochStart;getRTT;sendFrame;constructor(e){super({...e,onEnd:t=>{this.state=Z.Finished,e.onEnd?.(t)}}),this.config=e.config,this._id=parseInt(e.id,10),this.name=e.name,this.state=e.state,this.sendWindowCapacity=M,this.recvWindow=this.config.initialStreamWindowSize,this.recvWindowCapacity=this.recvWindow,this.epochStart=Date.now(),this.getRTT=e.getRTT,this.sendFrame=e.sendFrame,this.source=Y(this.source,(()=>{this.sendWindowUpdate()}))}async sendNewStream(){}async sendData(e,t={}){for(e=e.sublist();0!==e.byteLength;){if(0===this.sendWindowCapacity&&await this.waitForSendWindowCapacity(t),"open"!==this.status)return;const r=Math.min(this.sendWindowCapacity,this.config.maxMessageSize-12,e.length),n=this.getSendFlags();this.sendFrame({type:L.Data,flag:n,streamID:this._id,length:r},e.subarray(0,r)),this.sendWindowCapacity-=r,e.consume(r)}}async sendReset(){this.sendFrame({type:L.WindowUpdate,flag:F.RST,streamID:this._id,length:0})}async sendCloseWrite(){const e=this.getSendFlags()|F.FIN;this.sendFrame({type:L.WindowUpdate,flag:e,streamID:this._id,length:0})}async sendCloseRead(){}async waitForSendWindowCapacity(e={}){if(this.sendWindowCapacity>0)return;let t,r;const i=()=>{"open"===this.status?r(new n.Ak("stream aborted","ERR_STREAM_ABORT")):t()};e.signal?.addEventListener("abort",i);try{await new Promise(((e,n)=>{this.sendWindowCapacityUpdate=()=>{e()},r=n,t=e}))}finally{e.signal?.removeEventListener("abort",i)}}handleWindowUpdate(e){this.log?.trace("stream received window update id=%s",this._id),this.processFlags(e.flag);const t=this.sendWindowCapacity;this.sendWindowCapacity+=e.length,0===t&&e.length>0&&this.sendWindowCapacityUpdate?.()}async handleData(e,t){if(this.log?.trace("stream received data id=%s",this._id),this.processFlags(e.flag),this.recvWindowCapacity<e.length)throw new n.Ak("receive window exceeded",O,{available:this.recvWindowCapacity,recv:e.length});const r=await t();this.recvWindowCapacity-=e.length,this.sourcePush(r)}processFlags(e){(e&F.ACK)===F.ACK&&this.state===Z.SYNSent&&(this.state=Z.Established),(e&F.FIN)===F.FIN&&this.remoteCloseWrite(),(e&F.RST)===F.RST&&this.reset()}getSendFlags(){switch(this.state){case Z.Init:return this.state=Z.SYNSent,F.SYN;case Z.SYNReceived:return this.state=Z.Established,F.ACK;default:return 0}}sendWindowUpdate(){const e=this.getSendFlags(),t=Date.now(),r=this.getRTT();if(0===e&&r>0&&t-this.epochStart<4*r&&(this.recvWindow=Math.min(2*this.recvWindow,this.config.maxStreamWindowSize)),this.recvWindowCapacity>=this.recvWindow&&0===e)return;const n=this.recvWindow-this.recvWindowCapacity;this.recvWindowCapacity=this.recvWindow,this.epochStart=t,this.sendFrame({type:L.WindowUpdate,flag:e,streamID:this._id,length:n})}}const Q="/yamux/1.0.0";class ee{protocol=Q;_init;constructor(e={}){this._init=e}createStreamMuxer(e){return new te({...this._init,...e})}}class te{protocol=Q;source;sink;config;log;closeController;nextStreamID;_streams;nextPingID;activePing;rtt;client;localGoAway;remoteGoAway;numInboundStreams;numOutboundStreams;onIncomingStream;onStreamEnd;constructor(e){this.client="outbound"===e.direction,this.config={...j,...e},this.log=this.config.log,function(e){if(e.keepAliveInterval<=0)throw new n.Ak("keep-alive interval must be positive",B);if(e.maxInboundStreams<0)throw new n.Ak("max inbound streams must be larger or equal 0",B);if(e.maxOutboundStreams<0)throw new n.Ak("max outbound streams must be larger or equal 0",B);if(e.initialStreamWindowSize<M)throw new n.Ak("InitialStreamWindowSize must be larger or equal 256 kB",B);if(e.maxStreamWindowSize<e.initialStreamWindowSize)throw new n.Ak("MaxStreamWindowSize must be larger than the InitialStreamWindowSize",B);if(e.maxStreamWindowSize>2**32-1)throw new n.Ak("MaxStreamWindowSize must be less than equal MAX_UINT32",B);if(e.maxMessageSize<1024)throw new n.Ak("MaxMessageSize must be greater than a kilobyte",B)}(this.config),this.closeController=new AbortController,this.onIncomingStream=e.onIncomingStream,this.onStreamEnd=e.onStreamEnd,this._streams=new Map,this.source=function(e={}){return x((e=>{const t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}}),e)}({onEnd:()=>{this.log?.trace("muxer source ended"),this._streams.forEach((e=>{e.destroy()}))}}),this.sink=async e=>{let t,r;e=w(e,this.closeController.signal,{returnOnAbort:!0});try{const r=new J(e);await(0,v.F)(r.emitFrames.bind(r),(async e=>{for await(const{header:t,readData:r}of e)await this.handleFrame(t,r)})),t=K.NormalTermination}catch(e){const n=e.code;D.has(n)?(this.log?.error("protocol error in sink",e),t=K.ProtocolError):(this.log?.error("internal error in sink",e),t=K.InternalError),r=e}this.log?.trace("muxer sink ended"),null!=r?this.abort(r,t):await this.close({reason:t})},this.numInboundStreams=0,this.numOutboundStreams=0,this.nextStreamID=this.client?1:2,this.nextPingID=0,this.rtt=0,this.log?.trace("muxer created"),this.config.enableKeepAlive&&this.keepAliveLoop().catch((e=>this.log?.error("keepalive error: %s",e)))}get streams(){return Array.from(this._streams.values())}newStream(e){if(void 0!==this.remoteGoAway)throw new n.Ak("muxer closed remotely",U);if(void 0!==this.localGoAway)throw new n.Ak("muxer closed locally",N);const t=this.nextStreamID;if(this.nextStreamID+=2,this.numOutboundStreams>=this.config.maxOutboundStreams)throw new n.Ak("max outbound streams exceeded","ERROR_MAX_OUTBOUND_STREAMS_EXCEEDED");this.log?.trace("new outgoing stream id=%s",t);const r=this._newStream(t,e,Z.Init,"outbound");return this._streams.set(t,r),this.numOutboundStreams++,r.sendWindowUpdate(),r}async ping(){if(void 0!==this.remoteGoAway)throw new n.Ak("muxer closed remotely",U);if(void 0!==this.localGoAway)throw new n.Ak("muxer closed locally",N);if(void 0===this.activePing){let e=()=>{};this.activePing={id:this.nextPingID++,promise:new Promise(((t,r)=>{const i=()=>{r(new n.Ak("muxer closed locally",N))};this.closeController.signal.addEventListener("abort",i,{once:!0}),e=()=>{this.closeController.signal.removeEventListener("abort",i),t()}})),resolve:e};const t=Date.now();this.sendPing(this.activePing.id);try{await this.activePing.promise}finally{delete this.activePing}const r=Date.now();this.rtt=r-t}else await this.activePing.promise;return this.rtt}getRTT(){return this.rtt}async close(e={}){if(this.closeController.signal.aborted)return;const t=e?.reason??K.NormalTermination;this.log?.trace("muxer close reason=%s",t),e.signal=e.signal??AbortSignal.timeout(500);try{await Promise.all([...this._streams.values()].map((async t=>t.close(e)))),this.sendGoAway(t),this._closeMuxer()}catch(e){this.abort(e)}}abort(e,t){if(!this.closeController.signal.aborted){t=t??K.InternalError,this.log?.error("muxer abort reason=%s error=%s",t,e);for(const t of this._streams.values())t.abort(e);this.sendGoAway(t),this._closeMuxer()}}isClosed(){return this.closeController.signal.aborted}_closeMuxer(){this.closeController.abort(),this.source.end()}_newStream(e,t,r,i){if(null!=this._streams.get(e))throw new n.Ak("Stream already exists",P,{id:e});const s=new X({id:e.toString(),name:t,state:r,direction:i,sendFrame:this.sendFrame.bind(this),onEnd:()=>{this.closeStream(e),this.onStreamEnd?.(s)},log:y(`libp2p:yamux:${i}:${e}`),config:this.config,getRTT:this.getRTT.bind(this)});return s}closeStream(e){this.client===(e%2==0)?this.numInboundStreams--:this.numOutboundStreams--,this._streams.delete(e)}async keepAliveLoop(){const e=new Promise(((e,t)=>{this.closeController.signal.addEventListener("abort",t,{once:!0})}));for(this.log?.trace("muxer keepalive enabled interval=%s",this.config.keepAliveInterval);;){let t;try{await Promise.race([e,new Promise((e=>{t=setTimeout(e,this.config.keepAliveInterval)}))]),this.ping().catch((e=>this.log?.error("ping error: %s",e)))}catch(e){return void clearInterval(t)}}}async handleFrame(e,t){const{streamID:r,type:i,length:s}=e;if(this.log?.trace("received frame %s",V(e)),0===r)switch(i){case L.Ping:return void this.handlePing(e);case L.GoAway:return void this.handleGoAway(s);default:throw new n.Ak("Invalid frame type",k,{header:e})}else switch(e.type){case L.Data:case L.WindowUpdate:return void await this.handleStreamMessage(e,t);default:throw new n.Ak("Invalid frame type",k,{header:e})}}handlePing(e){if(e.flag===F.SYN)this.log?.trace("received ping request pingId=%s",e.length),this.sendPing(e.length,F.ACK);else{if(e.flag!==F.ACK)throw new n.Ak("Invalid frame flag",k,{header:e});this.log?.trace("received ping response pingId=%s",e.length),this.handlePingResponse(e.length)}}handlePingResponse(e){if(void 0===this.activePing)throw new n.Ak("ping not requested",T);if(this.activePing.id!==e)throw new n.Ak("ping doesn't match our id",I);this.activePing.resolve()}handleGoAway(e){this.log?.trace("received GoAway reason=%s",K[e]??"unknown"),this.remoteGoAway=e;for(const e of this._streams.values())e.reset();this._closeMuxer()}async handleStreamMessage(e,t){const{streamID:r,flag:n,type:i}=e;(n&F.SYN)===F.SYN&&this.incomingStream(r);const s=this._streams.get(r);if(void 0!==s)switch(i){case L.WindowUpdate:return void s.handleWindowUpdate(e);case L.Data:if(void 0===t)throw new Error("unreachable");return void await s.handleData(e,t);default:throw new Error("unreachable")}else if(i===L.Data){if(this.log?.("discarding data for stream id=%s",r),void 0===t)throw new Error("unreachable");await t()}else this.log?.("frame for missing stream id=%s",r)}incomingStream(e){if(this.client!==(e%2==0))throw new n.Ak("both endpoints are clients",C);if(this._streams.has(e))return;if(this.log?.trace("new incoming stream id=%s",e),void 0!==this.localGoAway)return void this.sendFrame({type:L.WindowUpdate,flag:F.RST,streamID:e,length:0});if(this.numInboundStreams>=this.config.maxInboundStreams)return this.log?.("maxIncomingStreams exceeded, forcing stream reset"),void this.sendFrame({type:L.WindowUpdate,flag:F.RST,streamID:e,length:0});const t=this._newStream(e,void 0,Z.SYNReceived,"inbound");this.numInboundStreams++,this._streams.set(e,t),this.onIncomingStream?.(t)}sendFrame(e,t){if(this.log?.trace("sending frame %s",V(e)),e.type===L.Data){if(void 0===t)throw new n.Ak("invalid frame",k);this.source.push(H(e)),this.source.push(t)}else this.source.push(H(e))}sendPing(e,t=F.SYN){t===F.SYN?this.log?.trace("sending ping request pingId=%s",e):this.log?.trace("sending ping response pingId=%s",e),this.sendFrame({type:L.Ping,flag:t,streamID:0,length:e})}sendGoAway(e=K.NormalTermination){this.log?.("sending GoAway reason=%s",K[e]),this.localGoAway=e,this.sendFrame({type:L.GoAway,flag:0,streamID:0,length:e})}}function re(e={}){return()=>new ee(e)}},48874:function(e,t,r){"use strict";r(64943);parseInt("0xFFFF",16),new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255])},57805:function(e,t,r){"use strict";r.d(t,{lc:function(){return n},DG:function(){return o},IV:function(){return i}});class n extends Error{constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}function i(e,t,r){const i=r??{},s=function(e){if(null!=e){if("function"==typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"==typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"==typeof e.next)return e}throw new Error("argument is not an iterator or iterable")}(e);return async function*(){let r;const o=()=>{null!=r&&r()};for(t.addEventListener("abort",o);;){let a;try{if(t.aborted){const{abortMessage:e,abortCode:t}=i;throw new n(e,t)}const e=new Promise(((e,t)=>{r=()=>{const{abortMessage:e,abortCode:r}=i;t(new n(e,r))}}));a=await Promise.race([e,s.next()]),r=null}catch(r){t.removeEventListener("abort",o);const n="aborted"===r.type&&t.aborted;if(n&&null!=i.onAbort&&await i.onAbort(e),"function"==typeof s.return)try{const e=s.return();e instanceof Promise&&e.catch((e=>{null!=i.onReturnError&&i.onReturnError(e)}))}catch(e){null!=i.onReturnError&&i.onReturnError(e)}if(n&&!0===i.returnOnAbort)return;throw r}if(!0===a.done)break;yield a.value}t.removeEventListener("abort",o)}()}function s(e,t,r){return n=>e(i(n,t,r))}function o(e,t,r){return{sink:s(e.sink,t,{...r,onAbort:void 0}),source:i(e.source,t,r)}}},62593:function(e,t,r){"use strict";function n(e){if(!Array.isArray(e))throw new TypeError("Expected an array, got "+typeof e);for(let t=(e=[...e]).length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}r.d(t,{A:function(){return n}})},22909:function(e,t,r){"use strict";r.d(t,{A:function(){return i}});var n=r(65385);function i(e){return"function"==typeof e.stream?(0,n.A)(e.stream()):(0,n.A)(new Response(e).body)}},36918:function(e,t,r){"use strict";r.d(t,{if:function(){return f},I:function(){return ue},ED:function(){return se}});var n={};r.r(n),r.d(n,{abortedError:function(){return d},closeFailedError:function(){return o},deleteFailedError:function(){return u},getFailedError:function(){return c},hasFailedError:function(){return l},notFoundError:function(){return h},openFailedError:function(){return s},putFailedError:function(){return a}});var i=r(66310);function s(e){return e=e??new Error("Open failed"),i(e,"ERR_OPEN_FAILED")}function o(e){return e=e??new Error("Close failed"),i(e,"ERR_CLOSE_FAILED")}function a(e){return e=e??new Error("Put failed"),i(e,"ERR_PUT_FAILED")}function c(e){return e=e??new Error("Get failed"),i(e,"ERR_GET_FAILED")}function u(e){return e=e??new Error("Delete failed"),i(e,"ERR_DELETE_FAILED")}function l(e){return e=e??new Error("Has failed"),i(e,"ERR_HAS_FAILED")}function h(e){return e=e??new Error("Not Found"),i(e,"ERR_NOT_FOUND")}function d(e){return e=e??new Error("Aborted"),i(e,"ERR_ABORTED")}class f{has(e,t){return Promise.reject(new Error(".has is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}async*putMany(e,t){for await(const{cid:r,block:n}of e)await this.put(r,n,t),yield r}get(e,t){return Promise.reject(new Error(".get is not implemented"))}async*getMany(e,t){for await(const r of e)yield{cid:r,block:await this.get(r,t)}}async delete(e,t){await Promise.reject(new Error(".delete is not implemented"))}async*deleteMany(e,t){for await(const r of e)await this.delete(r,t),yield r}async*getAll(e){throw new Error(".getAll is not implemented")}}var p=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*l+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};new Uint8Array(0);const g=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class m{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class y{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return w(this,e)}}class b{constructor(e){this.decoders=e}or(e){return w(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const w=(e,t)=>new b({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class v{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new m(e,t,r),this.decoder=new y(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const S=({name:e,prefix:t,encode:r,decode:n})=>new v(e,t,r,n),_=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=p(r,t);return S({prefix:e,name:t,encode:n,decode:e=>g(i(e))})},A=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>S({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),E=A({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),x=(A({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),A({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),A({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),A({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),A({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),A({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),A({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),A({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),_({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}));_({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var k=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=P;)r[n++]=255&t|T,t/=128;for(;t&I;)r[n++]=255&t|T,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},T=128,I=-128,P=Math.pow(2,31);var R=function e(t,r){var n,i=0,s=0,o=r=r||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(n&O)<<s:(n&O)*Math.pow(2,s),s+=7}while(n>=C);return e.bytes=o-r,i},C=128,O=127;var D=Math.pow(2,7),B=Math.pow(2,14),N=Math.pow(2,21),U=Math.pow(2,28),M=Math.pow(2,35),j=Math.pow(2,42),L=Math.pow(2,49),F=Math.pow(2,56),W=Math.pow(2,63),q={encode:k,decode:R,encodingLength:function(e){return e<D?1:e<B?2:e<N?3:e<U?4:e<M?5:e<j?6:e<L?7:e<F?8:e<W?9:10}};const K=(e,t=0)=>[q.decode(e,t),q.decode.bytes],V=(e,t,r=0)=>(q.encode(e,t,r),t),z=e=>q.encodingLength(e),J=e=>{const t=g(e),[r,n]=K(t),[i,s]=K(t.subarray(n)),o=t.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new H(r,i,o,t)};class H{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const $=(e,t)=>{const{bytes:r,version:n}=e;return 0===n?Q(r,Z(e),t||x.encoder):ee(r,Z(e),t||E.encoder)},G=new WeakMap,Z=e=>{const t=G.get(e);if(null==t){const t=new Map;return G.set(e,t),t}return t};class Y{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==te)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==re)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Y.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=((e,t)=>{const r=t.byteLength,n=z(e),i=n+z(r),s=new Uint8Array(i+r);return V(e,s,0),V(r,s,n),s.set(t,i),new H(e,r,t,s)})(e,t);return Y.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Y.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&((e,t)=>{if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0})(e.bytes,r.bytes)}})(e.multihash,r.multihash)}toString(e){return $(this,e)}toJSON(){return{"/":$(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof Y)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new Y(e,r,n,i||ne(e,r,n.bytes))}if(!0===t[ie]){const{version:e,multihash:r,code:n}=t,i=J(r);return Y.create(e,n,i)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==te)throw new Error(`Version 0 CID must use dag-pb (code: ${te}) block encoding`);return new Y(e,t,r,r.bytes);case 1:{const n=ne(e,t,r.bytes);return new Y(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return Y.create(0,te,e)}static createV1(e,t){return Y.create(1,e,t)}static decode(e){const[t,r]=Y.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Y.inspectBytes(e),r=t.size-t.multihashSize,n=g(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new H(t.multihashCode,t.digestSize,i,n);return[0===t.version?Y.createV0(s):Y.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=K(e.subarray(t));return t+=n,r};let n=r(),i=te;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t,o=r(),a=r(),c=t+a;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:c-s,size:c}}static parse(e,t){const[r,n]=X(e,t),i=Y.decode(n);if(0===i.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return Z(i).set(r,e),i}}const X=(e,t)=>{switch(e[0]){case"Q":{const r=t||x;return[x.prefix,r.decode(`${x.prefix}${e}`)]}case x.prefix:{const r=t||x;return[x.prefix,r.decode(e)]}case E.prefix:{const r=t||E;return[E.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Q=(e,t,r)=>{const{prefix:n}=r;if(n!==x.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i},ee=(e,t,r)=>{const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i},te=112,re=18,ne=(e,t,r)=>{const n=z(e),i=n+z(t),s=new Uint8Array(i+r.byteLength);return V(e,s,0),V(t,s,n),s.set(r,i),s},ie=Symbol.for("@ipld/js-cid/CID");class se extends f{data;constructor(){super(),this.data=new Map}put(e,t){return this.data.set(E.encode(e.multihash.bytes),t),e}get(e){const t=this.data.get(E.encode(e.multihash.bytes));if(null==t)throw h();return t}has(e){return this.data.has(E.encode(e.multihash.bytes))}async delete(e){this.data.delete(E.encode(e.multihash.bytes))}async*getAll(){for(const[e,t]of this.data.entries())yield{cid:Y.createV1(85,J(E.decode(e))),block:t}}}var oe=r(17833);const ae=A({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});A({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),A({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),A({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});oe.formatters.b=e=>null==e?"undefined":x.baseEncode(e),oe.formatters.t=e=>null==e?"undefined":E.baseEncode(e),oe.formatters.m=e=>null==e?"undefined":ae.baseEncode(e),oe.formatters.p=e=>null==e?"undefined":e.toString(),oe.formatters.c=e=>null==e?"undefined":e.toString(),oe.formatters.k=e=>null==e?"undefined":e.toString(),oe.formatters.a=e=>null==e?"undefined":e.toString();r(97101);r(97313);class ce extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}r(48651);!function(e){let t=function(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}(`${e}:trace`);oe.enabled(`${e}:trace`)&&null!=oe.names.map((e=>e.toString())).find((e=>e.includes(":trace")))&&(t=oe(`${e}:trace`)),Object.assign(oe(e),{error:oe(`${e}:error`),trace:t})}("blockstore:core:tiered");const ue={...n}},20984:function(e,t,r){"use strict";r.d(t,{n:function(){return w}});var n=r(8306),i=r(48651),s=r(30256),o=r(75946),a=r(79033),c=r(52671),u=r(1987),l=r(32763),h=r(66310),d=r(40506),f=r(66213);const p=(e,t)=>async function*(){const r=await async function(e){const t=[];for await(const r of e)t.push(r);return t}(e);yield*r.sort(t)}();class g{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:r,value:n}of e)await this.put(r,n,t),yield{key:r,value:n}}async*getMany(e,t={}){for await(const r of e)yield this.get(r,t)}async*deleteMany(e,t={}){for await(const r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:async r=>{await(0,n.A)(this.putMany(e,r)),e=[],await(0,n.A)(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(null!=e.prefix&&(r=(0,d.A)(r,(t=>t.key.toString().startsWith(e.prefix||"")))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>(0,d.A)(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>p(e,t)),r)),null!=e.offset){let t=0;r=(0,d.A)(r,(()=>t++>=(e.offset||0)))}return null!=e.limit&&(r=(0,f.A)(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(null!=e.prefix&&(r=(0,d.A)(r,(t=>t.toString().startsWith(e.prefix||"")))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>(0,d.A)(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>p(e,t)),r)),null!=e.offset){let t=0;r=(0,d.A)(r,(()=>t++>=e.offset))}return null!=e.limit&&(r=(0,f.A)(r,e.limit)),r}}function m(e){const t=o.TO.asCID(e);if(!t)throw h(new Error("Not a valid cid"),"ERR_INVALID_CID");return new s.U("/"+u.base32.encode(t.multihash.bytes).slice(1).toUpperCase(),!1)}function y(e){return o.TO.createV1(a.code,c.D4(u.base32.decode("b"+e.toString().slice(1).toLowerCase())))}function b(e){const t=e.substring(0,1);if("/"===t)return b(e.substring(1));let r,n;r="b"===t.toLowerCase()?e=>u.base32.decode(e.toLowerCase()).subarray(2):"c"===t.toLowerCase()?e=>u.base32pad.decode(e.toLowerCase()).subarray(2):"z"===t?e=>l.base58btc.decode(e).subarray(2):"Q"===t?e=>l.base58btc.decode("z"+e):e=>u.base32.decode("b"+e.toLowerCase()).subarray(2);for(let t=1;t<e.length;t++)try{n=r(e.substring(0,t))}catch(e){if("Unexpected end of data"!==e.message)throw e}let i="/C";return n&&(i=`/${u.base32.encode(n).slice(1,-1).toUpperCase()||"C"}`),i}class w extends g{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(const{key:r,value:n}of this.child.query(function(e){return{...e,prefix:e.prefix?b(e.prefix):void 0,filters:e.filters?e.filters.map((e=>t=>e({key:y(t.key),value:t.value}))):void 0,orders:e.orders?e.orders.map((e=>(t,r)=>e({key:y(t.key),value:t.value},{key:y(r.key),value:r.value}))):void 0}}(e),t))yield{key:y(r),value:n}}async*queryKeys(e,t){for await(const r of this.child.queryKeys(function(e){return{...e,prefix:e.prefix?b(e.prefix):void 0,filters:e.filters?e.filters.map((e=>t=>e(y(t)))):void 0,orders:e.orders?e.orders.map((e=>(t,r)=>e(y(t),y(r)))):void 0}}(e),t))yield y(r)}async get(e,t){return this.child.get(m(e),t)}async*getMany(e,t){for await(const r of e)yield this.get(r,t)}async put(e,t,r){await this.child.put(m(e),t,r)}async*putMany(e,t){const r=(0,i.N)({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)((async()=>{try{const i=this.child;await(0,n.A)(this.child.putMany(async function*(){for await(const n of e){const e=m(n.key);await i.has(e,t)||(yield{key:e,value:n.value}),r.push(n)}}())),r.end()}catch(e){r.end(e)}})),yield*r}has(e,t){return this.child.has(m(e),t)}delete(e,t){return this.child.delete(m(e),t)}deleteMany(e,t){const r=(0,i.N)({objectMode:!0});return(0,n.A)(this.child.deleteMany(async function*(){for await(const t of e)yield m(t),r.push(t);r.end()}(),t)).catch((e=>{r.end(e)})),r}}},93439:function(e,t,r){"use strict";r.d(t,{E:function(){return Y}});var n=r(36918),i=r(96148);var s=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*l+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};new Uint8Array(0);const o=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class a{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class c{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return l(this,e)}}class u{constructor(e){this.decoders=e}or(e){return l(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const l=(e,t)=>new u({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class h{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new a(e,t,r),this.decoder=new c(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const d=({name:e,prefix:t,encode:r,decode:n})=>new h(e,t,r,n),f=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=s(r,t);return d({prefix:e,name:t,encode:n,decode:e=>o(i(e))})},p=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>d({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),g=p({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),m=p({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),y=(p({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),p({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),p({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),p({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),p({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),p({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),p({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),f({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}));f({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var b=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=S;)r[n++]=255&t|w,t/=128;for(;t&v;)r[n++]=255&t|w,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},w=128,v=-128,S=Math.pow(2,31);var _=function e(t,r){var n,i=0,s=0,o=r=r||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(n&E)<<s:(n&E)*Math.pow(2,s),s+=7}while(n>=A);return e.bytes=o-r,i},A=128,E=127;var x=Math.pow(2,7),k=Math.pow(2,14),T=Math.pow(2,21),I=Math.pow(2,28),P=Math.pow(2,35),R=Math.pow(2,42),C=Math.pow(2,49),O=Math.pow(2,56),D=Math.pow(2,63),B={encode:b,decode:_,encodingLength:function(e){return e<x?1:e<k?2:e<T?3:e<I?4:e<P?5:e<R?6:e<C?7:e<O?8:e<D?9:10}};const N=(e,t=0)=>[B.decode(e,t),B.decode.bytes],U=(e,t,r=0)=>(B.encode(e,t,r),t),M=e=>B.encodingLength(e),j=e=>{const t=o(e),[r,n]=N(t),[i,s]=N(t.subarray(n)),a=t.subarray(n+s);if(a.byteLength!==i)throw new Error("Incorrect length");return new L(r,i,a,t)};class L{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const F=(e,t)=>{const{bytes:r,version:n}=e;return 0===n?z(r,q(e),t||y.encoder):J(r,q(e),t||g.encoder)},W=new WeakMap,q=e=>{const t=W.get(e);if(null==t){const t=new Map;return W.set(e,t),t}return t};class K{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==H)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==$)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return K.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=((e,t)=>{const r=t.byteLength,n=M(e),i=n+M(r),s=new Uint8Array(i+r);return U(e,s,0),U(r,s,n),s.set(t,i),new L(e,r,t,s)})(e,t);return K.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return K.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&((e,t)=>{if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0})(e.bytes,r.bytes)}})(e.multihash,r.multihash)}toString(e){return F(this,e)}toJSON(){return{"/":F(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof K)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new K(e,r,n,i||G(e,r,n.bytes))}if(!0===t[Z]){const{version:e,multihash:r,code:n}=t,i=j(r);return K.create(e,n,i)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==H)throw new Error(`Version 0 CID must use dag-pb (code: ${H}) block encoding`);return new K(e,t,r,r.bytes);case 1:{const n=G(e,t,r.bytes);return new K(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return K.create(0,H,e)}static createV1(e,t){return K.create(1,e,t)}static decode(e){const[t,r]=K.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=K.inspectBytes(e),r=t.size-t.multihashSize,n=o(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new L(t.multihashCode,t.digestSize,i,n);return[0===t.version?K.createV0(s):K.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=N(e.subarray(t));return t+=n,r};let n=r(),i=H;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t,o=r(),a=r(),c=t+a;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:c-s,size:c}}static parse(e,t){const[r,n]=V(e,t),i=K.decode(n);if(0===i.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return q(i).set(r,e),i}}const V=(e,t)=>{switch(e[0]){case"Q":{const r=t||y;return[y.prefix,r.decode(`${y.prefix}${e}`)]}case y.prefix:{const r=t||y;return[y.prefix,r.decode(e)]}case g.prefix:{const r=t||g;return[g.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},z=(e,t,r)=>{const{prefix:n}=r;if(n!==y.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i},J=(e,t,r)=>{const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i},H=112,$=18,G=(e,t,r)=>{const n=M(e),i=n+M(t),s=new Uint8Array(i+r.byteLength);return U(e,s,0),U(t,s,n),s.set(r,i),s},Z=Symbol.for("@ipld/js-cid/CID");class Y extends n.if{location;version;db;base;constructor(e,t={}){super(),this.location=`${t.prefix??""}${e}`,this.version=t.version??1,this.base=t.base??m}#e(e){return`/${this.base.encoder.encode(e.multihash.bytes)}`}#t(e){return K.createV1(85,j(this.base.decoder.decode(e.substring(1))))}async open(){try{const e=this.location;this.db=await(0,i.P2)(e,this.version,{upgrade(t){t.createObjectStore(e)}})}catch(e){throw n.I.openFailedError(e)}}async close(){this.db?.close()}async put(e,t){if(null==this.db)throw new Error("Blockstore needs to be opened.");try{return await this.db.put(this.location,t,this.#e(e)),e}catch(e){throw n.I.putFailedError(e)}}async get(e){if(null==this.db)throw new Error("Blockstore needs to be opened.");let t;try{t=await this.db.get(this.location,this.#e(e))}catch(e){throw n.I.putFailedError(e)}if(void 0===t)throw n.I.notFoundError();return t}async delete(e){if(null==this.db)throw new Error("Blockstore needs to be opened.");try{await this.db.delete(this.location,this.#e(e))}catch(e){throw n.I.putFailedError(e)}}async has(e){if(null==this.db)throw new Error("Blockstore needs to be opened.");try{return Boolean(await this.db.getKey(this.location,this.#e(e)))}catch(e){throw n.I.putFailedError(e)}}async*getAll(e){if(null==this.db)throw new Error("Blockstore needs to be opened.");for(const e of await this.db.getAllKeys(this.location)){const t=this.#t(e.toString()),r=await this.get(t);yield{cid:t,block:r}}}async destroy(){await(0,i.MR)(this.location)}}},65385:function(e,t,r){"use strict";async function*n(e,t={}){const r=e.getReader();try{for(;;){const e=await r.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&await r.cancel(),r.releaseLock()}}r.d(t,{A:function(){return n}})},67645:function(e,t,r){"use strict";function n(e){return e instanceof Uint8Array?{get:t=>e[t],set(t,r){e[t]=r}}:{get:t=>e.get(t),set(t,r){e.set(t,r)}}}r.d(t,{A:function(){return n}})},16668:function(e,t,r){"use strict";r.d(t,{D4:function(){return i.D4},ZU:function(){return s.Z},lF:function(){return n.lF},ou:function(){return s.o}});var n=r(64073),i=r(4867),s=r(48636)},59709:function(e,t,r){"use strict";r.d(t,{CV:function(){return a},Gr:function(){return d},H2:function(){return p},Km:function(){return h},VF:function(){return u},Wg:function(){return c},Xb:function(){return f},gv:function(){return g},nI:function(){return s},tA:function(){return l},xh:function(){return o}});var n=r(48636),i=r(5528);const s=[24,256,65536,4294967296,BigInt("18446744073709551616")];function o(e,t,r){(0,i.pZ)(e,t,1);const n=e[t];if(!0===r.strict&&n<s[0])throw new Error(`${i.WR} integer encoded in more bytes than necessary (strict decode)`);return n}function a(e,t,r){(0,i.pZ)(e,t,2);const n=e[t]<<8|e[t+1];if(!0===r.strict&&n<s[1])throw new Error(`${i.WR} integer encoded in more bytes than necessary (strict decode)`);return n}function c(e,t,r){(0,i.pZ)(e,t,4);const n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===r.strict&&n<s[2])throw new Error(`${i.WR} integer encoded in more bytes than necessary (strict decode)`);return n}function u(e,t,r){(0,i.pZ)(e,t,8);const n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],a=(BigInt(n)<<BigInt(32))+BigInt(o);if(!0===r.strict&&a<s[3])throw new Error(`${i.WR} integer encoded in more bytes than necessary (strict decode)`);if(a<=Number.MAX_SAFE_INTEGER)return Number(a);if(!0===r.allowBigInt)return a;throw new Error(`${i.WR} integers outside of the safe integer range are not supported`)}function l(e,t,r,i){return new n.o(n.Z.uint,o(e,t+1,i),2)}function h(e,t,r,i){return new n.o(n.Z.uint,a(e,t+1,i),3)}function d(e,t,r,i){return new n.o(n.Z.uint,c(e,t+1,i),5)}function f(e,t,r,i){return new n.o(n.Z.uint,u(e,t+1,i),9)}function p(e,t){return g(e,0,t.value)}function g(e,t,r){if(r<s[0]){const n=Number(r);e.push([t|n])}else if(r<s[1]){const n=Number(r);e.push([24|t,n])}else if(r<s[2]){const n=Number(r);e.push([25|t,n>>>8,255&n])}else if(r<s[3]){const n=Number(r);e.push([26|t,n>>>24&255,n>>>16&255,n>>>8&255,255&n])}else{const n=BigInt(r);if(!(n<s[4]))throw new Error(`${i.WR} encountered BigInt larger than allowable range`);{const r=[27|t,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));r[8]=255&i,i>>=8,r[7]=255&i,i>>=8,r[6]=255&i,i>>=8,r[5]=255&i,r[4]=255&s,s>>=8,r[3]=255&s,s>>=8,r[2]=255&s,s>>=8,r[1]=255&s,e.push(r)}}}p.encodedSize=function(e){return g.encodedSize(e.value)},g.encodedSize=function(e){return e<s[0]?1:e<s[1]?2:e<s[2]?3:e<s[3]?5:9},p.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}},41833:function(e,t,r){"use strict";r.d(t,{Z:function(){return c},gW:function(){return h},tF:function(){return a},ug:function(){return d},wJ:function(){return o}});var n=r(48636),i=r(59709),s=r(5528);function o(e,t,r,s){return new n.o(n.Z.negint,-1-i.xh(e,t+1,s),2)}function a(e,t,r,s){return new n.o(n.Z.negint,-1-i.CV(e,t+1,s),3)}function c(e,t,r,s){return new n.o(n.Z.negint,-1-i.Wg(e,t+1,s),5)}const u=BigInt(-1),l=BigInt(1);function h(e,t,r,o){const a=i.VF(e,t+1,o);if("bigint"!=typeof a){const e=-1-a;if(e>=Number.MIN_SAFE_INTEGER)return new n.o(n.Z.negint,e,9)}if(!0!==o.allowBigInt)throw new Error(`${s.WR} integers outside of the safe integer range are not supported`);return new n.o(n.Z.negint,u-BigInt(a),9)}function d(e,t){const r=t.value,n="bigint"==typeof r?r*u-l:-1*r-1;i.gv(e,t.type.majorEncoded,n)}d.encodedSize=function(e){const t=e.value,r="bigint"==typeof t?t*u-l:-1*t-1;return r<i.nI[0]?1:r<i.nI[1]?2:r<i.nI[2]?3:r<i.nI[3]?5:9},d.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0}},38464:function(e,t,r){"use strict";r.d(t,{Cz:function(){return u},Hy:function(){return h},LC:function(){return c},MW:function(){return p},N8:function(){return l},cT:function(){return d}});var n=r(48636),i=r(5528),s=r(59709),o=r(49607);function a(e,t,r,s){(0,i.pZ)(e,t,r+s);const a=(0,o.di)(e,t+r,t+r+s);return new n.o(n.Z.bytes,a,r+s)}function c(e,t,r,n){return a(e,t,1,r)}function u(e,t,r,n){return a(e,t,2,s.xh(e,t+1,n))}function l(e,t,r,n){return a(e,t,3,s.CV(e,t+1,n))}function h(e,t,r,n){return a(e,t,5,s.Wg(e,t+1,n))}function d(e,t,r,n){const o=s.VF(e,t+1,n);if("bigint"==typeof o)throw new Error(`${i.WR} 64-bit integer bytes lengths not supported`);return a(e,t,9,o)}function f(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===n.Z.string?(0,o.sH)(e.value):e.value),e.encodedBytes}function p(e,t){const r=f(t);s.gv(e,t.type.majorEncoded,r.length),e.push(r)}p.encodedSize=function(e){const t=f(e);return s.gv.encodedSize(t.length)+t.length},p.compareTokens=function(e,t){return r=f(e),n=f(t),r.length<n.length?-1:r.length>n.length?1:(0,o.UD)(r,n);var r,n}},84897:function(e,t,r){"use strict";r.d(t,{$A:function(){return d},Hc:function(){return u},Rw:function(){return h},aj:function(){return p},gh:function(){return f},s4:function(){return l}});var n=r(48636),i=r(5528),s=r(59709),o=r(38464),a=r(49607);function c(e,t,r,s,o){const c=r+s;(0,i.pZ)(e,t,c);const u=new n.o(n.Z.string,(0,a.dI)(e,t+r,t+c),c);return!0===o.retainStringBytes&&(u.byteValue=(0,a.di)(e,t+r,t+c)),u}function u(e,t,r,n){return c(e,t,1,r,n)}function l(e,t,r,n){return c(e,t,2,s.xh(e,t+1,n),n)}function h(e,t,r,n){return c(e,t,3,s.CV(e,t+1,n),n)}function d(e,t,r,n){return c(e,t,5,s.Wg(e,t+1,n),n)}function f(e,t,r,n){const o=s.VF(e,t+1,n);if("bigint"==typeof o)throw new Error(`${i.WR} 64-bit integer string lengths not supported`);return c(e,t,9,o,n)}const p=o.MW},2976:function(e,t,r){"use strict";r.d(t,{NL:function(){return d},RD:function(){return u},_i:function(){return c},fd:function(){return l},go:function(){return h},tW:function(){return a},u8:function(){return f}});var n=r(48636),i=r(59709),s=r(5528);function o(e,t,r,i){return new n.o(n.Z.array,i,r)}function a(e,t,r,n){return o(0,0,1,r)}function c(e,t,r,n){return o(0,0,2,i.xh(e,t+1,n))}function u(e,t,r,n){return o(0,0,3,i.CV(e,t+1,n))}function l(e,t,r,n){return o(0,0,5,i.Wg(e,t+1,n))}function h(e,t,r,n){const a=i.VF(e,t+1,n);if("bigint"==typeof a)throw new Error(`${s.WR} 64-bit integer array lengths not supported`);return o(0,0,9,a)}function d(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${s.WR} indefinite length items not allowed`);return o(0,0,1,1/0)}function f(e,t){i.gv(e,n.Z.array.majorEncoded,t.value)}f.compareTokens=i.H2.compareTokens,f.encodedSize=function(e){return i.gv.encodedSize(e.value)}},67818:function(e,t,r){"use strict";r.d(t,{CV:function(){return l},LO:function(){return f},Ws:function(){return u},dk:function(){return c},hi:function(){return h},m_:function(){return d},sP:function(){return a}});var n=r(48636),i=r(59709),s=r(5528);function o(e,t,r,i){return new n.o(n.Z.map,i,r)}function a(e,t,r,n){return o(0,0,1,r)}function c(e,t,r,n){return o(0,0,2,i.xh(e,t+1,n))}function u(e,t,r,n){return o(0,0,3,i.CV(e,t+1,n))}function l(e,t,r,n){return o(0,0,5,i.Wg(e,t+1,n))}function h(e,t,r,n){const a=i.VF(e,t+1,n);if("bigint"==typeof a)throw new Error(`${s.WR} 64-bit integer map lengths not supported`);return o(0,0,9,a)}function d(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${s.WR} indefinite length items not allowed`);return o(0,0,1,1/0)}function f(e,t){i.gv(e,n.Z.map.majorEncoded,t.value)}f.compareTokens=i.H2.compareTokens,f.encodedSize=function(e){return i.gv.encodedSize(e.value)}},26419:function(e,t,r){"use strict";r.d(t,{RV:function(){return u},U6:function(){return a},UE:function(){return s},Yv:function(){return c},hL:function(){return o},jD:function(){return l}});var n=r(48636),i=r(59709);function s(e,t,r,i){return new n.o(n.Z.tag,r,1)}function o(e,t,r,s){return new n.o(n.Z.tag,i.xh(e,t+1,s),2)}function a(e,t,r,s){return new n.o(n.Z.tag,i.CV(e,t+1,s),3)}function c(e,t,r,s){return new n.o(n.Z.tag,i.Wg(e,t+1,s),5)}function u(e,t,r,s){return new n.o(n.Z.tag,i.VF(e,t+1,s),9)}function l(e,t){i.gv(e,n.Z.tag.majorEncoded,t.value)}l.compareTokens=i.H2.compareTokens,l.encodedSize=function(e){return i.gv.encodedSize(e.value)}},48280:function(e,t,r){"use strict";r.d(t,{IC:function(){return p},VQ:function(){return g},jD:function(){return l},lD:function(){return m},qz:function(){return h},y:function(){return f}});var n=r(48636),i=r(5528),s=r(59709);const o=20,a=21,c=22,u=23;function l(e,t,r,s){if(!1===s.allowUndefined)throw new Error(`${i.WR} undefined values are not supported`);return!0===s.coerceUndefinedToNull?new n.o(n.Z.null,null,1):new n.o(n.Z.undefined,void 0,1)}function h(e,t,r,s){if(!1===s.allowIndefinite)throw new Error(`${i.WR} indefinite length items not allowed`);return new n.o(n.Z.break,void 0,1)}function d(e,t,r){if(r){if(!1===r.allowNaN&&Number.isNaN(e))throw new Error(`${i.WR} NaN values are not supported`);if(!1===r.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${i.WR} Infinity values are not supported`)}return new n.o(n.Z.float,e,t)}function f(e,t,r,n){return d(S(e,t+1),3,n)}function p(e,t,r,n){return d(A(e,t+1),5,n)}function g(e,t,r,n){return d(E(e,t+1),9,n)}function m(e,t,r){const i=t.value;if(!1===i)e.push([n.Z.float.majorEncoded|o]);else if(!0===i)e.push([n.Z.float.majorEncoded|a]);else if(null===i)e.push([n.Z.float.majorEncoded|c]);else if(void 0===i)e.push([n.Z.float.majorEncoded|u]);else{let t,n=!1;r&&!0===r.float64||(v(i),t=S(w,1),i===t||Number.isNaN(i)?(w[0]=249,e.push(w.slice(0,3)),n=!0):(_(i),t=A(w,1),i===t&&(w[0]=250,e.push(w.slice(0,5)),n=!0))),n||(s=i,b.setFloat64(0,s,!1),t=E(w,1),w[0]=251,e.push(w.slice(0,9)))}var s}m.encodedSize=function(e,t){const r=e.value;if(!1===r||!0===r||null==r)return 1;if(!t||!0!==t.float64){v(r);let e=S(w,1);if(r===e||Number.isNaN(r))return 3;if(_(r),e=A(w,1),r===e)return 5}return 9};const y=new ArrayBuffer(9),b=new DataView(y,1),w=new Uint8Array(y,0);function v(e){if(e===1/0)b.setUint16(0,31744,!1);else if(e===-1/0)b.setUint16(0,64512,!1);else if(Number.isNaN(e))b.setUint16(0,32256,!1);else{b.setFloat32(0,e);const t=b.getUint32(0),r=(2139095040&t)>>23,n=8388607&t;if(255===r)b.setUint16(0,31744,!1);else if(0===r)b.setUint16(0,(2147483648&e)>>16|n>>13,!1);else{const e=r-127;e<-24?b.setUint16(0,0):e<-14?b.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):b.setUint16(0,(2147483648&t)>>16|e+15<<10|n>>13,!1)}}}function S(e,t){if(e.length-t<2)throw new Error(`${i.WR} not enough data for float16`);const r=(e[t]<<8)+e[t+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;const n=r>>10&31,s=1023&r;let o;return o=0===n?s*2**-24:31!==n?(s+1024)*2**(n-25):0===s?1/0:NaN,32768&r?-o:o}function _(e){b.setFloat32(0,e,!1)}function A(e,t){if(e.length-t<4)throw new Error(`${i.WR} not enough data for float32`);const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function E(e,t){if(e.length-t<8)throw new Error(`${i.WR} not enough data for float64`);const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}m.compareTokens=s.H2.compareTokens},49607:function(e,t,r){"use strict";r.d(t,{H8:function(){return a},UD:function(){return p},c4:function(){return f},ci:function(){return l},dI:function(){return c},di:function(){return h},sH:function(){return u},xW:function(){return d},y9:function(){return b}});const n=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,i=new TextDecoder,s=new TextEncoder;function o(e){return n&&globalThis.Buffer.isBuffer(e)}function a(e){return e instanceof Uint8Array?o(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const c=n?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):m(e,t,r):(e,t,r)=>r-t>64?i.decode(e.subarray(t,r)):m(e,t,r),u=n?e=>e.length>64?globalThis.Buffer.from(e):g(e):e=>e.length>64?s.encode(e):g(e),l=e=>Uint8Array.from(e),h=n?(e,t,r)=>o(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),d=n?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),a(globalThis.Buffer.concat(e,t))):(e,t)=>{const r=new Uint8Array(t);let n=0;for(let t of e)n+t.length>r.length&&(t=t.subarray(0,r.length-n)),r.set(t,n),n+=t.length;return r},f=n?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function p(e,t){if(o(e)&&o(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function g(e,t=1/0){let r;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function m(e,t,r){const n=[];for(;t<r;){const i=e[t];let s=null,o=i>239?4:i>223?3:i>191?2:1;if(t+o<=r){let r,n,a,c;switch(o){case 1:i<128&&(s=i);break;case 2:r=e[t+1],128==(192&r)&&(c=(31&i)<<6|63&r,c>127&&(s=c));break;case 3:r=e[t+1],n=e[t+2],128==(192&r)&&128==(192&n)&&(c=(15&i)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=e[t+1],n=e[t+2],a=e[t+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&i)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),t+=o}return b(n)}const y=4096;function b(e){const t=e.length;if(t<=y)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=y));return r}},5528:function(e,t,r){"use strict";r.d(t,{WR:function(){return n},pZ:function(){return o},uz:function(){return i}});const n="CBOR decode error:",i="CBOR encode error:",s=[];function o(e,t,r){if(e.length-t<r)throw new Error(`${n} not enough data for type`)}s[23]=1,s[24]=2,s[25]=3,s[26]=5,s[27]=9},4867:function(e,t,r){"use strict";r.d(t,{D4:function(){return h}});var n=r(5528),i=r(48636),s=r(80173);const o={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class a{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let t=s.wL[e];if(void 0===t){const r=s.lA[e];if(!r)throw new Error(`${n.WR} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const i=31&e;t=r(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}}const c=Symbol.for("DONE"),u=Symbol.for("BREAK");function l(e,t){if(e.done())return c;const r=e.next();if(r.type===i.Z.break)return u;if(r.type.terminal)return r.value;if(r.type===i.Z.array)return function(e,t,r){const i=[];for(let s=0;s<e.value;s++){const o=l(t,r);if(o===u){if(e.value===1/0)break;throw new Error(`${n.WR} got unexpected break to lengthed array`)}if(o===c)throw new Error(`${n.WR} found array but not enough entries (got ${s}, expected ${e.value})`);i[s]=o}return i}(r,e,t);if(r.type===i.Z.map)return function(e,t,r){const i=!0===r.useMaps,s=i?void 0:{},o=i?new Map:void 0;for(let a=0;a<e.value;a++){const h=l(t,r);if(h===u){if(e.value===1/0)break;throw new Error(`${n.WR} got unexpected break to lengthed map`)}if(h===c)throw new Error(`${n.WR} found map but not enough entries (got ${a} [no key], expected ${e.value})`);if(!0!==i&&"string"!=typeof h)throw new Error(`${n.WR} non-string keys not supported (got ${typeof h})`);if(!0===r.rejectDuplicateMapKeys&&(i&&o.has(h)||!i&&h in s))throw new Error(`${n.WR} found repeat map key "${h}"`);const d=l(t,r);if(d===c)throw new Error(`${n.WR} found map but not enough entries (got ${a} [no value], expected ${e.value})`);i?o.set(h,d):s[h]=d}return i?o:s}(r,e,t);if(r.type===i.Z.tag){if(t.tags&&"function"==typeof t.tags[r.value]){const n=l(e,t);return t.tags[r.value](n)}throw new Error(`${n.WR} tag not supported (${r.value})`)}throw new Error("unsupported")}function h(e,t){if(!(e instanceof Uint8Array))throw new Error(`${n.WR} data to decode must be a Uint8Array`);const r=(t=Object.assign({},o,t)).tokenizer||new a(e,t),i=l(r,t);if(i===c)throw new Error(`${n.WR} did not find any content to decode`);if(i===u)throw new Error(`${n.WR} got unexpected break`);if(!r.done())throw new Error(`${n.WR} too many terminals, data makes no sense`);return i}},64073:function(e,t,r){"use strict";r.d(t,{lF:function(){return P},mW:function(){return I}});const n=["string","number","bigint","symbol"],i=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function s(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(n.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";const r=function(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(i.includes(t))return t;return}(e);return r||"Object"}var o=r(48636),a=r(49607);class c{constructor(e=256){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=(0,a.c4)(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){const r=this.chunks[0];e&&this.cursor>r.length/2?(t=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=(0,a.di)(r,0,this.cursor)}else t=(0,a.xW)(this.chunks,this.cursor);return e&&this.reset(),t}}var u=r(5528),l=r(80173),h=r(59709),d=r(41833),f=r(38464),p=r(84897),g=r(2976),m=r(67818),y=r(26419),b=r(48280),w=r(96763);const v={float64:!1,mapSorter:function(e,t){const r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);const i=r.type.major,s=S[i].compareTokens(r,n);0===s&&w.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone");return s},quickEncodeToken:l.Nx};const S=function(){const e=[];return e[o.Z.uint.major]=h.H2,e[o.Z.negint.major]=d.ug,e[o.Z.bytes.major]=f.MW,e[o.Z.string.major]=p.aj,e[o.Z.array.major]=g.u8,e[o.Z.map.major]=m.LO,e[o.Z.tag.major]=y.jD,e[o.Z.float.major]=b.lD,e}(),_=new c;class A{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${u.uz} object contains circular references`);return new A(t,e)}}const E={null:new o.o(o.Z.null,null),undefined:new o.o(o.Z.undefined,void 0),true:new o.o(o.Z.true,!0),false:new o.o(o.Z.false,!1),emptyArray:new o.o(o.Z.array,0),emptyMap:new o.o(o.Z.map,0)},x={number:(e,t,r,n)=>Number.isInteger(e)&&Number.isSafeInteger(e)?e>=0?new o.o(o.Z.uint,e):new o.o(o.Z.negint,e):new o.o(o.Z.float,e),bigint:(e,t,r,n)=>e>=BigInt(0)?new o.o(o.Z.uint,e):new o.o(o.Z.negint,e),Uint8Array:(e,t,r,n)=>new o.o(o.Z.bytes,e),string:(e,t,r,n)=>new o.o(o.Z.string,e),boolean:(e,t,r,n)=>e?E.true:E.false,null:(e,t,r,n)=>E.null,undefined:(e,t,r,n)=>E.undefined,ArrayBuffer:(e,t,r,n)=>new o.o(o.Z.bytes,new Uint8Array(e)),DataView:(e,t,r,n)=>new o.o(o.Z.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,r,n){if(!e.length)return!0===r.addBreakTokens?[E.emptyArray,new o.o(o.Z.break)]:E.emptyArray;n=A.createCheck(n,e);const i=[];let s=0;for(const t of e)i[s++]=k(t,r,n);return r.addBreakTokens?[new o.o(o.Z.array,e.length),i,new o.o(o.Z.break)]:[new o.o(o.Z.array,e.length),i]},Object(e,t,r,n){const i="Object"!==t,s=i?e.keys():Object.keys(e),a=i?e.size:s.length;if(!a)return!0===r.addBreakTokens?[E.emptyMap,new o.o(o.Z.break)]:E.emptyMap;n=A.createCheck(n,e);const c=[];let u=0;for(const t of s)c[u++]=[k(t,r,n),k(i?e.get(t):e[t],r,n)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(c,r),r.addBreakTokens?[new o.o(o.Z.map,a),c,new o.o(o.Z.break)]:[new o.o(o.Z.map,a),c]}};x.Map=x.Object,x.Buffer=x.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))x[`${e}Array`]=x.DataView;function k(e,t={},r){const n=s(e),i=t&&t.typeEncoders&&t.typeEncoders[n]||x[n];if("function"==typeof i){const s=i(e,n,t,r);if(null!=s)return s}const o=x[n];if(!o)throw new Error(`${u.uz} unsupported type: ${n}`);return o(e,n,t,r)}function T(e,t,r,n){if(Array.isArray(t))for(const i of t)T(e,i,r,n);else r[t.type.major](e,t,n)}function I(e,t,r){const n=k(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){const e=r.quickEncodeToken(n);if(e)return e;const i=t[n.type.major];if(i.encodedSize){const e=i.encodedSize(n,r),t=new c(e);if(i(t,n,r),1!==t.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return(0,a.H8)(t.chunks[0])}}return _.reset(),T(_,n,t,r),_.toBytes(!0)}function P(e,t){return t=Object.assign({},v,t),I(e,S,t)}},70263:function(e,t,r){"use strict";r.d(t,{_F:function(){return h},D4:function(){return d},lF:function(){return u}});var n=r(48636),i=r(64073),s=r(5528),o=r(49607);class a extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===n.Z.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===n.Z.map&&(t.elements++,1!==t.elements&&(t.elements%2==1?e.push([44]):e.push([58]))))}[n.Z.uint.major](e,t){this.prefix(e);const r=String(t.value),n=[];for(let e=0;e<r.length;e++)n[e]=r.charCodeAt(e);e.push(n)}[n.Z.negint.major](e,t){this[n.Z.uint.major](e,t)}[n.Z.bytes.major](e,t){throw new Error(`${s.uz} unsupported type: Uint8Array`)}[n.Z.string.major](e,t){this.prefix(e);const r=(0,o.sH)(JSON.stringify(t.value));e.push(r.length>32?(0,o.H8)(r):r)}[n.Z.array.major](e,t){this.prefix(e),this.inRecursive.push({type:n.Z.array,elements:0}),e.push([91])}[n.Z.map.major](e,t){this.prefix(e),this.inRecursive.push({type:n.Z.map,elements:0}),e.push([123])}[n.Z.tag.major](e,t){}[n.Z.float.major](e,t){if("break"===t.type.name){const t=this.inRecursive.pop();if(t){if(t.type===n.Z.array)e.push([93]);else{if(t.type!==n.Z.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error(`${s.uz} unsupported type: undefined`);if(this.prefix(e),"true"===t.type.name)return void e.push([116,114,117,101]);if("false"===t.type.name)return void e.push([102,97,108,115,101]);if("null"===t.type.name)return void e.push([110,117,108,108]);const r=String(t.value),i=[];let o=!1;for(let e=0;e<r.length;e++)i[e]=r.charCodeAt(e),o||46!==i[e]&&101!==i[e]&&69!==i[e]||(o=!0);o||(i.push(46),i.push(48)),e.push(i)}}const c={addBreakTokens:!0,mapSorter:function(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${s.uz} complex map keys are not supported`);const r=e[0],i=t[0];if(r.type!==n.Z.string||i.type!==n.Z.string)throw new Error(`${s.uz} non-string map keys are not supported`);if(r<i)return-1;if(r>i)return 1;throw new Error(`${s.uz} unexpected duplicate map keys, this is not supported`)}};function u(e,t){return t=Object.assign({},c,t),(0,i.mW)(e,new a,t)}var l=r(4867);class h{constructor(e,t={}){this.pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;32===e||9===e||13===e||10===e;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${s.WR} unexpected end of input at position ${this.pos}`);for(let t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error(`${s.WR} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this.pos;let t=!1,r=!1;const i=e=>{for(;!this.done();){const t=this.ch();if(!e.includes(t))break;this.pos++}};if(45===this.ch()&&(t=!0,this.pos++),48===this.ch()){if(this.pos++,46!==this.ch())return new n.o(n.Z.uint,0,this.pos-e);this.pos++,r=!0}if(i([48,49,50,51,52,53,54,55,56,57]),t&&this.pos===e+1)throw new Error(`${s.WR} unexpected token at position ${this.pos}`);if(!this.done()&&46===this.ch()){if(r)throw new Error(`${s.WR} unexpected token at position ${this.pos}`);r=!0,this.pos++,i([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(r=!0,this.pos++,this.done()||43!==this.ch()&&45!==this.ch()||this.pos++,i([48,49,50,51,52,53,54,55,56,57]));const o=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),a=parseFloat(o);return r?new n.o(n.Z.float,a,this.pos-e):!0!==this.options.allowBigInt||Number.isSafeInteger(a)?new n.o(a>=0?n.Z.uint:n.Z.negint,a,this.pos-e):new n.o(a>=0?n.Z.uint:n.Z.negint,BigInt(o),this.pos-e)}parseString(){if(34!==this.ch())throw new Error(`${s.WR} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let e=this.pos,t=0;e<this.data.length&&t<65536;e++,t++){const r=this.data[e];if(92===r||r<32||r>=128)break;if(34===r){const r=String.fromCharCode.apply(null,this.data.subarray(this.pos,e));return this.pos=e+1,new n.o(n.Z.string,r,t)}}const e=this.pos,t=[],r=()=>{if(this.pos+4>=this.data.length)throw new Error(`${s.WR} unexpected end of unicode escape sequence at position ${this.pos}`);let e=0;for(let t=0;t<4;t++){let t=this.ch();if(t>=48&&t<=57)t-=48;else if(t>=97&&t<=102)t=t-97+10;else{if(!(t>=65&&t<=70))throw new Error(`${s.WR} unexpected unicode escape character at position ${this.pos}`);t=t-65+10}e=16*e+t,this.pos++}return e},i=()=>{const e=this.ch();let r,n,i,o,a=null,c=e>239?4:e>223?3:e>191?2:1;if(this.pos+c>this.data.length)throw new Error(`${s.WR} unexpected unicode sequence at position ${this.pos}`);switch(c){case 1:e<128&&(a=e);break;case 2:r=this.data[this.pos+1],128==(192&r)&&(o=(31&e)<<6|63&r,o>127&&(a=o));break;case 3:r=this.data[this.pos+1],n=this.data[this.pos+2],128==(192&r)&&128==(192&n)&&(o=(15&e)<<12|(63&r)<<6|63&n,o>2047&&(o<55296||o>57343)&&(a=o));break;case 4:r=this.data[this.pos+1],n=this.data[this.pos+2],i=this.data[this.pos+3],128==(192&r)&&128==(192&n)&&128==(192&i)&&(o=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&i,o>65535&&o<1114112&&(a=o))}null===a?(a=65533,c=1):a>65535&&(a-=65536,t.push(a>>>10&1023|55296),a=56320|1023&a),t.push(a),this.pos+=c};for(;!this.done();){const a=this.ch();let c;switch(a){case 92:if(this.pos++,this.done())throw new Error(`${s.WR} unexpected string termination at position ${this.pos}`);switch(c=this.ch(),this.pos++,c){case 34:case 39:case 92:case 47:t.push(c);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(r());break;default:throw new Error(`${s.WR} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new n.o(n.Z.string,(0,o.y9)(t),this.pos-e);default:if(a<32)throw new Error(`${s.WR} invalid control character at position ${this.pos}`);a<128?(t.push(a),this.pos++):i()}}throw new Error(`${s.WR} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new n.o(n.Z.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new n.o(n.Z.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new n.o(n.Z.null,null,4);case 102:return this.expect([102,97,108,115,101]),new n.o(n.Z.false,!1,5);case 116:return this.expect([116,114,117,101]),new n.o(n.Z.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${s.WR} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new n.o(n.Z.break,void 0,1);if(44!==this.ch())throw new Error(`${s.WR} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this.pos++,this.skipWhitespace(),new n.o(n.Z.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new n.o(n.Z.break,void 0,1);if(44!==this.ch())throw new Error(`${s.WR} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this.pos++,this.skipWhitespace(),new n.o(n.Z.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error(`${s.WR} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${s.WR} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function d(e,t){return t=Object.assign({tokenizer:new h(e,t)},t),(0,l.D4)(e,t)}},80173:function(e,t,r){"use strict";r.d(t,{Nx:function(){return b},lA:function(){return m},wL:function(){return y}});var n=r(48636),i=r(59709),s=r(41833),o=r(38464),a=r(84897),c=r(2976),u=r(67818),l=r(26419),h=r(48280),d=r(5528),f=r(49607);function p(e,t,r){throw new Error(`${d.WR} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function g(e){return()=>{throw new Error(`${d.WR} ${e}`)}}const m=[];for(let e=0;e<=23;e++)m[e]=p;m[24]=i.tA,m[25]=i.Km,m[26]=i.Gr,m[27]=i.Xb,m[28]=p,m[29]=p,m[30]=p,m[31]=p;for(let e=32;e<=55;e++)m[e]=p;m[56]=s.wJ,m[57]=s.tF,m[58]=s.Z,m[59]=s.gW,m[60]=p,m[61]=p,m[62]=p,m[63]=p;for(let e=64;e<=87;e++)m[e]=o.LC;m[88]=o.Cz,m[89]=o.N8,m[90]=o.Hy,m[91]=o.cT,m[92]=p,m[93]=p,m[94]=p,m[95]=g("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)m[e]=a.Hc;m[120]=a.s4,m[121]=a.Rw,m[122]=a.$A,m[123]=a.gh,m[124]=p,m[125]=p,m[126]=p,m[127]=g("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)m[e]=c.tW;m[152]=c._i,m[153]=c.RD,m[154]=c.fd,m[155]=c.go,m[156]=p,m[157]=p,m[158]=p,m[159]=c.NL;for(let e=160;e<=183;e++)m[e]=u.sP;m[184]=u.dk,m[185]=u.Ws,m[186]=u.CV,m[187]=u.hi,m[188]=p,m[189]=p,m[190]=p,m[191]=u.m_;for(let e=192;e<=215;e++)m[e]=l.UE;m[216]=l.hL,m[217]=l.U6,m[218]=l.Yv,m[219]=l.RV,m[220]=p,m[221]=p,m[222]=p,m[223]=p;for(let e=224;e<=243;e++)m[e]=g("simple values are not supported");m[244]=p,m[245]=p,m[246]=p,m[247]=h.jD,m[248]=g("simple values are not supported"),m[249]=h.y,m[250]=h.IC,m[251]=h.VQ,m[252]=p,m[253]=p,m[254]=p,m[255]=h.qz;const y=[];for(let e=0;e<24;e++)y[e]=new n.o(n.Z.uint,e,1);for(let e=-1;e>=-24;e--)y[31-e]=new n.o(n.Z.negint,e,1);function b(e){switch(e.type){case n.Z.false:return(0,f.ci)([244]);case n.Z.true:return(0,f.ci)([245]);case n.Z.null:return(0,f.ci)([246]);case n.Z.bytes:return e.value.length?void 0:(0,f.ci)([64]);case n.Z.string:return""===e.value?(0,f.ci)([96]):void 0;case n.Z.array:return 0===e.value?(0,f.ci)([128]):void 0;case n.Z.map:return 0===e.value?(0,f.ci)([160]):void 0;case n.Z.uint:return e.value<24?(0,f.ci)([Number(e.value)]):void 0;case n.Z.negint:if(e.value>=-24)return(0,f.ci)([31-Number(e.value)])}}y[64]=new n.o(n.Z.bytes,new Uint8Array(0),1),y[96]=new n.o(n.Z.string,"",1),y[128]=new n.o(n.Z.array,0,1),y[160]=new n.o(n.Z.map,0,1),y[244]=new n.o(n.Z.false,!1,1),y[245]=new n.o(n.Z.true,!0,1),y[246]=new n.o(n.Z.null,null,1)},48636:function(e,t,r){"use strict";r.d(t,{Z:function(){return n},o:function(){return i}});class n{constructor(e,t,r){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}n.uint=new n(0,"uint",!0),n.negint=new n(1,"negint",!0),n.bytes=new n(2,"bytes",!0),n.string=new n(3,"string",!0),n.array=new n(4,"array",!1),n.map=new n(5,"map",!1),n.tag=new n(6,"tag",!1),n.float=new n(7,"float",!0),n.false=new n(7,"false",!0),n.true=new n(7,"true",!0),n.null=new n(7,"null",!0),n.undefined=new n(7,"undefined",!0),n.break=new n(7,"break",!0);class i{constructor(e,t,r){this.type=e,this.value=t,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}},43259:function(e,t,r){"use strict";r.r(t),r.d(t,{code:function(){return f},decode:function(){return b},encode:function(){return y},name:function(){return d},toGeneral:function(){return m}});var n=r(34664);function i(e){return n.base64url.encode(e).slice(1)}function s(e){return n.base64url.decode(`u${e}`)}var o=r(75946);function a(e){const t={signature:s(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=s(e.protected)),t}function c(e){const t={signature:i(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=i(e.protected)),t}function u(e){const t={};return e.encrypted_key&&(t.encrypted_key=s(e.encrypted_key)),e.header&&(t.header=e.header),t}function l(e){const t={};return e.encrypted_key&&(t.encrypted_key=i(e.encrypted_key)),e.header&&(t.header=e.header),t}var h=r(74868);const d="dag-jose",f=133;function p(e){return"payload"in e&&"string"==typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function g(e){return"ciphertext"in e&&"string"==typeof e.ciphertext&&"iv"in e&&"string"==typeof e.iv&&"protected"in e&&"string"==typeof e.protected&&"tag"in e&&"string"==typeof e.tag}function m(e){if("string"==typeof e){const t=e.split(".");if(3===t.length)return function(e){const[t,r,n]=e;return{payload:r,signatures:[{protected:t,signature:n}],link:o.TO.decode(s(r))}}(t);if(5===t.length)return function(e){const[t,r,n,i,s]=e,o={ciphertext:i,iv:n,protected:t,tag:s};return r&&(o.recipients=[{encrypted_key:r}]),o}(t);throw new Error("Not a valid JOSE string")}if(p(e)||g(e))return e;throw new Error("Not a valid unencoded JOSE object")}function y(e){let t;if("string"==typeof e&&(e=m(e)),p(e))t=function(e){const t=s(e.payload);try{o.TO.decode(t)}catch(e){throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(a)}}(e);else{if(!g(e))throw new Error("Not a valid JOSE object");t=function(e){const t={ciphertext:s(e.ciphertext),protected:s(e.protected),iv:s(e.iv),tag:s(e.tag)};return e.aad&&(t.aad=s(e.aad)),e.recipients&&(t.recipients=e.recipients.map(u)),e.unprotected&&(t.unprotected=e.unprotected),t}(e)}return new Uint8Array(h.encode(t))}function b(e){let t;try{t=h.decode(e)}catch(e){throw new Error("Not a valid DAG-JOSE object")}if("payload"in(r=t)&&r.payload instanceof Uint8Array&&"signatures"in r&&Array.isArray(r.signatures))return function(e){const t={payload:i(e.payload),signatures:e.signatures.map(c)};return t.link=o.TO.decode(new Uint8Array(e.payload)),t}(t);if(function(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}(t))return function(e){const t={ciphertext:i(e.ciphertext),protected:i(e.protected),iv:i(e.iv),tag:i(e.tag)};return e.aad&&(t.aad=i(e.aad)),e.recipients&&(t.recipients=e.recipients.map(l)),e.unprotected&&(t.unprotected=e.unprotected),t}(t);throw new Error("Not a valid DAG-JOSE object");var r}},88080:function(e,t,r){"use strict";r.d(t,{f:function(){return a}});var n=r(61563),i=r(96825),s=r(87583),o=r(526);class a{put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:r,value:n}of e)await this.put(r,n,t),yield r}async*getMany(e,t={}){for await(const r of e)yield{key:r,value:await this.get(r,t)}}async*deleteMany(e,t={}){for await(const r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:async r=>{await(0,n.A)(this.putMany(e,r)),e=[],await(0,n.A)(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(null!=e.prefix){const t=e.prefix;r=(0,i.A)(r,(e=>e.key.toString().startsWith(t)))}if(Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>(0,i.A)(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>(0,s.A)(e,t)),r)),null!=e.offset){let t=0;const n=e.offset;r=(0,i.A)(r,(()=>t++>=n))}return null!=e.limit&&(r=(0,o.A)(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(null!=e.prefix){const t=e.prefix;r=(0,i.A)(r,(e=>e.toString().startsWith(t)))}if(Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>(0,i.A)(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>(0,s.A)(e,t)),r)),null!=e.offset){const t=e.offset;let n=0;r=(0,i.A)(r,(()=>n++>=t))}return null!=e.limit&&(r=(0,o.A)(r,e.limit)),r}}},81178:function(e,t,r){"use strict";r.r(t),r.d(t,{abortedError:function(){return u},dbDeleteFailedError:function(){return s},dbOpenFailedError:function(){return i},dbReadFailedError:function(){return a},dbWriteFailedError:function(){return o},notFoundError:function(){return c}});var n=r(66310);function i(e){return e=e??new Error("Cannot open database"),n(e,"ERR_DB_OPEN_FAILED")}function s(e){return e=e??new Error("Delete failed"),n(e,"ERR_DB_DELETE_FAILED")}function o(e){return e=e??new Error("Write failed"),n(e,"ERR_DB_WRITE_FAILED")}function a(e){return e=e??new Error("Read failed"),n(e,"ERR_DB_READ_FAILED")}function c(e){return e=e??new Error("Not Found"),n(e,"ERR_NOT_FOUND")}function u(e){return e=e??new Error("Aborted"),n(e,"ERR_ABORTED")}},65857:function(e,t,r){"use strict";r.d(t,{fD:function(){return o.f},I:function(){return n},bk:function(){return a.b}});var n=r(81178),i=r(17538);const s="SHARDING";var o=r(88080),a=r(91618);r(97101);r(81033);class c extends o.f{child;transform;constructor(e,t){super(),this.child=e,this.transform=t}async put(e,t,r){return await this.child.put(this.transform.convert(e),t,r),e}async get(e,t){return this.child.get(this.transform.convert(e),t)}async has(e,t){return this.child.has(this.transform.convert(e),t)}async delete(e,t){await this.child.delete(this.transform.convert(e),t)}async*putMany(e,t={}){const r=this.transform,n=this.child;yield*(0,it_pipe_dist_src.F)(e,(async function*(e){yield*dist_src(e,(({key:e,value:t})=>({key:r.convert(e),value:t})))}),(async function*(e){yield*n.putMany(e,t)}),(async function*(e){yield*dist_src(e,(e=>r.invert(e)))}))}async*getMany(e,t={}){const r=this.transform,n=this.child;yield*(0,it_pipe_dist_src.F)(e,(async function*(e){yield*dist_src(e,(e=>r.convert(e)))}),(async function*(e){yield*n.getMany(e,t)}),(async function*(e){yield*dist_src(e,(({key:e,value:t})=>({key:r.invert(e),value:t})))}))}async*deleteMany(e,t={}){const r=this.transform,n=this.child;yield*(0,it_pipe_dist_src.F)(e,(async function*(e){yield*dist_src(e,(e=>r.convert(e)))}),(async function*(e){yield*n.deleteMany(e,t)}),(async function*(e){yield*dist_src(e,(e=>r.invert(e)))}))}batch(){const e=this.child.batch();return{put:(t,r)=>{e.put(this.transform.convert(t),r)},delete:t=>{e.delete(this.transform.convert(t))},commit:async t=>{await e.commit(t)}}}query(e,t){const r={...e};r.filters=(r.filters??[]).map((e=>({key:t,value:r})=>e({key:this.transform.convert(t),value:r})));const{prefix:n}=e;return null!=n&&"/"!==n&&(delete r.prefix,r.filters.push((({key:e})=>this.transform.invert(e).toString().startsWith(n)))),null!=r.orders&&(r.orders=r.orders.map((e=>(t,r)=>e({key:this.transform.invert(t.key),value:t.value},{key:this.transform.invert(r.key),value:r.value})))),dist_src(this.child.query(r,t),(({key:e,value:t})=>({key:this.transform.invert(e),value:t})))}queryKeys(e,t){const r={...e};r.filters=(r.filters??[]).map((e=>t=>e(this.transform.convert(t))));const{prefix:n}=e;return null!=n&&"/"!==n&&(delete r.prefix,r.filters.push((e=>this.transform.invert(e).toString().startsWith(n)))),null!=r.orders&&(r.orders=r.orders.map((e=>(t,r)=>e(this.transform.invert(t),this.transform.invert(r))))),dist_src(this.child.queryKeys(r,t),(e=>this.transform.invert(e)))}}new i.U(s);class u extends o.f{child;shard;constructor(e,t){super(),this.child=new c(e,{convert:this._convertKey.bind(this),invert:this._invertKey.bind(this)}),this.shard=t}async open(){this.shard=await u.create(this.child,this.shard)}_convertKey(e){const t=e.toString();if(t===shardKey.toString())return e;return new i.U(this.shard.fun(t)).child(e)}_invertKey(e){return e.toString()===shardKey.toString()?e:i.U.withNamespaces(e.list().slice(1))}static async create(e,t){if(!await e.has(shardKey)){if(null==t)throw n.dbOpenFailedError(Error("Shard is required when datastore doesn't have a shard key already."));await e.put(shardKey,(new TextEncoder).encode(t.toString()+"\n"))}null==t&&await readShardFun("/",e);const r=await readShardFun("/",e),i=r.toString(),s=t.toString();if(i!==s)throw new Error(`specified fun ${s} does not match repo shard fun ${i}`);return r}async put(e,t,r){return await this.child.put(e,t,r),e}async get(e,t){return this.child.get(e,t)}async has(e,t){return this.child.has(e,t)}async delete(e,t){await this.child.delete(e,t)}async*putMany(e,t={}){yield*this.child.putMany(e,t)}async*getMany(e,t={}){yield*this.child.getMany(e,t)}async*deleteMany(e,t={}){yield*this.child.deleteMany(e,t)}batch(){return this.child.batch()}query(e,t){const r={...e,filters:[({key:e})=>e.toString()!==shardKey.toString()].concat(e.filters??[])};return this.child.query(r,t)}queryKeys(e,t){const r={...e,filters:[e=>e.toString()!==shardKey.toString()].concat(e.filters??[])};return this.child.queryKeys(r,t)}}r(96825),r(97313);class l extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}r(87583),r(526);class h extends o.f{mounts;constructor(e){super(),this.mounts=e.slice()}_lookup(e){for(const t of this.mounts)if(t.prefix.toString()===e.toString()||t.prefix.isAncestorOf(e))return{datastore:t.datastore,mountpoint:t.prefix}}async put(e,t,r){const i=this._lookup(e);if(null==i)throw n.dbWriteFailedError(new Error("No datastore mounted for this key"));return await i.datastore.put(e,t,r),e}async get(e,t={}){const r=this._lookup(e);if(null==r)throw n.notFoundError(new Error("No datastore mounted for this key"));return r.datastore.get(e,t)}async has(e,t){const r=this._lookup(e);return null==r?Promise.resolve(!1):r.datastore.has(e,t)}async delete(e,t){const r=this._lookup(e);if(null==r)throw n.dbDeleteFailedError(new Error("No datastore mounted for this key"));await r.datastore.delete(e,t)}batch(){const e={},t=t=>{const r=this._lookup(t);if(null==r)throw new Error("No datastore mounted for this key");const n=r.mountpoint.toString();return null==e[n]&&(e[n]=r.datastore.batch()),{batch:e[n]}};return{put:(e,r)=>{t(e).batch.put(e,r)},delete:e=>{t(e).batch.delete(e)},commit:async t=>{await Promise.all(Object.keys(e).map((async r=>{await e[r].commit(t)})))}}}query(e,t){const r=this.mounts.map((r=>r.datastore.query({prefix:e.prefix,filters:e.filters},t)));let n=it_merge_dist_src(...r);if(null!=e.filters&&e.filters.forEach((e=>{(0,it_filter_dist_src.A)(n,e)})),null!=e.orders&&e.orders.forEach((e=>{(0,it_sort_dist_src.A)(n,e)})),null!=e.offset){let t=0;const r=e.offset;(0,it_filter_dist_src.A)(n,(()=>t++>=r))}return null!=e.limit&&(0,it_take_dist_src.A)(n,e.limit),n}queryKeys(e,t){const r=this.mounts.map((r=>r.datastore.queryKeys({prefix:e.prefix,filters:e.filters},t)));let n=it_merge_dist_src(...r);if(null!=e.filters&&e.filters.forEach((e=>{(0,it_filter_dist_src.A)(n,e)})),null!=e.orders&&e.orders.forEach((e=>{(0,it_sort_dist_src.A)(n,e)})),null!=e.offset){let t=0;const r=e.offset;(0,it_filter_dist_src.A)(n,(()=>t++>=r))}return null!=e.limit&&(0,it_take_dist_src.A)(n,e.limit),n}}var d=r(17833);var f=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*l+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};new Uint8Array(0);class p{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class g{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return y(this,e)}}class m{constructor(e){this.decoders=e}or(e){return y(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const y=(e,t)=>new m({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class b{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new p(e,t,r),this.decoder=new g(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const w=({name:e,prefix:t,encode:r,decode:n})=>new b(e,t,r,n),v=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=f(r,t);return w({prefix:e,name:t,encode:n,decode:e=>(e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")})(i(e))})},S=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>w({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),_=S({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),A=(S({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),S({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),S({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),S({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),S({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),S({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),S({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),S({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),v({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"})),E=(v({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),S({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}));S({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),S({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),S({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});d.formatters.b=e=>null==e?"undefined":A.baseEncode(e),d.formatters.t=e=>null==e?"undefined":_.baseEncode(e),d.formatters.m=e=>null==e?"undefined":E.baseEncode(e),d.formatters.p=e=>null==e?"undefined":e.toString(),d.formatters.c=e=>null==e?"undefined":e.toString(),d.formatters.k=e=>null==e?"undefined":e.toString(),d.formatters.a=e=>null==e?"undefined":e.toString();r(61563),r(48651);!function(e){let t=function(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}(`${e}:trace`);d.enabled(`${e}:trace`)&&null!=d.names.map((e=>e.toString())).find((e=>e.includes(":trace")))&&(t=d(`${e}:trace`)),Object.assign(d(e),{error:d(`${e}:error`),trace:t})}("datastore:core:tiered");class x extends o.f{stores;constructor(e){super(),this.stores=e.slice()}async put(e,t,r){try{return await Promise.all(this.stores.map((async n=>{await n.put(e,t,r)}))),e}catch(e){throw n.dbWriteFailedError(e)}}async get(e,t){for(const r of this.stores)try{const n=await r.get(e,t);if(null!=n)return n}catch(e){log.error(e)}throw n.notFoundError()}async has(e,t){for(const r of this.stores)if(await r.has(e,t))return!0;return!1}async delete(e,t){try{await Promise.all(this.stores.map((async r=>{await r.delete(e,t)})))}catch(e){throw n.dbDeleteFailedError(e)}}async*putMany(e,t={}){let r;const n=this.stores.map((e=>{const r=(0,it_pushable_dist_src.N)({objectMode:!0});return(0,it_drain_dist_src.A)(e.putMany(r,t)).catch((e=>{e})),r}));try{for await(const t of e){if(null!=r)throw r;n.forEach((e=>e.push(t))),yield t.key}}finally{n.forEach((e=>e.end()))}}async*deleteMany(e,t={}){let r;const n=this.stores.map((e=>{const r=(0,it_pushable_dist_src.N)({objectMode:!0});return(0,it_drain_dist_src.A)(e.deleteMany(r,t)).catch((e=>{e})),r}));try{for await(const t of e){if(null!=r)throw r;n.forEach((e=>e.push(t))),yield t}}finally{n.forEach((e=>e.end()))}}batch(){const e=this.stores.map((e=>e.batch()));return{put:(t,r)=>{e.forEach((e=>{e.put(t,r)}))},delete:t=>{e.forEach((e=>{e.delete(t)}))},commit:async t=>{for(const r of e)await r.commit(t)}}}query(e,t){return this.stores[this.stores.length-1].query(e,t)}queryKeys(e,t){return this.stores[this.stores.length-1].queryKeys(e,t)}}},91618:function(e,t,r){"use strict";r.d(t,{b:function(){return o}});var n=r(17538),i=r(88080),s=r(81178);class o extends i.f{data;constructor(){super(),this.data=new Map}put(e,t){return this.data.set(e.toString(),t),e}get(e){const t=this.data.get(e.toString());if(null==t)throw s.notFoundError();return t}has(e){return this.data.has(e.toString())}delete(e){this.data.delete(e.toString())}*_all(){for(const[e,t]of this.data.entries())yield{key:new n.U(e),value:t}}*_allKeys(){for(const e of this.data.keys())yield new n.U(e)}}},17538:function(e,t,r){"use strict";r.d(t,{U:function(){return c}});var n=r(16676),i=r(98067);const s="/",o=(new TextEncoder).encode(s),a=o[0];class c{_buf;constructor(e,t){if("string"==typeof e)this._buf=(0,n.s)(e);else{if(!(e instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=e}if(null==t&&(t=!0),t&&this.clean(),0===this._buf.byteLength||this._buf[0]!==a)throw new Error("Invalid key")}toString(e="utf8"){return(0,i.d)(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new c(e.join(s))}static random(){return new c(((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""))().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||"string"==typeof e?new c(e):"function"==typeof e.uint8Array?new c(e.uint8Array()):null}clean(){if(null!=this._buf&&0!==this._buf.byteLength||(this._buf=o),this._buf[0]!==a){const e=new Uint8Array(this._buf.byteLength+1);e.fill(a,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===a;)this._buf=this._buf.subarray(0,-1)}less(e){const t=this.list(),r=e.list();for(let e=0;e<t.length;e++){if(r.length<e+1)return!1;const n=t[e],i=r[e];if(n<i)return!0;if(n>i)return!1}return t.length<r.length}reverse(){return c.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(s).slice(1)}type(){return function(e){const t=e.split(":");if(t.length<2)return"";return t.slice(0,-1).join(":")}(this.baseNamespace())}name(){return function(e){const t=e.split(":");return t[t.length-1]}(this.baseNamespace())}instance(e){return new c(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(s)||(e+=s),e+=this.type(),new c(e)}parent(){const e=this.list();return 1===e.length?new c(s):new c(e.slice(0,-1).join(s))}child(e){return this.toString()===s?e:e.toString()===s?this:new c(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}isTopLevel(){return 1===this.list().length}concat(...e){return c.withNamespaces([...this.namespaces(),...(t=e.map((e=>e.namespaces())),[].concat(...t))]);var t}}},61563:function(e,t){"use strict";t.A=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{for await(const t of e);})();for(const t of e);}},96825:function(e,t,r){"use strict";var n=r(97101);t.A=function(e,t){if(null!=e[Symbol.asyncIterator])return async function*(){for await(const r of e)await t(r)&&(yield r)}();const r=(0,n.A)(e),{value:i,done:s}=r.next();if(!0===s)return function*(){}();const o=t(i);if("function"==typeof o.then)return async function*(){await o&&(yield i);for await(const e of r)await t(e)&&(yield e)}();const a=t;return function*(){!0===o&&(yield i);for(const e of r)a(e)&&(yield e)}()}},87583:function(e,t,r){"use strict";r.d(t,{A:function(){return i}});var n=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{const t=[];for await(const r of e)t.push(r);return t})();const t=[];for(const r of e)t.push(r);return t};var i=function(e,t){return null!=e[Symbol.asyncIterator]?async function*(){const r=await n(e);yield*r.sort(t)}():function*(){const r=n(e);yield*r.sort(t)}()}},526:function(e,t){"use strict";t.A=function(e,t){return null!=e[Symbol.asyncIterator]?async function*(){let r=0;if(!(t<1))for await(const n of e)if(yield n,r++,r===t)return}():function*(){let r=0;if(!(t<1))for(const n of e)if(yield n,r++,r===t)return}()}},96059:function(e,t,r){"use strict";r.d(t,{t:function(){return g}});var n=r(65857),i=r(96148);var s=r(98067),o=r(16676);const a="/",c=(new TextEncoder).encode(a),u=c[0];class l{constructor(e,t){if("string"==typeof e)this._buf=(0,o.s)(e);else{if(!(e instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=e}if(null==t&&(t=!0),t&&this.clean(),0===this._buf.byteLength||this._buf[0]!==u)throw new Error("Invalid key")}toString(e="utf8"){return(0,s.d)(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new l(e.join(a))}static random(){return new l(((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""))().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||"string"==typeof e?new l(e):"function"==typeof e.uint8Array?new l(e.uint8Array()):null}clean(){if(null!=this._buf&&0!==this._buf.byteLength||(this._buf=c),this._buf[0]!==u){const e=new Uint8Array(this._buf.byteLength+1);e.fill(u,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===u;)this._buf=this._buf.subarray(0,-1)}less(e){const t=this.list(),r=e.list();for(let e=0;e<t.length;e++){if(r.length<e+1)return!1;const n=t[e],i=r[e];if(n<i)return!0;if(n>i)return!1}return t.length<r.length}reverse(){return l.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(a).slice(1)}type(){return function(e){const t=e.split(":");if(t.length<2)return"";return t.slice(0,-1).join(":")}(this.baseNamespace())}name(){return function(e){const t=e.split(":");return t[t.length-1]}(this.baseNamespace())}instance(e){return new l(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(a)||(e+=a),e+=this.type(),new l(e)}parent(){const e=this.list();return 1===e.length?new l(a):new l(e.slice(0,-1).join(a))}child(e){return this.toString()===a?e:e.toString()===a?this:new l(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}isTopLevel(){return 1===this.list().length}concat(...e){return l.withNamespaces([...this.namespaces(),...(t=e.map((e=>e.namespaces())),[].concat(...t))]);var t}}var h=r(97101);var d=function(e,t){if(null!=e[Symbol.asyncIterator])return async function*(){for await(const r of e)await t(r)&&(yield r)}();const r=(0,h.A)(e),{value:n,done:i}=r.next();if(!0===i)return function*(){}();const s=t(n);if("function"==typeof s.then)return async function*(){await s&&(yield n);for await(const e of r)await t(e)&&(yield e)}();const o=t;return function*(){!0===s&&(yield n);for(const e of r)o(e)&&(yield e)}()};var f=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{const t=[];for await(const r of e)t.push(r);return t})();const t=[];for(const r of e)t.push(r);return t};var p=function(e,t){return null!=e[Symbol.asyncIterator]?async function*(){const r=await f(e);yield*r.sort(t)}():function*(){const r=f(e);yield*r.sort(t)}()};class g extends n.fD{location;version;db;constructor(e,t={}){super(),this.location=`${t.prefix??""}${e}`,this.version=t.version??1}async open(){try{const e=this.location;this.db=await(0,i.P2)(e,this.version,{upgrade(t){t.createObjectStore(e)}})}catch(e){throw n.I.dbOpenFailedError(e)}}async close(){this.db?.close()}async put(e,t){if(null==this.db)throw new Error("Datastore needs to be opened.");try{return await this.db.put(this.location,t,e.toString()),e}catch(e){throw n.I.dbWriteFailedError(e)}}async get(e){if(null==this.db)throw new Error("Datastore needs to be opened.");let t;try{t=await this.db.get(this.location,e.toString())}catch(e){throw n.I.dbReadFailedError(e)}if(void 0===t)throw n.I.notFoundError();return t}async has(e){if(null==this.db)throw new Error("Blockstore needs to be opened.");try{return Boolean(await this.db.getKey(this.location,e.toString()))}catch(e){throw n.I.dbReadFailedError(e)}}async delete(e){if(null==this.db)throw new Error("Datastore needs to be opened.");try{await this.db.delete(this.location,e.toString())}catch(e){throw n.I.dbWriteFailedError(e)}}batch(){const e=[],t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:async()=>{if(null==this.db)throw new Error("Datastore needs to be opened.");const r=this.db.transaction(this.location,"readwrite");try{const n=e.filter((({key:e})=>null==t.find((t=>t.toString()===e.toString())))).map((e=>async()=>{await r.store.put(e.value,e.key.toString())})).concat(t.map((e=>async()=>{await r.store.delete(e.toString())}))).concat((async()=>{await r.done}));await Promise.all(n.map((async e=>{await e()})))}catch{r.abort()}}}}async*query(e){let t=this.#r(e,((e,t)=>({key:e,value:t})));Array.isArray(e.filters)&&(t=e.filters.reduce(((e,t)=>d(e,t)),t)),Array.isArray(e.orders)&&(t=e.orders.reduce(((e,t)=>p(e,t)),t)),yield*t}async*queryKeys(e){let t=this.#r(e,(e=>e));Array.isArray(e.filters)&&(t=e.filters.reduce(((e,t)=>d(e,t)),t)),Array.isArray(e.orders)&&(t=e.orders.reduce(((e,t)=>p(e,t)),t)),yield*t}async*#r(e,t){if(null==this.db)throw new Error("Datastore needs to be opened.");let r=0,n=-1;for(const i of await this.db.getAllKeys(this.location)){if(null!=e.prefix&&!i.toString().startsWith(e.prefix))continue;if(null!=e.limit&&r===e.limit)return;if(n++,null!=e.offset&&n<e.offset)continue;const s=new l(i.toString());let o;try{o=await this.get(s)}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e;continue}null!=o&&(yield t(s,o),r++)}}async destroy(){await(0,i.MR)(this.location)}}},77618:function(e,t,r){"use strict";r.d(t,{Q:function(){return b}});var n=r(53301),i=r(66310);function s(e){return e=e||new Error("Cannot open database"),i(e,"ERR_DB_OPEN_FAILED")}function o(e){return e=e||new Error("Delete failed"),i(e,"ERR_DB_DELETE_FAILED")}function a(e){return e=e||new Error("Write failed"),i(e,"ERR_DB_WRITE_FAILED")}function c(e){return e=e||new Error("Not Found"),i(e,"ERR_NOT_FOUND")}r(30256);const u="SHARDING";const l=(e,t)=>async function*(){const r=await async function(e){const t=[];for await(const r of e)t.push(r);return t}(e);yield*r.sort(t)}();var h=r(8306),d=r(40506),f=r(66213);class p{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:r,value:n}of e)await this.put(r,n,t),yield{key:r,value:n}}async*getMany(e,t={}){for await(const r of e)yield this.get(r,t)}async*deleteMany(e,t={}){for await(const r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:async r=>{await(0,h.A)(this.putMany(e,r)),e=[],await(0,h.A)(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(null!=e.prefix&&(r=(0,d.A)(r,(t=>t.key.toString().startsWith(e.prefix)))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>(0,d.A)(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>l(e,t)),r)),null!=e.offset){let t=0;r=(0,d.A)(r,(()=>t++>=e.offset))}return null!=e.limit&&(r=(0,f.A)(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(null!=e.prefix&&(r=(0,d.A)(r,(t=>t.toString().startsWith(e.prefix)))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>(0,d.A)(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>l(e,t)),r)),null!=e.offset){let t=0;r=(0,d.A)(r,(()=>t++>=e.offset))}return null!=e.limit&&(r=(0,f.A)(r,e.limit)),r}}var g=r(47390);r(48651),r(67631);new n.U(u),new n.U("_README");(0,r(64340).vF)("datastore:core:tiered");var m=r(86602),y=r(82949);class b extends p{constructor(e,t={}){super(),this.db="string"==typeof e?new y.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(e){throw s(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(e){throw a(e)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(e){if(e.notFound)throw c(e);throw a(e)}return t}async has(e){try{await this.db.get(e.toString())}catch(e){if(e.notFound)return!1;throw e}return!0}async delete(e){try{await this.db.del(e.toString())}catch(e){throw o(e)}}close(){return this.db&&this.db.close()}batch(){const e=[];return{put:(t,r)=>{e.push({type:"put",key:t.toString(),value:r})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce(((e,t)=>(0,d.A)(e,t)),t)),Array.isArray(e.orders)&&(t=e.orders.reduce(((e,t)=>(0,m.A)(e,t)),t));const{offset:r,limit:n}=e;if(r){let e=0;t=(0,d.A)(t,(()=>e++>=r))}return n&&(t=(0,f.A)(t,n)),t}queryKeys(e){let t=(0,g.A)(this._query({values:!1,prefix:e.prefix}),(({key:e})=>e));Array.isArray(e.filters)&&(t=e.filters.reduce(((e,t)=>(0,d.A)(e,t)),t)),Array.isArray(e.orders)&&(t=e.orders.reduce(((e,t)=>(0,m.A)(e,t)),t));const{offset:r,limit:n}=e;if(r){let e=0;t=(0,d.A)(t,(()=>e++>=r))}return n&&(t=(0,f.A)(t,n)),t}_query(e){const t={keys:!0,keyEncoding:"buffer",values:e.values};if(null!=e.prefix){const r=e.prefix.toString();t.gte=r,t.lt=r+""}const r=this.db.iterator(t);if(r[Symbol.asyncIterator])return async function*(e){for await(const[t,r]of e)yield{key:new n.U(t,!1),value:r};await e.close()}(r);if(null!=r.next&&null!=r.end)return i=r,{[Symbol.asyncIterator]:()=>({next:()=>new Promise(((e,t)=>{i.next(((r,s,o)=>r?t(r):null==s?i.end((r=>{if(r)return t(r);e({done:!0,value:void 0})})):void e({done:!1,value:{key:new n.U(s,!1),value:o}})))})),return:()=>new Promise(((e,t)=>{i.end((r=>{if(r)return t(r);e({done:!0,value:void 0})}))}))})};var i;throw new Error("Level returned incompatible iterator")}}},81070:function(e,t,r){"use strict";r.d(t,{D:function(){return w}});var n=r(53301);r(66310);r(30256);const i="SHARDING";const s=(e,t)=>async function*(){const r=await async function(e){const t=[];for await(const r of e)t.push(r);return t}(e);yield*r.sort(t)}();var o=r(8306),a=r(40506),c=r(66213);class u{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:r,value:n}of e)await this.put(r,n,t),yield{key:r,value:n}}async*getMany(e,t={}){for await(const r of e)yield this.get(r,t)}async*deleteMany(e,t={}){for await(const r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:async r=>{await(0,o.A)(this.putMany(e,r)),e=[],await(0,o.A)(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(null!=e.prefix&&(r=(0,a.A)(r,(t=>t.key.toString().startsWith(e.prefix)))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>(0,a.A)(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>s(e,t)),r)),null!=e.offset){let t=0;r=(0,a.A)(r,(()=>t++>=e.offset))}return null!=e.limit&&(r=(0,c.A)(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(null!=e.prefix&&(r=(0,a.A)(r,(t=>t.toString().startsWith(e.prefix)))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>(0,a.A)(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>s(e,t)),r)),null!=e.offset){let t=0;r=(0,a.A)(r,(()=>t++>=e.offset))}return null!=e.limit&&(r=(0,c.A)(r,e.limit)),r}}r(47390),r(48651),r(67631);new n.U(i),new n.U("_README");var l=r(64340);(0,l.vF)("datastore:core:tiered");var h=r(17729),d=r(98067),f=r(16676);const p="/record/";function g(e){return(0,d.d)(e,"base32")}function m(e){("string"==typeof e||e instanceof String)&&(e=(0,f.s)(e.toString()));const t=(0,d.d)(e,"base64url");return`${p}${t}`}var y=r(94145);const b=(0,l.vF)("datastore-pubsub:publisher");class w extends u{constructor(e,t,r,n,i,s){if(super(),!n)throw new h.A("missing validator","ERR_INVALID_PARAMETERS");if("function"!=typeof n)throw new h.A("missing validate function","ERR_INVALID_PARAMETERS");if("function"!=typeof i)throw new h.A("missing select function","ERR_INVALID_PARAMETERS");if(s&&"function"!=typeof s)throw new h.A("invalid subscriptionKeyFn received","ERR_INVALID_PARAMETERS");this._pubsub=e,this._datastore=t,this._peerId=r,this._validator=n,this._selector=i,this._handleSubscriptionKeyFn=s,this._onMessage=this._onMessage.bind(this),this._pubsub.addEventListener("message",this._onMessage)}async put(e,t,r){if(!(e instanceof Uint8Array)){const e="datastore key does not have a valid format";throw b.error(e),new h.A(e,"ERR_INVALID_DATASTORE_KEY")}if(!(t instanceof Uint8Array)){const e="received value is not a Uint8Array";throw b.error(e),new h.A(e,"ERR_INVALID_VALUE_RECEIVED")}const n=m(e);b(`publish value for topic ${n}`),await this._pubsub.publish(n,t)}async get(e,t){if(!(e instanceof Uint8Array)){const e="datastore key does not have a valid format";throw b.error(e),new h.A(e,"ERR_INVALID_DATASTORE_KEY")}const r=m(e),n=await this._pubsub.getTopics();if(n&&Array.isArray(n)&&n.indexOf(r)>-1)return this._getLocal(e,t);try{await this._pubsub.subscribe(r)}catch(e){const t=`cannot subscribe topic ${r}`;throw b.error(t),new h.A(t,"ERR_SUBSCRIBING_TOPIC")}return b(`subscribed values for key ${r}`),this._getLocal(e)}unsubscribe(e){const t=m(e);return this._pubsub.unsubscribe(t)}async _getLocal(e,t){const r=new n.U("/"+g(e),!1);let i;try{i=await this._datastore.get(r,t)}catch(e){if("ERR_NOT_FOUND"!==e.code){const e=`unexpected error getting the ipns record for ${r.toString()}`;throw b.error(e),new h.A(e,"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}const t=`local record requested was not found for ${r.toString()}`;throw b.error(t),new h.A(t,"ERR_NOT_FOUND")}if(!(i instanceof Uint8Array)){const e="found record that we couldn't convert to a value";throw b.error(e),new h.A(e,"ERR_INVALID_RECORD_RECEIVED")}return i}async _onMessage(e){const t=e.detail;if("signed"!==t.type)return void b.error("unsigned message received, this module can only work with signed messages");const{data:r,from:n,topic:i}=t;let s;try{s=function(e){if(e.substring(0,p.length)!==p)throw new h.A("topic received is not from a record","ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");const t=e.substring(p.length);return(0,f.s)(t,"base64url")}(i)}catch(e){return void b.error(e)}if(b(`message received for topic ${i}`),this._peerId.equals(n))b("message discarded as it is from the same peer");else{if(this._handleSubscriptionKeyFn){let e;try{e=await this._handleSubscriptionKeyFn(s)}catch(e){return void b.error("message discarded by the subscriptionKeyFn")}s=e}try{await this._storeIfSubscriptionIsBetter(s,r)}catch(e){b.error(e)}}}async _storeIfSubscriptionIsBetter(e,t,r){let n=!1;try{n=await this._isBetter(e,t)}catch(e){if("ERR_NOT_VALID_RECORD"!==e.code)throw e}n&&await this._storeRecord(e,t,r)}async _validateRecord(e,t){return this._validator(e,t)}async _selectRecord(e,t){return 0===await this._selector(e,t)}async _isBetter(e,t){try{await this._validateRecord(e,t)}catch(e){const t="record received through pubsub is not valid";throw b.error(t),new h.A(t,"ERR_NOT_VALID_RECORD")}const r=new n.U(e);let i;try{i=await this._getLocal(r.uint8Array())}catch(e){return!0}return!(0,y.a)(i,t)&&this._selectRecord(e,[i,t])}async _storeRecord(e,t,r){const i=new n.U("/"+g(e),!1);await this._datastore.put(i,t,r),b(`record for ${m(e)} was stored in the datastore`)}}},76629:function(e,t,r){"use strict";r.d(t,{A:function(){return h}});var n=r(17833),i=r(2823);const s=globalThis.fetch,o=globalThis.Headers;globalThis.Request,globalThis.Response;function a(e,t,r){return`${e}?name=${t}&type=${r}`}async function c(e,t){const r=await s(e,{headers:new o({accept:"application/dns-json"}),signal:t});return await r.json()}function u(e,t){return`${t}_${e}`}const l=Object.assign(n("dns-over-http-resolver"),{error:n("dns-over-http-resolver:error")});var h=class{constructor(e={}){this._cache=new i({max:e?.maxCache??100}),this._TXTcache=new i({max:e?.maxCache??100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=e.request??c,this._abortControllers=[]}cancel(){this._abortControllers.forEach((e=>e.abort()))}getServers(){return this._servers}_getShuffledServers(){const e=[...this._servers];for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*t),n=e[t];e[t]=e[r],e[r]=n}return e}setServers(e){this._servers=e}async resolve(e,t="A"){switch(t){case"A":return await this.resolve4(e);case"AAAA":return await this.resolve6(e);case"TXT":return await this.resolveTxt(e);default:throw new Error(`${t} is not supported`)}}async resolve4(e){const t="A",r=this._cache.get(u(e,t));if(null!=r)return r;let n=!1;for(const r of this._getShuffledServers()){const i=new AbortController;this._abortControllers.push(i);try{const n=await this._request(a(r,e,t),i.signal),s=n.Answer.map((e=>e.data)),o=Math.min(...n.Answer.map((e=>e.TTL)));return this._cache.set(u(e,t),s,{ttl:o}),s}catch(s){i.signal.aborted&&(n=!0),l.error(`${r} could not resolve ${e} record ${t}`)}finally{this._abortControllers=this._abortControllers.filter((e=>e!==i))}}if(n)throw Object.assign(new Error("queryA ECANCELLED"),{code:"ECANCELLED"});throw new Error(`Could not resolve ${e} record ${t}`)}async resolve6(e){const t="AAAA",r=this._cache.get(u(e,t));if(null!=r)return r;let n=!1;for(const r of this._getShuffledServers()){const i=new AbortController;this._abortControllers.push(i);try{const n=await this._request(a(r,e,t),i.signal),s=n.Answer.map((e=>e.data)),o=Math.min(...n.Answer.map((e=>e.TTL)));return this._cache.set(u(e,t),s,{ttl:o}),s}catch(s){i.signal.aborted&&(n=!0),l.error(`${r} could not resolve ${e} record ${t}`)}finally{this._abortControllers=this._abortControllers.filter((e=>e!==i))}}if(n)throw Object.assign(new Error("queryAaaa ECANCELLED"),{code:"ECANCELLED"});throw new Error(`Could not resolve ${e} record ${t}`)}async resolveTxt(e){const t="TXT",r=this._TXTcache.get(u(e,t));if(null!=r)return r;let n=!1;for(const r of this._getShuffledServers()){const i=new AbortController;this._abortControllers.push(i);try{const n=await this._request(a(r,e,t),i.signal),s=n.Answer.map((e=>[e.data.replace(/['"]+/g,"")])),o=Math.min(...n.Answer.map((e=>e.TTL)));return this._TXTcache.set(u(e,t),s,{ttl:o}),s}catch(s){i.signal.aborted&&(n=!0),l.error(`${r} could not resolve ${e} record ${t}`)}finally{this._abortControllers=this._abortControllers.filter((e=>e!==i))}}if(n)throw Object.assign(new Error("queryTxt ECANCELLED"),{code:"ECANCELLED"});throw new Error(`Could not resolve ${e} record ${t}`)}clearCache(){this._cache.clear(),this._TXTcache.clear()}}},84480:function(e,t,r){"use strict";r.d(t,{yQ:function(){return $},_7:function(){return _},dY:function(){return W},qg:function(){return H}});const n=Object.create(null);n.open="0",n.close="1",n.ping="2",n.pong="3",n.message="4",n.upgrade="5",n.noop="6";const i=Object.create(null);Object.keys(n).forEach((e=>{i[n[e]]=e}));const s={type:"error",data:"parser error"},o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),a="function"==typeof ArrayBuffer,c=(e,t)=>{const r=new FileReader;return r.onload=function(){const e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};var u=({type:e,data:t},r,i)=>{return o&&t instanceof Blob?r?i(t):c(t,i):a&&(t instanceof ArrayBuffer||(s=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer))?r?i(t):c(new Blob([t]),i):i(n[e]+(t||""));var s};const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<l.length;e++)h[l.charCodeAt(e)]=e;const d="function"==typeof ArrayBuffer,f=(e,t)=>{if(d){const r=(e=>{let t,r,n,i,s,o=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);const u=new ArrayBuffer(o),l=new Uint8Array(u);for(t=0;t<a;t+=4)r=h[e.charCodeAt(t)],n=h[e.charCodeAt(t+1)],i=h[e.charCodeAt(t+2)],s=h[e.charCodeAt(t+3)],l[c++]=r<<2|n>>4,l[c++]=(15&n)<<4|i>>2,l[c++]=(3&i)<<6|63&s;return u})(e);return p(r,t)}return{base64:!0,data:e}},p=(e,t)=>"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e;var g=(e,t)=>{if("string"!=typeof e)return{type:"message",data:p(e,t)};const r=e.charAt(0);if("b"===r)return{type:"message",data:f(e.substring(1),t)};return i[r]?e.length>1?{type:i[r],data:e.substring(1)}:{type:i[r]}:s};const m=String.fromCharCode(30);var y=r(87122);const b="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function w(e,...t){return t.reduce(((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t)),{})}const v=b.setTimeout,S=b.clearTimeout;function _(e,t){t.useNativeTimers?(e.setTimeoutFn=v.bind(b),e.clearTimeoutFn=S.bind(b)):(e.setTimeoutFn=b.setTimeout.bind(b),e.clearTimeoutFn=b.clearTimeout.bind(b))}class A extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class E extends y.v{constructor(e){super(),this.writable=!1,_(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new A(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=g(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const x="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),k=64,T={};let I,P=0,R=0;function C(e){let t="";do{t=x[e%k]+t,e=Math.floor(e/k)}while(e>0);return t}function O(){const e=C(+new Date);return e!==I?(P=0,I=e):e+"."+C(P++)}for(;R<k;R++)T[x[R]]=R;function D(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}let B=!1;try{B="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const N=B;function U(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||N))return new XMLHttpRequest}catch(e){}if(!t)try{return new(b[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function M(){}const j=null!=new U({xdomain:!1}).responseType;class L extends y.v{constructor(e,t){super(),_(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=w(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new U(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof t.status?t.status:0)}),0))},t.send(this.data)}catch(e){return void this.setTimeoutFn((()=>{this.onError(e)}),0)}"undefined"!=typeof document&&(this.index=L.requestsCount++,L.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=M,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete L.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(L.requestsCount=0,L.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",F);else if("function"==typeof addEventListener){addEventListener("onpagehide"in b?"pagehide":"unload",F,!1)}function F(){for(let e in L.requests)L.requests.hasOwnProperty(e)&&L.requests[e].abort()}const W="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),q=b.WebSocket||b.MozWebSocket;r(62045).hp;const K="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const V={websocket:class extends E{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,r=K?{}:w(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=K?new q(e,t,r):t?new q(e,t):new q(e)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],n=t===e.length-1;u(r,this.supportsBinary,(e=>{try{this.ws.send(e)}catch(e){}n&&W((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let r="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=O()),this.supportsBinary||(e.b64=1);const n=D(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}check(){return!!q}},polling:class extends E{constructor(e){if(super(e),this.polling=!1,"undefined"!=typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=j&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const r=e.split(m),n=[];for(let e=0;e<r.length;e++){const i=g(r[e],t);if(n.push(i),"error"===i.type)break}return n})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const r=e.length,n=new Array(r);let i=0;e.forEach(((e,s)=>{u(e,!1,(e=>{n[s]=e,++i===r&&t(n.join(m))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let r="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=O()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port);const n=D(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new L(this.uri(),e)}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}},z=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,J=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function H(e){const t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=z.exec(e||""),s={},o=14;for(;o--;)s[J[o]]=i[o]||"";return-1!=r&&-1!=n&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1);"/"==t.slice(-1)&&n.splice(n.length-1,1);return n}(0,s.path),s.queryKey=function(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(r[t]=n)})),r}(0,s.query),s}class $ extends y.v{constructor(e,t={}){super(),this.writeBuffer=[],e&&"object"==typeof e&&(t=e,e=null),e?(e=H(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=H(t.host).host),_(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let e=0,n=r.length;e<n;e++){let n=r[e].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new V[e](r)}open(){let e;if(this.opts.rememberUpgrade&&$.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(e){let t=this.createTransport(e),r=!1;$.priorWebsocketSuccess=!1;const n=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!r)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;$.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{r||"closed"!==this.readyState&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function i(){r||(r=!0,u(),t.close(),t=null)}const s=e=>{const r=new Error("probe error: "+e);r.transport=t.name,i(),this.emitReserved("upgradeError",r)};function o(){s("transport closed")}function a(){s("socket closed")}function c(e){t&&e.name!==t.name&&i()}const u=()=>{t.removeListener("open",n),t.removeListener("error",s),t.removeListener("close",o),this.off("close",a),this.off("upgrading",c)};t.once("open",n),t.once("error",s),t.once("close",o),this.once("close",a),this.once("upgrading",c),t.open()}onOpen(){if(this.readyState="open",$.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let r=0;r<this.writeBuffer.length;r++){const n=this.writeBuffer[r].data;if(n&&(e+="string"==typeof(t=n)?function(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(t):Math.ceil(1.33*(t.byteLength||t.size))),r>0&&e>this.maxPayload)return this.writeBuffer.slice(0,r);e+=2}var t;return this.writeBuffer}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const i={type:e,data:t,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?r():e()})):this.upgrading?r():e()),this}onError(e){$.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let r=0;const n=e.length;for(;r<n;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}$.protocol=4;$.protocol},44554:function(e,t,r){"use strict";r.d(t,{BI:function(){return c}});r(77286);var n=r(48287),i=r(4017),s=r(56363);const o={get:(e,t)=>127&e[t+3]|e[t+2]<<7|e[t+1]<<14|e[t]<<21,len:4};var a=r(96055);async function c(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof e}\``);const t=e instanceof Uint8Array?e:new Uint8Array(e);if(t?.length>1)return l(s.vY(t))}function u(e,t,r){r={offset:0,...r};for(const[n,i]of t.entries())if(r.mask){if(i!==(r.mask[n]&e[n+r.offset]))return!1}else if(i!==e[n+r.offset])return!1;return!0}async function l(e){try{return(new h).parse(e)}catch(e){if(!(e instanceof s.d1))throw e}}class h{check(e,t){return u(this.buffer,e,t)}checkString(e,t){return this.check((r=e,[...r].map((e=>e.charCodeAt(0)))),t);var r}async parse(e){if(this.buffer=n.Buffer.alloc(4100),void 0===e.fileInfo.size&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);const t=await e.readToken(o);return e.position+t>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(t),l(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((67===this.buffer[0]||70===this.buffer[0])&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(this.buffer,{length:30});const r={compressedSize:this.buffer.readUInt32LE(18),uncompressedSize:this.buffer.readUInt32LE(22),filenameLength:this.buffer.readUInt16LE(26),extraFieldLength:this.buffer.readUInt16LE(28)};if(r.filename=await e.readToken(new i.cT(r.filenameLength,"utf-8")),await e.ignore(r.extraFieldLength),"META-INF/mozilla.rsa"===r.filename)return{ext:"xpi",mime:"application/x-xpinstall"};if(r.filename.endsWith(".rels")||r.filename.endsWith(".xml")){switch(r.filename.split("/")[0]){case"_rels":default:break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}}if(r.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(r.filename.startsWith("3D/")&&r.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if("mimetype"===r.filename&&r.compressedSize===r.uncompressedSize){let a=await e.readToken(new i.cT(r.compressedSize,"utf-8"));switch(a=a.trim(),a){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"}}}if(0===r.compressedSize){let c=-1;for(;c<0&&e.position<e.fileInfo.size;)await e.peekBuffer(this.buffer,{mayBeLess:!0}),c=this.buffer.indexOf("504B0304",0,"hex"),await e.ignore(c>=0?c:this.buffer.length)}else await e.ignore(r.compressedSize)}}catch(h){if(!(h instanceof s.d1))throw h}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);const d=n.Buffer.alloc(8);return await e.readBuffer(d),u(d,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:u(d,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:u(d,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:u(d,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:u(d,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:u(d,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(3===this.buffer[2]||5===this.buffer[2]||7===this.buffer[2])&&(4===this.buffer[3]||6===this.buffer[3]||8===this.buffer[3]))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&0!=(96&this.buffer[8])){const f=this.buffer.toString("binary",8,12).replace("\0"," ").trim();switch(f){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return f.startsWith("3g")?f.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await e.ignore(1350);const p=10485760,g=n.Buffer.alloc(Math.min(p,e.fileInfo.size));if(await e.readBuffer(g,{mayBeLess:!0}),g.includes(n.Buffer.from("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(m){if(!(m instanceof s.d1))throw m}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){const y=await this.readTiffHeader(!1);if(y)return y}if(this.check([77,77])){const b=await this.readTiffHeader(!0);if(b)return b}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function w(){const t=await e.peekNumber(i.hp);let r=128,s=0;for(;0==(t&r)&&0!==r;)++s,r>>=1;const o=n.Buffer.alloc(s+1);return await e.readBuffer(o),o}async function v(){const e=await w(),t=await w();t[0]^=128>>t.length-1;const r=Math.min(6,t.length);return{id:e.readUIntBE(0,e.length),len:t.readUIntBE(t.length-r,r)}}async function S(t){for(;t>0;){const r=await v();if(17026===r.id){return(await e.readToken(new i.cT(r.len,"utf-8"))).replace(/\00.*$/g,"")}await e.ignore(r.len),--t}}const _=await v();switch(await S(_.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(0===this.buffer[6]||1===this.buffer[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){const A=this.buffer.toString("binary",2,6);if(A.match("^d*")&&A>=1e3&&A<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>")){await e.ignore(8);return"debian-binary"===await e.readToken(new i.cT(13,"ascii"))?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"}}if(this.checkString("**ACE",{offset:7})&&(await e.peekBuffer(this.buffer,{length:14,mayBeLess:!0}),this.checkString("**",{offset:12})))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.check([137,80,78,71,13,10,26,10])){async function E(){return{length:await e.readToken(i.T9),type:await e.readToken(new i.cT(4,"binary"))}}await e.ignore(8);do{const x=await E();if(x.length<0)return;switch(x.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(x.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function k(){const t=n.Buffer.alloc(16);return await e.readBuffer(t),{id:t,size:Number(await e.readToken(i.D0))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const T=await k();let I=T.size-24;if(u(T.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const P=n.Buffer.alloc(16);if(I-=await e.readBuffer(P),u(P,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(u(P,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(I)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10])){await e.ignore(20);switch(await e.readToken(new i.cT(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){const R=this.buffer.readUInt32LE(12);if(R>12&&this.buffer.length>=R+16)try{const C=this.buffer.slice(16,R+16).toString();if(JSON.parse(C).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),function(e,t=0){const r=Number.parseInt(e.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(r))return!1;let n=256;for(let r=t;r<t+148;r++)n+=e[r];for(let r=t+156;r<t+512;r++)n+=e[r];return r===n}(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]}),{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(e){const t=await this.tokenizer.readToken(e?i.y7:i.aU);switch(this.tokenizer.ignore(10),t){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"}}}async readTiffIFD(e){const t=await this.tokenizer.readToken(e?i.y7:i.aU);for(let r=0;r<t;++r){const t=await this.readTiffTag(e);if(t)return t}}async readTiffHeader(e){const t=(e?i.y7:i.aU).get(this.buffer,2),r=(e?i.a2:i.M_).get(this.buffer,4);if(42===t){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}await this.tokenizer.ignore(r);return await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(43===t)return{ext:"tif",mime:"image/tiff"}}}new Set(a.X),new Set(a.O)},97907:function(e,t,r){"use strict";r.d(t,{l4:function(){return w}});const n={parse:JSON.parse,stringify:JSON.stringify};var i=r(64767),s=r(47169),o=r(29339);const a=e=>i(e)||null!==e&&"object"==typeof e&&"function"==typeof e.pipe;var c=(e,t,r,i=n)=>{const{clone:c,files:u}=s({query:e,variables:t,operationName:r},"",a);if(0===u.size){if(!Array.isArray(e))return i.stringify(c);if(void 0!==t&&!Array.isArray(t))throw new Error("Cannot create request body with given variable type, array expected");const r=e.reduce(((e,r,n)=>(e.push({query:r,variables:t?t[n]:void 0}),e)),[]);return i.stringify(r)}const l=new("undefined"==typeof FormData?o:FormData);l.append("operations",i.stringify(c));const h={};let d=0;return u.forEach((e=>{h[++d]=e})),l.append("map",i.stringify(h)),d=0,u.forEach(((e,t)=>{l.append(""+ ++d,t)})),l};var u=r(70350),l=r(75148);const h=e=>{let t;const r=e.definitions.filter((e=>"OperationDefinition"===e.kind));return 1===r.length&&(t=r[0]?.name?.value),t},d=e=>{if("string"==typeof e){let t;try{const r=(0,u.qg)(e);t=h(r)}catch(e){}return{query:e,operationName:t}}const t=h(e);return{query:(0,l.y)(e),operationName:t}};class f extends Error{constructor(e,t){super(`${f.extractMessage(e)}: ${JSON.stringify({response:e,request:t})}`),Object.setPrototypeOf(this,f.prototype),this.response=e,this.request=t,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,f)}static extractMessage(e){return e.errors?.[0]?.message??`GraphQL Error (Code: ${e.status})`}}var p=r(74945),g=r.t(p,2);r(96763);const m=e=>{let t={};return e&&("undefined"!=typeof Headers&&e instanceof Headers||g&&p.Headers&&e instanceof p.Headers?t=(e=>{const t={};return e.forEach(((e,r)=>{t[r]=e})),t})(e):Array.isArray(e)?e.forEach((([e,r])=>{e&&void 0!==r&&(t[e]=r)})):t=e),t},y=e=>e.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),b=e=>async t=>{const{url:r,query:i,variables:s,operationName:o,fetch:a,fetchOptions:u,middleware:l}=t,h={...t.headers};let d,f="";"POST"===e?(d=c(i,s,o,u.jsonSerializer),"string"==typeof d&&(h["Content-Type"]="application/json")):f=(e=>{if(!Array.isArray(e.query)){const t=e,r=[`query=${encodeURIComponent(y(t.query))}`];return e.variables&&r.push(`variables=${encodeURIComponent(t.jsonSerializer.stringify(t.variables))}`),t.operationName&&r.push(`operationName=${encodeURIComponent(t.operationName)}`),r.join("&")}if(void 0!==e.variables&&!Array.isArray(e.variables))throw new Error("Cannot create query with given variable type, array expected");const t=e,r=e.query.reduce(((e,r,n)=>(e.push({query:y(r),variables:t.variables?t.jsonSerializer.stringify(t.variables[n]):void 0}),e)),[]);return`query=${encodeURIComponent(t.jsonSerializer.stringify(r))}`})({query:i,variables:s,operationName:o,jsonSerializer:u.jsonSerializer??n});const p={method:e,headers:h,body:d,...u};let g=r,m=p;if(l){const e=await Promise.resolve(l({...p,url:r,operationName:o,variables:s})),{url:t,...n}=e;g=t,m=n}return f&&(g=`${g}?${f}`),await a(g,m)};class w{constructor(e,t={}){this.url=e,this.requestConfig=t,this.rawRequest=async(...e)=>{const[t,r,n]=e,i=((e,t,r)=>e.query?e:{query:e,variables:t,requestHeaders:r,signal:void 0})(t,r,n),{headers:s,fetch:o=p,method:a="POST",requestMiddleware:c,responseMiddleware:u,...l}=this.requestConfig,{url:h}=this;void 0!==i.signal&&(l.signal=i.signal);const{operationName:f}=d(i.query);return v({url:h,query:i.query,variables:i.variables,headers:{...m(_(s)),...m(i.requestHeaders)},operationName:f,fetch:o,method:a,fetchOptions:l,middleware:c}).then((e=>(u&&u(e),e))).catch((e=>{throw u&&u(e),e}))}}async request(e,...t){const[r,n]=t,i=((e,t,r)=>e.document?e:{document:e,variables:t,requestHeaders:r,signal:void 0})(e,r,n),{headers:s,fetch:o=p,method:a="POST",requestMiddleware:c,responseMiddleware:u,...l}=this.requestConfig,{url:h}=this;void 0!==i.signal&&(l.signal=i.signal);const{query:f,operationName:g}=d(i.document);return v({url:h,query:f,variables:i.variables,headers:{...m(_(s)),...m(i.requestHeaders)},operationName:g,fetch:o,method:a,fetchOptions:l,middleware:c}).then((e=>(u&&u(e),e.data))).catch((e=>{throw u&&u(e),e}))}batchRequests(e,t){const r=((e,t)=>e.documents?e:{documents:e,requestHeaders:t,signal:void 0})(e,t),{headers:n,...i}=this.requestConfig;void 0!==r.signal&&(i.signal=r.signal);const s=r.documents.map((({document:e})=>d(e).query)),o=r.documents.map((({variables:e})=>e));return v({url:this.url,query:s,variables:o,headers:{...m(_(n)),...m(r.requestHeaders)},operationName:void 0,fetch:this.requestConfig.fetch??p,method:this.requestConfig.method||"POST",fetchOptions:i,middleware:this.requestConfig.requestMiddleware}).then((e=>(this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(e),e.data))).catch((e=>{throw this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(e),e}))}setHeaders(e){return this.requestConfig.headers=e,this}setHeader(e,t){const{headers:r}=this.requestConfig;return r?r[e]=t:this.requestConfig.headers={[e]:t},this}setEndpoint(e){return this.url=e,this}}const v=async e=>{const{query:t,variables:r,fetchOptions:i}=e,s=b((e.method??"post").toUpperCase());const o=Array.isArray(e.query),a=await s(e),c=await S(a,i.jsonSerializer??n),u=Array.isArray(c)?!c.some((({data:e})=>!e)):Boolean(c.data),l=Array.isArray(c)||!c.errors||Array.isArray(c.errors)&&!c.errors.length||"all"===i.errorPolicy||"ignore"===i.errorPolicy;if(a.ok&&l&&u){const{errors:e,...t}=(Array.isArray(c),c),r="ignore"===i.errorPolicy?t:c;return{...o?{data:r}:r,headers:a.headers,status:a.status}}throw new f({..."string"==typeof c?{error:c}:c,status:a.status,headers:a.headers},{query:t,variables:r})};const S=async(e,t)=>{let r;return e.headers.forEach(((e,t)=>{"content-type"===t.toLowerCase()&&(r=e)})),r&&(r.toLowerCase().startsWith("application/json")||r.toLowerCase().startsWith("application/graphql+json")||r.toLowerCase().startsWith("application/graphql-response+json"))?t.parse(await e.text()):e.text()},_=e=>"function"==typeof e?e():e},16324:function(e,t,r){"use strict";r.d(t,{f:function(){return s},T:function(){return m}});var n=r(52669),i=r(16676);class s{constructor(e,t,r=0){this._options=e,this._popCount=0,this._parent=t,this._posAtParent=r,this._children=new n,this.key=null}async put(e,t){const r=await this._findNewBucketAndPos(e);await r.bucket._putAt(r,e,t)}async get(e){const t=await this._findChild(e);if(null!=t)return t.value}async del(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);null!=r&&r.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce(((e,t)=>t instanceof s?e+t.leafCount():e+1),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e)t instanceof s?yield*t.eachLeafSeries():yield t}serialize(e,t){return t(this._children.reduce(((r,n,i)=>(null!=n&&(n instanceof s?r.push(n.serialize(e,t)):r.push(e(n,i))),r)),[]))}async asyncTransform(e,t){return await u(this,e,t)}toJSON(){return this.serialize(a,c)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);if(!(r instanceof s))return null!=r&&r.key===e?r:void 0}async _findPlace(e){const t=this._options.hash("string"==typeof e?(0,i.s)(e):e),r=await t.take(this._options.bits),n=this._children.get(r);return n instanceof s?await n._findPlace(t):{bucket:this,pos:r,hash:t,existingChild:n}}async _findNewBucketAndPos(e){const t=await this._findPlace(e);if(null!=t.existingChild&&t.existingChild.key!==e){const e=new s(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const r=await e._findPlace(t.existingChild.hash);return r.bucket._putAt(r,t.existingChild.key,t.existingChild.value),await e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}_putObjectAt(e,t){null==this._children.get(e)&&this._popCount++,this._children.set(e,t)}_delAt(e){if(-1===e)throw new Error("Invalid position");null!=this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(null!=this._parent&&this._popCount<=1)if(1===this._popCount){const e=this._children.find(o);if(null!=e&&!(e instanceof s)){const t=e.hash;t.untake(this._options.bits);const r={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(r,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function o(e){return Boolean(e)}function a(e,t){return e.key}function c(e){return e}async function u(e,t,r){const n=[];for(const i of e._children.compactArray())if(i instanceof s)await u(i,t,r);else{const r=await t(i);n.push({bitField:e._children.bitField(),children:r})}return await r(n)}const l=[255,254,252,248,240,224,192,128],h=[1,3,7,15,31,63,127,255];class d{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(e){let t=e,r=0;for(;t>0&&this._haveBits();){const e=this._value[this._currentBytePos],n=this._currentBitPos+1,i=Math.min(n,t);r=(r<<i)+f(e,n-i,i),t-=i,this._currentBitPos-=i,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return r}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}function f(e,t,r){const n=function(e,t){return l[e]&h[Math.min(t+e-1,7)]}(t,r);return(e&n)>>>t}var p=r(44008);class g{constructor(e,t){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let r=0;for(;t>0;){const e=this._buffers[this._currentBufferIndex],n=Math.min(e.availableBits(),t);r=(r<<n)+e.take(n),t-=n,this._availableBits-=n,0===e.availableBits()&&this._currentBufferIndex++}return r}untake(e){let t=e;for(;t>0;){const e=this._buffers[this._currentBufferIndex],r=Math.min(e.totalBits()-e.availableBits(),t);e.untake(r),t-=r,this._availableBits+=r,this._currentBufferIndex>0&&e.totalBits()===e.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth>0?(0,p.x)([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),r=new d(t);this._buffers.push(r),this._availableBits+=r.availableBits()}}function m(e){if(null==e||null==e.hashFn)throw new Error("please define an options.hashFn");const t={bits:e.bits??8,hash:(r=e.hashFn,function(e){return e instanceof g?e:new g(e,r)})};var r;return new s(t)}}}]);
//# sourceMappingURL=748.2250a551.chunk.js.map