/*! For license information please see 492.abbaca81.chunk.js.LICENSE.txt */
!function(){var e,t,n={76005:function(e,t,n){"use strict";var r=n(88178);var o=n(48094);var i=n(71715);var a=n(92297);var s=n(33090);var c=n(57098);var u=n(88993);var l=n(98707);var f=n(4707);var h=n(82098)},44917:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toUtf8=t.fromUtf8=t.toRfc3339=t.fromRfc3339=t.toHex=t.fromHex=t.toBech32=t.normalizeBech32=t.fromBech32=t.toBase64=t.fromBase64=t.toAscii=t.fromAscii=void 0;var r=n(1718);Object.defineProperty(t,"fromAscii",{enumerable:!0,get:function(){return r.fromAscii}}),Object.defineProperty(t,"toAscii",{enumerable:!0,get:function(){return r.toAscii}});var o=n(18594);Object.defineProperty(t,"fromBase64",{enumerable:!0,get:function(){return o.fromBase64}}),Object.defineProperty(t,"toBase64",{enumerable:!0,get:function(){return o.toBase64}});var i=n(50714);Object.defineProperty(t,"fromBech32",{enumerable:!0,get:function(){return i.fromBech32}}),Object.defineProperty(t,"normalizeBech32",{enumerable:!0,get:function(){return i.normalizeBech32}}),Object.defineProperty(t,"toBech32",{enumerable:!0,get:function(){return i.toBech32}});var a=n(71028);Object.defineProperty(t,"fromHex",{enumerable:!0,get:function(){return a.fromHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return a.toHex}});var s=n(71466);Object.defineProperty(t,"fromRfc3339",{enumerable:!0,get:function(){return s.fromRfc3339}}),Object.defineProperty(t,"toRfc3339",{enumerable:!0,get:function(){return s.toRfc3339}});var c=n(7290);Object.defineProperty(t,"fromUtf8",{enumerable:!0,get:function(){return c.fromUtf8}}),Object.defineProperty(t,"toUtf8",{enumerable:!0,get:function(){return c.toUtf8}})},51298:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Uint64=t.Uint53=t.Uint32=t.Int53=t.Decimal=void 0;var r=n(75173);Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return r.Decimal}});var o=n(80887);Object.defineProperty(t,"Int53",{enumerable:!0,get:function(){return o.Int53}}),Object.defineProperty(t,"Uint32",{enumerable:!0,get:function(){return o.Uint32}}),Object.defineProperty(t,"Uint53",{enumerable:!0,get:function(){return o.Uint53}}),Object.defineProperty(t,"Uint64",{enumerable:!0,get:function(){return o.Uint64}})},69674:function(e){"use strict";for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",n={},r=0;r<t.length;r++){var o=t.charAt(r);if(void 0!==n[o])throw new TypeError(o+" is ambiguous");n[o]=r}function i(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function a(e){for(var t=1,n=0;n<e.length;++n){var r=e.charCodeAt(n);if(r<33||r>126)return"Invalid prefix ("+e+")";t=i(t)^r>>5}for(t=i(t),n=0;n<e.length;++n){var o=e.charCodeAt(n);t=i(t)^31&o}return t}function s(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),o=e.toUpperCase();if(e!==r&&e!==o)return"Mixed-case string "+e;var s=(e=r).lastIndexOf("1");if(-1===s)return"No separator character for "+e;if(0===s)return"Missing prefix for "+e;var c=e.slice(0,s),u=e.slice(s+1);if(u.length<6)return"Data too short";var l=a(c);if("string"==typeof l)return l;for(var f=[],h=0;h<u.length;++h){var d=u.charAt(h),p=n[d];if(void 0===p)return"Unknown character "+d;l=i(l)^p,h+6>=u.length||f.push(p)}return 1!==l?"Invalid checksum for "+e:{prefix:c,words:f}}function c(e,t,n,r){for(var o=0,i=0,a=(1<<n)-1,s=[],c=0;c<e.length;++c)for(o=o<<t|e[c],i+=t;i>=n;)i-=n,s.push(o>>i&a);if(r)i>0&&s.push(o<<n-i&a);else{if(i>=t)return"Excess padding";if(o<<n-i&a)return"Non-zero padding"}return s}e.exports={decodeUnsafe:function(){var e=s.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=s.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,n,r){if(r=r||90,e.length+7+n.length>r)throw new TypeError("Exceeds length limit");var o=a(e=e.toLowerCase());if("string"==typeof o)throw new Error(o);for(var s=e+"1",c=0;c<n.length;++c){var u=n[c];if(u>>5!=0)throw new Error("Non 5-bit word");o=i(o)^u,s+=t.charAt(u)}for(c=0;c<6;++c)o=i(o);for(o^=1,c=0;c<6;++c){s+=t.charAt(o>>5*(5-c)&31)}return s},toWordsUnsafe:function(e){var t=c(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=c(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=c(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=c(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}}},48287:function(e,t,n){"use strict";var r=n(96763),o=n(67526),i=n(251),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50;var s=2147483647;function c(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|y(e,t),r=c(n),o=r.write(e,t);o!==n&&(r=r.slice(0,o));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(H(e,Uint8Array)){var t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(H(e,ArrayBuffer)||e&&H(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(H(e,SharedArrayBuffer)||e&&H(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return u.from(r,t,n);var o=function(e){if(u.isBuffer(e)){var t=0|g(e.length),n=c(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||q(e.length)?c(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return f(e),c(e<0?0:0|g(e))}function d(e){for(var t=e.length<0?0:0|g(e.length),n=c(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,u.prototype),r}function g(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function y(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||H(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(o)return r?-1:D(e).length;t=(""+t).toLowerCase(),o=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function w(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),q(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,o){var i,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var f=!0,h=0;h<c;h++)if(u(e,i+h)!==u(t,h)){f=!1;break}if(f)return i}return-1}function v(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(q(s))return a;e[n+a]=s}return a}function E(e,t,n,r){return $(D(t,e.length-n),e,n,r)}function S(e,t,n,r){return $(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function O(e,t,n,r){return $(z(t),e,n,r)}function A(e,t,n,r){return $(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?o.fromByteArray(e):o.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,c,u=e[o],l=null,f=u>239?4:u>223?3:u>191?2:1;if(o+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&u)<<6|63&i)>127&&(l=c);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(c=(15&u)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}t.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||void 0===r||"function"!=typeof r.error||r.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,n){return function(e,t,n){return f(e),e<=0?c(e):void 0!==t?"string"==typeof n?c(e).fill(t,n):c(e).fill(t):c(e)}(e,t,n)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(H(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),H(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(H(i,Uint8Array))o+i.length>r.length?u.from(i).copy(r,o):Uint8Array.prototype.set.call(r,i,o);else{if(!u.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o)}o+=i.length}return r},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(e,t,n,r,o){if(H(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),c=this.slice(r,o),l=e.slice(t,n),f=0;f<s;++f)if(c[f]!==l[f]){i=c[f],a=l[f];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return w(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return w(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":case"latin1":case"binary":return S(this,e,t,n);case"base64":return O(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function I(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function L(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function x(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=F[e[i]];return o}function N(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function B(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,o,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,o){return t=+t,n>>>=0,o||U(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,o){return t=+t,n>>>=0,o||U(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||B(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){e>>>=0,t||B(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||B(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||B(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||B(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||B(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);P(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);P(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=u.isBuffer(e)?e:u.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var M=/[^+/0-9A-Za-z-_]/g;function D(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function z(e){return o.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function H(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!=e}var F=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,o=0;o<16;++o)t[r+o]=e[n]+e[o];return t}()},25948:function(e,t,n){"use strict";n.d(t,{yD:function(){return I},Ay:function(){return B}});let r=null,o=null,i=0,a=null,s=!1;function c(e){return new Promise(((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=e=>n(e.error)}))}async function u(e,t,n){return a=n,await async function(e,t){return o=t,new Promise(((n,o)=>{const i=indexedDB.open(e,1);i.onupgradeneeded=function(e){const n=e.target.result;n.objectStoreNames.contains(t)||n.createObjectStore(t)},i.onsuccess=function(e){r=e.target.result,n(r)},i.onerror=function(e){o(e.error)}}))}(e,t),await async function(){return new Promise(((e,t)=>{const n=r.transaction(o,"readonly").objectStore(o),i=c(n.getAll()),a=c(n.getAllKeys());Promise.all([a,i]).then((t=>{const n=t[0].map((e=>new Uint8Array(e))),r=t[1];e([n,r])})).catch(t)}))}()}e=n.hmd(e);var l=n(96763);let f;const h=new Array(128).fill(void 0);function d(e){return h[e]}h.push(void 0,null,!0,!1);let p=h.length;function g(e){const t=d(e);return function(e){e<132||(h[e]=p,p=e)}(e),t}const y="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&y.decode();let m=null;function b(){return null!==m&&0!==m.byteLength||(m=new Uint8Array(f.memory.buffer)),m}function w(e,t){return e>>>=0,y.decode(b().subarray(e,e+t))}function _(e){p===h.length&&h.push(h.length+1);const t=p;return p=h[t],h[t]=e,t}function v(e,t,n){f.wasm_bindgen__convert__closures__invoke1_mut__hd17e34166836fd48(e,t,_(n))}let E=0;const S="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},O="function"==typeof S.encodeInto?function(e,t){return S.encodeInto(e,t)}:function(e,t){const n=S.encode(e);return t.set(n),{read:e.length,written:n.length}};function A(e,t,n){if(void 0===n){const n=S.encode(e),r=t(n.length,1)>>>0;return b().subarray(r,r+n.length).set(n),E=n.length,r}let r=e.length,o=t(r,1)>>>0;const i=b();let a=0;for(;a<r;a++){const t=e.charCodeAt(a);if(t>127)break;i[o+a]=t}if(a!==r){0!==a&&(e=e.slice(a)),o=n(o,r,r=a+3*e.length,1)>>>0;const t=b().subarray(o+a,o+r);a+=O(e,t).written}return E=a,o}let T=null;function k(){return null!==T&&0!==T.byteLength||(T=new Int32Array(f.memory.buffer)),T}function C(e,t){try{return e.apply(this,t)}catch(e){f.__wbindgen_exn_store(_(e))}}class I{static __wrap(e){e>>>=0;const t=Object.create(I.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();f.__wbg_cozodb_free(e)}static new(){const e=f.cozodb_new();return I.__wrap(e)}static new_from_indexed_db(e,t,n){const r=A(e,f.__wbindgen_malloc,f.__wbindgen_realloc),o=E,i=A(t,f.__wbindgen_malloc,f.__wbindgen_realloc),a=E;return g(f.cozodb_new_from_indexed_db(r,o,i,a,_(n)))}run(e,t,n){const r=A(e,f.__wbindgen_malloc,f.__wbindgen_realloc),o=E,i=A(t,f.__wbindgen_malloc,f.__wbindgen_realloc),a=E;return g(f.cozodb_run(this.__wbg_ptr,r,o,i,a,n))}export_relations(e){let t,n;try{const i=f.__wbindgen_add_to_stack_pointer(-16),a=A(e,f.__wbindgen_malloc,f.__wbindgen_realloc),s=E;f.cozodb_export_relations(i,this.__wbg_ptr,a,s);var r=k()[i/4+0],o=k()[i/4+1];return t=r,n=o,w(r,o)}finally{f.__wbindgen_add_to_stack_pointer(16),f.__wbindgen_free(t,n,1)}}import_relations(e){let t,n;try{const i=f.__wbindgen_add_to_stack_pointer(-16),a=A(e,f.__wbindgen_malloc,f.__wbindgen_realloc),s=E;f.cozodb_import_relations(i,this.__wbg_ptr,a,s);var r=k()[i/4+0],o=k()[i/4+1];return t=r,n=o,w(r,o)}finally{f.__wbindgen_add_to_stack_pointer(16),f.__wbindgen_free(t,n,1)}}}function L(){const t={wbg:{}};return t.wbg.__wbindgen_object_drop_ref=function(e){g(e)},t.wbg.__wbg_log_b78d654f19d681e0=function(e,t){l.log(w(e,t))},t.wbg.__wbg_loadAllFromIndexedDb_05f8df9a19c8d344=function(e,t,n,r,o){return _(u(w(e,t),w(n,r),d(o)))},t.wbg.__wbg_flushPendingWrites_dd4341a0dafcf428=function(){return _(async function(e=6e4){let t=null;s&&await new Promise(((e,t)=>{const n=setInterval((()=>{s||(clearInterval(n),e())}),10)})),s=!0;const n=new Promise(((e,n)=>{const r=setInterval((()=>{i<=0&&(t&&clearTimeout(t),clearInterval(r),e())}),10)})),r=new Promise(((n,r)=>{t=setTimeout((()=>{r(new Error("waitForPendingWrites timed out!"))}),e)}));return Promise.race([n,r]).finally((()=>{s=!1}))}())},t.wbg.__wbindgen_string_new=function(e,t){return _(w(e,t))},t.wbg.__wbg_cozodb_new=function(e){return _(I.__wrap(e))},t.wbg.__wbindgen_cb_drop=function(e){const t=g(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},t.wbg.__wbg_new_abda76e883ba8a5f=function(){return _(new Error)},t.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const n=A(d(t).stack,f.__wbindgen_malloc,f.__wbindgen_realloc),r=E;k()[e/4+1]=r,k()[e/4+0]=n},t.wbg.__wbg_error_f851667af71bcfc6=function(e,t){let n,r;try{n=e,r=t,l.error(w(e,t))}finally{f.__wbindgen_free(n,r,1)}},t.wbg.__wbg_setWriteCounter_295838a9805b3542=function(e){i=e>>>0},t.wbg.__wbg_writeToIndexedDb_ec8ba47108ce4d3a=function(e,t){return _(async function(e,t){return new Promise(((n,s)=>{const u=r.transaction(o,"readwrite").objectStore(o);return c(t?u.put(t,e):u.delete(e)).then(n).catch(s).finally((()=>{i--,a&&a(i)}))}))}(d(e),d(t)))},t.wbg.__wbg_crypto_c48a774b022d20ac=function(e){return _(d(e).crypto)},t.wbg.__wbindgen_is_object=function(e){const t=d(e);return"object"==typeof t&&null!==t},t.wbg.__wbg_process_298734cf255a885d=function(e){return _(d(e).process)},t.wbg.__wbg_versions_e2e78e134e3e5d01=function(e){return _(d(e).versions)},t.wbg.__wbg_node_1cd7a5d853dbea79=function(e){return _(d(e).node)},t.wbg.__wbindgen_is_string=function(e){return"string"==typeof d(e)},t.wbg.__wbg_msCrypto_bcb970640f50a1e8=function(e){return _(d(e).msCrypto)},t.wbg.__wbg_require_8f08ceecec0f4fee=function(){return C((function(){return _(e.require)}),arguments)},t.wbg.__wbindgen_is_function=function(e){return"function"==typeof d(e)},t.wbg.__wbg_randomFillSync_dc1e9a60c158336d=function(){return C((function(e,t){d(e).randomFillSync(g(t))}),arguments)},t.wbg.__wbg_getRandomValues_37fa2ca9e4e07fab=function(){return C((function(e,t){d(e).getRandomValues(d(t))}),arguments)},t.wbg.__wbg_get_44be0491f933a435=function(e,t){return _(d(e)[t>>>0])},t.wbg.__wbg_length_fff51ee6522a1a18=function(e){return d(e).length},t.wbg.__wbg_newnoargs_581967eacc0e2604=function(e,t){return _(new Function(w(e,t)))},t.wbg.__wbg_call_cb65541d95d71282=function(){return C((function(e,t){return _(d(e).call(d(t)))}),arguments)},t.wbg.__wbindgen_object_clone_ref=function(e){return _(d(e))},t.wbg.__wbg_self_1ff1d729e9aae938=function(){return C((function(){return _(self.self)}),arguments)},t.wbg.__wbg_window_5f4faef6c12b79ec=function(){return C((function(){return _(window.window)}),arguments)},t.wbg.__wbg_globalThis_1d39714405582d3c=function(){return C((function(){return _(globalThis.globalThis)}),arguments)},t.wbg.__wbg_global_651f05c6a0944d1c=function(){return C((function(){return _(n.g.global)}),arguments)},t.wbg.__wbindgen_is_undefined=function(e){return void 0===d(e)},t.wbg.__wbg_isArray_4c24b343cb13cfb1=function(e){return Array.isArray(d(e))},t.wbg.__wbg_call_01734de55d61e11d=function(){return C((function(e,t,n){return _(d(e).call(d(t),d(n)))}),arguments)},t.wbg.__wbg_now_9c5990bda04c7e53=function(){return Date.now()},t.wbg.__wbg_new_43f1b47c28813cbd=function(e,t){try{var n={a:e,b:t};const r=new Promise(((e,t)=>{const r=n.a;n.a=0;try{return function(e,t,n,r){f.wasm_bindgen__convert__closures__invoke2_mut__h62fdc46dd4e23c5d(e,t,_(n),_(r))}(r,n.b,e,t)}finally{n.a=r}}));return _(r)}finally{n.a=n.b=0}},t.wbg.__wbg_resolve_53698b95aaf7fcf8=function(e){return _(Promise.resolve(d(e)))},t.wbg.__wbg_then_f7e06ee3c11698eb=function(e,t){return _(d(e).then(d(t)))},t.wbg.__wbg_then_b2267541e2a73865=function(e,t,n){return _(d(e).then(d(t),d(n)))},t.wbg.__wbg_buffer_085ec1f694018c4f=function(e){return _(d(e).buffer)},t.wbg.__wbg_newwithbyteoffsetandlength_6da8e527659b86aa=function(e,t,n){return _(new Uint8Array(d(e),t>>>0,n>>>0))},t.wbg.__wbg_new_8125e318e6245eed=function(e){return _(new Uint8Array(d(e)))},t.wbg.__wbg_set_5cf90238115182c3=function(e,t,n){d(e).set(d(t),n>>>0)},t.wbg.__wbg_length_72e2208bbc0efc61=function(e){return d(e).length},t.wbg.__wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4=function(e){let t;try{t=d(e)instanceof Uint8Array}catch{t=!1}return t},t.wbg.__wbg_newwithlength_e5d69174d6984cd7=function(e){return _(new Uint8Array(e>>>0))},t.wbg.__wbg_subarray_13db269f57aa838d=function(e,t,n){return _(d(e).subarray(t>>>0,n>>>0))},t.wbg.__wbindgen_throw=function(e,t){throw new Error(w(e,t))},t.wbg.__wbindgen_memory=function(){return _(f.memory)},t.wbg.__wbindgen_closure_wrapper186=function(e,t,n){const r=function(e,t,n,r){const o={a:e,b:t,cnt:1,dtor:n},i=(...e)=>{o.cnt++;const t=o.a;o.a=0;try{return r(t,o.b,...e)}finally{0==--o.cnt?f.__wbindgen_export_0.get(o.dtor)(t,o.b):o.a=t}};return i.original=o,i}(e,t,87,v);return _(r)},t}function x(e,t){return f=e.exports,N.__wbindgen_wasm_module=t,T=null,m=null,f}async function N(e){if(void 0!==f)return f;void 0===e&&(e=new URL(n(58689),n.b));const t=L();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:o}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;l.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return x(r,o)}var B=N},26160:function(e,t,n){"use strict";var r=n(25948),o=n(2543),i=n.n(o);const a="CYBLOG_BROADCST_CHANNEL";var s=n(96763);const c=[];!function(e={}){let t={};function n(n,r,a=e){try{const e=a?.formatter?a?.formatter(r):r;!function(e,t=!0){for(c.push(e);t&&c.length>1e3;)c.shift()}({timestamp:new Date,level:n,message:e,stacktrace:a?.stacktrace,context:i().omit(a,["formatter","stacktrace"])});Object.keys(t).reduce(((e,n)=>{const r=t[n],o=a[n];return r&&o?e||"all"===r||0===r.length||r.some((e=>e===o)):e}),!1)&&function(e,t,n){const r=i().omit(n,["formatter","thread","module","unit","data"]),{thread:a="",module:c="",unit:u="",data:l=""}=n,f=(0,o.isEmpty)(r)?"":r;Array.isArray(t)?s[e](...t,f):n?.formatter?s[e](n?.formatter(t),f):s[e](`[${a}:${c}:${u}] ${t}`,l,f)}(n,r,a)}catch(e){s.log("cyblog error",e)}}new BroadcastChannel(a).onmessage=e=>{"params"===e.data.type&&(t={...t,...e.data.value})}}({thread:"main"});class u extends Error{constructor(e){const{message:t,code:n,display:r,severity:o}=e;super(t),this.code=n,this.display=r,this.severity=o}}var l=n(96763);const f=(e,t)=>`[${t.map((t=>{const n=t.column,r=e[n];return/<[a-z]+\d*;\d+>/i.test(t.type)?`[${r}]`:"Json"===t.type?`parse_json('${JSON.stringify(r)}')`:"String"===t.type?`"${o=r,o.replace(/\\/g,"\\\\").replace(/"/g,"\\''").replace(/'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/#/g,"\\!!")}"`:r;var o})).join(", ")}]`;var h="{\n    :create pin {\n        cid: String =>\n        type: Int\n    }\n}\n{\n    :create particle {\n        cid: String =>\n        mime: String,\n        text: String,\n        blocks: Int,\n        size: Int,\n        size_local: Int,\n        type: String\n    }\n}\n\n{\n    :create link {\n        from: String,\n        to: String,\n        neuron: String =>\n        timestamp: Int,\n        transaction_hash: String default ''\n    }\n}\n{\n    :create transaction {\n        hash: String,\n        index: Int,\n        neuron: String,\n        type: String =>\n        block_height: Int,\n        success: Bool,\n        timestamp: Int,\n        value: Json,\n        memo: String\n    }\n}\n\n{\n    :create sync_status {\n        owner_id: String,\n        id: String =>\n        entry_type: Int,\n        disabled: Bool,\n        timestamp_update: Int,\n        timestamp_read: Int,\n        unread_count: Int,\n        meta: Json\n    }\n}\n\n{\n    :create config {\n        key: String,\n        group_key: String =>\n        value: Json\n    }\n}\n\n{\n    :create sync_queue {\n        id: String,\n        job_type: Int =>\n        data: String default '',\n        status: Int default 0,\n        priority: Float default 0,\n    }\n}\n\n{\n    :create community {\n        owner_id: String,\n        neuron: String =>\n        particle: String,\n        name: String default '',\n        following: Bool,\n        follower: Bool\n    }\n}\n{\n    :create embeddings {\n        cid: String =>\n        vec: <F32; 384>\n    }\n}\n{\n    ::hnsw create embeddings:semantic{\n        fields: [vec],\n        dim: 384,\n        ef: 100,\n        m: 16\n    }\n}",d=n(71083),p=(e=>(e.BOSTROM="bostrom",e.LOCAL_BOSTROM="localbostrom",e.SPACE_PUSSY="space-pussy",e.ETH="eth",e.OSMO="osmo",e.TERRA="terra",e.COSMOS="cosmoshub-4",e))(p||{});var g={bostrom:{CHAIN_ID:p.BOSTROM,BASE_DENOM:"boot",DENOM_LIQUID:"hydrogen",RPC_URL:"https://rpc.bostrom.cybernode.ai",LCD_URL:"https://lcd.bostrom.cybernode.ai",WEBSOCKET_URL:"wss://rpc.bostrom.cybernode.ai/websocket",INDEX_HTTPS:"https://index.bostrom.cybernode.ai/v1/graphql",INDEX_WEBSOCKET:"wss://index.bostrom.cybernode.ai/v1/graphql",BECH32_PREFIX:"bostrom",MEMO_KEPLR:"[bostrom] cyb.ai, using keplr"},localbostrom:{CHAIN_ID:p.LOCAL_BOSTROM,BASE_DENOM:"boot",DENOM_LIQUID:"hydrogen",RPC_URL:"https://rpc.bostrom.moon.cybernode.ai",LCD_URL:"https://lcd.bostrom.moon.cybernode.ai",WEBSOCKET_URL:"wss://rpc.bostrom.moon.cybernode.ai/websocket",INDEX_HTTPS:"https://index.bostrom.moon.cybernode.ai/v1/graphql",INDEX_WEBSOCKET:"wss://index.bostrom.moon.cybernode.ai/v1/graphql",BECH32_PREFIX:"bostrom",MEMO_KEPLR:"[bostrom] cyb.ai, using keplr"},"space-pussy":{CHAIN_ID:p.SPACE_PUSSY,BASE_DENOM:"pussy",DENOM_LIQUID:"liquidpussy",RPC_URL:"https://rpc.space-pussy.cybernode.ai/",LCD_URL:"https://lcd.space-pussy.cybernode.ai",WEBSOCKET_URL:"wss://rpc.space-pussy.cybernode.ai/websocket",INDEX_HTTPS:"https://index.space-pussy.cybernode.ai/v1/graphql",INDEX_WEBSOCKET:"wss://index.space-pussy.cybernode.ai/v1/graphql",BECH32_PREFIX:"pussy",MEMO_KEPLR:"[space-pussy] cyb.ai, using keplr"}};function y(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}const m=!y()&&localStorage.getItem("chainId")||"bostrom",b=g[m].LCD_URL,w=(g[m].RPC_URL,g[m].WEBSOCKET_URL,g[m].INDEX_HTTPS,g[m].INDEX_WEBSOCKET,g[m].BECH32_PREFIX),_=`${w}val`,v=`${_}oper`,{MEMO_KEPLR:E}=(g[m].BASE_DENOM,g[m].DENOM_LIQUID,g[m]);new RegExp(`^${w}[a-zA-Z0-9]{39}$`,"g"),new RegExp(`^${w}[a-zA-Z0-9]{59}$`,"g"),new RegExp(`^${v}valoper[a-zA-Z0-9]{39}$`,"g");n(22322),n(47095),n(62045).hp;n(69674),n(44917),n(76005);var S=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,O=Math.ceil,A=Math.floor,T="[BigNumber Error] ",k=T+"Number primitive has more than 15 significant digits: ",C=1e14,I=14,L=9007199254740991,x=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],N=1e7,B=1e9;function P(e){var t=0|e;return e>0||e===t?t:t-1}function U(e){for(var t,n,r=1,o=e.length,i=e[0]+"";r<o;){for(t=e[r++]+"",n=I-t.length;n--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function j(e,t){var n,r,o=e.c,i=t.c,a=e.s,s=t.s,c=e.e,u=t.e;if(!a||!s)return null;if(n=o&&!o[0],r=i&&!i[0],n||r)return n?r?0:-s:a;if(a!=s)return a;if(n=a<0,r=c==u,!o||!i)return r?0:!o^n?1:-1;if(!r)return c>u^n?1:-1;for(s=(c=o.length)<(u=i.length)?c:u,a=0;a<s;a++)if(o[a]!=i[a])return o[a]>i[a]^n?1:-1;return c==u?0:c>u^n?1:-1}function R(e,t,n,r){if(e<t||e>n||e!==A(e))throw Error(T+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function M(e){var t=e.c.length-1;return P(e.e/I)==t&&e.c[t]%2!=0}function D(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function z(e,t,n){var r,o;if(t<0){for(o=n+".";++t;o+=n);e=o+e}else if(++t>(r=e.length)){for(o=n,t-=r;--t;o+=n);e+=o}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}(function e(t){var n,r,o,i,a,s,c,u,l,f,h=F.prototype={constructor:F,toString:null,valueOf:null},d=new F(1),p=20,g=4,y=-7,m=21,b=-1e7,w=1e7,_=!1,v=1,E=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",q=!0;function F(e,t){var n,i,a,s,c,u,l,f,h=this;if(!(h instanceof F))return new F(e,t);if(null==t){if(e&&!0===e._isBigNumber)return h.s=e.s,void(!e.c||e.e>w?h.c=h.e=null:e.e<b?h.c=[h.e=0]:(h.e=e.e,h.c=e.c.slice()));if((u="number"==typeof e)&&0*e==0){if(h.s=1/e<0?(e=-e,-1):1,e===~~e){for(s=0,c=e;c>=10;c/=10,s++);return void(s>w?h.c=h.e=null:(h.e=s,h.c=[e]))}f=String(e)}else{if(!S.test(f=String(e)))return o(h,f,u);h.s=45==f.charCodeAt(0)?(f=f.slice(1),-1):1}(s=f.indexOf("."))>-1&&(f=f.replace(".","")),(c=f.search(/e/i))>0?(s<0&&(s=c),s+=+f.slice(c+1),f=f.substring(0,c)):s<0&&(s=f.length)}else{if(R(t,2,H.length,"Base"),10==t&&q)return V(h=new F(e),p+h.e+1,g);if(f=String(e),u="number"==typeof e){if(0*e!=0)return o(h,f,u,t);if(h.s=1/e<0?(f=f.slice(1),-1):1,F.DEBUG&&f.replace(/^0\.0*|\./,"").length>15)throw Error(k+e)}else h.s=45===f.charCodeAt(0)?(f=f.slice(1),-1):1;for(n=H.slice(0,t),s=c=0,l=f.length;c<l;c++)if(n.indexOf(i=f.charAt(c))<0){if("."==i){if(c>s){s=l;continue}}else if(!a&&(f==f.toUpperCase()&&(f=f.toLowerCase())||f==f.toLowerCase()&&(f=f.toUpperCase()))){a=!0,c=-1,s=0;continue}return o(h,String(e),u,t)}u=!1,(s=(f=r(f,t,10,h.s)).indexOf("."))>-1?f=f.replace(".",""):s=f.length}for(c=0;48===f.charCodeAt(c);c++);for(l=f.length;48===f.charCodeAt(--l););if(f=f.slice(c,++l)){if(l-=c,u&&F.DEBUG&&l>15&&(e>L||e!==A(e)))throw Error(k+h.s*e);if((s=s-c-1)>w)h.c=h.e=null;else if(s<b)h.c=[h.e=0];else{if(h.e=s,h.c=[],c=(s+1)%I,s<0&&(c+=I),c<l){for(c&&h.c.push(+f.slice(0,c)),l-=I;c<l;)h.c.push(+f.slice(c,c+=I));c=I-(f=f.slice(c)).length}else c-=l;for(;c--;f+="0");h.c.push(+f)}}else h.c=[h.e=0]}function W(e,t,n,r){var o,i,a,s,c;if(null==n?n=g:R(n,0,8),!e.c)return e.toString();if(o=e.c[0],a=e.e,null==t)c=U(e.c),c=1==r||2==r&&(a<=y||a>=m)?D(c,a):z(c,a,"0");else if(i=(e=V(new F(e),t,n)).e,s=(c=U(e.c)).length,1==r||2==r&&(t<=i||i<=y)){for(;s<t;c+="0",s++);c=D(c,i)}else if(t-=a,c=z(c,i,"0"),i+1>s){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=i-s)>0)for(i+1==s&&(c+=".");t--;c+="0");return e.s<0&&o?"-"+c:c}function G(e,t){for(var n,r=1,o=new F(e[0]);r<e.length;r++){if(!(n=new F(e[r])).s){o=n;break}t.call(o,n)&&(o=n)}return o}function X(e,t,n){for(var r=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,r++);return(n=r+n*I-1)>w?e.c=e.e=null:n<b?e.c=[e.e=0]:(e.e=n,e.c=t),e}function V(e,t,n,r){var o,i,a,s,c,u,l,f=e.c,h=x;if(f){e:{for(o=1,s=f[0];s>=10;s/=10,o++);if((i=t-o)<0)i+=I,a=t,l=(c=f[u=0])/h[o-a-1]%10|0;else if((u=O((i+1)/I))>=f.length){if(!r)break e;for(;f.length<=u;f.push(0));c=l=0,o=1,a=(i%=I)-I+1}else{for(c=s=f[u],o=1;s>=10;s/=10,o++);l=(a=(i%=I)-I+o)<0?0:c/h[o-a-1]%10|0}if(r=r||t<0||null!=f[u+1]||(a<0?c:c%h[o-a-1]),r=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(i>0?a>0?c/h[o-a]:0:f[u-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,r?(t-=e.e+1,f[0]=h[(I-t%I)%I],e.e=-t||0):f[0]=e.e=0,e;if(0==i?(f.length=u,s=1,u--):(f.length=u+1,s=h[I-i],f[u]=a>0?A(c/h[o-a]%h[a])*s:0),r)for(;;){if(0==u){for(i=1,a=f[0];a>=10;a/=10,i++);for(a=f[0]+=s,s=1;a>=10;a/=10,s++);i!=s&&(e.e++,f[0]==C&&(f[0]=1));break}if(f[u]+=s,f[u]!=C)break;f[u--]=0,s=1}for(i=f.length;0===f[--i];f.pop());}e.e>w?e.c=e.e=null:e.e<b&&(e.c=[e.e=0])}return e}function J(e){var t,n=e.e;return null===n?e.toString():(t=U(e.c),t=n<=y||n>=m?D(t,n):z(t,n,"0"),e.s<0?"-"+t:t)}return F.clone=e,F.ROUND_UP=0,F.ROUND_DOWN=1,F.ROUND_CEIL=2,F.ROUND_FLOOR=3,F.ROUND_HALF_UP=4,F.ROUND_HALF_DOWN=5,F.ROUND_HALF_EVEN=6,F.ROUND_HALF_CEIL=7,F.ROUND_HALF_FLOOR=8,F.EUCLID=9,F.config=F.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(T+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(R(n=e[t],0,B,t),p=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(R(n=e[t],0,8,t),g=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(R(n[0],-B,0,t),R(n[1],0,B,t),y=n[0],m=n[1]):(R(n,-B,B,t),y=-(m=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)R(n[0],-B,-1,t),R(n[1],1,B,t),b=n[0],w=n[1];else{if(R(n,-B,B,t),!n)throw Error(T+t+" cannot be zero: "+n);b=-(w=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(T+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw _=!n,Error(T+"crypto unavailable");_=n}else _=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(R(n=e[t],0,9,t),v=n),e.hasOwnProperty(t="POW_PRECISION")&&(R(n=e[t],0,B,t),E=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(T+t+" not an object: "+n);$=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(T+t+" invalid: "+n);q="0123456789"==n.slice(0,10),H=n}}return{DECIMAL_PLACES:p,ROUNDING_MODE:g,EXPONENTIAL_AT:[y,m],RANGE:[b,w],CRYPTO:_,MODULO_MODE:v,POW_PRECISION:E,FORMAT:$,ALPHABET:H}},F.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!F.DEBUG)return!0;var t,n,r=e.c,o=e.e,i=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===i||-1===i)&&o>=-B&&o<=B&&o===A(o)){if(0===r[0]){if(0===o&&1===r.length)return!0;break e}if((t=(o+1)%I)<1&&(t+=I),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=C||n!==A(n))break e;if(0!==n)return!0}}}else if(null===r&&null===o&&(null===i||1===i||-1===i))return!0;throw Error(T+"Invalid BigNumber: "+e)},F.maximum=F.max=function(){return G(arguments,h.lt)},F.minimum=F.min=function(){return G(arguments,h.gt)},F.random=(i=9007199254740992,a=Math.random()*i&2097151?function(){return A(Math.random()*i)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,o,i,s=0,c=[],u=new F(d);if(null==e?e=p:R(e,0,B),o=O(e/I),_)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));s<o;)(i=131072*t[s]+(t[s+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[s]=n[0],t[s+1]=n[1]):(c.push(i%1e14),s+=2);s=o/2}else{if(!crypto.randomBytes)throw _=!1,Error(T+"crypto unavailable");for(t=crypto.randomBytes(o*=7);s<o;)(i=281474976710656*(31&t[s])+1099511627776*t[s+1]+4294967296*t[s+2]+16777216*t[s+3]+(t[s+4]<<16)+(t[s+5]<<8)+t[s+6])>=9e15?crypto.randomBytes(7).copy(t,s):(c.push(i%1e14),s+=7);s=o/7}if(!_)for(;s<o;)(i=a())<9e15&&(c[s++]=i%1e14);for(o=c[--s],e%=I,o&&e&&(i=x[I-e],c[s]=A(o/i)*i);0===c[s];c.pop(),s--);if(s<0)c=[r=0];else{for(r=-1;0===c[0];c.splice(0,1),r-=I);for(s=1,i=c[0];i>=10;i/=10,s++);s<I&&(r-=I-s)}return u.e=r,u.c=c,u}),F.sum=function(){for(var e=1,t=arguments,n=new F(t[0]);e<t.length;)n=n.plus(t[e++]);return n},r=function(){var e="0123456789";function t(e,t,n,r){for(var o,i,a=[0],s=0,c=e.length;s<c;){for(i=a.length;i--;a[i]*=t);for(a[0]+=r.indexOf(e.charAt(s++)),o=0;o<a.length;o++)a[o]>n-1&&(null==a[o+1]&&(a[o+1]=0),a[o+1]+=a[o]/n|0,a[o]%=n)}return a.reverse()}return function(r,o,i,a,s){var c,u,l,f,h,d,y,m,b=r.indexOf("."),w=p,_=g;for(b>=0&&(f=E,E=0,r=r.replace(".",""),d=(m=new F(o)).pow(r.length-b),E=f,m.c=t(z(U(d.c),d.e,"0"),10,i,e),m.e=m.c.length),l=f=(y=t(r,o,i,s?(c=H,e):(c=e,H))).length;0==y[--f];y.pop());if(!y[0])return c.charAt(0);if(b<0?--l:(d.c=y,d.e=l,d.s=a,y=(d=n(d,m,w,_,i)).c,h=d.r,l=d.e),b=y[u=l+w+1],f=i/2,h=h||u<0||null!=y[u+1],h=_<4?(null!=b||h)&&(0==_||_==(d.s<0?3:2)):b>f||b==f&&(4==_||h||6==_&&1&y[u-1]||_==(d.s<0?8:7)),u<1||!y[0])r=h?z(c.charAt(1),-w,c.charAt(0)):c.charAt(0);else{if(y.length=u,h)for(--i;++y[--u]>i;)y[u]=0,u||(++l,y=[1].concat(y));for(f=y.length;!y[--f];);for(b=0,r="";b<=f;r+=c.charAt(y[b++]));r=z(r,l,c.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,o,i,a,s=0,c=e.length,u=t%N,l=t/N|0;for(e=e.slice();c--;)s=((o=u*(i=e[c]%N)+(r=l*i+(a=e[c]/N|0)*u)%N*N+s)/n|0)+(r/N|0)+l*a,e[c]=o%n;return s&&(e=[s].concat(e)),e}function t(e,t,n,r){var o,i;if(n!=r)i=n>r?1:-1;else for(o=i=0;o<n;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function n(e,t,n,r){for(var o=0;n--;)e[n]-=o,o=e[n]<t[n]?1:0,e[n]=o*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,o,i,a,s){var c,u,l,f,h,d,p,g,y,m,b,w,_,v,E,S,O,T=r.s==o.s?1:-1,k=r.c,L=o.c;if(!(k&&k[0]&&L&&L[0]))return new F(r.s&&o.s&&(k?!L||k[0]!=L[0]:L)?k&&0==k[0]||!L?0*T:T/0:NaN);for(y=(g=new F(T)).c=[],T=i+(u=r.e-o.e)+1,s||(s=C,u=P(r.e/I)-P(o.e/I),T=T/I|0),l=0;L[l]==(k[l]||0);l++);if(L[l]>(k[l]||0)&&u--,T<0)y.push(1),f=!0;else{for(v=k.length,S=L.length,l=0,T+=2,(h=A(s/(L[0]+1)))>1&&(L=e(L,h,s),k=e(k,h,s),S=L.length,v=k.length),_=S,b=(m=k.slice(0,S)).length;b<S;m[b++]=0);O=L.slice(),O=[0].concat(O),E=L[0],L[1]>=s/2&&E++;do{if(h=0,(c=t(L,m,S,b))<0){if(w=m[0],S!=b&&(w=w*s+(m[1]||0)),(h=A(w/E))>1)for(h>=s&&(h=s-1),p=(d=e(L,h,s)).length,b=m.length;1==t(d,m,p,b);)h--,n(d,S<p?O:L,p,s),p=d.length,c=1;else 0==h&&(c=h=1),p=(d=L.slice()).length;if(p<b&&(d=[0].concat(d)),n(m,d,b,s),b=m.length,-1==c)for(;t(L,m,S,b)<1;)h++,n(m,S<b?O:L,b,s),b=m.length}else 0===c&&(h++,m=[0]);y[l++]=h,m[0]?m[b++]=k[_]||0:(m=[k[_]],b=1)}while((_++<v||null!=m[0])&&T--);f=null!=m[0],y[0]||y.splice(0,1)}if(s==C){for(l=1,T=y[0];T>=10;T/=10,l++);V(g,i+(g.e=l+u*I-1)+1,a,f)}else g.e=u,g.r=+f;return g}}(),s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,c=/^([^.]+)\.$/,u=/^\.([^.]+)$/,l=/^-?(Infinity|NaN)$/,f=/^\s*\+(?=[\w.])|^\s+|\s+$/g,o=function(e,t,n,r){var o,i=n?t:t.replace(f,"");if(l.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!n&&(i=i.replace(s,(function(e,t,n){return o="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=o?e:t})),r&&(o=r,i=i.replace(c,"$1").replace(u,"0.$1")),t!=i))return new F(i,o);if(F.DEBUG)throw Error(T+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},h.absoluteValue=h.abs=function(){var e=new F(this);return e.s<0&&(e.s=1),e},h.comparedTo=function(e,t){return j(this,new F(e,t))},h.decimalPlaces=h.dp=function(e,t){var n,r,o,i=this;if(null!=e)return R(e,0,B),null==t?t=g:R(t,0,8),V(new F(i),e+i.e+1,t);if(!(n=i.c))return null;if(r=((o=n.length-1)-P(this.e/I))*I,o=n[o])for(;o%10==0;o/=10,r--);return r<0&&(r=0),r},h.dividedBy=h.div=function(e,t){return n(this,new F(e,t),p,g)},h.dividedToIntegerBy=h.idiv=function(e,t){return n(this,new F(e,t),0,1)},h.exponentiatedBy=h.pow=function(e,t){var n,r,o,i,a,s,c,u,l=this;if((e=new F(e)).c&&!e.isInteger())throw Error(T+"Exponent not an integer: "+J(e));if(null!=t&&(t=new F(t)),a=e.e>14,!l.c||!l.c[0]||1==l.c[0]&&!l.e&&1==l.c.length||!e.c||!e.c[0])return u=new F(Math.pow(+J(l),a?e.s*(2-M(e)):+J(e))),t?u.mod(t):u;if(s=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new F(NaN);(r=!s&&l.isInteger()&&t.isInteger())&&(l=l.mod(t))}else{if(e.e>9&&(l.e>0||l.e<-1||(0==l.e?l.c[0]>1||a&&l.c[1]>=24e7:l.c[0]<8e13||a&&l.c[0]<=9999975e7)))return i=l.s<0&&M(e)?-0:0,l.e>-1&&(i=1/i),new F(s?1/i:i);E&&(i=O(E/I+2))}for(a?(n=new F(.5),s&&(e.s=1),c=M(e)):c=(o=Math.abs(+J(e)))%2,u=new F(d);;){if(c){if(!(u=u.times(l)).c)break;i?u.c.length>i&&(u.c.length=i):r&&(u=u.mod(t))}if(o){if(0===(o=A(o/2)))break;c=o%2}else if(V(e=e.times(n),e.e+1,1),e.e>14)c=M(e);else{if(0===(o=+J(e)))break;c=o%2}l=l.times(l),i?l.c&&l.c.length>i&&(l.c.length=i):r&&(l=l.mod(t))}return r?u:(s&&(u=d.div(u)),t?u.mod(t):i?V(u,E,g,undefined):u)},h.integerValue=function(e){var t=new F(this);return null==e?e=g:R(e,0,8),V(t,t.e+1,e)},h.isEqualTo=h.eq=function(e,t){return 0===j(this,new F(e,t))},h.isFinite=function(){return!!this.c},h.isGreaterThan=h.gt=function(e,t){return j(this,new F(e,t))>0},h.isGreaterThanOrEqualTo=h.gte=function(e,t){return 1===(t=j(this,new F(e,t)))||0===t},h.isInteger=function(){return!!this.c&&P(this.e/I)>this.c.length-2},h.isLessThan=h.lt=function(e,t){return j(this,new F(e,t))<0},h.isLessThanOrEqualTo=h.lte=function(e,t){return-1===(t=j(this,new F(e,t)))||0===t},h.isNaN=function(){return!this.s},h.isNegative=function(){return this.s<0},h.isPositive=function(){return this.s>0},h.isZero=function(){return!!this.c&&0==this.c[0]},h.minus=function(e,t){var n,r,o,i,a=this,s=a.s;if(t=(e=new F(e,t)).s,!s||!t)return new F(NaN);if(s!=t)return e.s=-t,a.plus(e);var c=a.e/I,u=e.e/I,l=a.c,f=e.c;if(!c||!u){if(!l||!f)return l?(e.s=-t,e):new F(f?a:NaN);if(!l[0]||!f[0])return f[0]?(e.s=-t,e):new F(l[0]?a:3==g?-0:0)}if(c=P(c),u=P(u),l=l.slice(),s=c-u){for((i=s<0)?(s=-s,o=l):(u=c,o=f),o.reverse(),t=s;t--;o.push(0));o.reverse()}else for(r=(i=(s=l.length)<(t=f.length))?s:t,s=t=0;t<r;t++)if(l[t]!=f[t]){i=l[t]<f[t];break}if(i&&(o=l,l=f,f=o,e.s=-e.s),(t=(r=f.length)-(n=l.length))>0)for(;t--;l[n++]=0);for(t=C-1;r>s;){if(l[--r]<f[r]){for(n=r;n&&!l[--n];l[n]=t);--l[n],l[r]+=C}l[r]-=f[r]}for(;0==l[0];l.splice(0,1),--u);return l[0]?X(e,l,u):(e.s=3==g?-1:1,e.c=[e.e=0],e)},h.modulo=h.mod=function(e,t){var r,o,i=this;return e=new F(e,t),!i.c||!e.s||e.c&&!e.c[0]?new F(NaN):!e.c||i.c&&!i.c[0]?new F(i):(9==v?(o=e.s,e.s=1,r=n(i,e,0,3),e.s=o,r.s*=o):r=n(i,e,0,v),(e=i.minus(r.times(e))).c[0]||1!=v||(e.s=i.s),e)},h.multipliedBy=h.times=function(e,t){var n,r,o,i,a,s,c,u,l,f,h,d,p,g,y,m=this,b=m.c,w=(e=new F(e,t)).c;if(!(b&&w&&b[0]&&w[0]))return!m.s||!e.s||b&&!b[0]&&!w||w&&!w[0]&&!b?e.c=e.e=e.s=null:(e.s*=m.s,b&&w?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=P(m.e/I)+P(e.e/I),e.s*=m.s,(c=b.length)<(f=w.length)&&(p=b,b=w,w=p,o=c,c=f,f=o),o=c+f,p=[];o--;p.push(0));for(g=C,y=N,o=f;--o>=0;){for(n=0,h=w[o]%y,d=w[o]/y|0,i=o+(a=c);i>o;)n=((u=h*(u=b[--a]%y)+(s=d*u+(l=b[a]/y|0)*h)%y*y+p[i]+n)/g|0)+(s/y|0)+d*l,p[i--]=u%g;p[i]=n}return n?++r:p.splice(0,1),X(e,p,r)},h.negated=function(){var e=new F(this);return e.s=-e.s||null,e},h.plus=function(e,t){var n,r=this,o=r.s;if(t=(e=new F(e,t)).s,!o||!t)return new F(NaN);if(o!=t)return e.s=-t,r.minus(e);var i=r.e/I,a=e.e/I,s=r.c,c=e.c;if(!i||!a){if(!s||!c)return new F(o/0);if(!s[0]||!c[0])return c[0]?e:new F(s[0]?r:0*o)}if(i=P(i),a=P(a),s=s.slice(),o=i-a){for(o>0?(a=i,n=c):(o=-o,n=s),n.reverse();o--;n.push(0));n.reverse()}for((o=s.length)-(t=c.length)<0&&(n=c,c=s,s=n,t=o),o=0;t;)o=(s[--t]=s[t]+c[t]+o)/C|0,s[t]=C===s[t]?0:s[t]%C;return o&&(s=[o].concat(s),++a),X(e,s,a)},h.precision=h.sd=function(e,t){var n,r,o,i=this;if(null!=e&&e!==!!e)return R(e,1,B),null==t?t=g:R(t,0,8),V(new F(i),e,t);if(!(n=i.c))return null;if(r=(o=n.length-1)*I+1,o=n[o]){for(;o%10==0;o/=10,r--);for(o=n[0];o>=10;o/=10,r++);}return e&&i.e+1>r&&(r=i.e+1),r},h.shiftedBy=function(e){return R(e,-9007199254740991,L),this.times("1e"+e)},h.squareRoot=h.sqrt=function(){var e,t,r,o,i,a=this,s=a.c,c=a.s,u=a.e,l=p+4,f=new F("0.5");if(1!==c||!s||!s[0])return new F(!c||c<0&&(!s||s[0])?NaN:s?a:1/0);if(0==(c=Math.sqrt(+J(a)))||c==1/0?(((t=U(s)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=P((u+1)/2)-(u<0||u%2),r=new F(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new F(c+""),r.c[0])for((c=(u=r.e)+l)<3&&(c=0);;)if(i=r,r=f.times(i.plus(n(a,i,l,1))),U(i.c).slice(0,c)===(t=U(r.c)).slice(0,c)){if(r.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(V(r,r.e+p+2,1),e=!r.times(r).eq(a));break}if(!o&&(V(i,i.e+p+2,0),i.times(i).eq(a))){r=i;break}l+=4,c+=4,o=1}return V(r,r.e+p+1,g,e)},h.toExponential=function(e,t){return null!=e&&(R(e,0,B),e++),W(this,e,t,1)},h.toFixed=function(e,t){return null!=e&&(R(e,0,B),e=e+this.e+1),W(this,e,t)},h.toFormat=function(e,t,n){var r,o=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=$;else if("object"!=typeof n)throw Error(T+"Argument not an object: "+n);if(r=o.toFixed(e,t),o.c){var i,a=r.split("."),s=+n.groupSize,c=+n.secondaryGroupSize,u=n.groupSeparator||"",l=a[0],f=a[1],h=o.s<0,d=h?l.slice(1):l,p=d.length;if(c&&(i=s,s=c,c=i,p-=i),s>0&&p>0){for(i=p%s||s,l=d.substr(0,i);i<p;i+=s)l+=u+d.substr(i,s);c>0&&(l+=u+d.slice(i)),h&&(l="-"+l)}r=f?l+(n.decimalSeparator||"")+((c=+n.fractionGroupSize)?f.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):f):l}return(n.prefix||"")+r+(n.suffix||"")},h.toFraction=function(e){var t,r,o,i,a,s,c,u,l,f,h,p,y=this,m=y.c;if(null!=e&&(!(c=new F(e)).isInteger()&&(c.c||1!==c.s)||c.lt(d)))throw Error(T+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+J(c));if(!m)return new F(y);for(t=new F(d),l=r=new F(d),o=u=new F(d),p=U(m),a=t.e=p.length-y.e-1,t.c[0]=x[(s=a%I)<0?I+s:s],e=!e||c.comparedTo(t)>0?a>0?t:l:c,s=w,w=1/0,c=new F(p),u.c[0]=0;f=n(c,t,0,1),1!=(i=r.plus(f.times(o))).comparedTo(e);)r=o,o=i,l=u.plus(f.times(i=l)),u=i,t=c.minus(f.times(i=t)),c=i;return i=n(e.minus(r),o,0,1),u=u.plus(i.times(l)),r=r.plus(i.times(o)),u.s=l.s=y.s,h=n(l,o,a*=2,g).minus(y).abs().comparedTo(n(u,r,a,g).minus(y).abs())<1?[l,o]:[u,r],w=s,h},h.toNumber=function(){return+J(this)},h.toPrecision=function(e,t){return null!=e&&R(e,1,B),W(this,e,t,2)},h.toString=function(e){var t,n=this,o=n.s,i=n.e;return null===i?o?(t="Infinity",o<0&&(t="-"+t)):t="NaN":(null==e?t=i<=y||i>=m?D(U(n.c),i):z(U(n.c),i,"0"):10===e&&q?t=z(U((n=V(new F(n),p+i+1,g)).c),n.e,"0"):(R(e,2,H.length,"Base"),t=r(z(U(n.c),i,"0"),10,e,o,!0)),o<0&&n.c[0]&&(t="-"+t)),t},h.valueOf=h.toJSON=function(){return J(this)},h._isBigNumber=!0,h[Symbol.toStringTag]="BigNumber",h[Symbol.for("nodejs.util.inspect.custom")]=h.valueOf,null!=t&&F.set(t),F})();n.p,n.p,n.p,n(96763),n(62045).hp;n(96763);var $=(e=>(e[e.ZERO=0]="ZERO",e[e.LOW=.1]="LOW",e[e.MEDIUM=.5]="MEDIUM",e[e.HIGH=.9]="HIGH",e[e.URGENT=1]="URGENT",e))($||{});const H=e=>e.replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`));function q(e){if(!e||"object"!=typeof e)return e;const t={};return Object.keys(e).forEach((n=>{if(Object.prototype.hasOwnProperty.call(e,n)){const r=H(n);let o=e[n];Array.isArray(o)?o=o.map((e=>q(e))):"object"==typeof o&&(o=q(o)),t[r]=o}})),t}function F(e){return e.map((e=>q(e)))}var W=(e=>(e[e.transactions=1]="transactions",e[e.particle=2]="particle",e[e.chat=3]="chat",e))(W||{}),G=(e=>(e[e.particle=0]="particle",e[e.embedding=1]="embedding",e))(G||{}),X=n(96763);const V=async e=>{X.log(" [initial]fetch initial particles...");const t=(await(async(e=0,t=50)=>{try{return(await(0,d.A)({method:"get",url:`${b}/cyber/rank/v1beta1/rank/top`,params:{"pagination.page":e,"pagination.perPage":t}})).data}catch(e){return{}}})(0,400)).result.map((({particle:e})=>({id:e,data:"",jobType:G.particle,priority:$.LOW})));await e(F(t))};var J=async e=>{const t=await e.getDbVersion();if(X.log(`* db version - ${t}`),t<1.2){X.log("⚡️ Migrating to 1.1"),X.log("    add job_type field to sync_queue");const t=await e.runCommand("\n        ?[id,status,priority, job_type, data] := *sync_queue{id,status,priority}, job_type=0, data='';\n        :replace sync_queue {\n            id: String,\n            job_type: Int default 0 =>\n            data: String default '',\n            status: Int default 0,\n            priority: Float default 0,\n        }\n    ");X.log(`       ok: ${t.ok}`);try{X.log("    create embeddings relation");const t=await e.runCommand("\n        :create embeddings {\n            cid: String =>\n            vec: <F32; 384>\n        }\n      ");X.log(`       ok: ${t.ok}`)}catch(e){X.log("* embeddings already exist")}try{X.log("    create embeddings:semantic index");const t=await e.runCommand("\n        ::hnsw create embeddings:semantic{\n            fields: [vec],\n            dim: 384,\n            ef: 100,\n            m: 16\n        }\n    ");X.log(`       ok: ${t.ok}`)}catch(e){X.log("* embeddings semantics already exist")}X.log("    fill queue to calculate embeddings for all particles");const n=await e.runCommand('\n        ?[id, data, job_type, status, priority] := *particle{cid, text, mime}, mime="text/plain", job_type=1, status=0, priority=0.5, id = cid, data=text\n\n        :put sync_queue {\n            id,\n            job_type =>\n            data,\n            status,\n            priority,\n        }\n    ');return X.log(`       ok: ${n.ok}`),await e.setDbVersion(Q),!0}return!1},K=n(96763);const Y="cyb-cozo-idb",Z="cozodb",Q=1.2;let ee=!1;var te=function(){let e,t,n,o={};const i=((e={})=>{const t=new BroadcastChannel(a);function n(n,r,o){const i={...e,...o};o?.error&&(i.error=JSON.stringify(o.error)),t.postMessage({type:"log",value:{level:n,message:r,context:i}})}return{info:function(e,t){return n("info",e,t)},error:function(e,t){return n("error",e,t)},warn:function(e,t){return n("warn",e,t)},trace:function(e,t){return n("warn",e,t)}}})({thread:"cozo"});async function s(t){n=t,await(0,r.Ay)(),await(async()=>{e=await r.yD.new_from_indexed_db(Y,Z,n),await d()})(),await g()}const c=async()=>{const e=await(async()=>(await y("::relations")).rows.map((e=>e[0])))(),n=await Promise.all(e.map((async e=>[e,await(async e=>{const t=(({rows:e,headers:t})=>e.map((e=>{const n={};return e.forEach(((e,r)=>{const o=t[r];n[o]=e})),n})))(await y(`::columns ${e}`));return{keys:t.filter((e=>e.is_key)).map((e=>e.column)),values:t.filter((e=>!e.is_key)).map((e=>e.column)),columns:t.reduce(((e,t)=>(e[t.column]=t,e)),{})}})(e)])));return o=Object.fromEntries(n),i.info("cozoDb schema initialized: ",{data:[o,e,n]}),t=function(e){const t=e,n=(e,n="put",r=[])=>{const{keys:o,values:i}=t[e],a=i.length>0,s=r.length>0?r.filter((e=>i.includes(e))):i;return a?`:${n} ${e} {${o} => ${s}}`:`:${n} ${e} {${o}}`},r=(t,n,r=[])=>{const o=e[t],i=r.length>0?Object.keys(o.columns).reduce(((e,t)=>(r.includes(t)&&(e[t]=o.columns[t]),e)),{}):o.columns,a=Object.keys(i),s=Object.values(i);return`?[${a.join(", ")}] <- [${n.map((e=>f(e,s))).join(", ")}]`};return{generateModifyCommand:n,generateAtomCommand:r,generatePut:(e,t)=>{const o=Object.keys(t[0]);return`${r(e,t,o)}\r\n${n(e,"put")}`},generateGet:(t,n=[],r=[],o=[],i={})=>{const a=e[t],s=n.length>0?n:Object.keys(a.columns),c=[...s,...o],u=r.length>0?`, ${r.join(", ")} `:"",l=i.orderBy?`:order ${i.orderBy}`:"",f=i.limit?`:limit ${i.limit}`:"",h=i.limit?`:offset ${i.offset}`:"";return`?[${s.join(", ")}] := *${t}{${c.join(", ")}} ${u} ${l} ${f} ${h}`},generateUpdate:(e,t)=>{const o=Object.keys(t[0]);return`${r(e,t,o)}\r\n${n(e,"update",o)}`},generateRm:(e,n)=>{const{keys:o}=t[e],i=r(e,n,o),a=((e,t)=>`:rm ${e} {${t}}`)(e,o);return`${i}\r\n${a}`}}}(o),i.info("cozoDb schema initialized: ",{data:[o,e,n]}),o},d=async()=>{if(await c(),ee=0===Object.keys(o).length,ee){i.info("   cozoDb - apply DB schema",h);await y(h);await c(),await p(Q),await V((async e=>{K.log(" [initial]save initial particles..."),await m("sync_queue",e)}))}},p=async e=>await m("config",[{key:"DB_VERSION",group_key:"system",value:e}]),g=async()=>{o.transaction.values.includes("block_height")||(i.info("💀 HARD RESET experemental db..."),await async function(e,t){return new Promise(((n,r)=>{const o=indexedDB.open(e);o.onerror=e=>{r(new Error(`Database error: ${o.error?.message}`))},o.onsuccess=i=>{const a=o.result,s=a.transaction(t,"readwrite"),c=s.objectStore(t).clear();c.onsuccess=()=>{l.log(`Store cleared ${e}/${t}`),n()},c.onerror=()=>{r(new Error(`Error clearing the store: ${c.error?.message}`))},s.oncomplete=()=>{a.close()}}}))}(Y,Z),await s(n),await p(Q))},y=async(t,n=!1)=>{if(!e)throw new Error("DB is not initialized");const r=await e.run(t,"",n),o=JSON.parse(r);if(!o.ok)throw K.log("----\x3e runCommand error ",t,o),new u(o);return o},m=async(e,n)=>{if(0===n.length)throw new u({code:"-1",message:`cant PUT [] into ${e}`,display:"",severity:"",ok:!1});return y(t.generatePut(e,n))},b=async(e,n=[],r=[],o=[],i={})=>y(t.generateGet(e,n,r,o,i),!0);return{init:s,put:m,get:b,rm:async(e,n)=>y(t.generateRm(e,n)),update:async(e,n)=>y(t.generateUpdate(e,n)),runCommand:y,getCommandFactory:()=>t,importRelations:t=>JSON.parse(e.import_relations(t)),exportRelations:t=>JSON.parse(e.export_relations(JSON.stringify({relations:t}))),getDbVersion:async()=>{const e=await b("config",["value"],['key = "DB_VERSION"'],["key"]);return e.rows?.[0]?.[0]||0},setDbVersion:p,loadDbSchema:c}}(),ne=n(96763);const re=Symbol("Comlink.proxy"),oe=Symbol("Comlink.endpoint"),ie=Symbol("Comlink.releaseProxy"),ae=Symbol("Comlink.finalizer"),se=Symbol("Comlink.thrown"),ce=e=>"object"==typeof e&&null!==e||"function"==typeof e,ue=new Map([["proxy",{canHandle:e=>ce(e)&&e[re],serialize(e){const{port1:t,port2:n}=new MessageChannel;return le(e,t),[n,[n]]},deserialize(e){return e.start(),ye(e,[],t);var t}}],["throw",{canHandle:e=>ce(e)&&se in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function le(e,t=globalThis,n=["*"]){t.addEventListener("message",(function r(o){if(!o||!o.data)return;if(!function(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}(n,o.origin))return void ne.warn(`Invalid origin '${o.origin}' for comlink proxy`);const{id:i,type:a,path:s}=Object.assign({path:[]},o.data),c=(o.data.argumentList||[]).map(ve);let u;try{const t=s.slice(0,-1).reduce(((e,t)=>e[t]),e),n=s.reduce(((e,t)=>e[t]),e);switch(a){case"GET":u=n;break;case"SET":t[s.slice(-1)[0]]=ve(o.data.value),u=!0;break;case"APPLY":u=n.apply(t,c);break;case"CONSTRUCT":u=we(new n(...c));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;le(e,n),u=function(e,t){return be.set(e,t),e}(t,[t])}break;case"RELEASE":u=void 0;break;default:return}}catch(e){u={value:e,[se]:0}}Promise.resolve(u).catch((e=>({value:e,[se]:0}))).then((n=>{const[o,s]=_e(n);t.postMessage(Object.assign(Object.assign({},o),{id:i}),s),"RELEASE"===a&&(t.removeEventListener("message",r),fe(t),ae in e&&"function"==typeof e[ae]&&e[ae]())})).catch((e=>{const[n,r]=_e({value:new TypeError("Unserializable return value"),[se]:0});t.postMessage(Object.assign(Object.assign({},n),{id:i}),r)}))})),t.start&&t.start()}function fe(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function he(e){if(e)throw new Error("Proxy has been released and is not useable")}function de(e){return Ee(e,{type:"RELEASE"}).then((()=>{fe(e)}))}const pe=new WeakMap,ge="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(pe.get(e)||0)-1;pe.set(e,t),0===t&&de(e)}));function ye(e,t=[],n=function(){}){let r=!1;const o=new Proxy(n,{get(n,i){if(he(r),i===ie)return()=>{!function(e){ge&&ge.unregister(e)}(o),de(e),r=!0};if("then"===i){if(0===t.length)return{then:()=>o};const n=Ee(e,{type:"GET",path:t.map((e=>e.toString()))}).then(ve);return n.then.bind(n)}return ye(e,[...t,i])},set(n,o,i){he(r);const[a,s]=_e(i);return Ee(e,{type:"SET",path:[...t,o].map((e=>e.toString())),value:a},s).then(ve)},apply(n,o,i){he(r);const a=t[t.length-1];if(a===oe)return Ee(e,{type:"ENDPOINT"}).then(ve);if("bind"===a)return ye(e,t.slice(0,-1));const[s,c]=me(i);return Ee(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:s},c).then(ve)},construct(n,o){he(r);const[i,a]=me(o);return Ee(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:i},a).then(ve)}});return function(e,t){const n=(pe.get(t)||0)+1;pe.set(t,n),ge&&ge.register(e,t,e)}(o,e),o}function me(e){const t=e.map(_e);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const be=new WeakMap;function we(e){return Object.assign(e,{[re]:!0})}function _e(e){for(const[t,n]of ue)if(n.canHandle(e)){const[r,o]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},o]}return[{type:"RAW",value:e},be.get(e)||[]]}function ve(e){switch(e.type){case"HANDLER":return ue.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Ee(e,t,n){return new Promise((r=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===o&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),n)}))}function Se(e){return{async*[Symbol.asyncIterator](){let t=!1;for(;!t;){const n=new Promise((n=>{e.onmessage=e=>{null===e.data?(t=!0,n(null)):n(e.data)}})),r=await n;null!==r&&(yield r)}}}}const Oe={canHandle:e=>e&&e.result&&"function"==typeof e.result[Symbol.asyncIterator],serialize(e){if(void 0===e)return[null,[]];const{result:t,...n}=e,{port1:r,port2:o}=new MessageChannel;return t&&(async()=>{for await(const e of t)r.postMessage(e);r.postMessage(null),r.close()})(),[{...n,port:o},[o]]},deserialize(e){if(!e)return;const{port:t,...n}=e;return{...n,result:Se(t)}}};var Ae=n(93776),Te=n(64423),ke=n(65606),Ce=n(96763);"undefined"!=typeof SharedWorker&&ke.env.IS_DEV;function Ie(){ue.set("IPFSContent",Oe),ue.set("observable",{canHandle:e=>e instanceof Ae.c,deserialize:e=>new Ae.c((t=>{const n=ue.get("proxy").deserialize(e);n.subscribe(we({next:e=>t.next(e),error:e=>t.error(e),complete:()=>t.complete()})).then((e=>t.add((()=>{e.unsubscribe(),n[ie]()}))))})),serialize:e=>ue.get("proxy").serialize({subscribe:t=>e.subscribe({next:e=>t.next(e).then(),error:e=>t.error(e).then(),complete:()=>t.complete().then()})})}),ue.set("subscription",{canHandle:e=>e instanceof Te.yU,deserialize:e=>new Te.yU((()=>{const t=ue.get("proxy").deserialize(e);t.unsubscribe().then((()=>{t[ie]()}))})),serialize:e=>ue.get("proxy").serialize({unsubscribe:()=>e.unsubscribe()})})}function Le(e){const t={log:{original:Ce.log},error:{original:Ce.error},warn:{original:Ce.warn}},n=n=>{const{original:r}=t[n];t[n].original=Ce[n],Ce[n]=(...t)=>{r.apply(Ce,t);const o=t.map((e=>function(e){try{return JSON.stringify(e)}catch(t){return String(e)}}(e)));e.postMessage({type:"console",method:n,args:o})}};Object.keys(t).forEach((e=>n(e)))}var xe=n(72972);n(96763);"function"==typeof Symbol&&Symbol.observable;var Ne=function(){return Math.random().toString(36).substring(7).split("").join(".")};Ne(),Ne();function Be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}n(96763),n(65606);var Pe,Ue=(Pe=function(e,t){return Pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Pe(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Pe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),je=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Re=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},Me=Object.defineProperty,De=Object.defineProperties,ze=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable,Fe=function(e,t,n){return t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},We=function(e,t){for(var n in t||(t={}))He.call(t,n)&&Fe(e,n,t[n]);if($e)for(var r=0,o=$e(t);r<o.length;r++){n=o[r];qe.call(t,n)&&Fe(e,n,t[n])}return e},Ge=function(e,t){return De(e,ze(t))},Xe=function(e,t,n){return new Promise((function(r,o){var i=function(e){try{s(n.next(e))}catch(e){o(e)}},a=function(e){try{s(n.throw(e))}catch(e){o(e)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(i,a)};s((n=n.apply(e,t)).next())}))};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;(function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.apply(this,n)||this;return Object.setPrototypeOf(o,t.prototype),o}Ue(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Re([void 0],e[0].concat(this)))):new(t.bind.apply(t,Re([void 0],e.concat(this))))}})(Array),function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.apply(this,n)||this;return Object.setPrototypeOf(o,t.prototype),o}Ue(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Re([void 0],e[0].concat(this)))):new(t.bind.apply(t,Re([void 0],e.concat(this))))}}(Array);function Ve(e){return(0,xe.a6)(e)?(0,xe.Ay)(e,(function(){})):e}function Je(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var o=t.apply(void 0,n);if(!o)throw new Error("prepareAction did not return an object");return We(We({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function Ke(e){var t,n={},r=[],o={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,o},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),o},addDefaultCase:function(e){return t=e,o}};return e(o),[n,r,t]}function Ye(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:Ve(e.initialState),o=e.reducers||{},i=Object.keys(o),a={},s={},c={};function u(){var t="function"==typeof e.extraReducers?Ke(e.extraReducers):[e.extraReducers],n=t[0],o=void 0===n?{}:n,i=t[1],a=void 0===i?[]:i,c=t[2],u=void 0===c?void 0:c,l=We(We({},o),s);return function(e,t,n,r){void 0===n&&(n=[]);var o,i="function"==typeof t?Ke(t):[t,n,r],a=i[0],s=i[1],c=i[2];if("function"==typeof e)o=function(){return Ve(e())};else{var u=Ve(e);o=function(){return u}}function l(e,t){void 0===e&&(e=o());var n=Re([a[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[c]),n.reduce((function(e,n){if(n){var r;if((0,xe.Qx)(e))return void 0===(r=n(e,t))?e:r;if((0,xe.a6)(e))return(0,xe.Ay)(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=o,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=a;n<r.length;n++){var o=r[n];e.addMatcher(o.matcher,o.reducer)}u&&e.addDefaultCase(u)}))}return i.forEach((function(e){var n,r,i=o[e],u=function(e,t){return e+"/"+t}(t,e);"reducer"in i?(n=i.reducer,r=i.prepare):n=i,a[e]=n,s[u]=n,c[e]=r?Je(u,r):Je(u)})),{name:t,reducer:function(e,t){return n||(n=u()),n(e,t)},actions:c,caseReducers:a,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}var Ze=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Qe=["name","message","stack","code"],et=function(e,t){this.payload=e,this.meta=t},tt=function(e,t){this.payload=e,this.meta=t},nt=function(e){if("object"==typeof e&&null!==e){for(var t={},n=0,r=Qe;n<r.length;n++){var o=r[n];"string"==typeof e[o]&&(t[o]=e[o])}return t}return{message:String(e)}},rt=function(){function e(e,t,n){var r=Je(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:Ge(We({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),o=Je(e+"/pending",(function(e,t,n){return{payload:void 0,meta:Ge(We({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),i=Je(e+"/rejected",(function(e,t,r,o,i){return{payload:o,error:(n&&n.serializeError||nt)(e||"Rejected"),meta:Ge(We({},i||{}),{arg:r,requestId:t,rejectedWithValue:!!o,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),a="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(s,c,u){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):Ze(),h=new a;function d(e){l=e,h.abort()}var p=function(){return Xe(this,null,(function(){var a,p,g,y,m,b;return je(this,(function(w){switch(w.label){case 0:return w.trys.push([0,4,,5]),y=null==(a=null==n?void 0:n.condition)?void 0:a.call(n,e,{getState:c,extra:u}),null===(_=y)||"object"!=typeof _||"function"!=typeof _.then?[3,2]:[4,y];case 1:y=w.sent(),w.label=2;case 2:if(!1===y||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,m=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),s(o(f,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:f,arg:e},{getState:c,extra:u}))),[4,Promise.race([m,Promise.resolve(t(e,{dispatch:s,getState:c,extra:u,requestId:f,signal:h.signal,abort:d,rejectWithValue:function(e,t){return new et(e,t)},fulfillWithValue:function(e,t){return new tt(e,t)}})).then((function(t){if(t instanceof et)throw t;return t instanceof tt?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return g=w.sent(),[3,5];case 4:return b=w.sent(),g=b instanceof et?i(null,f,e,b.payload,b.meta):i(b,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&i.match(g)&&g.meta.condition||s(g),[2,g]}var _}))}))}();return Object.assign(p,{abort:d,requestId:f,arg:e,unwrap:function(){return p.then(ot)}})}}),{pending:o,rejected:i,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function ot(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var it="listenerMiddleware";Je(it+"/add"),Je(it+"/removeAll"),Je(it+"/remove");"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:void 0!==n.g?n.g:globalThis);var at,st=function(e){return function(t){setTimeout(t,e)}};"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:st(10);(0,xe.rF)();var ct=n(22325);function ut(e){return Boolean(e.match(/^Qm[a-zA-Z0-9]{44}$/g))}var lt=n(96763);const ft={list:{isLoading:!1,data:[],error:void 0},chats:{},summary:{unreadCount:{total:0,particles:0,neurons:0}},llm:{threads:y()?[]:JSON.parse(localStorage.getItem("llmThreads")||"[]"),currentThreadId:null}};function ht(e){e.entryType===W.chat&&e.meta.to&&(e.entryType=W.particle);const{meta:t}=e,n={timestamp:new Date(t.timestamp).toISOString(),transactionHash:e.transactionHash||e.hash||e.meta.transaction_hash||e.meta.hash||e.meta.transactionHash,memo:e.memo||t.memo,senseChatId:e.id,unreadCount:e.unreadCount||0};switch(e.entryType){case W.chat:case W.transactions:{const t=e.meta,{type:r}=t;let o=e.ownerId;if("cosmos.bank.v1beta1.MsgSend"===r){o=t.value.fromAddress}else if("cosmos.bank.v1beta1.MsgMultiSend"===r){o=t.value.inputs[0].address}Object.assign(n,{type:r,from:o,meta:e.meta.value});break}case W.particle:{const t=e.meta;Object.assign(n,{type:"cyber.graph.v1beta1.MsgCyberlink",from:t.neuron,meta:t,fromLog:!0});break}default:return{}}return n}const dt=rt("sense/getSenseList",(async e=>(await e.getList()).map(ht))),pt=rt("sense/getSenseChat",(async({id:e,senseApi:t})=>{if(ut(e)){return(await t.getLinks(e)).map((t=>{if(0!==t.timestamp)return ht({...t,id:e,entryType:W.particle,meta:t})})).filter(Boolean)}return(await t.getFriendItems(e)).map((t=>{const n=t.to?W.particle:W.chat;return ht({...t,entryType:n,id:e,meta:t})}))})),gt=rt("sense/markAsRead",(async({id:e,senseApi:t})=>t.markAsRead(e))),yt={id:"",isLoading:!1,data:[],error:void 0,unreadCount:0};function mt(e,t){return e.data.slice(-5).some((e=>e.transactionHash===t.transactionHash))}const bt=Ye({name:"sense",initialState:ft,reducers:{updateSenseList:{reducer:(e,t)=>{t.payload.forEach((t=>{const{senseChatId:n}=t;e.chats[n]||(e.chats[n]={...yt});const r=e.chats[n];Object.assign(r,{id:n,unreadCount:t.unreadCount||0}),mt(r,t)||(r.data=r.data.concat(t))})),bt.caseReducers.orderSenseList(e)},prepare:e=>({payload:e.map(ht)})},addSenseItem(e,t){const{id:n,item:r}=t.payload;e.chats[n].data.push({...r,meta:r.meta,status:"pending"});const o=e.list.data.filter((e=>e!==n));o.unshift(n),e.list.data=o},updateSenseItem(e,t){const{chatId:n,txHash:r,isSuccess:o}=t.payload,i=e.chats[n].data.find((e=>e.transactionHash===r));i&&(o?delete i.status:i.status="error")},orderSenseList(e){const t=Object.keys(e.chats).reduce(((t,n)=>{const r=e.chats[n];if(!r.data.length)return t;const o=r.data[r.data.length-1];return t.push({id:n,lastMsg:o}),t}),[]).sort(((e,t)=>Date.parse(t.lastMsg.timestamp)-Date.parse(e.lastMsg.timestamp)));e.list.data=t.map((e=>e.id))},reset:()=>ft,createLLMThread(e,t){const n={id:t.payload.id,messages:[],dateUpdated:Date.now(),title:t.payload.title||`Conversation ${e.llm.threads.length+1}`};e.llm.threads.push(n),e.llm.currentThreadId=t.payload.id,localStorage.setItem("llmThreads",JSON.stringify(e.llm.threads))},selectLLMThread(e,t){e.llm.currentThreadId=t.payload.id},addLLMMessageToThread(e,t){const n=e.llm.threads.find((e=>e.id===t.payload.threadId));n&&(n.messages.push(t.payload.message),n.dateUpdated=t.payload.message.timestamp,localStorage.setItem("llmThreads",JSON.stringify(e.llm.threads)))},replaceLastLLMMessageInThread(e,t){const n=e.llm.threads.find((e=>e.id===t.payload.threadId));n&&n.messages.length>0&&(n.messages[n.messages.length-1]=t.payload.message,localStorage.setItem("llmThreads",JSON.stringify(e.llm.threads)))},deleteLLMThread(e,t){const n=e.llm.threads.filter((e=>e.id!==t.payload.id));lt.log("newT",n),e.llm.threads=n,e.llm.currentThreadId===t.payload.id&&(e.llm.currentThreadId=null),localStorage.setItem("llmThreads",JSON.stringify(e.llm.threads))},clearLLMThreads(e){e.llm.threads=[],e.llm.currentThreadId=null,localStorage.removeItem("llmThreads")}},extraReducers:e=>{e.addCase(dt.pending,(e=>{e.list.isLoading=!0})),e.addCase(dt.fulfilled,((e,t)=>{e.list.isLoading=!1;const n=[];t.payload.forEach((t=>{const{senseChatId:r}=t;e.chats[r]||(e.chats[r]={...yt});const o=e.chats[r];Object.assign(o,{id:r,unreadCount:t.unreadCount||0}),mt(o,t)||(o.data=o.data.concat(t)),n.push(r)})),e.list.data=n})),e.addCase(dt.rejected,((e,t)=>{lt.error(t),e.list.isLoading=!1,e.list.error=t.error.message})),e.addCase(pt.pending,((e,t)=>{const{id:n}=t.meta.arg;e.chats[n]||(e.chats[n]={...yt}),e.chats[n].isLoading=!0})),e.addCase(pt.fulfilled,((e,t)=>{const{id:n}=t.meta.arg,r=e.chats[n];r.isLoading=!1,r.id=n,r.data=t.payload})),e.addCase(pt.rejected,((e,t)=>{lt.error(t);const n=e.chats[t.meta.arg.id];n.isLoading=!1,n.error=t.error.message})),e.addCase(gt.fulfilled,((e,t)=>{const{id:n}=t.meta.arg,r=e.chats[n],o=ut(n),{unreadCount:i}=r;e.summary.unreadCount.total-=i,o?e.summary.unreadCount.particles-=i:e.summary.unreadCount.neurons-=i,r.unreadCount=0}))}}),{addSenseItem:wt,updateSenseItem:_t,updateSenseList:vt,reset:Et,createLLMThread:St,deleteLLMThread:Ot,selectLLMThread:At,addLLMMessageToThread:Tt,replaceLastLLMMessageInThread:kt,clearLLMThreads:Ct}=((0,ct.Mz)((e=>e.sense.chats),(e=>{let t=0,n=0;Object.values(e).forEach((({id:e,unreadCount:r})=>{ut(e)?t+=r:n+=r}));return{total:t+n,particles:t,neurons:n}})),bt.actions);bt.reducer;const It={POCKET:"pocket",POCKET_ACCOUNT:"pocketAccount"};function Lt(e){const{defaultAccount:t,accounts:n}=e;t&&localStorage.setItem(It.POCKET,JSON.stringify({[t.name]:t.account})),n&&localStorage.setItem(It.POCKET_ACCOUNT,JSON.stringify(n))}const xt=Ye({name:"pocket",initialState:{actionBar:{tweet:"tweet"},isInitialized:!1,defaultAccount:{name:null,account:null},accounts:null},reducers:{setDefaultAccount:(e,{payload:{name:t,account:n}})=>{e.defaultAccount={name:t,account:n||e.accounts?.[t]||null},Lt(e)},setAccounts:(e,{payload:t})=>{e.accounts=t,Lt(e)},setInitialized:e=>{e.isInitialized=!0},setStageTweetActionBar:(e,{payload:t})=>{e.actionBar.tweet=t},deleteAddress:(e,{payload:t})=>{e.accounts&&Object.keys(e.accounts).forEach((n=>{Object.keys(e.accounts[n]).forEach((r=>{if(e.accounts[n][r].bech32===t){if(delete e.accounts[n][r],0===Object.keys(e.accounts[n]).length&&delete e.accounts[n],e.defaultAccount?.account?.cyber?.bech32===t){const t=Object.entries(e.accounts).find((([,e])=>e.cyber?.bech32));e.defaultAccount=t?{name:t[0],account:t[1]}:{name:null,account:null}}Lt(e)}}))}))}}}),{setDefaultAccount:Nt,setAccounts:Bt,setStageTweetActionBar:Pt,deleteAddress:Ut}=xt.actions;xt.reducer;var jt=class{constructor(){this.channel=new BroadcastChannel("cyb-broadcast-channel")}postServiceStatus(e,t,n){this.channel.postMessage({type:"service_status",value:{name:e,status:t,message:n}})}postSyncEntryProgress(e,t){this.channel.postMessage({type:"sync_entry",value:{entry:e,state:t}})}postMlSyncEntryProgress(e,t){this.channel.postMessage({type:"sync_ml_entry",value:{entry:e,state:t}})}postSenseUpdate(e){e.length>0&&this.channel.postMessage(vt(e))}postSetDefaultAccount(e,t){this.channel.postMessage(Nt({name:e,account:t}))}post(e){this.channel.postMessage(e)}},Rt=n(96763);const Mt=(()=>{let e=!1;const t=new jt,n=e=>t.postServiceStatus("db",e);return{isInitialized:async()=>e,init:async()=>{if(n("starting"),e)return Rt.log("cozo db - already initialized!"),n("started"),Promise.resolve();Rt.time("🔋 cozo db initialized"),await te.init((e=>{}));return await J(te)&&await te.loadDbSchema(),Rt.timeEnd("🔋 cozo db initialized"),e=!0,setTimeout((()=>{n("started")}),0),Promise.resolve()},runCommand:async(e,t)=>te.runCommand(e,t),executeRmCommand:async(e,t)=>te.rm(e,t),executePutCommand:async(e,t)=>te.put(e,t),executeBatchPutCommand:async(e,t,n=t.length,r)=>{const{getCommandFactory:o,runCommand:i}=te,a=o(),s=a.generateModifyCommand(e,"put");for(let o=0;o<t.length;o+=n){const c=t.slice(o,o+n),u=a.generateAtomCommand(e,c);await i([u,s].join("\r\n")),r&&r(o+c.length)}return{ok:!0}},executeUpdateCommand:async(e,t)=>te.update(e,t),executeGetCommand:async(e,t,n,r,o={})=>te.get(e,t,n,r,o),importRelations:async e=>te.importRelations(e),exportRelations:async e=>te.exportRelations(e)}})();var Dt,zt;Dt=self,zt=Mt,Ie(),void 0!==Dt.onconnect?Dt.onconnect=e=>{const t=e.ports[0];Le(t),le(zt,t)}:le(zt)},251:function(e,t){t.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,u=c>>1,l=-7,f=n?o-1:0,h=n?-1:1,d=e[t+f];for(f+=h,i=d&(1<<-l)-1,d>>=-l,l+=s;l>0;i=256*i+e[t+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),i-=u}return(d?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,s,c,u=8*i-o-1,l=(1<<u)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*c-1)*Math.pow(2,o),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+d]=255&s,d+=p,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+d]=255&a,d+=p,a/=256,u-=8);e[n+d-p]|=128*g}},22322:function(e,t,n){"use strict";const r=n(25623)(n(34001)).Data,o=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],i=["directory","hamt-sharded-directory"];function a(e,t){if(!(this instanceof a))return new a(e,t);if(-1===o.indexOf(e))throw new Error("Type: "+e+" is not valid");this.type=e,this.data=t,this.blockSizes=[],"file"===this.type&&(this.mode=parseInt("0644",8)),"directory"!==this.type&&"hamt-sharded-directory"!==this.type||(this.mode=parseInt("0755",8)),this.addBlockSize=e=>{this.blockSizes.push(e)},this.removeBlockSize=e=>{this.blockSizes.splice(e,1)},this.fileSize=()=>{if(i.indexOf(this.type)>=0)return;let e=0;return this.blockSizes.forEach((t=>{e+=t})),t&&(e+=t.length),e},this.marshal=()=>{let e;switch(this.type){case"raw":e=r.DataType.Raw;break;case"directory":e=r.DataType.Directory;break;case"file":e=r.DataType.File;break;case"metadata":e=r.DataType.Metadata;break;case"symlink":e=r.DataType.Symlink;break;case"hamt-sharded-directory":e=r.DataType.HAMTShard;break;default:throw new Error(`Unkown type: "${this.type}"`)}let t=this.data;this.data&&this.data.length||(t=void 0);let n=this.blockSizes;return this.blockSizes&&this.blockSizes.length||(n=void 0),"directory"!==this.type&&"hamt-sharded-directory"!==this.type||this.mode!==parseInt("0755",8)||delete this.mode,"file"===this.type&&this.mode===parseInt("0644",8)&&delete this.mode,r.encode({Type:e,Data:t,filesize:this.fileSize(),blocksizes:n,hashType:this.hashType,fanout:this.fanout,mode:this.mode,mtime:this.mtime})}}a.unmarshal=e=>{const t=r.decode(e);t.Data||(t.Data=void 0);const n=new a(o[t.Type],t.Data);return n.blockSizes=t.blocksizes,t.mode&&(n.mode=t.mode),t.mtime&&(n.mtime=t.mtime),n},e.exports=a},37056:function(e,t,n){"use strict";const r=n(55935),o=r.cloneLinks,i=r.cloneData,a=r.toDAGLink,s=n(52747),c=n(49919),u=n(87975);e.exports=function(e,t,n){const r=o(e),l=i(e);!function(e,t){if(s.isDAGLink(e))return t(null,e);if(c.isDAGNode(e))return a(e,{},t);try{t(null,new s(e.name,e.size,e.multihash||e.hash||e.cid))}catch(e){return t(e)}}(t,((e,t)=>{if(e)return n(e);r.push(t),u(l,r,n)}))}},47290:function(e,t,n){"use strict";const r=n(55935),o=r.cloneLinks,i=r.cloneData,a=n(87975);e.exports=function(e,t){const n=i(e),r=o(e);a(n,r,t)}},87975:function(e,t,n){"use strict";var r=n(62045).hp;const o=n(63259),{serialize:i}=n(67063),a=n(55935).linkSort,s=n(49919),c=n(52747);e.exports=function(e,t,n){if("function"==typeof e?(n=e,e=void 0):"string"==typeof e&&(e=r.from(e)),"function"==typeof t&&(n=t,t=[]),!r.isBuffer(e))return n(new Error("Passed 'data' is not a buffer or a string!"));t=t.map((e=>c.isDAGLink(e)?e:c.util.createDagLinkFromB58EncodedHash(e))),t=o(t,a),i({data:e,links:t},((r,o)=>r?n(r):n(null,new s(e,t,o.length))))}},49919:function(e,t,n){"use strict";var r=n(62045).hp;const o=n(94148),i=n(45998);(t=e.exports=i(class{constructor(e,t,n){0!==n&&o(n,"A DAGNode requires it's serialized size"),this._data=e||r.alloc(0),this._links=t||[],this._serializedSize=n}toJSON(){return this._json||(this._json=Object.freeze({data:this.data,links:this.links.map((e=>e.toJSON())),size:this.size})),Object.assign({},this._json)}toString(){return`DAGNode <data: "${this.data.toString("base64")}", links: ${this.links.length}, size: ${this.size}>`}get data(){return this._data}set data(e){throw new Error("Can't set property: 'data' is immutable")}get links(){return this._links}set links(e){throw new Error("Can't set property: 'links' is immutable")}get size(){return void 0===this._size&&(this._size=this.links.reduce(((e,t)=>e+t.size),this._serializedSize)),this._size}set size(e){throw new Error("Can't set property: 'size' is immutable")}},{className:"DAGNode",symbolName:"@ipld/js-ipld-dag-pb/dagnode"})).create=n(87975),t.clone=n(47290),t.addLink=n(37056),t.rmLink=n(76594)},76594:function(e,t,n){"use strict";var r=n(62045).hp;const o=n(55935),i=o.cloneLinks,a=o.cloneData,s=n(87975),c=n(26613);e.exports=function(e,t,n){const o=a(e);let u=i(e);if("string"==typeof t)u=u.filter((e=>e.name!==t));else{if(!r.isBuffer(t)&&!c.isCID(t))return n(new Error("second arg needs to be a name or CID"),null);u=u.filter((e=>!e.cid.equals(t)))}s(o,u,n)}},47095:function(e,t,n){"use strict";n(49919),n(52747),n(72081),n(67063)},67063:function(e,t,n){"use strict";var r=n(62045).hp;const o=n(26613),i=n(25623)(n(6291)),a=n(72081),s=n(52747),c=n(49919),u=n(46266),l=n(25172),f=n(71281);function h(e,t){let n,{data:r,links:o=[]}=e;!c.isDAGNode(e)&&o&&(o=o.map((e=>s.isDAGLink(e)?e:s.util.createDagLinkFromB58EncodedHash(e))));try{n=i.PBNode.encode(function(e){const t={};e.data&&e.data.length>0?t.Data=e.data:t.Data=null;e.links&&e.links.length>0?t.Links=e.links.map((e=>({Hash:e.cid.buffer,Name:e.name,Tsize:e.size}))):t.Links=null;return t}({data:r,links:o}))}catch(e){return t(e)}t(null,n)}(t=e.exports).serialize=h,t.deserialize=function(e,t){const n=i.PBNode.decode(e),o=n.Links.map((e=>new s(e.Name,e.Tsize,e.Hash))),a=null==n.Data?r.alloc(0):n.Data;f((()=>t(null,new c(a,o,e.length))))},t.cid=function(e,t,n){"function"==typeof t&&(n=t,t={});const i=(t=t||{}).hashAlg||a.defaultHashAlg;let s=t.version;void 0===s&&(s="sha2-256"===i?0:1),l([t=>{if(r.isBuffer(e))return t(null,e);h(e,t)},(e,t)=>u(e,i,t),(e,t)=>t(null,new o(s,a.multicodec,e))],n)}},64423:function(e,t,n){"use strict";n.d(t,{Uv:function(){return c},yU:function(){return s}});var r=n(15215),o=n(61209),i=n(58909),a=n(6174),s=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,a,s;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var l=(0,r.Ju)(c),f=l.next();!f.done;f=l.next()){f.value.remove(this)}}catch(t){e={error:t}}finally{try{f&&!f.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else c.remove(this);var h=this.initialTeardown;if((0,o.T)(h))try{h()}catch(e){s=e instanceof i.Z?e.errors:[e]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var p=(0,r.Ju)(d),g=p.next();!g.done;g=p.next()){var y=g.value;try{u(y)}catch(e){s=null!=s?s:[],e instanceof i.Z?s=(0,r.fX)((0,r.fX)([],(0,r.zs)(s)),(0,r.zs)(e.errors)):s.push(e)}}}catch(e){n={error:e}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}}if(s)throw new i.Z(s)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)u(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&(0,a.o)(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&(0,a.o)(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();s.EMPTY;function c(e){return e instanceof s||e&&"closed"in e&&(0,o.T)(e.remove)&&(0,o.T)(e.add)&&(0,o.T)(e.unsubscribe)}function u(e){(0,o.T)(e)?e():e.unsubscribe()}},83141:function(e,t,n){"use strict";var r=n(92861).Buffer,o=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=f,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=a(t[r]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--r<n||-2===o)return 0;if(o=a(t[r]),o>=0)return o>0&&(e.lastNeed=o-2),o;if(--r<n||-2===o)return 0;if(o=a(t[r]),o>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},15215:function(e,t,n){"use strict";n.d(t,{C6:function(){return o},Ju:function(){return i},fX:function(){return s},zs:function(){return a}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}Object.create;function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function s(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create},58689:function(e,t,n){"use strict";e.exports=n.p+"cyb_cozo_lib_wasm_bg.c4ccba3cd9.wasm"},85471:function(){},66178:function(){},47790:function(){},73776:function(){},98285:function(){},38664:function(){},21638:function(){},92668:function(){},8460:function(){},92382:function(){},77667:function(){},76447:function(){},63779:function(){},77199:function(){}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return n[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=n,o.x=function(){var e=o.O(void 0,[667],(function(){return o(26160)}));return e=o.O(e)},o.amdO={},e=[],o.O=function(t,n,r,i){if(!n){var a=1/0;for(l=0;l<e.length;l++){n=e[l][0],r=e[l][1],i=e[l][2];for(var s=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,r,i]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))},o.u=function(e){return e+".f9f41328.js"},o.miniCssF=function(e){},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},o.p="/",function(){o.b=self.location+"";var e={492:1};o.f.i=function(t,n){e[t]||importScripts(o.p+o.u(t))};var t=self.webpackChunkcyb=self.webpackChunkcyb||[],n=t.push.bind(t);t.push=function(t){var r=t[0],i=t[1],a=t[2];for(var s in i)o.o(i,s)&&(o.m[s]=i[s]);for(a&&a(o);r.length;)e[r.pop()]=1;n(t)}}(),t=o.x,o.x=function(){return o.e(667).then(t)};o.x()}();
//# sourceMappingURL=492.abbaca81.chunk.js.map