/*! For license information please see 607.aa698d38.js.LICENSE.txt */
(self.webpackChunkcyb=self.webpackChunkcyb||[]).push([[607],{7701:function(t){t.exports=function t(n,i){var s,o=0,a=0,c=i=i||0,u=n.length;do{if(c>=u||a>49)throw t.bytes=0,new RangeError("Could not decode varint");s=n[c++],o+=a<28?(s&r)<<a:(s&r)*Math.pow(2,a),a+=7}while(s>=e);return t.bytes=c-i,o};var e=128,r=127},57560:function(t){t.exports=function t(i,s,o){if(Number.MAX_SAFE_INTEGER&&i>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");s=s||[];var a=o=o||0;for(;i>=n;)s[o++]=255&i|e,i/=128;for(;i&r;)s[o++]=255&i|e,i>>>=7;return s[o]=0|i,t.bytes=o-a+1,s};var e=128,r=-128,n=Math.pow(2,31)},20349:function(t,e,r){t.exports={encode:r(57560),decode:r(7701),encodingLength:r(84927)}},84927:function(t){var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},35873:function(t){t.exports=function t(n,i){var s,o=0,a=0,c=i=i||0,u=n.length;do{if(c>=u||a>49)throw t.bytes=0,new RangeError("Could not decode varint");s=n[c++],o+=a<28?(s&r)<<a:(s&r)*Math.pow(2,a),a+=7}while(s>=e);return t.bytes=c-i,o};var e=128,r=127},94931:function(t){t.exports=function t(i,s,o){if(Number.MAX_SAFE_INTEGER&&i>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");s=s||[];var a=o=o||0;for(;i>=n;)s[o++]=255&i|e,i/=128;for(;i&r;)s[o++]=255&i|e,i>>>=7;return s[o]=0|i,t.bytes=o-a+1,s};var e=128,r=-128,n=Math.pow(2,31)},71943:function(t,e,r){t.exports={encode:r(94931),decode:r(35873),encodingLength:r(77372)}},77372:function(t){var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},73223:function(t){t.exports=function t(n,i){var s,o=0,a=0,c=i=i||0,u=n.length;do{if(c>=u||a>49)throw t.bytes=0,new RangeError("Could not decode varint");s=n[c++],o+=a<28?(s&r)<<a:(s&r)*Math.pow(2,a),a+=7}while(s>=e);return t.bytes=c-i,o};var e=128,r=127},81557:function(t){t.exports=function t(i,s,o){if(Number.MAX_SAFE_INTEGER&&i>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");s=s||[];var a=o=o||0;for(;i>=n;)s[o++]=255&i|e,i/=128;for(;i&r;)s[o++]=255&i|e,i>>>=7;return s[o]=0|i,t.bytes=o-a+1,s};var e=128,r=-128,n=Math.pow(2,31)},59379:function(t,e,r){t.exports={encode:r(81557),decode:r(73223),encodingLength:r(35374)}},35374:function(t){var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},76915:function(t){t.exports=function t(n,i){var s,o=0,a=0,c=i=i||0,u=n.length;do{if(c>=u||a>49)throw t.bytes=0,new RangeError("Could not decode varint");s=n[c++],o+=a<28?(s&r)<<a:(s&r)*Math.pow(2,a),a+=7}while(s>=e);return t.bytes=c-i,o};var e=128,r=127},1824:function(t){t.exports=function t(i,s,o){if(Number.MAX_SAFE_INTEGER&&i>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");s=s||[];var a=o=o||0;for(;i>=n;)s[o++]=255&i|e,i/=128;for(;i&r;)s[o++]=255&i|e,i>>>=7;return s[o]=0|i,t.bytes=o-a+1,s};var e=128,r=-128,n=Math.pow(2,31)},31617:function(t,e,r){t.exports={encode:r(1824),decode:r(76915),encodingLength:r(19145)}},19145:function(t){var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},42301:function(t){t.exports=function t(n,i){var s,o=0,a=0,c=i=i||0,u=n.length;do{if(c>=u||a>49)throw t.bytes=0,new RangeError("Could not decode varint");s=n[c++],o+=a<28?(s&r)<<a:(s&r)*Math.pow(2,a),a+=7}while(s>=e);return t.bytes=c-i,o};var e=128,r=127},93211:function(t){t.exports=function t(i,s,o){if(Number.MAX_SAFE_INTEGER&&i>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");s=s||[];var a=o=o||0;for(;i>=n;)s[o++]=255&i|e,i/=128;for(;i&r;)s[o++]=255&i|e,i>>>=7;return s[o]=0|i,t.bytes=o-a+1,s};var e=128,r=-128,n=Math.pow(2,31)},98629:function(t,e,r){t.exports={encode:r(93211),decode:r(42301),encodingLength:r(67525)}},67525:function(t){var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},85247:function(t){t.exports=function t(n,i){var s,o=0,a=0,c=i=i||0,u=n.length;do{if(c>=u||a>49)throw t.bytes=0,new RangeError("Could not decode varint");s=n[c++],o+=a<28?(s&r)<<a:(s&r)*Math.pow(2,a),a+=7}while(s>=e);return t.bytes=c-i,o};var e=128,r=127},85646:function(t){t.exports=function t(i,s,o){if(Number.MAX_SAFE_INTEGER&&i>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");s=s||[];var a=o=o||0;for(;i>=n;)s[o++]=255&i|e,i/=128;for(;i&r;)s[o++]=255&i|e,i>>>=7;return s[o]=0|i,t.bytes=o-a+1,s};var e=128,r=-128,n=Math.pow(2,31)},81587:function(t,e,r){t.exports={encode:r(85646),decode:r(85247),encodingLength:r(96200)}},96200:function(t){var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},17221:function(t){t.exports=function t(n,i){var s,o=0,a=0,c=i=i||0,u=n.length;do{if(c>=u||a>49)throw t.bytes=0,new RangeError("Could not decode varint");s=n[c++],o+=a<28?(s&r)<<a:(s&r)*Math.pow(2,a),a+=7}while(s>=e);return t.bytes=c-i,o};var e=128,r=127},3582:function(t){t.exports=function t(i,s,o){if(Number.MAX_SAFE_INTEGER&&i>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");s=s||[];var a=o=o||0;for(;i>=n;)s[o++]=255&i|e,i/=128;for(;i&r;)s[o++]=255&i|e,i>>>=7;return s[o]=0|i,t.bytes=o-a+1,s};var e=128,r=-128,n=Math.pow(2,31)},90309:function(t,e,r){t.exports={encode:r(3582),decode:r(17221),encodingLength:r(22375)}},22375:function(t){var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},20393:function(t){t.exports=function t(n,i){var s,o=0,a=0,c=i=i||0,u=n.length;do{if(c>=u||a>49)throw t.bytes=0,new RangeError("Could not decode varint");s=n[c++],o+=a<28?(s&r)<<a:(s&r)*Math.pow(2,a),a+=7}while(s>=e);return t.bytes=c-i,o};var e=128,r=127},48645:function(t){t.exports=function t(i,s,o){if(Number.MAX_SAFE_INTEGER&&i>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");s=s||[];var a=o=o||0;for(;i>=n;)s[o++]=255&i|e,i/=128;for(;i&r;)s[o++]=255&i|e,i>>>=7;return s[o]=0|i,t.bytes=o-a+1,s};var e=128,r=-128,n=Math.pow(2,31)},93649:function(t,e,r){t.exports={encode:r(48645),decode:r(20393),encodingLength:r(63898)}},63898:function(t){var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},34537:function(t){"use strict";t.exports=function(t,e){var r=new Array(arguments.length-1),n=0,i=2,s=!0;for(;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,o){r[n]=function(t){if(s)if(s=!1,t)o(t);else{for(var e=new Array(arguments.length-1),r=0;r<e.length;)e[r++]=arguments[r];i.apply(null,e)}};try{t.apply(e||null,r)}catch(t){s&&(s=!1,o(t))}}))}},97419:function(t,e){"use strict";var r=e;r.length=function(t){var e=t.length;if(!e)return 0;for(var r=0;--e%4>1&&"="===t.charAt(e);)++r;return Math.ceil(3*t.length)/4-r};for(var n=new Array(64),i=new Array(123),s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(t,e,r){for(var i,s=null,o=[],a=0,c=0;e<r;){var u=t[e++];switch(c){case 0:o[a++]=n[u>>2],i=(3&u)<<4,c=1;break;case 1:o[a++]=n[i|u>>4],i=(15&u)<<2,c=2;break;case 2:o[a++]=n[i|u>>6],o[a++]=n[63&u],c=0}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=n[i],o[a++]=61,1===c&&(o[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var o="invalid encoding";r.decode=function(t,e,r){for(var n,s=r,a=0,c=0;c<t.length;){var u=t.charCodeAt(c++);if(61===u&&a>1)break;if(void 0===(u=i[u]))throw Error(o);switch(a){case 0:n=u,a=1;break;case 1:e[r++]=n<<2|(48&u)>>4,n=u,a=2;break;case 2:e[r++]=(15&n)<<4|(60&u)>>2,n=u,a=3;break;case 3:e[r++]=(3&n)<<6|u,a=0}}if(1===a)throw Error(o);return r-s},r.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},19211:function(t){"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,r){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:r||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var r=this._listeners[t],n=0;n<r.length;)r[n].fn===e?r.splice(n,1):++n;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,r)}return this}},10945:function(t){"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=128===r[3];function i(t,n,i){e[0]=t,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function s(t,n,i){e[0]=t,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function o(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],e[0]}function a(t,n){return r[3]=t[n],r[2]=t[n+1],r[1]=t[n+2],r[0]=t[n+3],e[0]}t.writeFloatLE=n?i:s,t.writeFloatBE=n?s:i,t.readFloatLE=n?o:a,t.readFloatBE=n?a:o}():function(){function e(t,e,r,n){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,r,n);else if(isNaN(e))t(2143289344,r,n);else if(e>34028234663852886e22)t((i<<31|2139095040)>>>0,r,n);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(e)/Math.LN2);t((i<<31|s+127<<23|8388607&Math.round(e*Math.pow(2,-s)*8388608))>>>0,r,n)}}function o(t,e,r){var n=t(e,r),i=2*(n>>31)+1,s=n>>>23&255,o=8388607&n;return 255===s?o?NaN:i*(1/0):0===s?1401298464324817e-60*i*o:i*Math.pow(2,s-150)*(o+8388608)}t.writeFloatLE=e.bind(null,r),t.writeFloatBE=e.bind(null,n),t.readFloatLE=o.bind(null,i),t.readFloatBE=o.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=128===r[7];function i(t,n,i){e[0]=t,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function s(t,n,i){e[0]=t,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function o(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],r[4]=t[n+4],r[5]=t[n+5],r[6]=t[n+6],r[7]=t[n+7],e[0]}function a(t,n){return r[7]=t[n],r[6]=t[n+1],r[5]=t[n+2],r[4]=t[n+3],r[3]=t[n+4],r[2]=t[n+5],r[1]=t[n+6],r[0]=t[n+7],e[0]}t.writeDoubleLE=n?i:s,t.writeDoubleBE=n?s:i,t.readDoubleLE=n?o:a,t.readDoubleBE=n?a:o}():function(){function e(t,e,r,n,i,s){var o=n<0?1:0;if(o&&(n=-n),0===n)t(0,i,s+e),t(1/n>0?0:2147483648,i,s+r);else if(isNaN(n))t(0,i,s+e),t(2146959360,i,s+r);else if(n>17976931348623157e292)t(0,i,s+e),t((o<<31|2146435072)>>>0,i,s+r);else{var a;if(n<22250738585072014e-324)t((a=n/5e-324)>>>0,i,s+e),t((o<<31|a/4294967296)>>>0,i,s+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),t(4503599627370496*(a=n*Math.pow(2,-c))>>>0,i,s+e),t((o<<31|c+1023<<20|1048576*a&1048575)>>>0,i,s+r)}}}function o(t,e,r,n,i){var s=t(n,i+e),o=t(n,i+r),a=2*(o>>31)+1,c=o>>>20&2047,u=4294967296*(1048575&o)+s;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}t.writeDoubleLE=e.bind(null,r,0,4),t.writeDoubleBE=e.bind(null,n,4,0),t.readDoubleLE=o.bind(null,i,0,4),t.readDoubleBE=o.bind(null,s,4,0)}(),t}function r(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function n(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}function i(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function s(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},67199:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},76662:function(t){"use strict";t.exports=function(t,e,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(r){if(r<1||r>i)return t(r);o+r>n&&(s=t(n),o=0);var a=e.call(s,o,o+=r);return 7&o&&(o=1+(7|o)),a}}},94997:function(t,e){"use strict";var r=e;r.length=function(t){for(var e=0,r=0,n=0;n<t.length;++n)(r=t.charCodeAt(n))<128?e+=1:r<2048?e+=2:55296==(64512&r)&&56320==(64512&t.charCodeAt(n+1))?(++n,e+=4):e+=3;return e},r.read=function(t,e,r){if(r-e<1)return"";for(var n,i=null,s=[],o=0;e<r;)(n=t[e++])<128?s[o++]=n:n>191&&n<224?s[o++]=(31&n)<<6|63&t[e++]:n>239&&n<365?(n=((7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,s[o++]=55296+(n>>10),s[o++]=56320+(1023&n)):s[o++]=(15&n)<<12|(63&t[e++])<<6|63&t[e++],o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0);return i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))},r.write=function(t,e,r){for(var n,i,s=r,o=0;o<t.length;++o)(n=t.charCodeAt(o))<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=t.charCodeAt(o+1)))?(n=65536+((1023&n)<<10)+(1023&i),++o,e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=63&n|128):(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=63&n|128);return r-s}},99748:function(t,e,r){"use strict";function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}r.d(e,{Q:function(){return n}}),n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<n.length;i++)if((r=n[i])===e||r.fn===e){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){n=0;for(var i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,e)}return this},n.prototype.emitReserved=n.prototype.emit,n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},98099:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(97117);function i(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}function s(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}function o(t,e){return void 0===e&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function a(t,e){return void 0===e&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function c(t,e){return void 0===e&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function u(t,e){return void 0===e&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}function l(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}function h(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}function d(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),l(t/4294967296>>>0,e,r),l(t>>>0,e,r+4),e}function f(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),h(t>>>0,e,r),h(t/4294967296>>>0,e,r+4),e}e.readInt16BE=function(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16},e.readUint16BE=function(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])>>>0},e.readInt16LE=function(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])<<16>>16},e.readUint16LE=function(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])>>>0},e.writeUint16BE=i,e.writeInt16BE=i,e.writeUint16LE=s,e.writeInt16LE=s,e.readInt32BE=o,e.readUint32BE=a,e.readInt32LE=c,e.readUint32LE=u,e.writeUint32BE=l,e.writeInt32BE=l,e.writeUint32LE=h,e.writeInt32LE=h,e.readInt64BE=function(t,e){void 0===e&&(e=0);var r=o(t,e),n=o(t,e+4);return 4294967296*r+n-4294967296*(n>>31)},e.readUint64BE=function(t,e){return void 0===e&&(e=0),4294967296*a(t,e)+a(t,e+4)},e.readInt64LE=function(t,e){void 0===e&&(e=0);var r=c(t,e);return 4294967296*c(t,e+4)+r-4294967296*(r>>31)},e.readUint64LE=function(t,e){void 0===e&&(e=0);var r=u(t,e);return 4294967296*u(t,e+4)+r},e.writeUint64BE=d,e.writeInt64BE=d,e.writeUint64LE=f,e.writeInt64LE=f,e.readUintBE=function(t,e,r){if(void 0===r&&(r=0),t%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n},e.readUintLE=function(t,e,r){if(void 0===r&&(r=0),t%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n},e.writeUintBE=function(t,e,r,i){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===i&&(i=0),t%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var s=1,o=t/8+i-1;o>=i;o--)r[o]=e/s&255,s*=256;return r},e.writeUintLE=function(t,e,r,i){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===i&&(i=0),t%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var s=1,o=i;o<i+t/8;o++)r[o]=e/s&255,s*=256;return r},e.readFloat32BE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e)},e.readFloat32LE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e,!0)},e.readFloat64BE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e)},e.readFloat64LE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e,!0)},e.writeFloat32BE=function(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(r,t),e},e.writeFloat32LE=function(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(r,t,!0),e},e.writeFloat64BE=function(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(r,t),e},e.writeFloat64LE=function(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(r,t,!0),e}},25439:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(98099),i=r(17309),s=20;function o(t,e,r){for(var i=1634760805,o=857760878,a=2036477234,c=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],g=r[27]<<24|r[26]<<16|r[25]<<8|r[24],y=r[31]<<24|r[30]<<16|r[29]<<8|r[28],m=e[3]<<24|e[2]<<16|e[1]<<8|e[0],w=e[7]<<24|e[6]<<16|e[5]<<8|e[4],b=e[11]<<24|e[10]<<16|e[9]<<8|e[8],E=e[15]<<24|e[14]<<16|e[13]<<8|e[12],v=i,_=o,S=a,A=c,R=u,T=l,I=h,C=d,k=f,N=p,B=g,P=y,L=m,D=w,O=b,x=E,U=0;U<s;U+=2)R=(R^=k=k+(L=(L^=v=v+R|0)>>>16|L<<16)|0)>>>20|R<<12,T=(T^=N=N+(D=(D^=_=_+T|0)>>>16|D<<16)|0)>>>20|T<<12,I=(I^=B=B+(O=(O^=S=S+I|0)>>>16|O<<16)|0)>>>20|I<<12,C=(C^=P=P+(x=(x^=A=A+C|0)>>>16|x<<16)|0)>>>20|C<<12,I=(I^=B=B+(O=(O^=S=S+I|0)>>>24|O<<8)|0)>>>25|I<<7,C=(C^=P=P+(x=(x^=A=A+C|0)>>>24|x<<8)|0)>>>25|C<<7,T=(T^=N=N+(D=(D^=_=_+T|0)>>>24|D<<8)|0)>>>25|T<<7,R=(R^=k=k+(L=(L^=v=v+R|0)>>>24|L<<8)|0)>>>25|R<<7,T=(T^=B=B+(x=(x^=v=v+T|0)>>>16|x<<16)|0)>>>20|T<<12,I=(I^=P=P+(L=(L^=_=_+I|0)>>>16|L<<16)|0)>>>20|I<<12,C=(C^=k=k+(D=(D^=S=S+C|0)>>>16|D<<16)|0)>>>20|C<<12,R=(R^=N=N+(O=(O^=A=A+R|0)>>>16|O<<16)|0)>>>20|R<<12,C=(C^=k=k+(D=(D^=S=S+C|0)>>>24|D<<8)|0)>>>25|C<<7,R=(R^=N=N+(O=(O^=A=A+R|0)>>>24|O<<8)|0)>>>25|R<<7,I=(I^=P=P+(L=(L^=_=_+I|0)>>>24|L<<8)|0)>>>25|I<<7,T=(T^=B=B+(x=(x^=v=v+T|0)>>>24|x<<8)|0)>>>25|T<<7;n.writeUint32LE(v+i|0,t,0),n.writeUint32LE(_+o|0,t,4),n.writeUint32LE(S+a|0,t,8),n.writeUint32LE(A+c|0,t,12),n.writeUint32LE(R+u|0,t,16),n.writeUint32LE(T+l|0,t,20),n.writeUint32LE(I+h|0,t,24),n.writeUint32LE(C+d|0,t,28),n.writeUint32LE(k+f|0,t,32),n.writeUint32LE(N+p|0,t,36),n.writeUint32LE(B+g|0,t,40),n.writeUint32LE(P+y|0,t,44),n.writeUint32LE(L+m|0,t,48),n.writeUint32LE(D+w|0,t,52),n.writeUint32LE(O+b|0,t,56),n.writeUint32LE(x+E|0,t,60)}function a(t,e,r,n,s){if(void 0===s&&(s=0),32!==t.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var a,u;if(0===s){if(8!==e.length&&12!==e.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");u=(a=new Uint8Array(16)).length-e.length,a.set(e,u)}else{if(16!==e.length)throw new Error("ChaCha nonce with counter must be 16 bytes");a=e,u=s}for(var l=new Uint8Array(64),h=0;h<r.length;h+=64){o(l,a,t);for(var d=h;d<h+64&&d<r.length;d++)n[d]=r[d]^l[d-h];c(a,0,u)}return i.wipe(l),0===s&&i.wipe(a),n}function c(t,e,r){for(var n=1;r--;)n=n+(255&t[e])|0,t[e]=255&n,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}e.streamXOR=a,e.stream=function(t,e,r,n){return void 0===n&&(n=0),i.wipe(r),a(t,e,r,r,n)}},15501:function(t,e,r){"use strict";var n=r(25439),i=r(63027),s=r(17309),o=r(98099),a=r(4153);e.Cv=32,e.WH=12,e.pg=16;var c=new Uint8Array(16),u=function(){function t(t){if(this.nonceLength=e.WH,this.tagLength=e.pg,t.length!==e.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return t.prototype.seal=function(t,e,r,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(t,o.length-t.length);var a=new Uint8Array(32);n.stream(this._key,o,a,4);var c,u=e.length+this.tagLength;if(i){if(i.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(u);return n.streamXOR(this._key,o,e,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),a,c.subarray(0,c.length-this.tagLength),r),s.wipe(o),c},t.prototype.open=function(t,e,r,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(e.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(t,o.length-t.length);var c=new Uint8Array(32);n.stream(this._key,o,c,4);var u=new Uint8Array(this.tagLength);if(this._authenticate(u,c,e.subarray(0,e.length-this.tagLength),r),!a.equal(u,e.subarray(e.length-this.tagLength,e.length)))return null;var l,h=e.length-this.tagLength;if(i){if(i.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");l=i}else l=new Uint8Array(h);return n.streamXOR(this._key,o,e.subarray(0,e.length-this.tagLength),l,4),s.wipe(o),l},t.prototype.clean=function(){return s.wipe(this._key),this},t.prototype._authenticate=function(t,e,r,n){var a=new i.Poly1305(e);n&&(a.update(n),n.length%16>0&&a.update(c.subarray(n.length%16))),a.update(r),r.length%16>0&&a.update(c.subarray(r.length%16));var u=new Uint8Array(8);n&&o.writeUint64LE(n.length,u),a.update(u),o.writeUint64LE(r.length,u),a.update(u);for(var l=a.digest(),h=0;h<l.length;h++)t[h]=l[h];a.clean(),s.wipe(l),s.wipe(u)},t}();e.OK=u},4153:function(t,e){"use strict";function r(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Object.defineProperty(e,"__esModule",{value:!0}),e.select=function(t,e,r){return~(t-1)&e|t-1&r},e.lessOrEqual=function(t,e){return(0|t)-(0|e)-1>>>31&1},e.compare=r,e.equal=function(t,e){return 0!==t.length&&0!==e.length&&0!==r(t,e)}},79984:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSerializableHash=function(t){return void 0!==t.saveState&&void 0!==t.restoreState&&void 0!==t.cleanSavedState}},512:function(t,e,r){"use strict";var n=r(25629),i=r(17309),s=function(){function t(t,e,r,i){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=i;var s=n.hmac(this._hash,r,e);this._hmac=new n.HMAC(t,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(0===t)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(t){for(var e=new Uint8Array(t),r=0;r<e.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),e[r]=this._buffer[this._bufpos++];return e},t.prototype.clean=function(){this._hmac.clean(),i.wipe(this._buffer),i.wipe(this._counter),this._bufpos=0},t}();e.t=s},25629:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(79984),i=r(4153),s=r(17309),o=function(){function t(t,e){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);e.length>this.blockSize?this._inner.update(e).finish(r).clean():r.set(e);for(var i=0;i<r.length;i++)r[i]^=54;this._inner.update(r);for(i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),s.wipe(r)}return t.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(t){return this._inner.update(t),this},t.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(t){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(t){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},t}();e.HMAC=o,e.hmac=function(t,e,r){var n=new o(t,e);n.update(r);var i=n.digest();return n.clean(),i},e.equal=i.equal},97117:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mul=Math.imul||function(t,e){var r=65535&t,n=65535&e;return r*n+((t>>>16&65535)*n+r*(e>>>16&65535)<<16>>>0)|0},e.add=function(t,e){return t+e|0},e.sub=function(t,e){return t-e|0},e.rotl=function(t,e){return t<<e|t>>>32-e},e.rotr=function(t,e){return t<<32-e|t>>>e},e.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(t){return e.isInteger(t)&&t>=-e.MAX_SAFE_INTEGER&&t<=e.MAX_SAFE_INTEGER}},63027:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4153),i=r(17309);e.DIGEST_LENGTH=16;var s=function(){function t(t){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=t[0]|t[1]<<8;this._r[0]=8191&r;var n=t[2]|t[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var i=t[4]|t[5]<<8;this._r[2]=7939&(n>>>10|i<<6);var s=t[6]|t[7]<<8;this._r[3]=8191&(i>>>7|s<<9);var o=t[8]|t[9]<<8;this._r[4]=255&(s>>>4|o<<12),this._r[5]=o>>>1&8190;var a=t[10]|t[11]<<8;this._r[6]=8191&(o>>>14|a<<2);var c=t[12]|t[13]<<8;this._r[7]=8065&(a>>>11|c<<5);var u=t[14]|t[15]<<8;this._r[8]=8191&(c>>>8|u<<8),this._r[9]=u>>>5&127,this._pad[0]=t[16]|t[17]<<8,this._pad[1]=t[18]|t[19]<<8,this._pad[2]=t[20]|t[21]<<8,this._pad[3]=t[22]|t[23]<<8,this._pad[4]=t[24]|t[25]<<8,this._pad[5]=t[26]|t[27]<<8,this._pad[6]=t[28]|t[29]<<8,this._pad[7]=t[30]|t[31]<<8}return t.prototype._blocks=function(t,e,r){for(var n=this._fin?0:2048,i=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],c=this._h[4],u=this._h[5],l=this._h[6],h=this._h[7],d=this._h[8],f=this._h[9],p=this._r[0],g=this._r[1],y=this._r[2],m=this._r[3],w=this._r[4],b=this._r[5],E=this._r[6],v=this._r[7],_=this._r[8],S=this._r[9];r>=16;){var A=t[e+0]|t[e+1]<<8;i+=8191&A;var R=t[e+2]|t[e+3]<<8;s+=8191&(A>>>13|R<<3);var T=t[e+4]|t[e+5]<<8;o+=8191&(R>>>10|T<<6);var I=t[e+6]|t[e+7]<<8;a+=8191&(T>>>7|I<<9);var C=t[e+8]|t[e+9]<<8;c+=8191&(I>>>4|C<<12),u+=C>>>1&8191;var k=t[e+10]|t[e+11]<<8;l+=8191&(C>>>14|k<<2);var N=t[e+12]|t[e+13]<<8;h+=8191&(k>>>11|N<<5);var B=t[e+14]|t[e+15]<<8,P=0,L=P;L+=i*p,L+=s*(5*S),L+=o*(5*_),L+=a*(5*v),P=(L+=c*(5*E))>>>13,L&=8191,L+=u*(5*b),L+=l*(5*w),L+=h*(5*m),L+=(d+=8191&(N>>>8|B<<8))*(5*y);var D=P+=(L+=(f+=B>>>5|n)*(5*g))>>>13;D+=i*g,D+=s*p,D+=o*(5*S),D+=a*(5*_),P=(D+=c*(5*v))>>>13,D&=8191,D+=u*(5*E),D+=l*(5*b),D+=h*(5*w),D+=d*(5*m),P+=(D+=f*(5*y))>>>13,D&=8191;var O=P;O+=i*y,O+=s*g,O+=o*p,O+=a*(5*S),P=(O+=c*(5*_))>>>13,O&=8191,O+=u*(5*v),O+=l*(5*E),O+=h*(5*b),O+=d*(5*w);var x=P+=(O+=f*(5*m))>>>13;x+=i*m,x+=s*y,x+=o*g,x+=a*p,P=(x+=c*(5*S))>>>13,x&=8191,x+=u*(5*_),x+=l*(5*v),x+=h*(5*E),x+=d*(5*b);var U=P+=(x+=f*(5*w))>>>13;U+=i*w,U+=s*m,U+=o*y,U+=a*g,P=(U+=c*p)>>>13,U&=8191,U+=u*(5*S),U+=l*(5*_),U+=h*(5*v),U+=d*(5*E);var M=P+=(U+=f*(5*b))>>>13;M+=i*b,M+=s*w,M+=o*m,M+=a*y,P=(M+=c*g)>>>13,M&=8191,M+=u*p,M+=l*(5*S),M+=h*(5*_),M+=d*(5*v);var V=P+=(M+=f*(5*E))>>>13;V+=i*E,V+=s*b,V+=o*w,V+=a*m,P=(V+=c*y)>>>13,V&=8191,V+=u*g,V+=l*p,V+=h*(5*S),V+=d*(5*_);var j=P+=(V+=f*(5*v))>>>13;j+=i*v,j+=s*E,j+=o*b,j+=a*w,P=(j+=c*m)>>>13,j&=8191,j+=u*y,j+=l*g,j+=h*p,j+=d*(5*S);var F=P+=(j+=f*(5*_))>>>13;F+=i*_,F+=s*v,F+=o*E,F+=a*b,P=(F+=c*w)>>>13,F&=8191,F+=u*m,F+=l*y,F+=h*g,F+=d*p;var z=P+=(F+=f*(5*S))>>>13;z+=i*S,z+=s*_,z+=o*v,z+=a*E,P=(z+=c*b)>>>13,z&=8191,z+=u*w,z+=l*m,z+=h*y,z+=d*g,i=L=8191&(P=(P=((P+=(z+=f*p)>>>13)<<2)+P|0)+(L&=8191)|0),s=D+=P>>>=13,o=O&=8191,a=x&=8191,c=U&=8191,u=M&=8191,l=V&=8191,h=j&=8191,d=F&=8191,f=z&=8191,e+=16,r-=16}this._h[0]=i,this._h[1]=s,this._h[2]=o,this._h[3]=a,this._h[4]=c,this._h[5]=u,this._h[6]=l,this._h[7]=h,this._h[8]=d,this._h[9]=f},t.prototype.finish=function(t,e){void 0===e&&(e=0);var r,n,i,s,o=new Uint16Array(10);if(this._leftover){for(s=this._leftover,this._buffer[s++]=1;s<16;s++)this._buffer[s]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,s=2;s<10;s++)this._h[s]+=r,r=this._h[s]>>>13,this._h[s]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,o[0]=this._h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this._h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(n=~n,s=0;s<10;s++)this._h[s]=this._h[s]&n|o[s];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),i=this._h[0]+this._pad[0],this._h[0]=65535&i,s=1;s<8;s++)i=(this._h[s]+this._pad[s]|0)+(i>>>16)|0,this._h[s]=65535&i;return t[e+0]=this._h[0]>>>0,t[e+1]=this._h[0]>>>8,t[e+2]=this._h[1]>>>0,t[e+3]=this._h[1]>>>8,t[e+4]=this._h[2]>>>0,t[e+5]=this._h[2]>>>8,t[e+6]=this._h[3]>>>0,t[e+7]=this._h[3]>>>8,t[e+8]=this._h[4]>>>0,t[e+9]=this._h[4]>>>8,t[e+10]=this._h[5]>>>0,t[e+11]=this._h[5]>>>8,t[e+12]=this._h[6]>>>0,t[e+13]=this._h[6]>>>8,t[e+14]=this._h[7]>>>0,t[e+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(t){var e,r=0,n=t.length;if(this._leftover){(e=16-this._leftover)>n&&(e=n);for(var i=0;i<e;i++)this._buffer[this._leftover+i]=t[r+i];if(n-=e,r+=e,this._leftover+=e,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(e=n-n%16,this._blocks(t,r,e),r+=e,n-=e),n){for(i=0;i<n;i++)this._buffer[this._leftover+i]=t[r+i];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var t=new Uint8Array(16);return this.finish(t),t},t.prototype.clean=function(){return i.wipe(this._buffer),i.wipe(this._r),i.wipe(this._h),i.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();e.Poly1305=s,e.oneTimeAuth=function(t,e){var r=new s(t);r.update(e);var n=r.digest();return r.clean(),n},e.equal=function(t,r){return t.length===e.DIGEST_LENGTH&&r.length===e.DIGEST_LENGTH&&n.equal(t,r)}},31416:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const n=r(46008),i=r(98099),s=r(17309);function o(t,r=e.defaultRandomSource){return r.randomBytes(t)}e.defaultRandomSource=new n.SystemRandomSource,e.randomBytes=o,e.randomUint32=function(t=e.defaultRandomSource){const r=o(4,t),n=(0,i.readUint32LE)(r);return(0,s.wipe)(r),n};const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(t,r=a,n=e.defaultRandomSource){if(r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");let i="";const c=r.length,u=256-256%c;for(;t>0;){const e=o(Math.ceil(256*t/u),n);for(let n=0;n<e.length&&t>0;n++){const s=e[n];s<u&&(i+=r.charAt(s%c),t--)}(0,s.wipe)(e)}return i}e.randomString=c,e.randomStringForEntropy=function(t,r=a,n=e.defaultRandomSource){return c(Math.ceil(t/(Math.log(r.length)/Math.LN2)),r,n)}},75455:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserRandomSource=void 0;e.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&void 0!==t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const e=new Uint8Array(t);for(let t=0;t<e.length;t+=65536)this._crypto.getRandomValues(e.subarray(t,t+Math.min(e.length-t,65536)));return e}}},58871:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeRandomSource=void 0;const n=r(17309);e.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const t=r(35883);t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let e=this._crypto.randomBytes(t);if(e.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(t);for(let t=0;t<r.length;t++)r[t]=e[t];return(0,n.wipe)(e),r}}},46008:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystemRandomSource=void 0;const n=r(75455),i=r(58871);e.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new i.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}},73294:function(t,e,r){"use strict";var n=r(98099),i=r(17309);e.k=32,e.cn=64;var s=function(){function t(){this.digestLength=e.k,this.blockSize=e.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._temp),this.reset()},t.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=e,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&e>0;)this._buffer[this._bufferLength++]=t[r++],e--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(e>=this.blockSize&&(r=a(this._temp,this._state,t,r,e),e%=this.blockSize);e>0;)this._buffer[this._bufferLength++]=t[r++],e--;return this},t.prototype.finish=function(t){if(!this._finished){var e=this._bytesHashed,r=this._bufferLength,i=e/536870912|0,s=e<<3,o=e%64<56?64:128;this._buffer[r]=128;for(var c=r+1;c<o-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,o-8),n.writeUint32BE(s,this._buffer,o-4),a(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/4;c++)n.writeUint32BE(this._state[c],t,4*c);return this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(t){return this._state.set(t.state),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(t){i.wipe(t.state),t.buffer&&i.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},t}();e.mE=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(t,e,r,i,s){for(;s>=64;){for(var a=e[0],c=e[1],u=e[2],l=e[3],h=e[4],d=e[5],f=e[6],p=e[7],g=0;g<16;g++){var y=i+4*g;t[g]=n.readUint32BE(r,y)}for(g=16;g<64;g++){var m=t[g-2],w=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,b=((m=t[g-15])>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;t[g]=(w+t[g-7]|0)+(b+t[g-16]|0)}for(g=0;g<64;g++){w=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&f)|0)+(p+(o[g]+t[g]|0)|0)|0,b=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&u^c&u)|0;p=f,f=d,d=h,h=l+w|0,l=u,u=c,c=a,a=w+b|0}e[0]+=a,e[1]+=c,e[2]+=u,e[3]+=l,e[4]+=h,e[5]+=d,e[6]+=f,e[7]+=p,i+=64,s-=64}return i}e.vp=function(t){var e=new s;e.update(t);var r=e.digest();return e.clean(),r}},17309:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wipe=function(t){for(var e=0;e<t.length;e++)t[e]=0;return t}},57664:function(t,e,r){"use strict";e.gi=e.Au=e._w=e.KS=e.kz=void 0;const n=r(31416),i=r(17309);function s(t){const e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}e.kz=32,e.KS=32;const o=new Uint8Array(32);o[0]=9;const a=s([56129,1]);function c(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-65536*e}t[0]+=e-1+37*(e-1)}function u(t,e,r){const n=~(r-1);for(let r=0;r<16;r++){const i=n&(t[r]^e[r]);t[r]^=i,e[r]^=i}}function l(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function h(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function d(t,e,r){let n,i,s=0,o=0,a=0,c=0,u=0,l=0,h=0,d=0,f=0,p=0,g=0,y=0,m=0,w=0,b=0,E=0,v=0,_=0,S=0,A=0,R=0,T=0,I=0,C=0,k=0,N=0,B=0,P=0,L=0,D=0,O=0,x=r[0],U=r[1],M=r[2],V=r[3],j=r[4],F=r[5],z=r[6],K=r[7],$=r[8],q=r[9],H=r[10],G=r[11],W=r[12],Y=r[13],Z=r[14],Q=r[15];n=e[0],s+=n*x,o+=n*U,a+=n*M,c+=n*V,u+=n*j,l+=n*F,h+=n*z,d+=n*K,f+=n*$,p+=n*q,g+=n*H,y+=n*G,m+=n*W,w+=n*Y,b+=n*Z,E+=n*Q,n=e[1],o+=n*x,a+=n*U,c+=n*M,u+=n*V,l+=n*j,h+=n*F,d+=n*z,f+=n*K,p+=n*$,g+=n*q,y+=n*H,m+=n*G,w+=n*W,b+=n*Y,E+=n*Z,v+=n*Q,n=e[2],a+=n*x,c+=n*U,u+=n*M,l+=n*V,h+=n*j,d+=n*F,f+=n*z,p+=n*K,g+=n*$,y+=n*q,m+=n*H,w+=n*G,b+=n*W,E+=n*Y,v+=n*Z,_+=n*Q,n=e[3],c+=n*x,u+=n*U,l+=n*M,h+=n*V,d+=n*j,f+=n*F,p+=n*z,g+=n*K,y+=n*$,m+=n*q,w+=n*H,b+=n*G,E+=n*W,v+=n*Y,_+=n*Z,S+=n*Q,n=e[4],u+=n*x,l+=n*U,h+=n*M,d+=n*V,f+=n*j,p+=n*F,g+=n*z,y+=n*K,m+=n*$,w+=n*q,b+=n*H,E+=n*G,v+=n*W,_+=n*Y,S+=n*Z,A+=n*Q,n=e[5],l+=n*x,h+=n*U,d+=n*M,f+=n*V,p+=n*j,g+=n*F,y+=n*z,m+=n*K,w+=n*$,b+=n*q,E+=n*H,v+=n*G,_+=n*W,S+=n*Y,A+=n*Z,R+=n*Q,n=e[6],h+=n*x,d+=n*U,f+=n*M,p+=n*V,g+=n*j,y+=n*F,m+=n*z,w+=n*K,b+=n*$,E+=n*q,v+=n*H,_+=n*G,S+=n*W,A+=n*Y,R+=n*Z,T+=n*Q,n=e[7],d+=n*x,f+=n*U,p+=n*M,g+=n*V,y+=n*j,m+=n*F,w+=n*z,b+=n*K,E+=n*$,v+=n*q,_+=n*H,S+=n*G,A+=n*W,R+=n*Y,T+=n*Z,I+=n*Q,n=e[8],f+=n*x,p+=n*U,g+=n*M,y+=n*V,m+=n*j,w+=n*F,b+=n*z,E+=n*K,v+=n*$,_+=n*q,S+=n*H,A+=n*G,R+=n*W,T+=n*Y,I+=n*Z,C+=n*Q,n=e[9],p+=n*x,g+=n*U,y+=n*M,m+=n*V,w+=n*j,b+=n*F,E+=n*z,v+=n*K,_+=n*$,S+=n*q,A+=n*H,R+=n*G,T+=n*W,I+=n*Y,C+=n*Z,k+=n*Q,n=e[10],g+=n*x,y+=n*U,m+=n*M,w+=n*V,b+=n*j,E+=n*F,v+=n*z,_+=n*K,S+=n*$,A+=n*q,R+=n*H,T+=n*G,I+=n*W,C+=n*Y,k+=n*Z,N+=n*Q,n=e[11],y+=n*x,m+=n*U,w+=n*M,b+=n*V,E+=n*j,v+=n*F,_+=n*z,S+=n*K,A+=n*$,R+=n*q,T+=n*H,I+=n*G,C+=n*W,k+=n*Y,N+=n*Z,B+=n*Q,n=e[12],m+=n*x,w+=n*U,b+=n*M,E+=n*V,v+=n*j,_+=n*F,S+=n*z,A+=n*K,R+=n*$,T+=n*q,I+=n*H,C+=n*G,k+=n*W,N+=n*Y,B+=n*Z,P+=n*Q,n=e[13],w+=n*x,b+=n*U,E+=n*M,v+=n*V,_+=n*j,S+=n*F,A+=n*z,R+=n*K,T+=n*$,I+=n*q,C+=n*H,k+=n*G,N+=n*W,B+=n*Y,P+=n*Z,L+=n*Q,n=e[14],b+=n*x,E+=n*U,v+=n*M,_+=n*V,S+=n*j,A+=n*F,R+=n*z,T+=n*K,I+=n*$,C+=n*q,k+=n*H,N+=n*G,B+=n*W,P+=n*Y,L+=n*Z,D+=n*Q,n=e[15],E+=n*x,v+=n*U,_+=n*M,S+=n*V,A+=n*j,R+=n*F,T+=n*z,I+=n*K,C+=n*$,k+=n*q,N+=n*H,B+=n*G,P+=n*W,L+=n*Y,D+=n*Z,O+=n*Q,s+=38*v,o+=38*_,a+=38*S,c+=38*A,u+=38*R,l+=38*T,h+=38*I,d+=38*C,f+=38*k,p+=38*N,g+=38*B,y+=38*P,m+=38*L,w+=38*D,b+=38*O,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=E+i+65535,i=Math.floor(n/65536),E=n-65536*i,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=E+i+65535,i=Math.floor(n/65536),E=n-65536*i,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=l,t[6]=h,t[7]=d,t[8]=f,t[9]=p,t[10]=g,t[11]=y,t[12]=m,t[13]=w,t[14]=b,t[15]=E}function f(t,e){d(t,e,e)}function p(t,e){const r=new Uint8Array(32),n=new Float64Array(80),i=s(),o=s(),p=s(),g=s(),y=s(),m=s();for(let e=0;e<31;e++)r[e]=t[e];r[31]=127&t[31]|64,r[0]&=248,function(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}(n,e);for(let t=0;t<16;t++)o[t]=n[t];i[0]=g[0]=1;for(let t=254;t>=0;--t){const e=r[t>>>3]>>>(7&t)&1;u(i,o,e),u(p,g,e),l(y,i,p),h(i,i,p),l(p,o,g),h(o,o,g),f(g,y),f(m,i),d(i,p,i),d(p,o,y),l(y,i,p),h(i,i,p),f(o,i),h(p,g,m),d(i,p,a),l(i,i,g),d(p,p,i),d(i,g,m),d(g,o,n),f(o,y),u(i,o,e),u(p,g,e)}for(let t=0;t<16;t++)n[t+16]=i[t],n[t+32]=p[t],n[t+48]=o[t],n[t+64]=g[t];const w=n.subarray(32),b=n.subarray(16);!function(t,e){const r=s();for(let t=0;t<16;t++)r[t]=e[t];for(let t=253;t>=0;t--)f(r,r),2!==t&&4!==t&&d(r,r,e);for(let e=0;e<16;e++)t[e]=r[e]}(w,w),d(b,b,w);const E=new Uint8Array(32);return function(t,e){const r=s(),n=s();for(let t=0;t<16;t++)n[t]=e[t];c(n),c(n),c(n);for(let t=0;t<2;t++){r[0]=n[0]-65517;for(let t=1;t<15;t++)r[t]=n[t]-65535-(r[t-1]>>16&1),r[t-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const t=r[15]>>16&1;r[14]&=65535,u(n,r,1-t)}for(let e=0;e<16;e++)t[2*e]=255&n[e],t[2*e+1]=n[e]>>8}(E,b),E}function g(t){return p(t,o)}function y(t){if(t.length!==e.KS)throw new Error(`x25519: seed must be ${e.KS} bytes`);const r=new Uint8Array(t);return{publicKey:g(r),secretKey:r}}e._w=y,e.Au=function(t){const e=(0,n.randomBytes)(32,t),r=y(e);return(0,i.wipe)(e),r},e.gi=function(t,r,n=!1){if(t.length!==e.kz)throw new Error("X25519: incorrect secret key length");if(r.length!==e.kz)throw new Error("X25519: incorrect public key length");const i=p(t,r);if(n){let t=0;for(let e=0;e<i.length;e++)t|=i[e];if(0===t)throw new Error("X25519: invalid shared key")}return i}},63573:function(t,e){"use strict";const r=Math.exp;t.exports=function(t){if("number"!=typeof t)throw new Error("must provide a timespan to the moving average constructor");if(t<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let e,n,i=0,s=0,o=0,a={};return a.push=function(a,c){if(n){const u=1-r(-(a-n)/t),l=c-e;e=u*c+(1-u)*e,i=(1-u)*(i+l*(u*l)),s=Math.sqrt(i),o=e+u*l}else e=c;n=a},a.movingAverage=function(){return e},a.variance=function(){return i},a.deviation=function(){return s},a.forecast=function(){return o},a}},99507:function(t,e,r){"use strict";const n=r(61798),{EventEmitter:i}=r(17187);function s(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;++r)if(t[r]!==e[r])return!1;return!0}function o(t,e){if(!(e instanceof Uint8Array))throw new TypeError(t+" is not a Uint8Array")}class a extends i{constructor(t={}){super(),this.localNodeId=t.localNodeId||n(20),this.numberOfNodesPerKBucket=t.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=t.numberOfNodesToPing||3,this.distance=t.distance||a.distance,this.arbiter=t.arbiter||a.arbiter,this.metadata=Object.assign({},t.metadata),o("option.localNodeId as parameter 1",this.localNodeId),this.root={contacts:[],dontSplit:!1,left:null,right:null}}static arbiter(t,e){return t.vectorClock>e.vectorClock?t:e}static distance(t,e){let r=0,n=0;const i=Math.min(t.length,e.length),s=Math.max(t.length,e.length);for(;n<i;++n)r=256*r+(t[n]^e[n]);for(;n<s;++n)r=256*r+255;return r}add(t){o("contact.id",(t||{}).id);let e=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,t.id,e++);const n=this._indexOf(r,t.id);return n>=0?(this._update(r,n,t),this):r.contacts.length<this.numberOfNodesPerKBucket?(r.contacts.push(t),this.emit("added",t),this):r.dontSplit?(this.emit("ping",r.contacts.slice(0,this.numberOfNodesToPing),t),this):(this._split(r,e),this.add(t))}closest(t,e=1/0){if(o("id",t),!Number.isInteger(e)&&e!==1/0||e<=0)throw new TypeError("n is not positive number");let r=[];for(let n=[this.root],i=0;n.length>0&&r.length<e;){const e=n.pop();if(null===e.contacts){const r=this._determineNode(e,t,i++);n.push(e.left===r?e.right:e.left),n.push(r)}else r=r.concat(e.contacts)}return r.map((e=>[this.distance(e.id,t),e])).sort(((t,e)=>t[0]-e[0])).slice(0,e).map((t=>t[1]))}count(){let t=0;for(const e=[this.root];e.length>0;){const r=e.pop();null===r.contacts?e.push(r.right,r.left):t+=r.contacts.length}return t}_determineNode(t,e,r){const n=r>>3,i=r%8;if(e.length<=n&&0!==i)return t.left;return e[n]&1<<7-i?t.right:t.left}get(t){o("id",t);let e=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,t,e++);const n=this._indexOf(r,t);return n>=0?r.contacts[n]:null}_indexOf(t,e){for(let r=0;r<t.contacts.length;++r)if(s(t.contacts[r].id,e))return r;return-1}remove(t){o("the id as parameter 1",t);let e=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,t,e++);const n=this._indexOf(r,t);if(n>=0){const t=r.contacts.splice(n,1)[0];this.emit("removed",t)}return this}_split(t,e){t.left={contacts:[],dontSplit:!1,left:null,right:null},t.right={contacts:[],dontSplit:!1,left:null,right:null};for(const r of t.contacts)this._determineNode(t,r.id,e).contacts.push(r);t.contacts=null;const r=this._determineNode(t,this.localNodeId,e);(t.left===r?t.right:t.left).dontSplit=!0}toArray(){let t=[];for(const e=[this.root];e.length>0;){const r=e.pop();null===r.contacts?e.push(r.right,r.left):t=t.concat(r.contacts)}return t}*toIterable(){for(const t=[this.root];t.length>0;){const e=t.pop();null===e.contacts?t.push(e.right,e.left):yield*e.contacts}}_update(t,e,r){if(!s(t.contacts[e].id,r.id))throw new Error("wrong index for _update");const n=t.contacts[e],i=this.arbiter(n,r);i===n&&n!==r||(t.contacts.splice(e,1),t.contacts.push(i),this.emit("updated",n,i))}}t.exports=a},51675:function(t,e){"use strict";e.supports=function(...t){const e=t.reduce(((t,e)=>Object.assign(t,e)),{});return Object.assign(e,{snapshots:e.snapshots||!1,permanence:e.permanence||!1,seek:e.seek||!1,clear:e.clear||!1,getMany:e.getMany||!1,keyIterator:e.keyIterator||!1,valueIterator:e.valueIterator||!1,iteratorNextv:e.iteratorNextv||!1,iteratorAll:e.iteratorAll||!1,status:e.status||!1,createIfMissing:e.createIfMissing||!1,errorIfExists:e.errorIfExists||!1,deferredOpen:e.deferredOpen||!1,promises:e.promises||!1,streams:e.streams||!1,encodings:Object.assign({},e.encodings),events:Object.assign({},e.events),additionalMethods:Object.assign({},e.additionalMethods)})}},58499:function(t,e,r){"use strict";const n=r(94473),i=r(8002),{Encoding:s}=r(8266),{BufferFormat:o,ViewFormat:a,UTF8Format:c}=r(89754),u=Symbol("formats"),l=Symbol("encodings"),h=new Set(["buffer","view","utf8"]);e.Transcoder=class{constructor(t){if(!Array.isArray(t))throw new TypeError("The first argument 'formats' must be an array");if(!t.every((t=>h.has(t))))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'");this[l]=new Map,this[u]=new Set(t);for(const t in i)try{this.encoding(t)}catch(t){if("LEVEL_ENCODING_NOT_SUPPORTED"!==t.code)throw t}}encodings(){return Array.from(new Set(this[l].values()))}encoding(t){let e=this[l].get(t);if(void 0===e){if("string"==typeof t&&""!==t){if(e=f[t],!e)throw new n(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if("object"!=typeof t||null===t)throw new TypeError("First argument 'encoding' must be a string or object");e=function(t){if(t instanceof s)return t;const e="type"in t&&"string"==typeof t.type?t.type:void 0,r=t.name||e||"anonymous-"+p++;switch(function(t){return"format"in t&&void 0!==t.format?t.format:"buffer"in t&&"boolean"==typeof t.buffer?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}(t)){case"view":return new a({...t,name:r});case"utf8":return new c({...t,name:r});case"buffer":return new o({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}(t)}const{name:r,format:i}=e;if(!this[u].has(i))if(this[u].has("view"))e=e.createViewTranscoder();else if(this[u].has("buffer"))e=e.createBufferTranscoder();else{if(!this[u].has("utf8"))throw new n(`Encoding '${r}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});e=e.createUTF8Transcoder()}for(const n of[t,r,e.name,e.commonName])this[l].set(n,e)}return e}};const d={binary:i.buffer,"utf-8":i.utf8},f={...i,...d};let p=0},8266:function(t,e,r){"use strict";const n=r(94473),i=new Set(["buffer","view","utf8"]);e.Encoding=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,"function"!=typeof this.encode)throw new TypeError("The 'encode' property must be a function");if("function"!=typeof this.decode)throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),"string"!=typeof this.name||""===this.name)throw new TypeError("The 'name' property must be a string");if("string"!=typeof this.format||!i.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new n(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new n(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new n(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}},8002:function(t,e,r){"use strict";const{Buffer:n}=r(35275)||{Buffer:{isBuffer:()=>!1}},{textEncoder:i,textDecoder:s}=r(85850)(),{BufferFormat:o,ViewFormat:a,UTF8Format:c}=r(89754),u=t=>t;e.utf8=new c({encode:function(t){return n.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?s.decode(t):String(t)},decode:u,name:"utf8",createViewTranscoder(){return new a({encode:function(t){return ArrayBuffer.isView(t)?t:i.encode(t)},decode:function(t){return s.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new o({encode:function(t){return n.isBuffer(t)?t:ArrayBuffer.isView(t)?n.from(t.buffer,t.byteOffset,t.byteLength):n.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}}),e.json=new c({encode:JSON.stringify,decode:JSON.parse,name:"json"}),e.buffer=new o({encode:function(t){return n.isBuffer(t)?t:ArrayBuffer.isView(t)?n.from(t.buffer,t.byteOffset,t.byteLength):n.from(String(t),"utf8")},decode:u,name:"buffer",createViewTranscoder(){return new a({encode:function(t){return ArrayBuffer.isView(t)?t:n.from(String(t),"utf8")},decode:function(t){return n.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}}),e.view=new a({encode:function(t){return ArrayBuffer.isView(t)?t:i.encode(t)},decode:u,name:"view",createBufferTranscoder(){return new o({encode:function(t){return n.isBuffer(t)?t:ArrayBuffer.isView(t)?n.from(t.buffer,t.byteOffset,t.byteLength):n.from(String(t),"utf8")},decode:u,name:`${this.name}+buffer`})}}),e.hex=new o({encode:function(t){return n.isBuffer(t)?t:n.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"}),e.base64=new o({encode:function(t){return n.isBuffer(t)?t:n.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})},89754:function(t,e,r){"use strict";const{Buffer:n}=r(35275)||{},{Encoding:i}=r(8266),s=r(85850);class o extends i{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new a({encode:this.encode,decode:t=>this.decode(n.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class a extends i{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new o({encode:t=>{const e=this.encode(t);return n.from(e.buffer,e.byteOffset,e.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}e.BufferFormat=o,e.ViewFormat=a,e.UTF8Format=class extends i{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new o({encode:t=>n.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:t,textDecoder:e}=s();return new a({encode:e=>t.encode(this.encode(e)),decode:t=>this.decode(e.decode(t)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}},85850:function(t){"use strict";let e=null;t.exports=function(){return null===e&&(e={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),e}},35275:function(t,e,r){"use strict";var n=r(25108);const i=r(79742),s=r(80645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return d(t)}return l(t,e,r)}function l(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|y(t,e);let n=c(r);const i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Z(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Z(t,ArrayBuffer)||t&&Z(t.buffer,ArrayBuffer))return p(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(Z(t,SharedArrayBuffer)||t&&Z(t.buffer,SharedArrayBuffer)))return p(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,e,r);const i=function(t){if(u.isBuffer(t)){const e=0|g(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||Q(t.length)?c(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t){return h(t),c(t<0?0:0|g(t))}function f(t){const e=t.length<0?0:0|g(t.length),r=c(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function p(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,u.prototype),n}function g(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function y(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(t).length;default:if(i)return n?-1:G(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return k(this,e,r);case"latin1":case"binary":return N(this,e,r);case"base64":return T(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function w(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function b(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Q(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:E(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):E(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function E(t,e,r,n,i){let s,o=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let n=-1;for(s=r;s<a;s++)if(u(t,s)===u(e,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(u(t,s+n)!==u(e,n)){r=!1;break}if(r)return s}return-1}function v(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=e.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(e.substr(2*o,2),16);if(Q(n))return o;t[r+o]=n}return o}function _(t,e,r,n){return Y(G(e,t.length-r),t,r,n)}function S(t,e,r,n){return Y(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function A(t,e,r,n){return Y(W(e),t,r,n)}function R(t,e,r,n){return Y(function(t,e){let r,n,i;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function T(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function I(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:e<128&&(s=e);break;case 2:r=t[i+1],128==(192&r)&&(c=(31&e)<<6|63&r,c>127&&(s=c));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(c=(15&e)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(t){const e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=C));return r}(n)}e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||void 0===n||"function"!=typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,r){return function(t,e,r){return h(t),t<=0?c(t):void 0!==e?"string"==typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}(t,e,r)},u.allocUnsafe=function(t){return d(t)},u.allocUnsafeSlow=function(t){return d(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(Z(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),Z(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=u.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(Z(e,Uint8Array))i+e.length>n.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)w(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(t,e,r,n,i){if(Z(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0);const a=Math.min(s,o),c=this.slice(n,i),l=t.slice(e,r);for(let t=0;t<a;++t)if(c[t]!==l[t]){s=c[t],o=l[t];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return b(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return b(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":case"latin1":case"binary":return S(this,t,e,r);case"base64":return A(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function k(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function N(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function B(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=X[t[n]];return i}function P(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function L(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,r,n,i,s){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function O(t,e,r,n,i){K(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,r}function x(t,e,r,n,i){K(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s>>=8,t[r+6]=s,s>>=8,t[r+5]=s,s>>=8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o>>=8,t[r+2]=o,o>>=8,t[r+1]=o,o>>=8,t[r]=o,r+8}function U(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(t,e,r,n,i){return e=+e,r>>>=0,i||U(t,0,r,4),s.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return e=+e,r>>>=0,i||U(t,0,r,8),s.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=J((function(t){$(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=J((function(t){$(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=e,i=1,s=this[t+--n];for(;n>0&&(i*=256);)s+=this[t+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},u.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=J((function(t){$(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=J((function(t){$(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),s.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),s.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),s.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),s.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){D(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){D(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=J((function(t,e=0){return O(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=J((function(t,e=0){return x(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);D(this,t,e,r,n-1,-n)}let i=0,s=1,o=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);D(this,t,e,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=J((function(t,e=0){return O(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=J((function(t,e=0){return x(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,r){return M(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return M(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const s=u.isBuffer(t)?t:u.from(t,n),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=s[i%o]}return this};const j={};function F(t,e,r){j[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function z(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function K(t,e,r,n,i,s){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=s>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new j.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){$(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||q(e,t.length-(r+1))}(n,i,s)}function $(t,e){if("number"!=typeof t)throw new j.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,r){if(Math.floor(t)!==t)throw $(t,r),new j.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=z(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function G(t,e){let r;e=e||1/0;const n=t.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function W(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Q(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function J(t){return"undefined"==typeof BigInt?tt:t}function tt(){throw new Error("BigInt not supported")}},21301:function(t,e,r){e.Level=r(11708).BrowserLevel},73329:function(t,e,r){"use strict";t.exports=c;var n,i=r(18559),s=i.LongBits,o=i.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function c(t){this.buf=t,this.pos=0,this.len=t.length}var u,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new c(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new c(t);throw Error("illegal buffer")},h=function(){return i.Buffer?function(t){return(c.create=function(t){return i.Buffer.isBuffer(t)?new n(t):l(t)})(t)}:l};function d(){var t=new s(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function f(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new s(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=h(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},c.prototype.bytes=function(){var t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,r):e===r?new this.buf.constructor(0):this._slice.call(this.buf,e,r)},c.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},c.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},c._configure=function(t){n=t,c.create=h(),n._configure();var e=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return d.call(this)[e](!1)},uint64:function(){return d.call(this)[e](!0)},sint64:function(){return d.call(this).zzDecode()[e](!1)},fixed64:function(){return p.call(this)[e](!0)},sfixed64:function(){return p.call(this)[e](!1)}})}},91561:function(t,e,r){"use strict";t.exports=s;var n=r(73329);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(18559);function s(t){n.call(this,t)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},s._configure()},98726:function(t,e,r){"use strict";t.exports=i;var n=r(18559);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return s;var e=t<0;e&&(t=-t);var r=t>>>0,n=(t-r)/4294967296>>>0;return e&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(t){if("number"==typeof t)return i.fromNumber(t);if(n.isString(t)){if(!n.Long)return i.fromNumber(parseInt(t,10));t=n.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):s},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;i.fromHash=function(t){return t===o?s:new i((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10}},18559:function(t,e,r){"use strict";var n=e;function i(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)void 0!==t[n[i]]&&r||(t[n[i]]=e[n[i]]);return t}function s(t){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}n.asPromise=r(34537),n.base64=r(97419),n.EventEmitter=r(19211),n.float=r(10945),n.inquire=r(67199),n.utf8=r(94997),n.pool=r(76662),n.LongBits=r(98726),n.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"==typeof t},n.isset=n.isSet=function(t,e){var r=t[e];return!(null==r||!t.hasOwnProperty(e))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,e){var r=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},n.merge=i,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;r>-1;--r)if(1===e[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},n.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},n._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},69437:function(t,e,r){"use strict";t.exports=h;var n,i=r(18559),s=i.LongBits,o=i.base64,a=i.utf8;function c(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function u(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function h(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};function f(t,e,r){e[r]=255&t}function p(t,e){this.len=t,this.next=void 0,this.val=e}function g(t,e,r){for(;t.hi;)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function y(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}h.create=d(),h.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(t,e,r){return this.tail=this.tail.next=new c(t,e,r),this.len+=e,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(t,e,r){for(;t>127;)e[r++]=127&t|128,t>>>=7;e[r]=t},h.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new p((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},h.prototype.int32=function(t){return t<0?this._push(g,10,s.fromNumber(t)):this.uint32(t)},h.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},h.prototype.uint64=function(t){var e=s.from(t);return this._push(g,e.length(),e)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(t){var e=s.from(t).zzEncode();return this._push(g,e.length(),e)},h.prototype.bool=function(t){return this._push(f,1,t?1:0)},h.prototype.fixed32=function(t){return this._push(y,4,t>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(t){var e=s.from(t);return this._push(y,4,e.lo)._push(y,4,e.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},h.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var m=i.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var n=0;n<t.length;++n)e[r+n]=t[n]};h.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(f,1,0);if(i.isString(t)){var r=h.alloc(e=o.length(t));o.decode(t,r,0),t=r}return this.uint32(e)._push(m,e,t)},h.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},h.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},h.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},h._configure=function(t){n=t,h.create=d(),n._configure()}},57339:function(t,e,r){"use strict";t.exports=s;var n=r(69437);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(18559);function s(){n.call(this)}function o(t,e,r){t.length<40?i.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]}},s.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(s.writeBytesBuffer,e,t),this},s.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(o,e,t),this},s._configure()},70942:function(t,e,r){"use strict";const n=r(49727),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:s}=Object,o=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),a=this,c={concatArrays:!1,ignoreUndefined:!1},u=t=>{const e=[];for(const r in t)i.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(t);for(const n of r)s.call(t,n)&&e.push(n)}return e};function l(t){return Array.isArray(t)?function(t){const e=t.slice(0,0);return u(t).forEach((r=>{o(e,r,l(t[r]))})),e}(t):n(t)?function(t){const e=null===Object.getPrototypeOf(t)?Object.create(null):{};return u(t).forEach((r=>{o(e,r,l(t[r]))})),e}(t):t}const h=(t,e,r,n)=>(r.forEach((r=>{void 0===e[r]&&n.ignoreUndefined||(r in t&&t[r]!==Object.getPrototypeOf(t)?o(t,r,f(t[r],e[r],n)):o(t,r,l(e[r])))})),t),d=(t,e,r)=>{let n=t.slice(0,0),s=0;return[t,e].forEach((e=>{const a=[];for(let r=0;r<e.length;r++)i.call(e,r)&&(a.push(String(r)),o(n,s++,e===t?e[r]:l(e[r])));n=h(n,e,u(e).filter((t=>!a.includes(t))),r)})),n};function f(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?d(t,e,r):n(e)&&n(t)?h(t,e,u(e),r):l(e)}t.exports=function(...t){const e=f(l(c),this!==a&&this||{},c);let r={_:{}};for(const i of t)if(void 0!==i){if(!n(i))throw new TypeError("`"+i+"` is not an Option Object");r=f(r,{_:i},e)}return r._}},79221:function(t,e,r){"use strict";var n=r(70942),i=r.n(n);e.Z=i()},49727:function(t){"use strict";t.exports=t=>{if("[object Object]"!==Object.prototype.toString.call(t))return!1;const e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}},94473:function(t){"use strict";t.exports=class extends Error{constructor(t,e){super(t||""),"object"==typeof e&&null!==e&&(e.code&&(this.code=String(e.code)),e.expected&&(this.expected=!0),e.transient&&(this.transient=!0),e.cause&&(this.cause=e.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}},57824:function(t){var e=1e3,r=60*e,n=60*r,i=24*n,s=7*i,o=365.25*i;function a(t,e,r,n){var i=e>=1.5*r;return Math.round(t/r)+" "+n+(i?"s":"")}t.exports=function(t,c){c=c||{};var u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(t);if("number"===u&&isFinite(t))return c.long?function(t){var s=Math.abs(t);if(s>=i)return a(t,s,i,"day");if(s>=n)return a(t,s,n,"hour");if(s>=r)return a(t,s,r,"minute");if(s>=e)return a(t,s,e,"second");return t+" ms"}(t):function(t){var s=Math.abs(t);if(s>=i)return Math.round(t/i)+"d";if(s>=n)return Math.round(t/n)+"h";if(s>=r)return Math.round(t/r)+"m";if(s>=e)return Math.round(t/e)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},40469:function(t,e,r){t.exports=r(18027)},18027:function(t,e){!function(r,n){"use strict";var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(t){if(!Array.isArray(t)&&!ArrayBuffer.isView(t))return!1;for(var e=0;e<t.length;e++)if(!Number.isInteger(t[e])||t[e]<0||t[e]>255)return!1;return!0}function o(t,e){return(65535&t)*e+(((t>>>16)*e&65535)<<16)}function a(t,e){return t<<e|t>>>32-e}function c(t){return t=o(t^=t>>>16,2246822507),t=o(t^=t>>>13,3266489909),t^=t>>>16}function u(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var r=[0,0,0,0];return r[3]+=t[3]+e[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=t[2]+e[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=t[1]+e[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=t[0]+e[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var r=[0,0,0,0];return r[3]+=t[3]*e[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=t[2]*e[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=t[3]*e[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=t[1]*e[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=t[2]*e[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=t[3]*e[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function h(t,e){return 32===(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])}function d(t,e){return 0===(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]}function f(t,e){return[t[0]^e[0],t[1]^e[1]]}function p(t){return t=f(t,[0,t[0]>>>1]),t=f(t=l(t,[4283543511,3981806797]),[0,t[0]>>>1]),t=f(t=l(t,[3301882366,444984403]),[0,t[0]>>>1])}i.x86.hash32=function(t,e){if(i.inputValidation&&!s(t))return n;e=e||0;for(var r=t.length%4,u=t.length-r,l=e,h=0,d=3432918353,f=461845907,p=0;p<u;p+=4)h=o(h=t[p]|t[p+1]<<8|t[p+2]<<16|t[p+3]<<24,d),h=o(h=a(h,15),f),l=o(l=a(l^=h,13),5)+3864292196;switch(h=0,r){case 3:h^=t[p+2]<<16;case 2:h^=t[p+1]<<8;case 1:h=o(h^=t[p],d),l^=h=o(h=a(h,15),f)}return(l=c(l^=t.length))>>>0},i.x86.hash128=function(t,e){if(i.inputValidation&&!s(t))return n;e=e||0;for(var r=t.length%16,u=t.length-r,l=e,h=e,d=e,f=e,p=0,g=0,y=0,m=0,w=597399067,b=2869860233,E=951274213,v=2716044179,_=0;_<u;_+=16)p=t[_]|t[_+1]<<8|t[_+2]<<16|t[_+3]<<24,g=t[_+4]|t[_+5]<<8|t[_+6]<<16|t[_+7]<<24,y=t[_+8]|t[_+9]<<8|t[_+10]<<16|t[_+11]<<24,m=t[_+12]|t[_+13]<<8|t[_+14]<<16|t[_+15]<<24,p=a(p=o(p,w),15),l=a(l^=p=o(p,b),19),l=o(l+=h,5)+1444728091,g=a(g=o(g,b),16),h=a(h^=g=o(g,E),17),h=o(h+=d,5)+197830471,y=a(y=o(y,E),17),d=a(d^=y=o(y,v),15),d=o(d+=f,5)+2530024501,m=a(m=o(m,v),18),f=a(f^=m=o(m,w),13),f=o(f+=l,5)+850148119;switch(p=0,g=0,y=0,m=0,r){case 15:m^=t[_+14]<<16;case 14:m^=t[_+13]<<8;case 13:m=o(m^=t[_+12],v),f^=m=o(m=a(m,18),w);case 12:y^=t[_+11]<<24;case 11:y^=t[_+10]<<16;case 10:y^=t[_+9]<<8;case 9:y=o(y^=t[_+8],E),d^=y=o(y=a(y,17),v);case 8:g^=t[_+7]<<24;case 7:g^=t[_+6]<<16;case 6:g^=t[_+5]<<8;case 5:g=o(g^=t[_+4],b),h^=g=o(g=a(g,16),E);case 4:p^=t[_+3]<<24;case 3:p^=t[_+2]<<16;case 2:p^=t[_+1]<<8;case 1:p=o(p^=t[_],w),l^=p=o(p=a(p,15),b)}return l^=t.length,l+=h^=t.length,l+=d^=t.length,h+=l+=f^=t.length,d+=l,f+=l,l=c(l),l+=h=c(h),l+=d=c(d),h+=l+=f=c(f),d+=l,f+=l,("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)},i.x64.hash128=function(t,e){if(i.inputValidation&&!s(t))return n;e=e||0;for(var r=t.length%16,o=t.length-r,a=[0,e],c=[0,e],g=[0,0],y=[0,0],m=[2277735313,289559509],w=[1291169091,658871167],b=0;b<o;b+=16)g=[t[b+4]|t[b+5]<<8|t[b+6]<<16|t[b+7]<<24,t[b]|t[b+1]<<8|t[b+2]<<16|t[b+3]<<24],y=[t[b+12]|t[b+13]<<8|t[b+14]<<16|t[b+15]<<24,t[b+8]|t[b+9]<<8|t[b+10]<<16|t[b+11]<<24],g=h(g=l(g,m),31),a=u(a=h(a=f(a,g=l(g,w)),27),c),a=u(l(a,[0,5]),[0,1390208809]),y=h(y=l(y,w),33),c=u(c=h(c=f(c,y=l(y,m)),31),a),c=u(l(c,[0,5]),[0,944331445]);switch(g=[0,0],y=[0,0],r){case 15:y=f(y,d([0,t[b+14]],48));case 14:y=f(y,d([0,t[b+13]],40));case 13:y=f(y,d([0,t[b+12]],32));case 12:y=f(y,d([0,t[b+11]],24));case 11:y=f(y,d([0,t[b+10]],16));case 10:y=f(y,d([0,t[b+9]],8));case 9:y=l(y=f(y,[0,t[b+8]]),w),c=f(c,y=l(y=h(y,33),m));case 8:g=f(g,d([0,t[b+7]],56));case 7:g=f(g,d([0,t[b+6]],48));case 6:g=f(g,d([0,t[b+5]],40));case 5:g=f(g,d([0,t[b+4]],32));case 4:g=f(g,d([0,t[b+3]],24));case 3:g=f(g,d([0,t[b+2]],16));case 2:g=f(g,d([0,t[b+1]],8));case 1:g=l(g=f(g,[0,t[b]]),m),a=f(a,g=l(g=h(g,31),w))}return a=u(a=f(a,[0,t.length]),c=f(c,[0,t.length])),c=u(c,a),a=u(a=p(a),c=p(c)),c=u(c,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(c[0]>>>0).toString(16)).slice(-8)+("00000000"+(c[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=i),e.murmurHash3=i}()},30700:function(t,e,r){"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?t.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:t.exports={default:r(83300).default,Headers:r(83300).Headers,Request:r(83300).Request,Response:r(83300).Response}},28951:function(t,e){(function(){var t,r,n,i,s,o,a,c;c=function(t){return[(t&255<<24)>>>24,(t&255<<16)>>>16,(65280&t)>>>8,255&t].join(".")},a=function(t){var e,n,i,s,o,a;for(e=[],i=s=0;s<=3&&0!==t.length;i=++s){if(i>0){if("."!==t[0])throw new Error("Invalid IP");t=t.substring(1)}o=(a=r(t))[0],n=a[1],t=t.substring(n),e.push(o)}if(0!==t.length)throw new Error("Invalid IP");switch(e.length){case 1:if(e[0]>4294967295)throw new Error("Invalid IP");return e[0]>>>0;case 2:if(e[0]>255||e[1]>16777215)throw new Error("Invalid IP");return(e[0]<<24|e[1])>>>0;case 3:if(e[0]>255||e[1]>255||e[2]>65535)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2])>>>0;case 4:if(e[0]>255||e[1]>255||e[2]>255||e[3]>255)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2]<<8|e[3])>>>0;default:throw new Error("Invalid IP")}},i=(n=function(t){return t.charCodeAt(0)})("0"),o=n("a"),s=n("A"),r=function(t){var e,r,a,c,u;for(c=0,e=10,r="9",a=0,t.length>1&&"0"===t[a]&&("x"===t[a+1]||"X"===t[a+1]?(a+=2,e=16):"0"<=t[a+1]&&t[a+1]<="9"&&(a++,e=8,r="7")),u=a;a<t.length;){if("0"<=t[a]&&t[a]<=r)c=c*e+(n(t[a])-i)>>>0;else{if(16!==e)break;if("a"<=t[a]&&t[a]<="f")c=c*e+(10+n(t[a])-o)>>>0;else{if(!("A"<=t[a]&&t[a]<="F"))break;c=c*e+(10+n(t[a])-s)>>>0}}if(c>4294967295)throw new Error("too large");a++}if(a===u)throw new Error("empty octet");return[c,a]},t=function(){function t(t,e){var r,n,i;if("string"!=typeof t)throw new Error("Missing `net' parameter");if(e||(i=t.split("/",2),t=i[0],e=i[1]),e||(e=32),"string"==typeof e&&e.indexOf(".")>-1){try{this.maskLong=a(e)}catch(t){throw t,new Error("Invalid mask: "+e)}for(r=n=32;n>=0;r=--n)if(this.maskLong===4294967295<<32-r>>>0){this.bitmask=r;break}}else{if(!e&&0!==e)throw new Error("Invalid mask: empty");this.bitmask=parseInt(e,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(a(t)&this.maskLong)>>>0}catch(e){throw e,new Error("Invalid net address: "+t)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+e);this.size=Math.pow(2,32-this.bitmask),this.base=c(this.netLong),this.mask=c(this.maskLong),this.hostmask=c(~this.maskLong),this.first=this.bitmask<=30?c(this.netLong+1):this.base,this.last=this.bitmask<=30?c(this.netLong+this.size-2):c(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?c(this.netLong+this.size-1):void 0}return t.prototype.contains=function(e){return"string"==typeof e&&(e.indexOf("/")>0||4!==e.split(".").length)&&(e=new t(e)),e instanceof t?this.contains(e.base)&&this.contains(e.broadcast||e.last):(a(e)&this.maskLong)>>>0==(this.netLong&this.maskLong)>>>0},t.prototype.next=function(e){return null==e&&(e=1),new t(c(this.netLong+this.size*e),this.mask)},t.prototype.forEach=function(t){var e,r,n;for(n=a(this.first),r=a(this.last),e=0;n<=r;)t(c(n),n,e),e++,n++},t.prototype.toString=function(){return this.base+"/"+this.bitmask},t}(),e.ip2long=a,e.long2ip=c,e.Netmask=t}).call(this)},83300:function(t,e,r){"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();t.exports=e=n.fetch,n.fetch&&(e.default=n.fetch.bind(n)),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response},8925:function(t,e,r){var n=r(3832);function i(t,e){n.cipher.registerAlgorithm(t,(function(){return new n.aes.Algorithm(t,e)}))}r(85649),r(61967),r(97116),t.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(t,e,r,n){var i=g({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i},n.aes.createEncryptionCipher=function(t,e){return g({key:t,output:null,decrypt:!1,mode:e})},n.aes.startDecrypting=function(t,e,r,n){var i=g({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i},n.aes.createDecryptionCipher=function(t,e){return g({key:t,output:null,decrypt:!0,mode:e})},n.aes.Algorithm=function(t,e){l||d();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return p(r._w,t,e,!1)},decrypt:function(t,e){return p(r._w,t,e,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,r=t.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){e=r,r=n.util.createBuffer();for(var i=0;i<e.length;++i)r.putByte(e[i])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){e=r,r=[];var s=e.length();if(16===s||24===s||32===s){s>>>=2;for(i=0;i<s;++i)r.push(e.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var o=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=f(r,t.decrypt&&!a),this._init=!0}},n.aes._expandKey=function(t,e){return l||d(),f(t,e)},n.aes._updateBlock=p,i("AES-ECB",n.cipher.modes.ecb),i("AES-CBC",n.cipher.modes.cbc),i("AES-CFB",n.cipher.modes.cfb),i("AES-OFB",n.cipher.modes.ofb),i("AES-CTR",n.cipher.modes.ctr),i("AES-GCM",n.cipher.modes.gcm);var s,o,a,c,u,l=!1,h=4;function d(){l=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;s=new Array(256),o=new Array(256),c=new Array(4),u=new Array(4);for(e=0;e<4;++e)c[e]=new Array(256),u[e]=new Array(256);var r,n,i,h,d,f,p,g=0,y=0;for(e=0;e<256;++e){h=(h=y^y<<1^y<<2^y<<3^y<<4)>>8^255&h^99,s[g]=h,o[h]=g,f=(d=t[h])<<24^h<<16^h<<8^h^d,p=((r=t[g])^(n=t[r])^(i=t[n]))<<24^(g^i)<<16^(g^n^i)<<8^g^r^i;for(var m=0;m<4;++m)c[m][g]=f,u[m][h]=p,f=f<<24|f>>>8,p=p<<24|p>>>8;0===g?g=y=1:(g=r^t[t[t[r^i]]],y^=t[t[y]])}}function f(t,e){for(var r,n=t.slice(0),i=1,o=n.length,c=h*(o+6+1),l=o;l<c;++l)r=n[l-1],l%o==0?(r=s[r>>>16&255]<<24^s[r>>>8&255]<<16^s[255&r]<<8^s[r>>>24]^a[i]<<24,i++):o>6&&l%o==4&&(r=s[r>>>24]<<24^s[r>>>16&255]<<16^s[r>>>8&255]<<8^s[255&r]),n[l]=n[l-o]^r;if(e){for(var d,f=u[0],p=u[1],g=u[2],y=u[3],m=n.slice(0),w=(l=0,(c=n.length)-h);l<c;l+=h,w-=h)if(0===l||l===c-h)m[l]=n[w],m[l+1]=n[w+3],m[l+2]=n[w+2],m[l+3]=n[w+1];else for(var b=0;b<h;++b)d=n[w+b],m[l+(3&-b)]=f[s[d>>>24]]^p[s[d>>>16&255]]^g[s[d>>>8&255]]^y[s[255&d]];n=m}return n}function p(t,e,r,n){var i,a,l,h,d,f,p,g,y,m,w,b,E=t.length/4-1;n?(i=u[0],a=u[1],l=u[2],h=u[3],d=o):(i=c[0],a=c[1],l=c[2],h=c[3],d=s),f=e[0]^t[0],p=e[n?3:1]^t[1],g=e[2]^t[2],y=e[n?1:3]^t[3];for(var v=3,_=1;_<E;++_)m=i[f>>>24]^a[p>>>16&255]^l[g>>>8&255]^h[255&y]^t[++v],w=i[p>>>24]^a[g>>>16&255]^l[y>>>8&255]^h[255&f]^t[++v],b=i[g>>>24]^a[y>>>16&255]^l[f>>>8&255]^h[255&p]^t[++v],y=i[y>>>24]^a[f>>>16&255]^l[p>>>8&255]^h[255&g]^t[++v],f=m,p=w,g=b;r[0]=d[f>>>24]<<24^d[p>>>16&255]<<16^d[g>>>8&255]<<8^d[255&y]^t[++v],r[n?3:1]=d[p>>>24]<<24^d[g>>>16&255]<<16^d[y>>>8&255]<<8^d[255&f]^t[++v],r[2]=d[g>>>24]<<24^d[y>>>16&255]<<16^d[f>>>8&255]<<8^d[255&p]^t[++v],r[n?1:3]=d[y>>>24]<<24^d[f>>>16&255]<<16^d[p>>>8&255]<<8^d[255&g]^t[++v]}function g(t){var e,r="AES-"+((t=t||{}).mode||"CBC").toUpperCase(),i=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var s=null;r instanceof n.util.ByteBuffer&&(s=r,r={}),(r=r||{}).output=s,r.iv=t,i.call(e,r)},e}},3068:function(t,e,r){var n=r(3832);r(97116),r(66270);var i=t.exports=n.asn1=n.asn1||{};function s(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(t,e,r,s,o){if(n.util.isArray(s)){for(var a=[],c=0;c<s.length;++c)void 0!==s[c]&&a.push(s[c]);s=a}var u={tagClass:t,type:e,constructed:r,composed:r||n.util.isArray(s),value:s};return o&&"bitStringContents"in o&&(u.bitStringContents=o.bitStringContents,u.original=i.copy(u)),u},i.copy=function(t,e){var r;if(n.util.isArray(t)){r=[];for(var s=0;s<t.length;++s)r.push(i.copy(t[s],e));return r}return"string"==typeof t?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:i.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)},i.equals=function(t,e,r){if(n.util.isArray(t)){if(!n.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var s=0;s<t.length;++s)if(!i.equals(t[s],e[s]))return!1;return!0}if(typeof t!=typeof e)return!1;if("string"==typeof t)return t===e;var o=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&i.equals(t.value,e.value);return r&&r.includeBitStringContents&&(o=o&&t.bitStringContents===e.bitStringContents),o},i.getBerValueLength=function(t){var e=t.getByte();if(128!==e)return 128&e?t.getInt((127&e)<<3):e};function o(t,e,r,n){var a;s(t,e,2);var c=t.getByte();e--;var u=192&c,l=31&c;a=t.length();var h,d,f=function(t,e){var r=t.getByte();if(e--,128!==r){var n;if(128&r){var i=127&r;s(t,e,i),n=t.getInt(i<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(t,e);if(e-=a-t.length(),void 0!==f&&f>e){if(n.strict){var p=new Error("Too few bytes to read ASN.1 value.");throw p.available=t.length(),p.remaining=e,p.requested=f,p}f=e}var g=32==(32&c);if(g)if(h=[],void 0===f)for(;;){if(s(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}a=t.length(),h.push(o(t,e,r+1,n)),e-=a-t.length()}else for(;f>0;)a=t.length(),h.push(o(t,f,r+1,n)),e-=a-t.length(),f-=a-t.length();if(void 0===h&&u===i.Class.UNIVERSAL&&l===i.Type.BITSTRING&&(d=t.bytes(f)),void 0===h&&n.decodeBitStrings&&u===i.Class.UNIVERSAL&&l===i.Type.BITSTRING&&f>1){var y=t.read,m=e,w=0;if(l===i.Type.BITSTRING&&(s(t,e,1),w=t.getByte(),e--),0===w)try{a=t.length();var b=o(t,e,r+1,{strict:!0,decodeBitStrings:!0}),E=a-t.length();e-=E,l==i.Type.BITSTRING&&E++;var v=b.tagClass;E!==f||v!==i.Class.UNIVERSAL&&v!==i.Class.CONTEXT_SPECIFIC||(h=[b])}catch(t){}void 0===h&&(t.read=y,e=m)}if(void 0===h){if(void 0===f){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=e}if(l===i.Type.BMPSTRING)for(h="";f>0;f-=2)s(t,e,2),h+=String.fromCharCode(t.getInt16()),e-=2;else h=t.getBytes(f),e-=f}var _=void 0===d?null:{bitStringContents:d};return i.create(u,l,g,h,_)}i.fromDer=function(t,e){void 0===e&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof e&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"==typeof t&&(t=n.util.createBuffer(t));var r=t.length(),i=o(t,t.length(),0,e);if(e.parseAllBytes&&0!==t.length()){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=r,s.remaining=t.length(),s}return i},i.toDer=function(t){var e=n.util.createBuffer(),r=t.tagClass|t.type,s=n.util.createBuffer(),o=!1;if("bitStringContents"in t&&(o=!0,t.original&&(o=i.equals(t,t.original))),o)s.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:s.putByte(0);for(var a=0;a<t.value.length;++a)void 0!==t.value[a]&&s.putBuffer(i.toDer(t.value[a]))}else if(t.type===i.Type.BMPSTRING)for(a=0;a<t.value.length;++a)s.putInt16(t.value.charCodeAt(a));else t.type===i.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0==(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128==(128&t.value.charCodeAt(1)))?s.putBytes(t.value.substr(1)):s.putBytes(t.value);if(e.putByte(r),s.length()<=127)e.putByte(127&s.length());else{var c=s.length(),u="";do{u+=String.fromCharCode(255&c),c>>>=8}while(c>0);e.putByte(128|u.length);for(a=u.length-1;a>=0;--a)e.putByte(u.charCodeAt(a))}return e.putBuffer(s),e},i.oidToDer=function(t){var e,r,i,s,o=t.split("."),a=n.util.createBuffer();a.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var c=2;c<o.length;++c){e=!0,r=[],i=parseInt(o[c],10);do{s=127&i,i>>>=7,e||(s|=128),r.push(s),e=!1}while(i>0);for(var u=r.length-1;u>=0;--u)a.putByte(r[u])}return a},i.derToOid=function(t){var e;"string"==typeof t&&(t=n.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)i<<=7,128&(r=t.getByte())?i+=127&r:(e+="."+(i+r),i=0);return e},i.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;"+"!==c&&"-"!==c&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,0),u&&("+"===(c=t.charAt(u))||"-"===c)){var l=60*parseInt(t.substr(u+1,2),10)+parseInt(t.substr(u+4,2),10);l*=6e4,"+"===c?e.setTime(+e-l):e.setTime(+e+l)}return e},i.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,l=!1;"Z"===t.charAt(t.length-1)&&(l=!0);var h=t.length-5,d=t.charAt(h);"+"!==d&&"-"!==d||(u=60*parseInt(t.substr(h+1,2),10)+parseInt(t.substr(h+4,2),10),u*=6e4,"+"===d&&(u*=-1),l=!0);return"."===t.charAt(14)&&(c=1e3*parseFloat(t.substr(14),10)),l?(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(s,o,a,c)),e},i.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z"},i.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z"},i.integerToDer=function(t){var e=n.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r},i.derToInteger=function(t){"string"==typeof t&&(t=n.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},i.validate=function(t,e,r,s){var o=!1;if(t.tagClass!==e.tagClass&&void 0!==e.tagClass||t.type!==e.type&&void 0!==e.type)s&&(t.tagClass!==e.tagClass&&s.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&s.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||void 0===e.constructed){if(o=!0,e.value&&n.util.isArray(e.value))for(var a=0,c=0;o&&c<e.value.length;++c)o=e.value[c].optional||!1,t.value[a]&&((o=i.validate(t.value[a],e.value[c],r,s))?++a:e.value[c].optional&&(o=!0)),!o&&s&&s.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(o&&r)if(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{if(0!==t.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else s&&s.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return o};var a=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(t,e,r){var s="";r=r||2,(e=e||0)>0&&(s+="\n");for(var o="",c=0;c<e*r;++c)o+=" ";switch(s+=o+"Tag: ",t.tagClass){case i.Class.UNIVERSAL:s+="Universal:";break;case i.Class.APPLICATION:s+="Application:";break;case i.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case i.Class.PRIVATE:s+="Private:"}if(t.tagClass===i.Class.UNIVERSAL)switch(s+=t.type,t.type){case i.Type.NONE:s+=" (None)";break;case i.Type.BOOLEAN:s+=" (Boolean)";break;case i.Type.INTEGER:s+=" (Integer)";break;case i.Type.BITSTRING:s+=" (Bit string)";break;case i.Type.OCTETSTRING:s+=" (Octet string)";break;case i.Type.NULL:s+=" (Null)";break;case i.Type.OID:s+=" (Object Identifier)";break;case i.Type.ODESC:s+=" (Object Descriptor)";break;case i.Type.EXTERNAL:s+=" (External or Instance of)";break;case i.Type.REAL:s+=" (Real)";break;case i.Type.ENUMERATED:s+=" (Enumerated)";break;case i.Type.EMBEDDED:s+=" (Embedded PDV)";break;case i.Type.UTF8:s+=" (UTF8)";break;case i.Type.ROID:s+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:s+=" (Sequence)";break;case i.Type.SET:s+=" (Set)";break;case i.Type.PRINTABLESTRING:s+=" (Printable String)";break;case i.Type.IA5String:s+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:s+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case i.Type.BMPSTRING:s+=" (BMP String)"}else s+=t.type;if(s+="\n",s+=o+"Constructed: "+t.constructed+"\n",t.composed){var u=0,l="";for(c=0;c<t.value.length;++c)void 0!==t.value[c]&&(u+=1,l+=i.prettyPrint(t.value[c],e+1,r),c+1<t.value.length&&(l+=","));s+=o+"Sub values: "+u+l}else{if(s+=o+"Value: ",t.type===i.Type.OID){var h=i.derToOid(t.value);s+=h,n.pki&&n.pki.oids&&h in n.pki.oids&&(s+=" ("+n.pki.oids[h]+") ")}if(t.type===i.Type.INTEGER)try{s+=i.derToInteger(t.value)}catch(e){s+="0x"+n.util.bytesToHex(t.value)}else if(t.type===i.Type.BITSTRING){if(t.value.length>1?s+="0x"+n.util.bytesToHex(t.value.slice(1)):s+="(none)",t.value.length>0){var d=t.value.charCodeAt(0);1==d?s+=" (1 unused bit shown)":d>1&&(s+=" ("+d+" unused bits shown)")}}else if(t.type===i.Type.OCTETSTRING)a.test(t.value)||(s+="("+t.value+") "),s+="0x"+n.util.bytesToHex(t.value);else if(t.type===i.Type.UTF8)try{s+=n.util.decodeUtf8(t.value)}catch(e){if("URI malformed"!==e.message)throw e;s+="0x"+n.util.bytesToHex(t.value)+" (malformed UTF8)"}else t.type===i.Type.PRINTABLESTRING||t.type===i.Type.IA5String?s+=t.value:a.test(t.value)?s+="0x"+n.util.bytesToHex(t.value):0===t.value.length?s+="[null]":s+=t.value}return s}},78807:function(t,e,r){var n=r(23085).lW,i={};t.exports=i;var s={};i.encode=function(t,e,r){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(t instanceof Uint8Array){var i=0,s=e.length,o=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%s,u=u/s|0;for(;u>0;)a.push(u%s),u=u/s|0}for(i=0;0===t[i]&&i<t.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}else n=function(t,e){var r=0,n=e.length,i=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var o=0,a=t.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var c="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=e[s[r]];return c}(t,e);if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n},i.decode=function(t,e){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var r=s[e];if(!r){r=s[e]=[];for(var i=0;i<e.length;++i)r[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");var o=e.length,a=e.charAt(0),c=[0];for(i=0;i<t.length;i++){var u=r[t.charCodeAt(i)];if(void 0===u)return;for(var l=0,h=u;l<c.length;++l)h+=c[l]*o,c[l]=255&h,h>>=8;for(;h>0;)c.push(255&h),h>>=8}for(var d=0;t[d]===a&&d<t.length-1;++d)c.push(0);return void 0!==n?n.from(c.reverse()):new Uint8Array(c.reverse())}},85649:function(t,e,r){var n=r(3832);r(97116),t.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(t,e){var r=t;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})},n.cipher.createDecipher=function(t,e){var r=t;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})},n.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),n.cipher.algorithms[t]=e},n.cipher.getAlgorithm=function(t){return(t=t.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[t]:null};var i=n.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};i.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=t.output||n.util.createBuffer(),this.mode.start(e)},i.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},i.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},61967:function(t,e,r){var n=r(3832);r(97116),n.cipher=n.cipher||{};var i=t.exports=n.cipher.modes=n.cipher.modes||{};function s(t,e){if("string"==typeof t&&(t=n.util.createBuffer(t)),n.util.isArray(t)&&t.length>4){var r=t;t=n.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!n.util.isArray(t)){var s=[],o=e/4;for(i=0;i<o;++i)s.push(t.getInt32());t=s}return t}function o(t){t[t.length-1]=t[t.length-1]+1&4294967295}function a(t){return[t/4294967296|0,4294967295&t]}i.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(t){},i.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},i.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},i.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=s(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e,r=n.util.createBuffer(t.iv);if(this._cipherLength=0,e="additionalData"in t?n.util.createBuffer(t.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=n.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=r.length();if(12===i)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,e=n.util.createBuffer(e),this._aDataLength=a(8*e.length());var s=e.length()%this.blockSize;for(s&&e.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];e.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},i.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},i.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=n.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var s=[];this.cipher.encrypt(this._j0,s);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^s[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},i.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){t[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(t,e){for(var r=1&t[3],n=3;n>0;--n)e[n]=t[n]>>>1|(1&t[n-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},i.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=t[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];e[0]^=i[0],e[1]^=i[1],e[2]^=i[2],e[3]^=i[3]}return e},i.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},i.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],c=(n-1-o%n)*e;a[o/n|0]=1<<e-1<<c,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s},i.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],c=i[o];i[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var u=i[s^n];i[s]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i}},33480:function(t,e,r){var n=r(3832);function i(t,e){n.cipher.registerAlgorithm(t,(function(){return new n.des.Algorithm(t,e)}))}r(85649),r(61967),r(97116),t.exports=n.des=n.des||{},n.des.startEncrypting=function(t,e,r,n){var i=p({key:t,output:r,decrypt:!1,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},n.des.createEncryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!1,mode:e})},n.des.startDecrypting=function(t,e,r,n){var i=p({key:t,output:r,decrypt:!0,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},n.des.createDecryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!0,mode:e})},n.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return f(r._keys,t,e,!1)},decrypt:function(t,e){return f(r._keys,t,e,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=n.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=function(t){for(var e,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],h=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,m=[],w=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,E=0;E<y;E++){var v=t.getInt32(),_=t.getInt32();v^=(e=252645135&(v>>>4^_))<<4,v^=e=65535&((_^=e)>>>-16^v),v^=(e=858993459&(v>>>2^(_^=e<<-16)))<<2,v^=e=65535&((_^=e)>>>-16^v),v^=(e=1431655765&(v>>>1^(_^=e<<-16)))<<1,v^=e=16711935&((_^=e)>>>8^v),e=(v^=(e=1431655765&(v>>>1^(_^=e<<8)))<<1)<<8|(_^=e)>>>20&240,v=_<<24|_<<8&16711680|_>>>8&65280|_>>>24&240,_=e;for(var S=0;S<w.length;++S){w[S]?(v=v<<2|v>>>26,_=_<<2|_>>>26):(v=v<<1|v>>>27,_=_<<1|_>>>27),_&=-15;var A=r[(v&=-15)>>>28]|n[v>>>24&15]|i[v>>>20&15]|s[v>>>16&15]|o[v>>>12&15]|a[v>>>8&15]|c[v>>>4&15],R=u[_>>>28]|l[_>>>24&15]|h[_>>>20&15]|d[_>>>16&15]|f[_>>>12&15]|p[_>>>8&15]|g[_>>>4&15];e=65535&(R>>>16^A),m[b++]=A^e,m[b++]=R^e<<16}}return m}(e),this._init=!0}},i("DES-ECB",n.cipher.modes.ecb),i("DES-CBC",n.cipher.modes.cbc),i("DES-CFB",n.cipher.modes.cfb),i("DES-OFB",n.cipher.modes.ofb),i("DES-CTR",n.cipher.modes.ctr),i("3DES-ECB",n.cipher.modes.ecb),i("3DES-CBC",n.cipher.modes.cbc),i("3DES-CFB",n.cipher.modes.cfb),i("3DES-OFB",n.cipher.modes.ofb),i("3DES-CTR",n.cipher.modes.ctr);var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],c=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],h=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],d=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function f(t,e,r,n){var i,f,p=32===t.length?3:9;i=3===p?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var g=e[0],y=e[1];g^=(f=252645135&(g>>>4^y))<<4,g^=(f=65535&(g>>>16^(y^=f)))<<16,g^=f=858993459&((y^=f)>>>2^g),g^=f=16711935&((y^=f<<2)>>>8^g),g=(g^=(f=1431655765&(g>>>1^(y^=f<<8)))<<1)<<1|g>>>31,y=(y^=f)<<1|y>>>31;for(var m=0;m<p;m+=3){for(var w=i[m+1],b=i[m+2],E=i[m];E!=w;E+=b){var v=y^t[E],_=(y>>>4|y<<28)^t[E+1];f=g,g=y,y=f^(o[v>>>24&63]|c[v>>>16&63]|l[v>>>8&63]|d[63&v]|s[_>>>24&63]|a[_>>>16&63]|u[_>>>8&63]|h[63&_])}f=g,g=y,y=f}y=y>>>1|y<<31,y^=f=1431655765&((g=g>>>1|g<<31)>>>1^y),y^=(f=16711935&(y>>>8^(g^=f<<1)))<<8,y^=(f=858993459&(y>>>2^(g^=f)))<<2,y^=f=65535&((g^=f)>>>16^y),y^=f=252645135&((g^=f<<16)>>>4^y),g^=f<<4,r[0]=g,r[1]=y}function p(t){var e,r="DES-"+((t=t||{}).mode||"CBC").toUpperCase(),i=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var s=null;r instanceof n.util.ByteBuffer&&(s=r,r={}),(r=r||{}).output=s,r.iv=t,i.call(e,r)},e}},3832:function(t){t.exports={options:{usePureJavaScript:!1}}},36607:function(t,e,r){var n=r(3832);r(28991),r(97116),(t.exports=n.hmac=n.hmac||{}).create=function(){var t=null,e=null,r=null,i=null,s={start:function(s,o){if(null!==s)if("string"==typeof s){if(!((s=s.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');e=n.md.algorithms[s].create()}else e=s;if(null===o)o=t;else{if("string"==typeof o)o=n.util.createBuffer(o);else if(n.util.isArray(o)){var a=o;o=n.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var u=o.length();u>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),r=n.util.createBuffer(),i=n.util.createBuffer(),u=o.length();for(c=0;c<u;++c){a=o.at(c);r.putByte(54^a),i.putByte(92^a)}if(u<e.blockLength)for(a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),i.putByte(92);t=o,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},update:function(t){e.update(t)},getMac:function(){var t=e.digest().bytes();return e.start(),e.update(i),e.update(t),e.digest()}};return s.digest=s.getMac,s}},15764:function(t,e,r){var n,i=r(3832);t.exports=i.jsbn=i.jsbn||{};function s(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function o(){return new s(null)}function a(t,e,r,n,i,s){for(var o=16383&e,a=e>>14;--s>=0;){var c=16383&this.data[t],u=this.data[t++]>>14,l=a*c+u*o;i=((c=o*c+((16383&l)<<14)+r.data[n]+i)>>28)+(l>>14)+a*u,r.data[n++]=268435455&c}return i}i.jsbn.BigInteger=s,"undefined"==typeof navigator?(s.prototype.am=a,n=28):"Microsoft Internet Explorer"==navigator.appName?(s.prototype.am=function(t,e,r,n,i,s){for(var o=32767&e,a=e>>15;--s>=0;){var c=32767&this.data[t],u=this.data[t++]>>15,l=a*c+u*o;i=((c=o*c+((32767&l)<<15)+r.data[n]+(1073741823&i))>>>30)+(l>>>15)+a*u+(i>>>30),r.data[n++]=1073741823&c}return i},n=30):"Netscape"!=navigator.appName?(s.prototype.am=function(t,e,r,n,i,s){for(;--s>=0;){var o=e*this.data[t++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=67108863&o}return i},n=26):(s.prototype.am=a,n=28),s.prototype.DB=n,s.prototype.DM=(1<<n)-1,s.prototype.DV=1<<n;s.prototype.FV=Math.pow(2,52),s.prototype.F1=52-n,s.prototype.F2=2*n-52;var c,u,l="0123456789abcdefghijklmnopqrstuvwxyz",h=new Array;for(c="0".charCodeAt(0),u=0;u<=9;++u)h[c++]=u;for(c="a".charCodeAt(0),u=10;u<36;++u)h[c++]=u;for(c="A".charCodeAt(0),u=10;u<36;++u)h[c++]=u;function d(t){return l.charAt(t)}function f(t,e){var r=h[t.charCodeAt(e)];return null==r?-1:r}function p(t){var e=o();return e.fromInt(t),e}function g(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function y(t){this.m=t}function m(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function w(t,e){return t&e}function b(t,e){return t|e}function E(t,e){return t^e}function v(t,e){return t&~e}function _(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function S(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function A(){}function R(t){return t}function T(t){this.r2=o(),this.q3=o(),s.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}y.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},y.prototype.revert=function(t){return t},y.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},y.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},y.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},m.prototype.convert=function(t){var e=o();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(s.ZERO)>0&&this.m.subTo(e,e),e},m.prototype.revert=function(t){var e=o();return t.copyTo(e),this.reduce(e),e},m.prototype.reduce=function(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},m.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},m.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},s.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s},s.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0},s.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var a=8==r?255&t[n]:f(t,n);a<0?"-"==t.charAt(n)&&(i=!0):(i=!1,0==o?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t},s.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s},s.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s},s.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+o+1]=this.data[r]>>i|a,a=(this.data[r]&s)<<n;for(r=o-1;r>=0;--r)e.data[r]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},s.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)e.data[o-r-1]|=(this.data[o]&s)<<i,e.data[o-r]=this.data[o]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}},s.prototype.subTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()},s.prototype.multiplyTo=function(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&s.ZERO.subTo(e,e)},s.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()},s.prototype.divRemTo=function(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=o());var a=o(),c=this.s,u=t.s,l=this.DB-g(n.data[n.t-1]);l>0?(n.lShiftTo(l,a),i.lShiftTo(l,r)):(n.copyTo(a),i.copyTo(r));var h=a.t,d=a.data[h-1];if(0!=d){var f=d*(1<<this.F1)+(h>1?a.data[h-2]>>this.F2:0),p=this.FV/f,y=(1<<this.F1)/f,m=1<<this.F2,w=r.t,b=w-h,E=null==e?o():e;for(a.dlShiftTo(b,E),r.compareTo(E)>=0&&(r.data[r.t++]=1,r.subTo(E,r)),s.ONE.dlShiftTo(h,E),E.subTo(a,a);a.t<h;)a.data[a.t++]=0;for(;--b>=0;){var v=r.data[--w]==d?this.DM:Math.floor(r.data[w]*p+(r.data[w-1]+m)*y);if((r.data[w]+=a.am(0,v,r,b,0,h))<v)for(a.dlShiftTo(b,E),r.subTo(E,r);r.data[w]<--v;)r.subTo(E,r)}null!=e&&(r.drShiftTo(h,e),c!=u&&s.ZERO.subTo(e,e)),r.t=h,r.clamp(),l>0&&r.rShiftTo(l,r),c<0&&s.ZERO.subTo(r,r)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},s.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},s.prototype.exp=function(t,e){if(t>4294967295||t<1)return s.ONE;var r=o(),n=o(),i=e.convert(this),a=g(t)-1;for(i.copyTo(r);--a>=0;)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,i,r);else{var c=r;r=n,n=c}return e.revert(r)},s.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(r=this.data[o]>>a)>0&&(i=!0,s=d(r));o>=0;)a<e?(r=(this.data[o]&(1<<a)-1)<<e-a,r|=this.data[--o]>>(a+=this.DB-e)):(r=this.data[o]>>(a-=e)&n,a<=0&&(a+=this.DB,--o)),r>0&&(i=!0),i&&(s+=d(r));return i?s:"0"},s.prototype.negate=function(){var t=o();return s.ZERO.subTo(this,t),t},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this.data[r]-t.data[r]))return e;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+g(this.data[this.t-1]^this.s&this.DM)},s.prototype.mod=function(t){var e=o();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(s.ZERO)>0&&t.subTo(e,e),e},s.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new y(e):new m(e),this.exp(t,r)},s.ZERO=p(0),s.ONE=p(1),A.prototype.convert=R,A.prototype.revert=R,A.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},A.prototype.sqrTo=function(t,e){t.squareTo(e)},T.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=o();return t.copyTo(e),this.reduce(e),e},T.prototype.revert=function(t){return t},T.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},T.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},T.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],C=(1<<26)/I[I.length-1];s.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},s.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=p(r),i=o(),s=o(),a="";for(this.divRemTo(n,i,s);i.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(t)+a},s.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,c=0;c<t.length;++c){var u=f(t,c);u<0?"-"==t.charAt(c)&&0==this.signum()&&(i=!0):(a=e*a+u,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&s.ZERO.subTo(this,this)},s.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(s.ONE.shiftLeft(t-1),b,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(s.ONE.shiftLeft(t-1),this);else{var n=new Array,i=7&t;n.length=1+(t>>3),e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},s.prototype.bitwiseTo=function(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},s.prototype.changeBit=function(t,e){var r=s.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},s.prototype.addTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()},s.prototype.dMultiply=function(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}},s.prototype.multiplyLowerTo=function(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()},s.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},s.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r},s.prototype.millerRabin=function(t){var e=this.subtract(s.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n,i=e.shiftRight(r),o={nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}},a=0;a<t;++a){do{n=new s(this.bitLength(),o)}while(n.compareTo(s.ONE)<=0||n.compareTo(e)>=0);var c=n.modPow(i,this);if(0!=c.compareTo(s.ONE)&&0!=c.compareTo(e)){for(var u=1;u++<r&&0!=c.compareTo(e);)if(0==(c=c.modPowInt(2,this)).compareTo(s.ONE))return!1;if(0!=c.compareTo(e))return!1}}return!0},s.prototype.clone=function(){var t=o();return this.copyTo(t),t},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},s.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},s.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},s.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e},s.prototype.equals=function(t){return 0==this.compareTo(t)},s.prototype.min=function(t){return this.compareTo(t)<0?this:t},s.prototype.max=function(t){return this.compareTo(t)>0?this:t},s.prototype.and=function(t){var e=o();return this.bitwiseTo(t,w,e),e},s.prototype.or=function(t){var e=o();return this.bitwiseTo(t,b,e),e},s.prototype.xor=function(t){var e=o();return this.bitwiseTo(t,E,e),e},s.prototype.andNot=function(t){var e=o();return this.bitwiseTo(t,v,e),e},s.prototype.not=function(){for(var t=o(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t},s.prototype.shiftLeft=function(t){var e=o();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},s.prototype.shiftRight=function(t){var e=o();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},s.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+_(this.data[t]);return this.s<0?this.t*this.DB:-1},s.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=S(this.data[r]^e);return t},s.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)},s.prototype.setBit=function(t){return this.changeBit(t,b)},s.prototype.clearBit=function(t){return this.changeBit(t,v)},s.prototype.flipBit=function(t){return this.changeBit(t,E)},s.prototype.add=function(t){var e=o();return this.addTo(t,e),e},s.prototype.subtract=function(t){var e=o();return this.subTo(t,e),e},s.prototype.multiply=function(t){var e=o();return this.multiplyTo(t,e),e},s.prototype.divide=function(t){var e=o();return this.divRemTo(t,e,null),e},s.prototype.remainder=function(t){var e=o();return this.divRemTo(t,null,e),e},s.prototype.divideAndRemainder=function(t){var e=o(),r=o();return this.divRemTo(t,e,r),new Array(e,r)},s.prototype.modPow=function(t,e){var r,n,i=t.bitLength(),s=p(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new y(e):e.isEven()?new T(e):new m(e);var a=new Array,c=3,u=r-1,l=(1<<r)-1;if(a[1]=n.convert(this),r>1){var h=o();for(n.sqrTo(a[1],h);c<=l;)a[c]=o(),n.mulTo(h,a[c-2],a[c]),c+=2}var d,f,w=t.t-1,b=!0,E=o();for(i=g(t.data[w])-1;w>=0;){for(i>=u?d=t.data[w]>>i-u&l:(d=(t.data[w]&(1<<i+1)-1)<<u-i,w>0&&(d|=t.data[w-1]>>this.DB+i-u)),c=r;0==(1&d);)d>>=1,--c;if((i-=c)<0&&(i+=this.DB,--w),b)a[d].copyTo(s),b=!1;else{for(;c>1;)n.sqrTo(s,E),n.sqrTo(E,s),c-=2;c>0?n.sqrTo(s,E):(f=s,s=E,E=f),n.mulTo(E,a[d],s)}for(;w>=0&&0==(t.data[w]&1<<i);)n.sqrTo(s,E),f=s,s=E,E=f,--i<0&&(i=this.DB-1,--w)}return n.revert(s)},s.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return s.ZERO;for(var r=t.clone(),n=this.clone(),i=p(1),o=p(0),a=p(0),c=p(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(c,o)):(n.subTo(r,n),e&&a.subTo(i,a),c.subTo(o,c))}return 0!=n.compareTo(s.ONE)?s.ZERO:c.compareTo(t)>=0?c.subtract(t):c.signum()<0?(c.addTo(t,c),c.signum()<0?c.add(t):c):c},s.prototype.pow=function(t){return this.exp(t,new A)},s.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},s.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=I[I.length-1]){for(e=0;e<I.length;++e)if(r.data[0]==I[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<I.length;){for(var n=I[e],i=e+1;i<I.length&&n<C;)n*=I[i++];for(n=r.modInt(n);e<i;)if(n%I[e++]==0)return!1}return r.millerRabin(t)}},28991:function(t,e,r){var n=r(3832);t.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},86971:function(t,e,r){var n=r(3832);r(83453),t.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},83453:function(t,e,r){var n=r(3832);r(97116),n.mgf=n.mgf||{},(t.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(t){return{generate:function(e,r){for(var i=new n.util.ByteBuffer,s=Math.ceil(r/t.digestLength),o=0;o<s;o++){var a=new n.util.ByteBuffer;a.putInt32(o),t.start(),t.update(e+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()}}}},66270:function(t,e,r){var n=r(3832);n.pki=n.pki||{};var i=t.exports=n.pki.oids=n.oids=n.oids||{};function s(t,e){i[t]=e,i[e]=t}function o(t,e){i[t]=e}s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.3.101.112","EdDSA25519"),s("1.2.840.10040.4.3","dsa-with-sha1"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("1.3.14.3.2.29","sha1WithRSASignature"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("2.16.840.1.101.3.4.2.4","sha224"),s("2.16.840.1.101.3.4.2.5","sha512-224"),s("2.16.840.1.101.3.4.2.6","sha512-256"),s("1.2.840.113549.2.2","md2"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.4","surname"),s("2.5.4.5","serialNumber"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.9","streetAddress"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.5.4.12","title"),s("2.5.4.13","description"),s("2.5.4.15","businessCategory"),s("2.5.4.17","postalCode"),s("2.5.4.42","givenName"),s("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),s("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),s("2.16.840.1.113730.1.1","nsCertType"),s("2.16.840.1.113730.1.13","nsComment"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping")},97450:function(t,e,r){var n=r(3832);if(r(8925),r(3068),r(33480),r(28991),r(66270),r(98960),r(26953),r(49563),r(69372),r(28095),r(97116),void 0===i)var i=n.jsbn.BigInteger;var s=n.asn1,o=n.pki=n.pki||{};t.exports=o.pbe=n.pbe=n.pbe||{};var a=o.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},u={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};function h(t,e){return t.start().update(e).digest().getBytes()}function d(t){var e;if(t){if(!(e=o.oids[s.derToOid(t)])){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else e="hmacWithSHA1";return f(e)}function f(t){var e=n.md;switch(t){case"hmacWithSHA224":e=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}o.encryptPrivateKeyInfo=function(t,e,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i,c,u,l=n.random.getBytesSync(r.saltSize),h=r.count,d=s.integerToDer(h);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var p,g,y;switch(r.algorithm){case"aes128":i=16,p=16,g=a["aes128-CBC"],y=n.aes.createEncryptionCipher;break;case"aes192":i=24,p=16,g=a["aes192-CBC"],y=n.aes.createEncryptionCipher;break;case"aes256":i=32,p=16,g=a["aes256-CBC"],y=n.aes.createEncryptionCipher;break;case"des":i=8,p=8,g=a.desCBC,y=n.des.createEncryptionCipher;break;default:throw(_=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,_}var m="hmacWith"+r.prfAlgorithm.toUpperCase(),w=f(m),b=n.pkcs5.pbkdf2(e,l,h,i,w),E=n.random.getBytesSync(p);(S=y(b)).start(E),S.update(s.toDer(t)),S.finish(),u=S.output.getBytes();var v=function(t,e,r,i){var a=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,t),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,e.getBytes())]);"hmacWithSHA1"!==i&&a.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids[i]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]));return a}(l,d,i,m);c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBKDF2).getBytes()),v]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(g).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,E)])])])}else{var _;if("3des"!==r.algorithm)throw(_=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,_;i=24;var S,A=new n.util.ByteBuffer(l);b=o.pbe.generatePkcs12Key(e,A,1,h,i),E=o.pbe.generatePkcs12Key(e,A,2,h,i);(S=n.des.createEncryptionCipher(b)).start(E),S.update(s.toDer(t)),S.finish(),u=S.output.getBytes(),c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,l),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,d.getBytes())])])}return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[c,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,u)])},o.decryptPrivateKeyInfo=function(t,e){var r=null,i={},a=[];if(!s.validate(t,c,i,a)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=a,u}var l=s.derToOid(i.encryptionOid),h=o.pbe.getCipher(l,i.encryptionParams,e),d=n.util.createBuffer(i.encryptedData);return h.update(d),h.finish()&&(r=s.fromDer(h.output)),r},o.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})},o.encryptedPrivateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(e.body)},o.encryptRsaPrivateKey=function(t,e,r){if(!(r=r||{}).legacy){var i=o.wrapRsaPrivateKey(o.privateKeyToAsn1(t));return i=o.encryptPrivateKeyInfo(i,e,r),o.encryptedPrivateKeyToPem(i)}var a,c,u,l;switch(r.algorithm){case"aes128":a="AES-128-CBC",u=16,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",u=24,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",u=32,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",u=24,c=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;case"des":a="DES-CBC",u=8,c=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;default:var h=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw h.algorithm=r.algorithm,h}var d=l(n.pbe.opensslDeriveBytes(e,c.substr(0,8),u));d.start(c),d.update(s.toDer(o.privateKeyToAsn1(t))),d.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:n.util.bytesToHex(c).toUpperCase()},body:d.output.getBytes()};return n.pem.encode(f)},o.decryptRsaPrivateKey=function(t,e){var r=null,i=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type)throw(u=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=u,u;if(i.procType&&"ENCRYPTED"===i.procType.type){var a,c;switch(i.dekInfo.algorithm){case"DES-CBC":a=8,c=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,c=n.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,c=n.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,c=n.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,c=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,c=function(t){return n.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":a=8,c=function(t){return n.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":a=16,c=function(t){return n.rc2.createDecryptionCipher(t,128)};break;default:var u;throw(u=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".')).algorithm=i.dekInfo.algorithm,u}var l=n.util.hexToBytes(i.dekInfo.parameters),h=c(n.pbe.opensslDeriveBytes(e,l.substr(0,8),a));if(h.start(l),h.update(n.util.createBuffer(i.body)),!h.finish())return r;r=h.output.getBytes()}else r=i.body;return null!==(r="ENCRYPTED PRIVATE KEY"===i.type?o.decryptPrivateKeyInfo(s.fromDer(r),e):s.fromDer(r))&&(r=o.privateKeyFromAsn1(r)),r},o.pbe.generatePkcs12Key=function(t,e,r,i,s,o){var a,c;if(null==o){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');o=n.md.sha1.create()}var u=o.digestLength,l=o.blockLength,h=new n.util.ByteBuffer,d=new n.util.ByteBuffer;if(null!=t){for(c=0;c<t.length;c++)d.putInt16(t.charCodeAt(c));d.putInt16(0)}var f=d.length(),p=e.length(),g=new n.util.ByteBuffer;g.fillWithByte(r,l);var y=l*Math.ceil(p/l),m=new n.util.ByteBuffer;for(c=0;c<y;c++)m.putByte(e.at(c%p));var w=l*Math.ceil(f/l),b=new n.util.ByteBuffer;for(c=0;c<w;c++)b.putByte(d.at(c%f));var E=m;E.putBuffer(b);for(var v=Math.ceil(s/u),_=1;_<=v;_++){var S=new n.util.ByteBuffer;S.putBytes(g.bytes()),S.putBytes(E.bytes());for(var A=0;A<i;A++)o.start(),o.update(S.getBytes()),S=o.digest();var R=new n.util.ByteBuffer;for(c=0;c<l;c++)R.putByte(S.at(c%u));var T=Math.ceil(p/l)+Math.ceil(f/l),I=new n.util.ByteBuffer;for(a=0;a<T;a++){var C=new n.util.ByteBuffer(E.getBytes(l)),k=511;for(c=R.length()-1;c>=0;c--)k>>=8,k+=R.at(c)+C.at(c),C.setAt(c,255&k);I.putBuffer(C)}E=I,h.putBuffer(S)}return h.truncate(h.length()-s),h},o.pbe.getCipher=function(t,e,r){switch(t){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(t,e,r);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},o.pbe.getCipherForPBES2=function(t,e,r){var i,a={},c=[];if(!s.validate(e,u,a,c))throw(i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=c,i;if((t=s.derToOid(a.kdfOid))!==o.oids.pkcs5PBKDF2)throw(i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=t,i.supportedOids=["pkcs5PBKDF2"],i;if((t=s.derToOid(a.encOid))!==o.oids["aes128-CBC"]&&t!==o.oids["aes192-CBC"]&&t!==o.oids["aes256-CBC"]&&t!==o.oids["des-EDE3-CBC"]&&t!==o.oids.desCBC)throw(i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=t,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i;var l,h,f=a.kdfSalt,p=n.util.createBuffer(a.kdfIterationCount);switch(p=p.getInt(p.length()<<3),o.oids[t]){case"aes128-CBC":l=16,h=n.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,h=n.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,h=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,h=n.des.createDecryptionCipher;break;case"desCBC":l=8,h=n.des.createDecryptionCipher}var g=d(a.prfOid),y=n.pkcs5.pbkdf2(r,f,p,l,g),m=a.encIv,w=h(y);return w.start(m),w},o.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},a=[];if(!s.validate(e,l,i,a))throw(g=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,g;var c,u,h,f=n.util.createBuffer(i.salt),p=n.util.createBuffer(i.iterations);switch(p=p.getInt(p.length()<<3),t){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,h=n.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,h=function(t,e){var r=n.rc2.createDecryptionCipher(t,40);return r.start(e,null),r};break;default:var g;throw(g=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=t,g}var y=d(i.prfOid),m=o.pbe.generatePkcs12Key(r,f,1,p,c,y);return y.start(),h(m,o.pbe.generatePkcs12Key(r,f,2,p,u,y))},o.pbe.opensslDeriveBytes=function(t,e,r,i){if(null==i){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');i=n.md.md5.create()}null===e&&(e="");for(var s=[h(i,t+e)],o=16,a=1;o<r;++a,o+=16)s.push(h(i,s[a-1]+t+e));return s.join("").substr(0,r)}},98960:function(t,e,r){var n=r(23085).lW,i=r(3832);r(36607),r(28991),r(97116);var s,o=i.pkcs5=i.pkcs5||{};i.util.isNodejs&&!i.options.usePureJavaScript&&(s=r(25819)),t.exports=i.pbkdf2=o.pbkdf2=function(t,e,r,o,a,c){if("function"==typeof a&&(c=a,a=null),i.util.isNodejs&&!i.options.usePureJavaScript&&s.pbkdf2&&(null===a||"object"!=typeof a)&&(s.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!=typeof a&&(a="sha1"),t=n.from(t,"binary"),e=n.from(e,"binary"),c?4===s.pbkdf2Sync.length?s.pbkdf2(t,e,r,o,(function(t,e){if(t)return c(t);c(null,e.toString("binary"))})):s.pbkdf2(t,e,r,o,a,(function(t,e){if(t)return c(t);c(null,e.toString("binary"))})):4===s.pbkdf2Sync.length?s.pbkdf2Sync(t,e,r,o).toString("binary"):s.pbkdf2Sync(t,e,r,o,a).toString("binary");if(null==a&&(a="sha1"),"string"==typeof a){if(!(a in i.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=i.md[a].create()}var u=a.digestLength;if(o>4294967295*u){var l=new Error("Derived key is too long.");if(c)return c(l);throw l}var h=Math.ceil(o/u),d=o-(h-1)*u,f=i.hmac.create();f.start(a,t);var p,g,y,m="";if(!c){for(var w=1;w<=h;++w){f.start(null,null),f.update(e),f.update(i.util.int32ToBytes(w)),p=y=f.digest().getBytes();for(var b=2;b<=r;++b)f.start(null,null),f.update(y),g=f.digest().getBytes(),p=i.util.xorBytes(p,g,u),y=g;m+=w<h?p:p.substr(0,d)}return m}w=1;function E(){if(w>h)return c(null,m);f.start(null,null),f.update(e),f.update(i.util.int32ToBytes(w)),p=y=f.digest().getBytes(),b=2,v()}function v(){if(b<=r)return f.start(null,null),f.update(y),g=f.digest().getBytes(),p=i.util.xorBytes(p,g,u),y=g,++b,i.util.setImmediate(v);m+=w<h?p:p.substr(0,d),++w,E()}E()}},26953:function(t,e,r){var n=r(3832);r(97116);var i=t.exports=n.pem=n.pem||{};function s(t){for(var e=t.name+": ",r=[],n=function(t,e){return" "+e},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+"\r\n";var s=0,o=-1;for(i=0;i<e.length;++i,++s)if(s>65&&-1!==o){var a=e[o];","===a?(++o,e=e.substr(0,o)+"\r\n "+e.substr(o)):e=e.substr(0,o)+"\r\n"+a+e.substr(o+1),s=i-o-1,o=-1,++i}else" "!==e[i]&&"\t"!==e[i]&&","!==e[i]||(o=i);return e}function o(t){return t.replace(/^\s+/,"")}i.encode=function(t,e){e=e||{};var r,i="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(i+=s(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]})),t.contentDomain&&(i+=s(r={name:"Content-Domain",values:[t.contentDomain]})),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),i+=s(r)),t.headers)for(var o=0;o<t.headers.length;++o)i+=s(t.headers[o]);return t.procType&&(i+="\r\n"),i+=n.util.encode64(t.body,e.maxline||64)+"\r\n",i+="-----END "+t.type+"-----\r\n"},i.decode=function(t){for(var e,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;e=i.exec(t);){var c=e[1];"NEW CERTIFICATE REQUEST"===c&&(c="CERTIFICATE REQUEST");var u={type:c,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(e[3])};if(r.push(u),e[2]){for(var l=e[2].split(a),h=0;e&&h<l.length;){for(var d=l[h].replace(/\s+$/,""),f=h+1;f<l.length;++f){var p=l[f];if(!/\s/.test(p[0]))break;d+=p,h=f}if(e=d.match(s)){for(var g={name:e[1],values:[]},y=e[2].split(","),m=0;m<y.length;++m)g.values.push(o(y[m]));if(u.procType)if(u.contentDomain||"Content-Domain"!==g.name)if(u.dekInfo||"DEK-Info"!==g.name)u.headers.push(g);else{if(0===g.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:y[0],parameters:y[1]||null}}else u.contentDomain=y[0]||"";else{if("Proc-Type"!==g.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==g.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:y[0],type:y[1]}}}++h}if("ENCRYPTED"===u.procType&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},18936:function(t,e,r){var n=r(3832);r(97116),r(49563),r(137);var i=t.exports=n.pkcs1=n.pkcs1||{};function s(t,e,r){r||(r=n.md.sha1.create());for(var i="",s=Math.ceil(e/r.digestLength),o=0;o<s;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);r.start(),r.update(t+a),i+=r.digest().getBytes()}return i.substring(0,e)}i.encode_rsa_oaep=function(t,e,r){var i,o,a,c;"string"==typeof r?(i=r,o=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,o=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md)),a?a.start():a=n.md.sha1.create(),c||(c=a);var u=Math.ceil(t.n.bitLength()/8),l=u-2*a.digestLength-2;if(e.length>l)throw(y=new Error("RSAES-OAEP input message length is too long.")).length=e.length,y.maxLength=l,y;i||(i=""),a.update(i,"raw");for(var h=a.digest(),d="",f=l-e.length,p=0;p<f;p++)d+="\0";var g=h.getBytes()+d+""+e;if(o){if(o.length!==a.digestLength){var y;throw(y=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=o.length,y.digestLength=a.digestLength,y}}else o=n.random.getBytes(a.digestLength);var m=s(o,u-a.digestLength-1,c),w=n.util.xorBytes(g,m,g.length),b=s(w,a.digestLength,c);return"\0"+n.util.xorBytes(o,b,o.length)+w},i.decode_rsa_oaep=function(t,e,r){var i,o,a;"string"==typeof r?(i=r,o=arguments[3]||void 0):r&&(i=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var c=Math.ceil(t.n.bitLength()/8);if(e.length!==c)throw(m=new Error("RSAES-OAEP encoded message length is invalid.")).length=e.length,m.expectedLength=c,m;if(void 0===o?o=n.md.sha1.create():o.start(),a||(a=o),c<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),o.update(i,"raw");for(var u=o.digest().getBytes(),l=e.charAt(0),h=e.substring(1,o.digestLength+1),d=e.substring(1+o.digestLength),f=s(d,o.digestLength,a),p=s(n.util.xorBytes(h,f,h.length),c-o.digestLength-1,a),g=n.util.xorBytes(d,p,d.length),y=g.substring(0,o.digestLength),m="\0"!==l,w=0;w<o.digestLength;++w)m|=u.charAt(w)!==y.charAt(w);for(var b=1,E=o.digestLength,v=o.digestLength;v<g.length;v++){var _=g.charCodeAt(v);m|=_&(b?65534:0),E+=b&=1&_^1}if(m||1!==g.charCodeAt(E))throw new Error("Invalid RSAES-OAEP padding.");return g.substring(E+1)}},79437:function(t,e,r){var n=r(3832);r(8925),r(3068),r(33480),r(66270),r(26953),r(95496),r(49563),r(97116),r(25414);var i=n.asn1,s=t.exports=n.pkcs7=n.pkcs7||{};function o(t){var e={},r=[];if(!i.validate(t,s.asn1.recipientInfoValidator,e,r)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=r,o}return{version:e.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(e.issuer),serialNumber:n.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:i.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function a(t){for(var e,r=[],s=0;s<t.length;++s)r.push((e=t[s],i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.encryptedContent.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.encryptedContent.content)])));return r}function c(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.digestAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[]),s=0;s<t.unauthenticatedAttributes.length;++s){var o=t.unauthenticatedAttributes[s];r.values.push(u(o))}e.value.push(r)}return e}function u(t){var e;if(t.type===n.pki.oids.contentType)e=i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.value).getBytes());else if(t.type===n.pki.oids.messageDigest)e=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),s=new Date("2050-01-01T00:00:00Z"),o=t.value;if("string"==typeof o){var a=Date.parse(o);o=isNaN(a)?13===o.length?i.utcTimeToDate(o):i.generalizedTimeToDate(o):new Date(a)}e=o>=r&&o<s?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(o)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(o))}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[e])])}function l(t,e,r){var s={};if(!i.validate(e,r,s,[])){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}if(i.derToOid(s.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(s.encryptedContent){var a="";if(n.util.isArray(s.encryptedContent))for(var c=0;c<s.encryptedContent.length;++c){if(s.encryptedContent[c].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=s.encryptedContent[c].value}else a=s.encryptedContent;t.encryptedContent={algorithm:i.derToOid(s.encAlgorithm),parameter:n.util.createBuffer(s.encParameter.value),content:n.util.createBuffer(a)}}if(s.content){a="";if(n.util.isArray(s.content))for(c=0;c<s.content.length;++c){if(s.content[c].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=s.content[c].value}else a=s.content;t.content=n.util.createBuffer(a)}return t.version=s.version.charCodeAt(0),t.rawCapture=s,s}function h(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var e;switch(t.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:e=n.aes.createDecryptionCipher(t.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:e=n.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s.messageFromPem=function(t){var e=n.pem.decode(t)[0];if("PKCS7"!==e.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=i.fromDer(e.body);return s.messageFromAsn1(o)},s.messageToPem=function(t,e){var r={type:"PKCS7",body:i.toDer(t.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:e})},s.messageFromAsn1=function(t){var e={},r=[];if(!i.validate(t,s.asn1.contentInfoValidator,e,r)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=r,o}var a,c=i.derToOid(e.contentType);switch(c){case n.pki.oids.envelopedData:a=s.createEnvelopedData();break;case n.pki.oids.encryptedData:a=s.createEncryptedData();break;case n.pki.oids.signedData:a=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+c+" is not (yet) supported.")}return a.fromAsn1(e.content.value[0]),a},s.createSignedData=function(){var t=null;return t={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(l(t,e,s.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var r=t.rawCapture.certificates.value,i=0;i<r.length;++i)t.certificates.push(n.pki.certificateFromAsn1(r[i]))},toAsn1:function(){t.contentInfo||t.sign();for(var e=[],r=0;r<t.certificates.length;++r)e.push(n.pki.certificateToAsn1(t.certificates[r]));var s=[],o=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return e.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,e)),s.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(i.create(i.Class.UNIVERSAL,i.Type.SET,!0,t.signerInfos)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),o])},addSigner:function(e){var r=e.issuer,i=e.serialNumber;if(e.certificate){var s=e.certificate;"string"==typeof s&&(s=n.pki.certificateFromPem(s)),r=s.issuer.attributes,i=s.serialNumber}var o=e.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof o&&(o=n.pki.privateKeyFromPem(o));var a=e.digestAlgorithm||n.pki.oids.sha1;switch(a){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var c=e.authenticatedAttributes||[];if(c.length>0){for(var u=!1,l=!1,h=0;h<c.length;++h){var d=c[h];if(u||d.type!==n.pki.oids.contentType){if(l||d.type!==n.pki.oids.messageDigest);else if(l=!0,u)break}else if(u=!0,l)break}if(!u||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:o,version:1,issuer:r,serialNumber:i,digestAlgorithm:a,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(e){var r;(e=e||{},"object"!=typeof t.content||null===t.contentInfo)&&(t.contentInfo=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes())]),"content"in t&&(t.content instanceof n.util.ByteBuffer?r=t.content.bytes():"string"==typeof t.content&&(r=n.util.encodeUtf8(t.content)),e.detached?t.detachedContent=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r):t.contentInfo.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)]))));0!==t.signers.length&&function(e){var r;r=t.detachedContent?t.detachedContent:(r=t.contentInfo.value[1]).value[0];if(!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=i.derToOid(t.contentInfo.value[0].value),o=i.toDer(r);for(var a in o.getByte(),i.getBerValueLength(o),o=o.getBytes(),e)e[a].start().update(o);for(var l=new Date,h=0;h<t.signers.length;++h){var d=t.signers[h];if(0===d.authenticatedAttributes.length){if(s!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[]),p=0;p<d.authenticatedAttributes.length;++p){var g=d.authenticatedAttributes[p];g.type===n.pki.oids.messageDigest?g.value=e[d.digestAlgorithm].digest():g.type===n.pki.oids.signingTime&&(g.value||(g.value=l)),f.value.push(u(g)),d.authenticatedAttributesAsn1.value.push(u(g))}o=i.toDer(f).getBytes(),d.md.start().update(o)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=function(t){for(var e=[],r=0;r<t.length;++r)e.push(c(t[r]));return e}(t.signers)}(function(){for(var e={},r=0;r<t.signers.length;++r){var s=t.signers[r];(o=s.digestAlgorithm)in e||(e[o]=n.md[n.pki.oids[o]].create()),0===s.authenticatedAttributes.length?s.md=e[o]:s.md=n.md[n.pki.oids[o]].create()}for(var o in t.digestAlgorithmIdentifiers=[],e)t.digestAlgorithmIdentifiers.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return e}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"==typeof e&&(e=n.pki.certificateFromPem(e)),t.certificates.push(e)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}}},s.createEncryptedData=function(){var t=null;return t={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){l(t,e,s.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),h(t)}}},s.createEnvelopedData=function(){var t=null;return t={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=l(t,e,s.asn1.envelopedDataValidator);t.recipients=function(t){for(var e=[],r=0;r<t.length;++r)e.push(o(t[r]));return e}(r.recipientInfos.value)},toAsn1:function(){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,a(t.recipients)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,(e=t.encryptedContent,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.algorithm).getBytes()),e.parameter?i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.content.getBytes())])]))])])]);var e},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],s=i.issuer;if(i.serialNumber===e.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return i}}return null},decrypt:function(e,r){if(void 0===t.encryptedContent.key&&void 0!==e&&void 0!==r)switch(e.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var i=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=n.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}h(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(void 0===t.encryptedContent.content){var i,s,o;switch(r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:i=16,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:i=24,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:i=32,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:i=24,s=8,o=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===e)e=n.util.createBuffer(n.random.getBytes(i));else if(e.length()!=i)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+i+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(s));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var c=0;c<t.recipients.length;++c){var u=t.recipients[c];if(void 0===u.encryptedContent.content){if(u.encryptedContent.algorithm!==n.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm);u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data)}}}}}},95496:function(t,e,r){var n=r(3832);r(3068),r(97116);var i=n.asn1,s=t.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=s;var o={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=o;var a={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},s.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var c={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};s.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[c]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},29654:function(t,e,r){var n=r(3832);r(97116),r(15764),r(49563),function(){if(n.prime)t.exports=n.prime;else{var e=t.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],s=new r(null);s.fromInt(30);var o=function(t,e){return t|e};e.generateProbablePrime=function(t,e,i){"function"==typeof e&&(i=e,e={});var s=(e=e||{}).algorithm||"PRIMEINC";"string"==typeof s&&(s={name:s}),s.options=s.options||{};var o=e.prng||n.random,c={nextBytes:function(t){for(var e=o.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}};if("PRIMEINC"===s.name)return function(t,e,i,s){if("workers"in i)return function(t,e,i,s){if("undefined"==typeof Worker)return a(t,e,i,s);var o=u(t,e),c=i.workers,l=i.workLoad||100,h=30*l/8,d=i.workerScript||"forge/prime.worker.js";if(-1===c)return n.util.estimateCores((function(t,e){t&&(e=2),c=e-1,f()}));function f(){c=Math.max(1,c);for(var n=[],i=0;i<c;++i)n[i]=new Worker(d);for(i=0;i<c;++i)n[i].addEventListener("message",f);var a=!1;function f(i){if(!a){0;var c=i.data;if(c.found){for(var d=0;d<n.length;++d)n[d].terminate();return a=!0,s(null,new r(c.prime,16))}o.bitLength()>t&&(o=u(t,e));var f=o.toString(16);i.target.postMessage({hex:f,workLoad:l}),o.dAddOffset(h,0)}}}f()}(t,e,i,s);return a(t,e,i,s)}(t,c,s.options,i);throw new Error("Invalid prime generation algorithm: "+s.name)}}function a(t,e,r,n){var i=u(t,e),s=function(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}(i.bitLength());"millerRabinTests"in r&&(s=r.millerRabinTests);var o=10;"maxBlockTime"in r&&(o=r.maxBlockTime),c(i,t,e,0,s,o,n)}function c(t,e,r,s,o,a,l){var h=+new Date;do{if(t.bitLength()>e&&(t=u(e,r)),t.isProbablePrime(o))return l(null,t);t.dAddOffset(i[s++%8],0)}while(a<0||+new Date-h<a);n.util.setImmediate((function(){c(t,e,r,s,o,a,l)}))}function u(t,e){var n=new r(t,e),i=t-1;return n.testBit(i)||n.bitwiseTo(r.ONE.shiftLeft(i),o,n),n.dAddOffset(31-n.mod(s).byteValue(),0),n}}()},74933:function(t,e,r){var n=r(34155),i=r(3832);r(97116);var s=null;!i.util.isNodejs||i.options.usePureJavaScript||n.versions["node-webkit"]||(s=r(25819)),(t.exports=i.prng=i.prng||{}).create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),o=0;o<32;++o)n[o]=r.create();function a(){if(e.pools[0].messageLength>=32)return c();var t=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(t)),c()}function c(){e.reseeds=4294967295===e.reseeds?0:e.reseeds+1;var t=e.plugin.md.create();t.update(e.keyBytes);for(var r=1,n=0;n<32;++n)e.reseeds%r==0&&(t.update(e.pools[n].digest().getBytes()),e.pools[n].start()),r<<=1;e.keyBytes=t.digest().getBytes(),t.start(),t.update(e.keyBytes);var i=t.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(i),e.generated=0}function u(t){var e=null,r=i.util.globalScope,n=r.crypto||r.msCrypto;n&&n.getRandomValues&&(e=function(t){return n.getRandomValues(t)});var s=i.util.createBuffer();if(e)for(;s.length()<t;){var o=Math.max(1,Math.min(t-s.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{e(a);for(var c=0;c<a.length;++c)s.putInt32(a[c])}catch(t){if(!("undefined"!=typeof QuotaExceededError&&t instanceof QuotaExceededError))throw t}}if(s.length()<t)for(var u,l,h,d=Math.floor(65536*Math.random());s.length()<t;){l=16807*(65535&d),l+=(32767&(u=16807*(d>>16)))<<16,d=4294967295&(l=(2147483647&(l+=u>>15))+(l>>31));for(c=0;c<3;++c)h=d>>>(c<<3),h^=Math.floor(256*Math.random()),s.putByte(255&h)}return s.getBytes(t)}return e.pools=n,e.pool=0,e.generate=function(t,r){if(!r)return e.generateSync(t);var n=e.plugin.cipher,s=e.plugin.increment,o=e.plugin.formatKey,a=e.plugin.formatSeed,u=i.util.createBuffer();e.key=null,function l(h){if(h)return r(h);if(u.length()>=t)return r(null,u.getBytes(t));e.generated>1048575&&(e.key=null);if(null===e.key)return i.util.nextTick((function(){!function(t){if(e.pools[0].messageLength>=32)return c(),t();var r=32-e.pools[0].messageLength<<5;e.seedFile(r,(function(r,n){if(r)return t(r);e.collect(n),c(),t()}))}(l)}));var d=n(e.key,e.seed);e.generated+=d.length,u.putBytes(d),e.key=o(n(e.key,s(e.seed))),e.seed=a(n(e.key,e.seed)),i.util.setImmediate(l)}()},e.generateSync=function(t){var r=e.plugin.cipher,n=e.plugin.increment,s=e.plugin.formatKey,o=e.plugin.formatSeed;e.key=null;for(var c=i.util.createBuffer();c.length()<t;){e.generated>1048575&&(e.key=null),null===e.key&&a();var u=r(e.key,e.seed);e.generated+=u.length,c.putBytes(u),e.key=s(r(e.key,n(e.seed))),e.seed=o(r(e.key,e.seed))}return c.getBytes(t)},s?(e.seedFile=function(t,e){s.randomBytes(t,(function(t,r){if(t)return e(t);e(null,r.toString())}))},e.seedFileSync=function(t){return s.randomBytes(t).toString()}):(e.seedFile=function(t,e){try{e(null,u(t))}catch(t){e(t)}},e.seedFileSync=u),e.collect=function(t){for(var r=t.length,n=0;n<r;++n)e.pools[e.pool].update(t.substr(n,1)),e.pool=31===e.pool?0:e.pool+1},e.collectInt=function(t,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(t>>i&255);e.collect(n)},e.registerWorker=function(t){if(t===self)e.seedFile=function(t,e){self.addEventListener("message",(function t(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",t),e(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:t}}})};else{t.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&e.seedFile(n.forge.prng.needed,(function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})}))}))}},e}},96007:function(t,e,r){var n=r(3832);r(49563),r(97116),(t.exports=n.pss=n.pss||{}).create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e,r=t.md,i=t.mgf,s=r.digestLength,o=t.salt||null;if("string"==typeof o&&(o=n.util.createBuffer(o)),"saltLength"in t)e=t.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");e=o.length()}if(null!==o&&o.length()!==e)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||n.random,c={encode:function(t,c){var u,l,h=c-1,d=Math.ceil(h/8),f=t.digest().getBytes();if(d<s+e+2)throw new Error("Message is too long to encrypt.");l=null===o?a.getBytesSync(e):o.bytes();var p=new n.util.ByteBuffer;p.fillWithByte(0,8),p.putBytes(f),p.putBytes(l),r.start(),r.update(p.getBytes());var g=r.digest().getBytes(),y=new n.util.ByteBuffer;y.fillWithByte(0,d-e-s-2),y.putByte(1),y.putBytes(l);var m=y.getBytes(),w=d-s-1,b=i.generate(g,w),E="";for(u=0;u<w;u++)E+=String.fromCharCode(m.charCodeAt(u)^b.charCodeAt(u));var v=65280>>8*d-h&255;return(E=String.fromCharCode(E.charCodeAt(0)&~v)+E.substr(1))+g+String.fromCharCode(188)},verify:function(t,o,a){var c,u=a-1,l=Math.ceil(u/8);if(o=o.substr(-l),l<s+e+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var h=l-s-1,d=o.substr(0,h),f=o.substr(h,s),p=65280>>8*l-u&255;if(0!=(d.charCodeAt(0)&p))throw new Error("Bits beyond keysize not zero as expected.");var g=i.generate(f,h),y="";for(c=0;c<h;c++)y+=String.fromCharCode(d.charCodeAt(c)^g.charCodeAt(c));y=String.fromCharCode(y.charCodeAt(0)&~p)+y.substr(1);var m=l-s-e-2;for(c=0;c<m;c++)if(0!==y.charCodeAt(c))throw new Error("Leftmost octets not zero as expected");if(1!==y.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var w=y.substr(-e),b=new n.util.ByteBuffer;return b.fillWithByte(0,8),b.putBytes(t),b.putBytes(w),r.start(),r.update(b.getBytes()),f===r.digest().getBytes()}};return c}},49563:function(t,e,r){var n=r(3832);r(8925),r(41668),r(74933),r(97116),n.random&&n.random.getBytes?t.exports=n.random:function(e){var r={},i=new Array(4),s=n.util.createBuffer();function o(){var t=n.prng.create(r);return t.getBytes=function(e,r){return t.generate(e,r)},t.getBytesSync=function(e){return t.generate(e)},t}r.formatKey=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),n.aes._expandKey(t,!1)},r.formatSeed=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},r.cipher=function(t,e){return n.aes._updateBlock(t,e,i,!1),s.putInt32(i[0]),s.putInt32(i[1]),s.putInt32(i[2]),s.putInt32(i[3]),s.getBytes()},r.increment=function(t){return++t[3],t},r.md=n.md.sha256;var a=o(),c=null,u=n.util.globalScope,l=u.crypto||u.msCrypto;if(l&&l.getRandomValues&&(c=function(t){return l.getRandomValues(t)}),n.options.usePureJavaScript||!n.util.isNodejs&&!c){if("undefined"==typeof window||window.document,a.collectInt(+new Date,32),"undefined"!=typeof navigator){var h="";for(var d in navigator)try{"string"==typeof navigator[d]&&(h+=navigator[d])}catch(t){}a.collect(h),h=null}e&&(e().mousemove((function(t){a.collectInt(t.clientX,16),a.collectInt(t.clientY,16)})),e().keypress((function(t){a.collectInt(t.charCode,8)})))}if(n.random)for(var d in a)n.random[d]=a[d];else n.random=a;n.random.createInstance=o,t.exports=n.random}("undefined"!=typeof jQuery?jQuery:null)},69372:function(t,e,r){var n=r(3832);r(97116);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],o=function(t,e){return t<<e&65535|(65535&t)>>16-e},a=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(t,e){"string"==typeof t&&(t=n.util.createBuffer(t)),e=e||128;var r,s=t,o=t.length(),a=e,c=Math.ceil(a/8),u=255>>(7&a);for(r=o;r<128;r++)s.putByte(i[s.at(r-1)+s.at(r-o)&255]);for(s.setAt(128-c,i[s.at(128-c)&u]),r=127-c;r>=0;r--)s.setAt(r,i[s.at(r+1)^s.at(r+c)]);return s};var c=function(t,e,r){var i,c,u,l,h=!1,d=null,f=null,p=null,g=[];for(t=n.rc2.expandKey(t,e),u=0;u<64;u++)g.push(t.getInt16Le());r?(i=function(t){for(u=0;u<4;u++)t[u]+=g[l]+(t[(u+3)%4]&t[(u+2)%4])+(~t[(u+3)%4]&t[(u+1)%4]),t[u]=o(t[u],s[u]),l++},c=function(t){for(u=0;u<4;u++)t[u]+=g[63&t[(u+3)%4]]}):(i=function(t){for(u=3;u>=0;u--)t[u]=a(t[u],s[u]),t[u]-=g[l]+(t[(u+3)%4]&t[(u+2)%4])+(~t[(u+3)%4]&t[(u+1)%4]),l--},c=function(t){for(u=3;u>=0;u--)t[u]-=g[63&t[(u+3)%4]]});var y=function(t){var e=[];for(u=0;u<4;u++){var n=d.getInt16Le();null!==p&&(r?n^=p.getInt16Le():p.putInt16Le(n)),e.push(65535&n)}l=r?0:63;for(var i=0;i<t.length;i++)for(var s=0;s<t[i][0];s++)t[i][1](e);for(u=0;u<4;u++)null!==p&&(r?p.putInt16Le(e[u]):e[u]^=p.getInt16Le()),f.putInt16Le(e[u])},m=null;return m={start:function(t,e){t&&"string"==typeof t&&(t=n.util.createBuffer(t)),h=!1,d=n.util.createBuffer(),f=e||new n.util.createBuffer,p=t,m.output=f},update:function(t){for(h||d.putBuffer(t);d.length()>=8;)y([[5,i],[1,c],[6,i],[1,c],[5,i]])},finish:function(t){var e=!0;if(r)if(t)e=t(8,d,!r);else{var n=8===d.length()?8:8-d.length();d.fillWithByte(n,n)}if(e&&(h=!0,m.update()),!r&&(e=0===d.length()))if(t)e=t(8,f,!r);else{var i=f.length(),s=f.at(i-1);s>i?e=!1:f.truncate(s)}return e}}};n.rc2.startEncrypting=function(t,e,r){var i=n.rc2.createEncryptionCipher(t,128);return i.start(e,r),i},n.rc2.createEncryptionCipher=function(t,e){return c(t,e,!0)},n.rc2.startDecrypting=function(t,e,r){var i=n.rc2.createDecryptionCipher(t,128);return i.start(e,r),i},n.rc2.createDecryptionCipher=function(t,e){return c(t,e,!1)}},28095:function(t,e,r){var n=r(3832);if(r(3068),r(15764),r(66270),r(18936),r(29654),r(49563),r(97116),void 0===i)var i=n.jsbn.BigInteger;var s=n.util.isNodejs?r(25819):null,o=n.asn1,a=n.util;n.pki=n.pki||{},t.exports=n.pki.rsa=n.rsa=n.rsa||{};var c=n.pki,u=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},h={name:"RSAPrivateKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},d={name:"RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},f=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},p={name:"DigestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},g=function(t){var e;if(!(t.algorithm in c.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=c.oids[t.algorithm];var n=o.oidToDer(e).getBytes(),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),s=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);s.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,n)),s.value.push(o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,""));var a=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(s),i.value.push(a),o.toDer(i).getBytes()},y=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);var s;e.dP||(e.dP=e.d.mod(e.p.subtract(i.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(i.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));do{s=new i(n.util.bytesToHex(n.random.getBytes(e.n.bitLength()/8)),16)}while(s.compareTo(e.n)>=0||!s.gcd(e.n).equals(i.ONE));for(var o=(t=t.multiply(s.modPow(e.e,e.n)).mod(e.n)).mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);o.compareTo(a)<0;)o=o.add(e.p);var c=o.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return c=c.multiply(s.modInverse(e.n)).mod(e.n)};function m(t,e,r){var i=n.util.createBuffer(),s=Math.ceil(e.n.bitLength()/8);if(t.length>s-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=s-11,o}i.putByte(0),i.putByte(r);var a,c=s-3-t.length;if(0===r||1===r){a=0===r?0:255;for(var u=0;u<c;++u)i.putByte(a)}else for(;c>0;){var l=0,h=n.random.getBytes(c);for(u=0;u<c;++u)0===(a=h.charCodeAt(u))?++l:i.putByte(a);c=l}return i.putByte(0),i.putBytes(t),i}function w(t,e,r,i){var s=Math.ceil(e.n.bitLength()/8),o=n.util.createBuffer(t),a=o.getByte(),c=o.getByte();if(0!==a||r&&0!==c&&1!==c||!r&&2!=c||r&&0===c&&void 0===i)throw new Error("Encryption block is invalid.");var u=0;if(0===c){u=s-3-i;for(var l=0;l<u;++l)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===c)for(u=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++u}else if(2===c)for(u=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++u}if(0!==o.getByte()||u!==s-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function b(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=n.util.hexToBytes(e);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function E(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function v(t){return n.util.isNodejs&&"function"==typeof s[t]}function _(t){return void 0!==a.globalScope&&"object"==typeof a.globalScope.crypto&&"object"==typeof a.globalScope.crypto.subtle&&"function"==typeof a.globalScope.crypto.subtle[t]}function S(t){return void 0!==a.globalScope&&"object"==typeof a.globalScope.msCrypto&&"object"==typeof a.globalScope.msCrypto.subtle&&"function"==typeof a.globalScope.msCrypto.subtle[t]}function A(t){for(var e=n.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}c.rsa.encrypt=function(t,e,r){var s,o=r,a=Math.ceil(e.n.bitLength()/8);!1!==r&&!0!==r?(o=2===r,s=m(t,e,r)):(s=n.util.createBuffer()).putBytes(t);for(var c=new i(s.toHex(),16),u=y(c,e,o).toString(16),l=n.util.createBuffer(),h=a-Math.ceil(u.length/2);h>0;)l.putByte(0),--h;return l.putBytes(n.util.hexToBytes(u)),l.getBytes()},c.rsa.decrypt=function(t,e,r,s){var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=o,a}var c=new i(n.util.createBuffer(t).toHex(),16);if(c.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var u=y(c,e,r).toString(16),l=n.util.createBuffer(),h=o-Math.ceil(u.length/2);h>0;)l.putByte(0),--h;return l.putBytes(n.util.hexToBytes(u)),!1!==s?w(l.getBytes(),e,r):l.getBytes()},c.rsa.createKeyPairGenerationState=function(t,e,r){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048;var s,o=(r=r||{}).prng||n.random,a={nextBytes:function(t){for(var e=o.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},c=r.algorithm||"PRIMEINC";if("PRIMEINC"!==c)throw new Error("Invalid key generation algorithm: "+c);return(s={algorithm:c,state:0,bits:t,rng:a,eInt:e||65537,e:new i(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null}).e.fromInt(s.eInt),s},c.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new i(null);r.fromInt(30);for(var n,s=0,o=function(t,e){return t|e},a=+new Date,l=0;null===t.keys&&(e<=0||l<e);){if(0===t.state){var h=null===t.p?t.pBits:t.qBits,d=h-1;0===t.pqState?(t.num=new i(h,t.rng),t.num.testBit(d)||t.num.bitwiseTo(i.ONE.shiftLeft(d),o,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),s=0,++t.pqState):1===t.pqState?t.num.bitLength()>h?t.pqState=0:t.num.isProbablePrime(E(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(u[s++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(i.ONE).gcd(t.e).compareTo(i.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(i.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var f=t.e.modInverse(t.phi);t.keys={privateKey:c.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:c.rsa.setPublicKey(t.n,t.e)}}l+=(n=+new Date)-a,a=n}return null!==t.keys},c.rsa.generateKeyPair=function(t,e,r,u){if(1===arguments.length?"object"==typeof t?(r=t,t=void 0):"function"==typeof t&&(u=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof e?(u=e,e=void 0):"number"!=typeof e&&(r=e,e=void 0):(r=t,u=e,t=void 0,e=void 0):3===arguments.length&&("number"==typeof e?"function"==typeof r&&(u=r,r=void 0):(u=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(65537===e||3===e))if(u){if(v("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(t,e,r){if(t)return u(t);u(null,{privateKey:c.privateKeyFromPem(r),publicKey:c.publicKeyFromPem(e)})}));if(_("generateKey")&&_("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:A(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(t){return a.globalScope.crypto.subtle.exportKey("pkcs8",t.privateKey)})).then(void 0,(function(t){u(t)})).then((function(t){if(t){var e=c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(t)));u(null,{privateKey:e,publicKey:c.setRsaPublicKey(e.n,e.e)})}}));if(S("generateKey")&&S("exportKey")){var l=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:A(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return l.oncomplete=function(t){var e=t.target.result,r=a.globalScope.msCrypto.subtle.exportKey("pkcs8",e.privateKey);r.oncomplete=function(t){var e=t.target.result,r=c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(e)));u(null,{privateKey:r,publicKey:c.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){u(t)}},void(l.onerror=function(t){u(t)})}}else if(v("generateKeyPairSync")){var h=s.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:c.privateKeyFromPem(h.privateKey),publicKey:c.publicKeyFromPem(h.publicKey)}}var d=c.rsa.createKeyPairGenerationState(t,e,r);if(!u)return c.rsa.stepKeyPairGenerationState(d,0),d.keys;!function(t,e,r){"function"==typeof e&&(r=e,e={});e=e||{};var s={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(s.prng=e.prng);function o(){a(t.pBits,(function(e,n){return e?r(e):(t.p=n,null!==t.q?u(e,t.q):void a(t.qBits,u))}))}function a(t,e){n.prime.generateProbablePrime(t,s,e)}function u(e,n){if(e)return r(e);if(t.q=n,t.p.compareTo(t.q)<0){var s=t.p;t.p=t.q,t.q=s}if(0!==t.p.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.p=null,void o();if(0!==t.q.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.q=null,void a(t.qBits,u);if(t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(i.ONE))return t.p=t.q=null,void o();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void a(t.qBits,u);var l=t.e.modInverse(t.phi);t.keys={privateKey:c.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:c.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}o()}(d,r,u)},c.setRsaPublicKey=c.rsa.setPublicKey=function(t,e){var r={n:t,e:e,encrypt:function(t,e,i){if("string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,r){return m(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return n.pkcs1.encode_rsa_oaep(e,t,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"==typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var s=e.encode(t,r,!0);return c.rsa.encrypt(s,r,!0)},verify:function(t,e,i,s){"string"==typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),void 0===s&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===i?i={verify:function(t,e){e=w(e,r,!0);var i=o.fromDer(e,{parseAllBytes:s._parseAllDigestBytes}),a={},c=[];if(!o.validate(i,p,a,c))throw(u=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=c,u;var u,l=o.derToOid(a.algorithmIdentifier);if(l!==n.oids.md2&&l!==n.oids.md5&&l!==n.oids.sha1&&l!==n.oids.sha224&&l!==n.oids.sha256&&l!==n.oids.sha384&&l!==n.oids.sha512&&l!==n.oids["sha512-224"]&&l!==n.oids["sha512-256"])throw(u=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=l,u;if((l===n.oids.md2||l===n.oids.md5)&&!("parameters"in a))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return t===a.digest}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(t,e){return t===(e=w(e,r,!0))}});var a=c.rsa.decrypt(e,r,!0,!1);return i.verify(t,a,r.n.bitLength())}};return r},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(t,e,r,i,s,o,a,u){var l={n:t,e:e,d:r,p:i,q:s,dP:o,dQ:a,qInv:u,decrypt:function(t,e,r){"string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var i=c.rsa.decrypt(t,l,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:w};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return n.pkcs1.decode_rsa_oaep(e,t,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(i,l,!1)},sign:function(t,e){var r=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:g},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var n=e.encode(t,l.n.bitLength());return c.rsa.encrypt(n,l,r)}};return l},c.wrapRsaPrivateKey=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(t).getBytes())])},c.privateKeyFromAsn1=function(t){var e,r,s,a,u,d,f,p,g={},y=[];if(o.validate(t,l,g,y)&&(t=o.fromDer(n.util.createBuffer(g.privateKey))),g={},y=[],!o.validate(t,h,g,y)){var m=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw m.errors=y,m}return e=n.util.createBuffer(g.privateKeyModulus).toHex(),r=n.util.createBuffer(g.privateKeyPublicExponent).toHex(),s=n.util.createBuffer(g.privateKeyPrivateExponent).toHex(),a=n.util.createBuffer(g.privateKeyPrime1).toHex(),u=n.util.createBuffer(g.privateKeyPrime2).toHex(),d=n.util.createBuffer(g.privateKeyExponent1).toHex(),f=n.util.createBuffer(g.privateKeyExponent2).toHex(),p=n.util.createBuffer(g.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new i(e,16),new i(r,16),new i(s,16),new i(a,16),new i(u,16),new i(d,16),new i(f,16),new i(p,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(t.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(t.e)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(t.d)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(t.p)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(t.q)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(t.dP)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(t.dQ)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(t.qInv))])},c.publicKeyFromAsn1=function(t){var e={},r=[];if(o.validate(t,f,e,r)){var s,a=o.derToOid(e.publicKeyOid);if(a!==c.oids.rsaEncryption)throw(s=new Error("Cannot read public key. Unknown OID.")).oid=a,s;t=e.rsaPublicKey}if(r=[],!o.validate(t,d,e,r))throw(s=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,s;var u=n.util.createBuffer(e.publicKeyModulus).toHex(),l=n.util.createBuffer(e.publicKeyExponent).toHex();return c.setRsaPublicKey(new i(u,16),new i(l,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(t)])])},c.publicKeyToRSAPublicKey=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(t.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(t.e))])}},137:function(t,e,r){var n=r(3832);r(28991),r(97116);var i=t.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=i,i.create=function(){o||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),o=!0);var t=null,e=n.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=n.util.encodeUtf8(s));var c=s.length;i.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=c[1],c[1]=c[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,c[0]=c[1]/4294967296>>>0;return e.putBytes(s),a(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(e.bytes());var c,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-u));for(var l=8*i.fullMessageLength[0],h=0;h<i.fullMessageLength.length-1;++h)l+=(c=8*i.fullMessageLength[h+1])/4294967296>>>0,o.putInt32(l>>>0),l=c>>>0;o.putInt32(l);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};a(d,r,o);var f=n.util.createBuffer();return f.putInt32(d.h0),f.putInt32(d.h1),f.putInt32(d.h2),f.putInt32(d.h3),f.putInt32(d.h4),f},i};var s=null,o=!1;function a(t,e,r){for(var n,i,s,o,a,c,u,l=r.length();l>=64;){for(i=t.h0,s=t.h1,o=t.h2,a=t.h3,c=t.h4,u=0;u<16;++u)n=r.getInt32(),e[u]=n,n=(i<<5|i>>>27)+(a^s&(o^a))+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<20;++u)n=(n=e[u-3]^e[u-8]^e[u-14]^e[u-16])<<1|n>>>31,e[u]=n,n=(i<<5|i>>>27)+(a^s&(o^a))+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<32;++u)n=(n=e[u-3]^e[u-8]^e[u-14]^e[u-16])<<1|n>>>31,e[u]=n,n=(i<<5|i>>>27)+(s^o^a)+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<40;++u)n=(n=e[u-6]^e[u-16]^e[u-28]^e[u-32])<<2|n>>>30,e[u]=n,n=(i<<5|i>>>27)+(s^o^a)+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<60;++u)n=(n=e[u-6]^e[u-16]^e[u-28]^e[u-32])<<2|n>>>30,e[u]=n,n=(i<<5|i>>>27)+(s&o|a&(s^o))+c+2400959708+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<80;++u)n=(n=e[u-6]^e[u-16]^e[u-28]^e[u-32])<<2|n>>>30,e[u]=n,n=(i<<5|i>>>27)+(s^o^a)+c+3395469782+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,l-=64}}},41668:function(t,e,r){var n=r(3832);r(28991),r(97116);var i=t.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){o||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var t=null,e=n.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=n.util.encodeUtf8(s));var a=s.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=a[1],a[1]=a[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(s),c(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(e.bytes());var a,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-u));for(var l=8*i.fullMessageLength[0],h=0;h<i.fullMessageLength.length-1;++h)l+=(a=8*i.fullMessageLength[h+1])/4294967296>>>0,o.putInt32(l>>>0),l=a>>>0;o.putInt32(l);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};c(d,r,o);var f=n.util.createBuffer();return f.putInt32(d.h0),f.putInt32(d.h1),f.putInt32(d.h2),f.putInt32(d.h3),f.putInt32(d.h4),f.putInt32(d.h5),f.putInt32(d.h6),f.putInt32(d.h7),f},i};var s=null,o=!1,a=null;function c(t,e,r){for(var n,i,s,o,c,u,l,h,d,f,p,g,y,m=r.length();m>=64;){for(c=0;c<16;++c)e[c]=r.getInt32();for(;c<64;++c)n=((n=e[c-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=e[c-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[c]=n+e[c-7]+i+e[c-16]|0;for(u=t.h0,l=t.h1,h=t.h2,d=t.h3,f=t.h4,p=t.h5,g=t.h6,y=t.h7,c=0;c<64;++c)s=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),o=u&l|h&(u^l),n=y+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(g^f&(p^g))+a[c]+e[c],y=g,g=p,p=f,f=d+n>>>0,d=h,h=l,l=u,u=n+(i=s+o)>>>0;t.h0=t.h0+u|0,t.h1=t.h1+l|0,t.h2=t.h2+h|0,t.h3=t.h3+d|0,t.h4=t.h4+f|0,t.h5=t.h5+p|0,t.h6=t.h6+g|0,t.h7=t.h7+y|0,m-=64}}},63219:function(t,e,r){var n=r(3832);r(28991),r(97116);var i=t.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=i;var s=n.sha384=n.sha512.sha384=n.sha512.sha384||{};s.create=function(){return i.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=s,n.sha512.sha256=n.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,i.create=function(t){if(a||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),128),c=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(u={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0),void 0===t&&(t="SHA-512"),!(t in u))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=u[t],r=null,i=n.util.createBuffer(),s=new Array(80),h=0;h<80;++h)s[h]=new Array(2);var d=64;switch(t){case"SHA-384":d=48;break;case"SHA-512/256":d=32;break;case"SHA-512/224":d=28}var f={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:d,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){f.messageLength=0,f.fullMessageLength=f.messageLength128=[];for(var t=f.messageLengthSize/4,s=0;s<t;++s)f.fullMessageLength.push(0);i=n.util.createBuffer(),r=new Array(e.length);for(s=0;s<e.length;++s)r[s]=e[s].slice(0);return f}};return f.start(),f.update=function(t,e){"utf8"===e&&(t=n.util.encodeUtf8(t));var o=t.length;f.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=f.fullMessageLength.length-1;a>=0;--a)f.fullMessageLength[a]+=o[1],o[1]=o[0]+(f.fullMessageLength[a]/4294967296>>>0),f.fullMessageLength[a]=f.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return i.putBytes(t),l(r,s,i),(i.read>2048||0===i.length())&&i.compact(),f},f.digest=function(){var e=n.util.createBuffer();e.putBytes(i.bytes());var a,c=f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize&f.blockLength-1;e.putBytes(o.substr(0,f.blockLength-c));for(var u=8*f.fullMessageLength[0],h=0;h<f.fullMessageLength.length-1;++h)u+=(a=8*f.fullMessageLength[h+1])/4294967296>>>0,e.putInt32(u>>>0),u=a>>>0;e.putInt32(u);var d=new Array(r.length);for(h=0;h<r.length;++h)d[h]=r[h].slice(0);l(d,s,e);var p,g=n.util.createBuffer();p="SHA-512"===t?d.length:"SHA-384"===t?d.length-2:d.length-4;for(h=0;h<p;++h)g.putInt32(d[h][0]),h===p-1&&"SHA-512/224"===t||g.putInt32(d[h][1]);return g},f};var o=null,a=!1,c=null,u=null;function l(t,e,r){for(var n,i,s,o,a,u,l,h,d,f,p,g,y,m,w,b,E,v,_,S,A,R,T,I,C,k,N,B,P,L,D,O,x,U=r.length();U>=128;){for(N=0;N<16;++N)e[N][0]=r.getInt32()>>>0,e[N][1]=r.getInt32()>>>0;for(;N<80;++N)n=(((B=(L=e[N-2])[0])>>>19|(P=L[1])<<13)^(P>>>29|B<<3)^B>>>6)>>>0,i=((B<<13|P>>>19)^(P<<3|B>>>29)^(B<<26|P>>>6))>>>0,s=(((B=(O=e[N-15])[0])>>>1|(P=O[1])<<31)^(B>>>8|P<<24)^B>>>7)>>>0,o=((B<<31|P>>>1)^(B<<24|P>>>8)^(B<<25|P>>>7))>>>0,D=e[N-7],x=e[N-16],P=i+D[1]+o+x[1],e[N][0]=n+D[0]+s+x[0]+(P/4294967296>>>0)>>>0,e[N][1]=P>>>0;for(p=t[0][0],g=t[0][1],y=t[1][0],m=t[1][1],w=t[2][0],b=t[2][1],E=t[3][0],v=t[3][1],_=t[4][0],S=t[4][1],A=t[5][0],R=t[5][1],T=t[6][0],I=t[6][1],C=t[7][0],k=t[7][1],N=0;N<80;++N)l=((_>>>14|S<<18)^(_>>>18|S<<14)^(S>>>9|_<<23))>>>0,h=(T^_&(A^T))>>>0,a=((p>>>28|g<<4)^(g>>>2|p<<30)^(g>>>7|p<<25))>>>0,u=((p<<4|g>>>28)^(g<<30|p>>>2)^(g<<25|p>>>7))>>>0,d=(p&y|w&(p^y))>>>0,f=(g&m|b&(g^m))>>>0,P=k+(((_<<18|S>>>14)^(_<<14|S>>>18)^(S<<23|_>>>9))>>>0)+((I^S&(R^I))>>>0)+c[N][1]+e[N][1],n=C+l+h+c[N][0]+e[N][0]+(P/4294967296>>>0)>>>0,i=P>>>0,s=a+d+((P=u+f)/4294967296>>>0)>>>0,o=P>>>0,C=T,k=I,T=A,I=R,A=_,R=S,_=E+n+((P=v+i)/4294967296>>>0)>>>0,S=P>>>0,E=w,v=b,w=y,b=m,y=p,m=g,p=n+s+((P=i+o)/4294967296>>>0)>>>0,g=P>>>0;P=t[0][1]+g,t[0][0]=t[0][0]+p+(P/4294967296>>>0)>>>0,t[0][1]=P>>>0,P=t[1][1]+m,t[1][0]=t[1][0]+y+(P/4294967296>>>0)>>>0,t[1][1]=P>>>0,P=t[2][1]+b,t[2][0]=t[2][0]+w+(P/4294967296>>>0)>>>0,t[2][1]=P>>>0,P=t[3][1]+v,t[3][0]=t[3][0]+E+(P/4294967296>>>0)>>>0,t[3][1]=P>>>0,P=t[4][1]+S,t[4][0]=t[4][0]+_+(P/4294967296>>>0)>>>0,t[4][1]=P>>>0,P=t[5][1]+R,t[5][0]=t[5][0]+A+(P/4294967296>>>0)>>>0,t[5][1]=P>>>0,P=t[6][1]+I,t[6][0]=t[6][0]+T+(P/4294967296>>>0)>>>0,t[6][1]=P>>>0,P=t[7][1]+k,t[7][0]=t[7][0]+C+(P/4294967296>>>0)>>>0,t[7][1]=P>>>0,U-=128}}},97116:function(t,e,r){var n=r(34155),i=r(23085).lW,s=r(3832),o=r(78807),a=t.exports=s.util=s.util||{};function c(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function u(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(a.isArrayBuffer(t)||a.isArrayBufferView(t))if(void 0!==i&&t instanceof i)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof u||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if(void 0!==n&&n.nextTick&&!n.browser)return a.nextTick=n.nextTick,void("function"==typeof setImmediate?a.setImmediate=setImmediate:a.setImmediate=a.nextTick);if("function"==typeof setImmediate)return a.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(a.nextTick=function(t){return setImmediate(t)});if(a.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",e=[];a.setImmediate=function(r){e.push(r),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",(function(r){if(r.source===window&&r.data===t){r.stopPropagation();var n=e.slice();e.length=0,n.forEach((function(t){t()}))}}),!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),i=!0,s=document.createElement("div");e=[];new MutationObserver((function(){var t=e.slice();e.length=0,t.forEach((function(t){t()}))})).observe(s,{attributes:!0});var o=a.setImmediate;a.setImmediate=function(t){Date.now()-r>15?(r=Date.now(),o(t)):(e.push(t),1===e.length&&s.setAttribute("a",i=!i))}}a.nextTick=a.setImmediate}(),a.isNodejs=void 0!==n&&n.versions&&n.versions.node,a.globalScope=a.isNodejs?r.g:"undefined"==typeof self?window:self,a.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},a.isArrayBufferView=function(t){return t&&a.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},a.ByteBuffer=u,a.ByteStringBuffer=u;a.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},a.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},a.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},a.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},a.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},a.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},a.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(a.encodeUtf8(t))},a.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},a.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},a.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},a.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},a.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},a.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},a.ByteStringBuffer.prototype.putInt=function(t,e){c(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},a.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},a.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},a.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},a.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},a.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},a.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},a.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},a.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},a.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},a.ByteStringBuffer.prototype.getInt=function(t){c(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},a.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},a.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},a.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},a.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},a.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},a.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},a.ByteStringBuffer.prototype.copy=function(){var t=a.createBuffer(this.data);return t.read=this.read,t},a.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},a.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},a.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},a.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},a.ByteStringBuffer.prototype.toString=function(){return a.decodeUtf8(this.bytes())},a.DataBuffer=function(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=a.isArrayBuffer(t),n=a.isArrayBufferView(t);if(r||n)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)},a.DataBuffer.prototype.length=function(){return this.write-this.read},a.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},a.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},a.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},a.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},a.DataBuffer.prototype.putBytes=function(t,e){if(a.isArrayBufferView(t)){var r=(n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(a.isArrayBuffer(t)){var n=new Uint8Array(t);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(t instanceof a.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&a.isArrayBufferView(t.data)){n=new Uint8Array(t.data.byteLength,t.read,t.length());return this.accommodate(n.byteLength),new Uint8Array(t.data.byteLength,this.write).set(n),this.write+=n.byteLength,this}if(t instanceof a.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var i;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.hex.decode(t,i,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.base64.decode(t,i,this.write),this;if("utf8"===e&&(t=a.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.raw.decode(i),this;if("utf16"===e)return this.accommodate(2*t.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=a.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},a.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},a.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},a.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},a.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},a.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},a.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},a.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},a.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},a.DataBuffer.prototype.putInt=function(t,e){c(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},a.DataBuffer.prototype.putSignedInt=function(t,e){return c(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},a.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},a.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},a.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},a.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},a.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},a.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},a.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},a.DataBuffer.prototype.getInt=function(t){c(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},a.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},a.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},a.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},a.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},a.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},a.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},a.DataBuffer.prototype.copy=function(){return new a.DataBuffer(this)},a.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},a.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},a.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},a.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},a.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return a.binary.raw.encode(e);if("hex"===t)return a.binary.hex.encode(e);if("base64"===t)return a.binary.base64.encode(e);if("utf8"===t)return a.text.utf8.decode(e);if("utf16"===t)return a.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},a.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=a.encodeUtf8(t)),new a.ByteBuffer(t)},a.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},a.xorBytes=function(t,e,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s},a.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},a.bytesToHex=function(t){return a.createBuffer(t).toHex()},a.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";a.encode64=function(t,e){for(var r,n,i,s="",o="",a=0;a<t.length;)r=t.charCodeAt(a++),n=t.charCodeAt(a++),i=t.charCodeAt(a++),s+=l.charAt(r>>2),s+=l.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=l.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":l.charAt(63&i)),e&&s.length>e&&(o+=s.substr(0,e)+"\r\n",s=s.substr(e));return o+=s},a.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,n,i,s="",o=0;o<t.length;)e=h[t.charCodeAt(o++)-43],r=h[t.charCodeAt(o++)-43],n=h[t.charCodeAt(o++)-43],i=h[t.charCodeAt(o++)-43],s+=String.fromCharCode(e<<2|r>>4),64!==n&&(s+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(s+=String.fromCharCode((3&n)<<6|i)));return s},a.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},a.decodeUtf8=function(t){return decodeURIComponent(escape(t))},a.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:o.encode,decode:o.decode}},a.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},a.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length));for(var i=r=r||0,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n},a.binary.hex.encode=a.bytesToHex,a.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2)));var i=0,s=r=r||0;for(1&t.length&&(i=1,n[s++]=parseInt(t[0],16));i<t.length;i+=2)n[s++]=parseInt(t.substr(i,2),16);return e?s-r:n},a.binary.base64.encode=function(t,e){for(var r,n,i,s="",o="",a=0;a<t.byteLength;)r=t[a++],n=t[a++],i=t[a++],s+=l.charAt(r>>2),s+=l.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=l.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":l.charAt(63&i)),e&&s.length>e&&(o+=s.substr(0,e)+"\r\n",s=s.substr(e));return o+=s},a.binary.base64.decode=function(t,e,r){var n,i,s,o,a=e;a||(a=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,u=r=r||0;c<t.length;)n=h[t.charCodeAt(c++)-43],i=h[t.charCodeAt(c++)-43],s=h[t.charCodeAt(c++)-43],o=h[t.charCodeAt(c++)-43],a[u++]=n<<2|i>>4,64!==s&&(a[u++]=(15&i)<<4|s>>2,64!==o&&(a[u++]=(3&s)<<6|o));return e?u-r:a.subarray(0,u)},a.binary.base58.encode=function(t,e){return a.binary.baseN.encode(t,d,e)},a.binary.base58.decode=function(t,e){return a.binary.baseN.decode(t,d,e)},a.text={utf8:{},utf16:{}},a.text.utf8.encode=function(t,e,r){t=a.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length));for(var i=r=r||0,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n},a.text.utf8.decode=function(t){return a.decodeUtf8(String.fromCharCode.apply(null,t))},a.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));for(var i=new Uint16Array(n.buffer),s=r=r||0,o=r,a=0;a<t.length;++a)i[o++]=t.charCodeAt(a),s+=2;return e?s-r:n},a.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},a.deflate=function(t,e,r){if(e=a.decode64(t.deflate(a.encode64(e)).rval),r){var n=2;32&e.charCodeAt(1)&&(n=6),e=e.substring(n,e.length-4)}return e},a.inflate=function(t,e,r){var n=t.inflate(a.encode64(e)).rval;return null===n?null:a.decode64(n)};var f=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=a.encode64(JSON.stringify(r)),n=t.setItem(e,r)),void 0!==n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},p=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(a.decode64(r))),r},g=function(t,e,r,n){var i=p(t,e);null===i&&(i={}),i[r]=n,f(t,e,i)},y=function(t,e,r){var n=p(t,e);return null!==n&&(n=r in n?n[r]:null),n},m=function(t,e,r){var n=p(t,e);if(null!==n&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),f(t,e,n)}},w=function(t,e){f(t,e,null)},b=function(t,e,r){var n,i=null;void 0===r&&(r=["web","flash"]);var s=!1,o=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===e[0])throw new Error("Flash local storage not available.");i=t.apply(this,e),s="flash"===n}"web"!==n&&"both"!==n||(e[0]=localStorage,i=t.apply(this,e),s=!0)}catch(t){o=t}if(s)break}if(!s)throw o;return i};a.setItem=function(t,e,r,n,i){b(g,arguments,i)},a.getItem=function(t,e,r,n){return b(y,arguments,n)},a.removeItem=function(t,e,r,n){b(m,arguments,n)},a.clearItems=function(t,e,r){b(w,arguments,r)},a.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},a.format=function(t){for(var e,r,n=/%./g,i=0,s=[],o=0;e=n.exec(t);){(r=t.substring(o,n.lastIndex-2)).length>0&&s.push(r),o=n.lastIndex;var a=e[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[1+i++]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")},a.formatNumber=function(t,e,r,n){var i=t,s=isNaN(e=Math.abs(e))?2:e,o=void 0===r?",":r,a=void 0===n?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+a:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-u).toFixed(s).slice(2):"")},a.formatSize=function(t){return t=t>=1073741824?a.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?a.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?a.formatNumber(t/1024,0)+" KiB":a.formatNumber(t,0)+" bytes"},a.bytesFromIP=function(t){return-1!==t.indexOf(".")?a.bytesFromIPv4(t):-1!==t.indexOf(":")?a.bytesFromIPv6(t):null},a.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=a.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},a.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter((function(t){return 0===t.length&&++e,!0}))).length+e),n=a.createBuffer(),i=0;i<8;++i)if(t[i]&&0!==t[i].length){var s=a.hexToBytes(t[i]);s.length<2&&n.putByte(0),n.putBytes(s)}else n.fillWithByte(0,r),r=0;return n.getBytes()},a.bytesToIP=function(t){return 4===t.length?a.bytesToIPv4(t):16===t.length?a.bytesToIPv6(t):null},a.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},a.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var s=a.bytesToHex(t[i]+t[i+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var o=r[r.length-1],c=e.length;o&&c===o.end+1?(o.end=c,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:c,end:c})}e.push(s)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),0===u.start&&e.unshift(""),7===u.end&&e.push(""))}return e.join(":")},a.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in a&&!t.update)return e(null,a.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return a.cores=navigator.hardwareConcurrency,e(null,a.cores);if("undefined"==typeof Worker)return a.cores=1,e(null,a.cores);if("undefined"==typeof Blob)return a.cores=2,e(null,a.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function t(n,i,s){if(0===i){var o=Math.floor(n.reduce((function(t,e){return t+e}),0)/n.length);return a.cores=Math.max(1,o),URL.revokeObjectURL(r),e(null,a.cores)}!function(t,e){for(var n=[],i=[],s=0;s<t;++s){var o=new Worker(r);o.addEventListener("message",(function(r){if(i.push(r.data),i.length===t){for(var s=0;s<t;++s)n[s].terminate();e(null,i)}})),n.push(o)}for(s=0;s<t;++s)n[s].postMessage(s)}(s,(function(e,r){n.push(function(t,e){for(var r=[],n=0;n<t;++n)for(var i=e[n],s=r[n]=[],o=0;o<t;++o)if(n!==o){var a=e[o];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&s.push(o)}return r.reduce((function(t,e){return Math.max(t,e.length)}),0)}(s,r)),t(n,i-1,s)}))}([],5,16)}},25414:function(t,e,r){var n=r(3832);r(8925),r(3068),r(33480),r(28991),r(86971),r(66270),r(26953),r(96007),r(28095),r(97116);var i=n.asn1,s=t.exports=n.pki=n.pki||{},o=s.oids,a={};a.CN=o.commonName,a.commonName="CN",a.C=o.countryName,a.countryName="C",a.L=o.localityName,a.localityName="L",a.ST=o.stateOrProvinceName,a.stateOrProvinceName="ST",a.O=o.organizationName,a.organizationName="O",a.OU=o.organizationalUnitName,a.organizationalUnitName="OU",a.E=o.emailAddress,a.emailAddress="E";var c=n.pki.rsa.publicKeyValidator,u={name:"Certificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},c,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},h={name:"CertificationRequestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},c,{name:"CertificationRequestInfo.attributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0}]}]}]},d={name:"CertificationRequest",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[h,{name:"CertificationRequest.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function f(t,e){"string"==typeof e&&(e={shortName:e});for(var r,n=null,i=0;null===n&&i<t.attributes.length;++i)r=t.attributes[i],(e.type&&e.type===r.type||e.name&&e.name===r.name||e.shortName&&e.shortName===r.shortName)&&(n=r);return n}s.RDNAttributesAsArray=function(t,e){for(var r,n,s,c=[],u=0;u<t.value.length;++u){r=t.value[u];for(var l=0;l<r.value.length;++l)s={},n=r.value[l],s.type=i.derToOid(n.value[0].value),s.value=n.value[1].value,s.valueTagClass=n.value[1].type,s.type in o&&(s.name=o[s.type],s.name in a&&(s.shortName=a[s.name])),e&&(e.update(s.type),e.update(s.value)),c.push(s)}return c},s.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],c=i.derToOid(n.value[0].value),u=n.value[1].value,l=0;l<u.length;++l){var h={};if(h.type=c,h.value=u[l].value,h.valueTagClass=u[l].type,h.type in o&&(h.name=o[h.type],h.name in a&&(h.shortName=a[h.name])),h.type===o.extensionRequest){h.extensions=[];for(var d=0;d<h.value.length;++d)h.extensions.push(s.certificateExtensionFromAsn1(h.value[d]))}e.push(h)}return e};var p=function(t,e,r){var n={};if(t!==o["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:o.sha1},mgf:{algorithmOid:o.mgf1,hash:{algorithmOid:o.sha1}},saltLength:20});var s={},a=[];if(!i.validate(e,l,s,a)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=a,c}return void 0!==s.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=i.derToOid(s.hashOid)),void 0!==s.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=i.derToOid(s.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=i.derToOid(s.maskGenHashOid)),void 0!==s.saltLength&&(n.saltLength=s.saltLength.charCodeAt(0)),n},g=function(t){switch(o[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},y=function(t){var e,r=t.certificate;switch(r.signatureOid){case o.sha1WithRSAEncryption:case o.sha1WithRSASignature:break;case o["RSASSA-PSS"]:var i,s,a;if(void 0===(i=o[r.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[i])throw(a=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,a.name=i,a;if(void 0===(s=o[r.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[s])throw(a=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,a.name=s,a;if(s=n.mgf[s].create(n.md[i].create()),void 0===(i=o[r.signatureParameters.hash.algorithmOid])||void 0===n.md[i])throw(a=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,a.name=i,a;e=n.pss.create(n.md[i].create(),s,r.signatureParameters.saltLength)}return r.publicKey.verify(t.md.digest().getBytes(),t.signature,e)};function m(t){for(var e,r,s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),o=t.attributes,a=0;a<o.length;++a){var c=(e=o[a]).value,u=i.Type.PRINTABLESTRING;"valueTagClass"in e&&(u=e.valueTagClass)===i.Type.UTF8&&(c=n.util.encodeUtf8(c)),r=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.UNIVERSAL,u,!1,c)])]),s.value.push(r)}return s}function w(t){for(var e,r=0;r<t.length;++r){if(void 0===(e=t[r]).name&&(e.type&&e.type in s.oids?e.name=s.oids[e.type]:e.shortName&&e.shortName in a&&(e.name=s.oids[a[e.shortName]])),void 0===e.type){if(!e.name||!(e.name in s.oids))throw(c=new Error("Attribute type not specified.")).attribute=e,c;e.type=s.oids[e.name]}if(void 0===e.shortName&&e.name&&e.name in a&&(e.shortName=a[e.name]),e.type===o.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=i.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var n=0;n<e.extensions.length;++n)e.value.push(s.certificateExtensionToAsn1(b(e.extensions[n])))}var c;if(void 0===e.value)throw(c=new Error("Attribute value not specified.")).attribute=e,c}}function b(t,e){if(e=e||{},void 0===t.name&&t.id&&t.id in s.oids&&(t.name=s.oids[t.id]),void 0===t.id){if(!t.name||!(t.name in s.oids))throw(v=new Error("Extension ID not specified.")).extension=t,v;t.id=s.oids[t.name]}if(void 0!==t.value)return t;if("keyUsage"===t.name){var r=0,a=0,c=0;t.digitalSignature&&(a|=128,r=7),t.nonRepudiation&&(a|=64,r=6),t.keyEncipherment&&(a|=32,r=5),t.dataEncipherment&&(a|=16,r=4),t.keyAgreement&&(a|=8,r=3),t.keyCertSign&&(a|=4,r=2),t.cRLSign&&(a|=2,r=1),t.encipherOnly&&(a|=1,r=0),t.decipherOnly&&(c|=128,r=7);var u=String.fromCharCode(r);0!==c?u+=String.fromCharCode(a)+String.fromCharCode(c):0!==a&&(u+=String.fromCharCode(a)),t.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,u)}else if("basicConstraints"===t.name)t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var h in t)!0===t[h]&&(h in o?l.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o[h]).getBytes())):-1!==h.indexOf(".")&&l.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(h).getBytes())))}else if("nsCertType"===t.name){r=0,a=0;t.client&&(a|=128,r=7),t.server&&(a|=64,r=6),t.email&&(a|=32,r=5),t.objsign&&(a|=16,r=4),t.reserved&&(a|=8,r=3),t.sslCA&&(a|=4,r=2),t.emailCA&&(a|=2,r=1),t.objCA&&(a|=1,r=0);u=String.fromCharCode(r);0!==a&&(u+=String.fromCharCode(a)),t.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,u)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);for(var d=0;d<t.altNames.length;++d){u=(w=t.altNames[d]).value;if(7===w.type&&w.ip){if(null===(u=n.util.bytesFromIP(w.ip)))throw(v=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,v}else 8===w.type&&(u=w.oid?i.oidToDer(i.oidToDer(w.oid)):i.oidToDer(u));t.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC,w.type,!1,u))}}else if("nsComment"===t.name&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=i.create(i.Class.UNIVERSAL,i.Type.IA5STRING,!1,t.comment)}else if("subjectKeyIdentifier"===t.name&&e.cert){var f=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=f.toHex(),t.value=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,f.getBytes())}else if("authorityKeyIdentifier"===t.name&&e.cert){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);l=t.value.value;if(t.keyIdentifier){var p=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!1,p))}if(t.authorityCertIssuer){var g=[i.create(i.Class.CONTEXT_SPECIFIC,4,!0,[m(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];l.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,g))}if(t.serialNumber){var y=n.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);l.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if("cRLDistributionPoints"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);l=t.value.value;var w,b=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),E=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(d=0;d<t.altNames.length;++d){u=(w=t.altNames[d]).value;if(7===w.type&&w.ip){if(null===(u=n.util.bytesFromIP(w.ip)))throw(v=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,v}else 8===w.type&&(u=w.oid?i.oidToDer(i.oidToDer(w.oid)):i.oidToDer(u));E.value.push(i.create(i.Class.CONTEXT_SPECIFIC,w.type,!1,u))}b.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[E])),l.push(b)}var v;if(void 0===t.value)throw(v=new Error("Extension value not specified.")).extension=t,v;return t}function E(t,e){if(t===o["RSASSA-PSS"]){var r=[];return void 0!==e.hash.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.mgf.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.mgf.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.saltLength).getBytes())])),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,r)}return i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")}function v(t){var e=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return e;for(var r=t.attributes,s=0;s<r.length;++s){var o=r[s],a=o.value,c=i.Type.UTF8;"valueTagClass"in o&&(c=o.valueTagClass),c===i.Type.UTF8&&(a=n.util.encodeUtf8(a));var u=!1;"valueConstructed"in o&&(u=o.valueConstructed);var l=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,c,u,a)])]);e.value.push(l)}return e}s.certificateFromPem=function(t,e,r){var o=n.pem.decode(t)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificateFromAsn1(c,e)},s.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:i.toDer(s.certificateToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},s.publicKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=i.fromDer(e.body);return s.publicKeyFromAsn1(o)},s.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:i.toDer(s.publicKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},s.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:i.toDer(s.publicKeyToRSAPublicKey(t)).getBytes()};return n.pem.encode(r,{maxline:e})},s.getPublicKeyFingerprint=function(t,e){var r,o=(e=e||{}).md||n.md.sha1.create();switch(e.type||"RSAPublicKey"){case"RSAPublicKey":r=i.toDer(s.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":r=i.toDer(s.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}o.start(),o.update(r);var a=o.digest();if("hex"===e.encoding){var c=a.toHex();return e.delimiter?c.match(/.{2}/g).join(e.delimiter):c}if("binary"===e.encoding)return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return a},s.certificationRequestFromPem=function(t,e,r){var o=n.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==o.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificationRequestFromAsn1(c,e)},s.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:i.toDer(s.certificationRequestToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},s.createCertificate=function(){var t={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return f(t.issuer,e)},t.issuer.addField=function(e){w([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return f(t.subject,e)},t.subject.addField=function(e){w([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){w(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){w(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)b(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var r,n=null,i=0;null===n&&i<t.extensions.length;++i)r=t.extensions[i],(e.id&&r.id===e.id||e.name&&r.name===e.name)&&(n=r);return n},t.sign=function(e,r){t.md=r||n.md.sha1.create();var a=o[t.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw c.algorithm=t.md.algorithm,c}t.signatureOid=t.siginfo.algorithmOid=a,t.tbsCertificate=s.getTBSCertificate(t);var u=i.toDer(t.tbsCertificate);t.md.update(u.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,o=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=o.attributes,a.actualIssuer=n.attributes,a}var c=e.md;if(null===c){c=g({signatureOid:e.signatureOid,type:"certificate"});var u=e.tbsCertificate||s.getTBSCertificate(e),l=i.toDer(u);c.update(l.getBytes())}return null!==c&&(r=y({certificate:t,md:c,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var s,o;r=!0;for(var a=0;r&&a<n.attributes.length;++a)s=n.attributes[a],o=i.attributes[a],s.type===o.type&&s.value===o.value||(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=o.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var i=t.extensions[r];if(i.id===e){var s=t.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(i.subjectKeyIdentifier)===s}}return!1},t},s.certificateFromAsn1=function(t,e){var r={},o=[];if(!i.validate(t,u,r,o)){var a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw a.errors=o,a}if(i.derToOid(r.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=s.createCertificate();c.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=n.util.createBuffer(r.certSerialNumber);c.serialNumber=l.toHex(),c.signatureOid=n.asn1.derToOid(r.certSignatureOid),c.signatureParameters=p(c.signatureOid,r.certSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),c.siginfo.parameters=p(c.siginfo.algorithmOid,r.certinfoSignatureParams,!1),c.signature=r.certSignature;var h=[];if(void 0!==r.certValidity1UTCTime&&h.push(i.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&h.push(i.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&h.push(i.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&h.push(i.generalizedTimeToDate(r.certValidity4GeneralizedTime)),h.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(h.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(c.validity.notBefore=h[0],c.validity.notAfter=h[1],c.tbsCertificate=r.tbsCertificate,e){c.md=g({signatureOid:c.signatureOid,type:"certificate"});var d=i.toDer(c.tbsCertificate);c.md.update(d.getBytes())}var y=n.md.sha1.create(),m=i.toDer(r.certIssuer);y.update(m.getBytes()),c.issuer.getField=function(t){return f(c.issuer,t)},c.issuer.addField=function(t){w([t]),c.issuer.attributes.push(t)},c.issuer.attributes=s.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(c.issuer.uniqueId=r.certIssuerUniqueId),c.issuer.hash=y.digest().toHex();var b=n.md.sha1.create(),E=i.toDer(r.certSubject);return b.update(E.getBytes()),c.subject.getField=function(t){return f(c.subject,t)},c.subject.addField=function(t){w([t]),c.subject.attributes.push(t)},c.subject.attributes=s.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(c.subject.uniqueId=r.certSubjectUniqueId),c.subject.hash=b.digest().toHex(),r.certExtensions?c.extensions=s.certificateExtensionsFromAsn1(r.certExtensions):c.extensions=[],c.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),c},s.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(s.certificateExtensionFromAsn1(n.value[i]));return e},s.certificateExtensionFromAsn1=function(t){var e={};if(e.id=i.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===i.Type.BOOLEAN?(e.critical=0!==t.value[1].value.charCodeAt(0),e.value=t.value[2].value):e.value=t.value[1].value,e.id in o)if(e.name=o[e.id],"keyUsage"===e.name){var r=0,s=0;(c=i.fromDer(e.value)).value.length>1&&(r=c.value.charCodeAt(1),s=c.value.length>2?c.value.charCodeAt(2):0),e.digitalSignature=128==(128&r),e.nonRepudiation=64==(64&r),e.keyEncipherment=32==(32&r),e.dataEncipherment=16==(16&r),e.keyAgreement=8==(8&r),e.keyCertSign=4==(4&r),e.cRLSign=2==(2&r),e.encipherOnly=1==(1&r),e.decipherOnly=128==(128&s)}else if("basicConstraints"===e.name){(c=i.fromDer(e.value)).value.length>0&&c.value[0].type===i.Type.BOOLEAN?e.cA=0!==c.value[0].value.charCodeAt(0):e.cA=!1;var a=null;c.value.length>0&&c.value[0].type===i.Type.INTEGER?a=c.value[0].value:c.value.length>1&&(a=c.value[1].value),null!==a&&(e.pathLenConstraint=i.derToInteger(a))}else if("extKeyUsage"===e.name)for(var c=i.fromDer(e.value),u=0;u<c.value.length;++u){var l=i.derToOid(c.value[u].value);l in o?e[o[l]]=!0:e[l]=!0}else if("nsCertType"===e.name){r=0;(c=i.fromDer(e.value)).value.length>1&&(r=c.value.charCodeAt(1)),e.client=128==(128&r),e.server=64==(64&r),e.email=32==(32&r),e.objsign=16==(16&r),e.reserved=8==(8&r),e.sslCA=4==(4&r),e.emailCA=2==(2&r),e.objCA=1==(1&r)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){var h;e.altNames=[];c=i.fromDer(e.value);for(var d=0;d<c.value.length;++d){var f={type:(h=c.value[d]).type,value:h.value};switch(e.altNames.push(f),h.type){case 1:case 2:case 6:break;case 7:f.ip=n.util.bytesToIP(h.value);break;case 8:f.oid=i.derToOid(h.value)}}}else if("subjectKeyIdentifier"===e.name){c=i.fromDer(e.value);e.subjectKeyIdentifier=n.util.bytesToHex(c.value)}return e},s.certificationRequestFromAsn1=function(t,e){var r={},o=[];if(!i.validate(t,d,r,o)){var a=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=o,a}if(i.derToOid(r.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=s.createCertificationRequest();if(c.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,c.signatureOid=n.asn1.derToOid(r.csrSignatureOid),c.signatureParameters=p(c.signatureOid,r.csrSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),c.siginfo.parameters=p(c.siginfo.algorithmOid,r.csrSignatureParams,!1),c.signature=r.csrSignature,c.certificationRequestInfo=r.certificationRequestInfo,e){c.md=g({signatureOid:c.signatureOid,type:"certification request"});var u=i.toDer(c.certificationRequestInfo);c.md.update(u.getBytes())}var l=n.md.sha1.create();return c.subject.getField=function(t){return f(c.subject,t)},c.subject.addField=function(t){w([t]),c.subject.attributes.push(t)},c.subject.attributes=s.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),c.subject.hash=l.digest().toHex(),c.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),c.getAttribute=function(t){return f(c,t)},c.addAttribute=function(t){w([t]),c.attributes.push(t)},c.attributes=s.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),c},s.createCertificationRequest=function(){var t={version:0,signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return f(t.subject,e)},t.subject.addField=function(e){w([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return f(t,e)},t.addAttribute=function(e){w([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){w(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){w(e),t.attributes=e},t.sign=function(e,r){t.md=r||n.md.sha1.create();var a=o[t.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw c.algorithm=t.md.algorithm,c}t.signatureOid=t.siginfo.algorithmOid=a,t.certificationRequestInfo=s.getCertificationRequestInfo(t);var u=i.toDer(t.certificationRequestInfo);t.md.update(u.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(null===r){r=g({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||s.getCertificationRequestInfo(t),o=i.toDer(n);r.update(o.getBytes())}return null!==r&&(e=y({certificate:t,md:r,signature:t.signature})),e},t};var _=new Date("1950-01-01T00:00:00Z"),S=new Date("2050-01-01T00:00:00Z");function A(t){return t>=_&&t<S?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(t)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(t))}s.getTBSCertificate=function(t){var e=A(t.validity.notBefore),r=A(t.validity.notAfter),o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.siginfo.algorithmOid).getBytes()),E(t.siginfo.algorithmOid,t.siginfo.parameters)]),m(t.issuer),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,r]),m(t.subject),s.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&o.value.push(s.certificateExtensionsToAsn1(t.extensions)),o},s.getCertificationRequestInfo=function(t){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),m(t.subject),s.publicKeyToAsn1(t.publicKey),v(t)])},s.distinguishedNameToAsn1=function(t){return m(t)},s.certificateToAsn1=function(t){var e=t.tbsCertificate||s.getTBSCertificate(t);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureOid).getBytes()),E(t.signatureOid,t.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},s.certificateExtensionsToAsn1=function(t){var e=i.create(i.Class.CONTEXT_SPECIFIC,3,!0,[]),r=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(s.certificateExtensionToAsn1(t[n]));return e},s.certificateExtensionToAsn1=function(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.id).getBytes())),t.critical&&e.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return"string"!=typeof t.value&&(r=i.toDer(r).getBytes()),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)),e},s.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||s.getCertificationRequestInfo(t);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureOid).getBytes()),E(t.signatureOid,t.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},s.createCaStore=function(t){var e={certs:{}};function r(t){return o(t),e.certs[t.hash]||null}function o(t){if(!t.hash){var e=n.md.sha1.create();t.attributes=s.RDNAttributesAsArray(m(t),e),t.hash=e.digest().toHex()}}if(e.getIssuer=function(t){return r(t.issuer)},e.addCertificate=function(t){if("string"==typeof t&&(t=n.pki.certificateFromPem(t)),o(t.subject),!e.hasCertificate(t))if(t.subject.hash in e.certs){var r=e.certs[t.subject.hash];n.util.isArray(r)||(r=[r]),r.push(t),e.certs[t.subject.hash]=r}else e.certs[t.subject.hash]=t},e.hasCertificate=function(t){"string"==typeof t&&(t=n.pki.certificateFromPem(t));var e=r(t.subject);if(!e)return!1;n.util.isArray(e)||(e=[e]);for(var o=i.toDer(s.certificateToAsn1(t)).getBytes(),a=0;a<e.length;++a){if(o===i.toDer(s.certificateToAsn1(e[a])).getBytes())return!0}return!1},e.listAllCertificates=function(){var t=[];for(var r in e.certs)if(e.certs.hasOwnProperty(r)){var i=e.certs[r];if(n.util.isArray(i))for(var s=0;s<i.length;++s)t.push(i[s]);else t.push(i)}return t},e.removeCertificate=function(t){var a;if("string"==typeof t&&(t=n.pki.certificateFromPem(t)),o(t.subject),!e.hasCertificate(t))return null;var c=r(t.subject);if(!n.util.isArray(c))return a=e.certs[t.subject.hash],delete e.certs[t.subject.hash],a;for(var u=i.toDer(s.certificateToAsn1(t)).getBytes(),l=0;l<c.length;++l){u===i.toDer(s.certificateToAsn1(c[l])).getBytes()&&(a=c[l],c.splice(l,1))}return 0===c.length&&delete e.certs[t.subject.hash],a},t)for(var a=0;a<t.length;++a){var c=t[a];e.addCertificate(c)}return e},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(t,e,r){"function"==typeof r&&(r={verify:r}),r=r||{};var i=(e=e.slice(0)).slice(0),o=r.validityCheckDate;void 0===o&&(o=new Date);var a=!0,c=null,u=0;do{var l=e.shift(),h=null,d=!1;if(o&&(o<l.validity.notBefore||o>l.validity.notAfter)&&(c={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:o}),null===c){if(null===(h=e[0]||t.getIssuer(l))&&l.isIssuer(l)&&(d=!0,h=l),h){var f=h;n.util.isArray(f)||(f=[f]);for(var p=!1;!p&&f.length>0;){h=f.shift();try{p=h.verify(l)}catch(t){}}p||(c={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}null!==c||h&&!d||t.hasCertificate(l)||(c={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(null===c&&h&&!l.isIssuer(h)&&(c={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),null===c)for(var g={keyUsage:!0,basicConstraints:!0},y=0;null===c&&y<l.extensions.length;++y){var m=l.extensions[y];m.critical&&!(m.name in g)&&(c={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(null===c&&(!a||0===e.length&&(!h||d))){var w=l.getExtension("basicConstraints"),b=l.getExtension("keyUsage");if(null!==b&&(b.keyCertSign&&null!==w||(c={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate})),null!==c||null===w||w.cA||(c={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate}),null===c&&null!==b&&"pathLenConstraint"in w)u-1>w.pathLenConstraint&&(c={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}var E=null===c||c.error,v=r.verify?r.verify(E,u,i):E;if(!0!==v)throw!0===E&&(c={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(v||0===v)&&("object"!=typeof v||n.util.isArray(v)?"string"==typeof v&&(c.error=v):(v.message&&(c.message=v.message),v.error&&(c.error=v.error))),c;c=null,a=!1,++u}while(e.length>0);return!0}},23085:function(t,e,r){"use strict";var n=r(25108);const i=r(79742),s=r(80645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=u,e.h2=50;const a=2147483647;function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return d(t)}return l(t,e,r)}function l(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|y(t,e);let n=c(r);const i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Z(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Z(t,ArrayBuffer)||t&&Z(t.buffer,ArrayBuffer))return p(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(Z(t,SharedArrayBuffer)||t&&Z(t.buffer,SharedArrayBuffer)))return p(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,e,r);const i=function(t){if(u.isBuffer(t)){const e=0|g(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||Q(t.length)?c(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t){return h(t),c(t<0?0:0|g(t))}function f(t){const e=t.length<0?0:0|g(t.length),r=c(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function p(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,u.prototype),n}function g(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function y(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(t).length;default:if(i)return n?-1:G(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return k(this,e,r);case"latin1":case"binary":return N(this,e,r);case"base64":return T(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function w(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function b(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Q(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:E(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):E(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function E(t,e,r,n,i){let s,o=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let n=-1;for(s=r;s<a;s++)if(u(t,s)===u(e,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(u(t,s+n)!==u(e,n)){r=!1;break}if(r)return s}return-1}function v(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=e.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(e.substr(2*o,2),16);if(Q(n))return o;t[r+o]=n}return o}function _(t,e,r,n){return Y(G(e,t.length-r),t,r,n)}function S(t,e,r,n){return Y(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function A(t,e,r,n){return Y(W(e),t,r,n)}function R(t,e,r,n){return Y(function(t,e){let r,n,i;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function T(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function I(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:e<128&&(s=e);break;case 2:r=t[i+1],128==(192&r)&&(c=(31&e)<<6|63&r,c>127&&(s=c));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(c=(15&e)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(t){const e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=C));return r}(n)}u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||void 0===n||"function"!=typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,r){return function(t,e,r){return h(t),t<=0?c(t):void 0!==e?"string"==typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}(t,e,r)},u.allocUnsafe=function(t){return d(t)},u.allocUnsafeSlow=function(t){return d(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(Z(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),Z(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=u.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(Z(e,Uint8Array))i+e.length>n.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)w(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const r=e.h2;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(t,e,r,n,i){if(Z(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0);const a=Math.min(s,o),c=this.slice(n,i),l=t.slice(e,r);for(let t=0;t<a;++t)if(c[t]!==l[t]){s=c[t],o=l[t];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return b(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return b(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":case"latin1":case"binary":return S(this,t,e,r);case"base64":return A(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function k(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function N(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function B(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=X[t[n]];return i}function P(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function L(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,r,n,i,s){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function O(t,e,r,n,i){K(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,r}function x(t,e,r,n,i){K(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s>>=8,t[r+6]=s,s>>=8,t[r+5]=s,s>>=8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o>>=8,t[r+2]=o,o>>=8,t[r+1]=o,o>>=8,t[r]=o,r+8}function U(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(t,e,r,n,i){return e=+e,r>>>=0,i||U(t,0,r,4),s.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return e=+e,r>>>=0,i||U(t,0,r,8),s.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=J((function(t){$(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=J((function(t){$(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=e,i=1,s=this[t+--n];for(;n>0&&(i*=256);)s+=this[t+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},u.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=J((function(t){$(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=J((function(t){$(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),s.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),s.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),s.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),s.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){D(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){D(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=J((function(t,e=0){return O(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=J((function(t,e=0){return x(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);D(this,t,e,r,n-1,-n)}let i=0,s=1,o=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);D(this,t,e,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=J((function(t,e=0){return O(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=J((function(t,e=0){return x(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,r){return M(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return M(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const s=u.isBuffer(t)?t:u.from(t,n),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=s[i%o]}return this};const j={};function F(t,e,r){j[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function z(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function K(t,e,r,n,i,s){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=s>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new j.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){$(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||q(e,t.length-(r+1))}(n,i,s)}function $(t,e){if("number"!=typeof t)throw new j.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,r){if(Math.floor(t)!==t)throw $(t,r),new j.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=z(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function G(t,e){let r;e=e||1/0;const n=t.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function W(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Q(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function J(t){return"undefined"==typeof BigInt?tt:t}function tt(){throw new Error("BigInt not supported")}},24244:function(t){"use strict";var e=function(t){return t!=t};t.exports=function(t,r){return 0===t&&0===r?1/t==1/r:t===r||!(!e(t)||!e(r))}},20609:function(t,e,r){"use strict";var n=r(4289),i=r(55559),s=r(24244),o=r(75624),a=r(52281),c=i(o(),Object);n(c,{getPolyfill:o,implementation:s,shim:a}),t.exports=c},75624:function(t,e,r){"use strict";var n=r(24244);t.exports=function(){return"function"==typeof Object.is?Object.is:n}},52281:function(t,e,r){"use strict";var n=r(75624),i=r(4289);t.exports=function(){var t=n();return i(Object,{is:t},{is:function(){return Object.is!==t}}),t}},18987:function(t,e,r){"use strict";var n;if(!Object.keys){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=r(21414),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),u=a.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();n=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===s.call(t),n=o(t),a=e&&"[object String]"===s.call(t),d=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var p=u&&r;if(a&&t.length>0&&!i.call(t,0))for(var g=0;g<t.length;++g)d.push(String(g));if(n&&t.length>0)for(var y=0;y<t.length;++y)d.push(String(y));else for(var m in t)p&&"prototype"===m||!i.call(t,m)||d.push(String(m));if(c)for(var w=function(t){if("undefined"==typeof window||!f)return h(t);try{return h(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)w&&"constructor"===l[b]||!i.call(t,l[b])||d.push(l[b]);return d}}t.exports=n},82215:function(t,e,r){"use strict";var n=Array.prototype.slice,i=r(21414),s=Object.keys,o=s?function(t){return s(t)}:r(18987),a=Object.keys;o.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?a(n.call(t)):a(t)})}else Object.keys=o;return Object.keys||o},t.exports=o},21414:function(t){"use strict";var e=Object.prototype.toString;t.exports=function(t){var r=e.call(t),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),n}},35103:function(t,e,r){const n=r(91607),i=r(50603);t.exports=class{constructor(){this._buffer=new n,this._waitingConsumers=new n}push(t){const{promise:e,resolve:r}=i();return this._buffer.push({chunk:t,resolve:r}),this._consume(),e}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){const t=this._waitingConsumers.shift(),e=this._buffer.shift();t.resolve(e.chunk),e.resolve()}}shift(){const{promise:t,resolve:e}=i();return this._waitingConsumers.push({resolve:e}),this._consume(),t}isEmpty(){return this._buffer.isEmpty()}}},50603:function(t){"use strict";t.exports=()=>{const t={};return t.promise=new Promise(((e,r)=>{t.resolve=e,t.reject=r})),t}},78939:function(t){"use strict";var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||t,o),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,i,s,o){var a=r?r+t:t;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,i),!0;case 5:return l.fn.call(l.context,e,n,i,s),!0;case 6:return l.fn.call(l.context,e,n,i,s,o),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;case 4:l[u].fn.call(l[u].context,e,n,i);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,i){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==e||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},88424:function(t,e,r){"use strict";r.d(e,{ZP:function(){return yr}});function n(t){let e=t.length;for(;--e>=0;)t[e]=0}const i=256,s=286,o=30,a=15,c=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new Array(576);n(d);const f=new Array(60);n(f);const p=new Array(512);n(p);const g=new Array(256);n(g);const y=new Array(29);n(y);const m=new Array(o);function w(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}let b,E,v;function _(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}n(m);const S=t=>t<256?p[t]:p[256+(t>>>7)],A=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},R=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,A(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},T=(t,e,r)=>{R(t,r[2*e],r[2*e+1])},I=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},C=(t,e,r)=>{const n=new Array(16);let i,s,o=0;for(i=1;i<=a;i++)o=o+r[i-1]<<1,n[i]=o;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=I(n[e]++,e))}},k=t=>{let e;for(e=0;e<s;e++)t.dyn_ltree[2*e]=0;for(e=0;e<o;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},N=t=>{t.bi_valid>8?A(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},B=(t,e,r,n)=>{const i=2*e,s=2*r;return t[i]<t[s]||t[i]===t[s]&&n[e]<=n[r]},P=(t,e,r)=>{const n=t.heap[r];let i=r<<1;for(;i<=t.heap_len&&(i<t.heap_len&&B(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!B(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},L=(t,e,r)=>{let n,s,o,a,l=0;if(0!==t.sym_next)do{n=255&t.pending_buf[t.sym_buf+l++],n+=(255&t.pending_buf[t.sym_buf+l++])<<8,s=t.pending_buf[t.sym_buf+l++],0===n?T(t,s,e):(o=g[s],T(t,o+i+1,e),a=c[o],0!==a&&(s-=y[o],R(t,s,a)),n--,o=S(n),T(t,o,r),a=u[o],0!==a&&(n-=m[o],R(t,n,a)))}while(l<t.sym_next);T(t,256,e)},D=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let o,c,u,l=-1;for(t.heap_len=0,t.heap_max=573,o=0;o<s;o++)0!==r[2*o]?(t.heap[++t.heap_len]=l=o,t.depth[o]=0):r[2*o+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=l<2?++l:0,r[2*u]=1,t.depth[u]=0,t.opt_len--,i&&(t.static_len-=n[2*u+1]);for(e.max_code=l,o=t.heap_len>>1;o>=1;o--)P(t,r,o);u=s;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],P(t,r,1),c=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=c,r[2*u]=r[2*o]+r[2*c],t.depth[u]=(t.depth[o]>=t.depth[c]?t.depth[o]:t.depth[c])+1,r[2*o+1]=r[2*c+1]=u,t.heap[1]=u++,P(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,u=e.stat_desc.max_length;let l,h,d,f,p,g,y=0;for(f=0;f<=a;f++)t.bl_count[f]=0;for(r[2*t.heap[t.heap_max]+1]=0,l=t.heap_max+1;l<573;l++)h=t.heap[l],f=r[2*r[2*h+1]+1]+1,f>u&&(f=u,y++),r[2*h+1]=f,h>n||(t.bl_count[f]++,p=0,h>=c&&(p=o[h-c]),g=r[2*h],t.opt_len+=g*(f+p),s&&(t.static_len+=g*(i[2*h+1]+p)));if(0!==y){do{for(f=u-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[u]--,y-=2}while(y>0);for(f=u;0!==f;f--)for(h=t.bl_count[f];0!==h;)d=t.heap[--l],d>n||(r[2*d+1]!==f&&(t.opt_len+=(f-r[2*d+1])*r[2*d],r[2*d+1]=f),h--)}})(t,e),C(r,l,t.bl_count)},O=(t,e,r)=>{let n,i,s=-1,o=e[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=e[2*(n+1)+1],++a<c&&i===o||(a<u?t.bl_tree[2*i]+=a:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))},x=(t,e,r)=>{let n,i,s=-1,o=e[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),n=0;n<=r;n++)if(i=o,o=e[2*(n+1)+1],!(++a<c&&i===o)){if(a<u)do{T(t,i,t.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(T(t,i,t.bl_tree),a--),T(t,16,t.bl_tree),R(t,a-3,2)):a<=10?(T(t,17,t.bl_tree),R(t,a-3,3)):(T(t,18,t.bl_tree),R(t,a-11,7));a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}};let U=!1;const M=(t,e,r,n)=>{R(t,0+(n?1:0),3),N(t),A(t,r),A(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r};var V=(t,e,r,n)=>{let s,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<i;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),D(t,t.l_desc),D(t,t.d_desc),a=(t=>{let e;for(O(t,t.dyn_ltree,t.l_desc.max_code),O(t,t.dyn_dtree,t.d_desc.max_code),D(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),s=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=s&&(s=o)):s=o=r+5,r+4<=s&&-1!==e?M(t,e,r,n):4===t.strategy||o===s?(R(t,2+(n?1:0),3),L(t,d,f)):(R(t,4+(n?1:0),3),((t,e,r,n)=>{let i;for(R(t,e-257,5),R(t,r-1,5),R(t,n-4,4),i=0;i<n;i++)R(t,t.bl_tree[2*h[i]+1],3);x(t,t.dyn_ltree,e-1),x(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),L(t,t.dyn_ltree,t.dyn_dtree)),k(t),n&&N(t)},j={_tr_init:t=>{U||((()=>{let t,e,r,n,i;const h=new Array(16);for(r=0,n=0;n<28;n++)for(y[n]=r,t=0;t<1<<c[n];t++)g[r++]=n;for(g[r-1]=n,i=0,n=0;n<16;n++)for(m[n]=i,t=0;t<1<<u[n];t++)p[i++]=n;for(i>>=7;n<o;n++)for(m[n]=i<<7,t=0;t<1<<u[n]-7;t++)p[256+i++]=n;for(e=0;e<=a;e++)h[e]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,h[8]++;for(;t<=255;)d[2*t+1]=9,t++,h[9]++;for(;t<=279;)d[2*t+1]=7,t++,h[7]++;for(;t<=287;)d[2*t+1]=8,t++,h[8]++;for(C(d,287,h),t=0;t<o;t++)f[2*t+1]=5,f[2*t]=I(t,5);b=new w(d,c,257,s,a),E=new w(f,u,0,o,a),v=new w(new Array(0),l,0,19,7)})(),U=!0),t.l_desc=new _(t.dyn_ltree,b),t.d_desc=new _(t.dyn_dtree,E),t.bl_desc=new _(t.bl_tree,v),t.bi_buf=0,t.bi_valid=0,k(t)},_tr_stored_block:M,_tr_flush_block:V,_tr_tally:(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(g[r]+i+1)]++,t.dyn_dtree[2*S(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{R(t,2,3),T(t,256,d),(t=>{16===t.bi_valid?(A(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var F=(t,e,r,n)=>{let i=65535&t|0,s=t>>>16&65535|0,o=0;for(;0!==r;){o=r>2e3?2e3:r,r-=o;do{i=i+e[n++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16|0};const z=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})());var K=(t,e,r,n)=>{const i=z,s=n+r;t^=-1;for(let r=n;r<s;r++)t=t>>>8^i[255&(t^e[r])];return-1^t},$={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},q={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:H,_tr_stored_block:G,_tr_flush_block:W,_tr_tally:Y,_tr_align:Z}=j,{Z_NO_FLUSH:Q,Z_PARTIAL_FLUSH:X,Z_FULL_FLUSH:J,Z_FINISH:tt,Z_BLOCK:et,Z_OK:rt,Z_STREAM_END:nt,Z_STREAM_ERROR:it,Z_DATA_ERROR:st,Z_BUF_ERROR:ot,Z_DEFAULT_COMPRESSION:at,Z_FILTERED:ct,Z_HUFFMAN_ONLY:ut,Z_RLE:lt,Z_FIXED:ht,Z_DEFAULT_STRATEGY:dt,Z_UNKNOWN:ft,Z_DEFLATED:pt}=q,gt=258,yt=262,mt=42,wt=113,bt=666,Et=(t,e)=>(t.msg=$[e],e),vt=t=>2*t-(t>4?9:0),_t=t=>{let e=t.length;for(;--e>=0;)t[e]=0},St=t=>{let e,r,n,i=t.w_size;e=t.hash_size,n=e;do{r=t.head[--n],t.head[n]=r>=i?r-i:0}while(--e);e=i,n=e;do{r=t.prev[--n],t.prev[n]=r>=i?r-i:0}while(--e)};let At=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask;const Rt=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},Tt=(t,e)=>{W(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Rt(t.strm)},It=(t,e)=>{t.pending_buf[t.pending++]=e},Ct=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},kt=(t,e,r,n)=>{let i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),1===t.state.wrap?t.adler=F(t.adler,e,i,r):2===t.state.wrap&&(t.adler=K(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},Nt=(t,e)=>{let r,n,i=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match;const c=t.strstart>t.w_size-yt?t.strstart-(t.w_size-yt):0,u=t.window,l=t.w_mask,h=t.prev,d=t.strstart+gt;let f=u[s+o-1],p=u[s+o];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(r=e,u[r+o]===p&&u[r+o-1]===f&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<d);if(n=gt-(d-s),s=d-gt,n>o){if(t.match_start=e,o=n,n>=a)break;f=u[s+o-1],p=u[s+o]}}}while((e=h[e&l])>c&&0!=--i);return o<=t.lookahead?o:t.lookahead},Bt=t=>{const e=t.w_size;let r,n,i;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-yt)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),St(t),n+=e),0===t.strm.avail_in)break;if(r=kt(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=At(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=At(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<yt&&0!==t.strm.avail_in)},Pt=(t,e)=>{let r,n,i,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,o=0,a=t.strm.avail_in;do{if(r=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i)break;if(i=t.strm.avail_out-i,n=t.strstart-t.block_start,r>n+t.strm.avail_in&&(r=n+t.strm.avail_in),r>i&&(r=i),r<s&&(0===r&&e!==tt||e===Q||r!==n+t.strm.avail_in))break;o=e===tt&&r===n+t.strm.avail_in?1:0,G(t,0,0,o),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,Rt(t.strm),n&&(n>r&&(n=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,r-=n),r&&(kt(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(0===o);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?4:e!==Q&&e!==tt&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(kt(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,s=i>t.w_size?t.w_size:i,n=t.strstart-t.block_start,(n>=s||(n||e===tt)&&e!==Q&&0===t.strm.avail_in&&n<=i)&&(r=n>i?i:n,o=e===tt&&0===t.strm.avail_in&&r===n?1:0,G(t,t.block_start,r,o),t.block_start+=r,Rt(t.strm)),o?3:1)},Lt=(t,e)=>{let r,n;for(;;){if(t.lookahead<yt){if(Bt(t),t.lookahead<yt&&e===Q)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=At(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-yt&&(t.match_length=Nt(t,r)),t.match_length>=3)if(n=Y(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=At(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=At(t,t.ins_h,t.window[t.strstart+1]);else n=Y(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Tt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===tt?(Tt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Tt(t,!1),0===t.strm.avail_out)?1:2},Dt=(t,e)=>{let r,n,i;for(;;){if(t.lookahead<yt){if(Bt(t),t.lookahead<yt&&e===Q)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=At(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-yt&&(t.match_length=Nt(t,r),t.match_length<=5&&(t.strategy===ct||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=Y(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=At(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Tt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=Y(t,0,t.window[t.strstart-1]),n&&Tt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Y(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===tt?(Tt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Tt(t,!1),0===t.strm.avail_out)?1:2};function Ot(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}const xt=[new Ot(0,0,0,0,Pt),new Ot(4,4,8,4,Lt),new Ot(4,5,16,8,Lt),new Ot(4,6,32,32,Lt),new Ot(4,4,16,16,Dt),new Ot(8,16,32,32,Dt),new Ot(8,16,128,128,Dt),new Ot(8,32,128,256,Dt),new Ot(32,128,258,1024,Dt),new Ot(32,258,258,4096,Dt)];function Ut(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),_t(this.dyn_ltree),_t(this.dyn_dtree),_t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),_t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),_t(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Mt=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==mt&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==wt&&e.status!==bt?1:0},Vt=t=>{if(Mt(t))return Et(t,it);t.total_in=t.total_out=0,t.data_type=ft;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?mt:wt,t.adler=2===e.wrap?0:1,e.last_flush=-2,H(e),rt},jt=t=>{const e=Vt(t);var r;return e===rt&&((r=t.state).window_size=2*r.w_size,_t(r.head),r.max_lazy_match=xt[r.level].max_lazy,r.good_match=xt[r.level].good_length,r.nice_match=xt[r.level].nice_length,r.max_chain_length=xt[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},Ft=(t,e,r,n,i,s)=>{if(!t)return it;let o=1;if(e===at&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>9||r!==pt||n<8||n>15||e<0||e>9||s<0||s>ht||8===n&&1!==o)return Et(t,it);8===n&&(n=9);const a=new Ut;return t.state=a,a.strm=t,a.status=mt,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=e,a.strategy=s,a.method=r,jt(t)};var zt={deflateInit:(t,e)=>Ft(t,e,pt,15,8,dt),deflateInit2:Ft,deflateReset:jt,deflateResetKeep:Vt,deflateSetHeader:(t,e)=>Mt(t)||2!==t.state.wrap?it:(t.state.gzhead=e,rt),deflate:(t,e)=>{if(Mt(t)||e>et||e<0)return t?Et(t,it):it;const r=t.state;if(!t.output||0!==t.avail_in&&!t.input||r.status===bt&&e!==tt)return Et(t,0===t.avail_out?ot:it);const n=r.last_flush;if(r.last_flush=e,0!==r.pending){if(Rt(t),0===t.avail_out)return r.last_flush=-1,rt}else if(0===t.avail_in&&vt(e)<=vt(n)&&e!==tt)return Et(t,ot);if(r.status===bt&&0!==t.avail_in)return Et(t,ot);if(r.status===mt&&0===r.wrap&&(r.status=wt),r.status===mt){let e=pt+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=ut||r.level<2?0:r.level<6?1:6===r.level?2:3,e|=n<<6,0!==r.strstart&&(e|=32),e+=31-e%31,Ct(r,e),0!==r.strstart&&(Ct(r,t.adler>>>16),Ct(r,65535&t.adler)),t.adler=1,r.status=wt,Rt(t),0!==r.pending)return r.last_flush=-1,rt}if(57===r.status)if(t.adler=0,It(r,31),It(r,139),It(r,8),r.gzhead)It(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),It(r,255&r.gzhead.time),It(r,r.gzhead.time>>8&255),It(r,r.gzhead.time>>16&255),It(r,r.gzhead.time>>24&255),It(r,9===r.level?2:r.strategy>=ut||r.level<2?4:0),It(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(It(r,255&r.gzhead.extra.length),It(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=K(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(It(r,0),It(r,0),It(r,0),It(r,0),It(r,0),It(r,9===r.level?2:r.strategy>=ut||r.level<2?4:0),It(r,3),r.status=wt,Rt(t),0!==r.pending)return r.last_flush=-1,rt;if(69===r.status){if(r.gzhead.extra){let e=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>e&&(t.adler=K(t.adler,r.pending_buf,r.pending-e,e)),r.gzindex+=i,Rt(t),0!==r.pending)return r.last_flush=-1,rt;e=0,n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>e&&(t.adler=K(t.adler,r.pending_buf,r.pending-e,e)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let e,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(t.adler=K(t.adler,r.pending_buf,r.pending-n,n)),Rt(t),0!==r.pending)return r.last_flush=-1,rt;n=0}e=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,It(r,e)}while(0!==e);r.gzhead.hcrc&&r.pending>n&&(t.adler=K(t.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let e,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(t.adler=K(t.adler,r.pending_buf,r.pending-n,n)),Rt(t),0!==r.pending)return r.last_flush=-1,rt;n=0}e=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,It(r,e)}while(0!==e);r.gzhead.hcrc&&r.pending>n&&(t.adler=K(t.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Rt(t),0!==r.pending))return r.last_flush=-1,rt;It(r,255&t.adler),It(r,t.adler>>8&255),t.adler=0}if(r.status=wt,Rt(t),0!==r.pending)return r.last_flush=-1,rt}if(0!==t.avail_in||0!==r.lookahead||e!==Q&&r.status!==bt){let n=0===r.level?Pt(r,e):r.strategy===ut?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(Bt(t),0===t.lookahead)){if(e===Q)return 1;break}if(t.match_length=0,r=Y(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Tt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===tt?(Tt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Tt(t,!1),0===t.strm.avail_out)?1:2})(r,e):r.strategy===lt?((t,e)=>{let r,n,i,s;const o=t.window;for(;;){if(t.lookahead<=gt){if(Bt(t),t.lookahead<=gt&&e===Q)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=t.strstart+gt;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);t.match_length=gt-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=Y(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Y(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Tt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===tt?(Tt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Tt(t,!1),0===t.strm.avail_out)?1:2})(r,e):xt[r.level].func(r,e);if(3!==n&&4!==n||(r.status=bt),1===n||3===n)return 0===t.avail_out&&(r.last_flush=-1),rt;if(2===n&&(e===X?Z(r):e!==et&&(G(r,0,0,!1),e===J&&(_t(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Rt(t),0===t.avail_out))return r.last_flush=-1,rt}return e!==tt?rt:r.wrap<=0?nt:(2===r.wrap?(It(r,255&t.adler),It(r,t.adler>>8&255),It(r,t.adler>>16&255),It(r,t.adler>>24&255),It(r,255&t.total_in),It(r,t.total_in>>8&255),It(r,t.total_in>>16&255),It(r,t.total_in>>24&255)):(Ct(r,t.adler>>>16),Ct(r,65535&t.adler)),Rt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?rt:nt)},deflateEnd:t=>{if(Mt(t))return it;const e=t.state.status;return t.state=null,e===wt?Et(t,st):rt},deflateSetDictionary:(t,e)=>{let r=e.length;if(Mt(t))return it;const n=t.state,i=n.wrap;if(2===i||1===i&&n.status!==mt||n.lookahead)return it;if(1===i&&(t.adler=F(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){0===i&&(_t(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(r-n.w_size,r),0),e=t,r=n.w_size}const s=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,Bt(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=At(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,Bt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=o,t.input=a,t.avail_in=s,n.wrap=i,rt},deflateInfo:"pako deflate (from Nodeca project)"};const Kt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var $t={assign:function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const e in r)Kt(r,e)&&(t[e]=r[e])}}return t},flattenChunks:t=>{let e=0;for(let r=0,n=t.length;r<n;r++)e+=t[r].length;const r=new Uint8Array(e);for(let e=0,n=0,i=t.length;e<i;e++){let i=t[e];r.set(i,n),n+=i.length}return r}};let qt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){qt=!1}const Ht=new Uint8Array(256);for(let t=0;t<256;t++)Ht[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Ht[254]=Ht[254]=1;var Gt={string2buf:t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,r,n,i,s,o=t.length,a=0;for(i=0;i<o;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|63&r):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},buf2string:(t,e)=>{const r=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let n,i;const s=new Array(2*r);for(i=0,n=0;n<r;){let e=t[n++];if(e<128){s[i++]=e;continue}let o=Ht[e];if(o>4)s[i++]=65533,n+=o-1;else{for(e&=2===o?31:3===o?15:7;o>1&&n<r;)e=e<<6|63&t[n++],o--;o>1?s[i++]=65533:e<65536?s[i++]=e:(e-=65536,s[i++]=55296|e>>10&1023,s[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&qt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r})(s,i)},utf8border:(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+Ht[t[r]]>e?r:e}};var Wt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Yt=Object.prototype.toString,{Z_NO_FLUSH:Zt,Z_SYNC_FLUSH:Qt,Z_FULL_FLUSH:Xt,Z_FINISH:Jt,Z_OK:te,Z_STREAM_END:ee,Z_DEFAULT_COMPRESSION:re,Z_DEFAULT_STRATEGY:ne,Z_DEFLATED:ie}=q;function se(t){this.options=$t.assign({level:re,method:ie,chunkSize:16384,windowBits:15,memLevel:8,strategy:ne},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Wt,this.strm.avail_out=0;let r=zt.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==te)throw new Error($[r]);if(e.header&&zt.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Gt.string2buf(e.dictionary):"[object ArrayBuffer]"===Yt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=zt.deflateSetDictionary(this.strm,t),r!==te)throw new Error($[r]);this._dict_set=!0}}function oe(t,e){const r=new se(e);if(r.push(t,!0),r.err)throw r.msg||$[r.err];return r.result}se.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Jt:Zt,"string"==typeof t?r.input=Gt.string2buf(t):"[object ArrayBuffer]"===Yt.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(s===Qt||s===Xt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=zt.deflate(r,s),i===ee)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=zt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===te;if(0!==r.avail_out){if(s>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},se.prototype.onData=function(t){this.chunks.push(t)},se.prototype.onEnd=function(t){t===te&&(this.result=$t.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ae={Deflate:se,deflate:oe,deflateRaw:function(t,e){return(e=e||{}).raw=!0,oe(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,oe(t,e)},constants:q};const ce=16209;var ue=function(t,e){let r,n,i,s,o,a,c,u,l,h,d,f,p,g,y,m,w,b,E,v,_,S,A,R;const T=t.state;r=t.next_in,A=t.input,n=r+(t.avail_in-5),i=t.next_out,R=t.output,s=i-(e-t.avail_out),o=i+(t.avail_out-257),a=T.dmax,c=T.wsize,u=T.whave,l=T.wnext,h=T.window,d=T.hold,f=T.bits,p=T.lencode,g=T.distcode,y=(1<<T.lenbits)-1,m=(1<<T.distbits)-1;t:do{f<15&&(d+=A[r++]<<f,f+=8,d+=A[r++]<<f,f+=8),w=p[d&y];e:for(;;){if(b=w>>>24,d>>>=b,f-=b,b=w>>>16&255,0===b)R[i++]=65535&w;else{if(!(16&b)){if(0==(64&b)){w=p[(65535&w)+(d&(1<<b)-1)];continue e}if(32&b){T.mode=16191;break t}t.msg="invalid literal/length code",T.mode=ce;break t}E=65535&w,b&=15,b&&(f<b&&(d+=A[r++]<<f,f+=8),E+=d&(1<<b)-1,d>>>=b,f-=b),f<15&&(d+=A[r++]<<f,f+=8,d+=A[r++]<<f,f+=8),w=g[d&m];r:for(;;){if(b=w>>>24,d>>>=b,f-=b,b=w>>>16&255,!(16&b)){if(0==(64&b)){w=g[(65535&w)+(d&(1<<b)-1)];continue r}t.msg="invalid distance code",T.mode=ce;break t}if(v=65535&w,b&=15,f<b&&(d+=A[r++]<<f,f+=8,f<b&&(d+=A[r++]<<f,f+=8)),v+=d&(1<<b)-1,v>a){t.msg="invalid distance too far back",T.mode=ce;break t}if(d>>>=b,f-=b,b=i-s,v>b){if(b=v-b,b>u&&T.sane){t.msg="invalid distance too far back",T.mode=ce;break t}if(_=0,S=h,0===l){if(_+=c-b,b<E){E-=b;do{R[i++]=h[_++]}while(--b);_=i-v,S=R}}else if(l<b){if(_+=c+l-b,b-=l,b<E){E-=b;do{R[i++]=h[_++]}while(--b);if(_=0,l<E){b=l,E-=b;do{R[i++]=h[_++]}while(--b);_=i-v,S=R}}}else if(_+=l-b,b<E){E-=b;do{R[i++]=h[_++]}while(--b);_=i-v,S=R}for(;E>2;)R[i++]=S[_++],R[i++]=S[_++],R[i++]=S[_++],E-=3;E&&(R[i++]=S[_++],E>1&&(R[i++]=S[_++]))}else{_=i-v;do{R[i++]=R[_++],R[i++]=R[_++],R[i++]=R[_++],E-=3}while(E>2);E&&(R[i++]=R[_++],E>1&&(R[i++]=R[_++]))}break}}break}}while(r<n&&i<o);E=f>>3,r-=E,f-=E<<3,d&=(1<<f)-1,t.next_in=r,t.next_out=i,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=i<o?o-i+257:257-(i-o),T.hold=d,T.bits=f};const le=15,he=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),de=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ge=(t,e,r,n,i,s,o,a)=>{const c=a.bits;let u,l,h,d,f,p,g=0,y=0,m=0,w=0,b=0,E=0,v=0,_=0,S=0,A=0,R=null;const T=new Uint16Array(16),I=new Uint16Array(16);let C,k,N,B=null;for(g=0;g<=le;g++)T[g]=0;for(y=0;y<n;y++)T[e[r+y]]++;for(b=c,w=le;w>=1&&0===T[w];w--);if(b>w&&(b=w),0===w)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(m=1;m<w&&0===T[m];m++);for(b<m&&(b=m),_=1,g=1;g<=le;g++)if(_<<=1,_-=T[g],_<0)return-1;if(_>0&&(0===t||1!==w))return-1;for(I[1]=0,g=1;g<le;g++)I[g+1]=I[g]+T[g];for(y=0;y<n;y++)0!==e[r+y]&&(o[I[e[r+y]]++]=y);if(0===t?(R=B=o,p=20):1===t?(R=he,B=de,p=257):(R=fe,B=pe,p=0),A=0,y=0,g=m,f=s,E=b,v=0,h=-1,S=1<<b,d=S-1,1===t&&S>852||2===t&&S>592)return 1;for(;;){C=g-v,o[y]+1<p?(k=0,N=o[y]):o[y]>=p?(k=B[o[y]-p],N=R[o[y]-p]):(k=96,N=0),u=1<<g-v,l=1<<E,m=l;do{l-=u,i[f+(A>>v)+l]=C<<24|k<<16|N|0}while(0!==l);for(u=1<<g-1;A&u;)u>>=1;if(0!==u?(A&=u-1,A+=u):A=0,y++,0==--T[g]){if(g===w)break;g=e[r+o[y]]}if(g>b&&(A&d)!==h){for(0===v&&(v=b),f+=m,E=g-v,_=1<<E;E+v<w&&(_-=T[E+v],!(_<=0));)E++,_<<=1;if(S+=1<<E,1===t&&S>852||2===t&&S>592)return 1;h=A&d,i[h]=b<<24|E<<16|f-s|0}}return 0!==A&&(i[f+A]=g-v<<24|64<<16|0),a.bits=b,0};const{Z_FINISH:ye,Z_BLOCK:me,Z_TREES:we,Z_OK:be,Z_STREAM_END:Ee,Z_NEED_DICT:ve,Z_STREAM_ERROR:_e,Z_DATA_ERROR:Se,Z_MEM_ERROR:Ae,Z_BUF_ERROR:Re,Z_DEFLATED:Te}=q,Ie=16180,Ce=16190,ke=16191,Ne=16192,Be=16194,Pe=16199,Le=16200,De=16206,Oe=16209,xe=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Ue(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Me=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ie||e.mode>16211?1:0},Ve=t=>{if(Me(t))return _e;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=Ie,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,be},je=t=>{if(Me(t))return _e;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Ve(t)},Fe=(t,e)=>{let r;if(Me(t))return _e;const n=t.state;return e<0?(r=0,e=-e):(r=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_e:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,je(t))},ze=(t,e)=>{if(!t)return _e;const r=new Ue;t.state=r,r.strm=t,r.window=null,r.mode=Ie;const n=Fe(t,e);return n!==be&&(t.state=null),n};let Ke,$e,qe=!0;const He=t=>{if(qe){Ke=new Int32Array(512),$e=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ge(1,t.lens,0,288,Ke,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ge(2,t.lens,0,32,$e,0,t.work,{bits:5}),qe=!1}t.lencode=Ke,t.lenbits=9,t.distcode=$e,t.distbits=5},Ge=(t,e,r,n)=>{let i;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(r-n,r-n+i),s.wnext),(n-=i)?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var We={inflateReset:je,inflateReset2:Fe,inflateResetKeep:Ve,inflateInit:t=>ze(t,15),inflateInit2:ze,inflate:(t,e)=>{let r,n,i,s,o,a,c,u,l,h,d,f,p,g,y,m,w,b,E,v,_,S,A=0;const R=new Uint8Array(4);let T,I;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Me(t)||!t.output||!t.input&&0!==t.avail_in)return _e;r=t.state,r.mode===ke&&(r.mode=Ne),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,n=t.input,a=t.avail_in,u=r.hold,l=r.bits,h=a,d=c,S=be;t:for(;;)switch(r.mode){case Ie:if(0===r.wrap){r.mode=Ne;break}for(;l<16;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(2&r.wrap&&35615===u){0===r.wbits&&(r.wbits=15),r.check=0,R[0]=255&u,R[1]=u>>>8&255,r.check=K(r.check,R,2,0),u=0,l=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Oe;break}if((15&u)!==Te){t.msg="unknown compression method",r.mode=Oe;break}if(u>>>=4,l-=4,_=8+(15&u),0===r.wbits&&(r.wbits=_),_>15||_>r.wbits){t.msg="invalid window size",r.mode=Oe;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=512&u?16189:ke,u=0,l=0;break;case 16181:for(;l<16;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(r.flags=u,(255&r.flags)!==Te){t.msg="unknown compression method",r.mode=Oe;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=Oe;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&4&r.wrap&&(R[0]=255&u,R[1]=u>>>8&255,r.check=K(r.check,R,2,0)),u=0,l=0,r.mode=16182;case 16182:for(;l<32;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&4&r.wrap&&(R[0]=255&u,R[1]=u>>>8&255,R[2]=u>>>16&255,R[3]=u>>>24&255,r.check=K(r.check,R,4,0)),u=0,l=0,r.mode=16183;case 16183:for(;l<16;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&4&r.wrap&&(R[0]=255&u,R[1]=u>>>8&255,r.check=K(r.check,R,2,0)),u=0,l=0,r.mode=16184;case 16184:if(1024&r.flags){for(;l<16;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&4&r.wrap&&(R[0]=255&u,R[1]=u>>>8&255,r.check=K(r.check,R,2,0)),u=0,l=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(f=r.length,f>a&&(f=a),f&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+f),_)),512&r.flags&&4&r.wrap&&(r.check=K(r.check,n,f,s)),a-=f,s+=f,r.length-=f),r.length))break t;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===a)break t;f=0;do{_=n[s+f++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_))}while(_&&f<a);if(512&r.flags&&4&r.wrap&&(r.check=K(r.check,n,f,s)),a-=f,s+=f,_)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===a)break t;f=0;do{_=n[s+f++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_))}while(_&&f<a);if(512&r.flags&&4&r.wrap&&(r.check=K(r.check,n,f,s)),a-=f,s+=f,_)break t}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;l<16;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(4&r.wrap&&u!==(65535&r.check)){t.msg="header crc mismatch",r.mode=Oe;break}u=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=ke;break;case 16189:for(;l<32;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}t.adler=r.check=xe(u),u=0,l=0,r.mode=Ce;case Ce:if(0===r.havedict)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=l,ve;t.adler=r.check=1,r.mode=ke;case ke:if(e===me||e===we)break t;case Ne:if(r.last){u>>>=7&l,l-=7&l,r.mode=De;break}for(;l<3;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}switch(r.last=1&u,u>>>=1,l-=1,3&u){case 0:r.mode=16193;break;case 1:if(He(r),r.mode=Pe,e===we){u>>>=2,l-=2;break t}break;case 2:r.mode=16196;break;case 3:t.msg="invalid block type",r.mode=Oe}u>>>=2,l-=2;break;case 16193:for(u>>>=7&l,l-=7&l;l<32;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Oe;break}if(r.length=65535&u,u=0,l=0,r.mode=Be,e===we)break t;case Be:r.mode=16195;case 16195:if(f=r.length,f){if(f>a&&(f=a),f>c&&(f=c),0===f)break t;i.set(n.subarray(s,s+f),o),a-=f,s+=f,c-=f,o+=f,r.length-=f;break}r.mode=ke;break;case 16196:for(;l<14;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Oe;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;l<3;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}r.lens[C[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[C[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,T={bits:r.lenbits},S=ge(0,r.lens,0,19,r.lencode,0,r.work,T),r.lenbits=T.bits,S){t.msg="invalid code lengths set",r.mode=Oe;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;A=r.lencode[u&(1<<r.lenbits)-1],y=A>>>24,m=A>>>16&255,w=65535&A,!(y<=l);){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(w<16)u>>>=y,l-=y,r.lens[r.have++]=w;else{if(16===w){for(I=y+2;l<I;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(u>>>=y,l-=y,0===r.have){t.msg="invalid bit length repeat",r.mode=Oe;break}_=r.lens[r.have-1],f=3+(3&u),u>>>=2,l-=2}else if(17===w){for(I=y+3;l<I;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}u>>>=y,l-=y,_=0,f=3+(7&u),u>>>=3,l-=3}else{for(I=y+7;l<I;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}u>>>=y,l-=y,_=0,f=11+(127&u),u>>>=7,l-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Oe;break}for(;f--;)r.lens[r.have++]=_}}if(r.mode===Oe)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=Oe;break}if(r.lenbits=9,T={bits:r.lenbits},S=ge(1,r.lens,0,r.nlen,r.lencode,0,r.work,T),r.lenbits=T.bits,S){t.msg="invalid literal/lengths set",r.mode=Oe;break}if(r.distbits=6,r.distcode=r.distdyn,T={bits:r.distbits},S=ge(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T),r.distbits=T.bits,S){t.msg="invalid distances set",r.mode=Oe;break}if(r.mode=Pe,e===we)break t;case Pe:r.mode=Le;case Le:if(a>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=l,ue(t,d),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,n=t.input,a=t.avail_in,u=r.hold,l=r.bits,r.mode===ke&&(r.back=-1);break}for(r.back=0;A=r.lencode[u&(1<<r.lenbits)-1],y=A>>>24,m=A>>>16&255,w=65535&A,!(y<=l);){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(m&&0==(240&m)){for(b=y,E=m,v=w;A=r.lencode[v+((u&(1<<b+E)-1)>>b)],y=A>>>24,m=A>>>16&255,w=65535&A,!(b+y<=l);){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}u>>>=b,l-=b,r.back+=b}if(u>>>=y,l-=y,r.back+=y,r.length=w,0===m){r.mode=16205;break}if(32&m){r.back=-1,r.mode=ke;break}if(64&m){t.msg="invalid literal/length code",r.mode=Oe;break}r.extra=15&m,r.mode=16201;case 16201:if(r.extra){for(I=r.extra;l<I;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;A=r.distcode[u&(1<<r.distbits)-1],y=A>>>24,m=A>>>16&255,w=65535&A,!(y<=l);){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(0==(240&m)){for(b=y,E=m,v=w;A=r.distcode[v+((u&(1<<b+E)-1)>>b)],y=A>>>24,m=A>>>16&255,w=65535&A,!(b+y<=l);){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}u>>>=b,l-=b,r.back+=b}if(u>>>=y,l-=y,r.back+=y,64&m){t.msg="invalid distance code",r.mode=Oe;break}r.offset=w,r.extra=15&m,r.mode=16203;case 16203:if(r.extra){for(I=r.extra;l<I;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Oe;break}r.mode=16204;case 16204:if(0===c)break t;if(f=d-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Oe;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),g=r.window}else g=i,p=o-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do{i[o++]=g[p++]}while(--f);0===r.length&&(r.mode=Le);break;case 16205:if(0===c)break t;i[o++]=r.length,c--,r.mode=Le;break;case De:if(r.wrap){for(;l<32;){if(0===a)break t;a--,u|=n[s++]<<l,l+=8}if(d-=c,t.total_out+=d,r.total+=d,4&r.wrap&&d&&(t.adler=r.check=r.flags?K(r.check,i,d,o-d):F(r.check,i,d,o-d)),d=c,4&r.wrap&&(r.flags?u:xe(u))!==r.check){t.msg="incorrect data check",r.mode=Oe;break}u=0,l=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;l<32;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(4&r.wrap&&u!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=Oe;break}u=0,l=0}r.mode=16208;case 16208:S=Ee;break t;case Oe:S=Se;break t;case 16210:return Ae;default:return _e}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=l,(r.wsize||d!==t.avail_out&&r.mode<Oe&&(r.mode<De||e!==ye))&&Ge(t,t.output,t.next_out,d-t.avail_out),h-=t.avail_in,d-=t.avail_out,t.total_in+=h,t.total_out+=d,r.total+=d,4&r.wrap&&d&&(t.adler=r.check=r.flags?K(r.check,i,d,t.next_out-d):F(r.check,i,d,t.next_out-d)),t.data_type=r.bits+(r.last?64:0)+(r.mode===ke?128:0)+(r.mode===Pe||r.mode===Be?256:0),(0===h&&0===d||e===ye)&&S===be&&(S=Re),S},inflateEnd:t=>{if(Me(t))return _e;let e=t.state;return e.window&&(e.window=null),t.state=null,be},inflateGetHeader:(t,e)=>{if(Me(t))return _e;const r=t.state;return 0==(2&r.wrap)?_e:(r.head=e,e.done=!1,be)},inflateSetDictionary:(t,e)=>{const r=e.length;let n,i,s;return Me(t)?_e:(n=t.state,0!==n.wrap&&n.mode!==Ce?_e:n.mode===Ce&&(i=1,i=F(i,e,r,0),i!==n.check)?Se:(s=Ge(t,e,r,r),s?(n.mode=16210,Ae):(n.havedict=1,be)))},inflateInfo:"pako inflate (from Nodeca project)"};var Ye=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ze=Object.prototype.toString,{Z_NO_FLUSH:Qe,Z_FINISH:Xe,Z_OK:Je,Z_STREAM_END:tr,Z_NEED_DICT:er,Z_STREAM_ERROR:rr,Z_DATA_ERROR:nr,Z_MEM_ERROR:ir}=q;function sr(t){this.options=$t.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Wt,this.strm.avail_out=0;let r=We.inflateInit2(this.strm,e.windowBits);if(r!==Je)throw new Error($[r]);if(this.header=new Ye,We.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Gt.string2buf(e.dictionary):"[object ArrayBuffer]"===Ze.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=We.inflateSetDictionary(this.strm,e.dictionary),r!==Je)))throw new Error($[r])}function or(t,e){const r=new sr(e);if(r.push(t),r.err)throw r.msg||$[r.err];return r.result}sr.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=e===~~e?e:!0===e?Xe:Qe,"[object ArrayBuffer]"===Ze.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=We.inflate(r,o),s===er&&i&&(s=We.inflateSetDictionary(r,i),s===Je?s=We.inflate(r,o):s===nr&&(s=er));r.avail_in>0&&s===tr&&r.state.wrap>0&&0!==t[r.next_in];)We.inflateReset(r),s=We.inflate(r,o);switch(s){case rr:case nr:case er:case ir:return this.onEnd(s),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||s===tr))if("string"===this.options.to){let t=Gt.utf8border(r.output,r.next_out),e=r.next_out-t,i=Gt.buf2string(r.output,t);r.next_out=e,r.avail_out=n-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==Je||0!==a){if(s===tr)return s=We.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},sr.prototype.onData=function(t){this.chunks.push(t)},sr.prototype.onEnd=function(t){t===Je&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=$t.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ar={Inflate:sr,inflate:or,inflateRaw:function(t,e){return(e=e||{}).raw=!0,or(t,e)},ungzip:or,constants:q};const{Deflate:cr,deflate:ur,deflateRaw:lr,gzip:hr}=ae,{Inflate:dr,inflate:fr,inflateRaw:pr,ungzip:gr}=ar;var yr={Deflate:cr,deflate:ur,deflateRaw:lr,gzip:hr,Inflate:dr,inflate:fr,inflateRaw:pr,ungzip:gr,constants:q}},90072:function(t,e){"use strict";let r=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/giu;function n(t="",e="ms"){var n=null;return(t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2")).replace(r,(function(t,e,r){(r=i(r))&&(n=(n||0)+parseFloat(e,10)*r)})),n&&n/(i(e)||1)}function i(t){return n[t]||n[t.toLowerCase().replace(/s$/,"")]}n.nanosecond=n.ns=1e-6,n["s"]=n["s"]=n.us=n.microsecond=.001,n.millisecond=n.ms=n[""]=1,n.second=n.sec=n.s=1e3*n.ms,n.minute=n.min=n.m=60*n.s,n.hour=n.hr=n.h=60*n.m,n.day=n.d=24*n.h,n.week=n.wk=n.w=7*n.d,n.month=n.b=30.4375*n.d,n.year=n.yr=n.y=365.25*n.d,e.Z=n},34155:function(t){var e,r,n=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var a,c=[],u=!1,l=-1;function h(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&d())}function d(){if(!u){var t=o(h);u=!0;for(var e=c.length;e;){for(a=c,c=[];++l<e;)a&&a[l].run();l=-1,e=c.length}a=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new f(t,e)),1!==c.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},62100:function(t,e,r){"use strict";t.exports=r(89482)},89482:function(t,e,r){"use strict";var n=e;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(41173),n.BufferWriter=r(43155),n.Reader=r(51408),n.BufferReader=r(50593),n.util=r(99693),n.rpc=r(35994),n.roots=r(85054),n.configure=i,i()},51408:function(t,e,r){"use strict";t.exports=c;var n,i=r(99693),s=i.LongBits,o=i.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function c(t){this.buf=t,this.pos=0,this.len=t.length}var u,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new c(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new c(t);throw Error("illegal buffer")},h=function(){return i.Buffer?function(t){return(c.create=function(t){return i.Buffer.isBuffer(t)?new n(t):l(t)})(t)}:l};function d(){var t=new s(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function f(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new s(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=h(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},c.prototype.bytes=function(){var t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,r):e===r?new this.buf.constructor(0):this._slice.call(this.buf,e,r)},c.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},c.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},c._configure=function(t){n=t,c.create=h(),n._configure();var e=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return d.call(this)[e](!1)},uint64:function(){return d.call(this)[e](!0)},sint64:function(){return d.call(this).zzDecode()[e](!1)},fixed64:function(){return p.call(this)[e](!0)},sfixed64:function(){return p.call(this)[e](!1)}})}},50593:function(t,e,r){"use strict";t.exports=s;var n=r(51408);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(99693);function s(t){n.call(this,t)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},s._configure()},85054:function(t){"use strict";t.exports={}},35994:function(t,e,r){"use strict";e.Service=r(77948)},77948:function(t,e,r){"use strict";t.exports=i;var n=r(99693);function i(t,e,r){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function t(e,r,i,s,o){if(!s)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(t,a,e,r,i,s);if(a.rpcImpl)try{return a.rpcImpl(e,r[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(t,r){if(t)return a.emit("error",t,e),o(t);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(t){return a.emit("error",t,e),o(t)}return a.emit("data",r,e),o(null,r)}a.end(!0)}))}catch(t){return a.emit("error",t,e),void setTimeout((function(){o(t)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:function(t,e,r){"use strict";t.exports=i;var n=r(99693);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return s;var e=t<0;e&&(t=-t);var r=t>>>0,n=(t-r)/4294967296>>>0;return e&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(t){if("number"==typeof t)return i.fromNumber(t);if(n.isString(t)){if(!n.Long)return i.fromNumber(parseInt(t,10));t=n.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):s},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;i.fromHash=function(t){return t===o?s:new i((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10}},99693:function(t,e,r){"use strict";var n=e;function i(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)void 0!==t[n[i]]&&r||(t[n[i]]=e[n[i]]);return t}function s(t){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}n.asPromise=r(34537),n.base64=r(97419),n.EventEmitter=r(19211),n.float=r(10945),n.inquire=r(67199),n.utf8=r(94997),n.pool=r(76662),n.LongBits=r(1945),n.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"==typeof t},n.isset=n.isSet=function(t,e){var r=t[e];return!(null==r||!t.hasOwnProperty(e))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,e){var r=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},n.merge=i,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;r>-1;--r)if(1===e[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},n.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},n._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},41173:function(t,e,r){"use strict";t.exports=h;var n,i=r(99693),s=i.LongBits,o=i.base64,a=i.utf8;function c(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function u(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function h(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};function f(t,e,r){e[r]=255&t}function p(t,e){this.len=t,this.next=void 0,this.val=e}function g(t,e,r){for(;t.hi;)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function y(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}h.create=d(),h.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(t,e,r){return this.tail=this.tail.next=new c(t,e,r),this.len+=e,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(t,e,r){for(;t>127;)e[r++]=127&t|128,t>>>=7;e[r]=t},h.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new p((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},h.prototype.int32=function(t){return t<0?this._push(g,10,s.fromNumber(t)):this.uint32(t)},h.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},h.prototype.uint64=function(t){var e=s.from(t);return this._push(g,e.length(),e)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(t){var e=s.from(t).zzEncode();return this._push(g,e.length(),e)},h.prototype.bool=function(t){return this._push(f,1,t?1:0)},h.prototype.fixed32=function(t){return this._push(y,4,t>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(t){var e=s.from(t);return this._push(y,4,e.lo)._push(y,4,e.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},h.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var m=i.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var n=0;n<t.length;++n)e[r+n]=t[n]};h.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(f,1,0);if(i.isString(t)){var r=h.alloc(e=o.length(t));o.decode(t,r,0),t=r}return this.uint32(e)._push(m,e,t)},h.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},h.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},h.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},h._configure=function(t){n=t,h.create=d(),n._configure()}},43155:function(t,e,r){"use strict";t.exports=s;var n=r(41173);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(99693);function s(){n.call(this)}function o(t,e,r){t.length<40?i.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]}},s.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(s.writeBytesBuffer,e,t),this},s.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(o,e,t),this},s._configure()},7364:function(t,e,r){"use strict";t.exports=c;var n,i=r(98360),s=i.LongBits,o=i.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function c(t){this.buf=t,this.pos=0,this.len=t.length}var u,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new c(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new c(t);throw Error("illegal buffer")},h=function(){return i.Buffer?function(t){return(c.create=function(t){return i.Buffer.isBuffer(t)?new n(t):l(t)})(t)}:l};function d(){var t=new s(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function f(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new s(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=h(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},c.prototype.bytes=function(){var t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,r):e===r?new this.buf.constructor(0):this._slice.call(this.buf,e,r)},c.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},c.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},c._configure=function(t){n=t,c.create=h(),n._configure();var e=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return d.call(this)[e](!1)},uint64:function(){return d.call(this)[e](!0)},sint64:function(){return d.call(this).zzDecode()[e](!1)},fixed64:function(){return p.call(this)[e](!0)},sfixed64:function(){return p.call(this)[e](!1)}})}},40922:function(t,e,r){"use strict";t.exports=s;var n=r(7364);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(98360);function s(t){n.call(this,t)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},s._configure()},81969:function(t,e,r){"use strict";t.exports=i;var n=r(98360);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return s;var e=t<0;e&&(t=-t);var r=t>>>0,n=(t-r)/4294967296>>>0;return e&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(t){if("number"==typeof t)return i.fromNumber(t);if(n.isString(t)){if(!n.Long)return i.fromNumber(parseInt(t,10));t=n.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):s},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;i.fromHash=function(t){return t===o?s:new i((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10}},98360:function(t,e,r){"use strict";var n=e;function i(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)void 0!==t[n[i]]&&r||(t[n[i]]=e[n[i]]);return t}function s(t){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}n.asPromise=r(34537),n.base64=r(97419),n.EventEmitter=r(19211),n.float=r(10945),n.inquire=r(67199),n.utf8=r(94997),n.pool=r(76662),n.LongBits=r(81969),n.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"==typeof t},n.isset=n.isSet=function(t,e){var r=t[e];return!(null==r||!t.hasOwnProperty(e))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,e){var r=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},n.merge=i,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;r>-1;--r)if(1===e[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},n.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},n._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},50062:function(t,e,r){"use strict";t.exports=h;var n,i=r(98360),s=i.LongBits,o=i.base64,a=i.utf8;function c(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function u(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function h(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};function f(t,e,r){e[r]=255&t}function p(t,e){this.len=t,this.next=void 0,this.val=e}function g(t,e,r){for(;t.hi;)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function y(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}h.create=d(),h.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(t,e,r){return this.tail=this.tail.next=new c(t,e,r),this.len+=e,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(t,e,r){for(;t>127;)e[r++]=127&t|128,t>>>=7;e[r]=t},h.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new p((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},h.prototype.int32=function(t){return t<0?this._push(g,10,s.fromNumber(t)):this.uint32(t)},h.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},h.prototype.uint64=function(t){var e=s.from(t);return this._push(g,e.length(),e)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(t){var e=s.from(t).zzEncode();return this._push(g,e.length(),e)},h.prototype.bool=function(t){return this._push(f,1,t?1:0)},h.prototype.fixed32=function(t){return this._push(y,4,t>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(t){var e=s.from(t);return this._push(y,4,e.lo)._push(y,4,e.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},h.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var m=i.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var n=0;n<t.length;++n)e[r+n]=t[n]};h.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(f,1,0);if(i.isString(t)){var r=h.alloc(e=o.length(t));o.decode(t,r,0),t=r}return this.uint32(e)._push(m,e,t)},h.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},h.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},h.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},h._configure=function(t){n=t,h.create=d(),n._configure()}},89157:function(t,e,r){"use strict";t.exports=s;var n=r(50062);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(98360);function s(){n.call(this)}function o(t,e,r){t.length<40?i.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]}},s.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(s.writeBytesBuffer,e,t),this},s.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(o,e,t),this},s._configure()},54375:function(t,e,r){let n;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:r.g):t=>(n||(n=Promise.resolve())).then(t).catch((t=>setTimeout((()=>{throw t}),0)))},33286:function(t,e,r){const{instantiate:n}=r(19824);function i(t={}){if(!i.supported)return null;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return n(new Response(new Blob([e],{type:"application/wasm"})),t)}i.supported="undefined"!=typeof WebAssembly,t.exports=i},63060:function(t,e,r){const n=r(57118),i=r(33286);t.exports={Rabin:n,create:async(t,e,r,s,o)=>{const a=await i();return new n(a,t,e,r,s,o)}}},57118:function(t){t.exports=class{constructor(t,e=12,r=8192,n=32768,i=64,s){this.bits=e,this.min=r,this.max=n,this.asModule=t,this.rabin=new t.Rabin(e,r,n,i,s),this.polynomial=s}fingerprint(t){const{__retain:e,__release:r,__allocArray:n,__getInt32Array:i,Int32Array_ID:s,Uint8Array_ID:o}=this.asModule,a=e(n(s,new Int32Array(Math.ceil(t.length/this.min)))),c=e(n(o,t)),u=i(this.rabin.fingerprint(c,a));r(c),r(a);const l=u.indexOf(0);return l>=0?u.subarray(0,l):u}}},61798:function(t,e,r){"use strict";var n=r(34155),i=65536,s=4294967295;var o=r(89509).Buffer,a=r.g.crypto||r.g.msCrypto;a&&a.getRandomValues?t.exports=function(t,e){if(t>s)throw new RangeError("requested too many random bytes");var r=o.allocUnsafe(t);if(t>0)if(t>i)for(var c=0;c<t;c+=i)a.getRandomValues(r.slice(c,c+i));else a.getRandomValues(r);if("function"==typeof e)return n.nextTick((function(){e(null,r)}));return r}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},8558:function(t,e,r){const n=r(14636),i=r(81391),s=r(54156),o=r(4832),{RateLimiterClusterMaster:a,RateLimiterClusterMasterPM2:c,RateLimiterCluster:u}=r(91713),l=r(22288),h=r(45105),d=r(60911),f=r(33766),p=r(78686),g=r(73328),y=r(15155);t.exports={RateLimiterRedis:n,RateLimiterMongo:i,RateLimiterMySQL:s,RateLimiterPostgres:o,RateLimiterMemory:l,RateLimiterMemcache:h,RateLimiterClusterMaster:a,RateLimiterClusterMasterPM2:c,RateLimiterCluster:u,RLWrapperBlackAndWhite:d,RateLimiterUnion:f,RateLimiterQueue:p,BurstyRateLimiter:g,RateLimiterRes:y}},73328:function(t,e,r){const n=r(15155);t.exports=class{constructor(t,e){this._rateLimiter=t,this._burstLimiter=e}_combineRes(t,e){return new n(t.remainingPoints,Math.min(t.msBeforeNext,e.msBeforeNext),t.consumedPoints,t.isFirstInDuration)}consume(t,e=1,r={}){return this._rateLimiter.consume(t,e,r).catch((i=>i instanceof n?this._burstLimiter.consume(t,e,r).then((t=>Promise.resolve(this._combineRes(i,t)))).catch((t=>t instanceof n?Promise.reject(this._combineRes(i,t)):Promise.reject(t))):Promise.reject(i)))}get(t){return Promise.all([this._rateLimiter.get(t),this._burstLimiter.get(t)]).then((([t,e])=>this._combineRes(t,e)))}get points(){return this._rateLimiter.points}}},60911:function(t,e,r){const n=r(15155);t.exports=class{constructor(t={}){this.limiter=t.limiter,this.blackList=t.blackList,this.whiteList=t.whiteList,this.isBlackListed=t.isBlackListed,this.isWhiteListed=t.isWhiteListed,this.runActionAnyway=t.runActionAnyway}get limiter(){return this._limiter}set limiter(t){if(void 0===t)throw new Error("limiter is not set");this._limiter=t}get runActionAnyway(){return this._runActionAnyway}set runActionAnyway(t){this._runActionAnyway=void 0!==t&&t}get blackList(){return this._blackList}set blackList(t){this._blackList=Array.isArray(t)?t:[]}get isBlackListed(){return this._isBlackListed}set isBlackListed(t){if(void 0===t&&(t=()=>!1),"function"!=typeof t)throw new Error("isBlackListed must be function");this._isBlackListed=t}get whiteList(){return this._whiteList}set whiteList(t){this._whiteList=Array.isArray(t)?t:[]}get isWhiteListed(){return this._isWhiteListed}set isWhiteListed(t){if(void 0===t&&(t=()=>!1),"function"!=typeof t)throw new Error("isWhiteListed must be function");this._isWhiteListed=t}isBlackListedSomewhere(t){return this.blackList.indexOf(t)>=0||this.isBlackListed(t)}isWhiteListedSomewhere(t){return this.whiteList.indexOf(t)>=0||this.isWhiteListed(t)}getBlackRes(){return new n(0,Number.MAX_SAFE_INTEGER,0,!1)}getWhiteRes(){return new n(Number.MAX_SAFE_INTEGER,0,0,!1)}rejectBlack(){return Promise.reject(this.getBlackRes())}resolveBlack(){return Promise.resolve(this.getBlackRes())}resolveWhite(){return Promise.resolve(this.getWhiteRes())}consume(t,e=1){let r;return this.isWhiteListedSomewhere(t)?r=this.resolveWhite():this.isBlackListedSomewhere(t)&&(r=this.rejectBlack()),void 0===r?this.limiter.consume(t,e):(this.runActionAnyway&&this.limiter.consume(t,e).catch((()=>{})),r)}block(t,e){let r;return this.isWhiteListedSomewhere(t)?r=this.resolveWhite():this.isBlackListedSomewhere(t)&&(r=this.resolveBlack()),void 0===r?this.limiter.block(t,e):(this.runActionAnyway&&this.limiter.block(t,e).catch((()=>{})),r)}penalty(t,e){let r;return this.isWhiteListedSomewhere(t)?r=this.resolveWhite():this.isBlackListedSomewhere(t)&&(r=this.resolveBlack()),void 0===r?this.limiter.penalty(t,e):(this.runActionAnyway&&this.limiter.penalty(t,e).catch((()=>{})),r)}reward(t,e){let r;return this.isWhiteListedSomewhere(t)?r=this.resolveWhite():this.isBlackListedSomewhere(t)&&(r=this.resolveBlack()),void 0===r?this.limiter.reward(t,e):(this.runActionAnyway&&this.limiter.reward(t,e).catch((()=>{})),r)}get(t){let e;return this.isWhiteListedSomewhere(t)?e=this.resolveWhite():this.isBlackListedSomewhere(t)&&(e=this.resolveBlack()),void 0===e||this.runActionAnyway?this.limiter.get(t):e}delete(t){return this.limiter.delete(t)}}},81352:function(t){t.exports=class{constructor(t={}){this.points=t.points,this.duration=t.duration,this.blockDuration=t.blockDuration,this.execEvenly=t.execEvenly,this.execEvenlyMinDelayMs=t.execEvenlyMinDelayMs,this.keyPrefix=t.keyPrefix}get points(){return this._points}set points(t){this._points=t>=0?t:4}get duration(){return this._duration}set duration(t){this._duration=void 0===t?1:t}get msDuration(){return 1e3*this.duration}get blockDuration(){return this._blockDuration}set blockDuration(t){this._blockDuration=void 0===t?0:t}get msBlockDuration(){return 1e3*this.blockDuration}get execEvenly(){return this._execEvenly}set execEvenly(t){this._execEvenly=void 0!==t&&Boolean(t)}get execEvenlyMinDelayMs(){return this._execEvenlyMinDelayMs}set execEvenlyMinDelayMs(t){this._execEvenlyMinDelayMs=void 0===t?Math.ceil(this.msDuration/this.points):t}get keyPrefix(){return this._keyPrefix}set keyPrefix(t){if(void 0===t&&(t="rlflx"),"string"!=typeof t)throw new Error("keyPrefix must be string");this._keyPrefix=t}_getKeySecDuration(t={}){return t&&t.customDuration>=0?t.customDuration:this.duration}getKey(t){return this.keyPrefix.length>0?`${this.keyPrefix}:${t}`:t}parseKey(t){return t.substring(this.keyPrefix.length)}consume(){throw new Error("You have to implement the method 'consume'!")}penalty(){throw new Error("You have to implement the method 'penalty'!")}reward(){throw new Error("You have to implement the method 'reward'!")}get(){throw new Error("You have to implement the method 'get'!")}set(){throw new Error("You have to implement the method 'set'!")}block(){throw new Error("You have to implement the method 'block'!")}delete(){throw new Error("You have to implement the method 'delete'!")}}},91713:function(t,e,r){var n=r(34155),i=r(25108);const s=r(81265),o=r(35539),a=r(81352),c=r(22288),u=r(15155),l="rate_limiter_flexible";let h=null;const d=function(t,e,r,n){let i;i=null===n||!0===n||!1===n?n:{remainingPoints:n.remainingPoints,msBeforeNext:n.msBeforeNext,consumedPoints:n.consumedPoints,isFirstInDuration:n.isFirstInDuration},t.send({channel:l,keyPrefix:e.keyPrefix,promiseId:e.promiseId,type:r,data:i})},f=function(t){setTimeout((()=>{this._initiated?n.send(t):void 0!==this._promises[t.promiseId]&&f.call(this,t)}),30)},p=function(t,e,r,i,s){const o={channel:l,keyPrefix:this.keyPrefix,func:t,promiseId:e,data:{key:r,arg:i,opts:s}};this._initiated?n.send(o):f.call(this,o)},g=function(t,e){if(!e||e.channel!==l||void 0===this._rateLimiters[e.keyPrefix])return!1;let r;switch(e.func){case"consume":r=this._rateLimiters[e.keyPrefix].consume(e.data.key,e.data.arg,e.data.opts);break;case"penalty":r=this._rateLimiters[e.keyPrefix].penalty(e.data.key,e.data.arg,e.data.opts);break;case"reward":r=this._rateLimiters[e.keyPrefix].reward(e.data.key,e.data.arg,e.data.opts);break;case"block":r=this._rateLimiters[e.keyPrefix].block(e.data.key,e.data.arg,e.data.opts);break;case"get":r=this._rateLimiters[e.keyPrefix].get(e.data.key,e.data.opts);break;case"delete":r=this._rateLimiters[e.keyPrefix].delete(e.data.key,e.data.opts);break;default:return!1}r&&r.then((r=>{d(t,e,"resolve",r)})).catch((r=>{d(t,e,"reject",r)}))},y=function(t){if(!t||t.channel!==l||t.keyPrefix!==this.keyPrefix)return!1;if(this._promises[t.promiseId]){let e;switch(clearTimeout(this._promises[t.promiseId].timeoutId),e=null===t.data||!0===t.data||!1===t.data?t.data:new u(t.data.remainingPoints,t.data.msBeforeNext,t.data.consumedPoints,t.data.isFirstInDuration),t.type){case"resolve":this._promises[t.promiseId].resolve(e);break;case"reject":this._promises[t.promiseId].reject(e);break;default:throw new Error(`RateLimiterCluster: no such message type '${t.type}'`)}delete this._promises[t.promiseId]}},m=function(){return{points:this.points,duration:this.duration,blockDuration:this.blockDuration,execEvenly:this.execEvenly,execEvenlyMinDelayMs:this.execEvenlyMinDelayMs,keyPrefix:this.keyPrefix}},w=function(t,e){const r=n.hrtime();let i=r[0].toString()+r[1].toString();return void 0!==this._promises[i]&&(i+=o.randomBytes(12).toString("base64")),this._promises[i]={resolve:t,reject:e,timeoutId:setTimeout((()=>{delete this._promises[i],e(new Error("RateLimiterCluster timeout: no answer from master in time"))}),this.timeoutMs)},i};t.exports={RateLimiterClusterMaster:class{constructor(){if(h)return h;this._rateLimiters={},s.setMaxListeners(0),s.on("message",((t,e)=>{e&&e.channel===l&&"init"===e.type?(void 0===this._rateLimiters[e.opts.keyPrefix]&&(this._rateLimiters[e.opts.keyPrefix]=new c(e.opts)),t.send({channel:l,type:"init",keyPrefix:e.opts.keyPrefix})):g.call(this,t,e)})),h=this}},RateLimiterClusterMasterPM2:class{constructor(t){if(h)return h;this._rateLimiters={},t.launchBus(((e,r)=>{r.on("process:msg",(e=>{const r=e.raw;if(r&&r.channel===l&&"init"===r.type)void 0===this._rateLimiters[r.opts.keyPrefix]&&(this._rateLimiters[r.opts.keyPrefix]=new c(r.opts)),t.sendDataToProcessId(e.process.pm_id,{data:{},topic:l,channel:l,type:"init",keyPrefix:r.opts.keyPrefix},((t,e)=>{t&&i.log(t,e)}));else{g.call(this,{send:r=>{const n=r;n.topic=l,void 0===n.data&&(n.data={}),t.sendDataToProcessId(e.process.pm_id,n,((t,e)=>{t&&i.log(t,e)}))}},r)}}))})),h=this}},RateLimiterCluster:class extends a{get timeoutMs(){return this._timeoutMs}set timeoutMs(t){this._timeoutMs=void 0===t?5e3:Math.abs(parseInt(t))}constructor(t={}){super(t),n.setMaxListeners(0),this.timeoutMs=t.timeoutMs,this._initiated=!1,n.on("message",(t=>{t&&t.channel===l&&"init"===t.type&&t.keyPrefix===this.keyPrefix?this._initiated=!0:y.call(this,t)})),n.send({channel:l,type:"init",opts:m.call(this)}),this._promises={}}consume(t,e=1,r={}){return new Promise(((n,i)=>{const s=w.call(this,n,i);p.call(this,"consume",s,t,e,r)}))}penalty(t,e=1,r={}){return new Promise(((n,i)=>{const s=w.call(this,n,i);p.call(this,"penalty",s,t,e,r)}))}reward(t,e=1,r={}){return new Promise(((n,i)=>{const s=w.call(this,n,i);p.call(this,"reward",s,t,e,r)}))}block(t,e,r={}){return new Promise(((n,i)=>{const s=w.call(this,n,i);p.call(this,"block",s,t,e,r)}))}get(t,e={}){return new Promise(((r,n)=>{const i=w.call(this,r,n);p.call(this,"get",i,t,e)}))}delete(t,e={}){return new Promise(((r,n)=>{const i=w.call(this,r,n);p.call(this,"delete",i,t,e)}))}}}},45105:function(t,e,r){const n=r(91090),i=r(15155);t.exports=class extends n{constructor(t){super(t),this.client=t.storeClient}_getRateLimiterRes(t,e,r){const n=new i;return n.consumedPoints=parseInt(r.consumedPoints),n.isFirstInDuration=r.consumedPoints===e,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=r.msBeforeNext,n}_upsert(t,e,r,n=!1,i={}){return new Promise(((s,o)=>{const a=Date.now(),c=Math.floor(r/1e3);n?this.client.set(t,e,c,(r=>{r?o(r):this.client.set(`${t}_expire`,c>0?a+1e3*c:-1,c,(()=>{s({consumedPoints:e,msBeforeNext:c>0?1e3*c:-1})}))})):this.client.incr(t,e,((u,l)=>{u||!1===l?this.client.add(t,e,c,((u,l)=>{if(u||!l)if(void 0===i.attemptNumber||i.attemptNumber<3){const a=Object.assign({},i);a.attemptNumber=a.attemptNumber?a.attemptNumber+1:1,this._upsert(t,e,r,n,a).then((t=>s(t))).catch((t=>o(t)))}else o(new Error("Can not add key"));else this.client.add(`${t}_expire`,c>0?a+1e3*c:-1,c,(()=>{s({consumedPoints:e,msBeforeNext:c>0?1e3*c:-1})}))})):this.client.get(`${t}_expire`,((t,e)=>{if(t)o(t);else{const t=!1===e?0:e,r={consumedPoints:l,msBeforeNext:t>=0?Math.max(t-a,0):-1};s(r)}}))}))}))}_get(t){return new Promise(((e,r)=>{const n=Date.now();this.client.get(t,((i,s)=>{s?this.client.get(`${t}_expire`,((t,i)=>{if(t)r(t);else{const t=!1===i?0:i,r={consumedPoints:s,msBeforeNext:t>=0?Math.max(t-n,0):-1};e(r)}})):e(null)}))}))}_delete(t){return new Promise(((e,r)=>{this.client.del(t,((n,i)=>{n?r(n):!1===i?e(i):this.client.del(`${t}_expire`,(t=>{t?r(t):e(i)}))}))}))}}},22288:function(t,e,r){const n=r(81352),i=r(58425),s=r(15155);t.exports=class extends n{constructor(t={}){super(t),this._memoryStorage=new i}consume(t,e=1,r={}){return new Promise(((n,i)=>{const s=this.getKey(t),o=this._getKeySecDuration(r);let a=this._memoryStorage.incrby(s,e,o);if(a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a.consumedPoints>this.points)this.blockDuration>0&&a.consumedPoints<=this.points+e&&(a=this._memoryStorage.set(s,a.consumedPoints,this.blockDuration)),i(a);else if(this.execEvenly&&a.msBeforeNext>0&&!a.isFirstInDuration){let t=Math.ceil(a.msBeforeNext/(a.remainingPoints+2));t<this.execEvenlyMinDelayMs&&(t=a.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(n,t,a)}else n(a)}))}penalty(t,e=1,r={}){const n=this.getKey(t);return new Promise((t=>{const i=this._getKeySecDuration(r),s=this._memoryStorage.incrby(n,e,i);s.remainingPoints=Math.max(this.points-s.consumedPoints,0),t(s)}))}reward(t,e=1,r={}){const n=this.getKey(t);return new Promise((t=>{const i=this._getKeySecDuration(r),s=this._memoryStorage.incrby(n,-e,i);s.remainingPoints=Math.max(this.points-s.consumedPoints,0),t(s)}))}block(t,e){const r=1e3*e,n=this.points+1;return this._memoryStorage.set(this.getKey(t),n,e),Promise.resolve(new s(0,0===r?-1:r,n))}set(t,e,r){const n=1e3*(r>=0?r:this.duration);return this._memoryStorage.set(this.getKey(t),e,r),Promise.resolve(new s(0,0===n?-1:n,e))}get(t){const e=this._memoryStorage.get(this.getKey(t));return null!==e&&(e.remainingPoints=Math.max(this.points-e.consumedPoints,0)),Promise.resolve(e)}delete(t){return Promise.resolve(this._memoryStorage.delete(this.getKey(t)))}}},81391:function(t,e,r){const n=r(91090),i=r(15155);function s(t){try{const e=t.client?t.client:t,{version:r}=e.topology.s.options.metadata.driver,n=r.split(".").map((t=>parseInt(t)));return{major:n[0],feature:n[1],patch:n[2]}}catch(t){return{major:0,feature:0,patch:0}}}class o extends n{constructor(t){super(t),this.dbName=t.dbName,this.tableName=t.tableName,this.indexKeyPrefix=t.indexKeyPrefix,t.mongo?this.client=t.mongo:this.client=t.storeClient,"function"==typeof this.client.then?this.client.then((t=>{this.client=t,this._initCollection(),this._driverVersion=s(this.client)})):(this._initCollection(),this._driverVersion=s(this.client))}get dbName(){return this._dbName}set dbName(t){this._dbName=void 0===t?o.getDbName():t}static getDbName(){return"node-rate-limiter-flexible"}get tableName(){return this._tableName}set tableName(t){this._tableName=void 0===t?this.keyPrefix:t}get client(){return this._client}set client(t){if(void 0===t)throw new Error("mongo is not set");this._client=t}get indexKeyPrefix(){return this._indexKeyPrefix}set indexKeyPrefix(t){this._indexKeyPrefix=t||{}}_initCollection(){const t=("function"==typeof this.client.db?this.client.db(this.dbName):this.client).collection(this.tableName);t.createIndex({expire:-1},{expireAfterSeconds:0}),t.createIndex(Object.assign({},this.indexKeyPrefix,{key:1}),{unique:!0}),this._collection=t}_getRateLimiterRes(t,e,r){const n=new i;let s;return s=void 0===r.value?r:r.value,n.isFirstInDuration=s.points===e,n.consumedPoints=s.points,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=null!==s.expire?Math.max(new Date(s.expire).getTime()-Date.now(),0):-1,n}_upsert(t,e,r,n=!1,i={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const s=i.attrs||{};let o,a;n?(o={key:t},o=Object.assign(o,s),a={$set:{key:t,points:e,expire:r>0?new Date(Date.now()+r):null}},a.$set=Object.assign(a.$set,s)):(o={$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}],key:t},o=Object.assign(o,s),a={$setOnInsert:{key:t,expire:r>0?new Date(Date.now()+r):null},$inc:{points:e}},a.$setOnInsert=Object.assign(a.$setOnInsert,s));const c={upsert:!0};return this._driverVersion.major>=4||3===this._driverVersion.major&&this._driverVersion.feature>=7||this._driverVersion.feature>=6&&this._driverVersion.patch>=7?c.returnDocument="after":c.returnOriginal=!1,new Promise(((i,u)=>{this._collection.findOneAndUpdate(o,a,c).then((t=>{i(t)})).catch((o=>{if(o&&11e3===o.code){const o=Object.assign({$or:[{expire:{$lte:new Date}},{expire:{$eq:null}}],key:t},s),a={$set:Object.assign({key:t,points:e,expire:r>0?new Date(Date.now()+r):null},s)};this._collection.findOneAndUpdate(o,a,c).then((t=>{i(t)})).catch((s=>{s&&11e3===s.code?this._upsert(t,e,r,n).then((t=>i(t))).catch((t=>u(t))):u(s)}))}else u(o)}))}))}_get(t,e={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const r=e.attrs||{},n=Object.assign({key:t,$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}]},r);return this._collection.findOne(n)}_delete(t,e={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const r=e.attrs||{},n=Object.assign({key:t},r);return this._collection.deleteOne(n).then((t=>t.deletedCount>0))}}t.exports=o},54156:function(t,e,r){const n=r(91090),i=r(15155);t.exports=class extends n{constructor(t,e=null){super(t),this.client=t.storeClient,this.clientType=t.storeType,this.dbName=t.dbName,this.tableName=t.tableName,this.clearExpiredByTimeout=t.clearExpiredByTimeout,this.tableCreated=t.tableCreated,this.tableCreated?(this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"==typeof e&&e()):this._createDbAndTable().then((()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"==typeof e&&e()})).catch((t=>{if("function"!=typeof e)throw t;e(t)}))}clearExpired(t){return new Promise((e=>{this._getConnection().then((r=>{r.query("DELETE FROM ??.?? WHERE expire < ?",[this.dbName,this.tableName,t],(()=>{this._releaseConnection(r),e()}))})).catch((()=>{e()}))}))}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout((()=>{this.clearExpired(Date.now()-36e5).then((()=>{this._clearExpiredHourAgo()}))}),3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":return new Promise(((t,e)=>{this.client.getConnection(((r,n)=>{if(r)return e(r);t(n)}))}));case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();default:return Promise.resolve(this.client)}}_releaseConnection(t){switch(this.clientType){case"pool":return t.release();case"sequelize":return this.client.connectionManager.releaseConnection(t);case"knex":return this.client.client.releaseConnection(t);default:return!0}}_createDbAndTable(){return new Promise(((t,e)=>{this._getConnection().then((r=>{r.query(`CREATE DATABASE IF NOT EXISTS \`${this.dbName}\`;`,(n=>{if(n)return this._releaseConnection(r),e(n);r.query(this._getCreateTableStmt(),(n=>{if(n)return this._releaseConnection(r),e(n);this._releaseConnection(r),t()}))}))})).catch((t=>{e(t)}))}))}_getCreateTableStmt(){return`CREATE TABLE IF NOT EXISTS \`${this.dbName}\`.\`${this.tableName}\` (\`key\` VARCHAR(255) CHARACTER SET utf8 NOT NULL,\`points\` INT(9) NOT NULL default 0,\`expire\` BIGINT UNSIGNED,PRIMARY KEY (\`key\`)) ENGINE = INNODB;`}get clientType(){return this._clientType}set clientType(t){if(void 0===t)if("Connection"===this.client.constructor.name)t="connection";else if("Pool"===this.client.constructor.name)t="pool";else{if("Sequelize"!==this.client.constructor.name)throw new Error("storeType is not defined");t="sequelize"}this._clientType=t.toLowerCase()}get dbName(){return this._dbName}set dbName(t){this._dbName=void 0===t?"rtlmtrflx":t}get tableName(){return this._tableName}set tableName(t){this._tableName=void 0===t?this.keyPrefix:t}get tableCreated(){return this._tableCreated}set tableCreated(t){this._tableCreated=void 0!==t&&!!t}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(t){this._clearExpiredByTimeout=void 0===t||Boolean(t)}_getRateLimiterRes(t,e,r){const n=new i,[s]=r;return n.isFirstInDuration=e===s.points,n.consumedPoints=n.isFirstInDuration?e:s.points,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=s.expire?Math.max(s.expire-Date.now(),0):-1,n}_upsertTransaction(t,e,r,n,i){return new Promise(((s,o)=>{t.query("BEGIN",(a=>{if(a)return t.rollback(),o(a);const c=Date.now(),u=n>0?c+n:null;let l,h;i?(l="INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = ?, \n            expire = ?;",h=[this.dbName,this.tableName,e,r,u,r,u]):(l="INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = IF(expire <= ?, ?, points + (?)), \n            expire = IF(expire <= ?, ?, expire);",h=[this.dbName,this.tableName,e,r,u,c,r,r,c,u]),t.query(l,h,(r=>{if(r)return t.rollback(),o(r);t.query("SELECT points, expire FROM ??.?? WHERE `key` = ?;",[this.dbName,this.tableName,e],((e,r)=>{if(e)return t.rollback(),o(e);t.query("COMMIT",(e=>{if(e)return t.rollback(),o(e);s(r)}))}))}))}))}))}_upsert(t,e,r,n=!1){return this.tableCreated?new Promise(((i,s)=>{this._getConnection().then((o=>{this._upsertTransaction(o,t,e,r,n).then((t=>{i(t),this._releaseConnection(o)})).catch((t=>{s(t),this._releaseConnection(o)}))})).catch((t=>{s(t)}))})):Promise.reject(Error("Table is not created yet"))}_get(t){return this.tableCreated?new Promise(((e,r)=>{this._getConnection().then((n=>{n.query("SELECT points, expire FROM ??.?? WHERE `key` = ? AND (`expire` > ? OR `expire` IS NULL)",[this.dbName,this.tableName,t,Date.now()],((t,i)=>{t?r(t):0===i.length?e(null):e(i),this._releaseConnection(n)}))})).catch((t=>{r(t)}))})):Promise.reject(Error("Table is not created yet"))}_delete(t){return this.tableCreated?new Promise(((e,r)=>{this._getConnection().then((n=>{n.query("DELETE FROM ??.?? WHERE `key` = ?",[this.dbName,this.tableName,t],((t,i)=>{t?r(t):e(i.affectedRows>0),this._releaseConnection(n)}))})).catch((t=>{r(t)}))})):Promise.reject(Error("Table is not created yet"))}}},4832:function(t,e,r){const n=r(91090),i=r(15155);t.exports=class extends n{constructor(t,e=null){super(t),this.client=t.storeClient,this.clientType=t.storeType,this.tableName=t.tableName,this.clearExpiredByTimeout=t.clearExpiredByTimeout,this.tableCreated=t.tableCreated,this.tableCreated?"function"==typeof e&&e():this._createTable().then((()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"==typeof e&&e()})).catch((t=>{if("function"!=typeof e)throw t;e(t)}))}clearExpired(t){return new Promise((e=>{const r={name:"rlflx-clear-expired",text:`DELETE FROM ${this.tableName} WHERE expire < $1`,values:[t]};this._query(r).then((()=>{e()})).catch((()=>{e()}))}))}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout((()=>{this.clearExpired(Date.now()-36e5).then((()=>{this._clearExpiredHourAgo()}))}),3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":default:return Promise.resolve(this.client);case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();case"typeorm":return Promise.resolve(this.client.driver.master)}}_releaseConnection(t){switch(this.clientType){case"pool":case"typeorm":default:return!0;case"sequelize":return this.client.connectionManager.releaseConnection(t);case"knex":return this.client.client.releaseConnection(t)}}_createTable(){return new Promise(((t,e)=>{this._query({text:this._getCreateTableStmt()}).then((()=>{t()})).catch((r=>{"23505"===r.code?t():e(r)}))}))}_getCreateTableStmt(){return`CREATE TABLE IF NOT EXISTS ${this.tableName} ( \n      key varchar(255) PRIMARY KEY,\n      points integer NOT NULL DEFAULT 0,\n      expire bigint\n    );`}get clientType(){return this._clientType}set clientType(t){const e=this.client.constructor.name;if(void 0===t)if("Client"===e)t="client";else if("Pool"===e||"BoundPool"===e)t="pool";else{if("Sequelize"!==e)throw new Error("storeType is not defined");t="sequelize"}this._clientType=t.toLowerCase()}get tableName(){return this._tableName}set tableName(t){this._tableName=void 0===t?this.keyPrefix:t}get tableCreated(){return this._tableCreated}set tableCreated(t){this._tableCreated=void 0!==t&&!!t}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(t){this._clearExpiredByTimeout=void 0===t||Boolean(t)}_getRateLimiterRes(t,e,r){const n=new i,s=r.rows[0];return n.isFirstInDuration=e===s.points,n.consumedPoints=n.isFirstInDuration?e:s.points,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=s.expire?Math.max(s.expire-Date.now(),0):-1,n}_query(t){const e={name:`${this.tableName.toLowerCase()}:${t.name}`,text:t.text,values:t.values};return new Promise(((t,r)=>{this._getConnection().then((n=>{n.query(e).then((e=>{t(e),this._releaseConnection(n)})).catch((t=>{r(t),this._releaseConnection(n)}))})).catch((t=>{r(t)}))}))}_upsert(t,e,r,n=!1){if(!this.tableCreated)return Promise.reject(Error("Table is not created yet"));const i=r>0?Date.now()+r:null,s=n?" $3 ":` CASE\n             WHEN ${this.tableName}.expire <= $4 THEN $3\n             ELSE ${this.tableName}.expire\n            END `;return this._query({name:n?"rlflx-upsert-force":"rlflx-upsert",text:`\n            INSERT INTO ${this.tableName} VALUES ($1, $2, $3)\n              ON CONFLICT(key) DO UPDATE SET\n                points = CASE\n                          WHEN (${this.tableName}.expire <= $4 OR 1=${n?1:0}) THEN $2\n                          ELSE ${this.tableName}.points + ($2)\n                         END,\n                expire = ${s}\n            RETURNING points, expire;`,values:[t,e,i,Date.now()]})}_get(t){return this.tableCreated?new Promise(((e,r)=>{this._query({name:"rlflx-get",text:`\n            SELECT points, expire FROM ${this.tableName} WHERE key = $1 AND (expire > $2 OR expire IS NULL);`,values:[t,Date.now()]}).then((t=>{0===t.rowCount&&(t=null),e(t)})).catch((t=>{r(t)}))})):Promise.reject(Error("Table is not created yet"))}_delete(t){return this.tableCreated?this._query({name:"rlflx-delete",text:`DELETE FROM ${this.tableName} WHERE key = $1`,values:[t]}).then((t=>t.rowCount>0)):Promise.reject(Error("Table is not created yet"))}}},78686:function(t,e,r){const n=r(45255),i=4294967295,s="limiter";t.exports=class{constructor(t,e={maxQueueSize:i}){this._queueLimiters={KEY_DEFAULT:new o(t,e)},this._limiterFlexible=t,this._maxQueueSize=e.maxQueueSize}getTokensRemaining(t=s){return this._queueLimiters[t]?this._queueLimiters[t].getTokensRemaining():Promise.resolve(this._limiterFlexible.points)}removeTokens(t,e=s){return this._queueLimiters[e]||(this._queueLimiters[e]=new o(this._limiterFlexible,{key:e,maxQueueSize:this._maxQueueSize})),this._queueLimiters[e].removeTokens(t)}};class o{constructor(t,e={maxQueueSize:i,key:s}){this._key=e.key,this._waitTimeout=null,this._queue=[],this._limiterFlexible=t,this._maxQueueSize=e.maxQueueSize}getTokensRemaining(){return this._limiterFlexible.get(this._key).then((t=>null!==t?t.remainingPoints:this._limiterFlexible.points))}removeTokens(t){const e=this;return new Promise(((r,i)=>{t>e._limiterFlexible.points?i(new n(`Requested tokens ${t} exceeds maximum ${e._limiterFlexible.points} tokens per interval`)):e._queue.length>0?e._queueRequest.call(e,r,i,t):e._limiterFlexible.consume(e._key,t).then((t=>{r(t.remainingPoints)})).catch((n=>{n instanceof Error?i(n):(e._queueRequest.call(e,r,i,t),null===e._waitTimeout&&(e._waitTimeout=setTimeout(e._processFIFO.bind(e),n.msBeforeNext)))}))}))}_queueRequest(t,e,r){const i=this;i._queue.length<i._maxQueueSize?i._queue.push({resolve:t,reject:e,tokens:r}):e(new n(`Number of requests reached it's maximum ${i._maxQueueSize}`))}_processFIFO(){const t=this;if(null!==t._waitTimeout&&(clearTimeout(t._waitTimeout),t._waitTimeout=null),0===t._queue.length)return;const e=t._queue.shift();t._limiterFlexible.consume(t._key,e.tokens).then((r=>{e.resolve(r.remainingPoints),t._processFIFO.call(t)})).catch((r=>{r instanceof Error?(e.reject(r),t._processFIFO.call(t)):(t._queue.unshift(e),null===t._waitTimeout&&(t._waitTimeout=setTimeout(t._processFIFO.bind(t),r.msBeforeNext)))}))}}},14636:function(t,e,r){const n=r(91090),i=r(15155),s="redis.call('set', KEYS[1], 0, 'EX', ARGV[2], 'NX') local consumed = redis.call('incrby', KEYS[1], ARGV[1]) local ttl = redis.call('pttl', KEYS[1]) if ttl == -1 then   redis.call('expire', KEYS[1], ARGV[2])   ttl = 1000 * ARGV[2] end return {consumed, ttl} ";t.exports=class extends n{constructor(t){super(t),t.redis?this.client=t.redis:this.client=t.storeClient,this._rejectIfRedisNotReady=!!t.rejectIfRedisNotReady,"function"==typeof this.client.defineCommand&&this.client.defineCommand("rlflxIncr",{numberOfKeys:1,lua:s})}_isRedisReady(){return!this._rejectIfRedisNotReady||(!this.client.status||"ready"===this.client.status)&&!("function"==typeof this.client.isReady&&!this.client.isReady())}_getRateLimiterRes(t,e,r){let[n,s]=r;Array.isArray(n)&&([,n]=n,[,s]=s);const o=new i;return o.consumedPoints=parseInt(n),o.isFirstInDuration=o.consumedPoints===e,o.remainingPoints=Math.max(this.points-o.consumedPoints,0),o.msBeforeNext=s,o}_upsert(t,e,r,n=!1){return new Promise(((i,o)=>{if(!this._isRedisReady())return o(new Error("Redis connection is not ready"));const a=Math.floor(r/1e3),c=this.client.multi();if(n)a>0?c.set(t,e,"EX",a):c.set(t,e),c.pttl(t).exec(((t,e)=>t?o(t):i(e)));else if(a>0){const r=function(t,e){return t?o(t):i(e)};"function"==typeof this.client.rlflxIncr?this.client.rlflxIncr(t,e,a,r):this.client.eval(s,1,t,e,a,r)}else c.incrby(t,e).pttl(t).exec(((t,e)=>t?o(t):i(e)))}))}_get(t){return new Promise(((e,r)=>{if(!this._isRedisReady())return r(new Error("Redis connection is not ready"));this.client.multi().get(t).pttl(t).exec(((t,n)=>{if(t)r(t);else{const[t]=n;if(null===t)return e(null);e(n)}}))}))}_delete(t){return new Promise(((e,r)=>{this.client.del(t,((t,n)=>{t?r(t):e(n>0)}))}))}}},15155:function(t){t.exports=class{constructor(t,e,r,n){this.remainingPoints=void 0===t?0:t,this.msBeforeNext=void 0===e?0:e,this.consumedPoints=void 0===r?0:r,this.isFirstInDuration=void 0!==n&&n}get msBeforeNext(){return this._msBeforeNext}set msBeforeNext(t){return this._msBeforeNext=t,this}get remainingPoints(){return this._remainingPoints}set remainingPoints(t){return this._remainingPoints=t,this}get consumedPoints(){return this._consumedPoints}set consumedPoints(t){return this._consumedPoints=t,this}get isFirstInDuration(){return this._isFirstInDuration}set isFirstInDuration(t){this._isFirstInDuration=Boolean(t)}_getDecoratedProperties(){return{remainingPoints:this.remainingPoints,msBeforeNext:this.msBeforeNext,consumedPoints:this.consumedPoints,isFirstInDuration:this.isFirstInDuration}}[Symbol.for("nodejs.util.inspect.custom")](){return this._getDecoratedProperties()}toString(){return JSON.stringify(this._getDecoratedProperties())}toJSON(){return this._getDecoratedProperties()}}},91090:function(t,e,r){const n=r(81352),i=r(52423),s=r(15155);t.exports=class extends n{constructor(t={}){super(t),this.inMemoryBlockOnConsumed=t.inMemoryBlockOnConsumed||t.inmemoryBlockOnConsumed,this.inMemoryBlockDuration=t.inMemoryBlockDuration||t.inmemoryBlockDuration,this.insuranceLimiter=t.insuranceLimiter,this._inMemoryBlockedKeys=new i}get client(){return this._client}set client(t){if(void 0===t)throw new Error("storeClient is not set");this._client=t}_afterConsume(t,e,r,n,i,s={}){const o=this._getRateLimiterRes(r,n,i);if(this.inMemoryBlockOnConsumed>0&&!(this.inMemoryBlockDuration>0)&&o.consumedPoints>=this.inMemoryBlockOnConsumed)return this._inMemoryBlockedKeys.addMs(r,o.msBeforeNext),o.consumedPoints>this.points?e(o):t(o);if(o.consumedPoints>this.points){let t=Promise.resolve();this.blockDuration>0&&o.consumedPoints<=this.points+n&&(o.msBeforeNext=this.msBlockDuration,t=this._block(r,o.consumedPoints,this.msBlockDuration,s)),this.inMemoryBlockOnConsumed>0&&o.consumedPoints>=this.inMemoryBlockOnConsumed&&(this._inMemoryBlockedKeys.add(r,this.inMemoryBlockDuration),o.msBeforeNext=this.msInMemoryBlockDuration),t.then((()=>{e(o)})).catch((t=>{e(t)}))}else if(this.execEvenly&&o.msBeforeNext>0&&!o.isFirstInDuration){let e=Math.ceil(o.msBeforeNext/(o.remainingPoints+2));e<this.execEvenlyMinDelayMs&&(e=o.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(t,e,o)}else t(o)}_handleError(t,e,r,i,s,o=!1,a={}){this.insuranceLimiter instanceof n?this.insuranceLimiter[e](s,o,a).then((t=>{r(t)})).catch((t=>{i(t)})):i(t)}get _inmemoryBlockedKeys(){return this._inMemoryBlockedKeys}getInmemoryBlockMsBeforeExpire(t){return this.getInMemoryBlockMsBeforeExpire(t)}get inmemoryBlockOnConsumed(){return this.inMemoryBlockOnConsumed}set inmemoryBlockOnConsumed(t){this.inMemoryBlockOnConsumed=t}get inmemoryBlockDuration(){return this.inMemoryBlockDuration}set inmemoryBlockDuration(t){this.inMemoryBlockDuration=t}get msInmemoryBlockDuration(){return 1e3*this.inMemoryBlockDuration}getInMemoryBlockMsBeforeExpire(t){return this.inMemoryBlockOnConsumed>0?this._inMemoryBlockedKeys.msBeforeExpire(t):0}get inMemoryBlockOnConsumed(){return this._inMemoryBlockOnConsumed}set inMemoryBlockOnConsumed(t){if(this._inMemoryBlockOnConsumed=t?parseInt(t):0,this.inMemoryBlockOnConsumed>0&&this.points>this.inMemoryBlockOnConsumed)throw new Error('inMemoryBlockOnConsumed option must be greater or equal "points" option')}get inMemoryBlockDuration(){return this._inMemoryBlockDuration}set inMemoryBlockDuration(t){if(this._inMemoryBlockDuration=t?parseInt(t):0,this.inMemoryBlockDuration>0&&0===this.inMemoryBlockOnConsumed)throw new Error("inMemoryBlockOnConsumed option must be set up")}get msInMemoryBlockDuration(){return 1e3*this._inMemoryBlockDuration}get insuranceLimiter(){return this._insuranceLimiter}set insuranceLimiter(t){if(void 0!==t&&!(t instanceof n))throw new Error("insuranceLimiter must be instance of RateLimiterAbstract");this._insuranceLimiter=t,this._insuranceLimiter&&(this._insuranceLimiter.blockDuration=this.blockDuration,this._insuranceLimiter.execEvenly=this.execEvenly)}block(t,e,r={}){const n=1e3*e;return this._block(this.getKey(t),this.points+1,n,r)}set(t,e,r,n={}){const i=1e3*(r>=0?r:this.duration);return this._block(this.getKey(t),e,i,n)}consume(t,e=1,r={}){return new Promise(((n,i)=>{const o=this.getKey(t),a=this.getInMemoryBlockMsBeforeExpire(o);if(a>0)return i(new s(0,a));this._upsert(o,e,1e3*this._getKeySecDuration(r),!1,r).then((t=>{this._afterConsume(n,i,o,e,t)})).catch((s=>{this._handleError(s,"consume",n,i,t,e,r)}))}))}penalty(t,e=1,r={}){const n=this.getKey(t);return new Promise(((i,s)=>{this._upsert(n,e,1e3*this._getKeySecDuration(r),!1,r).then((t=>{i(this._getRateLimiterRes(n,e,t))})).catch((n=>{this._handleError(n,"penalty",i,s,t,e,r)}))}))}reward(t,e=1,r={}){const n=this.getKey(t);return new Promise(((i,s)=>{this._upsert(n,-e,1e3*this._getKeySecDuration(r),!1,r).then((t=>{i(this._getRateLimiterRes(n,-e,t))})).catch((n=>{this._handleError(n,"reward",i,s,t,e,r)}))}))}get(t,e={}){const r=this.getKey(t);return new Promise(((n,i)=>{this._get(r,e).then((t=>{n(null==t?null:this._getRateLimiterRes(r,0,t))})).catch((r=>{this._handleError(r,"get",n,i,t,e)}))}))}delete(t,e={}){const r=this.getKey(t);return new Promise(((n,i)=>{this._delete(r,e).then((t=>{this._inMemoryBlockedKeys.delete(r),n(t)})).catch((r=>{this._handleError(r,"delete",n,i,t,e)}))}))}deleteInMemoryBlockedAll(){this._inMemoryBlockedKeys.delete()}_getRateLimiterRes(t,e,r){throw new Error("You have to implement the method '_getRateLimiterRes'!")}_block(t,e,r,n={}){return new Promise(((i,o)=>{this._upsert(t,e,r,!0,n).then((()=>{i(new s(0,r>0?r:-1,e))})).catch((e=>{this._handleError(e,"block",i,o,this.parseKey(t),r/1e3,n)}))}))}_get(t,e={}){throw new Error("You have to implement the method '_get'!")}_delete(t,e={}){throw new Error("You have to implement the method '_delete'!")}_upsert(t,e,r,n=!1,i={}){throw new Error("You have to implement the method '_upsert'!")}}},33766:function(t,e,r){const n=r(81352);t.exports=class{constructor(...t){if(t.length<1)throw new Error("RateLimiterUnion: at least one limiter have to be passed");t.forEach((t=>{if(!(t instanceof n))throw new Error("RateLimiterUnion: all limiters have to be instance of RateLimiterAbstract")})),this._limiters=t}consume(t,e=1){return new Promise(((r,n)=>{const i=[];this._limiters.forEach((r=>{i.push(r.consume(t,e).catch((t=>({rejected:!0,rej:t}))))})),Promise.all(i).then((t=>{const e={};let i=!1;t.forEach((t=>{!0===t.rejected&&(i=!0)}));for(let r=0;r<t.length;r++)i&&!0===t[r].rejected?e[this._limiters[r].keyPrefix]=t[r].rej:i||(e[this._limiters[r].keyPrefix]=t[r]);i?n(e):r(e)}))}))}}},78894:function(t){t.exports=class{constructor(){this._keys={},this._addedKeysAmount=0}collectExpired(){const t=Date.now();Object.keys(this._keys).forEach((e=>{this._keys[e]<=t&&delete this._keys[e]})),this._addedKeysAmount=Object.keys(this._keys).length}add(t,e){this.addMs(t,1e3*e)}addMs(t,e){this._keys[t]=Date.now()+e,this._addedKeysAmount++,this._addedKeysAmount>999&&this.collectExpired()}msBeforeExpire(t){const e=this._keys[t];if(e&&e>=Date.now()){this.collectExpired();const t=Date.now();return e>=t?e-t:0}return 0}delete(t){t?delete this._keys[t]:Object.keys(this._keys).forEach((t=>{delete this._keys[t]}))}}},52423:function(t,e,r){const n=r(78894);t.exports=n},58425:function(t,e,r){const n=r(9250),i=r(15155);t.exports=class{constructor(){this._storage={}}incrby(t,e,r){if(this._storage[t]){const n=this._storage[t].expiresAt?this._storage[t].expiresAt.getTime()-(new Date).getTime():-1;return 0!==n?(this._storage[t].value=this._storage[t].value+e,new i(0,n,this._storage[t].value,!1)):this.set(t,e,r)}return this.set(t,e,r)}set(t,e,r){const s=1e3*r;return this._storage[t]&&this._storage[t].timeoutId&&clearTimeout(this._storage[t].timeoutId),this._storage[t]=new n(e,s>0?new Date(Date.now()+s):null),s>0&&(this._storage[t].timeoutId=setTimeout((()=>{delete this._storage[t]}),s),this._storage[t].timeoutId.unref&&this._storage[t].timeoutId.unref()),new i(0,0===s?-1:s,this._storage[t].value,!0)}get(t){if(this._storage[t]){const e=this._storage[t].expiresAt?this._storage[t].expiresAt.getTime()-(new Date).getTime():-1;return new i(0,e,this._storage[t].value,!1)}return null}delete(t){return!!this._storage[t]&&(this._storage[t].timeoutId&&clearTimeout(this._storage[t].timeoutId),delete this._storage[t],!0)}}},9250:function(t){t.exports=class{constructor(t,e,r=null){this.value=t,this.expiresAt=e,this.timeoutId=r}get value(){return this._value}set value(t){this._value=parseInt(t)}get expiresAt(){return this._expiresAt}set expiresAt(t){t instanceof Date||!Number.isInteger(t)||(t=new Date(t)),this._expiresAt=t}get timeoutId(){return this._timeoutId}set timeoutId(t){this._timeoutId=t}}},45255:function(t){t.exports=class extends Error{constructor(t,e){super(),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="CustomError",this.message=t,e&&(this.extra=e)}}},58090:function(t,e,r){"use strict";const n=r(95507);class i extends n.Readable{constructor(t){super(),this.bytesRead=0,this.released=!1,this.reader=t.getReader()}async _read(){if(this.released)return void this.push(null);this.pendingRead=this.reader.read();const t=await this.pendingRead;delete this.pendingRead,t.done||this.released?this.push(null):(this.bytesRead+=t.value.length,this.push(t.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}},11281:function(t){"use strict";var e={};function r(t,r,n){n||(n=Error);var i=function(t){var e,n;function i(e,n,i){return t.call(this,function(t,e,n){return"string"==typeof r?r:r(t,e,n)}(e,n,i))||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i}(n);i.prototype.name=n.name,i.prototype.code=t,e[t]=i}function n(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}r("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(t,e,r){var i,s,o,a;if("string"==typeof e&&(s="not ",e.substr(!o||o<0?0:+o,s.length)===s)?(i="must not be",e=e.replace(/^not /,"")):i="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))a="The ".concat(t," ").concat(i," ").concat(n(e,"type"));else{var c=function(t,e,r){return"number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(c," ").concat(i," ").concat(n(e,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.q=e},96201:function(t,e,r){"use strict";var n=r(34155),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=l;var s=r(62460),o=r(1103);r(35717)(l,s);for(var a=i(o.prototype),c=0;c<a.length;c++){var u=a[c];l.prototype[u]||(l.prototype[u]=o.prototype[u])}function l(t){if(!(this instanceof l))return new l(t);s.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||n.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},24404:function(t,e,r){"use strict";t.exports=i;var n=r(67749);function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}r(35717)(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},62460:function(t,e,r){"use strict";var n,i=r(34155);t.exports=R,R.ReadableState=A;r(17187).EventEmitter;var s=function(t,e){return t.listeners(e).length},o=r(28114),a=r(48764).Buffer,c=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var u,l=r(43838);u=l&&l.debuglog?l.debuglog("stream"):function(){};var h,d,f,p=r(30597),g=r(80358),y=r(75267).getHighWaterMark,m=r(11281).q,w=m.ERR_INVALID_ARG_TYPE,b=m.ERR_STREAM_PUSH_AFTER_EOF,E=m.ERR_METHOD_NOT_IMPLEMENTED,v=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(35717)(R,o);var _=g.errorOrDestroy,S=["error","close","destroy","pause","resume"];function A(t,e,i){n=n||r(96201),t=t||{},"boolean"!=typeof i&&(i=e instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=r(32553).StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function R(t){if(n=n||r(96201),!(this instanceof R))return new R(t);var e=this instanceof n;this._readableState=new A(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function T(t,e,r,n,i){u("readableAddChunk",e);var s,o=t._readableState;if(null===e)o.reading=!1,function(t,e){if(u("onEofChunk"),e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?N(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,B(t)))}(t,o);else if(i||(s=function(t,e){var r;n=e,a.isBuffer(n)||n instanceof c||"string"==typeof e||void 0===e||t.objectMode||(r=new w("chunk",["string","Buffer","Uint8Array"],e));var n;return r}(o,e)),s)_(t,s);else if(o.objectMode||e&&e.length>0)if("string"==typeof e||o.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=function(t){return a.from(t)}(e)),n)o.endEmitted?_(t,new v):I(t,o,e,!0);else if(o.ended)_(t,new b);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||0!==e.length?I(t,o,e,!1):P(t,o)):I(t,o,e,!1)}else n||(o.reading=!1,P(t,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function I(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&N(t)),P(t,e)}Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),R.prototype.destroy=g.destroy,R.prototype._undestroy=g.undestroy,R.prototype._destroy=function(t,e){e(t)},R.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=a.from(t,e),e=""),r=!0),T(this,t,e,!1,r)},R.prototype.unshift=function(t){return T(this,t,null,!0,!1)},R.prototype.isPaused=function(){return!1===this._readableState.flowing},R.prototype.setEncoding=function(t){h||(h=r(32553).StringDecoder);var e=new h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var C=1073741824;function k(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=C?t=C:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function N(t){var e=t._readableState;u("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(u("emitReadable",e.flowing),e.emittedReadable=!0,i.nextTick(B,t))}function B(t){var e=t._readableState;u("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,U(t)}function P(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(L,t,e))}function L(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(u("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function D(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function O(t){u("readable nexttick read 0"),t.read(0)}function x(t,e){u("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),U(t),e.flowing&&!e.reading&&t.read(0)}function U(t){var e=t._readableState;for(u("flow",e.flowing);e.flowing&&null!==t.read(););}function M(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function V(t){var e=t._readableState;u("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,i.nextTick(j,e,t))}function j(t,e){if(u("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function F(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}R.prototype.read=function(t){u("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return u("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?V(this):N(this),null;if(0===(t=k(t,e))&&e.ended)return 0===e.length&&V(this),null;var n,i=e.needReadable;return u("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&u("length less than watermark",i=!0),e.ended||e.reading?u("reading or ended",i=!1):i&&(u("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=k(r,e))),null===(n=t>0?M(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&V(this)),null!==n&&this.emit("data",n),n},R.prototype._read=function(t){_(this,new E("_read()"))},R.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,u("pipe count=%d opts=%j",n.pipesCount,e);var o=(!e||!1!==e.end)&&t!==i.stdout&&t!==i.stderr?c:y;function a(e,i){u("onunpipe"),e===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,u("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",a),r.removeListener("end",c),r.removeListener("end",y),r.removeListener("data",d),h=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}function c(){u("onend"),t.end()}n.endEmitted?i.nextTick(o):r.once("end",o),t.on("unpipe",a);var l=function(t){return function(){var e=t._readableState;u("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,U(t))}}(r);t.on("drain",l);var h=!1;function d(e){u("ondata");var i=t.write(e);u("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==F(n.pipes,t))&&!h&&(u("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(e){u("onerror",e),y(),t.removeListener("error",f),0===s(t,"error")&&_(t,e)}function p(){t.removeListener("finish",g),y()}function g(){u("onfinish"),t.removeListener("close",p),y()}function y(){u("unpipe"),r.unpipe(t)}return r.on("data",d),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",f),t.once("close",p),t.once("finish",g),t.emit("pipe",r),n.flowing||(u("pipe resume"),r.resume()),t},R.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},R.prototype.on=function(t,e){var r=o.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,u("on readable",n.length,n.reading),n.length?N(this):n.reading||i.nextTick(O,this))),r},R.prototype.addListener=R.prototype.on,R.prototype.removeListener=function(t,e){var r=o.prototype.removeListener.call(this,t,e);return"readable"===t&&i.nextTick(D,this),r},R.prototype.removeAllListeners=function(t){var e=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||i.nextTick(D,this),e},R.prototype.resume=function(){var t=this._readableState;return t.flowing||(u("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(x,t,e))}(this,t)),t.paused=!1,this},R.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},R.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(u("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var s=0;s<S.length;s++)t.on(S[s],this.emit.bind(this,S[s]));return this._read=function(e){u("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(R.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=r(26913)),d(this)}),Object.defineProperty(R.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(R.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(R.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),R._fromList=M,Object.defineProperty(R.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(R.from=function(t,e){return void 0===f&&(f=r(97294)),f(R,t,e)})},67749:function(t,e,r){"use strict";t.exports=l;var n=r(11281).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(96201);function u(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);c.call(this,t),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(e,r){d(t,e,r)}))}function d(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new a;if(t._transformState.transforming)throw new o;return t.push(null)}r(35717)(l,c),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,c.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,r){r(new i("_transform()"))},l.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){c.prototype._destroy.call(this,t,(function(t){e(t)}))}},1103:function(t,e,r){"use strict";var n,i=r(34155);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}t.exports=R,R.WritableState=A;var o={deprecate:r(94927)},a=r(28114),c=r(48764).Buffer,u=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,h=r(80358),d=r(75267).getHighWaterMark,f=r(11281).q,p=f.ERR_INVALID_ARG_TYPE,g=f.ERR_METHOD_NOT_IMPLEMENTED,y=f.ERR_MULTIPLE_CALLBACK,m=f.ERR_STREAM_CANNOT_PIPE,w=f.ERR_STREAM_DESTROYED,b=f.ERR_STREAM_NULL_VALUES,E=f.ERR_STREAM_WRITE_AFTER_END,v=f.ERR_UNKNOWN_ENCODING,_=h.errorOrDestroy;function S(){}function A(t,e,o){n=n||r(96201),t=t||{},"boolean"!=typeof o&&(o=e instanceof n),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,s=r.writecb;if("function"!=typeof s)throw new y;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,s){--e.pendingcb,r?(i.nextTick(s,n),i.nextTick(B,t,e),t._writableState.errorEmitted=!0,_(t,n)):(s(n),t._writableState.errorEmitted=!0,_(t,n),B(t,e))}(t,r,n,e,s);else{var o=k(r)||t.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||C(t,r),n?i.nextTick(I,t,r,o,s):I(t,r,o,s)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function R(t){var e=this instanceof(n=n||r(96201));if(!e&&!l.call(R,this))return new R(t);this._writableState=new A(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function T(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new w("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function I(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),B(t,e)}function C(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)i[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;i.allBuffers=c,T(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,h=r.callback;if(T(t,e,!1,e.objectMode?1:u.length,u,l,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function k(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function N(t,e){t._final((function(r){e.pendingcb--,r&&_(t,r),e.prefinished=!0,t.emit("prefinish"),B(t,e)}))}function B(t,e){var r=k(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,i.nextTick(N,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}r(35717)(R,a),A.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(A.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||this===R&&(t&&t._writableState instanceof A)}})):l=function(t){return t instanceof this},R.prototype.pipe=function(){_(this,new m)},R.prototype.write=function(t,e,r){var n,s=this._writableState,o=!1,a=!s.objectMode&&(n=t,c.isBuffer(n)||n instanceof u);return a&&!c.isBuffer(t)&&(t=function(t){return c.from(t)}(t)),"function"==typeof e&&(r=e,e=null),a?e="buffer":e||(e=s.defaultEncoding),"function"!=typeof r&&(r=S),s.ending?function(t,e){var r=new E;_(t,r),i.nextTick(e,r)}(this,r):(a||function(t,e,r,n){var s;return null===r?s=new b:"string"==typeof r||e.objectMode||(s=new p("chunk",["string","Buffer"],r)),!s||(_(t,s),i.nextTick(n,s),!1)}(this,s,t,r))&&(s.pendingcb++,o=function(t,e,r,n,i,s){if(!r){var o=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,r));return e}(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else T(t,e,!1,a,n,i,s);return u}(this,s,a,t,e,r)),o},R.prototype.cork=function(){this._writableState.corked++},R.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||C(this,t))},R.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new v(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),R.prototype._write=function(t,e,r){r(new g("_write()"))},R.prototype._writev=null,R.prototype.end=function(t,e,r){var n=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,e,r){e.ending=!0,B(t,e),r&&(e.finished?i.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r),this},Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),R.prototype.destroy=h.destroy,R.prototype._undestroy=h.undestroy,R.prototype._destroy=function(t,e){e(t)}},26913:function(t,e,r){"use strict";var n,i=r(34155);function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=r(22880),a=Symbol("lastResolve"),c=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(t,e){return{value:t,done:e}}function g(t){var e=t[a];if(null!==e){var r=t[f].read();null!==r&&(t[h]=null,t[a]=null,t[c]=null,e(p(r,!1)))}}function y(t){i.nextTick(g,t)}var m=Object.getPrototypeOf((function(){})),w=Object.setPrototypeOf((s(n={get stream(){return this[f]},next:function(){var t=this,e=this[u];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(e,r){i.nextTick((function(){t[u]?r(t[u]):e(p(void 0,!0))}))}));var r,n=this[h];if(n)r=new Promise(function(t,e){return function(r,n){t.then((function(){e[l]?r(p(void 0,!0)):e[d](r,n)}),n)}}(n,this));else{var s=this[f].read();if(null!==s)return Promise.resolve(p(s,!1));r=new Promise(this[d])}return this[h]=r,r}},Symbol.asyncIterator,(function(){return this})),s(n,"return",(function(){var t=this;return new Promise((function(e,r){t[f].destroy(null,(function(t){t?r(t):e(p(void 0,!0))}))}))})),n),m);t.exports=function(t){var e,r=Object.create(w,(s(e={},f,{value:t,writable:!0}),s(e,a,{value:null,writable:!0}),s(e,c,{value:null,writable:!0}),s(e,u,{value:null,writable:!0}),s(e,l,{value:t._readableState.endEmitted,writable:!0}),s(e,d,{value:function(t,e){var n=r[f].read();n?(r[h]=null,r[a]=null,r[c]=null,t(p(n,!1))):(r[a]=t,r[c]=e)},writable:!0}),e));return r[h]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[c];return null!==e&&(r[h]=null,r[a]=null,r[c]=null,e(t)),void(r[u]=t)}var n=r[a];null!==n&&(r[h]=null,r[a]=null,r[c]=null,n(p(void 0,!0))),r[l]=!0})),t.on("readable",y.bind(null,r)),r}},30597:function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var c=r(48764).Buffer,u=r(99283).inspect,l=u&&u.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r,n;return e=t,(r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return c.alloc(0);for(var e,r,n,i=c.allocUnsafe(t>>>0),s=this.head,o=0;s;)e=s.data,r=i,n=o,c.prototype.copy.call(e,r,n),o+=s.data.length,s=s.next;return i}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,s=t>i.length?i.length:t;if(s===i.length?n+=i:n+=i.slice(0,t),0==(t-=s)){s===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=c.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var i=r.data,s=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,s),0==(t-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,e}},{key:l,value:function(t,e){return u(this,i(i({},e),{},{depth:0,customInspect:!1}))}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},80358:function(t,e,r){"use strict";var n=r(34155);function i(t,e){o(t,e),s(t)}function s(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function o(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(o,this,t)):n.nextTick(o,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?r._writableState?r._writableState.errorEmitted?n.nextTick(s,r):(r._writableState.errorEmitted=!0,n.nextTick(i,r,t)):n.nextTick(i,r,t):e?(n.nextTick(s,r),e(t)):n.nextTick(s,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}},22880:function(t,e,r){"use strict";var n=r(11281).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,r,s){if("function"==typeof r)return t(e,null,r);r||(r={}),s=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}(s||i);var o=r.readable||!1!==r.readable&&e.readable,a=r.writable||!1!==r.writable&&e.writable,c=function(){e.writable||l()},u=e._writableState&&e._writableState.finished,l=function(){a=!1,u=!0,o||s.call(e)},h=e._readableState&&e._readableState.endEmitted,d=function(){o=!1,h=!0,a||s.call(e)},f=function(t){s.call(e,t)},p=function(){var t;return o&&!h?(e._readableState&&e._readableState.ended||(t=new n),s.call(e,t)):a&&!u?(e._writableState&&e._writableState.ended||(t=new n),s.call(e,t)):void 0},g=function(){e.req.on("finish",l)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?a&&!e._writableState&&(e.on("end",c),e.on("close",c)):(e.on("complete",l),e.on("abort",p),e.req?g():e.on("request",g)),e.on("end",d),e.on("finish",l),!1!==r.error&&e.on("error",f),e.on("close",p),function(){e.removeListener("complete",l),e.removeListener("abort",p),e.removeListener("request",g),e.req&&e.req.removeListener("finish",l),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("end",d),e.removeListener("error",f),e.removeListener("close",p)}}},97294:function(t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},60677:function(t,e,r){"use strict";var n;var i=r(11281).q,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function c(t){t()}function u(t,e){return t.pipe(e)}t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var l,h=function(t){return t.length?"function"!=typeof t[t.length-1]?a:t.pop():a}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new s("streams");var d=e.map((function(t,i){var s=i<e.length-1;return function(t,e,i,s){s=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(s);var a=!1;t.on("close",(function(){a=!0})),void 0===n&&(n=r(22880)),n(t,{readable:e,writable:i},(function(t){if(t)return s(t);a=!0,s()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new o("pipe"))}}(t,s,i>0,(function(t){l||(l=t),t&&d.forEach(c),s||(d.forEach(c),h(l))}))}));return e.reduce(u)}},75267:function(t,e,r){"use strict";var n=r(11281).q.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,r,i){var s=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,i,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(i?r:"highWaterMark",s);return Math.floor(s)}return t.objectMode?16:16384}}},28114:function(t,e,r){t.exports=r(17187).EventEmitter},95507:function(t,e,r){(e=t.exports=r(62460)).Stream=e,e.Readable=e,e.Writable=r(1103),e.Duplex=r(96201),e.Transform=r(67749),e.PassThrough=r(24404),e.finished=r(22880),e.pipeline=r(60677)},73692:function(t,e,r){"use strict";t.exports=o;var n=r(57824),i=o.prototype,s=new Date%1e9;function o(t){t=t||{},this.id=t.id||(1e9*Math.random()>>>0)+s++,this.max=t.max||1/0,this.items=t.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(t.lastModified||new Date);for(var e,r,n=this.items.length;n--;)e=this.items[n],r=new Date(e.expires)-new Date,this._lookup[e.key]=e,r>0?this.expire(e.key,r):r<=0&&this.delete(e.key)}i.has=function(t){return t in this._lookup},i.get=function(t){if(!this.has(t))return null;var e=this._lookup[t];return e.refresh&&this.expire(t,e.refresh),this.items.splice(this.items.indexOf(e),1),this.items.push(e),e.value},i.meta=function(t){if(!this.has(t))return null;var e=this._lookup[t];return"meta"in e?e.meta:null},i.set=function(t,e,r){var n=this._lookup[t],i=this._lookup[t]={key:t,value:e};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,i)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(i),this.size++),r&&("ttl"in r&&this.expire(t,r.ttl),"meta"in r&&(i.meta=r.meta),r.refresh&&(i.refresh=r.ttl)),this},i.delete=function(t){var e=this._lookup[t];return!!e&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(e),1),clearTimeout(e.timeout),delete this._lookup[t],this.size--,this)},i.expire=function(t,e){var r=e||0,i=this._lookup[t];if(!i)return this;if("string"==typeof r&&(r=n(e)),"number"!=typeof r)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(i.timeout),i.timeout=setTimeout(this.delete.bind(this,i.key),r),i.expires=Number(new Date)+r,this},i.clear=function(){for(var t=this.items.length;t--;)this.delete(this.items[t].key);return this},i.toJSON=function(){for(var t,e=new Array(this.items.length),r=e.length;r--;)t=this.items[r],e[r]={key:t.key,meta:t.meta,value:t.value,expires:t.expires,refresh:t.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:e}}},82916:function(t,e,r){"use strict";const n=r(41807);class i{constructor(t,e,r){const i=this;this._started=n(),this._rescheduled=0,this._scheduled=e,this._args=r,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(n()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,t.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,e)}reschedule(t){t||(t=this._scheduled);const e=n();e+t-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(t)):this._triggered?this._schedule(t):(this._started=e,this._rescheduled=t)}_schedule(t){this._triggered=!1,this._started=n(),this._rescheduled=0,this._scheduled=t,this._timer=setTimeout(this._timerWrapper,t)}clear(){clearTimeout(this._timer)}}t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new i(arguments[0],arguments[1],t)}},41807:function(t){"use strict";t.exports=function(){return Date.now()}},29967:function(t,e,r){t.exports=function(t,e,r){if("number"!=typeof e)throw new Error("second argument must be a Number");let i,s,o,a,c,u,l=!0;Array.isArray(t)?(i=[],o=s=t.length):(a=Object.keys(t),i={},o=s=a.length);function h(t){function e(){r&&r(t,i),r=null}l?n(e):e()}function d(e,r,n){if(i[e]=n,r&&(c=!0),0==--o||r)h(r);else if(!c&&u<s){let e;a?(e=a[u],u+=1,t[e]((function(t,r){d(e,t,r)}))):(e=u,u+=1,t[e]((function(t,r){d(e,t,r)})))}}u=e,o?a?a.some((function(r,n){return t[r]((function(t,e){d(r,t,e)})),n===e-1})):t.some((function(t,r){return t((function(t,e){d(r,t,e)})),r===e-1})):h(null);l=!1};const n=r(54375)},89509:function(t,e,r){var n=r(48764),i=n.Buffer;function s(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},50202:function(t,e,r){"use strict";var n=r(63700),i=/[\/\?<>\\:\*\|"]/g,s=/[\x00-\x1f\x80-\x9f]/g,o=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,c=/[\. ]+$/;function u(t,e){if("string"!=typeof t)throw new Error("Input must be string");var r=t.replace(i,e).replace(s,e).replace(o,e).replace(a,e).replace(c,e);return n(r,255)}t.exports=function(t,e){var r=e&&e.replacement||"",n=u(t,r);return""===r?n:u(n,"")}},27695:function(t){"use strict";const e=new Map;t.exports={setDelayedInterval:function(t,r,n){n=n||r;const i=`${Date.now()}:${Math.floor(1e6*Math.random())}`,s=setTimeout((()=>{!async function(t,r,n){for(;e.get(n);){try{await t()}catch(t){setTimeout((()=>{throw t}),1);break}if(!e.get(n))break;await new Promise((t=>{const i=setTimeout(t,r);e.set(n,i)}))}}(t,r,i)}),n);return e.set(i,s),i},clearDelayedInterval:function(t){const r=e.get(t);r&&(clearTimeout(r),e.delete(t))}}},20544:function(t){"use strict";function e(t,e){return t+r(e)}function r(t){let e=t;return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),16843009*(e+(e>>4)&252645135)>>24}function n(t,e){return t[0]-e[0]}function i(t){return t[1]}t.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(t,e){let r=this._internalPositionFor(t,!1);if(void 0===e)-1!==r&&(this._unsetInternalPos(r),this._unsetBit(t),this._changedLength=!0,this._changedData=!0);else{let n=!1;-1===r?(r=this._data.length,this._setBit(t),this._changedData=!0):n=!0,this._setInternalPos(r,t,e,n),this._changedLength=!0}}unset(t){this.set(t,void 0)}get(t){this._sortData();const e=this._internalPositionFor(t,!0);if(-1!==e)return this._data[e][1]}push(t){return this.set(this.length,t),this.length}get length(){if(this._sortData(),this._changedLength){const t=this._data[this._data.length-1];this._length=t?t[0]+1:0,this._changedLength=!1}return this._length}forEach(t){let e=0;for(;e<this.length;)t(this.get(e),e,this),e++}map(t){let e=0,r=new Array(this.length);for(;e<this.length;)r[e]=t(this.get(e),e,this),e++;return r}reduce(t,e){let r=0,n=e;for(;r<this.length;){n=t(n,this.get(r),r),r++}return n}find(t){let e,r,n=0;for(;n<this.length&&!e;)r=this.get(n),e=t(r),n++;return e?r:void 0}_internalPositionFor(t,n){const i=this._bytePosFor(t,n);if(i>=this._bitArrays.length)return-1;const s=this._bitArrays[i],o=t-7*i;if(!((s&1<<o)>0))return-1;return this._bitArrays.slice(0,i).reduce(e,0)+r(s&~(4294967295<<o+1))-1}_bytePosFor(t,e){const r=Math.floor(t/7),n=r+1;for(;!e&&this._bitArrays.length<n;)this._bitArrays.push(0);return r}_setBit(t){const e=this._bytePosFor(t,!1);this._bitArrays[e]|=1<<t-7*e}_unsetBit(t){const e=this._bytePosFor(t,!1);this._bitArrays[e]&=~(1<<t-7*e)}_setInternalPos(t,e,r,n){const i=this._data,s=[e,r];if(n)this._sortData(),i[t]=s;else{if(i.length)if(i[i.length-1][0]>=e)i.push(s);else if(i[0][0]<=e)i.unshift(s);else{const t=Math.round(i.length/2);this._data=i.slice(0,t).concat(s).concat(i.slice(t))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(t){this._data.splice(t,1)}_sortData(){this._changedData&&this._data.sort(n),this._changedData=!1}bitField(){const t=[];let e,r=8,n=0,i=0;const s=this._bitArrays.slice();for(;s.length||n;){0===n&&(e=s.shift(),n=7);const o=Math.min(n,r);i|=(e&~(255<<o))<<8-r,e>>>=o,n-=o,r-=o,r&&(n||s.length)||(t.push(i),i=0,r=8)}for(var o=t.length-1;o>0;o--){if(0!==t[o])break;t.pop()}return t}compactArray(){return this._sortData(),this._data.map(i)}}},50590:function(t){t.exports=t=>{if(t[Symbol.asyncIterator])return t;if(t.getReader)return async function*(){const e=t.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)return;yield r}}finally{e.releaseLock()}}();throw new Error("unknown stream")}},32553:function(t,e,r){"use strict";var n=r(89509).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=c,this.end=u,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function l(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},s.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=o(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if(i=o(e[n]),i>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if(i=o(e[n]),i>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},14153:function(t){const e=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const n={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};t.exports=function(t,i={}){if(i=Object.assign({},n,i),!t||"string"!=typeof t)return t;let s=t.trim();if(void 0!==i.skipLike&&i.skipLike.test(s))return t;if(i.hex&&e.test(s))return Number.parseInt(s,16);{const e=r.exec(s);if(e){const r=e[1],n=e[2];let o=function(t){if(t&&-1!==t.indexOf("."))return"."===(t=t.replace(/0+$/,""))?t="0":"."===t[0]?t="0"+t:"."===t[t.length-1]&&(t=t.substr(0,t.length-1)),t;return t}(e[3]);const a=e[4]||e[6];if(!i.leadingZeros&&n.length>0&&r&&"."!==s[2])return t;if(!i.leadingZeros&&n.length>0&&!r&&"."!==s[1])return t;{const e=Number(s),c=""+e;return-1!==c.search(/[eE]/)||a?i.eNotation?e:t:-1!==s.indexOf(".")?"0"===c&&""===o||c===o||r&&c==="-"+o?e:t:n?o===c||r+o===c?e:t:s===c||s===r+c?e:t}}return t}}},10715:function(t,e,r){"use strict";const{AbortController:n}=globalThis,i=r(82916);class s extends n{constructor(t){super(),this._ms=t,this._timer=i((()=>this.abort()),t),Object.setPrototypeOf(this,s.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=i((()=>this.abort()),this._ms)}}t.exports={TimeoutController:s}},63700:function(t,e,r){"use strict";var n=r(71156),i=r(90793);t.exports=n.bind(null,i)},71156:function(t){"use strict";function e(t){return t>=55296&&t<=56319}function r(t){return t>=56320&&t<=57343}t.exports=function(t,n,i){if("string"!=typeof n)throw new Error("Input must be string");for(var s,o,a=n.length,c=0,u=0;u<a;u+=1){if(s=n.charCodeAt(u),o=n[u],e(s)&&r(n.charCodeAt(u+1))&&(o+=n[u+=1]),(c+=t(o))===i)return n.slice(0,u+1);if(c>i)return n.slice(0,u-o.length+1)}return n}},90793:function(t){"use strict";function e(t){return t>=55296&&t<=56319}function r(t){return t>=56320&&t<=57343}t.exports=function(t){if("string"!=typeof t)throw new Error("Input must be string");for(var n=t.length,i=0,s=null,o=null,a=0;a<n;a++)r(s=t.charCodeAt(a))?null!=o&&e(o)?i+=1:i+=3:s<=127?i+=1:s>=128&&s<=2047?i+=2:s>=2048&&s<=65535&&(i+=3),o=s;return i}},94927:function(t,e,r){var n=r(25108);function i(t){try{if(!r.g.localStorage)return!1}catch(t){return!1}var e=r.g.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?n.trace(e):n.warn(e),r=!0}return t.apply(this,arguments)}}},20384:function(t){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},55955:function(t,e,r){"use strict";var n=r(82584),i=r(48662),s=r(86430),o=r(85692);function a(t){return t.call.bind(t)}var c="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,l=a(Object.prototype.toString),h=a(Number.prototype.valueOf),d=a(String.prototype.valueOf),f=a(Boolean.prototype.valueOf);if(c)var p=a(BigInt.prototype.valueOf);if(u)var g=a(Symbol.prototype.valueOf);function y(t,e){if("object"!=typeof t)return!1;try{return e(t),!0}catch(t){return!1}}function m(t){return"[object Map]"===l(t)}function w(t){return"[object Set]"===l(t)}function b(t){return"[object WeakMap]"===l(t)}function E(t){return"[object WeakSet]"===l(t)}function v(t){return"[object ArrayBuffer]"===l(t)}function _(t){return"undefined"!=typeof ArrayBuffer&&(v.working?v(t):t instanceof ArrayBuffer)}function S(t){return"[object DataView]"===l(t)}function A(t){return"undefined"!=typeof DataView&&(S.working?S(t):t instanceof DataView)}e.isArgumentsObject=n,e.isGeneratorFunction=i,e.isTypedArray=o,e.isPromise=function(t){return"undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},e.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):o(t)||A(t)},e.isUint8Array=function(t){return"Uint8Array"===s(t)},e.isUint8ClampedArray=function(t){return"Uint8ClampedArray"===s(t)},e.isUint16Array=function(t){return"Uint16Array"===s(t)},e.isUint32Array=function(t){return"Uint32Array"===s(t)},e.isInt8Array=function(t){return"Int8Array"===s(t)},e.isInt16Array=function(t){return"Int16Array"===s(t)},e.isInt32Array=function(t){return"Int32Array"===s(t)},e.isFloat32Array=function(t){return"Float32Array"===s(t)},e.isFloat64Array=function(t){return"Float64Array"===s(t)},e.isBigInt64Array=function(t){return"BigInt64Array"===s(t)},e.isBigUint64Array=function(t){return"BigUint64Array"===s(t)},m.working="undefined"!=typeof Map&&m(new Map),e.isMap=function(t){return"undefined"!=typeof Map&&(m.working?m(t):t instanceof Map)},w.working="undefined"!=typeof Set&&w(new Set),e.isSet=function(t){return"undefined"!=typeof Set&&(w.working?w(t):t instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),e.isWeakMap=function(t){return"undefined"!=typeof WeakMap&&(b.working?b(t):t instanceof WeakMap)},E.working="undefined"!=typeof WeakSet&&E(new WeakSet),e.isWeakSet=function(t){return E(t)},v.working="undefined"!=typeof ArrayBuffer&&v(new ArrayBuffer),e.isArrayBuffer=_,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=A;var R="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function T(t){return"[object SharedArrayBuffer]"===l(t)}function I(t){return void 0!==R&&(void 0===T.working&&(T.working=T(new R)),T.working?T(t):t instanceof R)}function C(t){return y(t,h)}function k(t){return y(t,d)}function N(t){return y(t,f)}function B(t){return c&&y(t,p)}function P(t){return u&&y(t,g)}e.isSharedArrayBuffer=I,e.isAsyncFunction=function(t){return"[object AsyncFunction]"===l(t)},e.isMapIterator=function(t){return"[object Map Iterator]"===l(t)},e.isSetIterator=function(t){return"[object Set Iterator]"===l(t)},e.isGeneratorObject=function(t){return"[object Generator]"===l(t)},e.isWebAssemblyCompiledModule=function(t){return"[object WebAssembly.Module]"===l(t)},e.isNumberObject=C,e.isStringObject=k,e.isBooleanObject=N,e.isBigIntObject=B,e.isSymbolObject=P,e.isBoxedPrimitive=function(t){return C(t)||k(t)||N(t)||B(t)||P(t)},e.isAnyArrayBuffer=function(t){return"undefined"!=typeof Uint8Array&&(_(t)||I(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))},89539:function(t,e,r){var n=r(34155),i=r(25108),s=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},o=/%[sdj%]/g;e.format=function(t){if(!E(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(l(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(t).replace(o,(function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),a=n[r];r<i;a=n[++r])w(a)||!S(a)?s+=" "+a:s+=" "+l(a);return s},e.deprecate=function(t,r){if(void 0!==n&&!0===n.noDeprecation)return t;if(void 0===n)return function(){return e.deprecate(t,r).apply(this,arguments)};var s=!1;return function(){if(!s){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?i.trace(r):i.error(r),s=!0}return t.apply(this,arguments)}};var a={},c=/^$/;if(n.env.NODE_DEBUG){var u=n.env.NODE_DEBUG;u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),c=new RegExp("^"+u+"$","i")}function l(t,r){var n={seen:[],stylize:d};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(r)?n.showHidden=r:r&&e._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=h),f(n,t,n.depth)}function h(t,e){var r=l.styles[e];return r?"["+l.colors[r][0]+"m"+t+"["+l.colors[r][1]+"m":t}function d(t,e){return t}function f(t,r,n){if(t.customInspect&&r&&T(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return E(i)||(i=f(t,i,n)),i}var s=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(E(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(b(e))return t.stylize(""+e,"number");if(m(e))return t.stylize(""+e,"boolean");if(w(e))return t.stylize("null","null")}(t,r);if(s)return s;var o=Object.keys(r),a=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(r)),R(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return p(r);if(0===o.length){if(T(r)){var c=r.name?": "+r.name:"";return t.stylize("[Function"+c+"]","special")}if(_(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(A(r))return t.stylize(Date.prototype.toString.call(r),"date");if(R(r))return p(r)}var u,l="",h=!1,d=["{","}"];(y(r)&&(h=!0,d=["[","]"]),T(r))&&(l=" [Function"+(r.name?": "+r.name:"")+"]");return _(r)&&(l=" "+RegExp.prototype.toString.call(r)),A(r)&&(l=" "+Date.prototype.toUTCString.call(r)),R(r)&&(l=" "+p(r)),0!==o.length||h&&0!=r.length?n<0?_(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),u=h?function(t,e,r,n,i){for(var s=[],o=0,a=e.length;o<a;++o)N(e,String(o))?s.push(g(t,e,r,n,String(o),!0)):s.push("");return i.forEach((function(i){i.match(/^\d+$/)||s.push(g(t,e,r,n,i,!0))})),s}(t,r,n,a,o):o.map((function(e){return g(t,r,n,a,e,h)})),t.seen.pop(),function(t,e,r){var n=t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(n>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(u,l,d)):d[0]+l+d[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function g(t,e,r,n,i,s){var o,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),N(n,i)||(o="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=w(r)?f(t,c.value,null):f(t,c.value,r-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(t){return"  "+t})).join("\n").slice(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),v(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function y(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function w(t){return null===t}function b(t){return"number"==typeof t}function E(t){return"string"==typeof t}function v(t){return void 0===t}function _(t){return S(t)&&"[object RegExp]"===I(t)}function S(t){return"object"==typeof t&&null!==t}function A(t){return S(t)&&"[object Date]"===I(t)}function R(t){return S(t)&&("[object Error]"===I(t)||t instanceof Error)}function T(t){return"function"==typeof t}function I(t){return Object.prototype.toString.call(t)}function C(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!a[t])if(c.test(t)){var r=n.pid;a[t]=function(){var n=e.format.apply(e,arguments);i.error("%s %d: %s",t,r,n)}}else a[t]=function(){};return a[t]},e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=r(55955),e.isArray=y,e.isBoolean=m,e.isNull=w,e.isNullOrUndefined=function(t){return null==t},e.isNumber=b,e.isString=E,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=_,e.types.isRegExp=_,e.isObject=S,e.isDate=A,e.types.isDate=A,e.isError=R,e.types.isNativeError=R,e.isFunction=T,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(20384);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,r;i.log("%s - %s",(t=new Date,r=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":"),[t.getDate(),k[t.getMonth()],r].join(" ")),e.format.apply(e,arguments))},e.inherits=r(35717),e._extend=function(t,e){if(!e||!S(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var B="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(B&&t[B]){var e;if("function"!=typeof(e=t[B]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,B,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);i.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,i)}catch(t){r(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),B&&Object.defineProperty(e,B,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,s(t))},e.promisify.custom=B,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var i=e.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return i.apply(s,arguments)};t.apply(this,e).then((function(t){n.nextTick(o.bind(null,null,t))}),(function(t){n.nextTick(P.bind(null,t,o))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,s(t)),e}},82838:function(t,e,r){"use strict";const n=r(94676);t.exports=t=>{if(!(t instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");const e=[];for(;t.length>0;){const r=n.decode(t);e.push(r),t=t.slice(n.decode.bytes)}return e}},26988:function(t){t.exports=function t(n,i){var s,o=0,a=0,c=i=i||0,u=n.length;do{if(c>=u)throw t.bytes=0,new RangeError("Could not decode varint");s=n[c++],o+=a<28?(s&r)<<a:(s&r)*Math.pow(2,a),a+=7}while(s>=e);return t.bytes=c-i,o};var e=128,r=127},1312:function(t){t.exports=function t(i,s,o){s=s||[];var a=o=o||0;for(;i>=n;)s[o++]=255&i|e,i/=128;for(;i&r;)s[o++]=255&i|e,i>>>=7;return s[o]=0|i,t.bytes=o-a+1,s};var e=128,r=-128,n=Math.pow(2,31)},94676:function(t,e,r){t.exports={encode:r(1312),decode:r(26988),encodingLength:r(10082)}},10082:function(t){var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},86430:function(t,e,r){"use strict";var n=r(94029),i=r(63083),s=r(21924),o=r(27296),a=s("Object.prototype.toString"),c=r(96410)(),u="undefined"==typeof globalThis?r.g:globalThis,l=i(),h=s("String.prototype.slice"),d={},f=Object.getPrototypeOf;c&&o&&f&&n(l,(function(t){if("function"==typeof u[t]){var e=new u[t];if(Symbol.toStringTag in e){var r=f(e),n=o(r,Symbol.toStringTag);if(!n){var i=f(r);n=o(i,Symbol.toStringTag)}d[t]=n.get}}}));var p=r(85692);t.exports=function(t){return!!p(t)&&(c&&Symbol.toStringTag in t?function(t){var e=!1;return n(d,(function(r,n){if(!e)try{var i=r.call(t);i===n&&(e=i)}catch(t){}})),e}(t):h(a(t),8,-1))}},79297:function(t){!function(){t.exports=y;var e=86400,r=3200,n=146097*r/400,i=e*n,s=1e3*i,o=864e13,a=4294967296,c=1e6,u="000000000",l=Math.trunc||function(t){var e=t-t%1;return 0==e&&(t<0||0===t&&1/t!=1/0)?-0:e},h=y.prototype,d=(y.fromDate=function(t){return new y(+t)},y.fromInt64BE=v(0,1,2,3,0,4),y.fromInt64LE=v(3,2,1,0,4,0),y.fromString=function(t){var e,r=new y;t=(t+="").replace(/^\s*[+\-]?\d+/,(function(t){var e=1970+((t=+t)-1970)%400;return r.year=t-e,e})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(t,r,n){return r<0&&(n*=-1),e=6e4*(60*+r+ +n),""})).replace(/\.\d+$/,(function(t){return r.nano=+(t+u).substr(1,9),""})).split(/\D+/);if(1<t.length?t[1]--:t[1]=0,r.time=e=Date.UTC.apply(Date,t)-(e||0),isNaN(e))throw new TypeError("Invalid Date");return m(r)},y.fromTimeT=function(t){return b(t,0)},h.year=0,h.time=0,h.nano=0,h.addNano=function(t){return this.nano+=+t||0,this},h.getNano=function(){var t=m(this);return(t.time%1e3*c+ +t.nano+1e9)%1e9},h.getTimeT=function(){var t=m(this),i=Math.floor(t.time/1e3);return(t=t.year)&&(i+=t*n*e/r),i},h.getYear=function(){return this.toDate().getUTCFullYear()+this.year},h.toDate=function(){return w(m(this).time)},h.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},h.toString=function(t){var e=this,r=e.toDate(),n={H:function(){return S(r.getUTCHours())},L:function(){return A(r.getUTCMilliseconds(),3)},M:function(){return S(r.getUTCMinutes())},N:function(){return A(e.getNano(),9)},S:function(){return S(r.getUTCSeconds())},Y:function(){var t=e.getYear();return 999999<t?"+"+t:9999<t?"+"+A(t,6):0<=t?A(t,4):-999999<=t?"-"+A(-t,6):t},a:function(){return p[r.getUTCDay()]},b:function(){return f[r.getUTCMonth()]},d:function(){return S(r.getUTCDate())},e:function(){return function(t){return(9<t?"":" ")+(0|t)}(r.getUTCDate())},m:function(){return S(r.getUTCMonth()+1)}};return function t(e){return e.replace(/%./g,(function(e){var r=e[1],i=g[r];r=n[r];return i?t(i):r?r():e}))}(t||d)},h.writeInt64BE=E(0,1,2,3,0,4),h.writeInt64LE=E(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return y;function y(t,e,r){var n=this;if(!(n instanceof y))return new y(t,e,r);n.time=+t||0,n.nano=+e||0,n.year=+r||0,m(n)}function m(t){var e,n,i,a=t.year,u=t.time,h=t.nano,d=((h<0||c<=h)&&(h-=(n=Math.floor(h/c))*c,u+=n,n=1),a%r);return(u<-o||o<u||d)&&((e=l(u/s))&&(a+=e*r,u-=e*s),(i=w(u)).setUTCFullYear(d+i.getUTCFullYear()),i=(u=+i)+(e=l((a-=d)/r))*s,e&&-o<=i&&i<=o&&(a-=e*r,u=i),n=1),n&&(t.year=a,t.time=u,t.nano=h),t}function w(t){var e=new Date(0);return e.setTime(t),e}function b(t,e){t=+t||0;var n=l((e=(0|e)*a)/i)+l(t/i);return(t=l((e=e%i+t%i)/i))&&(n+=t,e-=t*i),new y(1e3*e,0,n*r)}function E(t,i,s,o,c,u){return function(t,i){var s=m(this);_(t=t||new Array(8),i|=0);var o=Math.floor(s.time/1e3),d=(s=s.year*(n*e/r),l(s/a)+l(o/a));s=s%a+o%a;return(o=Math.floor(s/a))&&(d+=o,s-=o*a),h(t,i+c,d),h(t,i+u,s),t};function h(e,r,n){e[r+t]=n>>24&255,e[r+i]=n>>16&255,e[r+s]=n>>8&255,e[r+o]=255&n}}function v(t,e,r,n,i,s){return function(t,e){_(t,e|=0);var r=o(t,e+i);return b(o(t,e+s),r)};function o(i,s){return 16777216*i[s+t]+(i[s+e]<<16|i[s+r]<<8|i[s+n])}}function _(t,e){if(null==(t=t&&t.length))throw new TypeError("Invalid Buffer");if(t<e+8)throw new RangeError("Out of range")}function S(t){return(9<t?"":"0")+(0|t)}function A(t,e){return(u+(0|t)).substr(-e)}}()},9425:function(t,e,r){"use strict";r.d(e,{U:function(){return xt}});var n=r(49736),i=r(49784);const s=n.C,o=n.aY,a=function(t){let e=0;if(t=t.toString().trim(),s(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach((t=>{r[e++]=255&parseInt(t,10)})),r}if(o(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){let t;s(r[n])&&(t=a(r[n]),r[n]=(0,i.B)(t.slice(0,2),"base16")),null!=t&&++n<8&&r.splice(n,0,(0,i.B)(t.slice(2,4),"base16"))}if(""===r[0])for(;r.length<8;)r.unshift("0");else if(""===r[r.length-1])for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&""!==r[n];n++);const t=[n,1];for(n=9-r.length;n>0;n--)t.push("0");r.splice.apply(r,t)}const o=new Uint8Array(e+16);for(n=0;n<r.length;n++){const t=parseInt(r[n],16);o[e++]=t>>8&255,o[e++]=255&t}return o}throw new Error("invalid ip address")},c=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(4===r){const n=[];for(let i=0;i<r;i++)n.push(t[e+i]);return n.join(".")}if(16===r){const t=[];for(let i=0;i<r;i+=2)t.push(n.getUint16(e+i).toString(16));return t.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},u=-1,l={},h={};function d(t){if("number"==typeof t){if(null!=h[t])return h[t];throw new Error(`no protocol with code: ${t}`)}if("string"==typeof t){if(null!=l[t])return l[t];throw new Error(`no protocol with name: ${t}`)}throw new Error("invalid protocol id type: "+typeof t)}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,u,"ip6zone"],[43,8,"ipcidr"],[53,u,"dns",!0],[54,u,"dns4",!0],[55,u,"dns6",!0],[56,u,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,u,"unix",!1,!0],[421,u,"ipfs"],[421,u,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,u,"garlic64"],[448,0,"tls"],[449,u,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,u,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,u,"memory"]].forEach((t=>{const e=function(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(i)}}(...t);h[e.code]=e,l[e.name]=e}));var f=r(38161),p=r(14249),g=r(81653),y=r(97098),m=r(29094),w=r(20349),b=r(77408),E=r(41690);r(9839);d("ip4"),d("ip6"),d("ipcidr");function v(t,e){switch(d(t).code){case 4:case 41:return function(t){const e=c(t,0,t.length);if(null==e)throw new Error("ipBuff is required");if(!n.h6(e))throw new Error("invalid ip address");return e}(e);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return k(e);case 6:case 273:case 33:case 132:return I(e).toString();case 421:return function(t){const e=w.decode(t),r=t.slice(w.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return(0,i.B)(r,"base58btc")}(e);case 444:case 445:return N(e);case 466:return function(t){const e=w.decode(t),r=t.slice(w.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+(0,i.B)(r,"base64url")}(e);default:return(0,i.B)(e,"base16")}}function _(t,e){switch(d(t).code){case 4:case 41:return R(e);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return C(e);case 6:case 273:case 33:case 132:return T(parseInt(e,10));case 421:return function(t){let e;e="Q"===t[0]||"1"===t[0]?m.Jx(g.base58btc.decode(`z${t}`)).bytes:f.k0.parse(t).multihash.bytes;const r=Uint8Array.from(w.encode(e.length));return(0,E.z)([r,e],r.length+e.length)}(e);case 444:return function(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(16!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=p.base32.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=T(n);return(0,E.z)([r,i],r.length+i.length)}(e);case 445:return function(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(56!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=p.base32.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=T(n);return(0,E.z)([r,i],r.length+i.length)}(e);case 466:return function(t){const e=A.decode(t),r=Uint8Array.from(w.encode(e.length));return(0,E.z)([r,e],r.length+e.length)}(e);default:return(0,b.m)(e,"base16")}}const S=Object.values(y.gh).map((t=>t.decoder)),A=function(){let t=S[0].or(S[1]);return S.slice(2).forEach((e=>t=t.or(e))),t}();function R(t){if(!n.h6(t))throw new Error("invalid ip address");return a(t)}function T(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function I(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function C(t){const e=(0,b.m)(t),r=Uint8Array.from(w.encode(e.length));return(0,E.z)([r,e],r.length+e.length)}function k(t){const e=w.decode(t);if((t=t.slice(w.decode.bytes)).length!==e)throw new Error("inconsistent lengths");return(0,i.B)(t)}function N(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2);return`${(0,i.B)(e,"base32")}:${I(r)}`}function B(t){return t.map((t=>{const e=F(t);return null!=t[1]?[e.code,v(e.code,t[1])]:[e.code]}))}function P(t){return U((0,E.z)(t.map((t=>{const e=F(t);let r=Uint8Array.from(w.encode(e.code));return t.length>1&&null!=t[1]&&(r=(0,E.z)([r,t[1]])),r}))))}function L(t,e){if(t.size>0)return t.size/8;if(0===t.size)return 0;return w.decode(e)+(w.decode.bytes??0)}function D(t){const e=[];let r=0;for(;r<t.length;){const n=w.decode(t,r),s=w.decode.bytes??0,o=L(d(n),t.slice(r+s));if(0===o){e.push([n]),r+=s;continue}const a=t.slice(r+s,r+s+o);if(r+=o+s,r>t.length)throw j("Invalid address Uint8Array: "+(0,i.B)(t,"base16"));e.push([n,a])}return e}function O(t){return function(t){const e=[];return t.map((t=>{const r=F(t);return e.push(r.name),t.length>1&&null!=t[1]&&e.push(t[1]),null})),V(e.join("/"))}(B(D(t)))}function x(t){const e=function(t){const e=[],r=t.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const i=r[n],s=d(i);if(0!==s.size){if(n++,n>=r.length)throw j("invalid address: "+t);if(!0===s.path){e.push([i,V(r.slice(n).join("/"))]);break}e.push([i,r[n]])}else e.push([i])}return e}(t=V(t));return P(e.map((t=>{Array.isArray(t)||(t=[t]);const e=F(t);return t.length>1?[e.code,_(e.code,t[1])]:[e.code]})))}function U(t){const e=M(t);if(null!=e)throw e;return Uint8Array.from(t)}function M(t){try{D(t)}catch(t){return t}}function V(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function j(t){return new Error("Error parsing address: "+t)}function F(t){return d(t[0])}var z=r(32114),K=r(73062);var $,q,H,G,W=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)},Y=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r};const Z=Symbol.for("nodejs.util.inspect.custom"),Q=[d("dns").code,d("dns4").code,d("dns6").code,d("dnsaddr").code],X=new Map,J=Symbol.for("@multiformats/js-multiaddr/multiaddr");function tt(t){return Boolean(t?.[J])}class et{constructor(t){if($.set(this,void 0),q.set(this,void 0),H.set(this,void 0),this[G]=!0,null==t&&(t=""),t instanceof Uint8Array)this.bytes=U(t);else if("string"==typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=x(t)}else{if(!tt(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=U(t.bytes)}}toString(){return null==W(this,$,"f")&&Y(this,$,O(this.bytes),"f"),W(this,$,"f")}toJSON(){return this.toString()}toOptions(){let t,e,r,n,i="";const s=d("tcp"),o=d("udp"),a=d("ip4"),c=d("ip6"),u=d("dns6"),l=d("ip6zone");for(const[h,f]of this.stringTuples())h===l.code&&(i=`%${f??""}`),Q.includes(h)&&(e=s.name,n=443,r=`${f??""}${i}`,t=h===u.code?6:4),h!==s.code&&h!==o.code||(e=d(h).name,n=parseInt(f??"")),h!==a.code&&h!==c.code||(e=d(h).name,r=`${f??""}${i}`,t=h===c.code?6:4);if(null==t||null==e||null==r||null==n)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:r,transport:e,port:n}}protos(){return this.protoCodes().map((t=>Object.assign({},d(t))))}protoCodes(){const t=[],e=this.bytes;let r=0;for(;r<e.length;){const n=w.decode(e,r),i=w.decode.bytes??0;r+=L(d(n),e.slice(r+i))+i,t.push(n)}return t}protoNames(){return this.protos().map((t=>t.name))}tuples(){return null==W(this,q,"f")&&Y(this,q,D(this.bytes),"f"),W(this,q,"f")}stringTuples(){return null==W(this,H,"f")&&Y(this,H,B(this.tuples()),"f"),W(this,H,"f")}encapsulate(t){return t=new et(t),new et(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),r=this.toString(),n=r.lastIndexOf(e);if(n<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new et(r.slice(0,n))}decapsulateCode(t){const e=this.tuples();for(let r=e.length-1;r>=0;r--)if(e[r][0]===t)return new et(P(e.slice(0,r)));return this}getPeerId(){try{const t=this.stringTuples().filter((t=>t[0]===l.ipfs.code)),e=t.pop();if(null!=e?.[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?(0,i.B)(g.base58btc.decode(`z${t}`),"base58btc"):(0,i.B)(f.k0.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){let t=null;try{t=this.stringTuples().filter((t=>!0===d(t[0]).path))[0][1],null==t&&(t=null)}catch{t=null}return t}equals(t){return(0,K.f)(this.bytes,t.bytes)}async resolve(t){const e=this.protos().find((t=>t.resolvable));if(null==e)return[this];const r=X.get(e.name);if(null==r)throw z(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this,t)).map((t=>new et(t)))}nodeAddress(){const t=this.toOptions();if("tcp"!==t.transport&&"udp"!==t.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){const e=(t??this).protos();return 2===e.length&&((4===e[0].code||41===e[0].code)&&(6===e[1].code||273===e[1].code))}[($=new WeakMap,q=new WeakMap,H=new WeakMap,G=J,Z)](){return`Multiaddr(${O(this.bytes)})`}}function rt(t){return new et(t)}const nt=kt("dns4"),it=kt("dns6"),st=kt("dnsaddr"),ot=Ct(kt("dns"),st,nt,it),at=Ct(kt("ip4"),kt("ip6")),ct=Ct(It(at,kt("tcp")),It(ot,kt("tcp"))),ut=It(at,kt("udp")),lt=It(ut,kt("utp")),ht=It(ut,kt("quic")),dt=Ct(It(ct,kt("ws")),It(ot,kt("ws"))),ft=Ct(It(ct,kt("wss")),It(ot,kt("wss")),It(ct,kt("tls"),kt("ws")),It(ot,kt("tls"),kt("ws"))),pt=Ct(It(ct,kt("http")),It(at,kt("http")),It(ot,kt("http"))),gt=Ct(It(ct,kt("https")),It(at,kt("https")),It(ot,kt("https"))),yt=It(ut,kt("webrtc-direct"),kt("certhash")),mt=Ct(It(yt,kt("p2p")),yt),wt=Ct(It(dt,kt("p2p-webrtc-star"),kt("p2p")),It(ft,kt("p2p-webrtc-star"),kt("p2p")),It(dt,kt("p2p-webrtc-star")),It(ft,kt("p2p-webrtc-star"))),bt=(Ct(It(dt,kt("p2p-websocket-star"),kt("p2p")),It(ft,kt("p2p-websocket-star"),kt("p2p")),It(dt,kt("p2p-websocket-star")),It(ft,kt("p2p-websocket-star"))),Ct(It(pt,kt("p2p-webrtc-direct"),kt("p2p")),It(gt,kt("p2p-webrtc-direct"),kt("p2p")),It(pt,kt("p2p-webrtc-direct")),It(gt,kt("p2p-webrtc-direct")))),Et=Ct(dt,ft,pt,gt,wt,bt,ct,lt,ht,ot,mt),vt=(Ct(It(Et,kt("p2p-stardust"),kt("p2p")),It(Et,kt("p2p-stardust"))),Ct(It(Et,kt("p2p")),wt,bt,mt,kt("p2p"))),_t=Ct(It(vt,kt("p2p-circuit"),vt),It(vt,kt("p2p-circuit")),It(kt("p2p-circuit"),vt),It(Et,kt("p2p-circuit")),It(kt("p2p-circuit"),Et),kt("p2p-circuit")),St=()=>Ct(It(_t,St),_t),At=St(),Rt=Ct(It(At,vt,At),It(vt,At),It(At,vt),At,vt);Ct(It(At,kt("webrtc")),It(Et,kt("webrtc")),kt("webrtc"));function Tt(t){return function(e){let r;try{r=rt(e)}catch(t){return!1}const n=t(r.protoNames());return null!==n&&(!0===n||!1===n?n:0===n.length)}}function It(...t){function e(e){if(e.length<t.length)return null;let r=e;return t.some((t=>(r="function"==typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(r)&&(e=r),null===r))),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:Tt(e),partialMatch:e}}function Ct(...t){function e(e){let r=null;return t.some((t=>{const n="function"==typeof t?t().partialMatch(e):t.partialMatch(e);return null!=n&&(r=n,!0)})),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:Tt(e),partialMatch:e}}function kt(t){const e=t;return{toString:function(){return e},matches:function(t){let r;try{r=rt(t)}catch(t){return!1}const n=r.protoNames();return 1===n.length&&n[0]===e},partialMatch:function(t){return 0===t.length?null:t[0]===e?t.slice(1):null}}}var Nt=r(46857),Bt=r(69860),Pt=r(23366),Lt=r(59769);const Dt=(0,Bt.kg)("libp2p:bootstrap");class Ot extends Nt.v{constructor(t,e={list:[]}){if(null==e.list||0===e.list.length)throw new Error("Bootstrap requires a list of peer addresses");super(),this.components=t,this.timeout=e.timeout??1e3,this.list=[];for(const t of e.list){if(!Rt.matches(t)){Dt.error("Invalid multiaddr");continue}const e=rt(t),r=e.getPeerId();if(null==r){Dt.error("Invalid bootstrap multiaddr without peer id");continue}const n={id:(0,Pt.jE)(r),multiaddrs:[e],protocols:[]};this.list.push(n)}this._init=e}get[Lt.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/bootstrap"}isStarted(){return Boolean(this.timer)}start(){this.isStarted()||(Dt("Starting bootstrap node discovery, discovering peers after %s ms",this.timeout),this.timer=setTimeout((()=>{this._discoverBootstrapPeers().catch((t=>{Dt.error(t)}))}),this.timeout))}async _discoverBootstrapPeers(){if(null!=this.timer)for(const t of this.list){if(await this.components.peerStore.tagPeer(t.id,this._init.tagName??"bootstrap",{value:this._init.tagValue??50,ttl:this._init.tagTTL??12e4}),null==this.timer)return;this.dispatchEvent(new Nt.A("peer",{detail:t}))}}stop(){null!=this.timer&&clearTimeout(this.timer),this.timer=void 0}}function xt(t){return e=>new Ot(e,t)}Ot.tag="bootstrap"},63042:function(t,e,r){"use strict";r.d(e,{U:function(){return a}});var n=r(44234),i={SHA1:20,SHA256:32,SHA512:64};const s={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},o=async(t,e)=>{const r=await n.Z.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,0,r.byteLength)};async function a(t,e){const r=s[t],a=await n.Z.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{digest:async t=>await o(a,t),length:i[t]}}},79944:function(t,e,r){"use strict";r.d(e,{XP:function(){return i},nk:function(){return u},O6:function(){return s.Z}});r(63042),r(8925),r(3832),r(49784),r(77408);var n=r(52770);var i=r(86906),s=r(95887),o=r(98960),a=r(97116);const c={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function u(t,e,r,i,s){if("sha1"!==s&&"sha2-256"!==s&&"sha2-512"!==s){const t=Object.keys(c).join(" / ");throw new n.s(`Hash '${s}' is unknown or not supported. Must be ${t}`,"ERR_UNSUPPORTED_HASH_TYPE")}const u=c[s],l=o(t,e,r,i,u);return a.encode64(l,null)}},86906:function(t,e,r){"use strict";r.r(e),r.d(e,{generateEphemeralKeyPair:function(){return B},generateKeyPair:function(){return me},generateKeyPairFromSeed:function(){return we},importKey:function(){return Se},keyStretcher:function(){return w},keysPBM:function(){return n},marshalPrivateKey:function(){return _e},marshalPublicKey:function(){return Ee},supportedKeys:function(){return pe},unmarshalPrivateKey:function(){return ve},unmarshalPublicKey:function(){return be}});var n={};r.r(n),r.d(n,{KeyType:function(){return a},PrivateKey:function(){return l},PublicKey:function(){return u}});var i={};r.r(i),r.d(i,{RsaPrivateKey:function(){return K},RsaPublicKey:function(){return z},fromJwk:function(){return H},generateKeyPair:function(){return G},unmarshalRsaPrivateKey:function(){return $},unmarshalRsaPublicKey:function(){return q}});var s={};r.r(s),r.d(s,{Ed25519PrivateKey:function(){return ee},Ed25519PublicKey:function(){return te},generateKeyPair:function(){return ie},generateKeyPairFromSeed:function(){return se},unmarshalEd25519PrivateKey:function(){return re},unmarshalEd25519PublicKey:function(){return ne}});var o={};r.r(o),r.d(o,{Secp256k1PrivateKey:function(){return le},Secp256k1PublicKey:function(){return ue},generateKeyPair:function(){return fe},unmarshalSecp256k1PrivateKey:function(){return he},unmarshalSecp256k1PublicKey:function(){return de}});var a,c,u,l,h=r(46888);!function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"}(a||(a={})),function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"}(c||(c={})),function(t){t.codec=()=>(0,h.Ji)(c)}(a||(a={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,h.yw)(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),null!=t.Type&&(e.uint32(8),a.codec().encode(t.Type,e)),null!=t.Data&&(e.uint32(18),e.bytes(t.Data)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.Type=a.codec().decode(t);break;case 2:r.Data=t.bytes();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>(0,h.LE)(e,t.codec()),t.decode=e=>(0,h.C6)(e,t.codec())}(u||(u={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,h.yw)(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),null!=t.Type&&(e.uint32(8),a.codec().encode(t.Type,e)),null!=t.Data&&(e.uint32(18),e.bytes(t.Data)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.Type=a.codec().decode(t);break;case 2:r.Data=t.bytes();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>(0,h.LE)(e,t.codec()),t.decode=e=>(0,h.C6)(e,t.codec())}(l||(l={}));r(3068),r(97450);var d=r(3832),f=r(52770),p=r(77408),g=r(41690),y=r(63042);const m={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,keySize:32}};async function w(t,e,r){const n=m[t];if(null==n){const e=Object.keys(m).join(" / ");throw new f.s(`unknown cipher type '${t}'. Must be ${e}`,"ERR_INVALID_CIPHER_TYPE")}if(null==e)throw new f.s("missing hash type","ERR_MISSING_HASH_TYPE");const i=n.keySize,s=n.ivSize,o=(0,p.m)("key expansion"),a=2*(s+i+20),c=await y.U(e,r);let u=await c.digest(o);const l=[];let h=0;for(;h<a;){const t=await c.digest((0,g.z)([u,o]));let e=t.length;h+e>a&&(e=a-h),l.push(t),h+=e,u=await c.digest(u)}const d=a/2,w=(0,g.z)(l),b=w.subarray(0,d),E=w.subarray(d,a),v=t=>({iv:t.subarray(0,s),cipherKey:t.subarray(s,s+i),macKey:t.subarray(s+i)});return{k1:v(b),k2:v(E)}}var b=r(44234),E=(r(97116),r(15764),r(49784));function v(t,e){let r=Uint8Array.from(t.abs().toByteArray());if(r=0===r[0]?r.subarray(1):r,null!=e){if(r.length>e)throw new Error("byte array longer than desired length");r=(0,g.z)([new Uint8Array(e-r.length),r])}return(0,E.B)(r,"base64url")}function _(t){const e=S(t);return new d.jsbn.BigInteger((0,E.B)(e,"base16"),16)}function S(t,e){let r=(0,p.m)(t,"base64urlpad");if(null!=e){if(r.length>e)throw new Error("byte array longer than desired length");r=(0,g.z)([new Uint8Array(e-r.length),r])}return r}var A=r(73062);const R={"P-256":256,"P-384":384,"P-521":521},T=Object.keys(R).join(" / ");const I={"P-256":32,"P-384":48,"P-521":66};function C(t){if(null==t.crv||null==t.x||null==t.y)throw new f.s("JWK was missing components","ERR_INVALID_PARAMETERS");if("P-256"!==t.crv&&"P-384"!==t.crv&&"P-521"!==t.crv)throw new f.s(`Unknown curve: ${t.crv}. Must be ${T}`,"ERR_INVALID_CURVE");const e=I[t.crv];return(0,g.z)([Uint8Array.from([4]),S(t.x,e),S(t.y,e)],1+2*e)}function k(t,e){if("P-256"!==t&&"P-384"!==t&&"P-521"!==t)throw new f.s(`Unknown curve: ${t}. Must be ${T}`,"ERR_INVALID_CURVE");const r=I[t];if(!(0,A.f)(e.subarray(0,1),Uint8Array.from([4])))throw new f.s("Cannot unmarshal public key - invalid key format","ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:(0,E.B)(e.subarray(1,r+1),"base64url"),y:(0,E.B)(e.subarray(1+r),"base64url"),ext:!0}}const N=(t,e)=>({...k(t,e.public),d:(0,E.B)(e.private,"base64url")});var B=async function(t){if("P-256"!==t&&"P-384"!==t&&"P-521"!==t)throw new f.s(`Unknown curve: ${t}. Must be ${T}`,"ERR_INVALID_CURVE");const e=await b.Z.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]);return{key:C(await b.Z.get().subtle.exportKey("jwk",e.publicKey)),genSharedKey:async(r,n)=>{let i;i=null!=n?await b.Z.get().subtle.importKey("jwk",N(t,n),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):e.privateKey;const s=await b.Z.get().subtle.importKey("jwk",k(t,r),{name:"ECDH",namedCurve:t},!1,[]),o=await b.Z.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:s},i,R[t]);return new Uint8Array(o,0,o.byteLength)}}},P=r(99382);function L(t){const e=t?.algorithm??"AES-GCM";let r=t?.keyLength??16;const n=t?.nonceLength??12,i=t?.digest??"SHA-256",s=t?.saltLength??16,o=t?.iterations??32767,a=b.Z.get();r*=8;return{encrypt:async function(t,c){const u=a.getRandomValues(new Uint8Array(s)),l=a.getRandomValues(new Uint8Array(n)),h={name:e,iv:l};"string"==typeof c&&(c=(0,p.m)(c));const d={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},f=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),y=await a.subtle.deriveKey(d,f,{name:e,length:r},!0,["encrypt"]),m=await a.subtle.encrypt(h,y,t);return(0,g.z)([u,h.iv,new Uint8Array(m)])},decrypt:async function(t,c){const u=t.subarray(0,s),l=t.subarray(s,s+n),h=t.subarray(s+n),d={name:e,iv:l};"string"==typeof c&&(c=(0,p.m)(c));const f={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},g=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),y=await a.subtle.deriveKey(f,g,{name:e,length:r},!0,["decrypt"]),m=await a.subtle.decrypt(d,y,h);return new Uint8Array(m)}}}var D=r(27353),O=(r(63219),r(95887));r(28095);function x(t,e){return e.map((e=>_(t[e])))}async function U(t){const e=[await b.Z.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await V(t)],r=await M({privateKey:e[0],publicKey:e[1]});return{privateKey:r[0],publicKey:r[1]}}async function M(t){if(null==t.privateKey||null==t.publicKey)throw new f.s("Private and public key are required","ERR_INVALID_PARAMETERS");return await Promise.all([b.Z.get().subtle.exportKey("jwk",t.privateKey),b.Z.get().subtle.exportKey("jwk",t.publicKey)])}async function V(t){return await b.Z.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function j(t,e,r,n){const i=e?function(t){return d.pki.setRsaPublicKey(...x(t,["n","e"]))}(t):function(t){return d.pki.setRsaPrivateKey(...x(t,["n","e","d","p","q","dp","dq","qi"]))}(t),s=n((0,E.B)(Uint8Array.from(r),"ascii"),i);return(0,p.m)(s,"ascii")}async function F(t,e){const r=L(),n=await r.encrypt(t,e);return P.base64.encode(n)}class z{constructor(t){this._key=t}async verify(t,e){return await async function(t,e,r){const n=await b.Z.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await b.Z.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r)}(this._key,e,t)}marshal(){return function(t){if(null==t.n||null==t.e)throw new f.s("JWK was missing components","ERR_INVALID_PARAMETERS");const e=d.pki.publicKeyToAsn1({n:_(t.n),e:_(t.e)});return(0,p.m)(d.asn1.toDer(e).getBytes(),"ascii")}(this._key)}get bytes(){return u.encode({Type:a.RSA,Data:this.marshal()}).subarray()}encrypt(t){return j(this._key,!0,t,((t,e)=>e.encrypt(t)))}equals(t){return(0,A.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await D.sha256.digest(this.bytes);return t}}class K{constructor(t,e){this._key=t,this._publicKey=e}genSecret(){return O.Z(16)}async sign(t){return await async function(t,e){const r=await b.Z.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await b.Z.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(n,0,n.byteLength)}(this._key,t)}get public(){if(null==this._publicKey)throw new f.s("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new z(this._publicKey)}decrypt(t){return j(this._key,!1,t,((t,e)=>e.decrypt(t)))}marshal(){return function(t){if(null==t.n||null==t.e||null==t.d||null==t.p||null==t.q||null==t.dp||null==t.dq||null==t.qi)throw new f.s("JWK was missing components","ERR_INVALID_PARAMETERS");const e=d.pki.privateKeyToAsn1({n:_(t.n),e:_(t.e),d:_(t.d),p:_(t.p),q:_(t.q),dP:_(t.dp),dQ:_(t.dq),qInv:_(t.qi)});return(0,p.m)(d.asn1.toDer(e).getBytes(),"ascii")}(this._key)}get bytes(){return l.encode({Type:a.RSA,Data:this.marshal()}).subarray()}equals(t){return(0,A.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await D.sha256.digest(this.bytes);return t}async id(){const t=await this.public.hash();return(0,E.B)(t,"base58btc")}async export(t,e="pkcs-8"){if("pkcs-8"===e){const e=new d.util.ByteBuffer(this.marshal()),r=d.asn1.fromDer(e),n=d.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return d.pki.encryptRsaPrivateKey(n,t,i)}if("libp2p-key"===e)return await F(this.bytes,t);throw new f.s(`export format '${e}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}async function $(t){const e=function(t){const e=d.asn1.fromDer((0,E.B)(t,"ascii")),r=d.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:v(r.n),e:v(r.e),d:v(r.d),p:v(r.p),q:v(r.q),dp:v(r.dP),dq:v(r.dQ),qi:v(r.qInv),alg:"RS256"}}(t),r=await U(e);return new K(r.privateKey,r.publicKey)}function q(t){const e=function(t){const e=d.asn1.fromDer((0,E.B)(t,"ascii")),r=d.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:v(r.n),e:v(r.e)}}(t);return new z(e)}async function H(t){const e=await U(t);return new K(e.privateKey,e.publicKey)}async function G(t){const e=await async function(t){const e=await b.Z.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await M(e);return{privateKey:r[0],publicKey:r[1]}}(t);return new K(e.privateKey,e.publicKey)}var W=r(81653),Y=r(38566),Z=r(7420),Q=r.t(Z,2);const X=BigInt(0),J=BigInt(1),tt=BigInt(2),et=BigInt(8),rt=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),nt=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:rt,n:rt,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),it=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),st=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),ot=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),at=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ct=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),ut=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class lt{constructor(t,e,r,n){this.x=t,this.y=e,this.z=r,this.t=n}static fromAffine(t){if(!(t instanceof mt))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(mt.ZERO)?lt.ZERO:new lt(t.x,t.y,J,kt(t.x*t.y))}static toAffineBatch(t){const e=function(t,e=nt.P){const r=new Array(t.length),n=Nt(t.reduce(((t,n,i)=>n===X?t:(r[i]=t,kt(t*n,e))),J),e);return t.reduceRight(((t,n,i)=>n===X?t:(r[i]=kt(t*r[i],e),kt(t*n,e))),n),r}(t.map((t=>t.z)));return t.map(((t,r)=>t.toAffine(e[r])))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){dt(t);const{x:e,y:r,z:n}=this,{x:i,y:s,z:o}=t,a=kt(e*o),c=kt(i*n),u=kt(r*o),l=kt(s*n);return a===c&&u===l}negate(){return new lt(kt(-this.x),this.y,this.z,kt(-this.t))}double(){const{x:t,y:e,z:r}=this,{a:n}=nt,i=kt(t*t),s=kt(e*e),o=kt(tt*kt(r*r)),a=kt(n*i),c=t+e,u=kt(kt(c*c)-i-s),l=a+s,h=l-o,d=a-s,f=kt(u*h),p=kt(l*d),g=kt(u*d),y=kt(h*l);return new lt(f,p,y,g)}add(t){dt(t);const{x:e,y:r,z:n,t:i}=this,{x:s,y:o,z:a,t:c}=t,u=kt((r-e)*(o+s)),l=kt((r+e)*(o-s)),h=kt(l-u);if(h===X)return this.double();const d=kt(n*tt*c),f=kt(i*tt*a),p=f+d,g=l+u,y=f-d,m=kt(p*h),w=kt(g*y),b=kt(p*y),E=kt(h*g);return new lt(m,w,E,b)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,r=[];let n=this,i=n;for(let s=0;s<e;s++){i=n,r.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(t,e){!e&&this.equals(lt.BASE)&&(e=mt.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&yt.get(e);n||(n=this.precomputeWindow(r),e&&1!==r&&(n=lt.normalizeZ(n),yt.set(e,n)));let i=lt.ZERO,s=lt.BASE;const o=1+256/r,a=2**(r-1),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let e=0;e<o;e++){const r=e*a;let o=Number(t&c);t>>=l,o>a&&(o-=u,t+=J);const h=r,d=r+Math.abs(o)-1,f=e%2!=0,p=o<0;0===o?s=s.add(ht(f,n[h])):i=i.add(ht(p,n[d]))}return lt.normalizeZ([i,s])[0]}multiply(t,e){return this.wNAF(Ut(t,nt.l),e)}multiplyUnsafe(t){let e=Ut(t,nt.l,!1);const r=lt.BASE,n=lt.ZERO;if(e===X)return n;if(this.equals(n)||e===J)return this;if(this.equals(r))return this.wNAF(e);let i=n,s=this;for(;e>X;)e&J&&(i=i.add(s)),s=s.double(),e>>=J;return i}isSmallOrder(){return this.multiplyUnsafe(nt.h).equals(lt.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(nt.l/tt).double();return nt.l%tt&&(t=t.add(this)),t.equals(lt.ZERO)}toAffine(t){const{x:e,y:r,z:n}=this,i=this.equals(lt.ZERO);null==t&&(t=i?et:Nt(n));const s=kt(e*t),o=kt(r*t),a=kt(n*t);if(i)return mt.ZERO;if(a!==J)throw new Error("invZ was invalid");return new mt(s,o)}fromRistrettoBytes(){pt()}toRistrettoBytes(){pt()}fromRistrettoHash(){pt()}}function ht(t,e){const r=e.negate();return t?r:e}function dt(t){if(!(t instanceof lt))throw new TypeError("ExtendedPoint expected")}function ft(t){if(!(t instanceof gt))throw new TypeError("RistrettoPoint expected")}function pt(){throw new Error("Legacy method: switch to RistrettoPoint")}lt.BASE=new lt(nt.Gx,nt.Gy,J,kt(nt.Gx*nt.Gy)),lt.ZERO=new lt(X,J,J,X);class gt{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=nt,r=kt(st*t*t),n=kt((r+J)*ct);let i=BigInt(-1);const s=kt((i-e*r)*kt(r+e));let{isValid:o,value:a}=Lt(n,s),c=kt(a*t);Rt(c)||(c=kt(-c)),o||(a=c),o||(i=r);const u=kt(i*(r-J)*ut-s),l=a*a,h=kt((a+a)*s),d=kt(u*ot),f=kt(J-l),p=kt(J+l);return new lt(kt(h*p),kt(f*d),kt(d*p),kt(h*f))}static hashToCurve(t){const e=Ct((t=xt(t,64)).slice(0,32)),r=this.calcElligatorRistrettoMap(e),n=Ct(t.slice(32,64)),i=this.calcElligatorRistrettoMap(n);return new gt(r.add(i))}static fromHex(t){t=xt(t,32);const{a:e,d:r}=nt,n="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=Ct(t);if(!function(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}(At(i),t)||Rt(i))throw new Error(n);const s=kt(i*i),o=kt(J+e*s),a=kt(J-e*s),c=kt(o*o),u=kt(a*a),l=kt(e*r*c-u),{isValid:h,value:d}=Dt(kt(l*u)),f=kt(d*a),p=kt(d*f*l);let g=kt((i+i)*f);Rt(g)&&(g=kt(-g));const y=kt(o*p),m=kt(g*y);if(!h||Rt(m)||y===X)throw new Error(n);return new gt(new lt(g,y,J,m))}toRawBytes(){let{x:t,y:e,z:r,t:n}=this.ep;const i=kt(kt(r+e)*kt(r-e)),s=kt(t*e),o=kt(s*s),{value:a}=Dt(kt(i*o)),c=kt(a*i),u=kt(a*s),l=kt(c*u*n);let h;if(Rt(n*l)){let r=kt(e*st),n=kt(t*st);t=r,e=n,h=kt(c*at)}else h=u;Rt(t*l)&&(e=kt(-e));let d=kt((r-e)*h);return Rt(d)&&(d=kt(-d)),At(d)}toHex(){return vt(this.toRawBytes())}toString(){return this.toHex()}equals(t){ft(t);const e=this.ep,r=t.ep,n=kt(e.x*r.y)===kt(e.y*r.x),i=kt(e.y*r.y)===kt(e.x*r.x);return n||i}add(t){return ft(t),new gt(this.ep.add(t.ep))}subtract(t){return ft(t),new gt(this.ep.subtract(t.ep))}multiply(t){return new gt(this.ep.multiply(t))}multiplyUnsafe(t){return new gt(this.ep.multiplyUnsafe(t))}}gt.BASE=new gt(lt.BASE),gt.ZERO=new gt(lt.ZERO);const yt=new WeakMap;class mt{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,yt.delete(this)}static fromHex(t,e=!0){const{d:r,P:n}=nt,i=(t=xt(t,32)).slice();i[31]=-129&t[31];const s=Tt(i);if(e&&s>=n)throw new Error("Expected 0 < hex < P");if(!e&&s>=it)throw new Error("Expected 0 < hex < 2**256");const o=kt(s*s),a=kt(o-J),c=kt(r*o+J);let{isValid:u,value:l}=Lt(a,c);if(!u)throw new Error("Point.fromHex: invalid y coordinate");const h=(l&J)===J;return 0!=(128&t[31])!==h&&(l=kt(-l)),new mt(l,s)}static async fromPrivateKey(t){return(await zt(t)).point}toRawBytes(){const t=At(this.y);return t[31]|=this.x&J?128:0,t}toHex(){return vt(this.toRawBytes())}toX25519(){const{y:t}=this;return At(kt((J+t)*Nt(J-t)))}isTorsionFree(){return lt.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new mt(kt(-this.x),this.y)}add(t){return lt.fromAffine(this).add(lt.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return lt.fromAffine(this).multiply(t,this).toAffine()}}mt.BASE=new mt(nt.Gx,nt.Gy),mt.ZERO=new mt(X,J);class wt{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=xt(t,64),r=mt.fromHex(e.slice(0,32),!1),n=Tt(e.slice(32,64));return new wt(r,n)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof mt))throw new Error("Expected Point instance");return Ut(e,nt.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(At(this.s),32),t}toHex(){return vt(this.toRawBytes())}}function bt(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r}const Et=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function vt(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Et[t[r]];return e}function _t(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,i=t.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[r]=s}return e}function St(t){return _t(t.toString(16).padStart(64,"0"))}function At(t){return St(t).reverse()}function Rt(t){return(kt(t)&J)===J}function Tt(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+vt(Uint8Array.from(t).reverse()))}const It=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Ct(t){return kt(Tt(t)&It)}function kt(t,e=nt.P){const r=t%e;return r>=X?r:e+r}function Nt(t,e=nt.P){if(t===X||e<=X)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=kt(t,e),n=e,i=X,s=J,o=J,a=X;for(;r!==X;){const t=n/r,e=n%r,c=i-o*t,u=s-a*t;n=r,r=e,i=o,s=a,o=c,a=u}if(n!==J)throw new Error("invert: does not exist");return kt(i,e)}function Bt(t,e){const{P:r}=nt;let n=t;for(;e-- >X;)n*=n,n%=r;return n}function Pt(t){const{P:e}=nt,r=BigInt(5),n=BigInt(10),i=BigInt(20),s=BigInt(40),o=BigInt(80),a=t*t%e*t%e,c=Bt(a,tt)*a%e,u=Bt(c,J)*t%e,l=Bt(u,r)*u%e,h=Bt(l,n)*l%e,d=Bt(h,i)*h%e,f=Bt(d,s)*d%e,p=Bt(f,o)*f%e,g=Bt(p,o)*f%e,y=Bt(g,n)*l%e;return{pow_p_5_8:Bt(y,tt)*t%e,b2:a}}function Lt(t,e){const r=kt(e*e*e),n=kt(r*r*e);let i=kt(t*r*Pt(t*n).pow_p_5_8);const s=kt(e*i*i),o=i,a=kt(i*st),c=s===t,u=s===kt(-t),l=s===kt(-t*st);return c&&(i=o),(u||l)&&(i=a),Rt(i)&&(i=kt(-i)),{isValid:c||u,value:i}}function Dt(t){return Lt(J,t)}function Ot(t){return kt(Tt(t),nt.l)}function xt(t,e){const r=t instanceof Uint8Array?Uint8Array.from(t):_t(t);if("number"==typeof e&&r.length!==e)throw new Error(`Expected ${e} bytes`);return r}function Ut(t,e,r=!0){if(!e)throw new TypeError("Specify max value");if("number"==typeof t&&Number.isSafeInteger(t)&&(t=BigInt(t)),"bigint"==typeof t&&t<e)if(r){if(X<t)return t}else if(X<=t)return t;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function Mt(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Vt(t){if(32!==(t="bigint"==typeof t||"number"==typeof t?St(Ut(t,it)):xt(t)).length)throw new Error("Expected 32 bytes");return t}function jt(t){const e=Mt(t.slice(0,32)),r=t.slice(32,64),n=Ot(e),i=mt.BASE.multiply(n),s=i.toRawBytes();return{head:e,prefix:r,scalar:n,point:i,pointBytes:s}}let Ft;async function zt(t){return jt(await Gt.sha512(Vt(t)))}async function Kt(t){return(await zt(t)).pointBytes}function $t(t,e,r){e=xt(e),r instanceof mt||(r=mt.fromHex(r,!1));const{r:n,s:i}=t instanceof wt?t.assertValidity():wt.fromHex(t);return{r:n,s:i,SB:lt.BASE.multiplyUnsafe(i),pub:r,msg:e}}function qt(t,e,r,n){const i=Ot(n),s=lt.fromAffine(t).multiplyUnsafe(i);return lt.fromAffine(e).add(s).subtract(r).multiplyUnsafe(nt.h).equals(lt.ZERO)}mt.BASE._setWindowSize(8);const Ht={node:Q,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},Gt={bytesToHex:vt,hexToBytes:_t,concatBytes:bt,getExtendedPublicKey:zt,mod:kt,invert:Nt,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:t=>{if((t=xt(t)).length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return kt(Tt(t),nt.l-J)+J},randomBytes:(t=32)=>{if(Ht.web)return Ht.web.getRandomValues(new Uint8Array(t));if(Ht.node){const{randomBytes:e}=Ht.node;return new Uint8Array(e(t).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Gt.randomBytes(32),sha512:async(...t)=>{const e=bt(...t);if(Ht.web){const t=await Ht.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(t)}if(Ht.node)return Uint8Array.from(Ht.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")},precompute(t=8,e=mt.BASE){const r=e.equals(mt.BASE)?e:new mt(e.x,e.y);return r._setWindowSize(t),r.multiply(tt),r},sha512Sync:void 0};Object.defineProperties(Gt,{sha512Sync:{configurable:!1,get:()=>Ft,set(t){Ft||(Ft=t)}}});const Wt=32,Yt=64,Zt=32;async function Qt(t,e){const r=t.subarray(0,Zt);return await async function(t,e){t=xt(t);const{prefix:r,scalar:n,pointBytes:i}=await zt(e),s=Ot(await Gt.sha512(r,t)),o=mt.BASE.multiply(s),a=kt(s+Ot(await Gt.sha512(o.toRawBytes(),i,t))*n,nt.l);return new wt(o,a).toRawBytes()}(e,r)}async function Xt(t,e,r){return await async function(t,e,r){const{r:n,SB:i,msg:s,pub:o}=$t(t,e,r),a=await Gt.sha512(n.toRawBytes(),o.toRawBytes(),s);return qt(o,n,i,a)}(e,r,t)}function Jt(t,e){const r=new Uint8Array(Yt);for(let n=0;n<Zt;n++)r[n]=t[n],r[Zt+n]=e[n];return r}class te{constructor(t){this._key=oe(t,Wt)}async verify(t,e){return await Xt(this._key,e,t)}marshal(){return this._key}get bytes(){return u.encode({Type:a.Ed25519,Data:this.marshal()}).subarray()}equals(t){return(0,A.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await D.sha256.digest(this.bytes);return t}}class ee{constructor(t,e){this._key=oe(t,Yt),this._publicKey=oe(e,Wt)}async sign(t){return await Qt(this._key,t)}get public(){return new te(this._publicKey)}marshal(){return this._key}get bytes(){return l.encode({Type:a.Ed25519,Data:this.marshal()}).subarray()}equals(t){return(0,A.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await D.sha256.digest(this.bytes);return t}async id(){const t=Y.identity.digest(this.public.bytes);return W.base58btc.encode(t.bytes).substring(1)}async export(t,e="libp2p-key"){if("libp2p-key"===e)return await F(this.bytes,t);throw new f.s(`export format '${e}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function re(t){if(t.length>Yt){const e=(t=oe(t,Yt+Wt)).subarray(0,Yt),r=t.subarray(Yt,t.length);return new ee(e,r)}const e=(t=oe(t,Yt)).subarray(0,Yt),r=t.subarray(Wt);return new ee(e,r)}function ne(t){return t=oe(t,Wt),new te(t)}async function ie(){const{privateKey:t,publicKey:e}=await async function(){const t=Gt.randomPrivateKey(),e=await Kt(t);return{privateKey:Jt(t,e),publicKey:e}}();return new ee(t,e)}async function se(t){const{privateKey:e,publicKey:r}=await async function(t){if(t.length!==Zt)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=t,r=await Kt(e);return{privateKey:Jt(e,r),publicKey:r}}(t);return new ee(e,r)}function oe(t,e){if((t=Uint8Array.from(t??[])).length!==e)throw new f.s(`Key must be a Uint8Array of length ${e}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}var ae=r(27760);function ce(t){try{ae.E9.fromHex(t)}catch(t){throw new f.s(String(t),"ERR_INVALID_PUBLIC_KEY")}}class ue{constructor(t){ce(t),this._key=t}async verify(t,e){return await async function(t,e,r){try{const{digest:n}=await D.sha256.digest(r);return ae.T(e,n,t)}catch(t){throw new f.s(String(t),"ERR_INVALID_INPUT")}}(this._key,e,t)}marshal(){return t=this._key,ae.E9.fromHex(t).toRawBytes(!0);var t}get bytes(){return u.encode({Type:a.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return(0,A.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await D.sha256.digest(this.bytes);return t}}class le{constructor(t,e){this._key=t,this._publicKey=e??function(t){try{return ae.$3(t,!0)}catch(t){throw new f.s(String(t),"ERR_INVALID_PRIVATE_KEY")}}(t),function(t){try{ae.$3(t,!0)}catch(t){throw new f.s(String(t),"ERR_INVALID_PRIVATE_KEY")}}(this._key),ce(this._publicKey)}async sign(t){return await async function(t,e){const{digest:r}=await D.sha256.digest(e);try{return await ae.Xx(r,t)}catch(t){throw new f.s(String(t),"ERR_INVALID_INPUT")}}(this._key,t)}get public(){return new ue(this._publicKey)}marshal(){return this._key}get bytes(){return l.encode({Type:a.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return(0,A.f)(this.bytes,t.bytes)}async hash(){const{bytes:t}=await D.sha256.digest(this.bytes);return t}async id(){const t=await this.public.hash();return(0,E.B)(t,"base58btc")}async export(t,e="libp2p-key"){if("libp2p-key"===e)return await F(this.bytes,t);throw new f.s(`export format '${e}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function he(t){return new le(t)}function de(t){return new ue(t)}async function fe(){const t=ae.P6.randomPrivateKey();return new le(t)}const pe={rsa:i,ed25519:s,secp256k1:o};function ge(t){const e=Object.keys(pe).join(" / ");return new f.s(`invalid or unsupported key type ${t}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function ye(t){if("rsa"===(t=t.toLowerCase())||"ed25519"===t||"secp256k1"===t)return pe[t];throw ge(t)}async function me(t,e){return await ye(t).generateKeyPair(e??2048)}async function we(t,e,r){if("ed25519"!==t.toLowerCase())throw new f.s("Seed key derivation is unimplemented for RSA or secp256k1","ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return await se(e)}function be(t){const e=u.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case a.RSA:return pe.rsa.unmarshalRsaPublicKey(r);case a.Ed25519:return pe.ed25519.unmarshalEd25519PublicKey(r);case a.Secp256k1:return pe.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw ge(e.Type??"RSA")}}function Ee(t,e){return ye(e=(e??"rsa").toLowerCase()),t.bytes}async function ve(t){const e=l.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case a.RSA:return await pe.rsa.unmarshalRsaPrivateKey(r);case a.Ed25519:return pe.ed25519.unmarshalEd25519PrivateKey(r);case a.Secp256k1:return pe.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw ge(e.Type??"RSA")}}function _e(t,e){return ye(e=(e??"rsa").toLowerCase()),t.bytes}async function Se(t,e){try{const r=await async function(t,e){const r=P.base64.decode(t),n=L();return await n.decrypt(r,e)}(t,e);return await ve(r)}catch(t){}const r=d.pki.decryptRsaPrivateKey(t,e);if(null===r)throw new f.s("Cannot read the key, most likely the password is wrong or not a RSA key","ERR_CANNOT_DECRYPT_PEM");let n=d.asn1.toDer(d.pki.privateKeyToAsn1(r));return n=(0,p.m)(n.getBytes(),"ascii"),await pe.rsa.unmarshalRsaPrivateKey(n)}},95887:function(t,e,r){"use strict";r.d(e,{Z:function(){return s}});var n=r(27760),i=r(52770);function s(t){if(isNaN(t)||t<=0)throw new i.s("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return n.P6.randomBytes(t)}},44234:function(t,e){"use strict";e.Z={get(t=globalThis){const e=t.crypto;if(null==e||null==e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}}},35505:function(t,e,r){"use strict";r.d(e,{OP:function(){return p}});var n=r(69860),i=r(93361),s=r(28364),o=r(85275),a=r(32114),c=r(32044);const u=(0,n.kg)("libp2p:delegated-content-routing"),l=3e4;var h,d;!function(t){t[t.SENDING_QUERY=0]="SENDING_QUERY",t[t.PEER_RESPONSE=1]="PEER_RESPONSE",t[t.FINAL_PEER=2]="FINAL_PEER",t[t.QUERY_ERROR=3]="QUERY_ERROR",t[t.PROVIDER=4]="PROVIDER",t[t.VALUE=5]="VALUE",t[t.ADDING_PEER=6]="ADDING_PEER",t[t.DIALING_PEER=7]="DIALING_PEER"}(h||(h={})),function(t){t[t.PUT_VALUE=0]="PUT_VALUE",t[t.GET_VALUE=1]="GET_VALUE",t[t.ADD_PROVIDER=2]="ADD_PROVIDER",t[t.GET_PROVIDERS=3]="GET_PROVIDERS",t[t.FIND_NODE=4]="FIND_NODE",t[t.PING=5]="PING"}(d||(d={}));class f{constructor(t){if(null==t)throw new Error("missing ipfs http client");this.client=t,this.started=!1,this.abortController=new AbortController,this.httpQueue=new s.Z({concurrency:4}),this.httpQueueRefs=new s.Z({concurrency:2});const{protocol:e,host:r,port:n}=t.getEndpointConfig();u(`enabled DelegatedContentRouting via ${e}://${r}:${n}`)}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.httpQueueRefs.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}async*findProviders(t,e={}){u("findProviders starts: %c",t),e.timeout=e.timeout??l,e.signal=c([this.abortController.signal].concat(null!=e.signal?[e.signal]:[]));const r=(0,o.Z)(),n=(0,o.Z)();this.httpQueue.add((async()=>(r.resolve(),await n.promise)));try{await r.promise;for await(const r of this.client.dht.findProvs(t,e))"PROVIDER"===r.name&&(yield*r.providers.map((t=>({id:t.id,protocols:[],multiaddrs:t.multiaddrs}))))}catch(t){throw u.error("findProviders errored:",t),t}finally{n.resolve(),u("findProviders finished: %c",t)}}async provide(t,e={}){u("provide starts: %c",t),e.timeout=e.timeout??l,e.signal=c([this.abortController.signal].concat(null!=e.signal?[e.signal]:[])),await this.httpQueueRefs.add((async()=>{await this.client.block.stat(t,e),await(0,i.Z)(this.client.dht.provide(t,e))})),u("provide finished: %c",t)}async put(t,e,r={}){u("put value start: %b",t),r.timeout=r.timeout??l,r.signal=c([this.abortController.signal].concat(null!=r.signal?[r.signal]:[])),await this.httpQueue.add((async()=>{await(0,i.Z)(this.client.dht.put(t,e,r))})),u("put value finished: %b",t)}async get(t,e={}){u("get value start: %b",t),e.timeout=e.timeout??l,e.signal=c([this.abortController.signal].concat(null!=e.signal?[e.signal]:[]));const r=await this.httpQueue.add((async()=>{for await(const r of this.client.dht.get(t,e))if("VALUE"===r.name)return u("get value finished: %b",t),r.value;throw a(new Error("Not found"),"ERR_NOT_FOUND")}));if(void 0===r)throw a(new Error("Not found"),"ERR_NOT_FOUND");return r}}function p(t){return()=>new f(t)}},38532:function(t,e,r){"use strict";r.d(e,{e8:function(){return p}});var n=r(69860),i=r(38161),s=r(28364),o=r(85275),a=r(52770),c=r(32044),u=r(23366);const l=(0,n.kg)("libp2p:delegated-peer-routing");var h,d;!function(t){t[t.SENDING_QUERY=0]="SENDING_QUERY",t[t.PEER_RESPONSE=1]="PEER_RESPONSE",t[t.FINAL_PEER=2]="FINAL_PEER",t[t.QUERY_ERROR=3]="QUERY_ERROR",t[t.PROVIDER=4]="PROVIDER",t[t.VALUE=5]="VALUE",t[t.ADDING_PEER=6]="ADDING_PEER",t[t.DIALING_PEER=7]="DIALING_PEER"}(h||(h={})),function(t){t[t.PUT_VALUE=0]="PUT_VALUE",t[t.GET_VALUE=1]="GET_VALUE",t[t.ADD_PROVIDER=2]="ADD_PROVIDER",t[t.GET_PROVIDERS=3]="GET_PROVIDERS",t[t.FIND_NODE=4]="FIND_NODE",t[t.PING=5]="PING"}(d||(d={}));class f{constructor(t){if(null==t)throw new Error("missing ipfs http client");this.client=t,this.started=!1,this.abortController=new AbortController,this.httpQueue=new s.Z({concurrency:4});const{protocol:e,host:r,port:n}=t.getEndpointConfig();l(`enabled DelegatedPeerRouting via ${e}://${r}:${n}`)}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}async findPeer(t,e={}){l("findPeer starts: %p",t),e.timeout=e.timeout??3e4,e.signal=c([this.abortController.signal].concat(null!=e.signal?[e.signal]:[]));const r=(0,o.Z)(),n=(0,o.Z)();this.httpQueue.add((async()=>(r.resolve(),await n.promise)));try{await r.promise;for await(const r of this.client.dht.findPeer(t,e))if("FINAL_PEER"===r.name){return{id:r.peer.id,multiaddrs:r.peer.multiaddrs,protocols:[]}}}catch(t){throw l.error("findPeer errored: %o",t),t}finally{n.resolve(),l("findPeer finished: %p",t)}throw new a.s("Not found","ERR_NOT_FOUND")}async*getClosestPeers(t,e={}){let r;const n=i.k0.asCID(t);r=null!=n?n:(0,u.cv)(t),l("getClosestPeers starts: %s",r),e.timeout=e.timeout??3e4,e.signal=c([this.abortController.signal].concat(null!=e.signal?[e.signal]:[]));const s=(0,o.Z)(),a=(0,o.Z)();this.httpQueue.add((async()=>(s.resolve(),await a.promise)));try{await s.promise;for await(const t of this.client.dht.query(r,e))"PEER_RESPONSE"===t.name&&(yield*t.closer.map((t=>({id:t.id,multiaddrs:t.multiaddrs,protocols:[]}))))}catch(t){throw l.error("getClosestPeers errored:",t),t}finally{a.resolve(),l("getClosestPeers finished: %b",t)}}}function p(t){return()=>new f(t)}},19859:function(t,e,r){"use strict";r.d(e,{kT:function(){return n},kz:function(){return i}});class n extends Error{constructor(t="Unexpected Peer"){super(t),this.code=n.code}static get code(){return"ERR_UNEXPECTED_PEER"}}class i extends Error{constructor(t="Invalid crypto exchange"){super(t),this.code=i.code}static get code(){return"ERR_INVALID_CRYPTO_EXCHANGE"}}class s extends Error{constructor(t="Invalid crypto transmission"){super(t),this.code=s.code}static get code(){return"ERR_INVALID_CRYPTO_TRANSMISSION"}}},59769:function(t,e,r){"use strict";r.d(e,{N:function(){return n}});const n=Symbol.for("@libp2p/peer-discovery")},682:function(t,e,r){"use strict";r.d(e,{I:function(){return i},N:function(){return n}});const n=Symbol.for("@libp2p/peer-id");function i(t){return null!=t&&Boolean(t[n])}},6834:function(t,e,r){"use strict";r.d(e,{Ct:function(){return s},Q_:function(){return i},xq:function(){return n}});const n="StrictSign",i="StrictNoSign";var s;!function(t){t.Accept="accept",t.Ignore="ignore",t.Reject="reject"}(s||(s={}))},1388:function(t,e,r){"use strict";r.d(e,{d:function(){return n},w:function(){return i}});const n=Symbol.for("@libp2p/topology");function i(t){return null!=t&&Boolean(t[n])}},12348:function(t,e,r){"use strict";r.d(e,{NA:function(){return n},P7:function(){return i}});const n=Symbol.for("@libp2p/transport");var i;!function(t){t[t.FATAL_ALL=0]="FATAL_ALL",t[t.NO_FATAL=1]="NO_FATAL"}(i||(i={}))},52770:function(t,e,r){"use strict";r.d(e,{_:function(){return n},s:function(){return i}});class n extends Error{constructor(t="The operation was aborted"){super(t),this.code=n.code,this.type=n.type}static get code(){return"ABORT_ERR"}static get type(){return"aborted"}}class i extends Error{constructor(t,e,r){super(t),this.code=e,this.name=r?.name??"CodeError",this.props=r??{}}}},46857:function(t,e,r){"use strict";r.d(e,{A:function(){return a},v:function(){return s}});var n,i=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class s extends EventTarget{constructor(){super(...arguments),n.set(this,new Map)}listenerCount(t){const e=i(this,n,"f").get(t);return null==e?0:e.length}addEventListener(t,e,r){super.addEventListener(t,e,r);let s=i(this,n,"f").get(t);null==s&&(s=[],i(this,n,"f").set(t,s)),s.push({callback:e,once:(!0!==r&&!1!==r&&r?.once)??!1})}removeEventListener(t,e,r){super.removeEventListener(t.toString(),e??null,r);let s=i(this,n,"f").get(t);null!=s&&(s=s.filter((({callback:t})=>t!==e)),i(this,n,"f").set(t,s))}dispatchEvent(t){const e=super.dispatchEvent(t);let r=i(this,n,"f").get(t.type);return null==r||(r=r.filter((({once:t})=>!t)),i(this,n,"f").set(t.type,r)),e}safeDispatchEvent(t,e){return this.dispatchEvent(new a(t,e))}}n=new WeakMap;class o extends Event{constructor(t,e){super(t,e),this.detail=e?.detail}}const a=globalThis.CustomEvent??o},34843:function(t,e,r){"use strict";r.d(e,{p:function(){return ie}});var n=r(99507),i=r(27353),s=r(66699),o=r(21177),a=r(77408),c=r(49784),u=r(41690),l=r(53749),h=r(23366);const d="/dht/provider",f=20,p=3,g=Number(3e5),y=Number(3e4),m=Number(3e5),w=Number(3e4),b=Number(3e4),E=(0,a.m)("/pk/");function v(t){return{...t,multiaddrs:t.multiaddrs.filter((t=>{const[[e,r]]=t.stringTuples();if(53===e||54===e||55===e)return"localhost"!==r;if(4!==e&&6!==e)return!1;if(null==r)return!1;const n=(0,l.Z)(r);return null==n||!n}))}}function _(t){return{...t,multiaddrs:t.multiaddrs.filter((t=>{const[[e,r]]=t.stringTuples();if("localhost"===r)return!0;if(4!==e&&6!==e)return!1;if(null==r)return!1;const n=(0,l.Z)(r);return null!=n&&n}))}}async function S(t){return(await i.sha256.digest(t)).digest}async function A(t){return await S(t.toBytes())}function R(t){return new s.s(`/dht/record/${(0,c.B)(t,"base32")}`,!1)}function T(t,e){const r=new Date;return new o.Y(t,e,r).serialize()}var I=r(28364),C=r(10715),k=r(69860),N=r(4542);class B{constructor(t,e){const{kBucketSize:r,pingTimeout:n,lan:i,pingConcurrency:s,protocol:o,tagName:a,tagValue:c}=e;this.components=t,this.log=(0,k.kg)(`libp2p:kad-dht:${i?"lan":"wan"}:routing-table`),this.kBucketSize=r??20,this.pingTimeout=n??1e4,this.pingConcurrency=s??10,this.lan=i,this.running=!1,this.protocol=o,this.tagName=a??"kad-close",this.tagValue=c??50;const u=()=>{this.metrics?.pingQueueSize.update(this.pingQueue.size),this.metrics?.pingRunning.update(this.pingQueue.pending)};this.pingQueue=new I.Z({concurrency:this.pingConcurrency}),this.pingQueue.addListener("add",u),this.pingQueue.addListener("next",u),this._onPing=this._onPing.bind(this)}isStarted(){return this.running}async start(){this.running=!0,null!=this.components.metrics&&(this.metrics={routingTableSize:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_routing_table_size`),pingQueueSize:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_ping_queue_size`),pingRunning:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_ping_running`)});const t=new n({localNodeId:await A(this.components.peerId),numberOfNodesPerKBucket:this.kBucketSize,numberOfNodesToPing:1});this.kb=t,t.on("ping",this._onPing),this._tagPeers(t)}async stop(){this.running=!1,this.pingQueue.clear(),this.kb=void 0}_tagPeers(t){let e=new N.fd;const r=function(t,e=100){let r;return()=>{clearTimeout(r),r=setTimeout((()=>{t()}),e)}}((()=>{const r=new N.fd(t.closest(t.localNodeId,20).map((t=>t.peer))),n=r.difference(e),i=e.difference(r);Promise.resolve().then((async()=>{for(const t of n)await this.components.peerStore.tagPeer(t,this.tagName,{value:this.tagValue});for(const t of i)await this.components.peerStore.unTagPeer(t,this.tagName)})).catch((t=>{this.log.error("Could not update peer tags",t)})),e=r}));t.on("added",(()=>{r()})),t.on("removed",(()=>{r()}))}_onPing(t,e){this.pingQueue.add((async()=>{if(!this.running)return;let r=0;try{await Promise.all(t.map((async t=>{let e;try{e=new C.TimeoutController(this.pingTimeout);const n={signal:e.signal};this.log("pinging old contact %p",t.peer);const i=await this.components.connectionManager.openConnection(t.peer,n);(await i.newStream(this.protocol,n)).close(),r++}catch(e){this.running&&null!=this.kb&&(this.log.error("could not ping peer %p",t.peer,e),this.log("evicting old contact after ping failed %p",t),this.kb.remove(t.id))}finally{null!=e&&e.clear(),this.metrics?.routingTableSize.update(this.size)}}))),this.running&&r<t.length&&null!=this.kb&&(this.log("adding new contact %p",e.peer),this.kb.add(e))}catch(t){this.log.error("could not process k-bucket ping event",t)}})).catch((t=>{this.log.error("could not process k-bucket ping event",t)}))}get size(){return null==this.kb?0:this.kb.count()}async find(t){const e=await A(t),r=this.closestPeer(e);if(null!=r&&t.equals(r))return r}closestPeer(t){const e=this.closestPeers(t,1);if(e.length>0)return e[0]}closestPeers(t,e=this.kBucketSize){if(null==this.kb)return[];return this.kb.closest(t,e).map((t=>t.peer))}async add(t){if(null==this.kb)throw new Error("RoutingTable is not started");const e=await A(t);this.kb.add({id:e,peer:t}),this.log("added %p with kad id %b",t,e),this.metrics?.routingTableSize.update(this.size)}async remove(t){if(null==this.kb)throw new Error("RoutingTable is not started");const e=await A(t);this.kb.remove(e),this.metrics?.routingTableSize.update(this.size)}}var P=r(66574),L=r(93304);function D(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");const r=(0,P.E)(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return(0,L.P)(r)}var O=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782],x=r(79944),U=r(95918);class M{constructor(t){const{peerRouting:e,routingTable:r,refreshInterval:n,refreshQueryTimeout:i,lan:s}=t;this.log=(0,k.kg)(`libp2p:kad-dht:${s?"lan":"wan"}:routing-table:refresh`),this.peerRouting=e,this.routingTable=r,this.refreshInterval=n??m,this.refreshQueryTimeout=i??w,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}async start(){this.log(`refreshing routing table every ${this.refreshInterval}ms`),this.refreshTable(!0)}async stop(){null!=this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId)}refreshTable(t=!1){this.log("refreshing routing table");const e=this._maxCommonPrefix(),r=this._getTrackedCommonPrefixLengthsForRefresh(e);this.log(`max common prefix length ${e}`),this.log(`tracked CPLs [ ${r.map((t=>t.toISOString())).join(", ")} ]`),Promise.all(r.map((async(n,i)=>{try{if(await this._refreshCommonPrefixLength(i,n,t),0===this._numPeersForCpl(e)){const e=Math.min(2*(i+1),r.length-1);for(let r=i+1;r<e+1;r++)try{await this._refreshCommonPrefixLength(r,n,t)}catch(t){this.log.error(t)}}}catch(t){this.log.error(t)}}))).catch((t=>{this.log.error(t)})).then((()=>{this.refreshTimeoutId=setTimeout(this.refreshTable,this.refreshInterval),null!=this.refreshTimeoutId.unref&&this.refreshTimeoutId.unref()})).catch((t=>{this.log.error(t)}))}async _refreshCommonPrefixLength(t,e,r){if(!r&&e.getTime()>Date.now()-this.refreshInterval)return void this.log("not running refresh for cpl %s as time since last refresh not above interval",t);const n=await this._generateRandomPeerId(t);this.log("starting refreshing cpl %s with key %p (routing table size was %s)",t,n,this.routingTable.size);const i=new C.TimeoutController(this.refreshQueryTimeout);try{const e=await(0,U.Z)(this.peerRouting.getClosestPeers(n.toBytes(),{signal:i.signal}));this.log(`found ${e} peers that were close to imaginary peer %p`,n),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",t,n,this.routingTable.size)}finally{i.clear()}}_getTrackedCommonPrefixLengthsForRefresh(t){t>15&&(t=15);const e=[];for(let r=0;r<=t;r++)e[r]=this.commonPrefixLengthRefreshedAt[r]??new Date;return e}async _generateRandomPeerId(t){if(null==this.routingTable.kb)throw new Error("Routing table not started");const e=(0,x.O6)(2),r=(e[1]<<8)+e[0],n=await this._makePeerId(this.routingTable.kb.localNodeId,r,t);return(0,h.cv)(n)}async _makePeerId(t,e,r){if(r>15)throw new Error("Cannot generate peer ID for common prefix length greater than 15");const n=new DataView(t.buffer,t.byteOffset,t.byteLength).getUint16(0,!1),s=65535<<16-(r+1),o=O[(n^32768>>r)&s|e&~s],a=new ArrayBuffer(34),c=new DataView(a,0,a.byteLength);return c.setUint8(0,i.sha256.code),c.setUint8(1,32),c.setUint32(2,o,!1),new Uint8Array(c.buffer,c.byteOffset,c.byteLength)}_maxCommonPrefix(){let t=0;for(const e of this._prefixLengths())e>t&&(t=e);return t}_numPeersForCpl(t){let e=0;for(const r of this._prefixLengths())r===t&&e++;return e}*_prefixLengths(){if(null!=this.routingTable.kb)for(const{id:t}of this.routingTable.kb.toIterable()){const e=D(this.routingTable.kb.localNodeId,t);let r=0;for(const t of e){if(0!==t)break;r++}yield r}}}var V,j,F=r(52770),z=r(88211),K=r(55150),$=r(93361),q=r(91486),H=r(91026),G=r(46888);!function(t){let e;t.codec=()=>(null==e&&(e=(0,G.yw)(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),null!=t.key&&(e.uint32(10),e.bytes(t.key)),null!=t.value&&(e.uint32(18),e.bytes(t.value)),null!=t.author&&(e.uint32(26),e.bytes(t.author)),null!=t.signature&&(e.uint32(34),e.bytes(t.signature)),null!=t.timeReceived&&(e.uint32(42),e.string(t.timeReceived)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.key=t.bytes();break;case 2:r.value=t.bytes();break;case 3:r.author=t.bytes();break;case 4:r.signature=t.bytes();break;case 5:r.timeReceived=t.string();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>(0,G.LE)(e,t.codec()),t.decode=e=>(0,G.C6)(e,t.codec())}(V||(V={})),function(t){let e,r,n,i,s,o;!function(t){t.PUT_VALUE="PUT_VALUE",t.GET_VALUE="GET_VALUE",t.ADD_PROVIDER="ADD_PROVIDER",t.GET_PROVIDERS="GET_PROVIDERS",t.FIND_NODE="FIND_NODE",t.PING="PING"}(e=t.MessageType||(t.MessageType={})),function(t){t[t.PUT_VALUE=0]="PUT_VALUE",t[t.GET_VALUE=1]="GET_VALUE",t[t.ADD_PROVIDER=2]="ADD_PROVIDER",t[t.GET_PROVIDERS=3]="GET_PROVIDERS",t[t.FIND_NODE=4]="FIND_NODE",t[t.PING=5]="PING"}(r||(r={})),function(t){t.codec=()=>(0,G.Ji)(r)}(e=t.MessageType||(t.MessageType={})),function(t){t.NOT_CONNECTED="NOT_CONNECTED",t.CONNECTED="CONNECTED",t.CAN_CONNECT="CAN_CONNECT",t.CANNOT_CONNECT="CANNOT_CONNECT"}(n=t.ConnectionType||(t.ConnectionType={})),function(t){t[t.NOT_CONNECTED=0]="NOT_CONNECTED",t[t.CONNECTED=1]="CONNECTED",t[t.CAN_CONNECT=2]="CAN_CONNECT",t[t.CANNOT_CONNECT=3]="CANNOT_CONNECT"}(i||(i={})),function(t){t.codec=()=>(0,G.Ji)(i)}(n=t.ConnectionType||(t.ConnectionType={})),function(e){let r;e.codec=()=>(null==r&&(r=(0,G.yw)(((e,r,n={})=>{if(!1!==n.lengthDelimited&&r.fork(),null!=e.id&&(r.uint32(10),r.bytes(e.id)),null!=e.addrs)for(const t of e.addrs)r.uint32(18),r.bytes(t);null!=e.connection&&(r.uint32(24),t.ConnectionType.codec().encode(e.connection,r)),!1!==n.lengthDelimited&&r.ldelim()}),((e,r)=>{const n={addrs:[]},i=null==r?e.len:e.pos+r;for(;e.pos<i;){const r=e.uint32();switch(r>>>3){case 1:n.id=e.bytes();break;case 2:n.addrs.push(e.bytes());break;case 3:n.connection=t.ConnectionType.codec().decode(e);break;default:e.skipType(7&r)}}return n}))),r),e.encode=t=>(0,G.LE)(t,e.codec()),e.decode=t=>(0,G.C6)(t,e.codec())}(s=t.Peer||(t.Peer={})),t.codec=()=>(null==o&&(o=(0,G.yw)(((e,r,n={})=>{if(!1!==n.lengthDelimited&&r.fork(),null!=e.type&&(r.uint32(8),t.MessageType.codec().encode(e.type,r)),null!=e.clusterLevelRaw&&(r.uint32(80),r.int32(e.clusterLevelRaw)),null!=e.key&&(r.uint32(18),r.bytes(e.key)),null!=e.record&&(r.uint32(26),r.bytes(e.record)),null!=e.closerPeers)for(const n of e.closerPeers)r.uint32(66),t.Peer.codec().encode(n,r);if(null!=e.providerPeers)for(const n of e.providerPeers)r.uint32(74),t.Peer.codec().encode(n,r);!1!==n.lengthDelimited&&r.ldelim()}),((e,r)=>{const n={closerPeers:[],providerPeers:[]},i=null==r?e.len:e.pos+r;for(;e.pos<i;){const r=e.uint32();switch(r>>>3){case 1:n.type=t.MessageType.codec().decode(e);break;case 10:n.clusterLevelRaw=e.int32();break;case 2:n.key=e.bytes();break;case 3:n.record=e.bytes();break;case 8:n.closerPeers.push(t.Peer.codec().decode(e,e.uint32()));break;case 9:n.providerPeers.push(t.Peer.codec().decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n}))),o),t.encode=e=>(0,G.LE)(e,t.codec()),t.decode=e=>(0,G.C6)(e,t.codec())}(j||(j={}));const W=j.MessageType,Y=j.ConnectionType,Z=Object.keys(W);class Q{constructor(t,e,r){if(!(e instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=t,this.key=e,this.clusterLevelRaw=r,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){const t=this.clusterLevelRaw-1;return t<0?0:t}set clusterLevel(t){this.clusterLevelRaw=t}serialize(){return j.encode({key:this.key,type:this.type,clusterLevelRaw:this.clusterLevelRaw,closerPeers:this.closerPeers.map(X),providerPeers:this.providerPeers.map(X),record:null==this.record?void 0:this.record.serialize().subarray()})}static deserialize(t){const e=j.decode(t),r=new Q(e.type??j.MessageType.PUT_VALUE,e.key??Uint8Array.from([]),e.clusterLevelRaw??0);return r.closerPeers=e.closerPeers.map(J),r.providerPeers=e.providerPeers.map(J),null!=e.record?.length&&(r.record=o.Y.deserialize(e.record)),r}}function X(t){return{id:t.id.toBytes(),addrs:(t.multiaddrs??[]).map((t=>t.bytes)),connection:Y.CONNECTED}}function J(t){if(null==t.id)throw new Error("Invalid peer in message");return{id:(0,h.cv)(t.id),multiaddrs:(t.addrs??[]).map((t=>(0,H.HM)(t))),protocols:[]}}var tt=r(46857);function et(t){return{...t,name:"SENDING_QUERY",type:0,messageName:t.type,messageType:Z.indexOf(t.type.toString())}}function rt(t){return{...t,name:"PEER_RESPONSE",type:1,messageName:t.messageType,closer:null!=t.closer?t.closer:[],providers:null!=t.providers?t.providers:[]}}function nt(t){return{...t,name:"FINAL_PEER",type:2}}function it(t){return{...t,name:"QUERY_ERROR",type:3}}function st(t){return{...t,name:"PROVIDER",type:4}}function ot(t){return{...t,name:"VALUE",type:5}}function at(t){return{...t,name:"DIALING_PEER",type:7}}var ct=r(2237);class ut extends tt.v{constructor(t,e){super();const{protocol:r,lan:n}=e;this.components=t,this.log=(0,k.kg)(`libp2p:kad-dht:${n?"lan":"wan"}:network`),this.running=!1,this.protocol=r}async start(){this.running||(this.running=!0)}async stop(){this.running=!1}isStarted(){return this.running}async*sendRequest(t,e,r={}){if(!this.running)return;this.log("sending %s to %p",e.type,t),yield at({peer:t}),yield et({to:t,type:e.type});try{const n=await this.components.connectionManager.openConnection(t,r),i=await n.newStream(this.protocol,r),s=await this._writeReadMessage(i,e.serialize(),r);yield rt({from:t,messageType:s.type,closer:s.closerPeers,providers:s.providerPeers,record:s.record})}catch(e){yield it({from:t,error:e})}finally{0}}async*sendMessage(t,e,r={}){if(!this.running)return;this.log("sending %s to %p",e.type,t),yield at({peer:t}),yield et({to:t,type:e.type});try{const n=await this.components.connectionManager.openConnection(t,r),i=await n.newStream(this.protocol,r);await this._writeMessage(i,e.serialize(),r),yield rt({from:t,messageType:e.type})}catch(e){yield it({from:t,error:e})}finally{0}}async _writeMessage(t,e,r){null!=r.signal&&(t=(0,ct.D7)(t,r.signal)),await(0,z.zG)([e],K.c(),t,$.Z)}async _writeReadMessage(t,e,r){null!=r.signal&&(t=(0,ct.D7)(t,r.signal));const n=await(0,z.zG)([e],K.c(),t,K.J(),(async t=>{const e=await(0,q.Z)(t);if(null!=e)return e;throw new F.s("No message received","ERR_NO_MESSAGE_RECEIVED")})),i=Q.deserialize(n);return i.closerPeers.forEach((t=>{this.dispatchEvent(new tt.A("peer",{detail:t}))})),i.providerPeers.forEach((t=>{this.dispatchEvent(new tt.A("peer",{detail:t}))})),i}}var lt=r(73062);async function ht(t,e){const r=e.key,n=(0,c.B)(r).split("/");if(n.length<3)return;const i=t[n[1].toString()];if(null==i){const t="Invalid record keytype";throw new F.s(t,"ERR_INVALID_RECORD_KEY_TYPE")}await i(r,e.value)}const dt={pk:async(t,e)=>{if(!(t instanceof Uint8Array))throw new F.s('"key" must be a Uint8Array',"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(t.byteLength<5)throw new F.s("invalid public key record","ERR_INVALID_RECORD_KEY_TOO_SHORT");if("/pk/"!==(0,c.B)(t.subarray(0,4)))throw new F.s("key was not prefixed with /pk/","ERR_INVALID_RECORD_KEY_BAD_PREFIX");const r=t.slice(4),n=await i.sha256.digest(e);if(!(0,lt.f)(r,n.bytes))throw new F.s("public key does not match passed in key","ERR_INVALID_RECORD_HASH_MISMATCH")}};const ft={pk:function(t,e){return 0}};var pt=r(69849),gt=r(21007);class yt{constructor(t,e){const{validators:r,selectors:n,peerRouting:i,queryManager:s,routingTable:o,network:a,lan:c}=e;this.components=t,this.log=(0,k.kg)(`libp2p:kad-dht:${c?"lan":"wan"}:content-fetching`),this.validators=r,this.selectors=n,this.peerRouting=i,this.queryManager=s,this.routingTable=o,this.network=a}async putLocal(t,e){const r=R(t);await this.components.datastore.put(r,e)}async getLocal(t){this.log("getLocal %b",t);const e=R(t);this.log("fetching record for key %k",e);const r=await this.components.datastore.get(e);this.log("found %k in local datastore",e);const n=o.Y.deserialize(r);return await ht(this.validators,n),n}async*sendCorrectionRecord(t,e,r,n={}){this.log("sendCorrection for %b",t);const i=T(t,r);for(const{value:s,from:a}of e){if((0,lt.f)(s,r)){this.log("record was ok");continue}if(this.components.peerId.equals(a)){try{const e=R(t);this.log(`Storing corrected record for key ${e.toString()}`),await this.components.datastore.put(e,i.subarray())}catch(t){this.log.error("Failed error correcting self",t)}continue}let e=!1;const c=new Q(W.PUT_VALUE,t,0);c.record=o.Y.deserialize(i);for await(const t of this.network.sendRequest(a,c,n))"PEER_RESPONSE"===t.name&&null!=t.record&&(0,lt.f)(t.record.value,o.Y.deserialize(i).value)&&(e=!0),yield t;e||(yield it({from:a,error:new F.s("value not put correctly","ERR_PUT_VALUE_INVALID")})),this.log.error("Failed error correcting entry")}}async*put(t,e,r={}){this.log("put key %b value %b",t,e);const n=T(t,e),i=R(t);this.log(`storing record for key ${i.toString()}`),await this.components.datastore.put(i,n.subarray()),yield*(0,z.zG)(this.peerRouting.getClosestPeers(t,{signal:r.signal}),(e=>(0,gt.Z)(e,(e=>async()=>{if("FINAL_PEER"!==e.name)return[e];const i=[],s=new Q(W.PUT_VALUE,t,0);s.record=o.Y.deserialize(n),this.log("send put to %p",e.peer.id);for await(const t of this.network.sendRequest(e.peer.id,s,r))i.push(t),"PEER_RESPONSE"===t.name&&(null!=t.record&&(0,lt.f)(t.record.value,o.Y.deserialize(n).value)||i.push(it({from:e.peer.id,error:new F.s("value not put correctly","ERR_PUT_VALUE_INVALID")})));return i}))),(t=>(0,pt.Z)(t,{ordered:!1,concurrency:p})),(async function*(t){for await(const e of t)yield*e}))}async*get(t,e={}){this.log("get %b",t);const r=[];for await(const n of this.getMany(t,e))"VALUE"===n.name&&r.push(n),yield n;if(0===r.length)return;const n=r.map((t=>t.value));let i=0;try{i=function(t,e,r){if(0===r.length){const t="No records given";throw new F.s(t,"ERR_NO_RECORDS_RECEIVED")}const n=(0,c.B)(e).split("/");if(n.length<3){const t="Record key does not have a selector function";throw new F.s(t,"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}const i=t[n[1].toString()];if(null==i){const t=`Unrecognized key prefix: ${n[1]}`;throw new F.s(t,"ERR_UNRECOGNIZED_KEY_PREFIX")}return 1===r.length?0:i(e,r)}(this.selectors,t,n)}catch(t){if("ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"!==t.code)throw t}const s=n[i];if(this.log("GetValue %b %b",t,s),null==s)throw new F.s("best value was not found","ERR_NOT_FOUND");yield*this.sendCorrectionRecord(t,r,s,e),yield r[i]}async*getMany(t,e={}){this.log("getMany values for %b",t);try{const e=await this.getLocal(t);yield ot({value:e.value,from:this.components.peerId})}catch(e){this.log("error getting local value for %b",t,e)}const r=await S(t),n=this.routingTable.closestPeers(r);this.log("found %d peers in routing table",n.length);const i=this;yield*this.queryManager.run(t,n,(async function*({peer:e,signal:r}){for await(const n of i.peerRouting.getValueOrPeers(e,t,{signal:r}))yield n,"PEER_RESPONSE"===n.name&&null!=n.record&&(yield ot({from:e,value:n.record.value}))}),e)}}class mt{constructor(t,e){const{network:r,peerRouting:n,queryManager:i,routingTable:s,providers:o,lan:a}=e;this.components=t,this.log=(0,k.kg)(`libp2p:kad-dht:${a?"lan":"wan"}:content-routing`),this.network=r,this.peerRouting=n,this.queryManager=i,this.routingTable=s,this.providers=o}async*provide(t,e,r={}){this.log("provide %s",t),await this.providers.addProvider(t,this.components.peerId);const n=new Q(W.ADD_PROVIDER,t.multihash.bytes,0);n.providerPeers=[{id:this.components.peerId,multiaddrs:e,protocols:[]}];let i=0;const s=e=>async()=>{if("FINAL_PEER"!==e.name)return[e];const s=[];this.log("putProvider %s to %p",t,e.peer.id);try{this.log("sending provider record for %s to %p",t,e.peer.id);for await(const o of this.network.sendMessage(e.peer.id,n,r))"PEER_RESPONSE"===o.name&&(this.log("sent provider record for %s to %p",t,e.peer.id),i++),s.push(o)}catch(t){this.log.error("error sending provide record to peer %p",e.peer.id,t),s.push(it({from:e.peer.id,error:t}))}return s};yield*(0,z.zG)(this.peerRouting.getClosestPeers(t.multihash.bytes,r),(t=>(0,gt.Z)(t,(t=>s(t)))),(t=>(0,pt.Z)(t,{ordered:!1,concurrency:p})),(async function*(t){for await(const e of t)yield*e})),this.log("sent provider records to %d peers",i)}async*findProviders(t,e){const r=this.routingTable.kBucketSize,n=t.multihash.bytes,i=await S(n),s=this;this.log("findProviders %c",t);const o=await this.providers.getProviders(t);if(o.length>0){const t=[];for(const e of o.slice(0,r))t.push({id:e,multiaddrs:(await this.components.peerStore.addressBook.get(e)??[]).map((t=>t.multiaddr)),protocols:[]});yield rt({from:this.components.peerId,messageType:W.GET_PROVIDERS,providers:t}),yield st({from:this.components.peerId,providers:t})}if(o.length>=r)return;const a=async function*({peer:t,signal:e}){const r=new Q(W.GET_PROVIDERS,n,0);yield*s.network.sendRequest(t,r,{signal:e})},c=new Set(o.map((t=>t.toString())));for await(const s of this.queryManager.run(n,this.routingTable.closestPeers(i),a,e))if(yield s,"PEER_RESPONSE"===s.name){this.log("Found %d provider entries for %c and %d closer peers",s.providers.length,t,s.closer.length);const e=[];for(const t of s.providers)c.has(t.id.toString())||(c.add(t.id.toString()),e.push(t));if(e.length>0&&(yield st({from:s.from,providers:e})),c.size===r)return}}}var wt=r(20295);class bt{constructor(t,e){this.originDhtKey=t,this.capacity=e,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map((t=>t.peerId))}async add(t){if(null!=this.peerDistances.find((e=>e.peerId.equals(t))))return;const e=await A(t),r={peerId:t,distance:D(this.originDhtKey,e)};this.peerDistances.push(r),this.peerDistances.sort(((t,e)=>(0,wt.q)(t.distance,e.distance))),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(t){if(0===t.length)return!1;if(0===this.length)return!0;const e=await Promise.all(t.map(A)),r=this.peerDistances[this.peerDistances.length-1].distance;for(const t of e){const e=D(this.originDhtKey,t);if((0,wt.q)(e,r)<0)return!0}return!1}}class Et{constructor(t,e){const{routingTable:r,network:n,validators:i,queryManager:s,lan:o}=e;this.components=t,this.routingTable=r,this.network=n,this.validators=i,this.queryManager=s,this.log=(0,k.kg)(`libp2p:kad-dht:${o?"lan":"wan"}:peer-routing`)}async findPeerLocal(t){let e;const r=await this.routingTable.find(t);if(null!=r){this.log("findPeerLocal found %p in routing table",t);try{e=await this.components.peerStore.get(r)}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}}if(null==e)try{e=await this.components.peerStore.get(t)}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}if(null!=e)return this.log("findPeerLocal found %p in peer store",t),{id:e.id,multiaddrs:e.addresses.map((t=>t.multiaddr)),protocols:[]}}async*_getValueSingle(t,e,r={}){const n=new Q(W.GET_VALUE,e,0);yield*this.network.sendRequest(t,n,r)}async*getPublicKeyFromNode(t,e={}){const r=function(t){return(0,u.z)([E,t.toBytes()])}(t);for await(const n of this._getValueSingle(t,r,e))if(yield n,"PEER_RESPONSE"===n.name&&null!=n.record){const e=await(0,h.y5)(x.XP.marshalPublicKey({bytes:n.record.value}));if(!e.equals(t))throw new F.s("public key does not match id","ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");if(null==e.publicKey)throw new F.s("public key missing","ERR_PUBLIC_KEY_MISSING");yield ot({from:t,value:e.publicKey})}throw new F.s(`Node not responding with its public key: ${t.toString()}`,"ERR_INVALID_RECORD")}async*findPeer(t,e={}){this.log("findPeer %p",t);const r=await this.findPeerLocal(t);if(null!=r)return this.log("found local"),void(yield nt({from:this.components.peerId,peer:r}));const n=await A(t),i=this.routingTable.closestPeers(n);if(null!=i.find((e=>e.equals(t))))try{const e=await this.components.peerStore.get(t);return this.log("found in peerStore"),void(yield nt({from:this.components.peerId,peer:{id:e.id,multiaddrs:e.addresses.map((t=>t.multiaddr)),protocols:[]}}))}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}const s=this,o=async function*({peer:e,signal:r}){const n=new Q(W.FIND_NODE,t.toBytes(),0);for await(const i of s.network.sendRequest(e,n,{signal:r}))if(yield i,"PEER_RESPONSE"===i.name){const e=i.closer.find((e=>e.id.equals(t)));null!=e&&(yield nt({from:i.from,peer:e}))}};let a=!1;for await(const r of this.queryManager.run(t.toBytes(),i,o,e))"FINAL_PEER"===r.name&&(a=!0),yield r;a||(yield it({from:this.components.peerId,error:new F.s("Not found","ERR_NOT_FOUND")}))}async*getClosestPeers(t,e={}){this.log("getClosestPeers to %b",t);const r=await S(t),n=this.routingTable.closestPeers(r),i=this,s=new bt(r,this.routingTable.kBucketSize);await Promise.all(n.map((async t=>{await s.add(t)})));const o=async function*({peer:e,signal:r}){i.log("closerPeersSingle %s from %p",(0,c.B)(t,"base32"),e);const n=new Q(W.FIND_NODE,t,0);yield*i.network.sendRequest(e,n,{signal:r})};for await(const r of this.queryManager.run(t,n,o,e))yield r,"PEER_RESPONSE"===r.name&&await Promise.all(r.closer.map((async t=>{await s.add(t.id)})));this.log("found %d peers close to %b",s.length,t);for(const t of s.peers)yield nt({from:this.components.peerId,peer:{id:t,multiaddrs:(await this.components.peerStore.addressBook.get(t)??[]).map((t=>t.multiaddr)),protocols:[]}})}async*getValueOrPeers(t,e,r={}){for await(const n of this._getValueSingle(t,e,r)){if("PEER_RESPONSE"===n.name&&null!=n.record)try{await this._verifyRecordOnline(n.record)}catch(t){const e="invalid record received, discarded";this.log(e),yield it({from:n.from,error:new F.s(e,"ERR_INVALID_RECORD")});continue}yield n}}async _verifyRecordOnline(t){if(null==t.timeReceived)throw new F.s("invalid record received","ERR_INVALID_RECORD");await ht(this.validators,new o.Y(t.key,t.value,t.timeReceived))}async getCloserPeersOffline(t,e){const r=await S(t),n=this.routingTable.closestPeers(r),i=[];for(const t of n)if(!t.equals(e))try{const e=await this.components.peerStore.addressBook.get(t),r=await this.components.peerStore.protoBook.get(t);i.push({id:t,multiaddrs:e.map((t=>t.multiaddr)),protocols:r})}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}return i.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",i.length,t,e):this.log("getCloserPeersOffline could not find peer closer to %b than %p",t,e),i}}var vt=r(70248),_t=r(71943);const St=(0,k.kg)("libp2p:kad-dht:providers");class At{constructor(t,e={}){const{cacheSize:r,cleanupInterval:n,provideValidity:i}=e;this.components=t,this.cleanupInterval=n??36e5,this.provideValidity=i??864e5,this.cache=vt(r??256),this.syncQueue=new I.Z({concurrency:1}),this.started=!1}isStarted(){return this.started}async start(){this.started||(this.started=!0,this.cleaner=setInterval((()=>{this._cleanup().catch((t=>{St.error(t)}))}),this.cleanupInterval))}async stop(){this.started=!1,null!=this.cleaner&&(clearInterval(this.cleaner),this.cleaner=void 0)}async _cleanup(){await this.syncQueue.add((async()=>{const t=Date.now();let e=0,r=0;const n=new Map,i=this.components.datastore.batch(),s=this.components.datastore.query({prefix:d});for await(const t of s)try{const{cid:s,peerId:o}=Tt(t.key),a=It(t.value).getTime(),c=Date.now(),u=c-a,l=u>this.provideValidity;if(St("comparing: %d - %d = %d > %d %s",c,a,u,this.provideValidity,l?"(expired)":""),l){r++,i.delete(t.key);const e=n.get(s)??new Set;e.add(o),n.set(s,e)}e++}catch(t){St.error(t.message)}n.size>0?(St("deleting %d / %d entries",r,e),await i.commit()):St("nothing to delete");for(const[t,e]of n){const r=Rt(t),n=this.cache.get(r);if(null!=n){for(const t of e)n.delete(t);0===n.size?this.cache.remove(r):this.cache.set(r,n)}}St("Cleanup successful (%dms)",Date.now()-t)}))}async _getProvidersMap(t){const e=Rt(t);let r=this.cache.get(e);return null==r&&(r=await async function(t,e){const r=new Map,n=t.query({prefix:Rt(e)});for await(const t of n){const{peerId:e}=Tt(t.key);r.set(e,It(t.value))}return r}(this.components.datastore,t),this.cache.set(e,r)),r}async addProvider(t,e){await this.syncQueue.add((async()=>{St("%p provides %s",e,t);const r=await this._getProvidersMap(t);St("loaded %s provs",r.size);const n=new Date;r.set(e.toString(),n);const i=Rt(t);this.cache.set(i,r),await async function(t,e,r,n){const i=[Rt(e),"/",r.toString()].join(""),o=new s.s(i),a=Uint8Array.from(_t.encode(n.getTime()));await t.put(o,a)}(this.components.datastore,t,e,n)}))}async getProviders(t){return await this.syncQueue.add((async()=>{St("get providers for %s",t);return[...(await this._getProvidersMap(t)).keys()].map((t=>(0,h.jE)(t)))}),{throwOnTimeout:!0})}}function Rt(t){const e="string"==typeof t?t:(0,c.B)(t.multihash.bytes,"base32");return`${d}/${e}`}function Tt(t){const e=t.toString().split("/");if(5!==e.length)throw new Error(`incorrectly formatted provider entry key in datastore: ${t.toString()}`);return{cid:e[3],peerId:e[4]}}function It(t){return new Date(_t.decode(t))}var Ct=r(32044),kt=r(85275);const Nt=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");async function*Bt(t){const{key:e,startingPeer:r,ourPeerId:n,signal:i,query:s,alpha:o,pathIndex:a,numPaths:u,cleanUp:l,queryFuncTimeout:h,log:d,peersSeen:f}=t,p=new I.Z({concurrency:o}),g=await S(e);!function t(r,o){if(null==r)return;f.add(r);const l=BigInt("0x"+(0,c.B)(D(o,g),"base16"));p.add((async()=>{let o;const y=[i];null!=h&&(o=new C.TimeoutController(h),y.push(o.signal));const m=(0,Ct.anySignal)(y);try{for await(const i of s({key:e,peer:r,signal:m,pathIndex:a,numPaths:u})){if(m.aborted)return;if("PEER_RESPONSE"===i.name)for(const s of i.closer){if(f.has(s.id)){d("already seen %p in query",s.id);continue}if(n.equals(s.id)){d("not querying ourselves");continue}const i=await A(s.id);BigInt("0x"+(0,c.B)(D(i,g),"base16"))>l?d("skipping %p as they are not closer to %b than %p",s.id,e,r):(d("querying closer peer %p",s.id),t(s.id,i))}p.emit("completed",i)}o?.clear()}catch(t){i.aborted?p.emit("error",t):p.emit("completed",it({from:r,error:t}))}finally{o?.clear()}}),{priority:Nt-l}).catch((t=>{d.error(t)}))}(r,await A(r)),yield*async function*(t,e,r,n){let i=(0,kt.Z)(),s=!0;const o=[],a=()=>{s&&(n("clean up queue, results %d, queue size %d, pending tasks %d",o.length,t.size,t.pending),s=!1,t.clear(),o.splice(0,o.length))};t.on("completed",(t=>{o.push(t),i.resolve()})),t.on("error",(t=>{n("queue error",t),a(),i.reject(t)})),t.on("idle",(()=>{n("queue idle"),s=!1,i.resolve()})),e.addEventListener("abort",(()=>{n("abort queue");const t=s;a(),t&&i.reject(new F.s("Query aborted","ERR_QUERY_ABORTED"))})),r.addEventListener("cleanup",(()=>{a(),i.resolve()}));for(;s;)for(await i.promise,i=(0,kt.Z)();o.length>0;){const t=o.shift();null!=t&&(yield t)}yield*o}(p,i,l,d)}var Pt=r(52019),Lt=r(17187);class Dt{constructor(t,e){const{lan:r=!1,disjointPaths:n=f,alpha:i=p}=e;this.components=t,this.disjointPaths=n??f,this.controllers=new Set,this.running=!1,this.alpha=i??p,this.lan=r,this.queries=0}isStarted(){return this.running}async start(){this.running=!0,null!=this.components.metrics&&null==this.metrics&&(this.metrics={runningQueries:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_running_queries`),queryTime:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_query_time_seconds`)})}async stop(){this.running=!1;for(const t of this.controllers)t.abort();this.controllers.clear()}async*run(t,e,r,n={}){if(!this.running)throw new Error("QueryManager not started");const i=this.metrics?.queryTime.timer();let s;if(null==n.signal){s=new C.TimeoutController(b),n.signal=s.signal;try{null!=Lt.setMaxListeners&&(0,Lt.setMaxListeners)(1/0,s.signal)}catch{}}const o=new AbortController;this.controllers.add(o);const a=[o.signal];null!=n.signal&&a.push(n.signal);const u=(0,Ct.anySignal)(a);try{null!=Lt.setMaxListeners&&(0,Lt.setMaxListeners)(1/0,u)}catch{}const l=(0,k.kg)(`libp2p:kad-dht:${this.lan?"lan":"wan"}:query:`+(0,c.B)(t,"base58btc")),h=e.slice(0,Math.min(this.disjointPaths,e.length)),d=Date.now(),f=new tt.v;try{if(l("query:start"),this.queries++,this.metrics?.runningQueries.update(this.queries),0===e.length)return void l.error("Running query with no peers");const i=new N.fd,s=h.map(((e,s)=>Bt({key:t,startingPeer:e,ourPeerId:this.components.peerId,signal:u,query:r,pathIndex:s,numPaths:h.length,alpha:this.alpha,cleanUp:f,queryFuncTimeout:n.queryFuncTimeout,log:l,peersSeen:i})));for await(const t of(0,Pt.Z)(...s))yield t,"QUERY_ERROR"===t.name&&l("error",t.error)}catch(t){if(this.running||"ERR_QUERY_ABORTED"!==t.code)throw t}finally{this.controllers.delete(o),null!=s&&s.clear(),this.queries--,this.metrics?.runningQueries.update(this.queries),null!=i&&i(),f.dispatchEvent(new tt.A("cleanup")),l("query:done in %dms",Date.now()-d)}}}var Ot=r(38161);const xt=(0,k.kg)("libp2p:kad-dht:rpc:handlers:add-provider");class Ut{constructor(t){const{providers:e}=t;this.providers=e}async handle(t,e){if(xt("start"),null==e.key||0===e.key.length)throw new F.s("Missing key","ERR_MISSING_KEY");let r;try{r=Ot.k0.decode(e.key)}catch(t){throw new F.s("Invalid CID","ERR_INVALID_CID")}null!=e.providerPeers&&0!==e.providerPeers.length||xt.error("no providers found in message"),await Promise.all(e.providerPeers.map((async e=>{e.id.equals(t)?e.multiaddrs.length<1?xt("no valid addresses for provider %p. Ignore",t):(xt("received provider %p for %s (addrs %s)",t,r,e.multiaddrs.map((t=>t.toString()))),await this.providers.addProvider(r,e.id)):xt("invalid provider peer %p from %p",e.id,t)})))}}var Mt=r(738);const Vt=(0,k.kg)("libp2p:kad-dht:rpc:handlers:find-node");class jt{constructor(t,e){const{peerRouting:r,lan:n}=e;this.components=t,this.peerRouting=r,this.lan=Boolean(n)}async handle(t,e){Vt("incoming request from %p for peers closer to %b",t,e.key);let r=[];r=(0,Mt.fS)(this.components.peerId.toBytes(),e.key)?[{id:this.components.peerId,multiaddrs:this.components.addressManager.getAddresses().map((t=>t.decapsulateCode((0,H.a_)("p2p").code))),protocols:[]}]:await this.peerRouting.getCloserPeersOffline(e.key,t),r=r.map(this.lan?_:v).filter((({multiaddrs:t})=>t.length));const n=new Q(e.type,new Uint8Array(0),e.clusterLevel);return r.length>0?n.closerPeers=r:Vt("could not find any peers closer to %b than %p",e.key,t),n}}const Ft=(0,k.kg)("libp2p:kad-dht:rpc:handlers:get-providers");class zt{constructor(t,e){const{peerRouting:r,providers:n,lan:i}=e;this.components=t,this.peerRouting=r,this.providers=n,this.lan=Boolean(i)}async handle(t,e){let r;try{r=Ot.k0.decode(e.key)}catch(t){throw new F.s("Invalid CID","ERR_INVALID_CID")}Ft("%p asking for providers for %s",t,r);const[n,i]=await Promise.all([this.providers.getProviders(r),this.peerRouting.getCloserPeersOffline(e.key,t)]),s=await this._getPeers(n),o=await this._getPeers(i.map((({id:t})=>t))),a=new Q(e.type,e.key,e.clusterLevel);return s.length>0&&(a.providerPeers=s),o.length>0&&(a.closerPeers=o),Ft("got %s providers %s closerPeers",s.length,o.length),a}async _getAddresses(t){return(await this.components.peerStore.addressBook.get(t)).map((t=>t.multiaddr))}async _getPeers(t){const e=[],r=this.lan?_:v;for(const n of t){const t=r({id:n,multiaddrs:await this._getAddresses(n),protocols:[]});t.multiaddrs.length>0&&e.push(t)}return e}}const Kt=(0,k.kg)("libp2p:kad-dht:rpc:handlers:get-value");class $t{constructor(t,e){const{peerRouting:r}=e;this.components=t,this.peerRouting=r}async handle(t,e){const r=e.key;if(Kt("%p asked for key %b",t,r),null==r||0===r.length)throw new F.s("Invalid key","ERR_INVALID_KEY");const n=new Q(W.GET_VALUE,r,e.clusterLevel);if(function(t){return"/pk/"===(0,c.B)(t.subarray(0,4))}(r)){Kt("is public key");const t=function(t){return(0,h.cv)(t.subarray(4))}(r);let e;try{const r=await this.components.peerStore.keyBook.get(t);if(null==r)throw new F.s("No public key found in key book","ERR_NOT_FOUND");e=r}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}if(null!=e)return Kt("returning found public key"),n.record=new o.Y(r,e,new Date),n}const[i,s]=await Promise.all([this._checkLocalDatastore(r),this.peerRouting.getCloserPeersOffline(e.key,t)]);return null!=i&&(Kt("had record for %b in local datastore",r),n.record=i),s.length>0&&(Kt("had %s closer peers in routing table",s.length),n.closerPeers=s),n}async _checkLocalDatastore(t){Kt("checkLocalDatastore looking for %b",t);const e=R(t);let r;try{r=await this.components.datastore.get(e)}catch(t){if("ERR_NOT_FOUND"===t.code)return;throw t}const n=o.Y.deserialize(r);if(null==n)throw new F.s("Invalid record","ERR_INVALID_RECORD");if(!(null==n.timeReceived||Date.now()-n.timeReceived.getTime()>1296e5))return n;await this.components.datastore.delete(e)}}const qt=(0,k.kg)("libp2p:kad-dht:rpc:handlers:ping");class Ht{async handle(t,e){return qt("ping from %p",t),e}}class Gt{constructor(t,e){const{validators:r}=e;this.components=t,this.log=(0,k.kg)("libp2p:kad-dht:rpc:handlers:put-value"),this.validators=r}async handle(t,e){const r=e.key;this.log("%p asked us to store value for key %b",t,r);const n=e.record;if(null==n){const e=`Empty record from: ${t.toString()}`;throw this.log.error(e),new F.s(e,"ERR_EMPTY_RECORD")}try{await ht(this.validators,n),n.timeReceived=new Date;const t=R(n.key);await this.components.datastore.put(t,n.serialize().subarray()),this.log("put record for %b into datastore under key %k",r,t)}catch(t){this.log("did not put record for key %b into datastore %o",r,t)}return e}}class Wt{constructor(t,e){const{providers:r,peerRouting:n,validators:i,lan:s}=e;this.log=(0,k.kg)("libp2p:kad-dht:rpc"),this.routingTable=e.routingTable,this.handlers={[W.GET_VALUE]:new $t(t,{peerRouting:n}),[W.PUT_VALUE]:new Gt(t,{validators:i}),[W.FIND_NODE]:new jt(t,{peerRouting:n,lan:s}),[W.ADD_PROVIDER]:new Ut({providers:r}),[W.GET_PROVIDERS]:new zt(t,{peerRouting:n,providers:r,lan:s}),[W.PING]:new Ht}}async handleMessage(t,e){try{await this.routingTable.add(t)}catch(t){this.log.error("Failed to update the kbucket store",t)}const r=this.handlers[e.type];if(null!=r)return await r.handle(t,e);this.log.error(`no handler found for message type: ${e.type}`)}onIncomingStream(t){Promise.resolve().then((async()=>{const{stream:e,connection:r}=t,n=r.remotePeer;try{await this.routingTable.add(n)}catch(t){this.log.error(t)}const i=this;await(0,z.zG)(e,K.J(),(async function*(t){for await(const e of t){const t=Q.deserialize(e);i.log("incoming %s from %p",t.type,n);const r=await i.handleMessage(n,t);null!=r&&(yield r.serialize())}}),K.c(),e)})).catch((t=>{this.log.error(t)}))}}var Yt=r(55305);class Zt extends tt.v{constructor(t,e){super();const{protocol:r,lan:n}=e;this.components=t,this.log=(0,k.kg)("libp2p:kad-dht:topology-listener:"+(n?"lan":"wan")),this.running=!1,this.protocol=r}isStarted(){return this.running}async start(){if(this.running)return;this.running=!0;const t=(0,Yt.a)({onConnect:t=>{this.log("observed peer %p with protocol %s",t,this.protocol),this.dispatchEvent(new tt.A("peer",{detail:t}))}});this.registrarId=await this.components.registrar.register(this.protocol,t)}async stop(){this.running=!1,null!=this.registrarId&&(this.components.registrar.unregister(this.registrarId),this.registrarId=void 0)}}var Qt=r(56635);class Xt{constructor(t,e){const{peerRouting:r,lan:n,count:i,interval:s,queryTimeout:o}=e;this.components=t,this.log=(0,k.kg)(`libp2p:kad-dht:${n?"lan":"wan"}:query-self`),this.running=!1,this.peerRouting=r,this.count=i??f,this.interval=s??g,this.queryTimeout=o??y}isStarted(){return this.running}async start(){this.running||(this.running=!0,this._querySelf())}async stop(){this.running=!1,null!=this.timeoutId&&clearTimeout(this.timeoutId),null!=this.controller&&this.controller.abort()}_querySelf(){Promise.resolve().then((async()=>{const t=new C.TimeoutController(this.queryTimeout);try{this.controller=new AbortController;const e=(0,Ct.anySignal)([this.controller.signal,t.signal]);try{null!=Lt.setMaxListeners&&(0,Lt.setMaxListeners)(1/0,e)}catch{}const r=await(0,z.zG)(this.peerRouting.getClosestPeers(this.components.peerId.toBytes(),{signal:e}),(t=>(0,Qt.Z)(t,this.count)),(async t=>await(0,U.Z)(t)));this.log("query ran successfully - found %d peers",r)}catch(t){this.log("query error",t)}finally{this.timeoutId=setTimeout(this._querySelf.bind(this),this.interval),t.clear()}})).catch((t=>{this.log("query error",t)}))}}var Jt=r(59769);class te extends tt.v{constructor(t,e){super();const{kBucketSize:r,clientMode:n,validators:i,selectors:s,querySelfInterval:o,lan:a,protocolPrefix:c,pingTimeout:u,pingConcurrency:l,maxInboundStreams:h,maxOutboundStreams:d,providers:f}=e;this.running=!1,this.components=t,this.lan=Boolean(a),this.log=(0,k.kg)("libp2p:kad-dht:"+(!0===a?"lan":"wan")),this.protocol=`${c??"/ipfs"}${!0===a?"/lan":""}/kad/1.0.0`,this.kBucketSize=r??20,this.clientMode=n??!0,this.maxInboundStreams=h??32,this.maxOutboundStreams=d??64,this.routingTable=new B(t,{kBucketSize:r,lan:this.lan,pingTimeout:u,pingConcurrency:l,protocol:this.protocol}),this.providers=new At(t,f??{}),this.validators={...dt,...i},this.selectors={...ft,...s},this.network=new ut(t,{protocol:this.protocol,lan:this.lan}),this.queryManager=new Dt(t,{disjointPaths:Math.ceil(this.kBucketSize/2),lan:a}),this.peerRouting=new Et(t,{routingTable:this.routingTable,network:this.network,validators:this.validators,queryManager:this.queryManager,lan:this.lan}),this.contentFetching=new yt(t,{validators:this.validators,selectors:this.selectors,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,network:this.network,lan:this.lan}),this.contentRouting=new mt(t,{network:this.network,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,providers:this.providers,lan:this.lan}),this.routingTableRefresh=new M({peerRouting:this.peerRouting,routingTable:this.routingTable,lan:this.lan}),this.rpc=new Wt(t,{routingTable:this.routingTable,providers:this.providers,peerRouting:this.peerRouting,validators:this.validators,lan:this.lan}),this.topologyListener=new Zt(t,{protocol:this.protocol,lan:this.lan}),this.querySelf=new Xt(t,{peerRouting:this.peerRouting,interval:o,lan:this.lan}),this.network.addEventListener("peer",(t=>{const e=t.detail;this.onPeerConnect(e).catch((t=>{this.log.error("could not add %p to routing table",e.id,t)})),this.dispatchEvent(new tt.A("peer",{detail:e}))})),this.topologyListener.addEventListener("peer",(t=>{const e=t.detail;Promise.resolve().then((async()=>{const t=await this.components.peerStore.addressBook.get(e),r={id:e,multiaddrs:t.map((t=>t.multiaddr)),protocols:[]};await this.onPeerConnect(r)})).catch((t=>{this.log.error("could not add %p to routing table",e,t)}))}))}get[Jt.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/kad-dht"}async onPeerConnect(t){if(this.log("peer %p connected with protocols %s",t.id,t.protocols),0!==(t=this.lan?_(t):v(t)).multiaddrs.length)try{await this.routingTable.add(t.id)}catch(e){this.log.error("could not add %p to routing table",t.id,e)}else this.log("ignoring %p as they do not have any %s addresses in %s",t.id,this.lan?"private":"public",t.multiaddrs.map((t=>t.toString())))}isStarted(){return this.running}async getMode(){return this.clientMode?"client":"server"}async setMode(t){await this.components.registrar.unhandle(this.protocol),"client"===t?(this.log("enabling client mode"),this.clientMode=!0):(this.log("enabling server mode"),this.clientMode=!1,await this.components.registrar.handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))}async start(){this.running=!0,await this.setMode(this.clientMode?"client":"server"),await Promise.all([this.providers.start(),this.queryManager.start(),this.network.start(),this.routingTable.start(),this.topologyListener.start(),this.querySelf.start()]),await this.routingTableRefresh.start()}async stop(){this.running=!1,await Promise.all([this.providers.stop(),this.queryManager.stop(),this.network.stop(),this.routingTable.stop(),this.routingTableRefresh.stop(),this.topologyListener.stop(),this.querySelf.stop()])}async*put(t,e,r={}){yield*this.contentFetching.put(t,e,r)}async*get(t,e={}){yield*this.contentFetching.get(t,e)}async*provide(t,e={}){yield*this.contentRouting.provide(t,this.components.addressManager.getAddresses(),e)}async*findProviders(t,e={}){yield*this.contentRouting.findProviders(t,e)}async*findPeer(t,e={}){yield*this.peerRouting.findPeer(t,e)}async*getClosestPeers(t,e={}){yield*this.peerRouting.getClosestPeers(t,e)}async refreshRoutingTable(){this.routingTableRefresh.refreshTable(!0)}}const ee=(0,k.kg)("libp2p:kad-dht");class re extends tt.v{constructor(t,e,r){super(),this.components=t,this.wan=e,this.lan=r,this.wan.addEventListener("peer",(t=>{this.dispatchEvent(new tt.A("peer",{detail:t.detail}))})),this.lan.addEventListener("peer",(t=>{this.dispatchEvent(new tt.A("peer",{detail:t.detail}))}))}get[Jt.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/dual-kad-dht"}isStarted(){return this.wan.isStarted()&&this.lan.isStarted()}async getMode(){return await this.wan.getMode()}async setMode(t){await this.wan.setMode(t)}async start(){await Promise.all([this.lan.start(),this.wan.start()])}async stop(){await Promise.all([this.lan.stop(),this.wan.stop()])}async*put(t,e,r={}){for await(const n of(0,Pt.Z)(this.lan.put(t,e,r),this.wan.put(t,e,r)))yield n}async*get(t,e={}){let r=!1,n=!1;for await(const i of(0,Pt.Z)(this.lan.get(t,e),this.wan.get(t,e)))yield i,"DIALING_PEER"===i.name&&(r=!0),"VALUE"===i.name&&(r=!0,null!=i.value&&(n=!0)),"SENDING_QUERY"===i.name&&(r=!0);if(!r)throw new F.s("No peers found in routing table!","ERR_NO_PEERS_IN_ROUTING_TABLE");n||(yield it({from:this.components.peerId,error:new F.s("Not found","ERR_NOT_FOUND")}))}async*provide(t,e={}){let r=0,n=0;const i=[],s=[this.lan];"server"===await this.wan.getMode()&&s.push(this.wan);for await(const o of(0,Pt.Z)(...s.map((r=>r.provide(t,e)))))yield o,"SENDING_QUERY"===o.name&&r++,"QUERY_ERROR"===o.name&&i.push(o.error),"PEER_RESPONSE"===o.name&&"ADD_PROVIDER"===o.messageName&&(ee("sent provider record for %s to %p",t,o.from),n++);if(0===n){if(i.length>0)throw new F.s(`Failed to provide to ${i.length} of ${r} peers`,"ERR_PROVIDES_FAILED",{errors:i});throw new F.s("Failed to provide - no peers found","ERR_PROVIDES_FAILED")}}async*findProviders(t,e={}){yield*(0,Pt.Z)(this.lan.findProviders(t,e),this.wan.findProviders(t,e))}async*findPeer(t,e={}){let r=!1;for await(const n of(0,Pt.Z)(this.lan.findPeer(t,e),this.wan.findPeer(t,e)))yield n,"SENDING_QUERY"!==n.name&&"FINAL_PEER"!==n.name||(r=!0);if(!r)throw new F.s("Peer lookup failed","ERR_LOOKUP_FAILED")}async*getClosestPeers(t,e={}){yield*(0,Pt.Z)(this.lan.getClosestPeers(t,e),this.wan.getClosestPeers(t,e))}async refreshRoutingTable(){await Promise.all([this.lan.refreshRoutingTable(),this.wan.refreshRoutingTable()])}}class ne extends re{constructor(t,e){super(t,new te(t,{protocolPrefix:"/ipfs",...e,lan:!1}),new te(t,{protocolPrefix:"/ipfs",...e,clientMode:!1,lan:!0}))}}function ie(t){return e=>new ne(e,t)}},69860:function(t,e,r){"use strict";r.d(e,{kg:function(){return a}});var n=r(11227),i=r(81653),s=r(14249),o=r(99382);function a(t){let e=function(t){const e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}(`${t}:trace`);return n.enabled(`${t}:trace`)&&null!=n.names.map((t=>t.toString())).find((t=>t.includes(":trace")))&&(e=n(`${t}:trace`)),Object.assign(n(t),{error:n(`${t}:error`),trace:e})}n.formatters.b=t=>null==t?"undefined":i.base58btc.baseEncode(t),n.formatters.t=t=>null==t?"undefined":s.base32.baseEncode(t),n.formatters.m=t=>null==t?"undefined":o.base64.baseEncode(t),n.formatters.p=t=>null==t?"undefined":t.toString(),n.formatters.c=t=>null==t?"undefined":t.toString(),n.formatters.k=t=>null==t?"undefined":t.toString()},75306:function(t,e,r){"use strict";r.d(e,{R:function(){return P}});var n,i=r(37430),s=r(2237),o=r(59379),a=r(62308);function c(t){return new Uint8Array(t)}!function(t){t[t.NEW_STREAM=0]="NEW_STREAM",t[t.MESSAGE_RECEIVER=1]="MESSAGE_RECEIVER",t[t.MESSAGE_INITIATOR=2]="MESSAGE_INITIATOR",t[t.CLOSE_RECEIVER=3]="CLOSE_RECEIVER",t[t.CLOSE_INITIATOR=4]="CLOSE_INITIATOR",t[t.RESET_RECEIVER=5]="RESET_RECEIVER",t[t.RESET_INITIATOR=6]="RESET_INITIATOR"}(n||(n={}));const u=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),l=Object.freeze({NEW_STREAM:n.NEW_STREAM,MESSAGE:n.MESSAGE_INITIATOR,CLOSE:n.CLOSE_INITIATOR,RESET:n.RESET_INITIATOR}),h=Object.freeze({MESSAGE:n.MESSAGE_RECEIVER,CLOSE:n.CLOSE_RECEIVER,RESET:n.RESET_RECEIVER});var d=r(61063);const f=10240;const p=new class{constructor(){this._pool=c(f),this._poolOffset=0}write(t,e){const r=this._pool;let i=this._poolOffset;o.encode(t.id<<3|t.type,r,i),i+=o.encode.bytes??0,t.type!==n.NEW_STREAM&&t.type!==n.MESSAGE_INITIATOR&&t.type!==n.MESSAGE_RECEIVER||null==t.data?o.encode(0,r,i):o.encode(t.data.length,r,i),i+=o.encode.bytes??0;const s=r.subarray(this._poolOffset,i);f-i<100?(this._pool=c(f),this._poolOffset=0):this._poolOffset=i,e.append(s),t.type!==n.NEW_STREAM&&t.type!==n.MESSAGE_INITIATOR&&t.type!==n.MESSAGE_RECEIVER||null==t.data||e.append(t.data)}};const g=1<<20;class y{constructor(t=g,e=4194304){this._buffer=new a.H,this._headerInfo=null,this._maxMessageSize=t,this._maxUnprocessedMessageQueueSize=e}write(t){if(null==t||0===t.length)return[];if(this._buffer.append(t),this._buffer.byteLength>this._maxUnprocessedMessageQueueSize)throw Object.assign(new Error("unprocessed message queue size too large!"),{code:"ERR_MSG_QUEUE_TOO_BIG"});const e=[];for(;0!==this._buffer.length;){if(null==this._headerInfo)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(t){if("ERR_MSG_TOO_BIG"===t.code)throw t;break}const{id:t,type:r,length:i,offset:s}=this._headerInfo;if(this._buffer.length-s<i)break;const o={id:t,type:r};r!==n.NEW_STREAM&&r!==n.MESSAGE_INITIATOR&&r!==n.MESSAGE_RECEIVER||(o.data=this._buffer.sublist(s,s+i)),e.push(o),this._buffer.consume(s+i),this._headerInfo=null}return e}_decodeHeader(t){const{value:e,offset:r}=b(t),{value:n,offset:i}=b(t,r),s=7&e;if(null==u[s])throw new Error(`Invalid type received: ${s}`);if(n>this._maxMessageSize)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"});return{id:e>>3,type:s,offset:r+i,length:n}}}const m=128,w=127;function b(t,e=0){let r,n=0,i=0,s=e;const o=t.length;do{if(s>=o||i>49)throw e=0,new RangeError("Could not decode varint");r=t.get(s++),n+=i<28?(r&w)<<i:(r&w)*Math.pow(2,i),i+=7}while(r>=m);return{value:n,offset:e=s-e}}var E=r(52770),v=r(32044),_=r(77408),S=r(69860);const A=(0,S.kg)("libp2p:mplex:stream"),R="ERR_STREAM_RESET";var T=r(738),I=r(8558);const C=(0,S.kg)("libp2p:mplex");function k(t){const e={...t,type:`${u[t.type]} (${t.type})`};return t.type===n.NEW_STREAM&&(e.data=(0,T.BB)(t.data instanceof Uint8Array?t.data:t.data.subarray())),t.type!==n.MESSAGE_INITIATOR&&t.type!==n.MESSAGE_RECEIVER||(e.data=(0,T.BB)(t.data instanceof Uint8Array?t.data:t.data.subarray(),"base16")),e}class N{constructor(t){this.protocol="/mplex/6.7.0",t=t??{},this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._init=t,this.sink=this._createSink();const e=this._createSource();this._source=e,this.source=e,this.closeController=new AbortController,this.rateLimiter=new I.RateLimiterMemory({points:t.disconnectThreshold??5,duration:1})}get streams(){const t=[];for(const e of this._streams.initiators.values())t.push(e);for(const e of this._streams.receivers.values())t.push(e);return t}newStream(t){if(this.closeController.signal.aborted)throw new Error("Muxer already closed");const e=this._streamId++;t=null==t?e.toString():t.toString();const r=this._streams.initiators;return this._newStream({id:e,name:t,type:"initiator",registry:r})}close(t){this.closeController.signal.aborted||(null!=t?this.streams.forEach((e=>{e.abort(t)})):this.streams.forEach((t=>{t.close()})),this.closeController.abort())}_newReceiverStream(t){const{id:e,name:r}=t,n=this._streams.receivers;return this._newStream({id:e,name:r,type:"receiver",registry:n})}_newStream(t){const{id:e,name:r,type:n,registry:o}=t;if(C("new %s stream %s",n,e),"initiator"===n&&this._streams.initiators.size===(this._init.maxOutboundStreams??1024))throw new E.s("Too many outbound streams open","ERR_TOO_MANY_OUTBOUND_STREAMS");if(o.has(e))throw new Error(`${n} stream ${e} already exists!`);const c=function(t){const{id:e,name:r,send:n,onEnd:o,type:c="initiator",maxMsgSize:u=g}=t,d=new AbortController,f=new AbortController,p=new AbortController,y="initiator"===c?l:h,m="initiator"===c?`i${e}`:`r${e}`,w=`${null==r?e:r}`;let b,S=!1,T=!1,I=!1;const C={open:Date.now()},k=t=>{T||(T=!0,A.trace("%s stream %s sink end - err: %o",c,w,t),null!=t&&null==b&&(b=t),S&&(C.close=Date.now(),null!=o&&o(b)))},N=(0,i.d)({onEnd:t=>{S||(S=!0,A.trace("%s stream %s source end - err: %o",c,w,t),null!=t&&null==b&&(b=t),T&&(B.stat.timeline.close=Date.now(),null!=o&&o(b)))}}),B={close:()=>{A.trace("%s stream %s close",c,w),B.closeRead(),B.closeWrite()},closeRead:()=>{A.trace("%s stream %s closeRead",c,w),S||N.end()},closeWrite:()=>{if(A.trace("%s stream %s closeWrite",c,w),!T){p.abort();try{n({id:e,type:y.CLOSE})}catch(t){A.trace("%s stream %s error sending close",c,r,t)}k()}},abort:t=>{A.trace("%s stream %s abort",c,w,t),N.end(t),d.abort(),k(t)},reset:()=>{const t=new E.s("stream reset",R);f.abort(),N.end(t),k(t)},sink:async t=>{if(I)throw new E.s("sink already called on stream","ERR_DOUBLE_SINK");if(I=!0,T)throw new E.s("stream closed for writing","ERR_SINK_ENDED");t=(0,s.wJ)(t,(0,v.anySignal)([d.signal,f.signal,p.signal]));try{"initiator"===c&&n({id:e,type:l.NEW_STREAM,data:new a.H((0,_.m)(w))});for await(let r of t)for(;r.length>0;){if(r.length<=u){n({id:e,type:y.MESSAGE,data:r instanceof Uint8Array?new a.H(r):r});break}r=r instanceof Uint8Array?new a.H(r):r,n({id:e,type:y.MESSAGE,data:r.sublist(0,u)}),r.consume(u)}}catch(t){if("aborted"===t.type&&"The operation was aborted"===t.message){if(p.signal.aborted)return;f.signal.aborted&&(t.message="stream reset",t.code=R),d.signal.aborted&&(t.message="stream aborted",t.code="ERR_STREAM_ABORT")}if(t.code===R)A.trace("%s stream %s reset",c,r);else{A.trace("%s stream %s error",c,r,t);try{n({id:e,type:y.RESET})}catch(t){A.trace("%s stream %s error sending reset",c,r,t)}}return N.end(t),void k(t)}try{n({id:e,type:y.CLOSE})}catch(t){A.trace("%s stream %s error sending close",c,r,t)}k()},source:N,sourcePush:t=>{N.push(t)},sourceReadableLength:()=>N.readableLength,stat:{direction:"initiator"===c?"outbound":"inbound",timeline:C},metadata:{},id:m};return B}({id:e,name:r,send:t=>{C.enabled&&C.trace("%s stream %s send",n,e,k(t)),this._source.push(t)},type:n,onEnd:()=>{C("%s stream with id %s and protocol %s ended",n,e,c.stat.protocol),o.delete(e),null!=this._init.onStreamEnd&&this._init.onStreamEnd(c)},maxMsgSize:this._init.maxMsgSize});return o.set(e,c),c}_createSink(){return async t=>{const e=[this.closeController.signal];null!=this._init.signal&&e.push(this._init.signal),t=(0,s.wJ)(t,v(e));try{const e=new y(this._init.maxMsgSize,this._init.maxUnprocessedMessageQueueSize);for await(const r of t)for(const t of e.write(r))await this._handleIncoming(t);this._source.end()}catch(t){C("error in sink",t),this._source.end(t)}}}_createSource(){const t=(0,i.e)({objectMode:!0,onEnd:t=>{this.close(t)}});return Object.assign(async function*(t,e=0){if(null!=e&&0!==e)yield*(0,d.Z)(t,{size:e,serialize:(t,e)=>{for(const r of t)p.write(r,e)}});else for await(const e of t){const t=new a.H;for(const r of e)p.write(r,t);yield t.subarray()}}(t,this._init.minSendBytes),{push:t.push,end:t.end,return:t.return})}async _handleIncoming(t){const{id:e,type:r}=t;if(C.enabled&&C.trace("incoming message",k(t)),t.type===n.NEW_STREAM){if(this._streams.receivers.size===(this._init.maxInboundStreams??1024)){C("too many inbound streams open"),this._source.push({id:e,type:n.RESET_RECEIVER});try{await this.rateLimiter.consume("new-stream",1)}catch{return C("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"),void this._source.end(new Error("Too many open streams"))}return}const r=this._newReceiverStream({id:e,name:(0,T.BB)(t.data instanceof Uint8Array?t.data:t.data.subarray())});return void(null!=this._init.onIncomingStream&&this._init.onIncomingStream(r))}const i=(1==(1&r)?this._streams.initiators:this._streams.receivers).get(e);if(null==i)return void C("missing stream %s for message type %s",e,u[r]);const s=this._init.maxStreamBufferSize??4194304;switch(r){case n.MESSAGE_INITIATOR:case n.MESSAGE_RECEIVER:if(i.sourceReadableLength()>s){this._source.push({id:t.id,type:r===n.MESSAGE_INITIATOR?n.RESET_RECEIVER:n.RESET_INITIATOR});const e=new E.s("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers","ERR_STREAM_INPUT_BUFFER_FULL");return void i.abort(e)}i.sourcePush(t.data);break;case n.CLOSE_INITIATOR:case n.CLOSE_RECEIVER:i.closeRead();break;case n.RESET_INITIATOR:case n.RESET_RECEIVER:i.reset();break;default:C("unknown message type %s",r)}}}class B{constructor(t={}){this.protocol="/mplex/6.7.0",this._init=t}createStreamMuxer(t={}){return new N({...t,...this._init})}}function P(t={}){return()=>new B(t)}},4542:function(t,e,r){"use strict";r.d(e,{ji:function(){return s},fd:function(){return o}});var n=r(23366);function i(t,e){const r={[Symbol.iterator]:()=>r,next:()=>{const r=t.next(),n=r.value;if(!0===r.done||null==n){return{done:!0,value:void 0}}return{done:!1,value:e(n)}}};return r}class s{constructor(t){if(this.map=new Map,null!=t)for(const[e,r]of t.entries())this.map.set(e.toString(),r)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(t){this.map.delete(t.toString())}entries(){return i(this.map.entries(),(t=>[(0,n.jE)(t[0]),t[1]]))}forEach(t){this.map.forEach(((e,r)=>{t(e,(0,n.jE)(r),this)}))}get(t){return this.map.get(t.toString())}has(t){return this.map.has(t.toString())}set(t,e){this.map.set(t.toString(),e)}keys(){return i(this.map.keys(),(t=>(0,n.jE)(t)))}values(){return this.map.values()}get size(){return this.map.size}}class o{constructor(t){if(this.set=new Set,null!=t)for(const e of t)this.set.add(e.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(t){this.set.add(t.toString())}clear(){this.set.clear()}delete(t){this.set.delete(t.toString())}entries(){return i(this.set.entries(),(t=>{const e=(0,n.jE)(t[0]);return[e,e]}))}forEach(t){this.set.forEach((e=>{const r=(0,n.jE)(e);t(r,r,this)}))}has(t){return this.set.has(t.toString())}values(){return i(this.set.values(),(t=>(0,n.jE)(t)))}intersection(t){const e=new o;for(const r of t)this.has(r)&&e.add(r);return e}difference(t){const e=new o;for(const r of this)t.has(r)||e.add(r);return e}union(t){const e=new o;for(const r of t)e.add(r);for(const t of this)e.add(t);return e}}class a{constructor(t){if(this.list=[],null!=t)for(const e of t)this.list.push(e.toString())}[Symbol.iterator](){return mapIterable(this.list.entries(),(t=>peerIdFromString(t[1])))}concat(t){const e=new a(this);for(const r of t)e.push(r);return e}entries(){return mapIterable(this.list.entries(),(t=>[t[0],peerIdFromString(t[1])]))}every(t){return this.list.every(((e,r)=>t(peerIdFromString(e),r,this)))}filter(t){const e=new a;return this.list.forEach(((r,n)=>{const i=peerIdFromString(r);t(i,n,this)&&e.push(i)})),e}find(t){const e=this.list.find(((e,r)=>t(peerIdFromString(e),r,this)));if(null!=e)return peerIdFromString(e)}findIndex(t){return this.list.findIndex(((e,r)=>t(peerIdFromString(e),r,this)))}forEach(t){this.list.forEach(((e,r)=>{t(peerIdFromString(e),r,this)}))}includes(t){return this.list.includes(t.toString())}indexOf(t){return this.list.indexOf(t.toString())}pop(){const t=this.list.pop();if(null!=t)return peerIdFromString(t)}push(...t){for(const e of t)this.list.push(e.toString())}shift(){const t=this.list.shift();if(null!=t)return peerIdFromString(t)}unshift(...t){let e=this.list.length;for(let e=t.length-1;e>-1;e--)this.list.unshift(t[e].toString());return e}get length(){return this.list.length}}},21017:function(t,e,r){"use strict";r.d(e,{n9:function(){return a},W$:function(){return c}});var n,i=r(86906),s=(r(77408),r(23366)),o=r(46888);!function(t){let e;t.codec=()=>(null==e&&(e=(0,o.yw)(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),null!=t.id&&(e.uint32(10),e.bytes(t.id)),null!=t.pubKey&&(e.uint32(18),e.bytes(t.pubKey)),null!=t.privKey&&(e.uint32(26),e.bytes(t.privKey)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.id=t.bytes();break;case 2:r.pubKey=t.bytes();break;case 3:r.privKey=t.bytes();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>(0,o.LE)(e,t.codec()),t.decode=e=>(0,o.C6)(e,t.codec())}(n||(n={}));const a=async()=>{const t=await(0,i.generateKeyPair)("Ed25519"),e=await u(t);if("Ed25519"===e.type)return e;throw new Error(`Generated unexpected PeerId type "${e.type}"`)},c=async t=>{const e=await(0,i.generateKeyPair)("RSA",t?.bits??2048),r=await u(e);if("RSA"===r.type)return r;throw new Error(`Generated unexpected PeerId type "${r.type}"`)};async function u(t){return await(0,s.y5)((0,i.marshalPublicKey)(t.public),(0,i.marshalPrivateKey)(t))}},23366:function(t,e,r){"use strict";r.d(e,{cv:function(){return S},jE:function(){return _},vL:function(){return v},y5:function(){return A}});var n=r(38161),i=r(97098),s=r(81653),o=r(29094),a=r(38566),c=r(73062),u=r(27353),l=r(52770),h=r(682);const d=Symbol.for("nodejs.util.inspect.custom"),f=Object.values(i.gh).map((t=>t.decoder)).reduce(((t,e)=>t.or(e)),i.gh.identity.decoder),p=114,g=36,y=37;class m{constructor(t){this.type=t.type,this.multihash=t.multihash,this.privateKey=t.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[h.N](){return!0}toString(){return null==this.string&&(this.string=s.base58btc.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return n.k0.createV1(p,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(t){if(t instanceof Uint8Array)return(0,c.f)(this.multihash.bytes,t);if("string"==typeof t)return _(t).equals(this);if(null!=t?.multihash?.bytes)return(0,c.f)(this.multihash.bytes,t.multihash.bytes);throw new Error("not valid Id")}[d](){return`PeerId(${this.toString()})`}}class w extends m{constructor(t){super({...t,type:"RSA"}),this.type="RSA",this.publicKey=t.publicKey}}class b extends m{constructor(t){super({...t,type:"Ed25519"}),this.type="Ed25519",this.publicKey=t.multihash.digest}}class E extends m{constructor(t){super({...t,type:"secp256k1"}),this.type="secp256k1",this.publicKey=t.multihash.digest}}function v(t){if("RSA"===t.type)return new w(t);if("Ed25519"===t.type)return new b(t);if("secp256k1"===t.type)return new E(t);throw new l.s("Not a PeerId","ERR_INVALID_PARAMETERS")}function _(t,e){if(e=e??f,"1"===t.charAt(0)||"Q"===t.charAt(0)){const e=o.Jx(s.base58btc.decode(`z${t}`));return t.startsWith("12D")?new b({multihash:e}):t.startsWith("16U")?new E({multihash:e}):new w({multihash:e})}return S(f.decode(t))}function S(t){try{const e=o.Jx(t);if(e.code===a.identity.code){if(e.digest.length===g)return new b({multihash:e});if(e.digest.length===y)return new E({multihash:e})}if(e.code===u.sha256.code)return new w({multihash:e})}catch{return function(t){if(null==t||null==t.multihash||null==t.version||1===t.version&&t.code!==p)throw new Error("Supplied PeerID CID is invalid");const e=t.multihash;if(e.code===u.sha256.code)return new w({multihash:t.multihash});if(e.code===a.identity.code){if(e.digest.length===g)return new b({multihash:t.multihash});if(e.digest.length===y)return new E({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}(n.k0.decode(t))}throw new Error("Supplied PeerID CID is invalid")}async function A(t,e){return t.length===g?new b({multihash:o.Ue(a.identity.code,t),privateKey:e}):t.length===y?new E({multihash:o.Ue(a.identity.code,t),privateKey:e}):new w({multihash:await u.sha256.digest(t),publicKey:t,privateKey:e})}},29666:function(t,e,r){"use strict";r.d(e,{K:function(){return pt},X:function(){return f}});var n=r(52770),i=r(77408),s=r(73062),o=r(86906);const a="ERR_SIGNATURE_NOT_VALID";var c,u=r(46888);!function(t){let e;t.codec=()=>(null==e&&(e=(0,u.yw)(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),null!=t.publicKey&&t.publicKey.byteLength>0&&(e.uint32(10),e.bytes(t.publicKey)),null!=t.payloadType&&t.payloadType.byteLength>0&&(e.uint32(18),e.bytes(t.payloadType)),null!=t.payload&&t.payload.byteLength>0&&(e.uint32(26),e.bytes(t.payload)),null!=t.signature&&t.signature.byteLength>0&&(e.uint32(42),e.bytes(t.signature)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.publicKey=t.bytes();break;case 2:r.payloadType=t.bytes();break;case 3:r.payload=t.bytes();break;case 5:r.signature=t.bytes();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>(0,u.LE)(e,t.codec()),t.decode=e=>(0,u.C6)(e,t.codec())}(c||(c={}));var l=r(23366),h=r(62308),d=r(94565);class f{constructor(t){const{peerId:e,payloadType:r,payload:n,signature:i}=t;this.peerId=e,this.payloadType=r,this.payload=n,this.signature=i}marshal(){if(null==this.peerId.publicKey)throw new Error("Missing public key");return null==this.marshaled&&(this.marshaled=c.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(t){return(0,s.f)(this.marshal(),t.marshal())}async validate(t){const e=p(t,this.payloadType,this.payload);if(null==this.peerId.publicKey)throw new Error("Missing public key");const r=(0,o.unmarshalPublicKey)(this.peerId.publicKey);return await r.verify(e.subarray(),this.signature)}}f.createFromProtobuf=async t=>{const e=c.decode(t),r=await(0,l.y5)(e.publicKey);return new f({peerId:r,payloadType:e.payloadType,payload:e.payload,signature:e.signature})},f.seal=async(t,e)=>{if(null==e.privateKey)throw new Error("Missing private key");const r=t.domain,n=t.codec,i=t.marshal(),s=p(r,n,i),a=await(0,o.unmarshalPrivateKey)(e.privateKey),c=await a.sign(s.subarray());return new f({peerId:e,payloadType:n,payload:i,signature:c})},f.openAndCertify=async(t,e)=>{const r=await f.createFromProtobuf(t);if(!await r.validate(e))throw new n.s("envelope signature is not valid for the given domain",a);return r};const p=(t,e,r)=>{const n=(0,i.m)(t),s=d.hG.encode(n.byteLength),o=d.hG.encode(e.length),a=d.hG.encode(r.length);return new h.H(s,n,o,e,a,r)};var g=r(49736),y=r(49784);const m=g.C,w=g.aY,b=function(t){let e=0;if(t=t.toString().trim(),m(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach((t=>{r[e++]=255&parseInt(t,10)})),r}if(w(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){let t;m(r[n])&&(t=b(r[n]),r[n]=(0,y.B)(t.slice(0,2),"base16")),null!=t&&++n<8&&r.splice(n,0,(0,y.B)(t.slice(2,4),"base16"))}if(""===r[0])for(;r.length<8;)r.unshift("0");else if(""===r[r.length-1])for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&""!==r[n];n++);const t=[n,1];for(n=9-r.length;n>0;n--)t.push("0");r.splice.apply(r,t)}const i=new Uint8Array(e+16);for(n=0;n<r.length;n++){const t=parseInt(r[n],16);i[e++]=t>>8&255,i[e++]=255&t}return i}throw new Error("invalid ip address")},E=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(4===r){const n=[];for(let i=0;i<r;i++)n.push(t[e+i]);return n.join(".")}if(16===r){const t=[];for(let i=0;i<r;i+=2)t.push(n.getUint16(e+i).toString(16));return t.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},v=-1,_={},S={};function A(t){if("number"==typeof t){if(null!=S[t])return S[t];throw new Error(`no protocol with code: ${t}`)}if("string"==typeof t){if(null!=_[t])return _[t];throw new Error(`no protocol with name: ${t}`)}throw new Error("invalid protocol id type: "+typeof t)}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,v,"ip6zone"],[43,8,"ipcidr"],[53,v,"dns",!0],[54,v,"dns4",!0],[55,v,"dns6",!0],[56,v,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,v,"unix",!1,!0],[421,v,"ipfs"],[421,v,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,v,"garlic64"],[448,0,"tls"],[449,v,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,v,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,v,"memory"]].forEach((t=>{const e=function(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(i)}}(...t);S[e.code]=e,_[e.name]=e}));var R=r(38161),T=r(14249),I=r(81653),C=r(97098),k=r(29094),N=r(31617),B=r(41690);r(9839);A("ip4"),A("ip6"),A("ipcidr");function P(t,e){switch(A(t).code){case 4:case 41:return function(t){const e=E(t,0,t.length);if(null==e)throw new Error("ipBuff is required");if(!g.h6(e))throw new Error("invalid ip address");return e}(e);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return j(e);case 6:case 273:case 33:case 132:return M(e).toString();case 421:return function(t){const e=N.decode(t),r=t.slice(N.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return(0,y.B)(r,"base58btc")}(e);case 444:case 445:return F(e);case 466:return function(t){const e=N.decode(t),r=t.slice(N.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+(0,y.B)(r,"base64url")}(e);default:return(0,y.B)(e,"base16")}}function L(t,e){switch(A(t).code){case 4:case 41:return x(e);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return V(e);case 6:case 273:case 33:case 132:return U(parseInt(e,10));case 421:return function(t){let e;e="Q"===t[0]||"1"===t[0]?k.Jx(I.base58btc.decode(`z${t}`)).bytes:R.k0.parse(t).multihash.bytes;const r=Uint8Array.from(N.encode(e.length));return(0,B.z)([r,e],r.length+e.length)}(e);case 444:return function(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(16!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=T.base32.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=U(n);return(0,B.z)([r,i],r.length+i.length)}(e);case 445:return function(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(56!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=T.base32.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=U(n);return(0,B.z)([r,i],r.length+i.length)}(e);case 466:return function(t){const e=O.decode(t),r=Uint8Array.from(N.encode(e.length));return(0,B.z)([r,e],r.length+e.length)}(e);default:return(0,i.m)(e,"base16")}}const D=Object.values(C.gh).map((t=>t.decoder)),O=function(){let t=D[0].or(D[1]);return D.slice(2).forEach((e=>t=t.or(e))),t}();function x(t){if(!g.h6(t))throw new Error("invalid ip address");return b(t)}function U(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function M(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function V(t){const e=(0,i.m)(t),r=Uint8Array.from(N.encode(e.length));return(0,B.z)([r,e],r.length+e.length)}function j(t){const e=N.decode(t);if((t=t.slice(N.decode.bytes)).length!==e)throw new Error("inconsistent lengths");return(0,y.B)(t)}function F(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2);return`${(0,y.B)(e,"base32")}:${M(r)}`}function z(t){return t.map((t=>{const e=X(t);return null!=t[1]?[e.code,P(e.code,t[1])]:[e.code]}))}function K(t){return W((0,B.z)(t.map((t=>{const e=X(t);let r=Uint8Array.from(N.encode(e.code));return t.length>1&&null!=t[1]&&(r=(0,B.z)([r,t[1]])),r}))))}function $(t,e){if(t.size>0)return t.size/8;if(0===t.size)return 0;return N.decode(e)+(N.decode.bytes??0)}function q(t){const e=[];let r=0;for(;r<t.length;){const n=N.decode(t,r),i=N.decode.bytes??0,s=$(A(n),t.slice(r+i));if(0===s){e.push([n]),r+=i;continue}const o=t.slice(r+i,r+i+s);if(r+=s+i,r>t.length)throw Q("Invalid address Uint8Array: "+(0,y.B)(t,"base16"));e.push([n,o])}return e}function H(t){return function(t){const e=[];return t.map((t=>{const r=X(t);return e.push(r.name),t.length>1&&null!=t[1]&&e.push(t[1]),null})),Z(e.join("/"))}(z(q(t)))}function G(t){const e=function(t){const e=[],r=t.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const i=r[n],s=A(i);if(0!==s.size){if(n++,n>=r.length)throw Q("invalid address: "+t);if(!0===s.path){e.push([i,Z(r.slice(n).join("/"))]);break}e.push([i,r[n]])}else e.push([i])}return e}(t=Z(t));return K(e.map((t=>{Array.isArray(t)||(t=[t]);const e=X(t);return t.length>1?[e.code,L(e.code,t[1])]:[e.code]})))}function W(t){const e=Y(t);if(null!=e)throw e;return Uint8Array.from(t)}function Y(t){try{q(t)}catch(t){return t}}function Z(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function Q(t){return new Error("Error parsing address: "+t)}function X(t){return A(t[0])}var J=r(32114);var tt,et,rt,nt,it=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)},st=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r};const ot=Symbol.for("nodejs.util.inspect.custom"),at=[A("dns").code,A("dns4").code,A("dns6").code,A("dnsaddr").code],ct=new Map,ut=Symbol.for("@multiformats/js-multiaddr/multiaddr");function lt(t){return Boolean(t?.[ut])}class ht{constructor(t){if(tt.set(this,void 0),et.set(this,void 0),rt.set(this,void 0),this[nt]=!0,null==t&&(t=""),t instanceof Uint8Array)this.bytes=W(t);else if("string"==typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=G(t)}else{if(!lt(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=W(t.bytes)}}toString(){return null==it(this,tt,"f")&&st(this,tt,H(this.bytes),"f"),it(this,tt,"f")}toJSON(){return this.toString()}toOptions(){let t,e,r,n,i="";const s=A("tcp"),o=A("udp"),a=A("ip4"),c=A("ip6"),u=A("dns6"),l=A("ip6zone");for(const[h,d]of this.stringTuples())h===l.code&&(i=`%${d??""}`),at.includes(h)&&(e=s.name,n=443,r=`${d??""}${i}`,t=h===u.code?6:4),h!==s.code&&h!==o.code||(e=A(h).name,n=parseInt(d??"")),h!==a.code&&h!==c.code||(e=A(h).name,r=`${d??""}${i}`,t=h===c.code?6:4);if(null==t||null==e||null==r||null==n)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:r,transport:e,port:n}}protos(){return this.protoCodes().map((t=>Object.assign({},A(t))))}protoCodes(){const t=[],e=this.bytes;let r=0;for(;r<e.length;){const n=N.decode(e,r),i=N.decode.bytes??0;r+=$(A(n),e.slice(r+i))+i,t.push(n)}return t}protoNames(){return this.protos().map((t=>t.name))}tuples(){return null==it(this,et,"f")&&st(this,et,q(this.bytes),"f"),it(this,et,"f")}stringTuples(){return null==it(this,rt,"f")&&st(this,rt,z(this.tuples()),"f"),it(this,rt,"f")}encapsulate(t){return t=new ht(t),new ht(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),r=this.toString(),n=r.lastIndexOf(e);if(n<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new ht(r.slice(0,n))}decapsulateCode(t){const e=this.tuples();for(let r=e.length-1;r>=0;r--)if(e[r][0]===t)return new ht(K(e.slice(0,r)));return this}getPeerId(){try{const t=this.stringTuples().filter((t=>t[0]===_.ipfs.code)),e=t.pop();if(null!=e?.[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?(0,y.B)(I.base58btc.decode(`z${t}`),"base58btc"):(0,y.B)(R.k0.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){let t=null;try{t=this.stringTuples().filter((t=>!0===A(t[0]).path))[0][1],null==t&&(t=null)}catch{t=null}return t}equals(t){return(0,s.f)(this.bytes,t.bytes)}async resolve(t){const e=this.protos().find((t=>t.resolvable));if(null==e)return[this];const r=ct.get(e.name);if(null==r)throw J(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this,t)).map((t=>new ht(t)))}nodeAddress(){const t=this.toOptions();if("tcp"!==t.transport&&"udp"!==t.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){const e=(t??this).protos();return 2===e.length&&((4===e[0].code||41===e[0].code)&&(6===e[1].code||273===e[1].code))}[(tt=new WeakMap,et=new WeakMap,rt=new WeakMap,nt=ut,ot)](){return`Multiaddr(${H(this.bytes)})`}}var dt;!function(t){let e,r;!function(t){let e;t.codec=()=>(null==e&&(e=(0,u.yw)(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),null!=t.multiaddr&&t.multiaddr.byteLength>0&&(e.uint32(10),e.bytes(t.multiaddr)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={multiaddr:new Uint8Array(0)},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();if(e>>>3==1)r.multiaddr=t.bytes();else t.skipType(7&e)}return r}))),e),t.encode=e=>(0,u.LE)(e,t.codec()),t.decode=e=>(0,u.C6)(e,t.codec())}(e=t.AddressInfo||(t.AddressInfo={})),t.codec=()=>(null==r&&(r=(0,u.yw)(((e,r,n={})=>{if(!1!==n.lengthDelimited&&r.fork(),null!=e.peerId&&e.peerId.byteLength>0&&(r.uint32(10),r.bytes(e.peerId)),null!=e.seq&&0n!==e.seq&&(r.uint32(16),r.uint64(e.seq)),null!=e.addresses)for(const n of e.addresses)r.uint32(26),t.AddressInfo.codec().encode(n,r);!1!==n.lengthDelimited&&r.ldelim()}),((e,r)=>{const n={peerId:new Uint8Array(0),seq:0n,addresses:[]},i=null==r?e.len:e.pos+r;for(;e.pos<i;){const r=e.uint32();switch(r>>>3){case 1:n.peerId=e.bytes();break;case 2:n.seq=e.uint64();break;case 3:n.addresses.push(t.AddressInfo.codec().decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n}))),r),t.encode=e=>(0,u.LE)(e,t.codec()),t.decode=e=>(0,u.C6)(e,t.codec())}(dt||(dt={}));const ft=Uint8Array.from([3,1]);class pt{constructor(t){this.domain=pt.DOMAIN,this.codec=pt.CODEC;const{peerId:e,multiaddrs:r,seqNumber:n}=t;this.peerId=e,this.multiaddrs=r??[],this.seqNumber=n??BigInt(Date.now())}marshal(){return null==this.marshaled&&(this.marshaled=dt.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map((t=>({multiaddr:t.bytes})))})),this.marshaled}equals(t){return t instanceof pt&&(!!this.peerId.equals(t.peerId)&&(this.seqNumber===t.seqNumber&&!!function(t,e){const r=(t,e)=>t.toString().localeCompare(e.toString());return t.length===e.length&&(e.sort(r),t.sort(r).every(((t,r)=>e[r].equals(t))))}(this.multiaddrs,t.multiaddrs)))}}pt.createFromProtobuf=t=>{const e=dt.decode(t),r=(0,l.cv)(e.peerId),n=(e.addresses??[]).map((t=>{return e=t.multiaddr,new ht(e);var e})),i=e.seq;return new pt({peerId:r,multiaddrs:n,seqNumber:i})},pt.DOMAIN="libp2p-peer-record",pt.CODEC=ft},86257:function(t,e,r){"use strict";r.d(e,{Pc:function(){return i}});r(79944);var n=r(77408);r(49784),r(27353),r(23366);r(52770);const i=(t,e)=>{const r=(0,n.m)(e.toString(16).padStart(16,"0"),"base16"),i=new Uint8Array(t.length+r.length);return i.set(t,0),i.set(r,t.length),i}},21177:function(t,e,r){"use strict";r.d(e,{Y:function(){return o}});var n,i=r(46888);function s(t){const e=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),n=String(t.getUTCDate()).padStart(2,"0"),i=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0"),o=String(t.getUTCSeconds()).padStart(2,"0"),a=t.getUTCMilliseconds();return`${e}-${r}-${n}T${i}:${s}:${o}.${String(1e3*a*1e3).padStart(9,"0")}Z`}!function(t){let e;t.codec=()=>(null==e&&(e=(0,i.yw)(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),null!=t.key&&t.key.byteLength>0&&(e.uint32(10),e.bytes(t.key)),null!=t.value&&t.value.byteLength>0&&(e.uint32(18),e.bytes(t.value)),null!=t.timeReceived&&""!==t.timeReceived&&(e.uint32(42),e.string(t.timeReceived)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={key:new Uint8Array(0),value:new Uint8Array(0),timeReceived:""},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.key=t.bytes();break;case 2:r.value=t.bytes();break;case 5:r.timeReceived=t.string();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>(0,i.LE)(e,t.codec()),t.decode=e=>(0,i.C6)(e,t.codec())}(n||(n={}));class o{constructor(t,e,r){if(!(t instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(e instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=t,this.value=e,this.timeReceived=r}serialize(){return n.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:s(this.timeReceived)}}static deserialize(t){const e=n.decode(t);return new o(e.key,e.value,new Date(e.timeReceived))}static fromDeserialized(t){const e=function(t){const e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(null==r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,o,a,c,u))}(t.timeReceived);if(null==t.key)throw new Error("key missing from deserialized object");if(null==t.value)throw new Error("value missing from deserialized object");return new o(t.key,t.value,e)}}},55305:function(t,e,r){"use strict";r.d(e,{a:function(){return o}});var n=r(1388);const i=()=>{};class s{constructor(t){this.min=t.min??0,this.max=t.max??1/0,this.peers=new Set,this.onConnect=t.onConnect??i,this.onDisconnect=t.onDisconnect??i}get[Symbol.toStringTag](){return n.d.toString()}get[n.d](){return!0}async setRegistrar(t){this.registrar=t}disconnect(t){this.onDisconnect(t)}}function o(t){return new s(t)}},20199:function(t,e,r){"use strict";r.d(e,{s:function(){return i}});class n extends Map{constructor(t){super();const{name:e,metrics:r}=t;this.metric=r.registerMetric(e),this.updateComponentMetric()}set(t,e){return super.set(t,e),this.updateComponentMetric(),this}delete(t){const e=super.delete(t);return this.updateComponentMetric(),e}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function i(t){const{name:e,metrics:r}=t;let i;return i=null!=r?new n({name:e,metrics:r}):new Map,i}},1247:function(t,e,r){"use strict";r.d(e,{n:function(){return gt}});var n={};r.r(n),r.d(n,{Decoder:function(){return R},Encoder:function(){return A},PacketType:function(){return S},protocol:function(){return _}});var i=r(69860),s=r(32114),o=r(2237),a=r(91026),c=r(61093);var u=r(85965);var l=r(99748);const h="function"==typeof ArrayBuffer,d=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,f=Object.prototype.toString,p="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===f.call(Blob),g="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===f.call(File);function y(t){return h&&(t instanceof ArrayBuffer||d(t))||p&&t instanceof Blob||g&&t instanceof File}function m(t,e){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let e=0,r=t.length;e<r;e++)if(m(t[e]))return!0;return!1}if(y(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return m(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&m(t[e]))return!0;return!1}function w(t){const e=[],r=t.data,n=t;return n.data=b(r,e),n.attachments=e.length,{packet:n,buffers:e}}function b(t,e){if(!t)return t;if(y(t)){const r={_placeholder:!0,num:e.length};return e.push(t),r}if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=b(t[n],e);return r}if("object"==typeof t&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=b(t[n],e));return r}return t}function E(t,e){return t.data=v(t.data,e),delete t.attachments,t}function v(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=v(t[r],e);else if("object"==typeof t)for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=v(t[r],e));return t}const _=5;var S;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(S||(S={}));class A{constructor(t){this.replacer=t}encode(t){return t.type!==S.EVENT&&t.type!==S.ACK||!m(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===S.EVENT?S.BINARY_EVENT:S.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}encodeAsString(t){let e=""+t.type;return t.type!==S.BINARY_EVENT&&t.type!==S.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=w(t),r=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(r),n}}class R extends l.Q{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const r=e.type===S.BINARY_EVENT;r||e.type===S.BINARY_ACK?(e.type=r?S.EVENT:S.ACK,this.reconstructor=new T(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else{if(!y(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const r={type:Number(t.charAt(0))};if(void 0===S[r.type])throw new Error("unknown packet type "+r.type);if(r.type===S.BINARY_EVENT||r.type===S.BINARY_ACK){const n=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const i=t.substring(n,e);if(i!=Number(i)||"-"!==t.charAt(e))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===t.charAt(e+1)){const n=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}r.nsp=t.substring(n,e)}else r.nsp="/";const n=t.charAt(e+1);if(""!==n&&Number(n)==n){const n=e+1;for(;++e;){const r=t.charAt(e);if(null==r||Number(r)!=r){--e;break}if(e===t.length)break}r.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=this.tryParse(t.substr(e));if(!R.isPayloadValid(r.type,n))throw new Error("invalid payload");r.data=n}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case S.CONNECT:return"object"==typeof e;case S.DISCONNECT:return void 0===e;case S.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case S.EVENT:case S.BINARY_EVENT:return Array.isArray(e)&&("string"==typeof e[0]||"number"==typeof e[0]);case S.ACK:case S.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class T{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=E(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function I(t,e,r){return t.on(e,r),function(){t.off(e,r)}}const C=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class k extends l.Q{constructor(t,e,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[I(t,"open",this.onopen.bind(this)),I(t,"packet",this.onpacket.bind(this)),I(t,"error",this.onerror.bind(this)),I(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(C.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const r={type:S.EVENT,data:e,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,n=e.pop();this._registerAckCallback(t,n),r.id=t}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,e){var r;const n=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===n)return void(this.acks[t]=e);const i=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),n);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(i),e.apply(this,[null,...t])}}emitWithAck(t,...e){const r=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((n,i)=>{e.push(((t,e)=>r?t?i(t):n(e):n(t))),this.emit(t,...e)}))}_addToQueue(t){let e;"function"==typeof t[t.length-1]&&(e=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push(((t,...n)=>{if(r!==this._queue[0])return;return null!==t?r.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(t)):(this._queue.shift(),e&&e(null,...n)),r.pending=!1,this._drainQueue()})),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||0===this._queue.length)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:S.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case S.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case S.EVENT:case S.BINARY_EVENT:this.onevent(t);break;case S.ACK:case S.BINARY_ACK:this.onack(t);break;case S.DISCONNECT:this.ondisconnect();break;case S.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const r of e)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&"string"==typeof t[t.length-1]&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let r=!1;return function(...n){r||(r=!0,e.packet({type:S.ACK,id:t,data:n}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:S.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let r=0;r<e.length;r++)if(t===e[r])return e.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let r=0;r<e.length;r++)if(t===e[r])return e.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const r of e)r.apply(this,t.data)}}}function N(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}N.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},N.prototype.reset=function(){this.attempts=0},N.prototype.setMin=function(t){this.ms=t},N.prototype.setMax=function(t){this.max=t},N.prototype.setJitter=function(t){this.jitter=t};class B extends l.Q{constructor(t,e){var r;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,(0,u.Vq)(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=e.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new N({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||n;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new u.sk(this.uri,this.opts);const e=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=I(e,"open",(function(){r.onopen(),t&&t()})),i=I(e,"error",(e=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",e),t?t(e):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;0===t&&n();const r=this.setTimeoutFn((()=>{n(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}return this.subs.push(n),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(I(t,"ping",this.onping.bind(this)),I(t,"data",this.ondata.bind(this)),I(t,"error",this.onerror.bind(this)),I(t,"close",this.onclose.bind(this)),I(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}ondecoded(t){(0,u.Y3)((()=>{this.emitReserved("packet",t)}),this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new k(this,t,e),this.nsps[t]=r),r}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let r=0;r<e.length;r++)this.engine.write(e[r],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const P={};function L(t,e){"object"==typeof t&&(e=t,t=void 0);const r=function(t,e="",r){let n=t;r=r||"undefined"!=typeof location&&location,null==t&&(t=r.protocol+"//"+r.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?r.protocol+t:r.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==r?r.protocol+"//"+t:"https://"+t),n=(0,u.Qc)(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}(t,(e=e||{}).path||"/socket.io"),n=r.source,i=r.id,s=r.path,o=P[i]&&s in P[i].nsps;let a;return e.forceNew||e["force new connection"]||!1===e.multiplex||o?a=new B(n,e):(P[i]||(P[i]=new B(n,e)),a=P[i]),r.query&&!e.query&&(e.query=r.queryKey),a.socket(r.path,e)}Object.assign(L,{Manager:B,Socket:k,io:L,connect:L});var D=r(85275),O=r(46857),x=r(1914),U=r(49784),M=r(37430);class V{constructor(t,e){this.label=t.label,this.open=(0,D.Z)(),this.channel=t,this.channel.binaryType="arraybuffer",this.log=e.log,"number"==typeof this.channel.bufferedAmountLowThreshold&&(this.channel.bufferedAmountLowThreshold=65536),t.addEventListener("message",(t=>{e.onMessage(t)})),t.addEventListener("bufferedamountlow",(()=>{this.log("stop backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open.resolve()})),t.addEventListener("open",(()=>{this.open.resolve(),e.onOpen()})),t.addEventListener("close",(()=>{e.onClose()})),t.addEventListener("error",(r=>{if("Transport channel closed"===r.error?.message)return this.close();e.log.error('channel encounter an error in state "%s" message: "%s" detail: "%s',t.readyState,r.error?.message,r.error?.errorDetail);const n=r.error instanceof Error?r.error:new Error(`datachannel error: ${r.error?.message} ${r.error?.errorDetail}`);e.onError(s(n,"ERR_DATA_CHANNEL"))}));let r=!1;this.closingInterval=setInterval((()=>{"closing"===t.readyState?(r&&e.onClose(),r=!0):r=!1}),5e3)}async send(t){await this.open.promise,this.channel.send(t),this.channel.bufferedAmount>65536&&(this.log("start backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open=(0,D.Z)())}close(){clearInterval(this.closingInterval),this.channel.close()}get bufferedAmount(){return this.channel.bufferedAmount}}var j=r(65780);const F={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]};class z extends O.v{constructor(t){super(),this.id=t.id??(0,U.B)(x(4),"hex").slice(0,7),this.log=(0,i.kg)(`libp2p:webrtc-peer:${t.logPrefix}:${this.id}`),this.wrtc=t.wrtc??function(){if("undefined"==typeof globalThis)throw s(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");const t={RTCPeerConnection:globalThis.RTCPeerConnection??globalThis.mozRTCPeerConnection??globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription??globalThis.mozRTCSessionDescription??globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate??globalThis.mozRTCIceCandidate??globalThis.webkitRTCIceCandidate};if(null==t.RTCPeerConnection)throw s(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");return t}(),this.peerConnection=new this.wrtc.RTCPeerConnection(Object.assign({},F,t.peerConnectionConfig)),this.closed=!1,this.connected=(0,D.Z)(),this.source=(0,M.d)(),this.sink=async t=>{if(await this.connected.promise,null==this.channel)throw s(new Error("Connected but no channel?!"),"ERR_DATA_CHANNEL");for await(const e of t)await this.channel.send(e);await this.close()}}handleDataChannelEvent(t){const e=t.channel;null!=e?this.channel=new V(e,{log:this.log,onMessage:t=>{this.source.push(new Uint8Array(t.data))},onOpen:()=>{this.connected.resolve(),this.dispatchEvent(new O.A("ready"))},onClose:()=>{this.close().catch((t=>{this.log("error closing connection after channel close",t)}))},onError:t=>{this.close(t).catch((t=>{this.log("error closing connection after channel error",t)}))}}):this.close(s(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL")).catch((t=>{this.log("Error closing after event channel was found to be null",t)}))}async close(t){if(this.closed=!0,null==t&&null!=this.channel)for(;this.channel.bufferedAmount>0;)await j(100);this.channel?.close(),this.peerConnection.close(),this.source.end(t),this.dispatchEvent(new O.A("close"))}}class K extends O.v{constructor(t){super(),this.log=t.log,this.peerConnection=t.peerConnection,this.wrtc=t.wrtc,this.status="idle",this.peerConnection.addEventListener("negotiationneeded",(()=>{this.log("peer connection negotiation needed"),this.handleRenegotiate({type:"renegotiate"}).catch((t=>{this.log.error("could not renegotiate %o",t)}))}))}async handleSignal(t){return this.log('incoming signal "%s"',t.type),"offer"===t.type?await this.handleOffer(t):"answer"===t.type?await this.handleAnswer(t):"candidate"===t.type?await this.handleCandidate(t):"renegotiate"===t.type?await this.handleRenegotiate(t):"goodbye"===t.type?await this.handleGoodye(t):void this.log(`Unknown signal type ${t.type}`)}async handleOffer(t){}async handleAnswer(t){}async handleRenegotiate(t){}async handleGoodye(t){this.peerConnection.close()}async handleCandidate(t){const e=new this.wrtc.RTCIceCandidate(t.candidate);try{await this.peerConnection.addIceCandidate(e)}catch(t){if(null!=e.address&&!e.address.endsWith(".local"))throw s(t,"ERR_ADD_ICE_CANDIDATE");this.log("ignoring unsupported ICE candidate.")}}}const $=(0,i.kg)("libp2p:webrtc-peer:receiver");class q extends z{constructor(t={}){super({...t,logPrefix:"receiver"}),this.handshake=new H({log:this.log,peerConnection:this.peerConnection,wrtc:this.wrtc,answerOptions:t.answerOptions}),this.handshake.addEventListener("signal",(t=>this.dispatchEvent(new O.A("signal",{detail:t.detail})))),this.peerConnection.addEventListener("datachannel",(t=>{this.handleDataChannelEvent(t)}))}handleSignal(t){this.handshake.handleSignal(t).catch((e=>{this.log("error handling signal %o %o",t,e)}))}}class H extends K{constructor(t){super(t),this.options=t,this.status="idle",this.iceCandidates=[]}async handleRenegotiate(){$.trace("renegotiate"),this.dispatchEvent(new O.A("signal",{detail:{type:"renegotiate"}}))}async handleOffer(t){await this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(t));for(const t of this.iceCandidates)await this.handleCandidate(t);this.iceCandidates=[];const e=await this.peerConnection.createAnswer(this.options.answerOptions);await this.peerConnection.setLocalDescription(e),$.trace("handle offer",this.peerConnection.localDescription),this.dispatchEvent(new O.A("signal",{detail:this.peerConnection.localDescription??e}))}async handleCandidate(t){null!=this.peerConnection.remoteDescription&&null!=this.peerConnection.remoteDescription.type?await super.handleCandidate(t):this.iceCandidates.push(t)}}var G=r(71198);const W=t=>{const e=t.on||t.addListener||t.addEventListener,r=t.off||t.removeListener||t.removeEventListener;if(!e||!r)throw new TypeError("Emitter is not compatible");return{addListener:e.bind(t),removeListener:r.bind(t)}};function Y(t,e,r){"function"==typeof r&&(r={filter:r});const n=function(t,e,r){let n;const i=new Promise(((i,s)=>{if(!((r={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...r}).count>=0)||r.count!==Number.POSITIVE_INFINITY&&!Number.isInteger(r.count))throw new TypeError("The `count` option should be at least 0 or more");const o=[e].flat(),a=[],{addListener:c,removeListener:u}=W(t),l=(...t)=>{const e=r.multiArgs?t:t[0];r.filter&&!r.filter(e)||(a.push(e),r.count===a.length&&(n(),i(a)))},h=t=>{n(),s(t)};n=()=>{for(const t of o)u(t,l);for(const t of r.rejectionEvents)u(t,h)};for(const t of o)c(t,l);for(const t of r.rejectionEvents)c(t,h);r.resolveImmediately&&i(a)}));if(i.cancel=n,"number"==typeof r.timeout){const t=(0,G.ZP)(i,r.timeout);return t.cancel=n,t}return i}(t,e,r={...r,count:1,resolveImmediately:!1}),i=n.then((t=>t[0]));return i.cancel=n.cancel,i}const Z=(0,i.kg)("libp2p:webrtc-peer:initator");class Q extends z{constructor(t={}){super({...t,logPrefix:"initiator"}),this.handleDataChannelEvent({channel:this.peerConnection.createDataChannel(t.dataChannelLabel??(0,U.B)(x(20),"hex").slice(0,7),t.dataChannelInit)}),this.handshake=new X({log:this.log,peerConnection:this.peerConnection,wrtc:this.wrtc,offerOptions:t.offerOptions}),this.handshake.addEventListener("signal",(t=>{this.dispatchEvent(new O.A("signal",{detail:t.detail}))}))}handleSignal(t){this.handshake.handleSignal(t).catch((e=>{this.log("error handling signal %o %o",t,e)}))}}class X extends K{constructor(t){super(t),this.options=t,this.status="idle",this.peerConnection.addEventListener("icecandidate",(t=>{if(null==t.candidate)return;const e={type:"candidate",candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}};Z.trace("create candidate",e),this.dispatchEvent(new O.A("signal",{detail:e})),this.dispatchEvent(new O.A("ice-candidate"))}))}async handleRenegotiate(){if("negotiating"===this.status)return void this.log("already negotiating, queueing");this.status="negotiating";const t=await this.peerConnection.createOffer(this.options.offerOptions);await this.peerConnection.setLocalDescription(t),await Y(this,"ice-candidate"),await j(1e3),Z.trace("renegotiate",this.peerConnection.localDescription),this.dispatchEvent(new O.A("signal",{detail:this.peerConnection.localDescription??t}))}async handleAnswer(t){Z.trace("handle answer",t),await this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(t)),this.status="idle"}}const J=(0,i.kg)("libp2p:webrtc-star:socket");function tt(t,e){const{sink:r,source:n}=t,i={remoteAddr:e.remoteAddr,async sink(t){null!=e.signal&&(t=(0,o.wJ)(t,e.signal));try{await r(t)}catch(t){"aborted"!==t.type&&J.error(t)}},source:null!=e.signal?(0,o.wJ)(n,e.signal):n,timeline:{open:Date.now()},async close(){if(t.closed)return;const e=Date.now(),r=setTimeout((()=>{if(null!=i.remoteAddr){const{host:t,port:r}=i.remoteAddr.toOptions();J("timeout closing socket to %s:%s after %dms, destroying it manually",t,r,Date.now()-e)}t.closed||t.close().catch((t=>{J.error("could not close socket",t)}))}),2e3);try{await t.close()}finally{clearTimeout(r)}}};return t.addEventListener("close",(()=>{null==i.timeline.close&&(i.timeline.close=Date.now())}),{once:!0}),i}function et(t){const e=t.toString().split("/"),r=t.protos()[1].name,n=t.protos()[2].name,i=t.stringTuples()[1][1];if("tcp"!==r||"ws"!==n&&"wss"!==n)throw new Error(`invalid multiaddr: ${t.toString()}`);if(!(0,a.K9)(t))return`http://${e[2]}:${e[4]}`;if("ws"===n)return`http://${e[2]}${null==i||"80"===i?"":`:${i}`}`;if("wss"===n)return`https://${e[2]}${null==i||"443"===i?"":`:${i}`}`;throw new Error("invalid multiaddr: "+t.toString())}const rt=(0,i.kg)("libp2p:webrtc-star:listener"),nt={transports:["websocket"],path:"/socket.io-next/"};class it extends O.v{constructor(t,e,r,n,i){super(),this.signallingAddr=e,this.socket=L(t,nt),this.connections=[],this.channels=new Map,this.pendingSignals=new Map,this.upgrader=r,this.handler=n,this.channelOptions=i,this.handleWsHandshake=this.handleWsHandshake.bind(this);let s=!1;this.socket.on("connect_error",(t=>{s&&"TransportError"===t.type||this.dispatchEvent(new O.A("error",{detail:t}))})),this.socket.on("error",(t=>{this.dispatchEvent(new O.A("error",{detail:t}))})),this.socket.on("ws-handshake",this.handleWsHandshake),this.socket.on("ws-peer",(t=>{this.dispatchEvent(new O.A("peer",{detail:t}))})),this.socket.on("connect",(()=>{this.socket.emit("ss-join",this.signallingAddr.toString()),s&&this.dispatchEvent(new O.A("reconnect"))})),this.socket.once("connect",(()=>{s=!0,this.dispatchEvent(new O.A("listening"))})),this.socket.on("disconnect",(()=>{this.dispatchEvent(new O.A("disconnect"))}))}_createChannel(t,e,r){const n={...this.channelOptions},i=new q(n),s=t=>{const e=t.detail;rt.error("incoming connection errored",e)};return i.addEventListener("error",s),i.addEventListener("close",(()=>{i.removeEventListener("error",s)}),{once:!0}),i.addEventListener("signal",(n=>{const i=n.detail;this.socket.emit("ss-handshake",{intentId:t,srcMultiaddr:e,dstMultiaddr:r,answer:!0,signal:i})})),i.addEventListener("ready",(()=>{const e=tt(i,{remoteAddr:this.signallingAddr});rt("new inbound connection %s",e.remoteAddr);try{this.upgrader.upgradeInbound(e).then((r=>{rt("inbound connection %s upgraded",e.remoteAddr),this.connections.push(e);i.addEventListener("close",(()=>{this.connections=this.connections.filter((t=>t!==e)),this.channels.delete(t),this.pendingSignals.delete(t)}),{once:!0}),this.dispatchEvent(new O.A("connection",{detail:r})),this.handler(r)})).catch((t=>{rt.error("inbound connection failed to upgrade",t),e.close().catch((t=>{rt.error("inbound connection failed to close after failing to upgrade",t)}))}))}catch(t){rt.error("inbound connection failed to upgrade",t),e.close().catch((t=>{rt.error("inbound connection failed to close after failing to upgrade",t)}))}}),{once:!0}),i}handleWsHandshake(t){if(rt('incoming handshake. signal type "%s" is answer %s',t.signal.type,t.answer),!0===t.answer||null!=t.err||null==t.intentId)return;const e=t.intentId;let r=this.pendingSignals.get(e);null==r&&(r=[],this.pendingSignals.set(e,r)),r.push(t);let n=this.channels.get(e);if(null==n){if("offer"!==t.signal.type)return void rt("handshake is not an offer and channel does not exist, buffering until we receive an offer");rt("creating new channel to handle offer handshake"),n=this._createChannel(t.intentId,t.srcMultiaddr,t.dstMultiaddr),this.channels.set(e,n)}else rt("channel already exists, using it to handle handshake");for(;r.length>0;){const t=r.shift();null!=t?.signal&&n.handleSignal(t.signal)}}async close(){this.socket.emit("ss-leave",this.signallingAddr.toString()),this.socket.removeAllListeners(),this.socket.close(),await Promise.all([...this.connections.map((async t=>await t.close())),...Array.from(this.channels.values()).map((async t=>await t.close()))]),this.dispatchEvent(new O.A("close"))}}class st extends O.v{constructor(t,e,r,n,i){super(),this.upgrader=t,this.handler=e,this.peerId=r,this.transport=n,this.options=i}async listen(t){if(null!=this.listeningAddr)throw s(new Error("listener already in use"),"ERR_ALREADY_LISTENING");const e=(0,D.Z)();let r;this.listeningAddr=t,r=t.protoCodes().includes(421)?t:t.encapsulate(`/p2p/${this.peerId.toString()}`);const n=this.signallingUrl=et(t);rt("connecting to signalling server on: %s",this.signallingUrl);const i=new it(this.signallingUrl,r,this.upgrader,this.handler,this.options.channelOptions);return i.addEventListener("error",(t=>{const r=t.detail;rt("error connecting to signalling server %o",r),i.close().catch((t=>{rt.error("error closing server after error",t)})),e.reject(r)})),i.addEventListener("listening",(()=>{rt("connected to signalling server"),this.dispatchEvent(new O.A("listening")),e.resolve()})),i.addEventListener("peer",(t=>{this.transport.peerDiscovered(t.detail)})),i.addEventListener("connection",(e=>{const r=e.detail;if(null==r.remoteAddr)try{r.remoteAddr=t.decapsulateCode(421).encapsulate(`/p2p/${r.remotePeer.toString()}`)}catch(t){rt.error("could not determine remote address",t)}this.dispatchEvent(new O.A("connection",{detail:r}))})),i.addEventListener("disconnect",(()=>{this.transport.sigServers.delete(n)})),i.addEventListener("reconnect",(()=>{this.transport.sigServers.set(n,i)})),this.transport.sigServers.set(this.signallingUrl,i),await e.promise}async close(){if(null!=this.signallingUrl){const t=this.transport.sigServers.get(this.signallingUrl);null!=t&&(await t.close(),this.transport.sigServers.delete(this.signallingUrl))}this.dispatchEvent(new O.A("close")),this.listeningAddr=void 0}getAddrs(){return null!=this.listeningAddr?[this.listeningAddr]:[]}}var ot=r(738),at=r(23366),ct=r(12348),ut=r(59769);const lt="RTCPeerConnection"in globalThis,ht=(0,i.kg)("libp2p:webrtc-star"),dt=()=>{};class ft extends O.v{constructor(){super(...arguments),this.started=!1}get[ut.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-star-discovery"}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}dispatchEvent(t){return!!this.isStarted()&&super.dispatchEvent(t)}}class pt{constructor(t){null!=t?.wrtc&&(this.wrtc=t.wrtc),this.sigServers=new Map,this._discovery=new ft,this.discovery=()=>this._discovery,this.peerDiscovered=this.peerDiscovered.bind(this)}get[ct.NA](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-star"}async dial(t,e){const r=tt(await this._connect(t,e),{remoteAddr:t,signal:e.signal});ht("new outbound connection %s",r.remoteAddr);const n=await e.upgrader.upgradeOutbound(r);return ht("outbound connection %s upgraded",r.remoteAddr),n}async _connect(t,e){if(!0===e.signal?.aborted)throw new o._L;const r={...e.channelOptions??{}};null!=this.wrtc&&(r.wrtc=this.wrtc);const n=t.toOptions(),i=(0,ot.BB)(x(36),"hex");return await new Promise(((a,c)=>{const u=this.sigServers.get(et(t));if(null==u?.socket)return c(s(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));let l=!1;ht("dialing %s:%s",n.host,n.port);const h=new Q(r),d=t=>{const e=t.detail;if(!l){const t=`connection error ${n.host}:${n.port}: ${e.message}`;ht.error(t),g(e)}},f=()=>{l=!0,ht("connection opened %s:%s",n.host,n.port),g()},p=()=>{ht.error("connection aborted %s:%s",n.host,n.port),h.close().finally((()=>{g(new o._L)}))},g=t=>{h.removeEventListener("ready",f),e.signal?.removeEventListener("abort",p),null==t?a(h):c(t)};h.addEventListener("ready",f,{once:!0}),h.addEventListener("close",(()=>{h.removeEventListener("error",d)})),e.signal?.addEventListener("abort",p),h.addEventListener("signal",(e=>{const r=e.detail;u.socket.emit("ss-handshake",{intentId:i,srcMultiaddr:u.signallingAddr.toString(),dstMultiaddr:t.toString(),signal:r})})),u.socket.on("ws-handshake",(t=>{t.intentId===i&&null!=t.err&&h.close().finally((()=>{c(s(new Error(t.err),"ERR_SIGNALLING_FAILED"))})),t.intentId!==i||null==t.answer||h.closed||h.handleSignal(t.signal)}))}))}createListener(t){if(!lt&&null==this.wrtc)throw s(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");if(t.channelOptions=t.channelOptions??{},null!=this.wrtc&&(t.channelOptions.wrtc=this.wrtc),null==this.peerId)throw s(new Error("PeerId not set"),"ERR_MISSING_PEER_ID");return function(t,e,r,n,i){return new st(t,e,r,n,i)}(t.upgrader,t.handler??dt,this.peerId,this,t)}filter(t){return(t=Array.isArray(t)?t:[t]).filter((t=>!t.protoCodes().includes(290)&&c.xk.matches(t)))}peerDiscovered(t){ht("peer discovered: %s",t),t=function(t){const e="/libp2p-webrtc-star";if(t.startsWith(e)){t=t.substring(e.length,t.length);let r=(0,a.HM)(t);const n=r.stringTuples().filter((t=>421===t[0]))[0];if(null==n[1])throw new Error("invalid multiaddr: "+t);r=r.decapsulate("p2p"),r=r.encapsulate("/p2p-webrtc-star"),r=r.encapsulate(`/p2p/${n[1]}`),t=r.toString()}return t}(t);const e=(0,a.HM)(t),r=e.getPeerId();if(null==r)return;const n=(0,at.jE)(r);this._discovery.dispatchEvent(new O.A("peer",{detail:{id:n,multiaddrs:[e],protocols:[]}}))}}function gt(t={}){const e=new pt(t);return{transport:t=>(e.peerId=t.peerId,e),discovery:e.discovery}}},87960:function(t,e,r){"use strict";r.d(e,{$K:function(){return o},MQ:function(){return s},U1:function(){return i},fJ:function(){return n},fS:function(){return a}});const n=421,i=290,s=6,o=478,a=2e3},97608:function(t,e,r){"use strict";r.d(e,{$6:function(){return Nt},FR:function(){return Pt},xt:function(){return Bt}});var n=r(49736),i=r(49784);const s=n.C,o=n.aY,a=function(t){let e=0;if(t=t.toString().trim(),s(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach((t=>{r[e++]=255&parseInt(t,10)})),r}if(o(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){let t;s(r[n])&&(t=a(r[n]),r[n]=(0,i.B)(t.slice(0,2),"base16")),null!=t&&++n<8&&r.splice(n,0,(0,i.B)(t.slice(2,4),"base16"))}if(""===r[0])for(;r.length<8;)r.unshift("0");else if(""===r[r.length-1])for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&""!==r[n];n++);const t=[n,1];for(n=9-r.length;n>0;n--)t.push("0");r.splice.apply(r,t)}const o=new Uint8Array(e+16);for(n=0;n<r.length;n++){const t=parseInt(r[n],16);o[e++]=t>>8&255,o[e++]=255&t}return o}throw new Error("invalid ip address")},c=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(4===r){const n=[];for(let i=0;i<r;i++)n.push(t[e+i]);return n.join(".")}if(16===r){const t=[];for(let i=0;i<r;i+=2)t.push(n.getUint16(e+i).toString(16));return t.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},u=-1,l={},h={};function d(t){if("number"==typeof t){if(null!=h[t])return h[t];throw new Error(`no protocol with code: ${t}`)}if("string"==typeof t){if(null!=l[t])return l[t];throw new Error(`no protocol with name: ${t}`)}throw new Error("invalid protocol id type: "+typeof t)}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,u,"ip6zone"],[43,8,"ipcidr"],[53,u,"dns",!0],[54,u,"dns4",!0],[55,u,"dns6",!0],[56,u,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,u,"unix",!1,!0],[421,u,"ipfs"],[421,u,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,u,"garlic64"],[448,0,"tls"],[449,u,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,u,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,u,"memory"]].forEach((t=>{const e=function(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(i)}}(...t);h[e.code]=e,l[e.name]=e}));var f=r(38161),p=r(14249),g=r(81653),y=r(97098),m=r(29094),w=r(98629),b=r(77408),E=r(41690);r(9839);d("ip4"),d("ip6"),d("ipcidr");function v(t,e){switch(d(t).code){case 4:case 41:return function(t){const e=c(t,0,t.length);if(null==e)throw new Error("ipBuff is required");if(!n.h6(e))throw new Error("invalid ip address");return e}(e);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return k(e);case 6:case 273:case 33:case 132:return I(e).toString();case 421:return function(t){const e=w.decode(t),r=t.slice(w.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return(0,i.B)(r,"base58btc")}(e);case 444:case 445:return N(e);case 466:return function(t){const e=w.decode(t),r=t.slice(w.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+(0,i.B)(r,"base64url")}(e);default:return(0,i.B)(e,"base16")}}function _(t,e){switch(d(t).code){case 4:case 41:return R(e);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return C(e);case 6:case 273:case 33:case 132:return T(parseInt(e,10));case 421:return function(t){let e;e="Q"===t[0]||"1"===t[0]?m.Jx(g.base58btc.decode(`z${t}`)).bytes:f.k0.parse(t).multihash.bytes;const r=Uint8Array.from(w.encode(e.length));return(0,E.z)([r,e],r.length+e.length)}(e);case 444:return function(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(16!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=p.base32.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=T(n);return(0,E.z)([r,i],r.length+i.length)}(e);case 445:return function(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(56!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=p.base32.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=T(n);return(0,E.z)([r,i],r.length+i.length)}(e);case 466:return function(t){const e=A.decode(t),r=Uint8Array.from(w.encode(e.length));return(0,E.z)([r,e],r.length+e.length)}(e);default:return(0,b.m)(e,"base16")}}const S=Object.values(y.gh).map((t=>t.decoder)),A=function(){let t=S[0].or(S[1]);return S.slice(2).forEach((e=>t=t.or(e))),t}();function R(t){if(!n.h6(t))throw new Error("invalid ip address");return a(t)}function T(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function I(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function C(t){const e=(0,b.m)(t),r=Uint8Array.from(w.encode(e.length));return(0,E.z)([r,e],r.length+e.length)}function k(t){const e=w.decode(t);if((t=t.slice(w.decode.bytes)).length!==e)throw new Error("inconsistent lengths");return(0,i.B)(t)}function N(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2);return`${(0,i.B)(e,"base32")}:${I(r)}`}function B(t){return t.map((t=>{const e=F(t);return null!=t[1]?[e.code,v(e.code,t[1])]:[e.code]}))}function P(t){return U((0,E.z)(t.map((t=>{const e=F(t);let r=Uint8Array.from(w.encode(e.code));return t.length>1&&null!=t[1]&&(r=(0,E.z)([r,t[1]])),r}))))}function L(t,e){if(t.size>0)return t.size/8;if(0===t.size)return 0;return w.decode(e)+(w.decode.bytes??0)}function D(t){const e=[];let r=0;for(;r<t.length;){const n=w.decode(t,r),s=w.decode.bytes??0,o=L(d(n),t.slice(r+s));if(0===o){e.push([n]),r+=s;continue}const a=t.slice(r+s,r+s+o);if(r+=o+s,r>t.length)throw j("Invalid address Uint8Array: "+(0,i.B)(t,"base16"));e.push([n,a])}return e}function O(t){return function(t){const e=[];return t.map((t=>{const r=F(t);return e.push(r.name),t.length>1&&null!=t[1]&&e.push(t[1]),null})),V(e.join("/"))}(B(D(t)))}function x(t){const e=function(t){const e=[],r=t.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const i=r[n],s=d(i);if(0!==s.size){if(n++,n>=r.length)throw j("invalid address: "+t);if(!0===s.path){e.push([i,V(r.slice(n).join("/"))]);break}e.push([i,r[n]])}else e.push([i])}return e}(t=V(t));return P(e.map((t=>{Array.isArray(t)||(t=[t]);const e=F(t);return t.length>1?[e.code,_(e.code,t[1])]:[e.code]})))}function U(t){const e=M(t);if(null!=e)throw e;return Uint8Array.from(t)}function M(t){try{D(t)}catch(t){return t}}function V(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function j(t){return new Error("Error parsing address: "+t)}function F(t){return d(t[0])}var z=r(32114),K=r(73062);var $,q,H,G,W=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)},Y=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r};const Z=Symbol.for("nodejs.util.inspect.custom"),Q=[d("dns").code,d("dns4").code,d("dns6").code,d("dnsaddr").code],X=new Map,J=Symbol.for("@multiformats/js-multiaddr/multiaddr");function tt(t){return Boolean(t?.[J])}class et{constructor(t){if($.set(this,void 0),q.set(this,void 0),H.set(this,void 0),this[G]=!0,null==t&&(t=""),t instanceof Uint8Array)this.bytes=U(t);else if("string"==typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=x(t)}else{if(!tt(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=U(t.bytes)}}toString(){return null==W(this,$,"f")&&Y(this,$,O(this.bytes),"f"),W(this,$,"f")}toJSON(){return this.toString()}toOptions(){let t,e,r,n,i="";const s=d("tcp"),o=d("udp"),a=d("ip4"),c=d("ip6"),u=d("dns6"),l=d("ip6zone");for(const[h,f]of this.stringTuples())h===l.code&&(i=`%${f??""}`),Q.includes(h)&&(e=s.name,n=443,r=`${f??""}${i}`,t=h===u.code?6:4),h!==s.code&&h!==o.code||(e=d(h).name,n=parseInt(f??"")),h!==a.code&&h!==c.code||(e=d(h).name,r=`${f??""}${i}`,t=h===c.code?6:4);if(null==t||null==e||null==r||null==n)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:r,transport:e,port:n}}protos(){return this.protoCodes().map((t=>Object.assign({},d(t))))}protoCodes(){const t=[],e=this.bytes;let r=0;for(;r<e.length;){const n=w.decode(e,r),i=w.decode.bytes??0;r+=L(d(n),e.slice(r+i))+i,t.push(n)}return t}protoNames(){return this.protos().map((t=>t.name))}tuples(){return null==W(this,q,"f")&&Y(this,q,D(this.bytes),"f"),W(this,q,"f")}stringTuples(){return null==W(this,H,"f")&&Y(this,H,B(this.tuples()),"f"),W(this,H,"f")}encapsulate(t){return t=new et(t),new et(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),r=this.toString(),n=r.lastIndexOf(e);if(n<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new et(r.slice(0,n))}decapsulateCode(t){const e=this.tuples();for(let r=e.length-1;r>=0;r--)if(e[r][0]===t)return new et(P(e.slice(0,r)));return this}getPeerId(){try{const t=this.stringTuples().filter((t=>t[0]===l.ipfs.code)),e=t.pop();if(null!=e?.[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?(0,i.B)(g.base58btc.decode(`z${t}`),"base58btc"):(0,i.B)(f.k0.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){let t=null;try{t=this.stringTuples().filter((t=>!0===d(t[0]).path))[0][1],null==t&&(t=null)}catch{t=null}return t}equals(t){return(0,K.f)(this.bytes,t.bytes)}async resolve(t){const e=this.protos().find((t=>t.resolvable));if(null==e)return[this];const r=X.get(e.name);if(null==r)throw z(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this,t)).map((t=>new et(t)))}nodeAddress(){const t=this.toOptions();if("tcp"!==t.transport&&"udp"!==t.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){const e=(t??this).protos();return 2===e.length&&((4===e[0].code||41===e[0].code)&&(6===e[1].code||273===e[1].code))}[($=new WeakMap,q=new WeakMap,H=new WeakMap,G=J,Z)](){return`Multiaddr(${O(this.bytes)})`}}function rt(t){return new et(t)}const nt=Ct("dns4"),it=Ct("dns6"),st=Ct("dnsaddr"),ot=It(Ct("dns"),st,nt,it),at=It(Ct("ip4"),Ct("ip6")),ct=It(Tt(at,Ct("tcp")),Tt(ot,Ct("tcp"))),ut=Tt(at,Ct("udp")),lt=Tt(ut,Ct("utp")),ht=Tt(ut,Ct("quic")),dt=It(Tt(ct,Ct("ws")),Tt(ot,Ct("ws"))),ft=It(Tt(ct,Ct("wss")),Tt(ot,Ct("wss")),Tt(ct,Ct("tls"),Ct("ws")),Tt(ot,Ct("tls"),Ct("ws"))),pt=It(Tt(ct,Ct("http")),Tt(at,Ct("http")),Tt(ot,Ct("http"))),gt=It(Tt(ct,Ct("https")),Tt(at,Ct("https")),Tt(ot,Ct("https"))),yt=Tt(ut,Ct("webrtc-direct"),Ct("certhash")),mt=It(Tt(yt,Ct("p2p")),yt),wt=It(Tt(dt,Ct("p2p-webrtc-star"),Ct("p2p")),Tt(ft,Ct("p2p-webrtc-star"),Ct("p2p")),Tt(dt,Ct("p2p-webrtc-star")),Tt(ft,Ct("p2p-webrtc-star"))),bt=(It(Tt(dt,Ct("p2p-websocket-star"),Ct("p2p")),Tt(ft,Ct("p2p-websocket-star"),Ct("p2p")),Tt(dt,Ct("p2p-websocket-star")),Tt(ft,Ct("p2p-websocket-star"))),It(Tt(pt,Ct("p2p-webrtc-direct"),Ct("p2p")),Tt(gt,Ct("p2p-webrtc-direct"),Ct("p2p")),Tt(pt,Ct("p2p-webrtc-direct")),Tt(gt,Ct("p2p-webrtc-direct")))),Et=It(dt,ft,pt,gt,wt,bt,ct,lt,ht,ot,mt),vt=(It(Tt(Et,Ct("p2p-stardust"),Ct("p2p")),Tt(Et,Ct("p2p-stardust"))),It(Tt(Et,Ct("p2p")),wt,bt,mt,Ct("p2p"))),_t=It(Tt(vt,Ct("p2p-circuit"),vt),Tt(vt,Ct("p2p-circuit")),Tt(Ct("p2p-circuit"),vt),Tt(Et,Ct("p2p-circuit")),Tt(Ct("p2p-circuit"),Et),Ct("p2p-circuit")),St=()=>It(Tt(_t,St),_t),At=St();It(Tt(At,vt,At),Tt(vt,At),Tt(At,vt),At,vt),It(Tt(At,Ct("webrtc")),Tt(Et,Ct("webrtc")),Ct("webrtc"));function Rt(t){return function(e){let r;try{r=rt(e)}catch(t){return!1}const n=t(r.protoNames());return null!==n&&(!0===n||!1===n?n:0===n.length)}}function Tt(...t){function e(e){if(e.length<t.length)return null;let r=e;return t.some((t=>(r="function"==typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(r)&&(e=r),null===r))),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:Rt(e),partialMatch:e}}function It(...t){function e(e){let r=null;return t.some((t=>{const n="function"==typeof t?t().partialMatch(e):t.partialMatch(e);return null!=n&&(r=n,!0)})),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:Rt(e),partialMatch:e}}function Ct(t){const e=t;return{toString:function(){return e},matches:function(t){let r;try{r=rt(t)}catch(t){return!1}const n=r.protoNames();return 1===n.length&&n[0]===e},partialMatch:function(t){return 0===t.length?null:t[0]===e?t.slice(1):null}}}var kt=r(87960);function Nt(t){return t.filter((t=>{if(t.protoCodes().includes(kt.U1))return!1;const e=t.decapsulateCode(kt.fJ);return dt.matches(e)||ft.matches(e)}))}function Bt(t){return t.filter((t=>{if(t.protoCodes().includes(kt.U1))return!1;const e=t.decapsulateCode(kt.fJ);return ft.matches(e)}))}function Pt(t){return t.filter((t=>{if(t.protoCodes().includes(kt.U1))return!1;const e=t.decapsulateCode(kt.fJ);return ft.matches(e)&&ot.matches(e.decapsulateCode(kt.MQ).decapsulateCode(kt.$K))}))}},5578:function(t,e,r){"use strict";r.d(e,{E:function(){return v}});var n=r(24143),i=r(38456),s=r(52770),o=r(85275),a=r(69860),c=r(14560);var u=r(2237),l=r(87960);class h extends Error{constructor(t){super(t),this.name="TimeoutError"}}class d extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const f=t=>void 0===globalThis.DOMException?new d(t):new DOMException(t),p=t=>{const e=void 0===t.reason?f("This operation was aborted."):t.reason;return e instanceof Error?e:f(e)};const g=(0,a.kg)("libp2p:websockets:socket");function y(t,e,r){const n={async sink(e){null!=r?.signal&&(e=(0,u.wJ)(e,r.signal));try{await t.sink(e)}catch(t){"aborted"!==t.type&&g.error(t)}},source:null!=(r=r??{}).signal?(0,u.wJ)(t.source,r.signal):t.source,remoteAddr:e,timeline:{open:Date.now()},async close(){const e=Date.now();try{await function(t,e){const{milliseconds:r,fallback:n,message:i,customTimers:s={setTimeout:setTimeout,clearTimeout:clearTimeout}}=e;let o;const a=new Promise(((a,c)=>{if("number"!=typeof r||1!==Math.sign(r))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(r===Number.POSITIVE_INFINITY)return void a(t);if(e.signal){const{signal:t}=e;t.aborted&&c(p(t)),t.addEventListener("abort",(()=>{c(p(t))}))}const u=new h;o=s.setTimeout.call(void 0,(()=>{if(n)try{a(n())}catch(t){c(t)}else"function"==typeof t.cancel&&t.cancel(),!1===i?a():i instanceof Error?c(i):(u.message=i??`Promise timed out after ${r} milliseconds`,c(u))}),r),(async()=>{try{a(await t)}catch(t){c(t)}finally{s.clearTimeout.call(void 0,o)}})()}));return a.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},a}(t.close(),{milliseconds:l.fS})}catch(r){const{host:i,port:s}=n.remoteAddr.toOptions();g("timeout closing stream to %s:%s after %dms, destroying it manually",i,s,Date.now()-e),t.destroy()}finally{n.timeline.close=Date.now()}}};return t.socket.addEventListener("close",(()=>{null==n.timeline.close&&(n.timeline.close=Date.now())}),{once:!0}),n}var m=r(97608),w=r(12348);const b=(0,a.kg)("libp2p:websockets");class E{constructor(t){this.init=t}get[Symbol.toStringTag](){return"@libp2p/websockets"}get[w.NA](){return!0}async dial(t,e){b("dialing %s",t),e=e??{};const r=y(await this._connect(t,e),t);b("new outbound connection %s",r.remoteAddr);const n=await e.upgrader.upgradeOutbound(r);return b("outbound connection %s upgraded",r.remoteAddr),n}async _connect(t,e){if(!0===e?.signal?.aborted)throw new s._;const r=t.toOptions();b("dialing %s:%s",r.host,r.port);const a=(0,o.Z)(),c=t=>{b.error("connection error:",t),a.reject(t)},u=(0,n.$)((0,i.k)(t),this.init);if(null!=u.socket.on?u.socket.on("error",c):u.socket.onerror=c,null==e.signal)return await Promise.race([u.connected(),a.promise]),b("connected %s",t),u;let l;const h=new Promise(((t,r)=>{l=()=>{r(new s._),u.close().catch((t=>{b.error("error closing raw socket",t)}))},!0!==e?.signal?.aborted?e?.signal?.addEventListener("abort",l):l()}));try{await Promise.race([h,a.promise,u.connected()])}finally{null!=l&&e?.signal?.removeEventListener("abort",l)}return b("connected %s",t),u}createListener(t){return function(){throw new Error("WebSocket Servers can not be created in the browser!")}(this.init)}filter(t){return t=Array.isArray(t)?t:[t],null!=this.init?.filter?this.init?.filter(t):c.jU||c.n2?m.xt(t):m.$6(t)}}function v(t={}){return()=>new E(t)}},61093:function(t,e,r){"use strict";r.d(e,{dx:function(){return At},Cz:function(){return Rt},xk:function(){return wt}});var n=r(49736),i=r(49784);const s=n.C,o=n.aY,a=function(t){let e=0;if(t=t.toString().trim(),s(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach((t=>{r[e++]=255&parseInt(t,10)})),r}if(o(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){let t;s(r[n])&&(t=a(r[n]),r[n]=(0,i.B)(t.slice(0,2),"base16")),null!=t&&++n<8&&r.splice(n,0,(0,i.B)(t.slice(2,4),"base16"))}if(""===r[0])for(;r.length<8;)r.unshift("0");else if(""===r[r.length-1])for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&""!==r[n];n++);const t=[n,1];for(n=9-r.length;n>0;n--)t.push("0");r.splice.apply(r,t)}const o=new Uint8Array(e+16);for(n=0;n<r.length;n++){const t=parseInt(r[n],16);o[e++]=t>>8&255,o[e++]=255&t}return o}throw new Error("invalid ip address")},c=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(4===r){const n=[];for(let i=0;i<r;i++)n.push(t[e+i]);return n.join(".")}if(16===r){const t=[];for(let i=0;i<r;i+=2)t.push(n.getUint16(e+i).toString(16));return t.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},u=-1,l={},h={};function d(t){if("number"==typeof t){if(null!=h[t])return h[t];throw new Error(`no protocol with code: ${t}`)}if("string"==typeof t){if(null!=l[t])return l[t];throw new Error(`no protocol with name: ${t}`)}throw new Error("invalid protocol id type: "+typeof t)}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,u,"ip6zone"],[43,8,"ipcidr"],[53,u,"dns",!0],[54,u,"dns4",!0],[55,u,"dns6",!0],[56,u,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,u,"unix",!1,!0],[421,u,"ipfs"],[421,u,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,u,"garlic64"],[448,0,"tls"],[449,u,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,u,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,u,"memory"]].forEach((t=>{const e=function(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(i)}}(...t);h[e.code]=e,l[e.name]=e}));var f=r(38161),p=r(14249),g=r(81653),y=r(97098),m=r(29094),w=r(81587),b=r(77408),E=r(41690);r(9839);d("ip4"),d("ip6"),d("ipcidr");function v(t,e){switch(d(t).code){case 4:case 41:return function(t){const e=c(t,0,t.length);if(null==e)throw new Error("ipBuff is required");if(!n.h6(e))throw new Error("invalid ip address");return e}(e);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return k(e);case 6:case 273:case 33:case 132:return I(e).toString();case 421:return function(t){const e=w.decode(t),r=t.slice(w.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return(0,i.B)(r,"base58btc")}(e);case 444:case 445:return N(e);case 466:return function(t){const e=w.decode(t),r=t.slice(w.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+(0,i.B)(r,"base64url")}(e);default:return(0,i.B)(e,"base16")}}function _(t,e){switch(d(t).code){case 4:case 41:return R(e);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return C(e);case 6:case 273:case 33:case 132:return T(parseInt(e,10));case 421:return function(t){let e;e="Q"===t[0]||"1"===t[0]?m.Jx(g.base58btc.decode(`z${t}`)).bytes:f.k0.parse(t).multihash.bytes;const r=Uint8Array.from(w.encode(e.length));return(0,E.z)([r,e],r.length+e.length)}(e);case 444:return function(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(16!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=p.base32.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=T(n);return(0,E.z)([r,i],r.length+i.length)}(e);case 445:return function(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(56!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=p.base32.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=T(n);return(0,E.z)([r,i],r.length+i.length)}(e);case 466:return function(t){const e=A.decode(t),r=Uint8Array.from(w.encode(e.length));return(0,E.z)([r,e],r.length+e.length)}(e);default:return(0,b.m)(e,"base16")}}const S=Object.values(y.gh).map((t=>t.decoder)),A=function(){let t=S[0].or(S[1]);return S.slice(2).forEach((e=>t=t.or(e))),t}();function R(t){if(!n.h6(t))throw new Error("invalid ip address");return a(t)}function T(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function I(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function C(t){const e=(0,b.m)(t),r=Uint8Array.from(w.encode(e.length));return(0,E.z)([r,e],r.length+e.length)}function k(t){const e=w.decode(t);if((t=t.slice(w.decode.bytes)).length!==e)throw new Error("inconsistent lengths");return(0,i.B)(t)}function N(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2);return`${(0,i.B)(e,"base32")}:${I(r)}`}function B(t){return t.map((t=>{const e=F(t);return null!=t[1]?[e.code,v(e.code,t[1])]:[e.code]}))}function P(t){return U((0,E.z)(t.map((t=>{const e=F(t);let r=Uint8Array.from(w.encode(e.code));return t.length>1&&null!=t[1]&&(r=(0,E.z)([r,t[1]])),r}))))}function L(t,e){if(t.size>0)return t.size/8;if(0===t.size)return 0;return w.decode(e)+(w.decode.bytes??0)}function D(t){const e=[];let r=0;for(;r<t.length;){const n=w.decode(t,r),s=w.decode.bytes??0,o=L(d(n),t.slice(r+s));if(0===o){e.push([n]),r+=s;continue}const a=t.slice(r+s,r+s+o);if(r+=o+s,r>t.length)throw j("Invalid address Uint8Array: "+(0,i.B)(t,"base16"));e.push([n,a])}return e}function O(t){return function(t){const e=[];return t.map((t=>{const r=F(t);return e.push(r.name),t.length>1&&null!=t[1]&&e.push(t[1]),null})),V(e.join("/"))}(B(D(t)))}function x(t){const e=function(t){const e=[],r=t.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const i=r[n],s=d(i);if(0!==s.size){if(n++,n>=r.length)throw j("invalid address: "+t);if(!0===s.path){e.push([i,V(r.slice(n).join("/"))]);break}e.push([i,r[n]])}else e.push([i])}return e}(t=V(t));return P(e.map((t=>{Array.isArray(t)||(t=[t]);const e=F(t);return t.length>1?[e.code,_(e.code,t[1])]:[e.code]})))}function U(t){const e=M(t);if(null!=e)throw e;return Uint8Array.from(t)}function M(t){try{D(t)}catch(t){return t}}function V(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function j(t){return new Error("Error parsing address: "+t)}function F(t){return d(t[0])}var z=r(32114),K=r(73062);var $,q,H,G,W=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)},Y=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r};const Z=Symbol.for("nodejs.util.inspect.custom"),Q=[d("dns").code,d("dns4").code,d("dns6").code,d("dnsaddr").code],X=new Map,J=Symbol.for("@multiformats/js-multiaddr/multiaddr");function tt(t){return Boolean(t?.[J])}class et{constructor(t){if($.set(this,void 0),q.set(this,void 0),H.set(this,void 0),this[G]=!0,null==t&&(t=""),t instanceof Uint8Array)this.bytes=U(t);else if("string"==typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=x(t)}else{if(!tt(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=U(t.bytes)}}toString(){return null==W(this,$,"f")&&Y(this,$,O(this.bytes),"f"),W(this,$,"f")}toJSON(){return this.toString()}toOptions(){let t,e,r,n,i="";const s=d("tcp"),o=d("udp"),a=d("ip4"),c=d("ip6"),u=d("dns6"),l=d("ip6zone");for(const[h,f]of this.stringTuples())h===l.code&&(i=`%${f??""}`),Q.includes(h)&&(e=s.name,n=443,r=`${f??""}${i}`,t=h===u.code?6:4),h!==s.code&&h!==o.code||(e=d(h).name,n=parseInt(f??"")),h!==a.code&&h!==c.code||(e=d(h).name,r=`${f??""}${i}`,t=h===c.code?6:4);if(null==t||null==e||null==r||null==n)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:r,transport:e,port:n}}protos(){return this.protoCodes().map((t=>Object.assign({},d(t))))}protoCodes(){const t=[],e=this.bytes;let r=0;for(;r<e.length;){const n=w.decode(e,r),i=w.decode.bytes??0;r+=L(d(n),e.slice(r+i))+i,t.push(n)}return t}protoNames(){return this.protos().map((t=>t.name))}tuples(){return null==W(this,q,"f")&&Y(this,q,D(this.bytes),"f"),W(this,q,"f")}stringTuples(){return null==W(this,H,"f")&&Y(this,H,B(this.tuples()),"f"),W(this,H,"f")}encapsulate(t){return t=new et(t),new et(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),r=this.toString(),n=r.lastIndexOf(e);if(n<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new et(r.slice(0,n))}decapsulateCode(t){const e=this.tuples();for(let r=e.length-1;r>=0;r--)if(e[r][0]===t)return new et(P(e.slice(0,r)));return this}getPeerId(){try{const t=this.stringTuples().filter((t=>t[0]===l.ipfs.code)),e=t.pop();if(null!=e?.[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?(0,i.B)(g.base58btc.decode(`z${t}`),"base58btc"):(0,i.B)(f.k0.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){let t=null;try{t=this.stringTuples().filter((t=>!0===d(t[0]).path))[0][1],null==t&&(t=null)}catch{t=null}return t}equals(t){return(0,K.f)(this.bytes,t.bytes)}async resolve(t){const e=this.protos().find((t=>t.resolvable));if(null==e)return[this];const r=X.get(e.name);if(null==r)throw z(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this,t)).map((t=>new et(t)))}nodeAddress(){const t=this.toOptions();if("tcp"!==t.transport&&"udp"!==t.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){const e=(t??this).protos();return 2===e.length&&((4===e[0].code||41===e[0].code)&&(6===e[1].code||273===e[1].code))}[($=new WeakMap,q=new WeakMap,H=new WeakMap,G=J,Z)](){return`Multiaddr(${O(this.bytes)})`}}function rt(t){return new et(t)}const nt=kt("dns4"),it=kt("dns6"),st=kt("dnsaddr"),ot=Ct(kt("dns"),st,nt,it),at=Ct(kt("ip4"),kt("ip6")),ct=Ct(It(at,kt("tcp")),It(ot,kt("tcp"))),ut=It(at,kt("udp")),lt=It(ut,kt("utp")),ht=It(ut,kt("quic")),dt=Ct(It(ct,kt("ws")),It(ot,kt("ws"))),ft=Ct(It(ct,kt("wss")),It(ot,kt("wss")),It(ct,kt("tls"),kt("ws")),It(ot,kt("tls"),kt("ws"))),pt=Ct(It(ct,kt("http")),It(at,kt("http")),It(ot,kt("http"))),gt=Ct(It(ct,kt("https")),It(at,kt("https")),It(ot,kt("https"))),yt=It(ut,kt("webrtc"),kt("certhash")),mt=Ct(It(yt,kt("p2p")),yt),wt=Ct(It(dt,kt("p2p-webrtc-star"),kt("p2p")),It(ft,kt("p2p-webrtc-star"),kt("p2p")),It(dt,kt("p2p-webrtc-star")),It(ft,kt("p2p-webrtc-star"))),bt=(Ct(It(dt,kt("p2p-websocket-star"),kt("p2p")),It(ft,kt("p2p-websocket-star"),kt("p2p")),It(dt,kt("p2p-websocket-star")),It(ft,kt("p2p-websocket-star"))),Ct(It(pt,kt("p2p-webrtc-direct"),kt("p2p")),It(gt,kt("p2p-webrtc-direct"),kt("p2p")),It(pt,kt("p2p-webrtc-direct")),It(gt,kt("p2p-webrtc-direct")))),Et=Ct(dt,ft,pt,gt,wt,bt,ct,lt,ht,ot,mt),vt=(Ct(It(Et,kt("p2p-stardust"),kt("p2p")),It(Et,kt("p2p-stardust"))),Ct(It(Et,kt("p2p")),wt,bt,mt,kt("p2p"))),_t=Ct(It(vt,kt("p2p-circuit"),vt),It(vt,kt("p2p-circuit")),It(kt("p2p-circuit"),vt),It(Et,kt("p2p-circuit")),It(kt("p2p-circuit"),Et),kt("p2p-circuit")),St=()=>Ct(It(_t,St),_t),At=St(),Rt=Ct(It(At,vt,At),It(vt,At),It(At,vt),At,vt);function Tt(t){return function(e){let r;try{r=rt(e)}catch(t){return!1}const n=t(r.protoNames());return null!==n&&(!0===n||!1===n?n:0===n.length)}}function It(...t){function e(e){if(e.length<t.length)return null;let r=e;return t.some((t=>(r="function"==typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(r)&&(e=r),null===r))),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:Tt(e),partialMatch:e}}function Ct(...t){function e(e){let r=null;return t.some((t=>{const n="function"==typeof t?t().partialMatch(e):t.partialMatch(e);return null!=n&&(r=n,!0)})),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:Tt(e),partialMatch:e}}function kt(t){const e=t;return{toString:function(){return e},matches:function(t){let r;try{r=rt(t)}catch(t){return!1}const n=r.protoNames();return 1===n.length&&n[0]===e},partialMatch:function(t){return 0===t.length?null:t[0]===e?t.slice(1):null}}}},38456:function(t,e,r){"use strict";r.d(e,{k:function(){return it}});var n=r(49736),i=r(49784);const s=n.C,o=n.aY,a=function(t){let e=0;if(t=t.toString().trim(),s(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach((t=>{r[e++]=255&parseInt(t,10)})),r}if(o(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){let t;s(r[n])&&(t=a(r[n]),r[n]=(0,i.B)(t.slice(0,2),"base16")),null!=t&&++n<8&&r.splice(n,0,(0,i.B)(t.slice(2,4),"base16"))}if(""===r[0])for(;r.length<8;)r.unshift("0");else if(""===r[r.length-1])for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&""!==r[n];n++);const t=[n,1];for(n=9-r.length;n>0;n--)t.push("0");r.splice.apply(r,t)}const o=new Uint8Array(e+16);for(n=0;n<r.length;n++){const t=parseInt(r[n],16);o[e++]=t>>8&255,o[e++]=255&t}return o}throw new Error("invalid ip address")},c=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(4===r){const n=[];for(let i=0;i<r;i++)n.push(t[e+i]);return n.join(".")}if(16===r){const t=[];for(let i=0;i<r;i+=2)t.push(n.getUint16(e+i).toString(16));return t.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},u=-1,l={},h={};function d(t){if("number"==typeof t){if(null!=h[t])return h[t];throw new Error(`no protocol with code: ${t}`)}if("string"==typeof t){if(null!=l[t])return l[t];throw new Error(`no protocol with name: ${t}`)}throw new Error("invalid protocol id type: "+typeof t)}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,u,"ip6zone"],[43,8,"ipcidr"],[53,u,"dns",!0],[54,u,"dns4",!0],[55,u,"dns6",!0],[56,u,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,u,"unix",!1,!0],[421,u,"ipfs"],[421,u,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,u,"garlic64"],[448,0,"tls"],[449,u,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,u,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,u,"memory"]].forEach((t=>{const e=function(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(i)}}(...t);h[e.code]=e,l[e.name]=e}));var f=r(38161),p=r(14249),g=r(81653),y=r(97098),m=r(29094),w=r(90309),b=r(77408),E=r(41690);r(9839);d("ip4"),d("ip6"),d("ipcidr");function v(t,e){switch(d(t).code){case 4:case 41:return function(t){const e=c(t,0,t.length);if(null==e)throw new Error("ipBuff is required");if(!n.h6(e))throw new Error("invalid ip address");return e}(e);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return k(e);case 6:case 273:case 33:case 132:return I(e).toString();case 421:return function(t){const e=w.decode(t),r=t.slice(w.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return(0,i.B)(r,"base58btc")}(e);case 444:case 445:return N(e);case 466:return function(t){const e=w.decode(t),r=t.slice(w.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+(0,i.B)(r,"base64url")}(e);default:return(0,i.B)(e,"base16")}}function _(t,e){switch(d(t).code){case 4:case 41:return R(e);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return C(e);case 6:case 273:case 33:case 132:return T(parseInt(e,10));case 421:return function(t){let e;e="Q"===t[0]||"1"===t[0]?m.Jx(g.base58btc.decode(`z${t}`)).bytes:f.k0.parse(t).multihash.bytes;const r=Uint8Array.from(w.encode(e.length));return(0,E.z)([r,e],r.length+e.length)}(e);case 444:return function(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(16!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=p.base32.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=T(n);return(0,E.z)([r,i],r.length+i.length)}(e);case 445:return function(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(56!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=p.base32.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=T(n);return(0,E.z)([r,i],r.length+i.length)}(e);case 466:return function(t){const e=A.decode(t),r=Uint8Array.from(w.encode(e.length));return(0,E.z)([r,e],r.length+e.length)}(e);default:return(0,b.m)(e,"base16")}}const S=Object.values(y.gh).map((t=>t.decoder)),A=function(){let t=S[0].or(S[1]);return S.slice(2).forEach((e=>t=t.or(e))),t}();function R(t){if(!n.h6(t))throw new Error("invalid ip address");return a(t)}function T(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function I(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function C(t){const e=(0,b.m)(t),r=Uint8Array.from(w.encode(e.length));return(0,E.z)([r,e],r.length+e.length)}function k(t){const e=w.decode(t);if((t=t.slice(w.decode.bytes)).length!==e)throw new Error("inconsistent lengths");return(0,i.B)(t)}function N(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2);return`${(0,i.B)(e,"base32")}:${I(r)}`}function B(t){return t.map((t=>{const e=F(t);return null!=t[1]?[e.code,v(e.code,t[1])]:[e.code]}))}function P(t){return U((0,E.z)(t.map((t=>{const e=F(t);let r=Uint8Array.from(w.encode(e.code));return t.length>1&&null!=t[1]&&(r=(0,E.z)([r,t[1]])),r}))))}function L(t,e){if(t.size>0)return t.size/8;if(0===t.size)return 0;return w.decode(e)+(w.decode.bytes??0)}function D(t){const e=[];let r=0;for(;r<t.length;){const n=w.decode(t,r),s=w.decode.bytes??0,o=L(d(n),t.slice(r+s));if(0===o){e.push([n]),r+=s;continue}const a=t.slice(r+s,r+s+o);if(r+=o+s,r>t.length)throw j("Invalid address Uint8Array: "+(0,i.B)(t,"base16"));e.push([n,a])}return e}function O(t){return function(t){const e=[];return t.map((t=>{const r=F(t);return e.push(r.name),t.length>1&&null!=t[1]&&e.push(t[1]),null})),V(e.join("/"))}(B(D(t)))}function x(t){const e=function(t){const e=[],r=t.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const i=r[n],s=d(i);if(0!==s.size){if(n++,n>=r.length)throw j("invalid address: "+t);if(!0===s.path){e.push([i,V(r.slice(n).join("/"))]);break}e.push([i,r[n]])}else e.push([i])}return e}(t=V(t));return P(e.map((t=>{Array.isArray(t)||(t=[t]);const e=F(t);return t.length>1?[e.code,_(e.code,t[1])]:[e.code]})))}function U(t){const e=M(t);if(null!=e)throw e;return Uint8Array.from(t)}function M(t){try{D(t)}catch(t){return t}}function V(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function j(t){return new Error("Error parsing address: "+t)}function F(t){return d(t[0])}var z=r(32114),K=r(73062);var $,q,H,G,W=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)},Y=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r};const Z=Symbol.for("nodejs.util.inspect.custom"),Q=[d("dns").code,d("dns4").code,d("dns6").code,d("dnsaddr").code],X=new Map,J=Symbol.for("@multiformats/js-multiaddr/multiaddr");function tt(t){return Boolean(t?.[J])}class et{constructor(t){if($.set(this,void 0),q.set(this,void 0),H.set(this,void 0),this[G]=!0,null==t&&(t=""),t instanceof Uint8Array)this.bytes=U(t);else if("string"==typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=x(t)}else{if(!tt(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=U(t.bytes)}}toString(){return null==W(this,$,"f")&&Y(this,$,O(this.bytes),"f"),W(this,$,"f")}toJSON(){return this.toString()}toOptions(){let t,e,r,n,i="";const s=d("tcp"),o=d("udp"),a=d("ip4"),c=d("ip6"),u=d("dns6"),l=d("ip6zone");for(const[h,f]of this.stringTuples())h===l.code&&(i=`%${f??""}`),Q.includes(h)&&(e=s.name,n=443,r=`${f??""}${i}`,t=h===u.code?6:4),h!==s.code&&h!==o.code||(e=d(h).name,n=parseInt(f??"")),h!==a.code&&h!==c.code||(e=d(h).name,r=`${f??""}${i}`,t=h===c.code?6:4);if(null==t||null==e||null==r||null==n)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:r,transport:e,port:n}}protos(){return this.protoCodes().map((t=>Object.assign({},d(t))))}protoCodes(){const t=[],e=this.bytes;let r=0;for(;r<e.length;){const n=w.decode(e,r),i=w.decode.bytes??0;r+=L(d(n),e.slice(r+i))+i,t.push(n)}return t}protoNames(){return this.protos().map((t=>t.name))}tuples(){return null==W(this,q,"f")&&Y(this,q,D(this.bytes),"f"),W(this,q,"f")}stringTuples(){return null==W(this,H,"f")&&Y(this,H,B(this.tuples()),"f"),W(this,H,"f")}encapsulate(t){return t=new et(t),new et(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),r=this.toString(),n=r.lastIndexOf(e);if(n<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new et(r.slice(0,n))}decapsulateCode(t){const e=this.tuples();for(let r=e.length-1;r>=0;r--)if(e[r][0]===t)return new et(P(e.slice(0,r)));return this}getPeerId(){try{const t=this.stringTuples().filter((t=>t[0]===l.ipfs.code)),e=t.pop();if(null!=e?.[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?(0,i.B)(g.base58btc.decode(`z${t}`),"base58btc"):(0,i.B)(f.k0.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){let t=null;try{t=this.stringTuples().filter((t=>!0===d(t[0]).path))[0][1],null==t&&(t=null)}catch{t=null}return t}equals(t){return(0,K.f)(this.bytes,t.bytes)}async resolve(t){const e=this.protos().find((t=>t.resolvable));if(null==e)return[this];const r=X.get(e.name);if(null==r)throw z(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this,t)).map((t=>new et(t)))}nodeAddress(){const t=this.toOptions();if("tcp"!==t.transport&&"udp"!==t.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){const e=(t??this).protos();return 2===e.length&&((4===e[0].code||41===e[0].code)&&(6===e[1].code||273===e[1].code))}[($=new WeakMap,q=new WeakMap,H=new WeakMap,G=J,Z)](){return`Multiaddr(${O(this.bytes)})`}}const rt=(t,e)=>e,nt={ip4:rt,ip6:(t,e,r,n)=>1===n.length&&"ip6"===n[0].protocol?e:`[${e}]`,tcp:(t,e,r,n,i)=>n.some((t=>["http","https","ws","wss"].includes(t.protocol)))?`${t}:${e}`:((t,e,r,n)=>{if(null!=n&&!1===n.assumeHttp)return`tcp://${t}:${e}`;let i="tcp",s=`:${e}`;return"tcp"===r[r.length-1].protocol&&(i="443"===e?"https":"http",s="443"===e||"80"===e?"":s),`${i}://${t}${s}`})(t,e,n,i),udp:(t,e)=>`udp://${t}:${e}`,dnsaddr:rt,dns4:rt,dns6:rt,ipfs:(t,e)=>`${t}/ipfs/${e}`,p2p:(t,e)=>`${t}/p2p/${e}`,http:t=>`http://${t}`,https:t=>`https://${t}`,ws:t=>`ws://${t}`,wss:t=>`wss://${t}`,"p2p-websocket-star":t=>`${t}/p2p-websocket-star`,"p2p-webrtc-star":t=>`${t}/p2p-webrtc-star`,"p2p-webrtc-direct":t=>`${t}/p2p-webrtc-direct`};function it(t,e){const r=new et(t);const n=r.toString().split("/").slice(1);return r.tuples().map((t=>({protocol:n.shift()??"",content:null!=t[1]?n.shift()??"":""}))).reduce(((t,r,n,i)=>{const s=nt[r.protocol];if(null==s)throw new Error(`Unsupported protocol ${r.protocol}`);return s(t,r.content,n,i,e)}),"")}},72835:function(t,e,r){"use strict";r.d(e,{Fm:function(){return b},xV:function(){return w}});var n=r(49736),i=r(49784);const s=n.C,o=n.aY,a=function(t){let e=0;if(t=t.toString().trim(),s(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach((t=>{r[e++]=255&parseInt(t,10)})),r}if(o(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){let t;s(r[n])&&(t=a(r[n]),r[n]=(0,i.B)(t.slice(0,2),"base16")),null!=t&&++n<8&&r.splice(n,0,(0,i.B)(t.slice(2,4),"base16"))}if(""===r[0])for(;r.length<8;)r.unshift("0");else if(""===r[r.length-1])for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&""!==r[n];n++);const t=[n,1];for(n=9-r.length;n>0;n--)t.push("0");r.splice.apply(r,t)}const o=new Uint8Array(e+16);for(n=0;n<r.length;n++){const t=parseInt(r[n],16);o[e++]=t>>8&255,o[e++]=255&t}return o}throw new Error("invalid ip address")},c=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(4===r){const n=[];for(let i=0;i<r;i++)n.push(t[e+i]);return n.join(".")}if(16===r){const t=[];for(let i=0;i<r;i+=2)t.push(n.getUint16(e+i).toString(16));return t.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var u=r(20030),l=r(38161),h=r(14249),d=r(81653),f=r(97098),p=r(29094),g=r(93649),y=r(77408),m=r(41690);function w(t,e){switch((0,u.Ev)(t).code){case 4:case 41:return function(t){const e=c(t,0,t.length);if(null==e)throw new Error("ipBuff is required");if(!n.h6(e))throw new Error("invalid ip address");return e}(e);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return T(e);case 6:case 273:case 33:case 132:return A(e).toString();case 421:return function(t){const e=g.decode(t),r=t.slice(g.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return(0,i.B)(r,"base58btc")}(e);case 444:case 445:return I(e);case 466:return function(t){const e=g.decode(t),r=t.slice(g.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+(0,i.B)(r,"base64url")}(e);default:return(0,i.B)(e,"base16")}}function b(t,e){switch((0,u.Ev)(t).code){case 4:case 41:return _(e);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return R(e);case 6:case 273:case 33:case 132:return S(parseInt(e,10));case 421:return function(t){let e;e="Q"===t[0]||"1"===t[0]?p.Jx(d.base58btc.decode(`z${t}`)).bytes:l.k0.parse(t).multihash.bytes;const r=Uint8Array.from(g.encode(e.length));return(0,m.z)([r,e],r.length+e.length)}(e);case 444:return function(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(16!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=h.base32.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=S(n);return(0,m.z)([r,i],r.length+i.length)}(e);case 445:return function(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(56!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=h.base32.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=S(n);return(0,m.z)([r,i],r.length+i.length)}(e);case 466:return function(t){const e=v.decode(t),r=Uint8Array.from(g.encode(e.length));return(0,m.z)([r,e],r.length+e.length)}(e);default:return(0,y.m)(e,"base16")}}const E=Object.values(f.gh).map((t=>t.decoder)),v=function(){let t=E[0].or(E[1]);return E.slice(2).forEach((e=>t=t.or(e))),t}();function _(t){if(!n.h6(t))throw new Error("invalid ip address");return a(t)}function S(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function A(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function R(t){const e=(0,y.m)(t),r=Uint8Array.from(g.encode(e.length));return(0,m.z)([r,e],r.length+e.length)}function T(t){const e=g.decode(t);if((t=t.slice(g.decode.bytes)).length!==e)throw new Error("inconsistent lengths");return(0,i.B)(t)}function I(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2);return`${(0,i.B)(e,"base32")}:${A(r)}`}},91026:function(t,e,r){"use strict";r.d(e,{uv:function(){return L},h2:function(){return O},K9:function(){return D},HM:function(){return U},a_:function(){return i.Ev},s_:function(){return B}});var n=r(72835),i=r(20030),s=r(93649),o=r(41690),a=r(49784);function c(t){return t.map((t=>{const e=w(t);return null!=t[1]?[e.code,(0,n.xV)(e.code,t[1])]:[e.code]}))}function u(t){return p((0,o.z)(t.map((t=>{const e=w(t);let r=Uint8Array.from(s.encode(e.code));return t.length>1&&null!=t[1]&&(r=(0,o.z)([r,t[1]])),r}))))}function l(t,e){if(t.size>0)return t.size/8;if(0===t.size)return 0;return s.decode(e)+(s.decode.bytes??0)}function h(t){const e=[];let r=0;for(;r<t.length;){const n=s.decode(t,r),o=s.decode.bytes??0,c=l((0,i.Ev)(n),t.slice(r+o));if(0===c){e.push([n]),r+=o;continue}const u=t.slice(r+o,r+o+c);if(r+=c+o,r>t.length)throw m("Invalid address Uint8Array: "+(0,a.B)(t,"base16"));e.push([n,u])}return e}function d(t){return function(t){const e=[];return t.map((t=>{const r=w(t);return e.push(r.name),t.length>1&&null!=t[1]&&e.push(t[1]),null})),y(e.join("/"))}(c(h(t)))}function f(t){const e=function(t){const e=[],r=t.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const s=r[n],o=(0,i.Ev)(s);if(0!==o.size){if(n++,n>=r.length)throw m("invalid address: "+t);if(!0===o.path){e.push([s,y(r.slice(n).join("/"))]);break}e.push([s,r[n]])}else e.push([s])}return e}(t=y(t));return u(e.map((t=>{Array.isArray(t)||(t=[t]);const e=w(t);return t.length>1?[e.code,(0,n.Fm)(e.code,t[1])]:[e.code]})))}function p(t){const e=g(t);if(null!=e)throw e;return Uint8Array.from(t)}function g(t){try{h(t)}catch(t){return t}}function y(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function m(t){return new Error("Error parsing address: "+t)}function w(t){return(0,i.Ev)(t[0])}var b,E,v,_,S=r(38161),A=r(81653),R=r(32114),T=r(73062),I=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)},C=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r};const k=Symbol.for("nodejs.util.inspect.custom"),N=[(0,i.Ev)("dns").code,(0,i.Ev)("dns4").code,(0,i.Ev)("dns6").code,(0,i.Ev)("dnsaddr").code],B=new Map,P=Symbol.for("@multiformats/js-multiaddr/multiaddr");function L(t,e){if(null==t)throw new Error("requires node address object");if(null==e)throw new Error("requires transport protocol");let r,n=t.address;switch(t.family){case 4:r="ip4";break;case 6:if(r="ip6",n.includes("%")){const t=n.split("%");if(2!==t.length)throw Error("Multiple ip6 zones in multiaddr");n=t[0];r=`/ip6zone/${t[1]}/ip6`}break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new x("/"+[r,n,e,t.port].join("/"))}function D(t){return!!O(t)&&t.protos().some((t=>t.resolvable))}function O(t){return Boolean(t?.[P])}class x{constructor(t){if(b.set(this,void 0),E.set(this,void 0),v.set(this,void 0),this[_]=!0,null==t&&(t=""),t instanceof Uint8Array)this.bytes=p(t);else if("string"==typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=f(t)}else{if(!O(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=p(t.bytes)}}toString(){return null==I(this,b,"f")&&C(this,b,d(this.bytes),"f"),I(this,b,"f")}toJSON(){return this.toString()}toOptions(){let t,e,r,n,s="";const o=(0,i.Ev)("tcp"),a=(0,i.Ev)("udp"),c=(0,i.Ev)("ip4"),u=(0,i.Ev)("ip6"),l=(0,i.Ev)("dns6"),h=(0,i.Ev)("ip6zone");for(const[d,f]of this.stringTuples())d===h.code&&(s=`%${f??""}`),N.includes(d)&&(e=o.name,n=443,r=`${f??""}${s}`,t=d===l.code?6:4),d!==o.code&&d!==a.code||(e=(0,i.Ev)(d).name,n=parseInt(f??"")),d!==c.code&&d!==u.code||(e=(0,i.Ev)(d).name,r=`${f??""}${s}`,t=d===u.code?6:4);if(null==t||null==e||null==r||null==n)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:r,transport:e,port:n}}protos(){return this.protoCodes().map((t=>Object.assign({},(0,i.Ev)(t))))}protoCodes(){const t=[],e=this.bytes;let r=0;for(;r<e.length;){const n=s.decode(e,r),o=s.decode.bytes??0;r+=l((0,i.Ev)(n),e.slice(r+o))+o,t.push(n)}return t}protoNames(){return this.protos().map((t=>t.name))}tuples(){return null==I(this,E,"f")&&C(this,E,h(this.bytes),"f"),I(this,E,"f")}stringTuples(){return null==I(this,v,"f")&&C(this,v,c(this.tuples()),"f"),I(this,v,"f")}encapsulate(t){return t=new x(t),new x(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),r=this.toString(),n=r.lastIndexOf(e);if(n<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new x(r.slice(0,n))}decapsulateCode(t){const e=this.tuples();for(let r=e.length-1;r>=0;r--)if(e[r][0]===t)return new x(u(e.slice(0,r)));return this}getPeerId(){try{const t=this.stringTuples().filter((t=>t[0]===i.R5.ipfs.code)),e=t.pop();if(null!=e?.[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?(0,a.B)(A.base58btc.decode(`z${t}`),"base58btc"):(0,a.B)(S.k0.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){let t=null;try{t=this.stringTuples().filter((t=>!0===(0,i.Ev)(t[0]).path))[0][1],null==t&&(t=null)}catch{t=null}return t}equals(t){return(0,T.f)(this.bytes,t.bytes)}async resolve(t){const e=this.protos().find((t=>t.resolvable));if(null==e)return[this];const r=B.get(e.name);if(null==r)throw R(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this,t)).map((t=>new x(t)))}nodeAddress(){const t=this.toOptions();if("tcp"!==t.transport&&"udp"!==t.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){const e=(t??this).protos();return 2===e.length&&((4===e[0].code||41===e[0].code)&&(6===e[1].code||273===e[1].code))}[(b=new WeakMap,E=new WeakMap,v=new WeakMap,_=P,k)](){return`Multiaddr(${d(this.bytes)})`}}function U(t){return new x(t)}},20030:function(t,e,r){"use strict";r.d(e,{Ev:function(){return o},R5:function(){return i}});const n=-1,i={},s={};function o(t){if("number"==typeof t){if(null!=s[t])return s[t];throw new Error(`no protocol with code: ${t}`)}if("string"==typeof t){if(null!=i[t])return i[t];throw new Error(`no protocol with name: ${t}`)}throw new Error("invalid protocol id type: "+typeof t)}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,n,"ip6zone"],[43,8,"ipcidr"],[53,n,"dns",!0],[54,n,"dns4",!0],[55,n,"dns6",!0],[56,n,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[281,0,"webrtc-w3c"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,n,"unix",!1,!0],[421,n,"ipfs"],[421,n,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,n,"garlic64"],[448,0,"tls"],[449,n,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,n,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,n,"memory"]].forEach((t=>{const e=function(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(i)}}(...t);s[e.code]=e,i[e.name]=e}))},12619:function(t,e,r){"use strict";r.d(e,{Pv:function(){return o}});var n=r(22688),i=r(11015),s=r(40469);(0,n.D)({name:"murmur3-32",code:35,encode:t=>function(t){const e=new Array(4);for(let r=0;r<4;r++)e[r]=255&t,t>>=8;return new Uint8Array(e)}(s.x86.hash32(t))});const o=(0,n.D)({name:"murmur3-128",code:34,encode:t=>i.aI.fromHex(s.x64.hash128(t))});(0,n.D)({name:"murmur3-x64-64",code:34,encode:t=>i.aI.fromHex(s.x64.hash128(t)).subarray(0,8)})},86107:function(t,e,r){"use strict";r.d(e,{vu:function(){return o}});const n=async(t,e,r={})=>{if(!(e instanceof File||e instanceof Blob))throw new Error("invalid file");const n=new FormData;n.append("file",e,p(e));const s=a(r);try{const e=await i(t,"add",{params:s,method:"POST",body:n,signal:r.signal}),o=s["stream-channels"]?e:e[0];return{...o,cid:o.cid}}catch(t){const e=t;throw e.response?.ok?new Error(`failed to parse response body from cluster add ${e.stack}`):e}},i=async({url:t,headers:e},r,{method:n,params:i,body:s,signal:o})=>{const a=new URL(r,t);for(const[t,e]of Object.entries(i||{}))null!=e&&a.searchParams.set(t,String(e));const c=await fetch(a.href,{method:n||"GET",headers:e,body:s,signal:o});if(c.ok)return await c.json();throw Object.assign(new Error(`${c.status}: ${c.statusText}`),{response:c})},s=async function*({url:t,headers:e},r,{method:n,params:i,body:s,signal:o}){const a=new URL(r,t);for(const[t,e]of Object.entries(i||{}))null!=e&&a.searchParams.set(t,String(e));n=n||"GET";const c=await fetch(a.href,{method:n,headers:e,body:s,signal:o});if(!c.ok){const t=`${c.status}: ${c.statusText}`;throw Object.assign(new Error(t),{response:c})}if(!c.body)throw Object.assign(new Error("Missing response body"),{response:c});yield*g(c.body)};class o{constructor(t,{headers:e}={}){this.url=new URL(t),this.headers=e}version(t){return(async(t,{signal:e}={})=>{const r=await i(t,"version",{method:"GET",signal:e});if("string"!=typeof r.version)throw new Error(`failed to parse version from response the body: ${JSON.stringify(r,null,2)}`);return r.version})(this,t)}info(t){return(async(t,{signal:e}={})=>{const r=await i(t,"id",{method:"GET",signal:e});if((r.error||r.ipfs?.error||"").length>0)throw new Error(`cluster id response has failure: ${JSON.stringify(r,null,2)}`);return f(r)})(this,t)}add(t,e){return n(this,t,e)}addDirectory(t,e){return(async(t,e,r={})=>{const n=new FormData;for(const t of e){if(!(t instanceof File||t instanceof Blob))throw new Error("invalid file");n.append("file",t,p(t))}return await i(t,"add",{params:{...a(r),"stream-channels":!1,"wrap-with-directory":!0},method:"POST",body:n,signal:r.signal})})(this,t,e)}addCAR(t,e={}){return((t,e,r={})=>n(t,e,{...r,format:"car"}))(this,t,{...e,format:"car"})}pin(t,e){return(async(t,e,r={})=>{const n=e.startsWith("/")?`pins${e}`:`pins/${e}`,s=await i(t,n,{params:c(r),method:"POST",signal:r.signal});return h(s)})(this,t,e)}unpin(t,e){return(async(t,e,{signal:r}={})=>{const n=e.startsWith("/")?`pins${e}`:`pins/${e}`,s=await i(t,n,{method:"DELETE",signal:r});return h(s)})(this,t,e)}status(t,e){return(async(t,e,{local:r,signal:n}={})=>{const s=`pins/${encodeURIComponent(e)}`,o=await i(t,s,{params:null!=r?{local:r}:void 0,signal:n});return d(o)})(this,t,e)}statusAll(t){return(async(t,{local:e,filter:r,cids:n,signal:i}={})=>{const o=s(t,"pins",{params:{local:e,filter:r?String(r):null,cids:n?String(n):null},signal:i}),a=[];for await(const t of o)a.push(d(t));return a})(this,t)}allocation(t,e){return(async(t,e,{signal:r}={})=>{const n=`allocations/${encodeURIComponent(e)}`,s=await i(t,n,{signal:r});return h(s)})(this,t,e)}recover(t,e){return(async(t,e,{local:r,signal:n}={})=>{const s=`pins/${encodeURIComponent(e)}/recover`,o=await i(t,s,{method:"POST",params:null!=r?{local:r}:void 0,signal:n});return d(o)})(this,t,e)}metricNames(t){return((t,{signal:e}={})=>i(t,"monitor/metrics",{signal:e}))(this,t)}peerList(t){return(async(t,e={})=>{const r=s(t,"peers",{signal:e.signal}),n=[];for await(const t of r)n.push(f(t));return n})(this,t)}}const a=(t={})=>l({...c(t),local:t.local,recursive:t.recursive,hidden:t.hidden,wrap:t.wrap,shard:t.shard,"stream-channels":null!=t.streamChannels&&t.streamChannels,format:t.format,layout:t.layout,chunker:t.chunker,"raw-leaves":null==t.rawLeaves||t.rawLeaves,progress:t.progress,"cid-version":null!=t.cidVersion?t.cidVersion:1,hash:t.hashFun,"no-copy":t.noCopy}),c=(t={})=>l({name:t.name,mode:t.mode,"replication-min":t.replicationFactorMin,"replication-max":t.replicationFactorMax,"shard-size":t.shardSize,"user-allocations":t.userAllocations?.join(","),"expire-at":t.expireAt?.toISOString(),"pin-update":t.pinUpdate,origins:t.origins?.join(","),...u(t.metadata||{})}),u=(t={})=>Object.fromEntries(Object.entries(t).map((([t,e])=>[`meta-${t}`,e]))),l=t=>Object.fromEntries(Object.entries(t).filter((([,t])=>null!=t))),h=t=>({replicationFactorMin:t.replication_factor_min,replicationFactorMax:t.replication_factor_max,name:t.name,mode:t.mode,shardSize:t.shard_size,userAllocations:t.user_allocations,expireAt:new Date(t.expire_at),metadata:t.metadata,pinUpdate:t.pin_update,cid:t.cid,type:t.type,allocations:t.allocations,maxDepth:t.max_depth,reference:t.reference}),d=t=>{let e=t.peer_map;return e&&(e=Object.fromEntries(Object.entries(e).map((([t,e])=>[t,{peerName:e.peername,ipfsPeerId:e.ipfs_peer_id,status:e.status,timestamp:new Date(e.timestamp),error:e.error}])))),{cid:t.cid,name:t.name,peerMap:e}},f=({id:t,addresses:e,version:r,commit:n,peername:i,rpc_protocol_version:s,cluster_peers:o,cluster_peers_addresses:a,ipfs:c,error:u})=>({id:t,addresses:e,version:r,commit:n,peerName:i,rpcProtocolVersion:s,clusterPeers:o,clusterPeersAddresses:a,ipfs:c,error:u}),p=t=>t.name,g=async function*(t){const e=t.getReader(),r=/\r?\n/,n=new TextDecoder("utf8");let i="";try{for(;;){const t=await e.read();if(t.done)break;i+=n.decode(t.value,{stream:!0});const s=i.split(r);i=s.pop()||"";for(const t of s)yield JSON.parse(t)}}finally{e.cancel(),e.releaseLock()}i+=n.decode(void 0,{stream:!1}),i&&(yield JSON.parse(i))}},27760:function(t,e,r){"use strict";var n;r.d(e,{$3:function(){return tt},E9:function(){return R},P6:function(){return ht},T:function(){return ct},Xx:function(){return ot}});var i=r(95856);const s=BigInt(0),o=BigInt(1),a=BigInt(2),c=BigInt(3),u=BigInt(8),l=Object.freeze({a:s,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:o,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),h=(t,e)=>(t+e/a)/e,d={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n:e}=l,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-o*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=BigInt("0x100000000000000000000000000000000"),c=h(s*t,e),u=h(-n*t,e);let d=F(t-c*r-u*i,e),f=F(-c*n-u*s,e);const p=d>a,g=f>a;if(p&&(d=e-d),g&&(f=e-f),d>a||f>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:p,k1:d,k2neg:g,k2:f}}},f=32,p=32,g=32,y=f+1,m=2*f+1;function w(t){const{a:e,b:r}=l,n=F(t*t),i=F(n*t);return F(i+e*t+r)}const b=l.a===s;class E extends Error{constructor(t){super(t)}}function v(t){if(!(t instanceof _))throw new TypeError("JacobianPoint expected")}class _{constructor(t,e,r){this.x=t,this.y=e,this.z=r}static fromAffine(t){if(!(t instanceof R))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(R.ZERO)?_.ZERO:new _(t.x,t.y,o)}static toAffineBatch(t){const e=function(t,e=l.P){const r=new Array(t.length),n=K(t.reduce(((t,n,i)=>n===s?t:(r[i]=t,F(t*n,e))),o),e);return t.reduceRight(((t,n,i)=>n===s?t:(r[i]=F(t*r[i],e),F(t*n,e))),n),r}(t.map((t=>t.z)));return t.map(((t,r)=>t.toAffine(e[r])))}static normalizeZ(t){return _.toAffineBatch(t).map(_.fromAffine)}equals(t){v(t);const{x:e,y:r,z:n}=this,{x:i,y:s,z:o}=t,a=F(n*n),c=F(o*o),u=F(e*c),l=F(i*a),h=F(F(r*o)*c),d=F(F(s*n)*a);return u===l&&h===d}negate(){return new _(this.x,F(-this.y),this.z)}double(){const{x:t,y:e,z:r}=this,n=F(t*t),i=F(e*e),s=F(i*i),o=t+i,l=F(a*(F(o*o)-n-s)),h=F(c*n),d=F(h*h),f=F(d-a*l),p=F(h*(l-f)-u*s),g=F(a*e*r);return new _(f,p,g)}add(t){v(t);const{x:e,y:r,z:n}=this,{x:i,y:o,z:c}=t;if(i===s||o===s)return this;if(e===s||r===s)return t;const u=F(n*n),l=F(c*c),h=F(e*l),d=F(i*u),f=F(F(r*c)*l),p=F(F(o*n)*u),g=F(d-h),y=F(p-f);if(g===s)return y===s?this.double():_.ZERO;const m=F(g*g),w=F(g*m),b=F(h*m),E=F(y*y-w-a*b),S=F(y*(b-E)-f*w),A=F(n*c*g);return new _(E,S,A)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const e=_.ZERO;if("bigint"==typeof t&&t===s)return e;let r=j(t);if(r===o)return this;if(!b){let t=e,n=this;for(;r>s;)r&o&&(t=t.add(n)),n=n.double(),r>>=o;return t}let{k1neg:n,k1:i,k2neg:a,k2:c}=d.splitScalar(r),u=e,l=e,h=this;for(;i>s||c>s;)i&o&&(u=u.add(h)),c&o&&(l=l.add(h)),h=h.double(),i>>=o,c>>=o;return n&&(u=u.negate()),a&&(l=l.negate()),l=new _(F(l.x*d.beta),l.y,l.z),u.add(l)}precomputeWindow(t){const e=b?128/t+1:256/t+1,r=[];let n=this,i=n;for(let s=0;s<e;s++){i=n,r.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(t,e){!e&&this.equals(_.BASE)&&(e=R.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&A.get(e);n||(n=this.precomputeWindow(r),e&&1!==r&&(n=_.normalizeZ(n),A.set(e,n)));let i=_.ZERO,s=_.BASE;const a=1+(b?128/r:256/r),c=2**(r-1),u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let e=0;e<a;e++){const r=e*c;let a=Number(t&u);t>>=h,a>c&&(a-=l,t+=o);const d=r,f=r+Math.abs(a)-1,p=e%2!=0,g=a<0;0===a?s=s.add(S(p,n[d])):i=i.add(S(g,n[f]))}return{p:i,f:s}}multiply(t,e){let r,n,i=j(t);if(b){const{k1neg:t,k1:s,k2neg:o,k2:a}=d.splitScalar(i);let{p:c,f:u}=this.wNAF(s,e),{p:l,f:h}=this.wNAF(a,e);c=S(t,c),l=S(o,l),l=new _(F(l.x*d.beta),l.y,l.z),r=c.add(l),n=u.add(h)}else{const{p:t,f:s}=this.wNAF(i,e);r=t,n=s}return _.normalizeZ([r,n])[0]}toAffine(t){const{x:e,y:r,z:n}=this,i=this.equals(_.ZERO);null==t&&(t=i?u:K(n));const s=t,a=F(s*s),c=F(a*s),l=F(e*a),h=F(r*c),d=F(n*s);if(i)return R.ZERO;if(d!==o)throw new Error("invZ was invalid");return new R(l,h)}}function S(t,e){const r=e.negate();return t?r:e}_.BASE=new _(l.Gx,l.Gy,o),_.ZERO=new _(s,o,s);const A=new WeakMap;class R{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,A.delete(this)}hasEvenY(){return this.y%a===s}static fromCompressedHex(t){const e=32===t.length,r=M(e?t:t.subarray(1));if(!Y(r))throw new Error("Point is not on curve");let n=function(t){const{P:e}=l,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),u=BigInt(88),h=t*t*t%e,d=h*h*t%e,f=z(d,c)*d%e,p=z(f,c)*d%e,g=z(p,a)*h%e,y=z(g,n)*g%e,m=z(y,i)*y%e,w=z(m,o)*m%e,b=z(w,u)*w%e,E=z(b,o)*m%e,v=z(E,c)*d%e,_=z(v,s)*y%e,S=z(_,r)*h%e,A=z(S,a);if(A*A%e!==t)throw new Error("Cannot find square root");return A}(w(r));const i=(n&o)===o;if(e)i&&(n=F(-n));else{1==(1&t[0])!==i&&(n=F(-n))}const s=new R(r,n);return s.assertValidity(),s}static fromUncompressedHex(t){const e=M(t.subarray(1,f+1)),r=M(t.subarray(f+1,2*f+1)),n=new R(e,r);return n.assertValidity(),n}static fromHex(t){const e=V(t),r=e.length,n=e[0];if(r===f)return this.fromCompressedHex(e);if(r===y&&(2===n||3===n))return this.fromCompressedHex(e);if(r===m&&4===n)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-${y} compressed bytes or ${m} uncompressed bytes, not ${r}`)}static fromPrivateKey(t){return R.BASE.multiply(Q(t))}static fromSignature(t,e,r){const{r:n,s:i}=J(e);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const s=$(V(t)),{n:o}=l,a=2===r||3===r?n+o:n,c=K(a,o),u=F(-s*c,o),h=F(i*c,o),d=1&r?"03":"02",f=R.fromHex(d+L(a)),p=R.BASE.multiplyAndAddUnsafe(f,u,h);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(t=!1){return U(this.toHex(t))}toHex(t=!1){const e=L(this.x);if(t){return`${this.hasEvenY()?"02":"03"}${e}`}return`04${e}${L(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:r}=this;if(!Y(e)||!Y(r))throw new Error(t);const n=F(r*r);if(F(n-w(e))!==s)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new R(this.x,F(-this.y))}double(){return _.fromAffine(this).double().toAffine()}add(t){return _.fromAffine(this).add(_.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return _.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,r){const n=_.fromAffine(this),i=e===s||e===o||this!==R.BASE?n.multiplyUnsafe(e):n.multiply(e),a=_.fromAffine(t).multiplyUnsafe(r),c=i.add(a);return c.equals(_.ZERO)?void 0:c.toAffine()}}function T(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function I(t){if(t.length<2||2!==t[0])throw new Error(`Invalid signature integer tag: ${B(t)}`);const e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:M(r),left:t.subarray(e+2)}}R.BASE=new R(l.Gx,l.Gy),R.ZERO=new R(s,s);class C{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=t instanceof Uint8Array,r="Signature.fromCompact";if("string"!=typeof t&&!e)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=e?B(t):t;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new C(x(n.slice(0,64)),x(n.slice(64,128)))}static fromDER(t){const e=t instanceof Uint8Array;if("string"!=typeof t&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:r,s:n}=function(t){if(t.length<2||48!=t[0])throw new Error(`Invalid signature tag: ${B(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:r}=I(t.subarray(2)),{data:n,left:i}=I(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${B(i)}`);return{r:e,s:n}}(e?t:U(t));return new C(r,n)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!W(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!W(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=l.n>>o;return this.s>t}normalizeS(){return this.hasHighS()?new C(this.r,F(-this.s,l.n)):this}toDERRawBytes(){return U(this.toDERHex())}toDERHex(){const t=T(O(this.s)),e=T(O(this.r)),r=t.length/2,n=e.length/2,i=O(r),s=O(n);return`30${O(n+r+4)}02${s}${e}02${i}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return U(this.toCompactHex())}toCompactHex(){return L(this.r)+L(this.s)}}function k(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r}const N=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function B(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=N[t[r]];return e}const P=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function L(t){if("bigint"!=typeof t)throw new Error("Expected bigint");if(!(s<=t&&t<P))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function D(t){const e=U(L(t));if(32!==e.length)throw new Error("Error: expected 32 bytes");return e}function O(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function x(t){if("string"!=typeof t)throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function U(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,i=t.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[r]=s}return e}function M(t){return x(B(t))}function V(t){return t instanceof Uint8Array?Uint8Array.from(t):U(t)}function j(t){if("number"==typeof t&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if("bigint"==typeof t&&W(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function F(t,e=l.P){const r=t%e;return r>=s?r:e+r}function z(t,e){const{P:r}=l;let n=t;for(;e-- >s;)n*=n,n%=r;return n}function K(t,e=l.P){if(t===s||e<=s)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=F(t,e),n=e,i=s,a=o,c=o,u=s;for(;r!==s;){const t=n/r,e=n%r,s=i-c*t,o=a-u*t;n=r,r=e,i=c,a=u,c=s,u=o}if(n!==o)throw new Error("invert: does not exist");return F(i,e)}function $(t,e=!1){const r=function(t){const e=8*t.length-8*p,r=M(t);return e>0?r>>BigInt(e):r}(t);if(e)return r;const{n:n}=l;return r>=n?r-n:r}let q,H;class G{constructor(t,e){if(this.hashLen=t,this.qByteLen=e,"number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return ht.hmacSha256(this.k,...t)}hmacSync(...t){return H(this.k,...t)}checkSync(){if("function"!=typeof H)throw new E("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),0!==t.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),0!==t.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0;const e=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);const r=this.v.slice();e.push(r),t+=this.v.length}return k(...e)}generateSync(){this.checkSync(),this.incr();let t=0;const e=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);const r=this.v.slice();e.push(r),t+=this.v.length}return k(...e)}}function W(t){return s<t&&t<l.n}function Y(t){return s<t&&t<l.P}function Z(t,e,r,n=!0){const{n:i}=l,a=$(t,!0);if(!W(a))return;const c=K(a,i),u=R.BASE.multiply(a),h=F(u.x,i);if(h===s)return;const d=F(c*F(e+r*h,i),i);if(d===s)return;let f=new C(h,d),p=(u.x===f.r?0:2)|Number(u.y&o);return n&&f.hasHighS()&&(f=f.normalizeS(),p^=1),{sig:f,recovery:p}}function Q(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if("string"==typeof t){if(t.length!==2*p)throw new Error("Expected 32 bytes of private key");e=x(t)}else{if(!(t instanceof Uint8Array))throw new TypeError("Expected valid private key");if(t.length!==p)throw new Error("Expected 32 bytes of private key");e=M(t)}if(!W(e))throw new Error("Expected private key: 0 < key < n");return e}function X(t){return t instanceof R?(t.assertValidity(),t):R.fromHex(t)}function J(t){if(t instanceof C)return t.assertValidity(),t;try{return C.fromDER(t)}catch(e){return C.fromCompact(t)}}function tt(t,e=!1){return R.fromPrivateKey(t).toRawBytes(e)}function et(t){return M(t.length>f?t.slice(0,f):t)}function rt(t){const e=et(t),r=F(e,l.n);return nt(r<s?e:r)}function nt(t){return D(t)}function it(t,e,r){if(null==t)throw new Error(`sign: expected valid message hash, not "${t}"`);const n=V(t),i=Q(e),s=[nt(i),rt(n)];if(null!=r){!0===r&&(r=ht.randomBytes(f));const t=V(r);if(t.length!==f)throw new Error(`sign: Expected ${f} bytes of extra data`);s.push(t)}return{seed:k(...s),m:et(n),d:i}}function st(t,e){const{sig:r,recovery:n}=t,{der:i,recovered:s}=Object.assign({canonical:!0,der:!0},e),o=i?r.toDERRawBytes():r.toCompactRawBytes();return s?[o,n]:o}async function ot(t,e,r={}){const{seed:n,m:i,d:s}=it(t,e,r.extraEntropy),o=new G(g,p);let a;for(await o.reseed(n);!(a=Z(await o.generate(),i,s,r.canonical));)await o.reseed();return st(a,r)}const at={strict:!0};function ct(t,e,r,n=at){let i;try{i=J(t),e=V(e)}catch(t){return!1}const{r:s,s:o}=i;if(n.strict&&i.hasHighS())return!1;const a=$(e);let c;try{c=X(r)}catch(t){return!1}const{n:u}=l,h=K(o,u),d=F(a*h,u),f=F(s*h,u),p=R.BASE.multiplyAndAddUnsafe(c,d,f);if(!p)return!1;return F(p.x,u)===s}R.BASE._setWindowSize(8);const ut={node:n||(n=r.t(i,2)),web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},lt={},ht={bytesToHex:B,hexToBytes:U,concatBytes:k,mod:F,invert:K,isValidPrivateKey(t){try{return Q(t),!0}catch(t){return!1}},_bigintTo32Bytes:D,_normalizePrivateKey:Q,hashToPrivateKey:t=>{t=V(t);const e=p+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return D(F(M(t),l.n-o)+o)},randomBytes:(t=32)=>{if(ut.web)return ut.web.getRandomValues(new Uint8Array(t));if(ut.node){const{randomBytes:e}=ut.node;return Uint8Array.from(e(t))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>ht.hashToPrivateKey(ht.randomBytes(p+8)),precompute(t=8,e=R.BASE){const r=e===R.BASE?e:new R(e.x,e.y);return r._setWindowSize(t),r.multiply(c),r},sha256:async(...t)=>{if(ut.web){const e=await ut.web.subtle.digest("SHA-256",k(...t));return new Uint8Array(e)}if(ut.node){const{createHash:e}=ut.node,r=e("sha256");return t.forEach((t=>r.update(t))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(ut.web){const r=await ut.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=k(...e),i=await ut.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}if(ut.node){const{createHmac:r}=ut.node,n=r("sha256",t);return e.forEach((t=>n.update(t))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let r=lt[t];if(void 0===r){const e=await ht.sha256(Uint8Array.from(t,(t=>t.charCodeAt(0))));r=k(e,e),lt[t]=r}return ht.sha256(r,...e)},taggedHashSync:(t,...e)=>{if("function"!=typeof q)throw new E("sha256Sync is undefined, you need to set it");let r=lt[t];if(void 0===r){const e=q(Uint8Array.from(t,(t=>t.charCodeAt(0))));r=k(e,e),lt[t]=r}return q(r,...e)},_JacobianPoint:_};Object.defineProperties(ht,{sha256Sync:{configurable:!1,get:()=>q,set(t){q||(q=t)}},hmacSha256Sync:{configurable:!1,get:()=>H,set(t){H||(H=t)}}})},89546:function(t,e,r){"use strict";r.d(e,{Ue:function(){return jr}});var n=r(51392),i=r(52890),s=r(55101),o=r(33808),a=r(90560),c=r(36921),u=r(84296),l=r(38566),h=r(97098),d=r(38161),f=r(91026),p=r(106),g=r(90072),y=r(69860),m=r(67137),w=r(79221),b=r(63181),E=r(97295);const v=(0,y.kg)("js-kubo-rpc-client:lib:error-handler"),_=w.Z.bind({ignoreUndefined:!0}),S=p.isBrowser||p.isWebWorker?location.protocol:"http",A=p.isBrowser||p.isWebWorker?location.hostname:"localhost",R=p.isBrowser||p.isWebWorker?location.port:"5001",T=async t=>{let e;try{if((t.headers.get("Content-Type")||"").startsWith("application/json")){const r=await t.json();v(r),e=r.Message||r.message}else e=await t.text()}catch(t){v("Failed to parse error response",t),e=t.message}let r=new m.HTTPError(t);throw e&&(e.includes("deadline has elapsed")&&(r=new m.TimeoutError),e&&e.includes("context deadline exceeded")&&(r=new m.TimeoutError)),e&&e.includes("request timed out")&&(r=new m.TimeoutError),e&&(r.message=e),r},I=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,C=t=>t.replace(I,(function(t){return"-"+t.toLowerCase()}));class k extends m{constructor(t={}){const e=((t={})=>{let e,r,n={};if("string"==typeof t||(0,f.h2)(t))e=new URL((0,b.d)(t));else if(t instanceof URL)e=t;else if("string"==typeof t.url||(0,f.h2)(t.url))e=new URL((0,b.d)(t.url)),n=t;else if(t.url instanceof URL)e=t.url,n=t;else{n=t||{};const r=(n.protocol||S).replace(":",""),i=(n.host||A).split(":")[0],s=n.port||R;e=new URL(`${r}://${i}:${s}`)}if(n.apiPath?e.pathname=n.apiPath:"/"!==e.pathname&&void 0!==e.pathname||(e.pathname="api/v0"),p.isNode){const t=(0,E.Z)(e);r=n.agent||new t({keepAlive:!0,maxSockets:6})}return{...n,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:r}})(t);var r;super({timeout:(r=e.timeout||0,("string"==typeof r?(0,g.Z)(r):r)||void 0),headers:e.headers,base:`${e.url}`,handleError:T,transformSearchParams:t=>{const e=new URLSearchParams;for(const[r,n]of t)"undefined"!==n&&"null"!==n&&"signal"!==r&&e.append(C(r),n),"timeout"!==r||isNaN(n)||e.append(C(r),n);return e},agent:e.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=(t,r={})=>("string"!=typeof t||t.startsWith("/")||(t=`${e.url}/${t}`),n.call(this,t,_(r,{method:"POST"})))}}m.HTTPError;const N=t=>e=>t(new k(e),e);function B(t){if(null!=t)return"string"==typeof t?t:t.toString(8).padStart(4,"0")}var P=r(32114);function L(t){if(null==t)return;let e;if(null!=t.secs&&(e={secs:t.secs,nsecs:t.nsecs}),null!=t.Seconds&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){const r=t.getTime(),n=Math.floor(r/1e3);e={secs:n,nsecs:1e3*(r-1e3*n)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(null!=e&&null!=e.nsecs&&(e.nsecs<0||e.nsecs>999999999))throw P(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}function D({arg:t,searchParams:e,hashAlg:r,mtime:n,mode:i,...s}={}){e&&(s={...s,...e}),r&&(s.hash=r),null!=n&&(n=L(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),null!=i&&(s.mode=B(i)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),null==t?t=[]:Array.isArray(t)||(t=[t]);const o=new URLSearchParams(s);return t.forEach((t=>o.append("arg",t))),o}const O=N((t=>async function(e={}){return((await(await t.post("bitswap/wantlist",{signal:e.signal,searchParams:D(e),headers:e.headers})).json()).Keys||[]).map((t=>d.k0.parse(t["/"])))})),x=N((t=>async function(e,r={}){return((await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:D({...r,peer:e.toString()}),headers:r.headers})).json()).Keys||[]).map((t=>d.k0.parse(t["/"])))}));var U=r(23366);const M=N((t=>async function(e={}){const r=await t.post("bitswap/stat",{searchParams:D(e),signal:e.signal,headers:e.headers});return function(t){return{provideBufLen:t.ProvideBufLen,wantlist:(t.Wantlist||[]).map((t=>d.k0.parse(t["/"]))),peers:(t.Peers||[]).map((t=>(0,U.jE)(t))),blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}(await r.json())}));const V=N((t=>async function(e,r={}){const n=await t.post("block/get",{signal:r.signal,searchParams:D({arg:e.toString(),...r}),headers:r.headers});return new Uint8Array(await n.arrayBuffer())}));var j=r(47498),F=r(32044);function z(...t){return(0,F.anySignal)(function(t){return t.filter(Boolean)}(t))}const K=N(((t,e)=>async function e(r,n={}){const i=new AbortController,s=z(i.signal,n.signal);let o;try{const e=await t.post("block/put",{signal:s,searchParams:D(n),...await(0,j.x)([r],i,n.headers)});o=await e.json()}catch(t){if("dag-pb"===n.format)return e(r,{...n,format:"protobuf"});if("dag-cbor"===n.format)return e(r,{...n,format:"cbor"});throw t}return d.k0.parse(o.Key)})),$=N((t=>async function*(e,r={}){Array.isArray(e)||(e=[e]);const n=await t.post("block/rm",{signal:r.signal,searchParams:D({arg:e.map((t=>t.toString())),"stream-channels":!0,...r}),headers:r.headers});for await(const t of n.ndjson())yield q(t)}));function q(t){const e={cid:d.k0.parse(t.Hash)};return t.Error&&(e.error=new Error(t.Error)),e}const H=N((t=>async function(e,r={}){const n=await t.post("block/stat",{signal:r.signal,searchParams:D({arg:e.toString(),...r}),headers:r.headers}),i=await n.json();return{cid:d.k0.parse(i.Key),size:i.Size}}));function G(t){return{get:V(t),put:K(t),rm:$(t),stat:H(t)}}const W=N((t=>async function(e,r={}){const n=await t.post("bootstrap/add",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers}),{Peers:i}=await n.json();return{Peers:i.map((t=>(0,f.HM)(t)))}})),Y=N((t=>async function(e={}){const r=await t.post("bootstrap/list",{signal:e.signal,searchParams:D(e),headers:e.headers}),{Peers:n}=await r.json();return{Peers:n.map((t=>(0,f.HM)(t)))}})),Z=N((t=>async function(e,r={}){const n=await t.post("bootstrap/rm",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers}),{Peers:i}=await n.json();return{Peers:i.map((t=>(0,f.HM)(t)))}}));function Q(t){return{add:W(t),list:Y(t),rm:Z(t)}}const X=N((t=>async function(e,r={}){const n=await t.post("config/profile/apply",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers}),i=await n.json();return{original:i.OldCfg,updated:i.NewCfg}}));function J(t){return{apply:X(t)}}const tt=N((t=>async(e,r={})=>{if(!e)throw new Error("key argument is required");const n=await t.post("config",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers});return(await n.json()).Value})),et=N((t=>async(e={})=>{const r=await t.post("config/show",{signal:e.signal,searchParams:D({...e}),headers:e.headers});return await r.json()}));var rt=r(77408);const nt=N((t=>async(e,r={})=>{const n=new AbortController,i=z(n.signal,r.signal),s=await t.post("config/replace",{signal:i,searchParams:D(r),...await(0,j.x)([(0,rt.m)(JSON.stringify(e))],n,r.headers)});await s.text()})),it=N((t=>async(e,r,n={})=>{if("string"!=typeof e)throw new Error("Invalid key type");const i={...n,...st(e,r)},s=await t.post("config",{signal:n.signal,searchParams:D(i),headers:n.headers});await s.text()})),st=(t,e)=>{switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}};function ot(t){return{getAll:et(t),get:tt(t),set:it(t),replace:nt(t),profiles:J(t)}}const at=N((t=>async function*(e,r={}){const n=await t.post("dag/export",{signal:r.signal,searchParams:D({arg:e.toString()}),headers:r.headers});yield*n.iterator()}));async function*ct(t,e,r,n,i){const s=async t=>{const e=await r.getCodec(t.code),s=await n(t,i);return e.decode(s)},o=e.split("/").filter(Boolean);let a=await s(t),c=t;for(;o.length;){const t=o.shift();if(!t)throw P(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(!Object.prototype.hasOwnProperty.call(a,t))throw P(new Error(`no link named "${t}" under ${c}`),"ERR_NO_LINK");a=a[t],yield{value:a,remainderPath:o.join("/")};const r=d.k0.asCID(a);r&&(c=r,a=await s(a))}yield{value:a,remainderPath:""}}var ut=r(91486),lt=r(68883);const ht=(t,e)=>{const r=N(((e,r)=>{const n=V(r);return async(e,r={})=>{if(r.path){const i=r.localResolve?await(0,ut.Z)(ct(e,r.path,t,n,r)):await(0,lt.Z)(ct(e,r.path,t,n,r));if(!i)throw P(new Error("Not found"),"ERR_NOT_FOUND");return i}const i=await t.getCodec(e.code),s=await n(e,r);return{value:i.decode(s),remainderPath:""}}}));return r(e)},dt=N((t=>async function*(e,r={}){const n=new AbortController,i=z(n.signal,r.signal),{headers:s,body:o}=await(0,j.x)(e,n,r.headers),a=await t.post("dag/import",{signal:i,headers:s,body:o,searchParams:D({"pin-roots":r.pinRoots})});for await(const{Root:t}of a.ndjson())if(void 0!==t){const{Cid:{"/":e},PinErrorMsg:r}=t;yield{root:{cid:d.k0.parse(e),pinErrorMsg:r}}}})),ft=(t,e)=>{const r=N((e=>async(r,n={})=>{const i={storeCodec:"dag-cbor",hashAlg:"sha2-256",...n};let s;if(i.inputCodec){if(!(r instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");s=r}else{s=(await t.getCodec(i.storeCodec)).encode(r),i.inputCodec=i.storeCodec}const o=new AbortController,a=z(o.signal,i.signal),c=await e.post("dag/put",{timeout:i.timeout,signal:a,searchParams:D(i),...await(0,j.x)([s],o,i.headers)}),u=await c.json();return d.k0.parse(u.Cid["/"])}));return r(e)},pt=N((t=>async(e,r={})=>{const n=await t.post("dag/resolve",{signal:r.signal,searchParams:D({arg:`${e}${r.path?`/${r.path}`.replace(/\/[/]+/g,"/"):""}`,...r}),headers:r.headers}),i=await n.json();return{cid:d.k0.parse(i.Cid["/"]),remainderPath:i.RemPath}}));function gt(t,e){return{export:at(e),get:ht(t,e),import:dt(e),put:ft(t,e),resolve:pt(e)}}const yt=t=>{if(0===t.Type)return{name:"SENDING_QUERY",type:t.Type};if(1===t.Type)return{from:(0,U.jE)(t.ID),name:"PEER_RESPONSE",type:t.Type,messageType:0,messageName:"PUT_VALUE",closer:(t.Responses||[]).map((({ID:t,Addrs:e})=>({id:(0,U.jE)(t),multiaddrs:e.map((t=>(0,f.HM)(t))),protocols:[]}))),providers:(t.Responses||[]).map((({ID:t,Addrs:e})=>({id:(0,U.jE)(t),multiaddrs:e.map((t=>(0,f.HM)(t))),protocols:[]})))};if(2===t.Type){let e={id:t.ID??(0,U.jE)(t.ID),multiaddrs:[],protocols:[]};return t.Responses&&t.Responses.length&&(e={id:(0,U.jE)(t.Responses[0].ID),multiaddrs:t.Responses[0].Addrs.map((t=>(0,f.HM)(t))),protocols:[]}),{name:"FINAL_PEER",type:t.Type,peer:e}}if(3===t.Type)return{name:"QUERY_ERROR",type:t.Type,error:new Error(t.Extra)};if(4===t.Type)return{name:"PROVIDER",type:t.Type,providers:t.Responses.map((({ID:t,Addrs:e})=>({id:(0,U.jE)(t),multiaddrs:e.map((t=>(0,f.HM)(t))),protocols:[]})))};if(5===t.Type)return{name:"VALUE",type:t.Type,value:(0,rt.m)(t.Extra,"base64pad")};if(6===t.Type){const e=t.Responses.map((({ID:t})=>(0,U.jE)(t)));if(!e.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:t.Type,peer:e[0]}}if(7===t.Type)return{name:"DIALING_PEER",type:t.Type,peer:(0,U.jE)(t.ID)};throw new Error("Unknown DHT event type")},mt=N((t=>async function*(e,r={}){const n=await t.post("dht/findpeer",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers});for await(const t of n.ndjson())yield yt(t)})),wt=N((t=>async function*(e,r={}){const n=await t.post("dht/findprovs",{signal:r.signal,searchParams:D({arg:e.toString(),...r}),headers:r.headers});for await(const t of n.ndjson())yield yt(t)}));var bt=r(49784);const Et=N((t=>async function*(e,r={}){const n=await t.post("dht/get",{signal:r.signal,searchParams:D({arg:e instanceof Uint8Array?(0,bt.B)(e):e.toString(),...r}),headers:r.headers});for await(const t of n.ndjson())yield yt(t)})),vt=N((t=>async function*(e,r={recursive:!1}){const n=Array.isArray(e)?e:[e],i=await t.post("dht/provide",{signal:r.signal,searchParams:D({arg:n.map((t=>t.toString())),...r}),headers:r.headers});for await(const t of i.ndjson())yield yt(t)})),_t=N((t=>async function*(e,r,n={}){const i=new AbortController,s=z(i.signal,n.signal),o=await t.post("dht/put",{signal:s,searchParams:D({arg:e instanceof Uint8Array?(0,bt.B)(e):e.toString(),...n}),...await(0,j.x)([r],i,n.headers)});for await(const t of o.ndjson())yield yt(t)})),St=N((t=>async function*(e,r={}){const n=await t.post("dht/query",{signal:r.signal,searchParams:D({arg:e.toString(),...r}),headers:r.headers});for await(const t of n.ndjson())yield yt(t)}));function At(t){return{findPeer:mt(t),findProvs:wt(t),get:Et(t),provide:vt(t),put:_t(t),query:St(t)}}const Rt=N((t=>async function(e={}){return(await t.post("diag/cmds",{signal:e.signal,searchParams:D(e),headers:e.headers})).json()})),Tt=N((t=>async function(e={}){return(await t.post("diag/net",{signal:e.signal,searchParams:D(e),headers:e.headers})).json()})),It=N((t=>async function(e={}){return(await t.post("diag/sys",{signal:e.signal,searchParams:D(e),headers:e.headers})).json()}));function Ct(t){return{cmds:Rt(t),net:Tt(t),sys:It(t)}}const kt=N((t=>async function(e,r,n={}){const i=Array.isArray(e)?e:[e],s=await t.post("files/cp",{signal:n.signal,searchParams:D({arg:i.concat(r).map((t=>d.k0.asCID(t)?`/ipfs/${t}`:t)),...n}),headers:n.headers});await s.text()})),Nt=N((t=>async function(e,r={}){if(!e||"string"!=typeof e)throw new Error("ipfs.files.flush requires a path");const n=await t.post("files/flush",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers}),i=await n.json();return d.k0.parse(i.Cid)}));function Bt(t){if(null==t)return t;const e=/^[A-Z]+$/;return Object.keys(t).reduce(((r,n)=>(e.test(n)?r[n.toLowerCase()]=t[n]:e.test(n[0])?r[n[0].toLowerCase()+n.slice(1)]=t[n]:r[n]=t[n],r)),{})}function Pt(t){const e=Bt(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs||0},delete e.mtimeNsecs),e}const Lt=N((t=>async function*(e,r={}){if(!e)throw new Error("ipfs.files.ls requires a path");const n=await t.post("files/ls",{signal:r.signal,searchParams:D({arg:d.k0.asCID(e)?`/ipfs/${e}`:e,long:!0,...r,stream:!0}),headers:r.headers});for await(const t of n.ndjson())if("Entries"in t)for(const e of t.Entries||[])yield Dt(Pt(e));else yield Dt(Pt(t))}));function Dt(t){return t.hash&&(t.cid=d.k0.parse(t.hash)),delete t.hash,t.type=1===t.type?"directory":"file",t}const Ot=N((t=>async function(e,r={}){const n=await t.post("files/mkdir",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers});await n.text()})),xt=N((t=>async function(e,r,n={}){Array.isArray(e)||(e=[e]);const i=await t.post("files/mv",{signal:n.signal,searchParams:D({arg:e.concat(r),...n}),headers:n.headers});await i.text()}));var Ut=r(50590);const Mt=N((t=>async function*(e,r={}){const n=await t.post("files/read",{signal:r.signal,searchParams:D({arg:e,count:r.length,...r}),headers:r.headers});yield*Ut(n.body)})),Vt=N((t=>async function(e,r={}){const n=await t.post("files/rm",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers}),i=await n.text();if(""!==i){const t=new m.HTTPError(n);throw t.message=i,t}})),jt=N((t=>async function(e,r={}){const n=await t.post("files/stat",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers}),i=await n.json();return i.WithLocality=i.WithLocality||!1,(s=Pt(i)).cid=d.k0.parse(s.hash),delete s.hash,s;var s}));const Ft=N((t=>async function(e,r,n={}){const i=new AbortController,s=z(i.signal,n.signal),o=await t.post("files/write",{signal:s,searchParams:D({arg:e,streamChannels:!0,count:n.length,...n}),...await(0,j.x)([{content:r,path:"arg",mode:B(n.mode),mtime:L(n.mtime)}],i,n.headers)});await o.text()}));function zt(t){return{cp:kt(t),flush:Nt(t),ls:Lt(t),mkdir:Ot(t),mv:xt(t),read:Mt(t),rm:Vt(t),stat:jt(t),write:Ft(t)}}const Kt=N((t=>async(t,e,r={})=>{throw P(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),$t={type:"ed25519"},qt=N((t=>async function(e,r=$t){const n=await t.post("key/gen",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers});return Bt(await n.json())})),Ht=N((t=>async function(e,r,n,i={}){const s=await t.post("key/import",{signal:i.signal,searchParams:D({arg:e,pem:r,password:n,...i}),headers:i.headers});return Bt(await s.json())})),Gt=N((t=>async function(e={}){const r=await t.post("key/list",{signal:e.signal,searchParams:D(e),headers:e.headers});return((await r.json()).Keys||[]).map((t=>Bt(t)))})),Wt=N((t=>async function(e,r,n={}){const i=await t.post("key/rename",{signal:n.signal,searchParams:D({arg:[e,r],...n}),headers:n.headers});return Bt(await i.json())})),Yt=N((t=>async function(e,r={}){const n=await t.post("key/rm",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers});return Bt((await n.json()).Keys[0])}));function Zt(t){return{export:Kt(t),gen:qt(t),import:Ht(t),list:Gt(t),rename:Wt(t),rm:Yt(t)}}const Qt=N((t=>async function(e,r,n={}){const i=await t.post("log/level",{signal:n.signal,searchParams:D({arg:[e,r],...n}),headers:n.headers});return Bt(await i.json())})),Xt=N((t=>async function(e={}){const r=await t.post("log/ls",{signal:e.signal,searchParams:D(e),headers:e.headers});return(await r.json()).Strings})),Jt=N((t=>async function*(e={}){const r=await t.post("log/tail",{signal:e.signal,searchParams:D(e),headers:e.headers});yield*r.ndjson()}));function te(t){return{level:Qt(t),ls:Xt(t),tail:Jt(t)}}const ee=N((t=>async function(e,r={}){const n=await t.post("name/publish",{signal:r.signal,searchParams:D({arg:`${e}`,...r}),headers:r.headers});return Bt(await n.json())})),re=N((t=>async function*(e,r={}){const n=await t.post("name/resolve",{signal:r.signal,searchParams:D({arg:e,stream:!0,...r}),headers:r.headers});for await(const t of n.ndjson())yield t.Path})),ne=N((t=>async function(e,r={}){const n=await t.post("name/pubsub/cancel",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers});return Bt(await n.json())})),ie=N((t=>async function(e={}){const r=await t.post("name/pubsub/state",{signal:e.signal,searchParams:D(e),headers:e.headers});return Bt(await r.json())})),se=N((t=>async function(e={}){const r=await t.post("name/pubsub/subs",{signal:e.signal,searchParams:D(e),headers:e.headers});return(await r.json()).Strings||[]}));function oe(t){return{cancel:ne(t),state:ie(t),subs:se(t)}}function ae(t){return{publish:ee(t),resolve:re(t),pubsub:oe(t)}}const ce=N((t=>async function(e,r={}){const n=await t.post("object/data",{signal:r.signal,searchParams:D({arg:`${e instanceof Uint8Array?d.k0.decode(e):e}`,...r}),headers:r.headers}),i=await n.arrayBuffer();return new Uint8Array(i,0,i.byteLength)})),ue=N((t=>async function(e,r={}){const n=await t.post("object/get",{signal:r.signal,searchParams:D({arg:`${e instanceof Uint8Array?d.k0.decode(e):e}`,dataEncoding:"base64",...r}),headers:r.headers}),i=await n.json();return{Data:(0,rt.m)(i.Data,"base64pad"),Links:(i.Links||[]).map((t=>({Name:t.Name,Hash:d.k0.parse(t.Hash),Tsize:t.Size})))}})),le=N((t=>async function(e,r={}){const n=await t.post("object/links",{signal:r.signal,searchParams:D({arg:`${e instanceof Uint8Array?d.k0.decode(e):e}`,...r}),headers:r.headers});return((await n.json()).Links||[]).map((t=>({Name:t.Name,Tsize:t.Size,Hash:d.k0.parse(t.Hash)})))})),he=N((t=>async function(e={}){const r=await t.post("object/new",{signal:e.signal,searchParams:D({arg:e.template,...e}),headers:e.headers}),{Hash:n}=await r.json();return d.k0.parse(n)})),de=(t,e)=>{const r=N((r=>{const n=ft(t,e);return async function(t,e={}){return n(t,{...e,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}}));return r(e)},fe=N((t=>async function(e,r={}){const n=await t.post("object/stat",{signal:r.signal,searchParams:D({arg:`${e}`,...r}),headers:r.headers}),i=await n.json();return{...i,Hash:d.k0.parse(i.Hash)}})),pe=N((t=>async function(e,r,n={}){const i=await t.post("object/patch/add-link",{signal:n.signal,searchParams:D({arg:[`${e}`,r.Name||r.name||"",(r.Hash||r.cid||"").toString()||null],...n}),headers:n.headers}),{Hash:s}=await i.json();return d.k0.parse(s)})),ge=N((t=>async function(e,r,n={}){const i=new AbortController,s=z(i.signal,n.signal),o=await t.post("object/patch/append-data",{signal:s,searchParams:D({arg:`${e}`,...n}),...await(0,j.x)([r],i,n.headers)}),{Hash:a}=await o.json();return d.k0.parse(a)})),ye=N((t=>async function(e,r,n={}){const i=await t.post("object/patch/rm-link",{signal:n.signal,searchParams:D({arg:[`${e}`,r.Name||r.name||null],...n}),headers:n.headers}),{Hash:s}=await i.json();return d.k0.parse(s)})),me=N((t=>async function(e,r,n={}){const i=new AbortController,s=z(i.signal,n.signal),o=await t.post("object/patch/set-data",{signal:s,searchParams:D({arg:[`${e}`],...n}),...await(0,j.x)([r],i,n.headers)}),{Hash:a}=await o.json();return d.k0.parse(a)}));function we(t){return{addLink:pe(t),appendData:ge(t),rmLink:ye(t),setData:me(t)}}function be(t,e){return{data:ce(e),get:ue(e),links:le(e),new:he(e),put:de(t,e),stat:fe(e),patch:we(e)}}var Ee=r(73297);const ve=N((t=>async function*(e,r={}){for await(const{path:n,recursive:i,metadata:s}of(0,Ee.f)(e)){const e=await t.post("pin/add",{signal:r.signal,searchParams:D({...r,arg:n,recursive:i,metadata:s?JSON.stringify(s):void 0,stream:!0}),headers:r.headers});for await(const t of e.ndjson())if(t.Pins)for(const e of t.Pins)yield d.k0.parse(e);else yield d.k0.parse(t)}}));function _e(t){const e=ve(t);return N((()=>async function(t,r={}){return(0,lt.Z)(e([{path:t,...r}],r))}))(t)}function Se(t,e,r){const n={type:t,cid:d.k0.parse(e)};return r&&(n.metadata=r),n}const Ae=N((t=>async function*(e={}){let r=[];e.paths&&(r=Array.isArray(e.paths)?e.paths:[e.paths]);const n=await t.post("pin/ls",{signal:e.signal,searchParams:D({...e,arg:r.map((t=>`${t}`)),stream:!0}),headers:e.headers});for await(const t of n.ndjson()){if(t.Keys){for(const e of Object.keys(t.Keys))yield Se(t.Keys[e].Type,e,t.Keys[e].Metadata);return}yield Se(t.Type,t.Cid,t.Metadata)}})),Re=N((t=>async function*(e,r={}){for await(const{path:n,recursive:i}of(0,Ee.f)(e)){const e=new URLSearchParams(r.searchParams);e.append("arg",`${n}`),null!=i&&e.set("recursive",String(i));const s=await t.post("pin/rm",{signal:r.signal,headers:r.headers,searchParams:D({...r,arg:`${n}`,recursive:i})});for await(const t of s.ndjson())t.Pins?yield*t.Pins.map((t=>d.k0.parse(t))):yield d.k0.parse(t)}})),Te=t=>{const e=Re(t);return N((()=>async function(t,r={}){return(0,lt.Z)(e([{path:t,...r}],r))}))(t)},Ie=({Name:t,Status:e,Cid:r})=>({cid:d.k0.parse(r),name:t,status:e}),Ce=t=>{if("string"==typeof t&&""!==t)return t;throw new TypeError("service name must be passed")},ke=t=>{if(d.k0.asCID(t))return t.toString();throw new TypeError("CID instance expected instead of "+typeof t)},Ne=({service:t,cid:e,name:r,status:n,all:i})=>{const s=D({service:Ce(t),name:r,force:!!i||void 0});if(e)for(const t of e)s.append("cid",ke(t));if(n)for(const t of n)s.append("status",t);return s},Be=({cid:t,service:e,background:r,name:n,origins:i})=>{const s=D({arg:ke(t),service:Ce(e),name:n,background:!!r||void 0});if(i)for(const t of i)s.append("origin",t.toString());return s};function Pe(t){return async function(e,{timeout:r,signal:n,headers:i,...s}){const o=await t.post("pin/remote/add",{timeout:r,signal:n,headers:i,searchParams:Be({cid:e,...s})});return Ie(await o.json())}}function Le(t){return async function*({timeout:e,signal:r,headers:n,...i}){const s=await t.post("pin/remote/ls",{timeout:e,signal:r,headers:n,searchParams:Ne(i)});for await(const t of s.ndjson())yield Ie(t)}}function De(t){return async function({timeout:e,signal:r,headers:n,...i}){await t.post("pin/remote/rm",{timeout:e,signal:r,headers:n,searchParams:Ne({...i,all:!1})})}}function Oe(t){return async function({timeout:e,signal:r,headers:n,...i}){await t.post("pin/remote/rm",{timeout:e,signal:r,headers:n,searchParams:Ne({...i,all:!0})})}}function xe(t){const e=String(t);if("undefined"===e)throw Error("endpoint is required");return"/"===e[e.length-1]?e.slice(0,-1):e}function Ue(t){return{service:t.Service,endpoint:new URL(t.ApiEndpoint),...t.Stat&&{stat:Me(t.Stat)}}}function Me(t){switch(t.Status){case"valid":{const{Pinning:e,Pinned:r,Queued:n,Failed:i}=t.PinCount;return{status:"valid",pinCount:{queued:n,pinning:e,pinned:r,failed:i}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}function Ve(t){return async function(e,r){const{endpoint:n,key:i,headers:s,timeout:o,signal:a}=r;await t.post("pin/remote/service/add",{timeout:o,signal:a,searchParams:D({arg:[e,xe(n),i]}),headers:s})}}function je(t){return async function(e={}){const{stat:r,headers:n,timeout:i,signal:s}=e,o=await t.post("pin/remote/service/ls",{timeout:i,signal:s,headers:n,searchParams:!0===r?D({stat:r}):void 0}),{RemoteServices:a}=await o.json();return a.map(Ue)}}function Fe(t){return async function(e,r={}){await t.post("pin/remote/service/rm",{signal:r.signal,headers:r.headers,searchParams:D({arg:e})})}}function ze(t){const e=new k(t);return{add:Ve(e),ls:je(e),rm:Fe(e)}}function Ke(t){const e=new k(t);return{add:Pe(e),ls:Le(e),rm:De(e),rmAll:Oe(e),service:ze(t)}}function $e(t){return{addAll:ve(t),add:_e(t),ls:Ae(t),rmAll:Re(t),rm:Te(t),remote:Ke(t)}}var qe=r(99382);const He=t=>(0,bt.B)(Ge(t)),Ge=t=>qe.base64url.decode(t),We=t=>BigInt(`0x${(0,bt.B)(qe.base64url.decode(t),"base16")}`),Ye=t=>qe.base64url.encode((0,rt.m)(t)),Ze=N((t=>async function(e={}){const{Strings:r}=await(await t.post("pubsub/ls",{signal:e.signal,searchParams:D(e),headers:e.headers})).json();return n=r,(Array.isArray(n)?n.map(He):n)||[];var n})),Qe=N((t=>async function(e,r={}){const n=await t.post("pubsub/peers",{signal:r.signal,searchParams:D({arg:Ye(e),...r}),headers:r.headers}),{Strings:i}=await n.json();return i||[]})),Xe=N((t=>async function(e,r,n={}){const i=D({arg:Ye(e),...n}),s=new AbortController,o=z(s.signal,n.signal),a=await t.post("pubsub/pub",{signal:o,searchParams:i,...await(0,j.x)([r],s,n.headers)});await a.text()})),Je=(0,y.kg)("js-kubo-rpc-client:pubsub:subscribe"),tr=(t,e)=>N((t=>async function(r,n,i={}){let s,o;i.signal=e.subscribe(r,n,i.signal);const a=new Promise(((t,e)=>{s=t,o=e})),c=setTimeout((()=>s()),1e3);return t.post("pubsub/sub",{signal:i.signal,searchParams:D({arg:Ye(r),...i}),headers:i.headers}).catch((t=>{e.unsubscribe(r,n),o(t)})).then((t=>{clearTimeout(c),t&&(!async function(t,{onMessage:e,onEnd:r,onError:n}){n=n||Je;try{for await(const r of t.ndjson())try{if(!r.from)continue;null!=r.from&&null!=r.seqno?e({type:"signed",from:(0,U.jE)(r.from),data:Ge(r.data),sequenceNumber:We(r.seqno),topic:He(r.topicIDs[0]),key:Ge(r.key??"u"),signature:Ge(r.signature??"u")}):e({type:"unsigned",data:Ge(r.data),topic:He(r.topicIDs[0])})}catch(t){t.message=`Failed to parse pubsub message: ${t.message}`,n(t,!1,r)}}catch(t){er(t)||n(t,!0)}finally{r()}}(t,{onMessage:t=>{n&&("function"!=typeof n?"function"==typeof n.handleEvent&&n.handleEvent(t):n(t))},onEnd:()=>e.unsubscribe(r,n),onError:i.onError}),s())})),a}))(t);const er=t=>{switch(t.type){case"aborted":case"abort":return!0;default:return"AbortError"===t.name}},rr=(t,e)=>async function(t,r){e.unsubscribe(t,r)};class nr{constructor(){this._subs=new Map}subscribe(t,e,r){const n=this._subs.get(t)||[];if(n.find((t=>t.handler===e)))throw new Error(`Already subscribed to ${t} with this handler`);const i=new AbortController;return this._subs.set(t,[{handler:e,controller:i}].concat(n)),r&&r.addEventListener("abort",(()=>this.unsubscribe(t,e))),i.signal}unsubscribe(t,e){const r=this._subs.get(t)||[];let n;e?(this._subs.set(t,r.filter((t=>t.handler!==e))),n=r.filter((t=>t.handler===e))):(this._subs.set(t,[]),n=r),(this._subs.get(t)||[]).length||this._subs.delete(t),n.forEach((t=>t.controller.abort()))}}function ir(t){const e=new nr;return{ls:Ze(t),peers:Qe(t),publish:Xe(t),subscribe:tr(t,e),unsubscribe:rr(t,e)}}const sr=N((t=>async function*(e={}){const r=await t.post("refs/local",{signal:e.signal,transform:Bt,searchParams:D(e),headers:e.headers});yield*r.ndjson()})),or=N(((t,e)=>Object.assign((async function*(e,r={}){const n=Array.isArray(e)?e:[e],i=await t.post("refs",{signal:r.signal,searchParams:D({arg:n.map((t=>`${t instanceof Uint8Array?d.k0.decode(t):t}`)),...r}),headers:r.headers,transform:Bt});yield*i.ndjson()}),{local:sr(e)}))),ar=N((t=>async function*(e={}){const r=await t.post("repo/gc",{signal:e.signal,searchParams:D(e),headers:e.headers,transform:t=>({err:t.Error?new Error(t.Error):null,cid:(t.Key||{})["/"]?d.k0.parse(t.Key["/"]):null})});yield*r.ndjson()})),cr=N((t=>async function(e={}){const r=await t.post("repo/stat",{signal:e.signal,searchParams:D(e),headers:e.headers}),n=await r.json();return{numObjects:BigInt(n.NumObjects),repoSize:BigInt(n.RepoSize),repoPath:n.RepoPath,version:n.Version,storageMax:BigInt(n.StorageMax)}})),ur=N((t=>async function(e={}){return(await(await t.post("repo/version",{signal:e.signal,searchParams:D(e),headers:e.headers})).json()).Version}));function lr(t){return{gc:ar(t),stat:cr(t),version:ur(t)}}const hr=N((t=>async function*(e={}){const r=await t.post("stats/bw",{signal:e.signal,searchParams:D(e),headers:e.headers,transform:t=>({totalIn:BigInt(t.TotalIn),totalOut:BigInt(t.TotalOut),rateIn:parseFloat(t.RateIn),rateOut:parseFloat(t.RateOut)})});yield*r.ndjson()}));function dr(t){return{bitswap:M(t),repo:cr(t),bw:hr(t)}}const fr=N((t=>async function(e={}){const r=await t.post("swarm/addrs",{signal:e.signal,searchParams:D(e),headers:e.headers}),{Addrs:n}=await r.json();return Object.keys(n).map((t=>({id:(0,U.jE)(t),addrs:(n[t]||[]).map((t=>(0,f.HM)(t)))})))})),pr=N((t=>async function(e,r={}){const n=await t.post("swarm/connect",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers}),{Strings:i}=await n.json();return i||[]})),gr=N((t=>async function(e,r={}){const n=await t.post("swarm/disconnect",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers}),{Strings:i}=await n.json();return i||[]})),yr=N((t=>async function(e={}){const r=await t.post("swarm/addrs/local",{signal:e.signal,searchParams:D(e),headers:e.headers}),{Strings:n}=await r.json();return(n||[]).map((t=>(0,f.HM)(t)))})),mr=N((t=>async function(e={}){const r=await t.post("swarm/peers",{signal:e.signal,searchParams:D(e),headers:e.headers}),{Peers:n}=await r.json();return(n||[]).map((t=>({addr:(0,f.HM)(t.Addr),peer:(0,U.jE)(t.Peer),muxer:t.Muxer,latency:t.Latency,streams:t.Streams,direction:null==t.Direction?void 0:0===t.Direction?"inbound":"outbound"})))}));function wr(t){return{addrs:fr(t),connect:pr(t),disconnect:gr(t),localAddrs:yr(t),peers:mr(t)}}const br=N((t=>async function*(e,r={}){const n=new AbortController,i=z(n.signal,r.signal),{headers:s,body:o,total:a,parts:c}=await(0,j.x)(e,n,r.headers),[u,l]="function"==typeof r.progress?Er(a,c,r.progress):[void 0,void 0],h=await t.post("add",{searchParams:D({"stream-channels":!0,...r,progress:Boolean(u)}),onUploadProgress:l,signal:i,headers:s,body:o});for await(let t of h.ndjson())t=Bt(t),void 0!==t.hash?yield _r(t):u&&u(t.bytes||0,t.name)})),Er=(t,e,r)=>e?[void 0,vr(t,e,r)]:[r,void 0],vr=(t,e,r)=>{let n=0;const i=e.length;return({loaded:s,total:o})=>{const a=Math.floor(s/o*t);for(;n<i;){const{start:t,end:i,name:s}=e[n];if(a<i){r(a-t,s);break}r(i-t,s),n+=1}}};function _r({name:t,hash:e,size:r,mode:n,mtime:i,mtimeNsecs:s}){const o={path:t,cid:d.k0.parse(e),size:parseInt(r)};return null!=n&&(o.mode=parseInt(n,8)),null!=i&&(o.mtime={secs:i,nsecs:s||0}),o}var Sr=r(56740);function Ar(t){const e=br(t);return N((()=>async function(t,r={}){const n=(0,Sr.f)(t),i=e(n,r);return await(0,lt.Z)(i)}))(t)}const Rr=N((t=>async function*(e,r={}){const n=await t.post("cat",{signal:r.signal,searchParams:D({arg:e.toString(),...r}),headers:r.headers});yield*n.iterator()})),Tr=N((t=>async(e={})=>(await t.post("commands",{signal:e.signal,searchParams:D(e),headers:e.headers})).json())),Ir=N((t=>async(e,r={})=>{const n=await t.post("dns",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers});return(await n.json()).Path})),Cr=N((t=>()=>{const e=new URL(t.opts.base||"");return{host:e.hostname,port:e.port,protocol:e.protocol,pathname:e.pathname,"api-path":e.pathname}})),kr=N((t=>async function*(e,r={}){const n={arg:`${e instanceof Uint8Array?d.k0.decode(e):e}`,...r};n.compressionLevel&&(n["compression-level"]=n.compressionLevel,delete n.compressionLevel);const i=await t.post("get",{signal:r.signal,searchParams:D(n),headers:r.headers});yield*i.iterator()})),Nr=N((t=>async function(e={}){const r=await t.post("id",{signal:e.signal,searchParams:D({arg:e.peerId?e.peerId.toString():void 0,...e}),headers:e.headers}),n={...Bt(await r.json())};return n.id=(0,U.jE)(n.id),n.addresses&&(n.addresses=n.addresses.map((t=>(0,f.HM)(t)))),n})),Br=t=>{const e=Nr(t);return async function(t={}){const r=await e(t);return Boolean(r&&r.addresses&&r.addresses.length)}},Pr=N(((t,e)=>async function*(r,n={}){const i=`${r instanceof Uint8Array?d.k0.decode(r):r}`;async function s(t){let r=t.Hash;if(r.includes("/")){const t=r.startsWith("/ipfs/")?r:`/ipfs/${r}`;r=(await jt(e)(t)).cid}else r=d.k0.parse(r);const n={name:t.Name,path:i+(t.Name?`/${t.Name}`:""),size:t.Size,cid:r,type:Lr(t)};return t.Mode&&(n.mode=parseInt(t.Mode,8)),void 0!==t.Mtime&&null!==t.Mtime&&(n.mtime={secs:t.Mtime},void 0!==t.MtimeNsecs&&null!==t.MtimeNsecs&&(n.mtime.nsecs=t.MtimeNsecs)),n}const o=await t.post("ls",{signal:n.signal,searchParams:D({arg:i,...n}),headers:n.headers});for await(let t of o.ndjson()){if(t=t.Objects,!t)throw new Error("expected .Objects in results");if(t=t[0],!t)throw new Error("expected one array in results.Objects");const e=t.Links;if(!Array.isArray(e))throw new Error("expected one array in results.Objects[0].Links");if(!e.length)return void(yield s(t));yield*e.map(s)}}));function Lr(t){switch(t.Type){case 1:case 5:return"dir";default:return"file"}}const Dr=N((t=>async function(e={}){const r=await t.post("dns",{signal:e.signal,searchParams:D(e),headers:e.headers});return Bt(await r.json())})),Or=N((t=>async function*(e,r={}){const n=await t.post("ping",{signal:r.signal,searchParams:D({arg:`${e}`,...r}),headers:r.headers,transform:Bt});yield*n.ndjson()})),xr=N((t=>async function(e,r={}){const n=await t.post("resolve",{signal:r.signal,searchParams:D({arg:e,...r}),headers:r.headers}),{Path:i}=await n.json();return i})),Ur=N((t=>async(t={})=>{throw P(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),Mr=N((t=>async function(e={}){const r=await t.post("shutdown",{signal:e.signal,searchParams:D(e),headers:e.headers});await r.text()})),Vr=N((t=>async function(e={}){const r=await t.post("version",{signal:e.signal,searchParams:D(e),headers:e.headers});return{...Bt(await r.json()),"ipfs-http-client":"1.0.0"}}));r(85104),r(46953);function jr(t={}){const e={name:l.identity.name,code:l.identity.code,encode:t=>t,decode:t=>t},r=Object.values(h.gh);(t.ipld&&t.ipld.bases?t.ipld.bases:[]).forEach((t=>r.push(t)));const d=new n.x({bases:r,loadBase:t.ipld&&t.ipld.loadBase}),f=Object.values(h.QB);[o,a,c,u,e].concat(t.ipld&&t.ipld.codecs||[]).forEach((t=>f.push(t)));const p=new i.w({codecs:f,loadCodec:t.ipld&&t.ipld.loadCodec}),g=Object.values(h.kq);(t.ipld&&t.ipld.hashers?t.ipld.hashers:[]).forEach((t=>g.push(t)));const y=new s.d({hashers:g,loadHasher:t.ipld&&t.ipld.loadHasher});var m;return{add:Ar(t),addAll:br(t),bitswap:(m=t,{wantlist:O(m),wantlistForPeer:x(m),stat:M(m)}),block:G(t),bootstrap:Q(t),cat:Rr(t),commands:Tr(t),config:ot(t),dag:gt(p,t),dht:At(t),diag:Ct(t),dns:Ir(t),files:zt(t),get:kr(t),getEndpointConfig:Cr(t),id:Nr(t),isOnline:Br(t),key:Zt(t),log:te(t),ls:Pr(t),mount:Dr(t),name:ae(t),object:be(p,t),pin:$e(t),ping:Or(t),pubsub:ir(t),refs:or(t),repo:lr(t),resolve:xr(t),start:Ur(t),stats:dr(t),stop:Mr(t),swarm:wr(t),version:Vr(t),bases:d,codecs:p,hashers:y}}},43028:function(t,e,r){"use strict";r.d(e,{N:function(){return an}});var n=r(69860),i=r(46857);function s(t){return null!=t&&"function"==typeof t.start&&"function"==typeof t.stop}var o,a,c=r(91026),u=r(85404),l=r(32114);!function(t){t.NOT_STARTED_YET="The libp2p node is not started yet",t.DHT_DISABLED="DHT is not available",t.PUBSUB_DISABLED="PubSub is not available",t.CONN_ENCRYPTION_REQUIRED="At least one connection encryption module is required",t.ERR_TRANSPORTS_REQUIRED="At least one transport module is required",t.ERR_PROTECTOR_REQUIRED="Private network is enforced, but no protector was provided",t.NOT_FOUND="Not found"}(o||(o={})),function(t){t.DHT_DISABLED="ERR_DHT_DISABLED",t.ERR_PUBSUB_DISABLED="ERR_PUBSUB_DISABLED",t.PUBSUB_NOT_STARTED="ERR_PUBSUB_NOT_STARTED",t.DHT_NOT_STARTED="ERR_DHT_NOT_STARTED",t.CONN_ENCRYPTION_REQUIRED="ERR_CONN_ENCRYPTION_REQUIRED",t.ERR_TRANSPORTS_REQUIRED="ERR_TRANSPORTS_REQUIRED",t.ERR_PROTECTOR_REQUIRED="ERR_PROTECTOR_REQUIRED",t.ERR_PEER_DIAL_INTERCEPTED="ERR_PEER_DIAL_INTERCEPTED",t.ERR_CONNECTION_INTERCEPTED="ERR_CONNECTION_INTERCEPTED",t.ERR_INVALID_PROTOCOLS_FOR_STREAM="ERR_INVALID_PROTOCOLS_FOR_STREAM",t.ERR_CONNECTION_ENDED="ERR_CONNECTION_ENDED",t.ERR_CONNECTION_FAILED="ERR_CONNECTION_FAILED",t.ERR_NODE_NOT_STARTED="ERR_NODE_NOT_STARTED",t.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",t.ERR_TOO_MANY_ADDRESSES="ERR_TOO_MANY_ADDRESSES",t.ERR_NO_VALID_ADDRESSES="ERR_NO_VALID_ADDRESSES",t.ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",t.ERR_DIALED_SELF="ERR_DIALED_SELF",t.ERR_DISCOVERED_SELF="ERR_DISCOVERED_SELF",t.ERR_DUPLICATE_TRANSPORT="ERR_DUPLICATE_TRANSPORT",t.ERR_ENCRYPTION_FAILED="ERR_ENCRYPTION_FAILED",t.ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED",t.ERR_INVALID_KEY="ERR_INVALID_KEY",t.ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE",t.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",t.ERR_INVALID_PEER="ERR_INVALID_PEER",t.ERR_MUXER_UNAVAILABLE="ERR_MUXER_UNAVAILABLE",t.ERR_NOT_FOUND="ERR_NOT_FOUND",t.ERR_TIMEOUT="ERR_TIMEOUT",t.ERR_TRANSPORT_UNAVAILABLE="ERR_TRANSPORT_UNAVAILABLE",t.ERR_TRANSPORT_DIAL_FAILED="ERR_TRANSPORT_DIAL_FAILED",t.ERR_UNSUPPORTED_PROTOCOL="ERR_UNSUPPORTED_PROTOCOL",t.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",t.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",t.ERR_SIGNATURE_NOT_VALID="ERR_SIGNATURE_NOT_VALID",t.ERR_FIND_SELF="ERR_FIND_SELF",t.ERR_NO_ROUTERS_AVAILABLE="ERR_NO_ROUTERS_AVAILABLE",t.ERR_CONNECTION_NOT_MULTIPLEXED="ERR_CONNECTION_NOT_MULTIPLEXED",t.ERR_NO_DIAL_TOKENS="ERR_NO_DIAL_TOKENS",t.ERR_KEYCHAIN_REQUIRED="ERR_KEYCHAIN_REQUIRED",t.ERR_INVALID_CMS="ERR_INVALID_CMS",t.ERR_MISSING_KEYS="ERR_MISSING_KEYS",t.ERR_NO_KEY="ERR_NO_KEY",t.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",t.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",t.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",t.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",t.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",t.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",t.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",t.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",t.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",t.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",t.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",t.ERR_MISSING_PUBLIC_KEY="ERR_MISSING_PUBLIC_KEY",t.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",t.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",t.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH",t.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",t.ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK",t.ERR_INVALID_RECORD="ERR_INVALID_RECORD",t.ERR_ALREADY_SUCCEEDED="ERR_ALREADY_SUCCEEDED",t.ERR_NO_HANDLER_FOR_PROTOCOL="ERR_NO_HANDLER_FOR_PROTOCOL",t.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS",t.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",t.ERR_CONNECTION_DENIED="ERR_CONNECTION_DENIED"}(a||(a={}));var h=r(44752),d=r(21007);async function*f(t,e){yield*(0,d.Z)(t,(async t=>(await e.addressBook.add(t.id,t.multiaddrs),t)))}function p(t){const e=new Set;return(0,h.Z)(t,(t=>!e.has(t.id.toString())&&(e.add(t.id.toString()),!0)))}async function*g(t,e=1){let r=0;for await(const e of t)r++,yield e;if(r<e)throw l(new Error("not found"),"NOT_FOUND")}var y=r(10715),m=r(52019),w=r(88211),b=r(91486),E=r(93361),v=r(27695),_=r(17187);const S=(0,n.kg)("libp2p:peer-routing");class A{constructor(t,e){this.components=t,this.routers=e.routers??[],this.refreshManagerInit=e.refreshManager??{},this.started=!1,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}isStarted(){return this.started}async start(){this.started||0===this.routers.length||null!=this.timeoutId||!1===this.refreshManagerInit.enabled||(this.timeoutId=(0,v.setDelayedInterval)(this._findClosestPeersTask,this.refreshManagerInit.interval,this.refreshManagerInit.bootDelay),this.started=!0)}async _findClosestPeersTask(){if(null==this.abortController)try{this.abortController=new y.TimeoutController(this.refreshManagerInit.timeout??1e4);try{(0,_.setMaxListeners)?.(1/0,this.abortController.signal)}catch{}await(0,E.Z)(this.getClosestPeers(this.components.peerId.toBytes(),{signal:this.abortController.signal}))}catch(t){S.error(t)}finally{this.abortController?.clear(),this.abortController=void 0}}async stop(){(0,v.clearDelayedInterval)(this.timeoutId),this.abortController?.abort(),this.started=!1}async findPeer(t,e){if(0===this.routers.length)throw l(new Error("No peer routers available"),a.ERR_NO_ROUTERS_AVAILABLE);if(t.toString()===this.components.peerId.toString())throw l(new Error("Should not try to find self"),a.ERR_FIND_SELF);const r=await(0,w.zG)((0,m.Z)(...this.routers.map((r=>async function*(){try{yield await r.findPeer(t,e)}catch(t){S.error(t)}}()))),(t=>(0,h.Z)(t,Boolean)),(t=>f(t,this.components.peerStore)),(async t=>await(0,b.Z)(t)));if(null!=r)return r;throw l(new Error(o.NOT_FOUND),a.ERR_NOT_FOUND)}async*getClosestPeers(t,e){if(0===this.routers.length)throw l(new Error("No peer routers available"),a.ERR_NO_ROUTERS_AVAILABLE);yield*(0,w.zG)((0,m.Z)(...this.routers.map((r=>r.getClosestPeers(t,e)))),(t=>f(t,this.components.peerStore)),(t=>p(t)),(t=>g(t)))}}class R{constructor(t,e){this.routers=e.routers??[],this.started=!1,this.components=t}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(t,e={}){if(0===this.routers.length)throw l(new Error("No content this.routers available"),a.ERR_NO_ROUTERS_AVAILABLE);yield*(0,w.zG)((0,m.Z)(...this.routers.map((r=>r.findProviders(t,e)))),(t=>f(t,this.components.peerStore)),(t=>p(t)),(t=>g(t)))}async provide(t,e={}){if(0===this.routers.length)throw l(new Error("No content routers available"),a.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map((async r=>await r.provide(t,e))))}async put(t,e,r){if(!this.isStarted())throw l(new Error(o.NOT_STARTED_YET),a.DHT_NOT_STARTED);const n=this.components.dht;null!=n&&await(0,E.Z)(n.put(t,e,r))}async get(t,e){if(!this.isStarted())throw l(new Error(o.NOT_STARTED_YET),a.DHT_NOT_STARTED);const r=this.components.dht;if(null!=r)for await(const n of r.get(t,e))if("VALUE"===n.name)return n.value;throw l(new Error(o.NOT_FOUND),a.ERR_NOT_FOUND)}async*getMany(t,e,r){if(!this.isStarted())throw l(new Error(o.NOT_STARTED_YET),a.DHT_NOT_STARTED);if(null==e||0===e)return;let n=0;const i=this.components.dht;if(null!=i)for await(const s of i.get(t,r))if("VALUE"===s.name&&(yield{from:s.from,val:s.value},n++,n===e))break;if(0===n)throw l(new Error(o.NOT_FOUND),a.ERR_NOT_FOUND)}}var T=r(23366);const I=t=>t;class C extends i.v{constructor(t,e){super();const{listen:r=[],announce:n=[]}=e;this.components=t,this.listen=r.map((t=>t.toString())),this.announce=new Set(n.map((t=>t.toString()))),this.observed=new Set,this.announceFilter=e.announceFilter??I}getListenAddrs(){return Array.from(this.listen).map((t=>(0,c.HM)(t)))}getAnnounceAddrs(){return Array.from(this.announce).map((t=>(0,c.HM)(t)))}getObservedAddrs(){return Array.from(this.observed).map((t=>(0,c.HM)(t)))}confirmObservedAddr(t){}removeObservedAddr(t){}addObservedAddr(t){let e=(0,c.HM)(t);const r=e.getPeerId();if(null!=r){(0,T.jE)(r).equals(this.components.peerId)&&(e=e.decapsulate((0,c.HM)(`/p2p/${this.components.peerId.toString()}`)))}const n=e.toString();this.observed.has(n)||(this.observed.add(n),this.dispatchEvent(new i.A("change:addresses")))}getAddresses(){let t=this.getAnnounceAddrs().map((t=>t.toString()));0===t.length&&(t=this.components.transportManager.getAddrs().map((t=>t.toString()))),t=t.concat(this.getObservedAddrs().map((t=>t.toString())));const e=new Set(t);return this.announceFilter(Array.from(e).map((t=>(0,c.HM)(t)))).map((t=>!0===t.protos().pop()?.path||t.getPeerId()===this.components.peerId.toString()?t:t.encapsulate(`/p2p/${this.components.peerId.toString()}`)))}}var k=r(79221);const N=(0,n.kg)("libp2p:connection-manager:latency-monitor:visibility-change-emitter");class B extends i.v{constructor(){super(),this.hidden="hidden",this.visibilityChange="visibilityChange",null!=globalThis.document&&(this._initializeVisibilityVarNames(),this._addVisibilityChangeListener())}_initializeVisibilityVarNames(){let t="hidden",e="visibilitychange";void 0!==globalThis.document.hidden?(t="hidden",e="visibilitychange"):void 0!==globalThis.document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):void 0!==globalThis.document.msHidden?(t="msHidden",e="msvisibilitychange"):void 0!==globalThis.document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),this.hidden=t,this.visibilityChange=e}_addVisibilityChangeListener(){void 0===globalThis.document.addEventListener||void 0===document[this.hidden]?N("Checking page visibility requires a browser that supports the Page Visibility API."):globalThis.document.addEventListener(this.visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(void 0!==this.hidden&&void 0!==document[this.hidden])return null==document[this.hidden]}_handleVisibilityChange(){const t=!1===globalThis.document[this.hidden];N(t?"Page Visible":"Page Hidden"),this.dispatchEvent(new i.A("visibilityChange",{detail:t}))}}const P=(0,n.kg)("libp2p:connection-manager:latency-monitor");class L extends i.v{constructor(t={}){super();const{latencyCheckIntervalMs:e,dataEmitIntervalMs:r,asyncTestFn:n,latencyRandomPercentage:i}=t;this.latencyCheckIntervalMs=e??500,this.latencyRandomPercentage=i??10,this.latencyCheckMultiply=this.latencyRandomPercentage/100*2*this.latencyCheckIntervalMs,this.latencyCheckSubtract=this.latencyCheckMultiply/2,this.dataEmitIntervalMs=null===r||0===r?void 0:r??5e3,P("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",this.latencyCheckIntervalMs,this.dataEmitIntervalMs),null!=this.dataEmitIntervalMs?P("Expecting ~%s events per summary",this.latencyCheckIntervalMs/this.dataEmitIntervalMs):P("Not emitting summaries"),this.asyncTestFn=n,null!=globalThis.process?.hrtime?(P("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=t=>{const e=this.now(t);return 1e3*e[0]+e[1]/1e6}):"undefined"!=typeof window&&null!=window.performance?.now?(P("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=t=>Math.round(this.now()-t)):(P("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=t=>this.now()-t),this.latencyData=this.initLatencyData()}start(){void 0!==globalThis.window&&(this.visibilityChangeEmitter=new B,this.visibilityChangeEmitter.addEventListener("visibilityChange",(t=>{const{detail:e}=t;e?this._startTimers():(this._emitSummary(),this._stopTimers())}))),!0===this.visibilityChangeEmitter?.isVisible()&&this._startTimers()}stop(){this._stopTimers()}_startTimers(){null==this.checkLatencyID&&(this.checkLatency(),null!=this.dataEmitIntervalMs&&(this.emitIntervalID=setInterval((()=>this._emitSummary()),this.dataEmitIntervalMs),"function"==typeof this.emitIntervalID.unref&&this.emitIntervalID.unref()))}_stopTimers(){null!=this.checkLatencyID&&(clearTimeout(this.checkLatencyID),this.checkLatencyID=void 0),null!=this.emitIntervalID&&(clearInterval(this.emitIntervalID),this.emitIntervalID=void 0)}_emitSummary(){const t=this.getSummary();t.events>0&&this.dispatchEvent(new i.A("data",{detail:t}))}getSummary(){const t={events:this.latencyData.events,minMs:this.latencyData.minMs,maxMs:this.latencyData.maxMs,avgMs:this.latencyData.events>0?this.latencyData.totalMs/this.latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this.latencyData.startTime)};return this.latencyData=this.initLatencyData(),P.trace("Summary: %O",t),t}checkLatency(){const t=Math.random()*this.latencyCheckMultiply-this.latencyCheckSubtract,e={deltaOffset:Math.ceil(this.latencyCheckIntervalMs+t),startTime:this.now()},r=()=>{if(null==this.checkLatencyID)return;const t=this.getDeltaMS(e.startTime)-e.deltaOffset;this.checkLatency(),this.latencyData.events++,this.latencyData.minMs=Math.min(this.latencyData.minMs,t),this.latencyData.maxMs=Math.max(this.latencyData.maxMs,t),this.latencyData.totalMs+=t,P.trace("MS: %s Data: %O",t,this.latencyData)};P.trace("localData: %O",e),this.checkLatencyID=setTimeout((()=>{null!=this.asyncTestFn?(e.deltaOffset=0,e.startTime=this.now(),this.asyncTestFn(r)):(e.deltaOffset-=1,r())}),e.deltaOffset),"function"==typeof this.checkLatencyID.unref&&this.checkLatencyID.unref()}initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}var D=r(682);const O="OPEN",x="CLOSING",U="CLOSED";var M=r(4542);var V=r(8558);function j(t){if((0,D.I)(t))return{peerId:t};if((0,c.h2)(t)){const e=t.getPeerId();return{multiaddr:t,peerId:null==e?void 0:(0,T.jE)(e)}}throw l(new Error(`${t} is not a PeerId or a Multiaddr`),a.ERR_INVALID_MULTIADDR)}const F=(0,n.kg)("libp2p:connection-manager"),z={maxConnections:1/0,minConnections:0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,inboundConnectionThreshold:5,maxIncomingPendingConnections:10};class K extends i.v{constructor(t,e){if(super(),this.opts=k.Z.call({ignoreUndefined:!0},z,e),this.opts.maxConnections<this.opts.minConnections)throw l(new Error("Connection Manager maxConnections must be greater than minConnections"),a.ERR_INVALID_PARAMETERS);F("options: %o",this.opts),this.components=t,this.connections=new Map,this.started=!1,null!=e.maxEventLoopDelay&&e.maxEventLoopDelay>0&&e.maxEventLoopDelay!==1/0&&(this.latencyMonitor=new L({latencyCheckIntervalMs:e.pollInterval,dataEmitIntervalMs:e.pollInterval}));try{(0,_.setMaxListeners)?.(1/0,this)}catch{}this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.startupReconnectTimeout=e.startupReconnectTimeout??6e4,this.dialTimeout=e.dialTimeout??3e4,this.allow=(e.allow??[]).map((t=>(0,c.HM)(t))),this.deny=(e.deny??[]).map((t=>(0,c.HM)(t))),this.inboundConnectionRateLimiter=new V.RateLimiterMemory({points:this.opts.inboundConnectionThreshold,duration:1}),this.incomingPendingConnections=0}isStarted(){return this.started}async start(){this.components.metrics?.registerMetricGroup("libp2p_connection_manager_connections",{calculate:()=>{const t={inbound:0,outbound:0};for(const e of this.connections.values())for(const r of e)"inbound"===r.stat.direction?t.inbound++:t.outbound++;return t}}),this.components.metrics?.registerMetricGroup("libp2p_protocol_streams_total",{label:"protocol",calculate:()=>{const t={};for(const e of this.connections.values())for(const r of e)for(const e of r.streams){const r=`${e.stat.direction} ${e.stat.protocol??"unnegotiated"}`;t[r]=(t[r]??0)+1}return t}}),this.components.metrics?.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile",{label:"protocol",calculate:()=>{const t={};for(const e of this.connections.values())for(const r of e){const e={};for(const t of r.streams){const r=`${t.stat.direction} ${t.stat.protocol??"unnegotiated"}`;e[r]=(e[r]??0)+1}for(const[r,n]of Object.entries(e))t[r]=t[r]??[],t[r].push(n)}const e={};for(let[r,n]of Object.entries(t)){n=n.sort(((t,e)=>t-e));const t=Math.floor(.9*n.length);e[r]=n[t]}return e}}),this.latencyMonitor?.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this.latencyMonitor?.addEventListener("data",this._onLatencyMeasure),this.started=!0,F("started")}async afterStart(){this.components.upgrader.addEventListener("connection",this.onConnect),this.components.upgrader.addEventListener("connectionEnd",this.onDisconnect),Promise.resolve().then((async()=>{const t=[];for(const e of await this.components.peerStore.all()){(await this.components.peerStore.getTags(e.id)).filter((t=>"keep-alive"===t.name)).length>0&&t.push(e.id)}this.connectOnStartupController?.clear(),this.connectOnStartupController=new y.TimeoutController(this.startupReconnectTimeout);try{(0,_.setMaxListeners)?.(1/0,this.connectOnStartupController.signal)}catch{}await Promise.all(t.map((async t=>{await this.openConnection(t,{signal:this.connectOnStartupController?.signal}).catch((t=>{F.error(t)}))})))})).catch((t=>{F.error(t)})).finally((()=>{this.connectOnStartupController?.clear()}))}async beforeStop(){this.connectOnStartupController?.abort(),this.components.upgrader.removeEventListener("connection",this.onConnect),this.components.upgrader.removeEventListener("connectionEnd",this.onDisconnect)}async stop(){this.latencyMonitor?.removeEventListener("data",this._onLatencyMeasure),this.latencyMonitor?.stop(),this.started=!1,await this._close(),F("stopped")}async _close(){const t=[];for(const e of this.connections.values())for(const r of e)t.push((async()=>{try{await r.close()}catch(t){F.error(t)}})());F("closing %d connections",t.length),await Promise.all(t),this.connections.clear()}onConnect(t){this._onConnect(t).catch((t=>{F.error(t)}))}async _onConnect(t){const{detail:e}=t;if(!this.started)return void await e.close();const r=e.remotePeer,n=r.toString(),s=this.connections.get(n);null!=s?s.push(e):this.connections.set(n,[e]),null!=r.publicKey&&await this.components.peerStore.keyBook.set(r,r.publicKey);const o=this.getConnections().length,a=o-this.opts.maxConnections;await this._checkMaxLimit("maxConnections",o,a),this.dispatchEvent(new i.A("peer:connect",{detail:e}))}onDisconnect(t){const{detail:e}=t;if(!this.started)return;const r=e.remotePeer.toString();let n=this.connections.get(r);null!=n&&n.length>1?(n=n.filter((t=>t.id!==e.id)),this.connections.set(r,n)):null!=n&&(this.connections.delete(r),this.dispatchEvent(new i.A("peer:disconnect",{detail:e})))}getConnections(t){if(null!=t)return this.connections.get(t.toString())??[];let e=[];for(const t of this.connections.values())e=e.concat(t);return e}async openConnection(t,e={}){const{peerId:r,multiaddr:n}=j(t);if(null==r&&null==n)throw l(new TypeError("Can only open connections to PeerIds or Multiaddrs"),a.ERR_INVALID_PARAMETERS);if(null!=r){F("dial to",r);const t=this.getConnections(r);if(t.length>0)return F("had an existing connection to %p",r),t[0]}let i;if(null==e?.signal){i=new y.TimeoutController(this.dialTimeout),e.signal=i.signal;try{(0,_.setMaxListeners)?.(1/0,i.signal)}catch{}}try{const r=await this.components.dialer.dial(t,e);let n=this.connections.get(r.remotePeer.toString());null==n&&(n=[],this.connections.set(r.remotePeer.toString(),n));let i=!1;for(const t of n)t.id===r.id&&(i=!0);return i||n.push(r),r}finally{null!=i&&i.clear()}}async closeConnections(t){const e=this.connections.get(t.toString())??[];await Promise.all(e.map((async t=>await t.close())))}getAll(t){if(!(0,D.I)(t))throw l(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);const e=t.toString(),r=this.connections.get(e);return null!=r?r.filter((t=>t.stat.status===O)):[]}_onLatencyMeasure(t){const{detail:e}=t;this._checkMaxLimit("maxEventLoopDelay",e.avgMs,1).catch((t=>{F.error(t)}))}async _checkMaxLimit(t,e,r=1){const n=this.opts[t];null!=n?(F.trace("checking limit of %s. current value: %d of %d",t,e,n),e>n&&(F("%s: limit exceeded: %p, %d/%d, pruning %d connection(s)",this.components.peerId,t,e,n,r),await this._pruneConnections(r))):F.trace("limit %s was not set so it cannot be applied",t)}async _pruneConnections(t){const e=this.getConnections(),r=new M.ji;for(const t of e){const e=t.remotePeer;if(r.has(e))continue;const n=await this.components.peerStore.getTags(e);r.set(e,n.reduce(((t,e)=>t+e.value),0))}const n=e.sort(((t,e)=>{const n=r.get(t.remotePeer)??0,i=r.get(e.remotePeer)??0;if(n>i)return 1;if(n<i)return-1;const s=t.stat.timeline.open,o=e.stat.timeline.open;return s<o?1:s>o?-1:0})),s=[];for(const e of n)if(F("too many connections open - closing a connection to %p",e.remotePeer),s.push(e),s.length===t)break;await Promise.all(s.map((async t=>{try{await t.close()}catch(t){F.error(t)}this.onDisconnect(new i.A("connectionEnd",{detail:t}))})))}async acceptIncomingConnection(t){if(this.deny.some((e=>t.remoteAddr.toString().startsWith(e.toString()))))return F("connection from %s refused - connection remote address was in deny list",t.remoteAddr),!1;if(this.allow.some((e=>t.remoteAddr.toString().startsWith(e.toString()))))return this.incomingPendingConnections++,!0;if(this.incomingPendingConnections===this.opts.maxIncomingPendingConnections)return F("connection from %s refused - incomingPendingConnections exceeded by peer %s",t.remoteAddr),!1;if(t.remoteAddr.isThinWaistAddress()){const e=t.remoteAddr.nodeAddress().address;try{await this.inboundConnectionRateLimiter.consume(e,1)}catch{return F("connection from %s refused - inboundConnectionThreshold exceeded by host %s",e,t.remoteAddr),!1}}return this.getConnections().length<this.opts.maxConnections?(this.incomingPendingConnections++,!0):(F("connection from %s refused - maxConnections exceeded",t.remoteAddr),!1)}afterUpgradeInbound(){this.incomingPendingConnections--}}var $=r(82916);async function q(t){const e=[];for await(const r of t)e.push(r);return e}var H=r(34751);const G=(0,n.kg)("libp2p:connection-manager:auto-dialler"),W={enabled:!0,minConnections:0,autoDialInterval:1e4};class Y{constructor(t,e){this.components=t,this.options=k.Z.call({ignoreUndefined:!0},W,e),this.running=!1,this._autoDial=this._autoDial.bind(this),G("options: %j",this.options)}isStarted(){return this.running}async start(){this.options.enabled?(this.running=!0,this._autoDial().catch((t=>{G.error("could start autodial",t)})),G("started")):G("not enabled")}async stop(){this.options.enabled?(this.running=!1,null!=this.autoDialTimeout&&this.autoDialTimeout.clear(),G("stopped")):G("not enabled")}async _autoDial(){null!=this.autoDialTimeout&&this.autoDialTimeout.clear();const t=this.options.minConnections;if(this.components.connectionManager.getConnections().length>=t)return void(this.autoDialTimeout=$(this._autoDial,this.options.autoDialInterval));const e=await this.components.peerStore.all(),r=await(0,w.zG)(e.sort((()=>Math.random()>.5?1:-1)),(t=>(0,h.Z)(t,(t=>!t.id.equals(this.components.peerId)))),(t=>(0,H.Z)(t,((t,e)=>e.protocols.length>t.protocols.length||null!=e.id.publicKey&&null==t.id.publicKey?1:-1))),(async t=>await q(t)));for(let e=0;this.running&&e<r.length&&this.components.connectionManager.getConnections().length<t;e++){if(!this.running)return;const t=r[e];if(0===this.components.connectionManager.getConnections(t.id).length){G("connecting to a peerStore stored peer %p",t.id);try{await this.components.connectionManager.openConnection(t.id)}catch(t){G.error("could not connect to peerStore stored peer",t)}}}this.running&&(this.autoDialTimeout=$(this._autoDial,this.options.autoDialInterval))}}var Z=r(61093),Q=r(73329),X=r(91561),J=r(69437),tt=r(57339);r(18559)._configure(),Q._configure(X),J._configure(tt);const et=["uint64","int64","sint64","fixed64","sfixed64"];function rt(t){return function(t){for(const e of et){if(null==t[e])continue;const r=t[e];t[e]=function(){return BigInt(r.call(this).toString())}}return t}(new Q(t))}function nt(){return function(t){for(const e of et){if(null==t[e])continue;const r=t[e];t[e]=function(t){return r.call(this,t.toString())}}return t}(J.create())}function it(t,e){const r=rt(t instanceof Uint8Array?t:t.subarray());return e.decode(r)}function st(t,e){const r=nt();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var ot,at;function ct(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function ut(t){function e(e){if(null==t[e.toString()])throw new Error("Invalid enum value");return t[e]}return ct("enum",ot.VARINT,(function(t,r){const n=e(t);r.int32(n)}),(function(t){return e(t.int32())}))}function lt(t,e){return ct("message",ot.LENGTH_DELIMITED,t,e)}!function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"}(ot||(ot={})),function(t){let e,r,n,i,s,o;!function(t){t.SUCCESS="SUCCESS",t.HOP_SRC_ADDR_TOO_LONG="HOP_SRC_ADDR_TOO_LONG",t.HOP_DST_ADDR_TOO_LONG="HOP_DST_ADDR_TOO_LONG",t.HOP_SRC_MULTIADDR_INVALID="HOP_SRC_MULTIADDR_INVALID",t.HOP_DST_MULTIADDR_INVALID="HOP_DST_MULTIADDR_INVALID",t.HOP_NO_CONN_TO_DST="HOP_NO_CONN_TO_DST",t.HOP_CANT_DIAL_DST="HOP_CANT_DIAL_DST",t.HOP_CANT_OPEN_DST_STREAM="HOP_CANT_OPEN_DST_STREAM",t.HOP_CANT_SPEAK_RELAY="HOP_CANT_SPEAK_RELAY",t.HOP_CANT_RELAY_TO_SELF="HOP_CANT_RELAY_TO_SELF",t.STOP_SRC_ADDR_TOO_LONG="STOP_SRC_ADDR_TOO_LONG",t.STOP_DST_ADDR_TOO_LONG="STOP_DST_ADDR_TOO_LONG",t.STOP_SRC_MULTIADDR_INVALID="STOP_SRC_MULTIADDR_INVALID",t.STOP_DST_MULTIADDR_INVALID="STOP_DST_MULTIADDR_INVALID",t.STOP_RELAY_REFUSED="STOP_RELAY_REFUSED",t.MALFORMED_MESSAGE="MALFORMED_MESSAGE"}(e=t.Status||(t.Status={})),function(t){t[t.SUCCESS=100]="SUCCESS",t[t.HOP_SRC_ADDR_TOO_LONG=220]="HOP_SRC_ADDR_TOO_LONG",t[t.HOP_DST_ADDR_TOO_LONG=221]="HOP_DST_ADDR_TOO_LONG",t[t.HOP_SRC_MULTIADDR_INVALID=250]="HOP_SRC_MULTIADDR_INVALID",t[t.HOP_DST_MULTIADDR_INVALID=251]="HOP_DST_MULTIADDR_INVALID",t[t.HOP_NO_CONN_TO_DST=260]="HOP_NO_CONN_TO_DST",t[t.HOP_CANT_DIAL_DST=261]="HOP_CANT_DIAL_DST",t[t.HOP_CANT_OPEN_DST_STREAM=262]="HOP_CANT_OPEN_DST_STREAM",t[t.HOP_CANT_SPEAK_RELAY=270]="HOP_CANT_SPEAK_RELAY",t[t.HOP_CANT_RELAY_TO_SELF=280]="HOP_CANT_RELAY_TO_SELF",t[t.STOP_SRC_ADDR_TOO_LONG=320]="STOP_SRC_ADDR_TOO_LONG",t[t.STOP_DST_ADDR_TOO_LONG=321]="STOP_DST_ADDR_TOO_LONG",t[t.STOP_SRC_MULTIADDR_INVALID=350]="STOP_SRC_MULTIADDR_INVALID",t[t.STOP_DST_MULTIADDR_INVALID=351]="STOP_DST_MULTIADDR_INVALID",t[t.STOP_RELAY_REFUSED=390]="STOP_RELAY_REFUSED",t[t.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE"}(r||(r={})),function(t){t.codec=()=>ut(r)}(e=t.Status||(t.Status={})),function(t){t.HOP="HOP",t.STOP="STOP",t.STATUS="STATUS",t.CAN_HOP="CAN_HOP"}(n=t.Type||(t.Type={})),function(t){t[t.HOP=1]="HOP",t[t.STOP=2]="STOP",t[t.STATUS=3]="STATUS",t[t.CAN_HOP=4]="CAN_HOP"}(i||(i={})),function(t){t.codec=()=>ut(i)}(n=t.Type||(t.Type={})),function(t){let e;t.codec=()=>(null==e&&(e=lt(((t,e,r={})=>{if(!1!==r.lengthDelimited&&e.fork(),(!0===r.writeDefaults||null!=t.id&&t.id.byteLength>0)&&(e.uint32(10),e.bytes(t.id)),null!=t.addrs)for(const r of t.addrs)e.uint32(18),e.bytes(r);!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={id:new Uint8Array(0),addrs:[]},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.id=t.bytes();break;case 2:r.addrs.push(t.bytes());break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>st(e,t.codec()),t.decode=e=>it(e,t.codec())}(s=t.Peer||(t.Peer={})),t.codec=()=>(null==o&&(o=lt(((e,r,n={})=>{!1!==n.lengthDelimited&&r.fork(),null!=e.type&&(r.uint32(8),t.Type.codec().encode(e.type,r)),null!=e.srcPeer&&(r.uint32(18),t.Peer.codec().encode(e.srcPeer,r,{writeDefaults:!1})),null!=e.dstPeer&&(r.uint32(26),t.Peer.codec().encode(e.dstPeer,r,{writeDefaults:!1})),null!=e.code&&(r.uint32(32),t.Status.codec().encode(e.code,r)),!1!==n.lengthDelimited&&r.ldelim()}),((e,r)=>{const n={},i=null==r?e.len:e.pos+r;for(;e.pos<i;){const r=e.uint32();switch(r>>>3){case 1:n.type=t.Type.codec().decode(e);break;case 2:n.srcPeer=t.Peer.codec().decode(e,e.uint32());break;case 3:n.dstPeer=t.Peer.codec().decode(e,e.uint32());break;case 4:n.code=t.Status.codec().decode(e);break;default:e.skipType(7&r)}}return n}))),o),t.encode=e=>st(e,t.codec()),t.decode=e=>it(e,t.codec())}(at||(at={}));var ht=r(2237);const dt=(0,n.kg)("libp2p:stream:converter");function ft(t,e={}){const{stream:r,remoteAddr:n}=t,{sink:i,source:s}=r,o=async function*(){for await(const t of s)yield*t}(),a={async sink(t){null!=e.signal&&(t=(0,ht.wJ)(t,e.signal));try{await i(t),await c()}catch(t){"aborted"!==t.type&&dt(t)}},source:null!=e.signal?(0,ht.wJ)(o,e.signal):o,remoteAddr:n,timeline:{open:Date.now(),close:void 0},async close(){await i(async function*(){yield new Uint8Array(0)}()),await c()}};async function c(){null==a.timeline.close&&(a.timeline.close=Date.now()),await Promise.resolve()}return a}const pt="/libp2p/circuit/relay/0.1.0";function gt(t,e){t.write({type:at.Type.STATUS,code:e})}function yt(t,e){try{null!=t.dstPeer?.addrs&&t.dstPeer.addrs.forEach((t=>(0,c.HM)(t)))}catch(r){throw gt(e,t.type===at.Type.HOP?at.Status.HOP_DST_MULTIADDR_INVALID:at.Status.STOP_DST_MULTIADDR_INVALID),r}try{null!=t.srcPeer?.addrs&&t.srcPeer.addrs.forEach((t=>(0,c.HM)(t)))}catch(r){throw gt(e,t.type===at.Type.HOP?at.Status.HOP_SRC_MULTIADDR_INVALID:at.Status.STOP_SRC_MULTIADDR_INVALID),r}}var mt=r(55150),wt=r(51816);const bt=(0,n.kg)("libp2p:circuit:stream-handler");class Et{constructor(t){const{stream:e,maxLength:r=4096}=t;this.stream=e,this.shake=(0,wt.Y)(this.stream),this.decoder=mt.J.fromReader(this.shake.reader,{maxDataLength:r})}async read(){const t=await this.decoder.next();if(null!=t.value){const e=at.decode(t.value);return bt("read message type",e.type),e}bt("read received no value, closing stream"),this.close()}write(t){bt("write message type %s",t.type),this.shake.write(mt.c.single(at.encode(t)))}rest(){return this.shake.rest(),this.shake.stream}end(t){this.write(t),this.close()}close(){bt("closing the stream"),this.rest().sink([]).catch((t=>{bt.error(t)}))}}const vt=(0,n.kg)("libp2p:circuit:stop");const _t=(0,n.kg)("libp2p:circuit:hop");async function St(t){const{connection:e,request:r,streamHandler:n,circuit:i,connectionManager:s}=t;if(!i.hopEnabled())return _t("HOP request received but we are not acting as a relay"),n.end({type:at.Type.STATUS,code:at.Status.HOP_CANT_SPEAK_RELAY});try{yt(r,n)}catch(t){return void _t.error("invalid hop request via peer %p %o",e.remotePeer,t)}if(null==r.dstPeer)return void _t("HOP request received but we do not receive a dstPeer");const o=(0,T.cv)(r.dstPeer.id),a=s.getConnections(o);if(0===a.length&&!i.hopActive())return _t("HOP request received but we are not connected to the destination peer"),n.end({type:at.Type.STATUS,code:at.Status.HOP_NO_CONN_TO_DST});if(0===a.length)return _t("did not have connection to remote peer"),n.end({type:at.Type.STATUS,code:at.Status.HOP_NO_CONN_TO_DST});const c={type:at.Type.STOP,dstPeer:r.dstPeer,srcPeer:r.srcPeer};let u;try{_t("performing STOP request");const t=await async function(t){const{connection:e,request:r,signal:n}=t,i=await e.newStream(pt,{signal:n});vt("starting stop request to %p",e.remotePeer);const s=new Et({stream:i});s.write(r);const o=await s.read();if(null!=o){if(o.code===at.Status.SUCCESS)return vt("stop request to %p was successful",e.remotePeer),s.rest();vt("stop request failed with code %d",o.code),s.close()}else s.close()}({connection:a[0],request:c});if(null==t)throw new Error("Could not stop");u=t}catch(t){return void _t.error(t)}_t("hop request from %p is valid",e.remotePeer),n.write({type:at.Type.STATUS,code:at.Status.SUCCESS});const l=n.rest();return _t("creating related connections"),await(0,w.zG)(l,u,l)}var At=r(12348);const Rt=(0,n.kg)("libp2p:circuit");class Tt{constructor(t,e){this._init=e,this.components=t,this._started=!1}isStarted(){return this._started}async start(){this._started||(this._started=!0,await this.components.registrar.handle(pt,(t=>{this._onProtocol(t).catch((t=>{Rt.error(t)}))}),{...this._init}).catch((t=>{Rt.error(t)})))}async stop(){await this.components.registrar.unhandle(pt)}hopEnabled(){return!0}hopActive(){return!0}get[At.NA](){return!0}get[Symbol.toStringTag](){return"libp2p/circuit-relay-v1"}async _onProtocol(t){const{connection:e,stream:r}=t,n=new y.TimeoutController(this._init.hop.timeout);try{(0,_.setMaxListeners)?.(1/0,n.signal)}catch{}try{const t=(0,ht.D7)(r,n.signal),i=new Et({stream:{...r,...t}}),s=await i.read();if(null==s)return Rt("request was invalid, could not read from stream"),i.write({type:at.Type.STATUS,code:at.Status.MALFORMED_MESSAGE}),void i.close();let o;switch(s.type){case at.Type.CAN_HOP:Rt("received CAN_HOP request from %p",e.remotePeer),await function(t){const{connection:e,streamHandler:r,circuit:n}=t,i=n.hopEnabled();_t("can hop (%s) request from %p",i,e.remotePeer),r.end({type:at.Type.STATUS,code:i?at.Status.SUCCESS:at.Status.HOP_CANT_SPEAK_RELAY})}({circuit:this,connection:e,streamHandler:i});break;case at.Type.HOP:Rt("received HOP request from %p",e.remotePeer),await St({connection:e,request:s,streamHandler:i,circuit:this,connectionManager:this.components.connectionManager});break;case at.Type.STOP:Rt("received STOP request from %p",e.remotePeer),o=await function(t){const{connection:e,request:r,streamHandler:n}=t;try{yt(r,n)}catch(t){return void vt.error("invalid stop request via peer %p %o",e.remotePeer,t)}return vt("stop request is valid"),n.write({type:at.Type.STATUS,code:at.Status.SUCCESS}),n.rest()}({connection:e,request:s,streamHandler:i});break;default:return Rt("Request of type %s not supported",s.type),i.write({type:at.Type.STATUS,code:at.Status.MALFORMED_MESSAGE}),void i.close()}if(null!=o){const t=e.remoteAddr.encapsulate("/p2p-circuit").encapsulate((0,c.HM)(s.dstPeer?.addrs[0])),r=ft({stream:o,remoteAddr:t,localAddr:(0,c.HM)(s.srcPeer?.addrs[0])}),n=s.type===at.Type.HOP?"relay":"inbound";Rt("new %s connection %s",n,r.remoteAddr);const i=await this.components.upgrader.upgradeInbound(r);Rt("%s connection %s upgraded",n,r.remoteAddr),null!=this.handler&&this.handler(i)}}finally{n.clear()}}async dial(t,e={}){const r=t.toString().split("/p2p-circuit"),n=(0,c.HM)(r[0]),i=(0,c.HM)(r[r.length-1]),s=n.getPeerId(),o=i.getPeerId();if(null==s||null==o){const t="Circuit relay dial failed as addresses did not have peer id";throw Rt.error(t),l(new Error(t),a.ERR_RELAYED_DIAL)}const u=(0,T.jE)(s),h=(0,T.jE)(o);let d=!1;let f=this.components.connectionManager.getConnections(u)[0];null==f&&(await this.components.peerStore.addressBook.add(u,[n]),f=await this.components.connectionManager.openConnection(u,e),d=!0);try{const r=await async function(t){const{connection:e,request:r,signal:n}=t,i=await e.newStream(pt,{signal:n}),s=new Et({stream:i});s.write(r);const o=await s.read();if(null==o)throw l(new Error("HOP request had no response"),a.ERR_HOP_REQUEST_FAILED);if(o.code===at.Status.SUCCESS)return _t("hop request was successful"),s.rest();throw _t("hop request failed with code %d, closing stream",o.code),s.close(),l(new Error(`HOP request failed with code "${o.code??"unknown"}"`),a.ERR_HOP_REQUEST_FAILED)}({...e,connection:f,request:{type:at.Type.HOP,srcPeer:{id:this.components.peerId.toBytes(),addrs:this.components.addressManager.getAddresses().map((t=>t.bytes))},dstPeer:{id:h.toBytes(),addrs:[(0,c.HM)(i).bytes]}}}),s=ft({stream:r,remoteAddr:t,localAddr:n.encapsulate(`/p2p-circuit/p2p/${this.components.peerId.toString()}`)});return Rt("new outbound connection %s",s.remoteAddr),await this.components.upgrader.upgradeOutbound(s)}catch(t){throw Rt.error("Circuit relay dial failed",t),d&&await f.close(),t}}createListener(t){return this.handler=t.handler,function(t){const e=new Map,r=Object.assign(new i.v,{close:async()=>await Promise.resolve(),listen:async function(n){const s=n.toString().split("/p2p-circuit").find((t=>""!==t)),o=(0,c.HM)(s),a=o.getPeerId();if(null==a)throw new Error("Could not determine relay peer from multiaddr");const u=(0,T.jE)(a);await t.peerStore.addressBook.add(u,[o]);const l=await t.connectionManager.openConnection(u),h=l.remoteAddr.encapsulate("/p2p-circuit");e.set(l.remotePeer.toString(),h),r.dispatchEvent(new i.A("listening"))},getAddrs:function(){const t=[];for(const r of e.values())t.push(r);return t}});return t.connectionManager.addEventListener("peer:disconnect",(t=>{const{detail:n}=t;e.delete(n.remotePeer.toString())&&r.dispatchEvent(new i.A("close"))})),r}({connectionManager:this.components.connectionManager,peerStore:this.components.peerStore})}filter(t){return(t=Array.isArray(t)?t:[t]).filter((t=>Z.dx.matches(t)))}}var It=r(77408),Ct=r(49784),kt=r(38161),Nt=r(27353);async function Bt(t){const e=(new TextEncoder).encode(t),r=await Nt.sha256.digest(e);return kt.k0.createV0(r)}const Pt="hop_relay",Lt="true",Dt="/libp2p/relay";var Ot=r(53749);function xt(t){try{const{address:e}=t.nodeAddress();return Boolean((0,Ot.Z)(e))}catch{return!0}}function Ut(t,e){const r=xt(t.multiaddr),n=xt(e.multiaddr);return r&&!n?1:!r&&n||t.isCertified&&!e.isCertified?-1:!t.isCertified&&e.isCertified?1:0}const Mt=(0,n.kg)("libp2p:auto-relay"),Vt=()=>{};class jt{constructor(t,e){this.components=t,this.addressSorter=e.addressSorter??Ut,this.maxListeners=e.maxListeners??1,this.listenRelays=new Set,this.onError=e.onError??Vt,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this.components.peerStore.addEventListener("change:protocols",(t=>{this._onProtocolChange(t).catch((t=>{Mt.error(t)}))})),this.components.connectionManager.addEventListener("peer:disconnect",this._onPeerDisconnected)}async _onProtocolChange(t){const{peerId:e,protocols:r}=t.detail,n=e.toString();if(null!=r.find((t=>t===pt))){if(!this.listenRelays.has(n))try{const t=this.components.connectionManager.getConnections(e);if(0===t.length)return;const r=t[0];if(r.remoteAddr.protoCodes().includes(290))return void Mt(`relayed connection to ${n} will not be used to hop on`);const i=await async function(t){const{connection:e,signal:r}=t,n=await e.newStream(pt,{signal:r}),i=new Et({stream:n});i.write({type:at.Type.CAN_HOP});const s=await i.read();return await i.close(),null!=s&&s.code===at.Status.SUCCESS}({connection:r});i&&(await this.components.peerStore.metadataBook.setValue(e,Pt,(0,It.m)(Lt)),await this._addListenRelay(r,n))}catch(t){this.onError(t)}}else this.listenRelays.has(n)&&await this._removeListenRelay(n)}_onPeerDisconnected(t){const e=t.detail.remotePeer.toString();this.listenRelays.has(e)&&this._removeListenRelay(e).catch((t=>{Mt.error(t)}))}async _addListenRelay(t,e){try{if(this.listenRelays.size>=this.maxListeners)return;const r=await(0,w.zG)(await this.components.peerStore.addressBook.get(t.remotePeer),(t=>(0,H.Z)(t,this.addressSorter)),(async t=>await q(t)));(await Promise.all(r.map((async e=>{try{let r=e.multiaddr;return null==r.getPeerId()&&(r=r.encapsulate(`/p2p/${t.remotePeer.toString()}`)),r=r.encapsulate("/p2p-circuit"),await this.components.transportManager.listen([r]),!0}catch(t){Mt.error("error listening on circuit address",t),this.onError(t)}return!1})))).includes(!0)&&this.listenRelays.add(e)}catch(t){this.onError(t),this.listenRelays.delete(e)}}async _removeListenRelay(t){this.listenRelays.delete(t)&&await this._listenOnAvailableHopRelays([t])}async _listenOnAvailableHopRelays(t=[]){if(this.listenRelays.size>=this.maxListeners)return;const e=[],r=await this.components.peerStore.all();for(const{id:n,metadata:i}of r){const r=n.toString();if(this.listenRelays.has(r))continue;if(t.includes(r))continue;const s=i.get(Pt);if(null==s||(0,Ct.B)(s)!==Lt)continue;const o=this.components.connectionManager.getConnections(n);if(0!==o.length){if(await this._addListenRelay(o[0],r),this.listenRelays.size>=this.maxListeners)return}else e.push(n)}for(const t of e)if(await this._tryToListenOnRelay(t),this.listenRelays.size>=this.maxListeners)return;try{const t=await Bt(Dt);for await(const e of this.components.contentRouting.findProviders(t)){if(0===e.multiaddrs.length)continue;const t=e.id;if(!t.equals(this.components.peerId)&&(await this.components.peerStore.addressBook.add(t,e.multiaddrs),await this._tryToListenOnRelay(t),this.listenRelays.size>=this.maxListeners))return}}catch(t){this.onError(t)}}async _tryToListenOnRelay(t){try{const e=await this.components.connectionManager.openConnection(t);await this._addListenRelay(e,t.toString())}catch(e){Mt.error("Could not use %p as relay",t,e),this.onError(e,`could not connect and listen on known hop relay ${t.toString()}`)}}}const Ft=(0,n.kg)("libp2p:relay");class zt{constructor(t,e){this.components=t,this.autoRelay=!1!==e.autoRelay?.enabled?new jt(t,{addressSorter:e.addressSorter,...e.autoRelay}):void 0,this.started=!1,this.init=e,this._advertiseService=this._advertiseService.bind(this)}isStarted(){return this.started}async start(){!1!==this.init.hop.enabled&&!1!==this.init.advertise.enabled&&(this.timeout=(0,v.setDelayedInterval)(this._advertiseService,this.init.advertise.ttl,this.init.advertise.bootDelay)),this.started=!0}async stop(){null!=this.timeout&&(0,v.clearDelayedInterval)(this.timeout),this.started=!1}async _advertiseService(){try{const t=await Bt(Dt);await this.components.contentRouting.provide(t)}catch(t){t.code===a.ERR_NO_ROUTERS_AVAILABLE?(Ft.error("a content router, such as a DHT, must be provided in order to advertise the relay service",t),await this.stop()):Ft.error(t)}}}var Kt=r(50202),$t=r(66699),qt=(r(79437),r(97450),r(3832));r(25414);const Ht=qt.pki;const Gt=(0,n.kg)("libp2p:keychain:cms"),Wt=new WeakMap;class Yt{constructor(t,e){if(null==t)throw l(new Error("keychain is required"),a.ERR_KEYCHAIN_REQUIRED);this.keychain=t,Wt.set(this,{dek:e})}async encrypt(t,e){if(!(e instanceof Uint8Array))throw l(new Error("Plain data must be a Uint8Array"),a.ERR_INVALID_PARAMETERS);const r=await this.keychain.findKeyByName(t),n=await this.keychain.getPrivateKey(t),i=Wt.get(this);if(null==i)throw l(new Error("dek missing"),a.ERR_INVALID_PARAMETERS);const s=i.dek,o=qt.pki.decryptRsaPrivateKey(n,s),c=await((t,e)=>{const r=Ht.rsa.setPublicKey(e.n,e.e),n=Ht.createCertificate();n.publicKey=r,n.serialNumber="01",n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.validity.notAfter.setFullYear(n.validity.notBefore.getFullYear()+10);const i=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:t.id}];return n.setSubject(i),n.setIssuer(i),n.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),n.sign(e),n})(r,o),u=qt.pkcs7.createEnvelopedData();u.addRecipient(c),u.content=qt.util.createBuffer(e),u.encrypt();const h=qt.asn1.toDer(u.toAsn1()).getBytes();return(0,It.m)(h,"ascii")}async decrypt(t){if(!(t instanceof Uint8Array))throw l(new Error("CMS data is required"),a.ERR_INVALID_PARAMETERS);let e;try{const r=qt.util.createBuffer((0,Ct.B)(t,"ascii")),n=qt.asn1.fromDer(r);e=qt.pkcs7.messageFromAsn1(n)}catch(t){throw Gt.error(t),l(new Error("Invalid CMS"),a.ERR_INVALID_CMS)}const r=e.recipients.filter((t=>t.issuer.find((t=>"O"===t.shortName&&"ipfs"===t.value)))).filter((t=>t.issuer.find((t=>"CN"===t.shortName)))).map((t=>({recipient:t,keyId:t.issuer.find((t=>"CN"===t.shortName)).value}))),n=await async function(t,e){const r=t.map(e);return t[(await Promise.all(r)).findIndex((t=>t))]}(r,(async t=>{try{if(null!=await this.keychain.findKeyById(t.keyId))return!0}catch(t){return!1}return!1}));if(null==n){const t=r.map((t=>t.keyId));throw l(new Error(`Decryption needs one of the key(s): ${t.join(", ")}`),a.ERR_MISSING_KEYS,{missingKeys:t})}const i=await this.keychain.findKeyById(n.keyId);if(null==i)throw l(new Error("No key available to decrypto"),a.ERR_NO_KEY);const s=await this.keychain.getPrivateKey(i.name),o=Wt.get(this);if(null==o)throw l(new Error("dek missing"),a.ERR_INVALID_PARAMETERS);const c=o.dek,u=qt.pki.decryptRsaPrivateKey(s,c);return e.decrypt(n.recipient,u),(0,It.m)(e.content.getBytes(),"ascii")}}var Zt=r(86906),Qt=r(79944);const Xt=(0,n.kg)("libp2p:keychain"),Jt="/info/",te=new WeakMap,ee=14,re=16,ne=1e3,ie={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function se(t){return null!=t&&("string"==typeof t&&(t===Kt(t.trim())&&t.length>0))}async function oe(){const t=800*Math.random()+200;await new Promise((e=>setTimeout(e,t)))}function ae(t){return new $t.s("/pkcs8/"+t)}function ce(t){return new $t.s(Jt+t)}class ue{constructor(t,e){if(this.components=t,this.init=(0,k.Z)(ie,e),null!=this.init.pass&&this.init.pass?.length<20)throw new Error("pass must be least 20 characters");if(null!=this.init.dek?.keyLength&&this.init.dek.keyLength<ee)throw new Error(`dek.keyLength must be least ${ee} bytes`);if(null!=this.init.dek?.salt?.length&&this.init.dek.salt.length<re)throw new Error(`dek.saltLength must be least ${re} bytes`);if(null!=this.init.dek?.iterationCount&&this.init.dek.iterationCount<ne)throw new Error(`dek.iterationCount must be least ${ne}`);const r=null!=this.init.pass&&null!=this.init.dek?.salt?(0,Qt.nk)(this.init.pass,this.init.dek?.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";te.set(this,{dek:r}),this.started=!1}isStarted(){return this.started}async start(){const t=ce("self");await this.components.datastore.has(t)||await this.importPeer("self",this.components.peerId),this.started=!0}stop(){this.started=!1}get cms(){const t=te.get(this);if(null==t)throw l(new Error("dek missing"),a.ERR_INVALID_PARAMETERS);const e=t.dek;return new Yt(this,e)}static generateOptions(){const t=Object.assign({},ie),e=3*Math.ceil(re/3);return t.dek.salt=(0,Ct.B)((0,Qt.O6)(e),"base64"),t}static get options(){return ie}async createKey(t,e,r=2048){if(!se(t)||"self"===t)throw await oe(),l(new Error("Invalid key name"),a.ERR_INVALID_KEY_NAME);if("string"!=typeof e)throw await oe(),l(new Error("Invalid key type"),a.ERR_INVALID_KEY_TYPE);const n=ae(t);if(await this.components.datastore.has(n))throw await oe(),l(new Error("Key name already exists"),a.ERR_KEY_ALREADY_EXISTS);if("rsa"===e.toLowerCase())if(!Number.isSafeInteger(r)||r<2048)throw await oe(),l(new Error("Invalid RSA key size"),a.ERR_INVALID_KEY_SIZE);let i;try{const s=await(0,Zt.generateKeyPair)(e,r),o=await s.id(),c=te.get(this);if(null==c)throw l(new Error("dek missing"),a.ERR_INVALID_PARAMETERS);const u=c.dek,h=await s.export(u);i={name:t,id:o};const d=this.components.datastore.batch();d.put(n,(0,It.m)(h)),d.put(ce(t),(0,It.m)(JSON.stringify(i))),await d.commit()}catch(t){throw await oe(),t}return i}async listKeys(){const t={prefix:Jt},e=[];for await(const r of this.components.datastore.query(t))e.push(JSON.parse((0,Ct.B)(r.value)));return e}async findKeyById(t){try{return(await this.listKeys()).find((e=>e.id===t))}catch(t){throw await oe(),t}}async findKeyByName(t){if(!se(t))throw await oe(),l(new Error(`Invalid key name '${t}'`),a.ERR_INVALID_KEY_NAME);const e=ce(t);try{const t=await this.components.datastore.get(e);return JSON.parse((0,Ct.B)(t))}catch(e){throw await oe(),Xt.error(e),l(new Error(`Key '${t}' does not exist.`),a.ERR_KEY_NOT_FOUND)}}async removeKey(t){if(!se(t)||"self"===t)throw await oe(),l(new Error(`Invalid key name '${t}'`),a.ERR_INVALID_KEY_NAME);const e=ae(t),r=await this.findKeyByName(t),n=this.components.datastore.batch();return n.delete(e),n.delete(ce(t)),await n.commit(),r}async renameKey(t,e){if(!se(t)||"self"===t)throw await oe(),l(new Error(`Invalid old key name '${t}'`),a.ERR_OLD_KEY_NAME_INVALID);if(!se(e)||"self"===e)throw await oe(),l(new Error(`Invalid new key name '${e}'`),a.ERR_NEW_KEY_NAME_INVALID);const r=ae(t),n=ae(e),i=ce(t),s=ce(e);if(await this.components.datastore.has(n))throw await oe(),l(new Error(`Key '${e}' already exists`),a.ERR_KEY_ALREADY_EXISTS);try{const t=await this.components.datastore.get(r),o=await this.components.datastore.get(i),a=JSON.parse((0,Ct.B)(o));a.name=e;const c=this.components.datastore.batch();return c.put(n,t),c.put(s,(0,It.m)(JSON.stringify(a))),c.delete(r),c.delete(i),await c.commit(),a}catch(t){throw await oe(),t}}async exportKey(t,e){if(!se(t))throw await oe(),l(new Error(`Invalid key name '${t}'`),a.ERR_INVALID_KEY_NAME);if(null==e)throw await oe(),l(new Error("Password is required"),a.ERR_PASSWORD_REQUIRED);const r=ae(t);try{const t=await this.components.datastore.get(r),n=(0,Ct.B)(t),i=te.get(this);if(null==i)throw l(new Error("dek missing"),a.ERR_INVALID_PARAMETERS);const s=i.dek,o=await(0,Zt.importKey)(n,s);return await o.export(e)}catch(t){throw await oe(),t}}async exportPeerId(t){const e="temporary-password",r=await this.exportKey(t,e),n=await(0,Zt.importKey)(r,e);return await(0,T.y5)(n.public.bytes,n.bytes)}async importKey(t,e,r){if(!se(t)||"self"===t)throw await oe(),l(new Error(`Invalid key name '${t}'`),a.ERR_INVALID_KEY_NAME);if(null==e)throw await oe(),l(new Error("PEM encoded key is required"),a.ERR_PEM_REQUIRED);const n=ae(t);if(await this.components.datastore.has(n))throw await oe(),l(new Error(`Key '${t}' already exists`),a.ERR_KEY_ALREADY_EXISTS);let i,s;try{i=await(0,Zt.importKey)(e,r)}catch(t){throw await oe(),l(new Error("Cannot read the key, most likely the password is wrong"),a.ERR_CANNOT_READ_KEY)}try{s=await i.id();const t=te.get(this);if(null==t)throw l(new Error("dek missing"),a.ERR_INVALID_PARAMETERS);const r=t.dek;e=await i.export(r)}catch(t){throw await oe(),t}const o={name:t,id:s},c=this.components.datastore.batch();return c.put(n,(0,It.m)(e)),c.put(ce(t),(0,It.m)(JSON.stringify(o))),await c.commit(),o}async importPeer(t,e){try{if(!se(t))throw l(new Error(`Invalid key name '${t}'`),a.ERR_INVALID_KEY_NAME);if(null==e)throw l(new Error("PeerId is required"),a.ERR_MISSING_PRIVATE_KEY);if(null==e.privateKey)throw l(new Error("PeerId.privKey is required"),a.ERR_MISSING_PRIVATE_KEY);const r=await(0,Zt.unmarshalPrivateKey)(e.privateKey),n=ae(t);if(await this.components.datastore.has(n))throw await oe(),l(new Error(`Key '${t}' already exists`),a.ERR_KEY_ALREADY_EXISTS);const i=te.get(this);if(null==i)throw l(new Error("dek missing"),a.ERR_INVALID_PARAMETERS);const s=i.dek,o=await r.export(s),c={name:t,id:e.toString()},u=this.components.datastore.batch();return u.put(n,(0,It.m)(o)),u.put(ce(t),(0,It.m)(JSON.stringify(c))),await u.commit(),c}catch(t){throw await oe(),t}}async getPrivateKey(t){if(!se(t))throw await oe(),l(new Error(`Invalid key name '${t}'`),a.ERR_INVALID_KEY_NAME);try{const e=ae(t),r=await this.components.datastore.get(e);return(0,Ct.B)(r)}catch(e){throw await oe(),Xt.error(e),l(new Error(`Key '${t}' does not exist.`),a.ERR_KEY_NOT_FOUND)}}async rotateKeychainPass(t,e){if("string"!=typeof t)throw await oe(),l(new Error(`Invalid old pass type '${typeof t}'`),a.ERR_INVALID_OLD_PASS_TYPE);if("string"!=typeof e)throw await oe(),l(new Error(`Invalid new pass type '${typeof e}'`),a.ERR_INVALID_NEW_PASS_TYPE);if(e.length<20)throw await oe(),l(new Error(`Invalid pass length ${e.length}`),a.ERR_INVALID_PASS_LENGTH);Xt("recreating keychain");const r=te.get(this);if(null==r)throw l(new Error("dek missing"),a.ERR_INVALID_PARAMETERS);const n=r.dek;this.init.pass=e;const i=null!=e&&null!=this.init.dek?.salt?(0,Qt.nk)(e,this.init.dek.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";te.set(this,{dek:i});const s=await this.listKeys();for(const t of s){const e=await this.components.datastore.get(ae(t.name)),r=(0,Ct.B)(e),s=await(0,Zt.importKey)(r,n),o=i.toString(),a=await s.export(o),c=this.components.datastore.batch(),u={name:t.name,id:t.id};c.put(ae(t.name),(0,It.m)(a)),c.put(ce(t.name),(0,It.m)(JSON.stringify(u))),await c.commit()}Xt("keychain reconstructed")}}async function le(t){try{return{status:"fulfilled",value:await t,isFulfilled:!0,isRejected:!1}}catch(t){return{status:"rejected",reason:t,isFulfilled:!1,isRejected:!0}}}class he{value;next;constructor(t){this.value=t}}class de{#t;#e;#r;constructor(){this.clear()}enqueue(t){const e=new he(t);this.#t?(this.#e.next=e,this.#e=e):(this.#t=e,this.#e=e),this.#r++}dequeue(){const t=this.#t;if(t)return this.#t=this.#t.next,this.#r--,t.value}clear(){this.#t=void 0,this.#e=void 0,this.#r=0}get size(){return this.#r}*[Symbol.iterator](){let t=this.#t;for(;t;)yield t.value,t=t.next}}function fe(t){if(!Number.isInteger(t)&&t!==Number.POSITIVE_INFINITY||!(t>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const e=new de;let r=0;const n=async(t,n,i)=>{r++;const s=(async()=>t(...i))();n(s);try{await s}catch{}r--,e.size>0&&e.dequeue()()},i=(i,...s)=>new Promise((o=>{((i,s,o)=>{e.enqueue(n.bind(void 0,i,s,o)),(async()=>{await Promise.resolve(),r<t&&e.size>0&&e.dequeue()()})()})(i,o,s)}));return Object.defineProperties(i,{activeCount:{get:()=>r},pendingCount:{get:()=>e.size},clearQueue:{value:()=>{e.clear()}}}),i}async function pe(t,e={}){const{concurrency:r=Number.POSITIVE_INFINITY}=e,n=fe(r);return Promise.all(t.map((t=>t&&"function"==typeof t.then?le(t):le("function"==typeof t?n((()=>t())):Promise.resolve(t)))))}var ge=r(20199);const ye=(0,n.kg)("libp2p:transports");class me extends i.v{constructor(t,e={}){super(),this.components=t,this.started=!1,this.transports=new Map,this.listeners=(0,ge.s)({name:"libp2p_transport_manager_listeners",metrics:this.components.metrics}),this.faultTolerance=e.faultTolerance??At.P7.FATAL_ALL}add(t){const e=t[Symbol.toStringTag];if(null==e)throw l(new Error("Transport must have a valid tag"),a.ERR_INVALID_KEY);if(this.transports.has(e))throw l(new Error("There is already a transport with this tag"),a.ERR_DUPLICATE_TRANSPORT);ye("adding transport %s",e),this.transports.set(e,t),this.listeners.has(e)||this.listeners.set(e,[])}isStarted(){return this.started}async start(){const t=this.components.addressManager.getListenAddrs();await this.listen(t),this.started=!0}async stop(){const t=[];for(const[e,r]of this.listeners)for(ye("closing listeners for %s",e);r.length>0;){const e=r.pop();null!=e&&t.push(e.close())}await Promise.all(t),ye("all listeners closed");for(const t of this.listeners.keys())this.listeners.set(t,[]);this.started=!1}async dial(t,e){const r=this.transportForMultiaddr(t);if(null==r)throw l(new Error(`No transport available for address ${String(t)}`),a.ERR_TRANSPORT_UNAVAILABLE);try{return await r.dial(t,{...e,upgrader:this.components.upgrader})}catch(t){throw null==t.code&&(t.code=a.ERR_TRANSPORT_DIAL_FAILED),t}}getAddrs(){let t=[];for(const e of this.listeners.values())for(const r of e)t=[...t,...r.getAddrs()];return t}getTransports(){return Array.of(...this.transports.values())}transportForMultiaddr(t){for(const e of this.transports.values()){if(e.filter([t]).length>0)return e}}async listen(t){if(null==t||0===t.length)return void ye("no addresses were provided for listening, this node is dial only");const e=[];for(const[r,n]of this.transports.entries()){const s=n.filter(t),o=[];for(const t of s){ye("creating listener for %s on %s",r,t);const e=n.createListener({upgrader:this.components.upgrader});let s=this.listeners.get(r);null==s&&(s=[],this.listeners.set(r,s)),s.push(e),e.addEventListener("listening",(()=>{this.dispatchEvent(new i.A("listener:listening",{detail:e}))})),e.addEventListener("close",(()=>{this.dispatchEvent(new i.A("listener:close",{detail:e}))})),o.push(e.listen(t))}if(0===o.length){e.push(r);continue}if(null==(await pe(o)).find((t=>t.isFulfilled))&&this.faultTolerance!==At.P7.NO_FATAL)throw l(new Error(`Transport (${r}) could not listen on any available address`),a.ERR_NO_VALID_ADDRESSES)}if(e.length===this.transports.size){const t=`no valid addresses were provided for transports [${e.join(", ")}]`;if(this.faultTolerance===At.P7.FATAL_ALL)throw l(new Error(t),a.ERR_NO_VALID_ADDRESSES);ye(`libp2p in dial mode only: ${t}`)}}async remove(t){ye("removing %s",t);for(const e of this.listeners.get(t)??[])await e.close();this.transports.delete(t),this.listeners.delete(t)}async removeAll(){const t=[];for(const e of this.transports.keys())t.push(this.remove(e));await Promise.all(t)}}const we="/multistream/1.0.0",be=1024;var Ee=r(62308);const ve=(0,n.kg)("libp2p:mss"),_e=(0,It.m)("\n");function Se(t){const e=new Ee.H(t,_e);return mt.c.single(e)}function Ae(t,e,r={}){const n=Se(e);!0===r.writeBytes?t.push(n.subarray()):t.push(n)}async function Re(t,e){const r=await async function(t,e){let r=1;const n={[Symbol.asyncIterator]:()=>n,next:async()=>await t.next(r)};let i=n;null!=e?.signal&&(i=(0,ht.wJ)(n,e.signal));const s=await(0,w.zG)(i,mt.J({onLength:t=>{r=t},maxDataLength:be}),(async t=>await(0,b.Z)(t)));if(null==s||0===s.length)throw l(new Error("no buffer returned"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");if(s.get(s.byteLength-1)!==_e[0])throw ve.error("Invalid mss message - missing newline - %s",s.subarray()),l(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return s.sublist(0,-1)}(t,e);return(0,Ct.B)(r.subarray())}r(93489);const Te=(0,n.kg)("libp2p:mss:select");async function Ie(t,e,r={}){e=Array.isArray(e)?[...e]:[e];const{reader:n,writer:i,rest:s,stream:o}=(0,wt.Y)(t),a=e.shift();if(null==a)throw new Error("At least one protocol must be specified");Te('select: write ["%s", "%s"]',we,a);!function(t,e,r={}){const n=new Ee.H;for(const t of e)n.append(Se(t));!0===r.writeBytes?t.push(n.subarray()):t.push(n)}(i,[(0,It.m)(we),(0,It.m)(a)],r);let c=await Re(n,r);if(Te('select: read "%s"',c),c===we&&(c=await Re(n,r),Te('select: read "%s"',c)),c===a)return s(),{stream:o,protocol:a};for(const t of e){Te('select: write "%s"',t),Ae(i,(0,It.m)(t),r);const e=await Re(n,r);if(Te('select: read "%s" for "%s"',e,t),e===t)return s(),{stream:o,protocol:t}}throw s(),l(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}const Ce=(0,n.kg)("libp2p:mss:handle");async function ke(t,e,r){e=Array.isArray(e)?e:[e];const{writer:n,reader:i,rest:s,stream:o}=(0,wt.Y)(t);for(;;){const t=await Re(i,r);if(Ce('read "%s"',t),t!==we){if(e.includes(t))return Ae(n,(0,It.m)(t),r),Ce('respond with "%s" for "%s"',t,t),s(),{stream:o,protocol:t};"ls"!==t?(Ae(n,(0,It.m)("na"),r),Ce('respond with "na" for "%s"',t)):(Ae(n,new Ee.H(...e.map((t=>Se((0,It.m)(t))))),r),Ce('respond with "%s" for %s',e,t))}else Ce('respond with "%s" for "%s"',we,t),Ae(n,(0,It.m)(we),r)}}const Ne=Symbol.for("@libp2p/connection");const Be=(0,n.kg)("libp2p:connection");class Pe{constructor(t){const{remoteAddr:e,remotePeer:r,newStream:n,close:i,getStreams:s,stat:o}=t;this.id=`${parseInt(String(1e9*Math.random())).toString(36)}${Date.now()}`,this.remoteAddr=e,this.remotePeer=r,this.stat={...o,status:O},this._newStream=n,this._close=i,this._getStreams=s,this.tags=[],this._closing=!1}get[Symbol.toStringTag](){return"Connection"}get[Ne](){return!0}get streams(){return this._getStreams()}async newStream(t,e){if(this.stat.status===x)throw l(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===U)throw l(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(t)||(t=[t]);const r=await this._newStream(t,e);return r.stat.direction="outbound",r}addStream(t){t.stat.direction="inbound"}removeStream(t){}async close(){if(this.stat.status!==U&&!this._closing){this.stat.status=x;try{this.streams.forEach((t=>t.close()))}catch(t){Be.error(t)}this._closing=!0,await this._close(),this._closing=!1,this.stat.timeline.close=Date.now(),this.stat.status=U}}}var Le=r(1388);const De=(0,n.kg)("libp2p:registrar");class Oe{constructor(t){this.topologies=new Map,this.handlers=new Map,this.components=t,this._onDisconnect=this._onDisconnect.bind(this),this._onProtocolChange=this._onProtocolChange.bind(this),this._onConnect=this._onConnect.bind(this),this.components.connectionManager.addEventListener("peer:disconnect",this._onDisconnect),this.components.connectionManager.addEventListener("peer:connect",this._onConnect),this.components.peerStore.addEventListener("change:protocols",this._onProtocolChange)}getProtocols(){return Array.from(new Set([...this.topologies.keys(),...this.handlers.keys()])).sort()}getHandler(t){const e=this.handlers.get(t);if(null==e)throw l(new Error(`No handler registered for protocol ${t}`),a.ERR_NO_HANDLER_FOR_PROTOCOL);return e}getTopologies(t){const e=this.topologies.get(t);return null==e?[]:[...e.values()]}async handle(t,e,r){if(this.handlers.has(t))throw l(new Error(`Handler already registered for protocol ${t}`),a.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);const n=k.Z.bind({ignoreUndefined:!0})({maxInboundStreams:32,maxOutboundStreams:64},r);this.handlers.set(t,{handler:e,options:n}),await this.components.peerStore.protoBook.add(this.components.peerId,[t])}async unhandle(t){const e=Array.isArray(t)?t:[t];e.forEach((t=>{this.handlers.delete(t)})),await this.components.peerStore.protoBook.remove(this.components.peerId,e)}async register(t,e){if(!(0,Le.w)(e))throw De.error("topology must be an instance of interfaces/topology"),l(new Error("topology must be an instance of interfaces/topology"),a.ERR_INVALID_PARAMETERS);const r=`${(1e9*Math.random()).toString(36)}${Date.now()}`;let n=this.topologies.get(t);return null==n&&(n=new Map,this.topologies.set(t,n)),n.set(r,e),await e.setRegistrar(this),r}unregister(t){for(const[e,r]of this.topologies.entries())r.has(t)&&(r.delete(t),0===r.size&&this.topologies.delete(e))}_onDisconnect(t){const e=t.detail;this.components.peerStore.protoBook.get(e.remotePeer).then((t=>{for(const r of t){const t=this.topologies.get(r);if(null!=t)for(const r of t.values())r.onDisconnect(e.remotePeer)}})).catch((t=>{De.error(t)}))}_onConnect(t){const e=t.detail;this.components.peerStore.protoBook.get(e.remotePeer).then((t=>{for(const r of t){const t=this.topologies.get(r);if(null!=t)for(const r of t.values())r.onConnect(e.remotePeer,e)}})).catch((t=>{De.error(t)}))}_onProtocolChange(t){const{peerId:e,protocols:r,oldProtocols:n}=t.detail,i=n.filter((t=>!r.includes(t))),s=r.filter((t=>!n.includes(t)));for(const t of i){const r=this.topologies.get(t);if(null!=r)for(const t of r.values())t.onDisconnect(e)}for(const t of s){const r=this.topologies.get(t);if(null!=r)for(const t of r.values()){const r=this.components.connectionManager.getConnections(e)[0];null!=r&&t.onConnect(e,r)}}}}const xe=(0,n.kg)("libp2p:upgrader");function Ue(t,e,r){let n=0;return r.streams.forEach((r=>{r.stat.direction===e&&r.stat.protocol===t&&n++})),n}class Me extends i.v{constructor(t,e){super(),this.components=t,this.connectionEncryption=new Map,e.connectionEncryption.forEach((t=>{this.connectionEncryption.set(t.protocol,t)})),this.muxers=new Map,e.muxers.forEach((t=>{this.muxers.set(t.protocol,t)})),this.inboundUpgradeTimeout=e.inboundUpgradeTimeout}async upgradeInbound(t,e){if(!await this.components.connectionManager.acceptIncomingConnection(t))throw l(new Error("connection denied"),a.ERR_CONNECTION_DENIED);let r,n,i,s,o;const c=new y.TimeoutController(this.inboundUpgradeTimeout);try{(0,_.setMaxListeners)?.(1/0,c.signal)}catch{}try{const u=(0,ht.D7)(t,c.signal);if(t.source=u.source,t.sink=u.sink,await this.components.connectionGater.denyInboundConnection(t))throw l(new Error("The multiaddr connection is blocked by gater.acceptConnection"),a.ERR_CONNECTION_INTERCEPTED);this.components.metrics?.trackMultiaddrConnection(t),xe("starting the inbound connection upgrade");let h=t;if(!0!==e?.skipProtection){const e=this.components.connectionProtector;null!=e&&(xe("protecting the inbound connection"),h=await e.protect(t))}try{if(r=h,!0!==e?.skipEncryption){if(({conn:r,remotePeer:n,protocol:o}=await this._encryptInbound(h)),await this.components.connectionGater.denyInboundEncryptedConnection(n,{...h,...r}))throw l(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),a.ERR_CONNECTION_INTERCEPTED)}else{const e=t.remoteAddr.getPeerId();if(null==e)throw l(new Error("inbound connection that skipped encryption must have a peer id"),a.ERR_INVALID_MULTIADDR);const r=(0,T.jE)(e);o="native",n=r}if(i=r,null!=e?.muxerFactory)s=e.muxerFactory;else if(this.muxers.size>0){const t=await this._multiplexInbound({...h,...r},this.muxers);s=t.muxerFactory,i=t.stream}}catch(t){throw xe.error("Failed to upgrade inbound connection",t),t}if(await this.components.connectionGater.denyInboundUpgradedConnection(n,{...h,...r}))throw l(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),a.ERR_CONNECTION_INTERCEPTED);return xe("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:o,direction:"inbound",maConn:t,upgradedConn:i,muxerFactory:s,remotePeer:n})}finally{this.components.connectionManager.afterUpgradeInbound(),c.clear()}}async upgradeOutbound(t,e){const r=t.remoteAddr.getPeerId();let n,i,s,o,c,u;if(null!=r&&(n=(0,T.jE)(r),await this.components.connectionGater.denyOutboundConnection(n,t)))throw l(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),a.ERR_CONNECTION_INTERCEPTED);this.components.metrics?.trackMultiaddrConnection(t),xe("Starting the outbound connection upgrade");let h=t;if(!0!==e?.skipProtection){const e=this.components.connectionProtector;null!=e&&(h=await e.protect(t))}try{if(i=h,!0!==e?.skipEncryption){if(({conn:i,remotePeer:s,protocol:c}=await this._encryptOutbound(h,n)),await this.components.connectionGater.denyOutboundEncryptedConnection(s,{...h,...i}))throw l(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),a.ERR_CONNECTION_INTERCEPTED)}else{if(null==n)throw l(new Error("Encryption was skipped but no peer id was passed"),a.ERR_INVALID_PEER);c="native",s=n}if(o=i,null!=e?.muxerFactory)u=e.muxerFactory;else if(this.muxers.size>0){const t=await this._multiplexOutbound({...h,...i},this.muxers);u=t.muxerFactory,o=t.stream}}catch(e){throw xe.error("Failed to upgrade outbound connection",e),await t.close(e),e}if(await this.components.connectionGater.denyOutboundUpgradedConnection(s,{...h,...i}))throw l(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),a.ERR_CONNECTION_INTERCEPTED);return xe("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:c,direction:"outbound",maConn:t,upgradedConn:o,muxerFactory:u,remotePeer:s})}_createConnection(t){const{cryptoProtocol:e,direction:r,maConn:n,upgradedConn:s,remotePeer:o,muxerFactory:c}=t;let u,h,d;null!=c&&(u=c.createStreamMuxer({direction:r,onIncomingStream:t=>{null!=d&&Promise.resolve().then((async()=>{const e=this.components.registrar.getProtocols(),{stream:n,protocol:i}=await ke(t,e);if(xe("%s: incoming stream opened on %s",r,i),null==d)return;const s=function(t,e){try{const{options:r}=e.getHandler(t);return r.maxInboundStreams}catch(t){if(t.code!==a.ERR_NO_HANDLER_FOR_PROTOCOL)throw t}return 32}(i,this.components.registrar);Ue(i,"inbound",d)!==s?(t.source=n.source,t.sink=n.sink,t.stat.protocol=i,this.components.peerStore.protoBook.add(o,[i]).catch((t=>xe.error(t))),d.addStream(t),this.components.metrics?.trackProtocolStream(t,d),this._onStream({connection:d,stream:t,protocol:i})):t.abort(l(new Error(`Too many inbound protocol streams for protocol "${i}" - limit ${s}`),a.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS))})).catch((e=>{xe.error(e),null==t.stat.timeline.close&&t.close()}))},onStreamEnd:t=>{d?.removeStream(t.id)}}),h=async(t,e={})=>{if(null==u)throw l(new Error("Stream is not multiplexed"),a.ERR_MUXER_UNAVAILABLE);xe("%s: starting new stream on %s",r,t);const n=await u.newStream();let i;try{if(null==e.signal){xe("No abort signal was passed while trying to negotiate protocols %s falling back to default timeout",t),i=new y.TimeoutController(3e4),e.signal=i.signal;try{(0,_.setMaxListeners)?.(1/0,i.signal)}catch{}}const{stream:r,protocol:s}=await Ie(n,t,e),c=function(t,e){try{const{options:r}=e.getHandler(t);return r.maxOutboundStreams}catch(t){if(t.code!==a.ERR_NO_HANDLER_FOR_PROTOCOL)throw t}return 64}(s,this.components.registrar);if(Ue(s,"outbound",d)===c){const t=l(new Error(`Too many outbound protocol streams for protocol "${s}" - limit ${c}`),a.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS);throw n.abort(t),t}return this.components.peerStore.protoBook.add(o,[s]).catch((t=>xe.error(t))),n.source=r.source,n.sink=r.sink,n.stat.protocol=s,this.components.metrics?.trackProtocolStream(n,d),n}catch(t){if(xe.error("could not create new stream",t),null==n.stat.timeline.close&&n.close(),null!=t.code)throw t;throw l(t,a.ERR_UNSUPPORTED_PROTOCOL)}finally{null!=i&&i.clear()}},Promise.all([u.sink(s.source),s.sink(u.source)]).catch((t=>{xe.error(t)})));const f=n.timeline;n.timeline=new Proxy(f,{set:(...t)=>(null!=d&&"close"===t[1]&&null!=t[2]&&null==f.close&&(async()=>{try{"OPEN"===d.stat.status&&await d.close()}catch(t){xe.error(t)}finally{this.dispatchEvent(new i.A("connectionEnd",{detail:d}))}})().catch((t=>{xe.error(t)})),Reflect.set(...t))}),n.timeline.upgraded=Date.now();const p=()=>{throw l(new Error("connection is not multiplexed"),a.ERR_CONNECTION_NOT_MULTIPLEXED)};var g;return g={remoteAddr:n.remoteAddr,remotePeer:o,stat:{status:"OPEN",direction:r,timeline:n.timeline,multiplexer:u?.protocol,encryption:e},newStream:h??p,getStreams:()=>null!=u?u.streams:p(),close:async()=>{await n.close(),null!=u&&u.close()}},d=new Pe(g),this.dispatchEvent(new i.A("connection",{detail:d})),d}_onStream(t){const{connection:e,stream:r,protocol:n}=t,{handler:i}=this.components.registrar.getHandler(n);i({connection:e,stream:r})}async _encryptInbound(t){const e=Array.from(this.connectionEncryption.keys());xe("handling inbound crypto protocol selection",e);try{const{stream:r,protocol:n}=await ke(t,e,{writeBytes:!0}),i=this.connectionEncryption.get(n);if(null==i)throw new Error(`no crypto module found for ${n}`);return xe("encrypting inbound connection..."),{...await i.secureInbound(this.components.peerId,r),protocol:n}}catch(t){throw l(t,a.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(t,e){const r=Array.from(this.connectionEncryption.keys());xe("selecting outbound crypto protocol",r);try{const{stream:n,protocol:i}=await Ie(t,r,{writeBytes:!0}),s=this.connectionEncryption.get(i);if(null==s)throw new Error(`no crypto module found for ${i}`);return xe("encrypting outbound connection to %p",e),{...await s.secureOutbound(this.components.peerId,n,e),protocol:i}}catch(t){throw l(t,a.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(t,e){const r=Array.from(e.keys());xe("outbound selecting muxer %s",r);try{const{stream:n,protocol:i}=await Ie(t,r,{writeBytes:!0});xe("%s selected as muxer protocol",i);return{stream:n,muxerFactory:e.get(i)}}catch(t){throw xe.error("error multiplexing outbound stream",t),l(t,a.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(t,e){const r=Array.from(e.keys());xe("inbound handling muxers %s",r);try{const{stream:n,protocol:i}=await ke(t,r,{writeBytes:!0});return{stream:n,muxerFactory:e.get(i)}}catch(t){throw xe.error("error multiplexing inbound stream",t),l(t,a.ERR_MUXER_UNAVAILABLE)}}}var Ve;!function(t){let e;t.codec=()=>(null==e&&(e=lt(((t,e,r={})=>{if(!1!==r.lengthDelimited&&e.fork(),null!=t.protocolVersion&&(e.uint32(42),e.string(t.protocolVersion)),null!=t.agentVersion&&(e.uint32(50),e.string(t.agentVersion)),null!=t.publicKey&&(e.uint32(10),e.bytes(t.publicKey)),null!=t.listenAddrs)for(const r of t.listenAddrs)e.uint32(18),e.bytes(r);if(null!=t.observedAddr&&(e.uint32(34),e.bytes(t.observedAddr)),null!=t.protocols)for(const r of t.protocols)e.uint32(26),e.string(r);null!=t.signedPeerRecord&&(e.uint32(66),e.bytes(t.signedPeerRecord)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={listenAddrs:[],protocols:[]},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 5:r.protocolVersion=t.string();break;case 6:r.agentVersion=t.string();break;case 1:r.publicKey=t.bytes();break;case 2:r.listenAddrs.push(t.bytes());break;case 4:r.observedAddr=t.bytes();break;case 3:r.protocols.push(t.string());break;case 8:r.signedPeerRecord=t.bytes();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>st(e,t.codec()),t.decode=e=>it(e,t.codec())}(Ve||(Ve={}));var je=r(29666);const Fe="0.0.0",ze=`js-libp2p/${Fe}`,Ke=(0,n.kg)("libp2p:identify");class $e{constructor(t,e){this.components=t,this.started=!1,this.init=e,this.identifyProtocolStr=`/${e.protocolPrefix}/id/1.0.0`,this.identifyPushProtocolStr=`/${e.protocolPrefix}/id/push/1.0.0`,this.host={protocolVersion:`${e.protocolPrefix}/0.1.0`,...e.host},this.components.connectionManager.addEventListener("peer:connect",(t=>{const e=t.detail;this.identify(e).catch(Ke.error)})),this.components.peerStore.addEventListener("change:multiaddrs",(t=>{const{peerId:e}=t.detail;this.components.peerId.equals(e)&&this.pushToPeerStore().catch((t=>Ke.error(t)))})),this.components.peerStore.addEventListener("change:protocols",(t=>{const{peerId:e}=t.detail;this.components.peerId.equals(e)&&this.pushToPeerStore().catch((t=>Ke.error(t)))}))}isStarted(){return this.started}async start(){this.started||(await this.components.peerStore.metadataBook.setValue(this.components.peerId,"AgentVersion",(0,It.m)(this.host.agentVersion)),await this.components.peerStore.metadataBook.setValue(this.components.peerId,"ProtocolVersion",(0,It.m)(this.host.protocolVersion)),await this.components.registrar.handle(this.identifyProtocolStr,(t=>{this._handleIdentify(t).catch((t=>{Ke.error(t)}))}),{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),await this.components.registrar.handle(this.identifyPushProtocolStr,(t=>{this._handlePush(t).catch((t=>{Ke.error(t)}))}),{maxInboundStreams:this.init.maxPushIncomingStreams,maxOutboundStreams:this.init.maxPushOutgoingStreams}),this.started=!0)}async stop(){await this.components.registrar.unhandle(this.identifyProtocolStr),await this.components.registrar.unhandle(this.identifyPushProtocolStr),this.started=!1}async push(t){const e=await this.components.peerStore.addressBook.getRawEnvelope(this.components.peerId),r=this.components.addressManager.getAddresses().map((t=>t.bytes)),n=await this.components.peerStore.protoBook.get(this.components.peerId),i=t.map((async t=>{let i;const s=new y.TimeoutController(this.init.timeout);try{(0,_.setMaxListeners)?.(1/0,s.signal)}catch{}try{i=await t.newStream([this.identifyPushProtocolStr],{signal:s.signal});const o=(0,ht.D7)(i,s.signal);await o.sink((0,w.zG)([Ve.encode({listenAddrs:r,signedPeerRecord:e,protocols:n})],mt.c()))}catch(t){Ke.error("could not push identify update to peer",t)}finally{null!=i&&i.close(),s.clear()}}));await Promise.all(i)}async pushToPeerStore(){if(!this.isStarted())return;const t=[];for(const e of this.components.connectionManager.getConnections()){const r=e.remotePeer;(await this.components.peerStore.get(r)).protocols.includes(this.identifyPushProtocolStr)&&t.push(e)}await this.push(t)}async _identify(t,e={}){let r,n,i=e.signal;if(null==i){r=new y.TimeoutController(this.init.timeout),i=r.signal;try{(0,_.setMaxListeners)?.(1/0,r.signal)}catch{}}try{n=await t.newStream([this.identifyProtocolStr],{signal:i});const e=(0,ht.D7)(n,i),r=await(0,w.zG)([],e,mt.J({maxDataLength:this.init.maxIdentifyMessageSize??8192}),(async t=>await(0,b.Z)(t)));if(null==r)throw l(new Error("No data could be retrieved"),a.ERR_CONNECTION_ENDED);try{return Ve.decode(r)}catch(t){throw l(t,a.ERR_INVALID_MESSAGE)}}finally{null!=r&&r.clear(),null!=n&&n.close()}}async identify(t,e={}){const r=await this._identify(t,e),{publicKey:n,listenAddrs:i,protocols:s,observedAddr:o,signedPeerRecord:u,agentVersion:h,protocolVersion:d}=r;if(null==n)throw l(new Error("public key was missing from identify message"),a.ERR_MISSING_PUBLIC_KEY);const f=await(0,T.y5)(n);if(!t.remotePeer.equals(f))throw l(new Error("identified peer does not match the expected peer"),a.ERR_INVALID_PEER);if(this.components.peerId.equals(f))throw l(new Error("identified peer is our own peer id?"),a.ERR_INVALID_PEER);const p=$e.getCleanMultiaddr(o);if(null!=u){Ke("received signed peer record from %p",f);try{const t=await je.X.openAndCertify(u,je.K.DOMAIN);if(!t.peerId.equals(f))throw l(new Error("identified peer does not match the expected peer"),a.ERR_INVALID_PEER);if(await this.components.peerStore.addressBook.consumePeerRecord(t))return await this.components.peerStore.protoBook.set(f,s),null!=h&&await this.components.peerStore.metadataBook.setValue(f,"AgentVersion",(0,It.m)(h)),null!=d&&await this.components.peerStore.metadataBook.setValue(f,"ProtocolVersion",(0,It.m)(d)),void Ke("identify completed for peer %p and protocols %o",f,s)}catch(t){Ke("received invalid envelope, discard it and fallback to listenAddrs is available",t)}}else Ke("no signed peer record received from %p",f);Ke("falling back to legacy addresses from %p",f);try{await this.components.peerStore.addressBook.set(f,i.map((t=>(0,c.HM)(t))))}catch(t){Ke.error("received invalid addrs",t)}await this.components.peerStore.protoBook.set(f,s),null!=h&&await this.components.peerStore.metadataBook.setValue(f,"AgentVersion",(0,It.m)(h)),null!=d&&await this.components.peerStore.metadataBook.setValue(f,"ProtocolVersion",(0,It.m)(d)),Ke("identify completed for peer %p and protocols %o",f,s),Ke("received observed address of %s",p?.toString())}async _handleIdentify(t){const{connection:e,stream:r}=t,n=new y.TimeoutController(this.init.timeout);try{(0,_.setMaxListeners)?.(1/0,n.signal)}catch{}try{const t=this.components.peerId.publicKey??new Uint8Array(0),i=await this.components.peerStore.get(this.components.peerId),s=this.components.addressManager.getAddresses().map((t=>t.decapsulateCode((0,c.a_)("p2p").code)));let o=i.peerRecordEnvelope;if(s.length>0&&null==o){const t=new je.K({peerId:this.components.peerId,multiaddrs:s}),e=await je.X.seal(t,this.components.peerId);await this.components.peerStore.addressBook.consumePeerRecord(e),o=e.marshal().subarray()}const a=Ve.encode({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:t,listenAddrs:s.map((t=>t.bytes)),signedPeerRecord:o,observedAddr:e.remoteAddr.bytes,protocols:i.protocols}),u=(0,ht.D7)(r,n.signal),l=(0,w.zG)([a],mt.c());await u.sink(l)}catch(t){Ke.error("could not respond to identify request",t)}finally{r.close(),n.clear()}}async _handlePush(t){const{connection:e,stream:r}=t,n=new y.TimeoutController(this.init.timeout);try{(0,_.setMaxListeners)?.(1/0,n.signal)}catch{}let i;try{const t=(0,ht.D7)(r,n.signal),e=await(0,w.zG)([],t,mt.J({maxDataLength:this.init.maxIdentifyMessageSize??8192}),(async t=>await(0,b.Z)(t)));null!=e&&(i=Ve.decode(e))}catch(t){return Ke.error("received invalid message",t)}finally{r.close(),n.clear()}if(null==i)return Ke.error("received invalid message");const s=e.remotePeer;if(this.components.peerId.equals(s))Ke("received push from ourselves?");else{if(Ke("received push from %p",s),null!=i.signedPeerRecord){Ke("received signedPeerRecord in push");try{const t=await je.X.openAndCertify(i.signedPeerRecord,je.K.DOMAIN);if(await this.components.peerStore.addressBook.consumePeerRecord(t))return Ke("consumed signedPeerRecord sent in push"),void await this.components.peerStore.protoBook.set(s,i.protocols);Ke("failed to consume signedPeerRecord sent in push")}catch(t){Ke("received invalid envelope, discard it and fallback to listenAddrs is available",t)}}else Ke("did not receive signedPeerRecord in push");try{await this.components.peerStore.addressBook.set(s,i.listenAddrs.map((t=>(0,c.HM)(t))))}catch(t){Ke.error("received invalid addrs",t)}try{await this.components.peerStore.protoBook.set(s,i.protocols)}catch(t){Ke.error("received invalid protocols",t)}Ke("handled push from %p",s)}}static getCleanMultiaddr(t){if(null!=t&&t.length>0)try{return(0,c.HM)(t)}catch{}}}var qe,He;!function(t){let e;t.codec=()=>(null==e&&(e=lt(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),!0!==r.writeDefaults&&""===t.identifier||(e.uint32(10),e.string(t.identifier)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={identifier:""},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();if(e>>>3==1)r.identifier=t.string();else t.skipType(7&e)}return r}))),e),t.encode=e=>st(e,t.codec()),t.decode=e=>it(e,t.codec())}(qe||(qe={})),function(t){let e,r,n;!function(t){t.OK="OK",t.NOT_FOUND="NOT_FOUND",t.ERROR="ERROR"}(e=t.StatusCode||(t.StatusCode={})),function(t){t[t.OK=0]="OK",t[t.NOT_FOUND=1]="NOT_FOUND",t[t.ERROR=2]="ERROR"}(r||(r={})),function(t){t.codec=()=>ut(r)}(e=t.StatusCode||(t.StatusCode={})),t.codec=()=>(null==n&&(n=lt(((e,n,i={})=>{!1!==i.lengthDelimited&&n.fork(),(!0===i.writeDefaults||null!=e.status&&0!==r[e.status])&&(n.uint32(8),t.StatusCode.codec().encode(e.status,n)),(!0===i.writeDefaults||null!=e.data&&e.data.byteLength>0)&&(n.uint32(18),n.bytes(e.data)),!1!==i.lengthDelimited&&n.ldelim()}),((r,n)=>{const i={status:e.OK,data:new Uint8Array(0)},s=null==n?r.len:r.pos+n;for(;r.pos<s;){const e=r.uint32();switch(e>>>3){case 1:i.status=t.StatusCode.codec().decode(r);break;case 2:i.data=r.bytes();break;default:r.skipType(7&e)}}return i}))),n),t.encode=e=>st(e,t.codec()),t.decode=e=>it(e,t.codec())}(He||(He={}));const Ge=(0,n.kg)("libp2p:fetch");class We{constructor(t,e){this.started=!1,this.components=t,this.protocol=`/${e.protocolPrefix??"libp2p"}/fetch/0.0.1`,this.lookupFunctions=new Map,this.handleMessage=this.handleMessage.bind(this),this.init=e}async start(){await this.components.registrar.handle(this.protocol,(t=>{this.handleMessage(t).catch((t=>{Ge.error(t)})).finally((()=>{t.stream.close()}))}),{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}async fetch(t,e,r={}){Ge("dialing %s to %p",this.protocol,t);const n=await this.components.connectionManager.openConnection(t,r);let i,s,o=r.signal;if(null==o){Ge("using default timeout of %d ms",this.init.timeout),i=new y.TimeoutController(this.init.timeout),o=i.signal;try{(0,_.setMaxListeners)?.(1/0,i.signal)}catch{}}try{s=await n.newStream(this.protocol,{signal:o});const t=(0,ht.D7)(s,o);Ge("fetch %s",e);const r=await(0,w.zG)([qe.encode({identifier:e})],mt.c(),t,mt.J(),(async function(t){const r=await(0,b.Z)(t);if(null==r)throw l(new Error("No data received"),a.ERR_INVALID_MESSAGE);const n=He.decode(r);switch(n.status){case He.StatusCode.OK:return Ge("received status for %s ok",e),n.data;case He.StatusCode.NOT_FOUND:return Ge("received status for %s not found",e),null;case He.StatusCode.ERROR:{Ge("received status for %s error",e);const t=(0,Ct.B)(n.data);throw l(new Error("Error in fetch protocol response: "+t),a.ERR_INVALID_PARAMETERS)}default:throw Ge("received status for %s unknown",e),l(new Error("Unknown response status"),a.ERR_INVALID_MESSAGE)}}));return r??null}finally{null!=i&&i.clear(),null!=s&&s.close()}}async handleMessage(t){const{stream:e}=t,r=this;await(0,w.zG)(e,mt.J(),(async function*(t){const e=await(0,b.Z)(t);if(null==e)throw l(new Error("No data received"),a.ERR_INVALID_MESSAGE);const n=qe.decode(e);let i;const s=r._getLookupFunction(n.identifier);if(null!=s){Ge("look up data with identifier %s",n.identifier);const t=await s(n.identifier);null!=t?(Ge("sending status for %s ok",n.identifier),i={status:He.StatusCode.OK,data:t}):(Ge("sending status for %s not found",n.identifier),i={status:He.StatusCode.NOT_FOUND,data:new Uint8Array(0)})}else{Ge("sending status for %s error",n.identifier);const t=(0,It.m)(`No lookup function registered for key: ${n.identifier}`);i={status:He.StatusCode.ERROR,data:t}}yield He.encode(i)}),mt.c(),e)}_getLookupFunction(t){for(const e of this.lookupFunctions.keys())if(t.startsWith(e))return this.lookupFunctions.get(e)}registerLookupFunction(t,e){if(this.lookupFunctions.has(t))throw l(new Error("Fetch protocol handler for key prefix '"+t+"' already registered"),a.ERR_KEY_ALREADY_EXISTS);this.lookupFunctions.set(t,e)}unregisterLookupFunction(t,e){if(null!=e){if(this.lookupFunctions.get(t)!==e)return}this.lookupFunctions.delete(t)}}var Ye=r(73062);const Ze=(0,n.kg)("libp2p:ping");class Qe{constructor(t,e){this.components=t,this.started=!1,this.protocol=`/${e.protocolPrefix}/ping/1.0.0`,this.init=e}async start(){await this.components.registrar.handle(this.protocol,this.handleMessage,{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(t){const{stream:e}=t;(0,w.zG)(e,e).catch((t=>{Ze.error(t)}))}async ping(t,e={}){Ze("dialing %s to %p",this.protocol,t);const r=Date.now(),n=(0,Qt.O6)(32),i=await this.components.connectionManager.openConnection(t,e);let s,o,c=e.signal;if(null==c){s=new y.TimeoutController(this.init.timeout),c=s.signal;try{(0,_.setMaxListeners)?.(1/0,s.signal)}catch{}}try{o=await i.newStream([this.protocol],{signal:c});const t=(0,ht.D7)(o,c),e=await(0,w.zG)([n],t,(async t=>await(0,b.Z)(t))),s=Date.now();if(null==e||!(0,Ye.f)(n,e.subarray()))throw l(new Error("Received wrong ping ack"),a.ERR_WRONG_PING_ACK);return s-r}finally{null!=s&&s.clear(),null!=o&&o.close()}}}var Xe=r(42734),Je=r(14560),tr=r(67031);function er(t){const{address:e}=t.nodeAddress();return(0,tr.B)(e)}const rr=(0,n.kg)("libp2p:nat"),nr=7200;function ir(t=1024,e=65535){return Math.floor(Math.random()*(e-t+1)+t)}class sr{constructor(t,e){if(this.components=t,this.started=!1,this.enabled=e.enabled,this.externalAddress=e.externalAddress,this.localAddress=e.localAddress,this.description=e.description??`libp2p@${Fe} ${this.components.peerId.toString()}`,this.ttl=e.ttl??nr,this.keepAlive=e.keepAlive??!0,this.gateway=e.gateway,this.ttl<nr)throw l(new Error("NatManager ttl should be at least 7200 seconds"),a.ERR_INVALID_PARAMETERS)}isStarted(){return this.started}start(){}afterStart(){Je.jU||!this.enabled||this.started||(this.started=!0,this._start().catch((t=>{rr.error(t)})))}async _start(){const t=this.components.transportManager.getAddrs();for(const e of t){const{family:t,host:r,port:n,transport:i}=e.toOptions();if(!e.isThinWaistAddress()||"tcp"!==i)continue;if(er(e))continue;if(4!==t)continue;const s=await this._getClient(),o=this.externalAddress??await s.externalIp(),a=(0,Ot.Z)(o);if(!0===a)throw new Error(`${o} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);if(null==a)throw new Error(`${o} is not an IP address`);const u=ir();rr(`opening uPnP connection from ${o}:${u} to ${r}:${n}`),await s.map({publicPort:u,localPort:n,localAddress:this.localAddress,protocol:"TCP"===i.toUpperCase()?"TCP":"UDP"}),this.components.addressManager.addObservedAddr((0,c.uv)({family:4,address:o,port:u},i))}}async _getClient(){return null!=this.client||(this.client=await(0,Xe.h)({description:this.description,ttl:this.ttl,keepAlive:this.keepAlive,gateway:this.gateway})),this.client}async stop(){if(!Je.jU&&null!=this.client)try{await this.client.close(),this.client=void 0}catch(t){rr.error(t)}}}const or=(0,n.kg)("libp2p:peer-record-updater");class ar{constructor(t){this.components=t,this.started=!1,this.update=this.update.bind(this)}isStarted(){return this.started}async start(){this.started=!0,this.components.transportManager.addEventListener("listener:listening",this.update),this.components.transportManager.addEventListener("listener:close",this.update),this.components.addressManager.addEventListener("change:addresses",this.update)}async stop(){this.started=!1,this.components.transportManager.removeEventListener("listener:listening",this.update),this.components.transportManager.removeEventListener("listener:close",this.update),this.components.addressManager.removeEventListener("change:addresses",this.update)}update(){Promise.resolve().then((async()=>{const t=new je.K({peerId:this.components.peerId,multiaddrs:this.components.addressManager.getAddresses().map((t=>t.decapsulateCode((0,c.a_)("p2p").code)))}),e=await je.X.seal(t,this.components.peerId);await this.components.peerStore.addressBook.consumePeerRecord(e)})).catch((t=>{or.error("Could not update self peer record: %o",t)}))}}class cr{constructor(t){this.dht=t}async findPeer(t,e={}){for await(const r of this.dht.findPeer(t,e))if("FINAL_PEER"===r.name)return r.peer;throw l(new Error(o.NOT_FOUND),a.ERR_NOT_FOUND)}async*getClosestPeers(t,e={}){for await(const r of this.dht.getClosestPeers(t,e))"FINAL_PEER"===r.name&&(yield r.peer)}}var ur=r(52770);const lr={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_NOT_FOUND:"ERR_NOT_FOUND"},hr=(0,n.kg)("libp2p:peer-store:address-book"),dr="change:multiaddrs";async function fr(){return!0}class pr{constructor(t,e,r){this.dispatchEvent=t,this.store=e,this.addressFilter=r??fr}async consumePeerRecord(t){hr.trace("consumePeerRecord await write lock");const e=await this.store.lock.writeLock();let r,n,s;hr.trace("consumePeerRecord got write lock");try{let e;try{e=je.K.createFromProtobuf(t.payload)}catch(t){return hr.error("invalid peer record received"),!1}r=e.peerId;const i=e.multiaddrs;if(!r.equals(t.peerId))return hr("signing key does not match PeerId in the PeerRecord"),!1;if(null==i||0===i.length)return!1;if(await this.store.has(r)&&(n=await this.store.load(r),null!=n.peerRecordEnvelope)){const t=await je.X.createFromProtobuf(n.peerRecordEnvelope),r=je.K.createFromProtobuf(t.payload);if(r.seqNumber>=e.seqNumber)return hr("sequence number was lower or equal to existing sequence number - stored: %d received: %d",r.seqNumber,e.seqNumber),!1}const o=await gr(r,i,this.addressFilter,!0);s=await this.store.patchOrCreate(r,{addresses:o,peerRecordEnvelope:t.marshal().subarray()}),hr("stored provided peer record for %p",e.peerId)}finally{hr.trace("consumePeerRecord release write lock"),e()}return this.dispatchEvent(new i.A(dr,{detail:{peerId:r,multiaddrs:s.addresses.map((({multiaddr:t})=>t)),oldMultiaddrs:null==n?[]:n.addresses.map((({multiaddr:t})=>t))}})),!0}async getRawEnvelope(t){hr.trace("getRawEnvelope await read lock");const e=await this.store.lock.readLock();hr.trace("getRawEnvelope got read lock");try{return(await this.store.load(t)).peerRecordEnvelope}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}finally{hr.trace("getRawEnvelope release read lock"),e()}}async getPeerRecord(t){const e=await this.getRawEnvelope(t);if(null!=e)return await je.X.createFromProtobuf(e)}async get(t){t=(0,T.vL)(t),hr.trace("get wait for read lock");const e=await this.store.lock.readLock();hr.trace("get got read lock");try{return(await this.store.load(t)).addresses}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}finally{hr.trace("get release read lock"),e()}return[]}async set(t,e){if(t=(0,T.vL)(t),!Array.isArray(e))throw hr.error("multiaddrs must be an array of Multiaddrs"),new ur.s("multiaddrs must be an array of Multiaddrs",lr.ERR_INVALID_PARAMETERS);hr.trace("set await write lock");const r=await this.store.lock.writeLock();hr.trace("set got write lock");let n,s,o=!1;try{const r=await gr(t,e,this.addressFilter);if(0===r.length)return;try{if(n=await this.store.load(t),o=!0,new Set([...r.map((({multiaddr:t})=>t.toString())),...n.addresses.map((({multiaddr:t})=>t.toString()))]).size===n.addresses.length&&r.length===n.addresses.length)return}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}s=await this.store.patchOrCreate(t,{addresses:r}),hr("set multiaddrs for %p",t)}finally{hr.trace("set multiaddrs for %p",t),hr("set release write lock"),r()}this.dispatchEvent(new i.A(dr,{detail:{peerId:t,multiaddrs:s.addresses.map((t=>t.multiaddr)),oldMultiaddrs:null==n?[]:n.addresses.map((({multiaddr:t})=>t))}})),o||this.dispatchEvent(new i.A("peer",{detail:{id:t,multiaddrs:s.addresses.map((t=>t.multiaddr)),protocols:s.protocols}}))}async add(t,e){if(t=(0,T.vL)(t),!Array.isArray(e))throw hr.error("multiaddrs must be an array of Multiaddrs"),new ur.s("multiaddrs must be an array of Multiaddrs",lr.ERR_INVALID_PARAMETERS);hr.trace("add await write lock");const r=await this.store.lock.writeLock();let n,s,o;hr.trace("add got write lock");try{const r=await gr(t,e,this.addressFilter);if(0===r.length)return;try{if(s=await this.store.load(t),n=!0,new Set([...r.map((({multiaddr:t})=>t.toString())),...s.addresses.map((({multiaddr:t})=>t.toString()))]).size===s.addresses.length)return}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}o=await this.store.mergeOrCreate(t,{addresses:r}),hr("added multiaddrs for %p",t)}finally{hr.trace("set release write lock"),r()}this.dispatchEvent(new i.A(dr,{detail:{peerId:t,multiaddrs:o.addresses.map((t=>t.multiaddr)),oldMultiaddrs:null==s?[]:s.addresses.map((({multiaddr:t})=>t))}})),!0===n&&this.dispatchEvent(new i.A("peer",{detail:{id:t,multiaddrs:o.addresses.map((t=>t.multiaddr)),protocols:o.protocols}}))}async delete(t){t=(0,T.vL)(t),hr.trace("delete await write lock");const e=await this.store.lock.writeLock();let r;hr.trace("delete got write lock");try{try{r=await this.store.load(t)}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}await this.store.patchOrCreate(t,{addresses:[]})}finally{hr.trace("delete release write lock"),e()}null!=r&&this.dispatchEvent(new i.A(dr,{detail:{peerId:t,multiaddrs:[],oldMultiaddrs:null==r?[]:r.addresses.map((({multiaddr:t})=>t))}}))}}async function gr(t,e,r,n=!1){const i=[];return await Promise.all(e.map((async e=>{if(!(0,c.h2)(e))throw hr.error("multiaddr must be an instance of Multiaddr"),new ur.s("multiaddr must be an instance of Multiaddr",lr.ERR_INVALID_PARAMETERS);await r(t,e)&&i.push({multiaddr:e,isCertified:n})}))),i}const yr=(0,n.kg)("libp2p:peer-store:key-book"),mr="change:pubkey";class wr{constructor(t,e){this.dispatchEvent=t,this.store=e}async set(t,e){if(t=(0,T.vL)(t),!(e instanceof Uint8Array))throw yr.error("publicKey must be an instance of Uint8Array to store data"),new ur.s("publicKey must be an instance of PublicKey",lr.ERR_INVALID_PARAMETERS);yr.trace("set await write lock");const r=await this.store.lock.writeLock();yr.trace("set got write lock");let n,s=!1;try{try{if(n=await this.store.load(t),null!=n.pubKey&&(0,Ye.f)(n.pubKey,e))return}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}await this.store.patchOrCreate(t,{pubKey:e}),s=!0}finally{yr.trace("set release write lock"),r()}s&&this.dispatchEvent(new i.A(mr,{detail:{peerId:t,publicKey:e,oldPublicKey:null==n?void 0:n.pubKey}}))}async get(t){t=(0,T.vL)(t),yr.trace("get await write lock");const e=await this.store.lock.readLock();yr.trace("get got write lock");try{return(await this.store.load(t)).pubKey}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}finally{yr("get release write lock"),e()}}async delete(t){t=(0,T.vL)(t),yr.trace("delete await write lock");const e=await this.store.lock.writeLock();let r;yr.trace("delete got write lock");try{try{r=await this.store.load(t)}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}await this.store.patchOrCreate(t,{pubKey:void 0})}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}finally{yr.trace("delete release write lock"),e()}this.dispatchEvent(new i.A(mr,{detail:{peerId:t,publicKey:void 0,oldPublicKey:null==r?void 0:r.pubKey}}))}}const br=(0,n.kg)("libp2p:peer-store:metadata-book"),Er="change:metadata";class vr{constructor(t,e){this.dispatchEvent=t,this.store=e}async get(t){t=(0,T.vL)(t),br.trace("get await read lock");const e=await this.store.lock.readLock();br.trace("get got read lock");try{return(await this.store.load(t)).metadata}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}finally{br.trace("get release read lock"),e()}return new Map}async getValue(t,e){t=(0,T.vL)(t),br.trace("getValue await read lock");const r=await this.store.lock.readLock();br.trace("getValue got read lock");try{return(await this.store.load(t)).metadata.get(e)}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}finally{br.trace("getValue release write lock"),r()}}async set(t,e){if(t=(0,T.vL)(t),!(e instanceof Map))throw br.error("valid metadata must be provided to store data"),new ur.s("valid metadata must be provided",lr.ERR_INVALID_PARAMETERS);br.trace("set await write lock");const r=await this.store.lock.writeLock();let n;br.trace("set got write lock");try{try{n=await this.store.load(t)}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}await this.store.mergeOrCreate(t,{metadata:e})}finally{br.trace("set release write lock"),r()}this.dispatchEvent(new i.A(Er,{detail:{peerId:t,metadata:e,oldMetadata:null==n?new Map:n.metadata}}))}async setValue(t,e,r){if(t=(0,T.vL)(t),"string"!=typeof e||!(r instanceof Uint8Array))throw br.error("valid key and value must be provided to store data"),new ur.s("valid key and value must be provided",lr.ERR_INVALID_PARAMETERS);br.trace("setValue await write lock");const n=await this.store.lock.writeLock();let s,o;br.trace("setValue got write lock");try{try{s=await this.store.load(t);const n=s.metadata.get(e);if(null!=n&&(0,Ye.f)(r,n))return}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}o=await this.store.mergeOrCreate(t,{metadata:new Map([[e,r]])})}finally{br.trace("setValue release write lock"),n()}this.dispatchEvent(new i.A(Er,{detail:{peerId:t,metadata:o.metadata,oldMetadata:null==s?new Map:s.metadata}}))}async delete(t){t=(0,T.vL)(t),br.trace("delete await write lock");const e=await this.store.lock.writeLock();let r;br.trace("delete got write lock");try{try{r=await this.store.load(t)}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}null!=r&&await this.store.patch(t,{metadata:new Map})}finally{br.trace("delete release write lock"),e()}null!=r&&this.dispatchEvent(new i.A(Er,{detail:{peerId:t,metadata:new Map,oldMetadata:r.metadata}}))}async deleteValue(t,e){t=(0,T.vL)(t),br.trace("deleteValue await write lock");const r=await this.store.lock.writeLock();let n,s;br.trace("deleteValue got write lock");try{s=await this.store.load(t),n=s.metadata,n.delete(e),await this.store.patch(t,{metadata:n})}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}finally{br.trace("deleteValue release write lock"),r()}null!=n&&this.dispatchEvent(new i.A(Er,{detail:{peerId:t,metadata:n,oldMetadata:null==s?new Map:s.metadata}}))}}const _r=(0,n.kg)("libp2p:peer-store:proto-book"),Sr="change:protocols";class Ar{constructor(t,e){this.dispatchEvent=t,this.store=e}async get(t){_r.trace("get wait for read lock");const e=await this.store.lock.readLock();_r.trace("get got read lock");try{return(await this.store.load(t)).protocols}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}finally{_r.trace("get release read lock"),e()}return[]}async set(t,e){if(t=(0,T.vL)(t),!Array.isArray(e))throw _r.error("protocols must be provided to store data"),new ur.s("protocols must be provided",lr.ERR_INVALID_PARAMETERS);_r.trace("set await write lock");const r=await this.store.lock.writeLock();let n,s;_r.trace("set got write lock");try{try{if(n=await this.store.load(t),new Set([...e]).size===n.protocols.length)return}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}s=await this.store.patchOrCreate(t,{protocols:e}),_r("stored provided protocols for %p",t)}finally{_r.trace("set release write lock"),r()}this.dispatchEvent(new i.A(Sr,{detail:{peerId:t,protocols:s.protocols,oldProtocols:null==n?[]:n.protocols}}))}async add(t,e){if(t=(0,T.vL)(t),!Array.isArray(e))throw _r.error("protocols must be provided to store data"),new ur.s("protocols must be provided",lr.ERR_INVALID_PARAMETERS);_r.trace("add await write lock");const r=await this.store.lock.writeLock();let n,s;_r.trace("add got write lock");try{try{if(n=await this.store.load(t),new Set([...n.protocols,...e]).size===n.protocols.length)return}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}s=await this.store.mergeOrCreate(t,{protocols:e}),_r("added provided protocols for %p",t)}finally{_r.trace("add release write lock"),r()}this.dispatchEvent(new i.A(Sr,{detail:{peerId:t,protocols:s.protocols,oldProtocols:null==n?[]:n.protocols}}))}async remove(t,e){if(t=(0,T.vL)(t),!Array.isArray(e))throw _r.error("protocols must be provided to store data"),new ur.s("protocols must be provided",lr.ERR_INVALID_PARAMETERS);_r.trace("remove await write lock");const r=await this.store.lock.writeLock();let n,s;_r.trace("remove got write lock");try{try{n=await this.store.load(t);const r=new Set(n.protocols);for(const t of e)r.delete(t);if(n.protocols.length===r.size)return;e=Array.from(r)}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}s=await this.store.patchOrCreate(t,{protocols:e})}finally{_r.trace("remove release write lock"),r()}this.dispatchEvent(new i.A(Sr,{detail:{peerId:t,protocols:s.protocols,oldProtocols:null==n?[]:n.protocols}}))}async delete(t){t=(0,T.vL)(t),_r.trace("delete await write lock");const e=await this.store.lock.writeLock();let r;_r.trace("delete got write lock");try{try{r=await this.store.load(t)}catch(t){if(t.code!==lr.ERR_NOT_FOUND)throw t}await this.store.patchOrCreate(t,{protocols:[]})}finally{_r.trace("delete release write lock"),e()}null!=r&&this.dispatchEvent(new i.A(Sr,{detail:{peerId:t,protocols:[],oldProtocols:r.protocols}}))}}var Rr,Tr,Ir,Cr=r(14249),kr=r(46888);!function(t){let e;t.codec=()=>(null==e&&(e=(0,kr.yw)(((t,e,r={})=>{if(!1!==r.lengthDelimited&&e.fork(),null!=t.addresses)for(const r of t.addresses)e.uint32(10),Tr.codec().encode(r,e);if(null!=t.protocols)for(const r of t.protocols)e.uint32(18),e.string(r);if(null!=t.metadata)for(const r of t.metadata)e.uint32(26),Ir.codec().encode(r,e);null!=t.pubKey&&(e.uint32(34),e.bytes(t.pubKey)),null!=t.peerRecordEnvelope&&(e.uint32(42),e.bytes(t.peerRecordEnvelope)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={addresses:[],protocols:[],metadata:[]},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.addresses.push(Tr.codec().decode(t,t.uint32()));break;case 2:r.protocols.push(t.string());break;case 3:r.metadata.push(Ir.codec().decode(t,t.uint32()));break;case 4:r.pubKey=t.bytes();break;case 5:r.peerRecordEnvelope=t.bytes();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>(0,kr.LE)(e,t.codec()),t.decode=e=>(0,kr.C6)(e,t.codec())}(Rr||(Rr={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,kr.yw)(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),null!=t.multiaddr&&t.multiaddr.byteLength>0&&(e.uint32(10),e.bytes(t.multiaddr)),null!=t.isCertified&&(e.uint32(16),e.bool(t.isCertified)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={multiaddr:new Uint8Array(0)},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.multiaddr=t.bytes();break;case 2:r.isCertified=t.bool();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>(0,kr.LE)(e,t.codec()),t.decode=e=>(0,kr.C6)(e,t.codec())}(Tr||(Tr={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,kr.yw)(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),null!=t.key&&""!==t.key&&(e.uint32(10),e.string(t.key)),null!=t.value&&t.value.byteLength>0&&(e.uint32(18),e.bytes(t.value)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={key:"",value:new Uint8Array(0)},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.key=t.string();break;case 2:r.value=t.bytes();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>(0,kr.LE)(e,t.codec()),t.decode=e=>(0,kr.C6)(e,t.codec())}(Ir||(Ir={}));var Nr=r(32398);const Br=(0,n.kg)("libp2p:peer-store:store"),Pr="/peers/";class Lr{constructor(t){this.components=t,this.lock=(0,Nr.Z)({name:"peer-store",singleProcess:!0})}_peerIdToDatastoreKey(t){if(null==t.type)throw Br.error("peerId must be an instance of peer-id to store data"),new ur.s("peerId must be an instance of peer-id",lr.ERR_INVALID_PARAMETERS);const e=t.toCID().toString();return new $t.s(`${Pr}${e}`)}async has(t){return await this.components.datastore.has(this._peerIdToDatastoreKey(t))}async delete(t){await this.components.datastore.delete(this._peerIdToDatastoreKey(t))}async load(t){const e=await this.components.datastore.get(this._peerIdToDatastoreKey(t)),r=Rr.decode(e),n=new Map;for(const t of r.metadata)n.set(t.key,t.value);return{...r,id:t,addresses:r.addresses.map((({multiaddr:t,isCertified:e})=>({multiaddr:(0,c.HM)(t),isCertified:e??!1}))),metadata:n,pubKey:r.pubKey??void 0,peerRecordEnvelope:r.peerRecordEnvelope??void 0}}async save(t){if(null!=t.pubKey&&null!=t.id.publicKey&&!(0,Ye.f)(t.pubKey,t.id.publicKey))throw Br.error("peer publicKey bytes do not match peer id publicKey bytes"),new ur.s("publicKey bytes do not match peer id publicKey bytes",lr.ERR_INVALID_PARAMETERS);const e=new Set,r=t.addresses.filter((t=>!e.has(t.multiaddr.toString())&&(e.add(t.multiaddr.toString()),!0))).sort(((t,e)=>t.multiaddr.toString().localeCompare(e.multiaddr.toString()))).map((({multiaddr:t,isCertified:e})=>({multiaddr:t.bytes,isCertified:e}))),n=[];[...t.metadata.keys()].sort().forEach((e=>{const r=t.metadata.get(e);null!=r&&n.push({key:e,value:r})}));const i=Rr.encode({addresses:r,protocols:t.protocols.sort(),pubKey:t.pubKey,metadata:n,peerRecordEnvelope:t.peerRecordEnvelope});return await this.components.datastore.put(this._peerIdToDatastoreKey(t.id),i.subarray()),await this.load(t.id)}async patch(t,e){const r=await this.load(t);return await this._patch(t,e,r)}async patchOrCreate(t,e){let r;try{r=await this.load(t)}catch(e){if(e.code!==lr.ERR_NOT_FOUND)throw e;r={id:t,addresses:[],protocols:[],metadata:new Map}}return await this._patch(t,e,r)}async _patch(t,e,r){return await this.save({...r,...e,id:t})}async merge(t,e){const r=await this.load(t);return await this._merge(t,e,r)}async mergeOrCreate(t,e){let r;try{r=await this.load(t)}catch(e){if(e.code!==lr.ERR_NOT_FOUND)throw e;r={id:t,addresses:[],protocols:[],metadata:new Map}}return await this._merge(t,e,r)}async _merge(t,e,r){const n=new Map;return r.addresses.forEach((t=>{n.set(t.multiaddr.toString(),t.isCertified)})),(e.addresses??[]).forEach((t=>{const e=t.multiaddr.toString(),r=Boolean(n.get(e))||t.isCertified;n.set(e,r)})),await this.save({id:t,addresses:Array.from(n.entries()).map((([t,e])=>({multiaddr:(0,c.HM)(t),isCertified:e}))),protocols:Array.from(new Set([...r.protocols??[],...e.protocols??[]])),metadata:new Map([...r.metadata?.entries()??[],...e.metadata?.entries()??[]]),pubKey:e.pubKey??(null!=r?r.pubKey:void 0),peerRecordEnvelope:e.peerRecordEnvelope??(null!=r?r.peerRecordEnvelope:void 0)})}async*all(){for await(const t of this.components.datastore.queryKeys({prefix:Pr})){const e=t.toString().split("/")[2],r=Cr.base32.decode(e);yield this.load((0,T.cv)(r))}}}var Dr,Or;!function(t){let e;t.codec=()=>(null==e&&(e=(0,kr.yw)(((t,e,r={})=>{if(!1!==r.lengthDelimited&&e.fork(),null!=t.tags)for(const r of t.tags)e.uint32(10),Or.codec().encode(r,e);!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={tags:[]},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();if(e>>>3==1)r.tags.push(Or.codec().decode(t,t.uint32()));else t.skipType(7&e)}return r}))),e),t.encode=e=>(0,kr.LE)(e,t.codec()),t.decode=e=>(0,kr.C6)(e,t.codec())}(Dr||(Dr={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,kr.yw)(((t,e,r={})=>{!1!==r.lengthDelimited&&e.fork(),null!=t.name&&""!==t.name&&(e.uint32(10),e.string(t.name)),null!=t.value&&(e.uint32(16),e.uint32(t.value)),null!=t.expiry&&(e.uint32(24),e.uint64(t.expiry)),!1!==r.lengthDelimited&&e.ldelim()}),((t,e)=>{const r={name:""},n=null==e?t.len:t.pos+e;for(;t.pos<n;){const e=t.uint32();switch(e>>>3){case 1:r.name=t.string();break;case 2:r.value=t.uint32();break;case 3:r.expiry=t.uint64();break;default:t.skipType(7&e)}}return r}))),e),t.encode=e=>(0,kr.LE)(e,t.codec()),t.decode=e=>(0,kr.C6)(e,t.codec())}(Or||(Or={}));const xr=(0,n.kg)("libp2p:peer-store");class Ur extends i.v{constructor(t,e={}){super(),this.components=t,this.store=new Lr(t),this.addressBook=new pr(this.dispatchEvent.bind(this),this.store,e.addressFilter),this.keyBook=new wr(this.dispatchEvent.bind(this),this.store),this.metadataBook=new vr(this.dispatchEvent.bind(this),this.store),this.protoBook=new Ar(this.dispatchEvent.bind(this),this.store)}async forEach(t){xr.trace("getPeers await read lock");const e=await this.store.lock.readLock();xr.trace("getPeers got read lock");try{for await(const e of this.store.all())e.id.equals(this.components.peerId)||t(e)}finally{xr.trace("getPeers release read lock"),e()}}async all(){const t=[];return await this.forEach((e=>{t.push(e)})),t}async delete(t){xr.trace("delete await write lock");const e=await this.store.lock.writeLock();xr.trace("delete got write lock");try{await this.store.delete(t)}finally{xr.trace("delete release write lock"),e()}}async get(t){xr.trace("get await read lock");const e=await this.store.lock.readLock();xr.trace("get got read lock");try{return await this.store.load(t)}finally{xr.trace("get release read lock"),e()}}async has(t){xr.trace("has await read lock");const e=await this.store.lock.readLock();xr.trace("has got read lock");try{return await this.store.has(t)}finally{xr.trace("has release read lock"),e()}}async tagPeer(t,e,r={}){const n=r.value??0,i=Math.round(n),s=r.ttl??void 0;if(i!==n||i<0||i>100)throw new ur.s("Tag value must be between 0-100","ERR_TAG_VALUE_OUT_OF_BOUNDS");const o=await this.metadataBook.getValue(t,"tags");let a=[];null!=o&&(a=Dr.decode(o).tags),a=a.filter((t=>t.name!==e)),a.push({name:e,value:i,expiry:null==s?void 0:BigInt(Date.now()+s)}),await this.metadataBook.setValue(t,"tags",Dr.encode({tags:a}).subarray())}async unTagPeer(t,e){const r=await this.metadataBook.getValue(t,"tags");let n=[];null!=r&&(n=Dr.decode(r).tags),n=n.filter((t=>t.name!==e)),await this.metadataBook.setValue(t,"tags",Dr.encode({tags:n}).subarray())}async getTags(t){const e=await this.metadataBook.getValue(t,"tags");let r=[];null!=e&&(r=Dr.decode(e).tags);const n=BigInt(Date.now()),i=r.filter((t=>null==t.expiry||t.expiry>n));return i.length!==r.length&&await this.metadataBook.setValue(t,"tags",Dr.encode({tags:i}).subarray()),i.map((t=>({name:t.name,value:t.value??0})))}}class Mr{constructor(t){this.dht=t}async provide(t){await(0,E.Z)(this.dht.provide(t))}async*findProviders(t,e={}){for await(const r of this.dht.findProviders(t,e))"PROVIDER"===r.name&&(yield*r.providers)}async put(t,e,r){await(0,E.Z)(this.dht.put(t,e,r))}async get(t,e){for await(const r of this.dht.get(t,e))if("VALUE"===r.name)return r.value;throw l(new Error("Not found"),"ERR_NOT_FOUND")}}class Vr{constructor(t={}){this._started=!1,this._peerId=t.peerId,this._addressManager=t.addressManager,this._peerStore=t.peerStore,this._upgrader=t.upgrader,this._metrics=t.metrics,this._registrar=t.registrar,this._connectionManager=t.connectionManager,this._transportManager=t.transportManager,this._connectionGater=t.connectionGater,this._contentRouting=t.contentRouting,this._peerRouting=t.peerRouting,this._datastore=t.datastore,this._connectionProtector=t.connectionProtector,this._dht=t.dht,this._pubsub=t.pubsub,this._dialer=t.dialer}isStarted(){return this._started}async beforeStart(){await Promise.all(Object.values(this).filter((t=>s(t))).map((async t=>{null!=t.beforeStart&&await t.beforeStart()})))}async start(){await Promise.all(Object.values(this).filter((t=>s(t))).map((async t=>{await t.start()}))),this._started=!0}async afterStart(){await Promise.all(Object.values(this).filter((t=>s(t))).map((async t=>{null!=t.afterStart&&await t.afterStart()})))}async beforeStop(){await Promise.all(Object.values(this).filter((t=>s(t))).map((async t=>{null!=t.beforeStop&&await t.beforeStop()})))}async stop(){await Promise.all(Object.values(this).filter((t=>s(t))).map((async t=>{await t.stop()}))),this._started=!1}async afterStop(){await Promise.all(Object.values(this).filter((t=>s(t))).map((async t=>{null!=t.afterStop&&await t.afterStop()})))}get peerId(){if(null==this._peerId)throw l(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this._peerId}set peerId(t){this._peerId=t}get addressManager(){if(null==this._addressManager)throw l(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this._addressManager}set addressManager(t){this._addressManager=t}get peerStore(){if(null==this._peerStore)throw l(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this._peerStore}set peerStore(t){this._peerStore=t}get upgrader(){if(null==this._upgrader)throw l(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this._upgrader}set upgrader(t){this._upgrader=t}get registrar(){if(null==this._registrar)throw l(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this._registrar}set registrar(t){this._registrar=t}get connectionManager(){if(null==this._connectionManager)throw l(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this._connectionManager}set connectionManager(t){this._connectionManager=t}get transportManager(){if(null==this._transportManager)throw l(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this._transportManager}set transportManager(t){this._transportManager=t}get connectionGater(){if(null==this._connectionGater)throw l(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this._connectionGater}set connectionGater(t){this._connectionGater=t}get contentRouting(){if(null==this._contentRouting)throw l(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this._contentRouting}set contentRouting(t){this._contentRouting=t}get peerRouting(){if(null==this._peerRouting)throw l(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this._peerRouting}set peerRouting(t){this._peerRouting=t}get datastore(){if(null==this._datastore)throw l(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this._datastore}set datastore(t){this._datastore=t}get connectionProtector(){return this._connectionProtector}set connectionProtector(t){this._connectionProtector=t}get dialer(){if(null==this._dialer)throw l(new Error("dialer not set"),"ERR_SERVICE_MISSING");return this._dialer}set dialer(t){this._dialer=t}get metrics(){return this._metrics}set metrics(t){this._metrics=t}get dht(){return this._dht}set dht(t){this._dht=t}get pubsub(){return this._pubsub}set pubsub(t){this._pubsub=t}}var jr=r(20030),Fr=r(41309).Z;const{code:zr}=(0,jr.Ev)("dnsaddr");const Kr={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:t=>t},connectionManager:{maxConnections:300,minConnections:50,autoDial:!0,autoDialInterval:1e4,maxParallelDials:100,maxDialsPerPeer:4,dialTimeout:3e4,inboundUpgradeTimeout:3e4,resolvers:{dnsaddr:async function(t,e={}){const r=new Fr;null!=e.signal&&e.signal.addEventListener("abort",(()=>{r.cancel()}));const n=t.getPeerId(),[,i]=t.stringTuples().find((([t])=>t===zr))??[];if(null==i)throw new Error("No hostname found in multiaddr");let s=(await r.resolveTxt(`_dnsaddr.${i}`)).flat().map((t=>t.split("=")[1])).filter(Boolean);return null!=n&&(s=s.filter((t=>t.includes(n)))),s}},addressSorter:Ut},connectionGater:{},transportManager:{faultTolerance:At.P7.FATAL_ALL},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},nat:{enabled:!0,ttl:7200,keepAlive:!0},relay:{enabled:!0,advertise:{bootDelay:9e5,enabled:!1,ttl:18e5},hop:{enabled:!1,active:!1,timeout:3e4},autoRelay:{enabled:!1,maxListeners:2}},identify:{protocolPrefix:"ipfs",host:{agentVersion:ze},timeout:6e4,maxInboundStreams:1,maxOutboundStreams:1,maxPushIncomingStreams:1,maxPushOutgoingStreams:1},ping:{protocolPrefix:"ipfs",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4},fetch:{protocolPrefix:"libp2p",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4}};var $r=r(21017),qr=r(41690),Hr=r(59769);class Gr extends i.v{get[Hr.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/dummy-dht"}get wan(){throw l(new Error(o.DHT_DISABLED),a.DHT_DISABLED)}get lan(){throw l(new Error(o.DHT_DISABLED),a.DHT_DISABLED)}get(){throw l(new Error(o.DHT_DISABLED),a.DHT_DISABLED)}findProviders(){throw l(new Error(o.DHT_DISABLED),a.DHT_DISABLED)}findPeer(){throw l(new Error(o.DHT_DISABLED),a.DHT_DISABLED)}getClosestPeers(){throw l(new Error(o.DHT_DISABLED),a.DHT_DISABLED)}provide(){throw l(new Error(o.DHT_DISABLED),a.DHT_DISABLED)}put(){throw l(new Error(o.DHT_DISABLED),a.DHT_DISABLED)}async getMode(){throw l(new Error(o.DHT_DISABLED),a.DHT_DISABLED)}async setMode(){throw l(new Error(o.DHT_DISABLED),a.DHT_DISABLED)}async refreshRoutingTable(){throw l(new Error(o.DHT_DISABLED),a.DHT_DISABLED)}}class Wr extends i.v{constructor(){super(...arguments),this.topicValidators=new Map}isStarted(){return!1}start(){}stop(){}get globalSignaturePolicy(){throw l(new Error(o.PUBSUB_DISABLED),a.ERR_PUBSUB_DISABLED)}get multicodecs(){throw l(new Error(o.PUBSUB_DISABLED),a.ERR_PUBSUB_DISABLED)}getPeers(){throw l(new Error(o.PUBSUB_DISABLED),a.ERR_PUBSUB_DISABLED)}getTopics(){throw l(new Error(o.PUBSUB_DISABLED),a.ERR_PUBSUB_DISABLED)}subscribe(){throw l(new Error(o.PUBSUB_DISABLED),a.ERR_PUBSUB_DISABLED)}unsubscribe(){throw l(new Error(o.PUBSUB_DISABLED),a.ERR_PUBSUB_DISABLED)}getSubscribers(){throw l(new Error(o.PUBSUB_DISABLED),a.ERR_PUBSUB_DISABLED)}async publish(){throw l(new Error(o.PUBSUB_DISABLED),a.ERR_PUBSUB_DISABLED)}}var Yr=r(32044),Zr=r(35103);const Qr=(0,n.kg)("libp2p:dialer:dial-request");class Xr{constructor(t){const{addrs:e,dialAction:r,dialer:n}=t;this.addrs=e,this.dialer=n,this.dialAction=r}async run(t={}){const e=this.dialer.getTokens(this.addrs.length);if(e.length<1)throw l(new Error("No dial tokens available"),a.ERR_NO_DIAL_TOKENS);const r=new Zr;for(const t of e)r.push(t).catch((t=>{Qr.error(t)}));const n=this.addrs.map((()=>{const t=new AbortController;try{(0,_.setMaxListeners)?.(1/0,t.signal)}catch{}return t}));if(null!=t.signal)try{(0,_.setMaxListeners)?.(1/0,t.signal)}catch{}let i=0,s=!1;try{return await Promise.any(this.addrs.map((async(o,c)=>{const u=await r.shift();if(s)throw this.dialer.releaseToken(e.splice(e.indexOf(u),1)[0]),l(new Error("dialAction already succeeded"),a.ERR_ALREADY_SUCCEEDED);const h=n[c];if(null==h)throw l(new Error("dialAction did not come with an AbortController"),a.ERR_INVALID_PARAMETERS);let d;try{const e=h.signal;d=await this.dialAction(o,{...t,signal:null!=t.signal?(0,Yr.anySignal)([e,t.signal]):e}),n[c]=void 0}finally{i++,this.addrs.length-i>=e.length?r.push(u).catch((t=>{Qr.error(t)})):this.dialer.releaseToken(e.splice(e.indexOf(u),1)[0])}if(null==d)throw l(new Error("dialAction led to empty object"),a.ERR_TRANSPORT_DIAL_FAILED);return s=!0,d})))}finally{n.forEach((t=>{void 0!==t&&t.abort()})),e.forEach((t=>this.dialer.releaseToken(t)))}}}const Jr=(0,n.kg)("libp2p:dialer");class tn{constructor(t,e={}){this.started=!1,this.addressSorter=e.addressSorter??Ut,this.maxAddrsToDial=e.maxAddrsToDial??25,this.timeout=e.dialTimeout??3e4,this.maxDialsPerPeer=e.maxDialsPerPeer??4,this.tokens=[...new Array(e.maxParallelDials??100)].map(((t,e)=>e)),this.components=t,this.pendingDials=(0,ge.s)({name:"libp2p_dialler_pending_dials",metrics:t.metrics}),this.pendingDialTargets=(0,ge.s)({name:"libp2p_dialler_pending_dial_targets",metrics:t.metrics});for(const[t,r]of Object.entries(e.resolvers??{}))c.s_.set(t,r)}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1;for(const t of this.pendingDials.values())try{t.controller.abort()}catch(t){Jr.error(t)}this.pendingDials.clear();for(const t of this.pendingDialTargets.values())t.abort();this.pendingDialTargets.clear()}async dial(t,e={}){const{peerId:r,multiaddr:n}=j(t);if(null!=r){if(this.components.peerId.equals(r))throw l(new Error("Tried to dial self"),a.ERR_DIALED_SELF);if(null!=n&&(Jr("storing multiaddrs %p",r,n),await this.components.peerStore.addressBook.add(r,[n])),await this.components.connectionGater.denyDialPeer(r))throw l(new Error("The dial request is blocked by gater.allowDialPeer"),a.ERR_PEER_DIAL_INTERCEPTED)}Jr("creating dial target for %p",r);const i=new AbortController,s=rn();this.pendingDialTargets.set(s,i);let o,c=i.signal;null!=e.signal&&(c=(0,Yr.anySignal)([c,e.signal]));try{o=await this._createDialTarget({peerId:r,multiaddr:n},{...e,signal:c})}finally{this.pendingDialTargets.delete(s)}if(0===o.addrs.length)throw l(new Error("The dial request has no valid addresses"),a.ERR_NO_VALID_ADDRESSES);const u=this.pendingDials.get(o.id)??this._createPendingDial(o,e);try{const t=await u.promise;return Jr("dial succeeded to %s",o.id),t}catch(t){throw Jr("dial failed to %s",o.id,t),u.controller.signal.aborted&&(t.code=a.ERR_TIMEOUT),Jr.error(t),t}finally{u.destroy()}}async _createDialTarget(t,e){let r=[];if((0,c.h2)(t.multiaddr)&&r.push(t.multiaddr),!(0,c.h2)(t.multiaddr)&&(0,D.I)(t.peerId)&&r.push(...await this._loadAddresses(t.peerId)),r=(await Promise.all(r.map((async t=>await this._resolve(t,e))))).flat().filter((t=>Boolean(this.components.transportManager.transportForMultiaddr(t)))),r=[...new Set(r.map((t=>t.toString())))].map((t=>(0,c.HM)(t))),r.length>this.maxAddrsToDial)throw l(new Error("dial with more addresses than allowed"),a.ERR_TOO_MANY_ADDRESSES);const n=(0,D.I)(t.peerId)?t.peerId:void 0;if(null!=n){const t=`/p2p/${n.toString()}`;r=r.map((e=>{const r=e.getPeerId();return null!=r&&n.equals(r)?e:e.encapsulate(t)}))}return{id:null==n?rn():n.toString(),addrs:r}}async _loadAddresses(t){const e=await this.components.peerStore.addressBook.get(t);return(await Promise.all(e.map((async e=>!await this.components.connectionGater.denyDialMultiaddr(t,e.multiaddr)&&e)))).filter(en).sort(this.addressSorter).map((t=>t.multiaddr))}_createPendingDial(t,e={}){const r=new Xr({addrs:t.addrs,dialAction:async(t,e={})=>{if(!0===e.signal?.aborted)throw l(new Error("already aborted"),a.ERR_ALREADY_ABORTED);return await this.components.transportManager.dial(t,e).catch((e=>{throw Jr.error("dial to %s failed",t,e),e}))},dialer:this}),n=new y.TimeoutController(this.timeout),i=[n.signal];null!=e.signal&&i.push(e.signal);const s=(0,Yr.anySignal)(i);try{(0,_.setMaxListeners)?.(1/0,s)}catch{}const o={dialRequest:r,controller:n,promise:r.run({...e,signal:s}),destroy:()=>{n.clear(),this.pendingDials.delete(t.id)}};return this.pendingDials.set(t.id,o),o}getTokens(t){const e=Math.min(t,this.maxDialsPerPeer,this.tokens.length),r=this.tokens.splice(0,e);return Jr("%d tokens request, returning %d, %d remaining",t,e,this.tokens.length),r}releaseToken(t){this.tokens.includes(t)||(Jr("token %d released",t),this.tokens.push(t))}async _resolve(t,e){if(!t.protoNames().includes("dnsaddr"))return[t];const r=await this._resolveRecord(t,e);return(await Promise.all(r.map((async t=>await this._resolve(t,e))))).flat().reduce(((t,e)=>(null==t.find((t=>t.equals(e)))&&t.push(e),t)),[])}async _resolveRecord(t,e){try{t=(0,c.HM)(t.toString());return await t.resolve(e)}catch(e){return Jr.error(`multiaddr ${t.toString()} could not be resolved`,e),[]}}}function en(t){return Boolean(t)}function rn(){return`${parseInt(String(1e9*Math.random()),10).toString()}${Date.now()}`}const nn=(0,n.kg)("libp2p");class sn extends i.v{constructor(t){super(),this.started=!1,this.peerId=t.peerId;const e=this.components=new Vr({peerId:t.peerId,datastore:t.datastore??new u.a,connectionGater:{denyDialPeer:async()=>await Promise.resolve(!1),denyDialMultiaddr:async()=>await Promise.resolve(!1),denyInboundConnection:async()=>await Promise.resolve(!1),denyOutboundConnection:async()=>await Promise.resolve(!1),denyInboundEncryptedConnection:async()=>await Promise.resolve(!1),denyOutboundEncryptedConnection:async()=>await Promise.resolve(!1),denyInboundUpgradedConnection:async()=>await Promise.resolve(!1),denyOutboundUpgradedConnection:async()=>await Promise.resolve(!1),filterMultiaddrForPeer:async()=>await Promise.resolve(!0),...t.connectionGater}});e.peerStore=new Ur(e,{addressFilter:this.components.connectionGater.filterMultiaddrForPeer,...t.peerStore}),this.services=[e],null!=t.metrics&&(this.metrics=this.components.metrics=this.configureComponent(t.metrics(this.components))),this.peerStore=this.components.peerStore,this.peerStore.addEventListener("peer",(t=>{const{detail:e}=t;this.dispatchEvent(new i.A("peer:discovery",{detail:e}))})),null!=t.connectionProtector&&(this.components.connectionProtector=t.connectionProtector(e)),this.components.upgrader=new Me(this.components,{connectionEncryption:(t.connectionEncryption??[]).map((t=>this.configureComponent(t(this.components)))),muxers:(t.streamMuxers??[]).map((t=>this.configureComponent(t(this.components)))),inboundUpgradeTimeout:t.connectionManager.inboundUpgradeTimeout}),this.components.dialer=new tn(this.components,t.connectionManager),this.connectionManager=this.components.connectionManager=new K(this.components,t.connectionManager),this.components.connectionManager.addEventListener("peer:disconnect",(t=>{this.dispatchEvent(new i.A("peer:disconnect",{detail:t.detail}))})),this.components.connectionManager.addEventListener("peer:connect",(t=>{this.dispatchEvent(new i.A("peer:connect",{detail:t.detail}))})),this.registrar=this.components.registrar=new Oe(this.components),this.components.transportManager=new me(this.components,t.transportManager),this.components.addressManager=new C(this.components,t.addresses),this.configureComponent(new ar(this.components)),this.configureComponent(new Y(this.components,{enabled:t.connectionManager.autoDial,minConnections:t.connectionManager.minConnections,autoDialInterval:t.connectionManager.autoDialInterval}));const r=ue.generateOptions();this.keychain=this.configureComponent(new ue(this.components,{...r,...t.keychain})),this.services.push(new sr(this.components,t.nat)),t.transports.forEach((t=>{this.components.transportManager.add(this.configureComponent(t(this.components)))})),this.identifyService=new $e(this.components,{...t.identify}),this.configureComponent(this.identifyService),null!=t.dht?this.dht=this.components.dht=t.dht(this.components):this.dht=new Gr,null!=t.pubsub?this.pubsub=this.components.pubsub=t.pubsub(this.components):this.pubsub=new Wr;const n=(t.peerRouters??[]).map((t=>this.configureComponent(t(this.components))));null!=t.dht&&(n.push(this.configureComponent(new cr(this.dht))),this.dht.addEventListener("peer",(t=>{this.onDiscoveryPeer(t)}))),this.peerRouting=this.components.peerRouting=this.configureComponent(new A(this.components,{...t.peerRouting,routers:n}));const s=(t.contentRouters??[]).map((t=>this.configureComponent(t(this.components))));null!=t.dht&&s.push(this.configureComponent(new Mr(this.dht))),this.contentRouting=this.components.contentRouting=this.configureComponent(new R(this.components,{routers:s})),t.relay.enabled&&(this.components.transportManager.add(this.configureComponent(new Tt(this.components,t.relay))),this.configureComponent(new zt(this.components,{addressSorter:t.connectionManager.addressSorter,...t.relay}))),this.fetchService=this.configureComponent(new We(this.components,{...t.fetch})),this.pingService=this.configureComponent(new Qe(this.components,{...t.ping}));for(const e of t.peerDiscovery??[]){this.configureComponent(e(this.components)).addEventListener("peer",(t=>{this.onDiscoveryPeer(t)}))}}configureComponent(t){return s(t)&&this.services.push(t),t}async start(){if(!this.started){this.started=!0,nn("libp2p is starting");try{await Promise.all(this.services.map((async t=>{null!=t.beforeStart&&await t.beforeStart()}))),await Promise.all(this.services.map((t=>t.start()))),await Promise.all(this.services.map((async t=>{null!=t.afterStart&&await t.afterStart()}))),nn("libp2p has started")}catch(t){throw nn.error("An error occurred starting libp2p",t),await this.stop(),t}}}async stop(){this.started&&(nn("libp2p is stopping"),this.started=!1,await Promise.all(this.services.map((async t=>{null!=t.beforeStop&&await t.beforeStop()}))),await Promise.all(this.services.map((t=>t.stop()))),await Promise.all(this.services.map((async t=>{null!=t.afterStop&&await t.afterStop()}))),nn("libp2p has stopped"))}isStarted(){return this.started}getConnections(t){return this.components.connectionManager.getConnections(t)}getPeers(){const t=new M.fd;for(const e of this.components.connectionManager.getConnections())t.add(e.remotePeer);return Array.from(t)}async dial(t,e={}){return await this.components.connectionManager.openConnection(t,e)}async dialProtocol(t,e,r={}){if(null==e)throw l(new Error("no protocols were provided to open a stream"),a.ERR_INVALID_PROTOCOLS_FOR_STREAM);if(0===(e=Array.isArray(e)?e:[e]).length)throw l(new Error("no protocols were provided to open a stream"),a.ERR_INVALID_PROTOCOLS_FOR_STREAM);const n=await this.dial(t,r);return await n.newStream(e,r)}getMultiaddrs(){return this.components.addressManager.getAddresses()}getProtocols(){return this.components.registrar.getProtocols()}async hangUp(t){(0,c.h2)(t)&&(t=(0,T.jE)(t.getPeerId()??"")),await this.components.connectionManager.closeConnections(t)}async getPublicKey(t,e={}){if(nn("getPublicKey %p",t),null!=t.publicKey)return t.publicKey;const r=await this.peerStore.get(t);if(null!=r.pubKey)return r.pubKey;if(null==this.dht)throw l(new Error("Public key was not in the peer store and the DHT is not enabled"),a.ERR_NO_ROUTERS_AVAILABLE);const n=(0,qr.z)([(0,It.m)("/pk/"),t.multihash.digest]);for await(const r of this.dht.get(n,e))if("VALUE"===r.name){const e=(0,Zt.unmarshalPublicKey)(r.value);return await this.peerStore.keyBook.set(t,r.value),e.bytes}throw l(new Error(`Node not responding with its public key: ${t.toString()}`),a.ERR_INVALID_RECORD)}async fetch(t,e,r={}){if((0,c.h2)(t)){const e=(0,T.jE)(t.getPeerId()??"");await this.components.peerStore.addressBook.add(e,[t]),t=e}return await this.fetchService.fetch(t,e,r)}async ping(t,e={}){if((0,c.h2)(t)){const e=(0,T.jE)(t.getPeerId()??"");await this.components.peerStore.addressBook.add(e,[t]),t=e}return await this.pingService.ping(t,e)}async handle(t,e,r){Array.isArray(t)||(t=[t]),await Promise.all(t.map((async t=>{await this.components.registrar.handle(t,e,r)})))}async unhandle(t){Array.isArray(t)||(t=[t]),await Promise.all(t.map((async t=>{await this.components.registrar.unhandle(t)})))}async register(t,e){return await this.registrar.register(t,e)}unregister(t){this.registrar.unregister(t)}onDiscoveryPeer(t){const{detail:e}=t;e.id.toString()!==this.peerId.toString()?(e.multiaddrs.length>0&&this.components.peerStore.addressBook.add(e.id,e.multiaddrs).catch((t=>nn.error(t))),e.protocols.length>0&&this.components.peerStore.protoBook.set(e.id,e.protocols).catch((t=>nn.error(t))),this.dispatchEvent(new i.A("peer:discovery",{detail:e}))):nn.error(new Error(a.ERR_DISCOVERED_SELF))}}async function on(t){if(null==t.peerId){const e=t.datastore;if(null!=e)try{const r=new ue({datastore:e},{...ue.generateOptions(),...t.keychain??{}});t.peerId=await r.exportPeerId("self")}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}}return null==t.peerId&&(t.peerId=await(0,$r.n9)()),new sn(function(t){const e=(0,k.Z)(Kr,t);if(null==e.transports||e.transports.length<1)throw l(new Error(o.ERR_TRANSPORTS_REQUIRED),a.ERR_TRANSPORTS_REQUIRED);if(null==e.connectionEncryption||0===e.connectionEncryption.length)throw l(new Error(o.CONN_ENCRYPTION_REQUIRED),a.CONN_ENCRYPTION_REQUIRED);if(null===e.connectionProtector&&null!=globalThis.process?.env?.LIBP2P_FORCE_PNET)throw l(new Error(o.ERR_PROTECTOR_REQUIRED),a.ERR_PROTECTOR_REQUIRED);return e.identify.host.agentVersion===ze&&(Je.UG||Je.$l?e.identify.host.agentVersion+=` UserAgent=${globalThis.process.version}`:(Je.jU||Je.n2||Je.iP||Je.b$)&&(e.identify.host.agentVersion+=` UserAgent=${globalThis.navigator.userAgent}`)),e}(t))}async function an(t){const e=await on(t);return!1!==t.start&&await e.start(),e}},32398:function(t,e,r){"use strict";r.d(e,{Z:function(){return I}});var n=r(28364);class i extends Error{constructor(t){super(t),this.name="TimeoutError"}}class s extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const o=t=>void 0===globalThis.DOMException?new s(t):new DOMException(t),a=t=>{const e=void 0===t.reason?o("This operation was aborted."):t.reason;return e instanceof Error?e:o(e)};var c=r(53416);const u="lock:worker:request-read",l="lock:worker:release-read",h="lock:master:grant-read",d="lock:worker:request-write",f="lock:worker:release-write",p="lock:master:grant-write",g={},y=t=>{t.addEventListener("message",(e=>{y.dispatchEvent("message",t,e)})),null!=t.port&&t.port.addEventListener("message",(e=>{y.dispatchEvent("message",t,e)}))};y.addEventListener=(t,e)=>{null==g[t]&&(g[t]=[]),g[t].push(e)},y.removeEventListener=(t,e)=>{null!=g[t]&&(g[t]=g[t].filter((t=>t===e)))},y.dispatchEvent=function(t,e,r){null!=g[t]&&g[t].forEach((t=>t(e,r)))};var m=y;const w=(t,e,r,n,i)=>(s,o)=>{if(o.data.type!==r)return;const a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};t.dispatchEvent(new MessageEvent(e,{data:{name:a.name,handler:async()=>(s.postMessage({type:i,name:a.name,identifier:a.identifier}),await new Promise((t=>{const e=r=>{if(null==r||null==r.data)return;const i=r.data.type,o=(r.data.name,r.data.identifier);i===n&&o===a.identifier&&(s.removeEventListener("message",e),t())};s.addEventListener("message",e)})))}}))},b=(t,e,r,n)=>async()=>{const i=(0,c.x0)();return globalThis.postMessage({type:e,identifier:i,name:t}),await new Promise((e=>{const s=o=>{if(null==o||null==o.data)return;const a=o.data.type,c=o.data.identifier;a===r&&c===i&&(globalThis.removeEventListener("message",s),e((()=>{globalThis.postMessage({type:n,identifier:i,name:t})})))};globalThis.addEventListener("message",s)}))},E={singleProcess:!1};var v=t=>{t=Object.assign({},E,t);if(Boolean(globalThis.document)||t.singleProcess){const t=new EventTarget;return m.addEventListener("message",w(t,"requestReadLock",u,l,h)),m.addEventListener("message",w(t,"requestWriteLock",d,f,p)),t}return{isWorker:!0,readLock:t=>b(t,u,h,l),writeLock:t=>b(t,d,p,f)}};const _={};let S;async function A(t,e){let r;const n=new Promise((t=>{r=t}));return t.add((async()=>await function(t,e){const{milliseconds:r,fallback:n,message:s,customTimers:o={setTimeout:setTimeout,clearTimeout:clearTimeout}}=e;let c;const u=new Promise(((u,l)=>{if("number"!=typeof r||1!==Math.sign(r))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(r===Number.POSITIVE_INFINITY)return void u(t);if(e.signal){const{signal:t}=e;t.aborted&&l(a(t)),t.addEventListener("abort",(()=>{l(a(t))}))}const h=new i;c=o.setTimeout.call(void 0,(()=>{if(n)try{u(n())}catch(t){l(t)}else"function"==typeof t.cancel&&t.cancel(),!1===s?u():s instanceof Error?l(s):(h.message=s??`Promise timed out after ${r} milliseconds`,l(h))}),r),(async()=>{try{u(await t)}catch(t){l(t)}finally{o.clearTimeout.call(void 0,c)}})()}));return u.clear=()=>{o.clearTimeout.call(void 0,c),c=void 0},u}((async()=>await new Promise((t=>{r((()=>{t()}))})))(),{milliseconds:e.timeout}))),await n}const R=(t,e)=>{if(!0===S.isWorker)return{readLock:S.readLock(t,e),writeLock:S.writeLock(t,e)};const r=new n.Z({concurrency:1});let i;return{async readLock(){if(null!=i)return await A(i,e);i=new n.Z({concurrency:e.concurrency,autoStart:!1});const t=i,s=A(i,e);return r.add((async()=>(t.start(),await t.onIdle().then((()=>{i===t&&(i=null)}))))),await s},writeLock:async()=>(i=null,await A(r,e))}},T={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function I(t){const e=Object.assign({},T,t);return null==S&&(S=v(e),!0!==S.isWorker&&(S.addEventListener("requestReadLock",(t=>{null!=_[t.data.name]&&_[t.data.name].readLock().then((async e=>await t.data.handler().finally((()=>e()))))})),S.addEventListener("requestWriteLock",(async t=>{null!=_[t.data.name]&&_[t.data.name].writeLock().then((async e=>await t.data.handler().finally((()=>e()))))})))),null==_[e.name]&&(_[e.name]=R(e.name,e)),_[e.name]}},75385:function(t,e,r){"use strict";r.d(e,{kU:function(){return h},Dp:function(){return l},ET:function(){return d}});var n=function(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){for(var n=0,i=0;t[e]===c;)n++,e++;for(var s=(t.length-e)*u+1>>>0,o=new Uint8Array(s);t[e];){var l=r[t.charCodeAt(e)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,e++}if(" "!==t[e]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,n=0,i=0,s=e.length;i!==s&&0===e[i];)i++,r++;for(var o=(s-i)*l+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=e[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=t.charAt(u[p]);return g},decodeUnsafe:h,decode:function(t){var r=h(t);if(r)return r;throw new Error(`Non-${e} character`)}}},i=r(7176);class s{constructor(t,e,r){this.name=t,this.prefix=e,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class o{constructor(t,e,r){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=r}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return c(this,t)}}class a{constructor(t){this.decoders=t}or(t){return c(this,t)}decode(t){const e=t[0],r=this.decoders[e];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const c=(t,e)=>new a({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class u{constructor(t,e,r,n){this.name=t,this.prefix=e,this.baseEncode=r,this.baseDecode=n,this.encoder=new s(t,e,r),this.decoder=new o(t,e,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const l=({name:t,prefix:e,encode:r,decode:n})=>new u(t,e,r,n),h=({prefix:t,name:e,alphabet:r})=>{const{encode:s,decode:o}=n(r,e);return l({prefix:t,name:e,encode:s,decode:t=>(0,i.coerce)(o(t))})},d=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>l({prefix:e,name:t,encode:t=>((t,e,r)=>{const n="="===e[e.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<t.length;++n)for(a=a<<8|t[n],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(t,n,r),decode:e=>((t,e,r,n)=>{const i={};for(let t=0;t<e.length;++t)i[e[t]]=t;let s=t.length;for(;"="===t[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let e=0;e<s;++e){const s=i[t[e]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(e,n,r,t)})},14249:function(t,e,r){"use strict";r.r(e),r.d(e,{base32:function(){return i},base32hex:function(){return c},base32hexpad:function(){return l},base32hexpadupper:function(){return h},base32hexupper:function(){return u},base32pad:function(){return o},base32padupper:function(){return a},base32upper:function(){return s},base32z:function(){return d}});var n=r(75385);const i=(0,n.ET)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s=(0,n.ET)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),o=(0,n.ET)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=(0,n.ET)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c=(0,n.ET)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),u=(0,n.ET)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),l=(0,n.ET)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),h=(0,n.ET)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),d=(0,n.ET)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},68673:function(t,e,r){"use strict";r.r(e),r.d(e,{base36:function(){return i},base36upper:function(){return s}});var n=r(75385);const i=(0,n.kU)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),s=(0,n.kU)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})},81653:function(t,e,r){"use strict";r.r(e),r.d(e,{base58btc:function(){return i},base58flickr:function(){return s}});var n=r(75385);const i=(0,n.kU)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s=(0,n.kU)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},99382:function(t,e,r){"use strict";r.r(e),r.d(e,{base64:function(){return i},base64pad:function(){return s},base64url:function(){return o},base64urlpad:function(){return a}});var n=r(75385);const i=(0,n.ET)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),s=(0,n.ET)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),o=(0,n.ET)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),a=(0,n.ET)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})},97098:function(t,e,r){"use strict";r.d(e,{gh:function(){return k},QB:function(){return B},kq:function(){return N}});var n={};r.r(n),r.d(n,{identity:function(){return h}});var i={};r.r(i),r.d(i,{base2:function(){return d}});var s={};r.r(s),r.d(s,{base8:function(){return f}});var o={};r.r(o),r.d(o,{base10:function(){return p}});var a={};r.r(a),r.d(a,{base16:function(){return g},base16upper:function(){return y}});var c={};r.r(c),r.d(c,{base256emoji:function(){return A}});var u=r(75385),l=r(7176);const h=(0,u.Dp)({prefix:"\0",name:"identity",encode:t=>(0,l.toString)(t),decode:t=>(0,l.fromString)(t)}),d=(0,u.ET)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),f=(0,u.ET)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),p=(0,u.kU)({prefix:"9",name:"base10",alphabet:"0123456789"}),g=(0,u.ET)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),y=(0,u.ET)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var m=r(14249),w=r(68673),b=r(81653),E=r(99382);const v=Array.from(""),_=v.reduce(((t,e,r)=>(t[r]=e,t)),[]),S=v.reduce(((t,e,r)=>(t[e.codePointAt(0)]=r,t)),[]);const A=(0,u.Dp)({prefix:"",name:"base256emoji",encode:function(t){return t.reduce(((t,e)=>t+=_[e]),"")},decode:function(t){const e=[];for(const r of t){const t=S[r.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${r}`);e.push(t)}return new Uint8Array(e)}});var R=r(27353),T=r(38566),I=r(53137),C=r(22188);r(11015);const k={...n,...i,...s,...o,...a,...m,...w,...b,...E,...c},N={...R,...T},B={raw:I,json:C}},7618:function(t,e,r){"use strict";r.d(e,{OV:function(){return l}});var n=r(11015);function i({enumerable:t=!0,configurable:e=!1}={}){return{enumerable:t,configurable:e,writable:!1}}function*s(t,e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))for(const[r,i]of e.entries()){const e=[...t,r],s=n.k0.asCID(i);s?yield[e.join("/"),s]:"object"==typeof i&&(yield*o(i,e))}else{const r=n.k0.asCID(e);r?yield[t.join("/"),r]:yield*o(e,t)}}function*o(t,e){if(null==t||t instanceof Uint8Array)return;const r=n.k0.asCID(t);r&&(yield[e.join("/"),r]);for(const[r,n]of Object.entries(t)){const t=[...e,r];yield*s(t,n)}}function*a(t,e){if(Array.isArray(e))for(const[r,i]of e.entries()){const e=[...t,r];yield e.join("/"),"object"!=typeof i||n.k0.asCID(i)||(yield*c(i,e))}else yield*c(e,t)}function*c(t,e){if(null!=t&&"object"==typeof t)for(const[r,i]of Object.entries(t)){const t=[...e,r];yield t.join("/"),null==i||i instanceof Uint8Array||"object"!=typeof i||n.k0.asCID(i)||(yield*a(t,i))}}class u{constructor({cid:t,bytes:e,value:r}){if(!t||!e||void 0===r)throw new Error("Missing required argument");this.cid=t,this.bytes=e,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:i(),bytes:i(),value:i(),asBlock:i()})}links(){return o(this.value,[])}tree(){return c(this.value,[])}get(t="/"){return function(t,e){let r=t;for(const[t,i]of e.entries()){if(r=r[i],null==r)throw new Error(`Object has no property at ${e.slice(0,t+1).map((t=>`[${JSON.stringify(t)}]`)).join("")}`);const s=n.k0.asCID(r);if(s)return{value:s,remaining:e.slice(t+1).join("/")}}return{value:r}}(this.value,t.split("/").filter(Boolean))}}function l({bytes:t,cid:e,value:r,codec:n}){const i=void 0!==r?r:n&&n.decode(t);if(void 0===i)throw new Error('Missing required argument, must either provide "value" or "codec"');return new u({cid:e,bytes:t,value:i})}},7176:function(t,e,r){"use strict";r.r(e),r.d(e,{coerce:function(){return a},empty:function(){return n},equals:function(){return o},fromHex:function(){return s},fromString:function(){return u},isBinary:function(){return c},toHex:function(){return i},toString:function(){return l}});const n=new Uint8Array(0),i=t=>t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),""),s=t=>{const e=t.match(/../g);return e?new Uint8Array(e.map((t=>parseInt(t,16)))):n},o=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},a=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},c=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),u=t=>(new TextEncoder).encode(t),l=t=>(new TextDecoder).decode(t)},38161:function(t,e,r){"use strict";r.d(e,{k0:function(){return h}});var n=r(73438),i=r(29094),s=r(81653),o=r(14249),a=r(7176);const c=(t,e)=>{const{bytes:r,version:n}=t;return 0===n?f(r,l(t),e||s.base58btc.encoder):p(r,l(t),e||o.base32.encoder)},u=new WeakMap,l=t=>{const e=u.get(t);if(null==e){const e=new Map;return u.set(t,e),e}return e};class h{constructor(t,e,r,n){this.code=e,this.version=t,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:e}=this;if(t!==g)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==y)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return h.createV0(e)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:e}=this.multihash,r=i.Ue(t,e);return h.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return h.equals(this,t)}static equals(t,e){const r=e;return r&&t.code===r.code&&t.version===r.version&&i.fS(t.multihash,r.multihash)}toString(t){return c(this,t)}toJSON(){return{"/":c(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(null==t)return null;const e=t;if(e instanceof h)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){const{version:t,code:r,multihash:n,bytes:i}=e;return new h(t,r,n,i||m(t,r,n.bytes))}if(!0===e[w]){const{version:t,multihash:r,code:n}=e,s=i.Jx(r);return h.create(t,n,s)}return null}static create(t,e,r){if("number"!=typeof e)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:if(e!==g)throw new Error(`Version 0 CID must use dag-pb (code: ${g}) block encoding`);return new h(t,e,r,r.bytes);case 1:{const n=m(t,e,r.bytes);return new h(t,e,r,n)}default:throw new Error("Invalid version")}}static createV0(t){return h.create(0,g,t)}static createV1(t,e){return h.create(1,t,e)}static decode(t){const[e,r]=h.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=h.inspectBytes(t),r=e.size-e.multihashSize,n=(0,a.coerce)(t.subarray(r,r+e.multihashSize));if(n.byteLength!==e.multihashSize)throw new Error("Incorrect length");const s=n.subarray(e.multihashSize-e.digestSize),o=new i.zZ(e.multihashCode,e.digestSize,s,n);return[0===e.version?h.createV0(o):h.createV1(e.codec,o),t.subarray(e.size)]}static inspectBytes(t){let e=0;const r=()=>{const[r,i]=n.Jx(t.subarray(e));return e+=i,r};let i=r(),s=g;if(18===i?(i=0,e=0):s=r(),0!==i&&1!==i)throw new RangeError(`Invalid CID version ${i}`);const o=e,a=r(),c=r(),u=e+c;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:u-o,size:u}}static parse(t,e){const[r,n]=d(t,e),i=h.decode(n);if(0===i.version&&"Q"!==t[0])throw Error("Version 0 CID string must not include multibase prefix");return l(i).set(r,t),i}}const d=(t,e)=>{switch(t[0]){case"Q":{const r=e||s.base58btc;return[s.base58btc.prefix,r.decode(`${s.base58btc.prefix}${t}`)]}case s.base58btc.prefix:{const r=e||s.base58btc;return[s.base58btc.prefix,r.decode(t)]}case o.base32.prefix:{const r=e||o.base32;return[o.base32.prefix,r.decode(t)]}default:if(null==e)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}},f=(t,e,r)=>{const{prefix:n}=r;if(n!==s.base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(null==i){const i=r.encode(t).slice(1);return e.set(n,i),i}return i},p=(t,e,r)=>{const{prefix:n}=r,i=e.get(n);if(null==i){const i=r.encode(t);return e.set(n,i),i}return i},g=112,y=18,m=(t,e,r)=>{const i=n.P$(t),s=i+n.P$(e),o=new Uint8Array(s+r.byteLength);return n.mL(t,o,0),n.mL(e,o,i),o.set(r,s),o},w=Symbol.for("@ipld/js-cid/CID")},22188:function(t,e,r){"use strict";r.r(e),r.d(e,{code:function(){return o},decode:function(){return c},encode:function(){return a},name:function(){return s}});const n=new TextEncoder,i=new TextDecoder,s="json",o=512,a=t=>n.encode(JSON.stringify(t)),c=t=>JSON.parse(i.decode(t))},53137:function(t,e,r){"use strict";r.r(e),r.d(e,{code:function(){return s},decode:function(){return a},encode:function(){return o},name:function(){return i}});var n=r(7176);const i="raw",s=85,o=t=>(0,n.coerce)(t),a=t=>(0,n.coerce)(t)},29094:function(t,e,r){"use strict";r.d(e,{Jx:function(){return o},Ue:function(){return s},fS:function(){return a},zZ:function(){return c}});var n=r(7176),i=r(73438);const s=(t,e)=>{const r=e.byteLength,n=i.P$(t),s=n+i.P$(r),o=new Uint8Array(s+r);return i.mL(t,o,0),i.mL(r,o,n),o.set(e,s),new c(t,r,e,o)},o=t=>{const e=(0,n.coerce)(t),[r,s]=i.Jx(e),[o,a]=i.Jx(e.subarray(s)),u=e.subarray(s+a);if(u.byteLength!==o)throw new Error("Incorrect length");return new c(r,o,u,e)},a=(t,e)=>{if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&(0,n.equals)(t.bytes,r.bytes)}};class c{constructor(t,e,r,n){this.code=t,this.size=e,this.digest=r,this.bytes=n}}},22688:function(t,e,r){"use strict";r.d(e,{D:function(){return i}});var n=r(29094);const i=({name:t,code:e,encode:r})=>new s(t,e,r);class s{constructor(t,e,r){this.name=t,this.code=e,this.encode=r}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?n.Ue(this.code,e):e.then((t=>n.Ue(this.code,t)))}throw Error("Unknown type, must be binary type")}}},38566:function(t,e,r){"use strict";r.r(e),r.d(e,{identity:function(){return o}});var n=r(7176),i=r(29094);const s=n.coerce,o={code:0,name:"identity",encode:s,digest:t=>i.Ue(0,s(t))}},27353:function(t,e,r){"use strict";r.r(e),r.d(e,{sha256:function(){return s},sha512:function(){return o}});var n=r(22688);const i=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),s=(0,n.D)({name:"sha2-256",code:18,encode:i("SHA-256")}),o=(0,n.D)({name:"sha2-512",code:19,encode:i("SHA-512")})},11015:function(t,e,r){"use strict";r.d(e,{aI:function(){return i},k0:function(){return n.k0}});var n=r(38161),i=(r(73438),r(7176));r(22688),r(29094)},41232:function(t,e,r){"use strict";r.d(e,{_:function(){return i}});var n=r(81653);const i=async({cid:t,load:e,seen:r})=>{r=r||new Set;const s=t.toString(n.base58btc);if(r.has(s))return;const o=await e(t);if(r.add(s),null!==o)for(const[,t]of o.links())await i({cid:t,load:e,seen:r})}},73438:function(t,e,r){"use strict";r.d(e,{Jx:function(){return E},mL:function(){return v},P$:function(){return _}});var n=function t(e,r,n){r=r||[];var a=n=n||0;for(;e>=o;)r[n++]=255&e|i,e/=128;for(;e&s;)r[n++]=255&e|i,e>>>=7;return r[n]=0|e,t.bytes=n-a+1,r},i=128,s=-128,o=Math.pow(2,31);var a=function t(e,r){var n,i=0,s=0,o=r=r||0,a=e.length;do{if(o>=a)throw t.bytes=0,new RangeError("Could not decode varint");n=e[o++],i+=s<28?(n&u)<<s:(n&u)*Math.pow(2,s),s+=7}while(n>=c);return t.bytes=o-r,i},c=128,u=127;var l=Math.pow(2,7),h=Math.pow(2,14),d=Math.pow(2,21),f=Math.pow(2,28),p=Math.pow(2,35),g=Math.pow(2,42),y=Math.pow(2,49),m=Math.pow(2,56),w=Math.pow(2,63),b={encode:n,decode:a,encodingLength:function(t){return t<l?1:t<h?2:t<d?3:t<f?4:t<p?5:t<g?6:t<y?7:t<m?8:t<w?9:10}};const E=(t,e=0)=>[b.decode(t,e),b.decode.bytes],v=(t,e,r=0)=>(b.encode(t,e,r),e),_=t=>b.encodingLength(t)},53416:function(t,e,r){"use strict";r.d(e,{x0:function(){return n}});let n=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+=(e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_"),"")},85275:function(t,e,r){"use strict";function n(){const t={};return t.promise=new Promise(((e,r)=>{t.resolve=e,t.reject=r})),t}r.d(e,{Z:function(){return n}})},28364:function(t,e,r){"use strict";r.d(e,{Z:function(){return U}});var n=r(78939),i=r(71198);var s,o=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class a{constructor(){s.set(this,[])}enqueue(t,e){const r={priority:(e={priority:0,...e}).priority,run:t};if(this.size&&o(this,s,"f")[this.size-1].priority>=e.priority)return void o(this,s,"f").push(r);const n=function(t,e,r){let n=0,i=t.length;for(;i>0;){const s=Math.trunc(i/2);let o=n+s;r(t[o],e)<=0?(n=++o,i-=s+1):i=s}return n}(o(this,s,"f"),r,((t,e)=>e.priority-t.priority));o(this,s,"f").splice(n,0,r)}dequeue(){const t=o(this,s,"f").shift();return null==t?void 0:t.run}filter(t){return o(this,s,"f").filter((e=>e.priority===t.priority)).map((t=>t.run))}get size(){return o(this,s,"f").length}}s=new WeakMap;var c,u,l,h,d,f,p,g,y,m,w,b,E,v,_,S,A,R,T,I,C,k,N,B,P,L,D=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r},O=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class x extends Error{}class U extends n{constructor(t){var e,r,n,i;if(super(),c.add(this),u.set(this,void 0),l.set(this,void 0),h.set(this,0),d.set(this,void 0),f.set(this,void 0),p.set(this,0),g.set(this,void 0),y.set(this,void 0),m.set(this,void 0),w.set(this,void 0),b.set(this,0),E.set(this,void 0),v.set(this,void 0),_.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:a,...t}).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==r?r:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(n=t.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:""}\` (${typeof t.interval})`);D(this,u,t.carryoverConcurrencyCount,"f"),D(this,l,t.intervalCap===Number.POSITIVE_INFINITY||0===t.interval,"f"),D(this,d,t.intervalCap,"f"),D(this,f,t.interval,"f"),D(this,m,new t.queueClass,"f"),D(this,w,t.queueClass,"f"),this.concurrency=t.concurrency,this.timeout=t.timeout,D(this,_,!0===t.throwOnTimeout,"f"),D(this,v,!1===t.autoStart,"f")}get concurrency(){return O(this,E,"f")}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);D(this,E,t,"f"),O(this,c,"m",B).call(this)}async add(t,e={}){return e={timeout:this.timeout,throwOnTimeout:O(this,_,"f"),...e},new Promise(((r,n)=>{O(this,m,"f").enqueue((async()=>{var s,o,a;D(this,b,(o=O(this,b,"f"),++o),"f"),D(this,h,(a=O(this,h,"f"),++a),"f");try{if(null===(s=e.signal)||void 0===s?void 0:s.aborted)throw new x("The task was aborted.");let n=t({signal:e.signal});e.timeout&&(n=(0,i.ZP)(Promise.resolve(n),e.timeout)),e.signal&&(n=Promise.race([n,O(this,c,"m",P).call(this,e.signal)]));const o=await n;r(o),this.emit("completed",o)}catch(t){if(t instanceof i.W5&&!e.throwOnTimeout)return void r();n(t),this.emit("error",t)}finally{O(this,c,"m",R).call(this)}}),e),this.emit("add"),O(this,c,"m",C).call(this)}))}async addAll(t,e){return Promise.all(t.map((async t=>this.add(t,e))))}start(){return O(this,v,"f")?(D(this,v,!1,"f"),O(this,c,"m",B).call(this),this):this}pause(){D(this,v,!0,"f")}clear(){D(this,m,new(O(this,w,"f")),"f")}async onEmpty(){0!==O(this,m,"f").size&&await O(this,c,"m",L).call(this,"empty")}async onSizeLessThan(t){O(this,m,"f").size<t||await O(this,c,"m",L).call(this,"next",(()=>O(this,m,"f").size<t))}async onIdle(){0===O(this,b,"f")&&0===O(this,m,"f").size||await O(this,c,"m",L).call(this,"idle")}get size(){return O(this,m,"f").size}sizeBy(t){return O(this,m,"f").filter(t).length}get pending(){return O(this,b,"f")}get isPaused(){return O(this,v,"f")}}u=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,g=new WeakMap,y=new WeakMap,m=new WeakMap,w=new WeakMap,b=new WeakMap,E=new WeakMap,v=new WeakMap,_=new WeakMap,c=new WeakSet,S=function(){return O(this,l,"f")||O(this,h,"f")<O(this,d,"f")},A=function(){return O(this,b,"f")<O(this,E,"f")},R=function(){var t;D(this,b,(t=O(this,b,"f"),--t),"f"),O(this,c,"m",C).call(this),this.emit("next")},T=function(){O(this,c,"m",N).call(this),O(this,c,"m",k).call(this),D(this,y,void 0,"f")},I=function(){const t=Date.now();if(void 0===O(this,g,"f")){const e=O(this,p,"f")-t;if(!(e<0))return void 0===O(this,y,"f")&&D(this,y,setTimeout((()=>{O(this,c,"m",T).call(this)}),e),"f"),!0;D(this,h,O(this,u,"f")?O(this,b,"f"):0,"f")}return!1},C=function(){if(0===O(this,m,"f").size)return O(this,g,"f")&&clearInterval(O(this,g,"f")),D(this,g,void 0,"f"),this.emit("empty"),0===O(this,b,"f")&&this.emit("idle"),!1;if(!O(this,v,"f")){const t=!O(this,c,"a",I);if(O(this,c,"a",S)&&O(this,c,"a",A)){const e=O(this,m,"f").dequeue();return!!e&&(this.emit("active"),e(),t&&O(this,c,"m",k).call(this),!0)}}return!1},k=function(){O(this,l,"f")||void 0!==O(this,g,"f")||(D(this,g,setInterval((()=>{O(this,c,"m",N).call(this)}),O(this,f,"f")),"f"),D(this,p,Date.now()+O(this,f,"f"),"f"))},N=function(){0===O(this,h,"f")&&0===O(this,b,"f")&&O(this,g,"f")&&(clearInterval(O(this,g,"f")),D(this,g,void 0,"f")),D(this,h,O(this,u,"f")?O(this,b,"f"):0,"f"),O(this,c,"m",B).call(this)},B=function(){for(;O(this,c,"m",C).call(this););},P=async function(t){return new Promise(((e,r)=>{t.addEventListener("abort",(()=>{r(new x("The task was aborted."))}),{once:!0})}))},L=async function(t,e){return new Promise((r=>{const n=()=>{e&&!e()||(this.off(t,n),r())};this.on(t,n)}))}},71198:function(t,e,r){"use strict";r.d(e,{W5:function(){return n},ZP:function(){return a}});class n extends Error{constructor(t){super(t),this.name="TimeoutError"}}class i extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const s=t=>void 0===globalThis.DOMException?new i(t):new DOMException(t),o=t=>{const e=void 0===t.reason?s("This operation was aborted."):t.reason;return e instanceof Error?e:s(e)};function a(t,e,r,i){let s;const a=new Promise(((a,c)=>{if("number"!=typeof e||1!==Math.sign(e))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e!==Number.POSITIVE_INFINITY){if((i={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...i}).signal){const{signal:t}=i;t.aborted&&c(o(t)),t.addEventListener("abort",(()=>{c(o(t))}))}s=i.customTimers.setTimeout.call(void 0,(()=>{if("function"==typeof r){try{a(r())}catch(t){c(t)}return}const i=r instanceof Error?r:new n("string"==typeof r?r:`Promise timed out after ${e} milliseconds`);"function"==typeof t.cancel&&t.cancel(),c(i)}),e),(async()=>{try{a(await t)}catch(t){c(t)}finally{i.customTimers.clearTimeout.call(void 0,s)}})()}else a(t)}));return a.clear=()=>{clearTimeout(s),s=void 0},a}},32807:function(t,e,r){"use strict";r.d(e,{d:function(){return n}});class n extends Error{constructor(){super("End-Of-Stream")}}},53749:function(t,e,r){"use strict";r.d(e,{Z:function(){return h}});var n=r(28951),i=r(3287),s=r(49736),o=r(56512);const{isValid:a,parse:c}=o,u=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map((t=>new n.Netmask(t)));function l(t){return/^::$/.test(t)||/^::1$/.test(t)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}var h=t=>{if(a(t)){const e=c(t);if("ipv4"===e.kind())return function(t){for(let e of u)if(e.contains(t))return!0;return!1}(e.toNormalizedString());if("ipv6"===e.kind())return l(t)}else if((0,s.h6)(t)&&i.Z.v6().test(t))return l(t)}},46888:function(t,e,r){"use strict";r.d(e,{C6:function(){return h},LE:function(){return d},Ji:function(){return g},yw:function(){return y}});var n=r(7364),i=r(40922),s=r(98360),o=r(50062),a=r(89157);s._configure(),n._configure(i),o._configure(a);const c=["uint64","int64","sint64","fixed64","sfixed64"];function u(t){return function(t){for(const e of c){if(null==t[e])continue;const r=t[e];t[e]=function(){return BigInt(r.call(this).toString())}}return t}(new n(t))}function l(){return function(t){for(const e of c){if(null==t[e])continue;const r=t[e];t[e]=function(t){return r.call(this,t.toString())}}return t}(o.create())}function h(t,e){const r=u(t instanceof Uint8Array?t:t.subarray());return e.decode(r)}function d(t,e){const r=l();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var f;function p(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function g(t){function e(e){if(null==t[e.toString()])throw new Error("Invalid enum value");return t[e]}return p("enum",f.VARINT,(function(t,r){const n=e(t);r.int32(n)}),(function(t){return e(t.int32())}))}function y(t,e){return p("message",f.LENGTH_DELIMITED,t,e)}!function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"}(f||(f={}))},62794:function(t,e,r){"use strict";function n(t){if("object"!=typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)}function i(t,e={}){if(!n(t)&&!Array.isArray(t))throw new TypeError("Expected a plain object or array");const{deep:r,compare:i}=e,s=[],o=[],a=t=>{const e=s.indexOf(t);if(-1!==e)return o[e];const r=[];return s.push(t),o.push(r),r.push(...t.map((t=>Array.isArray(t)?a(t):n(t)?c(t):t))),r},c=t=>{const e=s.indexOf(t);if(-1!==e)return o[e];const u={},l=Object.keys(t).sort(i);s.push(t),o.push(u);for(const e of l){const i=t[e];let s;s=r&&Array.isArray(i)?a(i):r&&n(i)?c(i):i,Object.defineProperty(u,e,{...Object.getOwnPropertyDescriptor(t,e),value:s})}return u};return Array.isArray(t)?r?a(t):t.slice():c(t)}r.d(e,{Z:function(){return i}})},48574:function(t,e,r){"use strict";r.d(e,{Z:function(){return s}});var n=r(32807),i=r(48764);class s{constructor(t){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=t||{}}async readToken(t,e=this.position){const r=i.Buffer.alloc(t.len);if(await this.readBuffer(r,{position:e})<t.len)throw new n.d;return t.get(r,0)}async peekToken(t,e=this.position){const r=i.Buffer.alloc(t.len);if(await this.peekBuffer(r,{position:e})<t.len)throw new n.d;return t.get(r,0)}async readNumber(t){if(await this.readBuffer(this.numBuffer,{length:t.len})<t.len)throw new n.d;return t.get(this.numBuffer,0)}async peekNumber(t){if(await this.peekBuffer(this.numBuffer,{length:t.len})<t.len)throw new n.d;return t.get(this.numBuffer,0)}async ignore(t){if(void 0!==this.fileInfo.size){const e=this.fileInfo.size-this.position;if(t>e)return this.position+=e,e}return this.position+=t,t}async close(){}normalizeOptions(t,e){if(e&&void 0!==e.position&&e.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return e?{mayBeLess:!0===e.mayBeLess,offset:e.offset?e.offset:0,length:e.length?e.length:t.length-(e.offset?e.offset:0),position:e.position?e.position:this.position}:{mayBeLess:!1,offset:0,length:t.length,position:this.position}}}},49886:function(t,e,r){"use strict";r(48574),r(32807)},94565:function(t,e,r){"use strict";r.d(e,{hG:function(){return y}});var n=r(11067);const i=4294967296;class s{constructor(t=0,e=0){this.hi=t,this.lo=e}toBigInt(t){if(!0===t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!=0){const t=1+~this.lo>>>0;let e=~this.hi>>>0;return 0===t&&(e=e+1>>>0),-(BigInt(t)+(BigInt(e)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(t){return Number(this.toBigInt(t))}zzDecode(){const t=-(1&this.lo),e=((this.lo>>>1|this.hi<<31)^t)>>>0,r=(this.hi>>>1^t)>>>0;return new s(r,e)}zzEncode(){const t=this.hi>>31,e=((this.hi<<1|this.lo>>>31)^t)>>>0,r=(this.lo<<1^t)>>>0;return new s(e,r)}toBytes(t,e=0){const r=(0,n.Z)(t);for(;this.hi>0;)r.set(e++,127&this.lo|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)r.set(e++,127&this.lo|128),this.lo=this.lo>>>7;r.set(e++,this.lo)}static fromBigInt(t){if(0n===t)return new s;const e=t<0;e&&(t=-t);let r=0|Number(t>>32n),n=0|Number(t-(BigInt(r)<<32n));return e&&(r=~r>>>0,n=~n>>>0,++n>i&&(n=0,++r>i&&(r=0))),new s(r,n)}static fromNumber(t){if(0===t)return new s;const e=t<0;e&&(t=-t);let r=t>>>0,n=(t-r)/4294967296>>>0;return e&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new s(n,r)}static fromBytes(t,e=0){const r=(0,n.Z)(t),i=new s;let o=0;if(t.length-e>4){for(;o<4;++o)if(i.lo=(i.lo|(127&r.get(e))<<7*o)>>>0,r.get(e++)<128)return i;if(i.lo=(i.lo|(127&r.get(e))<<28)>>>0,i.hi=(i.hi|(127&r.get(e))>>4)>>>0,r.get(e++)<128)return i;o=0}else for(;o<4;++o){if(e>=t.length)throw RangeError(`index out of range: ${e} > ${t.length}`);if(i.lo=(i.lo|(127&r.get(e))<<7*o)>>>0,r.get(e++)<128)return i}if(t.length-e>4){for(;o<5;++o)if(i.hi=(i.hi|(127&r.get(e))<<7*o+3)>>>0,r.get(e++)<128)return i}else if(e<t.byteLength)for(;o<5;++o){if(e>=t.length)throw RangeError(`index out of range: ${e} > ${t.length}`);if(i.hi=(i.hi|(127&r.get(e))<<7*o+3)>>>0,r.get(e++)<128)return i}throw RangeError("invalid varint encoding")}}var o=r(66574);const a=Math.pow(2,7),c=Math.pow(2,14),u=Math.pow(2,21),l=Math.pow(2,28),h=Math.pow(2,35),d=Math.pow(2,42),f=Math.pow(2,49),p=Math.pow(2,56),g=Math.pow(2,63),y={encodingLength:t=>t<a?1:t<c?2:t<u?3:t<l?4:t<h?5:t<d?6:t<f?7:t<p?8:t<g?9:10,encode(t,e,r=0){if(null!=Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return null==e&&(e=(0,o.E)(y.encodingLength(t))),s.fromNumber(t).toBytes(e,r),e},decode:(t,e=0)=>s.fromBytes(t,e).toNumber(!0)}},62308:function(t,e,r){"use strict";r.d(e,{H:function(){return u},Z:function(){return c}});var n=r(41690),i=r(73062),s=r(66574);const o=Symbol.for("@achingbrain/uint8arraylist");function a(t,e){if(null==e||e<0)throw new RangeError("index is out of bounds");let r=0;for(const n of t){const t=r+n.byteLength;if(e<t)return{buf:n,index:e-r};r=t}throw new RangeError("index is out of bounds")}function c(t){return Boolean(t?.[o])}class u{constructor(...t){Object.defineProperty(this,o,{value:!0}),this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let e=0;for(const r of t)if(r instanceof Uint8Array)e+=r.byteLength,this.bufs.push(r);else{if(!c(r))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");e+=r.byteLength,this.bufs.push(...r.bufs)}this.length+=e}prepend(...t){this.prependAll(t)}prependAll(t){let e=0;for(const r of t.reverse())if(r instanceof Uint8Array)e+=r.byteLength,this.bufs.unshift(r);else{if(!c(r))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");e+=r.byteLength,this.bufs.unshift(...r.bufs)}this.length+=e}get(t){const e=a(this.bufs,t);return e.buf[e.index]}set(t,e){const r=a(this.bufs,t);r.buf[r.index]=e}write(t,e=0){if(t instanceof Uint8Array)for(let r=0;r<t.length;r++)this.set(e+r,t[r]);else{if(!c(t))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let r=0;r<t.length;r++)this.set(e+r,t.get(r))}}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength)return this.bufs=[],void(this.length=0);for(;this.bufs.length>0;){if(!(t>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}slice(t,e){const{bufs:r,length:i}=this._subList(t,e);return(0,n.z)(r,i)}subarray(t,e){const{bufs:r,length:i}=this._subList(t,e);return 1===r.length?r[0]:(0,n.z)(r,i)}sublist(t,e){const{bufs:r,length:n}=this._subList(t,e),i=new u;return i.length=n,i.bufs=r,i}_subList(t,e){if(t=t??0,e=e??this.length,t<0&&(t=this.length+t),e<0&&(e=this.length+e),t<0||e>this.length)throw new RangeError("index is out of bounds");if(t===e)return{bufs:[],length:0};if(0===t&&e===this.length)return{bufs:[...this.bufs],length:this.length};const r=[];let n=0;for(let i=0;i<this.bufs.length;i++){const s=this.bufs[i],o=n,a=o+s.byteLength;if(n=a,t>=a)continue;const c=t>=o&&t<a,u=e>o&&e<=a;if(c&&u){if(t===o&&e===a){r.push(s);break}const n=t-o;r.push(s.subarray(n,n+(e-t)));break}if(c){if(0===t){r.push(s);continue}r.push(s.subarray(t-o))}else{if(u){if(e===a){r.push(s);break}r.push(s.subarray(0,e-o));break}r.push(s)}}return{bufs:r,length:e-t}}indexOf(t,e=0){if(!(c(t)||t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const r=t instanceof Uint8Array?t:t.subarray();if(e=Number(e??0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const n=r.byteLength;if(0===n)throw new TypeError("search must be at least 1 byte long");const i=new Int32Array(256);for(let t=0;t<256;t++)i[t]=-1;for(let t=0;t<n;t++)i[r[t]]=t;const s=i,o=this.byteLength-r.byteLength,a=r.byteLength-1;let u;for(let t=e;t<=o;t+=u){u=0;for(let e=a;e>=0;e--){const n=this.get(t+e);if(r[e]!==n){u=Math.max(1,e-s[n]);break}}if(0===u)return t}return-1}getInt8(t){const e=this.subarray(t,t+1);return new DataView(e.buffer,e.byteOffset,e.byteLength).getInt8(0)}setInt8(t,e){const r=(0,s.E)(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt8(0,e),this.write(r,t)}getInt16(t,e){const r=this.subarray(t,t+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt16(0,e)}setInt16(t,e,r){const n=(0,s.u)(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt16(0,e,r),this.write(n,t)}getInt32(t,e){const r=this.subarray(t,t+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt32(0,e)}setInt32(t,e,r){const n=(0,s.u)(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt32(0,e,r),this.write(n,t)}getBigInt64(t,e){const r=this.subarray(t,t+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigInt64(0,e)}setBigInt64(t,e,r){const n=(0,s.u)(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigInt64(0,e,r),this.write(n,t)}getUint8(t){const e=this.subarray(t,t+1);return new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0)}setUint8(t,e){const r=(0,s.E)(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint8(0,e),this.write(r,t)}getUint16(t,e){const r=this.subarray(t,t+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint16(0,e)}setUint16(t,e,r){const n=(0,s.u)(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint16(0,e,r),this.write(n,t)}getUint32(t,e){const r=this.subarray(t,t+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint32(0,e)}setUint32(t,e,r){const n=(0,s.u)(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,e,r),this.write(n,t)}getBigUint64(t,e){const r=this.subarray(t,t+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigUint64(0,e)}setBigUint64(t,e,r){const n=(0,s.u)(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigUint64(0,e,r),this.write(n,t)}getFloat32(t,e){const r=this.subarray(t,t+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(0,e)}setFloat32(t,e,r){const n=(0,s.u)(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat32(0,e,r),this.write(n,t)}getFloat64(t,e){const r=this.subarray(t,t+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(0,e)}setFloat64(t,e,r){const n=(0,s.u)(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat64(0,e,r),this.write(n,t)}equals(t){if(null==t)return!1;if(!(t instanceof u))return!1;if(t.bufs.length!==this.bufs.length)return!1;for(let e=0;e<this.bufs.length;e++)if(!(0,i.f)(this.bufs[e],t.bufs[e]))return!1;return!0}static fromUint8Arrays(t,e){const r=new u;return r.bufs=t,null==e&&(e=t.reduce(((t,e)=>t+e.byteLength),0)),r.length=e,r}}},66574:function(t,e,r){"use strict";r.d(e,{E:function(){return s},u:function(){return i}});var n=r(93304);function i(t=0){return null!=globalThis.Buffer?.alloc?(0,n.P)(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function s(t=0){return null!=globalThis.Buffer?.allocUnsafe?(0,n.P)(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}},20295:function(t,e,r){"use strict";function n(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}r.d(e,{q:function(){return n}})},41690:function(t,e,r){"use strict";r.d(e,{z:function(){return s}});var n=r(66574),i=r(93304);function s(t,e){null==e&&(e=t.reduce(((t,e)=>t+e.length),0));const r=(0,n.E)(e);let s=0;for(const e of t)r.set(e,s),s+=e.length;return(0,i.P)(r)}},73062:function(t,e,r){"use strict";function n(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}r.d(e,{f:function(){return n}})},77408:function(t,e,r){"use strict";r.d(e,{m:function(){return s}});var n=r(13353),i=r(93304);function s(t,e="utf8"){const r=n.Z[e];if(null==r)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${t}`):(0,i.P)(globalThis.Buffer.from(t,"utf-8"))}},738:function(t,e,r){"use strict";r.d(e,{BB:function(){return s.B},fS:function(){return n.f},mL:function(){return i.m}});var n=r(73062),i=r(77408),s=r(49784)},49784:function(t,e,r){"use strict";r.d(e,{B:function(){return i}});var n=r(13353);function i(t,e="utf8"){const r=n.Z[e];if(null==r)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(t).substring(1):globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}},93304:function(t,e,r){"use strict";function n(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}r.d(e,{P:function(){return n}})},13353:function(t,e,r){"use strict";var n=r(97098),i=r(66574);function s(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const o=s("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),a=s("ascii","a",(t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}),(t=>{t=t.substring(1);const e=(0,i.E)(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e})),c={utf8:o,"utf-8":o,hex:n.gh.base16,latin1:a,ascii:a,binary:a,...n.gh};e.Z=c},14560:function(t,e,r){"use strict";r.d(e,{$l:function(){return a},UG:function(){return u},b$:function(){return h},iP:function(){return c},jU:function(){return o},n2:function(){return l}});var n=r(59134);const i="object"==typeof window&&"object"==typeof document&&9===document.nodeType,s=n(),o=i&&!s,a=s&&!i,c=s&&i,u=void 0!==globalThis.process&&void 0!==globalThis.process.release&&"node"===globalThis.process.release.name&&!s,l="function"==typeof importScripts&&"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,h=(void 0!==globalThis.process&&void 0!==globalThis.process.env&&globalThis.process.env.NODE_ENV,"undefined"!=typeof navigator&&"ReactNative"===navigator.product)}}]);
//# sourceMappingURL=607.aa698d38.js.map